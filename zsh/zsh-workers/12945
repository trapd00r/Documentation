From zsh-workers-return-12945-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Oct 10 13:35:36 2000
Return-Path: <zsh-workers-return-12945-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4476 invoked from network); 10 Oct 2000 13:35:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Oct 2000 13:35:34 -0000
Received: (qmail 24345 invoked by alias); 10 Oct 2000 13:35:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12945
Received: (qmail 24332 invoked from network); 10 Oct 2000 13:34:59 -0000
Date: Tue, 10 Oct 2000 15:34:54 +0200 (MET DST)
Message-Id: <200010101334.PAA23795@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Tue, 10 Oct 2000 10:31:38 +0200
	(MET DST)
Subject: Re: PATCH: Re: Option completion after "nono"


Slightly misplaced. Sorry.

Bye
 Sven

Index: Src/Zle/compmatch.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/compmatch.c,v
retrieving revision 1.25
diff -u -r1.25 compmatch.c
--- Src/Zle/compmatch.c	2000/10/10 08:36:34	1.25
+++ Src/Zle/compmatch.c	2000/10/10 13:34:14
@@ -843,6 +843,9 @@
 	    he = 0;
 	} else {
 
+	    if (!lw)
+		break;
+
 	    if (exact) {
 		/* If we just accepted some characters directly (at the
 		 * beginning of the loop) and now can't match any further,
@@ -858,9 +861,6 @@
 
 		goto retry;
 	    }
-
-	    if (!lw)
-		break;
 	    /* No matcher and different characters: l does not match w. */
 	    if (test)
 		return 0;

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


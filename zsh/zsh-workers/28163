From zsh-workers-return-28163-mason-zsh=primenet.com.au@zsh.org Fri Aug 13 08:08:24 2010
Return-Path: <zsh-workers-return-28163-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3995 invoked by alias); 13 Aug 2010 08:08:24 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28163
Received: (qmail 19847 invoked from network); 13 Aug 2010 08:08:22 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.161.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:cc:subject
         :message-id:references:mime-version:content-type:content-disposition
         :in-reply-to:user-agent;
        bh=p9YA+jwzC3++u379/Xdl671w3aIhjQiwy4KJtiHXjas=;
        b=lSgbr7x1ehTV2mh+bg2as7982/JXG7Pnwl/hXM1Cauh3c9VkXOAs6+xN0o5SiHoF+g
         2jigiFAi352OHbgay5qQRjBM7r95EGv9JuF8uNC/2zr3cOe2p/F8NaqS4v6bJ5bzgOph
         sqmHZvHE+khN+7WOo330wxxNckuaY66q3Dxps=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=date:from:to:cc:subject:message-id:references:mime-version
         :content-type:content-disposition:in-reply-to:user-agent;
        b=tJDFBV2Bgil4uS1SLAhEBmQb+MVy5jWBDDQKLTy30r0BrwRvB4kKtPjUvT4mG1ldQh
         nCsqyW8TYXc2L7lhCD8kPM/A++GCgeF2GsEOH0m7PVl62swJzGfJUxJhoGm08vYtkems
         0IH/+FBZ6amlw11FBGn0Zk1JQgKIlnGRsFYHk=
Date: Fri, 13 Aug 2010 10:08:11 +0200
From: Philipp Hartwig <ph.hartwig@googlemail.com>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers mailing list <zsh-workers@zsh.org>
Subject: Re: segfault on menu-select
Message-ID: <20100813080811.GB495@ph>
References: <20100812144626.GI28144@ph>
 <8762zf6fwo.fsf@ft.bewatermyfriend.org>
 <20100812152044.GJ28144@ph>
 <87wrrv4yrg.fsf@ft.bewatermyfriend.org>
 <20100812165307.GA24998@ph>
 <87r5i34v51.fsf@ft.bewatermyfriend.org>
 <20100812173356.GC24998@ph>
 <100812160702.ZM20648@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="k+w/mQv8wyuph6w0"
Content-Disposition: inline
In-Reply-To: <100812160702.ZM20648@torch.brasslantern.com>
User-Agent: Mutt/1.5.20 (2009-06-14)

--k+w/mQv8wyuph6w0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

> So I can force my shell through that same branch by hitting ^o in a
> directory containing exactly one file, but I still don't get a crash.
>=20
> What does "ls" show just before you begin completing?

It's independent of that, it also works in an empty directory as I've=20
just checked.

Note that in order to reproduce the issue it really seems to be=20
necessary to have the 4 lines

autoload -Uz compinit
compinit
zmodload -i zsh/complist
bindkey '^o' menu-select

in your .zshrc. Just typing them or sourcing a file containing them will=20
not lead to the crash in my case, even without the "-f" option. Instead=20
I get a browsable list of all the files in the directory as it is=20
supposed to be.

--k+w/mQv8wyuph6w0
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEARECAAYFAkxk/WcACgkQiTx0ar4roGRZjACgl5SpLaEw5+Bh4ivNhkmZauWd
vYEAn2enzJVgCZdali/uMsh2D4F9DQw7
=Surb
-----END PGP SIGNATURE-----

--k+w/mQv8wyuph6w0--


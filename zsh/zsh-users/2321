From zsh-users-return-2321-mason-zsh=primenet.com.au@sunsite.auc.dk Thu May 06 17:43:43 1999
Return-Path: <zsh-users-return-2321-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9432 invoked from network); 6 May 1999 17:43:42 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 May 1999 17:43:42 -0000
Received: (qmail 20394 invoked by alias); 6 May 1999 17:43:17 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2321
Received: (qmail 20385 invoked from network); 6 May 1999 17:43:16 -0000
Date: Thu, 6 May 1999 12:40:16 -0500
From: "Larry P. Schrof" <schrof@cig.mot.com>
To: zsh-users@sunsite.auc.dk
Subject: Re: howto: no space after completion (this used to work in 3.0.5!!!!)
Message-ID: <19990506124016.A3638@lyric.cig.mot.com>
References: <199905061517.RAA10487@beta.informatik.hu-berlin.de> <199905061552.LAA16600@ocalhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.1i
In-Reply-To: <199905061552.LAA16600@ocalhost>; from Timothy J Luoma on Thu, May 06, 1999 at 11:52:49AM -0400

> I have a folder /LocalApps
> 
> it has an alias $lapps

Normally, I'm not picky on terminology, BUT, I believe you meant to use
'paramter' instead of 'alias'.

> 
> when I do
> 
> # cd $la[tab]
> 
> I get
> 
> # cd $lapps [cursor here]
> 
> but I actually want
> 
> # cd $lapps/[cursor here]
> 
> so I can use tab-completion to get the listing of all the files inside $lapps

All of the relevant options you list below seem to be set appropriately.
Be sure to check, however, that /LocalApps actually exists on the system.
If it does not, zsh will not expand the parameter as a directory.
(IE, with a trailing slash and no space).

Generalizing this observation:

Zsh will only expand a parameter to a directory (trailing slash) if the
directory exists RELATIVE TO THE CURRENT PATH. So, if there is a 'loc'
directory in my home directory, but NOT in /, you get the following:

lyric[220]: cd
lyric[221]: DIR="loc"
lyric[222]: cd $DI[TAB]		# yields $DIR/
lyric[222]: cd /		# 'loc' doesn't exist under /
lyric[223]: cd $DI[TAB]		# yields $DIR

As implied above, several options have to be set correctly to do the
expansion in the first place, and have the cursor placed where it is.
But you already have them set up correctly.

Let me know if this helps or not.

PS. Now what would be cool is if someone took the time to write a
completion function that would examine the permissions on directories
and only complete on directories that fell under a specific set of
permissions and ownership. (For example, use a
complete-executable-dirs function to complete cd with)


> 
> 
> (	again that WORKS in 3.0.5	)
> 
> 
> So actually I don't want to remove the space, I want the 3.0.5 behavior to  
> be restored.
> 
> Here are my setopts in case it matters
> 
> AUTO_PARAM_SLASH AUTO_RESUME ALWAYS_TO_END APPEND_HISTORY AUTO_CD AUTO_LIST  
> AUTO_NAME_DIRS AUTO_PARAM_KEYS AUTO_PUSHD AUTO_REMOVE_SLASH BG_NICE BRACE_CCL  
> CDABLE_VARS COMPLETE_IN_WORD CORRECT CSH_JUNKIE_HISTORY EXTENDED_GLOB  
> HASH_CMDS HASH_DIRS HASH_LIST_ALL HIST_IGNORE_DUPS HIST_IGNORE_SPACE  
> HIST_NO_STORE HIST_VERIFY IGNORE_EOF ALWAYS_LAST_PROMPT LIST_AMBIGUOUS  
> LIST_TYPES LONG_LIST_JOBS MAGIC_EQUAL_SUBST MARK_DIRS MENU_COMPLETE  
> NO_BAD_PATTERN NO_BEEP NO_CLOBBER NO_FLOW_CONTROL NO_HUP NO_LIST_BEEP NOTIFY  
> NUMERIC_GLOB_SORT PRINT_EXIT_VALUE PROMPT_SUBST PUSHD_IGNORE_DUPS  
> PUSHD_SILENT PUSHD_TO_HOME RC_EXPAND_PARAM RC_QUOTES
> 


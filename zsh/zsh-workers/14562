From zsh-workers-return-14562-mason-zsh=primenet.com.au@sunsite.dk Wed May 30 09:22:05 2001
Return-Path: <zsh-workers-return-14562-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8859 invoked from network); 30 May 2001 09:22:04 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 May 2001 09:22:04 -0000
Received: (qmail 5761 invoked by alias); 30 May 2001 09:21:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14562
Received: (qmail 5748 invoked from network); 30 May 2001 09:21:57 -0000
Message-ID: <Tc0a88d0153d5a3480d@mailsweeper01.cambridgesiliconradio.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: PATCH: Block device tests 
In-reply-to: ""Bart Schaefer""'s message of "Tue, 29 May 2001 15:37:55 -0000."
             <1010529153756.ZM13431@candle.brasslantern.com> 
Date: Wed, 30 May 2001 10:21:26 +0100
From: Peter Stephenson <pws@csr.com>

"Bart Schaefer" wrote:
> On May 29, 11:34am, Peter Stephenson wrote:
> } Subject: Re: PATCH: Block device tests
> }
> } "Bart Schaefer" wrote:
> } > +  if ! grep '#define HAVE_FIFOS' $ZTST_testdir/../config.h; then
> } 
> } $ZTST_testdir is where we are running the tests.  Unfortunately this will
> } break if you are compiling separately from the source tree and then running
> } individual tests in the test directory
> 
> There are several other tests which rely on using a path relative to
> $ZTST_testdir:

The point was a little different: that config.h now has to be findable with
respect to wherever you're running the test, which therefore has to be the
Test subdirectory of the build.  Up to now, you could use the Test
subdirectory of the source tree, if different --- or anywhere else if you
adapted the path to the files in the latter directory.

On balance, it may be an advantage doing it this way: if we implement a way
of saying what's not implemented and hence shouldn't be checked on certain
systems, that's certainly going to have to go through one of the config.*
files.  In fact, we might get away with sourcing config.cache, and testing
the cv variables.  I won't be looking at that before the release.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


From zsh-workers-return-8561-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Nov 05 09:19:48 1999
Return-Path: <zsh-workers-return-8561-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18090 invoked from network); 5 Nov 1999 09:19:46 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Nov 1999 09:19:46 -0000
Received: (qmail 29145 invoked by alias); 5 Nov 1999 09:19:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8561
Received: (qmail 29138 invoked from network); 5 Nov 1999 09:19:41 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991105091919.ZM29481@candle.brasslantern.com>
Date: Fri, 5 Nov 1999 09:19:19 +0000
In-Reply-To: <3821DA96.47D9E718@u.genie.co.uk>
Comments: In reply to Oliver Kiddle <opk@u.genie.co.uk>
        "PATCH: AIX .export files" (Nov  4,  7:12pm)
References: <3821DA96.47D9E718@u.genie.co.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: AIX .export files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 4,  7:12pm, Oliver Kiddle wrote:
} Subject: PATCH: AIX .export files
}
} I had a go at compiling 3.1.6-bart-8 on AIX. The first problem I had
} was with the standard AIX awk. I got this error:
} 
}  awk -f ../../Src/makepro.awk parameter.c Src/Modules > parameter.pro
} awk: 0602-564 Format item static void shempty  cannot be longer than
} 3,000 bytes.

This appears to refer to the awk-variable `local' which is being printed
during the END block, and which has accumulated all the static function
prototypes during processing of the file.

Possible solutions:

(1) Try using
	printf "%s", locals
    on line 149 of makepro.awk.
(2) Reorder the functions so as many as possible are defined before they
    are referenced, and then remove the /**/ from all except those that
    cannot be so ordered.
(3) Break up parameter.c into several files.
(4) Rewrite makepro.awk to avoid accumulating all the function def'n's
    before printing any of them, thus producing uglier .pro files.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-users-return-14694-mason-zsh=primenet.com.au@zsh.org Mon Dec 28 23:06:42 2009
Return-Path: <zsh-users-return-14694-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28395 invoked by alias); 28 Dec 2009 23:06:42 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14694
Received: (qmail 8161 invoked from network); 28 Dec 2009 23:06:29 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	MIME_QP_LONG_LINE autolearn=no version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at yahoo.com does not designate permitted sender hosts)
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 260133.99962.bm@omp118.mail.ac4.yahoo.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1262041255; bh=+ukpZ+oMqdaw0msslahID97+WsczLo4dJCGvF4C6jOk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=lj0uk1OluUnxRbnJo2OPKx423eb09woREvhErkI3v6W2uTaRrsbS87Drztg3oscKOwrt/LDj7nTn8F3pt2vekqHS7ySAFzhE/YLMEcf31wV3vdOQXaBNJuQ9T+NuQVkzRBhljX5moMD5D95VOEXPVvukfa5FT8Tj+Dkjxmc9Vr0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1BKr1jl5AAgR2wPgWxnMz+6KKNnjlNi//BqXqdeToHHkL9ufxDsJZ7g/x5dLjJoyqaFUm87LNlK6yU53WPuwGxk5FiOxvWNJd7pUbv9PhYld6LHuSL0gatU2vV0WRkOrNtpyVwMgupRpwn0SY3hc8oS5NghfE2g/UgbmMDWgr8E=;
Message-ID: <984684.28644.qm@web65607.mail.ac4.yahoo.com>
X-YMail-OSG: oFmyUdUVM1nURzhEBvl..Nt7iVs9K9VE.pp8wOnAKBdJdTut3t8S0SMLCqadV.tfaUQVwXJhk0_iAodu.oVd74dw23oPBOEjAC5ioRoakI7FB9ymbRz6MZEd3215S.breutl_Y8ty6dlX6DkBArXOeFnCh8x7VdD7RQdK1S8I3LyOOtMG2RpW9S__U7.cukAIuReq6KysLi2UKd54qADdtbQUCfIQNFO91bJt1hRegwu3foeCJYOYkWUCy4pPy3CTZxo6n9tbR_zKeTbhfAQVtTPqtWS3bLwkTWI3iCVZBDQYN8sbqkh6Mf0rUioyDBo9QrupO4EueNOLgHonxobS85XSDcFwC6_MzmuLRbIwX8DPd.OFD1iF11lG0xVE3A5N6x74S4yOdssXOERxBg_xIPu.nPQhKFPInWHaWXnMg4gM_EhsC4nvWKrq4L8BY2jm7Z32iZ3VPShsixIwoF.gc6WvD.eBW11lxRPikd22cwGsOgQY8GSB_KE3zppjT5aoyvItQoaLj9Y1LNS6XMFIn5WckhcGXUrK8gdOMfwiwDhc33l2bvltyDqvPI-
X-Mailer: YahooMailClassic/9.0.20 YahooMailWebService/0.8.100.260964
Date: Mon, 28 Dec 2009 15:00:55 -0800 (PST)
From: Guido van Steen <gvsteen@yahoo.com>
Subject: Re: Encrypting history?
To: Lloyd Zusman <ljz@asfast.com>
Cc: zsh-users@zsh.org
In-Reply-To: <m2y6ko6ya5.fsf@asfast.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Lloyd, =0A=0AWith respect to the list of commands issued during=0Athe cu=
rrent session, could you not use "fc -l" to detect the current history line=
 at login? =0A=0AGuido =0A=0A--- On Mon, 28/12/09, Lloyd Zusman <ljz@asfast=
..com> wrote:=0A=0A> From: Lloyd Zusman <ljz@asfast.com>=0A> Subject: Re: En=
crypting history?=0A> To: zsh-users@zsh.org=0A> Date: Monday, 28 December, =
2009, 1:56 AM=0A> Guido van Steen <gvsteen@yahoo.com>=0A> writes:=0A> =0A> =
> Hi Lloyd, =0A> >=0A> > Interesting idea indeed! You might miss a feature =
like=0A> sharing a history file across sessions. =0A> >=0A> > You could ove=
rcome this by seperately saving all your=0A> sessions' increments to your h=
istory file, and then=0A> incorporating them into the history file when you=
 login=0A> again. =0A> >=0A> > This way the entries of your history file mi=
ght get=0A> out of order, but you could probably handle this by also=0A> sa=
ving the time when your commands were issued. =0A> >=0A> > I would also be =
interested in a zsh extension like=0A> that. =0A> >=0A> > Best wishes, =0A>=
 >=0A> > Guido =0A> =0A> Thank you for reminding me about sharing history a=
cross=0A> sessions.=0A> =0A> I've never written an extension for zsh, and s=
o the first=0A> thing I plan=0A> to do is implement this via code in my .zl=
ogin and .zlogout=0A> files. Then,=0A> once I get it working, I'll take the=
 plunge and try to turn=0A> it into an=0A> extension.=0A> =0A> Concerning t=
his session-specific history issue, is there a=0A> way to get a=0A> history=
 list of the commands that were issued only during=0A> the current=0A> sess=
ion? If so, I think I probably could do something like=0A> this upon=0A> lo=
gout:=0A> =0A> * Lock the current history file=0A> * Get the history list f=
or the current session=0A> * Encrypt this history list and append it to the=
 current=0A> =A0 history file=0A> * Unlock the current history file=0A> =0A=
> Would that work?=0A> =0A> =0A> =0A> > --- On Sun, 27/12/09, Lloyd Zusman =
<ljz@asfast.com>=0A> wrote:=0A> >=0A> >> From: Lloyd Zusman <ljz@asfast.com=
>=0A> >> Subject: Encrypting history?=0A> >> To: zsh-users@zsh.org=0A> >> D=
ate: Sunday, 27 December, 2009, 5:55 AM=0A> >> I would like my command hist=
ory to be=0A> >> stored in an encrypted file. I=0A> >> have read a few mess=
ages in this list from 2007=0A> which state=0A> >> that there=0A> >> isn't =
a straightforward way to do this within zsh,=0A> itself,=0A> >> and the use=
=0A> >> of an encrypted file system is suggested.=0A> >> =0A> >> However, I=
 think that there might indeed be a way=0A> to=0A> >> accomplish this.=0A> =
>> =0A> >> Is it possible to do the following?=0A> >> =0A> >> Make sure tha=
t SAVEHIST is set to 0.=0A> >> =0A> >> Then, on login, prompt the user for =
a password.=0A> Remember=0A> >> this password=0A> >> for the duration of th=
e shell session. Then, use=0A> this=0A> >> password along=0A> >> with a dec=
ryption program to read an encrypted=0A> history file=0A> >> called, for=0A=
> >> example, ~/.ehistory. Put the decrypted contents=0A> of this=0A> >> fi=
le into the=0A> >> current shell's history list via the repeated use=0A> of=
 the=0A> >> "print -s"=0A> >> command.=0A> >> =0A> >> Finally, on logout, p=
ipe the output of "fc -ln 1"=0A> through a=0A> >> program=0A> >> which uses=
 the same password entered at login time=0A> to=0A> >> encrypt the=0A> >> h=
istory and write it to the ~/.ehistory file.=0A> >> =0A> >> Can any of you =
see any reason for why this would=0A> not work?=0A> >> =0A> >> Or alternati=
vely, is there perhaps a better way to=0A> do this=0A> >> within zsh?=0A> >=
> =0A> >> Thanks in advance.=0A> >> =A0 =0A> >> =0A> >> -- =0A> >>=A0 Lloyd=
 Zusman=0A> >>=A0 ljz@asfast.com=0A> >>=A0 God bless you.=0A> >> =0A> >> =
=0A> >=0A> >=0A> >=A0 =A0 =A0=A0=A0Get your new Email=0A> address!=0A> > Gr=
ab the Email name you've always wanted before=0A> someone else does!=0A> > =
http://mail.promotions.yahoo.com/newdomains/aa/=0A> >=0A> >=0A> =0A> -- =0A=
>  Lloyd Zusman=0A>  ljz@asfast.com=0A>  God bless you.=0A> =0A> =0A=0A=0A =
     Get your preferred Email name!=0ANow you can @ymail.com and @rocketmai=
l.com. =0Ahttp://mail.promotions.yahoo.com/newdomains/aa/


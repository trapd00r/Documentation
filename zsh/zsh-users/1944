From zsh-workers-request@math.gatech.edu Tue Dec 01 18:31:03 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20267 invoked from network); 1 Dec 1998 18:31:02 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 1 Dec 1998 18:31:02 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id NAA20539;
	Tue, 1 Dec 1998 13:27:14 -0500 (EST)
Resent-Date: Tue, 1 Dec 1998 13:26:56 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <981201102453.ZM5889@candle.brasslantern.com>
Date: Tue, 1 Dec 1998 10:24:52 -0800
In-Reply-To: <19981201105507.D6080@astaroth.nit.gwu.edu>
Comments: In reply to Sweth Chandramouli <sweth@astaroth.nit.gwu.edu>
        "Re: cdablevars and cd completion in 3.1.5" (Dec  1, 10:55am)
References: <000c01be1c7e$517212c0$21c9ca95@mowp.siemens.ru> 
	<981201041139.ZM4628@candle.brasslantern.com> 
	<19981201105507.D6080@astaroth.nit.gwu.edu>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Sweth Chandramouli <sweth@astaroth.nit.gwu.edu>,
        ZSH users mailing list <zsh-users@math.gatech.edu>
Subject: Re: cdablevars and cd completion in 3.1.5
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"LsWbH3.0.F05.eJ3Ps"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1944
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Dec 1, 10:55am, Sweth Chandramouli wrote:
} Subject: Re: cdablevars and cd completion in 3.1.5
}
} > (the difference being that the 3.0.5 completion returns directories that
} > begin with a "." anytime there are no other matching directories, whereas
} > the -/ completion always requires that the "." be explicitly typed).
} 
} 	i'm running 3.1.4, with "compctl -g '*(-/)' cd pushd", and i
} get tab completion on all matching directories, including ones with
} dot-prefixes, even if not explicitly typed... i just checked, and i
} get the same behaviour with just "compctl -/ cd pushd".

It sounds like you have the globdots option set.

} the manpage
} for zshcompctl describes the -/ flag as completing "Just filesystem
} paths"; what about that would imply that dot-prefixes should not be
} included?

Nothing except that dot-prefixed files are traditionally hidden from
globbing and ls and so forth, so -/ continues the trend.

} is the behaviour you describe a change in 3.1.5?

It's not a behavior change.

} > zsh% cd HE
} >          ^
} > 	 With cursor here, this calls cdmatch and completes HOME/.
} > zsh% cd HOME/zn
} >               ^
} > 	      with the cursor here, I can complete to HOME/zshfun.
} 
} 	at first, i assumed you meant $HOME and not just HOME.  some
} further checking, however, shows that zsh seems to do a check of
} environment variables if you try to cd to a directory that is not in
} your path and not a named directory, and if it finds a matching env.
} var., it implicitly names the corresponding directory:

Any variable whose value begins with a / character, not just environment
variables; but only if you have the cdablevars option set, which it seems
you do.

} 	my tab-completion doesn't work at all against named directories
} unless i've explicitly prefixed them with a ~ (e.g. "cd ~sw<TAB>" to
} get "cd sweth", vs. "cd sw<TAB>", which does nothing)

That's correct; the whole point of my posting was to cause completion
to work even without the leading tilde, just for people who want to
use cdablevars.  I admit it's probably not all that widely useful.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-users-return-9507-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 18 02:40:42 2005
Return-Path: <zsh-users-return-9507-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29087 invoked from network); 18 Oct 2005 02:30:19 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Oct 2005 02:30:19 -0000
Received: (qmail 2835 invoked from network); 18 Oct 2005 02:30:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Oct 2005 02:30:05 -0000
Received: (qmail 3496 invoked by alias); 18 Oct 2005 02:29:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9507
Received: (qmail 3487 invoked from network); 18 Oct 2005 02:29:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Oct 2005 02:29:56 -0000
Received: (qmail 1733 invoked from network); 18 Oct 2005 02:29:56 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 18 Oct 2005 02:29:54 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0IOJ00910AXRKVQ1@vms042.mailsrvcs.net> for
 zsh-users@sunsite.dk; Mon, 17 Oct 2005 21:29:53 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j9I2Tn0L030952	for
 <zsh-users@sunsite.dk>; Mon, 17 Oct 2005 19:29:50 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j9I2Tnr9030951	for zsh-users@sunsite.dk; Mon,
 17 Oct 2005 19:29:49 -0700
Date: Tue, 18 Oct 2005 02:29:48 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Looks like "zpty -r" is adding 0x0d characters...
In-reply-to: <20051017211318.GA576@DervishD>
To: Zsh Users <zsh-users@sunsite.dk>
Message-id: <1051018022949.ZM30950@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20051017211318.GA576@DervishD>
Comments: In reply to DervishD <zsh@dervishd.net>        "Looks like "zpty
 -r" is adding 0x0d characters..." (Oct 17, 11:13pm)
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

A pty opened with zpty is just like any other tty device, i.e., it
has various settings that can be viewed and changed with "stty".
The values of those settings do not necessarily correspond to those
of the controlling tty of the process.

For example, try:

    zpty settings stty -a
    zpty -r settings

You'll probably find "onlcr" in that output, which means "for output,
translate newline to carriage return-newline".

If you don't want this to happen, the program that zpty runs on the
pseudo-terminal needs to do the equivalent of "stty -onlcr".


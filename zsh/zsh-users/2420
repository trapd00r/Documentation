From zsh-users-return-2420-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 05 18:48:14 1999
Return-Path: <zsh-users-return-2420-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14610 invoked from network); 5 Jul 1999 18:48:11 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Jul 1999 18:48:11 -0000
Received: (qmail 6378 invoked by alias); 5 Jul 1999 18:47:51 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2420
Received: (qmail 6371 invoked from network); 5 Jul 1999 18:47:51 -0000
Date: Mon, 5 Jul 1999 20:47:44 +0200 (MET DST)
From: Wolfgang Hukriede <whukriede@ifm.uni-kiel.de>
Message-Id: <199907051847.UAA08645@sally.ifm.uni-kiel.de>
To: zsh-users@sunsite.auc.dk
Subject: Re: Why can't I set PS1?

Yes, it was exactly this. They (Suse GmbH) managed to define in
/etc/profile (which is sourced by zshrc):

        precmd ()
        {
            if test "$UID" = 0; then
                PS1="%m:`pwd -r` # "
            else
                PS1="%n@%m:`pwd -r` > "
            fi
        }

I sent them a bug-report.

Many thanks, fabulous!

Wolfgang.

Peter Stephenson wrote:
> It may be the same problem someone else had a couple of weeks ago.  On some
> system, the function precmd is set to restore the prompt before every
> single command, which is lunacy.  You can probably just `unfunction precmd'
> and set your own prompt, if that's the problem.


From zsh-workers-return-27813-mason-zsh=primenet.com.au@zsh.org Sun Mar 21 17:22:30 2010
Return-Path: <zsh-workers-return-27813-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27684 invoked by alias); 21 Mar 2010 17:22:30 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27813
Received: (qmail 1365 invoked from network); 21 Mar 2010 17:22:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.4 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at ruderich.org designates 78.46.69.5 as permitted sender)
Date: Sun, 21 Mar 2010 18:23:36 +0100
From: Simon Ruderich <simon@ruderich.org>
To: zsh-workers@zsh.org
Subject: [PATCH] _git: Also complete FETCH_HEAD, ORIG_HEAD and MERGE_HEAD.
Message-ID: <20100321172336.GA4151@ruderich.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha256; protocol="application/pgp-signature"; boundary="=_zucker.schokokeks.org-32201-1269192140-0001-2"
Content-Disposition: inline
User-Agent: Mutt/1.5.20-dev (2010-03-09)

--=_zucker.schokokeks.org-32201-1269192140-0001-2
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,

Maybe it should be checked if FETCH_HEAD, ORIG_HEAD and
MERGE_HEAD exist before completing them, but I'm not sure how to
that.

Simon
---
 Completion/Unix/Command/_git |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/Completion/Unix/Command/_git b/Completion/Unix/Command/_git
index d7570cc..dbc3dae 100644
--- a/Completion/Unix/Command/_git
+++ b/Completion/Unix/Command/_git
@@ -3125,7 +3125,7 @@ __git_heads () {
   branch_names=3D(${${(f)"$(_call_program headrefs git for-each-ref --form=
at=3D'"%(refname)"' refs/heads refs/remotes 2>/dev/null)"}#refs/(heads|remo=
tes)/})
   __git_command_successful || return

-  _wanted heads expl branch-name compadd $* - $branch_names HEAD
+  _wanted heads expl branch-name compadd $* - $branch_names HEAD FETCH_HEA=
D ORIG_HEAD MERGE_HEAD
 }

 (( $+functions[__git_tags] )) ||
--=20
1.7.0.2

--=20
+ privacy is necessary
+ using gnupg http://gnupg.org
+ public key id: 0x92FEFDB7E44C32F9

--=_zucker.schokokeks.org-32201-1269192140-0001-2
Content-Type: application/pgp-signature
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQIcBAEBCAAGBQJLplYYAAoJEJL+/bfkTDL5Jk4P/2jXFdm9cDScrDuitTXs2xyE
oJewzmC79qP7ySQmNP0cNzQdMFmqxYvgiCQPTdmpeoI9cHucmGugsm+sgRs1kw19
U1efgWJGsuqNyaq0D1GKmOqrtuZAMbXqE/p5I4WaJKqJ3rWbdI72iNzyAuPhif5b
PQNfMMySlNIMeqNNG/gH9BEC9fX5QuujZKcSmHrPSwtRupAQ2OwLlTyZFFanjxMV
ZqhFqpnxYpLc7SmrI/bHLgcVkwpTFu4lX0vstKBeC7fkKEJF3vw6+UnVZ251imeK
l0JVn5J4YVvnSt8SNNJuQGlit67R9ExOjF9yj6PJ1YoBEIt4dj2SmCUAa7NdOpUl
WknjJlTu+BbMGN4IbfPL2o4x+xJamIn1fjt5O6k32wtPA6omOfU9B+D30mG3z3SD
n0ijdllBUlP5gMrT493I+h/dtbLV/HgkuaC85M2P07r1j6spg526bGR/LiTKCLam
AYV7Dkpmvi9UapOTF7eRRwsTdoADK+dfh9mcsyw5UbvDBtlUKRv/KLhf+uOEauR7
IiHKNEBik4qSps4qDspm5pi3lD/KUazCHD1ECPvaMAsR2gxFGznidbuNLUzQzyGu
+dQDTlL0TOZZhW9PVvns/x4y5OgWL2WObO41SHJhBtUOgzEwAIATR3fdWYndtbsb
NDVMdAY0/Q67PMtrkCuE
=ofZt
-----END PGP SIGNATURE-----

--=_zucker.schokokeks.org-32201-1269192140-0001-2--


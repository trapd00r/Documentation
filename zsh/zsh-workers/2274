From zsh-workers-request@euclid.skiles.gatech.edu  Sat Oct 26 00:32:49 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id AAA00622 for <mason@primenet.com.au>; Sat, 26 Oct 1996 00:32:46 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id KAA22154; Fri, 25 Oct 1996 10:23:40 -0400 (EDT)
Resent-Date: Fri, 25 Oct 1996 10:23:40 -0400 (EDT)
Date: Fri, 25 Oct 1996 10:23:44 -0400 (EDT)
From: Keith Bostic <bostic@bsdi.com>
Message-Id: <199610251423.KAA03581@mongoose.bostic.com>
To: zsh-workers@math.gatech.edu
Subject: bug fix for zsh 3.0.0
Resent-Message-ID: <"FEC791.0._P5.irCSo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2274
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Some termcap databases (e.g., the one distributed with ncurses) have
entries larger than 1K.  When combined with termcap library code that
doesn't limit the length of the copied record to 1K (e.g., old 4BSD
implementations) it can drop core.

--keith

Index: init.c
===================================================================
RCS file: /master/contrib/zsh-3.0.0/Src/init.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -c -r1.1.1.1 -r1.2
*** init.c	1996/10/02 17:10:14	1.1.1.1
--- init.c	1996/10/25 13:31:56	1.2
***************
*** 405,411 ****
  	errflag = 0;
  	return termok = TERM_BAD;
      } else {
! 	char tbuf[1024], *pp;
  	int t0;
  
  	termok = TERM_OK;
--- 405,411 ----
  	errflag = 0;
  	return termok = TERM_BAD;
      } else {
! 	char tbuf[4096], *pp;
  	int t0;
  
  	termok = TERM_OK;


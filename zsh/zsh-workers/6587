From zsh-workers-return-6587-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 11 07:03:51 1999
Return-Path: <zsh-workers-return-6587-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4265 invoked from network); 11 Jun 1999 07:03:50 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Jun 1999 07:03:50 -0000
Received: (qmail 1108 invoked by alias); 11 Jun 1999 07:03:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6587
Received: (qmail 1089 invoked from network); 11 Jun 1999 07:03:24 -0000
Date: Fri, 11 Jun 1999 09:03:22 +0200 (MET DST)
Message-Id: <199906110703.JAA25577@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Thu, 10 Jun 1999 16:31:39 +0000
Subject: Re: More intellegent suffix removing?


Bart Schaefer wrote:

> } I wasn't very happy with the space-removal on redirection operators
> } anyway, though. But to make this right, we would need to leave a space 
> } if that was added and to replace a slash (if one was added) with a
> } space. There is no way to do this easily for now.
> 
> I don't want zsh to replace a slash if one was added.  What if what I
> intend is to complete a directory and then glob files in that directory
> whose names begin with a digit?

Right, that was a thinko.

> I think Andrej's point -- and it's my point, if not his -- is that '<'
> should be left out of the list of characters that do suffix autoremoval.
> (And therefore probably '>' should be too ... and come to think of it,
> even '|' can be part of a glob pattern.)

Ok.

Bye
 Sven

diff -u os/Zle/zle_misc.c Src/Zle/zle_misc.c
--- os/Zle/zle_misc.c	Fri Jun 11 08:57:47 1999
+++ Src/Zle/zle_misc.c	Fri Jun 11 08:59:00 1999
@@ -788,9 +788,8 @@
 void
 makesuffix(int n)
 {
-    suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] =
-	suffixlen[';'] = suffixlen['|'] = suffixlen['&'] = 
-	suffixlen['<'] = suffixlen['>'] = n;
+    suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] = 
+	suffixlen[';'] = suffixlen['&'] = n;
 }
 
 /* Set up suffix for parameter names: the last n characters are a suffix *
diff -u od/Zsh/options.yo Doc/Zsh/options.yo
--- od/Zsh/options.yo	Fri Jun 11 09:01:57 1999
+++ Doc/Zsh/options.yo	Fri Jun 11 09:02:02 1999
@@ -120,7 +120,7 @@
 item(tt(AUTO_REMOVE_SLASH))(
 When the last character resulting from a completion is a slash and the next
 character typed is a word delimiter, a slash, or a character that ends 
-a command (such as a semicolon or an ampersand), remove the slash.
+a command (a semicolon or an ampersand), remove the slash.
 )
 pindex(AUTO_RESUME)
 cindex(jobs, resuming automatically)

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


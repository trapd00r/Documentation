From zsh-users-return-7673-mason-zsh=primenet.com.au@sunsite.dk Sat Jul 10 21:27:36 2004
Return-Path: <zsh-users-return-7673-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1325 invoked from network); 10 Jul 2004 21:27:35 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 10 Jul 2004 21:27:35 -0000
Received: (qmail 14537 invoked from network); 10 Jul 2004 21:29:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2004 21:29:40 -0000
Received: (qmail 14409 invoked by alias); 10 Jul 2004 21:26:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7673
Received: (qmail 14399 invoked from network); 10 Jul 2004 21:26:57 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.85)
  by sunsite.dk with SMTP; 10 Jul 2004 21:26:57 -0000
Received: (qmail 13478 invoked from network); 10 Jul 2004 21:29:10 -0000
Received: from mail.bluffton.edu (205.133.211.10)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2004 21:28:57 -0000
Received: from localhost ([10.4.1.177]) by mail.bluffton.edu with Microsoft SMTPSVC(5.0.2195.6713);
	 Sat, 10 Jul 2004 17:26:15 -0400
Date: Sat, 10 Jul 2004 17:25:53 -0400
From: Nathan Sommer <sommena@cs.earlham.edu>
To: zsh-users@sunsite.dk
Subject: terminal resizing and prompt problem
Message-Id: <20040710172553.168f14b9@localhost>
X-Mailer: Sylpheed version 0.9.11claws (GTK+ 1.2.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 10 Jul 2004 21:26:16.0007 (UTC) FILETIME=[88545D70:01C466C4]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Hello,
I have a problem with my zsh prompt.  It's 2 lines long and looks like so:

[/home/nate]
[17:02]% 

The code looks like this:
PS1=$'%{\e[1;32m%}[%d]\n%{\e[1;34m%}[%T]%{\e[1;32m%}%%%{\e[0m%} '

It works just fine, until I try to resize my terminal.  For each character height I resize vertically, or each character width I resize horizontally, the top line of my prompt is repeated.  For example, if I resize my terminal to make it 6 lines taller, I end up with this:

[/home/nate]
[/home/nate]
[/home/nate]
[/home/nate]
[/home/nate]
[/home/nate]
[/home/nate]
[17:14]%

This is terribly annoying, since it means I can't resize my terminal to see more output, since any additional visibility I would have gained is taken up by the additional lines of my prompt.  This happens in both xterm and rxvt.  Is this a bug?  Or is there an easy fix to this that I haven't found?

Thanks,
Nate

-- 
sommena@cs.earlham.edu
http://cs.earlham.edu/~sommena


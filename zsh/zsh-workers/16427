From zsh-workers-return-16427-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 10 13:47:58 2002
Return-Path: <zsh-workers-return-16427-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4016 invoked from network); 10 Jan 2002 13:47:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 10 Jan 2002 13:47:58 -0000
Received: (qmail 24152 invoked by alias); 10 Jan 2002 13:47:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16427
Received: (qmail 24047 invoked from network); 10 Jan 2002 13:47:43 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15421.39711.249899.991670@wischnow.berkom.de>
Date: Thu, 10 Jan 2002 14:46:07 +0100
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: _file_systems & Re: zstyle for _arguments feature request 
In-Reply-To: <20020109071947.43798.qmail@web10406.mail.yahoo.com>
References: <20020109071947.43798.qmail@web10406.mail.yahoo.com>
X-Mailer: VM 6.95 under 21.5 (patch 3) "asparagus" XEmacs Lucid


Felix Rosencrantz wrote:

> Sven Wischnowsky wrote:
> >Err... pardon? ;-) Could you give us a code snippet to easily
> >reproduce this? I currently don't have that much time, sorry.
> 
> Sorry about that.  I'm writing from another system.
> Here's something a little more specific.
> 
> I tried using the default completion for "enscript --font"
> 
> @ enscript --font []<TAB>
> ---- fontname
> @ zstyle :completion::complete:enscript:option--font-1:option--font-1 fake
> 'font3:This is font3' font4:Four font5
> @ enscript --font []<TAB>
> ---- fontname
> ---- fontname
> <Then the correct font*'s are listed...>
> 
> Notice the "---fontname" description listed twice, and the need to specify the
> "option--font-1" twice in the zstyle.  Something looks like it is being called
> twice incorrectly.

Urgh.

1. The doubled `option-...' doesn't bother me a lot, that's just
   _arguments using the only sensible thing it knows about as the
   tag.  Users can always use `:completion:...:*'.
2. The doubled description is the real problem.  There is no action in
   the spec for --font.  So the faked matches get added under that
   default description mentioned above and later _arguments uses
   message to add the explanation it always adds for an empty action
   in a spec.  And that's the reason why the C code doesn't put the
   two groups together, which was irritating me before I looked.

Hrm.  I've got to think some more about this, or maybe someone else
has ideas?


Bye
  Sven

-- 
Sven Wischnowsky                           wischnow@berkom.de


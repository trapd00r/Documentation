From zsh-users-return-3680-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 17 21:04:18 2001
Return-Path: <zsh-users-return-3680-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23688 invoked from network); 17 Mar 2001 21:04:16 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Mar 2001 21:04:16 -0000
Received: (qmail 24296 invoked by alias); 17 Mar 2001 21:03:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3680
Received: (qmail 24280 invoked from network); 17 Mar 2001 21:03:56 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010317210252.ZM9495@candle.brasslantern.com>
Date: Sat, 17 Mar 2001 21:02:52 +0000
In-Reply-To: <874rws6zmn.fsf@cenderis.demon.co.uk>
Comments: In reply to Bruce Stephens <bruce@cenderis.demon.co.uk>
        "Re: `make' completion in zsh-3.1.9" (Mar 17,  6:04pm)
References: <3AB37F1C.FF6C67F6@uow.edu.au> 
	<1010317165153.ZM6844@candle.brasslantern.com> 
	<874rws6zmn.fsf@cenderis.demon.co.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-users@sunsite.dk
Subject: Re: `make' completion in zsh-3.1.9
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 17,  6:04pm, Bruce Stephens wrote:
} Subject: Re: `make' completion in zsh-3.1.9
}
} I'm guessing there's some difference in make behaviour.  Presumably
} this is relevant:
} 
} # make -nsp --no-print-directory -f Makefile .PHONY | wc -l
} 1494859

Yow.

You don't have a MAKEFLAGS environment variable set, do you?

You might try capturing a bit of the "make -nsp ..." output to see if it
really is honoring the -n (do not execute) and -s (don't print commands)
options.

However, it's possible that the Linux kernel build process has been
restructured in 2.4 in such a way that it's extremely expensive to run
make without actually building anything.  I don't have the 2.4 kernel
source downloaded here at home ...

} Anything that's producing that amount of output is going to take a
} little while to run.

Yes, I'll say.  You might try

    zstyle ':completion:*:make:*:version' command :

which will prevent completion from discovering that you have GNU make;
which in turn will cause it to parse the Makefile directly.  You lose
completion of any targets that are availble only via recursive makes,
and it'll miss GNUmakefile files, but it should run a lot faster.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


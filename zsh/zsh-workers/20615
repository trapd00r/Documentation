From zsh-workers-return-20615-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 09 18:51:33 2004
Return-Path: <zsh-workers-return-20615-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12492 invoked from network); 9 Dec 2004 18:51:32 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Dec 2004 18:51:32 -0000
Received: (qmail 18016 invoked from network); 9 Dec 2004 18:51:26 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Dec 2004 18:51:26 -0000
Received: (qmail 3372 invoked by alias); 9 Dec 2004 18:51:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20615
Received: (qmail 3352 invoked from network); 9 Dec 2004 18:51:09 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Dec 2004 18:51:09 -0000
Received: (qmail 17680 invoked from network); 9 Dec 2004 18:51:09 -0000
Received: from main.gmane.org (80.91.229.2)
  by a.mx.sunsite.dk with SMTP; 9 Dec 2004 18:51:08 -0000
Received: from root by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CcTNW-0005Rq-00
	for <zsh-workers@sunsite.dk>; Thu, 09 Dec 2004 19:51:06 +0100
Received: from mpk-edge.cto.sunit.net ([192.18.216.194])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-workers@sunsite.dk>; Thu, 09 Dec 2004 19:51:02 +0100
Received: from gmane by mpk-edge.cto.sunit.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-workers@sunsite.dk>; Thu, 09 Dec 2004 19:51:02 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-workers@sunsite.dk
From: Iain MacDonnell <gmane@dseven.org>
Subject: Re: How to turn off NIS hosts completion?
Date: Thu, 9 Dec 2004 18:27:54 +0000 (UTC)
Lines: 37
Message-ID: <loom.20041209T191758-389@post.gmane.org>
References: <41B75DC7.4020502@Dseven.ORG> <200412091042.iB9AgeAk006642@news01.csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 192.18.216.194 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041109 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

Peter Stephenson <pws <at> csr.com> writes:

> 
> Iain MacDonnell wrote:
> > Is there a way to turn off this NIS lookup for users and hosts?
> 
> There's a nasty but simple hack to turn off user name lookup.  The shell
> does the lookup via the special variable userdirs in the zsh/parameter
> module.  This declares itself in such a way that it can be overridden by
> a local user definition.  You can persuade the completion system to
> override it with an empty array by adding the following code to your own
> initialisation.  It goes at some point after the completion system has
> been loaded by "compinit":
> 
>   zmodload -i zsh/parameter
>   _comp_setup+=$'\ntypeset -a userdirs'

Yes, that did the trick!


> There's no such variable for hosts.  As far as I could see from the
> code, hosts are never looked up from NIS if the hosts style is set, as
> you have.

Right, I noticed later that it was only the users lookup that was still
happening.

I'd really like to find the time to understand how all of these new pieces
fit together. In the meantime, my immediate problem is solved.

Thanks, Peter!

    ~Iain






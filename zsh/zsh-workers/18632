From zsh-workers-return-18632-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 25 10:32:35 2003
Return-Path: <zsh-workers-return-18632-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11087 invoked from network); 25 Jun 2003 10:32:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Jun 2003 10:32:34 -0000
Received: (qmail 27436 invoked by alias); 25 Jun 2003 10:32:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18632
Received: (qmail 27426 invoked from network); 25 Jun 2003 10:32:27 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 25 Jun 2003 10:32:27 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [212.125.75.4] by sunsite.dk (MessageWall 1.0.8) with SMTP; 25 Jun 2003 10:32:27 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-16.tower-1.messagelabs.com!1056536897!85084
X-StarScan-Version: 5.0.6; banners=.,-,-
Received: (qmail 8964 invoked from network); 25 Jun 2003 10:28:17 -0000
Received: from porgy.logica.co.uk (158.234.250.67)
  by server-16.tower-1.messagelabs.com with SMTP; 25 Jun 2003 10:28:17 -0000
Received: from iris.logica.co.uk (iris.logica.co.uk [158.234.9.163])
	by porgy.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id h5PAQasX014392;
	Wed, 25 Jun 2003 11:28:17 +0100
Received: from gmcs3.local ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id h5P9lgxN013558;
	Wed, 25 Jun 2003 10:47:42 +0100
Received: from gmcs3.local (localhost [127.0.0.1])
	by gmcs3.local (8.11.6/8.11.6/SuSE Linux 0.5) with ESMTP id h5P9mWT21030;
	Wed, 25 Jun 2003 11:48:32 +0200
cc: zsh-workers@sunsite.dk
X-VirusChecked: Checked
In-reply-to: <16121.23378.685635.437515@ultrahot.finland.sun.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <16120.21181.974421.168422@ultrahot.finland.sun.com> <13714.1056468548@gmcs3.local> <16121.23378.685635.437515@ultrahot.finland.sun.com>
To: Tomi.Vainio@Sun.COM
Subject: Re: 4.1.1 doesn't compile 
Date: Wed, 25 Jun 2003 11:48:32 +0200
Message-ID: <21028.1056534512@gmcs3.local>

Tomi Vainio - Sun Finland wrote:
> I also found another problem but this time only when I try to compile
> 32bit binary.
> 
> Compiler is Sun ONE Studio 8, Compiler Collection
>             cc: Sun C 5.5 Patch 112760-01 2003/05/18 
> 
> cc -c -I. -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -xO4  -o compat.o compat.c
> "compat.c", line 441: variable length array can not be declared with a static storage class: llbuf
> cc: acomp failed for compat.c

This I can't reproduce. The compiler I have is older than that.

The line in question is:
     static char llbuf[DIGBUFSIZE];
and system.h defines:
     #define DIGBUFSIZE ((int)(((sizeof(zlong) * 8) - 1) * 0.30103) + 3)

So quite why the compiler thinks it has a variable length array I
don't understand. Could you perhaps try substituting that in directly
and see if you can tweak it to work. The int cast might be causing the
problem in which case the * 0.30103 could perhaps be changed to * 30103
/ 100000. But I don't understand what the calculation is doing. Anyone
else have any idea?

Oliver

________________________________________________________________________
This email has been scanned for all viruses by the MessageLabs Email
Security System. For more information on a proactive email security
service working around the clock, around the globe, visit
http://www.messagelabs.com
________________________________________________________________________


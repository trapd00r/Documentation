From zsh-workers-return-20795-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 07 12:20:07 2005
Return-Path: <zsh-workers-return-20795-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6931 invoked from network); 7 Feb 2005 12:20:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Feb 2005 12:20:07 -0000
Received: (qmail 26117 invoked from network); 7 Feb 2005 12:20:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Feb 2005 12:20:01 -0000
Received: (qmail 13882 invoked by alias); 7 Feb 2005 12:03:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20795
Received: (qmail 13868 invoked from network); 7 Feb 2005 12:03:14 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Feb 2005 12:03:14 -0000
Received: (qmail 85989 invoked from network); 7 Feb 2005 12:02:15 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 7 Feb 2005 12:02:08 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-22.tower-36.messagelabs.com!1107777725!13664384!1
X-StarScan-Version: 5.4.8; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 23042 invoked from network); 7 Feb 2005 12:02:05 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-22.tower-36.messagelabs.com with SMTP; 7 Feb 2005 12:02:05 -0000
Received: from trentino.logica.co.uk ([158.234.142.59])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id j17C25Jt010244
	for <zsh-workers@sunsite.dk>; Mon, 7 Feb 2005 12:02:05 GMT
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id 6DCBE2E028
	for <zsh-workers@sunsite.dk>; Mon,  7 Feb 2005 13:01:45 +0100 (CET)
X-VirusChecked: Checked
X-StarScan-Version: 5.1.13; banners=.,-,-
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: iconv issues, 4.2 branch
Date: Mon, 07 Feb 2005 13:01:45 +0100
Message-ID: <8918.1107777705@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Having been away, I've not really followed the autoconf issues with
detecting iconv on Cygwin and Mac OS X but I thought I should mention
that GNU gettext comes with a file normally installed as
/usr/share/aclocal/iconv.m4. If someone wants to look at it, it might do
a better job of handling the different situations. It also detects the
varying prototypes which currently causes compiler warnings on some
systems.

I didn't use it at the time because it seemed overkill. It also appeared
to assume that iconv was essential, printing messages like "consider
installing GNU libiconv". This isn't really appropriate for zsh given
that, in many cases, \u/\U will work without needing iconv
(specifically  __STDC_ISO_10646__ plus wctomb and wchar_t available). So
it may just be that some ideas can be taken from iconv.m4.

Also, I've got a question about the zsh-4_2-patches branch? What is the
plan: is all the unicode stuff going to form a 4.3.0 release once ready
for testing with further 4.2.x releases coming on the 4_2 branch. It'd
be useful to know just what sort of changes we should be applying to
both branches and which only to HEAD.

Oliver


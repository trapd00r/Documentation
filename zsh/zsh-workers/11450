From zsh-workers-return-11450-mason-zsh=primenet.com.au@sunsite.auc.dk Thu May 18 02:35:27 2000
Return-Path: <zsh-workers-return-11450-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17254 invoked from network); 18 May 2000 02:35:25 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 May 2000 02:35:25 -0000
Received: (qmail 18963 invoked by alias); 18 May 2000 02:35:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11450
Received: (qmail 18956 invoked from network); 18 May 2000 02:35:17 -0000
Message-ID: <20000518023514.10350.qmail@web1303.mail.yahoo.com>
Date: Wed, 17 May 2000 19:35:14 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Re: PATCH: Completion matching control test. (Try 2)
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-846930886-958617314=:9963"

--0-846930886-958617314=:9963
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

> On May 16,  9:11pm, Felix Rosencrantz wrote:
> } --- Bart Schaefer <schaefer@candle.brasslantern.com> wrote:
> } > This works for me:
> } > 
> } > 	print -lr "COMPADD:{${match[6]//[$'\r\n']/}}"
> } 
> } Great. Works for me, too.  Will use that.  I'll send a patch when the
> } changes make it into the repository.
There's no need to call "tr".  Where possible we should use zsh.
So here's the patch.

-FR.

__________________________________________________
Do You Yahoo!?
Send instant messages & get email alerts with Yahoo! Messenger.
http://im.yahoo.com/
--0-846930886-958617314=:9963
Content-Type: text/plain; name="patch3.txt"
Content-Description: patch3.txt
Content-Disposition: inline; filename="patch3.txt"

Index: Test/comptest
===================================================================
--- zsh/Test/,comptest	Wed May 17 05:31:32 2000
+++ zsh/Test/comptest	Wed May 17 19:23:40 2000
@@ -107,8 +107,7 @@
       elif (( 0 <= $mbegin[5] )); then
 	print -lr "MESSAGE:{$match[5]}"
       elif (( 0 <= $mbegin[6] )); then
-        result=`echo $match[6] | tr -d '\012\015'`
-        print -lr "COMPADD:{$result}"
+        print -lr "COMPADD:{${${match[6]}//[$'\r\n']/}}"
       fi
     done
   done

--0-846930886-958617314=:9963--


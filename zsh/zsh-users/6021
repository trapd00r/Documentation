From zsh-users-return-6021-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 06 17:16:52 2003
Return-Path: <zsh-users-return-6021-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25707 invoked from network); 6 Apr 2003 17:16:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Apr 2003 17:16:51 -0000
Received: (qmail 28071 invoked by alias); 6 Apr 2003 17:16:12 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6021
Received: (qmail 28064 invoked from network); 6 Apr 2003 17:16:12 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 6 Apr 2003 17:16:12 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [4.3.58.174] by sunsite.dk (MessageWall 1.0.8) with SMTP; 6 Apr 2003 17:16:11 -0000
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.11.6/8.11.6) id h36HG6p07654;
	Sun, 6 Apr 2003 10:16:06 -0700
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1030406171606.ZM7653@candle.brasslantern.com>
Date: Sun, 6 Apr 2003 17:16:06 +0000
In-Reply-To: <200304061248380080.0081454B@127.0.0.1>
Comments: In reply to "Luciano ES" <lucianoav@gmx.net>
        "Re: ZSH on Dos/Windows (long)" (Apr  6, 12:48pm)
References: <200304050139220710.001E4844@127.0.0.1> 
	<200304051059200520.000D11E0@127.0.0.1> 
	<m9fgfw9whykk$.dlg@thorstenkampe.de> 
	<200304051353440930.00ACC4C4@127.0.0.1> 
	<1e2co8dovf08r.dlg@thorstenkampe.de> 
	<200304061248380080.0081454B@127.0.0.1>
X-Mailer: Z-Mail (5.0.0 30July97)
To: lucianoav@gmx.net
Subject: Re: ZSH on Dos/Windows (long)
Cc: zsh-users@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 6, 12:48pm, Luciano ES wrote:
}
} When I run that 3.05 port of ZSH to Windows, you won't believe what
} happens when I press the Home key. The cursor jumps to the beginning
} of the line!!!! Have you ever seen that? And the best part: when I
} press the End key, it jumps to the end!! Amazing!!!! OK, seriously,
} ZSH under Cygwin imposes those stinky Emacs or Vi bindings, I don't
} know which one, I hate both.

Amol's 3.0.5 port actually carries around an implementation of a WinNT
console with it, and a special version of termcap that has built in to
it all the key bindings for that internal console terminal.  It doesn't
(as far as I can tell) actually change the default set of bindings for
zsh; that is, you ARE using the stinky Emacs bindings when you run that
3.0.5 port, it just happens that home/end/etc. are attached to the right
Emacs movement commands by virtue of the built-in terminal definition.

} So I spent another hour reading the same chapter over and over and
} trying to make ZSH convert the Delete key into... the Delete command!
} No success.

I don't suppose that zsh for cygwin comes with the "zkbd" function that
should be described in the "User Contributions" section of the manual,
under "Keyboard Definition"?

} Colors didn't work either. They work in Bash, but not in ZSH. I
} followed the manual instructions, but trying to colorize a prompt
} never worked, I get the color formatting sequences in my prompt
} instead of actual colors.

Zsh color support assumes an ANSI-compliant terminal.  I really don't
know what the cygwin console is emulating, terminal-wise.  The escapes
that zsh uses are in the "color" function, which should be somewhere
in the directories named in the $fpath array.

} I scanned and indexed the C: drive and it took over 2 minutes! ZSH
} 3.0.5 for Windows only took 15 seconds! I immediately thought: it
} must be Cygwin. It added so many new files that reindexing now takes
} longer...

You may have the right culprit but the wrong reason.  When compiled with
cygwin, zsh uses the cygwin library's emulations of the unix file and
directory access routines.  Amol's port has its own implementation of
the WinNT directory access routines.


From zsh-workers-return-8835-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Dec 01 10:16:10 1999
Return-Path: <zsh-workers-return-8835-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11945 invoked from network); 1 Dec 1999 10:16:09 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Dec 1999 10:16:09 -0000
Received: (qmail 11146 invoked by alias); 1 Dec 1999 10:16:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8835
Received: (qmail 11139 invoked from network); 1 Dec 1999 10:16:02 -0000
Date: Wed, 1 Dec 1999 11:16:01 +0100 (MET)
From: =?ISO-8859-1?Q?Johan_Sundstr=F6m?= <johsu650@student.liu.se>
X-Sender: johsu650@astmatix.ida.liu.se
To: zsh-workers@sunsite.auc.dk
Subject: mysqlshow completion
Message-ID: <Pine.GSO.4.02.9912011049240.5274-100000@astmatix.ida.liu.se>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE

Hi!

I just swung together a rather convenient (old-style/compctl) completion
behaviour for mysqlshow; perhaps worth including in zsh completion archive
batch supplied with zsh:s?

function mysqlshow-completions ()
{
  local args
  setopt LOCAL_OPTIONS
  unsetopt GLOB
  read -c -A args
  if [[ $args[-1] !=3D '' ]];then
    reply=3D($($args[0,-2] $args[-1]*|sed -n '4,${
/^| [^ ]/s/..\([^ ]*\).*$/\1/gp
}'))
  else
    reply=3D($($args|sed -n '4,${
/^| [^ ]/s/..\([^ ]*\).*$/\1/gp
}'))
  fi
}
compctl -K mysqlshow-completions mysqlshow

It does completion on database, table and column names using the already
specified options on the command line.

/Johan Sundstr=F6m


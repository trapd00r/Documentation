From zsh-workers-request@math.gatech.edu Tue Jan 13 12:03:51 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 9244 invoked from network); 13 Jan 1998 12:03:50 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 13 Jan 1998 12:03:50 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id GAA26043;
	Tue, 13 Jan 1998 06:43:43 -0500 (EST)
Resent-Date: Tue, 13 Jan 1998 06:43:43 -0500 (EST)
Message-Id: <199801131143.GAA26028@math.gatech.edu>
X-Mailer: exmh version 2.0zeta 7/24/97
To: zsh-workers@math.gatech.edu
Subject: Re: zsh-3.1.2-zefram3
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Tue, 13 Jan 1998 11:44:37 +0000
From: Bruce Stephens <B.Stephens@isode.com>
Resent-Message-ID: <"KP9nm1.0.sM6.lDrkq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3691
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Working on Solaris2.5.1, I get:

if test D = N; then \
    cat ./xmods.conf > modules-bltin; \
elif test yes != yes; then \
    echo comp1 > modules-bltin; \
else \
    echo > modules-bltin; \
fi
( cd .. && /bin/sh Src/mkmodindex.sh Src ) \
    > modules.index.tmp
Src/mkmodindex.sh: syntax error at line 19: `^' unexpected
*** Error code 2
make: Fatal error: Command failed for target `Makemod'
Current working directory /ic/dev/users/brs/zsh-3.1.2-zefram3/Src
*** Error code 1
make: Fatal error: Command failed for target `Src'

And indeed, the line is illegal:

            *[^_0-9A-Za-z]*@*)
 
Presumably it should be *[!_0-9A-Za-z]*@*)

Correcting this leads to numerous errors in Src/mkmakemod.sh, starting with
Src/../Src/mkmakemod.sh: syntax error at line 238: `(' unexpected

and moving on to complain about "do", "then" and so on.

Nor does zsh seem happy to run the scripts.  I tried changing SHELL to 
/tmp/sh, and creating a symbolic link to an older zsh, but that gave much the 
same errors.

I'm guessing this was developed on Linux, or some other machine where /bin/sh 
is bash.  It needs fixing up for a proper release.



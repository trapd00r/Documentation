From zsh-workers-return-24131-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 29 14:49:23 2007
Return-Path: <zsh-workers-return-24131-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27011 invoked from network); 29 Nov 2007 14:49:14 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Nov 2007 14:49:14 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 8311 invoked from network); 29 Nov 2007 14:49:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Nov 2007 14:49:10 -0000
Received: (qmail 2329 invoked by alias); 29 Nov 2007 14:49:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24131
Received: (qmail 2317 invoked from network); 29 Nov 2007 14:49:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 29 Nov 2007 14:49:07 -0000
Received: (qmail 7973 invoked from network); 29 Nov 2007 14:49:07 -0000
Received: from cluster-d.mailcontrol.com (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 29 Nov 2007 14:49:00 -0000
Received: from rly21d.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly21d.srv.mailcontrol.com (MailControl) with ESMTP id lATEmrI0016954
	for <zsh-workers@sunsite.dk>; Thu, 29 Nov 2007 14:48:56 GMT
Received: from submission.mailcontrol.com (submission.mailcontrol.com [86.111.216.190])
	by rly21d.srv.mailcontrol.com (MailControl) id lATEm3jB014062
	for zsh-workers@sunsite.dk; Thu, 29 Nov 2007 14:48:03 GMT
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly21d-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id lATElw5B013472; Thu, 29 Nov 2007 14:48:02 +0000 (GMT)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 29 Nov 2007 14:47:58 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.1/8.13.4) with ESMTP id lATElwjN006823;
	Thu, 29 Nov 2007 14:47:58 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.1/8.14.1/Submit) with ESMTP id lATElwMe006820;
	Thu, 29 Nov 2007 14:47:58 GMT
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list),
        Andy Spiegl <zsh.Andy@spiegl.de>
Subject: Re: uhmm, another segmentation fault (not a real reply)
X-Mailer: MH-E 8.0.3; nmh 1.2-20070115cvs; GNU Emacs 22.1.1
Date: Thu, 29 Nov 2007 14:47:58 +0000
Message-ID: <6819.1196347678@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 29 Nov 2007 14:47:58.0257 (UTC) FILETIME=[D525DA10:01C83296]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.68.1.131

(Moved to zsh-workers.  The original had an executable attachment in it,
so our spam filter blocked it, so I'm having to compose a new message.
There's a faint chance an earlier version escaped from the web
interface, but I don't think so.)

> From: Andy Spiegl <zsh.Andy@spiegl.de>
>  lama:~>mutt ali<TAB>
>  interactive: ali[]
> Then I pressed "c" and whooooie:
>  lama:~>mutt ali[1]    30401 segmentation fault (core dumped)  zsh

Unfortunately, we are still well short of having enough information to
reproduce this:
1. it appears to have something to do with interactive completion (I'm not
an expert on this but you haven't in any case told us how you have
this set up as far as I can see)
2. it depends on your Mutt aliases file whose format, let alone contents, I
don't currently know.  (I don't have time to learn Mutt to fix zsh
bugs, unfortunately)
3. it depends on your completers, which appear to include some form
of approximation
4. it depends on the results of the smart email address matching which I
had to hack about to get only MUTT aliases, guessing what they were.
(There's nothing you can do about this last one, but it is an additional
hindrance.)

After all that, even with extra information, it's so complicated I don't
have much hope of reproducing it, but please feel free to supply the
extra details.

It's possible the key features are interactive completion with approximation.
Can you find a simpler way of reproducing it?  E.g. a simple completion
producing the same results, such as

_testali() { compadd <mail aliases...> }
compdef _testali testali
testali ali<TAB>

?

(We could do with some form of automated bug report script for
completion, I suppose.)

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


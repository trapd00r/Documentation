From zsh-workers-return-25848-mason-zsh=primenet.com.au@sunsite.dk Sat Oct 11 22:39:34 2008
Return-Path: <zsh-workers-return-25848-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24941 invoked from network); 11 Oct 2008 22:39:22 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=unavailable
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Oct 2008 22:39:22 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92615 invoked from network); 11 Oct 2008 22:39:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2008 22:39:15 -0000
Received: (qmail 26727 invoked by alias); 11 Oct 2008 22:39:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25848
Received: (qmail 26709 invoked from network); 11 Oct 2008 22:39:04 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Oct 2008 22:39:04 -0000
Received: from rex11.flatbooster.com (rex11.flatbooster.com [80.82.215.11])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 7447B80308BA
	for <zsh-workers@sunsite.dk>; Sun, 12 Oct 2008 00:38:57 +0200 (CEST)
Received: from [85.216.2.186] (HSI-KBW-085-216-002-186.hsi.kabelbw.de [85.216.2.186])
	by rex11.flatbooster.com (Postfix) with ESMTP id 4B8001AF6C07;
	Sun, 12 Oct 2008 00:38:57 +0200 (CEST)
Message-ID: <48F12AF9.8030503@bernd-steinhauser.de>
Date: Sun, 12 Oct 2008 00:38:49 +0200
From: Bernd Steinhauser <linux@bernd-steinhauser.de>
User-Agent: Thunderbird 2.0.0.17 (X11/20081011)
MIME-Version: 1.0
To: Peter Stephenson <p.w.stephenson@ntlworld.com>
CC: zsh-workers@sunsite.dk
Subject: Re: 4.3.6/cvs: Test failed: Y02compmatch.ztst
References: <48F1220D.6040301@bernd-steinhauser.de> <20081011231657.053e4ab5@pws-pc>
In-Reply-To: <20081011231657.053e4ab5@pws-pc>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/8412/Sat Oct 11 14:30:20 2008 on bifrost
X-Virus-Status: Clean

Sadly, that doesn't fix it.

You can see the file in question below.
I did a bit of research and found a few things out.
The important part there is the ". /etc/profile.env".
Looking at profile.env (which is autogenerated from /etc/env.d) and 
unsetting LANG and LC_ALL fixed the problem, they were both set to
de_DE.UTF-8.

Regards,
Bernd

# /etc/zsh/zprofile
# Copyright 2008 Bernd Steinhauser <berniyh@exherbo.org>
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'zprofile' from Gentoo, which is:
#     Copyright 1999-2008 Gentoo Foundation.


# Load environment settings from profile.env, which is created by
# "eselect env update" from the files in /etc/env.d
if [[ -e /etc/profile.env ]] ; then
         . /etc/profile.env
fi

#077 would be more secure, but 022 is generally quite realistic
umask 022

# Set up PATH depending on whether we're root or a normal user.
# There's no real reason to exclude sbin paths from the normal user,
# but it can make tab-completion easier when they aren't in the
# user's PATH to pollute the executable namespace.
#
# It is intentional in the following line to use || instead of -o.
# This way the evaluation can be short-circuited and calling whoami is
# avoided.
if [[ "$EUID" = "0" ]] || [[ "$USER" = "root" ]] ; then
 
PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:${ROOTPATH}"
else
         PATH="/usr/local/bin:/usr/bin:/bin:${PATH}"
fi
export PATH
unset ROOTPATH

shopts=$-
setopt nullglob
for sh in /etc/profile.d/*.sh ; do
         if [[ -r "$sh" ]] ; then
                 . "$sh"
         fi
done
unsetopt nullglob
set -$shopts
unset sh shopts


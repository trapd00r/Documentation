From zsh-workers-request@math.gatech.edu Wed Jun 10 18:44:47 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1262 invoked from network); 10 Jun 1998 18:44:45 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 10 Jun 1998 18:44:45 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id OAA16770;
	Wed, 10 Jun 1998 14:36:57 -0400 (EDT)
Resent-Date: Wed, 10 Jun 1998 14:36:57 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980610113648.ZM12334@candle.brasslantern.com>
Date: Wed, 10 Jun 1998 11:36:48 -0700
In-Reply-To: <199806101801.TAA21245@taos.demon.co.uk>
Comments: In reply to Zefram <zefram@tao.co.uk>
        "Re: Variable namespaces, goals for ZLE, etc." (Jun 10,  7:01pm)
References: <199806101801.TAA21245@taos.demon.co.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Zefram <zefram@tao.co.uk>
Subject: Re: Variable namespaces, goals for ZLE, etc.
Cc: zsh-workers@math.gatech.edu
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"TyB702.0.z54.89jVr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4093
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Jun 10,  7:01pm, Zefram wrote:
} Subject: Re: Variable namespaces, goals for ZLE, etc.
}
} Bart Schaefer wrote:
} >I've used versions of sh that would mangle the environment and/or issue
} >warning messages if there were any strings present where the stuff to
} >the left of the `=' contained characters other than [A-Z][a-z][0-9]_.
} 
} We could do a configure test for that.  Perhaps if the local sh does
} complain, we could import/export using munged names starting with
} "__ZSH__" or something like that.

It'd be much better to do the same thing everywhere.  Consider a user who
can't change his shell to be zsh, but who wants to export the ZDOTDIR
variable from his "regular" shell before exec'ing zsh.  It'd be nice if
zsh always imported it from the same name, regardless of platform and
regardless of what it later called it internally.

} Alternatively, we keep things simple, and just don't import/export
} special variables on platforms that really can't handle it -- there
} can't be many of them, surely?

Depends on what you mean by "many."  IIRC, the sh on a Sun platform was
among those that issued the complaints.  (I forget now what OS version.)
It could be a "few platforms, but many installations" kind of thing.

Now, for truly "special" parameters it may not make any difference whether
they can be exported (and if it doesn't, again we should be consistent and
never export them on any platform).  But for "ordinary" parameters that
happen to be used by zsh in a predefined way, lack of export may be quite
a drawback.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


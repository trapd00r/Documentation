From zsh-workers-return-9767-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Feb 16 19:08:28 2000
Return-Path: <zsh-workers-return-9767-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8616 invoked from network); 16 Feb 2000 19:08:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Feb 2000 19:08:26 -0000
Received: (qmail 25792 invoked by alias); 16 Feb 2000 19:08:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9767
Received: (qmail 25785 invoked from network); 16 Feb 2000 19:08:19 -0000
Date: Wed, 16 Feb 2000 11:08:15 -0800
From: Clint Olsen <olsenc@ichips.intel.com>
To: zsh-workers@sunsite.auc.dk
Subject: Re: Zsh 3.1.6 still hangs on for loops utilizing lots of stdout
Message-ID: <20000216110815.D36738@ichips.intel.com>
References: <20000203104548.A25426@ichips.intel.com> <000203162102.ZM8092@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0i
In-Reply-To: <000203162102.ZM8092@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Thu, Feb 03, 2000 at 04:21:02PM -0800
Organization: Intel Corporation, Hillsboro, OR
X-Disclaimer: Mutt Bites!

I went ahead and ran with set -x.  It is failing in the middle of one of
the cats (no meow):

...
+/afs/pdx/proj/otools/bin/AIX/zsh:8> cat x_0m0fm00pm_d_m4_250.char_summary
+/afs/pdx/proj/otools/bin/AIX/zsh:6> read file
+/afs/pdx/proj/otools/bin/AIX/zsh:8> cat x_0m0fm00pm_d_m4_350.char_summary
+/afs/pdx/proj/otools/bin/AIX/zsh:6> read file
+/afs/pdx/proj/otools/bin/AIX/zsh:8> cat x_0m0fm01p1_d_m2_150.char_summary
+/afs/pdx/proj/otools/bin/AIX/zsh:6> read file
+/afs/pdx/proj/otools/bin/AIX/zsh:8> cat x_0m0fm01p1_d_m4_250.char_summary

The shell hangs.  ^Z nor ^C cause it to return a prompt.

-Clint

On Feb 03, Bart Schaefer wrote:
> On Feb 3, 10:45am, Clint Olsen wrote:
> > Subject: Zsh 3.1.6 still hangs on for loops utilizing lots of stdout
> >
> > for file in *.something
> > do
> >   cat $file
> > done > /tmp/concat
> 
> Have you tried doing this with "set -x" (aka "setopt xtrace") in effect?
> You should then get one line written to standard error for each "cat"
> that executes.  This may help narrow down where the failure is.
> 
> You're certain that none of the *.something files is a named pipe or
> other device special file?  What does "ps" say the state of the process
> is at the time that it hangs?  (I.e., you're sure the process isn't in
> state D, disk wait?)


From zsh-workers-return-7657-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Sep 06 10:07:32 1999
Return-Path: <zsh-workers-return-7657-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18010 invoked from network); 6 Sep 1999 10:07:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Sep 1999 10:07:31 -0000
Received: (qmail 28513 invoked by alias); 6 Sep 1999 10:07:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7657
Received: (qmail 28505 invoked from network); 6 Sep 1999 10:07:25 -0000
Date: Mon, 6 Sep 1999 11:07:20 +0100
From: Adam Spiers <adam@thelonious.new.ox.ac.uk>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: completion for perldoc
Message-ID: <19990906110720.A10641@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh-workers@sunsite.auc.dk
References: <199909060928.LAA29438@beta.informatik.hu-berlin.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.4i
In-Reply-To: <199909060928.LAA29438@beta.informatik.hu-berlin.de>; from Sven Wischnowsky on Mon, Sep 06, 1999 at 11:28:54AM +0200

Sven Wischnowsky (wischnow@informatik.hu-berlin.de) wrote:
> 
> Adam Spiers wrote:
> 
> > Here's a completion system for perldoc.  It's my first stab at
> > completions with the new system, so be warned: you may need to change
> > some glaring mistakes.  If it's very wrong, let me know; OTOH if it's
> > OKish then maybe there's more where that came from.
> 
> Every attempt to write stuff for the new completion system is OKish.
> 
> > (Completion/User is the right place, right?)
> 
> Yes, but we somehow seem to have agreed (or `most of us...') to put
> everything for one command or suite of command into one function.

How would you define a suite of command exactly?  I assumed it would
be a function whose #compdef top line had many commands on it.  My
_perl* stuff has a #compdef line for the pm* commands from pmtools,
and a #compdef for perldoc, but I couldn't figure out how to squash
them all into one file.

> > Oh, and the zle -R bit doesn't work: it displays the text and then
> > immediately erases it.  No doubt this is some misunderstanding on my
> > part.
> 
> `zle -R' is intended for interactive functions (normal widgets). If
> you just want to display a message, use the function `_message'.
> 
> You may also want to have a look at `Etc/zsh-development-guide' and
> `Etc/Completion-style-guide' (the latter is not at all complete --
> I'll be thankful for every comment that helps improve it).

I noticed Etc/Completion-style-guide soon after posting and realised
the many problems with that _perl* :-(

I'll try to fix them and repost.

Finally, thanks Sven for such amazingly quick patches to the bugs I
reported.

Adam


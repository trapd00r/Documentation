From zsh-workers-return-17832-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 17 08:42:55 2002
Return-Path: <zsh-workers-return-17832-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15059 invoked from network); 17 Oct 2002 08:42:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Oct 2002 08:42:54 -0000
Received: (qmail 16568 invoked by alias); 17 Oct 2002 08:42:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17832
Received: (qmail 16546 invoked from network); 17 Oct 2002 08:42:40 -0000
X-VirusChecked: Checked
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: PATCH: _xloadimage
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <12179.1034844081.1@logica.com>
Date: Thu, 17 Oct 2002 09:42:07 +0100
Sender: kiddleo@logica.com
Message-Id: <E1826EJ-0003AU-00@bimbo.logica.co.uk>

Without an rc file for xli/xloadimage, no file extensions are found so
file completion wasn't working. This patch makes it use a default set of
extensions.

Index: _xloadimage
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_xloadimage,v
retrieving revision 1.2
diff -u -r1.2 _xloadimage
--- _xloadimage	16 Jan 2002 16:29:52 -0000	1.2
+++ _xloadimage	17 Oct 2002 08:38:20 -0000
@@ -33,8 +33,13 @@
     '*-global[following option applies to all images]'
   )
 fi
-ipath=( . ${=rc[1]#*:} )
-extension=( ${=rc[2]#*:} )
+ipath=( . ${=${(M)rc:#*path:*}#*:} )
+extension=( ${=${(M)rc:#*extensions:*}#*:} )
+# set default file extensions if there are none
+(( $#extension )) || extension=(
+  .gif .jpg .jpeg .png .rle .csun .msun .sun .face
+  .xbm .bm .fbm .pcx .ppm .pgm .pbm .tga .xpm
+)
 
 # all options are valid after -help so no exclusion lists below
 _x_arguments "$args[@]" \

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


From zsh-workers-return-15360-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 10 09:44:41 2001
Return-Path: <zsh-workers-return-15360-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19721 invoked from network); 10 Jul 2001 09:44:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Jul 2001 09:44:39 -0000
Received: (qmail 18691 invoked by alias); 10 Jul 2001 09:44:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15360
Received: (qmail 18680 invoked from network); 10 Jul 2001 09:44:33 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Tue, 10 Jul 2001 11:42:04 +0200 (MET DST)
Message-Id: <200107100942.LAA17143@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: doshfunc
In-Reply-To: <1010709161124.ZM20256@candle.brasslantern.com>

Bart Schaefer wrote:

> ...
> 
> Well, I just did this:
> 
> 	echo 'bar() { print oops }' > foo
> 	setopt kshautoload
> 	FPATH=. autoload +X foo
> 
> and got no complaint at all.  And look what "functions foo" gives me:
> 
> 	foo () {
> 		bar () {
> 			print oops
> 		}
> 		foo "$@"
> 	}
> 
> Something has magically supplied the `foo "$@"' at the end of the file!

It's eval_autoload() -- which you wrote this way in 8404 ;-)

> ...
> 
> So I still can't reach the `goto doneshfunc'.

You were asking about EF_RUN, that's what I tried to explain.

If you want that error message:

  % echo 'bar() { echo foobar }' >foo
  % zcompile -k foo
  % fpath=(. $fpath)
  % autoload foo
  % foo
  zsh: foo: function not defined by file

or:

  % rm -f foo.zwc
  % echo 'bar() { echo foobar }' >foo
  % setopt kshautoload
  % fpath=(. $fpath)
  % autoload foo
  % foo
  zsh: foo: function not defined by file


Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-7695-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 15 10:53:47 2004
Return-Path: <zsh-users-return-7695-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3252 invoked from network); 15 Jul 2004 10:53:46 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 15 Jul 2004 10:53:46 -0000
Received: (qmail 7961 invoked from network); 15 Jul 2004 10:58:26 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Jul 2004 10:58:26 -0000
Received: (qmail 17890 invoked by alias); 15 Jul 2004 10:53:05 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7695
Received: (qmail 17880 invoked from network); 15 Jul 2004 10:53:05 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.85)
  by sunsite.dk with SMTP; 15 Jul 2004 10:53:05 -0000
Received: (qmail 7273 invoked from network); 15 Jul 2004 10:58:19 -0000
Received: from madrid10.amenworld.com (62.193.203.32)
  by a.mx.sunsite.dk with SMTP; 15 Jul 2004 10:58:06 -0000
Received: from DervishD.pleyades.net (212.Red-80-35-44.pooles.rima-tde.net [80.35.44.212])
	by madrid10.amenworld.com (8.10.2/8.10.2) with ESMTP id i6FAqnc20960
	for <zsh-users@sunsite.dk>; Thu, 15 Jul 2004 12:52:49 +0200
Received: from raul@pleyades.net by DervishD.pleyades.net with local (Exim MTA 2.05)
	  id <1Bl3pH-0002mD-00>; Thu, 15 Jul 2004 12:50:55 +0200
Date: Thu, 15 Jul 2004 12:50:54 +0200
From: DervishD <raul@pleyades.net>
To: zsh-users@sunsite.dk
Subject: Re: Coloring completions
Message-ID: <20040715105054.GC10481@DervishD>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20040714112143.GA6811@DervishD> <Pine.LNX.4.60.0407142019180.28477@toltec.zanshin.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <Pine.LNX.4.60.0407142019180.28477@toltec.zanshin.com>
User-Agent: Mutt/1.4.2.1i
Organization: Pleyades
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

    Hi Bart :)

    Thanks for answering :)

 * Bart Schaefer <schaefer@brasslantern.com> dixit:
> >     I'm playing with compsys, and I don't understand what happens
> > with coloring.
> [...]
> > when I hit 'TAB' (which currently is bound to 'expand-or-complete'), the 
> > completions appear colored, and that's ok because I have zsh/complist 
> [...]
> > when I hit '^O', depending on the first word only dirs or all files
> > are listed, but they are listed without coloring.
> I'm not able to reproduce your problem.  I get coloring in both cases.  
> Are you _sure_ zsh/complist is loaded?  Are you sure you have ZLS_COLORS 
> set properly?

    ZLS_COLORS and ZLS_COLOURS are bot set and working (AFAIK...) and
zsh/complist is loaded:

    $ zmodload 
    zsh/compctl
    zsh/complete
    zsh/complist
    zsh/main
    zsh/zle

    Hey, that's weird :((( I'm testing again completion and *all*
colorable files are colored *except* directories :( I mean, if I use
default completion (not my widget and function), directories are
colored, otherwise they aren't, that's the only difference :?

> >     If it is not long, boring or off-topic: could anyone explain me
> > how the shell functions given with compsys do the coloring
> The shell functions in compsys don't do anything magical.  They just read 
> a value from a style and assign that to ZLS_COLORS, then restore the old
> ZLS_COLORS value after finishing.

    OK, that's what I assumed from what I read in _setup,
_main_complete and others. BTW, my ZLS_COLORS parameter is:

no=00:fi=00:di=01;37:ln=01;36:pi=05;33:so=01;35:bd=01;33\
  :cd=01;33:or=01;05;31:ex=01;32:*.tar=01;34:*.tgz=01;34\
  :*.z=01;34:*.Z=01;34:*.gz=01;34:*.bz2=01;34:

    ZLS_COLOURS is exactly the same. If I change the color for the
'di' entry, the default completion shows directories with the
appropriate color, but my widget doesn't, it doesn't color them. The
same if I remove the 'di' entry: the default completion colors them
red, mine doesn't color at all. Known bug in my version?

    Thanks again Bart, you're so kind :)

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736
http://www.pleyades.net & http://raul.pleyades.net/


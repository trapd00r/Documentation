From zsh-workers-return-11502-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 22 14:28:22 2000
Return-Path: <zsh-workers-return-11502-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2657 invoked from network); 22 May 2000 14:28:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 May 2000 14:28:21 -0000
Received: (qmail 2765 invoked by alias); 22 May 2000 14:28:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11502
Received: (qmail 2758 invoked from network); 22 May 2000 14:28:12 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000522142741.ZM20834@candle.brasslantern.com>
Date: Mon, 22 May 2000 14:27:41 +0000
In-Reply-To: <200005221125.NAA18654@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "PATCH: Re: TAB and PS2 and multiline buffers and vared" (May 22,  1:25pm)
References: <200005221125.NAA18654@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Re: TAB and PS2 and multiline buffers and vared
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 22,  1:25pm, Sven Wischnowsky wrote:
} Subject: PATCH: Re: TAB and PS2 and multiline buffers and vared
}
} Bart Schaefer wrote:
} 
} > The situation is different in vared (again with a multiline buffer).
} > Sometimes it beeps and then asks me whether I want to see all 2200
} > possiblities, other times it just beeps and refuses to insert anything.
} > Whether it asks or just beeps seems to depend on whether I started out
} > on vared of a value containing newlines (e.g. vared functions[foo] vs.
} > vared foo).
} 
} Hm. Is that with the current CVS version?

Yes.  (Well, current at the time I sent the mail.)

} > Sometimes after this happens the completion system gets into a state
} > where _complete_debug ceases to function properly.  I type ^X? and the
} > debug output goes to the file as expected, but _message doesn't work.
} > Also, `?' gets inserted because of compstate[insert]=tab, which is a bit
} > strange though not exactly wrong.
} 
} The patch also changes it to insert a tab only when TAB was pressed.

Thanks, but as I mentioned in my followup message, compstate[insert]
seems to have gotten `stuck' somehow, that is, once I'm in this state
it *always* begins with "tab " so nothing will complete anywhere.  Not
just inside vared, but after I exit vared and go on to the next PS1.

} About the missing _message: you have _oldlist in your completer style, 
} right? Did you try ^X? directly after the TAB?

Yes, I do have _oldlist, and probably I did try right after the tab.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


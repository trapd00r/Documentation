From zsh-workers-return-17700-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 19 12:44:19 2002
Return-Path: <zsh-workers-return-17700-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22355 invoked from network); 19 Sep 2002 12:44:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Sep 2002 12:44:18 -0000
Received: (qmail 12516 invoked by alias); 19 Sep 2002 12:44:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17700
Received: (qmail 12502 invoked from network); 19 Sep 2002 12:44:05 -0000
From: "David Gómez" <david@pleyades.net>
Date: Thu, 19 Sep 2002 14:43:18 +0200
To: Peter Stephenson <pws@csr.com>, zsh-workers@sunsite.dk
Subject: Re: Using zsh in gcc compilation
Message-ID: <20020919124318.GA17624@fargo>
References: <20020919113048.GA17371@fargo> <1338.1032437707@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <1338.1032437707@csr.com>
User-Agent: Mutt/1.3.28i

On Thu, Sep 19, 2002 at 01:15:07PM +0100, Peter Stephenson wrote:
> Maybe we're getting closer after all... can you run
>   build_tooldir=/usr/local/sparc-sun-solaris2.6
>   ./xgcc -B./ -B$build_tooldir/bin/ -isystem $build_tooldir/include \
> -isystem $build_tooldir/sys-include --print-multi-lib

Yes, this is the command that set these values in MULTILIB. 
'./xgcc --print-multi-lib' gives the output '.;' and
'./xgcc -B./ --print-multi-lib' gives '.;' 'on;@on'

but executing this command with bash produces the same output, so i'm not
sure if we're in the right path to tracking down the error... 

> this point, possibly not.  (Possibly GCC_FOR_TARGET is different at this
> point; that's everything from ./xgcc up to sys-include, in which case
> this might not be the right argument.  If you can see a value of
> GCC_FOR_TARGET being passed down into the system at that point, that's
> the one to use.)

GCC_FOR_TARGET is xgcc, the error always happens when stage1 is finishing.

Maybe my guess is wrong, but after looking at the logs of a successful compiling
with bash, the only difference between in the commands preceding this error was
the additional -on in the xgcc command. After that, libgcc.map is empty, and
the option --version-script passed to the last xgcc fails.


-- 
David Gómez

"The question of whether computers can think is just like the question of
 whether submarines can swim." -- Edsger W. Dijkstra


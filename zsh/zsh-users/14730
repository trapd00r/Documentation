From zsh-users-return-14730-mason-zsh=primenet.com.au@zsh.org Fri Jan 22 10:31:25 2010
Return-Path: <zsh-users-return-14730-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7266 invoked by alias); 22 Jan 2010 10:31:25 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14730
Received: (qmail 19778 invoked from network); 22 Jan 2010 10:31:23 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at mycircuit.org does not designate permitted sender hosts)
X-Cloudmark-Score:   0.000000 []
X-Cloudmark-Analysis: v=1.0 c=1 a=FLNw7BHwbCoA:10 a=IMQoeJUgQILLU9Vf30n77w==:17 a=K0LynYjVJ5a7BqtxVnIA:9 a=1TrbkTFjZy-w4VKmrg0haafOavwA:4
Received-SPF: none
 receiver=mailfe04.swip.net; client-ip=188.155.216.144; envelope-from=vmail@mycircuit.org
Message-ID: <4B597061.10701@mycircuit.org>
Date: Fri, 22 Jan 2010 10:31:13 +0100
From: Peter <vmail@mycircuit.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.7) Gecko/20100111 Thunderbird/3.0.1
MIME-Version: 1.0
To: Bart Schaefer <schaefer@brasslantern.com>
CC: zsh-users@zsh.org
Subject: Re: what is the effect of a percentage sign (%) as last character
 on	the command line
References: <4B582F3C.2010709@mycircuit.org>	<100121080540.ZM21444@torch.brasslantern.com>	<4B58AB3A.7050300@mycircuit.org>	<2d3b879b1001211336m5b78982au96f267ea472af43d@mail.gmail.com>	<4B58D35D.1050208@mycircuit.org> <100121182713.ZM21821@torch.brasslantern.com>
In-Reply-To: <100121182713.ZM21821@torch.brasslantern.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 01/22/2010 03:27 AM, Bart Schaefer wrote:
> On Jan 21, 11:21pm, Peter wrote:
> }
> } p% zsh -v
> } ( lot of output )
>
> Er, well, yes, that output is what was important.
>    
Ok, sorry, I got it, in fact, my .zshrc was still active after zsh -f ( 
because this didn't clear the previous settings ) and after zsh -l in a 
fresh shell
I found the bug:

I had  in .zshrc

case $TERM in
     (xterm*|rxvt|mrxvt)
     print -Pn "\e]0;%n@%m: $1\a"
     ;;
   esac

apparently , the $1 caused the problem, I replaced it with ~% and now 
the shell behaves as expected:

case $TERM in
     (xterm*|rxvt|mrxvt)
     print -Pn "\e]0;%n@%m: %~\a"
     ;;
   esac

I take it as an exercise for 2010 to understand why the first version 
causes the erroneous behavior (;-

Thanks a lot for you hints.

Peter


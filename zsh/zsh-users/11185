From zsh-users-return-11185-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 10 18:15:12 2007
Return-Path: <zsh-users-return-11185-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8782 invoked from network); 10 Feb 2007 18:15:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Feb 2007 18:15:06 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 81448 invoked from network); 10 Feb 2007 18:14:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Feb 2007 18:14:57 -0000
Received: (qmail 24045 invoked by alias); 10 Feb 2007 18:14:50 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11185
Received: (qmail 24032 invoked from network); 10 Feb 2007 18:14:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Feb 2007 18:14:49 -0000
Received: (qmail 80223 invoked from network); 10 Feb 2007 18:14:49 -0000
Received: from s1tank.virtdom.com (216.240.101.50)
  by a.mx.sunsite.dk with SMTP; 10 Feb 2007 18:14:41 -0000
Received: (qmail 55381 invoked by uid 89); 10 Feb 2007 18:16:54 -0000
Received: from ool-44c5a2de.dyn.optonline.net (HELO venti) (brian@aljex.com@68.197.162.222)
  by s1tank.virtdom.com with SMTP; 10 Feb 2007 18:16:54 -0000
Message-ID: <003d01c74d3f$3bbd7960$6600000a@venti>
From: "Brian K. White" <brian@aljex.com>
To: <zsh-users@sunsite.dk>
References: <Xns98D2ADD16C100zzappergmailcom@80.91.229.5> <070209182939.ZM18654@torch.brasslantern.com>
Subject: Re: test if a parameter is numeric
Date: Sat, 10 Feb 2007 13:13:57 -0500
Organization: Aljex Software
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3028
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3028


----- Original Message ----- 
From: "Bart Schaefer" <schaefer@brasslantern.com>
To: <zsh-users@sunsite.dk>
Sent: Friday, February 09, 2007 9:29 PM
Subject: Re: test if a parameter is numeric


> On Feb 9,  5:05pm, zzapper wrote:
> }
> } I just want to test if a parameter is numeric
> }
> } if [[ "$1" == [0-9] ]]
>
> Better:
>
>  if [[ "$1" = <-> ]]
>
> This is a zsh-ism, so it's not cross-shell portable, but the pattern <->
> matches any string having any number of digits and only digits.

ksh, legacy sco/sun/etc  sh, bash etc...
I usually load the value into an integer typset variable,
sometimes testing the success/fail of the assignment itself:
    typeset -i N="$1" 2>/dev/null && echo yes || echo no
sometimes just using the resulting variable, treating "" different than "0" 
or the same as "0" depending on the situation
    typeset -i N="$1" 2>/dev/null
or if your shell has built in arithmatic (zsh/kash/bash, not plain sh on 
platforms where sh isn't really bash) instead of using a type defined 
variable, using the common age old trick (in any language) of just 
attempting an arithmatic operation, add 0 to the value.
    unset N
    N=$((1+0))
if $1 was numeric the N will have it, else N will still be unset

Both of the above approaches partially handle floating points.
The string may have a non-numerc "." in it, say "4.5" and the test will come 
out positive as numeric.
But, N will be "4" not 4.5 or 5

Depending on the source of the data, you may also want to run the string 
through tr -d "," so that 4,500 becomes 4500 and is treated as numeric.

Now someone will pipe up with some exotic 3 character zsh syntax thats like 
built-in sed on the fly instead of running a command like tr. "tr!! that's 
so 80's" heh :)

Brian K. White  --  brian@aljex.com  --  http://www.aljex.com/bkw/
+++++[>+++[>+++++>+++++++<<-]<-]>>+.>.+++++.+++++++.-.[>+<---]>++.
filePro  BBx    Linux  SCO  FreeBSD    #callahans  Satriani  Filk!


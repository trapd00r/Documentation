From zsh-workers-request@euclid.skiles.gatech.edu Tue Feb 18 09:01:08 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 17987 invoked from network); 18 Feb 1997 09:01:06 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 18 Feb 1997 09:01:06 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id DAA06500; Tue, 18 Feb 1997 03:54:41 -0500 (EST)
Resent-Date: Tue, 18 Feb 1997 03:54:41 -0500 (EST)
Message-Id: <199702180856.JAA16888@hydra.ifh.de>
To: carl.johnson@nautronix.com.au (Carl Johnson),
        zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: zsh-3.0.2 core'ing + a small feature request 
In-reply-to: "Carl Johnson"'s message of "Tue, 18 Feb 1997 15:44:40 MET."
             <199702180744.PAA19763@b2.nixltd.com.au> 
Date: Tue, 18 Feb 1997 09:56:25 +0100
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"quT_J.0.Vb1.GvM2p"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2909
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Carl Johnson wrote:
> hi,
> i am not on any of the zsh lists so please cc me on any replies.
> 
> zsh-3.0.2 and solaris 2.5.1
> when i do....
> 
> 1> ls -al
> 2> vared -h 1
> 3> <esc>k
> which gets me the ls -al line again, then hit return and it cores, every time
> .

The fix seems to be fairly simple.  (I didn't even know this was
supported, but looking at the code it certainly should be.)

*** Src/Zle/zle_main.c.vn	Sun Jan 12 01:46:43 1997
--- Src/Zle/zle_main.c	Tue Feb 18 09:39:53 1997
***************
*** 613,619 ****
  	t[strlen(t) - 1] = '\0';
      /* final assignment of parameter value */
      pm = (Param) paramtab->getnode(paramtab, args[0]);
!     if (PM_TYPE(pm->flags) == PM_ARRAY) {
  	PERMALLOC {
  	    setaparam(args[0], spacesplit(t, 1));
  	} LASTALLOC;
--- 613,619 ----
  	t[strlen(t) - 1] = '\0';
      /* final assignment of parameter value */
      pm = (Param) paramtab->getnode(paramtab, args[0]);
!     if (pm && PM_TYPE(pm->flags) == PM_ARRAY) {
  	PERMALLOC {
  	    setaparam(args[0], spacesplit(t, 1));
  	} LASTALLOC;

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutsches Elektronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


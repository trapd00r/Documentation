From zsh-workers-return-11809-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jun 08 03:14:28 2000
Return-Path: <zsh-workers-return-11809-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27126 invoked from network); 8 Jun 2000 03:14:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jun 2000 03:14:26 -0000
Received: (qmail 6330 invoked by alias); 8 Jun 2000 03:14:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11809
Received: (qmail 6323 invoked from network); 8 Jun 2000 03:14:07 -0000
Message-ID: <20000608031405.12127.qmail@web1303.mail.yahoo.com>
Date: Wed, 7 Jun 2000 20:14:05 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Re: Speaking of slow completion ...
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

--- Bart Schaefer <schaefer@candle.brasslantern.com> wrote:
>Any ideas on optimizing _path_files for directories with LOTS of subdirs?

Not sure what you can do if you have to wait for the OS.

Something I suggested in workers/9630 would be to have a style that caused 
_path_files to basically do stats (-d/-f) on the leading portion of a path that
is to be completed.  If the leading part exists, don't attempt to do any
completion on that part of the path, you've got what you want.  Or check for
existence before attempting to glob a name.

I think the stats will go much faster than the directory scans.

This doesn't really help in your example, since you want zsh to perform
completion in the big directories.  But if you know certain directories are
going to can cause you to wait for a while, you might be willing to type that
part of the path.

Also, on a side note, I think there might be a bug in compadd (possibly
matching) that causes it to get in a bad state if an interrupt is sent while it
is working.  I typically want to interrupt in situations when completion is
slow.  Completion works, but matching seems to have some problems.  (I know,
you probably want some those helpful details...)

-FR

__________________________________________________
Do You Yahoo!?
Yahoo! Photos -- now, 100 FREE prints!
http://photos.yahoo.com


From zsh-users-return-4205-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 08 06:14:39 2001
Return-Path: <zsh-users-return-4205-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6010 invoked from network); 8 Sep 2001 06:14:38 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Sep 2001 06:14:38 -0000
Received: (qmail 18155 invoked by alias); 8 Sep 2001 06:14:26 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4205
Received: (qmail 18143 invoked from network); 8 Sep 2001 06:14:25 -0000
Date: Sat, 8 Sep 2001 02:13:31 -0400
From: Sweth Chandramouli <svc@sweth.net>
To: ZSH Users <zsh-users@sunsite.dk>
Subject: Re: zsh dumping core because I don't grok TRAPEXIT
Message-ID: <20010908021331.A14998@astaroth.sweth.net>
Mail-Followup-To: ZSH Users <zsh-users@sunsite.dk>
References: <20010907180418.A13819@astaroth.sweth.net> <1010908055006.ZM18450@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="Dxnq1zWXvFF0Q93v"
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <1010908055006.ZM18450@candle.brasslantern.com>


--Dxnq1zWXvFF0Q93v
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Sat, Sep 08, 2001 at 05:50:06AM +0000, Bart Schaefer wrote:
> } 	; I know that 4.0.2 is out now, but I just haven't had a
> } chance to install it yet.
>=20
> You need to install 4.0.2, or at least 3.1.9-dev-2+, because there were
> several bug fixes in memory management of the exit trap handler shortly
> after the 3.1.9 release.  This is almost certainly what is causing your
> core dump.
	Ah.  It figures.  OK, installing 4.0.2 has been added to
the todo list for this week.

> } I'd still like to know how TRAPEXIT is really supposed to work
>=20
> I'd like to know why mutt is exiting with 23.  It doesn't when I try it.
	I'll be sending a mail to mutt-users next to discuss=20
that particular mystery.  :)

> Anyway, TRAPEXIT is supposed to work pretty much like you thought it was.
> It's the only trap-function that -always- behaves as if LOCAL_TRAPS is
> set (which is how it got memory-management problems in the first place).
> That is, the exit trap applies to all functions and subshells called
> from the function that defines it, but it becomes undefined after it
> is called when the defining function exits.
	OK.  The more I think about it, though, the less I see
when TRAPEXIT would really be useful.  How would

function TRAPEXIT {
   do_something
}
do_other_thing

	ever be different than

do_other_thing ; do_something

	?

	-- Sweth.

--=20
Sweth Chandramouli ; <svc@sweth.net>
President, Idiopathic Systems Consulting

--Dxnq1zWXvFF0Q93v
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (SunOS)
Comment: For info see http://www.gnupg.org

iEYEARECAAYFAjuZtwoACgkQDm6vx6GSHln8/ACdG/MfLS8p51FkKpBVZ4fYQNvI
H3YAn08GrII1/2uc6sBuadtvFuVEApzT
=bHa5
-----END PGP SIGNATURE-----

--Dxnq1zWXvFF0Q93v--


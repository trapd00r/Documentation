From zsh-workers-return-13340-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 11 10:35:41 2001
Return-Path: <zsh-workers-return-13340-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13361 invoked from network); 11 Jan 2001 10:35:40 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Jan 2001 10:35:40 -0000
Received: (qmail 15484 invoked by alias); 11 Jan 2001 10:35:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13340
Received: (qmail 15473 invoked from network); 11 Jan 2001 10:35:33 -0000
Message-ID: <Tc0a8890c5109d817e0@mailsweeper01.cambridgesiliconradio.com>
To: James Kirkpatrick <jimkirk@uwyo.edu>,
    zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: Problem with zsh 3.1.9 (Sun Solaris 7) 
In-Reply-To: Your message of "Wed, 10 Jan 2001 13:10:01 MST."
             <Pine.GSO.4.10.10101101248310.19225-100000@asuwlink.uwyo.edu> 
Date: Thu, 11 Jan 2001 10:35:01 +0000
From: Peter Stephenson <pws@csr.com>

> I'm trying to install zsh 3.1.9, from a pre-built package from the Sun
> freeware site (www.sunfreeware.com).  This was supposedly built on Solaris
> 7 and I've installed it on Solaris 7, and brought over the /etc/zshrc,
> /etc/zshenv, /etc/zlogin, and /etc/zshfn/* from an older system (Solaris
> 2.5.1, zsh 3.0.7).  When I invoke zsh (as root) I get:
> 
>   /etc/zshrc: failed to load module: comp1 [22]

All your problems look like difficulties with the path.  The two possible
reasons for this are that the files are installed in the wrong place, or
the paths aren't set up properly.  If it's the former, you need to dig them
out of the appropriate package.

Otherwise, for the modules, you need to set MODULE_PATH (colon-separated
array) or module_path (array).  The default location is
/usr/local/lib/zsh/$ZSH_VERSION .  We're changing to a hierarchical module
naming scheme, so comp1 will become zsh/comp1 etc., but the bare names
should work fine in 3.1.9.

For the functions, in particular compinit, you need to set FPATH or fpath
in a similar way.  The default installation location for these is
/usr/local/share/zsh/$ZSH_VERSION/functions , and depending on the
configuration you may need to add all the subdirectories of that instead of
the top directory (it's obvious which --- either that directory contains a
large number of files or a set of subdirectories).

Both of these are basic requirements for the shell to work normally, so if
they need setting I'd suggest you put them in /etc/zshenv; for example,
  MODULE_PATH=/usr/local/lib/zsh/3.1.9
  FPATH=/usr/local/share/zsh/3.1.9/functions
or
  fpath=(/usr/local/share/zsh/3.1.9/functions/*)

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


From zsh-users-return-11114-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 16 11:51:57 2007
Return-Path: <zsh-users-return-11114-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 288 invoked from network); 16 Jan 2007 11:51:51 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO,
	UNPARSEABLE_RELAY autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Jan 2007 11:51:51 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 31854 invoked from network); 16 Jan 2007 11:51:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Jan 2007 11:51:44 -0000
Received: (qmail 14834 invoked by alias); 16 Jan 2007 11:51:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11114
Received: (qmail 14824 invoked from network); 16 Jan 2007 11:51:35 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 16 Jan 2007 11:51:35 -0000
Received: (qmail 30618 invoked from network); 16 Jan 2007 11:51:35 -0000
Received: from e4ward.com (70.85.31.73)
  by a.mx.sunsite.dk with SMTP; 16 Jan 2007 11:51:26 -0000
Received: from localhost ([127.0.0.1] helo=e4ward.com)
	by e4ward.com with smtp (Exim 4.34)
	id 1H6mqc-0006gi-VA
	for zsh-users@sunsite.dk; Tue, 16 Jan 2007 06:51:27 -0500
Received: from 66.249.92.169
	by e4ward.com;
	Tue, 16 January 2007 06:51:26 -0400
Received: by ug-out-1314.google.com with SMTP id k3so1602051ugf
        for <zsh--users-sunsite.dk-zsh-lydgate.e4ward.com-A0C-nxi3-4@reply.e4ward.com>; Tue, 16 Jan 2007 03:51:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:date:from:to:subject:message-id:references:mime-version:content-type:content-disposition:in-reply-to:user-agent;
        b=Pl3EtkmrIMeZ0Psk0GNzSlHyPvrYUpO9LYwjgFF5JVuEZ1gIMBhdj2hPME6myXZbY//KXpYG8GDSNDmTR+CC3SbGAJd/CvRqxatFgJlzh2UttZ73sgYYU3BRVirLhBCLTuy4cWa4FYRyHvf8bZ6RWfIKp38zHug3ZPhqKzjzevM=
Received: by 10.66.219.11 with SMTP id r11mr7268264ugg.1168948283808;
        Tue, 16 Jan 2007 03:51:23 -0800 (PST)
Received: from localhost ( [128.232.247.218])
        by mx.google.com with ESMTP id o30sm8457577ugd.2007.01.16.03.51.22;
        Tue, 16 Jan 2007 03:51:23 -0800 (PST)
Date: Tue, 16 Jan 2007 11:51:19 +0000
From:  Lydgate  <zsh@lydgate.e4ward.com>
To: zsh-users@sunsite.dk
Subject: Re: zsh completion for todo.*
References: <E1H6c5v-0002YQ-8l@e4ward.com> <E1H6lkN-0005qR-QK@b.e4ward.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <E1H6lkN-0005qR-QK@b.e4ward.com>
User-Agent: Mutt/1.5.12-2006-07-14
Message-ID: <E1H6mqc-0006gi-VA@e4ward.com>

On Tue, Jan 16, 2007 at 10:38:54AM +0000, Peter Stephenson wrote:
> I'm not sure I've followed what you're doing.

It appears something that should already work, i.e., completion of 
contexts and projects.

> If you get as far as "todo.sh list p:" it will complete projects, and after
> you type "todo.sh list @" it will complete contexts; the same for any
> word after a "list" subcommand.

This doesn't work for me, possibly because I use + for projects rather 
than p:.  But I tried switching it and it still doesn't work.

> I note I don't complete projects or contexts in normal text, which is
> potentially useful and easy to add.  In that case handling words in
> quotes is a good idea since you've got a string of words in the same
> argument before the bit you want to complete.  Possibly that covers what
> you want.

When I said it was missing quotes, I only meant that the words "search 
terms ..." needed quotes in the original _todo.sh.

> I've attached the modified function so you don't need to get the
> original out of the CVS archive (it has lines longer than 80 
> characters).

For some reason, with this new function all I get is:
_arguments:comparguments:208: doubled argument definition: 
1:command:->commands

I'm looking at the code, thanks for your help.

Lydgate


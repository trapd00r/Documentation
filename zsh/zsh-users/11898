From zsh-users-return-11898-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 29 12:57:33 2007
Return-Path: <zsh-users-return-11898-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17705 invoked from network); 29 Sep 2007 12:57:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Sep 2007 12:57:24 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 11956 invoked from network); 29 Sep 2007 12:57:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Sep 2007 12:57:19 -0000
Received: (qmail 28002 invoked by alias); 29 Sep 2007 12:57:10 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11898
Received: (qmail 27985 invoked from network); 29 Sep 2007 12:57:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 29 Sep 2007 12:57:10 -0000
Received: (qmail 10694 invoked from network); 29 Sep 2007 12:57:10 -0000
Received: from mtaout02-winn.ispmail.ntl.com (81.103.221.48)
  by a.mx.sunsite.dk with SMTP; 29 Sep 2007 12:57:03 -0000
Received: from aamtaout03-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout02-winn.ispmail.ntl.com with ESMTP
          id <20070929125702.XCXJ4.mtaout02-winn.ispmail.ntl.com@aamtaout03-winn.ispmail.ntl.com>
          for <zsh-users@sunsite.dk>; Sat, 29 Sep 2007 13:57:02 +0100
Received: from pws-pc.ntlworld.com ([81.107.45.67])
          by aamtaout03-winn.ispmail.ntl.com with ESMTP
          id <20070929125702.VDVE26699.aamtaout03-winn.ispmail.ntl.com@pws-pc.ntlworld.com>
          for <zsh-users@sunsite.dk>; Sat, 29 Sep 2007 13:57:02 +0100
Received: from pws-pc.ntlworld.com (pws-pc.ntlworld.com [127.0.0.1])
	by pws-pc.ntlworld.com (8.14.1/8.13.8) with ESMTP id l8TCuak4003565
	for <zsh-users@sunsite.dk>; Sat, 29 Sep 2007 13:56:36 +0100
Message-Id: <200709291256.l8TCuak4003565@pws-pc.ntlworld.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-users@sunsite.dk
Subject: Re: nohup dies
In-Reply-To: Message from "Pau Amaro-Seoane" <vim.unix@googlemail.com>
   of "Sat, 29 Sep 2007 09:23:34 +0200." <30c383e70709290023x46dc7d13o2ff3904a05413496@mail.gmail.com>
Date: Sat, 29 Sep 2007 13:56:36 +0100

"Pau Amaro-Seoane" wrote:
> > nohup is not a shell builtin; it's simply an executable programme that's
> 
> man nohup
> 
> (...)
>        NOTE:  your  shell may have its own version of nohup, which
> usually supersedes the version described
>        here.  Please refer to your shell's documentation for details
> about the options it supports.
> (...)

Yes, I'm well aware nohup *may* be a shell builtin, but in zsh it
isn't.  The easy way to check is to run "which nohup".

> > A lot of other shells, I presume (but I haven't actually checked)
> > including ksh, don't send SIGHUP to processes when the shell exits.
> 
> But zsh is supposed to emulate ksh, right?

Not unless you have "emulate ksh" in effect.  If you do, "setupt nohup"
is turned on and you have the same (global) effect as in ksh (you don't
need the "nohup" command at all).

> nohup whatever should work regardless of shell.

"nohup" does work; as I pointed out you're using it the wrong way.  The
difference in ksh is that you don't need it at all; it's harmless if you
do use it, but ksh doesn't send the HUP signal anyway.

> And it _did_ in the
> older version of zsh, now not anymore. Can you tell me why?

Nothing here has changed, but as I suggested before your old setup may
have had the "nohup" option turned on.

> the "solution" for now is to launch the simulation with ksh... or
> resort to screen... but it's a pity, I stick to zsh a lot

Just "setopt nohup" in your initialisation file, or "emulate ksh" if
you're set on ksh syntax generally.

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


From zsh-workers-return-18855-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 15 01:58:05 2003
Return-Path: <zsh-workers-return-18855-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21752 invoked from network); 15 Jul 2003 01:58:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Jul 2003 01:58:04 -0000
Received: (qmail 27840 invoked by alias); 15 Jul 2003 01:58:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18855
Received: (qmail 27830 invoked from network); 15 Jul 2003 01:57:59 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 15 Jul 2003 01:57:59 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.27.190.146] by sunsite.dk (MessageWall 1.0.8) with SMTP; 15 Jul 2003 1:57:59 -0000
Received: from ceramic.fifi.org (mail@ceramic.fifi.org [216.27.190.147])
	by tantale.fifi.org (8.9.3p2/8.9.3/Debian 8.9.3-21) with ESMTP id SAA29497;
	Mon, 14 Jul 2003 18:57:57 -0700
Received: from phil by ceramic.fifi.org with local (Exim 3.35 #1 (Debian))
	id 19cF4m-0002F1-00; Mon, 14 Jul 2003 18:57:56 -0700
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: More fun with completion: glob qualifiers ignored for ignored-patterns style?
References: <87n0fg3l1m.fsf@ceramic.fifi.org>
	<1030714213940.ZM6927@candle.brasslantern.com>
Mail-Copies-To: nobody
From: Philippe Troin <phil@fifi.org>
Date: 14 Jul 2003 18:57:56 -0700
In-Reply-To: <1030714213940.ZM6927@candle.brasslantern.com>
Message-ID: <87brvw361n.fsf@ceramic.fifi.org>
Lines: 45
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Philippe Troin <phil@fifi.org>

Bart Schaefer <schaefer@brasslantern.com> writes:

> On Jul 14,  1:33pm, Philippe Troin wrote:
> } Subject: More fun with completion: glob qualifiers ignored for ignored-pat
> }
> } % zstyle ':completion:*:all-files' ignored-patterns '*(/)'
> 
> The ignored-patterns style is not checked for the all-files tag, only for
> the globbed-files tag in _files and the argument-rest tag in _normal.
> 
> However, even if you set it for the correct tag, it still won't work,
> because it really is a _pattern_ (as in [[ string = pattern ]]) and not
> a filesystem glob.  It can only match the string, not the file type.

Ok, that makes sense.

> } Is that because bare_glob_qual is unset when expanding the pattern?
> 
> So, no.
> 
> } By the way, the manual says about glob qualifiers:
> } 
> }    If the option BARE_GLOB_QUAL is set, then a trailing set of parentheses
> }    containing no `|' or `(' characters (or `~' if it is special) is taken
> }    as a set of glob qualifiers.
> } 
> } Does that mean that:
> } 
> }  - if BARE_GLOB_QUAL is set, glob qualifiers are enabled
> } 
> }  - if BARE_GLOB_QUAL is unset, glob qualifiers are disabled?
> 
> In 4.0.x, that's effectively what it means.  BARE_GLOB_QUAL was added in
> anticipation of other qualifier syntax that had not been invented yet.
> 
> In 4.1.x, it means that if BARE_GLOB_QUAL is set, zsh uses a heuristic to
> decide if a trailing parenthesized expression is a glob qualifier, and if
> BARE_GLOB_QUAL is NOT set, you have to 'setopt EXTENDED_GLOB' and use an
> explicit (#q) to introduce a qualifier.

Understood. Then the 4.0.x manual is quite confusing in that respect,
at least to me.

Thanks.
Phil.


From zsh-workers-return-17257-mason-zsh=primenet.com.au@sunsite.dk Wed May 29 18:00:56 2002
Return-Path: <zsh-workers-return-17257-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24728 invoked from network); 29 May 2002 18:00:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 29 May 2002 18:00:55 -0000
Received: (qmail 7061 invoked by alias); 29 May 2002 18:00:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17257
Received: (qmail 7044 invoked from network); 29 May 2002 18:00:45 -0000
Date: Wed, 29 May 2002 11:00:40 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: schaefer@ns1.sodaware.com
To: Peter Stephenson <pws@csr.com>
cc: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: PATCH: Re: Odd trap return status 
In-Reply-To: <15927.1022694626@csr.com>
Message-ID: <Pine.LNX.4.44.0205291055460.7907-100000@ns1.sodaware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 29 May 2002, Peter Stephenson wrote:

> I think you may be missing the point a bit, unless I am...
>
>   trap 'return 1' DEBUG
>
> would already cause a return from the enclosing function, only the
> return status would get lost.  I haven't changed the command flow

Right, but

	foo () {
	 trap 'false' DEBUG
	 true
	}

should not cause the exit status of foo to be nonzero.  Really the worse
case is

	foo() {
	 trap 'echo This command succeeds' DEBUG
	 false
	}

which should not cause foo() to return a zero status.  Installing a debug
trap shouldn't change the behavior of the debugged code unless it *also*
(intentionally) changes the command flow.


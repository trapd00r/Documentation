From zsh-users-return-12908-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 11 04:49:37 2008
Return-Path: <zsh-users-return-12908-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20470 invoked from network); 11 Jun 2008 04:49:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Jun 2008 04:49:33 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 54057 invoked from network); 11 Jun 2008 04:49:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Jun 2008 04:49:24 -0000
Received: (qmail 12696 invoked by alias); 11 Jun 2008 04:49:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12908
Received: (qmail 12680 invoked from network); 11 Jun 2008 04:49:14 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Jun 2008 04:49:14 -0000
Received: from elation.princeton.edu (elation.Princeton.EDU [128.112.144.224])
	by bifrost.dotsrc.org (Postfix) with ESMTP id A00F48028AC3
	for <zsh-users@sunsite.dk>; Wed, 11 Jun 2008 06:49:10 +0200 (CEST)
Received: from [192.168.20.1] (pool-70-17-169-170.pitt.east.verizon.net [70.17.169.170])
	by elation.princeton.edu (Postfix) with ESMTP id DFDDA1E1A3FC0
	for <zsh-users@sunsite.dk>; Wed, 11 Jun 2008 00:48:43 -0400 (EDT)
Date: Wed, 11 Jun 2008 00:48:21 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
Reply-To: Zsh Users <zsh-users@sunsite.dk>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: [ZSH] Re: idea for new feature (was: Re: sticky-note and zle
 bindings)
In-Reply-To: <2d460de70806101817x762f9cf0t7690b5859a5e4e20@mail.gmail.com>
Message-ID: <alpine.LNX.1.10.0806102216440.26935@transport.benizi.com>
References: <080125095733.ZM20873@torch.brasslantern.com>  <13ed09c00801251018l1007ac9an9c453651d5695c46@mail.gmail.com>  <080125181227.ZM21172@torch.brasslantern.com>  <2d460de70801260741q16e4f197he2307be6e4f81c82@mail.gmail.com>  <080126153143.ZM6173@torch.brasslantern.com>
  <20080128163340.GA18831@spiegl.de>  <13ed09c00806062139g6e0e81eaxb350eaca45698a94@mail.gmail.com>  <alpine.LNX.1.10.0806100002360.11378@transport.benizi.com>  <2d460de70806101702t40eb23f0n566aee04131f8119@mail.gmail.com>  <alpine.LNX.1.10.0806102005540.26935@transport.benizi.com>
 <2d460de70806101817x762f9cf0t7690b5859a5e4e20@mail.gmail.com>
User-Agent: Alpine 1.10 (LNX 1032 2008-04-11)
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="1887494288-1038456256-1213150939=:26935"
Content-ID: <alpine.LNX.1.10.0806110045160.26935@transport.benizi.com>
X-Virus-Scanned: ClamAV 0.92.1/7434/Wed Jun 11 04:59:01 2008 on bifrost
X-Virus-Status: Clean

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--1887494288-1038456256-1213150939=:26935
Content-Type: TEXT/PLAIN; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8BIT
Content-ID: <alpine.LNX.1.10.0806102222381.26935@transport.benizi.com>

On Wed, 11 Jun 2008, Richard Hartmann wrote:

> On Wed, Jun 11, 2008 at 02:26, Benjamin R. Haskell <zsh@benizi.com> wrote:
>
>> I don't see the advantage or difference yet (except the "on a different 
>> level" part -- the 'screen' way makes more sense to me at this point).
>
> For example, you can not space out screen windows over terminal emulator 
> tabs. Also, you can not run a screen session across a reboot which works 
> just fine with a ID thing.

Both good points. I hadn't considered the former because terminals, tabs, 
and I don't get along (47 tabs in Firefox currently, but back when I was 
using Konsole, tabs just drove me mad.). And the latter because I'd been 
thinking in the 'screen' paradigm (just saving my running apps, not 
reinstantiating them or similar).


>> Perusing the previous thread made me wonder: Is there a solution for 
>> the problem of needing co-operation from, say, the X Window manager? Or 
>> have you settled on being able to pass in a dead/killed shell's 
>> UUID/GUID?
>
> What would you neec X for? The TE sets the variable in the environment 
> and invokes the shell, which takes over from there.

That question was regarding the issues in the second email in the thread 
you forwarded:

----------
From: Bart Schaefer <schaefer@brasslantern.com>
Date: Thu, Jan 17, 2008 at 05:11
To: zsh-users@sunsite.dk

[...]

The problem is that zsh can't do it by iself.  So, your X server has 
crashed and 20 shell windows went kablooie.  Even if every zsh has 
faithfully been recording its state somewhere, how does each new xterm you 
launch on the retarted X desktop know which one of the 20 saved states it 
should restore?

This is actually made *worse* by the fact that many modern X desktops have 
"session managers" that will remember the apps and placement of your 
windows and re-launch them on restart, so you may have 20 new xterms all 
examining the set of state files effectively at once.

Even supposing your session manager doesn't do this, and you have a 
command to launch a new xterm for every state file and somehow pass it 
(ZDOTDIR maybe?) the name of the file it should initialize, zsh can't 
track window placements or much of anything else that would help you to 
tell which window is which after they reappear.

The upshot is that this isn't a zsh feature -- it's a cooperative feature 
that requires effort from both the shell and whatever other user interface 
environment it's running inside.  It's pretty simple to dump state 
somewhere from the precmd() function, if only you know what to do with it 
later.

[...]
----------

And again in:

----------
From: Bart Schaefer <schaefer@brasslantern.com>
Date: Sun, Jan 20, 2008 at 01:05
To: zsh-users@sunsite.dk


On Jan 19, 10:46pm, Andy Spiegl wrote:
} Subject: Re: idea for new feature (was: Re: sticky-note and zle bindings)
} >  SHELL_SESSION_COOKIE=`uuidgen`
That's the part that would require cooperation from the X session manager 
and/or the terminal emulator.
----------

But, later emails (that I didn't get to via the web interface) seem to 
scale that expectation back to the terminal emulator setting a variable or 
some other scheme (just storing 5,10,... sessions and automatically 
resuming unless told not to, etc.).


>> (Is there an alternate interface to the online mailing list archive, 
>> btw? I hate all the clicking around -- I'd rather download an .mbox 
>> file and use it in Alpine.)
>
> I forwarded you the full thread.

Thanks. Much easier.


> Is Alpine a proper replacement for pine, now? I heard of pain when 
> Alpine was born.

I've been using it for months now. But, I never had any trouble. Most of 
the issues on the lists (alpine-alpha formerly, and alpine-info 
currently[1]) seem to center around character-set issues (which I avoid by 
using UTF-8) and differences in pipe behavior (some GPG/PGP scripts can't 
get the old Pine piping behavior in Alpine).

[1] https://mailman1.u.washington.edu/mailman/listinfo/alpine-info


>> But, won't this also be a problem with whatever mechanism you're 
>> envisioning? Or is this beyond the scope of what you'd want your 
>> "thing" to do (re-attaching already-running programs)?
>
> Re-attaching is outside the scope of this. One could think about using a 
> mechanism like retty or simply stopping the execution of the 'child', 
> pivoting STDIN, STDOUT and STDERR from under its feet and letting it run 
> again, but that confuses a _lot_ of programs (for the obvious reason 
> that this is something you normally do not anticipate).
>

Yes, that makes more sense to me now with more context. (mainly: storing 
shell state rather than terminal state)

Best,
Ben
--1887494288-1038456256-1213150939=:26935--


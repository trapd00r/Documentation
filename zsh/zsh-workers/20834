From zsh-workers-return-20834-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 21 12:31:25 2005
Return-Path: <zsh-workers-return-20834-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7984 invoked from network); 21 Feb 2005 12:31:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Feb 2005 12:31:23 -0000
Received: (qmail 4628 invoked from network); 21 Feb 2005 12:31:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Feb 2005 12:31:13 -0000
Received: (qmail 18391 invoked by alias); 21 Feb 2005 12:31:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20834
Received: (qmail 18382 invoked from network); 21 Feb 2005 12:31:08 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Feb 2005 12:31:08 -0000
Received: (qmail 4368 invoked from network); 21 Feb 2005 12:31:08 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 21 Feb 2005 12:31:03 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6f414d99270a6c8d018f0@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Mon, 21 Feb 2005 12:29:34 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 21 Feb 2005 12:31:53 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j1LCV1o4014143
	for <zsh-workers@sunsite.dk>; Mon, 21 Feb 2005 12:31:01 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j1LCV121014140
	for <zsh-workers@sunsite.dk>; Mon, 21 Feb 2005 12:31:01 GMT
Message-Id: <200502211231.j1LCV121014140@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: PATCH: kfmclient arguments
Date: Mon, 21 Feb 2005 12:31:01 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 21 Feb 2005 12:31:53.0195 (UTC) FILETIME=[52C303B0:01C51811]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.5

Hardly worth posting, but kfmclient, like many web browsers, handles file
names as well as URLs.  I've also add a short description.

Arguably, _webbrowser isn't a great name for that function and it should
be _files_or_urls, with the name _webbrowser reserved for something
which has more sophisticated argument handling.  However, I'm not
particularly worried, unless _webbrowser is really likely to change,
which it probably isn't.

Index: Completion/X/Command/_kfmclient
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_kfmclient,v
retrieving revision 1.2
diff -u -r1.2 _kfmclient
--- Completion/X/Command/_kfmclient	28 Jul 2004 09:18:30 -0000	1.2
+++ Completion/X/Command/_kfmclient	21 Feb 2005 12:26:49 -0000
@@ -1,5 +1,8 @@
 #compdef kfmclient
 
+# kfmclient is a command line interface for use with Konqueror,
+# the KDE file manager and web browser.
+
 local expl
 local -a context state line
 typeset -A opt_args
@@ -60,14 +63,14 @@
     _mime_types
     return
   elif [[ $state = firstarg ]]; then
-    _urls
+    _webbrowser
     return
   fi
   ;;
 
   (openProfile)
   if [[ $state = secondarg ]]; then
-    _urls
+    _webbrowser
     return
   elif [[ $state = firstarg ]]; then
     _wanted profile expl 'Konqueror profile' \
@@ -82,14 +85,14 @@
     _message "KDE binding"
     return
   elif [[ $state = firstarg ]]; then
-    _urls
+    _webbrowser
     return
   fi
   ;;
 
   (move|download|openProperties)
   if [[ $state = firstarg ]]; then
-      _urls
+      _webbrowser
       return
   fi
   ;;

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


From zsh-workers-return-14981-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 20 03:51:13 2001
Return-Path: <zsh-workers-return-14981-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4606 invoked from network); 20 Jun 2001 03:51:12 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Jun 2001 03:51:12 -0000
Received: (qmail 29252 invoked by alias); 20 Jun 2001 03:50:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14981
Received: (qmail 29219 invoked from network); 20 Jun 2001 03:50:20 -0000
Date: Tue, 19 Jun 2001 23:50:49 -0400
From: Jason Price <jprice@cyberbuzz.gatech.edu>
To: zsh-workers@sunsite.dk
Subject: gcc 3.0 produces broken zsh
Message-ID: <20010619235049.A20425@oobleck.gatech.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1us

Out of morbid curiosity, I built gcc3 and installed it somewhere out of the
way (like $HOME/gcc3) on my redhat 7.1 linux box.  Then I tried to build
zsh with it.

It configured and compiled with hardly any errors.  The only build errors
were:

math.c: In function `zzlex':
math.c:382: warning: operation on `ptr' may be undefined
utils.o: In function `gettempname':
utils.o(.text+0x1de2): the use of `mktemp' is dangerous, better use `mkstemp'

However, when I install it, it doesn't seem to be able to find or load any
modules.  Building with stock gcc's of the 2.95.* variety work, building
other programs works (havn't tested many, but one or two others do), and
zsh will let you do interactive stuff, it's just very limited.

Now, I could VERY easily be wrong, but most of the painful changes in gcc3
are in C++ land, and zsh doesn't have any of that (this is where I'm
probably wrong)

Anyway, just a heads up.  Since it was only realeased yesterday, I don't
think it's an immediate danger.

If I get some free time, I'll see if I can replicate this on the other
boxes I have access too (an x86 debian, and many flavors of Solaris on Sun)

And, if I y'all want some more info, I'd be glad to give it.

Jason

-- 
"Friendship is the bridge between lonely and loved, between a glance and a
gaze. It stretches from the fog into sunshine, hopelessness into faith, 
between despair and joy. It crosses the chasm from hell and to heaven, from 
God to man, and from you to me." --Unknown   Jason Price  jprice@gatech.edu


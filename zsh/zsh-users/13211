From zsh-users-return-13211-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 10 15:16:16 2008
Return-Path: <zsh-users-return-13211-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21212 invoked from network); 10 Sep 2008 15:16:14 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Sep 2008 15:16:14 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18864 invoked from network); 10 Sep 2008 15:15:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Sep 2008 15:15:58 -0000
Received: (qmail 10524 invoked by alias); 10 Sep 2008 15:15:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13211
Received: (qmail 10515 invoked from network); 10 Sep 2008 15:15:37 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Sep 2008 15:15:37 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 6C68E805A425
	for <zsh-users@sunsite.dk>; Wed, 10 Sep 2008 17:15:14 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly15g.srv.mailcontrol.com (MailControl) with ESMTP id m8AFE25x005847
	for <zsh-users@sunsite.dk>; Wed, 10 Sep 2008 16:14:38 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Sep 2008 16:10:37 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m8AFAbeP007207
	for <zsh-users@sunsite.dk>; Wed, 10 Sep 2008 16:10:37 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m8AFAajX007203
	for <zsh-users@sunsite.dk>; Wed, 10 Sep 2008 16:10:37 +0100
Message-Id: <200809101510.m8AFAajX007203@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh users mailing list <zsh-users@sunsite.dk>
Subject: Re: preventing the leading space in process substitution
In-reply-to: <080910074842.ZM19151@torch.brasslantern.com>
References: <20080909144101.GA30693@lapse.rw.madduck.net> <200809101124.m8ABOlKI005063@news01.csr.com> <080910074842.ZM19151@torch.brasslantern.com>
Comments: In-reply-to Bart Schaefer <schaefer@brasslantern.com>
   message dated "Wed, 10 Sep 2008 07:48:42 -0700."
Date: Wed, 10 Sep 2008 16:10:36 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 10 Sep 2008 15:10:38.0003 (UTC) FILETIME=[61C32030:01C91357]
X-Scanned-By: MailControl A-08-50-13 (www.mailcontrol.com) on 10.71.0.125
X-Virus-Scanned: ClamAV 0.92.1/8207/Wed Sep 10 12:58:40 2008 on bifrost
X-Virus-Status: Clean

Bart Schaefer wrote:
> On Sep 10, 12:24pm, Peter Stephenson wrote:
> } Subject: Re: preventing the leading space in process substitution
> }
> } >   mycommand -file=<(...)
> } > 
> } > seems to yield
> } > 
> } >   mycommand -file= /proc/self/fd/16
> } 
> } For reasons buried in history that I don't understand, the <(...) is
> } parsed as a single complete argument.
> 
> I think that's because the "<" is treated like a redirection operator.

You mean we initially parse it the same way whether or not there's a "("
coming up next or not, and later, when we've already finished the
previous argument at that point, decide it's not a redirection after all?

> You'll note in the examples that > >(process) is even written with
> spaces around the first ">" even though it works to use >>(...) with
> no spaces and is more commonly written that way.

But both ">file" and "> file" work, too, so presumably if we were able
to change it so that "<(...)" and ">(...)" also worked in the middle of
an argument it wouldn't create any new problems.  We already need to
look ahead for the "(" ... but probably not at the point where we first
read the "<" and decide it's time to stop the current argument.  At that
point we'd have to look ahead two characters.  That might be the real
fly in the ointment.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


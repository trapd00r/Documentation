From zsh-workers-return-9656-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 10 13:54:25 2000
Return-Path: <zsh-workers-return-9656-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22648 invoked from network); 10 Feb 2000 13:54:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Feb 2000 13:54:23 -0000
Received: (qmail 3594 invoked by alias); 10 Feb 2000 13:54:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9656
Received: (qmail 3587 invoked from network); 10 Feb 2000 13:54:14 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Adam Spiers" <adam@spiers.net>,
        "zsh workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: RE: duplicate targets in Makefile rule
Date: Thu, 10 Feb 2000 16:54:11 +0300
Message-ID: <000501bf73ce$4f1c3890$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <20000210133736.A12687@thelonious.new.ox.ac.uk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700

>
> Zefram (zefram@fysh.org) wrote:
> > Adam Spiers wrote:
> > >When is sdir not `.'?
> >
> > When you're compiling in a build tree separate from the source tree.
>
> I see ... so how can we stop make from complaining when sdir is `.' ?
> If we're compiling in a separate build tree then presumably we don't
> need a rule for the source tree version of zsh.texi, so can we just
> get rid of the zsh.texi target and leave the $(dir)/zsh.texi one?  If
> we can, the patch is below.  However noone else seems to have
> encountered a problem with this (and neither did I before Christmas),
> so it's more likely I've done something wrong.  Any ideas what?
>

Sorry? Pls, see 9543, 9687, 9593 and more in this thread.

The current problem is, zsh.texi should be in source dir (as it is supposed
to exists even if user does not have yodl) - so, it belongs to src dir. The
change you proposed make zsh.texi target name dependent on source dir
location. So, it you want to rebuild just the texi, you'll have to know
exact src location and type "make /path/to/source/dir/zsh.texi"

For this reason I suggested having standard targets man, texi, info etc and
make them depend on actual files. Like

texi: $(sdir)/zsh.texi

$(sdir)/zsh.texi: ... (as currently)

Then you can just say "make texi" or "make man". Looks better to me :-)

So far there was no reply.

/andrej


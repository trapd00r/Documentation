From zsh-workers-return-9009-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Dec 13 09:21:23 1999
Return-Path: <zsh-workers-return-9009-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20985 invoked from network); 13 Dec 1999 09:21:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Dec 1999 09:21:22 -0000
Received: (qmail 15896 invoked by alias); 13 Dec 1999 09:21:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9009
Received: (qmail 15887 invoked from network); 13 Dec 1999 09:21:09 -0000
Sender: aduret@antares.l2i
To: <zsh-workers@sunsite.auc.dk>
Cc: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
Subject: Re: PATCH: zftp xterm titlebar
References: <000001bf448d$da2ef050$21c9ca95@mow.siemens.ru>
From: Alexandre Duret-Lutz <alexandre.duret@greyc.ismra.fr>
Date: 13 Dec 1999 10:13:31 +0000
In-Reply-To: "Andrej Borsenkow"'s message of "Sun, 12 Dec 1999 13:44:23 +0300"
Message-ID: <7d3dt75et0.fsf@antares.l2i>
Lines: 75
User-Agent: Gnus/5.0700000000000003 (Pterodactyl Gnus v0.97) Emacs/20.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

>>> "AB" == Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru> writes:

 >> May I propose the following patch that also take `rxvt', `Eterm',
 >> and `dtterm' (from Sun CDE) into account ?

 AB> This works here but I could not find anything about it in dterm reference
 AB> (TriTeal TED 4.2)

 AB> How portable is it? Do all dtterm's from all vendors suport it?

I don't know.   My dtterm(5) man page reads :

SunOS 5.7           Last change: 25 Apr 1994                   15

Headers, Environments, and Macros                       dtterm(5)

[...]

         Esc ] p1 ;  p2 <control>-G
                Set text parameters.  This escape sequence allows
                various  terminal emulator text values to be set.
                Valid supported values of p1 are:

                   0     Change the icon name and window title to
                         the string p2.

                   1     Change the icon name to the string p2.

                   2     Change the window title  to  the  string
                         p2.

                   3     Set the current working directory to the
                         string  p2.  The terminal emulator tries
                         to restart in this directory when it  is
                         restarted in a new session.

[...]

        Esc ] l text Esc Backslash
                Set the window title to text.

[...]

The second is the same as the `sun-cmd' case in zsh.

 AB> BTW is it possible to get the current window title?

I could print it with : 

$ echo '[21t'

But does someone know how to catch this in a shell script ?  Is there
a better way than using script(1) ?


This is an excerpt of what dtterm(5) says about '[21t' :

        Esc [ p1 ; p2 ; p3 t
                Window manipulation.  Valid values  for  p1  (and
                any additional parameters) are:

[...]

                   21    Report  the  dtterm(1)  window's  title.
                         The  terminal emulator returns ``Esc ] l
                         title Esc Backslash''.


This seems to be true for xterm too (which I find strange since xterm
does not accept the resulting ']ltitle\' sequence).

 AB> /andrej

-- 
Alexandre Duret-Lutz


From zsh-users-return-12489-mason-zsh=primenet.com.au@sunsite.dk Sat Jan 26 15:41:51 2008
Return-Path: <zsh-users-return-12489-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1095 invoked from network); 26 Jan 2008 15:41:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Jan 2008 15:41:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 73336 invoked from network); 26 Jan 2008 15:41:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Jan 2008 15:41:37 -0000
Received: (qmail 6915 invoked by alias); 26 Jan 2008 15:41:29 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12489
Received: (qmail 6900 invoked from network); 26 Jan 2008 15:41:28 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 26 Jan 2008 15:41:28 -0000
Received: from an-out-0708.google.com (an-out-0708.google.com [209.85.132.248])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 972D380190F6
	for <zsh-users@sunsite.dk>; Sat, 26 Jan 2008 16:41:24 +0100 (CET)
Received: by an-out-0708.google.com with SMTP id c14so282278anc.13
        for <zsh-users@sunsite.dk>; Sat, 26 Jan 2008 07:41:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=hoKJCZA2tPGyk2IGhgSdZJwSHYHbxUkbppK6e8nnD0c=;
        b=Wqn+0zXt8yJuOzEXr7cLRzqWhm8jpDKrafZxtqMUuRxJoth+aG+sPg5f0FfwNY0CWWrGGS/tF8Q5pVqsqGqJ/RW7sLQajSkioPos8kRfa84Xq+95GdK0WNcCiIMSb+ZlhJEa7HTOG22Ran52nScbX7yXw40UODa51vPvmpNrDOY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=xrTDLMxf3/29uzd8cI80fDHudkam0Wn3+K/8f365ts05DDrRMyDA3zZr/HecAgFsb1Mq7dO3+Qu5aAG3i7J26BfFQ+pCEtP2rx6BPaTl2VkqVV/nTcixe1s8SsuKEg2PK5uvn9bvrXpHyYm5bwrjMBVVrHJGTIuRer9dI3cY0YA=
Received: by 10.100.127.18 with SMTP id z18mr7104439anc.39.1201362083396;
        Sat, 26 Jan 2008 07:41:23 -0800 (PST)
Received: by 10.100.143.1 with HTTP; Sat, 26 Jan 2008 07:41:23 -0800 (PST)
Message-ID: <2d460de70801260741q16e4f197he2307be6e4f81c82@mail.gmail.com>
Date: Sat, 26 Jan 2008 16:41:23 +0100
From: "Richard Hartmann" <richih.mailinglist@gmail.com>
To: "Bart Schaefer" <schaefer@brasslantern.com>
Subject: Re: idea for new feature (was: Re: sticky-note and zle bindings)
Cc: "Robert Knight" <robertknight@gmail.com>, zsh-users@sunsite.dk
In-Reply-To: <080125181227.ZM21172@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <13ed09c00801241017x1cd7c454lcbf9156b6bccd9bb@mail.gmail.com>
	 <2d460de70801241209u63a33fe6ufb8f396bff440dc6@mail.gmail.com>
	 <2d460de70801241254v52d8a9c4he75e450f2f2bd29e@mail.gmail.com>
	 <13ed09c00801241354g306f5aaay4d9e6f22c1622ec7@mail.gmail.com>
	 <2d460de70801241522y47611d27k2e60c132fea1f01d@mail.gmail.com>
	 <13ed09c00801241857n2b1613f0m2d74fd12a90135cc@mail.gmail.com>
	 <2d460de70801250132n1692f74cn78d3fdc40da88b9@mail.gmail.com>
	 <080125095733.ZM20873@torch.brasslantern.com>
	 <13ed09c00801251018l1007ac9an9c453651d5695c46@mail.gmail.com>
	 <080125181227.ZM21172@torch.brasslantern.com>
X-Virus-Scanned: ClamAV 0.91.2/5562/Sat Jan 26 12:34:23 2008 on bifrost
X-Virus-Status: Clean

On Jan 26, 2008 3:12 AM, Bart Schaefer <schaefer@brasslantern.com> wrote:


> (1) The emulator itself is running remotely and displaying on the local
> desktop.  In this case the emulator *does* have access to the "remote"
> filesystem, but the desktop manager can't restore such a window, so
> there's nothing (special) for us to do.

Terminals could keep a session state for themselves, so if I ran

  konsole --restore-session foo

it could restore everything, no matter if it is local and under the
desktop manager's control or not. This might even make the overall
terminal session handling cleaner.


> (2) The emulator is local but the application is "ssh".  This is out of
> our purview; ssh could propagate the SHELL_SESSION_* environment and it
> would be up to sshd to do the right thing on the remote end as part of
> its X11 protocol forwarding or whatever, but whether it does is not for
> us to determine.

Well, as soon as the shell see the appropriate variables, it can just do
whatever it was set up to do in that case, so this case should be transparent.


> (3) The emulator is local and the shell is local, but within that shell
> the user has started up "ssh" to somewhere.  Our responsibility ends
> with making sure that the local shell can record its state, which may
> include that it needs to start up an ssh process.  Beyond that point we
> are back to case (2).

Yes.


Restoring the programs that ran is a very interesting idea. I like it :)


> What other case do you envision where the emulator can usefully be
> involved?

Atm, none.


> The shell DOES determine where to store the data.  The emulator (or the
> desktop session) is just creating a semaphore file; think of it the same
> way you'd think of .pid file in /var/run, except there's one for each
> shell session.  Whether the shell uses it to stash data is secondary,
> and up to the shell save-state implementation; I just threw that part
> out as a suggestion because it avoids the shell itself needing to have
> garbage-session collection code.

If the shell is a child of ssh, there is no terminal to help the shell with
garbage collection, should it must be able to do this by itself, anyway.
Of course, the HANDLER variable could be used to determine who
should actually do the collection if both the terminal and the shell offer
this.


Richard


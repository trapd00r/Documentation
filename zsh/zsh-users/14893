From zsh-users-return-14893-mason-zsh=primenet.com.au@zsh.org Fri Feb 26 12:56:28 2010
Return-Path: <zsh-users-return-14893-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17799 invoked by alias); 26 Feb 2010 12:56:28 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14893
Received: (qmail 5641 invoked from network); 26 Feb 2010 12:56:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at redfrontdoor.org does not designate permitted sender hosts)
MIME-Version: 1.0
Date: Fri, 26 Feb 2010 12:56:12 +0000
Message-ID: <5169ff11002260456p74920d03qefd9e2a83a95b98e@mail.gmail.com>
Subject: Re: Globbing inside conditional expression
From: Ben North <ben@redfrontdoor.org>
To: zsh-users@zsh.org
Content-Type: text/plain; charset=ISO-8859-1

Peter Stephenson, Fri, 26 Feb 2010 10:54:50:
> Ben North wrote:
> > > Actually [[ -f XX* ]] is invalid because [[ ]] doesn't do globbing.
> > > You need the [ -f XX* ] form (see below).
> >
> > answering my question.  Apologies for the noise.
> > Perhaps the documentation could be clarified though?
> [...]
> I suppose it's obvious, but globbing would produce multiple files, and then
> a lot of the tests don't really make sense.  What does [[ -d XX* ]] mean if
> some expansions are directories and some aren't?

My original situation was exactly the "how do I test whether any files
exist matching some glob pattern" which turned out to have been
discussed here 12--13 Feb.  I read "the result of each expansion is
constrained to be a single word" in the man page and thought "OK, I
better make sure that at most one file results from the globbing,
otherwise it'll test for the existence of 'foo.1 foo.2'".  I then tried

    [[ -f foo.*(N[1]) ]]

and found it didn't do what I expected, so cut it down to the example I
originally posted.

I suppose the answer to your question about [[ -d XX* ]] would be 'it
returns false', if more than one expansion results.  The test would be
of a non-existent file/directory like 'XX1 XX2 XX3'.  But this would be
potentially confusing, certainly.

Your patch to the documentation clears things up, anyway.  Thanks for
your time.

Ben.


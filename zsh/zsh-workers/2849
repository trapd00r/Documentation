From zsh-workers-request@euclid.skiles.gatech.edu Fri Jan 31 06:05:57 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 697 invoked from network); 31 Jan 1997 06:05:52 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 31 Jan 1997 06:05:52 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id AAA04225; Fri, 31 Jan 1997 00:52:56 -0500 (EST)
Resent-Date: Fri, 31 Jan 1997 00:52:56 -0500 (EST)
To: zsh-workers@math.gatech.edu
Subject: zsh stty control for background processes
X-Mailer: Mew version 1.54 on Emacs 19.34.2, Mule 2.3
X-Fingerprint: 31 DC 9F DF C2 B9 8E 00  3A 7C 4F 0C 03 D8 AC 16
X-URL: http://www.nc.kyushu-u.ac.jp/~kasahara/
Mime-Version: 1.0
Content-Type: Text/Plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-Id: <19970131145414W/kasahara@nc.kyushu-u.ac.jp>
Date: Fri, 31 Jan 1997 14:54:14 +0900
From: Yoshiaki Kasahara <kasahara@nc.kyushu-u.ac.jp>
X-Dispatcher: impost version 0.91 (Jun 5,1996)
Lines: 78
Resent-Message-ID: <"TQfbB1.0.x11.tYOyo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2849
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Hello.

I'm not a member of zsh-workers, so please Cc: replies to me.

When I invoked 'xterm &', new shell in the xterm forget some of stty
control characters.

This is 'stty all' output of the original shell(zsh-3.1.0 on BSD/OS
2.1).

% stty all
speed 9600 baud; 24 rows; 80 columns;
lflags: icanon isig iexten echo echoe echok echoke -echonl echoctl
        -echoprt -altwerase -noflsh -tostop -flusho pendin -nokerninfo
        -extproc
iflags: -istrip icrnl -inlcr -igncr ixon -ixoff -ixany imaxbel -ignbrk
        brkint -inpck -ignpar -parmrk
oflags: opost onlcr oxtabs
cflags: cread cs8 -parenb -parodd hupcl -clocal -noclocal -cstopb
        -cts_oflow -rts_iflow -mdmbuf
discard dsusp   eof     eol     eol2    erase   intr    kill    lnext   
^O      ^Y      ^D      <undef> <undef> ^H      ^C      ^U      ^V      
min     quit    reprint start   status  stop    susp    time    werase  
1       ^\      ^R      ^Q      <undef> ^S      ^Z      0       ^W      

And this is 'stty all' output of new shell in xterm (invoked in
background).

% stty all
speed 9600 baud; 24 rows; 80 columns;
lflags: icanon isig iexten echo echoe -echok echoke -echonl echoctl
        -echoprt -altwerase -noflsh -tostop -flusho pendin -nokerninfo
        -extproc
iflags: -istrip icrnl -inlcr -igncr ixon -ixoff -ixany imaxbel -ignbrk
        brkint -inpck -ignpar -parmrk
oflags: opost onlcr -oxtabs
cflags: cread cs8 -parenb -parodd hupcl -clocal -noclocal -cstopb
        -cts_oflow -rts_iflow -mdmbuf
discard dsusp   eof     eol     eol2    erase   intr    kill    lnext   
^@      ^@      ^D      <undef> <undef> ^H      ^C      ^U      ^@      
min     quit    reprint start   status  stop    susp    time    werase  
1       ^@      ^R      ^@      <undef> ^@      ^@      0       ^W      

The similar problem occured on Solaris 2.5 and SunOS 4.1.4, too.

It still occurs even if I use no startup file, but forgotten entries
vary like this:

% stty all
speed 9600 baud; 24 rows; 80 columns;
lflags: icanon isig iexten echo echoe -echok echoke -echonl echoctl
        -echoprt -altwerase -noflsh -tostop -flusho pendin -nokerninfo
        -extproc
iflags: -istrip icrnl -inlcr -igncr ixon -ixoff -ixany imaxbel -ignbrk
        brkint -inpck -ignpar -parmrk
oflags: opost onlcr -oxtabs
cflags: cread cs8 -parenb -parodd hupcl -clocal -noclocal -cstopb
        -cts_oflow -rts_iflow -mdmbuf
discard dsusp   eof     eol     eol2    erase   intr    kill    lnext   
^@      ^@      ^D      <undef> <undef> ^H      ^C      ^U      ^@      
min     quit    reprint start   status  stop    susp    time    werase  
1       ^@      ^R      ^Q      <undef> ^S      ^@      0       ^W      

This problem never occurs on tcsh, csh, or sh.  It is ok if xterm is
invoked on foreground.  I tried zsh-3.0-pre, zsh-3.0.0, zsh-3.0.2, and
zsh-3.1.0.  Also I checked /usr/contrib/bin/zsh (v2.5.03 distributed
with BSD/OS 2.1) and found that this problem occured....

Is it a bug of zsh, or something wrong with me?  Sorry if it had
already reported/corrected.

Regards,
-- 
Yoshiaki Kasahara
KITE Network Operation Center, Computer Center, Kyushu University

Email addr:                           |  I'm free!   & ~ __-^-_/~
    kasahara@nc.kyushu-u.ac.jp        |               ~   \___/


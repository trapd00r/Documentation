From zsh-workers-return-25226-mason-zsh=primenet.com.au@sunsite.dk Sat Jun 21 06:25:17 2008
Return-Path: <zsh-workers-return-25226-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8638 invoked from network); 21 Jun 2008 06:25:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Jun 2008 06:25:06 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 61022 invoked from network); 21 Jun 2008 06:24:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Jun 2008 06:24:54 -0000
Received: (qmail 1561 invoked by alias); 21 Jun 2008 06:24:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25226
Received: (qmail 1545 invoked from network); 21 Jun 2008 06:24:51 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 21 Jun 2008 06:24:51 -0000
Received: from dot.blorf.net (dsl-74-220-69-132.cruzio.com [74.220.69.132])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 6C7538084FA0
	for <zsh-workers@sunsite.dk>; Sat, 21 Jun 2008 08:24:48 +0200 (CEST)
Received: by dot.blorf.net (Postfix, from userid 1000)
	id 95DAE128EB; Fri, 20 Jun 2008 23:26:49 -0700 (PDT)
Date: Fri, 20 Jun 2008 23:26:49 -0700
From: Wayne Davison <wayned@users.sourceforge.net>
To: J?rg Sommer <joerg@alea.gnuu.de>
Cc: zsh-workers@sunsite.dk
Subject: Re: environment settings
Message-ID: <20080621062649.GA28022@blorf.net>
References: <20080616074651.GB26165@marcus> <20080616080556.GA5091@sc.homeunix.net> <20080616123045.GC26165@marcus> <20080616124450.GC5091@sc.homeunix.net> <slrng5etlu.mft.joerg@alea.gnuu.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <slrng5etlu.mft.joerg@alea.gnuu.de>
User-Agent: Mutt/1.5.15+20070412 (2007-04-11)
X-Virus-Scanned: ClamAV 0.92.1/7524/Sat Jun 21 03:35:13 2008 on bifrost
X-Virus-Status: Clean

On Tue, Jun 17, 2008 at 08:33:02AM +0000, J?rg Sommer wrote:
> And what's the meaning of .zshenv? I use it for my environment variables
> like EDITOR, because my session is started by X.

I've been bitten by unwanted side effects when using .zshenv to set
environment variables, so the following lines are pretty much the
entirety of my .zshenv file these days:

if [[ $SHLVL == 1 && ! -o LOGIN ]]; then
    source ~/.zprofile
fi

The problem I ran into with setting variables in .zshenv is that they
can override settings you want to affect a program and/or script when
you don't expect it.  For instance, if you need to debug a C program
that is run inside a script with a custom PATH.  You setup the custom
PATH and run the C program under gdb, and discover that your PATH isn't
set right for the C program.  This is because gdb starts the program
under an instance of $SHELL, which will source .zshenv, and if you're
setting PATH inside, that blasts the PATH setting you're expecting.
A similar problem arises for any zsh script that you want to run inside
a customized environment -- the .zshenv values always override any
settings you made prior to starting the script.

..wayne..


From wayne@tenor.clarinet.com Mon May 13 05:06:08 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id FAA13001 for <mason@werple.mira.net.au>; Mon, 13 May 1996 05:06:06 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id OAA09309; Sun, 12 May 1996 14:49:05 -0400 (EDT)
Resent-Date: Sun, 12 May 1996 14:49:05 -0400 (EDT)
Message-Id: <199605121848.LAA03420@tenor.clari.net>
To: Zsh hacking and development <zsh-workers@math.gatech.edu>
Subject: Minor change for new isearch code
Date: Sun, 12 May 1996 11:48:25 -0700
From: Wayne Davison <wayne@tenor.clarinet.com>
Resent-Message-ID: <"eTBIO2.0.NH2.XAZbn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1056
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 541
Status: OR

Here's a minor tweak for the incremental search code based on my last
patch.  It just makes the startup case where you begin the search from
somewhere in the history a little more efficient by using the metafied
history entry directly rather than building one from "line".

Index: zle_hist.c
@@ -637,7 +637,7 @@
 	s = curhistline = metafy(UTOSCP(line), ll, META_DUP);
     }
     else
-	s = metafy(UTOSCP(line), ll, META_USEHEAP);
+	s = qgetevent(histline);
     bindtab = mainbindtab;
     pos = metalen(s, cs);
     for (;;) {

..wayne..



From zsh-workers-request@math.gatech.edu  Thu Aug 31 03:33:07 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id DAA06773 for <mason@werple.mira.net.au>; Thu, 31 Aug 1995 03:33:02 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA21194
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Wed, 30 Aug 1995 13:35:24 -0400
Received: by math (5.x/SMI-SVR4)
	id AA06539; Wed, 30 Aug 1995 13:30:13 -0400
Resent-Date: Wed, 30 Aug 95 10:32:02 -0800
Old-Return-Path: <mrb@almaden.ibm.com>
From: <mrb@almaden.ibm.com> (Martin Buchholz)
Message-Id: <9508301732.AA24219@slowmo.almaden.ibm.com>
To: zsh-workers@math.gatech.edu
Subject: Some zsh bugs
Date: Wed, 30 Aug 95 10:32:02 -0800
Resent-Message-Id: <"akR7d.0.5c1.a0AHm"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/347
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

1. zsh has trouble with the construct ${1+"$@"}.  This used to be a
   portable way to say "$@" that would work with Bourne shell, Korn
   shell and Zsh.

2. zsh has trouble with long input lines (typically cut and pasted
   into an Emacs shell buffer).  It sometimes prints a '>' character
   at the beginning of the output and sometimes gets into a state
   where the only thing it can do is print ^G's.  If the command line
   is sufficiently long, it is hung, and only responds to <RETURN>
   with another ^G.  I munged the shell output below so that it would
   make it through our hostile mail systems.

Details:

(mrb@slowmo) /contrib/distrib/zsh/zsh-2.6-beta10/Util $ zsh -c 'foo() { echo ${1+"$@"} ; } ; foo bar baz '
zsh: ambiguous: bar
zsh: exit 1     zsh -c 'foo() { echo ${1+"$@"} ; } ; foo bar baz '
(mrb@slowmo) /contrib/distrib/zsh/zsh-2.6-beta10/Util $ bsh -c 'foo() { echo ${1+"$@"} ; } ; foo bar baz '
bar baz
(mrb@slowmo) /contrib/distrib/zsh/zsh-2.6-beta10/Util $ ksh -c 'foo() { echo ${1+"$@"} ; } ; foo bar baz '
bar baz
(mrb@slowmo) /contrib/distrib/zsh/zsh-2.6-beta10/Util $ zsh ./reporter
# START zsh saveset
# uname:  AIX slowmo 2 3 000096506600

# Aliases.

alias run-help='man'
alias which-command='whence'

# Key bindings.

bindkey -r "^@"
bindkey -r "^A"
bindkey -r "^B"
bindkey -r "^C"
bindkey -r "^D"
bindkey -r "^E"
bindkey -r "^F"
bindkey -r "^G"
bindkey -r "^H"
bindkey -r "^I"
bindkey -r "^J"
bindkey -r "^K"
bindkey -r "^L"
bindkey -r "^M"
bindkey -r "^N"
bindkey -r "^O"
bindkey -r "^P"
bindkey -r "^Q"
bindkey -r "^R"
bindkey -r "^S"
bindkey -r "^T"
bindkey -r "^U"
bindkey -r "^V"
bindkey -r "^W"
bindkey -r "^X"
bindkey -r "^Y"
bindkey -r "^Z"
bindkey -r "\e"
bindkey -r "^_"
bindkey -r "^?"
bindkey -r "^X^B"
bindkey -r "^X^F"
bindkey -r "^X^J"
bindkey -r "^X^K"
bindkey -r "^X^N"
bindkey -r "^X^O"
bindkey -r "^X^U"
bindkey -r "^X^V"
bindkey -r "^X^X"
bindkey -r "^X*"
bindkey -r "^XG"
bindkey -r "^Xg"
bindkey -r "^Xr"
bindkey -r "^Xs"
bindkey -r "^Xu"
bindkey -r "\e^D"
bindkey -r "\e^G"
bindkey -r "\e^H"
bindkey -r "\e^I"
bindkey -r "\e^J"
bindkey -r "\e^L"
bindkey -r "\e^M"
bindkey -r "\e^_"
bindkey -r "\e "
bindkey -r "\e!"
bindkey -r "\e\""
bindkey -r "\e$"
bindkey -r "\e'"
bindkey -r "\e-"
bindkey -r "\e."
bindkey -r "\e0"
bindkey -r "\e1"
bindkey -r "\e2"
bindkey -r "\e3"
bindkey -r "\e4"
bindkey -r "\e5"
bindkey -r "\e6"
bindkey -r "\e7"
bindkey -r "\e8"
bindkey -r "\e9"
bindkey -r "\e<"
bindkey -r "\e>"
bindkey -r "\e?"
bindkey -r "\eA"
bindkey -r "\eB"
bindkey -r "\eC"
bindkey -r "\eD"
bindkey -r "\eF"
bindkey -r "\eG"
bindkey -r "\eH"
bindkey -r "\eL"
bindkey -r "\eN"
bindkey -r "\eP"
bindkey -r "\eQ"
bindkey -r "\eR"
bindkey -r "\eS"
bindkey -r "\eT"
bindkey -r "\eU"
bindkey -r "\eW"
bindkey -r "\e[A"
bindkey -r "\e[B"
bindkey -r "\e[C"
bindkey -r "\e[D"
bindkey -r "\e_"
bindkey -r "\ea"
bindkey -r "\eb"
bindkey -r "\ec"
bindkey -r "\ed"
bindkey -r "\ef"
bindkey -r "\eg"
bindkey -r "\eh"
bindkey -r "\el"
bindkey -r "\en"
bindkey -r "\ep"
bindkey -r "\eq"
bindkey -r "\er"
bindkey -r "\es"
bindkey -r "\et"
bindkey -r "\eu"
bindkey -r "\ew"
bindkey -r "\ex"
bindkey -r "\ey"
bindkey -r "\ez"
bindkey -r "\e|"
bindkey -r "\e^?"

bindkey "^@"    set-mark-command
bindkey "^A"    beginning-of-line
bindkey "^B"    backward-char
bindkey "^C"    undefined-key
bindkey "^D"    delete-char-or-list
bindkey "^E"    end-of-line
bindkey "^F"    forward-char
bindkey "^G"    send-break
bindkey "^H"    backward-delete-char
bindkey "^I"    expand-or-complete
bindkey "^J"    accept-line
bindkey "^K"    kill-line
bindkey "^L"    clear-screen
bindkey "^M"    accept-line
bindkey "^N"    down-line-or-history
bindkey "^O"    accept-line-and-down-history
bindkey "^P"    up-line-or-history
bindkey "^Q"    push-line
bindkey "^R"    history-incremental-search-backward
bindkey "^S"    history-incremental-search-forward
bindkey "^T"    transpose-chars
bindkey "^U"    kill-whole-line
bindkey "^V"    quoted-insert
bindkey "^W"    backward-kill-word
bindkey "^X"    prefix
bindkey "^Y"    yank
bindkey "^Z"    undefined-key
bindkey "\e"    prefix
bindkey "^_"    undo
bindkey "^?"    backward-delete-char
bindkey "^X^B"  vi-match-bracket
bindkey "^X^F"  vi-find-next-char
bindkey "^X^J"  vi-join
bindkey "^X^K"  kill-buffer
bindkey "^X^N"  infer-next-history
bindkey "^X^O"  overwrite-mode
bindkey "^X^U"  undo
bindkey "^X^V"  vi-cmd-mode
bindkey "^X^X"  exchange-point-and-mark
bindkey "^X*"   expand-word
bindkey "^XG"   list-expand
bindkey "^Xg"   list-expand
bindkey "^Xr"   history-incremental-search-backward
bindkey "^Xs"   history-incremental-search-forward
bindkey "^Xu"   undo
bindkey "\e^D"  list-choices
bindkey "\e^G"  send-break
bindkey "\e^H"  backward-kill-word
bindkey "\e^I"  self-insert-unmeta
bindkey "\e^J"  self-insert-unmeta
bindkey "\e^L"  clear-screen
bindkey "\e^M"  self-insert-unmeta
bindkey "\e^_"  copy-prev-word
bindkey "\e "   expand-history
bindkey "\e!"   expand-history
bindkey "\e\""  quote-region
bindkey "\e$"   spell-word
bindkey "\e'"   quote-line
bindkey "\e-"   neg-argument
bindkey "\e."   insert-last-word
bindkey "\e0"   digit-argument
bindkey "\e1"   digit-argument
bindkey "\e2"   digit-argument
bindkey "\e3"   digit-argument
bindkey "\e4"   digit-argument
bindkey "\e5"   digit-argument
bindkey "\e6"   digit-argument
bindkey "\e7"   digit-argument
bindkey "\e8"   digit-argument
bindkey "\e9"   digit-argument
bindkey "\e<"   beginning-of-buffer-or-history
bindkey "\e>"   end-of-buffer-or-history
bindkey "\e?"   which-command
bindkey "\eA"   accept-and-hold
bindkey "\eB"   backward-word
bindkey "\eC"   capitalize-word
bindkey "\eD"   kill-word
bindkey "\eF"   forward-word
bindkey "\eG"   get-line
bindkey "\eH"   run-help
bindkey "\eL"   down-case-word
bindkey "\eN"   history-search-forward
bindkey "\eP"   history-search-backward
bindkey "\eQ"   push-line
bindkey "\eR"   toggle-literal-history
bindkey "\eS"   spell-word
bindkey "\eT"   transpose-words
bindkey "\eU"   up-case-word
bindkey "\eW"   copy-region-as-kill
bindkey "\e[A"  up-line-or-history
bindkey "\e[B"  down-line-or-history
bindkey "\e[C"  forward-char
bindkey "\e[D"  backward-char
bindkey "\e_"   insert-last-word
bindkey "\ea"   accept-and-hold
bindkey "\eb"   backward-word
bindkey "\ec"   capitalize-word
bindkey "\ed"   kill-word
bindkey "\ef"   forward-word
bindkey "\eg"   get-line
bindkey "\eh"   run-help
bindkey "\el"   down-case-word
bindkey "\en"   history-search-forward
bindkey "\ep"   history-search-backward
bindkey "\eq"   push-line
bindkey "\er"   toggle-literal-history
bindkey "\es"   spell-word
bindkey "\et"   transpose-words
bindkey "\eu"   up-case-word
bindkey "\ew"   copy-region-as-kill
bindkey "\ex"   execute-named-cmd
bindkey "\ey"   yank-pop
bindkey "\ez"   execute-last-named-cmd
bindkey "\e|"   vi-goto-column
bindkey "\e^?"  backward-kill-word

# Completions.

compctl  -b  bindkey
compctl  -c  builtin
compctl  -v  export
compctl  -o  setopt
compctl  -v  typeset
compctl  -v  unset
compctl  -o  unsetopt
compctl  -v  vared
compctl  -c  which
compctl -C -c
compctl -D -f
compctl   FIRST

# Undefined functions.


# Defined functions.


# Limits.

limit filesize        1023MB
limit datasize        128MB
limit stacksize       32MB
limit coredumpsize    100MB
limit resident        32MB

# Non-array variables.

TERMCAP='emacs'
TERM='emacs'
AGENT_PID="y"
ARGC="0"
A__z="! LOGNAME"
BAUD="9600"
BOOKSHELF="/u/mrb/sqllib/doc/En_US"
CALLUPHOST="phoneserver.almaden.ibm.com"
CALLUPLOC="=sanjres =sanjose toronto"
CDPATH=""
CMVC_FAMILY="wsdb@cmvcdbp.torolab.ibm.com@1204"
CMVC_RELEASE="db2_v2"
COLUMNS="80"
DB2INSTANCE="mrb"
DB2SERVICE="YES"
DIRSTACKSIZE="-1"
DISPLAY="slowmo:0.1"
EGID="1"
EMACS="t"
EMACSLOADPATH="/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/Martin-lisp/:/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/from-the-Net/"
EMACS_FLAVOR="emacs19"
EMACS_SITE_DIR="/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs"
ENV="/u/mrb/.kshrc"
ERRNO="9"
EUID="13875"
FCEDIT="vi"
FIGNORE=""
FPATH=""
GID="1"
HISTSIZE="30"
HOME="/u/mrb"
HOST="slowmo.almaden.ibm.com"
HOSTDISPLAY="slowmo:0.1"
HOSTTYPE="aix3.2.5"
INFOPATH="/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/XEmacs/lib/xemacs-19.13-b14/info/:/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/info/"
KAUTH="afs"
KEYTIMEOUT="40"
LANG="En_US"
LINENO="354"
LINES="36"
LISTMAX="100"
LITHISTSIZE="5"
LOCPATH="/usr/lib/nls/loc"
LOGCHECK="60"
LOGNAME="mrb"
MACHTYPE="rs6000"
MAIL="/usr/spool/mail/mrb"
MAILCHECK="60"
MAILMSG="[YOU HAVE NEW MAIL]"
MAILPATH=""
MANPATH="/usr/man:/local/man:/contrib/man:."
MFBASES=".:/local/lib/mf/bases"
MFINPUTS=".:/local/lib/mf/inputs"
NLSPATH="/usr/lib/nls/msg/%L/%N:/usr/lib/nls/msg/prime/%N:/afs/alm/cs/k55/@sys/bin:/usr/bin/%N"
NNTPSERVER="newsserver.almaden.ibm.com"
NULLCMD="cat"
ODMDIR="/etc/objrepos"
OLDPWD="/contrib/distrib/zsh/zsh-2.6-beta10/Util"
OPTARG=""
OPTIND="1"
OSTYPE="aix3.2.5"
PAGER="cat"
PATH=".:/u/mrb/bin:/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/local/bin:/contrib/bin:.:/u/mrb/sqllib/bin:/u/mrb/sqllib/int:/u/mrb/sqllib/adm:/u/mrb/sqllib/misc:/afs/almaden.ibm.com/cs/sw/tools/bin:/wsdb/tools"
PERIOD="0"
POSTEDIT=""
PPID="93974"
PROMPT="%m%# "
PROMPT2="> "
PROMPT3="?# "
PROMPT4="+ "
PS1="%m%# "
PS2="> "
PS3="?# "
PS4="+ "
PSVAR=""
PWD="/contrib/distrib/zsh/zsh-2.6-beta10/Util"
RANDOM="2954"
READNULLCMD="more"
REPORTTIME="-1"
RPROMPT=""
RPS1=""
SAVEHIST="0"
SBCC="/usr/lpp/xlC"
SECONDS="3"
SHELL="/contrib/bin/zsh"
SHLVL="4"
SOCKS_CONF="/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/socks.conf"
SOCKS_NS="129.33.40.40"
SOCKS_SERVER="129.33.40.40"
SPROMPT="zsh: correct \`%R\' to \`%r\' [nyae]? "
SW_FORCE="n"
SW_FUNC="new"
SW_HELPDIR="/afs/almaden.ibm.com/cs/sw/driver-help"
SW_PARSER="old"
TEXCONFIG=".:/local/lib/tex/dvips"
TEXFONTS=".:/local/lib/tex/fonts/tfm"
TEXFORMATS=".:/local/lib/tex/formats"
TEXINPUTS=".:/local/lib/tex/macros:/local/lib/tex/inputs"
TIMEFMT="%J  %U user %S system %P cpu %*E total"
TMOUT="0"
TMPPREFIX="/tmp/zsh"
TTY="/dev/pts/22"
TZ="PST8PDT"
UID="13875"
USER="mrb"
USERNAME="mrb"
VENDOR="ibm"
WATCH=""
WATCHFMT="%n has %a %l from %m."
WINDOWID="46137355"
WORDCHARS="*?_-.[]~=/&;!#$%^(){}<>"
WiX_NO_MWM_SHIFT="1"
WiX_PIXEL_DUST="1"
XAPPLRESDIR="/local/lib/X11/app-defaults/"
XFILESEARCHPATH="/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/%N:/usr/lib/X11/%L/app-defaults/%N:/usr/lib/X11/%l/app-defaults/%N:/usr/lib/X11/app-defaults/%N"
ZSH_NAME="zsh"
ZSH_VERSION="2.6-beta10"
each="/usr/bin"
histchars="!^#"
reporter_junkiequotes="no"
status="0"
str="AIX slowmo 2 3 000096506600"
prompt='test%'

# Array variables.

argv=()
EXPECT_PROMPT=(\([^\n]*)?\$ $
cdpath=()
fignore=()
fpath=()
mailpath=()
manpath=(/usr/man /local/man /contrib/man .)
path=(. /u/mrb/bin /usr/bin /etc /usr/sbin /usr/ucb /usr/bin/X11 /sbin /local/bin /contrib/bin . /u/mrb/sqllib/bin /u/mrb/sqllib/int /u/mrb/sqllib/adm /u/mrb/sqllib/misc /afs/almaden.ibm.com/cs/sw/tools/bin /wsdb/tools)
psvar=()
signals=(EXIT HUP INT QUIT ILL TRAP ABRT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM URG STOP TSTP CONT CHLD TTIN TTOU IO XCPU XFSZ 26 MSG WINCH PWR USR1 USR2 PROF DANGER VTALRM MIGRATE PRE VIRT ZERR DEBUG)
watch=()

# Exported variables.

export TERMCAP
export TERM
export AGENT_PID=y
export A__z=! LOGNAME
export BOOKSHELF=/u/mrb/sqllib/doc/En_US
export CALLUPHOST=phoneserver.almaden.ibm.com
export CALLUPLOC
export CMVC_FAMILY=wsdb@cmvcdbp.torolab.ibm.com@1204
export CMVC_RELEASE=db2_v2
export COLUMNS=80
export DB2INSTANCE=mrb
export DB2SERVICE=YES
export DISPLAY=slowmo:0.1
export EMACS=t
export EMACSLOADPATH=/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/Martin-lisp/:/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/from-the-Net/
export EMACS_FLAVOR=emacs19
export EMACS_SITE_DIR=/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs
export ENV=/u/mrb/.kshrc
export EXPECT_PROMPT=(\([^\n]*)?\$ $
export HOME=/u/mrb
export HOSTDISPLAY=slowmo:0.1
export INFOPATH=/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/XEmacs/lib/xemacs-19.13-b14/info/:/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/info/
export KAUTH=afs
export LANG=En_US
export LINES=36
export LOCPATH=/usr/lib/nls/loc
export LOGNAME=mrb
export MAIL=/usr/spool/mail/mrb
export MAILMSG=[YOU HAVE NEW MAIL]
export MANPATH=/usr/man:/local/man:/contrib/man:.
export MFBASES=.:/local/lib/mf/bases
export MFINPUTS=.:/local/lib/mf/inputs
export NLSPATH=/usr/lib/nls/msg/%L/%N:/usr/lib/nls/msg/prime/%N:/afs/alm/cs/k55/@sys/bin:/usr/bin/%N
export NNTPSERVER=newsserver.almaden.ibm.com
export ODMDIR=/etc/objrepos
export PAGER=cat
export PATH=.:/u/mrb/bin:/usr/bin:/etc:/usr/sbin:/usr/ucb:/usr/bin/X11:/sbin:/local/bin:/contrib/bin:.:/u/mrb/sqllib/bin:/u/mrb/sqllib/int:/u/mrb/sqllib/adm:/u/mrb/sqllib/misc:/afs/almaden.ibm.com/cs/sw/tools/bin:/wsdb/tools
export PWD=/contrib/distrib/zsh/zsh-2.6-beta10/Util
export SBCC=/usr/lpp/xlC
export SHELL=/contrib/bin/zsh
export SHLVL=4
export SOCKS_CONF=/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/socks.conf
export SOCKS_NS=129.33.40.40
export SOCKS_SERVER=129.33.40.40
export SW_FORCE=n
export SW_FUNC=new
export SW_HELPDIR=/afs/almaden.ibm.com/cs/sw/driver-help
export SW_PARSER=old
export TERM=emacs
export TEXCONFIG=.:/local/lib/tex/dvips
export TEXFONTS=.:/local/lib/tex/fonts/tfm
export TEXFORMATS=.:/local/lib/tex/formats
export TEXINPUTS=.:/local/lib/tex/macros:/local/lib/tex/inputs
export TZ=PST8PDT
export USER=mrb
export WINDOWID=46137355
export WiX_NO_MWM_SHIFT=1
export WiX_PIXEL_DUST=1
export XAPPLRESDIR=/local/lib/X11/app-defaults/
export XFILESEARCHPATH=/afs/almaden.ibm.com/rs_aix32/contrib/distrib/xemacs/%N:/usr/lib/X11/%L/app-defaults/%N:/usr/lib/X11/%l/app-defaults/%N:/usr/lib/X11/app-defaults/%N

# Setopt.

setopt bgnice
setopt hashcmds
setopt hashdirs
setopt hashlistall
setopt notify
setopt singlelinezle

# END zsh saveset
zsh ./reporter  1.04s user 1.20s system 45% cpu 4.880 total


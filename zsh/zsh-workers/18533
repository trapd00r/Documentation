From zsh-workers-return-18533-mason-zsh=primenet.com.au@sunsite.dk Wed May 14 11:47:04 2003
Return-Path: <zsh-workers-return-18533-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4674 invoked from network); 14 May 2003 11:47:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 May 2003 11:47:03 -0000
Received: (qmail 539 invoked by alias); 14 May 2003 11:46:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18533
Received: (qmail 531 invoked from network); 14 May 2003 11:46:58 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 14 May 2003 11:46:58 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [192.35.17.2] by sunsite.dk (MessageWall 1.0.8) with SMTP; 14 May 2003 11:46:57 -0000
Received: from mail2.siemens.de (mail2.siemens.de [139.25.208.11])
	by thoth.sbs.de (8.11.7/8.11.7) with ESMTP id h4EBkul07017;
	Wed, 14 May 2003 13:46:56 +0200 (MEST)
Received: from MOWD019A.mow.siemens.ru ([163.242.196.119])
	by mail2.siemens.de (8.11.7/8.11.7) with ESMTP id h4EBkum20444;
	Wed, 14 May 2003 13:46:56 +0200 (MEST)
Received: by mowd019a.mow.siemens.ru with Internet Mail Service (5.5.2653.19)
	id <K661JXLL>; Wed, 14 May 2003 15:51:14 +0400
Received: from mw2b210c (163.242.193.12 [163.242.193.12]) by MOWD019A.mow.siemens.ru with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id K661JXLK; Wed, 14 May 2003 15:51:10 +0400
From: Borzenkov Andrey <Andrey.Borzenkov@siemens.com>
To: "'Oliver Kiddle'" <okiddle@yahoo.co.uk>, zsh-workers@sunsite.dk
Cc: "'Juhapekka Tolvanen'" <juhtolv@iki.fi>
Subject: =?us-ascii?Q?RE:_Bug#190948:_Violation_against_The_Single_UNIX_R_Specific?=
	=?us-ascii?Q?ation=2C_Version_2_?=
Date: Wed, 14 May 2003 15:46:46 +0400
Message-ID: <6134254DE87BD411908B00A0C99B044F05A0C924@mowd019a.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4510
In-reply-to: <3014.1052910423@gmcs3.local>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1165

>=20
> On 27 Apr, Juhapekka Tolvanen wrote:
> >
> >
> =
http://www.opengroup.org/onlinepubs/007908799/xcu/chap2.html#tag_001_014=
_0
> 11
> >
> > juhtolv@heresy:/home/juhtolv % set -o vi
> > set: no such option: vi
>=20
> Being an interactive related feature, this isn't so critical but it =
would
> be better if we can handle this. Adding a special case in bin_set()
> instead of actually adding an option might perhaps be sufficient to
> satisfy the specification. However, on the basis that zle is a =
separate
> module and may not even be loaded and you can't just call =
selectkeymap(),
> I have no idea how to get this to work. And which keymap should set =
+o
> vi select?
>=20

=3D=3D=3D=3D=3D=3D=3D=3D
Allow shell command-line editing using the built-in vi editor. Enabling =
vi
mode disables any other command-line editing mode provided as an
implementation extension. It need not be possible to set vi mode on for
certain block-mode terminals.
=3D=3D=3D=3D=3D=3D=3D=3D

So it is extension and optional. We can just recognize option and set a =
flag
so Zle selects vi keymap when it starts up in shell compatibility mode. =
If
Zle is not loaded - just do nothing implying that  implementation =
extension
is not provided :)

What do you mean about set +o vi? It does not look like this form is
required:

set [-abCefmnuvx][-h][-o option][argument...]
set [+abCefmnuvx][+h][-o option][argument...]
set --[argument...]
set -[argument...]

-andrey


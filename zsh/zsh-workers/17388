From zsh-workers-return-17388-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 01 09:52:46 2002
Return-Path: <zsh-workers-return-17388-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1561 invoked from network); 1 Jul 2002 09:52:45 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 Jul 2002 09:52:45 -0000
Received: (qmail 12845 invoked by alias); 1 Jul 2002 09:52:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17388
Received: (qmail 12833 invoked from network); 1 Jul 2002 09:52:40 -0000
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: PATCH: zle recursive editing. 
In-reply-to: ""Bart Schaefer""'s message of "Sun, 30 Jun 2002 21:19:25 -0000."
             <1020630211925.ZM15781@candle.brasslantern.com> 
Date: Mon, 01 Jul 2002 10:52:09 +0100
Message-ID: <23948.1025517129@csr.com>
From: Peter Stephenson <pws@csr.com>

"Bart Schaefer" wrote:
> On Jun 30,  9:53pm, Peter Stephenson wrote:
> } Subject: PATCH: zle recursive editing.
> }
> } This simple patch (only the trivial function recursiveedit is new, the
> } rest is just rearrangement, mostly to move the core functions from
> } zlemain to a new function zlecore) has a lot of mileage.
> 
> Cool.  Now if there were some way to get the various "minibuffer" commands
> like execute-named-command to use recursive editing with a separate keymap,
> we could really do some interesting stuff.

Another thing I thought of which might be useful is a way to protect
areas of the display, so for example if you are using a widget like
select-list you can't move off the list until you accept something or
break.  I think you could do something like this without too much
difficulty by using a special parameter like $PREDISPLAY (maybe also
$POSTDISPLAY, since this gives you more control than zle -M), which would
insert the given lines before (or after) $BUFFER.  This could probably
be done within zle_refresh (and zle_parameter, of course).  It would
probably have to be line-orientated to avoid weird interactions with the
normal buffer, although maybe even that restriction is avoidable.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


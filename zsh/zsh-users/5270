From zsh-users-return-5270-mason-zsh=primenet.com.au@sunsite.dk Tue Aug 20 01:06:52 2002
Return-Path: <zsh-users-return-5270-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24218 invoked from network); 20 Aug 2002 01:06:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Aug 2002 01:06:50 -0000
Received: (qmail 18115 invoked by alias); 20 Aug 2002 01:06:32 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5270
Received: (qmail 18100 invoked from network); 20 Aug 2002 01:06:30 -0000
Message-ID: <20020820010627.68232.qmail@web10409.mail.yahoo.com>
Date: Mon, 19 Aug 2002 18:06:27 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Re: [SUBMIT] _ant completion function
To: Oliver Kiddle <okiddle@yahoo.co.uk>, Bill Burton <billb@progress.com>
Cc: Zsh users <zsh-users@sunsite.dk>
In-Reply-To: <E17gnoZ-0004m9-00@bimbo.logica.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Sorry about the mis-sent mail....

--- Oliver Kiddle <okiddle@yahoo.co.uk> wrote:
> On 16 Aug, Bill Burton wrote:
> How do you specify target descriptions in a build.xml file?

Target elements have a "description" attribute, like they have a "name"
attribute.

> On the 4.1 branch, there is a _java_class function which is meant to do
> this but I can't entirely make sense of what it is doing and how to get
> it to use $ANT_HOME/lib/*.jar as you suggest. It ought to use
> _multi_parts too.

You don't explain what is confusing you.  Though there are several things
that are a little odd.  One is that in _java, _java_class is called
with flags like "-m main" and "-t doclet".  These are not parsed within
_java_class.  The idea was that it might be possible someday to make
_java_class smarter to look for classes with a "main" method.  Or having
the "doclet" type.  Though this is not implemented.  The problem with
listing all classes from the class path is that there can be a lot of
classes that are not usable in a particular situation.  It would be nice
if zsh could provide some additional filtering.

The other thing is that _java_class looks at opt_args for -classpath or -cp.
This is ugly, really should be a better way to pass these values without
having to go to a state.


> Certainly, this can still be improved. For zsh 4.0, the _java_class
> stuff will need the be replaced with the state from Bill's function, the
> -e option passed  to _message needs to go and the $ANT_ARGS stuff needs
> to go. So don't expect this to work properly on 4.0.

Could we add _java_class to 4.0?  Is there something about it that would
not allow us to add it?

The other thing that would be useful for _java and _ant is if the
-D flag which takes property=value allowed for a completer other than
_default for property value.

Also, adding caching for the build.xml targets/descriptions, and
for _java_class jar files.

-FR.


__________________________________________________
Do You Yahoo!?
HotJobs - Search Thousands of New Jobs
http://www.hotjobs.com


From zsh-workers-return-5857-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 18 16:38:21 1999
Return-Path: <zsh-workers-return-5857-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18845 invoked from network); 18 Mar 1999 16:38:20 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Mar 1999 16:38:20 -0000
Received: (qmail 28320 invoked by alias); 18 Mar 1999 16:37:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5857
Received: (qmail 28241 invoked from network); 18 Mar 1999 16:37:45 -0000
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: _path_files and _cd  with explicit glob pattern
Date: Thu, 18 Mar 1999 19:37:04 +0300
Message-ID: <004901be715d$8e72fbb0$21c9ca95@mowp.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211

bor@itsrm2:/tools/src/zsh-3.1.5-pws-12/Completion%> zsh -f
itsrm2% fpath=($PWD/${^~:-*(/)})
itsrm2% source Core/compinit
itsrm2% cdpath=(/tools/src)
itsrm2% setopt globcomplete
itsrm2% cd /tools
itsrm2% l s/*3TAB
itsrm2% l src/autoconf-2.13/
autoconf-2.13/     samba-2.0.3/       tk8.0.3/           zsh-3.1.5-pws-12/
mc-4.5.13/         sendmail-8.9.3/    top-3.4/
ncftp-3.0beta18/   tcl8.0.3/          wget-1.5.3/

In other words, all files with ``3'' in them are taken. And menu starts
immediately.

I think, if user explicitly gives glob pattern, he probably knows what he's
doing. I noted this, when I tried to change to a directory; there were three
dirs:
SIN3C1 SIN3C2 SIN3C3 - and I wanted to select exactly one (the last) but got
all three.

And another problem with _cd (I think)

itsrm2% cd s/*3TAB
   Beep

Ahem ... I'd expect it to complete to src/whatever

itsrm2% cd *3TAB  (they are all in /tools/src)
itsrm2% cd autoconf-2.13
autoconf-2.13      samba-2.0.3        tk8.0.3            zsh-3.1.5-pws-12
mc-4.5.13          sendmail-8.9.3     top-3.4
ncftp-3.0beta18    tcl8.0.3           wget-1.5.3

I get the same names and menu starts immediately (that's due to _path_files
I think) but they are not marked with slash (and no autoremoved slash
either)

cheers

/andrej


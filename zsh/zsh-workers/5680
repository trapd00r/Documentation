From zsh-workers-return-5680-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 08 11:32:09 1999
Return-Path: <zsh-workers-return-5680-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1132 invoked from network); 8 Mar 1999 11:32:07 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Mar 1999 11:32:07 -0000
Received: (qmail 4742 invoked by alias); 8 Mar 1999 11:31:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5680
Received: (qmail 4733 invoked from network); 8 Mar 1999 11:31:36 -0000
Message-Id: <9903081115.AA35710@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: _long_options 
In-Reply-To: "Sven Wischnowsky"'s message of "Mon, 08 Mar 1999 11:31:42 NFT."
             <199903081031.LAA11761@beta.informatik.hu-berlin.de> 
Date: Mon, 08 Mar 1999 12:15:41 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> I had this idea when playing with `_tar' (which is not changed, yet):
> there we probably should try to turn the archive name into a absolute
> path when building the cache name. Would
> 
>   tf="$PWD/$tf"
>   tf="${${tf//.\\/}//\\/[^/]#\\/..}"
> 
> be enough for that? (Looks funny, doesn't it? ;-)

Might be safer to leave ..'s in there, since they can do funny things.  Or
only replace them at the start of the old tf, where the user's intention is
probably clear.  Or something.

There's one other thing _tar probably ought to do... well, two other
things... well among the other things _tar ought to do which conceivably I
could possibly get around to doing when I'm feeling like it...

- in principle, you can have combined short arguments like -xv or -cP or
whatever anywhere on the command line before the file list, so it probably
ought to check if it had no luck early on --- e.g. look for
-[[:alpha:]]#[cxturA]*

- any --use-compress-program=*, or indeed --use-comp*, should get added to
$largs

- any --dir*=* should be changed to when completing archives and existing
files, which is another good argument for using absolute paths for $tf.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


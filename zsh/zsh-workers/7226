From zsh-workers-return-7226-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 20 14:23:01 1999
Return-Path: <zsh-workers-return-7226-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14098 invoked from network); 20 Jul 1999 14:22:59 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Jul 1999 14:22:59 -0000
Received: (qmail 16270 invoked by alias); 20 Jul 1999 14:22:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7226
Received: (qmail 16263 invoked from network); 20 Jul 1999 14:22:40 -0000
Message-Id: <9907201351.AA25933@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: PATCH: 3.1.6-test2: install info for half-hearted dynamic loading
Date: Tue, 20 Jul 1999 15:51:43 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Here is a description of the fact that dynamic loading on some systems
doesn't show symbols in other dynamically loaded libraries.  The question
is whether we should install some automatic workaround.  We already include
comp1 in the executable for such systems.

--- INSTALL.rtld	Tue Jul 20 15:26:46 1999
+++ INSTALL	Tue Jul 20 15:50:50 1999
@@ -66,13 +66,23 @@
 Controlling what is compiled into the main zsh binary
 -----------------------------------------------------
 
-By default the comp1, compctl, zle, sched and rlimits modules are compiled
-into non-dynamic zsh and no modules are compiled into the main binary if
-dynamic loading is available.  This can be overridden by creating the file
-mymods.conf in the compilation directory (Src, unless you have told
-configure to use another directory) with the list of modules which are to
-be compiled into the main binary.  See the zshmodules manual page for the
-list of available modules.
+By default the comp1, compctl, zle, complist, sched and rlimits modules are
+compiled into non-dynamic zsh and no modules are compiled into the main
+binary if dynamic loading is available.  This can be overridden by creating
+the file mymods.conf in the compilation directory (Src, unless you have
+told configure to use another directory) with the list of modules which are
+to be compiled into the main binary, one module name per line with no
+punctuation and no suffix.  See the zshmodules manual page for the list of
+available modules.
+
+On systems which do not allow symbols in one dynamically loaded library to
+be visible from another, comp1 will be compiled in to the base executable
+when dynamic loading is used to provide a link between the compctl and zle
+modules.  However, the modules depending on zle (complist and deltochar)
+cannot be loaded dynamically on such systems; this is true, for example, of
+version 4 of SunOS.  The most convenient workaround is to compile zle into
+the base executable by including it (as well as comp1) in mymods.conf as
+described above.
 
 Compiler Options or Using a Different Compiler
 ----------------------------------------------

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-users-return-15426-mason-zsh=primenet.com.au@zsh.org Thu Sep 23 20:23:03 2010
Return-Path: <zsh-users-return-15426-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12331 invoked by alias); 23 Sep 2010 20:23:02 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15426
Received: (qmail 10359 invoked from network); 23 Sep 2010 20:23:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.9 required=5.0 tests=BAYES_00,PLING_QUERY
	autolearn=no version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
Date: Thu, 23 Sep 2010 16:22:31 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Users <zsh-users@zsh.org>
Subject: !$ changes when mistyped?
Message-ID: <alpine.LNX.2.01.1009231557130.4754@hp>
User-Agent: Alpine 2.01 (LNX 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; format=flowed; charset=US-ASCII

Apparently there's something different enough about my work keyboard 
such that I constantly inadvertently type !4 when trying to type !$.  (I 
reaally oughtta bind !$ to a key, considering how frequently I use it.)

The problem, though, is that I often then hit <Tab>, so that I can 
modify whatever !$ was.  When I accidentally type !4<Tab>, it expands to 
'vi .zsh_prompt-'.  But, if I catch my mistake and type C-/ (which 
produces the equivalent of "^_", bound to undo), then delete the '4' and 
replace it with '$', <Tab> expands '!$' to '.zsh_prompt-'.  (the last 
word of command 4 instead of the last word of the previous command.)

Is this behavior expected -- should history expansion/completion 
(terminology?)  change what '!$' references?  If so, is it configurable?

FWIW, my workaround has been to (when I typo, which is frequently):

!4<Tab>
<C-/><Backspace>!$
(ending up with !!$, instead of !$).

-- 
Best,
Ben


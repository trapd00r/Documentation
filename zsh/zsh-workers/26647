From zsh-workers-return-26647-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 28 23:02:08 2009
Return-Path: <zsh-workers-return-26647-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2769 invoked from network); 28 Feb 2009 23:02:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Feb 2009 23:02:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 57067 invoked from network); 28 Feb 2009 23:01:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Feb 2009 23:01:57 -0000
Received: (qmail 19681 invoked by alias); 28 Feb 2009 23:01:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26647
Received: (qmail 19661 invoked from network); 28 Feb 2009 23:01:47 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 28 Feb 2009 23:01:47 -0000
Received: from vms173007pub.verizon.net (vms173007pub.verizon.net [206.46.173.7])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 7496E8058F83
	for <zsh-workers@sunsite.dk>; Sun,  1 Mar 2009 00:01:42 +0100 (CET)
Received: from torch.brasslantern.com ([173.67.122.60])
 by vms173007.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KFS00HHWTAL24PK@vms173007.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sat, 28 Feb 2009 17:01:38 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n1SN1VoS003833; Sat,
 28 Feb 2009 15:01:32 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n1SN1V3s003832; Sat, 28 Feb 2009 15:01:31 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090228150131.ZM3831@torch.brasslantern.com>
Date: Sat, 28 Feb 2009 15:01:31 -0800
In-reply-to: <200902282349.55759.arvidjaar@gmail.com>
Comments: In reply to Andrey Borzenkov <arvidjaar@gmail.com>
 "Re: Echoing of 8-bit-characters broken after 4.3.2?" (Feb 28, 11:49pm)
References: <2493fbfb0902281231t3b5d61b0g5a7898635fc1c9fc@mail.gmail.com>
	<200902282349.55759.arvidjaar@gmail.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@sunsite.dk
Subject: Re: Echoing of 8-bit-characters broken after 4.3.2?
Cc: Wolfgang Hukriede <whukriede@googlemail.com>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.92.1/9057/Sat Feb 28 14:56:20 2009 on bifrost
X-Virus-Status: Clean

} > True, but setting LANG to "is_IS.ISO8859-1" once and then setting it
} > to anything else seems to do the trick as well:
} >   > export LANG=is_IS.ISO8859-1
} >   > date
} >
} >   lau 28 feb 2009 21:17:50 CET
} >
} >   > export LANG=nada
} >   > date
} >
} >   Sat Feb 28 21:24:36 CET 2009
} >
} > Eight-bit-chars still work.
} 
} setlocale() failed so old value (is_IS.ISO8859-1) remains in effect.

In more detail, what's happening is that the variable is no longer in
the environment, so it's not inherited by "date", even though zsh is
still using the previous local.

However, the deeper problem is that is_IS.ISO8859-1 is probably the
wrong value in the first place.  I found it by tab-completing thus:

zsh% LANG=IS<TAB>

but on a closer look there are a whole lot of possible alternatives.
I'm guessing that perhaps one of de_AT.iso88591 or de_DE.iso88591 is
more correct, but you should look through the list yourself.


From zsh-users-return-14938-mason-zsh=primenet.com.au@zsh.org Mon Mar 15 15:58:49 2010
Return-Path: <zsh-users-return-14938-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12436 invoked by alias); 15 Mar 2010 15:58:49 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14938
Received: (qmail 8431 invoked from network); 15 Mar 2010 15:58:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100315085820.ZM6723@torch.brasslantern.com>
Date: Mon, 15 Mar 2010 08:58:20 -0700
In-reply-to: <20100315101546.GA28047@prunille.vinc17.org>
Comments: In reply to Vincent Lefevre <vincent@vinc17.org>
 "zsh sometimes freezes when completing a command" (Mar 15, 11:15am)
References: <20100315101546.GA28047@prunille.vinc17.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Re: zsh sometimes freezes when completing a command
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Mar 15, 11:15am, Vincent Lefevre wrote:
} Subject: zsh sometimes freezes when completing a command

Zsh sometimes becomes uninterruptible when completing anything that
takes a long time to look up.  We probably ought to install a special
handler for INT, QUIT, and TSTP during completion (or any ZLE op that
executes as a shell function rather than as a builtin).

} I've run gdb on the current process. Here's the backtrace:
} 
} (gdb) bt
} #0  0x00007fe80de60b1f in poll () from /lib/libc.so.6
} #1  0x00007fe80853811d in ldap_result () from /usr/lib/libldap_r-2.4.so.2

So what's causing the "freeze" is that zsh is waiting for the LDAP
server to time out.  The part about not being able to interrupt it
is an unintended side-effect.


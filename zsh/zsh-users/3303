From zsh-users-return-3303-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 20 16:55:46 2000
Return-Path: <zsh-users-return-3303-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8824 invoked from network); 20 Jul 2000 16:55:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Jul 2000 16:55:45 -0000
Received: (qmail 11169 invoked by alias); 20 Jul 2000 16:55:15 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3303
Received: (qmail 11161 invoked from network); 20 Jul 2000 16:55:13 -0000
Message-ID: <1D4512C91A0E044FBF24DDB221C94C53826753@red-msg-29.redmond.corp.microsoft.com>
From: Mike Boilen <mboilen@microsoft.com>
To: "'zsh-users@sunsite.auc.dk'" <zsh-users@sunsite.auc.dk>
Subject: Problems with zsh 3.1.9 and cygwin
Date: Thu, 20 Jul 2000 09:54:08 -0700
X-Mailer: Internet Mail Service (5.5.2651.58)

I am using windows 2000 server with cygwin 1.1.2 (or whatever the newest
release is; I downloaded it yesterday).  The code for zsh 3.1.9 builds fine
without modification.  However, when I run it, I get the error:

      0 [main] zsh 18877 handle_exceptions: Exception:
STATUS_ACCESS_VIOLATION
    913 [main] zsh 18877 stackdump: Dumping stack trace to zsh.exe.stackdump

and the following stackdump:

Exception: STATUS_ACCESS_VIOLATION at eip=6106CFAB
eax=00000000 ebx=00000007 ecx=00000007 edx=FFFFFFFF esi=0A04A868
edi=00000000
ebp=024AF5F4 esp=024AF5E8 program=e:\zsh\zsh-3.1.9\src\zsh.exe
cs=001B ds=0023 es=0023 fs=003B gs=0000 ss=0023
Stack trace:
Frame     Function  Args
024AF5F4  0048F0DF  (00000000, 0A04A868, 00000007, 0048EECD)
024AF804  0048F0DF  (00000000, 0A049EE0, 01BFF269, 917B4290)
024AFC44  0041C838  (024AFCF4, 0A040880, 0A04088B, 00000006)
024AFC64  00431409  (00493E58, 0A049EE0, 0A04009C, 0A043F18)
024AFCB4  0042F7B8  (024AFCF4, 0A049EE0, 00000001, 00000006)
024AFD14  00430275  (0A040884, 0A049EE0, 0A040885, FFFFFFFF)
024AFE24  0042D26E  (0A042E68, FFFFFFFF, 00000003, 0041CFB1)
024AFE64  0041D10E  (0A041528, 0000002F, 024AFEA4, 004011B7)
024AFEA4  004011EF  (00000001, 0A041528, 0A040008, 00000000)
024AFF00  61002385  (7FFDF000, 392E312E, 332D6873, E14446A0)
024AFF60  610027D5  (004A0550, F0095CB0, 024AFF90, 004904AE)
024AFF90  004904BB  (0040107C, 86361BC0, FFFFFFFF, 804302E0)
024AFFC0  0040103B  (332D6873, 392E312E, 7FFDF000, 6578652E)
024AFFF0  77E87903  (00401000, 00000000, 000000C8, 00000100)
End of stack trace

I also poked around the code a bit.  It appears to crash in params.c at line
508 (using gdb to discover this)
    for (envp = new_environ, envp2 = environ; *envp2; envp2++) {

It parses several environment variables correctly, and then crashes.  All
the memory addresses look fine (i.e. none are null).  However, I'm a unix
programmer, not a windows programmer, so I don't have a good sense of what
"valid" really looks like.

Any ideas what could be causing this?

Thank you very much for your help.

Mike

P.S. I don't belong to the mailing list, so could you please respond to me
directly?  Thank you.


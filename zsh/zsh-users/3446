From zsh-users-return-3446-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Sep 23 06:12:42 2000
Return-Path: <zsh-users-return-3446-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27681 invoked from network); 23 Sep 2000 06:12:41 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Sep 2000 06:12:41 -0000
Received: (qmail 11230 invoked by alias); 23 Sep 2000 06:12:00 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3446
Received: (qmail 11222 invoked from network); 23 Sep 2000 06:11:58 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000923061139.ZM8260@candle.brasslantern.com>
Date: Sat, 23 Sep 2000 06:11:39 +0000
In-Reply-To: <20000923014152.A2045@idiocy.org>
Comments: In reply to Alan Third <alan@idiocy.org>
        "using \r in a while statement" (Sep 23,  1:41am)
References: <20000923014152.A2045@idiocy.org>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Alan Third <alan@idiocy.org>, zsh-users@sunsite.auc.dk
Subject: Re: using \r in a while statement
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 23,  1:41am, Alan Third wrote:
} Subject: using \r in a while statement
}
} I'm using a while loop to read in the article a line at a time.
} The article is ended by a line which only has .\r\n on it, so
} [...] I've ended up with:
} while [[ $LINE != `echo ".\r"` ]]; do
}     readline
}     printline
} done

If you have zsh 3.1.4 or later, use $'\r' as in [[ $LINE != $'.\r' ]].
The meaning of $'STRING' is that STRING is expanded as if with the
print builtin.

If you have an older zsh, you can still do it, with a considerably less
comprehensible syntax: [[ $LINE != ${(pr(2)(\r)):-.} ]]

Which means, working from the :- outward: expand nothing, and if you
get back nothing (which you must), then replace that with a dot, and
then pad that on the right with \r so the result is 2 characters wide,
interpreting the \r as if it were output by the print builtin.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-12684-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Aug 21 11:38:08 2000
Return-Path: <zsh-workers-return-12684-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12800 invoked from network); 21 Aug 2000 11:38:07 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Aug 2000 11:38:07 -0000
Received: (qmail 7664 invoked by alias); 21 Aug 2000 11:37:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12684
Received: (qmail 7650 invoked from network); 21 Aug 2000 11:37:23 -0000
Date: Mon, 21 Aug 2000 12:36:53 +0100
From: Peter Stephenson <pws@csr.com>
Subject: Re: nm from networks libraries on Solaris 7, 8, 2.6?
In-reply-to: "Your message of Mon, 21 Aug 2000 14:58:43 +0400."
 <000001c00b5e$c5cc8440$21c9ca95@mow.siemens.ru>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FZN00D3D49HRQ@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

> > I misspoke here.  inet_aton() is in fact in -lresolv, but inet_pton() and
> > inet_ntop() are in -lnsl.
> >
> 
> That means, that we need -lresolv on Solaris as well, that returns us to the
> problem with gethostbyname() clash. Could anybody send me nm output on libnsl
> ,
> libsocket and libresolv from Solaris? And, if possible, check if different
> versions of gethostbyname() exist?

% uname -a
SunOS noo-noo 5.6 Generic_105181-21 sun4u sparc SUNW,Ultra-4
% for f in /usr/lib/lib{nsl,socket,resolv}.so; do
> print "*** $f ***"
> nm $f | egrep 'inet_|gethostbyname'
> done

*** /usr/lib/libnsl.so ***
[3051]	|    203004|      48|FUNC |GLOB |0    |12     |__inet_address_count
[557]	|    202892|      32|FUNC |LOCL |0    |12     |__inet_address_is_local
[3623]	|    202880|      12|FUNC |GLOB |0    |12     |__inet_free_local_interfaces
[3380]	|    203052|      68|FUNC |GLOB |0    |12     |__inet_get_addr
[3182]	|    202868|      12|FUNC |GLOB |0    |12     |__inet_get_local_interfaces
[90]	|    203120|      76|FUNC |LOCL |0    |12     |__inet_get_network
[3635]	|    203284|      52|FUNC |GLOB |0    |12     |__inet_get_networka
[3500]	|    203196|      88|FUNC |GLOB |0    |12     |__inet_get_uaddr
[221]	|    205408|     168|FUNC |LOCL |0    |12     |__inet_netdir_is_my_host
[303]	|    204252|     132|FUNC |LOCL |0    |12     |__inet_netdir_options
[538]	|     98940|     136|FUNC |LOCL |0    |12     |__inet_taddr2uaddr
[537]	|    157032|     328|FUNC |LOCL |0    |12     |__inet_uaddr2taddr
[3725]	|    202924|      80|FUNC |GLOB |0    |12     |__inet_uaddr_is_local
[403]	|    195504|     376|FUNC |LOCL |0    |12     |_door_gethostbyname_r
[2967]	|    104284|     152|FUNC |GLOB |0    |12     |_switch_gethostbyname_r
[3438]	|    194072|      12|FUNC |GLOB |0    |12     |_uncached_gethostbyname_r
[3106]	|    194452|      96|FUNC |GLOB |0    |12     |gethostbyname
[3148]	|    194132|     160|FUNC |GLOB |0    |12     |gethostbyname_r
[982]	|         0|       0|FILE |LOCL |0    |ABS    |gethostbyname_r.c
[3441]	|    103636|     648|FUNC |GLOB |0    |12     |inet_addr
[1058]	|    204128|     124|FUNC |LOCL |0    |12     |inet_makeaddr
[1075]	|    206012|     456|FUNC |LOCL |0    |12     |inet_netdir_mergeaddr
[3404]	|    238724|      76|FUNC |GLOB |0    |12     |inet_netof
[3531]	|    238480|     244|FUNC |GLOB |0    |12     |inet_ntoa
[1470]	|         0|       0|FILE |LOCL |0    |ABS    |inet_ntoa.c
[3240]	|     99076|      72|FUNC |GLOB |0    |12     |inet_ntoa_r
[1059]	|         0|       0|FILE |LOCL |0    |ABS    |netdir_inet_sundry.c
*** /usr/lib/libsocket.so ***
[222]	|         0|       0|FUNC |GLOB |0    |UNDEF  |gethostbyname
[307]	|         0|       0|FUNC |GLOB |0    |UNDEF  |inet_addr
[211]	|     18172|      64|FUNC |GLOB |0    |11     |inet_lnaof
[105]	|         0|       0|FILE |LOCL |0    |ABS    |inet_lnaof.c
[257]	|     18236|     124|FUNC |GLOB |0    |11     |inet_makeaddr
[106]	|         0|       0|FILE |LOCL |0    |ABS    |inet_mkaddr.c
[118]	|     18828|     184|FUNC |LOCL |0    |11     |inet_nettoa
[194]	|     18360|     420|FUNC |GLOB |0    |11     |inet_network
[107]	|         0|       0|FILE |LOCL |0    |ABS    |inet_network.c
[326]	|         0|       0|FUNC |GLOB |0    |UNDEF  |inet_ntoa
*** /usr/lib/libresolv.so ***
[66]	|     44668|     608|FUNC |LOCL |0    |11     |gethostbyname2
[52]	|     47848|      12|FUNC |LOCL |0    |11     |ht_gethostbyname
[445]	|         0|       0|FILE |LOCL |0    |ABS    |inet_addr.c
[542]	|     48572|     632|FUNC |GLOB |0    |11     |inet_aton
[526]	|         0|       0|FUNC |GLOB |0    |UNDEF  |inet_makeaddr
[486]	|         0|       0|FUNC |GLOB |0    |UNDEF  |inet_network
[529]	|     48084|     256|FUNC |GLOB |0    |11     |inet_nsap_addr
[595]	|     48340|     232|FUNC |GLOB |0    |11     |inet_nsap_ntoa
[562]	|         0|       0|FUNC |GLOB |0    |UNDEF  |inet_ntoa
[565]	|     49204|      80|FUNC |GLOB |0    |11     |inet_ntop
[446]	|         0|       0|FILE |LOCL |0    |ABS    |inet_ntop.c
[449]	|     49284|      96|FUNC |LOCL |0    |11     |inet_ntop4
[450]	|     49380|     708|FUNC |LOCL |0    |11     |inet_ntop6
[549]	|     50088|      72|FUNC |GLOB |0    |11     |inet_pton
[451]	|         0|       0|FILE |LOCL |0    |ABS    |inet_pton.c
[455]	|     50160|     260|FUNC |LOCL |0    |11     |inet_pton4
[456]	|     50420|     572|FUNC |LOCL |0    |11     |inet_pton6
[556]	|     44588|      80|FUNC |GLOB |0    |11     |res_gethostbyname

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


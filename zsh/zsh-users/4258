From zsh-users-return-4258-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 19 07:46:56 2001
Return-Path: <zsh-users-return-4258-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13370 invoked from network); 19 Sep 2001 07:46:55 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Sep 2001 07:46:55 -0000
Received: (qmail 16269 invoked by alias); 19 Sep 2001 07:46:33 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4258
Received: (qmail 16251 invoked from network); 19 Sep 2001 07:46:32 -0000
X-Authentication-Warning: erdbeere.lifebits.local: luthien set sender to d.vogt@lifebits.de using -f
Date: Wed, 19 Sep 2001 09:46:06 +0200
From: Dominik Vogt <dominik.vogt@gmx.de>
To: zsh-users@sunsite.auc.dk
Subject: zsh crash, unable to log in
Message-ID: <20010919094606.A4972@lifebits.de>
Reply-To: d.vogt@lifebits.de
Mail-Followup-To: zsh-users@sunsite.auc.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.12i
X-Virus-Scanned: by AMaViS perl-11
X-Sender: 520008918237-0001@t-dialin.net

Yesterday, I encountered a pretty severe problem with the history
file that prevented me from logging in (I have zsh as my login
shell).  I used the zsh version shipping with SuSE 7.2:

   $ zsh --version
   zsh 4.0.1pre3 (i386-suse-linux)

What happened is this:  After a hard reboot, i.e. switching off
the machine, my ~/.zsh_history file was corrupt.  It only
contained 38k of binary trash.  Now, every time when I tried to
log in I just got the message

  $ zsh
  zsh: fatal error: out of memory

If this happens for the root user, the system is out of business.
I can reproduce the problem at will by copying a random executable
file over my .zsh_history:

  $ cp /bin/ls ~/.zsh_history
  $ zsh
  zsh: fatal error: out of memory

  $ rm ~/.zsh_history
  $ zsh
  (works fine)

Bye

Dominik ^_^  ^_^

P.S.: Please CC me, I'm not on the list.

-- 
Dominik Vogt, email: d.vogt@lifebits.de
LifeBits Aktiengesellschaft, Albrechtstr. 9, D-72072 Tuebingen
fon: ++49 (0) 7071/7965-0, fax: ++49 (0) 7071/7965-20


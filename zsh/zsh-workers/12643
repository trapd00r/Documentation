From zsh-workers-return-12643-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Aug 15 15:24:30 2000
Return-Path: <zsh-workers-return-12643-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10227 invoked from network); 15 Aug 2000 15:24:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Aug 2000 15:24:29 -0000
Received: (qmail 25271 invoked by alias); 15 Aug 2000 15:24:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12643
Received: (qmail 25263 invoked from network); 15 Aug 2000 15:24:09 -0000
Date: Tue, 15 Aug 2000 16:18:48 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
Subject: Seg fault with zmodload -u
Sender: okid@cm01.ess
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Message-id: <200008151518.QAA42116@cm01.ess>
Content-transfer-encoding: 7BIT

zsh -f
zmodload -ud zsh/zleparameter zsh/zle
zsh: 18383 segmentation fault  zsh -f

I found this because I was going through the various zmodload options 
because I was doing an _arguments based completion for it. It happens
wherever the dependencies are defined, i.e, zmodload -d foo bar;zmodload
-du foo bar will also result in a seg fault.

This is on 3.1.9-dev-4 plus patches up to 12568 on AIX. If it isn't
reproducible elsewhere, I'll upgrade to the latest cvs and try again.

On the subject of zmodload completion, how would I prevent the 'module
alias' description from being displayed when there are no module
aliases - do I have to put the zmodload -A output in an array first and
then not call the _requested line if the array is empty - or is there a
better way?

Oliver


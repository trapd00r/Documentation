From zsh-workers-return-17143-mason-zsh=primenet.com.au@sunsite.dk Mon May 13 18:05:04 2002
Return-Path: <zsh-workers-return-17143-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23751 invoked from network); 13 May 2002 18:05:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 13 May 2002 18:05:03 -0000
Received: (qmail 12964 invoked by alias); 13 May 2002 18:04:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17143
Received: (qmail 12951 invoked from network); 13 May 2002 18:04:53 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: completion in quotes - " vs ' - no suffix added
In-Reply-To: <1020513173320.ZM12360@candle.brasslantern.com>
References: <15576.54689.459113.686818@wischnow.berkom.de> 
	<6134254DE87BD411908B00A0C99B044F02E89A73@mowd019a.mow.siemens.ru> 
	<15577.7296.682622.411849@wischnow.berkom.de> 
	<1020508153855.ZM7837@candle.brasslantern.com> 
	<15583.34740.981994.404489@wischnow.berkom.de> 
	<6134254DE87BD411908B00A0C99B044F02E89A8C@mowd019a.mow.siemens.ru> 
	<1020513173320.ZM12360@candle.brasslantern.com>
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Mailer: Ximian Evolution 1.0.3-1mdk 
Date: 13 May 2002 22:04:43 +0400
Message-Id: <1021313089.2926.10.camel@localhost.localdomain>
Mime-Version: 1.0

=F7 =F0=CE=C4, 13.05.2002, =D7 21:33, Bart Schaefer =
=CE=C1=D0=C9=D3=C1=CC:
>=20
> On May 13,  2:14pm, Borsenkow Andrej wrote:
> }
> } I do not see any difference with this patch. As before, listing
> } pathnames with spaces in single quotes correctly adds slash to
> } directories and in double quotes adds nothing.
>=20
> I see slashes getting added to directories in double quotes:
>=20
> schaefer<505> ls       =20
> a\ b  a\ d/  don't stop/  rmthat/
> schaefer<506> ls "a<TAB><TAB>
> schaefer<506> ls "a\\
> Completing files
> a\\ d/  a\\ b=20
>=20
> And then going on:
>=20
> schaefer<506> ls "a\\ <TAB>
> schaefer<506> ls "a\\ d/<TAB>
> schaefer<506> ls "a\\ b"
>=20

Wrong example. My concern is

zsh -c "ls TAB"

It is _here_ it should escape spaces:

itsrm2% ls "
a b/       c d/       uudecode/

O.K. (just lists filenames verbatim)=20

but
itsrm2% zsh -c "ls
a\\ b      c\\ d      uudecode/

wrong (upon dequoting of matches). Second TAB:

itsrm2% zsh -c "ls a\\ b
a\\ b      c\\ d      uudecode/

so correctly escaped filename is inserted but is not unquoted when
testing for file type.

> One oddity is that typing the closing quote after `ls "a\\ d/' does =
not
> auto-remove the slash, but I don't think that's strictly a bug.
>

May be it should; but then it becomes increasingly more complicated =
with
nested quotes. Besides, you may want to continue quoted word ...

-andrej


From zsh-workers-return-28218-mason-zsh=primenet.com.au@zsh.org Tue Aug 31 14:33:50 2010
Return-Path: <zsh-workers-return-28218-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8334 invoked by alias); 31 Aug 2010 14:33:50 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28218
Received: (qmail 25830 invoked from network); 31 Aug 2010 14:33:46 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at uni-due.de does not designate permitted sender hosts)
Date: Tue, 31 Aug 2010 16:33:37 +0200
From: Philipp Hartwig <philipp.hartwig@uni-due.de>
To: zsh-workers@zsh.org
Subject: Re: segfault on menu-select
Message-ID: <20100831143337.GA1108@uni-due.de>
References: <87wrrv4yrg.fsf@ft.bewatermyfriend.org>
 <20100812165307.GA24998@ph>
 <87r5i34v51.fsf@ft.bewatermyfriend.org>
 <20100812173356.GC24998@ph>
 <100812160702.ZM20648@torch.brasslantern.com>
 <20100813080811.GB495@ph>
 <100813085709.ZM22377@torch.brasslantern.com>
 <20100813214357.012f7f35@pws-pc>
 <100815134326.ZM20936@torch.brasslantern.com>
 <100815153444.ZM21188@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="5vNYLRcllDrimb99"
Content-Disposition: inline
In-Reply-To: <100815153444.ZM21188@torch.brasslantern.com>
User-Agent: Mutt/1.5.20 (2009-06-14)
X-Virus-Scanned: Clam Anti Virus - http://www.clamav.net
X-Scanned-By: MIMEDefang 2.57 on 132.252.185.19

--5vNYLRcllDrimb99
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

> The difference seems to be whether the zsh/compctl module is loaded.  I
> don't immediately know why zsh/compctl would be necessary for proper
> execution of menu-select, but if I add
>=20
> zmodload zsh/compctl
>=20
> to the minimal zshrc, I am no longer able to force a crash.  I tried with
> zsh 4.3.9 as well, and I can crash it if compctl is not loaded, but not
> when compctl is loaded.

I also do not experience any more crashes since adding

zmodload zsh/compctl

to my .zshrc. Unfortunately this breaks the menu-select feature in some=20
cases.

For example with this .zshrc

autoload -Uz compinit
compinit
zmodload -i zsh/complist
#zmodload zsh/compctl
zstyle ':completion:*' matcher-list 'm:{a-z}=3D{A-Z}' 'r:|[._-]=3D* r:|=3D*=
' 'l:|=3D* r:|=3D*'
bindkey '^o' menu-select

and a folder=20

ph% ls
baz-foo  test-foo

doing

ph% vi foo<tab><tab><ctrl-o>

will work out nice and give me the desired menu-selection (or crash). =20
But if I comment in the line in the .zshrc above, no menu-select will=20
take place anymore.

--5vNYLRcllDrimb99
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iEYEARECAAYFAkx9ErwACgkQiTx0ar4roGRnkwCfawPLGGE3U0RU3sY56wNaiFRH
+w8AmQENO0kYQFscYQ+vUcOIkg1/HTlL
=zJgI
-----END PGP SIGNATURE-----

--5vNYLRcllDrimb99--


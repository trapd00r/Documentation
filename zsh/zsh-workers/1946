From zsh-workers-request@euclid.skiles.gatech.edu  Mon Aug 12 17:49:11 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id RAA01999 for <mason@primenet.com.au>; Mon, 12 Aug 1996 17:49:08 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id DAA02709; Mon, 12 Aug 1996 03:33:34 -0400 (EDT)
Resent-Date: Mon, 12 Aug 1996 03:33:34 -0400 (EDT)
From: Rob.Hooft@EMBL-Heidelberg.de
Date: Mon, 12 Aug 1996 09:32:10 +0200 (MET DST)
Message-Id: <199608120732.JAA08809@nu>
To: Zoltan Hidvegi <hzoli@cs.elte.hu>
Cc: Rob.Hooft@stork.EMBL-Heidelberg.DE, zsh-workers@math.gatech.edu
Subject: Re: DEC Unix 3.2d / 3.0pre6
In-Reply-To: <199608120404.GAA10280@hzoli.ppp.cs.elte.hu>
References: <199608051712.TAA26583@nu>
	<199608120404.GAA10280@hzoli.ppp.cs.elte.hu>
Mime-Version: 1.0 (generated by tm-edit 7.67)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"nHhuz2.0.Gg.Dvj3o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1946
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>>>>> "ZH" == Zoltan Hidvegi <hzoli@cs.elte.hu> writes:

 >> So it seems under DU4.0 even gcc doesn't need the ioctl prototype
 >> in prototypes.h.  Removing the section at lines 104--110 in
 >> prototypes.h creates a working binary. I'm not sure how to detect
 >> this situation, so I'm in no position to generate a patch.

 ZH> Unfortunately I do not have access to DEC Unix 4.x so I cannot
 ZH> write such a test without some help.  The simplest solution would
 ZH> be a test for some predefined macro so that these prototypes are
 ZH> only defined for older DEC Unix versions.

Officially gcc-2.7.2 does not support DU4.0 yet, but I fear even if
the next version of gcc does officially support it, there will be no
differences in the predefined symbols. Certainly at this moment there
is no difference, nor is there any version-indication:

   nu[102]hooft% /nu1/hooft/lib/gcc-lib/alpha-dec-osf4.0/2.7.2.f.1/cpp -dM /dev/null
   #define SYSTYPE_BSD 1 
   #define _LONGLONG 1 
   #define __alpha__ 1 
   #define __osf__ 1 
   #define _SYSTYPE_BSD 1 
   #define __alpha 1 
   #define unix 1 

"uname -a" does the trick, but that is an ugly test...

   alpha1[101]hooft% uname -a
   OSF1 alpha1.embl-heidelberg.de V3.2 148 alpha
   nu[103]hooft% uname -a
   OSF1 nu.embl-heidelberg.de V4.0 386 alpha

Do you have any other hints?

-- 
=== Rob.Hooft@EMBL-Heidelberg.DE   http://www.Sander.EMBL-Heidelberg.DE/rob/ ==
==== In need of protein modeling?  http://www.Sander.EMBL-Heidelberg.DE/whatif/
Validation of protein structures?  http://biotech.EMBL-Heidelberg.DE:8400/ ====
== PGPid 0xFA19277D == Use Linux!  Free Software Rules The World! =============


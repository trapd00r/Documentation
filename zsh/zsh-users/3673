From zsh-users-return-3673-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 15 06:21:06 2001
Return-Path: <zsh-users-return-3673-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4022 invoked from network); 15 Mar 2001 06:21:05 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Mar 2001 06:21:05 -0000
Received: (qmail 23160 invoked by alias); 15 Mar 2001 06:20:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3673
Received: (qmail 23149 invoked from network); 15 Mar 2001 06:20:54 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Vin Shelton" <acs@alumni.princeton.edu>, <zsh-users@sunsite.dk>
Subject: RE: Completions under NT / cygwin
Date: Thu, 15 Mar 2001 09:20:45 +0300
Message-ID: <002b01c0ad18$11f827b0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
In-Reply-To: <m2bsr36729.fsf@zion.rcn.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

>
>
> At work I have built zsh from the latest CVS sources using the cygwin
> toolkit.  When I use the new completion system, I can not complete
> fully-qualified filenames, be they of the form "/cygdrive/d/views/..."
> or (more conveniently) "d:/views/...".  Is there a magic style setting
> I need to use to complete these filenames?
>

For /cydrive use something like

zstyle ':completion:*' fake-files '/:cygdrive'  '/cygdrive:c d'

See description of fake-files. You can add some magic to startup scripts to
find out what drives are actually available (and even get real cygdrive prefix
from registry).

For d:/ unfortunately now solution as for now. The rpoblem is, zsh does not
knwo that it is an absolute filename. The simplest solution wuld be to stick
cygpath in approptiate place in _path_files:

mw1g017@MW1G17C% cygpath -u d:/foo
/cygdrive/d/foo

This would imply that completion will replace d:/foo by it's unix name.

-andrej


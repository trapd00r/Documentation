From zsh-workers-return-5395-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Feb 16 01:30:09 1999
Return-Path: <zsh-workers-return-5395-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26293 invoked from network); 16 Feb 1999 01:30:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Feb 1999 01:30:08 -0000
Received: (qmail 11629 invoked by alias); 16 Feb 1999 01:29:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5395
Received: (qmail 11622 invoked from network); 16 Feb 1999 01:29:38 -0000
Message-Id: <199902160114.BAA03383@Indigo.thoth.u-net.com>
From: opk@thoth.u-net.com (Oliver Kiddle)
Date: Tue, 16 Feb 1999 01:14:37 +0000
In-Reply-To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
       "Re:  Problem with completion matching control" (Feb 15, 10:42am)
X-Mailer: Mail User's Shell (7.2.6 beta(3) 11/17/96)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re:  Problem with completion matching control

On Feb 15, 10:42am, Sven Wischnowsky wrote:

> As for the cursor position: I tried to make the completion code clever 
> here by making it leave the cursor in the place where it is easiest to
> make the inserted line unambiguous. I know that this may look
> irritating but I think that this is the right thing to do. I could be
> convinced to make this controlled by an option, so that the cursor is
> left at the end if the option is unset.

I've done a few experiments and now agree with you that moving the
cursor back is better but I've also noticed something more subtle about
the behaviour which I think is a bug.

Starting with the usual:
zsh -f
compctl -M 'm:{a-z}={A-Z}'
:> temp > Temp

Now this behaves in a way that I like:
less t<tab><tab><tab>

But this behaves quite differently
less te<tab><tab><tab>

In the first case, the first tab completes 'temp', moves the cursor over
the e and lists 'Temp   temp' below the line. The second tab capitalises
the T and moves the cursor to the end. The third tab then lowercases the
t and any more tabs will continue to cycle.

In the second case, the first tab completes to 'temp' and moves the
cursor over the e as before but it doesn't list anything below. Any
subsequent tabs do nothing.

In practical use, I tended to get the second scenario because I normally
press tab after typing more than one character. Anyway, it is certainly
the second case which I find annoying.

> Playing with this I also noticed that there is some weird interaction
> going on between inserting such a string and the setting of recexact
> (the exact inserted match isn't immediatly accepted, which is wrong if 
> auto_menu is unset). I'll have a lokk at this.

I'm not sure if its the same as what you've noticed there. I get some
similar but different problems to what I described above when in the zsh
source directory after:
./co<tab><tab>
Here I again get no list and the menu completing stops at Config/ but
this is only with my options - its fine with zsh -f.

Thanks

Oliver Kiddle


From zsh-workers-return-9193-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jan 04 09:27:59 2000
Return-Path: <zsh-workers-return-9193-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6483 invoked from network); 4 Jan 2000 09:27:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Jan 2000 09:27:56 -0000
Received: (qmail 16357 invoked by alias); 4 Jan 2000 09:27:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9193
Received: (qmail 15714 invoked from network); 4 Jan 2000 09:20:54 -0000
Date: Tue, 4 Jan 2000 10:20:45 +0100 (MET)
Message-Id: <200001040920.KAA27386@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Thu, 23 Dec 1999 21:54:38 +0000
Subject: Re: PATCH: completion for zstyle


Peter Stephenson wrote:

> Here's some completion support for zstyle.  In the first argument it will
> complete only :completion: or :zftp:; for the second all the standard styles;
> for the third, it knows about most completable values for the various
> styles (and knows whether they are specific to :completion:* or :zftp:*).
> Goodness knows if I've used contexts and tags in a consistent fashion
> within _zstyle itself.

I'm not Goodness but I think it looks fine. Just one typo and two
omissions.


Bye
 Sven

diff -ru ../z.old/Completion/Builtins/_zstyle Completion/Builtins/_zstyle
--- ../z.old/Completion/Builtins/_zstyle	Tue Jan  4 10:16:06 2000
+++ Completion/Builtins/_zstyle	Tue Jan  4 10:17:34 2000
@@ -1,7 +1,8 @@
 #compdef zstyle
 
-local curcontext="$curcontext" state ostate line expl ctop
-local nm=$compstat[nmatches]
+local curcontext="$curcontext" state context ostate line expl ctop
+local nm=$compstate[nmatches]
+typeset -A opt_args
 
 typeset -A styles
 # Assoc array of styles; the values give the possible top-level

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


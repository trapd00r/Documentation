From zsh-workers-return-7511-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Aug 26 18:57:02 1999
Return-Path: <zsh-workers-return-7511-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4777 invoked from network); 26 Aug 1999 18:57:01 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Aug 1999 18:57:01 -0000
Received: (qmail 18397 invoked by alias); 26 Aug 1999 18:56:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7511
Received: (qmail 18390 invoked from network); 26 Aug 1999 18:56:46 -0000
Message-Id: <199908261856.NAA18311@wo1203.cmg.FCNBD.COM>
Content-Type: text/plain
MIME-Version: 1.0 (NeXT Mail 4.2mach v148)
X-Nextstep-Mailer: Mail 4.2mach (Enhance 2.0b5)
From: Brian Boonstra <boonstb@cmg.FCNBD.COM>
Date: Thu, 26 Aug 99 13:56:16 -0500
To: zsh-workers@sunsite.auc.dk
Subject: 3.1.6 bug in NextStep/OpenStep 4.2

Hey folks,

	Can anyone help me get 3.1.6 for OpenStep?  I'm now subscribed here,  
so replies to zsh-workers will be fine.  I've been attempting to compile  
from source.

	By finding the message

		http://www.zsh.org/mla/workers//1999/msg02372.html

in the archives, I managed to get zsh 3.1.6 to compile for OpenStep 4.2.  It  
is worth mentioning that I also had to mess with the Makefile, to the effect  
of specifying

		EXELDFLAGS      = -Wl,-x

for an install build -- I assume this is a flaw in autoconf.


	However, completion is not quite right.  In particular, if I run  
either the usual binary, I get completion with extra "2" characters, like  
this:

wo1203 % ls ../co                              /tmp/zsh/zsh-3.1.6/Src
Completion/   2  2config.guess* 2  2config.log    2  2configure*    2
Config/       2  2config.h      2  2config.status*2  2configure.in  2
config.cache  2  2config.h.in   2  2config.sub*   2  2              2



	I did get some warnings during compilation, notably the following three:

/bin/ld: warning /usr/lib/libtermcap.a(termcap.o) has external relocation  
entries in non-writable section (__TEXT,__text) for symbols:
__ctype_
_strcpy
_write
_close
_read
_open
_getenv
/bin/ld: warning /usr/lib/libtermcap.a(tgoto.o) has external relocation  
entries in non-writable section (__TEXT,__text) for symbols:
_strcpy
_strcat
/bin/ld: warning /usr/lib/libtermcap.a(tputs.o) has external relocation  
entries in non-writable section (__TEXT,__text) for symbols:
__ctype_



	I did attempt a debug build, but that dies with something like this:


wo1203 % gdb zsh                               /tmp/zsh/zsh-3.1.6/Src
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.14  (NEXTSTEP 4.0 --target i386), Copyright 1995 Free Software  
Foundation, Inc...
Reading symbols from /private/tmp/zsh/zsh-3.1.6/Src/zsh...done.

(gdb) r
Reading in symbols for crt0.c...done.
Dynamic Linkeditor at 0x12000000 offset 0x0
Executable at 0x2000 offset 0x0
/NextLibrary/Frameworks/System.framework/Versions/A/System at 0x5000000 offset 0x0
Reading symbols from loaded file...done.
wo1203 % Reading in symbols for zle_misc.c...done.p/zsh/zsh-3.1.6/Src
Program generated(1): Memory access exception on address 0x0 (protection failure).
0x81bbb in doinsert (str=0xbffff074 "l") at zle_misc.c:54
zle_misc.c:54: No such file or directory.
(gdb) quit




		Any suggestions?  I tried some of the Mac OS X erver and  
Darwin projects, since those are closely related to OpenStep 4.2, with  
similar bad luck.


			- Brian


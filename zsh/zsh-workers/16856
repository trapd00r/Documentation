From zsh-workers-return-16856-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 19 01:04:08 2002
Return-Path: <zsh-workers-return-16856-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24961 invoked from network); 19 Mar 2002 01:04:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Mar 2002 01:04:07 -0000
Received: (qmail 13754 invoked by alias); 19 Mar 2002 01:03:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16856
Received: (qmail 13743 invoked from network); 19 Mar 2002 01:03:44 -0000
Date: Mon, 18 Mar 2002 17:03:14 -0800 (PST)
From: Mark Lakata <lakata@mips.com>
X-Sender: lakata@spark
To: zsh-workers@sunsite.dk
Subject: zsh 4.04 on HP-UX
Message-ID: <Pine.GSO.4.10.10203181646340.18292-100000@spark>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I had to make 2 small changes in order to get zsh to compile on HP-UX 10.20,
gcc 2.95.2.

I had to explicitly set this defines

#define TERM_H_NEEDS_CURSES_H 


Also, I added the 'extern int h_errno' declaration to zsh_gethostbyname2().  I
saw the USE_LOCAL_H_ERRNO, but the problem is not that the h_errno doesn't
exist, but just that it isn't declared.


# ifndef HAVE_GETHOSTBYNAME2

extern int h_errno;
/**/
static struct hostent *
zsh_gethostbyname2(char const *name, int af)
{
        if(af != AF_INET) {
                h_errno = NO_RECOVERY;
                return NULL;
        }
        return gethostbyname(name);
}

...

cheers,
Mark


Mark Lakata, Staff Engineer    1225 Charleston Road       voice 650-567-5170
MIPS Technologies              Mountain View CA 94043     fax   650-567-5002


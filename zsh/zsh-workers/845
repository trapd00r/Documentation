From jmm@herakles.jpl.nasa.gov Thu Mar 21 08:57:39 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.4/8.7.3) with ESMTP id IAA05119 for <mason@werple.mira.net.au>; Thu, 21 Mar 1996 08:57:36 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA14003; Wed, 20 Mar 1996 16:34:48 -0500 (EST)
Resent-Date: Wed, 20 Mar 1996 16:34:48 -0500 (EST)
From: "Jan Martin" <jmm@herakles.jpl.nasa.gov>
Message-Id: <9603201333.ZM13337@herakles.jpl.nasa.gov>
Date: Wed, 20 Mar 1996 13:33:49 -0800
X-Mailer: Z-Mail (3.0.1 23feb94)
To: zsh-workers@math.gatech.edu
Subject: zsh on IRIX 6.1
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0
Resent-Message-ID: <"5Zui73.0.jQ3.td7Kn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/845
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 2825
Status: OR

Zsh experts:

We have an SGI Power Challenge running IRIX 6.1 and I've built zsh
for it.  It seems to run fine, and I've been using it right along,
but it does have one quirk:

auroch% ./zsh
~/zsh-2.6-beta13-hzoli13/Src
auroch% print $ZSH_VERSION
2.6-beta13-hzoli13
auroch% set
zsh: bus error (core dumped)  ./zsh

This error also occurs in version 2.6-beta10, but not on our other
SGIs running IRIX 5.3.  I have a feeling the problem could be related
to the fact that 6.1 is a 64-bit operating system with 64-bit pointers
while 5.3 is still 32-bit, but the compiler doesn't seem to complain
about any mismatch of pointers to ints, as happened with an earlier
version of zsh.

I compiled zsh with -g in order to at least do a trace from the core
file, and this is what I got:
auroch% dbx zsh core
dbx version 6.1 Jun 28 1995 19:55:35
Core from signal SIGBUS: Bus error
(dbx) where
>  0 intvargetfn(pm = 0x100b6d10)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/params.c":1197, 0x10056bfc]
   1 printparamnode(hn = 0x100b6d10, printflags = 0)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/hashtable.c":977,
0x1003aee4]
   2 scanhashtable(ht = 0x100cc4a8, sorted = 1, flags1 = 0, flags2 = 0,
scanfunc = 0x1003ac08, scanflags = 0)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/hashtable.c":265,
0x10038bb8]
   3 bin_set(name = 0x100cd668 = "set", argv = 0x100cd830, ops =
0xffffffa930 = "", func = 0)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/builtin.c":320, 0x10013478]
   4 execbuiltin(args = 0x100cd7b8, bn = 0x100b90f0)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/builtin.c":227, 0x100130a4]
   5 execcmd(cmd = 0x100cd788, input = 0, output = 0, how = 2, last1 =
0) ["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/exec.c":1563,
0x1002d3e0]
   6 execpline2(pline = 0x100cd800, how = 2, input = 0, output = 0,
last1 = 0) ["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/exec.c":804,
0x1002a1a0]
   7 execpline(l = 0x100cd768, how = 2, last1 = 0)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/exec.c":653, 0x10029784]
   8 execlist(list = 0x100cd818, exiting = 0)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/exec.c":551, 0x10029274]
   9 loop(toplevel = 1)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/init.c":122, 0x1004133c]
   10 main(argc = 1, argv = 0xffffffae98)
["/usr/users/jmm/zsh-2.6-beta13-hzoli13/Src/init.c":73, 0x100410f4]
   11 __start()
["/maui/6.1-jun28/work/irix/lib/libc/libc_64_M4/csu/crt1text.s":155,
0x1001259c]

I really don't know anything about how zsh works, so I'm hoping that
one of the gurus here can either see the problem, or suggest
some things to try to resolve this.  Thanks.

-jmm


-- 
**********************************************************
 Jan M. Martin                  Jet Propulsion Laboratory
 jmm@herakles.jpl.nasa.gov      M/S 300-235
**********************************************************



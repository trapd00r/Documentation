From zsh-users-return-3101-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 29 12:52:04 2000
Return-Path: <zsh-users-return-3101-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10258 invoked from network); 29 May 2000 12:50:58 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 May 2000 12:50:58 -0000
Received: (qmail 12598 invoked by alias); 29 May 2000 12:50:06 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3101
Received: (qmail 12591 invoked from network); 29 May 2000 12:50:05 -0000
Date: Mon, 29 May 2000 14:49:51 +0200 (MET DST)
Message-Id: <200005291249.OAA07867@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-users@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Mon, 29 May 2000 10:04:58 +0000
Subject: PATCH: Re: Menu-completion for particular commands


Bart Schaefer wrote:

> On May 29, 10:35am, Sven Wischnowsky wrote:
> } Subject: Re: Menu-completion for particular commands
> }
> } > > zsh% zstyle ':completion::complete:(g|)vim::default' menu true
> } > This didn't work immediately.  ':completion:*:(g|)vim:*' did, though.
> } 
> } Yep. The default tag is tested at the very beginning, when almost
> } nothing of the context is set up.
> 
> In that case the discussion of `default' under doc for the `menu' style
> is, at least, misleading.  Shouldn't it be removed from that paragraph
> and discussed more genearally somewhere earlier?  (Perhaps lengthen the
> explanation under "Standard Tags" a bit?)

I've put it at the default tag and at the beginning of the styles
section.


Bye
 Sven

Index: Doc/Zsh/compsys.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/compsys.yo,v
retrieving revision 1.57
diff -u -r1.57 compsys.yo
--- Doc/Zsh/compsys.yo	2000/05/29 08:00:46	1.57
+++ Doc/Zsh/compsys.yo	2000/05/29 12:49:12
@@ -491,7 +491,8 @@
 kindex(default, completion tag)
 item(tt(default))(
 used to look up default values for various styles that may also be set 
-for tags that are used when generating matches
+for tags that are used when generating matches; note that this tag is
+used when only the var(function) field of the context name is set up
 )
 kindex(descriptions, completion tag)
 item(tt(descriptions))(
@@ -762,6 +763,15 @@
 possible values; in particular, the default value may be either on or off
 if the style is not set.
 
+Some of these styles are tested for every tag used to add possible
+matches and for the tt(default) tag (most notably tt(menu),
+tt(list-colors) and the styles controlling the completion listing like 
+tt(list-packed) and tt(last-prompt)). When tested for the tt(default)
+tag, only the var(function) field of the context will be set up, so
+the default value will normally be set like:
+
+example(zstyle ':completion:*:default' menu ...)
+
 startitem()
 kindex(accept-exact, completion style)
 item(tt(accept-exact))(
@@ -1477,7 +1487,7 @@
 item(tt(menu))(
 If this is set to true in a given context, using any of the tags defined
 for a given completion, menu completion will be used.  The tag
-`tt(default)' can be used to match any tag, but a specific tag will take
+`tt(default)' can be used to set the default value, but a specific tag will take
 precedence.  If none of the values found in this way is true but at least
 one is set to `tt(auto)' the behaviour will be as for the tt(AUTO_MENU)
 option.  Finally, if one of the values is explicitly set to false, menu

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


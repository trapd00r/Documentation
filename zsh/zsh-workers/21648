From zsh-workers-return-21648-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 17 16:52:31 2005
Return-Path: <zsh-workers-return-21648-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25978 invoked from network); 17 Aug 2005 16:52:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Aug 2005 16:52:26 -0000
Received: (qmail 36644 invoked from network); 17 Aug 2005 16:52:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2005 16:52:20 -0000
Received: (qmail 25108 invoked by alias); 17 Aug 2005 16:52:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21648
Received: (qmail 25098 invoked from network); 17 Aug 2005 16:52:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Aug 2005 16:52:16 -0000
Received: (qmail 36116 invoked from network); 17 Aug 2005 16:52:16 -0000
Received: from flock1.newmail.ru (212.48.140.157)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2005 16:52:12 -0000
Received: (qmail 621 invoked from network); 17 Aug 2005 16:44:35 -0000
Received: from unknown (HELO ?10.0.0.53?) (arvidjaar@newmail.ru@83.237.106.159)
  by smtpd.newmail.ru with SMTP; 17 Aug 2005 16:44:35 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-workers@sunsite.dk,
 acs@alumni.princeton.edu
Subject: Re: SunOS build failures for the last 2 days
Date: Wed, 17 Aug 2005 20:51:53 +0400
User-Agent: KMail/1.8.2
References: <20a80721050817080831aad306@mail.gmail.com>
In-Reply-To: <20a80721050817080831aad306@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart1352368.R4dcFpeIUf";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200508172051.55839.arvidjaar@newmail.ru>
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.4

--nextPart1352368.R4dcFpeIUf
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On Wednesday 17 August 2005 19:08, Vin Shelton wrote:
> "./utils.epro", line 14: warning: undefined or missing type for: c
[...]
> extern mod_import_function wchar_t*wcs_nicechar _((wint_t c));
>
> Here are the configure options I'm using:
>
> "'--prefix=3D/u/sheltonv/software/SunOS-5.8/zsh-2005-08-17'
> '--datadir=3D/u/sheltonv/software/SunOS-5.8/share' '--enable-zsh-mem'
> '--enable-etcdir=3D/u/sheltonv/software/SunOS-5.8/etc'
> '--enable-dynamic' '--with-tcsetpgrp' '--disable-nls'
> '--disable-locale' 'CC=3Dcc' 'CFLAGS=3D-fast -xarch=3Dv8plusa -xchip=3Dul=
tra2i
> -xcache=3D16/32/1:512/64/1'"
>

Now zsh defaults to UNICODE support if available; does not Solaris 8 have i=
t?

Anyway this patch plays it safe; does it help? (Offhand - configure.ac is=20
using obsolete AC_CHECK_TYPE invocation)

Index: configure.ac
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /cvsroot/zsh/zsh/configure.ac,v
retrieving revision 1.38
diff -u -p -r1.38 configure.ac
=2D-- configure.ac        16 Aug 2005 23:16:27 -0000      1.38
+++ configure.ac        17 Aug 2005 16:50:32 -0000
@@ -847,6 +847,7 @@ AC_CHECK_TYPE(ino_t, unsigned long)
 AC_TYPE_MODE_T
 AC_TYPE_UID_T
 AC_TYPE_SIZE_T
+AC_CHECK_TYPES([wint_t])

 dnl ------------------------------------------------
 dnl Check size of long and try to find a 64-bit type
@@ -2079,6 +2080,7 @@ AC_ARG_ENABLE(multibyte,
 int main() {
 #if defined(HAVE_WCHAR_H) && defined(HAVE_WCTOMB) \
  && defined(HAVE_MBRTOWC) && defined(HAVE_WCRTOMB) \
+ && defined(HAVE_WINT_T) \
  && defined (__STDC_ISO_10646__)
     return 0;
 #else


--nextPart1352368.R4dcFpeIUf
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQBDA2srR6LMutpd94wRAqjQAJ92KYQVF5baF7caSKAaobshWYrdnwCeNbWA
3Q/0LNKNO2lhPGCqNmv+FHg=
=xNSJ
-----END PGP SIGNATURE-----

--nextPart1352368.R4dcFpeIUf--


From zsh-workers-request@euclid.skiles.gatech.edu  Tue Jul 30 03:30:18 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id DAA01673 for <mason@primenet.com.au>; Tue, 30 Jul 1996 03:30:16 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id NAA20990; Mon, 29 Jul 1996 13:22:06 -0400 (EDT)
Resent-Date: Mon, 29 Jul 1996 13:22:06 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199607291721.TAA04932@bolyai.cs.elte.hu>
Subject: Re: New zed and refresh bug
To: mason@werple.net.au (Geoff Wing)
Date: Mon, 29 Jul 1996 19:21:17 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199607291511.PAA07145@werple.net.au> from Geoff Wing at "Jul 30, 96 01:11:23 am"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"8WJbF1.0.u75.-CF_n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1825
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> Zoltan wrote:
> :It demonstrates a zle bug.  Just load this zed function, unset the BAUD
> :parameter (to get half-screen scrolls in zed), invoke zed -f zed, and use
> :the up-arrow to move to the top of the function.  On a 80x25 Linux console
> :with ncurses a bogous `if [[ -f $dir/$1 ]' appears on the 5th screen line
> :after the second half-screen scroll.
> 
> This doesn't happen on any system I'm on.
> Can anyone else reproduce this on any other systems?  I don't have access
> to linux at the moment (a guy at work has got it but his computer's dead at
> the moment :-(

I can reproduce it in an xterm on Solaris 2.4, IBM AIX 3.2 and DEC OFS/1
V2.0, SunOS 4.1.2 and Ultrix 4.2.

I can not reproduce it on Linux with termcap (although I use a quite old
/etc/termcap) but with ncurses it is reproducible either in an xterm or on
the console.

The new contents of the line gets inserted before the bogous line so the
correct if ... which was on the screen before the scroll is shifted right
as the new contents of the line is printed.  Perhaps it happens only if the
terminal has some insert capability (I'm just guessing).

Zoltan


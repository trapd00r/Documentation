From zsh-workers-return-27797-mason-zsh=primenet.com.au@zsh.org Mon Mar 15 20:55:27 2010
Return-Path: <zsh-workers-return-27797-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8257 invoked by alias); 15 Mar 2010 20:55:27 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27797
Received: (qmail 11230 invoked from network); 15 Mar 2010 20:55:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.219.209 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=feevMxrysTnmngBsM/PfVv/JEpgYLINy99zciILB5dY=;
        b=vW2i0Dx4DZbbB7ZHP8Jnhc6X/mgDx3y+1pK1GXCgwRwM1jMMTIe6x06xEkzrjAsCYV
         8StgrYxa8wRFlBsD/Z8kdaVAw7Igyw1xoVkIHSwYBmIFAenlyDS45BRAkDIdS5qHwOQ+
         CnoKTqR4pWWL92UDiiaj3onF8El466l9rpuEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=V3gxcmgIEjjrqKgrFqYqoDafmxf7StiAkjlNGZAtGTic4ZDwWnDhphiamqceHNyB3a
         CgSy+7f8mAGZUeHnaVB34nU4aDb4s0GZ9O8OSJAzT2GUvjKVniNo5uuVSirXZYJtdZPw
         2LxHekwDB3x4siMjH9l9sqiR1PLj7MZWspm14=
MIME-Version: 1.0
Date: Mon, 15 Mar 2010 21:55:10 +0100
Message-ID: <237967ef1003151355w35a23b0bu2f67affbfcc4bc11@mail.gmail.com>
Subject: _expand_alias call to compadd missing a --, patch
From: Mikael Magnusson <mikachu@gmail.com>
To: zsh workers <zsh-workers@zsh.org>
Content-Type: text/plain; charset=UTF-8

alias foo=-break
foo<call _expand_alias>
_all_labels:compadd:39: bad option: -b

diff --git a/Completion/Base/Completer/_expand_alias
b/Completion/Base/Completer/_expand_alias
index aa42faf..24a367d 100644
--- a/Completion/Base/Completer/_expand_alias
+++ b/Completion/Base/Completer/_expand_alias
@@ -60,7 +60,7 @@ if [[ -n $tmp ]]; then
       tmp="\\$tmp"
     fi
   fi
-  $pre _wanted aliases expl alias compadd -UQ ${tmp%%[[:blank:]]##}
+  $pre _wanted aliases expl alias compadd -UQ -- ${tmp%%[[:blank:]]##}
 elif (( $#pre )) && zstyle -t ":completion:${curcontext}:" complete; then
   $pre _aliases -s "$sel" -S ''
 else


-- 
Mikael Magnusson


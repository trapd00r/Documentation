From zsh-users-return-3691-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 19 20:48:06 2001
Return-Path: <zsh-users-return-3691-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14110 invoked from network); 19 Mar 2001 20:48:05 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Mar 2001 20:48:05 -0000
Received: (qmail 4185 invoked by alias); 19 Mar 2001 20:47:46 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3691
Received: (qmail 4172 invoked from network); 19 Mar 2001 20:47:45 -0000
Message-Id: <200103192047.VAA15309@ludwigV.sources.org>
X-Mailer: exmh version 2.1.1 10/15/1999 (debian)
From: Stephane Bortzmeyer <stephane@sources.org>
To: Jeff Shipman <shippy@nmt.edu>
Cc: zsh-users@sunsite.dk
Subject: Re: completion tricks 
In-reply-to: <Pine.LNX.4.31.0103191314040.4850-100000@neptune> 
     (Jeff Shipman <shippy@nmt.edu>'s message of 
     Mon, 19 Mar 2001 13:14:54 MST)
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0
Content-Transfer-Encoding: 8bit
Date: Mon, 19 Mar 2001 21:47:31 +0100
Sender: stephane@sources.org

On Monday 19 March 2001, at 13 h 14, the keyboard of Jeff Shipman 
<shippy@nmt.edu> wrote:

> 2) Using ssh, rlogin, telnet, etc will complete
>    different hosts on my network.

Did you notice the 'ssh_completion' file in zsh's distribution?

Anyway, here is how I do it:

# Construct an array of common hosts
etchosts=( ${(s: :)${(ps:\t:)${${(f)"$(</etc/hosts)"}%%\#*}##[:blank:]#[^[:blan
k:]]#}} )
sshhosts=(${${${${(f)"$(<$HOME/.ssh/known_hosts)"}:#[^0-9]*}%%\ *}%%,*})
hosts=($etchosts $sshhosts)

# SSH (scp is much more difficult)
compctl -k hosts \
	-x "c[-1,-l]" -u \
	- "c[-1,-i]" -f \
	- "c[-1,-e]" -k "(~ none)" \
	- "c[-1,-c]" -k "(idea des 3des tss arcfour none)" \
	- "c[-1,-p]" -k ports \
	- "c[-1,-L] c[-1,-R] c[-1,-o]" -k "()" \
	-- ssh slogin

# various network programs
compctl -x 'N[-1,@]' -k hosts - 's[]' -u -qS '@' -- finger
compctl -k hosts traceroute mtr ping 




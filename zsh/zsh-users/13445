From zsh-users-return-13445-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 11 02:14:01 2008
Return-Path: <zsh-users-return-13445-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17952 invoked from network); 11 Nov 2008 02:13:57 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Nov 2008 02:13:57 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 44412 invoked from network); 11 Nov 2008 02:13:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Nov 2008 02:13:43 -0000
Received: (qmail 27256 invoked by alias); 11 Nov 2008 02:13:25 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13445
Received: (qmail 27237 invoked from network); 11 Nov 2008 02:13:24 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Nov 2008 02:13:24 -0000
Received: from webmail.icp-qv1-irony-out1.iinet.net.au (webmail.icp-qv1-irony-out1.iinet.net.au [203.59.1.146])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 4A64380308BE
	for <zsh-users@sunsite.dk>; Tue, 11 Nov 2008 03:13:19 +0100 (CET)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: As0AAMp4GEkKAikp/2dsb2JhbAAIkw24PYNY
X-IronPort-AV: E=Sophos;i="4.33,578,1220198400"; 
   d="scan'208";a="415097851"
Received: from unknown (HELO iinet-qmail-sat.iinet.net.au) ([10.2.41.41])
  by webmail.icp-qv1-irony-out1.iinet.net.au with SMTP; 11 Nov 2008 11:13:17 +0900
Received: (qmail 11985 invoked from network); 11 Nov 2008 02:13:17 -0000
Received: from unknown (HELO localhost.localdomain) (127.0.0.1)
  by mail.iinet.net.au with SMTP; 11 Nov 2008 02:13:17 -0000
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-15"
MIME-Version: 1.0
From:   <lord_fleg@iinet.net.au>
To: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
Subject: Re: xterm meta and bindkey
Reply-To: lord_fleg@iinet.net.au
X-Origin: 121.44.233.233
Date: Tue, 11 Nov 2008 11:13:17 +0900
Cc: zsh-users@sunsite.dk
Message-Id: <46227.1226369597@iinet.net.au>
X-Mailer: AtMail 4.51 - 121.44.233.233 - lord_fleg@iinet.net.au
X-Virus-Scanned: ClamAV 0.92.1/8605/Tue Nov 11 02:11:29 2008 on bifrost
X-Virus-Status: Clean

hi Stephane,
thanks for the reply.
short answer...downloading the latest zsh made it work :)  d'oh! what a new=
bie
mistake!

longer answer...

1/ yes you where correct, my setup was using LANG=3Den_US.UTF-8
   however when i set it to just en_US it still didnt work.

2/ when i upgraded to the latest version i had to change my bindkey to...
   bindkey -s '=E4' 'dirs -v'
   to get it to work, ie bindkey -s '\M-d' 'dirs -v' does not work, but tha=
t may=20
   just be my lack of understanding of what multibyte support means, and an=
yway i
dont
   really care because i now have the functionality i want.

thanks again,
fleg.

On Mon Nov 10 21:46 , Stephane Chazelas  sent:

>On Mon, Nov 10, 2008 at 05:06:58PM +0900, lord_fleg@iinet.net.au wrote:
>[...]
>> bindkey '\C-g' describe-key-briefly
>>=20
>> then hit CTRL-g and then when it prompts me hit META-d
>> the response is "\M-C" is capitalize-word.
>>=20
>> if i hit CTRL-g and META- i get the same (\M-C) response.
>>=20
>> if i type 'read' and META-d i get the 8 bit character i expect echo'd.
>>=20
>> if i type 'bash' and hit META-d i get the 8 bit character i expect echo'=
d.
>>=20
>> i'm confused.  anyone got any ideas?
>[...]
>
>What do you get if you run
>
>od -tx1
>
>then type  and then=20
>
>What do the "locale" and "locale charmap" commands output for
>you?
>
>What do you get if you type:  after having run
>strace -p $$ &
>
>My suspicion is that upon , your terminal doesn't send
>the  byte (d | 0x80 =3D=3D 0xc4) but the utf8 sequence that
>corresponds to the unicode character .
>
>~$ echo -n '\xc4' | recode ..u8 | od -tx1
>0000000 c3 84
>0000002
>
>And c3 being the  byte.
>
>I wouldn't use Meta this way. I would tell xterm to send x
>upon  instead of sending the character  (or its
>utf8 representation).  is the =E9 character in the
>iso8859-1 charset but in utf8 does not correspond to any valid
>character by itself which is probably why xterm chose to send
>the utf8 sequence.
>
>I suspect newer versions of zsh with multibyte charset support
>would decode that c3 84 correctly into the  character as
>long as you tell it that your terminal talks utf8 (by making
>sure locale charmap returns utf8). So it may work as you expect
>in newer zsh versions.
>
>--=20
>St=E9phane
>)



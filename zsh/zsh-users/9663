From zsh-users-return-9663-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 07 11:15:31 2005
Return-Path: <zsh-users-return-9663-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27249 invoked from network); 7 Nov 2005 11:15:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Nov 2005 11:15:29 -0000
Received: (qmail 18367 invoked from network); 7 Nov 2005 11:15:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Nov 2005 11:15:21 -0000
Received: (qmail 24710 invoked by alias); 7 Nov 2005 11:15:14 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9663
Received: (qmail 24701 invoked from network); 7 Nov 2005 11:15:14 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Nov 2005 11:15:14 -0000
Received: (qmail 17408 invoked from network); 7 Nov 2005 11:15:14 -0000
Received: from cluster-d.mailcontrol.com (HELO rly25d.srv.mailcontrol.com) (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 7 Nov 2005 11:15:13 -0000
Received: from exchange03.csr.com (mailhost1.csr.com [81.105.217.43])
	by rly25d.srv.mailcontrol.com (MailControl) with ESMTP id jA7BFBjD012891
	for <zsh-users@sunsite.dk>; Mon, 7 Nov 2005 11:15:11 GMT
Received: from csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 7 Nov 2005 11:17:40 +0000
To: zsh-users@sunsite.dk
Subject: Re: completion with a PATH assignment 
In-reply-to: <20051107110017.GF2774@hpfsc.de> 
References: <tkrat.082d2d140cff4d6c@igpm.rwth-aachen.de> <EXCHANGE03dCRVFqBDf00009f90@exchange03.csr.com> <20051107103925.GE2774@hpfsc.de> <EXCHANGE03tPlcoQsIl00009fac@exchange03.csr.com> <20051107110017.GF2774@hpfsc.de>
Comments: In-reply-to Sebastian Stein <seb_stein@gmx.de>
   message dated "Mon, 07 Nov 2005 12:00:17 +0100."
Date: Mon, 07 Nov 2005 11:15:10 +0000
From: Peter Stephenson <pws@csr.com>
Message-ID: <EXCHANGE03MMfJokdD500009fb5@exchange03.csr.com>
X-OriginalArrivalTime: 07 Nov 2005 11:17:40.0429 (UTC) FILETIME=[DDB217D0:01C5E38C]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-05-40-01 (www.mailcontrol.com) on 10.68.0.135
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Sebastian Stein wrote:
> So this means that even thus just the completion of a filename is needed,
> this must especially coded for each supported command like svn?

Yes, essentially:  the context has to invoke _files, which doesn't
involve much coding but must be done explicitly.

> Shouldn't there be some kind of fallback? I mean if zsh is not able to
> expand it,  maybe it should just try filenames in the current
> directory instead?

In principle it should be able to expand it; it's a bug that it can't.

It's easy to get plain old file completion bound to a separate key.
Given that the contextual completion is already complicated, this tends
to make more sense than yet more guessing.  For example, if you bind
_bash_completions to Esc / you get file name completion.  Or you can
create a widget:

  zstyle ':completion:plain-old-file-completion:*' completer _files
  zle -C plain-old-file-completion complete-word _generic
  bindkey '^xf' plain-old-file-completion

Or if you really always want file completion as a fallback, you can add
_files to the default completer list.  For example,

  zstyle ':completion:*' completer _oldlist _expand _complete _ignored \
  _approximate _files

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com


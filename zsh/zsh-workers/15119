From zsh-workers-return-15119-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 27 12:13:32 2001
Return-Path: <zsh-workers-return-15119-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1506 invoked from network); 27 Jun 2001 12:13:31 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Jun 2001 12:13:31 -0000
Received: (qmail 17302 invoked by alias); 27 Jun 2001 12:12:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15119
Received: (qmail 17276 invoked from network); 27 Jun 2001 12:12:41 -0000
From: Tomi Vainio - Sun Finland - <Tomi.Vainio@Sun.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15161.52699.177761.360508@gargle.gargle.HOWL>
Date: Wed, 27 Jun 2001 15:13:15 +0300
To: zsh-workers@sunsite.dk
Subject: Zsh 4.0.2 + 64bit Solaris 8 Forte 6.1 compiler
X-Mailer: VM 6.92 under 21.4 (patch 3) "Academic Rigor" XEmacs Lucid
Reply-To: Tomi.Vainio@Sun.COM

Hi,

I have couple problems with zsh compile process.  I don't know how to
give correct parameters to configure process.  Compile will fail
because ./Makefile line 124 (LDFLAGS= ) is empty and it should contain
-xarch=v9.  I have tried to use these methods for configure but no
success yet.
CC=cc CFLAGS='-xO3 -xarch=v9' LDFLAGS='-xO3 -xarch=v9' ./configure
CC=cc ./configure --enable-cflags='-xO3 -xarch=v9' --enable-ldflags='-xO3 -xarch=v9'

`stamp-modobjs' is up to date.
rm -f libzsh-4.0.2.so
cc   -G -o libzsh-4.0.2.so  `cat stamp-modobjs` -lsocket -ldl -lnsl -lcurses -lm  -lc
ld: fatal: file builtin.o: wrong ELF class: ELFCLASS64
ld: fatal: File processing errors. No output written to libzsh-4.0.2.so

The second problem is with shared code.  ./configure line 6833
${DLCFLAGS=-Kpic} doesn't work and you should use -KPIC

`stamp-modobjs' is up to date.
rm -f libzsh-4.0.2.so
cc -xO3 -xarch=v9  -G -o libzsh-4.0.2.so  `cat stamp-modobjs` -lsocket -ldl -lnsl -lcurses -lm  -lc
ld: fatal: too many symbols require `small' PIC references:
        have 1552, maximum 1024 -- recompile some modules -K PIC.

  Tomppa
-- 
SUN Microsystems Oy PL 112, Lars Sonckin kaari 12, 02601 ESPOO, Finland
Tomi Vainio (System Support Engineer)     +358 9 52556300 hotline
email: Tomi.Vainio@Sun.COM                +358 9 52556252 fax


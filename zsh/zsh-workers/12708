From zsh-workers-return-12708-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Aug 27 16:52:39 2000
Return-Path: <zsh-workers-return-12708-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5134 invoked from network); 27 Aug 2000 16:52:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Aug 2000 16:52:38 -0000
Received: (qmail 16775 invoked by alias); 27 Aug 2000 16:52:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12708
Received: (qmail 16768 invoked from network); 27 Aug 2000 16:52:08 -0000
Sender: opk
Message-ID: <39A938C7.B39497EE@u.genie.co.uk>
Date: Sun, 27 Aug 2000 16:50:31 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.73 [en] (X11; I; Linux 2.2.16 i586)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: PATCH: another AIX specific completion function
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I just realised that I had never added the AIX specific
_logical_volumes completion despite using it in _lslv so here it is.

I've now finished on my job where I used AIX so I won't be fixing any
more of the AIX specific problems. It's actually a little while now
since I've had to fix the dependencies for AIX so I suspect that Andrej
has been able to pick up missing mod_exports in the process of doing
all his good work on dynamic loading in cygwin. If not, it's fairly
easy to work out what to do from the error messages given by the AIX
C compiler if anyone comes up against them.

I'll actually be away altogether from next week because I'm taking
several months off to go travelling. I'll have a little bit of time
this week so if there was any little things I said I'd do, please
remind me.

Oliver

Index: Completion/AIX/_logical_volumes
===================================================================
RCS file: _logical_volumes
diff -N _logical_volumes
--- /dev/null   Tue May  5 13:32:27 1998
+++ _logical_volumes    Sun Aug 27 09:48:39 2000
@@ -0,0 +1,14 @@
+#autoload
+
+local expl list names disp
+
+list=( $(lsvg -l $(lsvg)|sed  -e '2d'|awk '/[^:]* / {if ( $7 != "N/A" ) print $1 ":" $7; else print $1}' ) )
+names=(${list%%:*})
+if zstyle -T ":completion:${curcontext}" verbose; then
+  zformat -a list ' -- ' $list
+  disp=(-d list)
+else
+  disp=()
+fi
+_wanted logicalvolumes expl 'logical volumes' \
+    compadd "$disp[@]" "$@" - "$names[@]"


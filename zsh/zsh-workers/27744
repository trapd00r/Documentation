From zsh-workers-return-27744-mason-zsh=primenet.com.au@zsh.org Mon Feb 22 00:32:02 2010
Return-Path: <zsh-workers-return-27744-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21537 invoked by alias); 22 Feb 2010 00:32:01 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27744
Received: (qmail 19290 invoked from network); 22 Feb 2010 00:31:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at debian.org does not designate permitted sender hosts)
Date: Mon, 22 Feb 2010 00:31:53 +0000
From: Clint Adams <schizo@debian.org>
To: Cyril Brulebois <kibi@debian.org>, 570878@bugs.debian.org
Cc: zsh-workers@zsh.org
Subject: Re: Bug#570878: zsh: Please add completion for pbuilder/cowbuilder
Message-ID: <20100222003153.GA2505@scru.org>
References: <20100222001206.7382.13881.reportbug@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20100222001206.7382.13881.reportbug@localhost.localdomain>
User-Agent: Mutt/1.5.18 (2008-05-17)

On Mon, Feb 22, 2010 at 01:12:06AM +0100, Cyril Brulebois wrote:
> it'd be nice to have some completion support for pbuilder/cowbuilder
> in zsh. At the very least, --build/--update/--basepath come to mind
> for everyday use.

This is incomplete.  I don't ever use cowbuilder so I'm not yet familiar
with its differences, but I'll take a look later on this week.

Index: Completion/Debian/Command/_pbuilder
===================================================================
RCS file: Completion/Debian/Command/_pbuilder
diff -N Completion/Debian/Command/_pbuilder
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ Completion/Debian/Command/_pbuilder	22 Feb 2010 00:29:29 -0000
@@ -0,0 +1,32 @@
+#compdef pbuilder
+
+local expl
+
+if (( CURRENT == 2 )); then
+  _wanted tag expl 'pbuilder command' \
+    compadd create update build execute clean login dumpconfig debuild \
+  	--create --update --build --execute --clean --login --dumpconfig --debuild
+else
+  compset -n 1
+  _arguments \
+    '--basetgz:location:_files -g "*.tgz"' \
+    '--buildplace:location:_files -/' \
+    '--buildresult:location:_files -/' \
+    '--mirror:URL:_urls' \
+    '--othermirror:URL:_urls' \
+    '--distribution:suite:(breezy dapper edgy etch feisty gutsy hardy hoary intrepid jaunty karmic lenny lucid potato sarge sid squeeze warty woody' \
+    '--architecture:architecture:(alpha amd64 armel hppa hurd-i386 i386 ia64 m68k mips mipsel powerpc s390 sparc)' \
+    '--components:component:(main contrib non-free)' \
+    '--override-config' \
+    '--hookdir:location:_files -/' \
+    '--debbuildopts:dpkg-buildpackage options:' \
+    '--logfile:log file:_files' \
+    '--binary-arch' \
+    '--bindmounts:bind mountpoints:_files -/' \
+    '--debootstrapopts:debootstrap options:' \
+    '--debootstrap:debootstrap implementation:(debootstrap cdebootstrap)' \
+    '--save-after-login' \
+    '--save-after-exec' \
+    '--autocleanaptcache' \
+    '*:source package:_files -g "*.dsc"'
+fi


From zsh-workers-return-10793-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Apr 17 12:11:20 2000
Return-Path: <zsh-workers-return-10793-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9292 invoked from network); 17 Apr 2000 12:11:19 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Apr 2000 12:11:19 -0000
Received: (qmail 13374 invoked by alias); 17 Apr 2000 12:11:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10793
Received: (qmail 13365 invoked from network); 17 Apr 2000 12:11:10 -0000
Date: Mon, 17 Apr 2000 14:11:07 +0200 (MET DST)
Message-Id: <200004171211.OAA15287@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Mon, 17 Apr 2000 12:47:09 +0100
Subject: Re: PATCH: scrolling completion lists (was: Re: Questions)


Peter Stephenson wrote:

> > I had been thinking about doing this, but the patch below uses a
> > simple statusline below the menu when it is too big to fit on the
> > screen and the $SELECTSTATUS parameter is set. That may contain some
> > %-escaped (%l - line information, %m - match information, %p -
> > Top/Bottom/%).
> 
> This is fine, but it should probably have some default value, which could
> be set in the shell functions if that's possible, e.g.
>   SELECTSTATUS='Scrolling active: current selection at %p'
> although I've put a %B at the front.

As you have seen I haven't added styles for any of this yet, but I'm
planning to do so. Maybe just the obvious `select-status' (or should
that be in the menu style with `status=...'? harder to parse...),
`list-status' (`list-prompt' might be a better name, for the
parameter, too), and `select-scroll' (or maybe put that into the
menu-style, too). I'm not yet decided if we should support setting
this per-tag or only for the default tag. The former is probably more
consistent (and silly).
Default values could then be defined as defaults for the style(s),
that's probably what you suggested.

> At the moment it doesn't alter the default LISTMAX.  That's tricky, since
> LISTMAX is set in params.c.  But it would be preferable to have that
> reflect the fact that scrolling is going to be used instead of limiting the
> display.  More precisely, it would be preferable for LISTMAX not to be set
> if it's going to be used, and to be used if it's explicitly set, I suppose.
> One problem is that until zsh/complist is loaded, LISTMAX *will* be used.
> Maybe that means we just document the fact it will be ignored when using
> complist.

Hm, actually complist uses it as usual, it only adds a new
interpretation to the value `scroll'. And that is documented. But yes, 
maybe we should explicitly point out that in that case the completion
code won't ask if one wants to see the list.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-5636-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 04 09:56:15 1999
Return-Path: <zsh-workers-return-5636-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21318 invoked from network); 4 Mar 1999 09:56:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Mar 1999 09:56:14 -0000
Received: (qmail 14700 invoked by alias); 4 Mar 1999 09:55:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5636
Received: (qmail 14595 invoked from network); 4 Mar 1999 09:53:49 -0000
Message-Id: <9903040936.AA35230@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: Weird bug with approximate completion 
In-Reply-To: "Sven Wischnowsky"'s message of "Wed, 03 Mar 1999 17:19:58 NFT."
             <199903031619.RAA01495@beta.informatik.hu-berlin.de> 
Date: Thu, 04 Mar 1999 10:35:05 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
>   sticking it after the first slash will make the completion code use
>   `/users/foo/(#a...)bin/comp' as the expanded prefix and make it
>   search in that directory -- which doesn't exists, so it will
>   generate no matches; should we have some special casing in the
>   C-code or in the shell code here?

I don't really understand this since I don't know at what point it hasn't
been treated as a pattern when it should have been.

> I couldn't reproduce your bug, though (and for me the line you quoted
> is line number 6239).

It's now moved to line 6238.  I've fixed the symptoms by turning the
ncalloc() into a zhalloc(), which I shouldn't have to do, but can't hurt
since the memory is never freed so it should be using zhalloc() anyway.
This suggests something fairly sinister is going on.  ncalloc() appears to
be pointing to the right thing, but the wrong argument appears when it's
called.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


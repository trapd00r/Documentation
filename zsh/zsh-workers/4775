From zsh-workers-request@math.gatech.edu Mon Dec 14 16:50:28 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22504 invoked from network); 14 Dec 1998 16:50:26 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 14 Dec 1998 16:50:26 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id LAA09013;
	Mon, 14 Dec 1998 11:48:48 -0500 (EST)
Resent-Date: Mon, 14 Dec 1998 11:48:48 -0500 (EST)
Message-Id: <9812141632.AA35407@ibmth.df.unipi.it>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: zerr() and errflag (Re: Latest patched development version) 
In-Reply-To: ""Bart Schaefer""'s message of "Mon, 14 Dec 1998 07:56:13 NFT."
             <981214075613.ZM21656@candle.brasslantern.com> 
Date: Mon, 14 Dec 1998 17:32:22 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"JbGaL1.0.mC2.m5KTs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4775
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

"Bart Schaefer" wrote:
> I've noticed a couple of other places in the code where zerr() is
> called and then errflag is explicitly set.  This makes me think that
> either (a) there is an undesired side effect, or (b) everybody else
> who has noticed errflag bugs has been worried about (a) and therefore
> fixed errflag in the caller.

Seems to be mainly in params.c, so it's possible it's just due to
someone once getting the wrong end of the stick.

> Personally, I think it was a bad idea for zerr() to have the side-
> effect of setting errflag in the first place.

Hence the distinction between zwarnnam() and zerrnam(), but there's no
zwarn(), mainly because it required too much new code and my seratonin
level wasn't high enough at the time, or something.  With the complete
set of four functions I think it's OK to have zerr() set errflag.  One
day I may get so fed up with potentials between adjoint sources in
SU(2) lattice gauge theory that I look at all the errflags.

> In any case, if zerr() needs Sven's fix, then so does zerrnam() a few
> lines later.

Maybe I just have to bite the bullet and try out both replacements.
It's too hard to tell what happens otherwise.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


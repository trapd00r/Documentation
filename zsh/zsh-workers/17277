From zsh-workers-return-17277-mason-zsh=primenet.com.au@sunsite.dk Mon Jun 03 15:10:54 2002
Return-Path: <zsh-workers-return-17277-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 850 invoked from network); 3 Jun 2002 15:10:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 3 Jun 2002 15:10:53 -0000
Received: (qmail 2618 invoked by alias); 3 Jun 2002 15:10:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17277
Received: (qmail 2605 invoked from network); 3 Jun 2002 15:10:36 -0000
From: <dwolfe@gforcetech.com>
Subject: Re: Problems building zsh on QNX 6.1
To: zsh-workers@sunsite.dk
X-Mailer: CommuniGate Pro Web Mailer v.3.5.6
Date: Mon, 03 Jun 2002 08:10:06 -0700
Message-ID: <web-21519720@mx.radiant.net>
In-Reply-To: <6134254DE87BD411908B00A0C99B044F02E89B57@mowd019a.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: 8bit

> > Hello...  I wanted to report some trouble I had building zsh 4.0.2
> > for QNX 6.1.

Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru> wrote:

> could you please try with 4.0.4 just to be sure it still has the same
> problems there?
>
>
> -andrej


Oh, I'm sorry--I thought I downloaded the latest version.  (The only
version available at the foad.org mirror was zsh-4.0.2.)


The 'configure' script for zsh-4.0.4 works fine under QNX 6.1, but I
still get the following error when I make:

make[3]: Entering directory `/usr/local/src/zsh-4.0.4/Src/Builtins'
gawk -f ./rlimits.awk /usr/include/sys/resource.h /dev/null > rlimits.h
gcc -c -I.  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes
-O2 -o rlimits.o rlimits.c
rlimits.c: In function `bin_ulimit':
rlimits.c:569: duplicate case value
rlimits.c:563: this is the first entry for that value
make[3]: *** [rlimits.o] Error 1
make[3]: Leaving directory `/usr/local/src/zsh-4.0.4/Src/Builtins'
make[2]: *** [modobjs] Error 1
make[2]: Leaving directory `/usr/local/src/zsh-4.0.4/Src'
make[1]: *** [modobjs] Error 2
make[1]: Leaving directory `/usr/local/src/zsh-4.0.4/Src'
make: *** [all] Error 1

The following snippet of the output from 'gcc -E rlimit.c':

    if (strcmp(*argv, "unlimited")) {

        rlim_t limit;
        limit = zstrtorlimt(*argv, 0 , 10);

        switch (res) {
        case 1 :
        case 4 :
        limit *= 512;
        break;
        case 2 :
        case 3 :
        case 6  :
        case 7 :
        case 6  :
        limit *= 1024;
        break;
        }

reveals that RLIMIT_RSS and RLIMIT_VMEM are both expanding to '6'.


Please let me know if I can be of any help resolving this...

- Dave


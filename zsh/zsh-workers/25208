From zsh-workers-return-25208-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 18 10:38:31 2008
Return-Path: <zsh-workers-return-25208-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6671 invoked from network); 18 Jun 2008 10:38:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Jun 2008 10:38:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 1893 invoked from network); 18 Jun 2008 10:38:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Jun 2008 10:38:21 -0000
Received: (qmail 12295 invoked by alias); 18 Jun 2008 10:38:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25208
Received: (qmail 12277 invoked from network); 18 Jun 2008 10:38:16 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 Jun 2008 10:38:16 -0000
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 658848084FA0
	for <zsh-workers@sunsite.dk>; Wed, 18 Jun 2008 12:38:09 +0200 (CEST)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id F134E235A396; Wed, 18 Jun 2008 12:38:08 +0200 (CEST)
Date: Wed, 18 Jun 2008 12:38:08 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk
Cc: Mikael Magnusson <mikachu@gmail.com>
Subject: Re: environment settings
Message-ID: <20080618103808.GB10734@prunille.vinc17.org>
Mail-Followup-To: zsh-workers@sunsite.dk,
	Mikael Magnusson <mikachu@gmail.com>
References: <20080617104126.GC10734@prunille.vinc17.org> <20080617125834.GI5016@sc.homeunix.net> <20080617131154.GM10734@prunille.vinc17.org> <20080617132611.GL5016@sc.homeunix.net> <237967ef0806170628m56b80d3anaf252e68ad6c497d@mail.gmail.com> <20080617142557.GO5016@sc.homeunix.net> <20080617155429.GT10734@prunille.vinc17.org> <20080617160009.GS5016@sc.homeunix.net> <20080617195007.GV10734@prunille.vinc17.org> <20080617203229.GU5016@sc.homeunix.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20080617203229.GU5016@sc.homeunix.net>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.18-vl-r22984 (2008-06-11)
X-Virus-Scanned: ClamAV 0.92.1/7498/Wed Jun 18 04:08:00 2008 on bifrost
X-Virus-Status: Clean

On 2008-06-17 21:32:29 +0100, Stephane Chazelas wrote:
> And while we're at it, it can also do an "unfunction echo" and
> "unalias echo" because someone might have redefined "echo" in
> the ~/.zshenv to behave POSIXly.

If the script uses zsh features of echo, yes. Now, in practice, if
a user writes a zsh script for himself, he knows what he has put in
his .zshenv, so that he should know what he needs to undefine in his
scripts (most often, there's nothing to do). Those who want to write
portable scripts shouldn't write zsh scripts anyway (BTW, even Debian
goes back from bash to POSIX sh). So, in short, there's no practical
problem.

> Let's be serious please. Or let's do as for csh, where one must
> add the -f to the shebang line to avoid this kind of problem.

Well, concerning csh, the -f is necessary just because users do nasty
things in their .cshrc (but csh is also at fault by not have something
like .cshenv where users can put *minimal* things). Anyway csh is
incompatible with everything else, has bugs and is no longer standard.
One should not write csh scripts any longer.

> ~/.zshenv can be a useful tool but it must be used with care. 

Yes, it must be used with care, but this is also true for other
config files.

Also, bash is really annoying by not sourcing some rc file:

brocoli:~> which tps
/home/vlefevre/bin/tps

(I install my own utilities, written by myself, in my home directory.)

brocoli:~> ssh -t doublejack tps
Connected to doublejack (from 140.77.14.28)
DISPLAY: localhost:11.0
bash: tps: command not found
Connection to doublejack closed.

Fortunately this has been fixed in Debian.

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


From zsh-workers-return-6865-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jun 26 21:26:10 1999
Return-Path: <zsh-workers-return-6865-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11678 invoked from network); 26 Jun 1999 21:26:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jun 1999 21:26:08 -0000
Received: (qmail 9198 invoked by alias); 26 Jun 1999 15:58:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6865
Received: (qmail 9191 invoked from network); 26 Jun 1999 15:58:19 -0000
Message-Id: <199906261558.RAA20918@hydra.ifh.de>
X-Authentication-Warning: hydra.ifh.de: pws owned process doing -bs
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: pws-24
Date: Sat, 26 Jun 1999 17:58:16 +0200
From: Peter Stephenson <pws@ifh.de>

The mailer has decided to defer my mail again.

http://www.ifh.de/~pws/computing
    28 bytes zsh-3.1.5-pws-24.doc.tar.bz2.bin -> zsh-3.1.5-pws-24.doc.tar.bz2
    24 bytes zsh-3.1.5-pws-24.tar.bz2.bin -> zsh-3.1.5-pws-24.tar.bz2
434603 bytes zsh-3.1.5-pws-24.doc.tar.gz
950658 bytes zsh-3.1.5-pws-24.tar.gz
304675 bytes zsh-3.1.5-pws-24.doc.tar.bz2
762279 bytes zsh-3.1.5-pws-24.tar.bz2

The major visible changes this week are
  - the new complist module for coloured completion listings and menu
    selection; see zshmodules.1
  - new installation method:  compinit, compdump, compinstall are all to
    be autoloaded and called as functions.  This means compinit doesn't
    know where to find completion functions if there not in fpath already.
    This will work OK for a full installation, or compinstall knows how
    to provide a directory.

intro.ms has moved to the doc package.

A patch will follow for a problem I discovered on SunOS 4.1.3_U1 with
gcc 2.7.0.

There are no major entries on my to-do list, so I hope there will be a
test version of 3.1.6 in a couple of weeks, which means I'll have to
find out how to upload a file to ftp.zsh.org.


1999-06-25  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: 6857: Completion/Core/compinit,
	  Completion/Core/compinstall, Doc/Zsh/compsys.yo: compinit and
	  compinstall are now functions which unfunction and autoload
	  themselves.  _compdir is used by compinstall to record where
	  it found the completion directories.  compinit is now otherwise
	  stuck with fpath.

	* pws: 6851, 6853: typeset -g doesn't locallize parameters; bug
	  that unset parameters were recreated global instead of at
	  some higher local level; handle PM_AUTOLOAD consistent with other
	  flags.

	* Sven: 6850: Src/init.c: always generate a new pgrp for the
	  shell, since the parent (e.g. xterm) may not have done that
	  and zsh now runs programs in its own pgrp.

	* Sven: 6848: Src/exec.c: don't suspend if the shell is the
	  only thing to suspend (or something like that).

	* Sven: 6841: Src/loop.c: %_ in else branches for PS4

1999-06-24  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: 6834: Src/glob.c, Src/hashtable.c: dyncat() changed always
	  to use heap memory (as it erroneously claimed); hashtable element
	  tablename (used for debugging) freed.

	* Bart: 6830: Src/params.c: don't create the hashtable for an
	  assoc array on assignment unless there is something to put in it.

	* Sven: 6825: Src/Zle_tricky.c: make sure path prefix and suffix
	  are quoted in filename completion; recalculate length of match
	  string.

	* Sven: 6824: Src/exec.c, Src/signals.c: functions got deleted
	  from the process table too early for job control.

	* pws: 6823: Src/exec.c, Src/utils.c:  names and line numbers
	  of functions printed for errors during execution.

	* Sven: 6822: Src/Zle/complist.c, Src/Zle/zle_tricky.c: assorted
	  completion fixes: crash with old completion; too many spaces
	  with menu inserting; too many beeps with LISTBEEP.

	* Sven: 6819: Src/exec.c, Src/jobs.c, Src/signals.c:  Run
	  jobs inside shell constructs in the same process group as the
	  shell itself.

	* Sven: 6817: Src/Zle/comp.h, Src/Zle/complist.c,
	  Src/Zle/zle_tricky.c: Change ZLS_SELECT to SELECTMIN;
	  don't automatically switch on select widget until there are
	  $SELECTMIN choices.

1999-06-23  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: 6816: Doc/Zsh/params.yo, Src/utils.c:  ZBEEP parameter
	  gives string to output instead of beeping.

	* Sven: 6815: Src/Zle/complist.c: switch off menu-select for
	  hidden matches.

	* pws: 6814: Doc/Zsh/mod_zle.yo, Doc/Zsh/options.yo,
	  Doc/Zsh/zle.yo, Src/Zle/deltochar.c, Src/Zle/iwidgets.list,
	  Src/Zle/zle_hist.c, Src/Zle/zle_main.c, Src/Zle/zle_misc.c,
	  Src/Zle/zle_move.c, Src/Zle/zle_thingy.c, Src/Zle/zle_tricky.c,
	  Src/Zle/zle_utils.c, Src/Zle/zle_vi.c, Src/Zle/zle_word.c:
	  Zle determines whether to feep by the return status (except
	  for some inner code loops); completion widgets return 1 if
	  something failed in the hierarchy outside the widget function;
	  the -n and -N options work properly.

	* pws: 6812: Src/subst.c: ${(AA)foo=}, or anything that gives
	  a null string after the =, creates an empty assoc array.

	* pws: 6806: Completion/Core/compdump, Completion/Core/compinit,
	  Completion/Core/compinstall, Doc/Zsh/compsys.yo: compdump is now
	  a function which unfunctions itself; default dumpfile location
	  is now ${ZDOTDIR:-$HOME}/.zcompdump

	* Sven: 6807: Src/Zle/complist.c: accept-and-menu-complete
	  advances the menu-select selection too.

	* Sven: 6802: Src/Zle/complist.c: change some default colours

	* pws: 6801: Doc/Zsh/builtins.yo, Src/builtin.c: Make emulate -L
	  turn on LOCAL_TRAPS, too.

	* Sven: 6796: Src/Zle/zle_main.c, Src/Zle/zle_thingy.c,
	  Doc/Zsh/mod_zle.yo, Completion/Core/compinit: zle -la lists
	  all widgets, just the name; zle -la <NAME> tests if <NAME> is
	  defined.

	* Sven: 6793: Src/Zle/complist.c, Src/Zle/zle_keymap.c,
	  Src/Zle/zle_main.c, Doc/Zsh/mod_complist.yo: Local keymaps can be
	  defined, currently only used with menu-select.

1999-06-22  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* Sven: 6786: Src/Zle/zle_tricky.c, Doc/Zsh/compctl.yo: only use
	  a range when you are after the first pattern in it.

	* Sven: 6780: Src/Zle/complist.c: wasn't showinglist when it
	  thought it was.

	* Sven: 6778: don't delete function from job tables
	  
	 * pws: 6776: Doc/Makefile.in, Doc/Zsh/compsys.yo,
	  Doc/Zsh/mod_complist.yo:  Tweakchen for menu-select patch;
	  also (unposted) changed name collist to complist wherever it
	  occurs.

	* Sven: 6774, 6775: Src/Zle/collist.c, Src/Zle/comp.h,
	  Src/Zle/zle.h, Src/Zle/zle_main.c, Src/Zle/zle_tricky.c,
	  Doc/Zsh/compsys.yo, Doc/Zsh/mod_collist.yo,
	  Doc/Zsh/mod_compctl.yo, Doc/Zsh/mod_deltochar.yo,
	  Doc/Zsh/modules.yo, Completion/Core/_path_files:  Improvements
	  for menu-select widget; ZLS_SELECT turns menu-completion
	  into menu-selection; key bindings more natural; highlighting
	  more useful

	* Oliver: 6772: Src/Zle/zle_tricky.c: use the whole
	  command text for job completion.

1999-06-21  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* Sven: 6760: Src/Zle/zle_tricky.c: menucompletion displaying new
	  list of matches sometimes got confused.

	* Sven: 6755: Src/jobs.c: status of restarted job including
	  current shell processes was wrong.

	* Sven: 6753: Src/Zle/collist.c, Src/xmods.conf: 
	  load collist

	* Sven: 6747: Src/Zle/collist.c, Src/Zle/zle_main.c,
	  Src/Zle/zle_tricky.c: menu-select allows you to move
	  cursor to select completions; uses ma list colouring
	  capability.

	* Sven: 6742: Src/Zle/collist.c, Src/Zle/collist.mdd,
	  Src/Zle/zle_main.c, Src/Zle/zle_tricky.c, Src/module.c,
	  Src/zsh.h, Doc/Zsh/mod_collist.yo, Doc/Zsh/mod_compctly.yo,
	  Doc/Zsh/mod_deltochar.yo, Doc/Zsh/modules.yo,
	  Util/zsh-development-guide:  collist module: colour completion
	  lists by setting ZLS_COLOURS (or even ZLS_COLORS) variables.

	* pws: 6737: Doc/Zsh/builtins.yo, Doc/Zsh/zle.yo: simplifications
	  suggested by Bart.

	* Bart: 6732: Doc/Zsh/compsys.yo: restore missing bits of Sven's
	  patches (not the zle_tricky.c hunk).

	* Bart: 6731: Doc/Zsh/compctl.yo: spelling correction

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56100 Pisa, Italy


From zsh-users-return-12317-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 12 01:09:29 2007
Return-Path: <zsh-users-return-12317-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14145 invoked from network); 12 Dec 2007 01:09:20 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Dec 2007 01:09:20 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 9958 invoked from network); 12 Dec 2007 01:08:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Dec 2007 01:08:56 -0000
Received: (qmail 17988 invoked by alias); 12 Dec 2007 01:08:43 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12317
Received: (qmail 17948 invoked from network); 12 Dec 2007 01:08:41 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Dec 2007 01:08:41 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id EC8858058F51
	for <zsh-users@sunsite.dk>; Wed, 12 Dec 2007 02:06:04 +0100 (CET)
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-users@sunsite.dk>; Wed, 12 Dec 2007 02:06:04 +0100 (CET)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id 246591C65CD7; Wed, 12 Dec 2007 02:08:38 +0100 (CET)
Date: Wed, 12 Dec 2007 02:08:37 +0100
From: Vincent Lefevre <vincent@vinc17.org>
To: Zsh users list <zsh-users@sunsite.dk>
Subject: Re: 4.3.4-dev-4 and 4.2.6-dev-2 available
Message-ID: <20071212010837.GZ13079@prunille.vinc17.org>
Mail-Followup-To: Zsh users list <zsh-users@sunsite.dk>
References: <22582.1197372038@csr.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <22582.1197372038@csr.com>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.17-vl-r19795 (2007-12-08)
X-Virus-Scanned: ClamAV using ClamSMTP

On 2007-12-11 11:20:38 +0000, Peter Stephenson wrote:
> I've uploaded new development versions of 4.3.4 and 4.2.6 to
> ftp://ftp.zsh.org/pub/development .  Unless something major turns up I
> will release 4.3.5 and 4.2.7 some time around the weekend.

Another bug:

set -x
[ \( ! -e \) ] || echo $?
test \( ! -e \) || echo $?
test ! -e || echo $?
`command which test` \( ! -e \) || echo $?

gives:

+zsh:11> [ '(' ! -e ')' ']'
[: argument expected
+zsh:11> echo 1
1
+zsh:12> test '(' ! -e ')'
test: argument expected
+zsh:12> echo 1
1
+zsh:13> test ! -e
+zsh:13> echo 1
1
+zsh:1> which test
+zsh:14> /usr/bin/test '(' ! -e ')'
+zsh:14> echo 1
1

According to POSIX[*], this 4-argument test on ( ! -e ) is equivalent
to the 2-argument test on ! -e and this is valid (as you can see, the
"test" utility from the coreutils is correct). However, the current
versions of bash, dash and ksh93 under Debian are buggy too (even
worse, they return 2 for the first two tests).

[*] http://www.opengroup.org/onlinepubs/009695399/utilities/test.html

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


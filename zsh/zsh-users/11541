From zsh-users-return-11541-mason-zsh=primenet.com.au@sunsite.dk Sun Jun 10 01:14:03 2007
Return-Path: <zsh-users-return-11541-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1445 invoked from network); 10 Jun 2007 01:14:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=no
	version=3.2.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jun 2007 01:14:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 34074 invoked from network); 9 Jun 2007 19:47:14 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Jun 2007 19:47:14 -0000
Received: (qmail 29796 invoked by alias); 9 Jun 2007 19:47:02 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11541
Received: (qmail 29786 invoked from network); 9 Jun 2007 19:47:02 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Jun 2007 19:47:02 -0000
Received: (qmail 32348 invoked from network); 9 Jun 2007 19:47:02 -0000
Received: from mtaout01-winn.ispmail.ntl.com (81.103.221.47)
  by a.mx.sunsite.dk with SMTP; 9 Jun 2007 19:46:59 -0000
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070609194658.WTEY12936.mtaout01-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <zsh-users@sunsite.dk>; Sat, 9 Jun 2007 20:46:58 +0100
Received: from pwslaptop.csr.com ([81.107.45.67])
          by aamtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070609194658.DZKQ219.aamtaout01-winn.ispmail.ntl.com@pwslaptop.csr.com>
          for <zsh-users@sunsite.dk>; Sat, 9 Jun 2007 20:46:58 +0100
Received: from pwslaptop.csr.com (pwslaptop.csr.com [127.0.0.1])
	by pwslaptop.csr.com (8.13.8/8.13.7) with ESMTP id l59JiVdd003423
	for <zsh-users@sunsite.dk>; Sat, 9 Jun 2007 20:44:32 +0100
Message-Id: <200706091944.l59JiVdd003423@pwslaptop.csr.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-users@sunsite.dk
Subject: Re: A conditional test to see whether a function is loaded? 
In-Reply-To: Message from fREW <frioux@gmail.com> 
   of "Sat, 09 Jun 2007 09:16:50 MDT." <fb3648c60706090816h5c5b6329o9bfc6af0baaa998a@mail.gmail.com> 
Date: Sat, 09 Jun 2007 20:44:31 +0100

fREW wrote:
> On 6/9/07, William Scott <wgscott@chemistry.ucsc.edu> wrote:
> > Thanks!
> >
> > Frank Terbeck wrote:
> >
> > > zsh% [[ -n ${functions[promptinit]} ]] && echo yay || echo nay
> >
> 
> I have a similar question.  Is there a shorter, more zsh-y way to do:
> [[ -x `which aptitude` ]]

Basically the same answer; you need to look at the description of the
zsh/parameter module in the zshmodules manual page for this kind of
thing.  These are the same parameters the completion system uses:

[[ -x ${commands[aptitude]} ]] && echo yay || echo nay

> Obviously replace aptitude with any program.  I tried [[ -x =aptitude
> ]] but that gives error messages if it doesn't exist.

fn() {
   emulate -L zsh
   setopt nonomatch
   [[ -x =aptitude ]]
}

will fix that problem.  You can use a parameter expression; parameter
expansion occurs before =-expansion (unless you have the bad taste
to set SH_FILE_EXPANSION, but "emulate" takes care of that in this case):

fn() {
   emulate -L zsh
   setopt nonomatch
   [[ -x =$1 ]]
}

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


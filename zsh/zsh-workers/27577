From zsh-workers-return-27577-mason-zsh=primenet.com.au@zsh.org Wed Jan 06 18:57:36 2010
Return-Path: <zsh-workers-return-27577-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2055 invoked by alias); 6 Jan 2010 18:57:36 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27577
Received: (qmail 18478 invoked from network); 6 Jan 2010 18:57:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at sergio.spb.ru designates 194.58.105.39 as permitted sender)
Message-ID: <4B44DD08.7040700@sergio.spb.ru>
Date: Wed, 06 Jan 2010 21:57:12 +0300
From: sergio <mailbox@sergio.spb.ru>
User-Agent: Mozilla-Thunderbird 2.0.0.22 (X11/20091109)
MIME-Version: 1.0
To: zsh-workers@zsh.org
Subject: PATCH: zcalc prompt fix
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hello.

There are problems when using color in ZCALCPROMPT.
This is simple fix.

--- /usr/share/zsh/functions/Misc/zcalc 2009-12-28 06:57:20.000000000 +0300
+++ zcalc       2010-01-06 14:55:15.000000000 +0300
@@ -152,7 +152,7 @@
  done

  psvar[1]=$num
-while vared -cehp "${(%)ZCALCPROMPT}" line; do
+while vared -cehp "${ZCALCPROMPT}" line; do
    [[ -z $line ]] && break
    # special cases
    # Set default base if `[#16]' or `[##16]' etc. on its own.

--
sergio.


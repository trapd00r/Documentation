From zsh-workers-return-11636-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 29 13:36:12 2000
Return-Path: <zsh-workers-return-11636-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10644 invoked from network); 29 May 2000 13:36:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 May 2000 13:36:08 -0000
Received: (qmail 19489 invoked by alias); 29 May 2000 13:35:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11636
Received: (qmail 19482 invoked from network); 29 May 2000 13:35:58 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>,
   "Andy Spiegl" <zsh.Andy@spiegl.de>
Subject: RE: strange alias effects
Date: Mon, 29 May 2000 17:35:47 +0400
Message-ID: <000601bfc972$cc0d9480$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700
In-reply-to: <20000529151309.A3360@br-online.de>

[Redirected to zsh workers]

> > > So the problem probably starts when there are more
> aliases after the
> > > definition of bar.

No. The problem is, when alias and/or function are inside of ``if''
statement:

bor@itsrm2% cat foo
  alias psl='ps -eo user,pid,ppid,pri,pcpu,vsz,pmem,stime,time,args |
sort +1n -2 | \grep -v "stime,time"'
  alias pslS='ps -eo user,pid,ppid,pri,pcpu,vsz,pmem,stime,time,args |
sort -k 6,6n | \grep -v "stime,time"'
  look() { psl | head -1; psl | \egrep -i $@ | \grep -v egrep }
  alias lookall='psl | \egrep -v "($USER|root|bin)"'
bor@itsrm2% zsh -f
itsrm2% . ./foo
itsrm2% look
ps: unknown field name `pri'
ps: unknown field name `pri'
egrep: Usage: egrep [ -c | -l | -q ] [-insvxyhbr] -e pattern_list
                    [ -f pattern_file ] ... [file ...]
              egrep [ -c | -l | -q ] [-insvxyhbr] [ -e pattern_list ]
                      -f pattern_file ... [file ...]
              egrep [ -c | -l | -q ] [-insvxyhbr] pattern_list
                    [file ...]

but

bor@itsrm2% zsh -f
itsrm2% cat foo
if true; then
  alias psl='ps -eo user,pid,ppid,pri,pcpu,vsz,pmem,stime,time,args |
sort +1n -2 | \grep -v "stime,time"'
  alias pslS='ps -eo user,pid,ppid,pri,pcpu,vsz,pmem,stime,time,args |
sort -k 6,6n | \grep -v "stime,time"'
  look() { psl | head -1; psl | \egrep -i $@ | \grep -v egrep }
  alias lookall='psl | \egrep -v "($USER|root|bin)"'
fi
itsrm2% . ./foo
itsrm2% look
look: command not found: psl
look: command not found: psl
egrep: Usage: egrep [ -c | -l | -q ] [-insvxyhbr] -e pattern_list
                    [ -f pattern_file ] ... [file ...]
              egrep [ -c | -l | -q ] [-insvxyhbr] [ -e pattern_list ]
                      -f pattern_file ... [file ...]
              egrep [ -c | -l | -q ] [-insvxyhbr] pattern_list
                    [file ...]

This is current CVS with a couple of latest commits from Sven missing.

-andrej


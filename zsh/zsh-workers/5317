Delivered-To: mason-zsh@primenet.com.au
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
Message-Id: <9902080955.AA34221@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH zsh-3.1.5-pws-7: cygwin make fixes 
In-Reply-To: ""Bart Schaefer""'s message of "Sun, 07 Feb 1999 23:26:42 NFT."
             <990207232642.ZM10052@candle.brasslantern.com> 
Date: Mon, 08 Feb 1999 10:55:30 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
X-Mailing-List: <zsh-workers@sunsite.auc.dk> 5317

"Bart Schaefer" wrote:
> On Feb 7, 10:49pm, Matt Armstrong wrote:
> } Subject: PATCH zsh-3.1.5-pws-7: cygwin make fixes
> }
> } I fixed #2 by re-doing the way signames.c is created.  Instead of a AWK 
> } script that gets run on a signal.h file, a C program is compiled and 
> } run.  This gets it right even if the signal.h file is hard to parse.
> 
> I haven't examined the patch in detail to check this, but did you make
> sure that the compilation of this program is performed in such a way that
> it executes correctly on the current hardware even when cross-compiling
> for another architecture?

The trouble is mksignames actually has to run on the target
architecture to generate the appropriate signal names.  I don't know
if there's any way of doing that at all with autoconf.  Any more
ideas?  We could maybe make it conditional on not cross-compiling,
since it does solve the #include problem fairly neatly.

> } My fix for #1 may be controversial because it may break for people who 
> } need to keep using an older autoconf.  Is upgrading a problem?
> 
> It'd be better if it weren't necessary.  Copy it into aczsh.m4 and give
> it a different name, e.g zsh_EXEEXT ?

In principle this shouldn't be a problem, except that autoconf 2.13
doesn't seemed to have appeared on any mirror yet.  Even then I would
hope $(ZSH_EXEEXT) would just be empty for anyone who needed to run a
previous autoconf (which is supposed just people adding new patches to
the configuration behaviour), which wouldn't be so bad.  However, the
patch won't be in pws-8 because of the cross-compilation problem.
(Does anyone know this actually works at the moment?)

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


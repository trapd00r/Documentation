From zsh-users-return-11415-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 16 23:45:50 2007
Return-Path: <zsh-users-return-11415-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13564 invoked from network); 16 Apr 2007 23:45:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Apr 2007 23:45:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 55679 invoked from network); 16 Apr 2007 23:45:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Apr 2007 23:45:43 -0000
Received: (qmail 4862 invoked by alias); 16 Apr 2007 23:45:27 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11415
Received: (qmail 4853 invoked from network); 16 Apr 2007 23:45:25 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 16 Apr 2007 23:45:25 -0000
Received: (qmail 54367 invoked from network); 16 Apr 2007 23:45:25 -0000
Received: from nz-out-0506.google.com (64.233.162.238)
  by a.mx.sunsite.dk with SMTP; 16 Apr 2007 23:45:21 -0000
Received: by nz-out-0506.google.com with SMTP id s1so1351804nze
        for <zsh-users@sunsite.dk>; Mon, 16 Apr 2007 16:45:19 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CJOvyIfZCR3apnDNzAWTb4huLgQd/RJvdEq4PkXuLdp3kjn6BUQqjaNtngrnDbRH0qgRKLZ96V2wG7/u8zue96RaN3lxY9VrI+M6lMm1cuXaZLullARCc+oEC4VXDOM5jgBP/R4xtbmw9z4tw8mvUto/rNcNVVVmHSlIM8qSbos=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=L3i3659aHP5/SwbY1eil+KTCAYxv57LrDs1lJXynu1qlkqL5G/PMY0rLcialKHVMZKEn8oj7MGzx3NOdTYuNCtwLTk+Wf3rfdHOAfu+ZR4LynEKZtTjREbLqxKhI0w227faCFevAOohh9S72w5thiZKm5CHSLjk6bTZHcQ7ZhFM=
Received: by 10.114.155.1 with SMTP id c1mr2134727wae.1176767119298;
        Mon, 16 Apr 2007 16:45:19 -0700 (PDT)
Received: by 10.115.108.15 with HTTP; Mon, 16 Apr 2007 16:45:19 -0700 (PDT)
Message-ID: <fb3648c60704161645x5bad94fawe2c59860262e49bb@mail.gmail.com>
Date: Mon, 16 Apr 2007 18:45:19 -0500
From: fREW <frioux@gmail.com>
To: zsh-users@sunsite.dk
Subject: Re: pushing a string in the cut&paste stack
In-Reply-To: <20070416163446.GA16374@sc.homeunix.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <9fda5e550704160530p7e478483i4e8021a9e199ce23@mail.gmail.com>
	 <20070416144411.GB20630@spiegl.de>
	 <9fda5e550704160803o1a26edf2oad09587d5e8b9c87@mail.gmail.com>
	 <20070416155007.GA29719@spiegl.de>
	 <20070416163446.GA16374@sc.homeunix.net>

On 4/16/07, Stephane Chazelas <Stephane_Chazelas@yahoo.fr> wrote:
> On Mon, Apr 16, 2007 at 05:50:07PM +0200, Andy Spiegl wrote:
> > Hi Giulio,
> >
> > > to put the output of a program in the shell killring, something like
> > >
> > > myprogram | copythis
> >
> > This example sounds more interesting.  Actually, this reminds me of a
> > zsh-feature that I am missing sometimes: execute the command at the pro=
mpt
> > and replace it with its result.  Something like this:
> >
> >  condor:~>zcalc 170000. /7
> >   [some magic key..]
> >  condor:~>24285.714285714286
> >   [ctrl-A zcalc ...]
> >  condor:~>zcalc 24285.714285714286 % 7
> >   [some magic key..]
> >  condor:~>2
> >   [and so on...]
> >
> > Any ideas?
> > That would make your copy_this superflous, too.  (c;
> [...]
>
> edit-command-output() {
>   BUFFER=3D$(eval $BUFFER)
>   CURSOR=3D0
> }
> zle -N edit-command-output
> bindkey '\e!' edit-command-output
>
> $ echo foo<Meta-!>
> $ foo
>
> Or maybe:
>
> edit-command-output() {
>   local output
>   output=3D$(eval $BUFFER) || return
>   BUFFER=3D$output
>   CURSOR=3D0
> }
>
> --
> St=E9phane
>

This is pretty cool!  I dig!

-fREW


From zsh-users-return-6048-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 23 16:20:39 2003
Return-Path: <zsh-users-return-6048-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17430 invoked from network); 23 Apr 2003 16:20:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 23 Apr 2003 16:20:38 -0000
Received: (qmail 21295 invoked by alias); 23 Apr 2003 16:20:23 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6048
Received: (qmail 21283 invoked from network); 23 Apr 2003 16:20:23 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 23 Apr 2003 16:20:23 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.226.47] by sunsite.dk (MessageWall 1.0.8) with SMTP; 23 Apr 2003 16:20:22 -0000
Message-ID: <20030423162021.56314.qmail@web20110.mail.yahoo.com>
Received: from [68.70.142.84] by web20110.mail.yahoo.com via HTTP; Wed, 23 Apr 2003 09:20:21 PDT
Date: Wed, 23 Apr 2003 09:20:21 -0700 (PDT)
From: Shawn Halpenny <paxunix@yahoo.com>
Reply-To: paxunix@acm.org
Subject: Disabling partial path completion and cygdrive completion unhappiness
To: zsh-users@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I want to disable partial path completion in all cases.  The most
troubling issue I have with it is using zsh under Cygwin.  The
/cygdrive root path is virtual and beneath it has directory entries for
each of the available drives in the system.  I have an aged and slow
floppy, two hard drives, a CD burner, and a tape drive.  So the usual
state of things is like this:

# ls /cygdrive
c  d  v

(the floppy (a) will only appear if a disk is in the drive, same with
the CD (e) ).

The problem is that anytime cygdrive is traversed/globbed/etc., the
_empty_ floppy drive is accessed and it takes a good 2 or 3 seconds
before the contents of cygdrive are presented.

You can imagine my annoyance when I have to complete a path from
/cygdrive/c that is several levels deep, hitting TAB at each level.

Perhaps this emphasizes a weakness of how cygdrive is implemented
within Cygwin.  Nonetheless, I have been able to work around the
problem by mounting my most frequently used drives off of / .  Then,
cygdrive doesn't have to be queried at all, and I can easily type
/c/<TAB> and complete as usual.

I also have

zstyle ':completion:*' fake-files /:cygdrive '/cygdrive:a c d e v'

in my .compinstall since I only occasionally access some drives and
therefore don't have a mount point for them off my root directory (or I
can't mount them until a disk is present in the drive).  Unortunately,
the fake-files style overrides completion via the _path_files (I guess)
mechanism that would complete across my mount point for /c, so with the
above zstyle, all completions via /c cause my floppy drive to be
laboriously and annoyingly active until I'm done completing.

Is there a better way to set this up?  Plus, I really would like to
know how to disable partial path completion (if I type /e/<TAB> and my
CD drive hasn't settled with its new disk yet, I often get /etc
instead).

Thanks for any insights.

-- 
Shawn Halpenny

__________________________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo
http://search.yahoo.com


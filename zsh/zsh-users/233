From Rob.Hooft@EMBL-Heidelberg.de Thu Jun  6 01:44:51 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id BAA02796 for <mason@werple.mira.net.au>; Thu, 6 Jun 1996 01:44:48 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id LAA26904; Wed, 5 Jun 1996 11:26:23 -0400 (EDT)
Resent-Date: Wed, 5 Jun 1996 11:25:44 -0400 (EDT)
Date: Wed, 5 Jun 1996 17:25:26 +0200
Message-Id: <199606051525.RAA04603@nu.EMBL-Heidelberg.DE>
From: Rob Hooft <Rob.Hooft@EMBL-Heidelberg.de>
To: zsh-users@math.gatech.edu
Subject: COLUMNS problem.
Mime-Version: 1.0 (generated by tm-edit 7.53)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"wgOGt1.0.tZ6.uRQjn"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/233
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 3038
Status: OR

I have recently started to observe weird behavior in editing
long-lines in zsh-2.6beta19 on alpha OSF/1 2.0. A little investigation
today proved to me that the COLUMNS variable is not updated when I
resize my X-term. This results in named weird behavior during the
time the value is incorrect. "zsh"s and "sh"s 'kill -l' output are
basically identical, both containing SIGWINCH. I can not remember
changing anything that is relevant to this. Same setup on Linux works
fine.

Now, initially I thought that this COLUMNS variable might be a simple
error in my startup scripts, so I tried the sequence of commands
appended in the tail of this message, revealing a slight un-nicety.
This un-nicety IS reproducible on other platforms.

Since "zsh -f" behaves the same, I think it is not necessary to send
you my complete status. If anyone wants more info, please ask.

Regards,

Rob Hooft.
------------------------------------------------------------------------
nu[100]crazy% zsh
nu[100]crazy%% unset COLUMNS
zsh: floating point exception  zsh
nu[101]crazy% dbx =zsh
dbx version 3.11.4
Type 'help' for help.


"init.c" not defined or not active
(dbx) run
zsh: suspended (tty output)  dbx =zsh
nu[102]crazy% fg
[1]  + continued  dbx =zsh
nu[100]crazy%% 
nu[100]crazy%% 
nu[100]crazy%% unset COLUMNS
signal Floating point exception at   [__remq:492 +0xf78,0x3ff800aa278]   Source not available
(dbx) where
>  0 __remq(0x0, 0x0, 0x0, 0x20, 0xf) ["../../../../../src/usr/ccs/lib/libc/alpha/divrem.s":492, 0x3ff800aa278]
   1 putprompt(0x140011988, 0x1400119a8, 0x140011dd8, 0x140011de8, 0x20) [0x12006da54]
   2 genprompts(0x20, 0x1400116e0, 0x120067a5c, 0x0, 0x1) [0x120073ec4]
   3 zleread(0x0, 0x0, 0x0, 0x0, 0x190) [0x120067a58]
   4 inputline(0x12003d878, 0x140011e18, 0x1, 0x1400116d0, 0x120025f0c) [0x12003da54]
   5 ingetc(0x1, 0x140011ed0, 0x14001a430, 0x3ffc008ff68, 0x1) [0x12003d874]
   6 hgetc(0x14001a430, 0x3ffc008ff68, 0x1, 0x140011e18, 0x120041728) [0x120036020]
   7 gettok(0x14001a3b0, 0x3ffc008ff68, 0x1, 0x140011e18, 0xffffffffffffffff) [0x120041724]
   8 yylex(0x1, 0x140011e18, 0xffffffffffffffff, 0x0, 0x12004da80) [0x120041124]
   9 parse_event(0xffffffffffffffff, 0x0, 0x12004da80, 0x140026100, 0x12003a92c) [0x12004da7c]
  10 loop(0x140003f40, 0x140011d00, 0x140011e18, 0x14001a41c, 0x14000d718) [0x12003a928]
  11 main(0x2, 0x14000dea8, 0x140009308, 0x14006afe0, 0x14005b858) [0x12003a708]
(dbx) ^D
(dbx) quit
nu[103]crazy% echo $ZSH_VERSION 
2.6-beta19
nu[104]crazy% COLUMNS= zsh -f
zsh: floating point exception  COLUMNS= zsh -f
nu[105]crazy% COLUMNS=0 zsh -f           
zsh: floating point exception  COLUMNS=0 zsh -f
------------------------------------------------------------------------
-- 
=== Rob.Hooft@EMBL-Heidelberg.DE   http://www.Sander.EMBL-Heidelberg.DE/rob/ ==
==== In need of protein modeling?  http://www.Sander.EMBL-Heidelberg.DE/whatif/
Validation of protein structures?  http://biotech.EMBL-Heidelberg.DE:8400/ ====
================ Long Live Linux!  Free Software Rules The World! =============



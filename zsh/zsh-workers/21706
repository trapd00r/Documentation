From zsh-workers-return-21706-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 07 20:30:42 2005
Return-Path: <zsh-workers-return-21706-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1158 invoked from network); 7 Sep 2005 20:30:40 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Sep 2005 20:30:40 -0000
Received: (qmail 76231 invoked from network); 7 Sep 2005 20:30:33 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Sep 2005 20:30:33 -0000
Received: (qmail 2749 invoked by alias); 7 Sep 2005 20:30:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21706
Received: (qmail 2739 invoked from network); 7 Sep 2005 20:30:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Sep 2005 20:30:29 -0000
Received: (qmail 75816 invoked from network); 7 Sep 2005 20:30:29 -0000
Received: from zproxy.gmail.com (64.233.162.194)
  by a.mx.sunsite.dk with SMTP; 7 Sep 2005 20:30:25 -0000
Received: by zproxy.gmail.com with SMTP id 13so1243505nzn
        for <zsh-workers@sunsite.dk>; Wed, 07 Sep 2005 13:30:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Mp7j4isMiFoURctKd9bP1PAOIyyONzUEqaltLiWuzwuGw3TjkdQ/N2/j3Ai82mpcVZ0Gi8+/lpTdng+LYWze30nEawSybp2HmSj9ocZx/xsyCEThon1AQAiV29H0ki8rE3iDURlVhY3u8XX6JG4aLP7+RpnQZfv1NIjOdy+1pvw=
Received: by 10.36.5.3 with SMTP id 3mr1567206nze;
        Wed, 07 Sep 2005 13:30:24 -0700 (PDT)
Received: by 10.36.23.13 with HTTP; Wed, 7 Sep 2005 13:30:24 -0700 (PDT)
Message-ID: <237967ef05090713304637c1f1@mail.gmail.com>
Date: Wed, 7 Sep 2005 22:30:24 +0200
From: Mikael Magnusson <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: various weirdnesses with unicode support
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,RCVD_BY_IP 
	autolearn=ham version=3.0.4

I've been using zsh in sv_SE.utf8 locale now for a few weeks, and it
is mostly working fine. Some things are a bit weird though.
* Pressing alt-t for transpose word doesn't work, and inserts lots of
NULLs in the command line, shown as ^@.
* NULLs aren't saved in the history, and when up-arrowing to a command
with a NULL in it, everything after it is cut off. (this one might not
have anything to do with unicode, i am too lazy to turn it off to try
and it's probably some sort of bug anyway :)
* Sometimes, strings with multibyte characters are only partially
saved in history too, like katakana PU. Maybe they contain a NULL, i
don't know.
* Having zsh in utf-8 locale but the terminal inputting for example
ISO-8859-1 makes zsh enter some weird state where it doesn't accept
input correctly. Going to a history entry with invalid UTF-8 also
seems to do weird things.

I can't provide any backtraces or something like that since zsh
doesn't actually crash anywhere.
I think there was something else too, but I can't seem to remember it right=
 now.

--=20
Mikael Magnusson


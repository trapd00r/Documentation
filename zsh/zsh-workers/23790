From zsh-workers-return-23790-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 22 06:45:36 2007
Return-Path: <zsh-workers-return-23790-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28236 invoked from network); 22 Aug 2007 06:45:34 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Aug 2007 06:45:34 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 91480 invoked from network); 22 Aug 2007 06:45:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Aug 2007 06:45:28 -0000
Received: (qmail 27405 invoked by alias); 22 Aug 2007 06:45:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23790
Received: (qmail 14868 invoked from network); 22 Aug 2007 04:56:03 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Aug 2007 04:56:03 -0000
Received: (qmail 32167 invoked from network); 22 Aug 2007 04:56:03 -0000
Received: from sender-02.it.helsinki.fi (128.214.205.137)
  by a.mx.sunsite.dk with SMTP; 22 Aug 2007 04:56:00 -0000
Received: from rispa.it.helsinki.fi (hy-ovpn1-126.vpn.helsinki.fi [128.214.182.254])
	by sender-02.it.helsinki.fi (8.13.8/8.13.8) with ESMTP id l7M4tump017954
	(version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NOT);
	Wed, 22 Aug 2007 07:55:56 +0300
Received: from niko by rispa.it.helsinki.fi with local (Exim 4.63)
	(envelope-from <ntyni@cc.helsinki.fi>)
	id 1INiG2-0008Sb-G6; Wed, 22 Aug 2007 07:55:54 +0300
Date: Wed, 22 Aug 2007 07:55:54 +0300
From: Niko Tyni <ntyni@iki.fi>
To: zsh-workers@sunsite.dk, 266031-forwarded@bugs.debian.org
Subject: Re: Bug#266031: zsh: still segfaults occasionally on sid
Message-ID: <20070822045554.GA32386@rispa.it.helsinki.fi>
References: <20070821191245.GA29403@rispa.it.helsinki.fi> <20070821225301.GB31741@scowler.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20070821225301.GB31741@scowler.net>
User-Agent: Mutt/1.5.13 (2006-08-11)

On Tue, Aug 21, 2007 at 06:53:01PM -0400, Clint Adams wrote:
> On Tue, Aug 21, 2007 at 10:12:45PM +0300, Niko Tyni wrote:
> > I'm seeing this bug maybe once or twice a day on amd64/sid (and
> > on etch too.)  I'm also using the vi bindings, and the bug always
> > hits me when browsing or searching history, usually when I press 'k'
> > (up-line-or-history) in the vicmd mode. I think the history has to grow
> > long enough first or something, it never seems to happen early in the
> > terminal session.  I have tried to find a way to reproduce the crash
> > reliably, but no luck yet.
> > 
> > Here's the gdb backtrace and the message displayed on the terminal after
> > the latest crash.  Please let me know if I can provide more information.
> 
> Which history-related options are you setopt-ing?  

Just 'unsetopt appendhistory', I think.

% setopt
noalwayslastprompt
noappendhistory
noautomenu
noautoremoveslash
nobeep
interactive
login
monitor
nonomatch
shinstdin
zle

> What are the values of $HISTSIZE and $SAVEHIST ?  

% echo $HISTSIZE 
30
% echo $SAVEHIST
0

> What kind of filesystem is your history file stored on/over?

There's no saved history due to SAVEHIST=0, as far as I understand.
The home directory is on ext3 if that matters anyway.

Cheers,
-- 
Niko Tyni   ntyni@iki.fi


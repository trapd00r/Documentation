From zsh-users-return-13181-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 01 02:51:51 2008
Return-Path: <zsh-users-return-13181-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14891 invoked from network); 1 Sep 2008 02:51:49 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Sep 2008 02:51:49 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 95691 invoked from network); 1 Sep 2008 02:51:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Sep 2008 02:51:34 -0000
Received: (qmail 12590 invoked by alias); 1 Sep 2008 02:51:01 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13181
Received: (qmail 12566 invoked from network); 1 Sep 2008 02:50:59 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 1 Sep 2008 02:50:59 -0000
Received: from vms042pub.verizon.net (vms042pub.verizon.net [206.46.252.42])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 92B6B8030848
	for <zsh-users@sunsite.dk>; Mon,  1 Sep 2008 04:50:55 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.178])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K6H0035ZJ972J9E@vms042.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sun, 31 Aug 2008 16:48:44 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m7VLmgoO006912	for
 <zsh-users@sunsite.dk>; Sun, 31 Aug 2008 14:48:43 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m7VLmJVJ006911	for zsh-users@sunsite.dk; Sun,
 31 Aug 2008 14:48:19 -0700
Date: Sun, 31 Aug 2008 14:48:18 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: can I control brace expansion's "sort"/"display" order?
In-reply-to: <18618.26046.529685.352779@bear.he.net>
To: zsh-users@sunsite.dk
Message-id: <080831144819.ZM6910@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <18618.26046.529685.352779@bear.he.net>
Comments: In reply to Eric De Mund <ead@ixian.com>
 "can I control brace expansion's "sort"/"display" order?" (Aug 31,  2:34am)
X-Virus-Scanned: ClamAV 0.92.1/8122/Sun Aug 31 03:04:56 2008 on bifrost
X-Virus-Status: Clean

On Aug 31,  2:34am, Eric De Mund wrote:
}
} Can I control brace expansion's "sort" or "display" order?

They're expanded lexically left to right, so the only way to affect
this is to perform the "multiplication" yourself.

In addition to the for-loop solution previously posted, you can do this
with array parameter expansion:

a=( white black )
b=( bird fish )
c=( {21..24} )
d=( ${^a}'${^b}' )
e=( '${(e)^d}'${^c} )

print -l ${(e)e}

The trick is at each step to quote the expansion of the thing you want
to iterate "fastest", and pair it with the thing you want to iterate
"second fastest".  If there's been such a quote at the previous step,
include (e) in its expansion at the next step.  Then expand the whole
thing with (e) to explode the quoted expansions in the correct order.

You can compress this down a little:

a=( bird fish )
b=( {white,black}'${^a}' )
c=( '${(e)^b}'{21..24} )

print -l ${(e)c}

However, as soon as you need the quoting you need a parameter, because
brace expansion isn't repeated during (e) expansion.

-- 


From zsh-workers-return-15239-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 03 17:18:41 2001
Return-Path: <zsh-workers-return-15239-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24855 invoked from network); 3 Jul 2001 17:18:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Jul 2001 17:18:39 -0000
Received: (qmail 21694 invoked by alias); 3 Jul 2001 17:17:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15239
Received: (qmail 21677 invoked from network); 3 Jul 2001 17:17:37 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <zsh-workers@sunsite.dk>
Subject: RE: PATCH: zsh/pcre module
Date: Tue, 3 Jul 2001 21:18:27 +0400
Message-ID: <005e01c103e4$2c51f500$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <3B41F8ED.9892E7F6@u.genie.co.uk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006

>
> Bart Schaefer wrote:
> >
> > Incidentally, I'm not entirely sure I approve of adding this PCRE module
> > to the regular zsh distribution.
>
> I agree with Bart here in some respects.
>
> How easy is it to package up modules separately in such a way that they
> could be built and installed without needing to be unpacked over the zsh
> source and compiled with it. Ideally, we would have a set of include
> files which was all anyone needed to build a separate zsh module.
>

That is what I'm still thinking about.

I'm afraid currently there is no easy way to separate modules and main zsh.
We do not have well defined interfaces; even worse, with modules
cross-references you'd need extra stuff for every dependent module that is
needed to compile a module (ough ...). Also, chained dynamic loading is not
well supported on many plattforms.

What I am really considering is more Apache-like scheme. Modules can be
packaged separately but still need to be included in sources (registered?).
Every module is to large extend independent; you unpack it, do something
like

configure --with-zsh-dir=...

and it will modify zsh configuration to include this module (whatever it
means). It must not be configure (it is well possible that this should be
pre-configure task). After that you just do make and it will compile module
*and* recompile zsh main if needed.

But it is still very vague; and there are some other more urgent things
(module dependencies in the first place).

-andrej


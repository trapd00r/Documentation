From zsh-workers-return-17391-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 01 16:01:42 2002
Return-Path: <zsh-workers-return-17391-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5600 invoked from network); 1 Jul 2002 16:01:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 Jul 2002 16:01:41 -0000
Received: (qmail 4019 invoked by alias); 1 Jul 2002 16:01:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17391
Received: (qmail 4005 invoked from network); 1 Jul 2002 16:01:32 -0000
Date: Mon, 1 Jul 2002 12:01:28 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: dpkg -S
Message-ID: <20020701160128.GA13515@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.28i
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

Better to complete files than nothing, it would seem.

Index: Completion/Debian/Command/_dpkg
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Command/_dpkg,v
retrieving revision 1.6
diff -u -r1.6 _dpkg
--- Completion/Debian/Command/_dpkg	28 May 2002 14:07:38 -0000	1.6
+++ Completion/Debian/Command/_dpkg	1 Jul 2002 15:59:24 -0000
@@ -128,4 +128,8 @@
 	  '(* -a)--pending' \
 	  '*:package:_deb_packages installed'
   ;;
+  search)
+        _call_function ret _dpkg_$state && return ret
+  	_files
+  ;;
 esac


From zsh-users-return-3417-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Sep 11 17:27:04 2000
Return-Path: <zsh-users-return-3417-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6721 invoked from network); 11 Sep 2000 17:27:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Sep 2000 17:27:02 -0000
Received: (qmail 12230 invoked by alias); 11 Sep 2000 17:26:12 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3417
Received: (qmail 12223 invoked from network); 11 Sep 2000 17:26:12 -0000
To: zsh-users@sunsite.auc.dk
Subject: more wishes with automounter
References: <200009111436.KAA02215@soup.ads.apexinc.com>
From: Alexandre Duret-Lutz <duret_g@lrde.epita.fr>
X-Home-Page: http://www.epita.fr/~duret_g/
X-Attribution: adl
Organization: LRDE/EPITA  http://www.lrde.epita.fr/
Date: 11 Sep 2000 19:33:35 +0200
In-Reply-To: "E. Jay Berkenbilt"'s message of "Mon, 11 Sep 2000 10:36:32 -0400"
Message-ID: <mvb66o27s0g.fsf@phobos.lrde.epita.fr>
Lines: 31
User-Agent: Gnus/5.0807 (Gnus v5.8.7) XEmacs/21.1 (Channel Islands)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi,

I use automounter, too, and have trouble with Zsh.

I have a bunch of automounted NFS directories in
/var/autofs/nfs/

Since the automountable directories are invisible [*] in
/var/autofs/nfs/ until they are mounted, and because
I don't wan't to remember their names, I have setup
a /nfs/ directory with symbolic links to the automounted
directories:

   /nfs/hosts1 -> /var/autofs/nfs/host1
   /nfs/hosts2 -> /var/autofs/nfs/host2
   /nfs/hosts3 -> /var/autofs/nfs/host3
etc...

The problem is that using Zsh to complete /nfs/hos<TAB> will
mount *all* the directories, because the completion code stat()
all links (and stat()ing a link will lead to the mount of the
linked directory).  I believe that Zsh may use lstat() instead,
but since I don't know where that guilty stat() is I haven't
tried.

[*] another wish would be that Zsh complete those invisible
    directories; or more generaly: give the user the possiblity
    to add "virtual files" (anywhere he want), that Zsh would
    use for completion.
-- 
Alexandre Duret-Lutz


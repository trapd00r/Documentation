From zsh-workers-return-8388-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Oct 24 06:20:58 1999
Return-Path: <zsh-workers-return-8388-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7916 invoked from network); 24 Oct 1999 06:20:55 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Oct 1999 06:20:55 -0000
Received: (qmail 25472 invoked by alias); 24 Oct 1999 06:20:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8388
Received: (qmail 25465 invoked from network); 24 Oct 1999 06:20:40 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991024062032.ZM1682@candle.brasslantern.com>
Date: Sun, 24 Oct 1999 06:20:32 +0000
In-Reply-To: <19991024010545.A1872@dman.com>
Comments: In reply to Clint Adams <schizo@debian.org>
        "Re: 3.0 DESTDIR" (Oct 24,  1:05am)
References: <991019052248.ZM4198@candle.brasslantern.com> 
	<991019061342.ZM4317@candle.brasslantern.com> 
	<19991023204554.A31639@dman.com> 
	<991024015558.ZM1246@candle.brasslantern.com> 
	<19991024010545.A1872@dman.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Clint Adams <schizo@debian.org>
Subject: Re: 3.0 DESTDIR
Cc: zsh-workers@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Oct 24,  1:05am, Clint Adams wrote:
} Subject: Re: 3.0 DESTDIR
} 
} > 	make DESTDIR=/foo/bar/baz install
} > 
} > differs in end result from
} > 
} > 	make
} > 	make prefix=/foo/bar/baz/usr/local install
}
} Well, I can answer that since my surprise at those two not being effectively
} the same is precisely the reason I wanted DESTDIR in the first place:
} (illustration using bart7)
} 
} % strings /tmp/zshtest/usr/bin/zsh | grep tmp
} /tmp/zshtest/usr/share/zsh/functions
} /tmp/zshtest/usr/lib/zsh/3.1.6-bart-7

Ah, yes, I had noticed that recompile, too, but:

(1) that doesn't apply to 3.0.x, because it doesn't compile any of those
strings into the binary, so you still haven't given a reason to have the
DESTDIR patch in that version; and

(2) that recompile is a bug in the 3.1.6 build process which I think we
ought to fix whether or not DESTDIR is also available; and

(3) DESTDIR isn't sufficient anyway, because simply prefixing the entire
path from the root forces you to install into a precise mirror tree of
the install hierarchy.  It turns out that in one of the cases where I
thought DESTDIR would be useful, it actually is not; because what I want
is to change /usr/local/* into /usr/local/stow/zsh/*, that is, insert a
new hierarchy _below_ ${prefix} rather than above.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-request@math.gatech.edu Tue Sep 15 01:06:34 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9522 invoked from network); 15 Sep 1998 01:06:33 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 15 Sep 1998 01:06:33 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id UAA00249;
	Mon, 14 Sep 1998 20:49:34 -0400 (EDT)
Resent-Date: Mon, 14 Sep 1998 20:49:22 -0400 (EDT)
Message-ID: <AF4C1F8C5306D111AD5F0000F8662ED3053088B6@RED-MSG-41>
From: Amol Deshpande <amold@MICROSOFT.com>
To: ZShell Users List <zsh-users@math.gatech.edu>,
        "'Sven Guckes'"
	 <guckes@math.fu-berlin.de>
Subject: RE: zsh for win32 - installation of zshrc
Date: Mon, 14 Sep 1998 17:52:00 -0700
X-Mailer: Internet Mail Service (5.5.2232.9)
Resent-Message-ID: <"rKx8R2.0.93.IcR_r"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1794
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> ----------
> From: 	'Sven Guckes'[SMTP:guckes@math.fu-berlin.de]
> Sent: 	Monday, September 14, 1998 4:53 PM
> To: 	ZShell Users List
> Subject: 	Re: zsh for win32 - installation of zshrc
> 
> Furthermore, the README does not give explicit examples which it should.
> 
Feel free to write some up and i'll put them in. 

> > 7. HOME directory:
> > -----------------
> > zsh sets the HOME directory if it's not already set. It uses
> > the windows directory on win95, $HOMEDRIVE\$HOMEPATH on nt <4.0,
> > and $USERPROFILE on NT 4.0 and higher.
> > If ZSHDOTDIR is set, zsh sets home to "youdonthavehomeset". This
> > is to avoid crashing in places where the shell expects a home directory.
> > Picking a real default would defeat the purpose of not setting home.
> > (that means you can set ZSHDOTDIR instead of HOME for your startup
> files)
> 
> Well - what is the difference between these methods?
> 
You can set ZDOTDIR if you don't want the shell to set HOME (and you haven't
defined one yourself.) This is because other unix ports may expect HOME to
NOT
be set (they use their installation directory or something).

> What is the "windows directory" on Windows95
> (ie how is this defined in a Windows setup)?
> 
c:\windows by default. or whatever directory you installed win95.


> Anyway - this is what I understand so far:
> 
> 	Windows95:     C:\WINDOWS\.zshrc
> 	WindowsNT-3.x: $HOMEDRIVE\$HOMEPATH\.zshrc
> 	WindowsNT-4.x: $USERPROFILE\.zshrc
> 		       $ZDOTDIR\.zshrc
> 		       $HOME\.zshrc
> 	 
> Is this correct now?  Can someone come up with a shorter description?
> 
> For WindowsNT-4.x - in which order are the various locations checked?
> 
Remember that these rules apply only if don't set HOME. Since there is
no /etc,  only the rules for locating files from $HOME are followed.

1. If ZDOTDIR is set, the shell will not set HOME. Since this may cause the
shell to crash in various places, zsh sets home to a bogus value that gives
you a clue about that went wrong, instead of crashing.

2. If ZDOTDIR is not set, and HOME is not set, then zsh sets home to the
directories
above.


> The value of a variable on Windows cannot be used as $VAR (I think)
> but needs to be specified as %VAR% - and this is only possible in batch
> files.
> Right or wrong?
> 
the way you use a variable is a function of the shell you use. since you are
using
zsh, you use the zsh syntax. it has absolutely nothing to do with what
operating
system you are running.


> I am looking forward to a concise but precise description and
> I would love to summarize the info I get - but I need answers.
> I think this should be possible somehow.
> Or do I have to deassemble the binary?
> 
you can:
1. read the README
2. read the changelog
3. email me.
4. read the source 

I know there should be more comprehensive documentation of the quirks in
this version, but i
just haven't gotten around to it. sorry.

-amol

> Sven
> 


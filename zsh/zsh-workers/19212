From zsh-workers-return-19212-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 28 16:20:53 2003
Return-Path: <zsh-workers-return-19212-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8585 invoked from network); 28 Oct 2003 16:20:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 28 Oct 2003 16:20:52 -0000
Received: (qmail 5151 invoked by alias); 28 Oct 2003 16:20:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19212
Received: (qmail 5134 invoked from network); 28 Oct 2003 16:20:42 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 28 Oct 2003 16:20:42 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [66.93.131.57] by sunsite.dk (MessageWall 1.0.8) with SMTP; 28 Oct 2003 16:20:41 -0000
Received: from lorien.emufarm.org (localhost [127.0.0.1])
	by lorien.emufarm.org (8.12.7/8.12.7) with ESMTP id h9SGJMLH010734;
	Tue, 28 Oct 2003 08:19:22 -0800
Received: (from duvall@localhost)
	by lorien.emufarm.org (8.12.7/8.12.7/Submit) id h9SGJKdJ010733;
	Tue, 28 Oct 2003 08:19:20 -0800
Date: Tue, 28 Oct 2003 08:19:20 -0800
From: Danek Duvall <duvall@emufarm.org>
To: Peter Stephenson <pws@csr.com>
Cc: zsh-workers@sunsite.dk, 217915@bugs.debian.org,
   =?iso-8859-1?Q?Fr=E9d=E9ric?= Gobry <frederic.gobry@smartdata.ch>
Subject: Re: NSS LDAP/TLS crashing
Message-ID: <20031028161920.GA10640@lorien.emufarm.org>
Mail-Followup-To: Danek Duvall <duvall@emufarm.org>,
	Peter Stephenson <pws@csr.com>, zsh-workers@sunsite.dk,
	217915@bugs.debian.org,
	=?iso-8859-1?Q?Fr=E9d=E9ric?= Gobry <frederic.gobry@smartdata.ch>
References: <20031028143032.GA26489@scowler.net> <21704.1067354886@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <21704.1067354886@csr.com>
User-Agent: Mutt/1.5.4i

On Tue, Oct 28, 2003 at 03:28:06PM +0000, Peter Stephenson wrote:

> Clint Adams wrote:
>
> > % objdump -T /usr/lib/libz.so.1 | grep zcal
> > 00008110 g    DF .text	00000018  Base        zcalloc
> 
> So it looks like we now need to second-guess the zlib interface.
> Here's a patch for 4.0; I will commit the 4.1 version directly.

One could argue that it's a bug in zlib.  zalloc() is not an interface
exposed from zlib.h, so presumably the function is private to the
library.  In which case the library should be built so that it's not
exposed outside the library.

Obviously zsh will still have to work around the bug where it might not
be fixed, but the bug should be reported.

I'm happy to, if no one else feels like it.  :)

Danek


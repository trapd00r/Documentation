From zsh-workers-request@math.gatech.edu  Wed Oct  4 02:06:41 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.net.au (8.7/8.7) with SMTP id CAA20685 for <mason@werple.mira.net.au>; Wed, 4 Oct 1995 02:06:36 +1000 (EST)
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA21107
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Tue, 3 Oct 1995 12:08:40 -0400
Received: by math (5.x/SMI-SVR4)
	id AA12427; Tue, 3 Oct 1995 12:01:57 -0400
Resent-Date: Tue, 3 Oct 1995 10:04:35 -0600
Old-Return-Path: <mdb@cdc.noaa.gov>
Date: Tue, 3 Oct 1995 10:04:35 -0600
Message-Id: <9510031604.AA11861@charney.cdc.noaa.gov>
From: Mark Borges <mdb@cdc.noaa.gov>
To: hzoli@cs.elte.hu
Cc: ZSH mailing list <zsh-workers@math.gatech.edu>
Subject: Re: correction/spelling quirks
In-Reply-To: <199510031024.LAA29220@bolyai.cs.elte.hu>
References: <9510022306.AA03882@charney.cdc.noaa.gov>
	<199510031024.LAA29220@bolyai.cs.elte.hu>
Organization: CIRES, University of Colorado
X-Attribution: mb
Resent-Message-Id: <"sjt_a3.0.523.qvLSm"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/416
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>> Zoltan Hidvegi(ZH) wrote on Tue, 3 Oct 1995 11:24:58 +0100 (MET):
>> Hmm, I don't get it. I'm seeing this in 
>> 
>> $ echo $ZSH_VERSION
>> 2.6-beta10-hzoli10.2
>> $ ls -al ~men/xemacs
>> zsh: Does ~men/xemacs mean /cray3/men/xemacs [nyae]? y
>> lrwxrwxrwx [elided] /cray3/men/xemacs -> /cray2/mdb/share/bin/xemacs-19.13
>> 
>> The patch you refer to:
>> 
>> X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/280
>> 
>> is for hzoli10.1 which should already be in 10.2, right? (indeed, when I tried
>> to apply it, patch indicated it was reverse polarity).

ZH> The patch is really in 10.2.  I cannot reproduce it here.  Could
ZH> you tell me how to reproduce it, starting with zsh -f from an
ZH> empty directory?

Certainly.

Hmm, I see what triggers it now. The link expanded by tilde expansion
must be nonsensical (i.e., the error only occurs if the file pointed
to by the symlink does not exist). Sorry I hadn't noticed that before
(I rm'd the file pointed to by ~men/xemacs, but he didn't remove the
symlink).

Here's an example like you asked:
------------------------------------------------------------------------------

charney$ \rm -rf junk
charney$ mkdir junk
charney$ cd junk
charney$ ~/bin/sparc/zsh-2.6h10.2 -f
charney% echo $ZSH_VERSION 
2.6-beta10-hzoli10.2
charney% setopt correctall
charney% pwd
/tmp/mdb/junk
charney% ln -s /tmp/mdb/junk/foo ~/junk
charney% echo ~mdb
/cray2/mdb
charney% ls -al ~mdb/junk
zsh: Does ~mdb/junk mean /cray2/mdb/junk [nyae]? n
lrwxrwxrwx   1 mdb      climate       17 Oct  3 09:54 /cray2/mdb/junk -> /tmp/mdb/junk/foo
charney% touch foo
charney% ls -al ~mdb/junk
lrwxrwxrwx   1 mdb      climate       17 Oct  3 09:54 /cray2/mdb/junk -> /tmp/mdb/junk/foo
charney% 
charney$

------------------------------------------------------------------------------
Notice that after the link was made to point to something that existed
the correction quirk did not happen. So maybe it's more a case of a
confusing "error message" than a real bug.

Thanks for looking into it.

  -mb-


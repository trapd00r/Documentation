From zsh-users-return-6612-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 24 16:16:16 2003
Return-Path: <zsh-users-return-6612-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16848 invoked from network); 24 Sep 2003 16:16:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 24 Sep 2003 16:16:15 -0000
Received: (qmail 13408 invoked by alias); 24 Sep 2003 16:15:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6612
Received: (qmail 13389 invoked from network); 24 Sep 2003 16:15:33 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 24 Sep 2003 16:15:33 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [212.227.126.204] by sunsite.dk (MessageWall 1.0.8) with SMTP; 24 Sep 2003 16:15:33 -0000
Received: from [172.17.36.7] (helo=erdbeere.use.schlund.de)
	by mxintern.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1A2CIf-00050w-00
	for zsh-users@sunsite.dk; Wed, 24 Sep 2003 18:15:33 +0200
Received: from luthien by erdbeere.use.schlund.de with local
	id 1A2CJi-0003yF-00
	for <zsh-users@sunsite.dk>; Wed, 24 Sep 2003 18:16:38 +0200
Date: Wed, 24 Sep 2003 18:16:38 +0200
From: Dominik Vogt <dominik.vogt@gmx.de>
To: zsh-users@sunsite.dk
Subject: Re: a little problem with the second argument to cd
Message-ID: <20030924161638.GG32061@gmx.de>
Reply-To: zsh-users@sunsite.dk
Mail-Followup-To: zsh-users@sunsite.dk
References: <20030924135231.GB32061@gmx.de> <1030924153602.ZM30551@candle.brasslantern.com> <20030924155949.GE32061@gmx.de>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="uQr8t48UFsdbeI+V"
Content-Disposition: inline
In-Reply-To: <20030924155949.GE32061@gmx.de>
User-Agent: Mutt/1.3.28i


--uQr8t48UFsdbeI+V
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Well, I thought someone else might be interested in my cd
function:

0, 3 or more arguments:

  Works like "builtin cd"

1 Argument

  - If the argument is a directory name it cds into it.
  - If the name ends with a colon, and a directory with the colon
    stripped from the name exists, it cds into it.  (Usefull for
    cut-and-paste).
  - If the argument is a file and the file name ends in .tar.gz,
    .tar.bz2, .tgz, .TGZ, .zip or .ZIP, it strips the suffix and
    cds into the directory with that name (if there is one).
  - If the argument is a plain file, it cds into the directory in
    which the file resides.
  - If all the above attempts fail, works like "builtin cd $1".

2 Arguments

  As discussed above.

Ciao

Dominik ^_^  ^_^

--uQr8t48UFsdbeI+V
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename=cd

function cd ()
{
	case $# in
	    0)
		builtin cd
		;;
	    1)
		VAR="$1"
		DIR=`dirname "$1"`
		if [[ -d "$1" ]]; then
		    builtin cd "$1"
		elif STRIP="$DIR/`basename \"$VAR\" :`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif STRIP="$DIR/`basename \"$VAR\" .tar.gz`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif STRIP="$DIR/`basename \"$VAR\" .tar.bz2`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif STRIP="$DIR/`basename \"$VAR\" .tgz`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif STRIP="$DIR/`basename \"$VAR\" .TGZ`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif STRIP="$DIR/`basename \"$VAR\" .zip`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif STRIP="$DIR/`basename \"$VAR\" .ZIP`" &&
			[[ -d "$STRIP" ]]; then
		    builtin cd "$STRIP"
		elif [[ -f "$1" ]]; then
		    builtin cd "$DIR"
		else
		    builtin cd "$1"
		fi
		;;
	    2)
		integer i=0
		local target="$1"
		if ((ARGC > 1)); then
			while ((++i)) &&
				[[ "$PWD" != "${(SI-$i-)PWD#${(q)1}}" ]]
			do
				target="${(SI-$i-)PWD/${(q)1}/$2}"
				[[ -d "$target" && -r "$target" ]] && break
				target="${(SI-$i-)PWD//${(q)1}/$2}"
				[[ -d "$target" && -r "$target" ]] && break
				target=
			done
		fi
		builtin cd "${target:-${PWD/${(q)1}/$2}}"
		;;
	    **)
		builtin cd $*
		;;
	esac
}

--uQr8t48UFsdbeI+V--


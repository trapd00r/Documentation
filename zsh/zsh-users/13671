From zsh-users-return-13671-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 08 14:03:16 2009
Return-Path: <zsh-users-return-13671-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8603 invoked from network); 8 Jan 2009 14:03:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Jan 2009 14:03:13 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 80970 invoked from network); 8 Jan 2009 14:03:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Jan 2009 14:03:01 -0000
Received: (qmail 26810 invoked by alias); 8 Jan 2009 14:02:44 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13671
Received: (qmail 26795 invoked from network); 8 Jan 2009 14:02:43 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 8 Jan 2009 14:02:43 -0000
Received: from mail.gmx.net (mail.gmx.net [213.165.64.20])
	by bifrost.dotsrc.org (Postfix) with SMTP id 5958B802720C
	for <zsh-users@sunsite.dk>; Thu,  8 Jan 2009 15:02:41 +0100 (CET)
Received: (qmail invoked by alias); 08 Jan 2009 14:02:40 -0000
Received: from p54925C14.dip.t-dialin.net (EHLO localhost) [84.146.92.20]
  by mail.gmx.net (mp025) with SMTP; 08 Jan 2009 15:02:40 +0100
X-Authenticated: #15650693
X-Provags-ID: V01U2FsdGVkX18p46g7X3UpI3/jvoQOvsMVCO1RU7xxpZ5kJ6x0vy
	d1qlU4jIykmZMd
Date: Thu, 8 Jan 2009 15:06:05 +0100
From: Christian Schneider <strcat@gmx.net>
To: zsh-users@sunsite.dk
Subject: Re: "unarchive" script/function?
Message-ID: <20090108140605.GA11234@painless.my-fqdn.de>
Mail-Followup-To: zsh-users@sunsite.dk
References: <d2ecb10b0901070818v44d2bbbdvb03b11d0fb0410e0@mail.gmail.com> <20090108015216.GW14649@prunille.vinc17.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20090108015216.GW14649@prunille.vinc17.org>
X-GPG-Key: gpg --recv-keys --keyserver wwwkeys.eu.pgp.net 47E322CE
X-PGP-Fingerprint: 0095 C0F5 C03D 776A F585  0A46 4B6F 1932 47E3 22CE
X-Important: <http://www.ccc.de/updates/2007/biometrie-terror>
Organization: Born to frag.
X-Now-Playing: kr00t0n - Breaking the Fall [October 2004]
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Y-GMX-Trusted: 0
X-FuHaFi: 0.54
X-Virus-Scanned: ClamAV 0.92.1/8843/Thu Jan  8 07:01:58 2009 on bifrost
X-Virus-Status: Clean

* Vincent Lefevre <vincent@vinc17.org> typed:
> On 2009-01-07 11:18:38 -0500, TjL wrote:
> > Basically I want to be able to throw any kind of archive/compression
> > method and have them all dealt with, so I could theoretically do this:
> > 
> >          unarchive file1.zip file2.tar file3.tbz file4.tar.gz
> > 
> > and the "unarchive' program would know what to do with each.
> 
> FYI, I have in my .zshrc:
> 
> unarch()
> {
>   local file decomp
>   for file in $@
>   do
>     unset decomp
>     [[ ( $file:e == gz && $file:r:e == tar ) || $file:e == tgz ]] \
>       && decomp=gunzip
>     [[ $file:e == bz2 && $file:r:e == tar ]] \
>       && decomp=bunzip2
>     [[ $file:e == lzma && $file:r:e == tar ]] \
>       && decomp=unlzma
>     if [[ -z $decomp ]] then
>       echo "Usage: $0 [ \033[4mtgz-file\033[m | \033[4mbz2-file\033[m ] | \033[4mlzma-file\033[m ] ..." >&2
>       return 1
>     fi
>     if [[ -r $file ]] then
>       echo "$0 $file ..."
>       $decomp $file -c | tar xf -
>     else
>       echo "$0: $file is not readable" >&2
>     fi
>   done
> }

I use Ç”np(1) (<http://packages.debian.org/etch/unp>); it's a perl script
which runs the correct unpack program depending on the file extension of
the given parameter. HTH
-- 
"Another world, another day, another dawn. "


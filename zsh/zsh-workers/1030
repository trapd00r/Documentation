From hzoli@cs.elte.hu Thu May  9 10:52:27 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id KAA18148 for <mason@werple.mira.net.au>; Thu, 9 May 1996 10:52:25 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id UAA22066; Wed, 8 May 1996 20:44:14 -0400 (EDT)
Resent-Date: Wed, 8 May 1996 20:44:14 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199605090044.CAA29920@bolyai.cs.elte.hu>
Subject: Re: echotc
To: A.Main@dcs.warwick.ac.uk (Zefram)
Date: Thu, 9 May 1996 02:44:26 +0200 (MET DST)
Cc: A.Main@dcs.warwick.ac.uk, zsh-workers@math.gatech.edu
In-Reply-To: <9906.199605090036@stone.dcs.warwick.ac.uk> from Zefram at "May 9, 96 01:36:41 am"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"9wEbd.0.iO5.T_Jan"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1030
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1055
Status: O

> >This can only happen if NCURSES_VERSION but you do not link zsh with
> >ncurses or if your ncurses behaves differently than mine.  I use 1.9.8a
> >and it the tgetflags function there returns 1 if a boolean capability is
> >on, 0 if it is off and -1 if there is no boolean capability with that
> >name.  We can add checks for older ncurses'es if necessary.
> 
> It shouldn't be touching ncurses at all.  There is a termcap library
> that works, and a quick strings of the binary shows that it's linked
> with it.  The man page makes no mention of tgetflag() returning -1,
> however.

But look at the code in builtin.c.  puts("no"); near line 4193 is compiled
iff NCURSES_VERSION is defined.  I did compile zsh on SunOS 4 and echotc
works for me (without ncurses).  If one is not careful enough when
installing ncurses, ncurses installs termcap.h which will be used instead
of the system termcap.h which will cause problems with other applications
as well not only with zsh.  Are you sure that the included termcap.h does
not come from ncurses?

Zoltan



From zsh-workers-return-11660-mason-zsh=primenet.com.au@sunsite.auc.dk Tue May 30 12:59:46 2000
Return-Path: <zsh-workers-return-11660-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1353 invoked from network); 30 May 2000 12:59:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 May 2000 12:59:45 -0000
Received: (qmail 16733 invoked by alias); 30 May 2000 12:59:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11660
Received: (qmail 16726 invoked from network); 30 May 2000 12:59:28 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: PATCH: _man for Pyramid broken - and question about backslash in ${.../...}
Date: Tue, 30 May 2000 16:59:19 +0400
Message-ID: <000601bfca36$de648e80$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0007_01BFCA58.65762E80"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01BFCA58.65762E80
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit


The change in `%' treatment broke _man completion for Pyramid. The fix
is triovial (attached because of line length), but I have different
question:

what is the "canonical" treatment of backslashes in pattern? I would
expected, that the original form should work:

$manpath/\\%L/...} - this gets passed as `\%L' pattern that is finally
the same as just '%L'? Obviously, not.

A line in manual, describing what happens with backslashes, is welcome
:-)

-andrej

Have a nice DOS!
B >>

------=_NextPart_000_0007_01BFCA58.65762E80
Content-Type: application/octet-stream;
	name="_man.patch"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="_man.patch"

--- Completion/User/_man	Wed Apr 12 21:12:55 2000=0A=
+++ /tools/share/zsh/3.1.7/functions/User/_man	Tue May 30 16:50:19 2000=0A=
@@ -27,7 +27,7 @@=0A=
 # `sman' is the SGML manual directory for Solaris 7.=0A=
 # 1M is system administrator commands on SVR4=0A=
 =0A=
-mrd=3D(${^manpath/\\%L/${LANG:-En_US.ASCII}}/mandb(N))=0A=
+mrd=3D(${^manpath/\%L/${LANG:-En_US.ASCII}}/mandb(N))=0A=
 if [[ $words[2] =3D (<->*|1M|l|n) ]]; then=0A=
   rep=3D(=0A=
   =
$manpath/(sman|man|cat)${words[2]}/${~approx}$PREFIX${~star}$SUFFIX.<->*(=
N:t) )=0A=

------=_NextPart_000_0007_01BFCA58.65762E80--


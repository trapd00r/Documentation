From zsh-workers-return-8908-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Dec 06 10:14:19 1999
Return-Path: <zsh-workers-return-8908-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23128 invoked from network); 6 Dec 1999 10:14:18 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Dec 1999 10:14:18 -0000
Received: (qmail 20264 invoked by alias); 6 Dec 1999 10:14:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8908
Received: (qmail 20257 invoked from network); 6 Dec 1999 10:14:10 -0000
Subject: Re: PATCH: Program transform name, again
In-Reply-To: <991206023942.ZM9128@candle.brasslantern.com> from Bart Schaefer at "Dec 6, 1999  2:39:42 am"
To: schaefer@candle.brasslantern.com (Bart Schaefer)
Date: Mon, 6 Dec 1999 10:14:08 +0000 (GMT)
Cc: zsh-workers@sunsite.auc.dk
X-Mailer: ELM [version 2.4ME+ PL48 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id: <E11uv9l-0005fu-00@crucigera.fysh.org>
From: Zefram <zefram@fysh.org>

Bart Schaefer wrote:
>4.  Name transform is applied to the @setfilename line in zsh.texi.in to
>    generate zsh.texi.  Note that if a --program-suffix is supplied, the
>    resulting file name does not end in .info, which is almost certainly
>    a bad thing and is the leading argument that --program-transform-name
>    is intended to apply only to the name of the binary.
>5.  Name transform is applied to manual page names as well.  Same caveat
>    about --program-suffix.

No, no, this is all wrong.  You should be doing

	tzsh=`echo zsh | sed '@program_transform_name@'`

and then in each installed filename replace the substring "zsh" with "$(tzsh)".  So you'd do

	$(INSTALL_DATA) zshzle.1 $(DESTDIR)$(mandir)/man1/$(tzsh)zle.1

and so on.  The transform applies to the *program* name -- `zsh' -- not to
the actual filenames.  Furthermore, no transformed-name files, except the
info files (but they're an exception), should appear in the build tree.

-zefram


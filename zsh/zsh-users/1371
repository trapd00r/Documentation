From zsh-workers-request@math.gatech.edu Fri Mar 06 06:02:03 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 27520 invoked from network); 6 Mar 1998 06:02:01 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 6 Mar 1998 06:02:01 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id AAA05845;
	Fri, 6 Mar 1998 00:38:48 -0500 (EST)
Resent-Date: Fri, 6 Mar 1998 00:34:05 -0500 (EST)
To: zsh-users@math.gatech.edu
Path: mason
From: mason@primenet.com.au (Geoff Wing)
Newsgroups: lists.zsh.users
Subject: Re: Incorrect TimeZone usage in prompts - bug?
Date: 6 Mar 1998 05:36:08 GMT
Organization: A poorly-installed InterNetNews site
Lines: 39
Message-ID: <slrn6fv2q8.puk.mason@coral.primenet.com.au>
References: <01bd46e3$37feae00$e3efec82@h227.ryd.student.liu.se> from "Andreas Sigfridsson" at Mar 3, 98 09:30:34 pm <199803040947.JAA23744@taos.demon.co.uk>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 889162568 26581 (None) 203.24.36.33
X-Complaints-To: usenet@coral.primenet.com.au
X-Newsreader: slrn (0.9.4.6 UNIX)
Resent-Message-ID: <"oRyp6.0.gP1.Chu_q"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1371
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Andrew Main <zefram@tao.co.uk> typed:
:Andreas Sigfridsson wrote:
:>I like to have the time being displayed in my prompt, but on both my Linux
:>computers, they display the wrong time. I live in Sweden where whe have CET,
:>but zsh displays GMT. Being quite a novice on Unix/Linux I understand that
:>system time can be represented in the computer in two different ways. Either
:>the actual local time, or GMT with a timezone. I guess I use the latter one,
:>and I cannot change, because I run Windows on the same computer. Is it
:>possible that zsh just takes the clock and uses it regardless of the
:>timezone?
:This is tricky.
:
:The Unix model of timekeeping is that the kernel maintains a count of
:the number of seconds since the epoch, which is 1970-01-01 midnight UTC.
:When displaying a time, library functions examine the environment variable
:TZ, and display the time relative to this timezone.
:
:The Windoze model of timekeeping is that the kernel knows the current
:date and time of day, for the current timezone.  This kernel clock needs
:to change whenever DST causes a change of timezone.
:
:These two models are fundamentally inconsistent, so you're just asking for
:trouble in trying to use both of them on the same machine.  This being
:a PC, you're further affected by the fact that the PC's hardware clock
:actually keeps track of date and time, and has no idea of timezone.

Does Linux have a compile option (or otherwise) to specify an offset of the
real time clock?  NetBSD does so that on my (home) computer I run
NetBSD/Win95/WinNT happily with xntpd running on NetBSD & WinNT (well, except
for Microsoft's daylight-savings timezone stuffup for people in many
parts of Australia).  Maybe you need to convince Linus or whoever is in 
charge of the kernel these days about its usefulness.

As for what to do in the meantime, set all your clocks, watches and everything
else to GMT, and then you won't have to worry about setting up zsh especially
at all :-)
-- 
Geoff Wing   <gcw@pobox.com>            Mobile : 0412 162 441 
Work URL: http://www.primenet.com.au/   Ego URL: http://pobox.com/~gcw/


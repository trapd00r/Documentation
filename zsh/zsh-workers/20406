From zsh-workers-return-20406-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 23 09:41:30 2004
Return-Path: <zsh-workers-return-20406-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10641 invoked from network); 23 Sep 2004 09:41:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Sep 2004 09:41:29 -0000
Received: (qmail 68637 invoked from network); 23 Sep 2004 09:41:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Sep 2004 09:41:22 -0000
Received: (qmail 23406 invoked by alias); 23 Sep 2004 09:41:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20406
Received: (qmail 23391 invoked from network); 23 Sep 2004 09:41:08 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 23 Sep 2004 09:41:08 -0000
Received: (qmail 67961 invoked from network); 23 Sep 2004 09:40:10 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 23 Sep 2004 09:39:57 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-3.tower-36.messagelabs.com!1095932295!9515903
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 16530 invoked from network); 23 Sep 2004 09:39:33 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-3.tower-36.messagelabs.com with SMTP; 23 Sep 2004 09:39:33 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i8N9R0AI007484
	for <zsh-workers@sunsite.dk>; Thu, 23 Sep 2004 10:27:00 +0100
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id E7D2B79885EE
	for <zsh-workers@sunsite.dk>; Thu, 23 Sep 2004 11:26:39 +0200 (CEST)
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <Pine.LNX.4.61.0409230039020.21324@toltec.zanshin.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <20040922091323.V45751@thor.farley.org> <Pine.LNX.4.61.0409220822040.16822@toltec.zanshin.com> <20040922205546.1fb37a99@buddha.localdomain.de> <Pine.LNX.4.61.0409230039020.21324@toltec.zanshin.com>
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: zsh-4.2.1: unset does not follow spec 
Date: Thu, 23 Sep 2004 11:26:39 +0200
Message-ID: <23277.1095931599@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Bart wrote:
> > BTW, the behaviour of unset should, I think, depend on the UNSET option.
> > If UNSET is off, then unset should report an error if the variable is
> > already unset.
> 
> This is actually what I was going to suggest.

Nice try but the unset option (or nounset to be precise) is one of the
options defined in the POSIX specification.

Even if that were not the case, I would disagree. The unset option deals
with variable expansions and I don't see why it would be useful to
overload it with control of this issue. A user's preference on the two
issues wouldn't necessarily correlate.

The specification looks fairly clear to me (zsh is wrong) and I can't
see why anyone would be sufficiently attached to the old behaviour to
want an option for it.

> (Is it time for "emulate posix"?)

Possibly.

How would it differ from "emulate sh"?

Oliver


From zsh-workers-return-13136-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Nov 08 12:38:28 2000
Return-Path: <zsh-workers-return-13136-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 537 invoked from network); 8 Nov 2000 12:38:27 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Nov 2000 12:38:27 -0000
Received: (qmail 19027 invoked by alias); 8 Nov 2000 12:38:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13136
Received: (qmail 19020 invoked from network); 8 Nov 2000 12:38:16 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>,
   <zsh-workers@sunsite.auc.dk>
Subject: RE: PATCH: Run builtins, functions, etc. under zpty
Date: Wed, 8 Nov 2000 15:38:03 +0300
Message-ID: <001b01c04980$bcd76c50$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <1001105223736.ZM1787@candle.brasslantern.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal


Attempt to run any (external) command with zpty under Cygwin now results in:

zsh: can't set tty pgrp: not owner

(from child process) and hanging? zsh. That is what I have in process list:

$ ps -l
      PID    PPID    PGID     WINPID TTY  UID    STIME COMMAND
     1696       1    1696       1696   0 1006 15:22:33 /usr/bin/bash
      580       1     580        580   1 1006 15:22:34 /usr/bin/zsh
     2328     580    2328       2328  -1 1006 15:22:52 /usr/bin/zsh
     2188    1696    2188       1904   0 1006 15:28:35 /usr/bin/ps

for "zpty sh /bin/sh". Zsh does not appear to execute command at all, but it
does not exit either.

This happens with the version of cygwin that did work before, so it is very
much related to the changes in zsh. The messages above comes from attachtty,
but I am not sure when it is executed and what happens after this, i.e. why
zsh apparently "hangs".

-andrej


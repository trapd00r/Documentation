From zsh-workers-return-11749-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 05 09:48:35 2000
Return-Path: <zsh-workers-return-11749-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1346 invoked from network); 5 Jun 2000 09:48:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Jun 2000 09:48:33 -0000
Received: (qmail 10306 invoked by alias); 5 Jun 2000 09:48:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11749
Received: (qmail 10298 invoked from network); 5 Jun 2000 09:48:23 -0000
Message-ID: <393B7736.13C3C00B@u.genie.co.uk>
Date: Mon, 05 Jun 2000 10:47:34 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.73 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: complete rpm --{resign,addsign} in local
References: <m2itvpteye.fsf@vador.mandrakesoft.com> <1000605011855.ZM20257@candle.brasslantern.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Bart Schaefer wrote:

> Meanwhile, it ought to complete http URLs as well as ftp.

>    package_file)
> -    if compset -P ftp://; then
> +    if compset -P '(f|ht)tp://'; then
>        _hosts -S/ && ret=0
>      else

Shouldn't we be calling _urls here instead of partially repeating it? It
shouldn't be too hard to adapt _urls to pass any -g options to any
_files so we could tell it here to complete .rpm files only. The only
slightly messy part would be preventing it from completing gopher and
file urls; any ideas? Maybe _urls should have an option to restrict the
url types.
I can make these changes but don't use rpm so it'd be useful to hear if
anyone thinks this would be useful.

Peter: A build I set off on Saturday on AIX has failed with one of the
usual dependency problems so don't make any releases until I've commited
a patch which may be a while later today as our old RS/6000s take quite
a while to do a build.

Oliver


From zsh-users-return-15768-mason-zsh=primenet.com.au@zsh.org Sat Feb 05 07:29:03 2011
Return-Path: <zsh-users-return-15768-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4942 invoked by alias); 5 Feb 2011 07:29:03 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15768
Received: (qmail 652 invoked from network); 5 Feb 2011 07:28:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.3.1
Received-SPF: none (proxy.melb.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <110204072515.ZM23328@torch.brasslantern.com>
Date: Fri, 04 Feb 2011 07:25:15 -0800
In-reply-to: <87r5bo9kws.fsf@old-tantale.fifi.org>
Comments: In reply to Philippe Troin <phil@fifi.org>
 "Re: Printing ^C, ^D key presses at end of prompt when pressed" (Feb  4,
 2:03am)
References: <AANLkTike3e1M6NUSA=YoFOsyRhmumkgDvo=H+pdc64FC@mail.gmail.com>
	<110203202058.ZM22332@torch.brasslantern.com>
	<87r5bo9kws.fsf@old-tantale.fifi.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Re: Printing ^C, ^D key presses at end of prompt when pressed
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Feb 4,  2:03am, Philippe Troin wrote:
} Subject: Re: Printing ^C, ^D key presses at end of prompt when pressed
}
} bash-4.1$ stty echoctl
} bash-4.1$ ^C
} bash-4.1$ stty -echoctl
} bash-4.1$                  <--- Ctrl-C pressed, no output.
} 
} No such luck in zsh (stty echoctl has no effect).

I actually did try this in bash before writing my original response.
On the CentOS systems I have access to, echoctl makes no difference
whatsoever to bash.  OTOH, they don't have bash4, so maybe this is
something changed in readline at some point since bash3.  Or ...

} No such luck in zsh (stty echoctl has no effect).
} Coult it a spurious line redraw on ctrl-C (and others)?

Sorry, could you rephrase that?
 
} Note how echoctl still works in zsh when using the read builtin or
} just cat:
} 
} phil@air:~% stty echoctl
} phil@air:~% read
} ^C%
} zsh: exit 1
} phil@air:~% cat
} ^C

On what may be a third hand, I don't get *that* either.  I have echoctl
on all the time, but just to be doubly sure:

schaefer<511> STTY=echoctl cat 

schaefer<512> 

Maybe there's yet another stty option getting involved here?  Even with
bash3 I don't see the ^C when I interrupt cat.

And just for completeness:

schaefer<516> setopt printexitvalue
schaefer<517> read
zsh: exit 1
schaefer<518> STTY=echoctl cat       

zsh: interrupt  STTY=echoctl cat
schaefer<519> 


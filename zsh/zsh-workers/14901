From zsh-workers-return-14901-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 13 12:55:28 2001
Return-Path: <zsh-workers-return-14901-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3138 invoked from network); 13 Jun 2001 12:55:26 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Jun 2001 12:55:26 -0000
Received: (qmail 15175 invoked by alias); 13 Jun 2001 12:54:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14901
Received: (qmail 15108 invoked from network); 13 Jun 2001 12:54:33 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Wed, 13 Jun 2001 14:53:30 +0200 (MET DST)
Message-Id: <200106131253.OAA04316@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: The group-order and tag-order styles
In-Reply-To: <1010613114538.ZM26897@candle.brasslantern.com>

Bart Schaefer wrote:

> ...
> 
> With just the last of these styles, completion after `ssh' lists two groups:
> hosts first, then users.  What I want to see is three groups:  hosts by
> domain name, then users, then hosts by IP address.  Adding the other styles
> successfully splits the result into three groups, but the users are always
> listed first.  Also, the explanation strings (`domains' and `IP addresses')
> from the group-order style are never shown in the listing.
> 
> What am I missing?

The group-order style takes just group names as values, no fancy
aliasing or description stuff, that comes with the tag-order style.
Like so:

  zstyle ':completion:*:ssh:*' tag-order \
    'hosts:-domain:domains hosts:-ipaddr:IP\ addresses *'
  zstyle ':completion:*:ssh:*' group-order \
    hosts-domain users hosts-ipaddr
  zstyle ':completion:*:ssh:*:hosts-domain' ignored-patterns '<->.<->.<->.<->'
  zstyle ':completion:*:ssh:*:hosts-ipaddr' ignored-patterns '^<->.<->.<->.<->'
  zstyle -e ':completion:*:ssh:*' hosts 'reply=(
    ${=${${(f)"$(cat {/etc/ssh_,~/.ssh/known_}hosts(|2)(N) \
		     /dev/null)"}%%[# ]*}//,/ }
    ${=${(f)"$(cat /etc/hosts(|)(N) <<(ypcat hosts 2>/dev/null))"}%%\#*}
    )'

Which gives me what you want.


Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-8218-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 16 13:58:46 2004
Return-Path: <zsh-users-return-8218-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21961 invoked from network); 16 Nov 2004 13:58:45 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Nov 2004 13:58:45 -0000
Received: (qmail 10867 invoked from network); 16 Nov 2004 13:58:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Nov 2004 13:58:39 -0000
Received: (qmail 7689 invoked by alias); 16 Nov 2004 13:57:47 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8218
Received: (qmail 7674 invoked from network); 16 Nov 2004 13:57:46 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 16 Nov 2004 13:57:46 -0000
Received: (qmail 9673 invoked from network); 16 Nov 2004 13:57:46 -0000
Received: from mail3.panix.com (166.84.1.74)
  by a.mx.sunsite.dk with SMTP; 16 Nov 2004 13:57:44 -0000
Received: from panix3.panix.com (panix3.panix.com [166.84.1.3])
	by mail3.panix.com (Postfix) with ESMTP id C230698233
	for <zsh-users@sunsite.dk>; Tue, 16 Nov 2004 08:57:43 -0500 (EST)
Received: (from kynn@localhost)
	by panix3.panix.com (8.11.6p2-a/8.8.8/PanixN1.1) id iAGDvhJ28897;
	Tue, 16 Nov 2004 08:57:43 -0500 (EST)
Date: Tue, 16 Nov 2004 08:57:43 -0500 (EST)
Message-Id: <200411161357.iAGDvhJ28897@panix3.panix.com>
From: <kynn@panix.com>
To: zsh-users@sunsite.dk
Subject: Build errors
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.2 required=6.0 tests=NO_REAL_NAME autolearn=no 
	version=2.63
X-Spam-Hits: 0.2





I want to be able to do

  autoload colors zsh/terminfo

in a script, but my ISP does not support the zsh terminfo module, so I
tried compiling zsh from source.  After running ./configure I modified
the link parameter terminfo line in config.modules from

name=zsh/terminfo modfile=Src/Modules/terminfo.mdd link=static auto=yes load=yes

to

name=zsh/terminfo modfile=Src/Modules/terminfo.mdd link=dynamic auto=yes load=yes

My goal was to put the compiled terminfo.so file in my $HOME/.zmodules
directory, and add this directory to my modules_path variable.  (Then
I would discard the rest of my compiled zsh, and use the zsh provided
by my ISP in /usr/local/bin.)

When I ran make, it tripped on terminfo:

  gcc -c -I.  -DHAVE_CONFIG_H -DMODULE -Wall -Wmissing-prototypes -O2 -fPIC -o terminfo..o terminfo.c
  In file included from terminfo.c:53:
  /usr/include/curses.h:452: `underscore' redeclared as different kind of symbol
  ../../Src/init.epro:6: previous declaration of `underscore'
  terminfo.c: In function `bin_echoti':
  terminfo.c:78: warning: implicit declaration of function `tigetnum'
  terminfo.c:83: warning: implicit declaration of function `tigetflag'
  terminfo.c:95: warning: implicit declaration of function `tigetstr'
  terminfo.c:121: warning: implicit declaration of function `putp'
  terminfo.c:123: warning: implicit declaration of function `tparm'
  terminfo.c: In function `boot_':
  terminfo.c:385: warning: implicit declaration of function `setupterm'
  *** Error code 1

  Stop.

There seems to be some conflict with the local system's curses.h file.
Is there any way I can fix this?

Here are some system details:

  % uname -ar
  NetBSD my_isp3.my_isp.com 1.5.4_ALPHA NetBSD 1.5.4_ALPHA (MY_ISP-USER) #0: Thu Feb 26 14:11:15 EST 2004     root@some_host.my_isp.com:/devel/NO-BACKUPS/release-1.5-20020917/src/sys/arch/i386/compile/MY_ISP-USER i386

Thanks!

k

PS: Please Cc: me in your replies


From zsh-workers-return-20969-mason-zsh=primenet.com.au@sunsite.dk Fri Mar 11 11:16:11 2005
Return-Path: <zsh-workers-return-20969-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24488 invoked from network); 11 Mar 2005 11:16:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Mar 2005 11:16:10 -0000
Received: (qmail 16873 invoked from network); 11 Mar 2005 11:16:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Mar 2005 11:16:04 -0000
Received: (qmail 28976 invoked by alias); 11 Mar 2005 11:16:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20969
Received: (qmail 28962 invoked from network); 11 Mar 2005 11:16:00 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Mar 2005 11:16:00 -0000
Received: (qmail 16599 invoked from network); 11 Mar 2005 11:15:57 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 11 Mar 2005 11:15:49 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-11.tower-36.messagelabs.com!1110539728!14898981!1
X-StarScan-Version: 5.4.11; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 1404 invoked from network); 11 Mar 2005 11:15:28 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-11.tower-36.messagelabs.com with SMTP; 11 Mar 2005 11:15:28 -0000
Received: from trentino.logica.co.uk ([158.234.142.59])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id j2BBFR61023096;
	Fri, 11 Mar 2005 11:15:27 GMT
Received: from trentino.groupinfra.com (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id 67DF936515;
	Fri, 11 Mar 2005 12:15:07 +0100 (CET)
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <20050311104737.GA30225@lorien.comfychair.org> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <E1D9PCy-000Gis-00.arvidjaar-mail-ru@f9.mail.ru> <20050311104737.GA30225@lorien.comfychair.org>
To: Danek Duvall <duvall@comfychair.org>
Cc: zsh-workers@sunsite.dk
Subject: Re: [PATCH] _fuser Solaris and SVR4 support 
Date: Fri, 11 Mar 2005 12:15:06 +0100
Message-ID: <25034.1110539706@trentino.groupinfra.com>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Danek Duvall wrote:
> Another thing to note is that the value of $OSTYPE is compiled in, so
> relying on it may be the wrong thing if zsh is mounted from a shared
> directory.  Features also may be backported to older releases, so even the
> output of uname -r isn't necessarily going to be right.

That applies to quite a lot of completion functions then. I suggest we
just stick to $OSTYPE for this for now and worry about fixing the wider
problem separately.

> Here's a proposed patch that parses the output of "fuser -?".  It works
> correctly for Solaris 8, 9, and 10, AFAICT.  Coming up with this was just
> too difficult, and someone surely can figure out a better way of doing it.

Have a look at _finger. It does something very similar in a way that
looks less complicated. If we try something like this, it could be good
if it also handled the psmisc (Linux) implementation of fuser.

Oliver

PS. Imediately after hitting send for my last message I realised that
what I was said about breaking file completion was crap so ignore that.
Sorry.


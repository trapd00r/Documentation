From zsh-workers-return-13014-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Oct 17 21:22:33 2000
Return-Path: <zsh-workers-return-13014-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2234 invoked from network); 17 Oct 2000 21:22:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Oct 2000 21:22:31 -0000
Received: (qmail 1781 invoked by alias); 17 Oct 2000 21:22:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13014
Received: (qmail 1768 invoked from network); 17 Oct 2000 21:22:20 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <001017142111.ZM3802@candle.brasslantern.com>
Date: Tue, 17 Oct 2000 14:21:11 -0700
In-Reply-To: <200010171935.PAA14828@soup.ql.org>
Comments: In reply to "E. Jay Berkenbilt" <ejb@ql.org>
        "parse errors and up-line-or-history" (Oct 17,  3:35pm)
References: <200010171935.PAA14828@soup.ql.org>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: "E. Jay Berkenbilt" <ejb@ql.org>, zsh-workers@sunsite.auc.dk
Subject: Re: parse errors and up-line-or-history
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Oct 17,  3:35pm, E. Jay Berkenbilt wrote:
> 
> zsh% for in *; do echo $i; done
> zsh: parse error near `do'
> 
> which seems entirely reasonable.  If you then do ^p to fix it, you see
> only
> 
> zsh% for in *; do
> 
> and not the whole command.

Congratulations, you've revived the "literal vs. lexical history" debate,
if it ever really was a debate.

Zsh used to have an option to store the command history as the literal
input text, rather than as lexical words.  IIRC, it actually stored both
and let you select which one to retrieve.  The duplication was resolved
in favor of lexical history a *very* long time ago, with the side-effect
that anything that won't lex, doesn't make it into the history.

For a partial workaround, see zsh-workers/10996.


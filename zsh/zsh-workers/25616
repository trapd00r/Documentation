From zsh-workers-return-25616-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 05 09:12:36 2008
Return-Path: <zsh-workers-return-25616-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8471 invoked from network); 5 Sep 2008 09:12:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Sep 2008 09:12:30 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 74999 invoked from network); 5 Sep 2008 09:12:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Sep 2008 09:12:23 -0000
Received: (qmail 13437 invoked by alias); 5 Sep 2008 09:12:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25616
Received: (qmail 13428 invoked from network); 5 Sep 2008 09:12:16 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 5 Sep 2008 09:12:16 -0000
Received: from vms046pub.verizon.net (vms046pub.verizon.net [206.46.252.46])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 70B9E80271AE
	for <zsh-workers@sunsite.dk>; Fri,  5 Sep 2008 11:12:13 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.178])
 by vms046.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K6O002H3I5781B0@vms046.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 04 Sep 2008 11:07:56 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m84G7pL2012571	for
 <zsh-workers@sunsite.dk>; Thu, 04 Sep 2008 09:07:55 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m84G7dcg012570	for zsh-workers@sunsite.dk; Thu,
 04 Sep 2008 09:07:39 -0700
Date: Thu, 04 Sep 2008 09:07:39 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Bug#497663: Tab completion for vim is broken
In-reply-to: <20080904120602.GB30607@fsst.voodoo.lan>
To: zsh-workers@sunsite.dk
Message-id: <080904090739.ZM12569@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20080903130432.9601.64807.reportbug@ryoko>
	<20080903182826.GB7955@scru.org>	<87prnk703i.fsf_-_@debian.org>
	<20080904100301.GA19939@scru.org>	<20080904120602.GB30607@fsst.voodoo.lan>
Comments: In reply to Frank Terbeck <ft@bewatermyfriend.org>
 "Re: Bug#497663: Tab completion for vim is broken" (Sep  4,  2:06pm)
X-Virus-Scanned: ClamAV 0.92.1/8165/Fri Sep  5 10:19:43 2008 on bifrost
X-Virus-Status: Clean

On Sep 4,  2:06pm, Frank Terbeck wrote:
}
} But I don't understand, why this is not enough:
} 
} +emulate -L zsh
} +

The reason is that the eumulate doesn't take effect until the function
is executed, whereas the quoting error is returned at the time the
function is parsed.  "emulate" does not work like a perl "use" pragma.

Even PWS's _comp_setup change won't do any good if _vim somehow gets
autoloaded before _main_complete begins executing.  Unlikely, but ...


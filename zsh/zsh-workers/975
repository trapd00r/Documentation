From mp@marvin.jpl.oz.au Wed May  1 12:59:23 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id MAA26823 for <mason@werple.mira.net.au>; Wed, 1 May 1996 12:59:20 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id WAA02857; Tue, 30 Apr 1996 22:35:40 -0400 (EDT)
Resent-Date: Tue, 30 Apr 1996 22:35:40 -0400 (EDT)
Message-Id: <XFMail.960501122725.mp@marvin.jpl.oz.au>
X-Mailer: XFMail 0.3 [p0] on Linux
Sender: mp@marvin.jpl.oz.au
Mime-Version: 1.0
Content-Type: multipart/mixed;
 boundary="_=XFMail.0.3.p0.Linux:960501122725:21154=_"
Reply-To: mp@marvin.jpl.oz.au
X-Face: w@M7IV#Svpa&~Mm`/UWDtKcI:@Z,\=+yKz|,(B\9`X~Q(]({3)$dA[qsgnDi&5Fj}]y,R6{
 ;c55jU3}sVh@he`*XgFohyZ`4/V-!?
Organization: Otis Building Technologies
Date: Wed, 01 May 1996 12:22:46 EST
From: Michael Pitman <mp@marvin.jpl.oz.au>
To: zsh-workers%math.gatech.edu@munnari.oz
Subject: expandorcompleteprefix patch
Resent-Message-ID: <"1hCaK2.0.Zi.xtiXn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/975
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1461
Status: OR

This message is in MIME format
--_=XFMail.0.3.p0.Linux:960501122725:21154=_
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit

Here is a very small patch to fix expand-or-complete-prefix when in automenu
mode (prob also in menucomplete mode too).

This comletion mechanism hasn't worked for a while, but I only just got around
to fixing it.  No idea how to properly submit patches, so I'm just going to
send to this mailing list with the hope that it's added.

Patch applies to zsh-2.6-beta15

Bye.
_______________________________________________
Michael Pitman <mp@marvin.jpl.oz.au>
Electrical Engineer, Otis Building Technologies

--_=XFMail.0.3.p0.Linux:960501122725:21154=_
Content-Description: zsh2615.patch
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset=us-ascii; name=zsh2615.patch; SizeOnDisk=542

diff -u zsh-2.6-beta15orig/Src/zle_tricky.c zsh-2.6-beta15/Src/zle_tricky.c
--- zsh-2.6-beta15orig/Src/zle_tricky.c	Thu Apr 25 13:25:41 1996
+++ zsh-2.6-beta15/Src/zle_tricky.c	Wed May  1 11:54:10 1996
@@ -4002,10 +4002,12 @@
 {
     /* global c is the current character typed. */
     int csafe = c;
+    int menusafe = menucmp;
 
     /* insert a space and backspace. */
     c = ' ';
     selfinsert();		/* insert the extra character */
+    menucmp = menusafe;
     forwardchar();		/* move towards beginning */
     
     remove_at = cs;

--_=XFMail.0.3.p0.Linux:960501122725:21154=_--
End of MIME message



From zsh-workers-return-6952-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jul 02 16:35:02 1999
Return-Path: <zsh-workers-return-6952-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16497 invoked from network); 2 Jul 1999 16:35:00 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Jul 1999 16:35:00 -0000
Received: (qmail 29739 invoked by alias); 2 Jul 1999 16:34:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6952
Received: (qmail 29732 invoked from network); 2 Jul 1999 16:34:54 -0000
Message-Id: <9907021606.AA33014@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: Alternative design for keymap code 
In-Reply-To: ""Anthony J Heading""'s message of "Thu, 01 Jul 1999 22:14:56 DFT."
             <482567A1.004530C0.00@nyc-ntgw-n01.ny.jpmorgan.com> 
Date: Fri, 02 Jul 1999 18:06:06 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

"Anthony J Heading" wrote:
> After reflecting for a while,  I believe there's still value in some of the
> design.    And I'm thinking instead that maybe there should be a shell
> parameter  KEYMAP/keymap  pair,  which specificies the prevailing set of
> keymaps.  These are searched in order.   Shell function are then able to
> push their own map onto the head the list if they need.  And by allowing
> the KEYMAP parameter to be function-local,  exit cleanup is automatic.

Just some thoughts while I'm waiting to go to a conference dinner: perhaps
these should be ZKEYMAP and zkeymap since we`re trying to keep the
parameter list reasonably unpolluted.  Also, if these are going to be tied,
then they should probably be normal rather than special tied arrays, since
if I remember right (I try hard never to look at this in the code since it
gives me nightmares, but it would seem I do) making special parameters
local still doesn`t work.  Maybe we should fix this, then I could sleep at
nights.  The problem is keeping them special and restoring the values, but
this has been pretty much solved for `special=value builtin' so it
shouldn't be too hard to solve it here as well.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


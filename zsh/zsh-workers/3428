From zsh-workers-request@euclid.skiles.gatech.edu Thu Aug 07 04:47:07 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 13319 invoked from network); 7 Aug 1997 04:47:05 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 7 Aug 1997 04:47:05 -0000
Received: (from list@localhost)
	by euclid.skiles.gatech.edu (8.8.5/8.8.5) id XAA14065;
	Wed, 6 Aug 1997 23:53:37 -0400 (EDT)
Resent-Date: Wed, 6 Aug 1997 23:53:37 -0400 (EDT)
From: <hzoli@VNET.IBM.COM> (Zoltan T. Hidvegi)
Message-Id: <9708070353.AA22734@belgium.fishkill.ibm.com>
Subject: Re: RC_EXPAND_PARAM final patch
In-Reply-To: <Pine.SV4.3.95.970806161128.13915G-100000@itsrm1> from Andrej Borsenkow at "Aug 6, 97 04:27:20 pm"
To: borsenkow.msk@sni.de
Date: Wed, 6 Aug 1997 23:53:44 -0400 (EDT)
Cc: hzoli@VNET.IBM.COM, zsh-workers@math.gatech.edu
X-Mailer: ELM [version 2.4ME+ PL31H (25)]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"Fk6WT1.0.fR3.0RKwp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3428
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Andrej Borsenkow wrote:
> % a=(a "b ")
> % x=(x "y z")
[...]
> % setopt shwordsplit
> % args ${^a}1
> "a1" "b1" "1"
> % args ${^x}1
> "x1" "y1" "z1"     ????
>
> Shouldn't it be  "x1" "y" "z1"  ?

Why? ${^x} in itself expands to 3 words, x y z, and that's combined with
`1'.  With sh_word_split, a word with spaces acts like an array.

The first example is a bit more hard to understand.  Here ${^a} expands to
3 words too, but the last word is a null word, which is removeded from the
argument list, unless it is contacenated with something real.  That's why
${^a}1 expands to a1 b1 1, just immagine an invisible zero-length word
before the last 1.

Zoltan


From zsh-workers-return-12510-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Aug 03 14:52:29 2000
Return-Path: <zsh-workers-return-12510-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9649 invoked from network); 3 Aug 2000 14:52:24 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Aug 2000 14:52:24 -0000
Received: (qmail 16098 invoked by alias); 3 Aug 2000 14:52:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12510
Received: (qmail 16091 invoked from network); 3 Aug 2000 14:52:10 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>,
   <zsh-workers@sunsite.auc.dk>
Subject: RE: Why is the body of main() back in init.c again?
Date: Thu, 3 Aug 2000 18:52:07 +0400
Message-ID: <000101bffd5a$64e64600$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <1000803144206.ZM32476@candle.brasslantern.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

>
> We started out with main() in init.c, and then we created main.c and moved
> main() there, and now main() is a stub and it's body is back in init.c.
>
> This sort of thing gives me a headache; it makes it very difficult to track
> changes within the code that's bouncing back and forth.
>

Mea culpa. The problem is, main() was referencing many things from libzsh that
were not mod_export'ed. So, at least with current implementation, there were
not seen on Cygwin (currently only mod_export'ed symbols are put into DLL
export list).

Is there any specific reson why main() should be in main.c? In this case,
probably, it is possible to just export everything from DLLs on Cygwin (that
is what happens on Unix anyway) and move main() back into main.c

-andrej


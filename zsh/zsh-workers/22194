From zsh-workers-return-22194-mason-zsh=primenet.com.au@sunsite.dk Sun Feb 05 20:44:55 2006
Return-Path: <zsh-workers-return-22194-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 883 invoked from network); 5 Feb 2006 20:44:52 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Feb 2006 20:44:52 -0000
Received: (qmail 60814 invoked from network); 5 Feb 2006 20:44:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Feb 2006 20:44:47 -0000
Received: (qmail 9462 invoked by alias); 5 Feb 2006 20:44:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22194
Received: (qmail 9452 invoked from network); 5 Feb 2006 20:44:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Feb 2006 20:44:43 -0000
Received: (qmail 60511 invoked from network); 5 Feb 2006 20:44:43 -0000
Received: from moonbase.zanshin.com (64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 5 Feb 2006 20:44:42 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.13.4/8.13.4) with ESMTP id k15KiewK023582
	for <zsh-workers@sunsite.dk>; Sun, 5 Feb 2006 12:44:40 -0800
Date: Sun, 5 Feb 2006 12:44:40 -0800 (PST)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: zsh-workers@sunsite.dk
Subject: Is a pristine shell allowed to set HOME? (fwd)
Message-ID: <Pine.LNX.4.64.0602051243550.4756@toltec.zanshin.com>
X-Face: "f/X=UCVgd*^c>+x(gMq0at?e:woX+;'snkkRzc3SX<0AZ (/PS4.M2hzGS9X:Qj]at_H/%a9K}:-eS<"v_7vX84PG9Bf Zpb`wI!I4geY=or+nWq`3CX`oq&TJR;g^ps|7(MH?jh;bs %vHJfCh5>a*6Re5m|Bidja\\o]>n\A)ib1:yX*T`zR(*h~ %tOw<~!D9{e6h!8M2:d8G2@K>y^1I_Vdy\d\MYe]z7c
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Zsh seems to be the odd man out, here.

---------- Forwarded message ----------
Date: Sun, 5 Feb 2006 20:14:07 +0100
From: Jens Schweikhardt <schweikh@schweikhardt.net>
To: austin-group-l@opengroup.org
Subject: Is a pristine shell allowed to set HOME?
Resent-Date: 5 Feb 2006 19:15:00 -0000
Resent-From: austin-group-l@opengroup.org
Resent-To: austin-group-l@opengroup.org

hello, world\n

I'm currently pondering the question, if a pristine shell, i.e one
started with "env -i /path/to/shell" is allowed to set (initialize)
HOME. 2.5.3 on shell variables states,

   HOME
    The pathname of the user's home directory. The contents of HOME are
    used in tilde expansion (see Tilde Expansion).

For three other variables, the standard explicitly says "set by the shell",

   LINENO
    Set by the shell to a decimal number...
   PPID
    Set by the shell to the decimal process ID...
   PWD
    Set by the shell to be an absolute pathname...

But it does not explicitly say so for HOME. Different shells behave
differently, e.g on FreeBSD

	# env -i /bin/sh -c set | grep ^HOME=
	# env -i /usr/local/bin/bash -c set | grep ^HOME=
	# env -i /usr/local/bin/zsh -c set|grep ^HOME=
	HOME=/root
	# env -i /usr/local/bin/ksh93 -c set|grep ^HOME=
	# env -i /usr/local/bin/pdksh -c set|grep ^HOME=
	# env -i /bin/csh -c 'echo $HOME'   # = tcsh
	HOME: Undefined variable.

Is it okay for a shell to initialize HOME if it does not come in from
the inherited environment?

Regards,

	Jens
-- 
Jens Schweikhardt http://www.schweikhardt.net/
SIGSIG -- signature too long (core dumped)


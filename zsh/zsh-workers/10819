From zsh-workers-return-10819-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 19 08:00:31 2000
Return-Path: <zsh-workers-return-10819-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16719 invoked from network); 19 Apr 2000 08:00:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Apr 2000 08:00:29 -0000
Received: (qmail 22436 invoked by alias); 19 Apr 2000 08:00:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10819
Received: (qmail 22419 invoked from network); 19 Apr 2000 08:00:08 -0000
Date: Wed, 19 Apr 2000 10:00:05 +0200 (MET DST)
Message-Id: <200004190800.KAA04575@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Tanaka Akira's message of 19 Apr 2000 16:12:58 +0900
Subject: Re: optional argument?


Tanaka Akira wrote:

> I think `optional arguments' of _arguments doesn't work now.
> 
> Z(4):akr@serein% Src/zsh -f
> serein% bindkey -e; autoload -U compinit; compinit -D
> serein% _tst () { _arguments '-o::optarg:(optarg)' ':arg1:(arg1)' }
> serein% compdef _tst tst
> serein% tst -o <TAB>
> ->
> serein% tst -o optarg 
> 
> If I understand correctly, this should completes `arg1' as well as
> `optarg'.

Hm, maybe it's time to change it...

Currently we only support completing options and the optional argument 
at the same time.

The problem is the `->' case: _arguments can't `add' matches for more
than one `->state' because it doesn't add any of them.

This is also related to the other question we had for _arguments some
time ago: supporting different `modes' with different sets of options
and arguments. For that we would need this multi-action thing, too. I
then suggested to support multiple `->state' things by reporting (to
the function calling _arguments) strings of the form `state1-state2'.
Or maybe I didn't suggest it, only thought of it.

In that case we could also make _alternative support `->state's.

Hm, I'll have a peep at this at the weekend, but don't promise
anything... ;-}


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


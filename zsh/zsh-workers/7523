From zsh-workers-return-7523-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Aug 27 19:38:23 1999
Return-Path: <zsh-workers-return-7523-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8204 invoked from network); 27 Aug 1999 19:38:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Aug 1999 19:38:22 -0000
Received: (qmail 6953 invoked by alias); 27 Aug 1999 19:38:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7523
Received: (qmail 6945 invoked from network); 27 Aug 1999 19:38:09 -0000
Message-Id: <199908271937.OAA28064@wo1203.cmg.FCNBD.COM>
Content-Type: text/plain
MIME-Version: 1.0 (NeXT Mail 4.2mach v148)
In-Reply-To: <199908271427.JAA23890@wo1203.cmg.FCNBD.COM>
X-Nextstep-Mailer: Mail 4.2mach (Enhance 2.0b5)
From: Brian Boonstra <boonstb@cmg.FCNBD.COM>
Date: Fri, 27 Aug 99 14:37:40 -0500
To: zsh-workers@sunsite.auc.dk
Subject: Re: NEW BUG: 3.1.6 bug in NextStep/OpenStep 4.2
References: <199908270713.JAA16491@beta.informatik.hu-berlin.de>
	<199908271427.JAA23890@wo1203.cmg.FCNBD.COM>

Hi Folks

	Well, I have a compilation that runs, and completion works well.   
But now I notice that the terminal hangs after I perform any kind of command  
except shell builtins.  For example, "ls", "df", and "finger" all hang after  
their output, whereas "echo" and "alias" do not hang.

	Note that this has nothing to do with the patch Sven supplied to fix  
complist.c.  I have applied one other set of patches, though, namely the  
ones found here:

		http://www.zsh.org/mla/workers//1999/msg02372.html


	I doubt they are at fault, since they only patch the necessary (for  
me) third argument onto fcntl in utils.c and init.c.


	I tried compiling a debug version, but that version always gives a  
Bus Error on the first keystroke, so I'm afraid I can't be more specific.   
Anybody have ideas?



		Regards,


				Brian



Brian Boonstra wrote:
> I applied the patch (in 7513 and 7455) and it fixed the problem
> perfectly! Similarly to what Brian H. saw, `print -P "%s"' was not giving
> me any extraneous characters.
>
> For the benefit of those joining late, in order to get zsh 3.1.6 to
> compile on OpenStep, you also need the patch from 2372.
>
> ...
>
> Sven Wischnowsky wrote:
> > Brian Boonstra wrote:
> > I don't know about the other things, but I guess this is the same
> > problem mentioned by Brien Harvell (in 7443), only that he got `$<2>'
> > instead of the `2'.
> >
> > To repeat: I think this is caused by the complist code. It prints the
> > termcap string for `%s' (standout off) at those places. What irritated
> > me is that `print -P "%s"' didn't give him those `$<2>' strings.
> >
> > I then suggested the patch in 7455 (which is appended below for your
> > convenience), but got no reply from him after that, so I don't know if
> > it fixes the problem (I guess not).


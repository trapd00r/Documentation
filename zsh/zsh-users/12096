From zsh-users-return-12096-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 24 13:37:07 2007
Return-Path: <zsh-users-return-12096-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20229 invoked from network); 24 Oct 2007 13:36:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Oct 2007 13:36:59 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 35968 invoked from network); 24 Oct 2007 13:36:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2007 13:36:52 -0000
Received: (qmail 14590 invoked by alias); 24 Oct 2007 13:36:42 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12096
Received: (qmail 14574 invoked from network); 24 Oct 2007 13:36:42 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Oct 2007 13:36:42 -0000
Received: (qmail 34785 invoked from network); 24 Oct 2007 13:36:42 -0000
Received: from smtp.eu.citrix.com (62.200.22.115)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2007 13:36:37 -0000
X-IronPort-AV: E=Sophos;i="4.21,324,1188792000"; 
   d="scan'208";a="11506972"
Received: from lonpexchmx01.citrite.net ([10.30.224.191])
  by LONPIPO01.EU.CITRIX.COM with ESMTP; 24 Oct 2007 09:27:05 -0400
Received: from lonpexch01.citrite.net ([10.30.224.136]) by lonpexchmx01.citrite.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 24 Oct 2007 14:26:05 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Slow compdump on Vista - no .zcompdump created
Date: Wed, 24 Oct 2007 14:25:56 +0100
Message-ID: <DD74FBB8EE28D441903D56487861CD9D22719534@lonpexch01.citrite.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Slow compdump on Vista - no .zcompdump created
thread-index: AcgWQWjxaiC/Ru7GTv+tUqmiXiYgJQ==
From: "John Cooper" <John.Cooper@citrix.com>
To: "Zsh Users" <zsh-users@sunsite.dk>
X-OriginalArrivalTime: 24 Oct 2007 13:26:05.0991 (UTC) FILETIME=[6E568B70:01C81641]

Each time I start cygwin zsh (4.3.2 or 4.3.4) on Vista, compinit takes
around 12 seconds and no .zcompdump file is created:

C:\>zsh -f
$P$Gautoload -U compinit
$P$Gcd
$P$Gdate; compinit; date
Wed Oct 24 13:56:08 GMTDT 2007
Wed Oct 24 13:56:20 GMTDT 2007
$P$Gls .zcompdump
ls: .zcompdump: No such file or directory
$P$G

"compinit -u" and "compinit -C" take about the same time.


With zsh 4.2.6 on WinXP, when I run "compinit" I get prompted:
  Ignore insecure directories and continue [ny]?

(this prompt isn't shown with zsh 4.3.{2,4} on Vista.)

If I type "y" or run "compinit -C" it runs much faster in zsh 4.2.6 on
WinXP (although a .zcompdump file is still not created):

$P$Gdate; compinit -C; date
Wed Oct 24 14:08:16 GMTDT 2007
Wed Oct 24 14:08:17 GMTDT 2007
$P$G

Any ideas on how to speed it up on zsh 4.3.4 on Vista, and why the
.zcompdump file is not being created (`man zshall' states it should be
created by default)?

Thanks,

    --- John.


From zsh-users-return-11108-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 09 08:06:50 2007
Return-Path: <zsh-users-return-11108-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15841 invoked from network); 9 Jan 2007 08:06:44 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Jan 2007 08:06:44 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 19970 invoked from network); 9 Jan 2007 08:06:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Jan 2007 08:06:38 -0000
Received: (qmail 26655 invoked by alias); 9 Jan 2007 08:06:27 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11108
Received: (qmail 26645 invoked from network); 9 Jan 2007 08:06:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Jan 2007 08:06:26 -0000
Received: (qmail 18705 invoked from network); 9 Jan 2007 08:06:26 -0000
Received: from unknown (HELO n082.sc1.he.tucows.com) (64.97.136.162)
  by a.mx.sunsite.dk with SMTP; 9 Jan 2007 08:06:22 -0000
Received: from sc (82.26.166.30) by n082.sc1.he.tucows.com (7.2.069.1)
        id 458C32F7000F47EE for zsh-users@sunsite.dk; Tue, 9 Jan 2007 08:06:20 +0000
Received: from chazelas by sc with local (Exim 3.36 #1 (Debian))
	id 1H4Bzv-0001Az-00
	for <zsh-users@sunsite.dk>; Tue, 09 Jan 2007 08:06:19 +0000
Date: Tue, 9 Jan 2007 08:06:19 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: zsh-users Mailinglist <zsh-users@sunsite.dk>
Subject: Re: Why does builtin 'test' differ from /usr/bin/test
Message-ID: <20070109080619.GA4455@sc>
Mail-Followup-To: zsh-users Mailinglist <zsh-users@sunsite.dk>
References: <F7507090F1A72B43A51444325DFBE43101723822@MCHP7R6A.ww002.siemens.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <F7507090F1A72B43A51444325DFBE43101723822@MCHP7R6A.ww002.siemens.net>
User-Agent: Mutt/1.5.6i
Sender: Stephane Chazelas <stephane_chazelas@yahoo.fr>

On Tue, Jan 09, 2007 at 08:38:58AM +0100, Com MN PG P E B Consultant 3 wrote:
> From the zsh manpages:
> 
>   "test [ arg ... ]
>        [ [ arg ... ] ]
>               Like the system version of test.  Added for  compatibility;"...
> 
> But in zsh, the following two commands yield different results:
> 
>   test -a = '-?' -o -a = '?' && echo true           # true
>   command test -a = '-?' -o -a = '?' && echo true   # not true
> 
> Why is the first (builtin) test true?	
[...]

In short because the behavior of test for more than 4 arguments
is unspecified.

Use:

test -a = '-?' || test -a = '?'

or:

case -a in
  '?' | '-?') ...;;
esac


BTW, for me both return "not true".

-- 
Stéphane


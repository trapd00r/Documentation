From zsh-workers-return-20683-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 11 16:27:44 2005
Return-Path: <zsh-workers-return-20683-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9934 invoked from network); 11 Jan 2005 16:27:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Jan 2005 16:27:43 -0000
Received: (qmail 10008 invoked from network); 11 Jan 2005 16:27:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Jan 2005 16:27:37 -0000
Received: (qmail 27623 invoked by alias); 11 Jan 2005 16:27:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20683
Received: (qmail 27608 invoked from network); 11 Jan 2005 16:27:33 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Jan 2005 16:27:33 -0000
Received: (qmail 9680 invoked from network); 11 Jan 2005 16:27:33 -0000
Received: from out008pub.verizon.net (HELO out008.verizon.net) (206.46.170.108)
  by a.mx.sunsite.dk with SMTP; 11 Jan 2005 16:27:29 -0000
Received: from candle.brasslantern.com ([4.11.10.129])
          by out008.verizon.net
          (InterMail vM.5.01.06.06 201-253-122-130-106-20030910) with ESMTP
          id <20050111162724.CHGR17379.out008.verizon.net@candle.brasslantern.com>
          for <zsh-workers@sunsite.dk>; Tue, 11 Jan 2005 10:27:24 -0600
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j0BGRKxa028831
	for <zsh-workers@sunsite.dk>; Tue, 11 Jan 2005 08:27:20 -0800
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.12.11/8.12.11/Submit) id j0BGRKov028830
	for zsh-workers@sunsite.dk; Tue, 11 Jan 2005 08:27:20 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1050111162719.ZM28829@candle.brasslantern.com>
Date: Tue, 11 Jan 2005 16:27:19 +0000
In-Reply-To: <200501111352.j0BDqCKs001801@news01.csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Some groundwork for Unicode in Zle" (Jan 11,  1:52pm)
References: <200501111352.j0BDqCKs001801@news01.csr.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Some groundwork for Unicode in Zle
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Authentication-Info: Submitted using SMTP AUTH at out008.verizon.net from [4.11.10.129] at Tue, 11 Jan 2005 10:27:21 -0600
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.6 required=6.0 tests=BAYES_44,RCVD_IN_NJABL,
	RCVD_IN_SORBS autolearn=no version=2.63
X-Spam-Hits: 1.6

On Jan 11,  1:52pm, Peter Stephenson wrote:
}
} It seems clear that the line editor is the place most people are
} missing Unicode support, so I suggest we start from there and work
} back.

Just as a remark, if you're going to alter the line editor then you
probably have no choice but to alter the "read" builtin as well, at
least "read -k" because it's used in some user-defined widgets (and this
could get a bit ugly, as how does "read" know whether it's reading a
wide char stream or a simple byte stream?).

Keep in mind that the completion system DOES make use of nul-terminated
strings -- cf. the "bug in insert-last-word" thread, e.g. 20643.

} All the tests still pass, so I will commit this some time today.

If you haven't committed already, might I suggest doing a 4.2.2 release
first?  It's been 4 months and a lot of patches since 4.2.1, and this
is a potentially very lengthy effort to embark upon.


From zsh-workers-return-16081-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 18 16:55:59 2001
Return-Path: <zsh-workers-return-16081-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26276 invoked from network); 18 Oct 2001 16:55:58 -0000
Received: from unknown (HELO sunsite.dk) (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Oct 2001 16:55:58 -0000
Received: (qmail 29058 invoked by alias); 18 Oct 2001 16:55:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16081
Received: (qmail 29042 invoked from network); 18 Oct 2001 16:55:48 -0000
Sender: kiddleo@cav.logica.co.uk
Message-ID: <3BCF0416.D4BA1B79@yahoo.co.uk>
Date: Thu, 18 Oct 2001 17:32:22 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: ignore-line style
References: <3BC31D30.11F61508@yahoo.co.uk>
		<15306.60590.817177.439249@gargle.gargle.HOWL> <15309.34622.18416.249769@gargle.gargle.HOWL>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:
> 
> Here is what seems to fix it. It was using _comp_ignore on every level
> it walked through, hence `file' matched.
> 
> This seems almost too simple to not have any other effects, but let's
> try... (I'll leave it to Oliver to commit his patch).

As far as I can tell, this works very well. I've included testing of
this mixed with the ignored-patterns style and all seems well. The
explanation makes sense so hopefully there are no "other effects".
Thanks.

If this constitutes having got it working better as you said in you
first reply then I'd like to look at adding some of the suggestions I
made. For the styles, that was quoting to avoid globs, file like globs,
skipping command words and skipping options. To achieve file like
globs, one way would be to eval the words (something similar to
_expand) which would have the advantage of expanding braces and
variables too but process substitutions would be a problem. Have you
got any other ideas or suggestions?

The other suggestion was modifying _diff etc to set up the ignoring
without the need for a style. Can that be done better at the _files or
_arguments level at all? For what situations do you use the style and
can anyone think of any other commands where this ignoring could be
useful?

Thanks again

Oliver


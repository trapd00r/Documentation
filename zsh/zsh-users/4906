From zsh-users-return-4906-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 30 21:49:54 2002
Return-Path: <zsh-users-return-4906-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17513 invoked from network); 30 Apr 2002 21:49:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 30 Apr 2002 21:49:53 -0000
Received: (qmail 24697 invoked by alias); 30 Apr 2002 21:49:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4906
Received: (qmail 24684 invoked from network); 30 Apr 2002 21:49:36 -0000
Date: Tue, 30 Apr 2002 14:48:29 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: schaefer@ns1.sodaware.com
To: "Kingsley G. Morse Jr." <change@nas.com>
cc: zsh-users@sunsite.dk
Subject: Re: zsh Newbie wants to complete mutt email addresses or aliases
In-Reply-To: <20020430143132.A1336@debian1.loaner.com>
Message-ID: <Pine.LNX.4.44.0204301442530.19152-100000@ns1.sodaware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 30 Apr 2002, Kingsley G. Morse Jr. wrote:

> 1.) deleting the hard coded email addresses, leaving
>
>         zstyle -e ':completion::complete:mutt:*:' users \
>         'reply=($(perl -ne '\''print "$1\n"
>                   if /^\s+alias\s+(\S+)\s+.*/;'\'' ~/.muttrc 2>/dev/null))'
>
> When I press <tab> after typing the start of an alias [...]
> zsh returns the same error message as before [...]

First thing to try is, run the perl all by itself:

perl -ne 'print "$1\n" if /^\s+alias\s+(\S+)\s+.*/;' ~/.muttrc

Does this produce an error message?  Does it produce the right output?

If that appears to work, you dan debug the completion itself by using

$ mutt -s "A silly subject" Joe_Do<C-x ?>

That is, type control-x question-mark instead of tab.  This will dump a
trace of the completion code to a temp file, where you can look at it.
Search it for "perl" to see whether and how the style above is being used.


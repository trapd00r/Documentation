From zsh-workers-return-12762-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 06 15:04:41 2000
Return-Path: <zsh-workers-return-12762-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20871 invoked from network); 6 Sep 2000 15:04:40 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Sep 2000 15:04:40 -0000
Received: (qmail 24379 invoked by alias); 6 Sep 2000 15:04:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12762
Received: (qmail 24371 invoked from network); 6 Sep 2000 15:04:07 -0000
Date: Thu, 07 Sep 2000 00:02:33 +0900
Message-ID: <86g0ndo96e.wl@archon.local.idaemons.org>
From: "Akinori -Aki- MUSHA" <knu@idaemons.org>
To: zsh-workers@sunsite.auc.dk
Subject: Trivial patches for FreeBSD
User-Agent: Wanderlust/2.3.0 (Roam) EMIKO/1.13.12 (Euglena sociabilis) FLIM/1.13.2 (Kasanui) APEL/10.2 MULE XEmacs/21.1 (patch 12) (Channel Islands) (i386--freebsd)
Organization: Associated I. Daemons
X-PGP-Public-Key: finger knu@FreeBSD.org
X-PGP-Fingerprint: 081D 099C 1705 861D 4B70  B04A 920B EFC7 9FD9 E1EE
X-PGP-Comment: I changed my key on 2000-08-10
MIME-Version: 1.0 (generated by EMIKO 1.13.12 - "Euglena sociabilis")
Content-Type: text/plain; charset=US-ASCII

Hi, I'm a FreeBSD developer working on maintaining zsh package.

Recently, FreeBSD has changed its location for kernel modules from
/modules to /boot/kernel, so I'd like you to apply the following patch
to catch up with the change.

--- Completion/Bsd/_kld.orig	Fri Jun  9 00:27:34 2000
+++ Completion/Bsd/_kld	Wed Sep  6 23:43:13 2000
@@ -4,7 +4,7 @@
 _kld_module() {
   local ret=1
 
-  compadd "$@" - /modules/*.ko(:t) && ret=0
+  compadd "$@" - /boot/kernel/*.ko(:t) /modules/*.ko(:t) && ret=0
   _files "$@" -g \*.ko && ret=0
 
   return ret

(This patch is based on 3.1.9 development release)


Also, to support FreeBSD 5.x or higher, the following fix is needed.

--- configure.in.orig	Wed May  3 03:01:17 2000
+++ configure.in	Wed May 17 21:34:02 2000
@@ -1489,7 +1489,7 @@
   esac
   case "$host" in
     *-hpux*)  EXTRA_LDFLAGS="${EXTRA_LDFLAGS=-Wl,-E}" ;;
-    *-freebsd3*|*-freebsd4*|*-linux*) EXTRA_LDFLAGS="${EXTRA_LDFLAGS=-rdynamic}" ;;
+    *-freebsd[3-9]*|*-linux*) EXTRA_LDFLAGS="${EXTRA_LDFLAGS=-rdynamic}" ;;
     mips-sni-sysv4)
       #
       # unfortunately, we have different compilers


Please merge these fixes by the next release, thank you.

-- 
                           /
                          /__  __       
                         / )  )  ) )  /
Akinori -Aki- MUSHA aka / (_ /  ( (__(  @ idaemons.org / FreeBSD.org

"We're only at home when we're on the run, on the wing, on the fly"


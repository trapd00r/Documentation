From zsh-users-return-12214-mason-zsh=primenet.com.au@sunsite.dk Sat Nov 17 21:16:33 2007
Return-Path: <zsh-users-return-12214-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27358 invoked from network); 17 Nov 2007 21:16:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.0 required=5.0 tests=AWL,BAYES_00,MISSING_MID,
	SUBJ_RE_NUM autolearn=no version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Nov 2007 21:16:24 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 23850 invoked from network); 17 Nov 2007 21:16:16 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Nov 2007 21:16:16 -0000
Received: (qmail 13521 invoked by alias); 17 Nov 2007 21:16:04 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12214
Received: (qmail 13504 invoked from network); 17 Nov 2007 21:16:03 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Nov 2007 21:16:03 -0000
Received: (qmail 22483 invoked from network); 17 Nov 2007 21:16:03 -0000
Received: from sunset.tt-solutions.com (HELO smtp.tt-solutions.com) (82.238.156.189)
  by a.mx.sunsite.dk with SMTP; 17 Nov 2007 21:15:54 -0000
Received: from nightfall ([192.168.17.76])
	by smtp.tt-solutions.com with esmtp (Exim 4.63)
	(envelope-from <vz-zsh@zeitlins.org>)
	id 1ItV18-00013z-26
	for zsh-users@sunsite.dk; Sat, 17 Nov 2007 22:15:54 +0100
Date: Sat, 17 Nov 2007 22:15:54 +0100
From: Vadim Zeitlin <vz-zsh@zeitlins.org>
Subject: Re[2]: strange "diff -u" completion
To: zsh-users@sunsite.dk
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Disposition: INLINE
References: <20071117164132.335833B628A@iowa.lab.icm.edu.pl> <20071117182819.GA8932@meep.pl>
In-Reply-To: <20071117182819.GA8932@meep.pl>
X-Mailer: Mahogany 0.67.0 'Constance', running under Windows Server 2003 (build 3790, Service Pack 1)

On Sat, 17 Nov 2007 19:28:19 +0100 Michal Politowski <mpol@charybda.icm.edu.pl> wrote:

MP> > IMO this is wrong as "-u" behaves in exactly the same way as "-U".
MP> But does it?

 I should have qualified it by "behaves in exactly the same way here",
sorry.

MP> Under Debian (sid):
MP> $ diff -u2 /dev/null /etc/profile
MP> diff: `-2' option is obsolete; use `-U 2'
MP> diff: Try `diff --help' for more information.
MP> zsh: exit 2     diff -u2 /dev/null /etc/profile
MP> 
MP> $ diff --version                          
MP> diff (GNU diffutils) 2.8.1

 Very interesting, thanks. I've tried it myself in an unstable chroot and,
unsurprisingly, I see the same thing. More interestingly, the version of
diff in Debian stable is 2.8.1 as well -- but it doesn't give the above
message and works just fine with "-u2".

 I don't know how to explain the difference but, anyhow, it seems clear
that diff itself is moving away from using -uN so zsh completion is, in
principle, correct. It would be nice to have an option/style which could be
set to allow completing -uN too but I'm afraid I don't know how to do it
[easily] so I can't propose a patch for this.


 In any case, thanks again for your explanation (although I remain curious
why did diff maintainers decide to deprecate this option... I'm so much
used to typing "diff -u2" that it's going to be hard to break this habit).

VZ


From zsh-users-return-13579-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 10 17:42:40 2008
Return-Path: <zsh-users-return-13579-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6120 invoked from network); 10 Dec 2008 17:42:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Dec 2008 17:42:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 83930 invoked from network); 10 Dec 2008 17:42:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Dec 2008 17:42:28 -0000
Received: (qmail 23025 invoked by alias); 10 Dec 2008 17:42:14 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13579
Received: (qmail 23008 invoked from network); 10 Dec 2008 17:42:14 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Dec 2008 17:42:14 -0000
Received: from rv-out-0506.google.com (rv-out-0506.google.com [209.85.198.226])
	by bifrost.dotsrc.org (Postfix) with ESMTP id D59C080524C3
	for <zsh-users@sunsite.dk>; Wed, 10 Dec 2008 18:42:10 +0100 (CET)
Received: by rv-out-0506.google.com with SMTP id g37so474005rvb.21
        for <zsh-users@sunsite.dk>; Wed, 10 Dec 2008 09:42:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:cc:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=gqqF6sOpMYb7VNZBeQAHYsTiyOhiGe++07l3PTNLmjQ=;
        b=vhnfhqXunzMZqKjqiV21KuQlnRVSeYetKq3Sc98LHnlU5ZwsYiuEFbTEqoR48b+r40
         030r5CyD/E/TlzNOqEXFQb6j+XJGSDJRYLuUmYKjvqd/tKqMM12kew2eCfBBitY4Sh7a
         47Pp1o+9I55heNrPpG5AYlQu51Z27H1F1uH+U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=cc:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=OYFj+VTNwzEqdN3QmnoCYRAnv5+kEulSP1XsUtk5c/3cN7HWO+p7G4LWoPeo2w0Vyb
         0iF+zfjG3aCaFIq/eFO/Gsaxn4sXZfonKyzX4ZS4SNS7f0LtyrHMEbiMEerQcGYXlpPs
         wVko1lwPiAL/MWh9PdClxGS/9p5BbMtQYBNAY=
Received: by 10.140.136.6 with SMTP id j6mr776729rvd.126.1228930929068;
        Wed, 10 Dec 2008 09:42:09 -0800 (PST)
Received: from 26l2233b2-09.ocsny.local ([204.107.76.235])
        by mx.google.com with ESMTPS id k41sm1742479rvb.4.2008.12.10.09.42.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 10 Dec 2008 09:42:07 -0800 (PST)
Cc: zsh-users@sunsite.dk
Message-Id: <EFDC9DE7-F2D6-49E2-B440-4085600A48D8@gmail.com>
From: Michael Hernandez <sequethin@gmail.com>
To: Webb Sprague <webb.sprague@gmail.com>
In-Reply-To: <b11ea23c0812100934t1b629671y6b284bfb359e5e52@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Opening a file for READing within script? (Last question today ;) )
Date: Wed, 10 Dec 2008 12:42:04 -0500
References: <b11ea23c0812100934t1b629671y6b284bfb359e5e52@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Scanned: ClamAV 0.92.1/8743/Wed Dec 10 16:08:45 2008 on bifrost
X-Virus-Status: Clean


On Dec 10, 2008, at 12:34 PM, Webb Sprague wrote:

> I want to open a file given at the command line for reading by
> associating it with a file descriptor number and then running
>
> read -u 4 HEADERLINE
> echo "Special header line behavior $HEADERLINE"
>
> while read -u 4 DATALINE ; do
>    echo $DATALINE
>    sleep 1
> done
>
> I am doing this because I need to process the header differently than
> the data, and I want the user to give the file name on the command
> line rather than cat it into a pipeline.
>
> Thanks!
>
> (Oh -- my final FINAL sneaky question -- is there a way to
> automagically associate the OPTS with an associative array?  like
>
> optfill f:b OPTASSOC
>
> modifying OPTASSOC to be {f->filename; b->EMPTY}, given command -b -f
> filename; it would throw an error for required or non-standard opts
> too, but not sure about good syntax ?  If there isn't, I will write
> one, but not today ....
> )

Not sure about your first question but as for your final sneaky  
question...

given options (via a function call or call to your script, etc), the  
line

zparseopts -D -E -A opts f: b:

when inside your function,

will take the positional parameters and add the options f and b to the  
associative array named opts so that:

call_my_function -f FVAL -b BVAL

$opts[-f] will be equal to FVAL
$opts[-b] will be equal to BVAL

check out man zshmodules and look for zparseopts in there for the  
details on that

--Mike H


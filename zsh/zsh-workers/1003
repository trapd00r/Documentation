From erik@ts2.galt.com Wed May  8 08:46:50 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id IAA06551 for <mason@werple.mira.net.au>; Wed, 8 May 1996 08:46:44 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id SAA24628; Tue, 7 May 1996 18:30:47 -0400 (EDT)
Resent-Date: Tue, 7 May 1996 18:30:47 -0400 (EDT)
Message-Id: <199605072229.SAA20258@ts2.galt.com.>
X-Mailer: exmh version 1.6.2 7/18/95
To: zsh-workers@math.gatech.edu
X-url: http://www.galt.com/~erik/
Subject: zsh-2.5.03-2.6b17 under Solaris 2.5 trouble with mult()
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Tue, 07 May 1996 18:29:32 -0400
From: Erik Ogan <erik@ts2.galt.com>
Resent-Message-ID: <"VU-YO2.0.k06.MyyZn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1003
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1977
Status: O

I just sub'ed yesterday, but I've poked around the archives and I
haven't found anything that seems even remotely related to this
problem.

The following occurs on all of our Solaris 2.5 boxes for zsh versions
2.5.03 - 2.6b17 (ok, I didn't try EVERY beta...:) but does NOT occur
under SunOS 4.1.x.

Everything compiles fine, but in the when it (gcc-2.7.2) tries to link:

gcc -o zsh builtin.o compat.o cond.o exec.o glob.o hashtable.o hist.o
init.o input.o jobs.o lex.o linklist.o loop.o math.o mem.o params.o
parse.o signals.o subst.o text.o utils.o watch.o zle_bindings.o
zle_hist.o zle_main.o zle_misc.o zle_move.o zle_refresh.o zle_tricky.o
zle_utils.o zle_vi.o zle_word.o -lnsl -ltermcap

generates the following warnings:

Warning: size of symbol `mult' changed from 4 to 284 in /lib/libmp.so.1
Warning: type of symbol `mult' changed from 1 to 2 in /lib/libmp.so.1

And the program will often dump core due to an illegal instruction
when searching command hash tables in a normal interactive incarnation
(works fine in a script, or in gdb (Yes, I know smart bugs can smell
programmer fear a mile a way)).

In light of that, the only other useful information I've found is by
doing a back trace on the core file in gdb. Doing so confirms that the
illegal instruction in question occurs in the mult() function, called
from the iscom() function (exec.c:388)

Being relatively new (read: forcibly dragged kicking and screaming) to
Solaris, I'm having some trouble with this, but under SunOS, (I would
assume its the same) this behavior would imply running out of memory,
or an illegal mult() operation.

The fact that I seem to be the only Solaris 2.5 user who's had this
problem disturbs me, and makes me look cross-eyed at our installation
of gcc.

Any ideas would be greatly appreciated, by me as well as my co-workers, 
most of whom are getting tired of listening to me swear up and down at 
tcsh.

--------
Erik R. Ogan
Webmaster/Systems Editor
GALT Technologies, Inc.



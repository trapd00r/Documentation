From zsh-workers-return-7035-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 08 11:48:50 1999
Return-Path: <zsh-workers-return-7035-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3553 invoked from network); 8 Jul 1999 11:48:49 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jul 1999 11:48:49 -0000
Received: (qmail 29885 invoked by alias); 8 Jul 1999 11:48:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7035
Received: (qmail 29878 invoked from network); 8 Jul 1999 11:48:39 -0000
Date: Thu, 8 Jul 1999 13:48:37 +0200 (MET DST)
Message-Id: <199907081148.NAA12179@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Wed, 07 Jul 1999 12:03:11 +0200
Subject: Re: PATCH: pws-25: _read_comp, again


Peter Stephenson wrote:

> and I had to trap SIGINT to return from the function because for
> some reason `read -k' wasn't returning the right status, just a 0 (which
> you can't tell from C-SPC):  strange, since it seems to work perfectly well
> in ordinary widgets.  I've left the commented-out debugging code in
> deliberately.  Sigh.

For me it correctly returns `1' as the return status. The problem is
that the signal handler for SIGINT sets `breaks=loops' and since the
second read is in a loop the then-clause will never be executed
(because of the test of the while-loop in `execlist()').

Hm. What are we to do here -- should we reset some of the things
changed by the signal handler in bin_read()? Do we always want that?

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


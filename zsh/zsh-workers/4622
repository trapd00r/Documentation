From zsh-workers-request@math.gatech.edu Fri Nov 13 09:14:36 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20980 invoked from network); 13 Nov 1998 09:14:34 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 13 Nov 1998 09:14:34 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id EAA05104;
	Fri, 13 Nov 1998 04:12:37 -0500 (EST)
Resent-Date: Fri, 13 Nov 1998 04:12:37 -0500 (EST)
Message-Id: <9811130855.AA19601@ibmth.df.unipi.it>
To: Zsh Hackers <zsh-workers@math.gatech.edu>
Subject: Re: PATCH: 3.1.5: ``***'' symlink follow broken 
In-Reply-To: ""Bart Schaefer""'s message of "Thu, 12 Nov 1998 09:21:46 NFT."
             <981112092146.ZM11912@candle.brasslantern.com> 
Date: Fri, 13 Nov 1998 09:55:31 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"JsJC6.0.eF1.4W_Is"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4622
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

"Bart Schaefer" wrote:
> So *unless* somebody knows of a reason not to do opendir() on something
> that isn't a directory, I think Geoff's patch is actually better [on the
> assumption that a failed opendir() is faster than a successful stat()].

I thought about it some more last night and came to this conclusion
too.  Only if you can test the number of subdirectories, and hence
prune empty subdirectories, is the stat() worthwhile.  I'm very
tempted by Geoff's second suggestion, though.

> Late last night I was of the opinion that `closure' mattered more than
> did `q->follow', but I've since revised that opinion.

I think it's written so that `closure' matters as little as possible
when it's analysing individual directories.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56100 Pisa, Italy


From zsh-workers-return-22494-mason-zsh=primenet.com.au@sunsite.dk Sat Jun 17 14:12:12 2006
Return-Path: <zsh-workers-return-22494-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 85 invoked from network); 17 Jun 2006 14:12:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Jun 2006 14:12:08 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 1320 invoked from network); 17 Jun 2006 14:11:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Jun 2006 14:11:52 -0000
Received: (qmail 7424 invoked by alias); 17 Jun 2006 14:11:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22494
Received: (qmail 7414 invoked from network); 17 Jun 2006 14:11:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Jun 2006 14:11:49 -0000
Received: (qmail 1033 invoked from network); 17 Jun 2006 14:11:49 -0000
Received: from dottedmag.net (85.118.226.168)
  by a.mx.sunsite.dk with SMTP; 17 Jun 2006 14:11:48 -0000
Received: from vertex.dottedmag.net (unknown [10.10.31.3])
	by dottedmag.net (Postfix) with ESMTP id 00846D541
	for <zsh-workers@sunsite.dk>; Sat, 17 Jun 2006 21:11:47 +0700 (NOVST)
From: Mikhail Gusarov <dottedmag@dottedmag.net>
To: zsh-workers@sunsite.dk
Subject: [BUG] zsh does not manage output until first 'Enter'
Date: Sat, 17 Jun 2006 21:11:47 +0700
Message-ID: <87wtbflvmk.fsf@vertex.dottedmag.net>
User-Agent: Gnus/5.110004 (No Gnus v0.4) Emacs/22.0.50 (gnu/linux)
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="=-=-="

--=-=-=

Hello,

I've got the problem: when starting zsh in new terminal (reproduced
with aterm, rxvt and xterm) with attached .zshrc it refuses to handle
output to the screen until first 'Enter' is pressed: all this funny
^P^N^R are on the screen, TAB shows as literal tab and so on.

Nevertheless, it *works* properly (after 'Enter' executes expected
command), but just *outputs* garbage.

Seems to be race condition in terminal handling code, as in rare cases
zsh initializes properly, but mostly not.

zsh 4.3.2, X.org 7.0. Reproduced with rxvt 7.7, xterm 210, aterm
1.0.0.

-- 
JID: dottedmag@jabber.dottedmag.net

--=-=-=
Content-Type: application/octet-stream
Content-Disposition: attachment; filename=.zshrc

function precmd { print -nP "\033]2;[zsh@%m:%~]%#\007\033]1;[%m:%~]%#\007" }

autoload -U compinit
compinit


--=-=-=--


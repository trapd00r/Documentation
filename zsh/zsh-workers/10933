From zsh-workers-return-10933-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 26 13:12:40 2000
Return-Path: <zsh-workers-return-10933-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5464 invoked from network); 26 Apr 2000 13:12:35 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Apr 2000 13:12:35 -0000
Received: (qmail 12891 invoked by alias); 26 Apr 2000 13:12:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10933
Received: (qmail 12878 invoked from network); 26 Apr 2000 13:12:25 -0000
Date: Wed, 26 Apr 2000 15:12:23 +0200 (MET DST)
Message-Id: <200004261312.PAA10653@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Adam Spiers's message of Wed, 26 Apr 2000 13:56:24 +0100
Subject: PATCH: Re: Patches committed


Adam Spiers wrote:

> Sven Wischnowsky (wischnow@informatik.hu-berlin.de) wrote:
> > Just to let you know, I just committed Tanaka's 10890 and 10885 and
> > Adam's 10892.
> 
> Cool, thanks.
> 
> > I haven't commited Felix' 10893 or 10894:
> 
> I don't know whether this is related, but h-c-w seems to have broken:
> 
> % echo <M-/>
> _tags:58: no matches found: (|*-)argument-* (|*-)option-* values

I guess that was your weird option setting, err... that was due to
missing standard option initialisation in _h_c_w. Remember
_complete_help?

Does this help?

Bye
 Sven

Index: Completion/Commands/_bash_completions
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Commands/_bash_completions,v
retrieving revision 1.1.1.2
diff -u -r1.1.1.2 _bash_completions
--- Completion/Commands/_bash_completions	1999/10/26 15:36:11	1.1.1.2
+++ Completion/Commands/_bash_completions	2000/04/26 13:10:36
@@ -25,6 +25,9 @@
 # that will not have been overridden, so you should add '~' to the
 # list of keys at the top of the for-loop.
 
+setopt localoptions nullglob rcexpandparam extendedglob
+unsetopt markdirs globsubst shwordsplit nounset ksharrays
+
 local key=$KEYS[-1]
 
 case $key in
@@ -34,7 +37,7 @@
        ;;
   '@') _main_complete _hosts
        ;;
-  '/') _files
+  '/') _main_complete _files
        ;;
   '~') _main_complete _users
        ;;
Index: Completion/Commands/_history_complete_word
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Commands/_history_complete_word,v
retrieving revision 1.2
diff -u -r1.2 _history_complete_word
--- Completion/Commands/_history_complete_word	2000/04/01 20:43:43	1.2
+++ Completion/Commands/_history_complete_word	2000/04/26 13:10:37
@@ -17,6 +17,9 @@
 #
 
 _history_complete_word () {
+  setopt localoptions nullglob rcexpandparam extendedglob
+  unsetopt markdirs globsubst shwordsplit nounset ksharrays
+
   local expl direction stop
 
   if [[ $WIDGET = *newer ]]; then

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


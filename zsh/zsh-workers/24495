From zsh-workers-return-24495-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 30 06:48:30 2008
Return-Path: <zsh-workers-return-24495-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9902 invoked from network); 30 Jan 2008 06:48:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Jan 2008 06:48:27 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 34330 invoked from network); 30 Jan 2008 06:48:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Jan 2008 06:48:21 -0000
Received: (qmail 10434 invoked by alias); 30 Jan 2008 06:48:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24495
Received: (qmail 10416 invoked from network); 30 Jan 2008 06:48:17 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 30 Jan 2008 06:48:17 -0000
Received: from merkur.ins.uni-bonn.de (merkur.ins.uni-bonn.de [131.220.223.13])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 96B3D8029406
	for <zsh-workers@sunsite.dk>; Wed, 30 Jan 2008 07:48:07 +0100 (CET)
Received: from localhost.localdomain (xdsl-87-78-167-162.netcologne.de [87.78.167.162])
	by merkur.ins.uni-bonn.de (Postfix) with ESMTP id 1BAB440000484;
	Wed, 30 Jan 2008 07:48:07 +0100 (CET)
Received: from ralf by localhost.localdomain with local (Exim 4.63)
	(envelope-from <Ralf.Wildenhues@gmx.de>)
	id 1JK6jq-0005wy-Ou; Wed, 30 Jan 2008 07:48:03 +0100
Date: Wed, 30 Jan 2008 07:48:02 +0100
From: Ralf Wildenhues <Ralf.Wildenhues@gmx.de>
To: Ismail =?iso-8859-1?Q?D=F6nmez?= <ismail@pardus.org.tr>
Cc: Clint Adams <schizo@debian.org>, zsh-workers@sunsite.dk
Subject: Re: Fwd: Re: zsh compilation problem with autoconf git
Message-ID: <20080130064802.GB22724@ins.uni-bonn.de>
References: <200801300003.33400.ismail@pardus.org.tr> <20080129223819.GA12715@scowler.net> <200801300642.40468.ismail@pardus.org.tr>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <200801300642.40468.ismail@pardus.org.tr>
Organization: Department of Numerical Simulation, University of Bonn
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Virus-Scanned: ClamAV 0.91.2/5600/Tue Jan 29 22:52:23 2008 on bifrost
X-Virus-Status: Clean

* Ismail Dönmez wrote on Wed, Jan 30, 2008 at 05:42:40AM CET:
> Wednesday 30 January 2008 00:38:19 tarihinde Clint Adams şunları yazmıştı:
> > On Wed, Jan 30, 2008 at 12:03:33AM +0200, Ismail Dönmez wrote:
> > >
> > >     # check 2.13, 2.50, and 2.60 syntaxes
> > >     if grep '%@D@%D%' config.status >/dev/null ||
> > >        grep ',@D@,D,' config.status >/dev/null ||
> > >        grep ',@D@,|#_!!_#|D,' config.status >/dev/null; then
> > >         is_dynamic=true
> > >     else
> > >         is_dynamic=false
> > >     fi
> > >
> > > So the question is, is this thing needed at all, if yes why?
> >
> > Presumably Src/mkmakemod.sh would need to be generated to check that
> > value in any supported manner.  I don't recall a reason that that
> > can't be done.
> 
> Why doesn't it parse config.h instead? I got 

Clint is right.  The clean solution would be to have Src/mkmakemod.sh.in
(or a small helper file it sources) with
  D=@D@
  if test $D = D; then is_dynamic=true; else is_dynamic=false; fi

and of course in configure.ac you'd need
  AC_CONFIG_FILES([Src/mkmakemod.sh]).

Cheers,
Ralf


From zsh-workers-return-12130-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jul 01 22:40:18 2000
Return-Path: <zsh-workers-return-12130-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6742 invoked from network); 1 Jul 2000 22:40:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Jul 2000 22:40:17 -0000
Received: (qmail 9590 invoked by alias); 1 Jul 2000 22:38:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12130
Received: (qmail 9576 invoked from network); 1 Jul 2000 22:38:14 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000701223750.ZM9579@candle.brasslantern.com>
Date: Sat, 1 Jul 2000 22:37:50 +0000
In-Reply-To: <20000701225612.J26119@daemon.ninth-circle.org>
Comments: In reply to Jeroen Ruigrok/Asmodai <asmodai@wxs.nl>
        "FreeBSD 5.0 and zsh 3.0.7 rare bug" (Jul  1, 10:56pm)
References: <20000701225612.J26119@daemon.ninth-circle.org> 
	<20000701230320.K26119@daemon.ninth-circle.org>
In-Reply-To: <20000701230320.K26119@daemon.ninth-circle.org>
Comments: In reply to Jeroen Ruigrok/Asmodai <asmodai@wxs.nl>
        "Re: FreeBSD 5.0 and zsh 3.0.7 rare bug" (Jul  1, 11:03pm)
X-Mailer: Z-Mail (5.0.0 30July97)
To: Jeroen Ruigrok/Asmodai <asmodai@wxs.nl>, zsh-workers@sunsite.auc.dk
Subject: Re: FreeBSD 5.0 and zsh 3.0.7 rare bug
Cc: will@FreeBSD.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

(Discussion redirected to zsh-workers.)

On Jul 1, 10:56pm, Jeroen Ruigrok/Asmodai wrote:
} Subject: FreeBSD 5.0 and zsh 3.0.7 rare bug
}
} For some weird reason every now and then my output got arsed.

Arsed?

} After some inspection I came to the discovery that zsh sometimes out of
} itself sets stty's icrnl option.  Which obviously messes up output.  I
} have no idea what can cause this.

The setting of icrnl shouldn't have any effect on output; the `i' is for
*input*, that is, translate input carriage returns to newlines.

Zsh plays some games with icrnl and inlcr so that type-ahead is handled
properly with respect to the key-bindings for ctrl-M and ctrl-J.  There
is a lengthy comment in zle_main.c to explain about this in detail.

On Jul 1, 11:03pm, Jeroen Ruigrok/Asmodai wrote:
} Subject: Re: FreeBSD 5.0 and zsh 3.0.7 rare bug
}
} Something I missed:
} 
} stty:
} 
} -icrnl
} 
} AND
} 
} -onlcr

That's not zsh's fault; the only thing zsh does with onlcr is to force
it to be *on*, unless the FreeBSD porters have changed something in
zle_main.c:zsetterm().

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


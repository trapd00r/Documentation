From zsh-workers-return-8860-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 02 19:03:20 1999
Return-Path: <zsh-workers-return-8860-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11079 invoked from network); 2 Dec 1999 19:03:19 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Dec 1999 19:03:19 -0000
Received: (qmail 12150 invoked by alias); 2 Dec 1999 19:03:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8860
Received: (qmail 12066 invoked from network); 2 Dec 1999 19:03:08 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991202182654.ZM16769@candle.brasslantern.com>
Date: Thu, 2 Dec 1999 18:26:54 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: Previous zsh.yo.in patch wasn't good enough
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Apparently yodl's file-inclusion gets confused if the zsh.yo file is not in
the $(sdir).

My previous patch produced a clean compile but an empty zsh.info; this goes
on top of that one.

Index: Doc/Makefile.in
===================================================================
@@ -78,12 +78,12 @@
 %.info: zsh.texi
 	$(MAKEINFO) $(sdir)/zsh.texi || exit 0
 
-zsh.texi: zsh.yo
+zsh.texi: $(sdir)/zsh.yo
 	$(YODL) -o $(sdir)/zsh.texi -I$(sdir) -w ztexi.yo version.yo zsh.yo
 	test -f $(sdir)/zsh.texi
 
-zsh.yo: zsh.yo.in
-	sed 's,@@TEXINFO@@,texinfo\($(tzsh).info\)\($(tzsh)\),' $(sdir)/zsh.yo.in >zsh.yo
+$(sdir)/zsh.yo: $(sdir)/zsh.yo.in
+	sed 's,@@TEXINFO@@,texinfo\($(tzsh).info\)\($(tzsh)\),' $(sdir)/zsh.yo.in > $(sdir)/zsh.yo
 
 .yo.1:
 	@case $@ in \

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


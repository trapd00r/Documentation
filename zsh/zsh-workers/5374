From zsh-workers-return-5374-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Feb 14 20:56:19 1999
Return-Path: <zsh-workers-return-5374-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10358 invoked from network); 14 Feb 1999 20:56:18 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Feb 1999 20:56:18 -0000
Received: (qmail 16354 invoked by alias); 14 Feb 1999 20:55:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5374
Received: (qmail 16342 invoked from network); 14 Feb 1999 20:55:28 -0000
Message-Id: <199902142049.UAA05629@Indigo.thoth.u-net.com>
From: opk@thoth.u-net.com (Oliver Kiddle)
Date: Sun, 14 Feb 1999 20:49:15 +0000
X-Mailer: Mail User's Shell (7.2.6 beta(3) 11/17/96)
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: Small fix for broken example in documentation

About a year ago, I was having problems with getting completion to work
with cd. I eventually tracked the problem down to a compctl from the
documentation I was using. The offending compctl is:

compctl -T -x 'C[0,*/*]' -f - 's[~]' -k friends -S/ -tn

The problem was that the C[...] part meant that cd and other things
would complete to files after the first slash.

My fix which I did mention at the time is:

compctl -T -x 's[~] C[0,[^/]#]' -k friends -S/ -tn

So that nobody else wastes their time and ours it'd be a good idea to
change this in the documentation. It is also applicable to the 3.0.5
documentation (atleast without -tn) but I don't have the source around
to do a patch.

The patch for the documentation follows.

Oliver Kiddle

*** Doc/Zsh/compctl.yo	Sun Feb 14 20:47:22 1999
--- Doc/Zsh/compctl.yo	Sun Feb 14 20:47:16 1999
***************
*** 89,95 ****
  that completion after `tt(~)' is too slow to be usable), you can use
  
  indent(
! tt(compctl -T -x 'C[0,*/*]' -f - 's[~]' -k friends -S/ -tn)
  )
  
  to complete the strings in the array tt(friends) after a `tt(~)'.
--- 89,95 ----
  that completion after `tt(~)' is too slow to be usable), you can use
  
  indent(
! tt(compctl -T -x 's[~] C[0,[^/]#]' -k friends -S/ -tn)
  )
  
  to complete the strings in the array tt(friends) after a `tt(~)'.


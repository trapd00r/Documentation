From zsh-workers-request@euclid.skiles.gatech.edu  Wed Nov 13 07:46:21 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id HAA13168 for <mason@primenet.com.au>; Wed, 13 Nov 1996 07:46:19 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id PAA13980; Tue, 12 Nov 1996 15:44:21 -0500 (EST)
Resent-Date: Tue, 12 Nov 1996 15:44:21 -0500 (EST)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199611122043.VAA12593@bolyai.cs.elte.hu>
Subject: Re: zsh 3.0.1 bug with named directories?
In-Reply-To: <9611122023.AA25067@raven.cg.tuwien.ac.at> from Robert F Tobler at "Nov 12, 96 09:23:51 pm"
To: rft@cg.tuwien.ac.at
Date: Tue, 12 Nov 1996 21:43:50 +0100 (MET)
Cc: zsh-workers@math.gatech.edu
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL27 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"yPBN41.0.MQ3.b6EYo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2380
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Robert F Tobler wrote:
[...]
> 	namedir () { eval '$1=$2 ; if [[ ! -d ~$1 ]]; then unset $1 ; fi' }
[...]
> Now if I do the same in zsh 3.0.1, I get the following message:
> 
> 	ray% namedir projects /usr/local/projects
> 	zsh: no such file or directory: projects=/usr/local/projects
> 	zsh: no such user or named directory: projects
> 
> Due to this and another problem (which I will post seperately) I have not  
> installed zsh 3.0.1 yet.

Replace the single quotes with double quotes above and it'll work.  It
seems that you original intention was to eval the expanded string but
strings within single quotes are not expanded.  In zsh-3.0.0
$1=$2 worked as an assignemt but it was a bug and it does not work
anymore.

E.g. this should work:

	namedir () { eval $1=\$2 ; if [[ ! -d ~$1 ]]; then unset $1 ; fi }

Zoltan


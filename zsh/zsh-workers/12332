From zsh-workers-return-12332-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 20 21:46:18 2000
Return-Path: <zsh-workers-return-12332-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11933 invoked from network); 20 Jul 2000 21:46:16 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Jul 2000 21:46:16 -0000
Received: (qmail 20266 invoked by alias); 20 Jul 2000 21:46:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12332
Received: (qmail 20258 invoked from network); 20 Jul 2000 21:46:11 -0000
Subject: Re: zsh bloat?
In-Reply-To: <20000720142630.B6110@manatee.mammalia.org> from R Joseph Wright
 at "Jul 20, 2000 02:26:30 pm"
To: R Joseph Wright <rjoseph@mammalia.org>
Date: Thu, 20 Jul 2000 22:46:21 +0100 (BST)
CC: zsh-workers@sunsite.auc.dk
X-Mailer: ELM [version 2.4ME+ PL66 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id: <E13FO97-0005Dq-00@crucigera.fysh.org>
From: Zefram <zefram@fysh.org>

R Joseph Wright wrote:
>Zsh shows itself to be smaller than all the others, with the exception of
>ksh, and vastly smaller than bash.  Unless I am missing something, zsh
>seems quite the opposite of bloat.  With all its awesome features, how can 
>it be done?

A lot of zsh's features are not in the main executable, but are now
in separate code modules or shell functions.  Quick check on my laptop
(Red Hat):

$ du -s /opt/zsh/* /bin/ash /bin/bash /bin/tcsh /bin/ksh
342     /opt/zsh/bin
655     /opt/zsh/lib
724     /opt/zsh/man
933     /opt/zsh/share
1858    /opt/zsh/src
63      /bin/ash
313     /bin/bash
253     /bin/tcsh
160     /bin/ksh

So that's 342kB of main binary, 655kB of loadable modules, and 933kB of
shell functions.  (Wow, I didn't realise we had so many functions -- the
current tarballs are now more than twice the size of the 3.1.5 tarball.)
Depending on how you count it, zsh is the largest shell by a factor of
1.1, 3.2 or 6.2.  Of course, in any particular running instance of zsh,
most of those modules and shell functions won't be loaded.  zsh can
also reasonably be installed without any of these extras, making it a
competitively small shell, but with no great interactive features.

-zefram


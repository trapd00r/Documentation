From zsh-workers-request@euclid.skiles.gatech.edu  Thu Nov 14 09:48:43 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id JAA05857 for <mason@primenet.com.au>; Thu, 14 Nov 1996 09:48:40 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA13218; Wed, 13 Nov 1996 17:44:50 -0500 (EST)
Resent-Date: Wed, 13 Nov 1996 17:44:50 -0500 (EST)
Sender: joda@pdc.kth.se
To: schaefer@nbn.com
Cc: Peter Stephenson <pws@ifh.de>,
        zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: OPEN_MAX from sysconf
References: <199611131628.RAA06320@hydra.ifh.de> <961113094601.ZM29148@candle.brasslantern.com>
Mime-Version: 1.0 (generated by tm-edit 7.78)
Content-Type: text/plain; charset=US-ASCII
From: joda@pdc.kth.se (Johan Danielsson)
Date: 13 Nov 1996 23:46:25 +0100
In-Reply-To: "Bart Schaefer"'s message of Wed, 13 Nov 1996 09:46:00 -0800
Message-ID: <xof7mnplike.fsf@emma.pdc.kth.se>
Lines: 41
X-Mailer: Red Gnus v0.48/Emacs 19.33
Resent-Message-ID: <"oD92D3.0.SE3.XzaYo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2403
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

"Bart Schaefer" <schaefer@candle.brasslantern.com> writes:

> I don't think it's worth the effort.

Maybe not, but the current situation is not only optimal.

> In practice there's always going to be *some* hard limit, even if
> it's in the thousands; a few thousand chars allocated isn't going to
> make that much difference to zsh.

A somewhat fabricated example (this is with the patch):

-------------------------------------
bash# uname -mrs
NetBSD 1.2 i386
bash# sysctl kern.maxfiles
kern.maxfiles = 1772
bash# sysctl -w kern.maxfiles=1000000000
kern.maxfiles: 1772 -> 1000000000
bash# ulimit -Hn unlimited
bash# ulimit -n unlimited
bash# zsh
zsh: fatal error: out of memory
bash# ulimit -n 1000
bash# zsh
zsh# limit -h
cputime         unlimited
filesize        unlimited
datasize        256MB
stacksize       8MB
coredumpsize    unlimited
memoryuse       16MB
memorylocked    16MB
maxproc         unlimited
descriptors     1000000000
zsh# limit descriptors 1000000000
zsh# uname
zsh: segmentation fault  uname
-------------------------------------

/Johan


From zsh-workers-return-7280-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 26 07:04:49 1999
Return-Path: <zsh-workers-return-7280-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27595 invoked from network); 26 Jul 1999 07:04:48 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jul 1999 07:04:48 -0000
Received: (qmail 13735 invoked by alias); 26 Jul 1999 07:04:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7280
Received: (qmail 13728 invoked from network); 26 Jul 1999 07:04:29 -0000
Date: Mon, 26 Jul 1999 03:04:27 -0400
From: Will Day <willday@rom.oit.gatech.edu>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: zsh under BeOS?
Message-ID: <19990726030426.A18265@rom.oit.gatech.edu>
Reply-To: Will Day <willday@rom.oit.gatech.edu>
Mime-Version: 1.0
Content-Type: multipart/signed; boundary=a8Wt8u1KmwUX3Y2C; micalg=pgp-md5;
	protocol="application/pgp-signature"
X-Mailer: Mutt 0.95.3i
X-no-archive: yes


--a8Wt8u1KmwUX3Y2C
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Has anyone been able to get zsh working under BeOS?  I can't seem to get
anything done on the system without my favorite shell around. :)

So far, with version 3.1.6-test3, I have it kinda-working.  It's worth
nothing that it compiled with a lot less effort than did 3.0.5, or 3.1.5
(which kept failing sed's during configure).  Had to #undef JOB_CONTROL,
#include <sys/socket.h>, and work around the lack of link() in
lockhistfile().  After that, I seem to be stuck in waitforpid() and
waitjob().

I made a little progress after noting that kill(pid, 0), does not return
ESRCH for a non-existant process, but returns EINVAL instead, so I worked
around that in waitforpid() and killjb().

Now, I'm stuck.  When running a command from the prompt, it loops in
waitjob(), as jn->stat is never cleared.  From tracing through with bdb,
it looks almost like handler() isn't getting called on SIGCHLD, and I
can't seem to find an explanation for that.

I haven't quite run out of things to try, but I figured I'd ask around
for hints or in case anyone had already done the work, before I really
started digging into it.

--=20
Will Day     <PGP mail preferred>     OIT / O&E / Technical Support
willday@rom.oit.gatech.edu            Georgia Tech, Atlanta 30332-0715
  -> Opinions expressed are mine alone and do not reflect OIT policy <-
Those who would give up essential Liberty, to purchase a little temporary
Safety, deserve neither Liberty nor Safety.
    Benjamin Franklin, Pennsylvania Assembly, Nov. 11, 1755

--a8Wt8u1KmwUX3Y2C
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3a
Comment: http://rom.oit.gatech.edu/~willday/pubkey.asc

iQCVAwUBN5wIeRDHlOdPw2ZdAQGfjgQAxQjdzOY+PChsEzJALri0gYK9GZOzkwOX
VcVYnrk/0HtwkRk0oml+bz5R0zIJYcL8nTpYktcXTAyRgaCrxlBsv0H6CC0wAdsj
H+Ge4Ud6W1v4mlM3eYDMBDjPF4V8cZehgLxL/JyfC5SRxIFq8iguEcMCSEVQ4mGV
TfSfgrfLGmw=
=mdf3
-----END PGP SIGNATURE-----

--a8Wt8u1KmwUX3Y2C--


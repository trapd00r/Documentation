From zsh-workers-return-20538-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 01 12:55:51 2004
Return-Path: <zsh-workers-return-20538-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3778 invoked from network); 1 Nov 2004 12:55:50 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Nov 2004 12:55:50 -0000
Received: (qmail 94654 invoked from network); 1 Nov 2004 12:55:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Nov 2004 12:55:42 -0000
Received: (qmail 5616 invoked by alias); 1 Nov 2004 12:55:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20538
Received: (qmail 5601 invoked from network); 1 Nov 2004 12:55:27 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 1 Nov 2004 12:55:27 -0000
Received: (qmail 94360 invoked from network); 1 Nov 2004 12:55:27 -0000
Received: from smtp1.freeserve.com (HELO mwinf3008.me.freeserve.com) (193.252.22.158)
  by a.mx.sunsite.dk with SMTP; 1 Nov 2004 12:55:24 -0000
Received: by mwinf3008.me.freeserve.com (SMTP Server, from userid 1003)
	id EDDB71800096; Mon,  1 Nov 2004 13:55:22 +0100 (CET)
Received: from wwinf3005 (wwinf3005 [172.22.159.32])
	by mwinf3008.me.freeserve.com (SMTP Server) with ESMTP id CF1C11800081
	for <zsh-workers@sunsite.dk>; Mon,  1 Nov 2004 13:55:22 +0100 (CET)
Message-ID: <14961417.1099313722842.JavaMail.www@wwinf3005>
From: pws@pwstephenson.fsnet.co.uk
Reply-To: pws@pwstephenson.fsnet.co.uk
To: zsh-workers@sunsite.dk
Subject: Re: A parsing bug that has been around for ... years? decades?
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: [81.105.217.44]
Date: Mon,  1 Nov 2004 13:55:22 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.2 required=6.0 tests=NO_REAL_NAME autolearn=no 
	version=2.63
X-Spam-Hits: 0.2

> Consider: 
>  
> zagzig% a=( 1 2 3 4 5 ) 
> zagzig% noglob print x=( $^a ) 
> x=( 1 ) x=( 2 ) x=( 3 ) x=( 4 ) x=( 5 ) 
>  
> There are spaces around $^a, so one (or perhaps both) of the following  
> should have happened: 
>  
> 1. 'x=(' and ')' should have been separate words, and RC_EXPAND_PARAM  
>    should have had no effect at all, yielding "x=( 1 2 3 4 5 )". 
>  
> 2. a parse error should have occurred on the closing paren. 
>  
> What apparently did happen, but IMO should not have, is that everything 
> in the parens was swallowed up as glob qualifiers, but then the glob was 
> not performed. 
 
It's only indirectly to do with glob handling.  It's a long-standing feature that opening 
parentheses that aren't in command position require a matching closing 
parenthesis.  Globbing is the main use for this, but I don't think there's any 
possibility of spotting a glob qualifier as earlier as the initial parsing code. 
 
pws 
 

-- 

Whatever you Wanadoo:
http://www.wanadoo.co.uk/time/

This email has been checked for most known viruses - find out more at: http://www.wanadoo.co.uk/help/id/7098.htm


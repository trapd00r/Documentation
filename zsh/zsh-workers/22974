From zsh-workers-return-22974-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 07 10:51:54 2006
Return-Path: <zsh-workers-return-22974-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4335 invoked from network); 7 Nov 2006 10:51:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Nov 2006 10:51:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 35702 invoked from network); 7 Nov 2006 10:51:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Nov 2006 10:51:40 -0000
Received: (qmail 18255 invoked by alias); 7 Nov 2006 10:51:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22974
Received: (qmail 18246 invoked from network); 7 Nov 2006 10:51:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Nov 2006 10:51:37 -0000
Received: (qmail 35371 invoked from network); 7 Nov 2006 10:51:37 -0000
Received: from cluster-c.mailcontrol.com (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 7 Nov 2006 10:51:33 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly11c.srv.mailcontrol.com (MailControl) with ESMTP id kA7AnD3o005688
	for <zsh-workers@sunsite.dk>; Tue, 7 Nov 2006 10:51:15 GMT
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 7 Nov 2006 10:49:16 +0000
Date: Tue, 7 Nov 2006 10:49:16 +0000
From: Peter Stephenson <pws@csr.com>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Hooks
Message-Id: <20061107104916.d01e2fa5.pws@csr.com>
In-Reply-To: <20061107081800.GA4420@sc>
References: <5db995410611060845y53f673e6je029a9c60659f116@mail.gmail.com>
	<20061106174053.GA4323@sc>
	<5db995410611061314l26e089b8wb214da46064c8235@mail.gmail.com>
	<20061106215051.GB4323@sc>
	<Pine.OSX.4.61.0611061617370.1112@vanunu.ucsc.edu>
	<20061107081800.GA4420@sc>
Organization: Cambridge Silicon Radio
X-Mailer: Sylpheed version 2.2.9 (GTK+ 2.8.20; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 07 Nov 2006 10:49:16.0650 (UTC) FILETIME=[5EF0CCA0:01C7025A]
X-Scanned-By: MailControl A-07-06-75 (www.mailcontrol.com) on 10.67.0.121

Stephane Chazelas <Stephane_Chazelas@yahoo.fr> wrote:
> functions[preexec]+='
>   get_saved_dirstack'
> functions[chpwd]+='
>   save_dirstack'

This is even further away from the original subject, but I've often felt
that functions like preexec and chpwd are getting a bit overloaded and
are unnecessarily hard to maintain automatically.  It would be easy to
add an array which could contain names of functions to be executed,
similar to Emacs hooks.  Of course you can implement such an array
within the existing functions, but the advantage of having a fixed
mechanism is that it's easy to add to and be sure it's working without
getting in anyone else's way.  You still have namespace problems, of
course, but if you have functions called get_saved_dirstack and
save_dirstack that clash your real problem is almost certainly more
basic than naming.

However, I'm not sure if it's really needed.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Capítulo 7. Gran Maestría en Git</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="ch06.html" title=
  "Capítulo 6. Git Multijugador">
  <link rel="next" href="ch08.html" title=
  "Capítulo 8. Secrets Revealed">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Prólogo</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_gracias">Gracias!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_licencia">Licencia</a></span></li>

            <li><span class="section"><a href=
            "index.html#_hosting_git_gratuito">Hosting Git
            gratuito</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Introducción</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_trabajar_es_jugar">Trabajar Es
            Jugar</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_control_de_versiones">Control De
            Versiones</a></span></li>

            <li>
              <span class="section"><a href=
              "ch01.html#_control_distribu_do">Control
              Distribuído</a></span>

              <ul>
                <li><span class="section"><a href=
                "ch01.html#_una_tonta_superstici_n">Una Tonta
                Superstición</a></span></li>
              </ul>
            </li>

            <li><span class="section"><a href=
            "ch01.html#_conflictos_al_fusionar">Conflictos al
            fusionar</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Trucos
          Básicos</a></span>

          <ul>
            <li>
              <span class="section"><a href=
              "ch02.html#_guardando_estados">Guardando
              Estados</a></span>

              <ul>
                <li><span class="section"><a href=
                "ch02.html#_agrega_elimina_renombra">Agrega,
                Elimina, Renombra</a></span></li>
              </ul>
            </li>

            <li>
              <span class="section"><a href=
              "ch02.html#_deshacer_rehacer_avanzado">Deshacer/Rehacer
              Avanzado</a></span>

              <ul>
                <li><span class="section"><a href=
                "ch02.html#_revirtiendo">Revirtiendo</a></span></li>
              </ul>
            </li>

            <li><span class="section"><a href=
            "ch02.html#_descargando_archivos">Descargando
            Archivos</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_lo_m_s_nuevo">Lo Más Nuevo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_publicaci_n_al_instante">Publicación Al
            Instante</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_que_es_lo_que_hice">Que es lo que
            hice?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_ejercicio">Ejercicio</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3.
          Clonando</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_sincronizar_computadoras">Sincronizar
            Computadoras</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_control_cl_sico_de_fuentes">Control Clásico
            de Fuentes</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bifurcando_fork_un_proyecto">Bifurcando
            (fork) un proyecto</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_respaldos_definitivos">Respaldos
            Definitivos</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_multitask_a_la_velocidad_de_la_luz">Multitask
            A La Velocidad De La Luz</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_control_guerrillero_de_versiones">Control
            Guerrillero De Versiones</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Magia Con
          Los Branches</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_la_tecla_del_jefe">La Tecla Del
            Jefe</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_trabajo_sucio">Trabajo
            Sucio</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_arreglos_r_pidos">Arreglos
            Rápidos</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_flujo_de_trabajo_ininterrumpido">Flujo De
            Trabajo Ininterrumpido</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_reorganizando_una_mezcla">Reorganizando Una
            Mezcla</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_administrando_branches">Administrando
            branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_branches_temporales">Branches
            Temporales</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_trabaja_como_quieras">Trabaja como
            quieras</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Lecciones de
          Historia</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_me_corrijo">Me corrijo</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_y_algo_m_s">… Y Algo
            Más</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_los_cambios_locales_al_final">Los Cambios
            Locales Al Final</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_reescribiendo_la_historia">Reescribiendo la
            Historia</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_haciendo_historia">Haciendo
            Historia</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_d_nde_nos_equivocamos">¿Dónde Nos
            Equivocamos?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_qui_n_se_equivoc">¿Quién Se
            Equivocó?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_experiencia_personal">Experiencia
            Personal</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Git
          Multijugador</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_qui_n_soy_yo">¿Quién Soy
            Yo?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_sobre_ssh_http">Git Sobre SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_sobre_cualquier_cosa">Git Sobre
            Cualquier Cosa</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_parches_la_moneda_global">Parches: La
            Moneda Global</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_lo_siento_nos_hemos_movido">Lo Siento, Nos
            Hemos Movido</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_ramas_remotas">Ramas
            Remotas</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_m_ltiples_remotes">Múltiples
            Remotes</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_mis_preferencias">Mis
            Preferencias</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Gran
          Maestría en Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_lanzamientos_de_c_digo">Lanzamientos de
            Código</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_commit_de_lo_que_cambi">Commit De Lo Que
            Cambió</a></span></li>

            <li>
              <span class="section"><a href=
              "ch07.html#_mi_commit_es_muy_grande">¡Mi Commit Es
              Muy Grande!</a></span>

              <ul>
                <li><span class="section"><a href=
                "ch07.html#_cambios_en_el_emphasis_stage_emphasis">Cambios
                en el <span class=
                "emphasis"><em>stage</em></span></a></span></li>
              </ul>
            </li>

            <li><span class="section"><a href=
            "ch07.html#_no_pierdas_la_cabeza">No Pierdas La
            Cabeza</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_cazando_cabezas">Cazando
            Cabezas</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_construyendo_sobre_git">Construyendo sobre
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_acrobacias_peligrosas">Acrobacias
            Peligrosas</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_mejora_tu_imagen_p_blica">Mejora Tu Imagen
            Pública</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Secrets
          Revealed</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_invisibility">Invisibility</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integrity">Integrity</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelligence">Intelligence</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indexing">Indexing</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_git_8217_s_origins">Git’s
            Origins</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_the_object_database">The Object
            Database</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_trees">Trees</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_commits">Commits</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indistinguishable_from_magic">Indistinguishable
            From Magic</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Defectos de
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_debilidades_de_sha1">Debilidades De
            SHA1</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_archivos_no_relacionados">Archivos No
            Relacionados</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_qui_n_edita_qu">¿Quién Edita
            Qué?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_historia_por_archivo">Historia Por
            Archivo</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_clonado_inicial">Clonado
            inicial</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_proyectos_vol_tiles">Proyectos
            Volátiles</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_contador_global">Contador
            Global</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_subdirectorios_vac_os">Subdirectorios
            Vacíos</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_commit_inicial">Commit
            Inicial</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_rarezas_de_la_interfaz">Rarezas De La
            Interfaz</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B.
        Translating This Guide</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Capítulo 7. Gran Maestría en Git">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_gran_maestr_a_en_git"></a>Capítulo 7. Gran Maestría en
          Git</h2>
        </div>
      </div>
    </div>

    <p>Esta página con nombre pretencioso es el cajón donde dejar
    los trucos de Git no categorizados.</p>

    <div class="section" title="Lanzamientos de Código">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_lanzamientos_de_c_digo"></a>Lanzamientos de
            Código</h2>
          </div>
        </div>
      </div>

      <p>Para mis proyectos, Git controla únicamente los ficheros
      que me gustaría archivar y enviar a los usuarios. Para crear
      un tarball del código fuente, ejecuto:</p>
      <pre class="literallayout">
$ git archive --format=tar --prefix=proj-1.2.3/ HEAD
</pre>
    </div>

    <div class="section" title="Commit De Lo Que Cambió">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_commit_de_lo_que_cambi"></a>Commit De Lo Que
            Cambió</h2>
          </div>
        </div>
      </div>

      <p>Decirle a Git cuándo agregaste, eliminaste o renombraste
      archivos es complicado para ciertos proyectos. En cambio,
      puedes escribir:</p>
      <pre class="literallayout">
$ git add .
$ git add -u
</pre>

      <p>Git va a mirar los archivos en el directorio actual y
      resolver los detalles por si mismo. En lugar del segundo
      comando add, corre <code class="literal">git commit -a</code>
      si estás en condiciones de hacer commit. Ver en <span class=
      "strong"><strong>git help ignore</strong></span> como
      especificar archivos que deberían ser ignorados.</p>

      <p>Puedes hacer lo de arriba en un único paso con:</p>
      <pre class="literallayout">
$ git ls-files -d -m -o -z | xargs -0 git update-index --add --remove
</pre>

      <p>Las opciones <span class=
      "strong"><strong>-z</strong></span> y <span class=
      "strong"><strong>-0</strong></span> previenen efectos
      secundarios adversos de archivos que contienen caracteres
      extraños. Como este comando agrega archivos ignorados,
      podrías querer usar la opción <code class="literal">-x</code>
      or <code class="literal">-X</code>.</p>
    </div>

    <div class="section" title="¡Mi Commit Es Muy Grande!">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_mi_commit_es_muy_grande"></a>¡Mi Commit Es Muy
            Grande!</h2>
          </div>
        </div>
      </div>

      <p>¿Postergaste hacer un commit por demasiado tiempo?
      ¿Estabas enfervorizado escribiendo código y te olvidaste del
      control de fuentes hasta ahora? ¿Hiciste una serie de cambios
      no relacionados, simplemente porque es tu estilo?</p>

      <p>No te preocupes, ejecuta:</p>
      <pre class="literallayout">
$ git add -p
</pre>

      <p>Por cada edición que hiciset, Git va a mostrar el pedazo
      de código que fue cambiado, y preguntar si debería ser parte
      del próximo commit. Contesta con "y" o "n". Hay otras
      opciones, como posponer la decisión; escribe "?" para saber
      más.</p>

      <p>Una vez satisfecho, escribe</p>
      <pre class="literallayout">
$ git commit
</pre>

      <p>para hacer un commit que solo contiene los cambios
      seleccionados (los cambios <span class=
      "emphasis"><em>staged</em></span>). Asegúrate de omitir la
      opción <span class="strong"><strong>-a</strong></span>, o Git
      va a poner todo lo editado en el commit.</p>

      <p>¿Que pasa si editaste varios archivos en varios lugares?
      Revisar cada cambio uno por uno se vuelve frustrante y
      adormecedor. En este caso, usa <span class=
      "strong"><strong>git add -i</strong></span>, cuya interfaz es
      menos clara pero más flexible. Con solo presionar un par de
      teclas, puedes poner o sacar del <span class=
      "emphasis"><em>stage</em></span> varios archivos a la vez, o
      revisar y seleccionar cambios solamente en archivos
      particulares. Como alternativa se puede usar <span class=
      "strong"><strong>git commit --interactive</strong></span>, el
      cual hace commit luego de que terminas.</p>

      <div class="section" title="Cambios en el stage">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a name=
              "_cambios_en_el_emphasis_stage_emphasis"></a>Cambios
              en el <span class=
              "emphasis"><em>stage</em></span></h3>
            </div>
          </div>
        </div>

        <p>Hasta ahora hemos evitado el famoso <span class=
        "emphasis"><em>indice</em></span> de git, pero ahora
        debermos enfrentarlo para explicar lo de arriba. El indice
        es un area temporal de montaje. Git evita enviar datos
        directamente entre tu proyecto y su historia. En su lugar,
        Git primero escribe datos al índice, y luego copia los
        datos del índice a su destino final.</p>

        <p>Por ejemplo, <span class="strong"><strong>commit
        -a</strong></span> es en realidad un proceso de 2 pasos. El
        primer paso pone una foto del estado actual de cada archivo
        administrado en el índice. El segundo paso graba de forma
        permanente esa foto que está en el índice. Un commit hecho
        sin <span class="strong"><strong>-a</strong></span> solo
        efectúa el segundo paso, y solo tiene sentido luego de
        haber ejecutado comandos que de alguna forma alteran el
        índice, como <span class="strong"><strong>git
        add</strong></span>.</p>

        <p>Usualmente podemos ignorar el índice y pretender que
        estamos leyendo y escribiendo directo en la historia. En
        esta ocasión, queremos un control más fino de lo que se
        escribe en la historia, y nos vemos forzados a manipular el
        índice. Guardamos una foto de algunos, pero no todos, de
        nuestros cambios en el índice, y luego grabamos de forma
        permanenta esta instantánea cuidadosamente organizada.</p>
      </div>
    </div>

    <div class="section" title="No Pierdas La Cabeza">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_no_pierdas_la_cabeza"></a>No Pierdas La Cabeza</h2>
          </div>
        </div>
      </div>

      <p>El tag HEAD (Cabeza) es como un cursor que normalmente
      apunta al último commit, avanzando con cada nuevo commit.
      Algunos comandos de Git te dejan moverlo. Por ejemplo:</p>
      <pre class="literallayout">
$ git reset HEAD~3
</pre>

      <p>mueve el HEAD tres commits hacia atrás. Por lo tanto todos
      los comandos de Git ahora actúan como si no hubieras hecho
      esos últimos tres commits, mientras tus archivos permanecen
      en el presente. Ver la página de ayuda para algunas
      aplicaciones.</p>

      <p>¿Como hago para volver al futuro? Los commits del pasado
      nada saben del futuro.</p>

      <p>Teniendo el SHA1 del HEAD original, hacemos:</p>
      <pre class="literallayout">
$ git reset SHA1
</pre>

      <p>Pero supongamos que nunca lo anotaste. No te preocupes,
      para comandos como este, Git guarda el HEAD original como un
      tag llamado ORIG_HEAD, y puedes volver sano y salvo con:</p>
      <pre class="literallayout">
$ git reset ORIG_HEAD
</pre>
    </div>

    <div class="section" title="Cazando Cabezas">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_cazando_cabezas"></a>Cazando Cabezas</h2>
          </div>
        </div>
      </div>

      <p>Quizás ORIG_HEAD no es suficiente. Quizás acabas de
      descubrir que cometiste un error monumental y que hay que
      volver a un commit antiguo en una rama olvidada hace largo
      tiempo.</p>

      <p>Por defecto, Git guarda un commit por al menos 2 semanas,
      incluso si le ordenaste destruir la rama que lo contenía. El
      problema es encontra el hash apropiado. Podrías mirar todos
      los hashes en <code class="literal">.git/objects</code> y
      usar prueba y error para encontrar el que buscas. Pero hay
      una forma mucho más fácil.</p>

      <p>Git guarda el hash de cada commit que hace en <code class=
      "literal">.git/logs</code>. El subdirectorio <code class=
      "literal">refs</code> contiene la historia de la actividad en
      todas las ramas, mientras que el archivo <code class=
      "literal">HEAD</code> tiene cada hash que alguna vez ha
      tomado. Este último puede usarse para encontrar hashes de
      commits en branches que se han borrado de manera
      accidental.</p>

      <p>El comando reflog provee una interfaz amigable para estos
      logs. Prueba</p>
      <pre class="literallayout">
$ git reflog
</pre>

      <p>En lugar de cortar y pegar hashes del reflog, intenta:</p>
      <pre class="literallayout">
$ git checkout "@{10 minutes ago}"
</pre>

      <p>O prueba un checkout del 5to commit que visitaste hacia
      atrás:</p>
      <pre class="literallayout">
$ git checkout "@{5}"
</pre>

      <p>Ver la sección “Specifying Revisions” de <span class=
      "strong"><strong>git help rev-parse</strong></span> por mas
      datos.</p>

      <p>Podrías querer configurar un periodo de gracia mayor para
      los commits condenados. Por ejemplo:</p>
      <pre class="literallayout">
$ git config gc.pruneexpire "30 days"
</pre>

      <p>significa que un commmit eliminado se va a perder de forma
      permanente solo cuando hayan pasado 30 dáis y se ejecute
      <span class="strong"><strong>git gc</strong></span>.</p>

      <p>También podrías querer deshabilitar invocaciones
      automáticas de <span class="strong"><strong>git
      gc</strong></span>:</p>
      <pre class="literallayout">
$ git config gc.auto 0
</pre>

      <p>en cuyo caso los commits solo serán borrados cuando
      ejecutes <span class="strong"><strong>git gc</strong></span>
      de forma manual.</p>
    </div>

    <div class="section" title="Construyendo sobre Git">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_construyendo_sobre_git"></a>Construyendo sobre
            Git</h2>
          </div>
        </div>
      </div>

      <p>Siguiendo la tradición UNIX, el diseño de Git permite ser
      facilmente usado como un componente de bajo nivel de otros
      programas, como GUI e interfaces web, interfaces de linea de
      comandos alternativas, herramientas de manejo de patches,
      herramientas de importación y conversión, etc. De hecho,
      algunos de los comandos de Git son ellos mismos scripts
      parados sobre los hombros de gigantes. Con unos pocos
      ajustes, puedes personalizar Git para cubrir tus
      necesidades.</p>

      <p>Un truco simple es usar los alias incluidos en git para
      acortar los comandos usados de forma más frecuente:</p>
      <pre class="literallayout">
$ git config --global alias.co checkout
$ git config --global --get-regexp alias  # muestra los alias actuales
alias.co checkout
$ git co foo                              # igual a 'git checkout foo'
</pre>

      <p>Otro es imprimir la rama actual en el prompt, o en el
      título de la ventana.</p>

      <p>Usar</p>
      <pre class="literallayout">
$ git symbolic-ref HEAD
</pre>

      <p>muestra el nombre de la rama actual. En la práctica, es
      probable que quieras quitar el "refs/heads/" e ignorar los
      errores:</p>
      <pre class="literallayout">
$ git symbolic-ref HEAD 2&gt; /dev/null | cut -b 12-
</pre>

      <p>El subdirectorio <code class="literal">contrib</code> es
      la cueva de los tesoros de las herramientas hechas con Git.
      Con tiempo, algunas de ellas pueden ser promovidas a comandos
      oficiales. En Debian y Ubuntu, este directorio está en
      <code class=
      "literal">/usr/share/doc/git-core/contrib</code>.</p>

      <p>Un residente popular es <code class=
      "literal">workdir/git-new-workdir</code>. Usando symlinks
      inteligentes, este script crea un nuevo directorio de trabajo
      cuya historia es compartida con el repositorio original: $
      git-new-workdir repositorio/existente nuevo/directorio</p>

      <p>El nuevo directorio y sus archivos interiores pueden ser
      vistos como un clon, excepto que como la historia es
      compartida, ambos árboles se mantienen sincronizados de forma
      automática. No hay necesidad de merges, push ni pull.</p>
    </div>

    <div class="section" title="Acrobacias Peligrosas">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_acrobacias_peligrosas"></a>Acrobacias Peligrosas</h2>
          </div>
        </div>
      </div>

      <p>En estos dias, Git hace difícil que el usuario destruya
      datos de manera accidental. Pero si sabes lo que estás
      haciendo, puedes hacer caso omiso de las trabas de seguridad
      para los comandos comunes.</p>

      <p><span class="strong"><strong>Checkout</strong></span>: Los
      cambios no commiteados hacen que checkout falle. Para
      destruir tus cambios, y hacer checkout de un commit dado, usa
      la opción de forzar:</p>
      <pre class="literallayout">
$ git checkout -f COMMIT
</pre>

      <p>Por otro lado, si especificas una ruta específica para
      hacer checkout, no hay chequeos de seguridad. Las rutas
      suministradas son sobre-escritas de forma silenciosa. Hay que
      tener cuidado al usar checkout de esta forma:</p>

      <p><span class="strong"><strong>Reset</strong></span>: Reset
      también falla en presencia de cambios sin commmitear. Para
      hacerlo a la fuerza, ejecuta:</p>
      <pre class="literallayout">
$ git reset --hard [COMMIT]
</pre>

      <p><span class="strong"><strong>Branch</strong></span>: El
      borrado de una rama falla si esto causa que se pierdan
      cambios, para forzarlo escribe:</p>
      <pre class="literallayout">
$ git branch -D BRANCH  # en lugar de -d
</pre>

      <p>De forma similar, intentar sobreescribir una rama moviendo
      otra, falla si esto resultase en pérdida de datos. Para
      forzar el mover una rama, corre:</p>
      <pre class="literallayout">
  $ git branch -M [ORIGEN] DESTINO  # en lugar de -m
A diferencia de checkout y reset, estos dos comandos evitan la destrucción de datos.
Los cambios están aún guardados en el subdirectorio .git, y pueden obtenerse
recuperando el has apropiado de `.git/logs` (ver "Cazando Cabezas" arriba).
Por defecto, serán guardados por al menos dos semanas.
</pre>

      <p><span class="strong"><strong>Clean</strong></span>:
      Algunos comandos de Git se rehúsan a proceder porque están
      preocupados de destruir archivos no monitoreados. Si tienes
      la certeza de que todos los archivos y directorios sin
      monitorear son prescindibles, se pueden borrar sin piedad
      con:</p>
      <pre class="literallayout">
$ git clean -f -d
</pre>

      <p>¡La próxima vez, ese comando molesto va a funcionar!</p>
    </div>

    <div class="section" title="Mejora Tu Imagen Pública">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_mejora_tu_imagen_p_blica"></a>Mejora Tu Imagen
            Pública</h2>
          </div>
        </div>
      </div>

      <p>Los errores estúpidos abundan en la historia de muchos
      proyectos. El más preocupante son los archivos perdidos por
      el olvido de ejecutar <span class="strong"><strong>git
      add</strong></span>. Por suerte nunca perdí datos cruciales
      por omisión accidental, dado que muy rara vez elimino
      directorios de trabajo originales. Lo normal es que note el
      error un par de commits mas adelante, por lo que el único
      daño es un poco de historia perdida y el tener que admitir la
      culpa.</p>

      <p>También me preocupo por no tenes espacios en blanco al
      final de las líneas. Aunque son inofensivos, procuro que
      nunca aparezcan en la historia pública.</p>

      <p>Además, si bien nunca me sucedió, me preocupo por no dejar
      conflictos de merge sin resolver. Usualmente los descubro al
      compilar el proyecto, pero hay algunos casos en los que se
      puede no notar.</p>

      <p>Es útil comprar un seguro contra la idiotez, usando un
      <span class="emphasis"><em>hook</em></span> para alertarme de
      estos problemas:</p>
      <pre class="literallayout">
$ cd .git/hooks
$ cp pre-commit.sample pre-commit  # En versiones mas viejas de Git: chmod +x pre-commit
</pre>

      <p>Ahora Git aborta un commit si se detectan espacios
      inútiles en blanco o conflictos de merge sin resolver.</p>

      <p>Para esta guía, eventualmente agregué lo siguiente al
      inicio del hook <span class=
      "strong"><strong>pre-commit</strong></span>, pare prevenirme
      de la desatención.</p>
      <pre class="literallayout">
if git ls-files -o | grep '\.txt$'; then
  echo FALLA! Archivos .txt sin monitorear.
  exit 1
fi
</pre>

      <p>Varias operaciones de git soportan hooks; ver <span class=
      "strong"><strong>git help hooks</strong></span>. Se pueden
      escribir hooks para quejarse de errores ortográficos en los
      mensajes de commit, agregar nuevos archivos, indentar
      párrafos, agregar una entrada en una página, reproducir un
      sonido, etc.</p>

      <p>Habíamos encontrado el hook <span class=
      "strong"><strong>post-update</strong></span> antes, cuando
      discutíamos como usar Git sobre HTTP. Este hook actualiza
      algunos archivos que Git necesita para comunicación no
      nativa.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

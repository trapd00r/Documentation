From zsh-users-return-14560-mason-zsh=primenet.com.au@zsh.org Thu Nov 12 18:46:34 2009
Return-Path: <zsh-users-return-14560-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24162 invoked by alias); 12 Nov 2009 18:46:34 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14560
Received: (qmail 16710 invoked from network); 12 Nov 2009 18:46:31 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at klanderman.net does not designate permitted sender hosts)
From: Greg Klanderman <gak@klanderman.net>
To: zsh-users@zsh.org
Subject: Re: the function to show a digit argument while it is being typed
Reply-To: gak@klanderman.net
Date: Thu, 12 Nov 2009 13:38:03 -0500
In-Reply-To: <091111094507.ZM30174@torch.brasslantern.com> (Bart Schaefer's message of "Wed, 11 Nov 2009 09:45:07 -0800")
Message-ID: <m3tywz612s.fsf@klanderman.net>
User-Agent: Gnus/5.1008 (Gnus v5.10.8) XEmacs/21.4.17 (linux)
References: <10081257897632@webmail89.yandex.ru>
	<237967ef0911101822g5bfcf4fao25fc33ba0a2e8604@mail.gmail.com>
	<091110204748.ZM28704@torch.brasslantern.com>
	<237967ef0911102217m1325dc59y8d7388e9f6f21c7b@mail.gmail.com>
	<091111001419.ZM28852@torch.brasslantern.com>
	<m3eio56o4i.fsf@klanderman.net>
	<091111094507.ZM30174@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

>>>>> On November 11, 2009 Bart Schaefer <schaefer@brasslantern.com> wrote:

> Things get even hairier when argument-base is thrown in.

So I decided to play with that a bit, and in my experience, use of
argument-base to set the base only persists for one subsequent use of
digit-argument or universal-argument.  Is that expected?  It's what I
see even with 'zsh -f'.  The documentation is not explicit on this
point, but my assumption is that the setting would persist until the
next change, and I do not see anywhere in the code where zmod.base is
modified other than in argumentbase(), though there are two struct
assignments to it, however they look to be doing save/restore types of
stuff, but I'm not sure what bin_zle_call() is wrapped around..

Anyway, is this how it's supposed to work?

Also, in universalargument(), is it intentional that if an argument is
explicitly passed it is interpreted in base 10?

thanks,
Greg


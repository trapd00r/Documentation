From zsh-workers-return-18477-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 27 10:27:24 2003
Return-Path: <zsh-workers-return-18477-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17807 invoked from network); 27 Apr 2003 10:27:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 27 Apr 2003 10:27:23 -0000
Received: (qmail 485 invoked by alias); 27 Apr 2003 10:27:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18477
Received: (qmail 478 invoked from network); 27 Apr 2003 10:27:16 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 27 Apr 2003 10:27:16 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [203.24.36.2] by sunsite.dk (MessageWall 1.0.8) with SMTP; 27 Apr 2003 10:27:15 -0000
Received: (qmail 18280 invoked by uid 8); 27 Apr 2003 10:27:13 -0000
To: zsh-workers@sunsite.dk
Path: not-for-mail
From: Geoff Wing <mason@primenet.com.au>
X-Newsgroups: lists.zsh.workers
Subject: Re: PATCH: fix menu completion on terminal with do=^J/without do
Date: Sun, 27 Apr 2003 10:27:13 +0000 (UTC)
Organization: PrimeNet Computer Consultants
Lines: 24
Message-ID: <slrnbanc40.i6.mason@sparkles.primenet.com.au>
References: <200304271249.49111.arvidjaar@mail.ru>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: sparkles.primenet.com.au
X-Trace: coral.primenet.com.au 1051439233 15917 203.43.15.10 (27 Apr 2003 10:27:13 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: Sun, 27 Apr 2003 10:27:13 +0000 (UTC)
User-Agent: slrn/0.9.7.4 (NetBSD)

Andrey Borzenkov <arvidjaar@mail.ru> typed:
: Standard termcap for Linux console defines "do" (down_cursor) as ^J.  Zsh 
: init_term ignores it in this case (Geoff, could you enlighten why it does 
: it?); it then provides workaround in zle_refresh by actually using ^J but 
: moving cursor to needed column then.

Limiting the vagaries arrising out of tty post-processing.  In this
case, someone could have their tty settings (see "stty") such that CTRL-J
maps to CTRL-M CTRL-J which would make the TERM/termcap entry incorrect.
BTW, it's existed since version 2.0

: Unfortunately complist is using termcap directly and thus outputs no 
: down_cursor at all but believes it has moved to correct line.
 
: The patch exports tc_downcurs and makes complist using it. I refrain from 
: removing ^J code in init_term not knowing reasons or possible implications.

I'll look at it tomorrow (since I have just come back from the pub now)

Regards,
-- 
Geoff Wing : <gcw@pobox.com>
Rxvt Stuff : <gcw@rxvt.org>
Zsh Stuff  : <gcw@zsh.org>


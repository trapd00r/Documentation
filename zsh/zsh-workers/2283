From zsh-workers-request@euclid.skiles.gatech.edu  Sat Oct 26 06:31:08 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id GAA26798 for <mason@primenet.com.au>; Sat, 26 Oct 1996 06:31:06 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA03510; Fri, 25 Oct 1996 16:29:21 -0400 (EDT)
Resent-Date: Fri, 25 Oct 1996 16:29:21 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199610252029.WAA02999@bolyai.cs.elte.hu>
Subject: Re: bug fix for zsh 3.0.0
In-Reply-To: <199610252010.QAA04874@mongoose.bostic.com> from Keith Bostic at "Oct 25, 96 04:10:20 pm"
To: bostic@bsdi.com (Keith Bostic)
Date: Fri, 25 Oct 1996 22:29:45 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL27 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"wbN991.0.ms.XCISo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2283
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Keith Bostic wrote:
> Single capability strings in some termcap databases are bigger
> than 1K.

Show me an example.  A tercap string usually tells you things like how to
move the cursor to a given screen position.  This is never that big.  What
termcap feature has such a long string?

> I really saw a coredump in a previous version of zsh.
> The fix for that version was:
[...]
> 	-EXTERN char termbuf[1024];
> 	+EXTERN char termbuf[4096];

That's a completely different bug.  It caused problem when the _whole_
termcap database was long.  Your patch fixes a case where a single entry in
the database is more than 1024 bytes.  I still do not believe that such
termcap entries exist.  Note that zsh use only a given subset of the termcap
entries listed in globals.h in the tccapnams global array.  One of these
must be longer than 1024 bytes to get a coredump.  If one of these entries
is that long on your system it is probably better to disable it because
that is probably not the most optimal way to achieve that functionality.

Zoltan


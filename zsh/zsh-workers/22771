From zsh-workers-return-22771-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 26 17:54:31 2006
Return-Path: <zsh-workers-return-22771-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16820 invoked from network); 26 Sep 2006 17:54:29 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Sep 2006 17:54:29 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 99532 invoked from network); 26 Sep 2006 17:54:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Sep 2006 17:54:23 -0000
Received: (qmail 21193 invoked by alias); 26 Sep 2006 17:54:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22771
Received: (qmail 21180 invoked from network); 26 Sep 2006 17:54:19 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 26 Sep 2006 17:54:19 -0000
Received: (qmail 99199 invoked from network); 26 Sep 2006 17:54:19 -0000
Received: from cluster-c.mailcontrol.com (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 26 Sep 2006 17:54:18 -0000
Received: from rly12c.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly12c.srv.mailcontrol.com (MailControl) with ESMTP id k8QHqkhT004125
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <zsh-workers@sunsite.dk>; Tue, 26 Sep 2006 18:53:29 +0100
Received: from submission.mailcontrol.com (submission.mailcontrol.com [212.158.48.250])
	by rly12c.srv.mailcontrol.com (MailControl) id k8QHq05C002082
	for zsh-workers@sunsite.dk; Tue, 26 Sep 2006 18:52:00 +0100
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly12c-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id k8QHnguq026470; Tue, 26 Sep 2006 18:52:00 +0100 (BST)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Sep 2006 18:50:10 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.7/8.13.4) with ESMTP id k8QHoAlP002756;
	Tue, 26 Sep 2006 18:50:10 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.7/8.13.7/Submit) with ESMTP id k8QHoAXv002753;
	Tue, 26 Sep 2006 18:50:10 +0100
Message-Id: <200609261750.k8QHoAXv002753@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: "Larry P. Schrof" <larry@schrof.net>
cc: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: (Revisited): zsh + less == hard hang of tty. 
In-reply-to: <20060926172651.GB29060@lucien.blight.com> 
References: <20060926142946.GA1608@lucien.blight.com> <200609261700.k8QH0eVd001791@news01.csr.com> <20060926172651.GB29060@lucien.blight.com>
Comments: In-reply-to "Larry P. Schrof" <larry@schrof.net>
   message dated "Tue, 26 Sep 2006 12:26:51 -0500."
Date: Tue, 26 Sep 2006 18:50:10 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 26 Sep 2006 17:50:10.0431 (UTC) FILETIME=[360478F0:01C6E194]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-04-02 (www.mailcontrol.com) on 10.67.1.122

"Larry P. Schrof" wrote:
> - When I get a Linux tty to hang by doing this, log in on another tty,
>   and kill the *less* process, it terminates, and any I/O that was in
>   the buffer (from my extra keystrokes while less was hung) get
>   interpreted by the shell. zsh becomes responsive again.

Sounds from this you may need to run strace on the less inside
the zsh -c (or just do it interactively), since zsh appears to be
just blithely waiting.  We'll probably find less is trying to
grab the terminal and failing, or something like that... quite
what we do if that's the case, I'm not sure.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


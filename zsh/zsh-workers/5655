From zsh-workers-return-5655-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Mar 05 11:27:55 1999
Return-Path: <zsh-workers-return-5655-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17474 invoked from network); 5 Mar 1999 11:27:54 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Mar 1999 11:27:54 -0000
Received: (qmail 12707 invoked by alias); 5 Mar 1999 11:27:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5655
Received: (qmail 12695 invoked from network); 5 Mar 1999 11:27:38 -0000
Date: Fri, 5 Mar 1999 12:32:12 +0100
From: Thomas Ziehmer <ziehmer@rhrk.uni-kl.de>
To: zsh-workers@sunsite.auc.dk
Subject: trap problem
Message-ID: <19990305123212.A24019@digger.rhrk.uni-kl.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.1i

Hallo, 
with zsh 3.1.5 (the only tested version) on SGI and HP, but not on Linux, AIX 
and Solaris (there it works correct), the following script produces a wrong
output:

#!/usr/local/bin/zsh

function foo { \
echo step 1
ps
echo step 2
{ echo abcdef ; ps ; } | cat -
echo step 3
}

trap " foo ; exit " INT QUIT TERM HUP

{ time sleep 30 </dev/null ; } 2>/dev/null


ziehmer@o2000 [ziehmer]> t < t
^C
step 1
PID TTY     TIME CMD
21263 ttyq27  0:00 zsh-3.1.5 
23753 ttyq27  0:00 ps 
24969 ttyq27  0:00 t 
step 2
abcdef
step 3

The output of the second ps-command is not shown.
Why?

Regards
Thomas Ziehmer


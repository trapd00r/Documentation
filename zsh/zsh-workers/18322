From zsh-workers-return-18322-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 06 22:15:06 2003
Return-Path: <zsh-workers-return-18322-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16682 invoked from network); 6 Mar 2003 22:15:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Mar 2003 22:15:05 -0000
Received: (qmail 4137 invoked by alias); 6 Mar 2003 22:14:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18322
Received: (qmail 4126 invoked from network); 6 Mar 2003 22:14:57 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 6 Mar 2003 22:14:57 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.27.190.146] by sunsite.dk (MessageWall 1.0.8) with SMTP; 6 Mar 2003 22:14:57 -0000
Received: from ceramic.fifi.org (mail@ceramic.fifi.org [216.27.190.147])
	by tantale.fifi.org (8.9.3/8.9.3/Debian 8.9.3-21) with ESMTP id OAA12208;
	Thu, 6 Mar 2003 14:14:55 -0800
Received: from phil by ceramic.fifi.org with local (Exim 3.35 #1 (Debian))
	id 18r3dd-0005iV-00; Thu, 06 Mar 2003 14:14:53 -0800
To: Peter Whaite <peta@cortexmachina.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: Cant fg a suspended su (4.1.0-dev-7)
References: <200303061823.h26INXS07611@aragorn.cortexmachina.com>
From: Philippe Troin <phil@fifi.org>
Date: 06 Mar 2003 14:14:53 -0800
In-Reply-To: <200303061823.h26INXS07611@aragorn.cortexmachina.com>
Message-ID: <877kbcjg6a.fsf@ceramic.fifi.org>
Lines: 33
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Philippe Troin <phil@fifi.org>

Peter Whaite <peta@cortexmachina.com> writes:

> Philippe Troin said:
> > 
> > Mrm, that's not GNU su. Or it's a very heavily patched version of GNU
> > su. I've check shellutils 2.0 and it does a straight exec(), and does
> > not leave a parent process like seen above...
> 
> Well thats strange.  We have (RedHat 7.1)
> 
> % rpm -q -f /bin/su
> sh-utils-2.0-13
> % rpm --verify -f /bin/su
> %

Not really strange: shellutils (and GNU su) do not support PAM. Redhat
probably PAMified su and leaves a master process around to implement
the PAM session logout.

> On a RedHat 7.2 system we have sh-utils-2.0.11-5 and su doesnt exec
> itself away there either.
> 
> > Peter, can you confirm that this patch makes zsh perform as expected
> > with your su?
> 
> Yes it does work.

I assume you've tested both suspend and exec?

Bart, can you check-in the patch in CVS?

Thanks,
Phil.


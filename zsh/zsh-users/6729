From zsh-users-return-6729-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 22 06:51:44 2003
Return-Path: <zsh-users-return-6729-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18775 invoked from network); 22 Oct 2003 06:51:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 22 Oct 2003 06:51:44 -0000
Received: (qmail 23573 invoked by alias); 22 Oct 2003 06:51:30 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6729
Received: (qmail 23551 invoked from network); 22 Oct 2003 06:51:30 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 22 Oct 2003 06:51:30 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [199.67.51.101] by sunsite.dk (MessageWall 1.0.8) with SMTP; 22 Oct 2003 6:51:29 -0000
Received: (from dan@localhost)
	by dan.emsphone.com (8.12.9/8.12.9) id h9M6pPKa084236;
	Wed, 22 Oct 2003 01:51:25 -0500 (CDT)
	(envelope-from dan)
Date: Wed, 22 Oct 2003 01:51:25 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-users@sunsite.dk
Subject: Re: need for a fancier _pick_variant?
Message-ID: <20031022065125.GH55642@dan.emsphone.com>
References: <20031014062933.GC13457@lorien.emufarm.org> <1031022063903.ZM4449@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1031022063903.ZM4449@candle.brasslantern.com>
X-OS: FreeBSD 5.1-CURRENT
X-message-flag: Outlook Error
User-Agent: Mutt/1.5.4i

In the last episode (Oct 22), Bart Schaefer said:
> [ I've been busy and then away, so catching up on some old stuff. ]
> 
> On Oct 13, 11:29pm, Danek Duvall wrote:
> }
> } _diff_options calls
> } 
> }     _pick_variant -c diff 'gnu=GNU' unix -v
> } 
> } which doesn't match anything for Solaris diff, so the generic unix diff
> } options are chosen, and the result is thrown by the -u.
> }
> } Unfortunately, I don't know of any way of distinguishing Solaris diff by
> } its output, short of a brittle check of its usage statement.
> 
> I don't have access to a Solaris machine.  Does `diff -v` produce the
> usage message?  If so, I suggest that you use the "brittle" test just

Solaris 2.8 and older don't have -u:
/usr/bin/diff: illegal option -- v
usage: diff [-bitw] [-c | -e | -f | -h | -n] file1 file2
       diff [-bitw] [-C number] file1 file2
       diff [-bitw] [-D string] file1 file2
       diff [-bitw] [-c | -e | -f | -h | -n] [-l] [-r] [-s] [-S name] directory1 directory2

2.9 does:
/usr/bin/diff: illegal option -- v
usage: diff [-bitw] [-c | -e | -f | -h | -n | -u] file1 file2
       diff [-bitw] [-C number | -U number] file1 file2
       diff [-bitw] [-D string] file1 file2
       diff [-bitw] [-c | -e | -f | -h | -n | -u] [-l] [-r] [-s] [-S name] directory1 directory2

-- 
	Dan Nelson
	dnelson@allantgroup.com


From zsh-workers-request@euclid.skiles.gatech.edu Wed Feb 19 16:09:47 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 23572 invoked from network); 19 Feb 1997 16:09:46 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 19 Feb 1997 16:09:46 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id KAA03567; Wed, 19 Feb 1997 10:55:16 -0500 (EST)
Resent-Date: Wed, 19 Feb 1997 10:55:16 -0500 (EST)
Message-Id: <199702191557.QAA04106@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: compctl -X
Date: Wed, 19 Feb 1997 16:57:09 +0100
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"rQ5eH3.0.gt.Z9o2p"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2919
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Zoltan fixed compctl -X some time ago, but I think there's still
something wrong:  it works when listing but when actually completing
it prints the explanation only if the completion failed --- surely it
should print it only if the completion succeded?  You don't want to
be told `Doing completion X, 0 matches' when the completion mechanism
is trying something else, you want to be told when it *has* found
something according to that rule and is therefore inserting the
result.  (I should have woken up to this earlier, sorry.)

*** Src/Zle/zle_tricky.c.expl	Wed Feb 19 16:37:40 1997
--- Src/Zle/zle_tricky.c	Wed Feb 19 16:37:47 1997
***************
*** 2123,2129 ****
  	}
  
  	/* Print the explanation string if needed. */
! 	if (!showinglist && expl && !nmatches) {
  	    int up;
  
  	    feep();
--- 2123,2129 ----
  	}
  
  	/* Print the explanation string if needed. */
! 	if (!showinglist && expl && nmatches) {
  	    int up;
  
  	    feep();

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutsches Elektronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


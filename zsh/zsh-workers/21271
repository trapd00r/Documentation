From zsh-workers-return-21271-mason-zsh=primenet.com.au@sunsite.dk Wed May 25 00:27:24 2005
Return-Path: <zsh-workers-return-21271-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25894 invoked from network); 25 May 2005 00:27:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 May 2005 00:27:23 -0000
Received: (qmail 57438 invoked from network); 25 May 2005 00:27:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 May 2005 00:27:17 -0000
Received: (qmail 12101 invoked by alias); 25 May 2005 00:27:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21271
Received: (qmail 12088 invoked from network); 25 May 2005 00:27:14 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 May 2005 00:27:14 -0000
Received: (qmail 57151 invoked from network); 25 May 2005 00:27:14 -0000
Received: from ms-smtp-04.texas.rr.com (24.93.47.43)
  by a.mx.sunsite.dk with SMTP; 25 May 2005 00:27:10 -0000
Received: from amdxp.kalama.no-ip.org (cpe-66-68-88-186.austin.res.rr.com [66.68.88.186])
	by ms-smtp-04.texas.rr.com (8.12.10/8.12.7) with ESMTP id j4P0R5gJ007101
	for <zsh-workers@sunsite.dk>; Tue, 24 May 2005 19:27:05 -0500 (CDT)
Received: from [10.0.1.3] (unknown [10.0.1.3])
	by amdxp.kalama.no-ip.org (Postfix) with ESMTP id 81962764
	for <zsh-workers@sunsite.dk>; Tue, 24 May 2005 19:27:05 -0500 (CDT)
In-Reply-To: <200505231433.j4NEXJ5q015746@news01.csr.com>
References: <294439D0-476D-43F3-8326-8209C1F3FE9C@chemistry.ucsc.edu> <dc507f4a050523002352f05af1@mail.gmail.com> <200505231433.j4NEXJ5q015746@news01.csr.com>
Mime-Version: 1.0 (Apple Message framework v730)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FA10616D-A232-4FB8-A3CC-AB9492F683C7@kalama.no-ip.org>
Reply-To: Zsh hackers list <zsh-workers@sunsite.dk>
Content-Transfer-Encoding: 7bit
From: lists <lists@kalama.no-ip.org>
Subject: Re: zsh compiling on Apple OSX v. 10.4.x 
Date: Tue, 24 May 2005 19:27:02 -0500
To: Zsh hackers list <zsh-workers@sunsite.dk>
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

This worked on Mac OS 10.3 and 10.4 for me.  Thanks!

-Ryan
On May 23, 2005, at 9:33 AM, Peter Stephenson wrote:

> I don't know what definitions to use, but this shouldn't break
> anything.  I don't think autoconf allows you to undefine values; the
> easiest way to fix it there would be to avoid testing for poll() and
> poll.h at all on the appropriate systems.
>
> Index: Src/system.h
> ===================================================================
> RCS file: /cvsroot/zsh/zsh/Src/system.h,v
> retrieving revision 1.30
> diff -u -r1.30 system.h
> --- Src/system.h    24 Feb 2005 16:53:12 -0000    1.30
> +++ Src/system.h    23 May 2005 13:41:18 -0000
> @@ -300,6 +300,15 @@
>  # include <sys/socket.h>
>  #endif
>
> +#if defined(__APPLE__) && defined(HAVE_SELECT)
> +/*
> + * Prefer select() to poll() on MacOS X since poll() is known
> + * to be problematic in 10.4
> + */
> +#undef HAVE_POLL
> +#undef HAVE_POLL_H
> +#endif
> +
>  #ifdef HAVE_SYS_FILIO_H
>  # include <sys/filio.h>
>  #endif
>
> --  
> Peter Stephenson <pws@csr.com>                  Software Engineer
> CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
> Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223  
> 692070
>
>
> **********************************************************************
> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please notify
> the system manager.
>
> **********************************************************************
>
>


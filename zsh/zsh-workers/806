From pere@kjell.origo.telenor.no Fri Mar  8 22:40:24 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.4/8.7.3) with ESMTP id WAA15232 for <mason@werple.mira.net.au>; Fri, 8 Mar 1996 22:40:21 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id GAA03661; Fri, 8 Mar 1996 06:15:47 -0500 (EST)
Resent-From: Petter Reinholdtsen <petterr@stud.cs.uit.no>
Resent-Message-Id: <199603081114.AA121463684@pserv0.cs.uit.no>
X-Disclaimer: This message was sent from, not by, the University of Tromsoe
Date: Fri, 8 Mar 1996 11:36:29 +0100
From: pere@kjell.origo.telenor.no (Petter Reinholdtsen)
Message-Id: <199603081036.LAA03396@cola.origo.telenor.no>
To: zsh-workers@math.gatech.edu
Subject: "bugfix" for zsh 2.6beta13 on alpha OSF/1
Resent-To: zsh-workers@math.gatech.edu
Resent-Date: Fri, 08 Mar 1996 12:14:44 MET
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/806
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 813
Status: OR


Here is a small patch to get zsh to compile on Dec Alpha OSF/1 3.2.
It seems that the parameters for yp_all is wrong on OSF/1.

diff -cr src-2.6beta13-local/Src/zle_tricky.c src-2.6beta13-alphaosf3/Src/zle_tricky.c
*** src-2.6beta13-local/Src/zle_tricky.c	Thu Dec 21 23:44:48 1995
--- src-2.6beta13-alphaosf3/Src/zle_tricky.c	Fri Mar 08 11:19:46 1996
***************
*** 1654,1660 ****
--- 1654,1664 ----
      if (getdomainname(domain, YPMAXDOMAIN) == 0) {
  	cb.foreach = (int ((*)()))match_username;
  	cb.data = (char *)&data;
+ #ifdef __osf__
+ 	yp_all(domain, PASSWD_MAP, cb);
+ #else
  	yp_all(domain, PASSWD_MAP, &cb);
+ #endif
  /*	for (n = firstnode(matches); n; incnode(n))
  	    if (getpwnam(getdata(n)) == NULL)
  		uremnode(matches, n);*/
-- 
##>  Petter Reinholdtsen  <##  |  pere@td.org.uit.no



From zsh-workers-return-13786-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 27 09:42:16 2001
Return-Path: <zsh-workers-return-13786-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18415 invoked from network); 27 Mar 2001 09:42:15 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Mar 2001 09:42:15 -0000
Received: (qmail 19487 invoked by alias); 27 Mar 2001 09:42:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13786
Received: (qmail 19471 invoked from network); 27 Mar 2001 09:42:06 -0000
Date: Tue, 27 Mar 2001 11:42:06 +0200 (MET DST)
Message-Id: <200103270942.LAA15423@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
In-reply-to: =?iso-8859-1?q?Oliver=20Kiddle?='s message of Tue, 27 Mar 2001
	10:22:26 +0100 (BST)
Subject: Re: prefix-needed style in _popd


Oliver Kiddle wrote:

> I just noticed that the completion of directory stacks (in _popd but
> used also for cd and pushd) doesn't work properly when the
> prefix-needed style is set to false. What it does is check the style
> and skip the return which normally relies on PREFIX matching [-+]*.
> What it doesn't do is complete the initial - or + because those are
> normally included in the added matches with ${PREFIX[1]} so we get just
> the numbers added as matches.

Bleah... I never liked that prefix-needed business.

> In this case we could either complete each directory stack entry twice,
> preceded by each of - and +, complete only one of those (possibly
> selected with a style) or remove support for prefix-needed in _popd. I
> basically favour the latter but then I've always had prefix-needed set
> true so don't care much. Does anyone else have any opinions or ideas on
> this?

Hm.  We're here at the core of the zsh-philosophy, aren't we?  Do it
in a predictable, complete and consequential way.  Then go back and
make it configurable to allow people to get what they want -- even if
they don't know it yet -- and make the default what most people would
expect or want if they knew.  Or something like that ;-)

Removing the prefix-needed handling is of course the easiest thing
(and give the behaviour I almost certainly would want and expect,
too).  For that completeness thing we would have to add every entry
with `+' and `-'.

In short: I don't know what to do and since I seldom use directory
stack completion, I don't care much about how we decide to do it.
But maybe we should add the matches with the prefix just for
completeness' sake.  Users can always set prefix-needed to false for
the directory-stack tag.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-14298-mason-zsh=primenet.com.au@sunsite.dk Thu May 10 15:57:54 2001
Return-Path: <zsh-workers-return-14298-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2089 invoked from network); 10 May 2001 15:57:53 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 May 2001 15:57:53 -0000
Received: (qmail 26767 invoked by alias); 10 May 2001 15:57:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14298
Received: (qmail 26742 invoked from network); 10 May 2001 15:57:42 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH Workers Mailing List" <zsh-workers@sunsite.dk>
Subject: Weird test failures under Cygwin
Date: Thu, 10 May 2001 19:57:39 +0400
Message-ID: <001801c0d969$f0956550$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

May be, somebody has an idea.

If I run tests individually (make TESTNUM=Y02compmatch check) it work fine. If
I run them all at once (or just make TESTNUM=Y check), both compatch and
arguments fail:

mw1g017@MW1G17C% make TESTNUM=Y02compmatch check
cd Test ; make check
make[1]: Entering directory `/tools/build/zsh/Test'
if test -n "dllwrap"; then \
  cd .. && \
  make MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
fi
mkdir /tools/build/zsh/Test/Modules
mkdir /tools/build/zsh/Test/Modules/zsh
for f in /tools/src/zsh/Test/Y02compmatch*.ztst; do \
  ../Src/zsh +Z -f /tools/src/zsh/Test/ztst.zsh $f; \
done
/tools/src/zsh/Test/Y02compmatch.ztst: starting.
##############################################################################
##
##############################################################################
##
/tools/src/zsh/Test/Y02compmatch.ztst: all tests successful.
rm -rf Modules .zcompdump
make[1]: Leaving directory `/tools/build/zsh/Test'
mw1g017@MW1G17C% make TESTNUM=Y check
cd Test ; make check
make[1]: Entering directory `/tools/build/zsh/Test'
if test -n "dllwrap"; then \
  cd .. && \
  make MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
fi
mkdir /tools/build/zsh/Test/Modules
mkdir /tools/build/zsh/Test/Modules/zsh
for f in /tools/src/zsh/Test/Y*.ztst; do \
  ../Src/zsh +Z -f /tools/src/zsh/Test/ztst.zsh $f; \
done
/tools/src/zsh/Test/Y01completion.ztst: starting.
/tools/src/zsh/Test/Y01completion.ztst: all tests successful.###
/tools/src/zsh/Test/Y02compmatch.ztst: starting.
*** /tmp/zsh.ztst.out.2132      Thu May 10 19:51:12 2001
--- /tmp/zsh.ztst.tout.2132     Thu May 10 19:51:12 2001
***************
*** 1,3 ****
  line: {tst }{}
- COMPADD:{_tst:compadd: unknown match specification character `z'}
- INSERT_POSITIONS:{}
--- 1 ----
Test /tools/src/zsh/Test/Y02compmatch.ztst failed: output differs from
expected
as shown above for:
 test_code z: list1
 comptest  $'tst \t'
Was testing: Match Error for "z:"
/tools/src/zsh/Test/Y02compmatch.ztst: test failed.
rm: cannot remove directory `/tools/build/zsh/Test/match.tmp': Permission
denied

/tools/src/zsh/Test/Y03arguments.ztst: starting.
*** /tmp/zsh.ztst.out.3200      Thu May 10 19:51:29 2001
--- /tmp/zsh.ztst.tout.3200     Thu May 10 19:51:29 2001
***************
*** 1,11 ****
! line: {tst arg1 }{}
! line: {tst arg1 }{}
! line: {tst arg1 }{}
! line: {tst arg1 }{}
! line: {tst arg1 }{}
! line: {tst r}{}
! line: {tst x}{}
! line: {tst x }{}
! MESSAGE:{no more arguments}
! line: {tst x y }{}
! MESSAGE:{no more arguments}
--- 1,9 ----
! line: {tst }{}
! line: {a}{}
! line: {ar}{}
! line: {arg}{}
! line: {arg1}{}
! line: {r}{}
! line: {x}{}
! line: {x }{}
! line: {x y }{}
Test /tools/src/zsh/Test/Y03arguments.ztst failed: output differs from
expected
as shown above for:
 tst_arguments ':desc1:(arg1)'
 comptest $'tst \t\C-wa\t\C-war\t\C-warg\t\C-warg1\t\C-wr\t\C-wx\t \ty \t'
Was testing: one non-option argument
/tools/src/zsh/Test/Y03arguments.ztst: test failed.
rm: cannot remove directory `/tools/build/zsh/Test/comp.tmp': Permission
denied
make[1]: [check] Error 1 (ignored)
rm -rf Modules .zcompdump
make[1]: Leaving directory `/tools/build/zsh/Test'

-andrej

Have a nice DOS!
B >>


From zsh-workers-request@euclid.skiles.gatech.edu Fri Jun 20 08:28:53 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 25212 invoked from network); 20 Jun 1997 08:28:52 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 20 Jun 1997 08:28:52 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA04290; Fri, 20 Jun 1997 04:16:48 -0400 (EDT)
Resent-Date: Fri, 20 Jun 1997 04:16:48 -0400 (EDT)
Date: Fri, 20 Jun 97 17:20:33 JST
Message-Id: <9706200820.AA07242@oz.fantasy.otsl.oki.co.jp>
To: hzoli@ny.frontiercomm.net
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199706200345.XAA02203@hzoli.home> (message from Zoltan Hidvegi on Thu, 19 Jun 1997 23:45:06 -0400 (EDT))
Subject: Re: zsh-3.0.3: another problem in Src/jobs.c
From: suzuki@otsl.oki.co.jp (SUZUKI Hisao)
Organization: Oki Technosystems Laboratory, Inc., Nagoya, Japan
Resent-Message-ID: <"ae_zZ2.0.z21.lnZgp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3265
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>> in the current shell.  Hence, though it is artificial,
>> 
>> 	% stty erase ^H | :
>> 
>> has no effect since the last command is a shell builtin ":",
>
>Yes.  And actually, the tty settings should also be saved when a
>foreground process is suspended.
>
>The patch below is for the original zsh-3.1.2 and zsh-3.0.3, without
>Hisao's patch.  I do hope that this covers all cases now.

I am afraid it does not yet.  The tty setting goes bad after a
session like this:

	% emacs -nw &
	% fg
	[type ^Z to suspend the emacs]
	% stty

(see e-mail <9706190624.AA05850@oz.fantasy.otsl.oki.co.jp> from
me on Thu, 19 Jun 97 15:24:32 JST)

My patch of <9706192332.AA00517@oz.fantasy.otsl.oki.co.jp> works
fine in these cases.  Perhaps, for the present implementation,
the tty setting should _not_ be saved into "shttyinfo" when a
foreground process is stopped...

Regards,

Hisao Suzuki <suzuki@otsl.oki.co.jp>


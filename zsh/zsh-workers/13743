From zsh-workers-return-13743-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 24 23:54:58 2001
Return-Path: <zsh-workers-return-13743-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24470 invoked from network); 24 Mar 2001 23:54:57 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Mar 2001 23:54:57 -0000
Received: (qmail 15933 invoked by alias); 24 Mar 2001 23:54:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13743
Received: (qmail 15921 invoked from network); 24 Mar 2001 23:54:49 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: PATCH: MH for Mailboxes (TM) 
In-reply-to: ""Bart Schaefer""'s message of "Sat, 24 Mar 2001 18:06:07 GMT."
             <1010324180607.ZM29285@candle.brasslantern.com> 
Date: Sat, 24 Mar 2001 23:55:50 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <20010324235550.42F7A139C6@pwstephenson.fsnet.co.uk>

"Bart Schaefer" wrote:
> Where does one obtain the name of the last folder?  Fill it in to the
> `lastmhbox' parameter below, and uncomment the corresponding lines.

Er, OK.  Tear along dotted line and enclose self-addressed envelope?

Index: Completion/User/_mailboxes
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/_mailboxes,v
retrieving revision 1.9
diff -u -r1.9 _mailboxes
--- Completion/User/_mailboxes	2001/03/24 18:22:55	1.9
+++ Completion/User/_mailboxes	2001/03/24 23:53:06
@@ -118,14 +118,14 @@
       fi
       ;;
     (*:mh:*)
-#     local lastmhbox=???	# Where does this come from?
+      local lastmhbox=$(mhpath)
       if compset -P +; then
 	mbox_names=( "${(@)_mh_cache#$~maildirectory/}" )
-#     elif compset -P @; then
-#	mbox_names=( "${(@)${(@M)_mh_cache:#$~lastmhbox/*}#$~lastmhbox/}" )
+      elif compset -P @; then
+	mbox_names=( "${(@)${(@M)_mh_cache:#$~lastmhbox/*}#$~lastmhbox/}" )
       else
 	mbox_names=( +"${(@)^_mh_cache#$~maildirectory/}"
-#		     @"${(@)^${(@M)_mh_cache:#$~lastmhbox/*}#$~lastmhbox/}"
+		     @"${(@)^${(@M)_mh_cache:#$~lastmhbox/*}#$~lastmhbox/}"
 		     "${_mh_cache[@]}" )
       fi
       ;;

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Work: pws@csr.com
Web: http://www.pwstephenson.fsnet.co.uk


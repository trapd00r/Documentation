From zsh-users-return-10264-mason-zsh=primenet.com.au@sunsite.dk Sat May 13 02:10:48 2006
Return-Path: <zsh-users-return-10264-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29176 invoked from network); 13 May 2006 02:10:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 May 2006 02:10:47 -0000
Received: (qmail 93025 invoked from network); 13 May 2006 02:10:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 May 2006 02:10:39 -0000
Received: (qmail 10294 invoked by alias); 13 May 2006 02:10:33 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10264
Received: (qmail 10285 invoked from network); 13 May 2006 02:10:33 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 13 May 2006 02:10:33 -0000
Received: (qmail 91931 invoked from network); 13 May 2006 02:10:33 -0000
Received: from dan.emsphone.com (199.67.51.101)
  by a.mx.sunsite.dk with SMTP; 13 May 2006 02:10:32 -0000
Received: (from dan@localhost)
	by dan.emsphone.com (8.13.1/8.13.4) id k4D2AUbi075664
	for zsh-users@sunsite.dk; Fri, 12 May 2006 21:10:30 -0500 (CDT)
	(envelope-from dan)
Date: Fri, 12 May 2006 21:10:30 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: zsh-users@sunsite.dk
Subject: Re: Subshells and parameters
Message-ID: <20060513021030.GB80367@dan.emsphone.com>
References: <lt8xp8sko1.fsf@newsol.starnix.com> <20060511160123.29080117.pws@csr.com> <20060512091722.GO4116@prunille.vinc17.org> <87wtcr30nd.fsf@asfast.com> <20060512230922.GA871@prunille.vinc17.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20060512230922.GA871@prunille.vinc17.org>
X-OS: FreeBSD 5.5-PRERELEASE
X-message-flag: Outlook Error
User-Agent: Mutt/1.5.11

In the last episode (May 13), Vincent Lefevre said:
> On 2006-05-12 08:09:26 -0400, Lloyd Zusman wrote:
> > So how can we get the process ID of any given subshell?
> 
> dixsept:~> cat > getpid.c
> #include <stdio.h>
> #include <unistd.h>
> int main(void)
> {
>   printf("%d\n", (int) getppid());
>   return 0;
> }
> dixsept:~> gcc -Wall -O2 getpid.c -o getpid
> dixsept:~> echo $$; ./getpid
> 13372
> 13372
> dixsept:~> (echo $$; ./getpid)
> 13372
> 14153
> dixsept:~> (stat +link /proc/self; ./getpid)
> 14168
> 14168
> 
> Note: as Peter said, /proc is specific to Linux.

You could even use zsh itself for this:

function getppid() { $SHELL -fc 'echo $PPID' }

-- 
	Dan Nelson
	dnelson@allantgroup.com


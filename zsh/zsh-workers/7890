From zsh-workers-return-7890-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Sep 17 02:49:36 1999
Return-Path: <zsh-workers-return-7890-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13042 invoked from network); 17 Sep 1999 02:49:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Sep 1999 02:49:34 -0000
Received: (qmail 14817 invoked by alias); 17 Sep 1999 02:49:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7890
Received: (qmail 14809 invoked from network); 17 Sep 1999 02:49:29 -0000
Date: Fri, 17 Sep 1999 03:46:27 +0100
From: Adam Spiers <adam@thelonious.new.ox.ac.uk>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: PATCH: add user control of hosts to complete
Message-ID: <19990917034627.B23925@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2i
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.9 i686

Hope this one's OK.

Index: Completion/User/_hosts
===================================================================
RCS file: /usr/local/cvsroot/zsh/Completion/User/_hosts,v
retrieving revision 1.1.1.3
diff -u -r1.1.1.3 _hosts
--- Completion/User/_hosts	1999/09/16 11:39:44	1.1.1.3
+++ Completion/User/_hosts	1999/09/17 00:44:47
@@ -4,5 +4,8 @@
 
 : ${(A)hosts:=${(s: :)${(ps:\t:)${${(f)"$(</etc/hosts)"}%%\#*}##[:blank:]#[^[:blank:]]#}}}
 
+# Let the user add her own hosts in if she wants
+hosts=( $hostnames $hosts )
+
 _description expl host
 compadd -M 'm:{a-zA-Z}={A-Za-z} r:|.=* r:|=*' "$@" "$expl[@]" - "$hosts[@]"


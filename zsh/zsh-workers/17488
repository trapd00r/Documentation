From pws@csr.com Tue Jul 30 16:15:48 2002
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: PATCH: TYPESET_SILENT option
Date: Mon, 29 Jul 2002 15:52:56 +0100
Message-ID: <26255.1027954376@csr.com>
From: Peter Stephenson <pws@csr.com>
Status: RO

For reasons which now escape me, I must have decided not to implement
this properly.

Index: Src/builtin.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/builtin.c,v
retrieving revision 1.76
diff -u -r1.76 builtin.c
--- Src/builtin.c	20 Jun 2002 16:39:58 -0000	1.76
+++ Src/builtin.c	29 Jul 2002 14:50:12 -0000
@@ -1691,7 +1691,7 @@
 	if (!on && !roff && !value) {
 	    if (ops['p'])
 		paramtab->printnode((HashNode)pm, PRINT_TYPESET);
-	    else if (unset(TYPESETSILENT) && !ops['m'])
+	    else if (unset(TYPESETSILENT) || ops['m'])
 		paramtab->printnode((HashNode)pm, PRINT_INCLUDEVALUE);
 	    return pm;
 	}

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


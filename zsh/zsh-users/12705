From zsh-users-return-12705-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 10 16:34:47 2008
Return-Path: <zsh-users-return-12705-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27823 invoked from network); 10 Mar 2008 16:34:45 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Mar 2008 16:34:45 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 86379 invoked from network); 10 Mar 2008 16:33:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Mar 2008 16:33:58 -0000
Received: (qmail 19402 invoked by alias); 10 Mar 2008 16:33:43 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12705
Received: (qmail 19387 invoked from network); 10 Mar 2008 16:33:43 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Mar 2008 16:33:43 -0000
Received: from an-out-0708.google.com (an-out-0708.google.com [209.85.132.240])
	by bifrost.dotsrc.org (Postfix) with ESMTP id E418D80482A1
	for <zsh-users@sunsite.dk>; Mon, 10 Mar 2008 17:33:36 +0100 (CET)
Received: by an-out-0708.google.com with SMTP id c14so596897anc.13
        for <zsh-users@sunsite.dk>; Mon, 10 Mar 2008 09:33:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=dEufspvekkFs57z5VzDjz77RzRpOJDIjuNXOLpiBGyw=;
        b=uoao+wVXzDd1rmxqyvZIes6ZTW8c3rMK1TOFFgd1ay2O+o+hJszNXihCKnn2NIMAMnNZkDKAvyG2tighiLu2P+KCTYLM52UlVAx5czF6eyd3oGe/ELmA1xHI71lCdIKyBxoaThbCKT7Tu9a41p9CrfW8oqwjUMvuA4X4sxsIlgI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=vRChsHmDRV6qI+owYWJvr91dbPhjtBy10UeIbyLcPRM3RsNjdSP7tc5ciJDZtzsGB1w3rFd85gXwypgZ9QKigFsIrCyBrEQhQZxALWVNc14de5i42fPk0o+PmWx0nERTDf1MWE+hHiBhN6QG36apHKXy2QVUXYugRHmhpk5MkVs=
Received: by 10.100.41.16 with SMTP id o16mr11232184ano.73.1205166816012;
        Mon, 10 Mar 2008 09:33:36 -0700 (PDT)
Received: by 10.100.143.1 with HTTP; Mon, 10 Mar 2008 09:33:35 -0700 (PDT)
Message-ID: <2d460de70803100933t112e57egcce85195a2e6c60a@mail.gmail.com>
Date: Mon, 10 Mar 2008 17:33:35 +0100
From: "Richard Hartmann" <richih.mailinglist@gmail.com>
To: "ZSH User List" <zsh-users@sunsite.dk>
Subject: Re: feature idea: customizable string in history file
In-Reply-To: <20080308122521.GA30479@spiegl.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20080307142825.GA23322@spiegl.de>
	 <20080307170808.GC11566@herod.dreamhost.com>
	 <20080308111057.GA23700@spiegl.de>
	 <2d460de70803080409t18e8a4b4vb31f34c17d5f2281@mail.gmail.com>
	 <20080308122521.GA30479@spiegl.de>
X-Virus-Scanned: ClamAV 0.91.2/6192/Mon Mar 10 15:54:00 2008 on bifrost
X-Virus-Status: Clean

On Sat, Mar 8, 2008 at 1:25 PM, Andy Spiegl <zsh.Andy@spiegl.de> wrote:

>  This should not be a problem as long as it doesn't contain ';'.

If
  timestamp;execution;user;computername;command
changes to
    timestamp;execution;computername;user;command
it would be. Same for
    timestamp;execution;user$whatevercomputername;command
etc, etc. This would, of course, be the user's fault, but still.


> > you are unlikely to have programs called '100' or some such, so the
>  > history can be re-used by other shells.
>  I don't think so.  Bash e.g. interprets the extra time stamp as command:

Yes, that is the reason why ZSH does it that way. So other shells will only
execute numeric 'commands' which should, hopefully, be safe. That's what
I meant about it being a problem to store other data.

Come to think of it, it _could_ be done like
  timestamp;execution;zsh_hist_save(user,computername);command
or even
  timestamp;execution;echo 'user,computername';command


Richard


From zsh-workers-return-18372-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 20 12:10:18 2003
Return-Path: <zsh-workers-return-18372-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15141 invoked from network); 20 Mar 2003 12:10:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Mar 2003 12:10:17 -0000
Received: (qmail 3331 invoked by alias); 20 Mar 2003 12:10:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18372
Received: (qmail 3324 invoked from network); 20 Mar 2003 12:10:10 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 20 Mar 2003 12:10:10 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [156.153.255.246] by sunsite.dk (MessageWall 1.0.8) with SMTP; 20 Mar 2003 12:10:9 -0000
Received: from tsx2.cup.hp.com (tsx2.cup.hp.com [15.13.185.29])
	by palrel11.hp.com (Postfix) with ESMTP
	id A3D461C01997; Thu, 20 Mar 2003 04:10:05 -0800 (PST)
Received: from cup.hp.com (localhost [127.0.0.1])
	by tsx2.cup.hp.com (8.11.1/8.8.6) with ESMTP id h2KCA1n27923;
	Thu, 20 Mar 2003 04:10:01 -0800 (PST)
Sender: manish@cup.hp.com
Message-ID: <3E79AF96.EF0D0EEE@cup.hp.com>
Date: Thu, 20 Mar 2003 04:09:58 -0800
From: Manish Ahluwalia <manish@cup.hp.com>
Organization: Hewlett Packard
X-Mailer: Mozilla 4.79 [en] (X11; U; HP-UX B.11.11 9000/800)
X-Accept-Language: en
MIME-Version: 1.0
To: schaefer@brasslantern.com
Cc: zsh-workers@sunsite.dk, manish@cup.hp.com
Subject: Re: zsh - hpux 11i prompt does not work
References: <3E77F2B5.E50A6FB@cup.hp.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Bart Schaefer wrote:
> 
> On Mar 18,  8:31pm, Manish Ahluwalia wrote:
> }
> } I use zsh on hpux. I have noticed a problem with zsh and hpux version
> } 11i. I have tried zsh versions 3.0.5 and 4.0.4 with the same results.
> 
> Both this and the backspace problem are due to the HP-UX curses
> libraries.
> The latest Etc/MACHINES file says this:
> 
>           Some of the special keys on the keyboard (backspace, delete)
>           have been found to stop functioning.  One suggested fix is
>           to alter the way the curses library is linked in the Makefile.
>           Replacing `-lcurses' with `-lHcurses -lcurses' in the
> libraries
>           is reported to fix.  An attempt to fix this in configure
>           is apparently ineffective; more information would be
> appreciated
>           as the maintainers do not have access to an HP-UX system.

Thanks a lot. I didn't see this section in my Etc/MACHINES (4.0.6), but
I tried the suggestion anyway, and it works!

I did not try the configure patch given below, I modified the generated
Makefile.

Is there someway I can help you guys figure out a fix for this that
works (say by trying out the patch?).

Please cc your reply to me as I am not a member of the zsh-workers list.

> 
> The "apparently ineffective" configure patch (actually for the file
> zshconfig.ac) is:
> 
> --- branch/zshconfig.ac      Wed Mar 19 07:51:26 2003
> +++ current/zshconfig.ac     Sat Mar 15 09:29:15 2003
> @@ -556,6 +563,7 @@
> 
>  dnl Prefer BSD termcap library to SysV curses library, except on
> certain
>  dnl SYSV-derived systems.
> +dnl On HPUX, Hcurses is reported to work better than curses.
>  AC_ARG_WITH(curses-terminfo,
>  [  --with-curses-terminfo     use terminfo support from curses
> library],
>  [if test x$withval = xyes; then
> @@ -566,7 +574,7 @@
>  fi],
>  [case "$host_os" in
>    hpux10.*|hpux11.*|solaris*)
> -      termcap_curses_order="curses ncurses termcap" ;;
> +      termcap_curses_order="Hcurses curses ncurses termcap" ;;
>    *)             termcap_curses_order="termcap curses ncurses" ;;
>  esac])dnl
> 
> 
> --
> Bart Schaefer                                 Brass Lantern Enterprises
> http://www.well.com/user/barts              http://www.brasslantern.com
> 
> Zsh: http://www.zsh.org | PHPerl Project:
> http://phperl.sourceforge.net

-- Manish
____________________________________________________________________
Cliches are a dime a dozen -- avoid them like the plague.


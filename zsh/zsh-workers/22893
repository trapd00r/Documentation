From zsh-workers-return-22893-mason-zsh=primenet.com.au@sunsite.dk Sat Oct 21 09:15:43 2006
Return-Path: <zsh-workers-return-22893-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6728 invoked from network); 21 Oct 2006 09:15:40 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Oct 2006 09:15:40 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 99333 invoked from network); 21 Oct 2006 09:15:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Oct 2006 09:15:34 -0000
Received: (qmail 25626 invoked by alias); 21 Oct 2006 09:15:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22893
Received: (qmail 25616 invoked from network); 21 Oct 2006 09:15:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Oct 2006 09:15:31 -0000
Received: (qmail 99060 invoked from network); 21 Oct 2006 09:15:31 -0000
Received: from flock1.newmail.ru (80.68.241.157)
  by a.mx.sunsite.dk with SMTP; 21 Oct 2006 09:15:30 -0000
Received: (qmail 5290 invoked from network); 21 Oct 2006 09:15:30 -0000
Received: from unknown (HELO earth) (arvidjaar@newmail.ru@85.141.101.103)
  by smtpd.newmail.ru with SMTP; 21 Oct 2006 09:15:30 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-workers@sunsite.dk
Subject: Re: bug: mutt completion doesn't complete address book
Date: Sat, 21 Oct 2006 13:15:30 +0400
User-Agent: KMail/1.9.5
References: <20061013001243.GA32281@localhost.localdomain>
In-Reply-To: <20061013001243.GA32281@localhost.localdomain>
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200610211315.33268.arvidjaar@newmail.ru>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

nobody reoplied th this (22872) and 22868 and it was not committed either. 
Both look OK ti me. Should I go ahead and commit them or are there some 
reasons no to?

On Friday 13 October 2006 04:12, arno. wrote:
> Hi,
> when I try to use completion with mutt, it is supposed to display my
> address book, but instead only completes with local addresses.
>
> $mutt <TAB>
> arno root games ...
>
> That's because in Completion/Unix/_email_addresses
> variable muttrc is defined with : muttrc="~/.muttrc"
> and ~ seems to be not expanded when used in :
>
> plugins=(
>     ${${(k)functions[(I)_email-*]#*-}:#(${(kj.|.)~files})}
>     $files(Ne:'REPLY=( ${(k)files[(r)$REPLY]} ):')
> )
> and therefore, _email-mutt is not triggered.
>
> When removing the double quotes, completion works fine.
>
> On IRC, ft also pointed another solution :
> use ${~muttrc} instead of $muttrc in :
>  files=( MH ${MH:-~/.mh_profile} mutt $muttrc mush ~/.mushrc mail
> ${MAILRC:-~/.mailrc} pine ~/.addressbook )
>
> arno
>
>
> Index: Completion/Unix/Type/_email_addresses
> ===================================================================
> RCS file: /cvsroot/zsh/zsh/Completion/Unix/Type/_email_addresses,v
> retrieving revision 1.4
> diff -u -r1.4 _email_addresses
> --- Completion/Unix/Type/_email_addresses	8 Jun 2005 12:08:06 -0000	1.4
> +++ Completion/Unix/Type/_email_addresses	13 Oct 2006 00:03:06 -0000
> @@ -129,7 +129,7 @@
>
>    # get list of all plugins except any with missing config files
>    if ! zstyle -s ":completion:${curcontext}:email-addresses" muttrc
> muttrc; then -    [[ -e ~/mutt/muttrc ]] && muttrc="~/mutt/muttrc" ||
> muttrc="~/.muttrc" +    [[ -e ~/mutt/muttrc ]] && muttrc=~/mutt/muttrc ||
> muttrc=~/.muttrc fi
>    files=( MH ${MH:-~/.mh_profile} mutt $muttrc mush ~/.mushrc mail
> ${MAILRC:-~/.mailrc} pine ~/.addressbook ) plugins=(
>
> __________
> http://www.newhost.ru - ÃîâÝëÙ ÔÞÜ ÔÛï ²ÐèÕÓÞ áÐÙâÐ!
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFFOeU1R6LMutpd94wRAg3gAKCtMEfkbVGMVvHYcXda5FOxRXmoFwCeKAcr
wjPOAhzUalcfNZuvtqVHvMk=
=A37j
-----END PGP SIGNATURE-----


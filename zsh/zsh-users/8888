From zsh-users-return-8888-mason-zsh=primenet.com.au@sunsite.dk Sun May 22 10:46:51 2005
Return-Path: <zsh-users-return-8888-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7987 invoked from network); 22 May 2005 10:46:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 May 2005 10:46:49 -0000
Received: (qmail 47954 invoked from network); 22 May 2005 10:46:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 May 2005 10:46:42 -0000
Received: (qmail 24189 invoked by alias); 22 May 2005 10:46:31 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8888
Received: (qmail 24178 invoked from network); 22 May 2005 10:46:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 May 2005 10:46:31 -0000
Received: (qmail 46488 invoked from network); 22 May 2005 10:46:31 -0000
Received: from webmail-outgoing.us4.outblaze.com (205.158.62.67)
  by a.mx.sunsite.dk with SMTP; 22 May 2005 10:46:25 -0000
Received: from unknown (unknown [192.168.9.180])
	by webmail-outgoing.us4.outblaze.com (Postfix) with QMQP id A6F201800238
	for <zsh-users@sunsite.dk>; Sun, 22 May 2005 10:46:22 +0000 (GMT)
X-OB-Received: from unknown (205.158.62.49)
  by wfilter.us4.outblaze.com; 22 May 2005 10:46:22 -0000
Received: by ws1-1.us4.outblaze.com (Postfix, from userid 1001)
	id 96EC04BEAD; Sun, 22 May 2005 10:46:22 +0000 (GMT)
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
X-Mailer: MIME::Lite 2.117  (F2.6; A1.17; B2.12; Q2.03)
Received: from [213.187.181.70] by ws1-1.us4.outblaze.com with http for fteg@london.com; Sun, 22 May 2005 05:46:22 -0500
X-Mailer: mail.com webmail
From: "Fafa Hafiz Krantz" <fteg@london.com>
To: "Bart Schaefer" <schaefer@brasslantern.com>, zsh-users@sunsite.dk
Date: Sun, 22 May 2005 05:46:22 -0500
Subject: Re: Auto-completion isn't working
X-Originating-Ip: 213.187.181.70
X-Originating-Server: ws1-1.us4.outblaze.com
Message-Id: <20050522104622.96EC04BEAD@ws1-1.us4.outblaze.com>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.5


Hello Mr. Bart Schaefer!

> No, it's not enough.  "Doesn't work" is not an adequate description.

I provided you with my zshrc, and the output of zsh -x.
Indeed that ought to tell you something?

> One last time, and then I'm giving up on you:  Describe, in as much
> detail as possible, what happens (or does not) to you when you are
> using the shell interactively.

This is my home:

(johann@ninja)(12:38:05/22/05)
(%:~) ls -l
total 12
drwxr-xr-x  3 johann  wheel  512 May 12 12:11 bin
drwxr-xr-x  2 johann  wheel  512 May 21 17:09 bkp
drwxr-xr-x  5 johann  wheel  512 May 19 12:10 doc
drwxr-xr-x  4 johann  wheel  512 May 10 12:35 etc
drwxr-xr-x  4 johann  wheel  512 May 12 12:16 ftp
drwxr-xr-x  6 johann  wheel  512 May 20 20:46 tmp
lrwxr-xr-x  1 johann  wheel   14 Dec  8 12:34 www -> /usr/home/www/

When, let's say, I want to enter ftp/archive, then the auto-completion
feature would allow me to press f<tab> and then a<tab>. But f<tab> doesn't
complete to ftp/ in zsh. Instead it just beeps.

When I switch to tcsh, however, auto-completion works.

> Ideally, you will also have run the "complete-debug" widget by typing
> control+x question-mark INSTEAD OF a TAB at some time when you are
> having trouble with completion.  This widget writes a file with a long
> trace of everything the completion system is doing.  If that file is
> empty, or if you get some different kind of error when you press the two
> keys control+x followed by a question mark (NOT control with question
> mark), then tell us what that error is as well.

Cool, this gave me some more output:

+_complete_debug:13> _main_complete
+_main_complete:7> local 'IFS=3D=20=20
^@'
+_main_complete:21> eval 'setopt localoptions localtraps ${_comp_options[@]=
};
             exec </dev/null;
             trap - ZERR'
+(eval):1> setopt localoptions localtraps glob bareglobqual nullglob rcexpa=
ndparam extendedglob unset NO_markdirs NO_globsubst NO_shwordsplit NO_shglo=
b NO_k
shglob NO_ksharrays NO_kshtypeset NO_cshnullglob NO_allexport NO_aliases NO=
_errexit NO_octalzeroes
+(eval):3> trap - ZERR
+_main_complete:23> local func funcs 'ret=3D1' tmp _compskip format nm call=
 match min max i num _completers _completer _completer_num curtag _comp_for=
ce_list=20
_matchers _matcher _c_matcher _matcher_num _comp_tags _comp_mesg mesg str c=
ontext state line opt_args val_args 'curcontext=3D' '_last_nmatches=3D-1' _=
last_menu_
style _def_menu_style _menu_style sel '_tags_level=3D0' '_saved_exact=3D' '=
_saved_lastprompt=3Dyes' '_saved_list=3Dambiguous' '_saved_insert=3Dautomen=
u-unambiguous' '
_saved_colors=3D'
+_main_complete:35> typeset -U _lastdescr _comp_ignore _comp_colors
+_main_complete:37> [[ -z '' ]]
+_main_complete:37> curcontext=3D:::=20
+_main_complete:39> zstyle -s :completion::::: insert-tab tmp
+_main_complete:39> tmp=3Dyes=20
+_main_complete:41> [[ yes =3D=3D '*pending(|[[:blank:]]*)' || yes =3D=3D '=
*pending=3D(#b)([0-9]##)(|[[:blank:]]*)' ]]
+_main_complete:49> [[ automenu-unambiguous =3D=3D 'tab*' ]]
+_main_complete:59> [[ -z '' ]]
+_main_complete:60> [[ -o equals ]]
+_main_complete:60> compset -P 1 '=3D'
+_main_complete:62> [[ e !=3D '*/*' && e =3D=3D '~' ]]
+_main_complete:70> _setup default
+_setup:3> local val 'nm=3D0'
+_setup:5> [[ 1 -eq 1 ]]
+_setup:5> 2=3Ddefault=20
+_setup:7> zstyle -a :completion:::::default list-colors val
+_setup:8> zmodload -i zsh/complist
+_setup:9> [[ default =3D=3D default ]]
+_setup:10> _comp_colors=3D( )=20
+_setup:26> zstyle -t :completion:::::default list-packed
+_setup:28> [[ 2 -eq 1 ]]
+_setup:31> compstate[list]=3Dambiguous=20
+_setup:34> zstyle -t :completion:::::default list-rows-first
+_setup:36> [[ 2 -eq 1 ]]
+_setup:39> compstate[list]=3Dambiguous=20
+_setup:42> zstyle -t :completion:::::default last-prompt
+_setup:44> [[ 2 -eq 1 ]]
+_setup:47> compstate[last_prompt]=3Dyes=20
+_setup:50> zstyle -t :completion:::::default accept-exact
+_setup:52> [[ 2 -eq 1 ]]
+_setup:55> compstate[exact]=3D''=20
+_setup:58> [[ _last_nmatches -ge 0 ]]
+_setup:61> zstyle -a :completion:::::default menu val
+_setup:65> _last_nmatches=3D-1=20
+_setup:68> [[ '' !=3D always ]]
+_setup:69> zstyle -s :completion:::::default force-list val
+_main_complete:71> _def_menu_style=3D( '' )=20
+_main_complete:80> _last_menu_style=3D( )=20
+_main_complete:82> zstyle -s :completion:::::default list-prompt tmp
+_main_complete:86> zstyle -s :completion:::::default select-prompt tmp
+_main_complete:90> zstyle -s :completion:::::default select-scroll tmp
+_main_complete:97> ((  0  ))
+_main_complete:109> zstyle -a :completion::::: completer _completers
+_main_complete:115> _completer_num=3D1=20
+_main_complete:119> funcs=3D( )=20
+_main_complete:120> compprefuncs=3D( )=20
+_main_complete:125> tmp=3D_complete
+_main_complete:127> [[ -n '' ]]
+_main_complete:129> [[ _complete =3D=3D '*:-*' ]]
+_main_complete:132> [[ _complete =3D=3D '*:*' ]]
+_main_complete:136> _completer=3Dcomplete=20
+_main_complete:139> curcontext=3D:complete::=20
+_main_complete:140> zstyle -t :completion::complete::: show-completer
+_main_complete:143> zstyle -a :completion::complete::: matcher-list _match=
ers
+_main_complete:144> _matchers=3D( '' )=20
+_main_complete:146> _matcher_num=3D1=20
+_main_complete:147> _matcher=3D''=20
+_main_complete:148> _c_matcher=3D
+_main_complete:149> [[ '' =3D=3D '+*' ]]
+_main_complete:152> _matcher=3D''=20
+_main_complete:155> _comp_mesg=3D''=20
+_main_complete:156> [[ -n '' ]]
+_main_complete:161> _complete
+_complete:7> local comp name oldcontext 'ret=3D1' service
+_complete:8> typeset -T 'curcontext=3D:complete::' ccarray
+_complete:10> oldcontext=3D:complete::=20
+_complete:14> [[ -n '' ]]
+_complete:96> comp=3D''=20
+_complete:97> [[ -n '' ]]
+_complete:110> [[ -n '' ]]
+_complete:114> ret=3D1=20
+_complete:115> [[ command =3D=3D command ]]
+_complete:116> curcontext=3D:complete::=20
+_complete:117> _normal -s
+_normal:3> local _comp_command1 _comp_command2 _comp_command skip
+_normal:5> [[ -s =3D=3D -s ]]
+_normal:6> skip=3D( -s )=20
+_normal:14> [[ CURRENT -eq 1 ]]
+_normal:23> _set_command
+_set_command:6> local command
+_set_command:8> command=3Dcd=20
+_set_command:10> [[ -z cd ]]
+_set_command:12> ((  1 + 0  ))
+_set_command:13> _comp_command1=3Dcd=20
+_set_command:14> _comp_command=3Dcd=20
+_normal:25> _dispatch -s cd cd '' -default-
+_dispatch:3> local comp pat val name i 'ret=3D1' '_compskip=3D'
+_dispatch:4> local 'curcontext=3D:complete::' service str noskip
+_dispatch:8> [[ -s =3D=3D -s ]]
+_dispatch:9> noskip=3Dyes=20
+_dispatch:10> shift
+_dispatch:13> [[ -z yes ]]
+_dispatch:15> curcontext=3D:complete:cd:=20
+_dispatch:17> shift
+_dispatch:21> [[ '' !=3D '(all|*patterns*)' ]]
+_dispatch:23> str=3Dcd
+_dispatch:24> [[ -n cd ]]
+_dispatch:25> service=3Dcd=20
+_dispatch:23> str=3D
+_dispatch:24> [[ -n '' ]]
+_dispatch:24> continue
+_dispatch:23> str=3D-default-
+_dispatch:24> [[ -n -default- ]]
+_dispatch:25> service=3D-default-=20
+_dispatch:40> ret=3D1=20
+_dispatch:41> str=3Dcd
+_dispatch:42> [[ -n cd ]]
+_dispatch:46> str=3Dcd=20
+_dispatch:47> name=3Dcd=20
+_dispatch:48> comp=3D''=20
+_dispatch:49> service=3Dcd=20
+_dispatch:51> [[ -z '' ]]
+_dispatch:41> str=3D
+_dispatch:42> [[ -n '' ]]
+_dispatch:42> continue
+_dispatch:41> str=3D-default-
+_dispatch:42> [[ -n -default- ]]
+_dispatch:46> str=3D-default-=20
+_dispatch:47> name=3D-default-=20
+_dispatch:48> comp=3D''=20
+_dispatch:49> service=3D-default-=20
+_dispatch:51> [[ -z '' ]]
+_dispatch:56> [[ -n '' ]]
+_dispatch:62> [[ '' !=3D '(all|*patterns*)' ]]
+_dispatch:63> str=3Dcd
+_dispatch:64> [[ -n cd ]]
+_dispatch:65> service=3Dcd=20
+_dispatch:79> [[ -default- =3D=3D -default- && -n '' ]]
+_dispatch:84> _compskip=3D''=20
+_dispatch:86> return ret
+_complete:142> _compskip=3D''=20
+_complete:144> return ret
+_main_complete:165> ((  _matcher_num++  ))
+_main_complete:167> [[ -n '' ]]
+_main_complete:169> ((  _completer_num++  ))
+_main_complete:125> tmp=3D_prefix
+_main_complete:127> [[ -n '' ]]
+_main_complete:129> [[ _prefix =3D=3D '*:-*' ]]
+_main_complete:132> [[ _prefix =3D=3D '*:*' ]]
+_main_complete:136> _completer=3Dprefix=20
+_main_complete:139> curcontext=3D:prefix::=20
+_main_complete:140> zstyle -t :completion::prefix::: show-completer
+_main_complete:143> zstyle -a :completion::prefix::: matcher-list _matchers
+_main_complete:144> _matchers=3D( '' )=20
+_main_complete:146> _matcher_num=3D1=20
+_main_complete:147> _matcher=3D''=20
+_main_complete:148> _c_matcher=3D
+_main_complete:149> [[ '' =3D=3D '+*' ]]
+_main_complete:152> _matcher=3D''=20
+_main_complete:155> _comp_mesg=3D''=20
+_main_complete:156> [[ -n '' ]]
+_main_complete:161> _prefix
+_prefix:5> [[ _matcher_num -gt 1 || -z '' ]]
+_prefix:5> return 1
+_main_complete:165> ((  _matcher_num++  ))
+_main_complete:167> [[ -n '' ]]
+_main_complete:169> ((  _completer_num++  ))
+_main_complete:172> curcontext=3D:::=20
+_main_complete:173> [[ '' =3D=3D keep ]]
+_main_complete:179> nm=3D0=20
+_main_complete:182> [[ '' =3D=3D keep || nm -gt 1 ]]
+_main_complete:297> [[ nm -lt 1 && -n '' ]]
+_main_complete:300> [[ nm -eq 0 && -z '' && 0 -ne 0 ]]
+_main_complete:320> [[ '' =3D=3D always || '' =3D=3D '?*' ]]
+_main_complete:324> [[ '' =3D=3D keep ]]
+_main_complete:326> ((  0  ))
+_main_complete:329> unset ZLS_COLORS
+_main_complete:334> funcs=3D( )=20
+_main_complete:335> comppostfuncs=3D( )=20
+_main_complete:340> _lastcomp=3D( list_lines 0 all_quotes '\' nmatches 0 r=
estore auto context command vared '' unambiguous '' list_max 100 unambiguou=
s_cursor
 1 list ambiguous insert_positions '' unambiguous_positions '' exact '' to_=
end match last_prompt yes pattern_insert menu ignored 0 insert automenu-una=
mbiguo
us )=20
+_main_complete:341> _lastcomp[nmatches]=3D0=20
+_main_complete:342> _lastcomp[completer]=3Dprefix=20
+_main_complete:343> _lastcomp[prefix]=3De=20
+_main_complete:344> _lastcomp[suffix]=3D''=20
+_main_complete:345> _lastcomp[iprefix]=3D''=20
+_main_complete:346> _lastcomp[isuffix]=3D''=20
+_main_complete:347> _lastcomp[qiprefix]=3D''=20
+_main_complete:348> _lastcomp[qisuffix]=3D''=20
+_main_complete:349> _lastcomp[tags]=3D''=20
+_main_complete:351> return ret
+_complete_debug:14> integer 'ret=3D1'
+_complete_debug:15> unsetopt xtrace

Thank you so much, Mr. Bart Schaefer,
for wanting to help.

--

Fafa Hafiz Krantz
  Research Designer @ http://www.home.no/barbershop
  Enlightened @ http://www.home.no/barbershop/smart/sharon.pdf



--=20
___________________________________________________________
Sign-up for Ads Free at Mail.com
http://promo.mail.com/adsfreejump.htm


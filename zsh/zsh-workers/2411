From zsh-workers-request@euclid.skiles.gatech.edu  Fri Nov 15 02:45:06 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id CAA03849 for <mason@primenet.com.au>; Fri, 15 Nov 1996 02:45:04 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id KAA24126; Thu, 14 Nov 1996 10:38:23 -0500 (EST)
Resent-Date: Thu, 14 Nov 1996 10:38:23 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <27656.199611141538@stone.dcs.warwick.ac.uk>
Subject: Re: more problems w/ irix
To: coleman@math.gatech.edu (Richard Coleman)
Date: Thu, 14 Nov 1996 15:38:43 +0000 (GMT)
Cc: zefram@dcs.warwick.ac.uk, zsh-workers@math.gatech.edu
In-Reply-To: <199611141523.KAA15180@redwood.skiles.gatech.edu> from "Richard Coleman" at Nov 14, 96 10:23:10 am
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8423.25
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"esFq01.0.uu5.kppYo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2411
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>> It's a nice syntax.  If it's grossly inefficient, we should improve the
>> code; being built in to the shell it *ought* to be more efficient than
>> execing cat, at least for small files.
>
>It doesn't exec a cat, it does the reading/writing itself (in closemn).

I'm aware of that.  I was responding to the statement that it is
inefficient, saying that "foo <a <b <c" should be more efficient than
"cat a b c | foo".  If it isn't, we should make it so.

>I'm not sure how we could make this more efficient without using something
>like mmap().

I think using mmap() would be a good move.  An madvise(), as used by
some cats, would also help performance.  We can do autoconf checks for
these functions, and would in any case need to have the code fall back
on a read/write loop in case mmap() is impossible.

-zefram


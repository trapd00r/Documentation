From zsh-workers-return-18514-mason-zsh=primenet.com.au@sunsite.dk Sat May 10 14:51:40 2003
Return-Path: <zsh-workers-return-18514-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27592 invoked from network); 10 May 2003 14:51:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 10 May 2003 14:51:40 -0000
Received: (qmail 2771 invoked by alias); 10 May 2003 14:51:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18514
Received: (qmail 2764 invoked from network); 10 May 2003 14:51:33 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 10 May 2003 14:51:33 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [207.99.30.4] by sunsite.dk (MessageWall 1.0.8) with SMTP; 10 May 2003 14:51:32 -0000
Received: from acolyte.scowler.net (localhost [127.0.0.1])
	by acolyte.scowler.net (8.12.9/8.12.9/Debian-3) with ESMTP id h4AEovWS012384
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=OK);
	Sat, 10 May 2003 10:50:57 -0400
Received: (from clint@localhost)
	by acolyte.scowler.net (8.12.9/8.12.9/Debian-3) id h4AEokBn012383;
	Sat, 10 May 2003 10:50:46 -0400
X-Authentication-Warning: acolyte.scowler.net: clint set sender to clint@zsh.org using -f
Date: Sat, 10 May 2003 10:50:46 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Cc: 187259-forwarded@bugs.debian.org, Nicolas George <nicolas.george@ens.fr>
Subject: [nicolas.george@ens.fr: Bug#187259: Zsh: segmentation fault with vared]
Message-ID: <20030510145046.GA12305@acolyte.scowler.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.4i

I can reproduce this on 4.0.6, 4.1.1-test-{1,2} on Debian.
No segfault with 4.1.1-test-1 on Solaris 9.

#0  0x400fe299 in free () from /lib/libc.so.6
#1  0x403bfef4 in zleread () from /usr/lib/zsh/4.0.6/zsh/zle.so
#2  0x403c0ce3 in execzlefunc () from /usr/lib/zsh/4.0.6/zsh/zle.so
#3  0x08051a37 in execbuiltin ()
#4  0x0805ffeb in execsubst ()
#5  0x0805eb3f in execlist ()
#6  0x0805e125 in execlist ()
#7  0x0805deab in execlist ()
#8  0x0805da23 in execode ()
#9  0x0806e2a6 in loop ()
#10 0x08070770 in zsh_main ()
#11 0x08051477 in main ()
#12 0x400aaa51 in __libc_start_main () from /lib/libc.so.6

----- Forwarded message from Nicolas George <nicolas.george@ens.fr> -----

Date: Wed, 2 Apr 2003 13:24:50 +0200
From: Nicolas George <nicolas.george@ens.fr>
To: submit@bugs.debian.org
Subject: Bug#187259: Zsh: segmentation fault with vared

Package: zsh
Version: 4.0.6-30

cigaes@ssecem ~ $ zsh
cigaes@ssecem ~ $ l=(); vared l
zsh: segmentation fault  zsh

The problem does not depend on my config files, since it is still there
if I disable them all (chmod 700 /etc/zsh and HOME=/dev/null; strace
proves me it really does not find them).

This command works fine with zsh 4.0.6-13 with exactly the same orhers
packages.

Package: debconf
Version: 1.2.32

Package: libc6
Version: 2.3.1-16

Package: libcap1
Version: 1:1.10-12

Package: libncurses5
Version: 5.3.20021109-2

Linux ssecem 2.4.20 #1 Tue Apr 1 14:48:59 CEST 2003 i686 AMD Athlon(tm) Processor AuthenticAMD GNU/Linux

(Yes, I changed my kernel yesterday (ptrace bug), but since 4.0.6-13
does not segfault, I do not think it is the problem)

----- End forwarded message -----


From zsh-workers-return-17447-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 09 06:06:22 2002
Return-Path: <zsh-workers-return-17447-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2755 invoked from network); 9 Jul 2002 06:06:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Jul 2002 06:06:21 -0000
Received: (qmail 8492 invoked by alias); 9 Jul 2002 06:06:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17447
Received: (qmail 8481 invoked from network); 9 Jul 2002 06:06:09 -0000
Date: Tue, 9 Jul 2002 16:06:04 +1000
From: Greg Price <Greg.Price@Sun.COM>
To: zsh-workers@sunsite.dk
Subject: 64bit Zsh for Solaris - FIX 1
Message-ID: <20020709160603.L4809@Aus.Sun.COM>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5.1i

Hi,

I did a bit of debugging today and found that most of the problems can be
attributed to the usage of _mktemp() in zsh-4.0.4/Src/utils.c gettempname().

mktemp() has a prototype which defines the return type as char *, whereas
there is no prototype for _mktemp(), hence it assumes the default return type
of int - a 32 bit quantity.

I don't understand why _mktemp would be used (rather than mktemp()), but
we'll need a prototype.

Now we only fail test D02 (globbing). I don't really understand globbing,
hence I'll have trouble getting close to the problem. At least it's just
one complicated test failing now.

Cheers,
Greg


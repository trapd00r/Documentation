From zsh-users-return-15778-mason-zsh=primenet.com.au@zsh.org Wed Feb 09 05:25:43 2011
Return-Path: <zsh-users-return-15778-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27873 invoked by alias); 9 Feb 2011 05:25:43 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15778
Received: (qmail 1435 invoked from network); 9 Feb 2011 05:25:42 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <110208212527.ZM24140@torch.brasslantern.com>
Date: Tue, 08 Feb 2011 21:25:27 -0800
In-reply-to: <273791.72265.qm@web112305.mail.gq1.yahoo.com>
Comments: In reply to Wendell Hom <wendell_hom@yahoo.com>
 "zle -R does it support color?" (Feb  8,  4:29pm)
References: <273791.72265.qm@web112305.mail.gq1.yahoo.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Re: zle -R does it support color?
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Feb 8,  4:29pm, Wendell Hom wrote:
}
} I am using zle -R to list the file/directory choices that match a
} string in the buffer. The script serves its purpose, but I can't seem
} to get any color output using zle -R; it displays control characters
} instead. Does zle -R support color output?

No, zle -R doesn't support any sort of terminal control.  ZLE is pretty
restrictive of what it will let you do outside of a prompt string, in
order that it be able to keep track of what the screen (well, the bit
of the screen that it last scribbled on) looks like at all times.
It doesn't "know" which escape sequences require zero display space,
which ones move the cursor around, etc., so it won't emit any of them.

You might be able to do something with POSTDISPLAY and region_highlight
but it'd require a fair amount of work.

} It would be nice to have a color-coded output so I can easily spot
} directories vs. filenames vs symlinks, etc.

Out of curiosity, why are you simulating a completion with zle -R
rather than doing a real completion list and allowing that to color
the results?


From zsh-workers-return-20530-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 29 18:00:38 2004
Return-Path: <zsh-workers-return-20530-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6073 invoked from network); 29 Oct 2004 18:00:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Oct 2004 18:00:37 -0000
Received: (qmail 90190 invoked from network); 29 Oct 2004 18:00:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Oct 2004 18:00:27 -0000
Received: (qmail 16636 invoked by alias); 29 Oct 2004 17:59:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20530
Received: (qmail 16614 invoked from network); 29 Oct 2004 17:59:36 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 29 Oct 2004 17:59:36 -0000
Received: (qmail 85100 invoked from network); 29 Oct 2004 17:58:37 -0000
Received: from smtpout.mac.com (17.250.248.45)
  by a.mx.sunsite.dk with SMTP; 29 Oct 2004 17:58:35 -0000
Received: from mac.com (webmail29-en1 [10.13.10.129])
	by smtpout.mac.com (Xserve/MantshX 2.0) with ESMTP id i9THwUFK025529
	for <zsh-workers@sunsite.dk>; Fri, 29 Oct 2004 10:58:32 -0700 (PDT)
Received: from webmail29 (localhost.mac.com [127.0.0.1])
	by mac.com (Xserve/webmail29/MantshX 4.0) with ESMTP id i9THwTIn027899
	for <zsh-workers@sunsite.dk>; Fri, 29 Oct 2004 10:58:29 -0700 (PDT)
Message-ID: <12895523.1099072709324.JavaMail.jordan.breeding@mac.com>
Date: Fri, 29 Oct 2004 12:58:29 -0500
From: Jordan Breeding <jordan.breeding@mac.com>
To: zsh-workers@sunsite.dk
Subject: help with read in zsh 3.0/3.1
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: 199.171.212.100/instID=144
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

i have the following code in my precmd() function only for zsh versions which are at least 4.1 (don't have 4.0 anywhere so i don't if it would work there):

local escape colno lineno
IFS='[;' read -s -d R escape\?$'\e[6n' lineno colno
(( colno > 1 )) && echo ''

this code was provided to me by Bart Schaefer (I believe) and allows my zsh to know whether or not it needs to perform an echo before issuing it's LF

the problem is that at work i have some boxes which i need to use zsh 3.0/3.1 on, i would also like to use this code there but zsh 3.0/3.1 don't have -s or -d for read, Bart Schaefer provided me with some pointers on how it might be done but I couldn't really get anything to actually work the way the zsh 4.1 read does.

any ideas on how to make that code into a code block that would work for 3.0/3.1?

thanks for any help.

Jordan


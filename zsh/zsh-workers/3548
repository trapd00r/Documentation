From zsh-workers-request@math.gatech.edu Fri Oct 03 14:10:09 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 11201 invoked from network); 3 Oct 1997 14:10:08 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 3 Oct 1997 14:10:08 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id KAA21843;
	Fri, 3 Oct 1997 10:05:38 -0400 (EDT)
Resent-Date: Fri, 3 Oct 1997 10:05:38 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199710031405.QAA04901@csillag.cs.elte.hu>
Subject: Re: rcexpandparam fix
In-Reply-To: <199710031251.OAA12551@sgi.ifh.de> from Peter Stephenson at "Oct 3, 97 02:51:29 pm"
To: pws@ifh.de (Peter Stephenson)
Date: Fri, 3 Oct 1997 16:05:35 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL27 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"Xai-n1.0.BL5.nkFDq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3548
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Peter Stephenson wrote:
> This seems to be the minimal fix to the rcexpandparam bug.  I think

Even more minimal than you thought.  It is really a kind of typo bug, so
bad, that such thing always turn out after a new release )-:.  Here is the
fix.

Zoltan


diff -c subst.c.orig subst.c
*** Src/subst.c.orig	Fri Sep 26 03:42:18 1997
--- Src/subst.c	Fri Oct  3 16:00:10 1997
***************
*** 1439,1445 ****
  	    }
  	    if (plan9) {
  		uremnode(l, n);
! 		return NULL;
  	    }
  	} else {
  	    x = aval[0];
--- 1439,1445 ----
  	    }
  	    if (plan9) {
  		uremnode(l, n);
! 		return n;
  	    }
  	} else {
  	    x = aval[0];


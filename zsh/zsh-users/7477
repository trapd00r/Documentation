From zsh-users-return-7477-mason-zsh=primenet.com.au@sunsite.dk Tue May 25 22:54:04 2004
Return-Path: <zsh-users-return-7477-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16399 invoked from network); 25 May 2004 22:54:03 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 25 May 2004 22:54:03 -0000
Received: (qmail 15489 invoked from network); 25 May 2004 22:53:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 May 2004 22:53:41 -0000
Received: (qmail 23913 invoked by alias); 25 May 2004 22:53:32 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7477
Received: (qmail 23903 invoked from network); 25 May 2004 22:53:32 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 25 May 2004 22:53:29 -0000
Received: (qmail 14873 invoked from network); 25 May 2004 22:53:28 -0000
Received: from main.gmane.org (80.91.224.249)
  by a.mx.sunsite.dk with SMTP; 25 May 2004 22:53:27 -0000
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1BSknU-0005PI-00
	for <zsh-users@sunsite.dk>; Wed, 26 May 2004 00:53:27 +0200
Received: from isi-dialin-129-19.isionline-dialin.de ([195.158.129.19])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Wed, 26 May 2004 00:53:24 +0200
Received: from thorsten by isi-dialin-129-19.isionline-dialin.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Wed, 26 May 2004 00:53:24 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-users@sunsite.dk
From: Thorsten Kampe <thorsten@thorstenkampe.de>
Subject: Re: zsh 4.2.0 dumping core on completion attempt
Date: Wed, 26 May 2004 00:53:17 +0200
Lines: 63
Message-ID: <1kfucegia4ux3.dlg@thorstenkampe.de>
References: <3m5afmj8tzpu$.dlg@thorstenkampe.de> <20040525063239.19784.qmail@web51107.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: isi-dialin-129-19.isionline-dialin.de
User-Agent: 40tude_Dialog/2.0.12.1de
Sender: news <news@sea.gmane.org>
Cc: zsh-workers@sunsite.dk
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

* Felix Rosencrantz (2004-05-25 08:32 +0100)
> One thing that would help others to reproduce your problem is to provide a
> minimal "zsh -f" cut&paste script that reproduces the problem.   It would even
> be better if you can include a stack trace from your core dumps, or a valgrind
> report.

I have no idea how to use "valgrind".

> All these will  make it much easier for the folks who might fix the
> bug to find the problem.
> 
> Here is a possible start of such a script:
> zsh -f
> autoload -U compinit; compinit -C
> zstyle ':completion:*' matcher-list 'm:[-._]=[-._] r:|[-./_]=**'
> mkdir bug ; cd bug
> 	
> ls _f<TAB>
> <CORE DUMP>
> 
> Note that matching specs depend on the possible completion matches.  So try to
> find a minimal set of files to touch, that cause the core dump you see.  I
> tried your spec, and didn't get a core dump.

zsh -f
autoload -U compinit; compinit -C
zstyle ':completion:*' matcher-list 'm:[-._]=[-._] r:|[-./_]=**'
mkdir bug; cd bug
_f<TAB>
zsh: 2588 segmentation fault  zsh -f

The linux zsh produces no coredump but fortunately the Cygwin does
(although I have disabled it via "ulimit -Sc 0")

% cat zsh.exe.stackdump
Exception: STATUS_ACCESS_VIOLATION at eip=610D3BE2
eax=0000005F ebx=00000000 ecx=00000000 edx=0A1016C3 esi=0A1016C3
edi=00000000
ebp=0022A308 esp=0022A2F4 program=C:\cygwin\bin\zsh.exe, pid 2588,
thread main
cs=001B ds=0023 es=0023 fs=0038 gs=0000 ss=0023
Stack trace:
Frame     Function  Args
0022A308  610D3BE2  (0A1016C3, 00000000, 00000001, 00000001)
0022A328  66F4DFFD  (0A0FC558, 0A0EC960, 00000001, 0A101748)
0022A368  66F4F16B  (0A0EC960, 0A0FC558, 0A1016C4, 00000003)
0022A468  66F495EF  (00000000, 0A1016E0, 0A0E0BD0, 0A0FC558)
0022A5A8  66F485ED  (0022A5D0, 0A0D6270, 00000000, 00000000)
0022A648  66F41EE6  (0A082578, 0022A660, 0022A6C0, 00000000)
0022A768  66FE1A7F  (0A0824E8, 66F56300, 00000001, 0022A81C)
0022A898  66FF2CB5  (0022B590, 00000000, 00000000, 00000012)
0022A8E8  66FF131D  (0022B590, 00001183, 00000012, 00000000)
0022A948  66FF0A83  (0022B590, 00001802, 00000012, 00000000)
0022A988  66FF07F1  (0022B590, 00000001, 00000000, 66FF46DF)
0022A9B8  6700F411  (0022B590, 00000000, 00000001, 0022AA6C)
0022AAE8  66FF2A85  (0022B590, 00000000, 00000000, 00000012)
0022AB38  66FF131D  (0022B590, 00001143, 00000012, 00000000)
0022AB98  66FF0A83  (0022B590, 00004802, 00000012, 00000000)
0022ABD8  66FF07F1  (0022B590, 00000001, 00000000, 66FF46DF)
End of stack trace (more stack frames may be present)


Thorsten


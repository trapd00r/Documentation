From zsh-workers-return-13357-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 16 10:45:43 2001
Return-Path: <zsh-workers-return-13357-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23496 invoked from network); 16 Jan 2001 10:45:42 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jan 2001 10:45:42 -0000
Received: (qmail 17395 invoked by alias); 16 Jan 2001 10:45:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13357
Received: (qmail 17384 invoked from network); 16 Jan 2001 10:45:36 -0000
Sender: kvho@sebb.bel.alcatel.be
Message-ID: <3A64257A.5FEA2B99@alcatel.be>
Date: Tue, 16 Jan 2001 11:42:02 +0100
From: koen van hoof <koen.van_hoof@alcatel.be>
Reply-To: koen.van_hoof@alcatel.be
Organization: Alcatel Bell
X-Mailer: Mozilla 4.7 [en] (X11; I; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
CC: zsh-workers@sunsite.auc.dk
Subject: Re: TERMCAP problem.
References: <000501c07f99$b8d08110$21c9ca95@mow.siemens.ru>
Content-Type: multipart/mixed;
 boundary="------------C37822D9AE49DD819903ABF4"

This is a multi-part message in MIME format.
--------------C37822D9AE49DD819903ABF4
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Andrej Borsenkow wrote:

>
> This strcmp() is in library function tgetent. Try to unset
> TGETENT_ACCEPTS_NULL, recompile and try again. It is possible that your OS
> actually needs preallocated buffer.
>
> One more possibilty is, that screen creates too long termcap entry. IIRC I've
> seen something similar. How long is new termcap entry? I think, common limit
> is 1024.
>
> -andrej

I've unset TGETENT_ACCEPTS_NULL.

$ export TERMCAP=abc
$ ./zhs
zsh: 26119 segmentation fault (core dumped)  ./zsh
$ ddd ./zsh core

And the backtrace is
#0  0xef5a4274 in strcmp () from /usr/lib/libc.so.1
#1  0x126c04 in tgetent (bp=0x14d018 "", name=0x15cae8 "xterm") at termcap.c:469

#2  0x4860c in init_term () at init.c:480
#3  0x6f80c in termsetfn (pm=0x145e20, x=0x15cae8 "xterm") at params.c:2763
#4  0x6c518 in setstrvalue (v=0xefffed38, val=0x15cae8 "xterm") at params.c:1513

#5  0x6d7d4 in setsparam (s=0xeffffe51 "", val=0x15cae8 "xterm") at
params.c:1810
#6  0x67680 in createparamtable () at params.c:515
#7  0x491d4 in setupvals () at init.c:715
#8  0x12158 in main (argc=1, argv=0xeffff4bc) at ./main.c:78

--
==========================================================
Koen Van Hoof    koen.van_hoof@alcatel.be   32 3 451 60 31
==========================================================



--------------C37822D9AE49DD819903ABF4
Content-Type: text/x-vcard; charset=us-ascii;
 name="koen.van_hoof.vcf"
Content-Transfer-Encoding: 7bit
Content-Description: Card for koen van hoof
Content-Disposition: attachment;
 filename="koen.van_hoof.vcf"

begin:vcard 
n:Van Hoof;Koen
x-mozilla-html:TRUE
adr:;;;;;;
version:2.1
email;internet:koen.van_hoof@alcatel.be
x-mozilla-cpt:;0
fn:Koen Van Hoof
end:vcard

--------------C37822D9AE49DD819903ABF4--


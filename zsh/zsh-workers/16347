From zsh-workers-return-16347-mason-zsh=primenet.com.au@sunsite.dk Sun Dec 16 22:59:01 2001
Return-Path: <zsh-workers-return-16347-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26621 invoked from network); 16 Dec 2001 22:59:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Dec 2001 22:59:00 -0000
Received: (qmail 9158 invoked by alias); 16 Dec 2001 22:58:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16347
Received: (qmail 9146 invoked from network); 16 Dec 2001 22:58:53 -0000
Date: Sun, 16 Dec 2001 22:58:52 +0000
To: Clint Adams <clint@zsh.org>
Cc: zsh-workers@sunsite.dk
Subject: Re: PATCH: remove duplicate array values in parameter expansion
Message-ID: <20011216225852.GC31297@fysh.org>
References: <20011214215105.GA24236@dman.com> <011214141539.ZM32471@candle.brasslantern.com> <20011216205032.GA32057@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20011216205032.GA32057@dman.com>
User-Agent: Mutt/1.3.24i
From: Zefram <zefram@fysh.org>

Clint Adams wrote:
>+    while (*++p)
>+	for (t = x; t < p; t++)
>+	    if (!strcmp(*p, *t)) {
>+		*p = NULL;
>+		for (t = p--; (*t = t[1]) != NULL; t++);
>+		break;
>+	    }

"*p = NULL" is redundant (*p gets overwritten immediately).

>+	if (unique) {
>+/*	    if(!copied) */
>+		aval = arrdup(aval);

Is the commented-out code supposed to be there or not?

-zefram


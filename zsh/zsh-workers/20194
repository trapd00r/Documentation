From zsh-workers-return-20194-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 25 17:44:47 2004
Return-Path: <zsh-workers-return-20194-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11128 invoked from network); 25 Jul 2004 17:44:45 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Jul 2004 17:44:45 -0000
Received: (qmail 28431 invoked from network); 25 Jul 2004 17:44:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Jul 2004 17:44:37 -0000
Received: (qmail 26672 invoked by alias); 25 Jul 2004 17:44:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20194
Received: (qmail 26654 invoked from network); 25 Jul 2004 17:44:25 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 25 Jul 2004 17:44:25 -0000
Received: (qmail 27921 invoked from network); 25 Jul 2004 17:42:41 -0000
Received: from unknown (HELO moonbase.zanshin.com) (167.160.213.139)
  by a.mx.sunsite.dk with SMTP; 25 Jul 2004 17:42:40 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.12.11/8.12.11) with ESMTP id i6PHgcuB012773
	for <zsh-workers@sunsite.dk>; Sun, 25 Jul 2004 10:42:38 -0700
Date: Sun, 25 Jul 2004 10:42:38 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: zsh-workers@sunsite.dk
Subject: Re: starting completions with =,<,>
In-Reply-To: <pan.2004.07.25.11.42.39.666502@gmail.com>
Message-ID: <Pine.LNX.4.61.0407250838430.7539@toltec.zanshin.com>
References: <pan.2004.07.25.11.42.39.666502@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-4.9 required=6.0 tests=BAYES_00 autolearn=no 
	version=2.63
X-Spam-Hits: -4.9

On Sun, 25 Jul 2004, chris s wrote:

> Hi, I'm trying to add to the functionality of the emerge completion for
> gentoo linux. For example,
> 
> emerge -p =zsh-4.2.0-r1

Unless you "unsetopt equals" this could potentially be expanded into

emerge -p /usr/local/bin/zsh-4.2.0-r1

(or the like).  That's why there's the "-equals-" completion context.

> I saw in the manpage that _values does not support the equal sign.

Can you quote the bits of the manual that made you think this?

In any event I don't think you want _values.  The _values function is for
words of the form <name><sep><value> where <sep> defaults to "=", e.g.
"foo=bar" (like an assignment).  You can tell it to use a different <sep>,
but in the case of emerge there doesn't appear to be a <name> part.

> '--exact[specify exact version]:*::alt:->exact_ver' 
> 
> This is what I'd rather have look like this:
> 
> '=[specify exact version]:*::alt:->exact_ver' 

The problem here is that you're trying to treat this as an option, when 
what you need to do is treat it as an argument.  The question is whether 
it is a stand-alone argument, or whether it's an argument that must follow 
the -p option?  I haven't been able to dig up any documentation on emerge 
(the only software I can find are a mass-mailing program and the emacs CVS 
interface -- everything else is lost in the Google noise because "emerge" 
is a real word).


From zsh-workers-return-7626-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 02 09:02:01 1999
Return-Path: <zsh-workers-return-7626-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18879 invoked from network); 2 Sep 1999 09:01:59 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Sep 1999 09:01:59 -0000
Received: (qmail 14160 invoked by alias); 2 Sep 1999 09:01:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7626
Received: (qmail 14153 invoked from network); 2 Sep 1999 09:01:46 -0000
Message-Id: <9909020827.AA22962@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: Re: BUG: globbing 
In-Reply-To: "Sven Wischnowsky"'s message of "Thu, 02 Sep 1999 09:26:48 DFT."
             <199909020726.JAA13875@beta.informatik.hu-berlin.de> 
Date: Thu, 02 Sep 1999 10:27:46 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> 
> See:
> 
>   (...) ./zsh -f
>   beta% mkdir foo; cd foo; touch 'a~'
>   beta% setopt extendedglob
>   beta% echo *~
>   zsh: bad pattern: *~

illogical

--- Src/pattern.c~	Wed Sep  1 14:54:58 1999
+++ Src/pattern.c	Thu Sep  2 10:22:55 1999
@@ -601,8 +601,8 @@
     *flagp = P_PURESTR;
 
     starter = chain = 0;
-    while (!memchr(patendseg, *patparse, patendseglen) &&
-	   (*patparse != Tilde ||
+    while (!memchr(patendseg, *patparse, patendseglen) ||
+	   (*patparse == Tilde &&
 	    memchr(patendseg, patparse[1], patendseglen))) {
 	if (isset(EXTENDEDGLOB) &&
 	    ((!isset(SHGLOB) &&

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


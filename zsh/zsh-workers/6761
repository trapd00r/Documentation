From zsh-workers-return-6761-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 21 12:50:28 1999
Return-Path: <zsh-workers-return-6761-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2265 invoked from network); 21 Jun 1999 12:50:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Jun 1999 12:50:26 -0000
Received: (qmail 20158 invoked by alias); 21 Jun 1999 12:50:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6761
Received: (qmail 20131 invoked from network); 21 Jun 1999 12:50:01 -0000
Message-Id: <9906211221.AA36141@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: collist
In-Reply-To: "Sven Wischnowsky"'s message of "Mon, 21 Jun 1999 11:38:58 DFT."
             <199906210938.LAA22143@beta.informatik.hu-berlin.de> 
Date: Mon, 21 Jun 1999 14:21:20 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> - the `ma' capability to collist; it is used during menucompletion to
>   highlight the match inserted (note that you still have to set
>   `ZLS_COLO(|U)RS' to see this -- an empty string will suffice)
> - the `menu-select' widget which is a bit like `menu-complete' but
>   displays the list and then lets you use cursor-movement keys to
>   navigate in the list; to return to line editing, you can use
>   `accept-line' or `send-break'; `accept-and-hold' leaves the match
>   inserted in place and continues selecting matches from the list
>   (i.e. it's like `accept-and-menu-complete')

That's incredible.  It works fine on my black and white xterm with inverse
video (this is a good default), so I don't see why old fashioned vt100
people shouldn't be able to use it too.  And it's only tangentially related
to ordinary menu-completion --- in fact, it's real menucompletion rather
than just cycling through a list.  It should make every command line
interface in the world green with envy, if they're not already.
 
I had to add comp1 explicitly to the dependencies; this was to persuade AIX
to use comp1.export to resolve the links.  The .export files need updating
too, but having been bothering to post all that.

Some comments:
- It's hard to get out of at the moment.  Unrecognized keys should probably
  turn it off, particularly self insert, in much the same way they do with
  ordinary menu completion.  You should also be able to deactivate it
  leaving nothing inserted but without aborting everything.  That ought
  to satisfy many of the ordinary-menu-completion-phobes.
- When it does get deactivated, the chosen item should be unhighlighted
  immediately as a piece of visual feedback.
- (This is pretty much the same thing):  I actually find it annoying that
  the current menucompletion item is highlighted even when menu-select
  is not active.  I think at least there should be a separate code for
  the two (and I'd suggest the default for the ordinary menu completion one
  wasn't so highly visible).
- It would be quite nice to have some way of getting into it automatically,
  I suppose either by compconfig or by a completer.  To get this to work
  naturally, it's particularly important to have the visual feedback for
  menu-select on/off, as a signal that the cursor keys and a few others are
  special.  Then any other key could deactivate it and have its usual effect.
- Something a bit grotesque is happening when the completions don't all fit
  on the screen.  Maybe it shouldn't even work in that case (certainly not
  automatically).  It certainly shouldn't override `do you wish to see all
  2811 possibilities' as it does at present.
- I suppose a long term aim would be to have special keymaps for the
  minibuffer and this, too.  But there's no hurry for that.
- Probably not only this needs documenting, but the codes for ZLS_COLOURS in
  more detail; I don't think we can rely on using GNU ls manual.  But then
  we'll have to write it from scratch.

By the way, the translation of `colorize' is also `colour'.  Do children in
the US have colorizing books?

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


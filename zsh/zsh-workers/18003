From zsh-workers-return-18003-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 12 15:34:38 2002
Return-Path: <zsh-workers-return-18003-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3691 invoked from network); 12 Dec 2002 15:34:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 12 Dec 2002 15:34:37 -0000
Received: (qmail 1770 invoked by alias); 12 Dec 2002 15:34:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18003
Received: (qmail 1758 invoked from network); 12 Dec 2002 15:34:26 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1021212153356.ZM23831@candle.brasslantern.com>
Date: Thu, 12 Dec 2002 15:33:56 +0000
In-Reply-To: <19293.1039689560@csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Re: GNU nohup oddness" (Dec 12, 10:39am)
References: <19293.1039689560@csr.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Peter Stephenson <pws@csr.com>, zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: GNU nohup oddness
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Dec 12, 10:39am, Peter Stephenson wrote:
} Subject: Re: GNU nohup oddness
}
} "Bart Schaefer" wrote:
} > With signal_ignore(SIGHUP) any jobs started by that zsh _probably_ will
} > also ignore HUP -- but without opts[HUP] = 0, zsh still kill()s all jobs
} > at exit.  So with the patch above, background jobs _may_ die when the
} > script exits, even if the nohup wrapper was used to start the script.
} 
} But only if they explicitly arrange to handle HUP, right?

Yes.  It also just occurred to me that they'll definitely die if the zsh
script explicitly installs a HUP trap (unless the job arranges to ignore).

} I would have said this was marginally preferable, but I'm really just
} sticking my finger in the air.

Me, too; I'm comfortable with making the minimal change to follow zsh's
parent, but as we're changing a behavior of many years' standing, it'd
be nice if we only had to change it once.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


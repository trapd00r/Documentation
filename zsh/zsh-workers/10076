From zsh-workers-return-10076-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Mar 11 23:42:18 2000
Return-Path: <zsh-workers-return-10076-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24770 invoked from network); 11 Mar 2000 23:42:16 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Mar 2000 23:42:16 -0000
Received: (qmail 11421 invoked by alias); 11 Mar 2000 23:42:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10076
Received: (qmail 11408 invoked from network); 11 Mar 2000 23:42:09 -0000
Date: Sun, 12 Mar 2000 01:41:37 +0200 (EET)
From: Juhapekka Tolvanen <juhtolv@st.jyu.fi>
To: zsh-workers@sunsite.auc.dk
Subject: Good documentation about literal escape sequences in prompt?
Message-ID: <Pine.LNX.4.10.10003120123170.22919-100000@verso.st.jyu.fi>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: 8BIT


%{...%}
        Include a string as a literal escape sequence. The
        string within the braces should not change the cursor
        position. Brace pairs can nest.

Hey, come on! Do you really think that is enough? Why don't you provide some
good examples? I know you can do it better!

For example this does not work:

PS1="%{\e[1;31m%}$PS1%{\e[1m%}"

Just look, what i get:

Normally my PS1 is like this:

1510 | p5 | juhtolv@heresy : /home/juhtolv/apu
% 

If I say this:

PS1="%{\e[1;31m%}$PS1%{\e[1m%}"

I get this:

[1;31m$PS1"\e[1;31m1538 | p6 | juhtolv@heresy : /home/juhtolv
% \e[1m

Color-codes were found from /usr/share/zsh/functions/colors

I tried to understand other files in /usr/share/zsh/functions, like _prompt
and promptinit but even it was the real pain in the ass.

So meanwhile I have to use really ugly hacks like these:

PS1="`print -Pn '\e[1;31m'`$PS1 `print -Pn '\e[0m'`"

PS1="`print -Pn '\e[1;31m'``print -Pn '\e[1;43m'`$PS1`print -Pn '\e[0m'`"

-- 
-- Juhapekka "naula" Tolvanen * * * U of Jyväskylä * * juhtolv@st.jyu.fi --
-- http://www.cc.jyu.fi/~juhtolv/ * * * * " STRAIGHT BUT NOT NARROW !! " --
---------------------------------------------------------------------------
"I don't want to run a company. I'm not good at managing people. You have
a problem with the guy in the next cubicle? I don't care. Shoot him or
something." Marc Andreessen, founder of Netscape, in Rolling Stone, May '97


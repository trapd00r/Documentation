From zsh-users-return-4992-mason-zsh=primenet.com.au@sunsite.dk Sat May 25 17:42:28 2002
Return-Path: <zsh-users-return-4992-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8926 invoked from network); 25 May 2002 17:42:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 May 2002 17:42:27 -0000
Received: (qmail 21542 invoked by alias); 25 May 2002 17:42:13 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4992
Received: (qmail 21530 invoked from network); 25 May 2002 17:42:12 -0000
Date: Sat, 25 May 2002 10:42:07 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: schaefer@ns1.sodaware.com
To: Jukka Lehti <jukkalehti@yahoo.com>
cc: zsh-users@sunsite.dk
Subject: Re: make completion on OpenBSD
In-Reply-To: <20020525101838.45917.qmail@web20310.mail.yahoo.com>
Message-ID: <Pine.LNX.4.44.0205251030040.10900-100000@ns1.sodaware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

(Let's peel off some indentation here ...)

On Sat, 25 May 2002, Jukka Lehti wrote:

> compctl -s "\$(awk '/^[a-zA-Z0-9][^\/ \t]+:/{print \$1}' FS=: [mM]akefile)" -x 'c[-1,-f]' -f -- {,g,gnu,p,v}make

> I did "setopt > opts" on both machines and diff
> shows that the files are identical. Both machines have
> zsh-4.0.4. OS are Red Hat Linux 7.3 and OpenBSD 3.1,
> both pretty much at out-of-box state.

One possible difference is that awk is definitely GNU awk on RedHat, but
it may be something else on OpenBSD.  Have you tried running just the awk
expressions on both platforms to see if the output is different?

awk '/^[a-zA-Z0-9][^\/ \t]+:/{print $1}' FS=: [mM]akefile

In particular I'm wondering if you need a literal tab instead of \t in
that character class on OpenBSD.

In any event, since you're using zsh-4.0.4, why not abandon your compctl
entirely and enable the newer completion system?  It includes a very
detailed "make" completion.


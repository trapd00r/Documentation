From zsh-users-return-11326-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 22 09:00:39 2007
Return-Path: <zsh-users-return-11326-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17595 invoked from network); 22 Mar 2007 09:00:36 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Mar 2007 09:00:36 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 47194 invoked from network); 22 Mar 2007 09:00:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Mar 2007 09:00:27 -0000
Received: (qmail 18172 invoked by alias); 22 Mar 2007 09:00:19 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11326
Received: (qmail 18161 invoked from network); 22 Mar 2007 09:00:18 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Mar 2007 09:00:18 -0000
Received: (qmail 46111 invoked from network); 22 Mar 2007 09:00:18 -0000
Received: from esacom89-ext.esoc.esa.int (HELO esacom89-int.esoc.esa.int) (131.176.86.4)
  by a.mx.sunsite.dk with SMTP; 22 Mar 2007 09:00:14 -0000
Received: from esacom53.esoc.esa.int (131-176-86-254.esoc.esa.int [131.176.86.254])
	by esacom89-int.esoc.esa.int (8.13.3/8.13.3/ESA-External-v4.0) with ESMTP id l2M8xI2K024667;
	Thu, 22 Mar 2007 08:59:22 GMT
Received: from dcle12.dev.esoc.esa.int (dcle12.dev.esoc.esa.int [131.176.58.71])
	by esacom53.esoc.esa.int (8.12.10/8.12.10/ESA-Internal-v3.2) with ESMTP id l2M8xCQq007330;
	Thu, 22 Mar 2007 08:59:12 GMT
Received: from dcle12 (localhost [127.0.0.1])
	by dcle12.dev.esoc.esa.int (8.13.6+Sun/8.13.6) with ESMTP id l2M8x4FY021706;
	Thu, 22 Mar 2007 08:59:08 GMT
cc: "zsh-users@sunsite.dk" <zsh-users@sunsite.dk>
In-reply-to: <dbfc82860703211619h668a36c9leb9a617dff8feef@mail.gmail.com>
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <dbfc82860703211619h668a36c9leb9a617dff8feef@mail.gmail.com>
To: "Nikolai Weibull" <now@bitwi.se>
Subject: Re: When to use _arguments -C and when to only use _arguments.
Date: Thu, 22 Mar 2007 09:59:04 +0100
Message-ID: <21705.1174553944@dcle12>

"Nikolai Weibull" wrote:
> I can't deduce from the documentation, or any of the uses, when you
> would want to pass the -C option to _arguments and when you wouldn't,
> assuming that you're actually going to use a state.

If you're not using states then there's no point passing -C. It'll
effectively do nothing.

If you are using states then it comes down to whether it is ever
possible that you will be generating matches for more than one state.
This is very rare but can occur, for example if a flag takes an
optional argument so you need to complete the optional argument along
with the normal arguments.

Note that state and context are arrays where the elements correspond.
This means that if you don't use -C, you need to take care to select the
correct context when generating matches. This is what the -C option to
_tags, _wanted etc is for.

If you use states, you should also make sure that you are consistent
between your use of -C and the variables declared local in your
function. With -C, it should be:
  local curcontext="$curcontext" state line
and without:
  local context state line

There's more details on p385 of "From Bash to Z Shell" if you have it.

Oliver


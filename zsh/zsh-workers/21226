From zsh-workers-return-21226-mason-zsh=primenet.com.au@sunsite.dk Wed May 04 01:42:55 2005
Return-Path: <zsh-workers-return-21226-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25402 invoked from network); 4 May 2005 01:42:52 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 May 2005 01:42:52 -0000
Received: (qmail 28747 invoked from network); 4 May 2005 01:42:35 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 May 2005 01:42:35 -0000
Received: (qmail 17660 invoked by alias); 4 May 2005 01:42:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21226
Received: (qmail 17647 invoked from network); 4 May 2005 01:42:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 May 2005 01:42:31 -0000
Received: (qmail 28380 invoked from network); 4 May 2005 01:42:31 -0000
Received: from vms040pub.verizon.net (206.46.252.40)
  by a.mx.sunsite.dk with SMTP; 4 May 2005 01:42:27 -0000
Received: from candle.brasslantern.com ([4.11.1.68])
 by vms040.mailsrvcs.net (Sun Java System Messaging Server 6.2 HotFix 0.04
 (built Dec 24 2004)) with ESMTPA id <0IFX005HIZEKCDS2@vms040.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Tue, 03 May 2005 20:42:21 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j441gJ3D018780	for
 <zsh-workers@sunsite.dk>; Tue, 03 May 2005 18:42:19 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j441gJYv018779	for zsh-workers@sunsite.dk; Tue,
 03 May 2005 18:42:19 -0700
Date: Wed, 04 May 2005 01:42:18 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: localtraps
In-reply-to: <200505031004.j43A47jB014589@news01.csr.com>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Message-id: <1050504014218.ZM18778@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20050425063521.GA17598@quark.hightek.org>
	<1050425163202.ZM25027@candle.brasslantern.com>
	<20050426030308.GA21501@quark.hightek.org>
	<200504261834.j3QIYHSa018951@news01.csr.com>
	<1050427053638.ZM28743@candle.brasslantern.com>
	<200504270954.j3R9sujP029445@news01.csr.com>
	<1050427140931.ZM29524@candle.brasslantern.com>
	<20050501185447.GA24296@quark.hightek.org>
	<200505031004.j43A47jB014589@news01.csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>        "Re: localtraps"
 (May  3, 11:04am)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

On May 3, 11:04am, Peter Stephenson wrote:
} Subject: Re: localtraps
}
} > arget  ;; esac;  test -f $target
} > *** Error code 1
} 
} It's not obvious why it gave an error --- unless the wrap between "$t"
} and "arget" was there in the original, which is unlikely.

It gave an error because "test -f $target" failed, because the target
does not exist.  This is a result of a change I recently committed.
Tell me again why we should create and test for an empty file in the
event tht yodl doesn't exist?

Seems to me the test is wrong even in the case where yodl *does* exist,
since the file is created by a redirection and therefore it will be
present (and empty) even if yodl fails outright.


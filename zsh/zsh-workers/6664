From zsh-workers-return-6664-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jun 16 14:16:56 1999
Return-Path: <zsh-workers-return-6664-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2815 invoked from network); 16 Jun 1999 14:16:54 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jun 1999 14:16:54 -0000
Received: (qmail 22816 invoked by alias); 16 Jun 1999 14:16:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6664
Received: (qmail 22808 invoked from network); 16 Jun 1999 14:16:29 -0000
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>,
        <zsh-workers@sunsite.auc.dk>
Subject: RE: PATCH: 3.0.6-pre-4: COLUMNS/LINES environment handling
Date: Tue, 15 Jun 1999 15:45:06 +0400
Message-ID: <002601beb724$839e5510$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <990614094301.ZM19130@candle.brasslantern.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300

>
> Now, somebody who has a copy of the actual POSIX shell spec should tell
> us if the above is reasonable.  Zoltan, are you out there?
>

This is available online: http://www.opengroup.org/onlinepubs/7908799/toc.htm
(Single Unix V2)

 Other Environment Variables
COLUMNS
A decimal integer > 0 used to indicate the user's preferred width in column
positions for the terminal screen or window. (See column position .) If this
variable is unset or null, the implementation determines the number of columns,
appropriate for the terminal or window, in an unspecified manner. When COLUMNS
is set, any terminal-width information implied by TERM will be overridden. Users
and portable applications should not set COLUMNS unless they wish to override
the system selection and produce output unrelated to the terminal
characteristics. The default value for the number of column positions is
unspecified because historical implementations use different methods to
determine values corresponding to the size of the screen in which the utility is
run. This size is typically known to the implementation through the value of
TERM or by more elaborate methods such as extensions to the stty utility, or
knowledge of how the user is dynamically resizing windows on a bit-mapped
display terminal. Users should not need to set this variable in the environment
unless there is a specific reason to override the implementation's default
behaviour, such as to display data in an area arbitrarily smaller than the
terminal or window.

Note, that neither stty nor "General Terminal Inteface" description say any word
about the whole stuff :-)

In any case, I think the proposed order is correct and patch for 3.1.5 is
welcome.

/andrej

> How much of all that needs to go in the manual?  Lots of it should go in
> the FAQ, including remarks about how it is broken in various versions if
> we can figure that out.
>

We definitely have to describe, how COLUMNS/LINES are used/set by shell.

/andrej


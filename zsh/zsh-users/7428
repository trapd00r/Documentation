From zsh-users-return-7428-mason-zsh=primenet.com.au@sunsite.dk Sat May 01 23:33:18 2004
Return-Path: <zsh-users-return-7428-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25686 invoked from network); 1 May 2004 23:33:17 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by ns1.primenet.com.au with SMTP; 1 May 2004 23:33:17 -0000
Received: (qmail 29516 invoked from network); 1 May 2004 23:32:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 May 2004 23:32:39 -0000
Received: (qmail 25979 invoked by alias); 1 May 2004 23:32:31 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7428
Received: (qmail 25966 invoked from network); 1 May 2004 23:32:30 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 1 May 2004 23:32:27 -0000
Received: (qmail 28871 invoked from network); 1 May 2004 23:32:27 -0000
Received: from dan.emsphone.com (root@199.67.51.101)
  by a.mx.sunsite.dk with SMTP; 1 May 2004 23:32:25 -0000
Received: (from dan@localhost)
	by dan.emsphone.com (8.12.10/8.12.10) id i41NWF0o035003;
	Sat, 1 May 2004 18:32:15 -0500 (CDT)
	(envelope-from dan)
Date: Sat, 1 May 2004 18:32:15 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: "Timothy J. Luoma" <luomat@peak.org>
Cc: zsh-users@sunsite.dk
Subject: Re: zsh prompt not updating until first 'chdir'
Message-ID: <20040501233214.GD10166@dan.emsphone.com>
References: <opr7bvrajhb19zj4@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <opr7bvrajhb19zj4@localhost>
X-OS: FreeBSD 5.2-CURRENT
X-message-flag: Outlook Error
User-Agent: Mutt/1.5.6i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

In the last episode (May 01), Timothy J. Luoma said:
> Just back on the list after a long absence (exiled to Windows for a
> few years, just bought a Mac).

There is a very nice cygwin port of zsh :)

> I'm very rusty on my ZSH skills, and hope someone can help.  I have a
> $PROMPT setup in .zshenv
> 
> setprompt () { PROMPT="
> 
> ---------------------------------%t/%T ---------------------------------
> %S[OLDPWD: $OLDPWD]
>      [PWD: %~]%s
> $SHORT_HOST> "
> }

Why not just set PROMPT to  

"
---------------------------------%t/%T ---------------------------------
%S[OLDPWD: $dirstack[1]]
     [PWD: %~]%s
$SHORT_HOST> "

in your .zshrc directly, setopt prompt_subst, and forget about
resetting it every time you cd?

-- 
	Dan Nelson
	dnelson@allantgroup.com


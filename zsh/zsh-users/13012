From zsh-users-return-13012-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 10 05:05:17 2008
Return-Path: <zsh-users-return-13012-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26868 invoked from network); 10 Jul 2008 05:05:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jul 2008 05:05:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 15192 invoked from network); 10 Jul 2008 05:04:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2008 05:04:49 -0000
Received: (qmail 11741 invoked by alias); 10 Jul 2008 05:04:35 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13012
Received: (qmail 11730 invoked from network); 10 Jul 2008 05:04:34 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Jul 2008 05:04:34 -0000
Received: from mx.spodhuis.org (redoubt.spodhuis.org [193.202.115.177])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 3586B80524FA
	for <zsh-users@sunsite.dk>; Thu, 10 Jul 2008 07:04:31 +0200 (CEST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=d200803; d=spodhuis.org;
	h=Received:Date:From:To:Cc:Subject:Message-ID:Mail-Followup-To:References:MIME-Version:Content-Type:Content-Disposition:In-Reply-To;
	b=gw0lLLI4NA4GRPpn9UwJbyJjtn1C3dbaUfStq9oZM3td0XSspiiBl+DAX2rJo2dJUAq+iQiZDqi1cRZbPlZGY06hx1PNWxJPD7T1QAZMmu3nUeqSDol1vvp3JnQn+45L3Dc31XirOFoEFrP+RA5PSRVgXAZKwpK5k2GYa70pf4c=;
Received: by smtp.spodhuis.org with local 
	id 1KGoKT-00012X-RM; Thu, 10 Jul 2008 05:04:29 +0000
Date: Wed, 9 Jul 2008 22:04:29 -0700
From: Phil Pennock <zsh-workers+phil.pennock@spodhuis.org>
To: William Scott <wgscott@chemistry.ucsc.edu>
Cc: zsh-users@sunsite.dk
Subject: Re: zsh bash compatibility question
Message-ID: <20080710050429.GA3854@redoubt.spodhuis.org>
Mail-Followup-To: William Scott <wgscott@chemistry.ucsc.edu>,
	zsh-users@sunsite.dk
References: <2E889B52-A436-4081-8BA1-15520802E1B8@chemistry.ucsc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <2E889B52-A436-4081-8BA1-15520802E1B8@chemistry.ucsc.edu>
X-Virus-Scanned: ClamAV 0.92.1/7681/Thu Jul 10 05:20:57 2008 on bifrost
X-Virus-Status: Clean

On 2008-07-09 at 10:05 -0700, William Scott wrote:
> If, while in zsh, I type
> 
> source /whole/path/to/sourcefile
> 
> and have   dirname $0 embedded within the sourcefile
> 
> In zsh, it will report back the full directory path for the directory  
> in which this file is located, the same way it does for shell scripts.
> 
> In bash, I just get the location of the bash executable itself.
> 
> Is there an equivalent command that will work in bash (or preferably  
> both shells)?

Both shells:

  dirname ${BASH_SOURCE:-$0}

In bash, BASH_SOURCE is an array variable but referring to an array gets
you the first element only (unless you explicitly expand the array), so
you have the value.  In zsh, unless you've got something exporting
BASH_SOURCE to the environment,the variable will be unset, so you get
the default value, $0 which should give you the same thing.

Phil


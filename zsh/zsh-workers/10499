From zsh-workers-return-10499-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 05 08:32:50 2000
Return-Path: <zsh-workers-return-10499-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19035 invoked from network); 5 Apr 2000 08:32:44 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Apr 2000 08:32:44 -0000
Received: (qmail 27176 invoked by alias); 5 Apr 2000 08:32:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10499
Received: (qmail 27150 invoked from network); 5 Apr 2000 08:32:32 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000405083226.ZM14407@candle.brasslantern.com>
Date: Wed, 5 Apr 2000 08:32:26 +0000
In-Reply-To: <003301bf9ecb$f1397ed0$21c9ca95@mow.siemens.ru>
Comments: In reply to "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
        "info is rebuilt every time" (Apr  5, 10:55am)
References: <003301bf9ecb$f1397ed0$21c9ca95@mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: PATCH: Not quite Re: info is rebuilt every time
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 5, 10:55am, Andrej Borsenkow wrote:
} Subject: info is rebuilt every time
}
} Every time I run make info gets rebuilt. It is espicially annoying now
} with CVS updates. Today's update did not touch yo files for all I can
} tell - the newest file is from 2nd April.

That's a little odd ... zsh.info is *never* rebuilt for me, unless I
explicitly "make install.info" or "(cd Doc; make zsh.info)".

On the other hand, stamp-h.in always gets rebuilt for me, because I use
a build dir separate from the source dir and the rules for the stamp-h.in
target build $(sdir)/stamp-h.in rather than stamp-h.in, so ./stamp-h.in
never gets any newer.

In the interest of trying to fix your bug (the patch below is for mine),
let me ask: Do you have yodl?  If so, is zsh.texi getting rebuilt, too,
or is it just that makeinfo always runs?

If you have GNU make, "make -n -d -s --no-print-directory >& make.out"
and then edit make.out and search for zsh.info -- you should be able to
find what it believes the unsatisfied dependency to be.

(I'll check the following in to sourceforge as soon as I know the article
number.)

Index: Makefile.in
===================================================================
@@ -138,19 +138,20 @@
 
 config: config.h
 
-config.status: configure
+config.status: $(sdir)/configure
 	./config.status --recheck
 
-configure: configure.in aclocal.m4 aczsh.m4
+$(sdir)/configure: $(sdir)/configure.in $(sdir)/aclocal.m4 $(sdir)/aczsh.m4
 	cd $(sdir) && autoconf
 
 config.h: stamp-h
-stamp-h: config.h.in config.status
+stamp-h: $(sdir)/config.h.in config.status
 	cd $(dir_top) && \
 	  CONFIG_FILES= CONFIG_HEADERS=$(subdir)/config.h ./config.status
 
-config.h.in: stamp-h.in
-stamp-h.in: configure.in acconfig.h aclocal.m4 aczsh.m4
+$(sdir)/config.h.in: $(sdir)/stamp-h.in
+$(sdir)/stamp-h.in: $(sdir)/configure.in $(sdir)/acconfig.h \
+		$(sdir)/aclocal.m4 $(sdir)/aczsh.m4
 	cd $(sdir) && autoheader
 	echo > $(sdir)/stamp-h.in
 

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


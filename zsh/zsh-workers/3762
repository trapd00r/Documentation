From zsh-workers-request@math.gatech.edu Mon Feb 02 17:18:17 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 25122 invoked from network); 2 Feb 1998 17:18:16 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 2 Feb 1998 17:18:16 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id LAA11878;
	Mon, 2 Feb 1998 11:54:04 -0500 (EST)
Resent-Date: Mon, 2 Feb 1998 11:54:04 -0500 (EST)
Date: Mon, 2 Feb 1998 11:55:00 -0500
Message-Id: <9802021655.AA22193@ezdzit.zko.dec.com>
From: Paul Lew <lew@ezdzit.zko.dec.com>
To: "stringfellow.n.d" <stringfe@rmcs.cran.ac.uk>
Cc: zsh-workers@math.gatech.edu
Subject: Re: terminal parameter changed problem
In-Reply-To: <34D5F142.6487@rmcs.cran.ac.uk>
References: <9802020353.AA22474@ezdzit.zko.dec.com>
	<34D5F142.6487@rmcs.cran.ac.uk>
X-Mailer: VM 6.37 under Emacs 20.2.1
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"YA4Kg1.0.Tv2.heVrq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3762
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

stringfellow> This patch was for zsh 3.0.3 but I think that it should
stringfellow> work for later versions - although it's small enough to
stringfellow> edit the file Src/jobs.c by hand.

stringfellow> This patch doesn't appear to have made it into later
stringfellow> versions of zsh, i.e. it was only ever reported as a
stringfellow> patch and slipped through the net whenlater versions
stringfellow> were produced.

stringfellow> Here is Peter's patch:

	*** ./Src/jobs.c.old Wed Jun 4 17:51:43 1997
	--- ./Src/jobs.c Wed Jun 4 17:53:39 1997
	***************
	*** 155,161 ****
	}
	}

	! if (shout && !ttyfrozen && !jn->stty_in_env)
	gettyinfo(&shttyinfo);

	if (isset(MONITOR)) {
	--- 155,161 ----
	}
	}

	! if (shout && !ttyfrozen && !jn->stty_in_env && inforeground)
	gettyinfo(&shttyinfo);

	if (isset(MONITOR)) {

I got the follow (lines 158) for Src/jobs.c (zsh 3.0.5):

    if (shout && !ttyfrozen && !jn->stty_in_env &&
	job == thisjob && !somestopped && !(jn->stat & STAT_NOSTTY))
	gettyinfo(&shttyinfo);

Will this conver the inforeground patch?  Anyone knows?

					-- Paul  02/02/98  11:50 AM --


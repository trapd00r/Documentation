From zsh-workers-return-10675-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 11 20:38:37 2000
Return-Path: <zsh-workers-return-10675-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9315 invoked from network); 11 Apr 2000 20:38:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Apr 2000 20:38:36 -0000
Received: (qmail 14927 invoked by alias); 11 Apr 2000 20:38:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10675
Received: (qmail 14916 invoked from network); 11 Apr 2000 20:38:25 -0000
Date: Tue, 11 Apr 2000 21:38:23 +0100
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: core dump with fc
Message-ID: <20000411213823.B1605@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

I have an alias for extracting from tar balls after looking at them
(thanks Bart :-)

xt: aliased to fc -e - tvf=xf ztf=zxf -1

However ...

$ echo tvf
$ xt
zsh: 15486 segmentation fault (core dumped)  zsh

Stack trace follows.  This /doesn't/ happen if I start up with -f, but
I'm hoping the bug is obvious enough that I won't have to narrow the
problem down to one particular line in my huge .zshrc.

#0  0x80542a3 in fcsubs (sp=0xbffff43c, sub=0x646c6f62) at builtin.c:1345
1345            oldstr = sub->name;
#1  0x805452c in fclist (f=0x80e2b20, n=0, r=0, D=0, d=0, first=3039, 
    last=3039, subs=0x40014a88, pprog=0x0) at builtin.c:1410
#2  0x805410f in bin_fc (nam=0x40014a38 "fc", argv=0xbffff4c8, 
    ops=0xbffff51c "", func=16) at builtin.c:1279
#3  0x8052047 in execbuiltin (args=0x400149e8, bn=0x80b37bc) at builtin.c:368
#4  0x8062497 in execcmd (state=0xbffff7c8, input=0, output=0, how=18, last1=2)
    at exec.c:2254
#5  0x805f18e in execpline2 (state=0xbffff7c8, pcode=323, how=18, input=0, 
    output=0, last1=0) at exec.c:1180
#6  0x805e70d in execpline (state=0xbffff7c8, slcode=8194, how=18, last1=0)
    at exec.c:973
#7  0x805e129 in execlist (state=0xbffff7c8, dont_change_job=0, exiting=0)
    at exec.c:820
#8  0x805de37 in execode (p=0x40014960, dont_change_job=0, exiting=0)
    at exec.c:726
#9  0x80725e3 in loop (toplevel=1, justonce=0) at init.c:150
#10 0x805164c in main (argc=1, argv=0xbffff874) at ./main.c:86
#11 0x4006acb3 in __libc_start_main (main=0x8051470 <main>, argc=1, 
    argv=0xbffff874, init=0x8050a00 <_init>, fini=0x80ab42c <_fini>, 
    rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffff86c)
    at ../sysdeps/generic/libc-start.c:78


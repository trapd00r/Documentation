From zsh-workers-return-24688-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 06 09:47:13 2008
Return-Path: <zsh-workers-return-24688-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14652 invoked from network); 6 Mar 2008 09:47:11 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Mar 2008 09:47:11 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 52792 invoked from network); 6 Mar 2008 09:47:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Mar 2008 09:47:05 -0000
Received: (qmail 16114 invoked by alias); 6 Mar 2008 09:47:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24688
Received: (qmail 16089 invoked from network); 6 Mar 2008 09:47:00 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 6 Mar 2008 09:47:00 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 5AA5C8029404
	for <zsh-workers@sunsite.dk>; Thu,  6 Mar 2008 10:46:56 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly47d.srv.mailcontrol.com (MailControl) with ESMTP id m269kt7l023997
	for <zsh-workers@sunsite.dk>; Thu, 6 Mar 2008 09:46:55 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 6 Mar 2008 09:46:55 +0000
Date: Thu, 6 Mar 2008 09:46:54 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: printf %s in UTF-8 is not POSIX-compliant
Message-ID: <20080306094654.51ce92b4@news01>
In-Reply-To: <20080306013950.GN15833@prunille.vinc17.org>
References: <20080304012917.GA15833@prunille.vinc17.org>
	<200803040940.m249e7DC012517@news01.csr.com>
	<20080305002721.GF15833@prunille.vinc17.org>
	<200803051041.m25AfmUc031042@news01.csr.com>
	<20080306013950.GN15833@prunille.vinc17.org>
Organization: CSR
X-Mailer: Claws Mail 3.3.1 (GTK+ 2.12.5; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 06 Mar 2008 09:46:55.0026 (UTC) FILETIME=[031B0920:01C87F6F]
X-Scanned-By: MailControl A-08-00-04 (www.mailcontrol.com) on 10.68.0.157
X-Virus-Scanned: ClamAV 0.91.2/6147/Thu Mar  6 10:10:48 2008 on bifrost
X-Virus-Status: Clean

On Thu, 6 Mar 2008 02:39:50 +0100
Vincent Lefevre <vincent@vinc17.org> wrote:
> On 2008-03-05 10:41:48 +0000, Peter Stephenson wrote:
> > In particular, "emulate sh" is the nearest we have to bash emulation
> > and bash users are likely to expect multibyte characters to work
> > naturally.
> 
> I don't know what you mean by "naturally", but zsh currently behaves
> differently from bash in sh emulation:

MULTIBYTE has lots of different effects.  The point is we either decide to
turn it on or off; I don't see any point in a special option for this one
very minor case.  zsh is never going to be completely compatible with every
advanced feature of bash, anyway.  So MULTIBYTE almost certainly needs to
be on in that case, but off for POSIX emulation.

> Perhaps it should have the same differences as bash with and without
> POSIX mode.

I think tracking every possible difference in "sh" and "bash" emulations,
even if they were made separate, would be going way too far.  However, if
we had several dozen more people working on the shell, one of them might
have time to look at it.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


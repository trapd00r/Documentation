From zsh-users-return-15038-mason-zsh=primenet.com.au@zsh.org Sat May 01 20:28:14 2010
Return-Path: <zsh-users-return-15038-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6382 invoked by alias); 1 May 2010 20:28:14 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15038
Received: (qmail 18894 invoked from network); 1 May 2010 20:28:02 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at brasslantern.com does not designate permitted sender hosts)
MIME-Version: 1.0
In-Reply-To: <n2jd663d1bd1005010619l8468362al946bcda107870f95@mail.gmail.com>
References: <n2jd663d1bd1005010619l8468362al946bcda107870f95@mail.gmail.com>
Date: Sat, 1 May 2010 13:27:58 -0700
Message-ID: <t2z691a5d911005011327ud5958ddld67950ad59baf1cf@mail.gmail.com>
Subject: Re: Context-aware file name completion with preferences
From: Bart Schaefer <schaefer@brasslantern.com>
To: Mikael Puhakka <mr.progo@gmail.com>
Cc: zsh-users@zsh.org
Content-Type: text/plain; charset=ISO-8859-1

On Sat, May 1, 2010 at 6:19 AM, Mikael Puhakka <mr.progo@gmail.com> wrote:
>
> Doc1.tex
> Doc1.aux
> Doc1.dvi
> Doc1.log
> ...
>
> Of these files, I'd edit the .tex file most often: I would like zsh to
> prefer .tex files to anything else from these files. They still should
> appear in the completion cycle, but not first.

Assuming you've enabled the shell function completion system with
"compinit", you want to add some zstyle commands to your startup
files.

In particular, you're looking for the group-name, group-order, and
tag-order styles.  You use group-name to organize sets of matches,
group-order to determine the display order of those sets, and
tag-order to determine whether particular sets are offered (or not).

Well, actually most often you set group-name to the empty string and
allow zsh to name the groups for you.

zstyle ':completion:*' group-name ''

in the particular case of file completion you can use the
file-patterns style to organize sets of file names.  A common setting
is something like this:

zstyle ':completion:*' file-patterns '%p:globbed-files
*(-/):directories' '*:all-files'

This means to offer globbed files and directories in the first set of
completions, and everything else if there are no globbed files or
directories among the possible matches.  (A globbed-file is just one
whose name can be generated from a wildcard pattern that you may have
typed on the command line.)

You can extend this:

zstyle ':completion:*' file-patterns '*.(c|cpp|java|tex|txt):editable-files' \
     '%p:globbed-files *(-/):directories' '*:all-files'

Note placement of quotes and spaces; a space inside a quoted string
separates groups that are displayed together, while a space between
quoted strings separates groups that are displayed sequentially, e.g.
you'll get editable files if there are any, then globbed files or
directories, and finally anything.

It's been a long time since I plugged this, but if you really want to
learn about this in detail you should pick up a copy of "From Bash to
Z Shell: Conquering the Command Line" from www.apress.com.


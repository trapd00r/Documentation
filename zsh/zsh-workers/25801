From zsh-workers-return-25801-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 02 15:37:46 2008
Return-Path: <zsh-workers-return-25801-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28238 invoked from network); 2 Oct 2008 15:37:44 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 2 Oct 2008 15:37:44 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 51125 invoked from network); 2 Oct 2008 15:37:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Oct 2008 15:37:07 -0000
Received: (qmail 24338 invoked by alias); 2 Oct 2008 15:36:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25801
Received: (qmail 24307 invoked from network); 2 Oct 2008 15:36:39 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 2 Oct 2008 15:36:39 -0000
Received: from vms172073pub.verizon.net (vms172073pub.verizon.net [206.46.172.73])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 44C9F80308BA
	for <zsh-workers@sunsite.dk>; Thu,  2 Oct 2008 17:36:31 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.215])
 by vms172073.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K8400L4RBCPCNH0@vms172073.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 02 Oct 2008 10:36:26 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m92FaODe014303	for
 <zsh-workers@sunsite.dk>; Thu, 02 Oct 2008 08:36:25 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m92FaOcw014302	for zsh-workers@sunsite.dk; Thu,
 02 Oct 2008 08:36:24 -0700
Date: Thu, 02 Oct 2008 08:36:23 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Pasting of long lines to ZLE is buggy under Mac OS X
In-reply-to: <20081002081758.GA5772@sc.homeunix.net>
To: zsh-workers@sunsite.dk
Message-id: <081002083624.ZM14301@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20081002065525.GR24822@prunille.vinc17.org>
	<20081002081758.GA5772@sc.homeunix.net>
Comments: In reply to Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
 "Re: Pasting of long lines to ZLE is buggy under Mac OS X" (Oct  2,  9:17am)
X-Virus-Scanned: ClamAV 0.92.1/8371/Thu Oct  2 12:15:33 2008 on bifrost
X-Virus-Status: Clean

On Oct 2,  9:17am, Stephane Chazelas wrote:
}
} Here (4.3.6-dev-0+0925), it seems zsh reads one character at a time, and for
} every character, surprisingly, it does:

[ a bunch of signal handling stuff and a dup of stdin ]

} It doesn't do that on another machine with 4.3.6-dev-0+0925

Check whether $BAUD has a value on the first machine but not on the
second.  If it's nonzero then zsh attempts to compensate for an
expected slow terminal by using poll() or select() which might
account for extra activity (though I'd expect those to show up
directly as system calls).

Also remember that every keystroke executes a zle widget.  Normally
that's self-insert that doesn't do anything special, but it could be
overridden with a user-defined widget that does other things.  For
example, if you're running the predictive typing widget on one of
those machines, every keystroke calls the completion system.


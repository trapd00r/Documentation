From zsh-workers-return-21373-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 22 14:09:25 2005
Return-Path: <zsh-workers-return-21373-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29009 invoked from network); 22 Jun 2005 14:09:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Jun 2005 14:09:23 -0000
Received: (qmail 5255 invoked from network); 22 Jun 2005 14:09:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Jun 2005 14:09:15 -0000
Received: (qmail 2185 invoked by alias); 22 Jun 2005 14:09:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21373
Received: (qmail 2105 invoked from network); 22 Jun 2005 14:07:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Jun 2005 14:07:31 -0000
Received: (qmail 4552 invoked from network); 22 Jun 2005 14:07:31 -0000
Received: from caly80.spider.com (HELO bifrost.spider.com) (194.217.109.12)
  by a.mx.sunsite.dk with SMTP; 22 Jun 2005 14:07:27 -0000
Received: from no.name.available by bifrost.spider.com
          via smtpd (for [130.225.247.86]) with SMTP; 22 Jun 2005 14:07:27 UT
Received: from heimdall-dmz.spider.com (mailhub.spider.com [212.240.99.13])
	by caly80.spider.com (Postfix) with SMTP id 7BB8E6F88
	for <zsh-workers@sunsite.dk>; Wed, 22 Jun 2005 15:07:22 +0100 (BST)
Received: from mailhub.spider.com by heimdall-dmz.spider.com
          via smtpd (for [172.16.254.22]) with SMTP; 22 Jun 2005 14:07:22 UT
Received: from localhost (duey.spider.com [212.240.99.128]) by batistuta.spider.com with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id MMVZCKV2; Wed, 22 Jun 2005 15:03:33 +0100
Date: Wed, 22 Jun 2005 15:07:21 +0100
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: new shells completion type
Message-ID: <20050622140721.GB20412@artesyncp.com>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20050622131158.GB4591@localhost.localdomain>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20050622131158.GB4591@localhost.localdomain>
User-Agent: Mutt/1.5.7i
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

On Wed, Jun 22, 2005 at 11:11:58PM +1000, Doug Kearns wrote:
> Here is a new completion type for shells. It seems to me that if we're
> going to complete shells from /etc/shells then it should be restricted
> _only_ to shells listed there. This will change the behaviour of useradd
> completion which always included /bin/false.
> 
> Any objections?

Hi.

One sometimes wants to set a command that is not in /etc/shells
as the login shell on purpose (like /bin/false) to disable FTP
access. That could be "nologin", a script, whatever...


> diff -u -r1.10 _screen
> --- Completion/Unix/Command/_screen	11 Jun 2005 12:28:17 -0000	1.10
> +++ Completion/Unix/Command/_screen	22 Jun 2005 12:36:08 -0000
> @@ -76,7 +76,7 @@
>    '-q[quiet startup, exit with non-zero return code if unsuccessful]' \
>    '-r[reattach to a detached screen process]: :->detached-sessions' \
>    '-R[reattach if possible, otherwise start a new session]: :->detached-sessions' \
> -  '-s[shell to execute rather than $SHELL]:shell name: _command_names -e' \
> +  '-s[shell to execute rather than $SHELL]:shell:_shells' \

As far as screen is concerned, that doesn't need to be a shell,
one might prefer to use "mc" or "elinks" or "emacs" for instance.

[...]
> +else
> +  shells=( ${(M)commands:#*/((|[abckz]|tc|ba)sh|false)} )
> +fi

What about dash (debian ash), rc, es...

regards,
Stephane


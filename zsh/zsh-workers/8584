From zsh-workers-return-8584-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Nov 07 07:07:32 1999
Return-Path: <zsh-workers-return-8584-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4480 invoked from network); 7 Nov 1999 07:07:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Nov 1999 07:07:31 -0000
Received: (qmail 17136 invoked by alias); 7 Nov 1999 07:07:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8584
Received: (qmail 17129 invoked from network); 7 Nov 1999 07:07:20 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991107070654.ZM4554@candle.brasslantern.com>
Date: Sun, 7 Nov 1999 07:06:54 +0000
In-Reply-To: <19991105122341.A29632@dman.com>
Comments: In reply to Clint Adams <schizo@debian.org>
        "MAXJOB" (Nov  5, 12:23pm)
References: <19991105122341.A29632@dman.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: MAXJOB
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 5, 12:23pm, Clint Adams wrote:
} Subject: MAXJOB
}
} What was the reasoning behind hardcoding MAXJOB to 50?

It's a fixed number so that the job table can be statically declared
rather than dynamically allocated.  I've forgotten (or never knew) why
the value 50 was chosen, or whether there's a still-valid reason to
avoid dynamic allocation of the job table.

} Furthermore, why does MAXJOB 50 result in a maximum
} job table size of 48?

The last job table slot is reserved for tracking builtin commands, so
that the whole shell doesn't become unusable when you fill up the rest
of the table with external processes.  It's nice to be able to kill
those runaway background jobs, is it not?

jobtab[0] is also reserved, but it may be for no better reason than to
avoid having to map 1-based user-visible job-numbers to 0-based table
locations.  I don't immediately recall anything else that's being done
with it.

In fact, it may be that 50 was chosen so that the number of job table
entries would *appear* to be a multiple of 8.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


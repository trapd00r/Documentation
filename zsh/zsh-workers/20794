From zsh-workers-return-20794-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 07 12:19:52 2005
Return-Path: <zsh-workers-return-20794-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24480 invoked from network); 7 Feb 2005 12:19:51 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Feb 2005 12:19:51 -0000
Received: (qmail 25356 invoked from network); 7 Feb 2005 12:19:45 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Feb 2005 12:19:45 -0000
Received: (qmail 11993 invoked by alias); 7 Feb 2005 11:59:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20794
Received: (qmail 11976 invoked from network); 7 Feb 2005 11:59:11 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Feb 2005 11:59:11 -0000
Received: (qmail 84354 invoked from network); 7 Feb 2005 11:58:35 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 7 Feb 2005 11:58:30 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6ef916cfa80a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Mon, 7 Feb 2005 11:57:04 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 7 Feb 2005 11:58:44 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j17BwUdO011441
	for <zsh-workers@sunsite.dk>; Mon, 7 Feb 2005 11:58:30 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j17BwToE011438
	for <zsh-workers@sunsite.dk>; Mon, 7 Feb 2005 11:58:30 GMT
Message-Id: <200502071158.j17BwToE011438@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: Compile warnings with latest CVS 
In-reply-to: <1050206175046.ZM1012@candle.brasslantern.com> 
References: <1050206175046.ZM1012@candle.brasslantern.com>
Date: Mon, 07 Feb 2005 11:58:29 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 07 Feb 2005 11:58:44.0897 (UTC) FILETIME=[5FDC5110:01C50D0C]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.5

Bart Schaefer wrote:
> ("zsh-4.0" happens to be the name of my CVS sandbox, but I'm compiling the
> latest 4.2.3-dev-1 [should that be renamed zsh-4.2.4-dev-1 now?].)

I've renamed it 4.3.0-dev-1, since the main branch is probably heading
towards 4.3.1.

> ../../zsh-4.0/Src/init.c:1179: warning: `autoload_zlesetkeymap' defined but n
> ot used

I suppose the patch below fixes this.  I haven't thoroughly checked
whether the functions linked in and the presence or absence of "static"
are sane, however.

> ../../zsh-4.0/Src/utils.c:3450: warning: no previous prototype for `ucs4toutf
> 8'
> ../../zsh-4.0/Src/utils.c: In function `ucs4toutf8':

That doesn't seem to be prototyped anywhere that I can see.

> ../../zsh-4.0/Src/utils.c:3656: warning: passing arg 2 of `iconv' from incomp
> atible pointer type

"char **" must be close to the target area; possibly there is a const or
so missing.  Using const with doubly indirected pointers can get pretty
horrific; I'm not sure we can necessarily do much here, if that is the
problem.

> In file included from ../../../zsh-4.0/Src/Modules/terminfo.c:53:
> /usr/include/curses.h:195: warning: `ERR' redefined
> /usr/include/sys/ucontext.h:74: warning: this is the location of the previous
>  definition

This may be out of our control, too.

Index: Config/version.mk
===================================================================
RCS file: /cvsroot/zsh/zsh/Config/version.mk,v
retrieving revision 1.51
diff -u -r1.51 version.mk
--- Config/version.mk	22 Jan 2005 03:46:43 -0000	1.51
+++ Config/version.mk	7 Feb 2005 11:51:38 -0000
@@ -27,5 +27,5 @@
 # This must also serve as a shell script, so do not add spaces around the
 # `=' signs.
 
-VERSION=4.2.3-dev-1
-VERSION_DATE='January 14, 2005'
+VERSION=4.3.0-dev-1
+VERSION_DATE='February 7, 2005'
Index: Src/init.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/init.c,v
retrieving revision 1.46
diff -u -r1.46 init.c
--- Src/init.c	14 Jan 2005 13:05:21 -0000	1.46
+++ Src/init.c	7 Feb 2005 11:51:39 -0000
@@ -1173,6 +1173,8 @@
     return (unsigned char *)shingetline();
 }
 
+#ifdef UNLINKED_XMOD_zshQszle
+
 /**/
 static void
 autoload_zlesetkeymap(int mode)
@@ -1182,6 +1184,7 @@
     (*zlesetkeymapptr)(mode);
 }
 
+#endif
 
 /* compctl entry point pointers.  Similar to the ZLE ones. */
 

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


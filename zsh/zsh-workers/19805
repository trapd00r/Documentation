From zsh-workers-return-19805-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 21 01:05:19 2004
Return-Path: <zsh-workers-return-19805-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14153 invoked from network); 21 Apr 2004 01:05:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 21 Apr 2004 01:05:18 -0000
Received: (qmail 15374 invoked by alias); 21 Apr 2004 01:05:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19805
Received: (qmail 15364 invoked from network); 21 Apr 2004 01:05:12 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 21 Apr 2004 01:05:12 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 21 Apr 2004 1:5:12 -0000
Received: (qmail 1961 invoked from network); 21 Apr 2004 01:05:12 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 21 Apr 2004 01:05:10 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id BBF117004B; Tue, 20 Apr 2004 21:04:42 -0400 (EDT)
Date: Tue, 20 Apr 2004 21:04:42 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: [matthias@kopfermann.org: Re: pcre-module]
Message-ID: <20040421010442.GA13744@scowler.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.5.1+cvs20040105i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

----- Forwarded message from Matthias Kopfermann <matthias@kopfermann.org> -----

Date: Tue, 20 Apr 2004 23:16:05 +0200
From: Matthias Kopfermann <matthias@kopfermann.org>
To: Clint Adams <schizo@debian.org>
Subject: Re: pcre-module

On Tue, Apr 20, 2004 at 02:32:57PM -0400, You wrote:
> > 
> > if i see correctly that is possible with the 4.2 version? (correct?)
> > and - if that is possible - is it documented?
> 
> It's currently possible to do this:
> 
> if [[ value -pcre-match pattern ]]; then

Thx for telling me. I hope to see that one in the manual soon :)

> 
> Any perlre backreferences in the pattern will go into the $match array.
> I thought I had written documentation for it, but perhaps I was
> hallucinating.

This one is in the manual. the one with "-pcre-match" does _not_
match in the manual :)


Or it was described in such a way that I did not see it, thx for
telling me again.

-------------------------------------------------------------------
As Bart is busy (I told him), there is a _serious_ - I guess so, but I am
not quite sure- bug in zsh that I found out today:

Its with the prompt variable %v.
I tried `print -P %-10v' and i got a segfault on all 4.x
versions, perhaps with 3.1.9, too ?  whether debian or not ,it
always crashes even without any .zshrc in the debian-stable whereever.
in #zsh i had the same reaction told, too.
.

My gdb on linux/intel tells me with the core-dump:

(gdb) bt
#0  0x080bbbb4 in niceztrlen (s=0x0) at utils.c:3011
#1  0x080aac89 in stradd (d=0x0) at prompt.c:728
#2  0x080aa771 in putpromptchar (doprint=1, endchar=0) at prompt.c:583
#3  0x080a9450 in promptexpand (s=0x400185b0 "%-20v", ns=0, rs=0x0, Rs=0x0)
    at prompt.c:181
#4  0x0805bd32 in bin_print (name=0x40018580 "print", args=0xbffff324,
    ops=0xbffff360, func=13) at builtin.c:3238
#5  0x08052f85 in execbuiltin (args=0x40018550, bn=0x80cd710) at builtin.c:440
#6  0x08068d46 in execcmd (state=0xbffff6f0, input=0, output=0, how=18,
    last1=2) at exec.c:2414
#7  0x080657dc in execpline2 (state=0xbffff6f0, pcode=131, how=18, input=0,
    output=0, last1=0) at exec.c:1276
#8  0x08064d30 in execpline (state=0xbffff6f0, slcode=5122, how=18, last1=0)
    at exec.c:1066
#9  0x080646a3 in execlist (state=0xbffff6f0, dont_change_job=0, exiting=0)
    at exec.c:872
#10 0x080643cd in execode (p=0x400184f0, dont_change_job=0, exiting=0)
    at exec.c:773
#11 0x0807a636 in loop (toplevel=1, justonce=0) at init.c:165
#12 0x0807cdf4 in zsh_main (argc=1, argv=0xbffff7e4) at init.c:1274
#13 0x080525ee in main (argc=1, argv=0xbffff7e4) at main.c:93

Please pass it to the developerslist.
I will subscribe there soon. I find too many things to only pass that on :)


        Matthias

----- End forwarded message -----


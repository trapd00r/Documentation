From zsh-workers-return-25066-mason-zsh=primenet.com.au@sunsite.dk Sun May 18 17:19:12 2008
Return-Path: <zsh-workers-return-25066-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22738 invoked from network); 18 May 2008 17:19:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 May 2008 17:19:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 93411 invoked from network); 18 May 2008 17:18:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 May 2008 17:18:54 -0000
Received: (qmail 5483 invoked by alias); 18 May 2008 17:18:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25066
Received: (qmail 5459 invoked from network); 18 May 2008 17:18:51 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 May 2008 17:18:51 -0000
Received: from mtaout01-winn.ispmail.ntl.com (mtaout01-winn.ispmail.ntl.com [81.103.221.47])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 900648059114
	for <zsh-workers@sunsite.dk>; Sun, 18 May 2008 19:18:47 +0200 (CEST)
Received: from aamtaout03-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout01-winn.ispmail.ntl.com with ESMTP
          id <20080518172230.EYMU14647.mtaout01-winn.ispmail.ntl.com@aamtaout03-winn.ispmail.ntl.com>;
          Sun, 18 May 2008 18:22:30 +0100
Received: from pws-pc ([81.107.40.67]) by aamtaout03-winn.ispmail.ntl.com
          with ESMTP
          id <20080518172656.ISKJ26699.aamtaout03-winn.ispmail.ntl.com@pws-pc>;
          Sun, 18 May 2008 18:26:56 +0100
Date: Sun, 18 May 2008 18:17:35 +0100
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: "martin f. krafft" <madduck@debian.org>, zsh-workers@sunsite.dk
Subject: Re: [PATCH] typeset reply array
Message-ID: <20080518181735.1191bd8a@pws-pc>
In-Reply-To: <20080518053301.GA8521@scru.org>
References: <1211026277-27464-1-git-send-email-madduck@debian.org>
	<1211026277-27464-2-git-send-email-madduck@debian.org>
	<1211025324-25630-1-git-send-email-madduck@debian.org>
	<20080518053301.GA8521@scru.org>
X-Mailer: Claws Mail 3.3.1 (GTK+ 2.12.9; x86_64-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.91.2/7149/Sun May 18 16:40:15 2008 on bifrost
X-Virus-Status: Clean

On Sun, 18 May 2008 05:33:01 +0000
Clint Adams <schizo@debian.org> wrote:
> I think that some of these will break things. For example, if you keep 
> _comp_dumpfile local to compinit, when/if compinit calls compdump,
> problems might ensue.

Commonly used but non-global parameters such as "reply" could, and
probably should, be made local to the top-level of completion at around
the point where the options get set.  This would save them appearing in
the user's own space, which was the whole point of warncreateglobal in
the first place.

I don't think any special *internal* handling is warranted for
parameters that aren't themselves special to the shell.

A "typeset -g" for variables that *should* be global makes perfect
sense.  The "-g" should definitely be present even if the code isn't
inside a function (although the compinit stuff is), since we shouldn't
make that assumption.

> I don't know why we can't call compdump with an argument though.

I can't see why we shouldn't either.  I have a vague memory of wondering
that before.

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


From zsh-workers-request@euclid.skiles.gatech.edu Mon Dec 16 10:14:11 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 379 invoked from network); 16 Dec 1996 10:14:09 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 16 Dec 1996 10:14:09 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id FAA27504; Mon, 16 Dec 1996 05:00:33 -0500 (EST)
Resent-Date: Mon, 16 Dec 1996 05:00:33 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <25654.199612161001@stone.dcs.warwick.ac.uk>
Subject: Makefile tweaks
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Mon, 16 Dec 1996 10:01:09 +0000 (GMT)
X-Patch: 143
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8582.08
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"Lbbb7.0.hj6.1tHjo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2589
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

A couple of simple Makefile fixes:

* There are now two rules that output some sort of warning message if the
  main command fails.  This patch changes them both to hide the message
  if it is not needed, and to display the actual command being executed
  (to make things look normal).

* rlimits.h should depend on rlimits.awk.

 -zefram

      Index: Doc/Makefile.in
      ===================================================================
      RCS file: /home/zefram/usr/cvsroot/zsh/Doc/Makefile.in,v
      retrieving revision 1.2
      diff -c -r1.2 Makefile.in
      *** Doc/Makefile.in	1996/11/23 01:18:49	1.2
      --- Doc/Makefile.in	1996/12/16 07:55:46
      ***************
      *** 102,110 ****
        everything: all zsh_us.ps zsh_a4.ps zsh_toc.html
        
        zsh.info: zsh.texi
        	$(MAKEINFO) -I$(srcdir) $(srcdir)/zsh.texi || { \
      ! 	echo Info documentation cannot be compiled without $(MAKEINFO). ; \
      ! 	echo You can find precompiled info files in zsh-doc.tar.gz. ; }
        
        zsh.dvi: zsh.texi
        	$(TEXI2DVI) $(srcdir)/zsh.texi
      --- 102,112 ----
        everything: all zsh_us.ps zsh_a4.ps zsh_toc.html
        
        zsh.info: zsh.texi
      + 	@echo '$(MAKEINFO) -I$(srcdir) $(srcdir)/zsh.texi'; \
        	$(MAKEINFO) -I$(srcdir) $(srcdir)/zsh.texi || { \
      ! 	    echo Info documentation cannot be compiled without $(MAKEINFO). ; \
      ! 	    echo You can find precompiled info files in zsh-doc.tar.gz. ; \
      ! 	}
        
        zsh.dvi: zsh.texi
        	$(TEXI2DVI) $(srcdir)/zsh.texi
      Index: Src/Makefile.in
      ===================================================================
      RCS file: /home/zefram/usr/cvsroot/zsh/Src/Makefile.in,v
      retrieving revision 1.12
      diff -c -r1.12 Makefile.in
      *** Src/Makefile.in	1996/12/16 06:13:58	1.12
      --- Src/Makefile.in	1996/12/16 07:54:42
      ***************
      *** 215,224 ****
        
        # this file will not be made if limits are unavailable:
        # silent so the warning doesn't appear unless necessary
      ! rlimits.h : $(RLIMITS_INC_H)
      ! 	@echo Generating rlimits.h...
      ! 	@$(AWK) -f $(srcdir)/rlimits.awk $(RLIMITS_INC_H) > rlimits.h || \
      ! 	echo WARNING: unknown limits:  mail rlimits.h to developers
        
        $(OBJS): $(HDRS)
        
      --- 215,224 ----
        
        # this file will not be made if limits are unavailable:
        # silent so the warning doesn't appear unless necessary
      ! rlimits.h: rlimits.awk $(RLIMITS_INC_H)
      ! 	@echo '$(AWK) -f $(srcdir)/rlimits.awk $(RLIMITS_INC_H) > rlimits.h'; \
      ! 	$(AWK) -f $(srcdir)/rlimits.awk $(RLIMITS_INC_H) > rlimits.h || \
      ! 	    echo WARNING: unknown limits:  mail rlimits.h to developers
        
        $(OBJS): $(HDRS)
        

-----BEGIN PGP SIGNATURE-----
Version: 2.6.2

iQCVAwUBMrUCIXD/+HJTpU/hAQH81QQAoGw/HoZjqvJ9siWlTmp6i0TGh3sbx1bz
15lmsijYlY6HUut9IsGehOJeKn8d3otzC/zd7bo5gbeZIQLgLjOsrsWFekXudMgC
X787shEnsOHwrgSY47hSk4PGcpSvpJ0f95Q7D9Hsz/gWxiBUnGQAWKUxHN/XKmpk
R7E4rTwvGu0=
=Lywd
-----END PGP SIGNATURE-----


From zsh-workers-return-13987-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 14 03:22:28 2001
Return-Path: <zsh-workers-return-13987-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27552 invoked from network); 14 Apr 2001 03:22:27 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Apr 2001 03:22:27 -0000
Received: (qmail 13439 invoked by alias); 14 Apr 2001 03:22:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13987
Received: (qmail 13421 invoked from network); 14 Apr 2001 03:22:26 -0000
Date: Fri, 13 Apr 2001 23:22:09 -0400
From: Clint Adams <schizo@debian.org>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: PATCH: termcap special param
Message-ID: <20010413232209.A8290@dman.com>
References: <20010413194255.A31289@dman.com> <1010414014118.ZM2313@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <1010414014118.ZM2313@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Sat, Apr 14, 2001 at 01:41:18AM +0000

> There's no mention of NCURSES_VERSION anywhere in this patch ... what
> check do you mean?

I'm referring to the #if !defined(NCURSES_VERSION) || !defined(COLOR_PAIR)
stuff in bin_echotc, which is theoretically relevant for all calls to
tgetflag().

ncurses 4.2's tgetflag() will return ERR (-1) if called with an argument
not found in boolcodes.  ncurses 5.2's tgetflag() will return 0, a la
Solaris.

We could find out the relevant ncurses versions and qualify the
preprocessor directives, or we could determine what sort of
tgetflag() is present by a configure test, which I guess could
be as simple as testing the return value of tgetflag() when
called with a termcap code guaranteed not to be in boolcodes.
For example, 'co' is quite unlikely to be a boolean flag.


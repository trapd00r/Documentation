From zsh-workers-return-28572-mason-zsh=primenet.com.au@zsh.org Thu Jan 06 00:38:39 2011
Return-Path: <zsh-workers-return-28572-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15858 invoked by alias); 6 Jan 2011 00:38:39 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28572
Received: (qmail 6433 invoked from network); 6 Jan 2011 00:38:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at altlinux.org does not designate permitted sender hosts)
Date: Thu, 6 Jan 2011 03:30:14 +0300
From: "Alexey I. Froloff" <raorn@altlinux.org>
To: zsh-workers@zsh.org
Subject: Re: [PATCH] Completion/Unix/Commands/_ri: updated for Ruby 1.9.2
Message-ID: <20110106003014.GA11154@altlinux.org>
References: <1293748882-3197-1-git-send-email-raorn@altlinux.org>
 <20110104113222.GA7499@altlinux.org>
 <alpine.LNX.2.01.1101051618090.2792@hp>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="qMm9M+Fa2AknHoGS"
Content-Disposition: inline
In-Reply-To: <alpine.LNX.2.01.1101051618090.2792@hp>
User-Agent: Mutt/1.5.21 (2010-09-15)

--qMm9M+Fa2AknHoGS
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Wed, Jan 05, 2011 at 04:27:35PM -0500, Benjamin R. Haskell wrote:
> Maybe it makes sense, but it seems weird that the tests are conditioned=
=20
> on running Ruby scripts rather than looking at `ri --version`.
ri --version reports something weird.  I don't know since when
things were changed, checking for modules that have been removed
or added seems to be fair enough.

Are you thinking there's too much (and too direct) ruby
invocations?

> And how does this fare against different Ruby implementations?  Would=20
> JRuby 1.9.2 necessarily use the same 'ri' conventions as MRI Ruby 1.9.2?
Yes.  Latest JRuby supports both 1.8 and 1.9 Ruby versions and
have copies of standard runtime libraries (both versions) which
includes RI.

> And more generally, since it's looking in directories that would only=20
> contain Ruby documentation, would it hurt to include both .yaml and .ri=
=20
> for versions that support .ri?
I thought about it, yes.  Newer RI doesn't read .yaml
documentation.  It wouldn't hurt, but it would complete something
that can't be shown.


This patch will un-break ri completion for latest stable MRI Ruby
version.  I wrote this completion and I am responsible for that.
However, I am not satisfied with current implementation, I'm
working on it.

--=20
Regards,    --
Sir Raorn.   --- http://thousandsofhate.blogspot.com/

--qMm9M+Fa2AknHoGS
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.10 (GNU/Linux)

iQIcBAEBAgAGBQJNJQ0QAAoJEErPkC6vOrpJm98P/13E5L99FmfWZFQCycGu+NDB
KU27IDKasxtUcXw0hI1E8fMeMfM8huLyYLHcC5W4NAPLSEEBsFyrp9jRg6tM1z/K
u2Lbg4OrVPS1rvovaa3Qa36oQvLxg1cdihCo/+fo41XPUx1dnnpvomcC9eTsiUo9
+BHo+/B3tnhDEK7NtjpDY2ZqK44qAJg9TsDdvnlq7PkKx5SWhjG/agJbhpQqrm98
nendj4BFUcc86i3iS59BH//oK/nrTmAsFidu4Pt1RVX295Ts3CmNuiI85PPNpJY6
ulca+FwjDtqwYWwxYvysLsgzb0vQf/qaN+1NKghnUaXWxqt/u7bNxszr3XRWIGKb
zH7u03yWSejYkYz/QiXsLCn+UA3TFWmKej6nWLXrYWmJVMnYBwHWCh+itPEKM1H9
Rnm3yK4jXlheQeiviIcnJZwErvzC54oAla1MSzensBVhVkChKsPbTaapz8xL1+of
gCWSEivfkyZ4bGpgE7fUFbAa2hKC/h2c0Zecb50IPxzBLL1VgKEcqgdy0bFdDb/o
eOi5g6s0cx9sQc8DsqsA+c78dhpyYq1FtnOSHm7FWXdCArCIgsbnWgpz6m3bjKf0
xKiajJx5cJEAnHRvg6e+Hglwoz0LDsZPdh1ZVgTS9rin3/1EAUq4uay5f5dtGaBZ
e0ECip1ZZPB67wf0bKT7
=j2Ta
-----END PGP SIGNATURE-----

--qMm9M+Fa2AknHoGS--


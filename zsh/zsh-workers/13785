From zsh-workers-return-13785-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 27 09:22:41 2001
Return-Path: <zsh-workers-return-13785-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18121 invoked from network); 27 Mar 2001 09:22:40 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Mar 2001 09:22:40 -0000
Received: (qmail 15137 invoked by alias); 27 Mar 2001 09:22:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13785
Received: (qmail 15124 invoked from network); 27 Mar 2001 09:22:26 -0000
Message-ID: <20010327092226.43536.qmail@web9304.mail.yahoo.com>
Date: Tue, 27 Mar 2001 10:22:26 +0100 (BST)
From: =?iso-8859-1?q?Oliver=20Kiddle?= <okiddle@yahoo.co.uk>
Subject: prefix-needed style in _popd
To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I just noticed that the completion of directory stacks (in _popd but
used also for cd and pushd) doesn't work properly when the
prefix-needed style is set to false. What it does is check the style
and skip the return which normally relies on PREFIX matching [-+]*.
What it doesn't do is complete the initial - or + because those are
normally included in the added matches with ${PREFIX[1]} so we get just
the numbers added as matches.

In this case we could either complete each directory stack entry twice,
preceded by each of - and +, complete only one of those (possibly
selected with a style) or remove support for prefix-needed in _popd. I
basically favour the latter but then I've always had prefix-needed set
true so don't care much. Does anyone else have any opinions or ideas on
this?

Oliver

____________________________________________________________
Do You Yahoo!?
Get your free @yahoo.co.uk address at http://mail.yahoo.co.uk
or your free @yahoo.ie address at http://mail.yahoo.ie


From zsh-workers-request@euclid.skiles.gatech.edu  Fri Aug  2 23:07:24 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id XAA00402 for <mason@primenet.com.au>; Fri, 2 Aug 1996 23:07:21 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA21488; Fri, 2 Aug 1996 08:54:46 -0400 (EDT)
Resent-Date: Fri, 2 Aug 1996 08:54:46 -0400 (EDT)
From: Louis.Granboulan@ens.fr (Louis Granboulan)
Message-Id: <199608021253.OAA13246@agaric.ens.fr>
Subject: zsh-3.0-pre5 on Alliant Concentrix 2800
To: zsh-workers@math.gatech.edu
Date: Fri, 2 Aug 1996 14:53:38 +0200 (MET DST)
X-Mailer: ELM [version 2.4 PL24 ME8a]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"ZVZP42.0.gF5.LgV0o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1889
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I built zsh-3.0-pre5 on an architecture not listed in Etc/MACHINES.

The machine is an   Alliant Concentrix 2800 3.0.00  known by configure
as   i860-alliant-bsd   .

I have gcc version 2.1
I did `./configure' and then `make'. It didn't work immediatly.
Here is what I did to make it work.

signals.c:465: `WNOHANG' and `WUNTRACED' undeclared
	Diagnostic:
	  HAVE_SYS_WAIT_H was undefined by ./configure, since sys/wait.h
	  is not POSIX.1 compatible.
	  But it is POSIX.1 compatible when _POSIX_SOURCE is defined.
	Solution:
	  This patch:
		*** configure.orig Sat Jul 20 19:07:14 1996
		--- configure   Fri Aug  2 14:43:19 1996
		***************
		*** 1672,1673 ****
		--- 1672,1674 ----
		  #include "confdefs.h"
		+ #define _POSIX_SOURCE
		  #include <sys/types.h>
		*** Src/system.h.orig      Mon Jul  1 20:20:44 1996
		--- Src/system.h        Fri Aug  2 14:50:08 1996
		***************
		*** 180,182 ****
		--- 180,184 ----
		  #ifdef HAVE_SYS_WAIT_H
		+ # define _POSIX_SOURCE
		  # include <sys/wait.h>
		+ # undef _POSIX_SOURCE
		  #else
	Diagnostic:
	  waitpid does not work
	Solution:
	  #undef HAVE_WAITPID /* in config.h */
zle_main.c:109: `ONLCR' undeclared
	Diagnostic:
	  Not defined in sys/termios.h (probably POSIX compliance)
	Solution:
	  #define ONLCR 0x00000004 /* in zle_main.c */
ld:  undefined symbols: __strlen __strcpy __strncpy
	Diagnostic:
	  Might be a bug in the libc of gcc
	Solution:
	  Compiling and linking this file : strings.c
		int _strlen(s) char *s;
		  {return strlen(s);}
		char *_strcpy(s1,s2) char *s1,*s2;
		  {return strcpy(s1,s2); }
		char *_strncpy(s1,s2,n) char *s1,*s2; int n;
		  {return strncpy(s1,s2,n);}


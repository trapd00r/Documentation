From zsh-workers-return-17424-mason-zsh=primenet.com.au@sunsite.dk Fri Jul 05 06:20:56 2002
Return-Path: <zsh-workers-return-17424-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10886 invoked from network); 5 Jul 2002 06:20:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 5 Jul 2002 06:20:55 -0000
Received: (qmail 7182 invoked by alias); 5 Jul 2002 06:20:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17424
Received: (qmail 7170 invoked from network); 5 Jul 2002 06:20:43 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Greg Price'" <Greg.Price@Sun.COM>, zsh-workers@sunsite.dk
Subject: RE: 64bit Zsh for Solaris?
Date: Fri, 5 Jul 2002 10:20:34 +0400
Message-ID: <6134254DE87BD411908B00A0C99B044F03A0B332@mowd019a.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.3416
In-Reply-To: <20020705112635.A19854@Aus.Sun.COM>
x-mimeole: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal

> 
> I'm looking at using zsh for creating a tool by using the loadable
module
> facility - it looks great.
> 
> My problem is that I need a 64 bit version (i.e. compiled to produce a
64
> bit binary) for Solaris. I've tried both the Sun compiler (which I
would
> prefer to use) and the GNU C compiler; zsh compiles fine, but it fails
a
> number of the tests in the test suite.
> 
> The code model we use on Solaris is LP64 (i.e. longs and pointers
become
> 64
> bit)
> 
> The reason I need a 64 bit version is so I can mmap() huge files (i.e.
in
> the order of > 4 GB)
> 

You do not need LP64 model to manage large files. Zsh should already
detect LFS support and configure itself accordingly. See --enable-lfs
flag to configure. This of course assumes that your version of Solaris
does support LFS.

> Do you know of anyone that has covered this area before? I don't want
to
> reinvent the wheel (or make some other stupid mistake).
> 

Has been done long long ago.

I once tried to build Zsh in LP64 mode but I guess I had some problems
and I do not think it is really needed. LP64 is needed for programs
requiring very large address space, like database servers. Zsh hopefully
will never requires address space above 1GB and if it does it must be a
bug :-)

Of course patches that allow clean LP64 model for zsh are welcome.

-andrej


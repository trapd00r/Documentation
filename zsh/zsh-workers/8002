From zsh-workers-return-8002-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 22 14:38:10 1999
Return-Path: <zsh-workers-return-8002-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22121 invoked from network); 22 Sep 1999 14:38:09 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Sep 1999 14:38:09 -0000
Received: (qmail 7002 invoked by alias); 22 Sep 1999 14:38:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8002
Received: (qmail 6995 invoked from network); 22 Sep 1999 14:38:00 -0000
Message-Id: <9909221402.AA30052@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: completion listing 
In-Reply-To: "Sven Wischnowsky"'s message of "Wed, 22 Sep 1999 13:27:15 DFT."
             <199909221127.NAA20072@beta.informatik.hu-berlin.de> 
Date: Wed, 22 Sep 1999 16:02:05 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

If I type `rpm -^D' (I don't actually have rpm) I get a list which looks
like:

Completing option
--verify -- verify mode
-K       -- signature check mode
-U       -- upgrade mode
-V       -- verify mode
-b       -- build mode (spec file)
-e       -- uninstall mode
-i       -- install mode
-q       -- query mode
-t       -- build mode (tar file)
-v       -- verbose mode
-y       -- verify mode
--addsign     --ftpproxy    --querytags   --recompile   --setugids  
--checksig    --initdb      --rcfile      --resign      --showrc    
--erase       --install     --rebuild     --rmsource    --upgrade   
--ftpport     --pipe        --rebuilddb   --setperms                

Hitting tab with selection turned on cycles through starting with the set
at the bottom (why?)  It then cycles to --verify at the top.  The next
<TAB> causes the shell to crash.  The backtrace doesn't seem to be very
revealing.

#0  do_single (m=0x200538fc) at zle_tricky.c:8148
#1  0xd0de226c in do_menucmp (lst=-1159738863) at zle_tricky.c:1152
#2  0xd0e2f150 in domenuselect (dummy=0xbadfca11, dat=0x2ff7f09c)
    at complist.c:762
#3  0x10051bb8 in runhookdef (h=0x20053864, d=0x2ff7f09c) at module.c:1510
#4  0xd0de215c in docomplete (lst=0) at zle_tricky.c:1121
#5  0xd0de03e4 in expandorcomplete (args=0x2005a028) at zle_tricky.c:509
#6  0xd0ddff0c in completecall (args=0xbadfca11) at zle_tricky.c:408
#7  0xd0ddb2c0 in execzlefunc (func=0x20053cd4, args=0x20053838)
    at zle_main.c:628
#8  0xd0ddaf6c in zleread (lp=0x20059954 <Address 0x20059954 out of bounds>, 
    rp=0x1 "", flags=537238540) at zle_main.c:547
#9  0x1001d564 in inputline () at input.c:265
#10 0x1001d3f8 in ingetc () at input.c:210
#11 0x1000c438 in ihgetc () at hist.c:242
#12 0x10011a9c in gettok () at lex.c:545
#13 0x1001107c in yylex () at lex.c:308
#14 0x100530cc in parse_event () at parse.c:105
#15 0x10009f2c in loop (toplevel=1, justonce=0) at init.c:113
#16 0x100006c4 in main (argc=-1159738863, argv=0x20098a4c) at main.c:89
#17 0x1000042c in __start ()

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-workers-return-13460-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 13 09:38:07 2001
Return-Path: <zsh-workers-return-13460-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2027 invoked from network); 13 Feb 2001 09:38:06 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Feb 2001 09:38:06 -0000
Received: (qmail 8599 invoked by alias); 13 Feb 2001 09:37:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13460
Received: (qmail 8585 invoked from network); 13 Feb 2001 09:37:22 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010213092648.ZM26163@candle.brasslantern.com>
Date: Tue, 13 Feb 2001 09:26:48 +0000
In-Reply-To: <000801c09591$c7dd2790$21c9ca95@mow.siemens.ru>
Comments: In reply to "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
        "More incompatibility :-) RE: PATCH: 3.1.9-dev-8: Re: Word splitting in zsh" (Feb 13, 10:51am)
References: <000801c09591$c7dd2790$21c9ca95@mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>,
        <zsh-workers@sunsite.dk>
Subject: Re: More incompatibility :-) RE: PATCH: 3.1.9-dev-8: Re: Word splitting in zsh
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Feb 13, 10:51am, Andrej Borsenkow wrote:
}
} > +    static int mult_spbreak, mult_shwsplit;
} 
} They are static. Is there any chance, that two unrelated substitutions
} may run at the same time? E.g. inside nested command substitution?
} This forms its own context and both above must be reset.

They are saved, set, and restored in a small block around the call to
multsub(), and otherwise referenced only on first entry to paramsubst().
They have no effect other than to override the current setting of the
shwordsplit option.  That does mean that

	print ${=foo+"$(unsetopt shwordsplit;print -l $bar)"}

actually *does* split the value of $bar within the command subst.  Hmm.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


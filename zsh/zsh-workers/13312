From zsh-workers-return-13312-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Dec 26 21:19:26 2000
Return-Path: <zsh-workers-return-13312-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20048 invoked from network); 26 Dec 2000 21:19:25 -0000
Received: from unknown (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Dec 2000 21:19:25 -0000
Received: (qmail 9876 invoked by alias); 26 Dec 2000 21:19:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13312
Received: (qmail 9869 invoked from network); 26 Dec 2000 21:19:12 -0000
Date: Tue, 26 Dec 2000 16:19:05 -0500
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: better killall completion
Message-ID: <20001226161905.A29400@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i

Since ps c truncates the command name, this change allows completion of
longer process names.

Index: Completion/User/_killall
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/_killall,v
retrieving revision 1.3
diff -u -r1.3 _killall
--- Completion/User/_killall	2000/07/10 17:08:00	1.3
+++ Completion/User/_killall	2000/12/26 21:17:36
@@ -3,7 +3,7 @@
 if [[ "$OSTYPE" = linux* ]]; then
   _alternative \
       'signals:: _signals -p' \
-      'processes:process:{ compadd "$expl[@]" ${$(_call processes-names ps ${${EUID/(#s)0(#e)/xa}//[0-9]#/} ho comm 2> /dev/null):#(ps|COMMAND)} }'
+      'processes:process:{ compadd "$expl[@]" ${${${(f)"$(_call processes-names ps ${${EUID/(#s)0(#e)/xa}//[0-9]#/} ho cmd 2> /dev/null)"//[][]/}:#(ps|COMMAND)}%%\ *} }'
 else
   _signals -p
 fi


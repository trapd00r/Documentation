From zsh-workers-return-24941-mason-zsh=primenet.com.au@sunsite.dk Tue May 06 14:35:14 2008
Return-Path: <zsh-workers-return-24941-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28785 invoked from network); 6 May 2008 14:35:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 May 2008 14:35:13 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46812 invoked from network); 6 May 2008 14:35:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 May 2008 14:35:07 -0000
Received: (qmail 4445 invoked by alias); 6 May 2008 14:35:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24941
Received: (qmail 4410 invoked from network); 6 May 2008 14:35:01 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 6 May 2008 14:35:01 -0000
Received: from vms048pub.verizon.net (vms048pub.verizon.net [206.46.252.48])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 458BD80ED172
	for <zsh-workers@sunsite.dk>; Tue,  6 May 2008 16:34:57 +0200 (CEST)
Received: from torch.brasslantern.com ([71.116.113.54])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0K0G007WCB5W9MI0@vms048.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Tue, 06 May 2008 09:34:45 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m46EYhut022501	for
 <zsh-workers@sunsite.dk>; Tue, 06 May 2008 07:34:43 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m46EYgdj022500	for zsh-workers@sunsite.dk; Tue,
 06 May 2008 07:34:42 -0700
Date: Tue, 06 May 2008 07:34:42 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: PATCH: random attribute stuff
In-reply-to: <200805060915.m469FeJP017551@news01.csr.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Message-id: <080506073442.ZM22499@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <200805060915.m469FeJP017551@news01.csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
 "PATCH: random attribute stuff" (May  6, 10:15am)
X-Virus-Scanned: ClamAV 0.91.2/7040/Tue May  6 03:52:15 2008 on bifrost
X-Virus-Status: Clean

On May 6, 10:15am, Peter Stephenson wrote:
}
} I'm not completely convinced of the utility of this chunk of code.  It
} seems to be designed so that after a right prompt is output everything
} is the same as after the normal prompt.

I think that would be correct, because the rprompt is printed last and
then the cursor is merely moved to the end of the normal prompt.

} But both before and after this patch if I let the right prompt leave,
} say, underline turned on then when I play with history lines the main
} line appears underlined, too. I don't think it's ever been a good idea
} to leave effects turned on after prompts.

Some people want the entire command line to look one way and the output
from the command to look another way, so they can easily tell what's a
command and what isn't when scrolling backward through buffered output.
Leaving effects turned on after the prompt is the only way to do that;
at some point it was decided that it was better to have the prompt help
out with it, than to force people to trick the shell into outputting a
terminal control sequence without using the prompt escapes.


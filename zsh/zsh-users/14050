From zsh-users-return-14050-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 19 20:39:38 2009
Return-Path: <zsh-users-return-14050-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21703 invoked from network); 19 Apr 2009 20:39:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Apr 2009 20:39:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 13913 invoked from network); 19 Apr 2009 20:39:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Apr 2009 20:39:07 -0000
Received: (qmail 10188 invoked by alias); 19 Apr 2009 20:38:49 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14050
Received: (qmail 10170 invoked from network); 19 Apr 2009 20:38:49 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 19 Apr 2009 20:38:49 -0000
Received: from mtaout02-winn.ispmail.ntl.com (mtaout02-winn.ispmail.ntl.com [81.103.221.48])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 739EB8028C72
	for <zsh-users@sunsite.dk>; Sun, 19 Apr 2009 22:37:53 +0200 (CEST)
Received: from aamtaout04-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout02-winn.ispmail.ntl.com
          (InterMail vM.7.08.04.00 201-2186-134-20080326) with ESMTP
          id <20090419203832.YYIM4080.mtaout02-winn.ispmail.ntl.com@aamtaout04-winn.ispmail.ntl.com>
          for <zsh-users@sunsite.dk>; Sun, 19 Apr 2009 21:38:32 +0100
Received: from pws-pc ([81.107.42.185]) by aamtaout04-winn.ispmail.ntl.com
          (InterMail vG.2.02.00.01 201-2161-120-102-20060912) with ESMTP
          id <20090419203831.KMHT22934.aamtaout04-winn.ispmail.ntl.com@pws-pc>
          for <zsh-users@sunsite.dk>; Sun, 19 Apr 2009 21:38:31 +0100
Date: Sun, 19 Apr 2009 21:38:19 +0100
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-users@sunsite.dk (Zsh users list)
Subject: Re: zsh 4.3.9-dev-2
Message-ID: <20090419213819.4b64e70d@pws-pc>
In-Reply-To: <20090418125305.09b6673f@pws-pc>
References: <26804.1239987872@csr.com>
	<0BE5DEF1-FFBB-4500-BF01-F9A98D285EE5@opencsw.org>
	<20090418125305.09b6673f@pws-pc>
X-Mailer: Claws Mail 3.7.0 (GTK+ 2.14.7; x86_64-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Cloudmark-Analysis: v=1.0 c=1 a=NLZqzBF-AAAA:8 a=HHRikk79AAAA:8 a=MBWZ-ig9umLtQrNysiMA:9 a=y0Crq7zbjnH4Aiw6dr8A:7 a=KIc_wKqyDYLwiuzwnrSQL31LdTQA:4 a=_dQi-Dcv4p4A:10 a=VWSkFQxzzekA:10
X-Virus-Scanned: ClamAV 0.92.1/9256/Sun Apr 19 01:13:04 2009 on bifrost
X-Virus-Status: Clean

On Sat, 18 Apr 2009 12:53:05 +0100
Peter Stephenson <p.w.stephenson@ntlworld.com> wrote:
> On Fri, 17 Apr 2009 22:24:44 +0200
> Dagobert Michelsen <dam@opencsw.org> wrote:
> > One issue on Solaris 8:
> > - the detection of ncursesw seems to work, but does throw an error
> >    on configure-time, both on sparc and x86 with Sun Studio 11:
> > 
> > >> checking location of curses header... ncursesw/ncurses.h
> > >> checking where curses key definitions are located... "nametmp.c",  
> > >> line 1: cannot find include file: <ncursesw/ncurses.h>
> > >> cc: acomp failed for nametmp.c
> 
> That's a little bizarre; it suggests something's inconsistent between
> compiling for the two tests.  Maybe there's something in config.log that
> would suggest what?

Dagobert's sent me it (thanks).  This is actually the original test
for ncurses.h.  It looks like the include path has
-I/opt/csw/include/ncurses for the the compile test, not for the CPP
test.  I haven't looked further yet, but this seems a bit odd; it's
fairly obvious that if you use different include paths you'll find
different files.

configure:6315: checking ncurses.h usability
configure:6332: /opt/studio/SOS11/SUNWspro/bin/cc -c -I/opt/csw/include/ncurses -xO3 -xarch=v8 -I/opt/csw/include -I/opt/csw/include -I/opt/csw/include conftest.c >&5
configure:6338: $? = 0
configure:6352: result: yes
configure:6356: checking ncurses.h presence
configure:6371: /opt/studio/SOS11/SUNWspro/bin/cc -E -I/opt/csw/include -I/opt/csw/include conftest.c
"conftest.c", line 75: cannot find include file: <ncurses.h>
cc: acomp failed for conftest.c
configure:6377: $? = 2
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define MACHTYPE "sparc"
| #define VENDOR "sun"
| #define OSTYPE "solaris2.8"
| #define GLOBAL_ZSHENV "/etc/zshenv"
| #define GLOBAL_ZSHRC "/etc/zshrc"
| #define GLOBAL_ZPROFILE "/etc/zprofile"
| #define GLOBAL_ZLOGIN "/etc/zlogin"
| #define GLOBAL_ZLOGOUT "/etc/zlogout"
| #define RESTRICTED_R 1
| #define CONFIG_LOCALE 1
| #define MAILDIR_SUPPORT 1
| #define MAX_FUNCTION_DEPTH 1000
| #define DEFAULT_READNULLCMD "more"
| #define _FILE_OFFSET_BITS 64
| #define PROTOTYPES 1
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_ALLOCA_H 1
| #define HAVE_ALLOCA 1
| #define HAVE_UNION_INIT 1
| #define HAVE_VARIABLE_LENGTH_ARRAYS 1
| #define HAVE_DIRENT_H 1
| #define STDC_HEADERS 1
| #define TIME_WITH_SYS_TIME 1
| #define HAVE_SYS_WAIT_H 1
| #define HAVE_SYS_TIME_H 1
| #define HAVE_SYS_TIMES_H 1
| #define HAVE_SYS_SELECT_H 1
| #define HAVE_TERMCAP_H 1
| #define HAVE_TERMIO_H 1
| #define HAVE_TERMIOS_H 1
| #define HAVE_SYS_PARAM_H 1
| #define HAVE_SYS_FILIO_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_FCNTL_H 1
| #define HAVE_SYS_UTSNAME_H 1
| #define HAVE_SYS_RESOURCE_H 1
| #define HAVE_LOCALE_H 1
| #define HAVE_ERRNO_H 1
| #define HAVE_STDIO_H 1
| #define HAVE_STDARG_H 1
| #define HAVE_VARARGS_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_UTMP_H 1
| #define HAVE_UTMPX_H 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_PWD_H 1
| #define HAVE_GRP_H 1
| #define HAVE_POLL_H 1
| #define HAVE_SYS_MMAN_H 1
| #define HAVE_NETINET_IN_SYSTM_H 1
| #define HAVE_PCRE_H 1
| #define HAVE_LANGINFO_H 1
| #define HAVE_WCHAR_H 1
| #define HAVE_STDDEF_H 1
| #define HAVE_SYS_STROPTS_H 1
| #define HAVE_ICONV_H 1
| /* end confdefs.h.  */
| #include <ncurses.h>
configure:6391: result: no
configure:6397: WARNING: ncurses.h: accepted by the compiler, rejected by the preprocessor!
configure:6399: WARNING: ncurses.h: proceeding with the compiler's result
configure:6419: checking for ncurses.h
configure:6427: result: yes


-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


From zsh-users-return-4828-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 15 14:06:40 2002
Return-Path: <zsh-users-return-4828-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6288 invoked from network); 15 Apr 2002 14:06:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Apr 2002 14:06:39 -0000
Received: (qmail 509 invoked by alias); 15 Apr 2002 14:05:17 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4828
Received: (qmail 200 invoked from network); 15 Apr 2002 14:05:00 -0000
X-Server-Uuid: a46faee8-2a4f-11d3-9c63-00508b4fa69c
Message-ID: <39E723A47AE4D211A9E800A0C9DEB9F605B0E910@slon11308.csfp.co.uk>
From: "Ebourne, Martin" <martin.ebourne@csfb.com>
To: "'zsh-users@sunsite.dk'" <zsh-users@sunsite.dk>
Subject: How to get prefix with quotes in completion widgets?
Date: Mon, 15 Apr 2002 14:53:34 +0100
MIME-Version: 1.0
X-WSS-ID: 10A404E838626-01-04
Content-Type: text/plain; 
 charset=iso-8859-1
Content-Transfer-Encoding: 7bit

Hi,

How do I get access to a version of $PREFIX which includes the quotes within a completion widget?

eg. If I have a completion widget for example which prints the following:

	echo "il:$words:"
	echo "ll:$words[1,CURRENT-1]:"
	echo "pr:$PREFIX:"
	echo "ip:$IPREFIX:"
	echo "qi:$QIPREFIX:"
	echo "aq:$compstate[all_quotes]:"

And then I enter the line:

example insert ( 'foo', 'bar' )
                        ^^^
                        123

And complete on the three successive characters shown, I get:

1:
	il:example insert ( 'foo', 'bar' ):
	ll:example insert:
	pr:(\ foo,\ :
	ip::
	qi::
	aq:\:
2:
	il:example insert ( 'foo', 'bar' ):
	ll:example insert:
	pr:(\ foo,\ :
	ip::
	qi::
	aq:\:
3:
	il:example insert ( 'foo', 'bar' ):
	ll:example insert:
	pr:(\ foo,\ b:
	ip::
	qi::
	aq:\:

Here PREFIX has lost the ' which are present in words[CURRENT]. Is there a way to access a version of PREFIX which has not been so altered? Or alternatively, is there a way of getting the character position of the cursor inside words[CURRENT] so that I could use that?

I note especially that although the cursor is in a different position for 1 & 2 (1: outside the quote, 2: inside the quote), there is no difference in the information available at completion time that I can see.

Cheers,

Martin.

This message is for the named person's use only. It may contain sensitive and private proprietary or legally privileged information. No confidentiality or privilege is waived or lost by any mistransmission. If you are not the intended recipient, please immediately delete it and all copies of it from your system, destroy any hard copies of it and notify the sender. You must not, directly or indirectly, use, disclose, distribute, print, or copy any part of this message if you are not the intended recipient. CREDIT SUISSE GROUP and each legal entity in the CREDIT SUISSE FIRST BOSTON or CREDIT SUISSE ASSET MANAGEMENT business units of CREDIT SUISSE FIRST BOSTON reserve the right to monitor all e-mail communications through its networks. Any views expressed in this message are those of the individual sender, except where the message states otherwise and the sender is authorized to state them to be the views of any such entity.
Unless otherwise stated, any pricing information given in this message is indicative only, is subject to change and does not constitute an offer to deal at any price quoted. Any reference to the terms of executed transactions should be treated as  preliminary only and subject to our formal written confirmation.



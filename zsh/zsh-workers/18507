From zsh-workers-return-18507-mason-zsh=primenet.com.au@sunsite.dk Wed May 07 08:40:02 2003
Return-Path: <zsh-workers-return-18507-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20288 invoked from network); 7 May 2003 08:40:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 7 May 2003 08:40:01 -0000
Received: (qmail 21143 invoked by alias); 7 May 2003 08:39:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18507
Received: (qmail 21128 invoked from network); 7 May 2003 08:39:49 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 7 May 2003 08:39:49 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [212.125.75.4] by sunsite.dk (MessageWall 1.0.8) with SMTP; 7 May 2003 8:39:49 -0000
Received: (qmail 14990 invoked from network); 7 May 2003 08:39:33 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-21.tower-1.messagelabs.com with SMTP; 7 May 2003 08:39:33 -0000
Received: from gmcs3.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.9.3/8.9.3/Debian 8.9.3-21) with ESMTP id JAA06179
	for <zsh-workers@sunsite.dk>; Wed, 7 May 2003 09:39:32 +0100
X-Authentication-Warning: iris.logica.co.uk: Host [158.234.142.61] claimed to be gmcs3.logica.co.uk
Received: from gmcs3.logica.co.uk (localhost [127.0.0.1])
	by gmcs3.logica.co.uk (8.11.6/8.11.6/SuSE Linux 0.5) with ESMTP id h478dib02720
	for <zsh-workers@sunsite.dk>; Wed, 7 May 2003 10:39:44 +0200
X-VirusChecked: Checked
In-reply-to: <2148.1052215470@csr.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <2148.1052215470@csr.com>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: Re: Scope of local parameters 
Date: Wed, 07 May 2003 10:39:44 +0200
Message-ID: <2718.1052296784@gmcs3.logica.co.uk>

Peter wrote:
> 
> > Hmm ... making typeset create local parameters in sourced script by default
> > will definitely break a lot of existing scripts.

> > Probably extra argument to
> > typeset or (better) extra options to treat typesets in script as local.
> 
> Certainly possible, but will need some extra wiring.  I should think
> thre's some possible fudge involving locallevel, scanendscope and a new
> parameter flag, rather than adding a completely new mechanism.  I think

Except that the parameter code has enough fudges holding it together
already.

So that we don't end up with too many typeset flags, this could perhaps
be combined with some facility for ksh93 style lexical scoping. Perhaps
allowing scope to be restricted to within { ... }, do .. done and if
... fi blocks. Another option might be some syntax for in place
functions - some variant of the { ... } block in which local variables
would apply.

Oliver


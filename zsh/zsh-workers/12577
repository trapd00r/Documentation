From zsh-workers-return-12577-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Aug 09 17:51:47 2000
Return-Path: <zsh-workers-return-12577-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25176 invoked from network); 9 Aug 2000 17:51:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Aug 2000 17:51:45 -0000
Received: (qmail 5600 invoked by alias); 9 Aug 2000 17:51:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12577
Received: (qmail 5593 invoked from network); 9 Aug 2000 17:51:29 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000809175118.ZM7697@candle.brasslantern.com>
Date: Wed, 9 Aug 2000 17:51:18 +0000
In-Reply-To: <20000809102501.A24977@dman.com>
Comments: In reply to Clint Adams <schizo@debian.org>
        "PATH_MAX vs. _PC_PATH_MAX vs. POSIX (was Re: PATCH: tail-dropping in files module mkdir)" (Aug  9, 10:25am)
References: <20000804204021.A7925@dman.com> 
	<1000804070216.ZM23696@candle.brasslantern.com> 
	<20000804091955.A4368@dman.com> 
	<000804111549.ZM28988@candle.brasslantern.com> 
	<20000804205227.B7925@dman.com> 
	<1000805044825.ZM29238@candle.brasslantern.com> 
	<20000807140445.A15891@dman.com> 
	<000807133944.ZM26497@candle.brasslantern.com> 
	<20000808074007.A7961@dman.com> 
	<000808144749.ZM7078@candle.brasslantern.com> 
	<20000809102501.A24977@dman.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Clint Adams <schizo@debian.org>
Subject: Re: PATH_MAX vs. _PC_PATH_MAX vs. POSIX (was Re: PATCH: tail-dropping in files module mkdir)
Cc: zsh-workers@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

} > The definition of pathconf(dir, _PC_PATH_MAX) is inherently incompatible
} > with the definition of the PATH_MAX constant.

I just found my 1991 copy of ORA's POSIX Programmer's Guide.  It says
specifically:

-----------------------

[...]

_PC_PATH_MAX   The maximum lenght of a relative pathname when this direc-
               tory is the working directory; that is, the number of
	       characters that may be appended to path and still have a
	       valid pathname.

[...]

Notes:

    The value returned by _PC_PATH_MAX is not useful for allocating storage.
    Files with paths longer than _PC_PATH_MAX may exist.

-----------------------

So I think pathconf() is of approximately zero use to zsh, at least for
_PC_PATH_MAX, and we should just rip zpathmax() out again.  I apologize
for helping lead us down this rathole.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-21241-mason-zsh=primenet.com.au@sunsite.dk Mon May 09 17:49:32 2005
Return-Path: <zsh-workers-return-21241-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28143 invoked from network); 9 May 2005 17:49:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 May 2005 17:49:31 -0000
Received: (qmail 32239 invoked from network); 9 May 2005 17:49:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 May 2005 17:49:25 -0000
Received: (qmail 4325 invoked by alias); 9 May 2005 17:49:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21241
Received: (qmail 4315 invoked from network); 9 May 2005 17:49:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 May 2005 17:49:22 -0000
Received: (qmail 31884 invoked from network); 9 May 2005 17:49:22 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 9 May 2005 17:49:16 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T70cf3147f20a6c8d01618@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Mon, 9 May 2005 18:47:30 +0100
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 9 May 2005 18:50:17 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j49HnDcP013186
	for <zsh-workers@sunsite.dk>; Mon, 9 May 2005 18:49:14 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j49HnDaJ013183
	for <zsh-workers@sunsite.dk>; Mon, 9 May 2005 18:49:13 +0100
Message-Id: <200505091749.j49HnDaJ013183@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: 8-bit parameter names? 
In-reply-to: <1050509172451.ZM11220@candle.brasslantern.com> 
References: <1050509172451.ZM11220@candle.brasslantern.com>
Date: Mon, 09 May 2005 18:49:12 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 09 May 2005 17:50:17.0609 (UTC) FILETIME=[8FAFFF90:01C554BF]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Bart Schaefer wrote:
> Is it intentional that 8-bit characters can be used in parameter name
> identifiers, or is it a bug?

There's a weird assumption that 8-bit characters from 160 can be treated
as alphanumeric.   This doesn't really work for any character set I'm
aware of.

    for (t0 = 0240; t0 != 0400; t0++)
	typtab[t0] = IALPHA | IALNUM | IIDENT | IUSER | IWORD;

Arguably we could just delete that.  The internal tests ialpha and
ialnum are used very infrequently in cases where use of an 8-bit
character isn't likely---they are not used to replace isalpha() and
isalnum() in pattern matching.  I don't know what characters you can
have in user names, but it's only used to test what follows a ~.  iword
needs redoing completely for Unicode anyway; we need to base it on
WORDCHARS plus isalnum() or iswalnum, a fixed table entry isn't good
enough.  (The [[:WORD:]] test I just added suffers from this too, but it
is at least consistent with zle which is its main purpose.)

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


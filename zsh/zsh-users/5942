From zsh-users-return-5942-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 26 02:18:29 2003
Return-Path: <zsh-users-return-5942-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12697 invoked from network); 26 Feb 2003 02:18:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 26 Feb 2003 02:18:28 -0000
Received: (qmail 3109 invoked by alias); 26 Feb 2003 02:17:58 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5942
Received: (qmail 3102 invoked from network); 26 Feb 2003 02:17:57 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 26 Feb 2003 02:17:57 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [198.144.199.34] by sunsite.dk (MessageWall 1.0.8) with SMTP; 26 Feb 2003 2:17:57 -0000
Received: from phobos (dhcp39.kefta.com [192.168.1.70])
	by asura.kefta.com (Kefta mail) with SMTP id CE3C97A48E
	for <zsh-users@sunsite.dk>; Tue, 25 Feb 2003 18:17:55 -0800 (PST)
From: "Charlie Reiman" <creiman@kefta.com>
To: <zsh-users@sunsite.dk>
Subject: Build problems, solution?
Date: Tue, 25 Feb 2003 18:17:56 -0800
Message-ID: <MHEAKIEGCFLDLMBODHDKAEHDDIAA.creiman@kefta.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <871y1wqbe5.fsf@cine.davh.dk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106

I was trying to build zsh-4.0.6 on Solaris 8 on Intel. configure seems to
work fine but make spits this out:

sh: Src: does not exist
*** Error code 1
make: Fatal error: Command failed for target `all'

I've tracked it down to this section in the Makefile:

# default target
all: config.h
        @for subdir in Src Doc; do \
          (cd $$subdir && $(MAKE) $(MAKEDEFS) $@) || exit 1; \
        done

Obviously, my /bin/sh is borked. Since I have bash installed, I came up with
a workaround (I'd love to here of a better one!)

edit the "SHELL = /bin/sh" line in Config/defs.mk to
SHELL = /usr/bin/bash

Go to the toplevel and run "make SHELL=/usr/bin/bash"

Incidentally, the line that breaks can be fixed by doing this:

          (cd ./$$subdir && $(MAKE) $(MAKEDEFS) $@) || exit 1; \

But you'd need to do that for every cd in every makefile.




From zsh-workers-return-18535-mason-zsh=primenet.com.au@sunsite.dk Wed May 14 12:57:42 2003
Return-Path: <zsh-workers-return-18535-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8404 invoked from network); 14 May 2003 12:57:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 May 2003 12:57:41 -0000
Received: (qmail 3953 invoked by alias); 14 May 2003 12:57:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18535
Received: (qmail 3946 invoked from network); 14 May 2003 12:57:35 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 14 May 2003 12:57:35 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.167.170.152] by sunsite.dk (MessageWall 1.0.8) with SMTP; 14 May 2003 12:57:35 -0000
Received: from zefram by bowl.fysh.org with local (Exim 3.35 #1 (Debian))
	id 19Fvp9-00073R-00; Wed, 14 May 2003 13:57:35 +0100
Date: Wed, 14 May 2003 13:57:35 +0100
To: Peter Stephenson <pws@csr.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: Bug#190948: Violation against The Single UNIX ? Specification, Version 2
Message-ID: <20030514125734.GE29742@fysh.org>
References: <3014.1052910423@gmcs3.local> <21466.1052916035@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <21466.1052916035@csr.com>
User-Agent: Mutt/1.3.28i
From: Zefram <zefram@fysh.org>

Peter Stephenson wrote:
>Exactly, it's completely meaningless in zsh.  It is ridiculous for the
>standard to specify how the shell handles line editing,

Yet the standard does.  A vi command line editing mode is defined
by POSIX.  An Emacs mode would also have been in the standard, but the
committee couldn't reach agreement on the details.  (ISTR seeing RMS
named in the credits, I wonder what really went on.)  I think Zle's vi
mode behaviour is incompatible with POSIX on some points, but I really
don't care, because we did better there.

I think we should, at least, arrange that "set -o vi" in an interactive
zsh with zle loaded has the effect of "bindkey -v".  That perserves
the intent of the standard -- that "set -o vi" is the portable way for
a user to select vi-style command line editing -- and we don't have to
go ridiculously out of our way to achieve it.

I suggest having a hook to execute on "set -o vi"; Zle would hook this
when it is loaded, just like the other things it already hooks.  To be
nice to everyone that knows that, despite POSIX, interactive shells do
actually have an Emacs mode too, it would be good to hook "set -o emacs"
as well.  Only these two are required.

-zefram


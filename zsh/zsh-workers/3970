From zsh-workers-request@math.gatech.edu Wed May 13 14:04:55 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24286 invoked from network); 13 May 1998 14:04:54 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 13 May 1998 14:04:54 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id JAA12594;
	Wed, 13 May 1998 09:46:36 -0400 (EDT)
Resent-Date: Wed, 13 May 1998 09:46:36 -0400 (EDT)
Message-Id: <19980513144627.A27888@behp72>
Date: Wed, 13 May 1998 14:46:27 +0100
From: Darren Marshall <marshad@ncp.gpt.co.uk>
To: zsh-workers@math.gatech.edu
Subject: watch on HP-UX 10.20
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.91.1
Resent-Message-ID: <"TaBeo.0.j43.yGQMr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3970
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I have recently upgraded to zsh from tcsh and I am mightily impressed. However,
I did find that the login/logout event reporting is not working. I am using
version 3.0.5 and after a little debugging I found the problem lies in the
following lines in system.h

#ifdef UTMPX_FILE                                /* Solaris, SysVr4 */
# undef  UTMP_FILE
# define UTMP_FILE UTMPX_FILE
#endif

#ifdef WTMPX_FILE                                /* Solaris. SysVr4 */
# undef  WTMP_FILE
# define WTMP_FILE WTMPX_FILE
#endif

Unfortunately, the utmp.h header file on HP-UX defines UTMPX_FILE. After hacking
system.h to ensure the right definition of UTMP_FILE everything works fine.

-- 
          __  _-==-=_,-.
         /--`' \_@-@.--<
         `--'\ \   <___/.
              \ \\   " /
               >=\\_/`<
   ____       /= |  \_|/
 _'    `\   _/=== \___/
= -_ __/=====================================================================
|    Darren Marshall                     |    Tel: (780) 4020 internal      |
|  mailto:marshad@behp72.gpt.co.uk       |         +44 (0)115 9434020       |
=============================================================================

Common sense and a sense of humor are the same thing, moving at different
speeds.  A sense of humor is just common sense, dancing.  -- Clive James


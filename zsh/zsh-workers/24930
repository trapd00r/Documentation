From zsh-workers-return-24930-mason-zsh=primenet.com.au@sunsite.dk Tue May 06 09:11:25 2008
Return-Path: <zsh-workers-return-24930-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8870 invoked from network); 6 May 2008 09:11:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 May 2008 09:11:24 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 45425 invoked from network); 6 May 2008 09:11:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 May 2008 09:11:19 -0000
Received: (qmail 12268 invoked by alias); 6 May 2008 09:11:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24930
Received: (qmail 12242 invoked from network); 6 May 2008 09:11:15 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 6 May 2008 09:11:15 -0000
Received: from tim.des.no (unknown [194.63.250.121])
	by bifrost.dotsrc.org (Postfix) with ESMTP id AA88180ED173
	for <zsh-workers@sunsite.dk>; Tue,  6 May 2008 11:11:08 +0200 (CEST)
Received: from ds4.des.no (des.no [80.203.243.180])
	by smtp.des.no (Postfix) with ESMTP id 6D891209C
	for <zsh-workers@sunsite.dk>; Tue,  6 May 2008 11:11:07 +0200 (CEST)
From: =?utf-8?Q?Dag-Erling_Sm=C3=B8rgrav?= <des@des.no>
To: Zsh Hackers' List <zsh-workers@sunsite.dk>
Subject: Re: zsh 4.3.6 FreeBSD bug
References: <20080503073947.GA22661@redoubt.spodhuis.org>
	<864p9enuek.fsf@ds4.des.no> <86wsmamf2w.fsf@ds4.des.no>
	<20080505220236.GA81569@redoubt.spodhuis.org>
Date: Tue, 06 May 2008 11:11:06 +0200
In-Reply-To: <20080505220236.GA81569@redoubt.spodhuis.org> (Phil Pennock's
	message of "Mon\, 5 May 2008 15\:02\:36 -0700")
Message-ID: <86lk2nn6fp.fsf@ds4.des.no>
User-Agent: Gnus/5.110006 (No Gnus v0.6) Emacs/23.0.60 (berkeley-unix)
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Scanned: ClamAV 0.91.2/7040/Tue May  6 03:52:15 2008 on bifrost
X-Virus-Status: Clean

Phil Pennock <zsh-workers+phil.pennock@spodhuis.org> writes:
> *sigh*  CURRENT now requires the _XOPEN_foo flag to work, where previous
> versions didn't and instead broke with it?  Joy.

CURRENT works out of the box, and so do 7.0 and 6.3.  6.2 and older
don't.  The difference between versions that work and versions that
don't is that those that work have ncurses 5.6 (with wide character
support) while those that don't have ncurses 5.2.

For now, I've fixed the port by conditionally applying the attached
patch when building on a FreeBSD version that still has the old ncurses
library.

> config.log shows: host_os=3D'freebsd62'
>
> Peter, it needs to be *freebsd6*; I don't believe FreeBSD 5 is still
> supported and I don't have such a test system anyway.

Yes, 5.5 is still supported.

DES
--=20
Dag-Erling Sm=C3=B8rgrav - des@des.no


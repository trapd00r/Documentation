From zsh-workers-return-23418-mason-zsh=primenet.com.au@sunsite.dk Thu May 10 10:32:14 2007
Return-Path: <zsh-workers-return-23418-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21033 invoked from network); 10 May 2007 10:32:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=no
	version=3.2.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 May 2007 10:32:12 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 24909 invoked from network); 10 May 2007 10:32:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 May 2007 10:32:06 -0000
Received: (qmail 28785 invoked by alias); 10 May 2007 10:32:03 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23418
Received: (qmail 28775 invoked from network); 10 May 2007 10:32:02 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 May 2007 10:32:02 -0000
Received: (qmail 24568 invoked from network); 10 May 2007 10:32:02 -0000
Received: from cluster-c.mailcontrol.com (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 10 May 2007 10:31:58 -0000
Received: from rly18c.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly18c.srv.mailcontrol.com (MailControl) with ESMTP id l4AAVWnY005568
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <zsh-workers@sunsite.dk>; Thu, 10 May 2007 11:31:46 +0100
Received: from submission.mailcontrol.com (submission.mailcontrol.com [86.111.216.190])
	by rly18c.srv.mailcontrol.com (MailControl) id l4AAUp0s004234
	for zsh-workers@sunsite.dk; Thu, 10 May 2007 11:30:51 +0100
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly18c-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id l4AASDPa029944; Thu, 10 May 2007 11:30:50 +0100 (BST)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 10 May 2007 11:30:32 +0100
Date: Thu, 10 May 2007 11:30:32 +0100
From: Peter Stephenson <pws@csr.com>
To: Timo Aaltonen <tjaalton@cc.hut.fi>, zsh-workers@sunsite.dk
Subject: Re: problems with 4.3.4 and Tru64
Message-Id: <20070510113032.3d50cd67.pws@csr.com>
In-Reply-To: <Pine.OSF.4.64.0705101310130.479844@replicant.hut.fi>
References: <Pine.OSF.4.64.0705101117330.479844@replicant.hut.fi>
	<200705100955.l4A9tTmQ001343@news01.csr.com>
	<Pine.OSF.4.64.0705101305200.479844@replicant.hut.fi>
	<Pine.OSF.4.64.0705101310130.479844@replicant.hut.fi>
Organization: Cambridge Silicon Radio
X-Mailer: Sylpheed version 2.2.10 (GTK+ 2.10.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 10 May 2007 10:30:32.0192 (UTC) FILETIME=[3CB82000:01C792EE]
X-Scanned-By: MailControl A-07-07-00 (www.mailcontrol.com) on 10.67.1.128

Timo Aaltonen <tjaalton@cc.hut.fi> wrote:
> On Thu, 10 May 2007, Timo Aaltonen wrote:
>=20
> >>  Could you send a transcript of your session (as simple as
> >> possible) made with "script" so we can see what is being sent to
> >> the shell input?
> >
> > Attached.
>=20
> Forgot to mention that I pressed each of these keys twice;
> =F6 - odiaeresis
> =E4 - adiaeresis
> =E5 - aring

Hmmm... nothing appears to be coming out; I'm looking for byte sequences
like 0xc3 0xa4 (=E4).

Could we try a different tack?  Could you check the "multibyte" option has
come on (use "setopt")?  This should happen automatically.  If it hasn't,
the shell may not have built properly and we need to go back and look at
the configuration.

If multibyte mode is apparently enabled, try "cat >test.out", typing one of
the characters, then ^D.  "xxd" or similar should show you the file
contains a two-octet character like 0xc3 0xa4 (=E4), 0xc3 0xb6 (=F6), or 0x=
c3
0xa5 (=E5).  This may not tell us much, but it's a start...

If that's all OK, try seeing if the shell is recognising multibyte
characters internally.  Take the contents of a file with a multibyte
character in it (say test.out) and do

print ${#$(<test.out)}

That should say 1 (i.e. one character found).  If it says 2 the shell is
interpreting the multibyte stream wrongly.

--=20
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http=
://www.csr.com/email_sig.php

To get further information regarding CSR, please visit our Investor Relatio=
ns page at http://ir.csr.com/csr/about/overview


From zsh-workers-return-13285-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Dec 16 16:21:06 2000
Return-Path: <zsh-workers-return-13285-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5340 invoked from network); 16 Dec 2000 16:21:06 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Dec 2000 16:21:06 -0000
Received: (qmail 3723 invoked by alias); 16 Dec 2000 16:21:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13285
Received: (qmail 3714 invoked from network); 16 Dec 2000 16:20:59 -0000
Date: Sat, 16 Dec 2000 11:20:57 -0500
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: Re: vicmd bindings
Message-ID: <20001216112057.C14538@dman.com>
References: <20001215172049.A10187@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <20001215172049.A10187@dman.com>; from schizo@debian.org on Fri, Dec 15, 2000 at 05:20:49PM -0500

> Any reason that
> 
> "j" down-line-or-history
> "k" up-line-or-history
> 
> aren't vi-down-line-or-history &al. by default?

I'll commit this patch.  It should be trivial to reverse should
there actually be a reason for the original behavior.

Index: Src/Zle/zle_bindings.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_bindings.c,v
retrieving revision 1.1.1.3
diff -u -r1.1.1.3 zle_bindings.c
--- Src/Zle/zle_bindings.c	1999/12/01 18:36:09	1.1.1.3
+++ Src/Zle/zle_bindings.c	2000/12/16 16:16:30
@@ -396,8 +396,8 @@
     /* g */ z_undefinedkey,
     /* h */ z_vibackwardchar,
     /* i */ z_viinsert,
-    /* j */ z_downlineorhistory,
-    /* k */ z_uplineorhistory,
+    /* j */ z_vidownlineorhistory,
+    /* k */ z_viuplineorhistory,
     /* l */ z_viforwardchar,
     /* m */ z_visetmark,
     /* n */ z_virepeatsearch,
Index: Src/Zle/zle_keymap.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_keymap.c,v
retrieving revision 1.1.1.10
diff -u -r1.1.1.10 zle_keymap.c
--- Src/Zle/zle_keymap.c	1999/12/01 18:36:09	1.1.1.10
+++ Src/Zle/zle_keymap.c	2000/12/16 16:16:30
@@ -1067,12 +1067,12 @@
      * Both standard and keypad modes are supported.                  */
 
     /* vi command mode: arrow keys */
-    bindkey(amap, "\33[A",  refthingy(t_uplineorhistory), NULL);
-    bindkey(amap, "\33[B",  refthingy(t_downlineorhistory), NULL);
+    bindkey(amap, "\33[A",  refthingy(t_viuplineorhistory), NULL);
+    bindkey(amap, "\33[B",  refthingy(t_vidownlineorhistory), NULL);
     bindkey(amap, "\33[C",  refthingy(t_viforwardchar), NULL);
     bindkey(amap, "\33[D",  refthingy(t_vibackwardchar), NULL);
-    bindkey(amap, "\33OA",  refthingy(t_uplineorhistory), NULL);
-    bindkey(amap, "\33OB",  refthingy(t_downlineorhistory), NULL);
+    bindkey(amap, "\33OA",  refthingy(t_viuplineorhistory), NULL);
+    bindkey(amap, "\33OB",  refthingy(t_vidownlineorhistory), NULL);
     bindkey(amap, "\33OC",  refthingy(t_viforwardchar), NULL);
     bindkey(amap, "\33OD",  refthingy(t_vibackwardchar), NULL);
 


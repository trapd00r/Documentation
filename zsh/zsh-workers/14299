From zsh-workers-return-14299-mason-zsh=primenet.com.au@sunsite.dk Thu May 10 16:12:12 2001
Return-Path: <zsh-workers-return-14299-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2202 invoked from network); 10 May 2001 16:12:10 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 May 2001 16:12:10 -0000
Received: (qmail 8099 invoked by alias); 10 May 2001 16:12:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14299
Received: (qmail 8075 invoked from network); 10 May 2001 16:12:04 -0000
Date: Thu, 10 May 2001 09:11:35 -0700 (PDT)
From: Wayne Davison <wayned@users.sourceforge.net>
X-X-Sender:  <wayne@phong.blorf.net>
To: <zsh-workers@sunsite.dk>
Subject: Re: Proposed history improvements
In-Reply-To: <1010510070413.ZM14821@candle.brasslantern.com>
Message-ID: <Pine.LNX.4.33L2.0105100802340.18087-100000@phong.blorf.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 10 May 2001, Bart Schaefer wrote:
> I'd much rather decide after the fact that I didn't want that command
> put into the history; for example, I'd expunge all commands involving
> typographical errors as soon as I'd had a chance to retrieve them and
> fix the error, so that correct commands are never pushed out of the
> history file by mistaken ones.

Yeah, I was thinking about that too, but I hadn't decided on a good way
to do it yet.  I'm thinking that it might be nice to have a "delete this
history line" key sequence, and perhaps a combination of that with "...
and accept this line".  Such a command would immediately remove the line
out of the internal history, and if we're incrementally updating the
history file it would have to take steps to ensure that the line was
removed from everyone else reading the history file (such as adding the
line with a flag after the timestamp, and leaving the flag-line around
long enough that we assume all shells have read in the removal
instruction -- this is kinda tricky and might not be 100% effective).

> [...] HIST_IMMEDIATE_DROP, on which I have no comment except to say I
> think it's extraneous.)

I have no strong opinion either way, except to say that I will never use
HIST_IMMEDIATE_DROP.  Anyone else care to weigh in on this?

..wayne..


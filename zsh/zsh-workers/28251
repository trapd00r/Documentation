From zsh-workers-return-28251-mason-zsh=primenet.com.au@zsh.org Sun Sep 12 03:49:44 2010
Return-Path: <zsh-workers-return-28251-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14263 invoked by alias); 12 Sep 2010 03:49:44 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28251
Received: (qmail 10905 invoked from network); 12 Sep 2010 03:49:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100911204915.ZM24282@torch.brasslantern.com>
Date: Sat, 11 Sep 2010 20:49:15 -0700
In-reply-to: <7900.1284147069@pws-pc>
Comments: In reply to Peter Stephenson <p.w.stephenson@ntlworld.com>
 "PATCH: POSIX_TRAPS option" (Sep 10,  8:31pm)
References: <7900.1284147069@pws-pc>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@zsh.org (Zsh hackers list)
Subject: Re: PATCH: POSIX_TRAPS option
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Sep 10,  8:31pm, Peter Stephenson wrote:
}
} It's high time we were able to treat EXIT traps the same way as other
} shells.

Hrm.  A couple of thoughts ...

(1) POSIX doesn't have anything to do with TRAPEXIT (or with any of
the other special TRAP functions).  Perhaps the POSIX_TRAPS option
should apply only to the "trap" builtin?  I don't feel very strongly
about it either way, but for example TRAPEXIT persists into subshells
whereas "trap" does not.

(2) The documentation should explain (somewhere) in what order the
EXIT trap and the zshexit hook function are executed.  Emprically,
zshexit is always last.


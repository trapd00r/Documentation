From zsh-users-return-5294-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 26 16:46:24 2002
Return-Path: <zsh-users-return-5294-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27732 invoked from network); 26 Aug 2002 16:46:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 26 Aug 2002 16:46:24 -0000
Received: (qmail 15780 invoked by alias); 26 Aug 2002 16:46:07 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5294
Received: (qmail 15755 invoked from network); 26 Aug 2002 16:46:06 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020826164534.ZM966@candle.brasslantern.com>
Date: Mon, 26 Aug 2002 16:45:34 +0000
In-Reply-To: <20020826074418.GA24936@suse.de>
Comments: In reply to Mads Martin Joergensen <mmj@suse.de>
        "Repeated Questions?" (Aug 26,  9:44am)
References: <20020826074418.GA24936@suse.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Mads Martin Joergensen <mmj@suse.de>,
   Zsh users list <zsh-users@sunsite.dk>
Subject: Re: Repeated Questions?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Aug 26,  9:44am, Mads Martin Joergensen wrote:
} Subject: Repeated Questions?
}
} When I try as a regular user to remove a directory owned by root I get
} the question twice:
} 
} 9:43 mmj@tiger:// > rm -r twoqestions 
} rm: remove write-protected directory `twoqestions'? y
} rm: remove write-protected directory `twoqestions'? y
} rm: cannot remove directory `twoqestions': Permission denied

These messages are coming from "rm", not from zsh.  The version of zsh
shouldn't have anything to do with it -- it must be the permissions on
the directory.

Here's what I get for a directory that is owned by root but readable by
anyone:

rm: directory `unremovable' is write protected; descend into it anyway? y
rm: remove directory `unremovable'? y
rm: cannot remove directory `unremovable': Operation not permitted

So the first question is rm asking whether to remove the contents of the
directory, and the second is asking whether to remove the directory itself.

Here's what I get if I "chmod -x" the directory:

rm: directory `unremovable' is write protected; descend into it anyway? y
rm: cannot change to directory unremovable: Permission denied

And if I "chmod +x,-r" the directory:

rm: directory `unremovable' is write protected; descend into it anyway? y
rm: unremovable/.: Permission denied
rm: remove directory `unremovable' (might be nonempty)? y
rm: cannot remove directory `unremovable': Operation not permitted

I think your version of "rm" is just not explaining itself well enough.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-users-return-3864-mason-zsh=primenet.com.au@sunsite.dk Tue May 08 14:38:24 2001
Return-Path: <zsh-users-return-3864-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17293 invoked from network); 8 May 2001 14:38:22 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 May 2001 14:38:22 -0000
Received: (qmail 17904 invoked by alias); 8 May 2001 14:38:04 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3864
Received: (qmail 17892 invoked from network); 8 May 2001 14:38:03 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Paul Ackersviller" <paulda@alumni.uwo.ca>, <zsh-users@sunsite.dk>
Subject: RE: inet_{a,p}ton prototypes in Src/Modules/zftp.pro
Date: Tue, 8 May 2001 18:37:17 +0400
Message-ID: <002c01c0d7cc$613271d0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-reply-to: <20010506104546.A13094@flora01.SLAC.Stanford.EDU>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal


>
> I just tried building zsh on Solaris 7 from the latest source off of CVS.
> Sun's compiler doesn't like inet_aton and inet_pton being declared
> as static.
> Here are the errors:
>
> "./zftp.pro", line 4: identifier redeclared: inet_aton
>         current : static function(pointer to const char, pointer to
> struct in_addr {union {..} S_un}) returning int
>         previous: function(pointer to const char, pointer to struct
> in_addr {union {..} S_un}) returning int :
> "/usr/include/arpa/inet.h", line 52
> "./zftp.pro", line 6: identifier redeclared: inet_pton
>         current : static function(int, pointer to const char,
> pointer to void) returning int
>         previous: function(int, pointer to const char, pointer to
> void) returning int : "/usr/include/arpa/inet.h", line 54
>

I did a bit of digging. The exactly same problem was reported a while back in
users/3375. Paul, are using Sun workshop compiler?

I had a patch but IIRC I never got any response if it fixed the things and I
had some problems on my own system. The patch probably is not applicable
anymore due to configure.in changes, I'll try to adapt it but cannot promise
when. Interested could look up the mentioned thread; it was moved to
zsh-workers then starting with article workers/12686

-andrej


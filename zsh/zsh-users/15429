From zsh-users-return-15429-mason-zsh=primenet.com.au@zsh.org Sun Sep 26 17:00:38 2010
Return-Path: <zsh-users-return-15429-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15735 invoked by alias); 26 Sep 2010 17:00:37 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15429
Received: (qmail 29894 invoked from network); 26 Sep 2010 17:00:32 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW
	autolearn=ham version=3.3.1
Received-SPF: neutral (ns1.primenet.com.au: 212.159.7.36 is neither permitted nor denied by SPF record at ntlworld.com)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AkcFACMWn0xUXeb0/2dsb2JhbACUNI4BccNPhUQEjTg
From: "John Cooper" <super.cooper@ntlworld.com>
To: <zsh-users@zsh.org>
Cc: "John Cooper" <John.Cooper@eu.citrix.com>
Subject: Case-insensitive completion problems with Cygwin 1.7
Date: Sun, 26 Sep 2010 17:50:09 +0100
Message-ID: <000201cb5d9a$e2ecfd40$a8c6f7c0$@ntlworld.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: ActdmGONOJ/OHzmPR2+yc7LRXDkceA==
Content-Language: en-gb

I've just upgraded to Cygwin 1.7 (and zsh 4.3.10) and found that
case-insensitive completion no longer works when the path starts with a
drive letter.

If I start off with `zsh -f' file completion works as expected even when
using a drive letter:
$ ls /c/<TAB>    # works as expected
$ ls c:/<TAB>    # works as expected

However, after running the following (to allow for case-insensitive
completion):
  zstyle ':completion:*' matcher-list 'm:{a-z}={A-Z}'
  autoload -U compinit
  compinit -C
$ ls /c/<TAB>   # still works as expected
$ ls c:/<TAB>   # fails - no completions are listed

Previously I was using zsh 4.3.2 running under Cygwin 1.5, and I used to
additionally have the following lines in my .zshrc:
zstyle ':completion:*:paths' accept-exact 'c:' 'd:' 'b:' 'o:' 'w:' 'r:' 'v:'
zstyle ':completion:*' fake-files '/:c' '/:d' '/:b' '/:o' '/:w' '/:r' '/:v'

This allowed completion to work when using drive letters in zsh 4.3.2, but
it doesn't work with zsh 4.3.10 and Cygwin 1.7.

Is there any other way around this, so that I can still perform
case-insensitive completion using c:/ ?

Btw, my /etc/fstab contains the following, which allows me to use /c/ rather
than the default /cygdrive/c/
none / cygdrive binary,posix=0,user 0 0

Thanks,

    --- John.



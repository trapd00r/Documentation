From zsh-workers-return-22973-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 07 05:26:40 2006
Return-Path: <zsh-workers-return-22973-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21339 invoked from network); 7 Nov 2006 05:26:34 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Nov 2006 05:26:34 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 67874 invoked from network); 7 Nov 2006 05:26:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Nov 2006 05:26:24 -0000
Received: (qmail 23110 invoked by alias); 7 Nov 2006 05:26:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22973
Received: (qmail 23101 invoked from network); 7 Nov 2006 05:26:21 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Nov 2006 05:26:21 -0000
Received: (qmail 67606 invoked from network); 7 Nov 2006 05:26:21 -0000
Received: from mailfe06.tele2.fr (HELO swip.net) (212.247.154.172)
  by a.mx.sunsite.dk with SMTP; 7 Nov 2006 05:26:17 -0000
X-T2-Posting-ID: mBXjJ9CYMpI3HGlT2s4LT8j3JzBVs7ioB0ePn7y7rgg=
X-Cloudmark-Score: 0.000000 []
Received: from [80.170.197.39] (HELO localhost)
  by mailfe06.swip.net (CommuniGate Pro SMTP 5.0.12)
  with ESMTPS id 320430202 for zsh-workers@sunsite.dk; Tue, 07 Nov 2006 06:26:16 +0100
Date: Tue, 7 Nov 2006 06:26:14 +0100
From: "arno." <arno.@no-log.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _zip (add support for .xpi file)
Message-ID: <20061107052614.GA11613@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="ZPt4rx8FFjLCG7dd"
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)


--ZPt4rx8FFjLCG7dd
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,
I modified my _zip completion file to support files with .xpi extension
That filename extension is used for firefox addons. They are just zip=20
whose names ends with .xpi
I don't known if many people need to pack/unpack firefox addons regulaly,=
=20
so I don't known if supporting .xpi extension would be that useful.
On the other hand, I don't think .xpi is used for other types of files,=20
so there should be no conflict, or undesired matching.

arno

? _zip.patch
Index: Completion/Unix/Command/_zip
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_zip,v
retrieving revision 1.8
diff -u -r1.8 _zip
--- Completion/Unix/Command/_zip	21 Jan 2004 13:53:29 -0000	1.8
+++ Completion/Unix/Command/_zip	7 Nov 2006 05:12:07 -0000
@@ -50,7 +50,7 @@
       '(-0 -1 -2 -3 -4 -5 -6 -7 -8   )-9[compress better]' \
       '-x[exclude the following names]' \
       '-i[include only the following names]' \
-      "(-f -d -R -q -c -b -@ -F -FF -A -T -y -e -h -u -m -g -j -l -ll -L -=
v -z -t -tt -o -D -J -X -n -0 -1 -2 -3 -4 -5 -6 -7 -8 -9):zip file:_files -=
g '(#i)*.(zip|[ejw]ar)(-.)'" \
+      "(-f -d -R -q -c -b -@ -F -FF -A -T -y -e -h -u -m -g -j -l -ll -L -=
v -z -t -tt -o -D -J -X -n -0 -1 -2 -3 -4 -5 -6 -7 -8 -9):zip file:_files -=
g '(#i)*.(zip|xpi|[ejw]ar)(-.)'" \
       '*:file:->files' && ret=3D0
   ;;
   unzip)
@@ -75,7 +75,7 @@
       '-M[page output]' \
       '-x[exclude the following names]' \
       '-Z[zipinfo mode]:zipinfomode:->zipinfo' \
-      "(-p -f -u -l -t -z -n -o -j -C -X -q -qq -a -aa -v -L -M)1:zip file=
:_files -g '(#i)*.(zip|[ejw]ar)(-.)'" \
+      "(-p -f -u -l -t -z -n -o -j -C -X -q -qq -a -aa -v -L -M)1:zip file=
:_files -g '(#i)*.(zip|xpi|[ejw]ar)(-.)'" \
       '*:file:->files' && ret=3D0
   ;;
 esac
@@ -98,7 +98,7 @@
       '(-1 -2)-T[use sortable decimal format for file times]' \
       '-M[page output]' \
       '-x[exclude the following names]' \
-      "(-1 -2 -s -m -l -v -h -z -C -t -T -M)1:zip file:_files -g '(#i)*.(z=
ip|[ejw]ar)(-.)'" \
+      "(-1 -2 -s -m -l -v -h -z -C -t -T -M)1:zip file:_files -g '(#i)*.(z=
ip|xpi|[ejw]ar)(-.)'" \
       '*:file:->files' && ret=3D0
 fi
=20
@@ -112,7 +112,7 @@
   ;;
   files)
     if [[ $service =3D zip ]] && (( ! ${+opt_args[-d]} )); then
-      _wanted files expl zfile _files -g '^(#i)*.(zip|[ejw]ar)(-.)' && ret=
urn
+      _wanted files expl zfile _files -g '^(#i)*.(zip|xpi|[ejw]ar)(-.)' &&=
 return
     else
       zipfile=3D( $~line[1](|.zip|.ZIP) )
       [[ -z $zipfile[1] ]] && return 1

--ZPt4rx8FFjLCG7dd
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFFUBj2iH9aBScBsrMRAsTRAJ4qLnPxi5RjMmNbbyfBWbtPZiXaPQCfbI64
DE+DE6+uLCD0nfkpQGBLcqY=
=fJri
-----END PGP SIGNATURE-----

--ZPt4rx8FFjLCG7dd--


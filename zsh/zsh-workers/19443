From zsh-workers-return-19443-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 19 02:32:04 2004
Return-Path: <zsh-workers-return-19443-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2634 invoked from network); 19 Feb 2004 02:32:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Feb 2004 02:32:03 -0000
Received: (qmail 9869 invoked by alias); 19 Feb 2004 02:31:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19443
Received: (qmail 9829 invoked from network); 19 Feb 2004 02:31:56 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 19 Feb 2004 02:31:56 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [207.172.4.61] by sunsite.dk (MessageWall 1.0.8) with SMTP; 19 Feb 2004 2:31:56 -0000
Received: from 65-78-14-215.c3-0.nwt-ubr2.sbo-nwt.ma.cable.rcn.com ([65.78.14.215] helo=zion.rcn.com)
	by smtp02.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 1Atdyl-0004Rf-00
	for zsh-workers@sunsite.dk; Wed, 18 Feb 2004 21:31:55 -0500
Received: by zion.rcn.com (Postfix, from userid 500)
	id 051871E081; Wed, 18 Feb 2004 21:32:23 -0500 (EST)
To: zsh-workers@sunsite.dk
Subject: Test Failures from latest CVS sources
From: Vin Shelton <acs@alumni.princeton.edu>
Organization: EtherSoft, Inc
Date: Wed, 18 Feb 2004 21:32:21 -0500
Message-ID: <m3oervyf2i.fsf@zion.rcn.com>
Lines: 82
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On my linux 2.6.2 box (heavily modified Mandrake 9.0 system), I'm
seeing some test failures in builds from the latest CVS sources:
All the Y0? completion tests are failing:


/opt/src/zsh-2004-02-18/Test/Y01completion.ztst: starting.
Test /opt/src/zsh-2004-02-18/Test/Y01completion.ztst failed: non-zero status from preparation code:
  comptestinit -z $ZTST_testdir/../Src/zsh &&
  {
    mkdir dir1 &&
    mkdir dir2 &&
    touch file1 &&
    touch file2
  }
/opt/src/zsh-2004-02-18/Test/Y01completion.ztst: test failed.
Test /opt/src/zsh-2004-02-18/Test/Y01completion.ztst failed: bad status 1, expected 0 from:
  comptest $': \t\t\t\t\t\t\t'
Was testing: directories and files
/opt/src/zsh-2004-02-18/Test/Y01completion.ztst: test failed.
/opt/src/zsh-2004-02-18/Test/Y02compmatch.ztst: starting.
Test /opt/src/zsh-2004-02-18/Test/Y02compmatch.ztst failed: non-zero status from preparation code:
  comptestinit -z $ZTST_testdir/../Src/zsh &&
  {
    list1=(IndianRed IndianRed2 IndianRed3 IndianRed4)
    test_code () {
        matcher=$1;
        list=$2;
        code="compdef _tst tst ; _tst () { echo -n '<COMPADD>';compadd -M '"
        code="$code$matcher"
        code="$code'  - ${(P)list} ; echo  -n '</COMPADD>'"
        code="$code; $extra_cmd"
        code="$code; echo -n '<INSERT_POSITIONS>'"
        code="$code; echo \$compstate[insert_positions]"
        code="$code; echo -n '</INSERT_POSITIONS>'"
        code="$code}"
        comptesteval "$code"
    }
  }
/opt/src/zsh-2004-02-18/Test/Y02compmatch.ztst: test failed.
Test /opt/src/zsh-2004-02-18/Test/Y02compmatch.ztst failed: bad status 1, expected 0 from:
 test_code z: list1
 comptest  $'tst \t'
Error output:
(eval):1: command not found: test_code
Was testing: Match Error for "z:"
/opt/src/zsh-2004-02-18/Test/Y02compmatch.ztst: test failed.
/opt/src/zsh-2004-02-18/Test/Y03arguments.ztst: starting.
Test /opt/src/zsh-2004-02-18/Test/Y03arguments.ztst failed: non-zero status from preparation code:
  comptestinit -z $ZTST_testdir/../Src/zsh &&
  {
    comptesteval 'compdef _tst tst'
    tst_arguments () { comptesteval "_tst () { _arguments ${${(@qq)*}} }" }
  }
/opt/src/zsh-2004-02-18/Test/Y03arguments.ztst: test failed.
Test /opt/src/zsh-2004-02-18/Test/Y03arguments.ztst failed: bad status 1, expected 0 from:
 tst_arguments ':desc1:(arg1)'
 comptest $'tst \t\C-wa\t\C-war\t\C-warg\t\C-warg1\t\C-wr\t\C-wx\t \ty \t'
Error output:
(eval):1: command not found: tst_arguments
Was testing: one non-option argument
/opt/src/zsh-2004-02-18/Test/Y03arguments.ztst: test failed.
make[1]: [check] Error 1 (ignored)

zsh configuration
-----------------
zsh version               : 4.1.1-dev-1
host operating system     : i686-pc-linux-gnu
source code location      : /opt/src/zsh-2004-02-18
compiler                  : icc
preprocessor flags        : -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64
executable compiler flags : -O3 -tpp6 -axK -xK -ip 
module compiler flags     : -O3 -tpp6 -axK -xK -ip  -fPIC
executable linker flags   : -i_dynamic  -rdynamic
module linker flags       : -i_dynamic  -shared
library flags             : -ldl -lnsl -lcurses -lm  -lc
installation basename     : zsh
binary install path       : /usr/local/zsh-2004-02-18/bin
man page install path     : /usr/local/zsh-2004-02-18/man
info install path         : /usr/local/zsh-2004-02-18/info
functions install path    : /usr/local/share/zsh/4.1.1-dev-1/functions

  - Vin


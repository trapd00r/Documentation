From zsh-workers-return-14463-mason-zsh=primenet.com.au@sunsite.dk Wed May 23 19:33:45 2001
Return-Path: <zsh-workers-return-14463-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5150 invoked from network); 23 May 2001 19:33:43 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 May 2001 19:33:43 -0000
Received: (qmail 9591 invoked by alias); 23 May 2001 19:33:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14463
Received: (qmail 9580 invoked from network); 23 May 2001 19:33:28 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <010523123147.ZM9692@candle.brasslantern.com>
Date: Wed, 23 May 2001 12:31:47 -0700
In-Reply-To: <Pine.LNX.4.33L2.0105231114560.12475-100000@phong.blorf.net>
Comments: In reply to Wayne Davison <wayned@users.sourceforge.net>
        "Re: vi editting troubles" (May 23, 11:18am)
References: <Pine.LNX.4.33L2.0105231114560.12475-100000@phong.blorf.net>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Re: vi editting troubles
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 23, 11:18am, Wayne Davison wrote:
> 
> An off-the-cuff suggestion:  Would it be possible to have the C code
> call a "set completion defaults" shell function

The problem with any shell-function-based solution is that it requires a
special case for the `localoptions' setting.

Better, perhaps, would be to augment the _comp_options variable with a
_comp_setup variable, which would look something like this:

    _comp_setup='setopt ${_comp_options[@]} localtraps;
		 exec </dev/null;
		 trap - ZERR'

and then `eval' that variable in any function that is an entry point into
the completion system.


From zsh-workers-return-10423-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Apr 03 15:06:19 2000
Return-Path: <zsh-workers-return-10423-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2544 invoked from network); 3 Apr 2000 15:06:09 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Apr 2000 15:06:09 -0000
Received: (qmail 10381 invoked by alias); 3 Apr 2000 15:05:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10423
Received: (qmail 10285 invoked from network); 3 Apr 2000 15:05:24 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000403150512.ZM19247@candle.brasslantern.com>
Date: Mon, 3 Apr 2000 15:05:12 +0000
In-Reply-To: <20000403142912.D32194@thelonious.new.ox.ac.uk>
Comments: In reply to Adam Spiers <adam@spiers.net>
        "bug in FAQ section 1.7?" (Apr  3,  2:29pm)
References: <20000403142912.D32194@thelonious.new.ox.ac.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Adam Spiers <adam@spiers.net>,
        zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: bug in FAQ section 1.7?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 3,  2:29pm, Adam Spiers wrote:
} Subject: bug in FAQ section 1.7?
}
} sect(I don't have root access: how do I make zsh my login shell?)
} 
}   If you have zsh in a subdirectory mytt(bin) of your home directory,
}   put this in .profile:
}               ^^^^^^^^

That only applies if your login shell isn't already zsh.  You can't use
it to switch from one version of zsh to another.

You can either use chsh to set your shell back to bash and then use
the .profile trick to invoke /home/groups/zsh/bin/zsh, or you can use
something like this in .zprofile:

typeset -U zsh
zsh=('' /home/groups/zsh/bin/zsh(|-)*(N))
if [[ $#zsh -ne 1 &&
	( $SHELL != $zsh[-1] || zsh-$ZSH_VERSION < $zsh[-1]:t ) ]] &&
    $zsh[-1] -fc 'exit 0'
then
    export SHELL=$zsh[-1]
    exec $SHELL -$-
fi

The above relies on the fact that zsh's "make install" puts both a `zsh'
and a `zsh-3.1.6-dev-21' into $bindir that are linked to each other.  I
haven't looked to see if /home/groups/zsh/bin/zsh/zsh-3.1.6-dev-21 is in
fact present on sourceforge; if it's not, the above at least won't go
into an infinite loop.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


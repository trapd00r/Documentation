From zsh-workers-return-24385-mason-zsh=primenet.com.au@sunsite.dk Sat Jan 12 20:57:55 2008
Return-Path: <zsh-workers-return-24385-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16148 invoked from network); 12 Jan 2008 20:57:53 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Jan 2008 20:57:53 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 89863 invoked from network); 12 Jan 2008 20:57:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2008 20:57:44 -0000
Received: (qmail 27658 invoked by alias); 12 Jan 2008 20:57:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24385
Received: (qmail 27641 invoked from network); 12 Jan 2008 20:57:40 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Jan 2008 20:57:40 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id 7F7CE8030782
	for <zsh-workers@sunsite.dk>; Sat, 12 Jan 2008 21:57:38 +0100 (CET)
Received: from rv-out-0910.google.com (rv-out-0910.google.com [209.85.198.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-workers@sunsite.dk>; Sat, 12 Jan 2008 21:57:37 +0100 (CET)
Received: by rv-out-0910.google.com with SMTP id b22so1154189rvf.21
        for <zsh-workers@sunsite.dk>; Sat, 12 Jan 2008 12:57:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=zjnOFUSYzXAKMDZKQxZG2CZTUQyJs1GRjYauBpuw83Q=;
        b=fjKb2xcth5nvfoU85WAcjABIXECCCLJKn1Fn3ohTasULZfxKHguWHGrdLzUCtov/cYCdGKq/fFsJ+K/TfPXk6hzToN/Oq1JSjWjYR03gvkTHrLtMuM4we+d4CoFNRSdoS6EjMMipPXUq8Iascb12ZpWy3mUL2Jx2Qdf7CjmG5m0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=PA/f5iZrIxUldoi4XwJYf99W2UnS2dFUKljGOqKDAPO2vlJi05Ak1Bb1lwGXoiAHYWxCsn1msT4+U84rgYpArV++pFpDTwGGYMNOCaxHCqMDIxR17D+Vv/WFNI522+oAXhkuC7LwAm6bZsgxVAZSJ4M5bM41wm067DqD0ZVmbic=
Received: by 10.141.172.6 with SMTP id z6mr2888515rvo.54.1200171455186;
        Sat, 12 Jan 2008 12:57:35 -0800 (PST)
Received: by 10.141.202.18 with HTTP; Sat, 12 Jan 2008 12:57:35 -0800 (PST)
Message-ID: <237967ef0801121257s6a478358k897be96f607b7408@mail.gmail.com>
Date: Sat, 12 Jan 2008 21:57:35 +0100
From: "Mikael Magnusson" <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: "show" completion et al spammy when binaries don't exist
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV using ClamSMTP

I was looking at another window while writing and typed
show show gi<tab>
instead of git show gi<tab> and got the following:
% show show gi_mh:1: command not found: mhpath
_mh:1: command not found: mhparam
_mh:1: command not found: mhpath
_mh:1: command not found: mhparam
_mh:1: command not found: mhpath
_mh:1: command not found: mhparam
_mh:1: command not found: mhpath
_mh:1: command not found: mhparam
                           show show gi<cursor here>
---- no match for: `sequence' or `corrections'

After the error messages the prompt wasn't redrawn correctly, but I
think that is expected. In _mh all commands are called with 2>
/dev/null, but that doesn't help much since zsh is the one to print
the messages. Which leads me to ask, is the stderr output of
completion scripts ever wanted in the terminal? Maybe it should be
redirected more centrally? Putting
which mhpath >& /dev/null || return
on the first line of _mh fixes the problem, I don't know if some other
method would be preferred. It seems _git also suffers from this
problem. Typing apt-get install <tab> repeatedly inserts a space. Are
these sort of things to be considered as problems, or am I stupid to
press tab after a command I don't have?

-- 
Mikael Magnusson


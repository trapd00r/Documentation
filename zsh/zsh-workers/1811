From zsh-workers-request@euclid.skiles.gatech.edu  Mon Jul 29 13:44:43 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id NAA01732 for <mason@primenet.com.au>; Mon, 29 Jul 1996 13:44:40 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id XAA07291; Sun, 28 Jul 1996 23:23:44 -0400 (EDT)
Resent-Date: Sun, 28 Jul 1996 23:23:44 -0400 (EDT)
Date: Sun, 28 Jul 1996 23:21:06 -0400 (EDT)
From: "Greg J. Badros" <gjb@moa.cs.duke.edu>
To: zsh-workers@math.gatech.edu
Subject: POSTPROMPT patches
Message-Id: <Pine.SOL.3.93.960728231619.3481C-200000@moa.cs.duke.edu>
Mime-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-1804928587-838610466=:3481"
Resent-Message-ID: <"9yFu91.0.rn1.0x2_n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1811
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1804928587-838610466=:3481
Content-Type: TEXT/PLAIN; charset=US-ASCII

I've included patches to add a new variable, $POSTPROMPT, which, if set,
outputs a prompt after it parses the command line.  The patch also adds %H
to the prompt substitution characters, where %H means the last history
line.

The patch probably isn't perfect, and maybe someone can improve it for
inclusion in zsh-3.0, whenever that's set for release.

Recommended use of the patch is with XTERM, to set:

export POSTPROMPT='%{^[]0;%H^G%}'

which uses XTERM escape sequences to set the title bar to the currently
executing command; especially useful for longer-running commands.

I'm just now joining the zsh-workers list, so I apologize if I've missed
the boat in any way.

Greg J. Badros
gjb@cs.duke.edu

---559023410-1804928587-838610466=:3481
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="zsh-3.0-patch.gjb"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SOL.3.93.960728232106.3481D@moa.cs.duke.edu>
Content-Description: 

KioqIDEuMQkxOTk2LzA3LzI5IDAxOjM5OjAxDQotLS0gZ2xvYmFscy5oCTE5
OTYvMDcvMjkgMDE6Mzk6MDkNCioqKioqKioqKioqKioqKg0KKioqIDMyOSwz
MzQgKioqKg0KLS0tIDMyOSwzMzUgLS0tLQ0KICBFWFRFUk4gY2hhciAqcHJv
bXB0MjsJCS8qIGV0Yy4gICAgICAgICovDQogIEVYVEVSTiBjaGFyICpwcm9t
cHQzOw0KICBFWFRFUk4gY2hhciAqcHJvbXB0NDsNCisgRVhURVJOIGNoYXIg
KnBvc3Rwcm9tcHQ7CS8qICRQT1NUUFJPTVBUICovDQogIEVYVEVSTiBjaGFy
ICpycHJvbXB0OwkJLyogJFJQUk9NUFQgICAgKi8NCiAgRVhURVJOIGNoYXIg
KnNwcm9tcHQ7DQogIA0KKioqIDEuMQkxOTk2LzA3LzI5IDAxOjMyOjMwDQot
LS0gaGFzaHRhYmxlLmgJMTk5Ni8wNy8yOSAwMTozNDoyNw0KKioqKioqKioq
KioqKioqDQoqKiogMTM5LDE0NCAqKioqDQotLS0gMTM5LDE0NSAtLS0tDQog
IElQREVGNygiUFMyIiwgJnByb21wdDIpLA0KICBJUERFRjcoIlBTMyIsICZw
cm9tcHQzKSwNCiAgSVBERUY3KCJQUzQiLCAmcHJvbXB0NCksDQorIElQREVG
NygiUE9TVFBST01QVCIsICZwb3N0cHJvbXB0KSwNCiAgSVBERUY3KCJSUFMx
IiwgJnJwcm9tcHQpLA0KICBJUERFRjcoIlNQUk9NUFQiLCAmc3Byb21wdCks
DQogIElQREVGNygiMCIsICZhcmd6ZXJvKSwNCioqKiAxLjEJMTk5Ni8wNy8y
OSAwMTozMTo0Mw0KLS0tIGluaXQuYwkxOTk2LzA3LzI5IDAyOjAzOjA5DQoq
KioqKioqKioqKioqKioNCioqKiA1MTUsNTIwICoqKioNCi0tLSA1MTUsNTIx
IC0tLS0NCiAgCXByb21wdDMgPSB6dHJkdXAoIiIpOw0KICAJcHJvbXB0NCA9
IHp0cmR1cCgiIik7DQogICAgICB9DQorICAgICBwb3N0cHJvbXB0ID0genRy
ZHVwKCIiKTsNCiAgICAgIHNwcm9tcHQgPSB6dHJkdXAoInpzaDogY29ycmVj
dCAnJVInIHRvICclcicgW255YWVdPyAiKTsNCiAgDQogICAgICBpZiAoISh0
dHlzdHJuYW1lID0genRyZHVwKHR0eW5hbWUoU0hUVFkpKSkpDQoqKiogMS4x
CTE5OTYvMDcvMjkgMDE6MzQ6NTENCi0tLSBwYXJzZS5jCTE5OTYvMDcvMjkg
MDI6MjY6NDcNCioqKioqKioqKioqKioqKg0KKioqIDExOSwxMjQgKioqKg0K
LS0tIDExOSwxMzIgLS0tLQ0KICAgICAgfSBlbHNlIHsNCiAgCWwtPnJpZ2h0
ID0gcGFyX2V2ZW50KCk7DQogICAgICB9DQorICAgICAvKiBnamIgYWRkZWQg
Ki8NCisgICAgIGlmIChpbnRlcmFjdCAmJiBwb3N0cHJvbXB0ICE9IDAgJiYg
KnBvc3Rwcm9tcHQgIT0gTlVMTCkgew0KKyAJaW50IHBsZW49MDsNCisgICAg
ICAgICBjdXJoaXN0Kys7DQorIAlmd3JpdGUocHV0cHJvbXB0KHBvc3Rwcm9t
cHQsJnBsZW4sTlVMTCwwKSwgc2l6ZW9mKGNoYXIpLCBwbGVuLCBzdGRlcnIp
Ow0KKyAJZmZsdXNoKHN0ZGVycik7DQorICAgICAgICAgY3VyaGlzdC0tOw0K
KyAgICAgfQ0KICAgICAgcmV0dXJuIGw7DQogIH0NCiAgDQoqKiogMS4xCTE5
OTYvMDcvMjkgMDE6MzU6MjcNCi0tLSB6bGVfbWlzYy5jCTE5OTYvMDcvMjkg
MDM6MDQ6MjcNCioqKioqKioqKioqKioqKg0KKioqIDEwMzAsMTAzNSAqKioq
DQotLS0gMTAzMCwxMDQ0IC0tLS0NCiAgCQkgICAgc3MrKzsNCiAgCQlzdHJh
ZGQoc3MpOw0KICAJCWJyZWFrOw0KKyAJICAgIGNhc2UgJ0gnOg0KKyAJCWlm
IChjdXJoaXN0ID4gMCkgew0KKyAJCSAgICBpbnQgY2NoOw0KKyAJCSAgICBj
aGFyICpzeiA9IHF1aWV0Z2V0ZXZlbnQoY3VyaGlzdC0xKTsNCisgCQkgICAg
Y2NoID0gc3RybGVuKHN6KSAtIDE7DQorIAkJICAgIHN0cm5jcHkoYnAsc3os
Y2NoKTsNCisgCQkgICAgYnAgKz0gY2NoOw0KKyAJCX0NCisgCQlicmVhazsN
CiAgCSAgICBjYXNlICdoJzoNCiAgCSAgICBjYXNlICchJzoNCiAgCQlhZGRi
dWZzcGMoRElHQlVGU0laRSk7DQo=
---559023410-1804928587-838610466=:3481--


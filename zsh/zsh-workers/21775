From zsh-workers-return-21775-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 28 10:15:55 2005
Return-Path: <zsh-workers-return-21775-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7894 invoked from network); 28 Sep 2005 10:15:50 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Sep 2005 10:15:50 -0000
Received: (qmail 17434 invoked from network); 28 Sep 2005 10:15:45 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2005 10:15:45 -0000
Received: (qmail 24605 invoked by alias); 28 Sep 2005 10:15:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21775
Received: (qmail 24596 invoked from network); 28 Sep 2005 10:15:41 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Sep 2005 10:15:41 -0000
Received: (qmail 17102 invoked from network); 28 Sep 2005 10:15:41 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2005 10:15:40 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T73a8d870820a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Wed, 28 Sep 2005 11:13:15 +0100
Received: from csr.com ([10.102.144.127]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 28 Sep 2005 11:17:33 +0100
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Regression in UTF-8 support 
In-reply-to: <200509280704.50012.arvidjaar@newmail.ru> 
References: <200509252005.41824.arvidjaar@newmail.ru> <20050927152247.6a1f6452.pws@csr.com> <237967ef05092710007dfd7b1b@mail.gmail.com> <200509280704.50012.arvidjaar@newmail.ru>
Date: Wed, 28 Sep 2005 11:15:39 +0100
Message-ID: <5327.1127902539@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 28 Sep 2005 10:17:33.0423 (UTC) FILETIME=[D73AA7F0:01C5C415]
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Andrey Borzenkov wrote:
> Zsh saves it metafied. I agree, external representation should be unmetafied;
> OTOH this is unlikely to depend on UTF-8 support, it is just that those
> characters are usually unused in 8-bit character sets so nobody has probably
> noticed this before

Metafication at this stage is mostly just to preserve a NULL.  It's
other use, protecting tokens, doesn't really apply in strings in the
command line editor (although it's needed while the string is being processed
by the main shell during completion).  However, a NULL won't occur in
the character sets we're using except as an ASCII NULL (since the
character set must be an extension of ASCII, contrary to the test I
added to the prompt code), so this isn't really a multibyte issue.
On the other hand, you *can* add a literal NULL to a command line if
you want.

pws


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


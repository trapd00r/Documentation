From schaefer@candle.brasslantern.com Fri Jul 12 03:09:40 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id DAA15591 for <mason@werple.mira.net.au>; Fri, 12 Jul 1996 03:09:38 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA22576; Thu, 11 Jul 1996 12:46:59 -0400 (EDT)
Resent-Date: Thu, 11 Jul 1996 12:46:59 -0400 (EDT)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <960711094527.ZM8485@candle.brasslantern.com>
Date: Thu, 11 Jul 1996 09:45:24 -0700
In-Reply-To: Zoltan Hidvegi <hzoli@cs.elte.hu>
        "Re: Remaining zsh3.0-pre2 bugs" (Jul 11,  2:16pm)
References: <199607111216.OAA01289@bolyai.cs.elte.hu>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.702 02jul96)
To: Zoltan Hidvegi <hzoli@cs.elte.hu>
Subject: Re: Remaining zsh3.0-pre2 bugs
Cc: zsh-workers@math.gatech.edu
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"kOF-33.0.gW5.20Jvn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1610
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1438
Status: OR

On Jul 11,  2:16pm, Zoltan Hidvegi wrote:
} Subject: Re: Remaining zsh3.0-pre2 bugs
}
} But the line should not be restored since
} 
} % echo '*'<TAB>
} 
} should give
} 
} % echo \*
} 
} and not
} 
} % echo *

When I say "restored", I mean *restored*.  What it gives after my patch is

% echo '*'

Not * or \*.  (Actually, I'm fibbing.  With "'*'" it would give "\\*"
because there's no embedded newline.  With "'*\n'" it gives "'*\n'".
Which is exactly what it gave before my patch, in the case where the
completion fails.)

} I do not line you alternative solution as well which executes
} push-line-or-edit because it is probably not very convinient for those
} using single_line_zle.

Well, that could be easily caught, too, and calling pushlineoredit could
be skipped in all cases if wb >= chl.  (For confused zsh-workers, I sent
one more patch only to Zoltan, which would automatically pushlineoredit
when completion may have modified something across an embedded newline.)

However, you're right that it's not that big a deal.  Could we at least
put a `feep();' before `return;' inside the `if (wb < 0 || ...)' so that
it doesn't seem that zsh is sitting there doing nothing?

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern

New male in /home/schaefer:
>N  2 Justin William Schaefer  Sat May 11 03:43  53/4040  "Happy Birthday"



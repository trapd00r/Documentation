From zsh-workers-return-27765-mason-zsh=primenet.com.au@zsh.org Wed Mar 03 21:12:29 2010
Return-Path: <zsh-workers-return-27765-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21031 invoked by alias); 3 Mar 2010 21:12:29 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27765
Received: (qmail 7214 invoked from network); 3 Mar 2010 21:12:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at bewatermyfriend.org does not designate permitted sender hosts)
From: Frank Terbeck <ft@bewatermyfriend.org>
To: zsh-workers@zsh.org
Cc: Bart Trojanowski <bart@jukie.net>
Subject: PATCH: vcs_info: Ignore chpwd_functions[] in VCS_INFO_realpath()
Date: Wed,  3 Mar 2010 22:06:06 +0100
Message-Id: <1267650366-11200-1-git-send-email-ft@bewatermyfriend.org>
X-Mailer: git-send-email 1.7.0
X-Df-Sender: 430444

Spotted and fix suggested by Bart Trojanowski <bart@jukie.net>.

Regards, Frank
---
 Functions/VCS_Info/VCS_INFO_realpath |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/Functions/VCS_Info/VCS_INFO_realpath b/Functions/VCS_Info/VCS_INFO_realpath
index c0f48a4..07a9749 100644
--- a/Functions/VCS_Info/VCS_INFO_realpath
+++ b/Functions/VCS_Info/VCS_INFO_realpath
@@ -11,6 +11,7 @@ setopt localoptions NO_shwordsplit
 
 (
     (( ${+functions[chpwd]} )) && unfunction chpwd
+    (( ${#chpwd_functions} )) && chpwd_functions=()
     setopt chaselinks
     builtin cd $1 2>/dev/null && pwd
 )
-- 
1.7.0


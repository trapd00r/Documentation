From zsh-users-return-4494-mason-zsh=primenet.com.au@sunsite.dk Wed Nov 21 23:41:51 2001
Return-Path: <zsh-users-return-4494-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10083 invoked from network); 21 Nov 2001 23:41:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 21 Nov 2001 23:41:50 -0000
Received: (qmail 25787 invoked by alias); 21 Nov 2001 23:41:33 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4494
Received: (qmail 25771 invoked from network); 21 Nov 2001 23:41:31 -0000
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <011121154114.ZM2755@candle.brasslantern.com>
Date: Wed, 21 Nov 2001 15:41:14 -0800
In-Reply-To: <20011121143008.A2559@lorien.emufarm.org>
Comments: In reply to Danek Duvall <duvall@emufarm.org>
        "Re: history editing" (Nov 21,  2:30pm)
References: <20011116100106.A944@lorien.emufarm.org> 
	<Pine.LNX.4.21.0111211350030.25494-100000@life.blorf.net> 
	<20011121143008.A2559@lorien.emufarm.org>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Danek Duvall <duvall@emufarm.org>
Subject: Re: history editing
Cc: zsh-users@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 21,  2:30pm, Danek Duvall wrote:
> 
> I think this was the key I was missing.  fc -R doesn't replace the
> current history with what it reads in, it adds it to the end.
> 
> I'm surprised, then, that this ever worked.

If $SAVEHIST is greater than $HISTSIZE and the file that you're editing was
non-empty before, then after editing there could still be more than $HISTSIZE
lines in the file.  In that event you'd read in the last $HISTSIZE of those
lines, pushing the entire current history out.

In other words, you only see the effect you were seeing when the number of
lines in the file is less than or equal to $HISTSIZE.


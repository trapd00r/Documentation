From zsh-users-return-11874-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 24 11:26:31 2007
Return-Path: <zsh-users-return-11874-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5556 invoked from network); 24 Sep 2007 11:26:29 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Sep 2007 11:26:29 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46322 invoked from network); 24 Sep 2007 11:26:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Sep 2007 11:26:19 -0000
Received: (qmail 225 invoked by alias); 24 Sep 2007 11:26:11 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11874
Received: (qmail 205 invoked from network); 24 Sep 2007 11:26:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Sep 2007 11:26:10 -0000
Received: (qmail 45169 invoked from network); 24 Sep 2007 11:26:10 -0000
Received: from biscayne-one-station.mit.edu (18.7.7.80)
  by a.mx.sunsite.dk with SMTP; 24 Sep 2007 11:26:07 -0000
Received: from outgoing.mit.edu (OUTGOING-AUTH.MIT.EDU [18.7.22.103])
	by biscayne-one-station.mit.edu (8.13.6/8.9.2) with ESMTP id l8OBQ5Xp016291
	for <zsh-users@sunsite.dk>; Mon, 24 Sep 2007 07:26:05 -0400 (EDT)
Received: from cloudfall.mit.edu (CLOUDFALL.MIT.EDU [18.243.2.30])
	(authenticated bits=0)
        (User authenticated as mats_a@ATHENA.MIT.EDU)
	by outgoing.mit.edu (8.13.6/8.12.4) with ESMTP id l8OBQ4MG016192
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <zsh-users@sunsite.dk>; Mon, 24 Sep 2007 07:26:05 -0400 (EDT)
From: Mats Ahlgren <mats_a@MIT.EDU>
Reply-To: ahlgren@MIT.EDU
To: zsh-users@sunsite.dk
Subject: Autocompletion how-to?
Date: Mon, 24 Sep 2007 07:25:12 -0400
User-Agent: KMail/1.9.6
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <200709240725.13133.mats_a@mit.edu>
X-Scanned-By: MIMEDefang 2.42

Hello,

I've been experimenting with zsh with the manual as my guide, and 
can't figure out how to do a few things. Might anyone please be able 
to give insight and/or code snippets into how to create any of the 
following functionality?

Thank you.

Sincerely,
Mats
______________________________

* Have the list of completions always shown if {[size of completion 
list] < 50}, and dynamically shorten the list as you type each 
letter.

* Have hitting 'tab' and/or '/' immediately show a list of 
completions, if there is a unique match. (Currently one must 
hit 'tab' after typing '/', and must also hit 'tab' after 
autocompleting to a unique directory name.)
e.g. 
~/doc <tab>
~/documents/ <tab> [want to skip this line]
suggestions: music, videos, etc.
e.g.
~/documents/ <tab> [want to skip hitting <tab>]
suggestions: music, videos, etc.

* Use an external script to generate completions. (I had previously 
asked about this on the mailing list, but unfortunately have not been 
able to come up with anything.)
e.g. fuzzy descendant name search: Hit a keyboard shortcut, get a 
prompt, type something in, pass the typed string to a script that 
searches for a file/folder that's a descendant of the PWD 
(using 'locate') and returns to the shell a list of completions 
ranked by edit distance

* Make it so that when $variables are expanded, they do not add a 
space after them. (e.g. if I have $docs mapped to my 'documents' 
folder, and I autocomplete '$do<tab>', then I have to hit backspace 
then type '/' then start typing the rest of the directory path)

It would also be nice to have them add a '/' if the variable contains 
any '/' string or if the variable name is somehow flagged as "should 
add a / after autocompletion"

* Have two keys bound for menu completion, which are just like 
hitting 'tab' for menu completion, except you only tab through 
directories, or only files -- not both.

* Delete everything from end of line through the nearest '/' left of 
the cursor.
_______________________________
Also I've been having trouble finding info on the following:

* Specify a context for when specific options are passed to functions.
For example, I have an alias, which is 'place'='mv -t' (which I want 
to use so I never accidentally rename a file when all I'm doing is 
changing its location). I'd like to make it so 'mv -t' only 
autocompletes directories as the second argument.


Sorry if one or two of these questions may be basic, but it's taken 
weeks to get comfortable with zsh's powerful autocompletion system. 
=)


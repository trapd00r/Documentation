From zsh-workers-return-5324-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 08 17:20:44 1999
Return-Path: <zsh-workers-return-5324-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29345 invoked from network); 8 Feb 1999 17:20:43 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Feb 1999 17:20:43 -0000
Received: (qmail 14127 invoked by alias); 8 Feb 1999 17:19:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5324
Received: (qmail 14104 invoked from network); 8 Feb 1999 17:19:36 -0000
Message-ID: <19990208171902.12887.qmail@hotmail.com>
X-Originating-IP: [209.157.52.74]
From: "Matt Armstrong" <mattarmst@hotmail.com>
To: pws@ibmth.df.unipi.it, zsh-workers@sunsite.auc.dk
Subject: Re: PATCH zsh-3.1.5-pws-7: cygwin make fixes
Date: Mon, 08 Feb 1999 09:19:02 PST
Mime-Version: 1.0
Content-Type: text/plain

>"Bart Schaefer" wrote:
>> On Feb 7, 10:49pm, Matt Armstrong wrote:
>> } Subject: PATCH zsh-3.1.5-pws-7: cygwin make fixes
>> }
>> } I fixed #2 by re-doing the way signames.c is created.  
>> } Instead of a AWK script that gets run on a signal.h file, 
>> } a C program is compiled and run.  This gets it right even 
>> } if the signal.h file is hard to parse.
>> 
>> I haven't examined the patch in detail to check this, but did 
>> you make sure that the compilation of this program is 
>> performed in such a way that it executes correctly on the 
>> current hardware even when cross-compiling for >> another 
architecture?
>
>The trouble is mksignames actually has to run on the target
>architecture to generate the appropriate signal names.  I don't know
>if there's any way of doing that at all with autoconf.  Any more
>ideas?  We could maybe make it conditional on not cross-compiling,
>since it does solve the #include problem fairly neatly.

Check out my argument to Bart about why I think the mksignames.c
scheme is no less broken than signames.awk in this regard.  I think
there is a good chance that cross compiling was already broken, at
least with respect to finding all the signal names.

(And if this is the case, perhaps the code in mksignames.c 
should be stuck into zsh itself, wasting a bit of RAM but 
getting it right in all cases.)


______________________________________________________
Get Your Private, Free Email at http://www.hotmail.com


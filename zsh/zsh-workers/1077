From hzoli@cs.elte.hu Thu May 16 03:16:57 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id DAA04718 for <mason@werple.mira.net.au>; Thu, 16 May 1996 03:16:54 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA07967; Wed, 15 May 1996 12:56:15 -0400 (EDT)
Resent-Date: Wed, 15 May 1996 12:56:15 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199605151655.SAA05809@riesz.cs.elte.hu>
Subject: Re: zsh-2.6-beta17 : compiling on SCO - results
To: pbray@ind.tansu.com.au (Peter Bray)
Date: Wed, 15 May 1996 17:45:36 +0200 (MET DST)
In-Reply-To: <199605150215.MAA11431@cod.ind.tansu.com.au> from Peter Bray at "May 15, 96 12:15:43 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: application/pgp; format=text; x-action=sign
Content-Transfer-Encoding: 7bit
Sender: hzoli@cs.elte.hu
Resent-Message-ID: <"h-Ee4.0.Py1.loWcn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1077
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 9249
Status: O

-----BEGIN PGP SIGNED MESSAGE-----

[...]
> 	The Sun based platforms as expected compile without problem,
> but as is usual SCO is another matter.
[...]
>         gcc -c -I.. -I. -I.  -DHAVE_CONFIG_H -D__sco  -Wall -Wno-implicit -Wmissing-prototypes -O2 builtin.c
> In file included from zsh.h:35,
>                  from builtin.c:32:
> system.h:114: redefinition of `struct timezone'
> In file included from system.h:219,
>                  from zsh.h:35,
>                  from builtin.c:32:
> /usr/include/sys/select.h:41: redefinition of `struct timeval'

It seems that both sys/time.h and sys/select.h defines struct timeval (I do
not have access to SCO so I only guess that struct timeval is fist defined
in sys/time.h).  Try the patch below.  It checks for conflicts including
sys/time.h and sys/select.h.  Also it defines struct timezone if it is not
defined in sys/time.h.  Is there any system which defines struct timezone
but in (a file included from) sys/time.h?  I checked Solaris 2.4, SunOS
4.1.2, Linux, AIX 3.2, UP-UX A.09.05, IRIX 5.3.

> builtin.c: In function `bin_kill':
> builtin.c:663: warning: left-hand operand of comma expression has no effect

That's caused by putchar().  I have no idea what's that.

Bye,

Zoltan

begin 644 configure.diff.gz
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
:FIC)A9G2E!2./A;$6_X2;OP_`SZ(!163``!%
`
end

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3i
Charset: noconv

iQCVAwUBMZn8HgupSCiLN749AQGZgAP+NnQBTgDD+xH63yD4nd4uyhSjnxs2PKev
evY80xVzeHCxXePmprkPlC9qRx5HK9GyvSZ7rkLh9j0ZqWTXNpuXr1GsFoRkwqWz
1W5CG8mxIFJSfGaIZ5C0uiyBeAASKT7BbMmjcFSYPjN7ODbb607M96AuNLn8fAJW
bYf/zjze3WA=
=4qd8
-----END PGP SIGNATURE-----



From zsh-workers-return-19535-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 04 12:21:34 2004
Return-Path: <zsh-workers-return-19535-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10464 invoked from network); 4 Mar 2004 12:21:33 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Mar 2004 12:21:33 -0000
Received: (qmail 4326 invoked by alias); 4 Mar 2004 12:21:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19535
Received: (qmail 4300 invoked from network); 4 Mar 2004 12:21:17 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 4 Mar 2004 12:21:17 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.189.58.19] by sunsite.dk (MessageWall 1.0.8) with SMTP; 4 Mar 2004 12:21:16 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i24CLFv17788
	for <zsh-workers@sunsite.dk>; Thu, 4 Mar 2004 12:21:15 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T68223a7997c0a88d01588@MAILSWEEPER01.csr.com>;
 Thu, 4 Mar 2004 12:20:56 +0000
Received: from csr.com ([192.168.144.127]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 4 Mar 2004 12:22:56 +0000
To: Paul Ackersviller <pda@freeshell.org>,
   zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: 4.2.0-pre-1 on HP-UX 11.11 
In-reply-to: "Paul Ackersviller"'s message of "Thu, 04 Mar 2004 03:19:07 GMT."
             <20040304031907.GC18901@sdf> 
Date: Thu, 04 Mar 2004 12:21:14 +0000
Message-ID: <18831.1078402874@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 04 Mar 2004 12:22:56.0047 (UTC) FILETIME=[6C5D3BF0:01C401E3]

Paul Ackersviller wrote:
> On Wed, Mar 03, 2004 at 03:31:48PM +0000, Peter Stephenson wrote:
> > Does config.log explain why gettimeofday() and select() weren't found?
> 
> It does say the following.  Are there any flags that would get
> configure to tell me more?
> 
> cc: "configure", line 9234: error 1584: Inconsistent type declaration: "getti
> meofday".
> cc: "configure", line 9234: error 1584: Inconsistent type declaration: "selec
> t".

It should show the failed program, too --- you should have a chunk
beginning:

configure: failed program was:

Without this we don't have enough to go on.

I notice my config.log produces a cryptic message about problems with
gettimeofday on HPUX, but I have no idea what to do about it --- it
gives the impression that there is an adequate workaround.

I could propose alternative test programs for select and gettimeofday,
but without knowing what the problem is it's pointless --- this is
exactly what configure is supposed to be doing.

We desperately need developers (or at least configure experts) with
access to HPUX and AIX.  Otherwise we're stuck with tricks like:

#ifdef __hpux
#undef HAVE_SELECT
#undef HAVE_GETTIMEOFDAY
#define HAVE_SELECT 1
#define HAVE_GETTIMEOFDAY 1
#endif

which is horrible but might at least work.  (If you want to try it,
stick it at the end of Src/system.h and see if it now configures and
builds from scratch.)

By the way, it's possible the same problem exists with HAVE_POLL: it
should use poll() as an alternative to select().

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


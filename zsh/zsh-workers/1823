From zsh-workers-request@euclid.skiles.gatech.edu  Tue Jul 30 01:32:23 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id BAA00573 for <mason@primenet.com.au>; Tue, 30 Jul 1996 01:32:22 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id LAA19483; Mon, 29 Jul 1996 11:20:37 -0400 (EDT)
Resent-Date: Mon, 29 Jul 1996 11:20:37 -0400 (EDT)
Message-Id: <199607291519.RAA21573@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: bug message is a bug
Date: Mon, 29 Jul 1996 17:19:33 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"sAKvh1.0.Lm4.5RD_n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1823
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


% TRAPINT() { : }
% unfunction TRAPINT
BUG: I did not find any trap functions!

I don't think it's a bug at all.  The unfunction code removes the
function from the hash table, then calls the unsettrap() code.  This
looks for the already-removed function and incorrectly reports the
above error when it doesn't find it.  Unless the subroutine can tell
how it's been called, the DPUTS at l. 689 of signals.c should probably
just be removed.  I think the same test in the bin_trap code in
builtin.c is O.K.

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


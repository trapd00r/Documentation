From zsh-users-return-12016-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 14 21:31:35 2007
Return-Path: <zsh-users-return-12016-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4560 invoked from network); 14 Oct 2007 21:31:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.2.3
Received: from ns2.primenet.com.au (HELO primenet.com.au) (@203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 14 Oct 2007 21:31:28 -0000
Received: (qmail 21446 invoked from network); 14 Oct 2007 21:31:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns2.melb.primenet.com.au with SMTP; 14 Oct 2007 21:31:26 -0000
Received-SPF: none (ns2.melb.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 43003 invoked from network); 14 Oct 2007 21:31:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Oct 2007 21:31:18 -0000
Received: (qmail 12470 invoked by alias); 14 Oct 2007 21:31:10 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12016
Received: (qmail 12457 invoked from network); 14 Oct 2007 21:31:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 14 Oct 2007 21:31:10 -0000
Received: (qmail 41951 invoked from network); 14 Oct 2007 21:31:09 -0000
Received: from atom.smasher.org (69.55.237.145)
  by a.mx.sunsite.dk with SMTP; 14 Oct 2007 21:31:03 -0000
Received: (qmail 19387 invoked by uid 1000); 14 Oct 2007 21:31:01 -0000
Message-ID: <20071014213101.19386.qmail@smasher.org>
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Date: Mon, 15 Oct 2007 10:30:59 +1300 (NZDT)
From: Atom Smasher <atom@smasher.org>
In-Reply-To: <fetvt9$o91$1@ger.gmane.org>
MIME-Version: 1.0
OpenPGP: id=0xB88D52E4D9F57808; algo=1 (RSA); size=4096; url=http://atom.smasher.org/pgp.txt
References: <fet5io$fg8$1@ger.gmane.org> <20071014204722.76757.qmail@smasher.org>
 <fetvt9$o91$1@ger.gmane.org>
Subject: Re: To have cpu frequency or/and battery state percentage in my  
 prompt
To: zsh-users@sunsite.dk
X-POM: The Moon is Waxing Crescent (12% of Full)
X-Hashcash: 1:20:0710142131:zsh-users@sunsite.dk::J3DC3iu9e2KLM7w7:0000000000000
	00000000000000000000000051if

On Sun, 14 Oct 2007, giggz wrote:

>> i've got this (in colors, depending on battery state and level of 
>> charge) on FreeBSD 6.2 (acpi). if anyone wants details i'll post...
>>
>> short version: root runs a cron job every minute to get the battery 
>> state; this is written to a file in /tmp; the prompt looks for this 
>> file; if it's there it becomes part of the prompt.
>>
> Yes please :)
=====================

http://smasher.org/tmp/zshrc-and-battery-stuff.tgz

the shell script is run by root every minute. the overhead is too high to 
run it every precmd. if that script is not running (and thus not creating 
the /tmp/battery-status file) ie; on my server, the battery status part of 
the prompt is gracefully ignored.

the battery stuff is most likely freebsd specific (i haven't tested it on 
anything else) but there's a lot of wild-n-crazy stuff in my zshrc that 
can be "borrowed" for any system ;)

lemme know how it works out... and if anyone improves on anything there, 
please share it...


-- 
         ...atom

  ________________________
  http://atom.smasher.org/
  762A 3B98 A3C3 96C9 C6B7 582A B88D 52E4 D9F5 7808
  -------------------------------------------------

         "The seafood industry is literally plundering the ocean
          of life and some fifty percent of fish caught from the
          oceans is fed to cows, pigs, sheep, chickens etc in the
          form of fish meal. It also takes about fifty fish
          caught from the sea to raise one farm raised salmon."
                 -- Capt Paul Watson, A Very Inconvenient Truth


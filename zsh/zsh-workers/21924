From zsh-workers-return-21924-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 24 13:02:03 2005
Return-Path: <zsh-workers-return-21924-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17204 invoked from network); 24 Oct 2005 13:02:00 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Oct 2005 13:02:00 -0000
Received: (qmail 98664 invoked from network); 24 Oct 2005 13:01:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2005 13:01:54 -0000
Received: (qmail 3489 invoked by alias); 24 Oct 2005 13:01:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21924
Received: (qmail 3479 invoked from network); 24 Oct 2005 13:01:51 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Oct 2005 13:01:51 -0000
Received: (qmail 98384 invoked from network); 24 Oct 2005 13:01:51 -0000
Received: from cluster-d.mailcontrol.com (HELO rly30d.srv.mailcontrol.com) (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2005 13:01:48 -0000
Received: from exchangejp.csr.com ([62.189.241.202])
	by rly30d.srv.mailcontrol.com (MailControl) with ESMTP id j9OD1Rbc010774
	for <zsh-workers@sunsite.dk>; Mon, 24 Oct 2005 14:01:45 +0100
Received: from exchange03.csr.com ([10.100.137.60]) by exchangejp.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 24 Oct 2005 22:03:51 +0900
Received: from csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 24 Oct 2005 14:03:47 +0100
To: zsh-workers@sunsite.dk
Subject: Re: zshall.1 
In-reply-to: <20051024123347.GC355@DervishD> 
References: <20051024080141.GA18213@fermat.math.technion.ac.il> <EXCHANGE03dgpyIb84V00007ae6@exchange03.csr.com> <5ed187370510240452l26ce144cyf23d0b3c7decf259@mail.gmail.com> <20051024130020.341f1235.pws@csr.com> <20051024123347.GC355@DervishD>
Comments: In-reply-to DervishD <zsh@dervishd.net>
   message dated "Mon, 24 Oct 2005 14:33:47 +0200."
Date: Mon, 24 Oct 2005 14:01:30 +0100
From: Peter Stephenson <pws@csr.com>
Message-ID: <EXCHANGE03i2V6w6PmA00007caf@exchange03.csr.com>
X-OriginalArrivalTime: 24 Oct 2005 13:03:47.0749 (UTC) FILETIME=[5F218550:01C5D89B]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-05-40-01 (www.mailcontrol.com) on 10.68.0.140
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.4

DervishD wrote:
>     The real problem is that autoconf doesn't force the developer to
> change the names even when program-whatever options are used. So
> there is really NO WAY of telling if those options are intended to
> modify installation names or to do packaging: the developer can use
> it for both things (that's one of the million reasons why I wrote
> MOBS for my projects).

Well, we get to decide in our case... I think something like the following
ought to work, though I haven't tried this in situ (I did debug the
sed command)... sorry if this gets wrapped badly:

Index: Doc/Makefile.in
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Makefile.in,v
retrieving revision 1.30
diff -u -r1.30 Makefile.in
--- Doc/Makefile.in	21 Oct 2005 09:51:55 -0000	1.30
+++ Doc/Makefile.in	24 Oct 2005 12:57:24 -0000
@@ -153,7 +153,7 @@
 	esac; \
 	case '$(YODL)' in :*) touch $$target ;; *) \
 	    echo $(YODL) -o $$target -I$(sdir) -DZSHALL -w zman.yo version.yo zsh.yo; \
-	    $(YODL) -I$(sdir) -DZSHALL -w zman.yo version.yo zsh.yo | sed -e '1s/\\-/-/g' -e '/^\.'\''/d' > $$target \
+	    $(YODL) -I$(sdir) -DZSHALL -w zman.yo version.yo zsh.yo | sed -e '1s/\\-/-/g' -e '/^\.'\''/d' -e 's|^\.so man1/zsh|.so man1/$(tzsh)|' > $$target \
 	;; esac; \
 
 ../META-FAQ: META-FAQ.yo Zsh/metafaq.yo

pws


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com


From zsh-workers-return-15961-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 08 06:36:33 2001
Return-Path: <zsh-workers-return-15961-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15378 invoked from network); 8 Oct 2001 06:36:32 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Oct 2001 06:36:32 -0000
Received: (qmail 12920 invoked by alias); 8 Oct 2001 06:36:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15961
Received: (qmail 12905 invoked from network); 8 Oct 2001 06:36:26 -0000
To: zsh-workers@sunsite.dk
Path: not-for-mail
From: Geoff Wing <mason@primenet.com.au>
X-Newsgroups: lists.zsh.workers
Subject: Re: zsh 4.0.2 (powerpc-apple-darwin1.4)
Date: Mon, 8 Oct 2001 06:36:21 +0000 (UTC)
Organization: PrimeNet Computer Consultants
Lines: 26
Message-ID: <9prhh5$drc$1@coral.primenet.com.au>
References: <20011008001533.A7577@fysh.org> <000601c14fc2$afabdbd0$21c9ca95@mow.siemens.ru>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 1002522981 14188 203.43.15.2 (8 Oct 2001 06:36:21 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: Mon, 8 Oct 2001 06:36:21 +0000 (UTC)
User-Agent: slrn/0.9.7.2 (NetBSD)

Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru> typed:
:> >> configure goes to some effort to avoid using the -s flag where that
:> >> wouldn't work.
:> But it only makes that effort when it's likely to need it, which is when
:> it's doing dynamic module loading.
: Obviously we hit the case when we need it even without dynamic loading.
: Now we have to come up with good test for it.

Maybe this bit of zshconfig.ac needs to be pulled into zsh-4 branch.

-------------------- snip from zshconfig.ac --------------------
if test -n "$auto_ldflags"; then
  case "${enable_zsh_debug}$host_os" in
    yesaix*|yeshpux*|yesnetbsd*|yesopenbsd*) ;;  # "ld -g" is not valid on these systems
    darwin*) LDFLAGS=-Wl,-x ;;
    yes*)    LDFLAGS=-g ;;
    *)       LDFLAGS=-s ;;
  esac
fi
----------------------------------------------------------------

Regards,
-- 
Geoff Wing  <gcw@pobox.com>
rxvt stuff  <gcw@rxvt.org>
zsh stuff   <gcw@zsh.org>


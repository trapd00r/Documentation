From zsh-users-return-3655-mason-zsh=primenet.com.au@sunsite.dk Sun Mar 11 10:01:51 2001
Return-Path: <zsh-users-return-3655-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3200 invoked from network); 11 Mar 2001 10:01:50 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Mar 2001 10:01:50 -0000
Received: (qmail 234 invoked by alias); 11 Mar 2001 10:01:41 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3655
Received: (qmail 223 invoked from network); 11 Mar 2001 10:01:40 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Zvi Har'El" <rl@math.technion.ac.il>,
   "ZSH Users" <zsh-users@sunsite.auc.dk>
Subject: RE: History Up key
Date: Sun, 11 Mar 2001 13:01:33 +0300
Message-ID: <001801c0aa12$40465be0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal
In-Reply-To: <Pine.GSO.4.21.0103111058410.3506-100000@leeor.math.technion.ac.il>

Hi,
>
> I have been using zsh-3.0.8 until yesterday, when I decided to switch to
> zsh-4.0.1-pre2. I have one problem, which I want to report. It
> might be an old
> story, but I am not aware of it:
>
> I am using vi key binding. When I want to repeare my repeat command, I used
> to hit the "cursor-up" key, see the last command and hit enter. The
> fact that I
> am at vi-insert-mode still allowed the binding of "cursor-up" to
> "up-line-or-history".
>
> However, upgrading to zsh 4, the binding apparently disappeared,
> and I have to
> hit the escape key before the cursor-up to go into vi-command-mode. I think
> this behavior is the same as in bash, but I find it a little
> annoying. Is this
> intentional? Is there any setting I can  do to have the old behavior?
>

bindkey -M viins $terminfo[kcuu1] up-line-or-history

replace $terminfo[kcuu1] with your favorite cursor-up esc sequence; I was lazy
to look it up. Actually, the above is quite portable (better is probably
${terminfo[kcuu1]-some fallback}, but I'm not sure if it really works).

I believe, change was deliberate, but I forgot the reasons ... it was really
long time - I think over three years. And I switched over to emacs binding
long ago (but have been using something similar before).

Anyway, in vi mode (bindkey -v) you have two keymaps - viins (for input) and
vicmd (for command mode). To change key binding use 'bindkey -M <keymap>'

-andrej


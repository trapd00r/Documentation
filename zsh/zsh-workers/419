From zsh-workers-request@math.gatech.edu  Wed Oct  4 23:16:58 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.net.au (8.7/8.7) with SMTP id XAA08498 for <mason@werple.mira.net.au>; Wed, 4 Oct 1995 23:16:54 +1000 (EST)
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA09838
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Wed, 4 Oct 1995 09:10:36 -0400
Received: by math (5.x/SMI-SVR4)
	id AA26510; Wed, 4 Oct 1995 09:01:31 -0400
Resent-Date: Wed, 4 Oct 1995 14:00:08 +0100 (MET)
Old-Return-Path: <hzoli@cs.elte.hu>
From: hzoli@cs.elte.hu (Zoltan Hidvegi)
Message-Id: <9510041300.AA17676@turan.elte.hu>
Subject: Re: problem with 8-bit chars?
To: carlos@snfep1.if.usp.br (Carlos Carvalho)
Date: Wed, 4 Oct 1995 14:00:08 +0100 (MET)
Cc: zsh-workers@math.gatech.edu (zsh-workers)
In-Reply-To: <199510021635.NAA13995@snfep1.if.usp.br> from "Carlos Carvalho" at Oct 2, 95 01:35:13 pm
X-Mailer: ELM [version 2.4 PL23]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"bvqXB.0.8U6.fMeSm"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/419
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Carlos Carvalho wrote:
> 
> version 2.6-beta10-hzoli10.3 on linux
> 
> I tried "lpr curr@culo.lj", where the @ stands for the letter i with an
> accute accent, and got "zsh: command not found: ulo.lj". Completion on
> the filename works fine. To manage to print I had to put the filename
> in single quotes :-(
> 
> Carlos

The bug is in Peter's input patches.  It checks wether the character returned
by ingetc() is negative or not.  If it is negative, it thinks that it is an
error.  This only happens when history expansion is active, so single quotes
or the nobanghist option prevents this bug.  It can be fixed by some explicit
casts from signed  to unsigned characters, but I do not have time do play with
that now (it is very trivial to fix, but we shold be carefull not to break
comparison line c == HISTSPACE etc.)

Zoltan


From zsh-workers-return-10949-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 26 23:59:53 2000
Return-Path: <zsh-workers-return-10949-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11001 invoked from network); 26 Apr 2000 23:59:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Apr 2000 23:59:51 -0000
Received: (qmail 21467 invoked by alias); 26 Apr 2000 23:59:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10949
Received: (qmail 21457 invoked from network); 26 Apr 2000 23:59:43 -0000
Date: Thu, 27 Apr 2000 00:59:42 +0100
From: Adam Spiers <adam@spiers.net>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: improved _perl_modules
Message-ID: <20000427005942.B16378@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh-workers@sunsite.auc.dk
References: <200004250809.KAA01270@beta.informatik.hu-berlin.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <200004250809.KAA01270@beta.informatik.hu-berlin.de>; from wischnow@informatik.hu-berlin.de on Tue, Apr 25, 2000 at 10:09:07AM +0200
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

Sven Wischnowsky (wischnow@informatik.hu-berlin.de) wrote:
> 
> Adam Spiers wrote:
> 
> > If Perl isn't found by the `which' below, it might be nice to warn the
> > user, but I don't know how to do that.  I thought of _message but the
> > list of completions gets in the way ...  Maybe it's not worth the
> > effort.
> 
> I haven't tried, but _message should work under every circumstance. And
> from my experience with _arguments, it seems to. Could you give us a
> simple example?

Strange, it seems to work now.

Index: Completion/User/_perl_modules
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/_perl_modules,v
retrieving revision 1.2
diff -u -r1.2 _perl_modules
--- Completion/User/_perl_modules	2000/04/26 08:36:44	1.2
+++ Completion/User/_perl_modules	2000/04/26 23:59:13
@@ -31,6 +31,7 @@
     else
       # If perl isn't there, one wonders why the user's trying to
       # complete Perl modules.  Maybe her $path is wrong?
+      _message "Didn't find perl on \$PATH; guessing @INC ..."
 
       setopt localoptions extendedglob
       inc=( /usr/lib/perl5{,/{site_perl/,}<5->.([0-9]##)}(N) 


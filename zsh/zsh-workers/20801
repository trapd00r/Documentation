From zsh-workers-return-20801-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 08 06:42:40 2005
Return-Path: <zsh-workers-return-20801-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28 invoked from network); 8 Feb 2005 06:42:39 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Feb 2005 06:42:39 -0000
Received: (qmail 23166 invoked from network); 8 Feb 2005 06:42:31 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Feb 2005 06:42:31 -0000
Received: (qmail 17818 invoked by alias); 8 Feb 2005 06:42:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20801
Received: (qmail 24986 invoked from network); 8 Feb 2005 05:42:24 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Feb 2005 05:42:24 -0000
Received: (qmail 94436 invoked from network); 8 Feb 2005 05:42:24 -0000
Received: from wproxy.gmail.com (64.233.184.197)
  by a.mx.sunsite.dk with SMTP; 8 Feb 2005 05:42:21 -0000
Received: by wproxy.gmail.com with SMTP id 58so857767wri
        for <zsh-workers@sunsite.dk>; Mon, 07 Feb 2005 21:42:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=VGcE+8SAwlGk8rYgHj6rexzModjkSOLbHXbul+j/mYV5cXyq4X+I3LDVDfrAor1ftAad/xf6EEVFCmog3PVXluA+eO1O8OsLRlvsjtsDIJMRbBkZ3evA9xg4C6zI3eYFpqVB//gQKVi0xhTPbmjrewksWQ3uO350L1MMQla+PWw=
Received: by 10.54.44.45 with SMTP id r45mr44283wrr;
        Mon, 07 Feb 2005 21:42:20 -0800 (PST)
Received: by 10.54.28.74 with HTTP; Mon, 7 Feb 2005 21:42:19 -0800 (PST)
Message-ID: <bf38a9f0502072142afef978@mail.gmail.com>
Date: Tue, 8 Feb 2005 16:42:19 +1100
From: Kris Shannon <kris.shannon@gmail.com>
Reply-To: Kris Shannon <kris.shannon@gmail.com>
To: zsh-workers@sunsite.dk
Subject: PATCH: Typo in _init_d
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=BAYES_00,RCVD_BY_IP 
	autolearn=ham version=3.0.2
X-Spam-Hits: -2.5

The _init_d completion function is missing a $ before {~what}

--- Completion/Unix/Command/_init_d     2003-05-12 20:10:51.000000000 +1100
+++ Completion/Unix/Command/_init_d     2005-02-08 16:27:27.000000000 +1100
@@ -15,7 +15,7 @@
 what='(st(art|op|atus)|(force-|)re(start|load)(|-modules)|debug_(up|down)|dump(|_stats)|add|delete|clean|list)'

 read -u0 -k2 magic < $script && [[ $magic = '#!' ]] &&
-    cmds=( ${${(j:|:s:|:)${(M)${(f)"$(<
$script)"}:#[[:blank:]]#(\'|)${~what}(\|{~what})#(\'|)\)}}//[^a-z_-]}
)
+    cmds=( ${${(j:|:s:|:)${(M)${(f)"$(<
$script)"}:#[[:blank:]]#(\'|)${~what}(\|${~what})#(\'|)\)}}//[^a-z_-]}
)

 # This would be the pattern to use every line of the form <space>foo).
 # Some people say this might match too many lines...


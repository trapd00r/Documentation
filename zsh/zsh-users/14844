From zsh-users-return-14844-mason-zsh=primenet.com.au@zsh.org Sat Feb 20 19:27:35 2010
Return-Path: <zsh-users-return-14844-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23577 invoked by alias); 20 Feb 2010 19:27:35 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14844
Received: (qmail 10773 invoked from network); 20 Feb 2010 19:27:34 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.220.212 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type;
        bh=bZGWug5VF50OJ/EFaLNhUn2G9q5LoaSLqU9u7Xt57ik=;
        b=dvoXD58/sTOlQG2e/pXj5+XBKP9QAOCLSGneqMuGVlIbwlcjQShiXKuFfVpT0Jb28h
         J11GtpHXNwSoRsxCzQOU0emxLFC+PIglgtUkHRZ7GzGa1VfNFroJOyqLSwPA9EU0zsfI
         ewvqweqwMtcGFLp62C4iktirJQv1Hp2il0Wew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=N7HfrG5vEmliOkdfu0iaj/5rtkUJYwkmDVV81Apqrf0lFciCFq3QFda22KT01DWSYk
         5/qtqp9Ug8tcsuiIHMXVo4maI3WqfpWbe0RFHxzcBR/k5J+LrfyU+wct7fjOmoispoiJ
         ZPMNACVso5nRLH18HtnMhvqhgI2eyZzxFkS8s=
MIME-Version: 1.0
Date: Sat, 20 Feb 2010 20:20:56 +0100
Message-ID: <6910cba01002201120v65fc6904j758d41de17839b86@mail.gmail.com>
Subject: preexec and multi-line command.
From: Piotr Karbowski <jabberuser@gmail.com>
To: zsh-users@zsh.org
Content-Type: text/plain; charset=UTF-8

Hi there!

I have starge problem after I added preexec function to my zshrc to
add in terminal TITLE what is running inside.

## cut here
case $TERM in
        rxvt*|xterm|nxterm|gnome|screen)
        precmd () {print -Pn "\e]0;%n@%m: %~\a"}
        preexec () { print -Pn "\e]0;$1 [%n@%m: %~]\a"}
        ;;
esac
## cut here

Issue is that when I doing something multiline, I got:

## cut here
slashbeast@ragnarok ~ % echo 1\
slashbeast@ragnarok ~ > 2\
slashbeast@ragnarok ~ > 3\
slashbeast@ragnarok ~ >

2
3
 [slashbeast@ragnarok: ~]123
slashbeast@ragnarok ~ %
## cut here

How can I fix it?


From zsh-workers-return-6540-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jun 09 08:19:33 1999
Return-Path: <zsh-workers-return-6540-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2137 invoked from network); 9 Jun 1999 08:19:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jun 1999 08:19:31 -0000
Received: (qmail 18494 invoked by alias); 9 Jun 1999 08:19:19 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6540
Received: (qmail 18487 invoked from network); 9 Jun 1999 08:19:17 -0000
Message-Id: <9906090750.AA17477@ibmth.df.unipi.it>
To: "Zsh hackers list" <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: pws-21: parentheses in command word 
In-Reply-To: ""Andrej Borsenkow""'s message of "Wed, 09 Jun 1999 12:11:52 DFT."
             <003201beb24f$bb2aafd0$21c9ca95@mow.siemens.ru> 
Date: Wed, 09 Jun 1999 09:50:45 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

"Andrej Borsenkow" wrote:
> |
> |*** Src/lex.c.icp      Mon Jan 25 14:59:49 1999
> |--- Src/lex.c.orig     Tue Jun  8 12:28:02 1999
> --------------------------
> File to patch: 
> 
> Is it my patch so dumb?

Sorry, I originally made the patch after applying something sent by Sven,
so it doesn't apply to Src/lex.c as it should.

*** Src/lex.c		Mon Jan 25 14:59:49 1999
--- Src/lex.c.orig	Tue Jun  8 12:28:02 1999
***************
*** 898,906 ****
--- 898,917 ----
  		    e = hgetc();
  		    hungetc(e);
  		    lexstop = 0;
+ #if 1
+ 		    /* For command words, parentheses are only
+ 		     * special at the start.  But now we're tokenising
+ 		     * the remaining string.  So I don't see what
+ 		     * the old incmdpos test here is for.
+ 		     *   pws 1999/6/8
+ 		     */
+ 		    if (e == ')')
+ 			goto brk;
+ #else
  		    if (e == ')' ||
  			(incmdpos && !brct && peek != ENVSTRING))
  			goto brk;
+ #endif
  		}
  		pct++;
  	    }

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-users-return-3047-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Apr 28 04:20:22 2000
Return-Path: <zsh-users-return-3047-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8897 invoked from network); 28 Apr 2000 04:20:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Apr 2000 04:20:17 -0000
Received: (qmail 8616 invoked by alias); 28 Apr 2000 04:20:01 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3047
Received: (qmail 8561 invoked from network); 28 Apr 2000 04:20:00 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000428041929.ZM21670@candle.brasslantern.com>
Date: Fri, 28 Apr 2000 04:19:29 +0000
In-Reply-To: <20000427110231.A3075@babbage.tky.hut.fi>
Comments: In reply to Ville Herva <vherva@babbage.tky.hut.fi>
        "Re: zsh & HP Term" (Apr 27, 11:02am)
References: <20000427110231.A3075@babbage.tky.hut.fi>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Ville Herva <vherva@babbage.tky.hut.fi>, zsh-users@sunsite.auc.dk
Subject: Re: zsh & HP Term
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 27, 11:02am, Ville Herva wrote:
} Subject: Re: zsh & HP Term
}
} Propably not strictly related to zsh, but I'll ask anyway: I'm having a
} bit different problem with terminal under HPUX 10.20. Most if not all
} programs I run seem to ruin my terminal settings so that when I return to
} zsh, arrow keys work no more.

Many terminals have two modes, the "normal" mode and the "keypad" mode.
The arrow keys often send different character sequences in the different
modes.  What's happening is that your terminal is getting switched from
one mode to the other and not switched back.  This is probably a result
of a problem with the termcap or terminfo description of your terminal.

The easiest thing to do is use bindkey to bind both the keypad and normal
arrow key sequences to the same ZLE actions.  Most probably that means
something like this:

bindkey '\e[A'	up-line-or-history
bindkey '\e[B'	down-line-or-history
bindkey '\e[C'	forward-char
bindkey '\e[D'	backward-char
bindkey '\eOA'	up-line-or-history
bindkey '\eOB'	down-line-or-history
bindkey '\eOC'	forward-char
bindkey '\eOD'	backward-char

If you use the vi keybindings, which it looks as though you might from
your description of the symptoms, then you should use:

bindkey -v
bindkey '\e[A'	vi-up-line-or-history
(etc., putting "vi-" into each of the above examples)

Hey, PWS:  You might want to mention keypad mode in the FAQ answer 3.8.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


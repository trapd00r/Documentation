From zsh-users-return-10220-mason-zsh=primenet.com.au@sunsite.dk Fri May 05 15:33:42 2006
Return-Path: <zsh-users-return-10220-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27220 invoked from network); 5 May 2006 15:33:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 May 2006 15:33:39 -0000
Received: (qmail 2113 invoked from network); 5 May 2006 15:33:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 May 2006 15:33:32 -0000
Received: (qmail 12365 invoked by alias); 5 May 2006 15:33:24 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10220
Received: (qmail 12355 invoked from network); 5 May 2006 15:33:24 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 May 2006 15:33:24 -0000
Received: (qmail 998 invoked from network); 5 May 2006 15:33:24 -0000
Received: from sol.nlnetlabs.nl (213.154.224.43)
  by a.mx.sunsite.dk with SMTP; 5 May 2006 15:33:23 -0000
Received: from elektron.atoom.net (a80-127-17-126.adsl.xs4all.nl [80.127.17.126])
	by sol.nlnetlabs.nl (Postfix) with ESMTP id 3329118812B
	for <zsh-users@sunsite.dk>; Fri,  5 May 2006 17:33:23 +0200 (CEST)
Received: by elektron.atoom.net (Postfix, from userid 1000)
	id 183685801A0D; Fri,  5 May 2006 17:33:23 +0200 (CEST)
Date: Fri, 5 May 2006 17:33:22 +0200
From: Miek Gieben <miek@miek.nl>
To: Zsh users list <zsh-users@sunsite.dk>
Subject: Re: Large COLUMNS crashes zsh
Message-ID: <20060505153322.GE8197@miek.nl>
Mail-Followup-To: Zsh users list <zsh-users@sunsite.dk>
References: <20060505141926.GH31754@suse.de> <EXCHANGE03RUlRWXopo0000112a@exchange03.csr.com>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="GxcwvYAGnODwn7V8"
Content-Disposition: inline
In-Reply-To: <EXCHANGE03RUlRWXopo0000112a@exchange03.csr.com>
User-Agent: Vim/Mutt/Linux
X-Home: www.miek.nl


--GxcwvYAGnODwn7V8
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

[On 05 May, @16:32, Peter Stephenson wrote in "Re: Large COLUMNS crashes zs=
h ..."]
> >export COLUMNS=3D10000000000000000
> >
> >When doing this zsh crashes. I know it seems stupid, but wouldn't it be
> >sane to ignore such large number, or simply set it to the largest
> >possible?
>=20
> Probably, but the trouble is there's no single "largest possible".
> We've just run into a similar problem with the maximum size of arrays.
> If it doesn't crash the shell, it's potentially useful, but we don't
> know a priori how large that is.  Some checks on malloc might help, but
> that's a big can of worms, too:  once you need it in one place, you need
> it all over.  Furthermore, I've got a feeling that on many virtual
> memory systems the malloc might succeed but cause havoc later.

bash seems handle this just fine. And it resets the value to something
more sane (don't know if that is a bug or feature):

$ export COLUMNS=3D10000000000000000
$ echo $COLUMNS
10000000000000000
$ ls
=2E..bunch of files...
$ echo $COLUMNS
100
$

This is with bash3. Zsh on the other hand is trying to trash my
machine :)

--
grtz,
  - Miek

  http://www.miek.nl              http://www.nlnetlabs.nl
  PGP: 6A3C F450 6D4E 7C6B C23C  F982 258B 85CF 3880 D0F6

--GxcwvYAGnODwn7V8
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2.2 (GNU/Linux)

iD8DBQFEW3BCJYuFzziA0PYRApvGAKD6Sj7YMXLHTIPR4J+UfP+1iSEFcwCg0Lny
n44mne6VGWdk1htCtSMFG+E=
=odic
-----END PGP SIGNATURE-----

--GxcwvYAGnODwn7V8--


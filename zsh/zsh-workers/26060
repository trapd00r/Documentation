From zsh-workers-return-26060-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 17 22:48:20 2008
Return-Path: <zsh-workers-return-26060-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21859 invoked from network); 17 Nov 2008 22:48:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: *
X-Spam-Status: No, score=1.1 required=5.0 tests=AWL,BAYES_00,INVALID_DATE,
	MIME_BASE64_TEXT autolearn=no version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Nov 2008 22:48:16 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 80799 invoked from network); 17 Nov 2008 22:48:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Nov 2008 22:48:06 -0000
Received: (qmail 12107 invoked by alias); 17 Nov 2008 22:48:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26060
Received: (qmail 12086 invoked from network); 17 Nov 2008 22:48:00 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 17 Nov 2008 22:48:00 -0000
Received: from smtp6-g19.free.fr (smtp6-g19.free.fr [212.27.42.36])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 6E89280524C4
	for <zsh-workers@sunsite.dk>; Mon, 17 Nov 2008 23:47:56 +0100 (CET)
Received: from smtp6-g19.free.fr (localhost.localdomain [127.0.0.1])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 5B4101971F
	for <zsh-workers@sunsite.dk>; Mon, 17 Nov 2008 23:47:55 +0100 (CET)
Received: from laptop (vaf26-2-82-244-111-82.fbx.proxad.net [82.244.111.82])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 0E8211976E
	for <zsh-workers@sunsite.dk>; Mon, 17 Nov 2008 23:47:54 +0100 (CET)
In-Reply-To: <1487794487-BeMail@laptop>
To: zsh-workers@sunsite.dk
Subject: PATCH: Re: BeOS port
X-Mailer: BeMail - Mail Daemon Replacement 3.0.0 Final
From: "=?windows-1252?q?Fran=E7ois?= Revol" <revol@free.fr>
Date: Mon, 17 Nov 2008 23:52:24 +0100 CET
Message-Id: <12127198389-BeMail@laptop>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary=----------Zoidberg-BeMail-temp--------
X-Virus-Scanned: ClamAV 0.92.1/8644/Mon Nov 17 22:35:21 2008 on bifrost
X-Virus-Status: Clean

This is a multipart message in MIME format.

------------Zoidberg-BeMail-temp--------
Mime-Version: 1.0
Content-Type: text/plain; charset="windows-1252"
Content-Transfer-Encoding: quoted-printable

Reposting, since noone noticed the patch at the end...

> Hi there,
> I've had a working port of zsh to ZETA (BeOS R6) for quite a while, 
> but 
> since I'm not (yet) a big user I never managed to publish it. I was 
> also too lazy to clean up the small C89 fix required (we require 
> gcc2.95 due to the C++ ABI breackage on later versions).
> 
> I didn't try but it should likely compile fine on BeOS R5, at least 
> with the BONE network stack.
> 
> It should also compile without much trouble in Haiku (MIT licenced 
> rewrite of BeOS). It will probably need some more library check 
> (socket 
> in -lnetwork) though.
> 
> Some tests still break, but most are due to missing features, and at 
> least they don't crash like they used to.
> - BeOS defvs shows all devices as S=5FIFCHR, including block devices, 
> so 
> there is no S=5FIFBLK device in /dev per see.
> - BeOS doesn't have /dev/tty (Haiku does though)
> - BeOS natively uses UTF-8 everywhere, but has an old glibc, so it 
> misses some wc*()... I still don't get the point of using ugly stuff 
> like wchar anyway.
> - zpty doesn't load yet for some reason
> 
> I'll likely have to port over all the bash=5Fcompletion stuff I 
> wrote...
> http://revolf.free.fr/beos/bash=5Fcompletion/zeta=5Fcompletion
> 

Fran=E7ois.


------------Zoidberg-BeMail-temp--------
Content-Transfer-Encoding: base64
Content-Disposition: BMailAttachment
Content-Type: text/plain; name=zsh-beos.diff.001.txt

SW5kZXg6IGNvbmZpZ3VyZS5hYwo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ClJDUyBmaWxlOiAvY3Zzcm9vdC96c2gvenNo
L2NvbmZpZ3VyZS5hYyx2CnJldHJpZXZpbmcgcmV2aXNpb24gMS4xMTIKZGlmZiAtdSAtcjEuMTEy
IGNvbmZpZ3VyZS5hYwotLS0gY29uZmlndXJlLmFjCTMwIE9jdCAyMDA4IDEzOjAwOjIxIC0wMDAw
CTEuMTEyCisrKyBjb25maWd1cmUuYWMJNSBOb3YgMjAwOCAwNTowOTo0NiAtMDAwMApAQCAtNzQ1
LDYgKzc0NSw3IEBACiBmaQogCiBBQ19DSEVDS19MSUIoc29ja2V0LCBzb2NrZXQpCitBQ19DSEVD
S19MSUIoYmluZCwgZ2V0aG9zdGJ5bmFtZTIpCiAKIGRubCAtLS0tLS0tLS0tLS0tLS0KIGRubCBD
SEVDSyBGT1IgSUNPTlYKQEAgLTI1MjcsNiArMjUyOCw3IEBACiAgICAgYWl4KikgICAgICAgICBE
TExERkxBR1M9IiR7RExMREZMQUdTPS1HIC1iZXhwYWxsIC1sY30iIDs7CiAgICAgc29sYXJpcyp8
c3lzdjQqfGVzaXgqKSBETExERkxBR1M9IiR7RExMREZMQUdTPS1HfSIgOzsKICAgICBkYXJ3aW4q
KSAgICAgIERMTERGTEFHUz0iJHtETExERkxBR1M9LWJ1bmRsZSAtZmxhdF9uYW1lc3BhY2UgLXVu
ZGVmaW5lZCBzdXBwcmVzc30iIDs7CisgICAgYmVvcyp8aGFpa3UqKSBETExERkxBR1M9IiR7RExM
REZMQUdTPS1ub3N0YXJ0fSIgOzsKICAgICBvcGVuYnNkKikKICAgICAgIGlmIHRlc3QgeCR6c2hf
Y3Zfc3lzX2VsZiA9IHh5ZXM7IHRoZW4KIAlETExERkxBR1M9IiR7RExMREZMQUdTPS1zaGFyZWQg
LWZQSUN9IgpAQCAtMjU2OCw2ICsyNTcwLDE1IEBACiAgICAgICAgOzsKICAgICAgIGVzYWMKICAg
ICA7OworICAgICotYmVvcyopCisgICAgICAjIGdjYyBvbiBCZU9TIGRvZXNuJ3QgbGlrZSAtcmR5
bmFtaWMuLi4KKyAgICAgIEVYVFJBX0xERkxBR1M9IiR7RVhUUkFfTERGTEFHUz0gfSIKKyAgICAg
ICMgYWxzbywgZGxvcGVuKCkgYXQgbGVhc3QgaW4gWmV0YSByZXNwZWN0cyAkTElCUkFSWV9QQVRI
LCBzbyBuZWVkcyAlQSBhZGRlZCB0byBpdC4KKyAgICAgIGV4cG9ydCBMSUJSQVJZX1BBVEg9IiRM
SUJSQVJZX1BBVEg6JUEvIgorICAgIDs7CisgICAgKi1oYWlrdSopCisgICAgICAjIAorICAgIDs7
CiAgIGVzYWMKIAogICAjIERvbmUgd2l0aCBvdXIgc2hlbGwgY29kZSwgc28gcmVzdG9yZSBhdXRv
dG9vbHMgcXVvdGluZwpJbmRleDogU3JjL01vZHVsZXMvenB0eS5jCj09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZp
bGU6IC9jdnNyb290L3pzaC96c2gvU3JjL01vZHVsZXMvenB0eS5jLHYKcmV0cmlldmluZyByZXZp
c2lvbiAxLjM5CmRpZmYgLXUgLXIxLjM5IHpwdHkuYwotLS0gU3JjL01vZHVsZXMvenB0eS5jCTI5
IFNlcCAyMDA4IDA4OjQ2OjMzIC0wMDAwCTEuMzkKKysrIFNyYy9Nb2R1bGVzL3pwdHkuYwk1IE5v
diAyMDA4IDA1OjA5OjQ3IC0wMDAwCkBAIC0yNjAsNiArMjYwLDkgQEAKIAogICAgIGlmIChtYXN0
ZXIpIHsKIAlzdHJjcHkobmFtZSwgIi9kZXYvcHR5eHgiKTsKKyNpZiBkZWZpbmVkKF9fQkVPU19f
KSB8fCBkZWZpbmVkKF9fSEFJS1VfXykKKwluYW1lWzddID0gJy8nOworI2VuZGlmCiAKIAlmb3Ig
KHAxID0gY2hhcjE7ICpwMTsgcDErKykgewogCSAgICBuYW1lWzhdID0gKnAxOwpJbmRleDogU3Jj
L1psZS96bGVfcmVmcmVzaC5jCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KUkNTIGZpbGU6IC9jdnNyb290L3pzaC96c2gv
U3JjL1psZS96bGVfcmVmcmVzaC5jLHYKcmV0cmlldmluZyByZXZpc2lvbiAxLjcyCmRpZmYgLXUg
LXIxLjcyIHpsZV9yZWZyZXNoLmMKLS0tIFNyYy9abGUvemxlX3JlZnJlc2guYwkyMyBPY3QgMjAw
OCAwODo1MjowMiAtMDAwMAkxLjcyCisrKyBTcmMvWmxlL3psZV9yZWZyZXNoLmMJNSBOb3YgMjAw
OCAwNTowOTo0NyAtMDAwMApAQCAtMTg3OSw2ICsxODc5LDggQEAKIC8qIDM6IG1haW4gZGlzcGxh
eSBsb29wIC0gd3JpdGUgb3V0IHRoZSBidWZmZXIgdXNpbmcgd2hhdGV2ZXIgdHJpY2tzIHdlIGNh
biAqLwogCiAgICAgZm9yICg7OykgeworCWludCBub3dfb2ZmOworCiAjaWZkZWYgTVVMVElCWVRF
X1NVUFBPUlQKIAlpZiAoKCFubC0+Y2hyIHx8IG5sLT5jaHIgIT0gV0VPRikgJiYgKCFvbC0+Y2hy
IHx8IG9sLT5jaHIgIT0gV0VPRikpIHsKICNlbmRpZgpAQCAtMjA1MCw3ICsyMDUyLDcgQEAKIAkg
ICAgICogSWYgYW4gYXR0cmlidXRlIHdhcyBvbiBoZXJlIGJ1dCBpc24ndCBhbnkgbW9yZSwKIAkg
ICAgICogb3V0cHV0IHRoZSBzZXF1ZW5jZSB0byB0dXJuIGl0IG9mZi4KIAkgICAgICovCi0JICAg
IGludCBub3dfb2ZmID0gb2wtPmF0ciAmIH5ubC0+YXRyICYgVFhUX0FUVFJfT05fTUFTSzsKKwkg
ICAgbm93X29mZiA9IG9sLT5hdHIgJiB+bmwtPmF0ciAmIFRYVF9BVFRSX09OX01BU0s7CiAJICAg
IGlmIChub3dfb2ZmKQogCQlzZXR0ZXh0YXR0cmlidXRlcyhUWFRfQVRUUl9PRkZfRlJPTV9PTihu
b3dfb2ZmKSk7CiAK
------------Zoidberg-BeMail-temp----------


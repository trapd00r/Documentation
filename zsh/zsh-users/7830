From zsh-users-return-7830-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 13 11:13:27 2004
Return-Path: <zsh-users-return-7830-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25947 invoked from network); 13 Aug 2004 11:13:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Aug 2004 11:13:26 -0000
Received: (qmail 39945 invoked from network); 13 Aug 2004 11:13:20 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Aug 2004 11:13:20 -0000
Received: (qmail 16506 invoked by alias); 13 Aug 2004 11:12:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7830
Received: (qmail 16497 invoked from network); 13 Aug 2004 11:12:36 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 13 Aug 2004 11:12:36 -0000
Received: (qmail 38319 invoked from network); 13 Aug 2004 11:11:17 -0000
Received: from lhuumrelay3.lnd.ops.eu.uu.net (62.189.58.19)
  by a.mx.sunsite.dk with SMTP; 13 Aug 2004 11:11:15 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i7DBBEv23821
	for <zsh-users@sunsite.dk>; Fri, 13 Aug 2004 11:11:14 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6b64771498c0a88d01294@MAILSWEEPER01.csr.com> for <zsh-users@sunsite.dk>;
 Fri, 13 Aug 2004 12:10:26 +0100
Received: from news01.csr.com ([192.168.143.38]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 13 Aug 2004 12:13:49 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.12.11/8.12.11) with ESMTP id i7DBBBO8012670
	for <zsh-users@sunsite.dk>; Fri, 13 Aug 2004 12:11:11 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.12.11/8.12.11/Submit) with ESMTP id i7DBBBX5012667
	for <zsh-users@sunsite.dk>; Fri, 13 Aug 2004 12:11:11 +0100
Message-Id: <200408131111.i7DBBBX5012667@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk (Zsh users list)
Subject: Zsh 4.2.1
Date: Fri, 13 Aug 2004 12:11:11 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 13 Aug 2004 11:13:49.0694 (UTC) FILETIME=[9BDD79E0:01C48126]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_40 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

I've uploaded zsh 4.2.1 to ftp://ftp.zsh.org/pub/ .  If nobody finds
anything horrible before this afternoon I'll send it to Sourceforge as
well.  However, nothing serious has changed for a while, so I think it's
unlikely there are major problems.

Thanks to everyone who contributed.

I noticed the FAQ is out of date as far as the versions it talks about
are concerned.  I fixed this on the FTP site but not yet in the
distribution or on the zsh web site.

Here's the top of the NEWS file for the new version and the list of
known (minor) incompatbilities since 4.2.0 from the README.

[Hmm, are you allowed to say `more seamlessly'?  Shouldn't it be
something like `more closely resembling an object conceived of
metaphorically as lacking in seams'?]


Changes since zsh version 4.2.0
-------------------------------

- The autoload and related builtins take options -k and -z to indicate
  ksh or zsh autoloading style for given functions, making it possible
  to mix and match.

- Assignments to associative arrays can use the i and r index flags.
  For example,
    assoc[(i)alpha*]=bravo
  sets the value for the element whose key matches the pattern `alpha*';
    assoc[(r)activ*]=passive
  sets the value for the element whose current value matches the pattern
  `activ*'.

- The glob qualifier F indicates a non-empty directory.  Hence *(F)
  indicates all subdirectories with entries, *(/^F) means all
  subdirectories with no entries.

- fc -p and fc -P provide push/pop for the status of the shell's
  history (both internal and using the history file).  With automatic
  scoping (fc -ap) it becomes easy to use a temporary history in a
  function.  This has been added to the calculator function zcalc to make
  its internal history work more seamlessly.

- A new `try block' and `always block' syntax has been introduced
  to make it easier to ensure the shell runs important tidy-up code
  in the event of an error.  It also runs after a break, continue, or
  return, including a return forced by the ERR_RETURN option
  (but not an exit, which is immediate).  The syntax is:
    `{'  try-block-list `}' `always' `{' always-block-list `}'
  where no newline or semicolon may appear between `}' and `always'.
  This is compatible with all previous valid zsh syntax as an `always'
  at that point used to be a syntax error.  For example,
    { echo Code run in current shell } always { echo Tidy-up code }

- A new zle widget reset-prompt has been added to re-expand the current
  prompt.  Changes to the variable in use as well as changes in its
  expansions are both taken into account.  The same effect is now forced by
  a job change notification, making the %j prompt escape and %(j..) ternary
  expression more useful.

- The zftp module supports ports following the hostname in the normal suffix
  notation, `host:port'.  This requires IPv6 colon-style addresses to be
  specified in suitably quoted square brackets, for example:

  zftp open '[f000::baaa]'
  zftp open '[f000::baaa]:ftp'

  (the two are equivalent).

- Special traps, those that don't correspond to signals, i.e. ZERR, DEBUG
  and EXIT are no longer executed inside other traps.  This caused
  unnecessary confusion if, for example, both DEBUG and EXIT traps
  were set.  The new behaviour is more compatible with other shells.

- New option TRAPS_ASYNC which if set allows traps to run while the
  shell is waiting for a child process.  In sh/ksh
  compatibility mode the option is turned off by default and the option
  letter -T turns it on, for compatibility with FreeBSD sh.


Possible incompatibilities
---------------------------

Currently the only known incompatibilities between 4.2.0 and later
versions are minor:

IPv6 addresses must be specified in square brackets in the zftp module and
the function system built on top of the zftp module.

Special traps for pseudosignals ZERR, DEBUG and EXIT are no longer executed
inside other traps.  Users may well have assumed this was the case anyway
since the behaviour was not explicity documented.  See the NEWS file for
more detail.

By default, a maximum function depth of 4096 is now compiled into the
shell.  This may be altered during configuration; see `Function depth' in
INSTALL.


pws


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Git Magic - Kapitel 9. Secrets Revealed</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="ch08.html" title=
  "Kapitel 8. Git Grandmastery">
  <link rel="next" href="ch10.html" title=
  "Kapitel 10. Appendix A: Git Shortcomings">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Vorwort</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_danke">Danke!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_lizenz">Lizenz</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Einleitung</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_arbeit_ist_spiel">Arbeit ist
            Spiel</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_versionsverwaltung">Versionsverwaltung</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_verteilte_kontrolle">Verteilte
            Kontrolle</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_ein_dummer_aberglaube">Ein dummer
            Aberglaube</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_emphasis_merge_emphasis_konflikte"><span class="emphasis">
            <em>Merge</em></span> Konflikte</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Erste
          Schritte</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_stand_sichern">Stand
            sichern</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_hinzuf_gen_l_schen_umbenennen">Hinzufügen,
            Löschen, Umbenennen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_fortgeschrittenes_r_ckg_ngig_machen_wiederherstellen">
            Fortgeschrittenes Rückgängig
            machen/Wiederherstellen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_r_ckg_ngig_machen">Rückgängig
            machen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_changelog_erstellen">Changelog
            erstellen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_dateien_herunterladen">Dateien
            herunterladen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_das_neueste_vom_neuen">Das Neueste vom
            Neuen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_einfaches_ver_ffentlichen">Einfaches
            Veröffentlichen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_was_habe_ich_getan">Was habe ich
            getan?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_bung">Übung</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Rund ums
          <span class="emphasis"><em>Clonen</em></span></a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_computer_synchronisieren">Computer
            synchronisieren</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_klassische_quellcodeverwaltung">Klassische
            Quellcodeverwaltung</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_geheime_quellen">Geheime
            Quellen</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_nackte_repositories_emphasis"><span class="emphasis">
            <em>Nackte Repositories</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_push_emphasis_oder_emphasis_pull_emphasis">
            <span class="emphasis"><em>Push</em></span> oder
            <span class=
            "emphasis"><em>Pull</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_fork_emphasis_eines_projekts"><span class="emphasis">
            <em>Fork</em></span> eines Projekts</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_ultimative_datensicherung">Ultimative
            Datensicherung</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_multitasking_mit_lichtgeschwindigkeit">Multitasking
            mit Lichtgeschwindigkeit</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_versionsverwaltung_im_untergrund">Versionsverwaltung
            im Untergrund</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_warum_ich_git_benutze">Warum ich Git
            benutze</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. <span class=
          "emphasis"><em>Branch</em></span>-Magie</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_die_chef_taste">Die
            Chef-Taste</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_schmutzarbeit">Schmutzarbeit</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_schnelle_fehlerbehebung">Schnelle
            Fehlerbehebung</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_emphasis_mergen_emphasis"><span class=
            "emphasis"><em>Mergen</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_kontinuierlicher_arbeitsfluss">Kontinuierlicher
            Arbeitsfluss</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_mischmasch_reorganisieren">Mischmasch
            Reorganisieren</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_emphasis_branches_emphasis_verwalten"><span class="emphasis">
            <em>Branches</em></span> verwalten</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_tempor_re_emphasis_branches_emphasis">Temporäre
            <span class=
            "emphasis"><em>Branches</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_arbeite_wie_du_willst">Arbeite wie du
            willst</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5.
          Geschichtsstunde</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_ich_nehme_alles_zur_ck">Ich nehme alles
            zurück</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_und_noch_viel_mehr">… und noch viel
            mehr</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_lokale_nderungen_zum_schlu">Lokale
            Änderungen zum Schluß</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_chronik_umschreiben">Chronik
            umschreiben</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_geschichte_machen">Geschichte
            machen</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_wo_ging_alles_schief">Wo ging alles
            schief?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_wer_ist_verantwortlich">Wer ist
            verantwortlich?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_pers_nliche_erfahrungen">Persönliche
            Erfahrungen</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Multiplayer
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_wer_bin_ich">Wer bin ich?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_ber_ssh_http">Git über SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_ber_alles">Git über
            alles</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_das_globale_zahlungsmittel">Patches:
            Das globale Zahlungsmittel</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_entschuldigung_wir_sind_umgezogen">Entschuldigung,
            wir sind umgezogen.</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_entfernte_emphasis_branches_emphasis">Entfernte
            <span class=
            "emphasis"><em>Branches</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_mehrere_emphasis_remotes_emphasis">Mehrere
            <span class=
            "emphasis"><em>Remotes</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_meine_einstellungen">Meine
            Einstellungen</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Git für
          Fortgeschrittene</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_quellcode_ver_ffentlichen">Quellcode
            veröffentlichen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_emphasis_commite_emphasis_nderungen"><span class="emphasis">
            <em>Commite</em></span> Änderungen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_mein_emphasis_commit_emphasis_ist_zu_gro">Mein
            <span class="emphasis"><em>Commit</em></span> ist zu
            groß!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_der_index_git_8217_s_bereitstellungsraum">Der
            Index: Git’s Bereitstellungsraum</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_verliere_nicht_deinen_kopf">Verliere nicht
            Deinen KOPF</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_kopf_jagd">KOPF-Jagd</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_auf_git_bauen">Auf Git
            bauen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_gewagte_kunstst_cke">Gewagte
            Kunststücke</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_verhindere_schlechte_emphasis_commits_emphasis">
            Verhindere schlechte <span class=
            "emphasis"><em>Commits</em></span></a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Aufgedeckte
          Geheimnisse</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_unsichtbarkeit">Unsichtbarkeit</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integrit_t">Integrität</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelligenz">Intelligenz</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indizierung">Indizierung</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_git_8217_s_wurzeln">Git’s
            Wurzeln</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_die_objektdatenbank">Die
            Objektdatenbank</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_emphasis_trees_emphasis"><span class=
            "emphasis"><em>Trees</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_emphasis_commits_emphasis"><span class=
            "emphasis"><em>Commits</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_von_magie_nicht_zu_unterscheiden">Von Magie
            nicht zu unterscheiden</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Git’s
          Mängel</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_sha1_schw_che">SHA1 Schwäche</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_dateien_ohne_bezug">Dateien ohne
            Bezug</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_wer_macht_was">Wer macht
            was?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_dateihistorie">Dateihistorie</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_der_erster_klon">Der erster
            Klon</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_unbest_ndige_projekte">Unbeständige
            Projekte</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_globaler_z_hler">Globaler
            Zähler</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_leere_unterverzeichnisse">Leere
            Unterverzeichnisse</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initialer_emphasis_commit_emphasis">Initialer
            <span class=
            "emphasis"><em>Commit</em></span></a></span></li>

            <li><span class="section"><a href=
            "apa.html#_eigenarten_der_anwendung">Eigenarten der
            Anwendung</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B. Diese
        Anleitung übersetzen</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="toc">
    <ul>
      <li><b>Git Magic</b></li>

      <li>
        <span class="chapter"><a href="ch01.html">1.
        Preface</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch01.html#_thanks">Thanks!</a></span></li>

          <li><span class="section"><a href=
          "ch01.html#_license">License</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch02.html">2.
        Einleitung</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch02.html#_arbeit_ist_spiel">Arbeit ist
          Spiel</a></span></li>

          <li><span class="section"><a href=
          "ch02.html#_versionsverwaltung">Versionsverwaltung</a></span></li>

          <li><span class="section"><a href=
          "ch02.html#_verteilte_kontrolle">Verteilte
          Kontrolle</a></span></li>

          <li><span class="section"><a href=
          "ch02.html#_ein_dummer_aberglaube">Ein dummer
          Aberglaube</a></span></li>

          <li><span class="section"><a href=
          "ch02.html#_emphasis_merge_emphasis_konflikte"><span class="emphasis">
          <em>Merge</em></span> Konflikte</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch03.html">3. Erste
        Schritte</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch03.html#_stand_sichern">Stand sichern</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_hinzuf_gen_l_schen_umbenennen">Hinzufügen,
          Löschen, Umbenennen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_fortgeschrittenes_r_ckg_ngig_machen_wiederherstellen">
          Fortgeschrittenes Rückgängig
          machen/Wiederherstellen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_r_ckg_ngig_machen">Rückgängig
          machen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_changelog_erstellen">Changelog
          erstellen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_dateien_herunterladen">Dateien
          herunterladen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_das_neueste_vom_neuen">Das Neueste vom
          Neuen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_einfaches_ver_ffentlichen">Einfaches
          Veröffentlichen</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_was_habe_ich_getan">Was habe ich
          getan?</a></span></li>

          <li><span class="section"><a href=
          "ch03.html#_bung">Übung</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch04.html">4. Rund ums
        <span class="emphasis"><em>Clonen</em></span></a></span>

        <ul>
          <li><span class="section"><a href=
          "ch04.html#_computer_synchronisieren">Computer
          synchronisieren</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_klassische_quellcodeverwaltung">Klassische
          Quellcodeverwaltung</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_emphasis_nackte_repositories_emphasis"><span class="emphasis">
          <em>Nackte Repositories</em></span></a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_emphasis_push_emphasis_oder_emphasis_pull_emphasis">
          <span class="emphasis"><em>Push</em></span> oder
          <span class=
          "emphasis"><em>Pull</em></span></a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_emphasis_fork_emphasis_eines_projekts"><span class="emphasis">
          <em>Fork</em></span> eines Projekts</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_ultimative_datensicherung">Ultimative
          Datensicherung</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_multitasking_mit_lichtgeschwindigkeit">Multitasking
          mit Lichtgeschwindigkeit</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_versionsverwaltung_im_untergrund">Versionsverwaltung
          im Untergrund</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_mercurial">Mercurial</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_bazaar">Bazaar</a></span></li>

          <li><span class="section"><a href=
          "ch04.html#_warum_ich_git_benutze">Warum ich Git
          benutze</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch05.html">5. <span class=
        "emphasis"><em>Branch</em></span>-Magie</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch05.html#_die_chef_taste">Die
          Chef-Taste</a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_schmutzarbeit">Schmutzarbeit</a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_schnelle_fehlerbehebung">Schnelle
          Fehlerbehebung</a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_emphasis_mergen_emphasis"><span class=
          "emphasis"><em>Mergen</em></span></a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_kontinuierlicher_arbeitsfluss">Kontinuierlicher
          Arbeitsfluss</a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_mischmasch_reorganisieren">Mischmasch
          Reorganisieren</a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_emphasis_branches_emphasis_verwalten"><span class="emphasis">
          <em>Branches</em></span> verwalten</a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_tempor_re_emphasis_branches_emphasis">Temporäre
          <span class=
          "emphasis"><em>Branches</em></span></a></span></li>

          <li><span class="section"><a href=
          "ch05.html#_arbeite_wie_du_willst">Arbeite wie du
          willst</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch06.html">6.
        Geschichtsstunde</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch06.html#_ich_nehme_alles_zur_ck">Ich nehme alles
          zurück</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_8230_und_noch_viel_mehr">… und noch viel
          mehr</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_lokale_nderungen_zum_schlu">Lokale Änderungen
          zum Schluß</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_chronik_umschreiben">Chronik
          umschreiben</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_geschichte_machen">Geschichte
          machen</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_wo_ging_alles_schief">Wo ging alles
          schief?</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_wer_ist_verantwortlich">Wer ist
          verantwortlich?</a></span></li>

          <li><span class="section"><a href=
          "ch06.html#_pers_nliche_erfahrungen">Persönliche
          Erfahrungen</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch07.html">7. Multiplayer
        Git</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch07.html#_wer_bin_ich">Wer bin ich?</a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_git_ber_ssh_http">Git über SSH,
          HTTP</a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_git_ber_alles">Git über alles</a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_patches_das_globale_zahlungsmittel">Patches:
          Das globale Zahlungsmittel</a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_entschuldigung_wir_sind_umgezogen">Entschuldigung,
          wir sind umgezogen.</a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_entfernte_emphasis_branches_emphasis">Entfernte
          <span class=
          "emphasis"><em>Branches</em></span></a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_mehrere_emphasis_remotes_emphasis">Mehrere
          <span class=
          "emphasis"><em>Remotes</em></span></a></span></li>

          <li><span class="section"><a href=
          "ch07.html#_meine_einstellungen">Meine
          Einstellungen</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch08.html">8. Git
        Grandmastery</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch08.html#_source_releases">Source
          Releases</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_commit_what_changed">Commit What
          Changed</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_my_commit_is_too_big">My Commit Is Too
          Big!</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_the_index_git_8217_s_staging_area">The Index:
          Git’s Staging Area</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_don_8217_t_lose_your_head">Don’t Lose Your
          HEAD</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_head_hunting">HEAD-hunting</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_building_on_git">Building On
          Git</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_daring_stunts">Daring Stunts</a></span></li>

          <li><span class="section"><a href=
          "ch08.html#_preventing_bad_commits">Preventing Bad
          Commits</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch09.html">9. Secrets
        Revealed</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch09.html#_invisibility">Invisibility</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_integrity">Integrity</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_intelligence">Intelligence</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_indexing">Indexing</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_git_8217_s_origins">Git’s
          Origins</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_the_object_database">The Object
          Database</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_blobs">Blobs</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_trees">Trees</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_commits">Commits</a></span></li>

          <li><span class="section"><a href=
          "ch09.html#_indistinguishable_from_magic">Indistinguishable
          From Magic</a></span></li>
        </ul>
      </li>

      <li>
        <span class="chapter"><a href="ch10.html">10. Appendix A:
        Git Shortcomings</a></span>

        <ul>
          <li><span class="section"><a href=
          "ch10.html#_sha1_weaknesses">SHA1
          Weaknesses</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_microsoft_windows">Microsoft
          Windows</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_unrelated_files">Unrelated
          Files</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_who_8217_s_editing_what">Who’s Editing
          What?</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_file_history">File History</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_initial_clone">Initial Clone</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_volatile_projects">Volatile
          Projects</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_global_counter">Global
          Counter</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_empty_subdirectories">Empty
          Subdirectories</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_initial_commit">Initial
          Commit</a></span></li>

          <li><span class="section"><a href=
          "ch10.html#_interface_quirks">Interface
          Quirks</a></span></li>
        </ul>
      </li>

      <li><span class="appendix"><a href="apa.html">A. Diese
      Anleitung übersetzen</a></span></li>
    </ul>
  </div>

  <div class="content">
    <div class="chapter" title="Kapitel 9. Secrets Revealed">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_secrets_revealed"></a>Kapitel 9. Secrets
            Revealed</h2>
          </div>
        </div>
      </div>

      <p>We take a peek under the hood and explain how Git performs
      its miracles. I will skimp over details. For in-depth
      descriptions refer to <a class="ulink" href=
      "http://www.kernel.org/pub/software/scm/git/docs/user-manual.html"
      target="_top">the user manual</a>.</p>

      <div class="section" title="Invisibility">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_invisibility"></a>Invisibility</h2>
            </div>
          </div>
        </div>

        <p>How can Git be so unobtrusive? Aside from occasional
        commits and merges, you can work as if you were unaware
        that version control exists. That is, until you need it,
        and that’s when you’re glad Git was watching over you the
        whole time.</p>

        <p>Other version control systems force you to constantly
        struggle with red tape and bureaucracy. Permissions of
        files may be read-only unless you explicitly tell a central
        server which files you intend to edit. The most basic
        commands may slow to a crawl as the number of users
        increases. Work grinds to a halt when the network or the
        central server goes down.</p>

        <p>In contrast, Git simply keeps the history of your
        project in the <code class="literal">.git</code> directory
        in your working directory. This is your own copy of the
        history, so you can stay offline until you want to
        communicate with others. You have total control over the
        fate of your files because Git can easily recreate a saved
        state from <code class="literal">.git</code> at any
        time.</p>
      </div>

      <div class="section" title="Integrity">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_integrity"></a>Integrity</h2>
            </div>
          </div>
        </div>

        <p>Most people associate cryptography with keeping
        information secret, but another equally important goal is
        keeping information safe. Proper use of cryptographic hash
        functions can prevent accidental or malicious data
        corruption.</p>

        <p>A SHA1 hash can be thought of as a unique 160-bit ID
        number for every string of bytes you’ll encounter in your
        life. Actually more than that: every string of bytes that
        any human will ever use over many lifetimes.</p>

        <p>As a SHA1 hash is itself a string of bytes, we can hash
        strings of bytes containing other hashes. This simple
        observation is surprisingly useful: look up <span class=
        "emphasis"><em>hash chains</em></span>. We’ll later see how
        Git uses it to efficiently guarantee data integrity.</p>

        <p>Briefly, Git keeps your data in the <code class=
        "literal">.git/objects</code> subdirectory, where instead
        of normal filenames, you’ll find only IDs. By using IDs as
        filenames, as well as a few lockfiles and timestamping
        tricks, Git transforms any humble filesystem into an
        efficient and robust database.</p>
      </div>

      <div class="section" title="Intelligence">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_intelligence"></a>Intelligence</h2>
            </div>
          </div>
        </div>

        <p>How does Git know you renamed a file, even though you
        never mentioned the fact explicitly? Sure, you may have run
        <span class="strong"><strong>git mv</strong></span>, but
        that is exactly the same as a <span class=
        "strong"><strong>git rm</strong></span> followed by a
        <span class="strong"><strong>git add</strong></span>.</p>

        <p>Git heuristically ferrets out renames and copies between
        successive versions. In fact, it can detect chunks of code
        being moved or copied around between files! Though it
        cannot cover all cases, it does a decent job, and this
        feature is always improving. If it fails to work for you,
        try options enabling more expensive copy detection, and
        consider upgrading.</p>
      </div>

      <div class="section" title="Indexing">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_indexing"></a>Indexing</h2>
            </div>
          </div>
        </div>

        <p>For every tracked file, Git records information such as
        its size, creation time and last modification time in a
        file known as the <span class=
        "emphasis"><em>index</em></span>. To determine whether a
        file has changed, Git compares its current stats with those
        cached in the index. If they match, then Git can skip
        reading the file again.</p>

        <p>Since stat calls are considerably faster than file
        reads, if you only edit a few files, Git can update its
        state in almost no time.</p>

        <p>We stated earlier that the index is a staging area. Why
        is a bunch of file stats a staging area? Because the add
        command puts files into Git’s database and updates these
        stats, while the commit command, without options, creates a
        commit based only on these stats and the files already in
        the database.</p>
      </div>

      <div class="section" title="Git’s Origins">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_git_8217_s_origins"></a>Git’s Origins</h2>
            </div>
          </div>
        </div>

        <p>This <a class="ulink" href=
        "http://lkml.org/lkml/2005/4/6/121" target="_top">Linux
        Kernel Mailing List post</a> describes the chain of events
        that led to Git. The entire thread is a fascinating
        archaeological site for Git historians.</p>
      </div>

      <div class="section" title="The Object Database">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_the_object_database"></a>The Object Database</h2>
            </div>
          </div>
        </div>

        <p>Every version of your data is kept in the <span class=
        "emphasis"><em>object database</em></span>, which lives in
        the subdirectory <code class="literal">.git/objects</code>;
        the other residents of <code class="literal">.git/</code>
        hold lesser data: the index, branch names, tags,
        configuration options, logs, the current location of the
        head commit, and so on. The object database is elementary
        yet elegant, and the source of Git’s power.</p>

        <p>Each file within <code class=
        "literal">.git/objects</code> is an <span class=
        "emphasis"><em>object</em></span>. There are 3 kinds of
        objects that concern us: <span class=
        "emphasis"><em>blob</em></span> objects, <span class=
        "emphasis"><em>tree</em></span> objects, and <span class=
        "emphasis"><em>commit</em></span> objects.</p>
      </div>

      <div class="section" title="Blobs">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name="_blobs"></a>Blobs</h2>
            </div>
          </div>
        </div>

        <p>First, a magic trick. Pick a filename, any filename. In
        an empty directory:</p>
        <pre class="literallayout">
$ echo sweet &gt; YOUR_FILENAME
$ git init
$ git add .
$ find .git/objects -type f
</pre>

        <p>You’ll see <code class=
        "literal">.git/objects/aa/823728ea7d592acc69b36875a482cdf3fd5c8d</code>.</p>

        <p>How do I know this without knowing the filename? It’s
        because the SHA1 hash of:</p>
        <pre class="literallayout">
"blob" SP "6" NUL "sweet" LF
</pre>

        <p>is aa823728ea7d592acc69b36875a482cdf3fd5c8d, where SP is
        a space, NUL is a zero byte and LF is a linefeed. You can
        verify this by typing:</p>
        <pre class="literallayout">
$ printf "blob 6\000sweet\n" | sha1sum
</pre>

        <p>Git is <span class=
        "emphasis"><em>content-addressable</em></span>: files are
        not stored according to their filename, but rather by the
        hash of the data they contain, in a file we call a
        <span class="emphasis"><em>blob object</em></span>. We can
        think of the hash as a unique ID for a file’s contents, so
        in a sense we are addressing files by their content. The
        initial <code class="literal">blob 6</code> is merely a
        header consisting of the object type and its length in
        bytes; it simplifies internal bookkeeping.</p>

        <p>Thus I could easily predict what you would see. The
        file’s name is irrelevant: only the data inside is used to
        construct the blob object.</p>

        <p>You may be wondering what happens to identical files.
        Try adding copies of your file, with any filenames
        whatsoever. The contents of <code class=
        "literal">.git/objects</code> stay the same no matter how
        many you add. Git only stores the data once.</p>

        <p>By the way, the files within <code class=
        "literal">.git/objects</code> are compressed with zlib so
        you should not stare at them directly. Filter them through
        <a class="ulink" href="http://www.zlib.net/zpipe.c" target=
        "_top">zpipe -d</a>, or type:</p>
        <pre class="literallayout">
$ git cat-file -p aa823728ea7d592acc69b36875a482cdf3fd5c8d
</pre>

        <p>which pretty-prints the given object.</p>
      </div>

      <div class="section" title="Trees">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name="_trees"></a>Trees</h2>
            </div>
          </div>
        </div>

        <p>But where are the filenames? They must be stored
        somewhere at some stage. Git gets around to the filenames
        during a commit:</p>
        <pre class="literallayout">
$ git commit  # Type some message.
$ find .git/objects -type f
</pre>

        <p>You should now see 3 objects. This time I cannot tell
        you what the 2 new files are, as it partly depends on the
        filename you picked. We’ll proceed assuming you chose
        “rose”. If you didn’t, you can rewrite history to make it
        look like you did:</p>
        <pre class="literallayout">
$ git filter-branch --tree-filter 'mv YOUR_FILENAME rose'
$ find .git/objects -type f
</pre>

        <p>Now you should see the file <code class=
        "literal">.git/objects/05/b217bb859794d08bb9e4f7f04cbda4b207fbe9</code>,
        because this is the SHA1 hash of its contents:</p>
        <pre class="literallayout">
"tree" SP "32" NUL "100644 rose" NUL 0xaa823728ea7d592acc69b36875a482cdf3fd5c8d
</pre>

        <p>Check this file does indeed contain the above by
        typing:</p>
        <pre class="literallayout">
$ echo 05b217bb859794d08bb9e4f7f04cbda4b207fbe9 | git cat-file --batch
</pre>

        <p>With zpipe, it’s easy to verify the hash:</p>
        <pre class="literallayout">
$ zpipe -d &lt; .git/objects/05/b217bb859794d08bb9e4f7f04cbda4b207fbe9 | sha1sum
</pre>

        <p>Hash verification is trickier via cat-file because its
        output contains more than the raw uncompressed object
        file.</p>

        <p>This file is a <span class=
        "emphasis"><em>tree</em></span> object: a list of tuples
        consisting of a file type, a filename, and a hash. In our
        example, the file type is 100644, which means ‘rose` is a
        normal file, and the hash is the blob object that contains
        the contents of `rose’. Other possible file types are
        executables, symlinks or directories. In the last case, the
        hash points to a tree object.</p>

        <p>If you ran filter-branch, you’ll have old objects you no
        longer need. Although they will be jettisoned automatically
        once the grace period expires, we’ll delete them now to
        make our toy example easier to follow:</p>
        <pre class="literallayout">
$ rm -r .git/refs/original
$ git reflog expire --expire=now --all
$ git prune
</pre>

        <p>For real projects you should typically avoid commands
        like this, as you are destroying backups. If you want a
        clean repository, it is usually best to make a fresh clone.
        Also, take care when directly manipulating <code class=
        "literal">.git</code>: what if a Git command is running at
        the same time, or a sudden power outage occurs? In general,
        refs should be deleted with <span class=
        "strong"><strong>git update-ref -d</strong></span>, though
        usually it’s safe to remove <code class=
        "literal">refs/original</code> by hand.</p>
      </div>

      <div class="section" title="Commits">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name="_commits"></a>Commits</h2>
            </div>
          </div>
        </div>

        <p>We’ve explained 2 of the 3 objects. The third is a
        <span class="emphasis"><em>commit</em></span> object. Its
        contents depend on the commit message as well as the date
        and time it was created. To match what we have here, we’ll
        have to tweak it a little:</p>
        <pre class="literallayout">
$ git commit --amend -m Shakespeare  # Change the commit message.
$ git filter-branch --env-filter 'export
    GIT_AUTHOR_DATE="Fri 13 Feb 2009 15:31:30 -0800"
    GIT_AUTHOR_NAME="Alice"
    GIT_AUTHOR_EMAIL="alice@example.com"
    GIT_COMMITTER_DATE="Fri, 13 Feb 2009 15:31:30 -0800"
    GIT_COMMITTER_NAME="Bob"
    GIT_COMMITTER_EMAIL="bob@example.com"'  # Rig timestamps and authors.
$ find .git/objects -type f
</pre>

        <p>You should now see <code class=
        "literal">.git/objects/49/993fe130c4b3bf24857a15d7969c396b7bc187</code>
        which is the SHA1 hash of its contents:</p>
        <pre class="literallayout">
"commit 158" NUL
"tree 05b217bb859794d08bb9e4f7f04cbda4b207fbe9" LF
"author Alice &lt;alice@example.com&gt; 1234567890 -0800" LF
"committer Bob &lt;bob@example.com&gt; 1234567890 -0800" LF
LF
"Shakespeare" LF
</pre>

        <p>As before, you can run zpipe or cat-file to see for
        yourself.</p>

        <p>This is the first commit, so there are no parent
        commits, but later commits will always contain at least one
        line identifying a parent commit.</p>
      </div>

      <div class="section" title="Indistinguishable From Magic">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a name=
              "_indistinguishable_from_magic"></a>Indistinguishable
              From Magic</h2>
            </div>
          </div>
        </div>

        <p>Git’s secrets seem too simple. It looks like you could
        mix together a few shell scripts and add a dash of C code
        to cook it up in a matter of hours: a melange of basic
        filesystem operations and SHA1 hashing, garnished with lock
        files and fsyncs for robustness. In fact, this accurately
        describes the earliest versions of Git. Nonetheless, apart
        from ingenious packing tricks to save space, and ingenious
        indexing tricks to save time, we now know how Git deftly
        changes a filesystem into a database perfect for version
        control.</p>

        <p>For example, if any file within the object database is
        corrupted by a disk error, then its hash will no longer
        match, alerting us to the problem. By hashing hashes of
        other objects, we maintain integrity at all levels. Commits
        are atomic, that is, a commit can never only partially
        record changes: we can only compute the hash of a commit
        and store it in the database after we already have stored
        all relevant trees, blobs and parent commits. The object
        database is immune to unexpected interruptions such as
        power outages.</p>

        <p>We defeat even the most devious adversaries. Suppose
        somebody attempts to stealthily modify the contents of a
        file in an ancient version of a project. To keep the object
        database looking healthy, they must also change the hash of
        the corresponding blob object since it’s now a different
        string of bytes. This means they’ll have to change the hash
        of any tree object referencing the file, and in turn change
        the hash of all commit objects involving such a tree, in
        addition to the hashes of all the descendants of these
        commits. This implies the hash of the official head differs
        to that of the bad repository. By following the trail of
        mismatching hashes we can pinpoint the mutilated file, as
        well as the commit where it was first corrupted.</p>

        <p>In short, so long as the 20 bytes representing the last
        commit are safe, it’s impossible to tamper with a Git
        repository.</p>

        <p>What about Git’s famous features? Branching? Merging?
        Tags? Mere details. The current head is kept in the file
        <code class="literal">.git/HEAD</code>, which contains a
        hash of a commit object. The hash gets updated during a
        commit as well as many other commands. Branches are almost
        the same: they are files in <code class=
        "literal">.git/refs/heads</code>. Tags too: they live in
        <code class="literal">.git/refs/tags</code> but they are
        updated by a different set of commands.</p>
      </div>
    </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
    pageTracker._initData();
    pageTracker._trackPageview();
    </script>
  </div>

  <div class="footer">
    <a href="/~blynn/">Ben Lynn</a>
  </div>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

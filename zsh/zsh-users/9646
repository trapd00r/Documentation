From zsh-users-return-9646-mason-zsh=primenet.com.au@sunsite.dk Sat Nov 05 22:10:32 2005
Return-Path: <zsh-users-return-9646-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22643 invoked from network); 5 Nov 2005 22:10:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Nov 2005 22:10:30 -0000
Received: (qmail 49072 invoked from network); 5 Nov 2005 22:10:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Nov 2005 22:10:22 -0000
Received: (qmail 9567 invoked by alias); 5 Nov 2005 22:10:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9646
Received: (qmail 9557 invoked from network); 5 Nov 2005 22:10:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Nov 2005 22:10:15 -0000
Received: (qmail 48066 invoked from network); 5 Nov 2005 22:10:14 -0000
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by a.mx.sunsite.dk with SMTP; 5 Nov 2005 22:10:13 -0000
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1EYWDS-0002xv-NP
	for zsh-users@sunsite.dk; Sat, 05 Nov 2005 23:08:50 +0100
Received: from hippo.e-hippo.net ([216.182.10.250])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Sat, 05 Nov 2005 23:08:50 +0100
Received: from ljz by hippo.e-hippo.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Sat, 05 Nov 2005 23:08:50 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-users@sunsite.dk
From:  Lloyd Zusman <ljz@asfast.com>
Subject:  Re: Forcing expansion without explicit eval nor a subshell?
Date:  Sat, 05 Nov 2005 17:07:30 -0500
Lines: 77
Message-ID:  <m33bmaycil.fsf@asfast.com>
References:  <m364r73fpp.fsf@asfast.com>
	<1051105195640.ZM24493@candle.brasslantern.com>
	<m3d5lezwu7.fsf@asfast.com>
	<1051105213315.ZM24679@candle.brasslantern.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: hippo.e-hippo.net
User-Agent: Gnus/5.110004 (No Gnus v0.4) Emacs/21.4 (gnu/linux)
Cancel-Lock: sha1:FBrn7r5p46OGFM6v8S9vYruRPzU=
Sender: news <news@sea.gmane.org>
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Bart Schaefer <schaefer@brasslantern.com> writes:

> On Nov 5,  3:03pm, Lloyd Zusman wrote:
> }
> } I want to defer it in case I do this:
> } 
> }   yumargs='--disablerepo={dag,$livnastuff}'
> } 
> } ... where $livnastuff can change, and where it might or might not
> } involve more brace expansions.
>
> The answer is still to stop thinking about brace expansions and start
> thinking about array expansions.
>
>     yumargs=( --disablerepo={dag,'$^livnastuff'} )
>     livnastuff=( dries extras )
>     yum ${(e)yumargs}
>
> You can keep abstracting this out:
>
>     reponames=( dag '$^livnastuff' )
>     yumargs=( --disablerepo=$^reponames )
>     livnastuff=( dries extras )
>     yum ${(e)yumargs}
>
> Or
>
>     pkgnames=( kernel '$^livnapkgs' )
>     reponames=( dag '$^livnarepos' )
>     yumargs=( --exclude='${(e)^pkgnames}' --disablerepo='${(e)^reponames}' )
>     livnarepos=( dries extras )
>     yum ${(e)yumargs}


Hmm ... OK.  I get it.  Thanks.

However, I'm still not sure how to do what I want in the array world,
because sometimes, there is nesting.

I'll explain:

This is what I often need to do these days, because the livna sites seem
to be down a lot:

  yum --disablerepo=livna \
      --disablerepo=livna-updates \
      --disablerepo=livna-extras \
      --disablerepo=livna-testing \
      update

This could be abreviated as such, in the brace-expansion world:

  yum --disablerepo=livna{,-updates,-extras,-testing} update

But sometimes, I also want to disable others, which would go like this:

  yum --disablerepo={dag,livna{,-updates,-extras,-testing}} update

Note the nesting of braces in this case.

Other times, livna is OK, but freshrpms is down:

  yum --disablerepo={dag,freshrpms} update

Therefore, sometimes there is nesting, and other times, there isn't.

I can't figure out how to do the nesting stuff using arrays, without
things getting rather complex.  The brace syntax handles nesting very
nicely.

But perhaps I'm still missing something about arrays ... ???


-- 
 Lloyd Zusman
 ljz@asfast.com
 God bless you.


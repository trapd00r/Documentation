From zsh-workers-return-9885-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Feb 27 16:34:38 2000
Return-Path: <zsh-workers-return-9885-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8488 invoked from network); 27 Feb 2000 16:34:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Feb 2000 16:34:36 -0000
Received: (qmail 15769 invoked by alias); 27 Feb 2000 16:34:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9885
Received: (qmail 15755 invoked from network); 27 Feb 2000 16:34:25 -0000
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: some fix for completion functions
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 28 Feb 2000 01:34:14 +0900
Message-ID: <rsqu2iuy589.fsf@crane.jaist.ac.jp>
Lines: 82
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

This modifies some completion functions.

* `dvips -f <TAB>' completes filenames.  Although the manual says it
  reads a .dvi file from stdin, actually it also reads a file specified as
  an argument.

* `lynx <TAB>' completes .html files at first.

* `xwininfo' has options not specifeid in _xutils: -children and -tree.

Index: Completion/User/_dvi
===================================================================
RCS file: /projects/zsh/zsh/Completion/User/_dvi,v
retrieving revision 1.1.1.5
diff -u -r1.1.1.5 _dvi
--- Completion/User/_dvi	1999/12/01 15:29:43	1.1.1.5
+++ Completion/User/_dvi	2000/02/27 16:19:00
@@ -22,7 +22,7 @@
     '(-X -Y)-D[set resolution]:resolution in dots per inch:' \
     '-e[set maximum character offset]:maximum character offset:' \
     '-E[generate EPSF file]' \
-    '(: -o)-f[read from stdin, write to stdout]' \
+    '(-o)-f[write to stdout]' \
     '-F[append control-D]' \
     '-h[specify additional header file]:postscript header file:_files -g \*.\(\#i\)\(ps\|eps\)' \
     '-i[one file per section]' \
Index: Completion/User/_lynx
===================================================================
RCS file: /projects/zsh/zsh/Completion/User/_lynx,v
retrieving revision 1.1.1.5
diff -u -r1.1.1.5 _lynx
--- Completion/User/_lynx	1999/11/15 12:01:49	1.1.1.5
+++ Completion/User/_lynx	2000/02/27 16:19:00
@@ -37,10 +37,10 @@
   '-head' \
   '-help' \
   '-historical' \
-  '-homepage=:URL: _urls -f' \
+  '-homepage=:URL:->html' \
   '-image_links' \
   '-ismap' \
-  '-index=:URL: _urls -f' \
+  '-index=:URL:->html' \
   '-link=:NUMBER:' \
   '-localhost' \
   '-locexec' \
@@ -95,7 +95,7 @@
   '-version' \
   '-vikeys' \
   '-width=:NUMBER:' \
-  ':url: _urls -f'
+  ':url:->html'
 
 case "$state" in
 restrictions)
@@ -105,5 +105,8 @@
     goto inside_ftp inside_news inside_rlogin inside_telnet jump mail \
     multibook news_post options_save outside_ftp outside_news outside_rlogin \
     outside_telnet print shell suspend telnet_port useragent
+  ;;
+html)
+  _files -g '*.html' || _urls
   ;;
 esac
Index: Completion/X/_xutils
===================================================================
RCS file: /projects/zsh/zsh/Completion/X/_xutils,v
retrieving revision 1.1.1.6
diff -u -r1.1.1.6 _xutils
--- Completion/X/_xutils	2000/02/04 12:14:11	1.1.1.6
+++ Completion/X/_xutils	2000/02/27 16:19:00
@@ -8,7 +8,7 @@
   ;;
 xwininfo)
   _x_arguments \
-    -{help,int,stats,bits,events,size,wm,shape,frame,all,english,metric} \
+    -{help,int,children,tree,stats,bits,events,size,wm,shape,frame,all,english,metric} \
     '(-id -name)-root' \
     '(-id -root)-name:name: _x_window -n' \
     '(-name -root)-id:id: _x_window'
-- 
Tanaka Akira


From zsh-workers-return-21649-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 17 17:15:46 2005
Return-Path: <zsh-workers-return-21649-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21345 invoked from network); 17 Aug 2005 17:15:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Aug 2005 17:15:44 -0000
Received: (qmail 53439 invoked from network); 17 Aug 2005 17:15:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2005 17:15:38 -0000
Received: (qmail 29317 invoked by alias); 17 Aug 2005 17:15:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21649
Received: (qmail 29308 invoked from network); 17 Aug 2005 17:15:35 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Aug 2005 17:15:35 -0000
Received: (qmail 53175 invoked from network); 17 Aug 2005 17:15:35 -0000
Received: from dsl3-63-249-88-2.cruzio.com (HELO dot.blorf.net) (63.249.88.2)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2005 17:15:31 -0000
Received: by dot.blorf.net (Postfix, from userid 1000)
	id BE46290F; Wed, 17 Aug 2005 10:15:29 -0700 (PDT)
Date: Wed, 17 Aug 2005 10:15:29 -0700
From: Wayne Davison <wayned@users.sourceforge.net>
To: acs@alumni.princeton.edu
Cc: zsh-workers@sunsite.dk
Subject: Re: SunOS build failures for the last 2 days
Message-ID: <20050817171529.GB21995@blorf.net>
References: <20a80721050817080831aad306@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="MGYHOYXEY6WxJCY8"
Content-Disposition: inline
In-Reply-To: <20a80721050817080831aad306@mail.gmail.com>
User-Agent: Mutt/1.5.9i
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4


--MGYHOYXEY6WxJCY8
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

On Wed, Aug 17, 2005 at 11:08:41AM -0400, Vin Shelton wrote:
> "./utils.epro", line 14: syntax error before or at: c
> "./utils.epro", line 14: warning: undefined or missing type for: c

The source was just recently changed to define ZLE_UNICODE_SUPPORT by
default on (what we hoped would be) systems that would support the new
Unicode support.  You can get back to the non-Unicode codebase by using
the configure option --disable-multibyte.  However, it would be nice if
you could help us to debug what part of the Unicode support is failing
on SunOS.

That error message makes it look like the type "wint_t" isn't known to
the compiler, but if that is true, I don't see how getkeystring() would
successfully build without ZLE_UNICODE_SUPPORT being defined -- unless
the new configure test for multibyte support had messed up somehow?
Perhaps try compiling and running the attached C program (compile it in
the same dir as your zsh config.h using "cc -o multibyte multibyte.c").

..wayne..

--MGYHOYXEY6WxJCY8
Content-Type: text/x-csrc; charset=us-ascii
Content-Disposition: attachment; filename="multibyte.c"

#include <stdio.h>
#include "config.h"

#ifdef HAVE_LOCALE_H
# include <locale.h>
#endif

int
main()
{
#if defined(HAVE_WCHAR_H) && defined(HAVE_WCTOMB) \
 && defined(HAVE_MBRTOWC) && defined(HAVE_WCRTOMB) \
 && defined (__STDC_ISO_10646__)
    printf("Yes\n");
#else
    printf("No\n");
#endif
    return 0;
}

--MGYHOYXEY6WxJCY8--


From zsh-workers-return-20269-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 18 17:06:53 2004
Return-Path: <zsh-workers-return-20269-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7379 invoked from network); 18 Aug 2004 17:06:52 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Aug 2004 17:06:52 -0000
Received: (qmail 96441 invoked from network); 18 Aug 2004 17:06:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Aug 2004 17:06:37 -0000
Received: (qmail 684 invoked by alias); 18 Aug 2004 17:06:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20269
Received: (qmail 674 invoked from network); 18 Aug 2004 17:06:24 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 18 Aug 2004 17:06:24 -0000
Received: (qmail 95540 invoked from network); 18 Aug 2004 17:04:38 -0000
Received: from dsl3-63-249-88-2.cruzio.com (HELO binome.blorf.net) (63.249.88.2)
  by a.mx.sunsite.dk with SMTP; 18 Aug 2004 17:04:36 -0000
Received: by binome.blorf.net (Postfix, from userid 1000)
	id B2BE32665; Wed, 18 Aug 2004 10:04:29 -0700 (PDT)
Date: Wed, 18 Aug 2004 10:04:27 -0700
From: Wayne Davison <wayned@users.sourceforge.net>
To: zsh-workers@sunsite.dk
Subject: Re: Bug#262247: zsh: Improved make completion
Message-ID: <20040818170426.GC11047@blorf.net>
References: <20040730101751.GA11905@larve.net> <20040730153054.GA4059@scowler.net> <20040730165133.GL12279@larve.net> <20040818150736.GI4753@larve.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20040818150736.GI4753@larve.net>
User-Agent: Mutt/1.5.6+20040722i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.9 required=6.0 tests=BAYES_30 autolearn=no 
	version=2.63
X-Spam-Hits: -0.9

While I was looking at your patch, I tried turning on useperl without
your patch applied and discovered that the completion of make targets
stopped working.  Here's a patch to fix it:

--- orig/_make	2002-10-03 23:03:41.000000000 -0700
+++ _make	2004-08-18 10:01:53.000000000 -0700
@@ -35,7 +35,7 @@
     elif [[ -n $useperl ]]; then
       tmp=(
       $(perl -ne '@matches = /^(?:([a-zA-Z0-9]+[^\/\t=\s]+)\s*)+:/  and
-	print join(" ", @matches);
+	print join(" ", @matches), "\n";
 if (/^\.include\s+\<bsd\.port\.(subdir\.|pre\.)?mk>/ ||
     /^\.include\s+\".*mk\/bsd\.pkg\.(subdir\.)?mk\"/) {
     print "fetch fetch-list extract patch configure build install reinstall deinstall package describe checkpatch checksum makesum\n";

..wayne..


From zsh-users-return-8858-mason-zsh=primenet.com.au@sunsite.dk Tue May 17 20:54:14 2005
Return-Path: <zsh-users-return-8858-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1330 invoked from network); 17 May 2005 20:54:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 May 2005 20:54:13 -0000
Received: (qmail 80052 invoked from network); 17 May 2005 20:54:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 May 2005 20:54:04 -0000
Received: (qmail 29250 invoked by alias); 17 May 2005 20:53:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8858
Received: (qmail 29239 invoked from network); 17 May 2005 20:53:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 May 2005 20:53:56 -0000
Received: (qmail 78852 invoked from network); 17 May 2005 20:53:56 -0000
Received: from yupa.krose.org (HELO chihiro.valley-of-wind.krose.org) (66.92.73.159)
  by a.mx.sunsite.dk with SMTP; 17 May 2005 20:53:51 -0000
Received: from [192.168.32.22] (jihl-squtun.valley-of-wind.krose.org [192.168.32.22])
	by chihiro.valley-of-wind.krose.org (8.13.4/8.13.4/Debian-1) with ESMTP id j4HKroki013737
	for <zsh-users@sunsite.dk>; Tue, 17 May 2005 16:53:50 -0400
Message-ID: <428A59D9.9050305@krose.org>
Date: Tue, 17 May 2005 16:53:45 -0400
From: Kyle Rose <krose@krose.org>
Organization: krose.org
User-Agent: Debian Thunderbird 1.0.2 (X11/20050331)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: zsh-users@sunsite.dk
Subject: Completion strangeness
X-Enigmail-Version: 0.91.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.3

This relates to zsh 4.2.5's ssh command line completion.  I don't know
if this problem exists in earlier versions.

Here's the problem I'm seeing:

  krose@jihl ~% ssh krose@y<TAB>

results in

  krose@jihl ~% ssh krose@yupa..org

with the cursor over the second ".".  Then, if I hit <TAB> again, I get

  krose@jihl ~% ssh krose@yupa.krose.org

with the completion "done" (i.e., the cursor a space after "org").
Problem is, when I do

  krose@jihl ~% ssh krose@y^Xn

I get

  yupa-dmz.valley-of-wind.krose.org  yupa.krose.org
  yupa.valley-of-wind.krose.org

Clearly, any of them match the original attempt to complete.  This works
just fine with hosts only:

  krose@jihl ~% ssh y<TAB>

  krose@jihl ~% ssh yupa<TAB>

  krose@jihl ~% ssh yupa<TAB>
  yupa-dmz.valley-of-wind.krose.org  yupa.krose.org
  yupa.valley-of-wind.krose.org

  krose@jihl ~% ssh yupa-dmz.valley-of-wind.krose.org
  yupa-dmz.valley-of-wind.krose.org  yupa.krose.org
  yupa.valley-of-wind.krose.org

and so on, cycling through the three potential completions.

Any clues?

BTW, I've now been using zsh as my exclusive interactive shell for
almost exactly 10 years.  Sweet. :)

Cheers,
Kyle


From zsh-workers-return-8931-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Dec 07 14:47:05 1999
Return-Path: <zsh-workers-return-8931-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10910 invoked from network); 7 Dec 1999 14:47:03 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Dec 1999 14:47:03 -0000
Received: (qmail 7464 invoked by alias); 7 Dec 1999 14:46:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8931
Received: (qmail 7457 invoked from network); 7 Dec 1999 14:46:53 -0000
Date: Tue, 7 Dec 1999 09:46:16 -0500
From: Clint Adams <schizo@debian.org>
To: Ollivier Robert <roberto@keltia.freenix.fr>
Cc: zsh-workers@sunsite.auc.dk
Subject: PATCH: transform sed portability
Message-ID: <19991207094616.A9991@dman.com>
References: <19991206213729.A35904@keltia.freenix.fr>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0i
In-Reply-To: <19991206213729.A35904@keltia.freenix.fr>; from roberto@keltia.freenix.fr on Mon, Dec 06, 1999 at 09:37:29PM +0100

> I'm using the latest version from anoncvs from Tanaka-san and tumbled on the
> following problem during the build. Do we need a special version of sed now
> (GNU sed ?) ?

This should work with both FreeBSD and GNU seds.

Index: Doc/Makefile.in
===================================================================
RCS file: /cvs/zsh/zsh/Doc/Makefile.in,v
retrieving revision 1.1.1.35
diff -u -r1.1.1.35 Makefile.in
--- Doc/Makefile.in	1999/12/06 17:00:20	1.1.1.35
+++ Doc/Makefile.in	1999/12/07 14:44:12
@@ -81,7 +81,7 @@
 zsh.texi: $(sdir)/zsh.texi.in
 	@test -f $< -a -s $<
 	tzsh=`echo zsh | sed '$(transform); s/,/\\\\,/g'`; \
-	sed "/@setfilename/{; s/@setfilename //; s,zsh,$$tzsh, ; s/^/@setfilename /;}" < $< > zsh.texi
+	sed "/@setfilename/{s/@setfilename //; s,zsh,$$tzsh, ; s/^/@setfilename /;}" < $< > zsh.texi
 
 .yo.1:
 	case $@ in \


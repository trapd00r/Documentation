From zsh-workers-request@math.gatech.edu Fri Jun 05 06:55:49 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14411 invoked from network); 5 Jun 1998 06:55:49 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 5 Jun 1998 06:55:49 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id CAA14340;
	Fri, 5 Jun 1998 02:39:22 -0400 (EDT)
Resent-Date: Fri, 5 Jun 1998 02:39:06 -0400 (EDT)
Message-ID: <003801bd904c$4df7c680$21c9ca95@ao13.mow.sni.de>
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "ZSH users mailing list" <zsh-users@math.gatech.edu>
Subject: sourcing of /etc/profile with $0 == -sh
Date: Fri, 5 Jun 1998 10:36:41 +0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 4.72.2106.4
X-MimeOLE: Produced By Microsoft MimeOLE V4.72.2106.4
Resent-Message-ID: <"JO7BR3.0.LV3.9AvTr"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1568
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

In my /etc/zprofile I source /etc/profile. Unfortunately, it contains code
depending of shell (that is, case $0 in -sh | -ksh ...). I don't want to
mess up with system /etc/profile, so I tried to find a way to set $0 only
for the time of sourcing. Currently I use (zsh-3.1.4):

function source_etc_profile () {
    local 0=-zh
    emulate -R sh
    setopt localoptions

    source /etc/profile
}

source_etc_profile

The questions is, how reliable is creating of local shadow of $0? I don't
want the next release to break this script

thank you

============================================================
Andrej Borsenkow                Fax:   +7 (095) 796 99 20
SNI ITS Moscow                  Tel:   +7 (095) 796 99 24

NERV:  borsenkow.msk            E-Mail: borsenkow.msk@sni.de
============================================================



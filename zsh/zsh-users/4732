From zsh-users-return-4732-mason-zsh=primenet.com.au@sunsite.dk Fri Mar 01 17:26:17 2002
Return-Path: <zsh-users-return-4732-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9062 invoked from network); 1 Mar 2002 17:26:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 Mar 2002 17:26:17 -0000
Received: (qmail 8462 invoked by alias); 1 Mar 2002 17:26:06 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4732
Received: (qmail 8451 invoked from network); 1 Mar 2002 17:26:05 -0000
Date: Fri, 1 Mar 2002 17:25:05 +0000
From: Ian Lynagh <igloo@earth.li>
To: zsh-users@sunsite.dk
Subject: Re: segfault when overriding complete-word then trying to use tab completion
Message-ID: <20020301172505.GA11135@stu163.keble.ox.ac.uk>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20020301001623.GA3551@stu163.keble.ox.ac.uk> <1020301092621.ZM18214@candle.brasslantern.com> <20020301123241.GA9242@stu163.keble.ox.ac.uk> <1020301163650.ZM18718@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1020301163650.ZM18718@candle.brasslantern.com>
User-Agent: Mutt/1.3.25i
Sender: Ian Lynagh <ian@lynagh.demon.co.uk>

On Fri, Mar 01, 2002 at 04:36:50PM +0000, Bart Schaefer wrote:
> On Mar 1, 12:32pm, Ian Lynagh wrote:
> }
> } Linux/x86, zsh 4.0.4, and no, it doesn't happen with zsh -f.
> 
> "Linix/x86" is not even close to specific enough.

What exactly do you want to know then?
It's running 2.4.8-ac9, Debian, libc6 2.2.4-7.

ldd `which zsh` gives
        libcap.so.1 => /lib/libcap.so.1 (0x40020000)
        libdl.so.2 => /lib/libdl.so.2 (0x40024000)
        libnsl.so.1 => /lib/libnsl.so.1 (0x40028000)
        libncurses.so.5 => /lib/libncurses.so.5 (0x4003d000)
        libm.so.6 => /lib/libm.so.6 (0x4007c000)
        libc.so.6 => /lib/libc.so.6 (0x4009e000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)

> } It also doesn't happen if I . /etc/zshrc and then ./.zshrc in zsh -f. Is
> } there anything else I need to do to simulate the effect of -f not being
> } given so I can track the problem down?
> 
> Look for /etc/zshenv, ~/.zshenv, /etc/zshrc ...
> 
> Your best bet is probably to run `zsh -x 2> xtrace.out', then immediately
> exit from that shell and look at the xtrace.out file to see what commands
> are being executed.

Can you reproduce it if you also have this in your .zshrc?
Just running it later doesn't seem sufficient - _main_complete only
seems to execute if it's in there.

-----
zstyle ':completion:*' completer _expand _complete
zstyle ':completion:*' completions 1
zstyle ':completion:*' glob 1
zstyle ':completion:*' matcher-list '' 'r:|[._-]=* r:|=*'
'm:{a-zA-Z}={A-Za-z}' 'm:{a-z}={A-Z} l:|=* r:|=*'
zstyle ':completion:*' max-errors 1
zstyle :compinstall filename '/home/ian/.zshrc'

autoload -U compinit
compinit
-----


Ta
Ian


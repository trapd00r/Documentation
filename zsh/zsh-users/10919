From zsh-users-return-10919-mason-zsh=primenet.com.au@sunsite.dk Wed Nov 01 18:14:01 2006
Return-Path: <zsh-users-return-10919-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18406 invoked from network); 1 Nov 2006 18:13:53 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO,
	HTML_MESSAGE autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Nov 2006 18:13:53 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 43960 invoked from network); 1 Nov 2006 18:13:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Nov 2006 18:13:46 -0000
Received: (qmail 18502 invoked by alias); 1 Nov 2006 18:13:35 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10919
Received: (qmail 18492 invoked from network); 1 Nov 2006 18:13:34 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 1 Nov 2006 18:13:34 -0000
Received: (qmail 42629 invoked from network); 1 Nov 2006 18:13:34 -0000
Received: from smtp.ctxuk.citrix.com (HELO SMTP.EU.CITRIX.COM) (62.200.22.115)
  by a.mx.sunsite.dk with SMTP; 1 Nov 2006 18:13:30 -0000
Received: from lonpexchmx01.citrite.net ([10.30.224.191])
  by SMTP.EU.CITRIX.COM with ESMTP; 01 Nov 2006 18:13:12 +0000
X-IronPort-AV: i="4.09,379,1157324400"; 
   d="scan'208,217"; a="7233747:sNHT56820228"
Received: from lonpexch01.citrite.net ([10.30.224.136]) by lonpexchmx01.citrite.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 1 Nov 2006 18:13:11 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6FDE1.640D6C3C"
Subject: Case insensitive completion problems with cygwin
Date: Wed, 1 Nov 2006 18:13:11 -0000
Message-ID: <DD74FBB8EE28D441903D56487861CD9D09717519@lonpexch01.citrite.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Case insensitive completion problems with cygwin
Thread-Index: Acb94WBouYXa5QsrSQ2Fc5oa4wS4IQ==
From: "John Cooper" <john.cooper@eu.citrix.com>
To: <zsh-users@sunsite.dk>
X-OriginalArrivalTime: 01 Nov 2006 18:13:11.0714 (UTC) FILETIME=[64328820:01C6FDE1]

This is a multi-part message in MIME format.

------_=_NextPart_001_01C6FDE1.640D6C3C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

[I'm using zsh 4.3.2 on Windows 2003 with cygwin]

If I run `zsh -f' file completion works as expected in all the
following:

$ ls /c/<TAB>
$ ls /C/<TAB>
$ ls c:/<TAB>
$ ls C:/<TAB>

However, after running the following:
  zstyle ':completion:*' matcher-list 'm:{a-z}=3D{A-Z}'
  autoload -U compinit
  compinit -C

$ ls /c/<TAB>   # fails - no completions are listed
$ ls /C/<TAB>   # works as expected
$ ls c:/<TAB>   # fails - no completions are listed
$ ls C:/<TAB>   # works as expected


I've found I can work around the problem by adding a '' to the above
matcher-list, namely:
  zstyle ':completion:*' matcher-list '' 'm:{a-z}=3D{A-Z}'

However, this isn't really the behavior I'd like as the following will
no longer
automatically complete both uppercase and lowercase matches. So if I now
type
the following:
$ ls /c/p<TAB>

.. it will no longer list "/c/Program\ Files" as one of the completion
matches,
and I have to manually hit backspace and change to an uppercase "P".

So, if I revert to the original matcher-list and try messing with
fake-files:
  zstyle ':completion:*' matcher-list 'm:{a-z}=3D{A-Z}'
  zstyle ':completion:*' fake-files '/:c g h l r w z'

.. I then get the desired behavior where the following lists all files
beginning with 'p' or 'P':
$ ls /c/p<TAB>

However, now the following no longer works:

$ ls c:/<TAB>  # fails - no completions are listed


Is there a way to get true case-insensitive completion working for both
/c/ and
c:/ as a prefix?

Thanks,

    --- John


------_=_NextPart_001_01C6FDE1.640D6C3C
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7650.28">
<TITLE>Case insensitive completion problems with cygwin</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">[I</FONT></SPAN><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">&#8217;</FONT></SPAN><SPAN LANG=3D"en-us"><FONT =
SIZE=3D2 FACE=3D"Verdana">m using zsh 4.3.2 on</FONT></SPAN><SPAN =
LANG=3D"en-us"> <FONT SIZE=3D2 FACE=3D"Verdana">Windows 2003 =
with</FONT></SPAN><SPAN LANG=3D"en-us"> <FONT SIZE=3D2 =
FACE=3D"Verdana">cygwin]</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">If I =
run `zsh -f' file completion works as expected in all the =
following:</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
/c/&lt;TAB&gt;</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
/C/&lt;TAB&gt;</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
c:/&lt;TAB&gt;</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
C:/&lt;TAB&gt;</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">However, after running the following:</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">&nbsp; =
zstyle ':completion:*' matcher-list 'm:{a-z}=3D{A-Z}'</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">&nbsp; =
autoload -U compinit</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">&nbsp; =
compinit -C</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
/c/&lt;TAB&gt;&nbsp;&nbsp; # fails - no completions are =
listed</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
/C/&lt;TAB&gt;&nbsp;&nbsp; # works as expected</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
c:/&lt;TAB&gt;&nbsp;&nbsp; # fails - no completions are =
listed</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
C:/&lt;TAB&gt;&nbsp;&nbsp; # works as expected</FONT></SPAN></P>
<BR>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">I've =
found I can work around the problem by adding a '' to the above =
matcher-list, namely:</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">&nbsp; =
zstyle ':completion:*' matcher-list '' =
'm:{a-z}=3D{A-Z}'</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">However, this isn't really the behavior I'd like as the =
following will no longer</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">automatically complete both uppercase and lowercase =
matches. So if I now type</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">the =
following:</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
/c/p&lt;TAB&gt;</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">.. it =
will no longer list &quot;/c/Program\ Files&quot; as one of the =
completion matches,</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">and I =
have to manually hit backspace and change to an uppercase =
&quot;P&quot;.</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">So, if =
I revert to the original matcher-list and try messing with =
fake-files:</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">&nbsp; =
zstyle ':completion:*' matcher-list 'm:{a-z}=3D{A-Z}'</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">&nbsp; =
zstyle ':completion:*' fake-files '/:c g h l r w z'</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">.. I =
then get the desired behavior where the following lists all =
files</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">beginning with 'p' or 'P':</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
/c/p&lt;TAB&gt;</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">However, now the following no longer =
works:</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">$ ls =
c:/&lt;TAB&gt;&nbsp; # fails - no completions are =
listed</FONT></SPAN></P>
<BR>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">Is =
there a way to get true case-insensitive completion working for both /c/ =
and</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 FACE=3D"Verdana">c:/ as =
a prefix?</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">Thanks,</FONT></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"></SPAN><SPAN LANG=3D"en-us"></SPAN><A =
NAME=3D""><SPAN LANG=3D"en-us"><FONT SIZE=3D2 =
FACE=3D"Verdana">&nbsp;&nbsp;&nbsp; --- John</FONT></SPAN></A><SPAN =
LANG=3D"en-us"></SPAN><SPAN LANG=3D"en-us"></SPAN></P>

<P DIR=3DLTR><SPAN LANG=3D"en-us"></SPAN></P>

</BODY>
</HTML>
------_=_NextPart_001_01C6FDE1.640D6C3C--


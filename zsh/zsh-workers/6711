From zsh-workers-return-6711-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 18 10:36:22 1999
Return-Path: <zsh-workers-return-6711-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7549 invoked from network); 18 Jun 1999 10:36:20 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Jun 1999 10:36:20 -0000
Received: (qmail 18465 invoked by alias); 18 Jun 1999 10:36:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6711
Received: (qmail 18373 invoked from network); 18 Jun 1999 10:36:03 -0000
Date: Fri, 18 Jun 1999 12:36:02 +0200 (MET DST)
Message-Id: <199906181036.MAA13272@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Fri, 18 Jun 1999 12:01:39 +0200
	(MET DST)
Subject: Re: PATCH: New completions


I wrote:

> This didn't apply after 6689, so here is a modified patch for that --
> with some other changes (I hope you find them acceptable). The list
> looks more like a select list and I avoided using `compgen -s'.

Oops... we should still be able to complete parameter names, I think
(unfortunately this may make the list much too long for the screen).

Bye
 Sven

diff -u oc/Base/_subscript Completion/Base/_subscript
--- oc/Base/_subscript	Fri Jun 18 12:02:08 1999
+++ Completion/Base/_subscript	Fri Jun 18 12:32:56 1999
@@ -8,7 +8,10 @@
   else
     compadd -S ']' - "${(@kP)${compstate[parameter]}}"
   fi
-elif [[ ${(Pt)${compstate[parameter]}} = array* ]]; then
+  return
+fi
+
+if [[ ${(Pt)${compstate[parameter]}} = array* ]]; then
    ind=( {1..${#${(P)${compstate[parameter]}}}} )
    list=()
    for i in "$ind[@]"; do
@@ -21,6 +24,6 @@
   else
     compadd -S ']' -y list - "$ind[@]"
   fi
-else
-  _compalso -math-
 fi
+
+_compalso -math-

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


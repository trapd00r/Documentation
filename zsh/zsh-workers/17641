From zsh-workers-return-17641-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 09 16:23:16 2002
Return-Path: <zsh-workers-return-17641-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10395 invoked from network); 9 Sep 2002 16:23:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Sep 2002 16:23:15 -0000
Received: (qmail 12479 invoked by alias); 9 Sep 2002 16:23:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17641
Received: (qmail 12454 invoked from network); 9 Sep 2002 16:23:04 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020909162233.ZM32158@candle.brasslantern.com>
Date: Mon, 9 Sep 2002 16:22:33 +0000
In-Reply-To: <20020909144150.63526.qmail@web10410.mail.yahoo.com>
Comments: In reply to Felix Rosencrantz <f_rosencrantz@yahoo.com>
        "Re: Occasional 'job table full or recursion limit exceeded'" (Sep  9,  7:41am)
References: <20020909144150.63526.qmail@web10410.mail.yahoo.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Felix Rosencrantz <f_rosencrantz@yahoo.com>, zsh-workers@sunsite.dk
Subject: Re: Occasional 'job table full or recursion limit exceeded'
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 9,  7:41am, Felix Rosencrantz wrote:
} Subject: Re: Occasional 'job table full or recursion limit exceeded'
}
} --- Bart Schaefer <schaefer@brasslantern.com> wrote:
} 
} > I spent much more time than I should have on getting the best
} > --max-procs algorithm I could come up with.  Comments welcome.
} 
} Not really sure if this is the feedback you want.

I'm not really sure what to say, because the message you quoted doesn't
have anything to do with the thread you're replying to.  (The excerpt
above refers to the number of background jobs spawned by my "zargs"
function, not to the value of MAXJOBS in the C code.)

} Since I mostly only see it in long running shells, where my suspended
} processes have accrued, it seems like increasng it by small or
} fractional increments would be more conservative of memory usage than
} a doubling strategy.

Part of the problem is that the value of MAXJOBS was established when
each job table entry represented a real unix process.  Now that we make
job table entries for internal shell control structures, we need more
table space.  It still shouldn't need to grow without bound (though I
believe we have other anti-infinite recursion mechanisms in place now).

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


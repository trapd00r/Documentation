From zsh-workers-return-12539-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Aug 05 00:40:37 2000
Return-Path: <zsh-workers-return-12539-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29633 invoked from network); 5 Aug 2000 00:40:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Aug 2000 00:40:36 -0000
Received: (qmail 17913 invoked by alias); 5 Aug 2000 00:40:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12539
Received: (qmail 17906 invoked from network); 5 Aug 2000 00:40:28 -0000
Date: Fri, 4 Aug 2000 20:40:21 -0400
From: Clint Adams <schizo@debian.org>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: tail-dropping in files module mkdir
Message-ID: <20000804204021.A7925@dman.com>
References: <20000804105323.B4820@dman.com> <1000804151753.ZM28846@candle.brasslantern.com> <20000804113220.A5135@dman.com> <1000804161026.ZM28907@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.1.2i
In-Reply-To: <1000804161026.ZM28907@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Fri, Aug 04, 2000 at 04:10:25PM +0000

> It can just keep lopping the tail as long as (errno == ENOENT ||
> errno == ENOTDIR), I think.  There are some special cases involving paths

I was assuming that there would be non-mkdir cases where this
would result in the wrong filesystem being selected, but I can't
think of such a situation.

> that contain "../" that I'm a bit worried about, but I think most of
> those (and paths with lots of consecutive slashes) would fail zsh's
> constant-PATH_MAX tests already in boundary cases, so probably nothing
> will become broken that wasn't already.

I suggest a compat.c wrapper around realpath().  Is subsuming
LGPL- or BSD-licensed code objectionable?


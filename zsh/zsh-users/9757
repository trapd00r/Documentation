From zsh-users-return-9757-mason-zsh=primenet.com.au@sunsite.dk Mon Dec 05 05:00:43 2005
Return-Path: <zsh-users-return-9757-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10 invoked from network); 5 Dec 2005 05:00:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Dec 2005 05:00:41 -0000
Received: (qmail 21510 invoked from network); 5 Dec 2005 05:00:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2005 05:00:34 -0000
Received: (qmail 10925 invoked by alias); 5 Dec 2005 05:00:26 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9757
Received: (qmail 10914 invoked from network); 5 Dec 2005 05:00:25 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Dec 2005 05:00:25 -0000
Received: (qmail 20415 invoked from network); 5 Dec 2005 05:00:25 -0000
Received: from vms046pub.verizon.net (206.46.252.46)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2005 05:00:23 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms046.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-4.02 (built Sep  9 2005))
 with ESMTPA id <0IR000MWGDWL3HE1@vms046.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sun, 04 Dec 2005 23:00:22 -0600 (CST)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id jB550Hab022004	for
 <zsh-users@sunsite.dk>; Sun, 04 Dec 2005 21:00:18 -0800
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id jB550HUf022003	for zsh-users@sunsite.dk; Sun,
 04 Dec 2005 21:00:17 -0800
Date: Mon, 05 Dec 2005 05:00:16 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: The "-g" option in compctl doesn't insert correctly
In-reply-to: <20051204093535.GA598@DervishD>
To: Zsh Users <zsh-users@sunsite.dk>
Message-id: <1051205050016.ZM22002@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20051204093535.GA598@DervishD>
Comments: In reply to DervishD <zsh@dervishd.net>
 "The "-g" option in compctl doesn't insert correctly" (Dec  4, 10:35am)

On Dec 4, 10:35am, DervishD wrote:
}
}     $ compctl -g '/example/dir/*(.x:t)' example
} 
}     Now, if I press <ENTER> the completion is accepted but the cursor
} doesn't move on to allow for more completions. If I remove the ":t"
} modifier, then all works ok.

The -g option tells compctl that what's being completed are file names,
which in the absence of any other options are expected to be relative
to either the current directory or to the path prefix on the command
line; but what you're generating are the tails of file paths, relative
to some fixed directory.

Compctl is going to try to find a file (or directory) matching the
name you generated, so that it can append either a space (for a file)
or a slash (for a directory); but it's not going to find anything that
matches (unless your current directory is /example/dir) because you've
lopped off the path.  So it appends nothing.

What you really want is

    compctl -W /example/dir -g '*(.x)' example


From zsh-workers-request@euclid.skiles.gatech.edu Fri Feb 28 02:58:18 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 14419 invoked from network); 28 Feb 1997 02:58:15 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 28 Feb 1997 02:58:15 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id VAA00566; Thu, 27 Feb 1997 21:51:15 -0500 (EST)
Resent-Date: Thu, 27 Feb 1997 21:51:15 -0500 (EST)
Message-Id: <199702271653.VAA07297@lator.cybercom.net>
Date: Thu, 27 Feb 1997 21:54:51 -0500 (EST)
From: Xris Laas <chrisl@cybercom.net>
Sender: Chris Laas <chris@cybercom.net>
Reply-To: chrisl@cybercom.net
Subject: Re: compctl-related core dump
To: Harres@UWyo.Edu
cc: zsh-users@math.gatech.edu, zsh-workers@math.gatech.edu
In-Reply-To: <199702280010.RAA17027@horseman.uwyo.edu>
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=US-ASCII
Resent-Message-ID: <"oRlYk3.0.j8.YWa5p"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2940
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On 27 Feb, John Harres wrote:
> I got no response to this, so I guess email to zsh-users isn't sent to
> zsh-workers...

I'm not sure if it is (I'm subscribed to both), but I've CC'd both to
make sure it gets to both.  Sorry if this produces duplicates.

> Date: Tue, 25 Feb 1997 16:57:29 -0700
> From: John Harres <Harres@uwyo.edu>
> Subject: compctl-related core dump
> To: zsh-users@math.gatech.edu
> 
> While working on another odd command's compctl, I got a core dump out of 
> 3.0.2.  First, the compctl:
> 
>    compctl -x 's[-]' -k '(logical physical server database contents object as 
> type dependencies from stripe incremental stripe replace copyover merge 
> no_replace no_index indexfile sql_insert charset audits no_audits no_data 
> data_only merge no_segments on_segment cache no_cache on_index_segment 
> on_text_segment interfaces user password sybasedump masterinfo bcp_batch_size 
> db_refs dryrun code verbose no_prompt no_status quiet debug)' - \
> 'c[-1,from][-1,stripe][-1.indexfile][-1,interfaces][-1,sybasedump][-1,masterinf
> o]' -f -- dtsload
> 
> I get a core dump when I do
> 
> dtsload <tab>
> 
> Note that this compctl has nothing defined for this case.  I'm not sure what
> it should do, but dumping core ain't it.

The problem isn't that there's nothing defined for that case.  The
problem is merely compctl syntax in the line:

> 'c[-1,from][-1,stripe][-1.indexfile][-1,interfaces][-1,sybasedump][-1,masterinf
                        ^^^^^^^^^^^^^^
Change that to "[-1,indexfile]" .

BTW, dumping core still isn't a good solution for bad compctl syntax. 
Perhaps compctl should do a syntax check when it is invoked, instead of
causing problems like this.

--Chris

-- 
Prudence, indeed, will dictate that governments long established
should not be changed for light and transient causes; and accordingly
all experience hath shown that mankind are more disposed to suffer,
while evils are sufferable, than to right themselves by abolishing the
forms to which they are accustomed.
    -- Thomas Jefferson, Prologue, "Declaration of Independence"

{ Chris "Xris" Laas }-----{ chrisl@cybercom.net }-----{ xris@qfl.com }
<*>--------------{ http://www.cybercom.net/~chrisl/ }--------------<*>



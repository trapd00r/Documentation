From zsh-workers-return-17889-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 31 18:55:06 2002
Return-Path: <zsh-workers-return-17889-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7374 invoked from network); 31 Oct 2002 18:55:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 31 Oct 2002 18:55:05 -0000
Received: (qmail 6100 invoked by alias); 31 Oct 2002 18:54:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17889
Received: (qmail 5930 invoked from network); 31 Oct 2002 18:54:42 -0000
Date: Thu, 31 Oct 2002 10:53:40 -0800
From: Wayne Davison <wayned@users.sourceforge.net>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: PATCH: my "SECONDS can be floating point" tweaks
Message-ID: <20021031185339.GE8814@scuzzy.blorf.net>
References: <20021030211750.GA6296@scuzzy.blorf.net> <24071.1036060485@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <24071.1036060485@csr.com>
User-Agent: Mutt/1.3.28i

On Thu, Oct 31, 2002 at 10:34:45AM +0000, Peter Stephenson wrote:
> Looks OK, although I still vaguely think a struct timeval is more
> appropriate for the raw values (which doesn't fit inside struct param).

That is certainly an option, and it would be easy to tweak my code to
implement this if it is desired (after adding a "struct timeval" to the
param.u union).

In my limited testing the sub-second value was restored exactly, but I
can imagine that certain fractional representations would cause the
sub-second value to get tweaked by a small amount the first time it was
saved and restored (and remain constant after that).  I haven't checked
yet to know for sure how big this tweak could get, but I'll look at it
more closely soon.  (My gut says that the values will be close enough
that the change will not be noticed.)

I've gone ahead and committed my previous patch.

..wayne..


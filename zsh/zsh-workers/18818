From zsh-workers-return-18818-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 06 21:22:14 2003
Return-Path: <zsh-workers-return-18818-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29690 invoked from network); 6 Jul 2003 21:22:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Jul 2003 21:22:13 -0000
Received: (qmail 6683 invoked by alias); 6 Jul 2003 21:22:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18818
Received: (qmail 4067 invoked from network); 6 Jul 2003 21:15:27 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 6 Jul 2003 21:15:27 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [4.64.233.9] by sunsite.dk (MessageWall 1.0.8) with SMTP; 6 Jul 2003 21:15:26 -0000
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.11.6/8.11.6) id h66LFPQ17054
	for zsh-workers@sunsite.dk; Sun, 6 Jul 2003 14:15:25 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1030706211524.ZM17053@candle.brasslantern.com>
Date: Sun, 6 Jul 2003 21:15:24 +0000
In-Reply-To: <11693.1057139730@csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Re: PATCH: failed autoload" (Jul  2, 10:55am)
References: <11693.1057139730@csr.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: PATCH: failed autoload
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 2, 10:55am, Peter Stephenson wrote:
} Subject: Re: PATCH: failed autoload
}
} So it seems to me likely that this got changed incorrectly to flag `no
} code present but no error' instead of `failed to load function, error'.
} 
} Please contradict if you think my logic is wrong.

The difference since the patch mainly seems to be that the autoloaded
function remains undefined (and hence zsh will [attempt to] autoload it
again and again), rather than becoming defined as a no-op function.

Suppose you're calling the failing function in a loop.  Now you'll get
the error repeatedly, as often as the loop manages to keep running,
rather than only once.

schaefer<509> repeat 7 breakthis
breakthis:3: parse error near `\n'
breakthis:3: parse error near `\n'
breakthis:3: parse error near `\n'
breakthis:3: parse error near `\n'
breakthis:3: parse error near `\n'
breakthis:3: parse error near `\n'
breakthis:3: parse error near `\n'

On the other hand, that's what happens even in older zsh with "function
definition file not found" so I'm not sure it's worth preserving the old
behavior.


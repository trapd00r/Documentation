From zsh-users-return-12554-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 12 16:45:29 2008
Return-Path: <zsh-users-return-12554-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21825 invoked from network); 12 Feb 2008 16:45:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Feb 2008 16:45:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 47774 invoked from network); 12 Feb 2008 16:45:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Feb 2008 16:45:06 -0000
Received: (qmail 5224 invoked by alias); 12 Feb 2008 16:44:53 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12554
Received: (qmail 5208 invoked from network); 12 Feb 2008 16:44:52 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Feb 2008 16:44:52 -0000
Received: from vms173003pub.verizon.net (vms173003pub.verizon.net [206.46.173.3])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 8814380482A1
	for <zsh-users@sunsite.dk>; Tue, 12 Feb 2008 17:44:49 +0100 (CET)
Received: from torch.brasslantern.com ([71.121.18.67])
 by vms173003.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0JW400I82WQJ83YH@vms173003.mailsrvcs.net> for
 zsh-users@sunsite.dk; Tue, 12 Feb 2008 10:35:08 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m1CGbtBH020123	for
 <zsh-users@sunsite.dk>; Tue, 12 Feb 2008 08:37:56 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m1CGbtt2020122	for zsh-users@sunsite.dk; Tue,
 12 Feb 2008 08:37:55 -0800
Date: Tue, 12 Feb 2008 08:37:55 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: timeout problem in ssh sessions
In-reply-to: <20080211233404.GA13398@spiegl.de>
To: ZSH User List <zsh-users@sunsite.dk>
Message-id: <080212083755.ZM20121@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20080211233404.GA13398@spiegl.de>
Comments: In reply to Andy Spiegl <zsh.Andy@spiegl.de>
 "timeout problem in ssh sessions" (Feb 12, 12:34am)
X-Virus-Scanned: ClamAV 0.91.2/5789/Tue Feb 12 15:56:33 2008 on bifrost
X-Virus-Status: Clean

On Feb 12, 12:34am, Andy Spiegl wrote:
}
} every second time or so when I exit zsh in a ssh-session the connection
} doesn't close for a very long time (several minutes).
} What's confusing me especially is that it doesn't happen every time.

If you have or can install "lsof" it would be very interesting to find
out to what file descriptor 3 is connected -- or more generally, what
are all the open descriptors in ssh, after the zsh process has exited.

It looks from the strace output as if it might be something related to
the ssh-agent, but it's hard to tell without having seen the trace at
the point where that descriptor was opened.


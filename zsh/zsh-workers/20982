From zsh-workers-return-20982-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 16 07:57:37 2005
Return-Path: <zsh-workers-return-20982-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7873 invoked from network); 16 Mar 2005 07:57:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Mar 2005 07:57:36 -0000
Received: (qmail 30875 invoked from network); 16 Mar 2005 07:57:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Mar 2005 07:57:30 -0000
Received: (qmail 22012 invoked by alias); 16 Mar 2005 07:57:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20982
Received: (qmail 21997 invoked from network); 16 Mar 2005 07:57:25 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 16 Mar 2005 07:57:25 -0000
Received: (qmail 30589 invoked from network); 16 Mar 2005 07:57:25 -0000
Received: from dolphin.c.u-tokyo.ac.jp (157.82.41.44)
  by a.mx.sunsite.dk with SMTP; 16 Mar 2005 07:57:20 -0000
Received: from saba.dol (saba.dol [192.168.1.2])
	by dolphin.c.u-tokyo.ac.jp (Postfix) with ESMTP
	id 0673927FA8; Wed, 16 Mar 2005 16:57:19 +0900 (JST)
Received: from localhost (saba [127.0.0.1])
	by saba.dol (Postfix) with ESMTP
	id CFDD41FD02; Wed, 16 Mar 2005 16:57:18 +0900 (JST)
Date: Wed, 16 Mar 2005 16:57:18 +0900 (JST)
Message-Id: <20050316.165718.71117897.nori1@dolphin.c.u-tokyo.ac.jp>
To: zsh-workers@sunsite.dk
Subject: Globbing for directory names with two '='-s fail after 4.2.2.
From: Kobayashi Noritada <nori1@dolphin.c.u-tokyo.ac.jp>
X-Mailer: Mew version 2.2 on Emacs 21.2 / Mule 5.0 (SAKAKI)
Mime-Version: 1.0
Content-Type: Text/Plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.3

Hi,

Globbing for directory names with two '='-s sometimes fails
(i.e. wildcards '*' and '?' don't work) with Zsh after 4.2.2.
It seems to be related to changes in Src/{glob.c,pattern.c} on 2004-10-18.
Since it is a little bit inconvenient for me, I'd like to create a patch
but cannot do so at present.

Is this a known issue?

Detailed reports are in the lower part of this mail.
If I need to offer more information or to do more tests, I'll do so.

Thanks,

--
== Example

  noritada[13:15]%  zsh --version                                   golbeza:~/tmp
  zsh 4.2.4 (i686-pc-linux-gnu)
  noritada[13:16]%  ls *                                            golbeza:~/tmp
  a=b.c_d=e.f:
  hoge
  
  a=b_c=d:
  hoge
  
  bar:
  hoge
  
  foo:
  hoge  hoge2
  
  foo+bar:
  hoge
  
  foo=bar:
  hoge
  
  foo_bar:
  hoge
  
  ra=1.0e7_et=3.5:
  hogebar
  noritada[13:20]%  ls foo/* bar/* foo+bar/* foo=bar/* foo_bar/* a=b.c_d=e.f/* a=b_c=d/*
  a=b.c_d=e.f/hoge  bar/hoge      foo/hoge   foo=bar/hoge
  a=b_c=d/hoge      foo+bar/hoge  foo/hoge2  foo_bar/hoge
  noritada[13:20]%  ls foo/* bar/* foo+bar/* foo=bar/* foo_bar/* a=b.c_d=e.f/* a=b_c=d/* ra=1.0e7_et=3.5/*
  zsh: no matches found: ra=1.0e7_et=3.5/*
  noritada[13:20]%  ls foo/* bar/* foo+bar/* foo=bar/* foo_bar/* a=b.c_d=e.f/* a=b_c=d/* ra=1.0e7_et=3.5/???????
  zsh: no matches found: ra=1.0e7_et=3.5/???????

== Occurrence condition

=== Directory name patterns

I tested with various directory names, but couldn't find a rule:

* Success in globbing
  * "ra=1_et=3"
  * "r=.r=."
  * "ra=1.0"
  * "r=1.r=1"
  * "r=1r=1."
  * "r=..=r"
  * ".=."
* Failure in globbing
  * "ra=1.0_et=3.5"
  * "ra=1.0et=3.5"
  * "r=1.r=1."
  * "r=1..r=1"
  * ".=r=."
  * ".==."
  * ".=.="

=== Version info

* Success in globbing
  * 4.2.1
  * CVS release branch "zsh-4_2-patches" on 2004-09-01
  * CVS release branch "zsh-4_2-patches" on 2004-10-01
  * CVS release branch "zsh-4_2-patches" on 2004-10-18
* Failure in globbing
  * 4.2.2
  * 4.2.3
  * 4.2.4
  * CVS release branch "zsh-4_2-patches" on 2004-10-19
  * CVS release branch "zsh-4_2-patches" on 2004-11-01

--
|:  Noritada KOBAYASHI
|:  Dept. of General Systems Studies,
|:  Graduate School of Arts and Sciences, Univ. of Tokyo
|:  E-mail: nori1@dolphin.c.u-tokyo.ac.jp (preferable)
|:          nori@esa.c.u-tokyo.ac.jp


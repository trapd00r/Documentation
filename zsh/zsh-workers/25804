From zsh-workers-return-25804-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 03 08:38:16 2008
Return-Path: <zsh-workers-return-25804-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29377 invoked from network); 3 Oct 2008 08:38:04 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Oct 2008 08:38:04 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18858 invoked from network); 3 Oct 2008 08:37:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Oct 2008 08:37:25 -0000
Received: (qmail 12371 invoked by alias); 3 Oct 2008 08:37:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25804
Received: (qmail 12344 invoked from network); 3 Oct 2008 08:37:01 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 3 Oct 2008 08:37:01 -0000
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 4C0F38030847
	for <zsh-workers@sunsite.dk>; Fri,  3 Oct 2008 10:36:54 +0200 (CEST)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id F1BD72A7A604; Fri,  3 Oct 2008 10:36:52 +0200 (CEST)
Date: Fri, 3 Oct 2008 10:36:52 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk
Subject: Re: Pasting of long lines to ZLE is buggy under Mac OS X
Message-ID: <20081003083652.GA24840@prunille.vinc17.org>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20081002065525.GR24822@prunille.vinc17.org> <20081002081758.GA5772@sc.homeunix.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
In-Reply-To: <20081002081758.GA5772@sc.homeunix.net>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.18-vl-r23999 (2008-10-01)
X-Virus-Scanned: ClamAV 0.92.1/8372/Thu Oct  2 17:21:47 2008 on bifrost
X-Virus-Status: Clean

On 2008-10-02 09:17:58 +0100, Stephane Chazelas wrote:
> You may want to try "strace" or "truss" or the equivalent on
> your system.

Here's what I get for an xterm, after a ssh to my Mac OS X machine.
I pasted the result of a "echo {1..500}", then typed "blah".

prunille:~> ktrace zsh -f
prunille% 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25=
 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50=
 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75=
 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 10=
0 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 1=
19 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 =
138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156=
 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 17=
5 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 1=
94 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 =
213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231=
 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 25=
0 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 2=
69 270 271 272 273 274 275 276 277 278 279 280 281 282 283 blah

[...]
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       " "
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "2"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "2"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "8"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "8"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "2"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "2"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       " "
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       " "
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "2"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "2"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "8"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "8"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "3"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "3"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       " "
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       " "
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "b"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "b"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "l"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "l"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "a"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "a"
 25036 zsh      RET   write 1
 25036 zsh      CALL  read(0xa,0xbfffda28,0x1)
 25036 zsh      GIO   fd 10 read 1 byte
       "h"
 25036 zsh      RET   read 1
 25036 zsh      CALL  write(0xa,0x8353c,0x1)
 25036 zsh      GIO   fd 10 wrote 1 byte
       "h"
 25036 zsh      RET   write 1
[...]

--=20
Vincent Lef=E8vre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


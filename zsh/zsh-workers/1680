From mason@werple.net.au Thu Jul 18 00:28:23 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id AAA24647 for <mason@werple.mira.net.au>; Thu, 18 Jul 1996 00:28:21 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id KAA16419; Wed, 17 Jul 1996 10:22:12 -0400 (EDT)
Resent-Date: Wed, 17 Jul 1996 10:22:12 -0400 (EDT)
From: Geoff Wing <mason@werple.net.au>
Message-Id: <199607171421.OAA24456@werple.net.au>
Subject: Re: That infinite loop in Geoff's second zle_refresh patch
To: zsh-workers@math.gatech.edu (zsh-list)
Date: Thu, 18 Jul 1996 00:21:16 +1000 (EST)
In-Reply-To: <199607171003.MAA25843@hydra.ifh.de> from "Peter Stephenson" at Jul 17, 96 12:03:26 pm
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"Iz5iX.0.S04.JSFxn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1680
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1279
Status: O

pws@ifh.de wrote:
:schaefer@candle.brasslantern.com wrote:
:> The patch below changes starting count from 0 to 1, which stops the
:> infinite loop, but feels wrong to me.  I can't see any reason to call
:> tcdelcost(0), but that code was there before either of Geoff's recent
:> patches; the only nearby difference since pre2 is a change from

Looks fine to me.  I give it my blessing :-)  
The "tcdelcost(i) < pfxlen(p1, nl)" stuff is only a rough estimate anyway.
You'd need to add costs of moving right and other stuff which is more
complex than justifies the reward (eg. you might save one or two chars 
output - and there are other areas that could use one or two character
cleanup first).

:This has a bad effect:  inserting or deleting on a continued line
:before the end of the line redisplays the rest of line wrongly.  I
:haven't looked into the details.  (Maybe I got confused; my
:zle_refresh.c is different from the one in the patch, so I'm either
:more or less up to date.)

Um, what stuffs up?  Is this on an xterm?  An example?
I fixed up some of the continued line stuff so cut/paste works better on
xterms and similar 'cos I seem to remember you were one of those asking
for it(?)
-- 
Mason [G.C.W]  mason@werple.mira.net.au    "Hurt...Agony...Pain...LOVE-IT"



From zsh-users-return-7352-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 15 03:54:40 2004
Return-Path: <zsh-users-return-7352-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11242 invoked from network); 15 Apr 2004 03:54:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Apr 2004 03:54:39 -0000
Received: (qmail 27104 invoked by alias); 15 Apr 2004 03:54:24 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7352
Received: (qmail 27077 invoked from network); 15 Apr 2004 03:54:23 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 15 Apr 2004 03:54:23 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 15 Apr 2004 3:54:23 -0000
Received: (qmail 25171 invoked from network); 15 Apr 2004 03:54:23 -0000
Received: from mta1.srv.hcvlny.cv.net (167.206.5.67)
  by a.mx.sunsite.dk with SMTP; 15 Apr 2004 03:54:21 -0000
Received: from acm.org (ool-182cd17f.dyn.optonline.net [24.44.209.127])
 by mta1.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0HW700B8Y1IVSR@mta1.srv.hcvlny.cv.net> for
 zsh-users@sunsite.dk; Wed, 14 Apr 2004 23:54:31 -0400 (EDT)
Date: Wed, 14 Apr 2004 23:52:20 -0400
From: paxunix <paxunix@acm.org>
Subject: Re: How to get faster completion if I make zsh assume what I've typed
 so far is correct?
In-reply-to: <4073DAE5.6040904@acm.org>
Cc: zsh-users@sunsite.dk
Message-id: <407E06F4.6010301@acm.org>
MIME-version: 1.0
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 0.5+ (Windows/20040319)
References: <12734.1080061609@csr.com> <4061027C.907@acm.org>
 <4073DAE5.6040904@acm.org>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.6 required=6.0 tests=RCVD_IN_NJABL,RCVD_IN_SORBS 
	autolearn=no version=2.63
X-Spam-Hits: 1.6

paxunix wrote:

[ using  zstyle ':completion:*:paths' accept-exact '*' to avoid partial 
completion globs on directory elements ]

> There are a couple of very annoying issues with this solution:  
> ambiguous matches are not cycled through correctly and it is 
> impossible to complete some pathnames.  For example, if you have two 
> directories:
>
> dir1
> dir1~
>
> Typing dir<TAB> will complete up to 'dir1' and (in my case) show dir1 
> and dir1~ as possible completions.  Successively hitting TAB will 
> never cycle through to dir1~ - a trailing '/' is inserted after dir1 
> and zsh lists the contents of dir1 as possible completions.  It 
> appears that any common prefix to an initial path completion attempt 
> causes completion to continue inside the first directory match.  If 
> it's between a directory and a filename with a common prefix, things 
> work as they are supposed to.

On a hunch, I changed the '*' to '*(N)', so my resulting zstyle line became:

zstyle ':completion:*:paths' accept-exact '*(N)'

and so far this seems to do precisely what I want, without the above 
annoyances.  I especially noticed the difference when completing 
dotfiles in my home directory.  Without '*(N)', try:

ls ~/.<TAB>

and notice that none of the dotfiles are given as possible completions.  
Instead you get a trailing slash appended and then non-dotfile 
completions from the home directory.  With '*(N)', this works as expected.

-- 
Shawn Halpenny


From zsh-users-return-9782-mason-zsh=primenet.com.au@sunsite.dk Mon Dec 12 13:05:38 2005
Return-Path: <zsh-users-return-9782-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25000 invoked from network); 12 Dec 2005 13:05:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.7 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO,
	RCVD_IN_NJABL_PROXY autolearn=no version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Dec 2005 13:05:37 -0000
Received: (qmail 30364 invoked from network); 12 Dec 2005 13:05:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Dec 2005 13:05:28 -0000
Received: (qmail 17890 invoked by alias); 12 Dec 2005 13:05:19 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9782
Received: (qmail 17805 invoked from network); 12 Dec 2005 13:05:18 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Dec 2005 13:05:18 -0000
Received: (qmail 28130 invoked from network); 12 Dec 2005 13:05:18 -0000
Received: from 80.178.163.14.adsl.012.net.il (HELO ods15.dyndns.org) (80.178.163.14)
  by a.mx.sunsite.dk with SMTP; 12 Dec 2005 13:05:17 -0000
Received: from ods15 by ods15.dyndns.org with local (Exim 4.54)
	id 1ElnNU-00073l-IQ
	for zsh-users@sunsite.dk; Mon, 12 Dec 2005 15:06:04 +0200
Date: Mon, 12 Dec 2005 15:06:04 +0200
To: zsh-users@sunsite.dk
Subject: Re: crash with tab completion for 'make'
Message-ID: <20051212130604.GJ6192@crate15>
References: <20051211204732.GH6192@crate15>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20051211204732.GH6192@crate15>
User-Agent: Mutt/1.5.11
From: Oded Shimon <ods15@ods15.dyndns.org>

On Sun, Dec 11, 2005 at 10:47:32PM +0200, Oded Shimon wrote:
> 22:45 ods15@crate15 ~ $ zsh --version
> zsh 4.2.6 (i686-pc-linux-gnu)
> 
> 22:43 ods15@crate15 ~ $ zsh -ic 'compinit; _make'
> zsh: 16202 segmentation fault  zsh -ic 'compinit; _make'

I narrowed down the crash to something more specific.

15:04 ods15@crate15 ~ $ zsh -c 'a(){zparseopts -D -A opts c: r:}; a -r bla'
zsh: 27128 segmentation fault  zsh

this change fixes it:

15:05 ods15@crate15 ~ $ zsh -c 'a(){zparseopts -D -A opts c: r: g:}; a -r bla'
15:05 ods15@crate15 ~ $

Basically, whatever is the last element in the 'zparseopts' call, causes a 
crash.

- ods15


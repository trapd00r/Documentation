From zsh-users-return-12540-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 11 13:08:35 2008
Return-Path: <zsh-users-return-12540-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20817 invoked from network); 11 Feb 2008 13:08:31 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Feb 2008 13:08:31 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 52444 invoked from network); 11 Feb 2008 13:08:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Feb 2008 13:08:00 -0000
Received: (qmail 28722 invoked by alias); 11 Feb 2008 13:07:49 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12540
Received: (qmail 28702 invoked from network); 11 Feb 2008 13:07:48 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Feb 2008 13:07:48 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 6030E80482A1
	for <zsh-users@sunsite.dk>; Mon, 11 Feb 2008 14:07:36 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly15d.srv.mailcontrol.com (MailControl) with ESMTP id m1BD7MHP007560
	for <zsh-users@sunsite.dk>; Mon, 11 Feb 2008 13:07:26 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 11 Feb 2008 13:07:07 +0000
Date: Mon, 11 Feb 2008 13:07:07 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-users@sunsite.dk
Subject: Re: Phil's prompt is not working when LANG is set to UTF-8
Message-ID: <20080211130707.7d45f6af@news01>
In-Reply-To: <20080211092021.GC6965@phoenix.nasreddine.info>
References: <20080211033116.GD19613@phoenix.nasreddine.info>
	<237967ef0802102301i71dcd71erb1a2993a7f0bd643@mail.gmail.com>
	<20080211092021.GC6965@phoenix.nasreddine.info>
Organization: CSR
X-Mailer: Claws Mail 3.2.0 (GTK+ 2.12.5; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Feb 2008 13:07:07.0081 (UTC) FILETIME=[00EF2B90:01C86CAF]
X-Scanned-By: MailControl A-08-00-01 (www.mailcontrol.com) on 10.68.0.125
X-Virus-Scanned: ClamAV 0.91.2/5770/Mon Feb 11 12:42:17 2008 on bifrost
X-Virus-Status: Clean

On Mon, 11 Feb 2008 10:20:21 +0100
Wael Nasreddine <mla@nasreddine.com> wrote:
> Oh I'm sorry I forgot to mention that this only happens on consoles not in X
> emulators ( /dev/tty1 etc... ) I have also the combination of
> rxvt-unicode/zsh/UTF-8 and it works fine but on the console it's too messy so
> I'm deprived of consoles ATM.
> 
> Anyway my zsh version is 4.3.5

I suspect the right thing to do here might be either to "unsetopt
multibyte" or "export LC_ALL=C".  It sounds like the combination of
the console and the C library aren't doing the stuff the shell needs
to support multibyte characters.  If that's not the problem, please send
more detail about your settings and environment and what works and what
doesn't work.

(That last sentence applies to everybody.  Zsh runs in some very different
environments.  We could *always* do with knowing what that is, even
if it turns out not to be relevant.  If it applies in lots of
different environments, please say so---as many people already do.)

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


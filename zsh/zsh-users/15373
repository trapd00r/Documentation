From zsh-users-return-15373-mason-zsh=primenet.com.au@zsh.org Wed Sep 08 13:02:02 2010
Return-Path: <zsh-users-return-15373-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11222 invoked by alias); 8 Sep 2010 13:02:02 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15373
Received: (qmail 13832 invoked from network); 8 Sep 2010 13:02:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.213.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:cc:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=fCisgfq0g4ouLDDuryFaYOqNhj+wpV8C6+0Eyc2eUsQ=;
        b=vpRlpAC3sS4R5yd6BoNBVDna9ezoXRAbCXuFLBGxdc1G0AewOGinYKAXr3cGuto3tU
         jIIAAg/iUkb0ZQGVTb2mkxmHnDit7SrAAr21Gk1WafdrVOJUfYWzFt3tkIbXylOOnf1L
         UKX27njM6Y3JlcJEMAW3QB9w5A8P4yc6D1AbE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:cc:subject
         :references:in-reply-to:content-type:content-transfer-encoding;
        b=bMpbzKpJxVBD7MJn6bdExkQ8vIJNmQmO2Hpwnc7HY2dQvqizZXh1V1YUY8kb0kvOX+
         vfdtl3FMDDwTx1jV/HTaHKYWlJS4BkqSncyTR1d4HwwdMxf/Z3iOrP1Lw1A+4Fam30eG
         KyTmNqsJfbWEanx/3nqDpSzWNMIJKl4Q0PI2U=
Message-ID: <4C87893F.40305@gmail.com>
Date: Wed, 08 Sep 2010 06:01:51 -0700
From: reckoner <reckoner@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.2.8) Gecko/20100802 Thunderbird/3.1.2
MIME-Version: 1.0
To: "Benjamin R. Haskell" <zsh@benizi.com>
CC: "Peter A. Castro" <doctor@fruitbat.org>, zsh-users@zsh.org
Subject: Re: cygwin chere not working with zsh version 4.3.10 but worked for
 4.3.9
References: <AANLkTi=YK1nSCnVToHe-E9RUccu+WCMvp46-B6CdK7sE@mail.gmail.com> <alpine.LNX.2.00.1009021230450.3460@gremlin.fruitbat.org> <alpine.LNX.2.01.1009021701530.4535@hp> <4C863E1C.4060907@gmail.com> <alpine.LNX.2.00.1009071044110.3510@gremlin.fruitbat.org> <alpine.LNX.2.01.1009071441090.4535@hp>
In-Reply-To: <alpine.LNX.2.01.1009071441090.4535@hp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

gentlemen:

Following your instructions, I discovered that there was some old junk 
in my .zshrc file that was causing this problem. I've been using zsh for 
about 15 years now (and probably only utilizing about 1% of its 
functionality) and have lots of cruft in my zshrc.

Thanks again!


On 9/7/2010 11:59 AM, Benjamin R. Haskell wrote:
> On Tue, 7 Sep 2010, Peter A. Castro wrote:
>
>> On Tue, 7 Sep 2010, reckoner wrote:
>>
>>> Dear Ben:
>>>
>>> It turns out that commenting out CHERE_INVOKING fixed problem.
>
> (To give credit where it's due: Peter originally pointed out CHERE_INVOKING.)
>
>
>>> Evidently, there was no CHERE_INVOKING environment variable.
>>>
>>> Mysterious.
>>
>> This implies a change to chere, rather than zsh, but I don't think
>> that's the case, since you mentioned it worked previously with zsh
>> 4.3.9.  The code in /etc/zprofile concerning CHERE_INVOKING has not
>> changed between versions.  And yet, Ben mentioned 4.3.10 working with
>> chere for him as is.  This will require some debugging, I suppose.
>
> As another data point, I added:
> echo CHERE_INVOKING=X${CHERE_INVOKING}X
>
> to my /etc/zprofile, and it echoes:
> CHERE_INVOKING=XtrueX
>
> So the versions I'm using seem to pass it properly.
>
>
>> Is there anything special about your cygwin installation?  Are using a
>> mix of older Cygwin packages with newer Cygwin packages?  Like, maybe
>> chere is 1.5 based?  Zsh 4.3.9 that's in the repository was built
>> under Cygwin 1.5, so there might be some relationship if chere is also
>> 1.5 based.
>
> Beyond that, the next thing I'd suspect is something in your own startup
> files.  (Don't recall whether you mentioned them.)  Before this thread,
> I didn't know 'chere' existed, and had my own function to drop me into
> my home directory on my old Win XP Cygwin installation (It used to start
> me in /usr/bin, presumably the working directory for whatever Zsh
> shortcut I had setup.  Worked out-of-the-box on Win7, so I never
> installed my hack.)  What Windows version are you running?  Maybe it's a
> factor.
>
> A stretch, and mostly out of curiosity, do you have anything in
> /usr/share/zsh/site-functions ?
>


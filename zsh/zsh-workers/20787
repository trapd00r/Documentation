From zsh-workers-return-20787-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 04 21:13:55 2005
Return-Path: <zsh-workers-return-20787-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20365 invoked from network); 4 Feb 2005 21:13:54 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Feb 2005 21:13:54 -0000
Received: (qmail 43495 invoked from network); 4 Feb 2005 21:12:45 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Feb 2005 21:12:45 -0000
Received: (qmail 6527 invoked by alias); 4 Feb 2005 16:47:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20787
Received: (qmail 6510 invoked from network); 4 Feb 2005 16:47:02 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Feb 2005 16:47:02 -0000
Received: (qmail 43844 invoked from network); 4 Feb 2005 16:46:25 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 4 Feb 2005 16:46:20 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6eeaab43f40a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Fri, 4 Feb 2005 16:44:55 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 4 Feb 2005 16:46:28 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j14GkKhj006388
	for <zsh-workers@sunsite.dk>; Fri, 4 Feb 2005 16:46:20 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j14GkJgx006385
	for <zsh-workers@sunsite.dk>; Fri, 4 Feb 2005 16:46:19 GMT
Message-Id: <200502041646.j14GkJgx006385@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: PATCH: PDF documentation
Date: Fri, 04 Feb 2005 16:46:19 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 04 Feb 2005 16:46:28.0140 (UTC) FILETIME=[1250E6C0:01C50AD9]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.5

This adds zsh.pdf to the documentation output using pdfetex which made a
very good job of the bookmarks and indexes, apart from hiding the
bookmarks for the indexes inside one another.

I'd be tempted to remove the .ps files from the documentation bundle
since acroread is so widespread and, indeed, on Windows PDF files are
easier to print that PostScript, unless anyone knows of a series
objection.

Index: configure.ac
===================================================================
RCS file: /cvsroot/zsh/zsh/configure.ac,v
retrieving revision 1.26
diff -u -r1.26 configure.ac
--- configure.ac	4 Feb 2005 10:32:22 -0000	1.26
+++ configure.ac	4 Feb 2005 16:43:35 -0000
@@ -490,6 +490,7 @@
 AC_PROG_AWK                 dnl Check for mawk,gawk,nawk, then awk.
 AC_PROG_LN                  dnl Check for working ln, for "make install"
 AC_CHECK_PROGS([YODL], [yodl], [: yodl])
+AC_CHECK_PROGS([PDFETEX], [pdfetex], [: pdfetex])
 AC_CHECK_PROGS([ANSI2KNR], [ansi2knr], [: ansi2knr])
 
 if test x"$ansi2knr" = xyes && test x"$ANSI2KNR" = x": ansi2knr"; then
Index: Config/defs.mk.in
===================================================================
RCS file: /cvsroot/zsh/zsh/Config/defs.mk.in,v
retrieving revision 1.8
diff -u -r1.8 defs.mk.in
--- Config/defs.mk.in	20 Dec 2001 23:48:39 -0000	1.8
+++ Config/defs.mk.in	4 Feb 2005 16:43:35 -0000
@@ -69,6 +69,7 @@
 YODL            = @YODL@
 YODL2TXT        = $(YODL)2txt
 YODL2HTML       = $(YODL)2html
+PDFETEX		= @PDFETEX@
 
 # install utility
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
Index: Doc/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/.distfiles,v
retrieving revision 1.4
diff -u -r1.4 .distfiles
--- Doc/.distfiles	3 Jun 2004 15:15:53 -0000	1.4
+++ Doc/.distfiles	4 Feb 2005 16:43:35 -0000
@@ -15,4 +15,5 @@
     zsh.info zsh.info-[0-9]*
     zsh.html zsh_*toc.html zsh_[0-9]*.html
     zsh.dvi zsh_us.ps zsh_a4.ps
+    zsh.pdf
 '
Index: Doc/Makefile.in
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Makefile.in,v
retrieving revision 1.21
diff -u -r1.21 Makefile.in
--- Doc/Makefile.in	15 Apr 2004 17:13:21 -0000	1.21
+++ Doc/Makefile.in	4 Feb 2005 16:43:35 -0000
@@ -81,7 +81,7 @@
 all: man texi ../META-FAQ
 .PHONY: all
 
-everything: all dvi ps html
+everything: all dvi ps html pdf
 .PHONY: everything
 
 dvi: zsh.dvi
@@ -90,6 +90,12 @@
 zsh.dvi: $(sdir)/zsh.texi
 	$(TEXI2DVI) $(sdir)/zsh.texi
 
+pdf: zsh.pdf
+.PHONY: pdf
+
+zsh.pdf: $(sdir)/zsh.texi
+	$(PDFETEX) $(sdir)/zsh.texi
+
 texi: $(sdir)/zsh.texi
 .PHONY: texi
 
-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070




**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


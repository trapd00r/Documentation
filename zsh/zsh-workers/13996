From zsh-workers-return-13996-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 17 04:50:42 2001
Return-Path: <zsh-workers-return-13996-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26510 invoked from network); 17 Apr 2001 04:50:41 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Apr 2001 04:50:41 -0000
Received: (qmail 10326 invoked by alias); 17 Apr 2001 04:50:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13996
Received: (qmail 10314 invoked from network); 17 Apr 2001 04:50:36 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010417044550.ZM14033@candle.brasslantern.com>
Date: Tue, 17 Apr 2001 04:45:50 +0000
In-Reply-To: <15067.48757.697880.303760@starf.org>
Comments: In reply to "F. G. Marx" <fmarx@bellatlantic.net>
        "Example from manual seems broken" (Apr 16, 11:54pm)
References: <15067.48757.697880.303760@starf.org>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "F. G. Marx" <fmarx@bellatlantic.net>, zsh-workers@sunsite.dk
Subject: Re: Example from manual seems broken
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 16, 11:54pm, F. G. Marx wrote:
}
} 
} 1. The following example from zshexpn.1 FILENAME_EXPANSION is broken in
}    zsh-4.0.1-pre-3:
} 
}     zsh -f
}     $> setopt extendedglob
}     $> foo="a string with a message"
}     $> if [[ $foo = (a|an)' '(#b)(*)' '* ]]; then
}     then> print ${foo[$mbegin[1],$mend[1]]}
}     then> fi
}     $> zsh: bad math expression: operand expected at `$mend[1]'

I don't know exactly why this was broken, but my patch in 13992 fixes it.
So maybe I should commit that patch after all.

} 2. I've got _normal complaining about _use_lo not being found after
}    upgrading from dev-2 to dev-3.

Remove your ~/.zcompdump file and let compinit rebuild it.  _use_lo has
been renamed to _gnu_generic.

} 3. I'm sorry, I wasn't paying attention: why are the completion functions
}    in new sub-subdirectories in source, but amalgamated in --fndir ?

The sub-subdirs are for organizational convenience of the developers, for
the most part.  If one is writing a new completion function it helps to
be able to find other functions that serve a similar purpose.  The subdirs
(one level up) are for selective installation, so that e.g. you can leave
out the X11 functions on a system with no X display, or leave out the BSD
functions on Linux, etc.

However, it was deemed unlikely that anyone would e.g. want to install the
Unix/Command collection without also installing the Unix/Type collection
on which it depends, etc.; and the $fpath gets rather unwieldy with all
those subdirectories.  So installation removes one level if you give the
--enable-function-subdirs configuration option, and removes both levels
otherwise.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


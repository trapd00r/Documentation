From zsh-workers-return-15476-mason-zsh=primenet.com.au@sunsite.dk Wed Jul 25 05:32:04 2001
Return-Path: <zsh-workers-return-15476-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15904 invoked from network); 25 Jul 2001 05:32:03 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Jul 2001 05:32:03 -0000
Received: (qmail 11302 invoked by alias); 25 Jul 2001 05:31:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15476
Received: (qmail 11290 invoked from network); 25 Jul 2001 05:31:50 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: Wes Morgan <wesm@slacknet.org>, zsh-workers@sunsite.dk
Subject: RE: Compiling zsh-4.0.2 on Mac OS X
Date: Wed, 25 Jul 2001 09:31:38 +0400
Message-ID: <000001c114cb$140800f0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006
In-Reply-To: <3B5E0BBE.8020100@slacknet.org>

>
> I'm trying to compile zsh-4.0.2 on Mac OS X (10.0.4). I guess the linker
> is pretty weird (it's from Apple, not GNU). Here's where make fails:
>
> cc  -s  -o zsh main.o  `cat stamp-modobjs`   -lm  -lc
> /usr/bin/ld: can't use -s with input files containg indirect symbols
> (output file must contain at least global symbols, for maximum stripping
> use -x)
> make[1]: *** [zsh] Error 1
> make: *** [all] Error 1
>
> Has anyone gotten zsh-4 to link on Darwin/Mac OS X? If not, any ideas
> what I could try to get this to work?
>

The first try is to configure with --enable-zsh-debug. This is the simplest
method to turn off -s (strip) flag.

Of course, if you can figure out what these "indirect symbols" are (some
linkers provide verbose flags) it would be really helpful.

-andrej


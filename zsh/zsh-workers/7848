From zsh-workers-return-7848-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 15 14:26:46 1999
Return-Path: <zsh-workers-return-7848-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10918 invoked from network); 15 Sep 1999 14:26:44 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Sep 1999 14:26:44 -0000
Received: (qmail 4455 invoked by alias); 15 Sep 1999 14:26:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7848
Received: (qmail 4448 invoked from network); 15 Sep 1999 14:26:32 -0000
Message-Id: <9909151351.AA31582@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: 3.1.6-pws-4: backreferences 
In-Reply-To: "Sven Wischnowsky"'s message of "Wed, 15 Sep 1999 16:16:18 DFT."
             <199909151416.QAA32682@beta.informatik.hu-berlin.de> 
Date: Wed, 15 Sep 1999 15:51:27 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> I've run out of sync, then, because I get it too. And no wonder, in
> subst.c:1291 replstr is still unconditionally singsub()ed

Looks like I forgot to send the subst.c chunks for the patch.

--- Src/subst.c.old	Wed Sep 15 15:50:07 1999
+++ Src/subst.c	Tue Sep 14 13:19:57 1999
@@ -242,7 +242,7 @@
 }
 
 /* Perform substitution on a single word. Unlike with singsub, the      *
- * result can have more than one word. A single word result is sorted   *
+ * result can have more than one word. A single word result is stored   *
  * in *s and *isarr is set to zero; otherwise *isarr is set to 1 and    *
  * the result is stored in *a. If `a' is zero a multiple word result is *
  * joined using sep or the IFS parameter if sep is zero and the result  *
@@ -1288,8 +1288,6 @@
 		if (*ptr == '\\' && ptr[1] == '/')
 		    chuck(ptr);
 	    replstr = (*ptr && ptr[1]) ? ptr+1 : "";
-	    singsub(&replstr);
-	    untokenize(replstr);
 	    *ptr = '\0';
 	}
 

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


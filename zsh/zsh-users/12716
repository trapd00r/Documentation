From zsh-users-return-12716-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 22 02:12:53 2008
Return-Path: <zsh-users-return-12716-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4357 invoked from network); 22 Mar 2008 02:12:50 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Mar 2008 02:12:50 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 6003 invoked from network); 22 Mar 2008 02:12:36 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Mar 2008 02:12:36 -0000
Received: (qmail 17258 invoked by alias); 22 Mar 2008 02:12:25 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12716
Received: (qmail 17237 invoked from network); 22 Mar 2008 02:12:24 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 22 Mar 2008 02:12:24 -0000
Received: from vms044pub.verizon.net (vms044pub.verizon.net [206.46.252.44])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 82F1B82CCF43
	for <zsh-users@sunsite.dk>; Sat, 22 Mar 2008 03:12:19 +0100 (CET)
Received: from torch.brasslantern.com ([71.121.1.164])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JY4004WK0S3VK81@vms044.mailsrvcs.net> for
 zsh-users@sunsite.dk; Fri, 21 Mar 2008 21:12:04 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m2M2C1sN020588; Fri,
 21 Mar 2008 19:12:02 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m2M2C18A020587; Fri, 21 Mar 2008 19:12:01 -0700
Date: Fri, 21 Mar 2008 19:12:01 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Just a few questions.
In-reply-to: <20080320055822.GA6068@phoenix.nasreddine.info>
To: Wael Nasreddine <mla@nasreddine.com>, zsh-users@sunsite.dk
Message-id: <080321191201.ZM20586@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20080320055822.GA6068@phoenix.nasreddine.info>
Comments: In reply to Wael Nasreddine <mla@nasreddine.com>
 "Just a few questions." (Mar 20,  6:58am)
X-Virus-Scanned: ClamAV 0.91.2/6322/Sat Mar 22 01:38:15 2008 on bifrost
X-Virus-Status: Clean

On Mar 20,  6:58am, Wael Nasreddine wrote:
}
} I use zsh for shell, rxvt-unicode for Terminal emulator, urxvt runs
} with TERM rxvt-unicode, GNU Screen runs with the term screen-256color,
} now I'm not sure what's the issue, but when I login through GDM/KDM
} the colors inside screen are all messed up

Colors?  Or do you mean the character sets displayed?  The colors look
OK to me, but I see that you're not getting horizontal lines in the
prompt etc. in the second case.

Screen is apparently not switching the terminal into the alternate
character set mode when doing the line-drawing, but the termcap has
line-drawing characters defined.  I don't know why this would happen
from GDM/KDM and not from startx except that it must be some LC_* or
LANG -related environment variable that is set differently (or not
set at all) in one case or the other.  Try saving the output of
"typeset -x" to a file in each case and then compare the two files.

} The second question is about a problem that has been bugging me for
} a while now, and it doesn't just happen inside X, but whenever I am
} inside ViM, when I type a letter, erase it and type another letter,
} I'll get a weird char, not what I've typed

Looks like you're unintentionally constructing unicode combining
characters which vim isn't displaying properly ("real" width vs.
display width conflict).  How you're getting started into combining
characters in the first place I can't guess unless your delete or
backspace key is sending something odd.

Have you tried running zkbd?  It'll tell you when your backspace or
delete are not sending ctrl-h and ctrl-?.

Of course it's possible that vim is switching the terminal mode to
keypad transmit or another flavor, so what you type at zkbd would not
be representative of what vim sees, but it's worth a try.

Have you tried gvim to see if the problem exists there as well?  If
it does, see above about environment settings ...
 
} The third problem is zsh related ( really sorry guys for the above 2
} questions being off topic ), anyway the problem is when I try to use
} zsh outside rxvt-unicode the keys Home, PgUP, PgDn and End does not
} work, in gnome-terminal instead of going to the beginning of the line,
} I get this instead:
} "H[2;A[0;G"

Run zkbd and follow the instructions.  If you have trouble getting zkbd
to work, see http://www.zsh.org/mla/workers/2008/msg00370.html 


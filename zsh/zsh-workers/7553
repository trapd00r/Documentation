From zsh-workers-return-7553-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Aug 30 15:42:31 1999
Return-Path: <zsh-workers-return-7553-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3517 invoked from network); 30 Aug 1999 15:42:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Aug 1999 15:42:29 -0000
Received: (qmail 16058 invoked by alias); 30 Aug 1999 15:42:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7553
Received: (qmail 16051 invoked from network); 30 Aug 1999 15:42:23 -0000
Message-Id: <9908301508.AA19409@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: Make question/request. 
In-Reply-To: "Jason Price"'s message of "26 Aug 1999 14:27:24 DFT."
             <kgo906ypfci.fsf@oobleck.gatech.edu> 
Date: Mon, 30 Aug 1999 17:08:25 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Jason Price wrote:
> I'm putting zsh-3.1.6 on a bunch of machines.  I've noticed a couple of
> things about the make install of it that might be useful to change.
> 
> First is to manually override the umask for directories, the same way you
> do for files.  files, despite a umask of 0077, come out 644.  But new
> directories come out 700.  

Putting this in mkinstalldirs should be the right thing to do, since all
installed directories are supposed to be world readable (and if they
weren't, that would need special handling anyway).

> Second is to manually set the mode of:
> 
> $BINDIR/share/zsh/functions/compinit
> 
> to 755, so that errors won't happen after people run compinstall.  
> 
> Of course, my understanding of such things might be flawed, but that's what 
> I've had to do to get it working.

compinit is a function, it should be readable but not executable; executing
it as a command won't work.  If properly installed, the directory should be
in $fpath, and if not, compinstall should put it there; it should also make
compinit autoloaded.  What is actually going wrong?

P.S. please cc me with any replies as I'm not on the list :-).  More
seriously, the incoming mail here is screwed up, so mail to pws@ifh.de
might get answered more quickly (i.e. at all).

--- mkinstalldirs~	Wed Mar 25 00:08:40 1998
+++ mkinstalldirs	Mon Aug 30 17:05:29 1999
@@ -21,6 +21,7 @@
      if test ! -d "$pathcomp"; then
         echo "mkdir $pathcomp" 1>&2
         mkdir "$pathcomp" || errstatus=$?
+        chmod 0755 "$pathcomp"
      fi
 
      pathcomp="$pathcomp/"

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


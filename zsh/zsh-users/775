From zsh-workers-request@euclid.skiles.gatech.edu Wed Apr 02 01:00:29 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 27072 invoked from network); 2 Apr 1997 01:00:28 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 2 Apr 1997 01:00:28 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id TAA11317; Tue, 1 Apr 1997 19:53:56 -0500 (EST)
Resent-Date: Tue, 1 Apr 1997 19:52:51 -0500 (EST)
Message-Id: <199704011456.TAA25867@lator.cybercom.net>
Date: Tue, 1 Apr 1997 19:56:25 -0500 (EST)
From: Chris Laas <chrisl@cybercom.net>
Sender: Chris Laas <chris@cybercom.net>
Reply-To: chrisl@cybercom.net
Subject: sh/bash incompatibility - noticeable with Netscape
To: zsh-users@math.gatech.edu
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=US-ASCII
Resent-Message-ID: <"iXVjv3.0.Em2.ZtQGp"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/775
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Since I started using zsh, I've been getting errors with running helper
apps under Netscape, and I finally investigated the cause.  I have
/bin/sh symbolically linked to zsh (instead of the default bash on
Slackware Linux) and it consistently fails with a parse error whenever
a helper app is run from Netscape.  By linking /bin/sh to /bin/echo, I
discovered that Netscape runs a line of the form:

/bin/sh -c "((helper-app); rm /var/tmp/MO0123456789.foo)&"

where helper-app is the text in the Helpers tab of the General Options
dialog, and the temp file is the downloaded file.

This line runs fine with bash, but zsh parses the leading (( as an
arithmetic expression opening, and fails.  There is no way I can figure
out to convince Netscape to put a space between the two leading
open-parens.

So, what it boils down to is, could we have a fix to the parsing code
to recognize this condition (possibly only when zsh is in
sh-compatibility mode)?

--Chris

-- 
Such has been the patient sufferance of these colonies; and such is
now the necessity which constrains them to alter their former systems
of government.
    -- Thomas Jefferson, Prologue, "Declaration of Independence"
______________________________________________________________________
Chris Laas:  Unix, C++, Perl, Tcl/Tk / mailto:chrisl@cybercom.net
Limit[tech->Inf](words/acronyms)==0 / http://www.cybercom.net/~chrisl/


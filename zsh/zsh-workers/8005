From zsh-workers-return-8005-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 22 16:29:03 1999
Return-Path: <zsh-workers-return-8005-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25126 invoked from network); 22 Sep 1999 16:29:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Sep 1999 16:29:02 -0000
Received: (qmail 14502 invoked by alias); 22 Sep 1999 16:28:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8005
Received: (qmail 14495 invoked from network); 22 Sep 1999 16:28:47 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990922162827.ZM17525@candle.brasslantern.com>
Date: Wed, 22 Sep 1999 16:28:27 +0000
In-Reply-To: <Pine.OSF.3.96.990922122005.5737A-100000@pol1.phy.cam.ac.uk>
Comments: In reply to "Owen M. Astley" <oma1000@cam.ac.uk>
        "Re: #!/path/to/arch-indep/zsh -f" (Sep 22, 12:24pm)
References: <Pine.OSF.3.96.990922122005.5737A-100000@pol1.phy.cam.ac.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "Owen M. Astley" <oma1000@cam.ac.uk>
Subject: Re: #!/path/to/arch-indep/zsh -f
Cc: zsh-workers@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 22, 12:24pm, Owen M. Astley wrote:
} Subject: Re: #!/path/to/arch-indep/zsh -f
}
} > Most (I don't know if I can say "all") operating systems won't do two
} > levels of indirection via #! lines.  That is, if the thing on the #!
} > line is not itself a binary in executable format, the OS will not
} > recognize yet another #! line and launch still another interpreter.
} 
} $ <test.sh
} #!/u/pol1b/oma1000/bin/zsh
} 
} echo f
} $ head -n 1 /u/pol1b/oma1000/bin/zsh
} #!/bin/sh -
} $ ./test.sh
} f
} $ reportzsh 
} zsh-3.0.6 dec-alpha-osf4.0
} 
} So not on this system.  

I can't decide if you're agreeing with me or giving a counterexample.

} I thought that most (all) modern operating systems recognise #!
} as a magic number in exec()?

They do, but not necessarily recursively.  Remember that the semantics
of the #! line are to take the name of the interpreter from the line
and run it with the name of the file as its first argument.  If the
interpreter is itself a script with a #!, that would add yet another
first argument, and so on.  The original script file might never have
its contents evaluated at all -- which could be interpreted (sorry) as
a security problem.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


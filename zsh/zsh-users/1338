From zsh-workers-request@math.gatech.edu Tue Feb 24 14:49:14 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 29932 invoked from network); 24 Feb 1998 14:49:13 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 24 Feb 1998 14:49:13 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id JAA13899;
	Tue, 24 Feb 1998 09:28:12 -0500 (EST)
Resent-Date: Tue, 24 Feb 1998 09:27:53 -0500 (EST)
Sender: rz2a022@rrz.uni-hamburg.de
Message-ID: <34F2D90E.1D128EEE@rrz.uni-hamburg.de>
Date: Tue, 24 Feb 1998 15:28:31 +0100
From: Bernd Eggink <eggink@rrz.uni-hamburg.de>
Organization: Regionales Rechenzentrum der Uni Hamburg
X-Mailer: Mozilla 4.04 [en] (X11; I; Linux 2.0.30 i586)
MIME-Version: 1.0
To: Helmut Jarausch <jarausch@IGPM.Rwth-Aachen.DE>
CC: zsh-users@math.gatech.edu
Subject: Re: PATH editing in a script
References: <jarausch-980224141145.A016422@numa1>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"_fdEM3.0.ZO3.fZjyq"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1338
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Helmut Jarausch wrote:
> 
> Hi,
> does anybody know how to edit the PATH environment variable?
> Something like 'vared' but in a script (like sed)
> 
> Problem:
> 
> Having two versions of (say) TeX I would like to replace the PATH to tex
> in a user PATH environment string.
> 
> Like
> s|/usr/local/lib/TeX|/usr/local/teTeX|
> 
> It's no problem to edit the PATH e.g. by Perl but these changes have to
> persist whence the (Perl/Zsh) script finishes.

For the changes to be persistent, you have to execute the script with
the "." special command. A simple solution:

  path=($new ${(R)path:#$old})

where $old is the component you want to remove and $new the one you want
to add. Another solution, which keeps the original order:

  path[$path[(ri)$old]]=$new 

Hope that helps,
Bernd

-- 
Bernd Eggink
Regionales Rechenzentrum der Universitaet Hamburg
eggink@rrz.uni-hamburg.de
http://www.rrz.uni-hamburg.de/eggink/BEggink.html


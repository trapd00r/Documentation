From zsh-workers-request@math.gatech.edu Sun Nov 01 23:50:27 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4064 invoked from network); 1 Nov 1998 23:50:26 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 1 Nov 1998 23:50:26 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id SAA01017;
	Sun, 1 Nov 1998 18:47:53 -0500 (EST)
Resent-Date: Sun, 1 Nov 1998 18:47:53 -0500 (EST)
Date: Sun, 1 Nov 1998 18:46:20 -0500
Message-Id: <9811012346.AA19571@ezdzit.zko.dec.com>
From: Paul Lew <lew@ezdzit.zko.dec.com>
To: zsh-workers@math.gatech.edu
Subject: zsh-3.1.x cdmatch problem
X-Mailer: VM 6.37 under Emacs 20.2.1
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"g7Md43.0.qF.fCFFs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4481
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I am trying switch from 3.0.x to 3.1.x but one problem is really
bugged me: The completion after 'cd' command generated:

    zsh: bad math expression: unbalanced stack

This does not happen for 3.0.x, the function cdmatch is the one from
standard distribution:

(3)ezdzit lew Src>>> function cdmatch {
emulate -R zsh
setopt localoptions
local narg pref cdp
read -nc narg
read -Ac pref
cdp=(. $cdpath)
reply=(${^cdp}/${pref[$narg]%$2}*$2(-/DN^M:t))
return
}

If I get rid of the reply= line, the error message disappeared but
there is also no reply list for the completion.

Any idea what wrong here?  Thanks in advance.


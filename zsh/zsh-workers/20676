From zsh-workers-return-20676-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 11 13:59:53 2005
Return-Path: <zsh-workers-return-20676-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21102 invoked from network); 11 Jan 2005 13:59:52 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Jan 2005 13:59:52 -0000
Received: (qmail 32191 invoked from network); 11 Jan 2005 13:59:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Jan 2005 13:59:46 -0000
Received: (qmail 9550 invoked by alias); 11 Jan 2005 13:59:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20676
Received: (qmail 9541 invoked from network); 11 Jan 2005 13:59:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Jan 2005 13:59:43 -0000
Received: (qmail 31915 invoked from network); 11 Jan 2005 13:59:42 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 11 Jan 2005 13:59:39 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6e6e7a1e2d0a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Tue, 11 Jan 2005 13:58:19 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 11 Jan 2005 14:01:50 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j0BDxb0d001887
	for <zsh-workers@sunsite.dk>; Tue, 11 Jan 2005 13:59:37 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j0BDxbQn001884
	for <zsh-workers@sunsite.dk>; Tue, 11 Jan 2005 13:59:37 GMT
Message-Id: <200501111359.j0BDxbQn001884@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Some groundwork for Unicode in Zle 
In-reply-to: <200501111352.j0BDqCKs001801@news01.csr.com> 
References: <200501111352.j0BDqCKs001801@news01.csr.com>
Date: Tue, 11 Jan 2005 13:59:36 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 11 Jan 2005 14:01:50.0121 (UTC) FILETIME=[18A4D190:01C4F7E6]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=BAYES_50 autolearn=no 
	version=2.63
X-Spam-Hits: 0.0

Peter Stephenson wrote:
> I'm still not sure how to test whether a multibyte
> string is invalid rather than incomplete.

After a little more research, it's obvious we should be using
mbrtowc, which does distinguish.  So I'll test for that and
wcrtomb.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


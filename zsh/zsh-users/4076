From zsh-users-return-4076-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 30 07:31:03 2001
Return-Path: <zsh-users-return-4076-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13061 invoked from network); 30 Jul 2001 07:31:01 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Jul 2001 07:31:01 -0000
Received: (qmail 27324 invoked by alias); 30 Jul 2001 07:30:46 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4076
Received: (qmail 27311 invoked from network); 30 Jul 2001 07:30:46 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Mon, 30 Jul 2001 09:29:53 +0200 (MET DST)
Message-Id: <200107300729.JAA27146@beta.informatik.hu-berlin.de>
To: zsh-users@sunsite.dk
CC: Will Yardley <william@hq.newdream.net>
Subject: Re: comptctl help
In-Reply-To: <20010727113716.A10777@hq.newdream.net>

Will Yardley wrote:

> ...
> 
> this works too. _except_ it puts a space after completing the directory name
> still ie:
> scp ju<tab>
> completes to
> scp junk/[space]
> instead of scp junk/[wait for filename completion still]

Err, right.  Add -S '' to the compctl-line.  But that leaves the cursor
directly after normal files, too.  If you want to fix this, the easiest
solution would probably be to use two different functions...

> i suppose that sometimes you might want to copy a whole directory (and it
> would be really fancy to take a directory arg if you did scp -r but a
> filename only if you just did scp)
> don't know if it's possible to do this.
> 
> > This isn't enough information to enable to help you.  No way to get
> > newer versions running there?
> 
> ok here's one example:
> vader% scp williargv=(willi '')
> am@

Get rid of the loacl-declaration of `argv', it's automatically local anyway.

> it completes it but does this (this is the same .compctl as on the other
> machine).
> 
> this also messes up my spacing - if i hit control-u i still have:
> vader% scp williargv=(willi '')
> vader% echo $ZSH_VERSION
> 3.0.7
> 
> this isn't really such a big deal since it's only one machine - i may just
> ignore certain completions based on ZSH_VERSION
> 
> my personal machines are all 4.0.1, but the majority of the machines i use
> for work are 3.1.9-dev-6 - the stable debian package.  aside from building a
> package myself or adapting the unstable package and building it on stable not
> really going to happen (ie there are 110 machines or so and i'm not going to
> install it from source on all of them :>)

Given that, I'd strongly suggest you use the new completion system on
all those 3.1.9 and 4.0.1 machines.

> an example from one of these machines:
> 
> yakko% kill -Bad syntax, perhaps a bogus '-'?
> Bad syntax, perhaps a bogus '-'?
> 
> ...
> 
> or is there just something in here that needs to be different between linux / 
> BSD? my personal machines are all freebsd so it's possible that that's the
> difference.  anyway i hardly ever use this completion anyway so it's not a
> huge deal - just annoying when i try to use it.
> 
> compctl -j -P '%' + -s '`ps -x | tail +2 | cut -c1-5`' + \
>         -x 's[-] p[1]' -k "($signals[1,-3])" -- kill
> 
> thanks for the help!

One of them has problems with `ps -x', I guess.


Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


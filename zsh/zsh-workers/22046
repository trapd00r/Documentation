From zsh-workers-return-22046-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 29 16:29:04 2005
Return-Path: <zsh-workers-return-22046-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 719 invoked from network); 29 Nov 2005 16:29:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Nov 2005 16:29:00 -0000
Received: (qmail 43287 invoked from network); 29 Nov 2005 16:28:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Nov 2005 16:28:54 -0000
Received: (qmail 14509 invoked by alias); 29 Nov 2005 16:28:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22046
Received: (qmail 14497 invoked from network); 29 Nov 2005 16:28:51 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 29 Nov 2005 16:28:51 -0000
Received: (qmail 43087 invoked from network); 29 Nov 2005 16:28:51 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 29 Nov 2005 16:28:49 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id BA1FC70044; Tue, 29 Nov 2005 11:28:46 -0500 (EST)
Date: Tue, 29 Nov 2005 11:28:46 -0500
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: rar/unrar updates
Message-ID: <20051129162846.GA9813@scowler.net>
Mail-Followup-To: zsh-workers@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.9i

Index: Completion/Unix/Command/_rar
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_rar,v
retrieving revision 1.5
diff -u -r1.5 _rar
--- Completion/Unix/Command/_rar	8 Jun 2005 05:33:47 -0000	1.5
+++ Completion/Unix/Command/_rar	29 Nov 2005 16:27:26 -0000
@@ -20,6 +20,7 @@
   '-o\+[overwrite existing files]'
   '-o\-[do not overwrite existing files]'
   '-ow[save or restore file owner and group]'
+  '-p+:password'
   '-p\-[do not query password]'
   '-r[recurse subdirectorie]'
   '-ta+[process files modified after a date]:date (YYYYMMDDHHMMSS)'
@@ -37,9 +38,27 @@
 case $service in
   unrar)
     if (( CURRENT == 2 )); then
-      _wanted commands expl 'rar command' compadd e l lt p t v vt x && return
+       _values 'rar command' \
+	'e[extract files to current directory]' \
+	'l[list archive]' \
+	'lt[list archive (technical format)]' \
+	'lb[list archive (bare format)]' \
+	'p[print file to stdout]' \
+	't[test archive files]' \
+	'v[verbosely list archive]' \
+	'vt[verbosely list archive (technical format)]' \
+	'vb[verbosely list archive (bare format)]' \
+	'x[extract files with full path]' && return
     else
-      _arguments "$common[@]" '*:RAR files:_files -g \*.rar\(-.\)' && return
+      _arguments -S \
+	'-ep3[expand paths to full including the drive letter]' \
+        '-idc[disable ___ display]' \
+        '-idd[disable ___ display]' \
+        '-idq[disable ___ display]' \
+	'-n+:file to include:_files' \
+	'-n@+:file of files to include:_files' \
+        "$common[@]" \
+        '*:RAR files:_files -g \*.rar\(-.\)' && return
     fi
   ;;
   rar)
@@ -56,6 +75,7 @@
 	'k[lock archive]' \
 	'l[list archive]' \
 	'lt[list archive (technical format)]' \
+	'lb[list archive (bare format)]' \
 	'm[move to archive]' \
 	'mf[move to archive (files only)]' \
 	'p[print file to stdout]' \
@@ -68,6 +88,7 @@
 	'u[update files in archive]' \
 	'v[verbosely list archive]' \
 	'vt[verbosely list archive (technical format)]' \
+	'vb[verbosely list archive (bare format)]' \
 	'x[extract files with full path]' && return
     else
       _arguments -S \


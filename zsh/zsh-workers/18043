From zsh-workers-return-18043-mason-zsh=primenet.com.au@sunsite.dk Tue Dec 31 16:04:42 2002
Return-Path: <zsh-workers-return-18043-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19978 invoked from network); 31 Dec 2002 16:04:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 31 Dec 2002 16:04:41 -0000
Received: (qmail 7270 invoked by alias); 31 Dec 2002 16:04:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18043
Received: (qmail 7257 invoked from network); 31 Dec 2002 16:04:33 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1021231160405.ZM25659@candle.brasslantern.com>
Date: Tue, 31 Dec 2002 16:04:05 +0000
In-Reply-To: <15885.10892.679601.764518@fisica.ufpr.br>
Comments: In reply to Carlos Carvalho <carlos@fisica.ufpr.br>
        "4.0.6 bug: out of memory with ulimit" (Dec 28,  2:37am)
References: <15885.10892.679601.764518@fisica.ufpr.br>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Re: 4.0.6 bug: out of memory with ulimit
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Dec 28,  2:37am, Carlos Carvalho wrote:
}
} I've stumbled on what I consider a bug in 4.0.6: if I use this command
} in /etc/zshenv
} 
}   ulimit -HS -d 1048576 -v 1048576
} 
} I get "/etc/zsh/zshrc:-1: fatal error: out of memory"

This is a bug in the C preprocessor #ifdefs in the code that interprets
the ulimit command.  It's pretty tangled what with trying to compensate
for about three different possible implementations, and we haven't got
it straightened out yet.  The effect of the bug is that the argument to 
-v is interpreted as bytes rather than kbytes.

If you use the "limit" command instead of "ulimit" this bug does not
occur:

    limit -hs datasize 1048576 vmemorysize 1048576

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-20544-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 04 18:20:16 2004
Return-Path: <zsh-workers-return-20544-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17969 invoked from network); 4 Nov 2004 18:20:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Nov 2004 18:20:15 -0000
Received: (qmail 60886 invoked from network); 4 Nov 2004 18:20:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Nov 2004 18:20:09 -0000
Received: (qmail 19452 invoked by alias); 4 Nov 2004 18:20:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20544
Received: (qmail 19437 invoked from network); 4 Nov 2004 18:20:05 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Nov 2004 18:20:05 -0000
Received: (qmail 60619 invoked from network); 4 Nov 2004 18:20:05 -0000
Received: from ns9.hostinglmi.net (213.194.149.146)
  by a.mx.sunsite.dk with SMTP; 4 Nov 2004 18:20:03 -0000
Received: from 212.red-80-35-44.pooles.rima-tde.net ([80.35.44.212]:58998 helo=dervishd.net)
	by ns9.hostinglmi.net with esmtpa (Exim 4.43)
	id 1CPmDM-0007Do-B1
	for zsh-workers@sunsite.dk; Thu, 04 Nov 2004 19:20:04 +0100
Date: Thu, 4 Nov 2004 19:22:26 +0100
From: DervishD <zsh@dervishd.net>
To: zsh-workers@sunsite.dk
Subject: Re: Is this a bug or I'm completely lost?
Message-ID: <20041104182226.GB24522@DervishD>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20041104115359.GA23778@DervishD> <Pine.LNX.4.61.0411040841090.5131@toltec.zanshin.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <Pine.LNX.4.61.0411040841090.5131@toltec.zanshin.com>
User-Agent: Mutt/1.4.2.1i
Organization: DervishD
X-MailScanner-Information: Please contact the ISP for more information
X-MailScanner: Found to be clean
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ns9.hostinglmi.net
X-AntiAbuse: Original Domain - sunsite.dk
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - dervishd.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

    Hi Bart :)

 * Bart Schaefer <schaefer@brasslantern.com> dixit:
> >     compadd -k nameddirs userdirs
> >     Then when I hit <TAB> I'm presented with the list of named
> > directories and user directories, in that order. That's correct. But
> > if I specify a starting letter (or any starting prefix) and I hit
> > <TAB>, only the first array is considered as a list of possible
> > matches.
> It certainly appears that this is the intentional behavior of compadd -k, 
> based on a look at the code.  If you specify multiple arrays in a single 
> compadd, they're assumed to indicate a preference ordering (e.g. nameddirs 
> xor userdirs) whereas if you use separate compadds they're cumulative.  

    I assumed that, that's the reason I used a single compadd command
in the first place ;)

> The code very explicitly stops searching as soon as a partial match has 
> been found; the only reason you get all of them in your first example is 
> that there are no partial matches.

    The problem is that a partial match is not found. In fact, what
happens here is that if a match is not found in the first array, the
second is not even tried. Am I missing something?

> I'm reluctant to try to change it given that there may be some obscure 
> dependence on this ... just because I can't think of a case where the 
> existing completion fuctions pass more than one array name to compadd, 
> doesn't mean there isn't one.

    I'm with you... if this is a feature and not a bug.

    If, for example, you have 'cd r' in the command line and do
completion, and the first array has an entry called 'right' and the
second has one called 'rong', I find more or less intuitive and
useful that only 'right' is presented as a match, because you
specified and order when using one compadd command with two arrays.
The problem is that if the first array has no entry that matches that
'r', the second array is not even tried :(( For me this is a bug.

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736
http://www.dervishd.net & http://www.pleyades.net/


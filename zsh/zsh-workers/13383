From zsh-workers-return-13383-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 25 09:11:36 2001
Return-Path: <zsh-workers-return-13383-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8113 invoked from network); 25 Jan 2001 09:11:35 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Jan 2001 09:11:35 -0000
Received: (qmail 8541 invoked by alias); 25 Jan 2001 09:11:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13383
Received: (qmail 8530 invoked from network); 25 Jan 2001 09:11:29 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: Curent CVS crash on Cygwin
Date: Thu, 25 Jan 2001 12:11:25 +0300
Message-ID: <001001c086ae$cb3ba890$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

I got around to checking if zsh still runs on Cygwin. Looks, like no more :)
It outputs prompt and immediately crashes after I press RETURN (or any key for
that matter). It crashes with and without -f. I'm still struggling with this
gdb GUI, but stack trace is:

#0  execzlefunc (func=0x6b1e0d40, args=0x6b1e3154) at
/tools/src/zsh/Src/Zle/zle_main.c:663
#1  0x6b1c9198 in zleread (lp=0xa03a8d8 "%S%n@%m%#%s ", rp=0x0, flags=3) at
/tools/src/zsh/Src/Zle/zle_main.c:571
#2  0x6766b825 in inputline () at /tools/src/zsh/Src/input.c:265
#3  0x6766b70d in ingetc () at /tools/src/zsh/Src/input.c:210
#4  0x67662924 in ihgetc () at /tools/src/zsh/Src/hist.c:236
#5  0x676712b4 in gettok () at /tools/src/zsh/Src/lex.c:628
#6  0x676709a9 in yylex () at /tools/src/zsh/Src/lex.c:344
#7  0x6768a4ad in parse_event () at /tools/src/zsh/Src/parse.c:425
#8  0x676680a5 in loop (toplevel=1, justonce=0) at
/tools/src/zsh/Src/init.c:123
#9  0x6766b358 in zsh_main (argc=1, argv=0xa0124b0) at
/tools/src/zsh/Src/init.c:1200
#10 0x40105f in main (argc=1, argv=0xa0124b0) at /tools/src/zsh/Src/main.c:37
#11 0x610038c5 in _size_of_stack_reserve__ ()
#12 0x61003aad in _size_of_stack_reserve__ ()
#13 0x61003aec in _size_of_stack_reserve__ ()
#14 0x4010b7 in cygwin_crt0 ()

specifically it is a line with queue_signals()

I completely missed all this discussion about signal queuing - Sven, where is
the next place to look?

-andrej

Hmm ... actually this gdb insterface is not bad. And it finally works!

Have a nice DOS!
B >>


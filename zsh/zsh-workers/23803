From zsh-workers-return-23803-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 27 21:16:42 2007
Return-Path: <zsh-workers-return-23803-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18645 invoked from network); 27 Aug 2007 21:16:32 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 Aug 2007 21:16:32 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46069 invoked from network); 27 Aug 2007 21:16:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 Aug 2007 21:16:25 -0000
Received: (qmail 26854 invoked by alias); 27 Aug 2007 21:16:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23803
Received: (qmail 26844 invoked from network); 27 Aug 2007 21:16:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 Aug 2007 21:16:22 -0000
Received: (qmail 45725 invoked from network); 27 Aug 2007 21:16:22 -0000
Received: from mtaout03-winn.ispmail.ntl.com (81.103.221.49)
  by a.mx.sunsite.dk with SMTP; 27 Aug 2007 21:16:14 -0000
Received: from aamtaout04-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout03-winn.ispmail.ntl.com with ESMTP
          id <20070827211613.YAAF13.mtaout03-winn.ispmail.ntl.com@aamtaout04-winn.ispmail.ntl.com>
          for <zsh-workers@sunsite.dk>; Mon, 27 Aug 2007 22:16:13 +0100
Received: from pws-pc.ntlworld.com ([81.107.45.67])
          by aamtaout04-winn.ispmail.ntl.com with ESMTP
          id <20070827211612.VJUG29112.aamtaout04-winn.ispmail.ntl.com@pws-pc.ntlworld.com>
          for <zsh-workers@sunsite.dk>; Mon, 27 Aug 2007 22:16:12 +0100
Received: from pws-pc.ntlworld.com (pws-pc.ntlworld.com [127.0.0.1])
	by pws-pc.ntlworld.com (8.14.1/8.13.8) with ESMTP id l7RLG8cE028288
	for <zsh-workers@sunsite.dk>; Mon, 27 Aug 2007 22:16:09 +0100
Message-Id: <200708272116.l7RLG8cE028288@pws-pc.ntlworld.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: Re: Problem with recent cvs zsh
In-Reply-To: Message from "Mikael Magnusson" <mikachu@gmail.com>
   of "Mon, 27 Aug 2007 02:08:27 +0200." <237967ef0708261708q7b329123l280000a762ad18f1@mail.gmail.com>
Date: Mon, 27 Aug 2007 22:16:08 +0100

"Mikael Magnusson" wrote:
> Hi,
> When using zsh from cvs i get the following errors upon startup (and
> some more like them)
> 
> /home/mikaelh/.zshrc:135: failed to load module `zsh/mathfunc':
> /usr/local/lib/zsh/4.3.4-dev-1/zsh/mathfunc.so: undefined symbol:
> errflag
> /home/mikaelh/.zshrc:136: failed to load module `zsh/zle':
> /usr/local/lib/zsh/4.3.4-dev-1/zsh/zle.so: undefined symbol:
> nullstrsetfn

No idea what this could be, since these symbols, at least, are marked
for export.  For some reason it looks like the main shell isn't being
linked in or doesn't have all the symbols in.  Could there by any change
in shared library configuration?  In particular has something changed
with the setting of zsh_cv_sys_dynamic_execsysms when you run configure
(it should be in config.log)?  Does it still happen if you recompile
from scratch?  What does "nm =zsh | grep errflag" show (where =zsh
refers to the newly installed zsh)?  If it's persistent, you probably
need to track down which change it came in with.

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


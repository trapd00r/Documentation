From zsh-workers-return-12368-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 25 16:04:22 2000
Return-Path: <zsh-workers-return-12368-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2795 invoked from network); 25 Jul 2000 16:03:58 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Jul 2000 16:03:58 -0000
Received: (qmail 9514 invoked by alias); 25 Jul 2000 16:03:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12368
Received: (qmail 9507 invoked from network); 25 Jul 2000 16:03:15 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000725160257.ZM20087@candle.brasslantern.com>
Date: Tue, 25 Jul 2000 16:02:57 +0000
In-Reply-To: <20000725161723.A25056@thelonious.new.ox.ac.uk>
Comments: In reply to Adam Spiers <adam@spiers.net>
        "'insecure directories' warning" (Jul 25,  4:17pm)
References: <20000725161723.A25056@thelonious.new.ox.ac.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Adam Spiers <adam@spiers.net>,
        zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: 'insecure directories' warning
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 25,  4:17pm, Adam Spiers wrote:
} Subject: 'insecure directories' warning
}
} A month ago, Bart wrote:
} > The other problem is that when I answer "y" to the question "there are
} > insecure directories -- proceed?" I expected that to mean that it
} > would USE those directories, not ignore them.
} 
} Nothing seems to have been done about this.

Yes, it has.  The patch was 12033 (the ChangeLog entry is rather brief).

} Also, it would be nice if the user gets told which directories are
} insecure, otherwise he doesn't stand much of a chance of fixing them.

Hrm.  Maybe a separate function to check for and report this?  I don't
know if we want the compinit output to get any more verbose than it is.
On the other hand, it's only a one-line change, so maybe some of you can
try this out and see what you think (the output is a couple of screenfuls
long for me because of RedHat's special groups trick):

Index: Completion/Core/compinit
===================================================================
@@ -371,6 +371,7 @@
 
     if [[ -n "$_i_q" ]]; then
       if [[ "$_i_fail" = ask ]]; then
+	print -l - $_i_wdirs $_i_wfiles
         if ! read -q "?There are insecure $_i_q, continue [ny]? "; then
           unfunction compinit compdef
           unset _comp_dumpfile _comp_secure compprefuncs comppostfuncs \


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


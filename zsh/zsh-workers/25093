From zsh-workers-return-25093-mason-zsh=primenet.com.au@sunsite.dk Sat May 24 14:25:38 2008
Return-Path: <zsh-workers-return-25093-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18145 invoked from network); 24 May 2008 14:25:26 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 May 2008 14:25:26 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 94831 invoked from network); 24 May 2008 14:25:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 May 2008 14:25:21 -0000
Received: (qmail 5612 invoked by alias); 24 May 2008 14:25:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25093
Received: (qmail 5589 invoked from network); 24 May 2008 14:25:16 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 24 May 2008 14:25:16 -0000
Received: from mtaout03-winn.ispmail.ntl.com (mtaout03-winn.ispmail.ntl.com [81.103.221.49])
	by bifrost.dotsrc.org (Postfix) with ESMTP id CA8DE80589A4
	for <zsh-workers@sunsite.dk>; Sat, 24 May 2008 16:25:12 +0200 (CEST)
Received: from aamtaout03-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout03-winn.ispmail.ntl.com with ESMTP
          id <20080524143010.BEKF22559.mtaout03-winn.ispmail.ntl.com@aamtaout03-winn.ispmail.ntl.com>;
          Sat, 24 May 2008 15:30:10 +0100
Received: from pws-pc ([81.107.40.67]) by aamtaout03-winn.ispmail.ntl.com
          with ESMTP
          id <20080524143338.YEDN26699.aamtaout03-winn.ispmail.ntl.com@pws-pc>;
          Sat, 24 May 2008 15:33:38 +0100
Date: Sat, 24 May 2008 15:25:04 +0100
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: 482346@bugs.debian.org, zsh-workers@sunsite.dk
Subject: Re: Bug#482346: zsh doesn't always wait for its children (->
 zombie)
Message-ID: <20080524152504.759b27ad@pws-pc>
In-Reply-To: <20080524124445.GQ7056@prunille.vinc17.org>
References: <20080521235008.GA5600@ay.vinc17.org>
	<20080521235930.GW7056@prunille.vinc17.org>
	<20080522233327.GA24953@scru.org>
	<080523073940.ZM13804@torch.brasslantern.com>
	<20080523145722.GA12096@scru.org>
	<20080523224305.GN7056@prunille.vinc17.org>
	<20080524025556.GA30511@scru.org>
	<20080524124445.GQ7056@prunille.vinc17.org>
X-Mailer: Claws Mail 3.3.1 (GTK+ 2.12.9; x86_64-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.91.2/7225/Sat May 24 03:25:25 2008 on bifrost
X-Virus-Status: Clean

On Sat, 24 May 2008 14:44:45 +0200
Vincent Lefevre <vincent@vinc17.org> wrote:
> This is 100% reproducible with both zsh and zsh-beta.

If it's just a matter of starting vlc and trying to kill it for you,
then there's something more to track down since this doesn't happen for
me (Fedora 9).

There must be more to it than simply zsh not waiting for children:  that
has no effect on whether vlc is executing code.  The propagation of the
signal to the programme seems to me a likely suspect.  Of course these
could be related to the same fundamental problem.  vlc does appear to do
some fairly odd things with signals which may be interacting in
unexpected ways with the shell.

It would be useful to know whether the vlc job is listed in the shell's
job table at this point, and to see what else is there.  The array
jobtab contains the jobs, which contain linked lists of process
structures.  One of the jobs (it should be the one indexed
by curjob) should include the vlc process.  The previous bug
happened because some other job (marked as defunct) had
a process with the same number.

pws


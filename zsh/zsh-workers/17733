From zsh-workers-return-17733-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 25 17:51:33 2002
Return-Path: <zsh-workers-return-17733-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17468 invoked from network); 25 Sep 2002 17:51:33 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Sep 2002 17:51:33 -0000
Received: (qmail 6967 invoked by alias); 25 Sep 2002 17:51:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17733
Received: (qmail 6952 invoked from network); 25 Sep 2002 17:51:24 -0000
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: UTF-8 fonts 
In-reply-to: "Oliver Kiddle"'s message of "Wed, 25 Sep 2002 18:29:35 BST."
             <E17uFyh-0007Po-00@bimbo.logica.co.uk> 
Date: Wed, 25 Sep 2002 18:50:55 +0100
Message-ID: <7504.1032976255@csr.com>
From: Peter Stephenson <pws@csr.com>

Oliver Kiddle wrote:
> So is your aim to use UTF-8 internally in all cases or only when it is
> the selected character set?

My aim is to use normal metafied characters whenever possible and not
worry how the byte stream is encoded until the few points where we don't
have a choice, and then to use system functions.

> > We are going to assume that bytes without the top-bit set are ASCII, and
> > the remainder require mb* handling.
> 
> Isn't it easier to just do mb* handling on everything and not go around
> checking the top bit. The mb*() functions should do that sort of stuff
> for us. mbrtowc() can be used, discarding the returned wchar_t to, for
> example consume one character of a string. So it worries about whatever
> the top bit of the bytes are or whatever the underlying multi-byte
> character encoding requires.

This is where we have a choice, but I think treating even normal ASCII
bytes with arbitrary functions is going to be horrendously inefficient.
Personally I would be perfectly happy if the shell worked only with
schemes which were extensions of ASCII.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


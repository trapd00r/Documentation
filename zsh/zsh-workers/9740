From zsh-workers-return-9740-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Feb 15 11:09:37 2000
Return-Path: <zsh-workers-return-9740-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18219 invoked from network); 15 Feb 2000 11:09:35 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Feb 2000 11:09:35 -0000
Received: (qmail 27498 invoked by alias); 15 Feb 2000 11:09:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9740
Received: (qmail 27485 invoked from network); 15 Feb 2000 11:09:23 -0000
Message-ID: <38A933DE.E0ECB798@u.genie.co.uk>
Date: Tue, 15 Feb 2000 11:09:18 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.7 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: help with _match, globcomplete etc.
References: <200002141303.OAA10037@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:

> You can bind expand-word to ^X$.

True though I was mainly after not having variable expansion ever when I
press tab.

Incidentally, I tried creating:
expand-variables() {
  setopt localoptions noglob
  zle expand-word
}
zle -N expand-variables

so that ^X$ wouldn't also glob complete but it comes back with any glob
characters quoted. It seems that expand-word always does this when
noglob is set. Surely this isn't right? In the process, I also noticed
that the quoting can go slightly wrong if there are opened but not
closed braces: $code[ai]/{a,b<Ctrl-X,*> comes back with a quoted '[' in
the middle.

> Have you had a look at the _expand completer? And the _expand_word

I have now but I can't get it to work. I've probably missed something
but this won't work:

zsh -f
autoload -U compinit
compinit
bindkey '^I' complete-word
zstyle -d
zstyle ':completion:*::::' completer _expand
echo *<tab>

I was expecting the last line to glob expand (as if tab was still bound
to expand-or-complete) but all I can get is a beep. I've tried changing
the related styles without any effect.

Thanks

Oliver


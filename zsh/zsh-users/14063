From zsh-users-return-14063-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 25 12:41:59 2009
Return-Path: <zsh-users-return-14063-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17036 invoked from network); 25 Apr 2009 12:41:56 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_NUMERIC_HELO autolearn=no version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Apr 2009 12:41:56 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 27211 invoked from network); 25 Apr 2009 12:41:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Apr 2009 12:41:41 -0000
Received: (qmail 9997 invoked by alias); 25 Apr 2009 12:41:21 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14063
Received: (qmail 9977 invoked from network); 25 Apr 2009 12:41:21 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 25 Apr 2009 12:41:21 -0000
Received: from ciao.gmane.org (main.gmane.org [80.91.229.2])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 506FE8028C72
	for <zsh-users@sunsite.dk>; Sat, 25 Apr 2009 14:39:43 +0200 (CEST)
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1LxhBz-0008Gr-Sy
	for zsh-users@sunsite.dk; Sat, 25 Apr 2009 12:41:15 +0000
Received: from 82.119.242.94 ([82.119.242.94])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Sat, 25 Apr 2009 12:41:15 +0000
Received: from thorsten by 82.119.242.94 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Sat, 25 Apr 2009 12:41:15 +0000
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-users@sunsite.dk
From:  Thorsten Kampe <thorsten@thorstenkampe.de>
Subject:  Re: Zsh util helpfiles does not produce output
Date:  Sat, 25 Apr 2009 14:41:04 +0200
Lines: 57
Message-ID: <gsv0d1$u18$1@ger.gmane.org>
References:  <gss5bj$m9j$1@ger.gmane.org> <090424145758.ZM8591@torch.brasslantern.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset="us-ascii"
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 82.119.242.94
User-Agent: MicroPlanet-Gravity/2.71.11
Sender: news <news@ger.gmane.org>
X-Virus-Scanned: ClamAV 0.92.1/9289/Sat Apr 25 12:11:31 2009 on bifrost
X-Virus-Status: Clean

* Bart Schaefer (Fri, 24 Apr 2009 14:57:58 -0700)
> On Apr 24, 12:47pm, Thorsten Kampe wrote:
> } 
> } on a Gentoo Linux with Perl 5.8.8 and Zsh 4.3.9. The commands don't 
> } error but I receive no output at all.
> } 
> } On a Cygwin system with Perl 5.10 the help files are generated just 
> } fine.
> } 
> } Any way to debug that?
> 
> Start by capturing the output of "man zshbuiltins" on both machines
> and compare.
> 
> Then capture "man zshbuiltins | colcrt -" or equivalent and compare.

Okay, I've done the following on both machines:
man zshbuiltins > man.txt
man zshbuiltins | col -bx > col.txt

col.txt on the Cygwin host (where it works) is plain text while on the 
Linux machine it looks like this:

1mNAME0m
       zshbuiltins - zsh built-in commands

1mSHELL BUILTIN COMMANDS0m
       1m- 4m22msimple24m 4mcommand0m
              See the section `Precommand Modifiers'.

The pure man output on both machines contains control sequences - but 
they look differently: on the Cygwin machine I see 

NNAAMMEE (where the control characters look like a white spot on 
black background)

on Linux I see:

[1mNAME[0m

Again in Hex:
4E 08 4E 41 08 41 4D 08 4D 45 08 45 (Cygwin)
1B 5B 31 6D 4E 41 4D 45 1B 5B 30 6D (Linux)

(which both translates to a red "NAME" in the man page)

> If you don't find an explanation by that point, there's a problem with
> the perl script.
> 
> One possibility is that "man" on Gentoo is producing UTF-8 output,
> which the perl script probably can't deal with.  Try forcing another
> locale.

Tried LC_ALL, LANG and LANGUAGE to C or en_US: no difference. The zsh 
man page is plain English so the UTF8 is here the same as ASCII.

Thorsten


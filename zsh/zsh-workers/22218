From zsh-workers-return-22218-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 11 10:22:08 2006
Return-Path: <zsh-workers-return-22218-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5912 invoked from network); 11 Feb 2006 10:22:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Feb 2006 10:22:06 -0000
Received: (qmail 84811 invoked from network); 11 Feb 2006 10:22:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Feb 2006 10:22:00 -0000
Received: (qmail 1968 invoked by alias); 11 Feb 2006 10:21:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22218
Received: (qmail 1958 invoked from network); 11 Feb 2006 10:21:58 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Feb 2006 10:21:58 -0000
Received: (qmail 84544 invoked from network); 11 Feb 2006 10:21:58 -0000
Received: from flock1.newmail.ru (80.68.241.157)
  by a.mx.sunsite.dk with SMTP; 11 Feb 2006 10:21:53 -0000
Received: (qmail 25067 invoked from network); 11 Feb 2006 10:21:51 -0000
Received: from unknown (HELO cooker.local) (arvidjaar@newmail.ru@83.237.13.127)
  by smtpd.newmail.ru with SMTP; 11 Feb 2006 10:21:51 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: Zsh-workers <zsh-workers@sunsite.dk>
Subject: Re: [SOLVED] Libtool/zsh quoting problem: a zsh... bug?
Date: Sat, 11 Feb 2006 13:21:43 +0300
User-Agent: KMail/1.9.1
References: <20060209233201.GA5875@fargo> <20060211093607.GD10579@DervishD>
In-Reply-To: <20060211093607.GD10579@DervishD>
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200602111321.48602.arvidjaar@newmail.ru>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Saturday 11 February 2006 12:36, DervishD wrote:
>
>     The problem is that zsh does word splitting in this construct:
>
>     ${1+"$@"}
>

See this thread: <http://www.zsh.org/mla/workers/2002/msg00542.html>; there 
was an attempt to fix it in 16949 but apparently it was incomplete and never 
went in.

>     I don't know if this can be considered a zsh bug or not. The SUS
> standard says that field splitting is done after parameter expansion,
> so I think it should be done on the above expansion. Unfortunately,
> Bash doesn't seem to do it.
>

bash is right and zsh is not.

>     Anyway, the above construct doesn't look useful to me. I mean, if
> $1 is set, we substitute all available arguments. If it is unset, we
> don't substitune anything. So, this is equivalent to just
> substituting "$@", and zsh doesn't perform word splitting on that...
>
>     I'm thinking about submitting a patch to the libtool people, with
> something like this:
>
>     alias -g '${1+"$@"}'='"$@"'
>

The funny part of it is that autoconf includes exactly the above workaround 
since quoted thread; this is also documented in autoconf info.

>     I know, that's a dirty hack, but I cannot think about any other
> fix (except "fixing" zsh itself, although I'm not sure this is a
> bug).
>
>     Any suggestion???
>

Fix a bug in zsh :)

- -andrey
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFD7bq7R6LMutpd94wRAv9pAKDR4e7JsNgsehnc1ROJMudjQpUHJwCgyj1H
ZXCpGBkuMvDaZYHRFUoXty0=
=VLVF
-----END PGP SIGNATURE-----


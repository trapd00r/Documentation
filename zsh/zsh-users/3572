From zsh-users-return-3572-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Dec 18 13:22:27 2000
Return-Path: <zsh-users-return-3572-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23775 invoked from network); 18 Dec 2000 13:22:26 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Dec 2000 13:22:26 -0000
Received: (qmail 24100 invoked by alias); 18 Dec 2000 13:22:13 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3572
Received: (qmail 24092 invoked from network); 18 Dec 2000 13:22:12 -0000
To: zsh-users@sunsite.auc.dk
Date: 18 Dec 2000 14:22:25 +0100
From: Akim Demaille <akim@epita.fr>
Message-ID: <mv4bsu9n9ta.fsf@nostromo.lrde.epita.fr>
Organization: EPITA / LRDE
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Subject: bug with for and |&
Sender: news <news@kualalumpur.lrde.epita.fr>


Well, I have something really weird happening with 

~/src/ace % echo $ZSH_VERSION                                    nostromo 14:16
3.1.9-dev-8

All what follows is in interactive mode.

/tmp % ls                                                        nostromo Err 1
"                cdefs.h          foo.tig          piechu_s-tiger/
adolph_v-tiger/  ChangeLog*       foo.y            poncon_g-tiger/
akim/            config.guess@    fricau_p-tiger/  quenin_b-tiger/
am.log           config.log       gastou_f-tiger/  README*
andre_t-tiger/   config.status*   gouban_p-tiger/  reprise.tig
a.out*           config.sub@      gsrvdir17023/    ribeir_p-tiger/
arith.output     configure*       guerin_p-tiger/  rodrig_j-tiger/
arith.tab.c      configure.in     guimar_k-tiger/  run.out
arith.tab.h      configure.out    jean_y-tiger/    sirven_o-tiger/
arith.y          da-sil_l-tiger/  lagard_s-tiger/  solett_p-tiger/
arvis_v-tiger/   dasson_m-tiger/  laguar_j-tiger/  solt_f-tiger/
autoconf-2.49c/  de-lai_f-tiger/  lamy_t-tiger/    src/
bana_j-tiger/    de-pai_h-tiger/  libtool/         ssh-akim/
baratt_b-tiger/  desmet_s-tiger/  libtool.log      t.appLDe
bar.c            dettor_l-tiger/  log2.zip         tests/
beal_m-tiger/    doroth_j-tiger/  logs.zip         texinfo-4.0/
benard_b-tiger/  fileaQwT2P       ltconfig@        texinfo-4.0.tar.gz
bernot_v-tiger/  filebGBedN       ltmain.sh@       texxnLtqJ
boero_o-tiger/   filee2XeQe       Makefile         thomas/
borona_d-tiger/  flatet_m-tiger/  make.out         tiger/
bourla_a-tiger/  foo/             masche_l-tiger/  tigerc-source/
brosso_s-tiger/  foo.c            menant_n-tiger/  tiger.texi-ouaou.patch.gz
buffin_c-tiger/  foof             michel_a-tiger/  trista_f-tiger/
build/           fooo/            mlt.log          vigot_v-tiger/
calc.wNi0xb      foo.output       morizo_m-tiger/  violle_f-tiger/
castri_t-tiger/  foo.patch        ndoye_d-tiger/   xmms_akim.0=
ccu2ChLH.s       foo.tab.c        ngo_r-tiger/     zivoti_b-tiger/
ccySQ0El.ii      foo.tab.h        orbit-akim/      zsh/

/tmp % for i in 1                                                nostromo 14:19
do
ls
done |& tee /tmp/foof
# gives immediately the result.

/tmp % for i in 1 2                                              nostromo 14:19
do                 
ls                   
done |& tee /tmp/foof
# I have to C-c C-c to stop it.

/tmp % for i in 1 2                                              nostromo Err 1
do
ls
done | tee /tmp/foof 
# s/|&/|/ makes it work properly.

If I use say echo instead of ls, it works.  If I use `ls --help', it
works.  I don't have too much time right now to look for sth more
precise, but someone might have already observed this.


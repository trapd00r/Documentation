From zsh-workers-return-24102-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 20 13:09:27 2007
Return-Path: <zsh-workers-return-24102-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13143 invoked from network); 20 Nov 2007 13:09:18 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Nov 2007 13:09:18 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 51225 invoked from network); 20 Nov 2007 13:09:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 13:09:15 -0000
Received: (qmail 5742 invoked by alias); 20 Nov 2007 13:09:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24102
Received: (qmail 5720 invoked from network); 20 Nov 2007 13:09:11 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Nov 2007 13:09:11 -0000
Received: (qmail 50922 invoked from network); 20 Nov 2007 13:09:11 -0000
Received: from wr-out-0506.google.com (64.233.184.238)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 13:09:06 -0000
Received: by wr-out-0506.google.com with SMTP id c8so1806481wra
        for <zsh-workers@sunsite.dk>; Tue, 20 Nov 2007 05:09:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=dWNvpnZBL4Xi4saE9FWNmPO4ca1j4/XOWS5xhOQh82E=;
        b=hDUbqjgNP1LkVeHkMaszs8N9CyojLZ0/GtvJ6W5xQJmnPx9qbpOfLnlVZ5/tjLTkp/ne79p97Zo0Jwwp2OevKtbHdGWWysN//16EqBOYv/QmB7iQaSXsFrYowucuFk0CCgHTe0pGG11d9syXCjohpfX7/Lx3vAfWusJcMm8w/Fo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=meHD/a70hNgImDqAlJXCa8nsjm9dYsq4dEwTOXXEtmGF3MDdC1ybfmq5kVtcFJ3YDYCKTXSr35F85qwxVsFYlCgGkPT41lGW+XKSUf3LbGSgT78v5840/j1/2iLQ/WTS3mnm2Vh8U5M0E82XxBu85U1GiAxi+NdAFGMo3n2QOdU=
Received: by 10.142.109.16 with SMTP id h16mr1436416wfc.1195564142532;
        Tue, 20 Nov 2007 05:09:02 -0800 (PST)
Received: by 10.143.188.10 with HTTP; Tue, 20 Nov 2007 05:09:02 -0800 (PST)
Message-ID: <237967ef0711200509s75e96d93n1e176b8ee14ad158@mail.gmail.com>
Date: Tue, 20 Nov 2007 14:09:02 +0100
From: "Mikael Magnusson" <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: reset-prompt fails to redraw if second line starts with a wide character
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

zsh -f
type some random characters to reach the end of the first line and
then enter some doublewidth characters over the line break and then
type some more characters
<alt-x>reset-prompt
zsh doesn't redraw anything after the first doublewidth character on
the second line (same behaviour on subsequent lines). It only seems to
happen if the first (two) columns of the line is a doublewidth
character.

http://mikachu.ath.cx/resetprompt.png
First line i pressed ctrl-c to show what i have entered, second line i
enter the same thing and reset-prompt.

-- 
Mikael Magnusson


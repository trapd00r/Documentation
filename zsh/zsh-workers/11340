From zsh-workers-return-11340-mason-zsh=primenet.com.au@sunsite.auc.dk Fri May 12 08:31:52 2000
Return-Path: <zsh-workers-return-11340-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5535 invoked from network); 12 May 2000 08:31:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 May 2000 08:31:51 -0000
Received: (qmail 25392 invoked by alias); 12 May 2000 08:31:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11340
Received: (qmail 25363 invoked from network); 12 May 2000 08:31:35 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000512083115.ZM5065@candle.brasslantern.com>
Date: Fri, 12 May 2000 08:31:14 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Test (re)numbering
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I'd like to propose we renumber to the following numbering scheme:

00    : cd (the example test)
01-29 : Shell syntax and other features usable in scripts (no modules!)
30    : zmodload
31-49 : As 01-29, but for features loaded from modules
50    : zpty
51-   : Interactive-only features (e.g. completion)

This at least approximately follows a logical progression where most things
aren't attempted until other tests have been run on which they might depend.
This would let us specify that certain test failures (e.g. 30 and 50) abort
all tests that come after them, on the grounds that the remaining tests
can't possibly succeed.

Of course, the whole test system is likely to fail if anything in 00-30
fails, but short of rewriting ztst.zsh in Bourne I don't think we can do
anything about that.

I could easily be convinced that we should reserve more than 29 numbers for
basic shell tests, but I don't think fewer is wise.  Of course, the numbers
are presently ordered lexically, so 100-299, 1000-2999, etc. are available
if we need to shove more tests in "below" 30.  Which, if we start writing
tests for lots of combinations of setopts, we might need ...

Under the above scheme, we'd invent 30zmodload and 50zpty, and rename:

50cd.ztst		-->	00cd.ztst
51xtrace.ztst		-->	29xtrace.ztst
52zregexparse.ztst	-->	31zregexparse.ztst

and we'd also document the numbering scheme in a new Test/README or in
00cd.ztst or both.

Aside:  I wonder why zregexparse doesn't deserve it's own module ...

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


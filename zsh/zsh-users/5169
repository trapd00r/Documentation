From zsh-users-return-5169-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 15 13:55:19 2002
Return-Path: <zsh-users-return-5169-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4427 invoked from network); 15 Jul 2002 13:55:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Jul 2002 13:55:18 -0000
Received: (qmail 11545 invoked by alias); 15 Jul 2002 13:54:58 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5169
Received: (qmail 11531 invoked from network); 15 Jul 2002 13:54:58 -0000
To: zsh-users@sunsite.dk
Subject: associative arrays, ip addresses as keys?
From: Jason Price <jprice@cyberbuzz.gatech.edu>
Date: 15 Jul 2002 09:54:56 -0400
Message-ID: <kgok7nxm6z3.fsf@cyberbuzz.gatech.edu>
Lines: 23
User-Agent: Gnus/5.0808 (Gnus v5.8.8) XEmacs/21.1 (Cuyahoga Valley)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I'm trying to use associative arrays to match a counter to different IP
addresses.  I thought the following would do it:

set -A repeats
..... | while read ip count ; do
   repeats[$ip]=repeats[$ip]+$count
done

however, when I try this, I get a floating point exception.  I assume
zsh interprets the ip as a float.

I can do the following:

repeats=(10.2.1.1 7 10.2.2.1 9 10.2.3.1 52)

however, I can't get the results back either: echo $repeats[10.2.1.1] 

What am I doing wrong?  The manpage states that anything within the
square brackets will be subjected to arithmatic evaluation, even assoc
arrays.  Is there an easy way?

Thanks;
Jason


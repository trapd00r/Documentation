From zsh-workers-request@math.gatech.edu  Mon Aug  7 19:53:31 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id TAA24754 for <mason@werple.mira.net.au>; Mon, 7 Aug 1995 19:53:25 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA15750
  (5.65c/Gatech-10.0-IDA); Mon, 7 Aug 1995 05:38:09 -0400
Received: by math (5.x/SMI-SVR4)
	id AA08067; Mon, 7 Aug 1995 05:33:37 -0400
Resent-Date: Mon, 7 Aug 1995 11:27:09 +0200 (MET DST)
Old-Return-Path: <hzoli@cs.elte.hu>
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199508070933.LAA18976@bolyai.cs.elte.hu>
Subject: Re: Configure Oops and make error
To: brown@ftms.com (Vidiot)
Date: Mon, 7 Aug 1995 11:27:09 +0200 (MET DST)
In-Reply-To: <199508050154.UAA12691@ftms.ftms.com> from "Vidiot" at Aug 4, 95 08:54:54 pm
X-Mailer: ELM [version 2.4 PL24]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: hzoli@cs.elte.hu
Resent-Message-Id: <"UQcWK1.0.zz1.mtT9m"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/289
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Vidiot <brown@ftms.COM> wrote:

> While running the configure script from zsh-2.6-beta10-hzoli10.2, I get:
> 
> checking where signal.h is located... grep: illegal option -- q
> Usage: grep -blcnsviwh [ -e ] pattern file . . .
> grep: illegal option -- q
> Usage: grep -blcnsviwh [ -e ] pattern file . . .
> /dev/null
> 
> Oops.  The system uses SunOS 4.1.3

Sorry for that. This grep was necessary because Linux may have signal.h in
either <asm/signal.h> or <linux/signal.h>. But under linux, <asm/signal.h>
always exists so we have to use grep do decide wether <asm/signal.h> or
<linux/signal.h> contains the relevant information.

The other problem was that make complained about missing autoheader. This was
because make wanted to remake stamp-h.in since it was older that
configure.in. Just touch stamp-h.in and remake, and it should work.

The patch below fixes hopefully fixes configure.

Do not forget to touch stamp-h.in after applying the patch. Or the best is to
mot use make in the main zsh directory. Just cd to Src, and do make there.

Zoltan

--- 1.3	1995/08/02 18:48:37
+++ configure	1995/08/07 09:16:06
@@ -2267,7 +2267,7 @@
 echo $ac_n "checking where signal.h is located""... $ac_c" 1>&6
 for SIGNAL_H in /usr/include/bsd/sys/signal.h /usr/include/asm/signal.h /usr/include/linux/signal.h /usr/include/sys/signal.h /dev/null; do
   test -f $SIGNAL_H && \
-  grep -q '#[ 	]*define[ 	][ 	]*SIG[0-9A-Z]*[ 	]*[0-9][0-9]*' $SIGNAL_H && \
+  grep '#[ 	]*define[ 	][ 	]*SIG[0-9A-Z]*[ 	]*[0-9][0-9]*' $SIGNAL_H > /dev/null && \
   break
 done
 echo "$ac_t""$SIGNAL_H" 1>&6
--- 1.3	1995/08/02 18:48:37
+++ configure.in	1995/08/07 09:11:35
@@ -361,7 +361,7 @@
                 /dev/null;                      dnl Just in case we fall through
 do
   test -f $SIGNAL_H && \
-  grep -q '#[ 	]*define[ 	][ 	]*SIG[0-9A-Z]*[ 	]*[0-9][0-9]*' $SIGNAL_H && \
+  grep '#[ 	]*define[ 	][ 	]*SIG[0-9A-Z]*[ 	]*[0-9][0-9]*' $SIGNAL_H > /dev/null && \
   break
 done
 AC_MSG_RESULT($SIGNAL_H)


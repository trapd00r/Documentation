From zsh-workers-return-13942-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 10 18:25:52 2001
Return-Path: <zsh-workers-return-13942-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20935 invoked from network); 10 Apr 2001 18:25:51 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Apr 2001 18:25:51 -0000
Received: (qmail 13103 invoked by alias); 10 Apr 2001 18:25:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13942
Received: (qmail 13088 invoked from network); 10 Apr 2001 18:25:48 -0000
Date: Tue, 10 Apr 2001 11:25:42 -0700 (PDT)
From: Wayne Davison <wayned@users.sourceforge.net>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Cc: Zsh Workers <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: preexec sometimes gets wrong command
In-Reply-To: <1010410075909.ZM14922@candle.brasslantern.com>
Message-ID: <Pine.LNX.4.30.0104101119500.7600-200000@phong.blorf.net>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-1463796991-1967605654-986927142=:7600"

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---1463796991-1967605654-986927142=:7600
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 10 Apr 2001, Bart Schaefer wrote:
> I'd actually vote for:
>
> 	$1	the history line, or empty
> 	$2	getjobtext(), or empty (is it ever?)
> 	$3	getpermtext() (what your patch passes as $2)

Seems like a good idea to me, so I added the extra argument.
(FYI: getjobtext() will never be empty.)

Does anyone have any concerns about my committing this?

..wayne..

---1463796991-1967605654-986927142=:7600
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="preexec.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.30.0104101125420.7600@phong.blorf.net>
Content-Description: Second version of preexec tweak
Content-Disposition: attachment; filename="preexec.patch"

SW5kZXg6IERvYy9ac2gvZnVuYy55bw0KQEAgLTE3Miw4ICsxNzIsMTQgQEAN
CiBmaW5kZXgocHJlZXhlYykNCiBpdGVtKHR0KHByZWV4ZWMpKSgNCiBFeGVj
dXRlZCBqdXN0IGFmdGVyIGEgY29tbWFuZCBoYXMgYmVlbiByZWFkIGFuZCBp
cyBhYm91dCB0byBiZQ0KLWV4ZWN1dGVkLiAgSWYgdGhlIGhpc3RvcnkgbWVj
aGFuaXNtIGlzIGFjdGl2ZSwgdGhlIHN0cmluZyB0byBiZQ0KLWV4ZWN1dGVk
IGlzIHBhc3NlZCBhcyBhbiBhcmd1bWVudC4NCitleGVjdXRlZC4gIElmIHRo
ZSBoaXN0b3J5IG1lY2hhbmlzbSBpcyBhY3RpdmUgKGFuZCB0aGUgbGluZSB3
YXMgbm90DQorZGlzY2FyZGVkIGZyb20gdGhlIGhpc3RvcnkgYnVmZmVyKSwg
dGhlIHN0cmluZyB0aGF0IHRoZSB1c2VyIHR5cGVkIGlzDQorcGFzc2VkIGFz
IHRoZSBmaXJzdCBhcmd1bWVudCwgb3RoZXJ3aXNlIGl0IGlzIGFuIGVtcHR5
IHN0cmluZy4gIFRoZQ0KK2FjdHVhbCBjb21tYW5kIHRoYXQgd2lsbCBiZSBl
eGVjdXRlZCAoaW5jbHVkaW5nIGV4cGFuZGVkIGFsaWFzZXMpIGlzDQorcGFz
c2VkIGluIHR3byBkaWZmZXJudCBmb3JtczogdGhlIHNlY29uZCBhcmd1bWVu
dCBpcyBhIHNpbmdsZS1saW5lLA0KK3NpemUtbGltaXRlZCB2ZXJzaW9uIG9m
IHRoZSBjb21tYW5kICh3aXRoIHRoaW5ncyBsaWtlIGZ1bmN0aW9uIGJvZGll
cw0KK2VsaWRlZCk7IHRoZSB0aGlyZCBhcmd1bWVudCBjb250YWlucyB0aGUg
ZnVsbCB0ZXh0IHdoYXQgd2hhdCBpcyBiZWluZw0KK2V4ZWN1dGVkLg0KICkN
CiBpdGVtKHR0KFRSQVApdmFyKE5BTCkpKA0KIGNpbmRleChzaWduYWxzLCB0
cmFwcGluZykNCkluZGV4OiBTcmMvaW5pdC5jDQpAQCAtMTM1LDE1ICsxMzUs
MjMgQEANCiAJICAgIGlmICh0b3BsZXZlbCAmJiAocHJlcHJvZyA9IGdldHNo
ZnVuYygicHJlZXhlYyIpKSAhPSAmZHVtbXlfZXByb2cpIHsNCiAJCUxpbmtM
aXN0IGFyZ3M7DQogCQlpbnQgb3NjID0gc2Zjb250ZXh0Ow0KKwkJY2hhciAq
Y21kc3RyOw0KIA0KIAkJYXJncyA9IHpuZXdsaW5rbGlzdCgpOw0KIAkJemFk
ZGxpbmtub2RlKGFyZ3MsICJwcmVleGVjIik7DQotCQlpZiAoaGlzdF9yaW5n
KQ0KKwkJLyogSWYgY3VybGluZSBnb3QgZHVtcGVkIGZyb20gdGhlIGhpc3Rv
cnksIHdlIGRvbid0IGtub3cNCisJCSAqIHdoYXQgdGhlIHVzZXIgdHlwZWQu
ICovDQorCQlpZiAoaGlzdF9yaW5nICYmIGN1cmxpbmUuaGlzdG51bSA9PSBj
dXJoaXN0KQ0KIAkJICAgIHphZGRsaW5rbm9kZShhcmdzLCBoaXN0X3Jpbmct
PnRleHQpOw0KKwkJZWxzZQ0KKwkJICAgIHphZGRsaW5rbm9kZShhcmdzLCAi
Iik7DQorCQl6YWRkbGlua25vZGUoYXJncywgZ2V0am9idGV4dChwcm9nLCBO
VUxMKSk7DQorCQl6YWRkbGlua25vZGUoYXJncywgY21kc3RyID0gZ2V0cGVy
bXRleHQocHJvZywgTlVMTCkpOw0KIA0KIAkJc2Zjb250ZXh0ID0gU0ZDX0hP
T0s7DQogCQlkb3NoZnVuYygicHJlZXhlYyIsIHByZXByb2csIGFyZ3MsIDAs
IDEpOw0KIAkJc2Zjb250ZXh0ID0gb3NjOw0KKwkJenNmcmVlKGNtZHN0cik7
DQogCQlmcmVlbGlua2xpc3QoYXJncywgKEZyZWVGdW5jKSBOVUxMKTsNCiAJ
CWVycmZsYWcgPSAwOw0KIAkgICAgfQ0K
---1463796991-1967605654-986927142=:7600--


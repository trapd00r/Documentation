From zsh-workers-request@math.gatech.edu Sat Feb 21 17:27:40 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 18499 invoked from network); 21 Feb 1998 17:27:38 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 21 Feb 1998 17:27:38 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id MAA23714;
	Sat, 21 Feb 1998 12:07:36 -0500 (EST)
Resent-Date: Sat, 21 Feb 1998 12:07:36 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980221090920.ZM8254@candle.brasslantern.com>
Date: Sat, 21 Feb 1998 09:09:20 -0800
In-Reply-To: <199802211000.LAA23094@sgi.ifh.de>
Comments: In reply to Peter Stephenson <pws@ifh.de>
        "Re: PATCH: expand-or-complete-prefix" (Feb 21, 11:00am)
References: <199802211000.LAA23094@sgi.ifh.de>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Peter Stephenson <pws@ifh.de>,
        zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: PATCH: expand-or-complete-prefix
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"rSGBx1.0.Qo5.Ndmxq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3778
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Feb 21, 11:00am, Peter Stephenson wrote:
} Subject: Re: PATCH: expand-or-complete-prefix
}
} "Bart Schaefer" wrote:
} > I've just been testing this, and it breaks on menu completion:
} > 
} > zagzig% bindkey '\t' expand-or-complete-prefix 
} > zagzig% setopt menucomplete 
} > zagzig% ls zlc
} >              ^ with cursor here, press TAB, and you get
} > zagzig% ls zle_bindings.oc
} >                          ^ press TAB again
} > zagzig% ls zle_hist.oc
} >                      ^ press TAB again
} > zagzig% ls zle_hist.proc
} >                        ^ and so forth
} 
} Is that really a bug?  The prefix is 'zl', and that's what you're
} completing

Oh, of course; silly me.  I was misled by (with-out- menucomplete):

zagzig% ls zlc
             ^ with cursor here, press TAB, and you get
zagzig% ls zle_c
               ^ press h then TAB again
zagzig% ls zle_hist.c

But the reason it stopped there is because "zle_hist." is an ambiguous
completion (a prefix of both zle_hist.o and zle_hist.pro), not because
it matched the file zle_hist.c, which is what I thought caused it to
stop.

So you're right, there's no bug there.

Although I do notice one thing:

zagzig% zlc
          ^ with cursor here, press TAB, and I get
zagzig% zless c
             ^ note space before cursor

But in this case:

zagzig% zc
zagzig% zcatc
            ^ note no space
zagzig% zdumpc
zagzig% zlessc

I realize that's an artifact of the way a unique completion works, so I'm
not prepared to suggest changing it yet, but it's not like e.g. bash:

zagzig% bash -f
[schaefer@zagzig zsh-3.0.5-build]$ zlc
                                     ^
[schaefer@zagzig zsh-3.0.5-build]$ zlessc
                                        ^
[schaefer@zagzig zsh-3.0.5-build]$ zl
                                     ^
[schaefer@zagzig zsh-3.0.5-build]$ zless 
                                         ^
                                     Space inserted only if at end of line

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


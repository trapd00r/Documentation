From zsh-workers-return-21879-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 16 07:53:18 2005
Return-Path: <zsh-workers-return-21879-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4088 invoked from network); 16 Oct 2005 07:53:08 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?zVvuxALms7ThrHb/TGM+mHRKZcKLrJZZ?@203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 16 Oct 2005 07:53:08 -0000
Received: (qmail 23696 invoked from network); 16 Oct 2005 00:24:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by proxy.melb.primenet.com.au with SMTP; 16 Oct 2005 00:24:23 -0000
Received: (qmail 1673 invoked from network); 16 Oct 2005 00:23:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Oct 2005 00:23:17 -0000
Received: (qmail 16915 invoked by alias); 16 Oct 2005 00:23:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21879
Received: (qmail 16901 invoked from network); 16 Oct 2005 00:23:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 16 Oct 2005 00:23:07 -0000
Received: (qmail 1379 invoked from network); 16 Oct 2005 00:23:07 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 16 Oct 2005 00:23:06 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0IOF0000CFQ6T7Z0@vms042.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sat, 15 Oct 2005 19:22:55 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j9G0MrQ0023497;
 Sat, 15 Oct 2005 17:22:53 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j9G0Mr1w023496; Sat, 15 Oct 2005 17:22:53 -0700
Date: Sun, 16 Oct 2005 00:22:52 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: PATCH: Re: Superfluous CRs trouble completion routines in Cygwin
In-reply-to: <1051015180240.ZM22900@candle.brasslantern.com>
To: zsh-workers@sunsite.dk, Hannu Koivisto <azure@iki.fi>
Message-id: <1051016002252.ZM23495@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <87irvzys44.fsf@trews52.bothi.fi>
	<1051015180240.ZM22900@candle.brasslantern.com>
Comments: In reply to Bart Schaefer <schaefer@brasslantern.com>
 "Re: Superfluous CRs trouble completion routines in Cygwin" (Oct 15,  6:02pm)
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

[Redirected from -users to -workers]

On Oct 15,  6:02pm, Bart Schaefer wrote:
}
} I think the answer is that $_comp_setup in compinit should contain
} 
} 	local IFS=$'\r'"$IFS"

Upon further thought I believe it should instead set IFS to exactly
the expected string, rather than pulling in the IFS setting from the
surrounding environment.

Hence:


Index: Completion/compinit
===================================================================
diff -c -r1.9 compinit
--- Completion/compinit	24 Sep 2005 17:48:33 -0000	1.9
+++ Completion/compinit	16 Oct 2005 00:14:11 -0000
@@ -156,6 +156,7 @@
 # and don't get confused by user's ZERR trap handlers.
 
 _comp_setup='setopt localoptions localtraps ${_comp_options[@]};
+             local IFS=$'\'\ \\t\\r\\n\\0\''
              exec </dev/null;
              trap - ZERR'
 


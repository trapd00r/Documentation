From zsh-users-return-11006-mason-zsh=primenet.com.au@sunsite.dk Sat Nov 18 00:33:38 2006
Return-Path: <zsh-users-return-11006-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29611 invoked from network); 18 Nov 2006 00:33:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO,HTML_MESSAGE,INFO_TLD autolearn=no version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Nov 2006 00:33:33 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 9457 invoked from network); 18 Nov 2006 00:33:26 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Nov 2006 00:33:26 -0000
Received: (qmail 26101 invoked by alias); 18 Nov 2006 00:33:16 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11006
Received: (qmail 26091 invoked from network); 18 Nov 2006 00:33:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Nov 2006 00:33:15 -0000
Received: (qmail 8180 invoked from network); 18 Nov 2006 00:33:15 -0000
Received: from nf-out-0910.google.com (64.233.182.186)
  by a.mx.sunsite.dk with SMTP; 18 Nov 2006 00:33:12 -0000
Received: by nf-out-0910.google.com with SMTP id m19so743707nfc
        for <zsh-users@sunsite.dk>; Fri, 17 Nov 2006 16:33:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jPvcZ7Y8ans5RJ8ciwMO6nlxqHD+Hu4PmIRp1A1j5e7kPRTl6+lt9wjnJ8Ozpfk3ERXZP4B9O6N3FyxNH+uD2fU7Ojsjs/mWEfHKSQ4UaleLVWYmVQNbaWVwh63re0F5+LWtUNX0Blm6v/sdCXg+u9zO7s2R1PWoGeyYl48InRM=
Received: by 10.78.157.8 with SMTP id f8mr2521017hue.1163809990993;
        Fri, 17 Nov 2006 16:33:10 -0800 (PST)
Received: by 10.78.81.17 with HTTP; Fri, 17 Nov 2006 16:33:10 -0800 (PST)
Message-ID: <3af8969a0611171633g5975e32bk31a64123060abb96@mail.gmail.com>
Date: Fri, 17 Nov 2006 16:33:10 -0800
From: "Yi Qiang" <yqiang@gmail.com>
To: "William Scott" <wgscott@chemistry.ucsc.edu>, zsh-users@sunsite.dk
Subject: Re: zsh ssh host completion on OS X
In-Reply-To: <3af8969a0611171516x68d57411g515b08c7629945fd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17634_19963982.1163809990828"
References: <3af8969a0611171452gba0107dta8182fbd743920c7@mail.gmail.com>
	 <36738.69.3.145.87.1163804760.squirrel@mail.acg.ucsc.edu>
	 <3af8969a0611171516x68d57411g515b08c7629945fd@mail.gmail.com>

------=_Part_17634_19963982.1163809990828
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok, I quickly ran into the first problem.  I can't seem to prevent X11 from
starting automatically when zsh starts.  According to the docs this should
be the _default_ behavior.  I looked in the shell scripts and can't figure
out why it is not working.

        # {====>}
                export open_apple_x11='skip'

                # Allow a user to over-ride the default behavior by creating
a file
                # with either "export open_apple_x11='skip'" or
                # export open_apple_x11='use'
                if [[ -f ~/.skipxrc ]];then
                source ~/.skipxrc
        fi

                # Now open X11.app only if told to do so and it is not
already running:
                if [[ open_apple_x11 != 'skip'  ]];then
                        already_running_x11=$(ps -wwx | grep -F X11.app |
grep -v grep | head -n 1 |
 awk '{print $1}')
                        if [[  $already_running_x11 -gt 1 ]];then
                                :
                        else
                                command open -a X11
                                if [[ $? != 0 ]];then
                                        print ""
                                        print "Unable to open Apple's X11.
Is it installed?"
                                fi
                        fi

For some reason...it's jumping into that if statement.  I am not familiar
with shell scripting so I don't know why.

Yi

On 11/17/06, Yi Qiang <yqiang@gmail.com> wrote:
>
>
>
> On 11/17/06, William Scott <wgscott@chemistry.ucsc.edu> wrote:
> >
> > Wataru Kagawa wrote a really cool OSX-specific and customizable user and
> > host completion for OS X.
> >
> > http://murl.info/15313
>
>
> Wow!  I am very impressed.  Awesome stuff, thanks for the link!
>
> Cheers,
> Yi
>
> Yi Qiang wrote:
> > > Hi,
> > > I've always loved the ssh host completion feature in zsh I found on
> > some
> > > website.  I have this in my .zshrc:
> > >
> > >      61 # complete ssh hosts
> > >      62 local _myhosts
> > >      63 _myhosts=(
> > ${${${${(f)"$(<$HOME/.ssh/known_hosts)"}:#[0-9]*}%%\
> > > *}%%,*} )
> > >      64 zstyle ':completion:*' hosts $_myhosts
> > >
> > > It seems to work fine on my linux box, but on OSX hitting tab doesn't
> > do
> > > anything.
> > >
> > > zsh 4.2.3 (powerpc-apple-darwin8.0)
> > >
> > >
> > > Any ideas?
> > >
> > > Yi
> > >
> >
> >
>

------=_Part_17634_19963982.1163809990828
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ok, I quickly ran into the first problem.&nbsp; I can't seem to prevent X11=
 from starting automatically when zsh starts.&nbsp; According to the docs t=
his should be the _default_ behavior.&nbsp; I looked in the shell scripts a=
nd can't figure out why it is not working.
<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # {=3D=3D=3D=3D&gt;} <br=
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp; export open_apple_x11=3D'skip'<br>&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; # Allow a user to over-ride the default behavior by creating a =
file<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp; # with either &quot;export open_apple_x11=3D'skip'&=
quot; or
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; # export open_apple_x11=3D'use'<br>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [=
[ -f ~/.skipxrc ]];then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; source ~/.skipxrc&nbsp; <br>&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # Now open=
 X11.app only if told to do so and it is not already running:
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; if [[ open_apple_x11 !=3D 'skip'&nbsp; ]];then<br>&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; already_running_=
x11=3D$(ps -wwx | grep -F X11.app | grep -v grep | head -n 1 |<br>&nbsp;awk=
 '{print $1}')<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp; if [[&nbsp; $already_running_x11 -gt 1 ]];then
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp; command open -a X11<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if [[ $? !=
=3D 0 ]];then<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp; print &quot;&quot;
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp; print &quot;Unable to open Apple's X11.&nbsp; Is it installed=
?&quot;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br>&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fi<br><br>For some reason...it's=
 jumping into that if statement.&nbsp; I am not familiar with shell scripti=
ng so I don't know why.=20
<br><br>Yi<br><br><div><span class=3D"gmail_quote">On 11/17/06, <b class=3D=
"gmail_sendername">Yi Qiang</b> &lt;<a href=3D"mailto:yqiang@gmail.com">yqi=
ang@gmail.com</a>&gt; wrote:</span><blockquote class=3D"gmail_quote" style=
=3D"border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; p=
adding-left: 1ex;">
<br><br><div><span class=3D"q"><span class=3D"gmail_quote">On 11/17/06, <b =
class=3D"gmail_sendername">William Scott</b> &lt;<a href=3D"mailto:wgscott@=
chemistry.ucsc.edu" target=3D"_blank" onclick=3D"return top.js.OpenExtLink(=
window,event,this)">
wgscott@chemistry.ucsc.edu</a>&gt; wrote:</span><blockquote class=3D"gmail_=
quote" style=3D"border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt =
0pt 0.8ex; padding-left: 1ex;">
Wataru Kagawa wrote a really cool OSX-specific and customizable user and<br=
>host completion for OS X.<br><br><a href=3D"http://murl.info/15313" target=
=3D"_blank" onclick=3D"return top.js.OpenExtLink(window,event,this)">http:/=
/murl.info/15313
</a></blockquote></span><div><br>Wow!&nbsp; I am very impressed.&nbsp; Awes=
ome stuff, thanks for the link!
<br><br>Cheers,<br><span class=3D"sg">Yi <br></span></div><span class=3D"q"=
><br><blockquote class=3D"gmail_quote" style=3D"border-left: 1px solid rgb(=
204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">Yi Qiang wro=
te:
<br>&gt; Hi,<br>&gt; I've always loved the ssh host completion feature in z=
sh I found on some
<br>&gt; website.&nbsp;&nbsp;I have this in my .zshrc:<br>&gt;<br>&gt;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;61 # complete ssh hosts<br>&gt;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;62 local _myhosts<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;63 _myhosts=3D( ${${${${(f)&quot;$(&lt;$HOME/.ssh/known_hosts)&quo=
t;}:#[0-9]*}%%\<br>&gt; *}%%,*} )
<br>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;64 zstyle ':completion:*' hosts=
 $_myhosts<br>&gt;<br>&gt; It seems to work fine on my linux box, but on OS=
X hitting tab doesn't do<br>&gt; anything.<br>&gt;<br>&gt; zsh 4.2.3 (power=
pc-apple-darwin8.0)<br>&gt;
<br>&gt;<br>&gt; Any ideas?<br>&gt;<br>&gt; Yi<br>&gt;<br><br></blockquote>=
</span></div><br>

</blockquote></div><br>

------=_Part_17634_19963982.1163809990828--


From zsh-workers-return-9843-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Feb 23 15:43:18 2000
Return-Path: <zsh-workers-return-9843-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 747 invoked from network); 23 Feb 2000 15:43:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Feb 2000 15:43:17 -0000
Received: (qmail 66 invoked by alias); 23 Feb 2000 15:43:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9843
Received: (qmail 55 invoked from network); 23 Feb 2000 15:43:10 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000223154230.ZM11815@candle.brasslantern.com>
Date: Wed, 23 Feb 2000 15:42:30 +0000
In-Reply-To: <200002231046.LAA16578@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: PATCH: Corrected style test in prediction" (Feb 23, 11:46am)
References: <200002231046.LAA16578@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Corrected style test in prediction
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Feb 23, 11:46am, Sven Wischnowsky wrote:
} Subject: Re: PATCH: Corrected style test in prediction
}
} Bart Schaefer wrote:
} 
} > Sven, please confirm ... I'm never sure about the number of trailing colons.
} > 
} > Index: Functions/Zle/predict-on
} > ===================================================================
} > -  elif zstyle -t ":completion:predict::::" list always
} > +  elif zstyle -t ":completion:::predict::" list always
} 
} The number of colons is still correct, but the original context name
} was correct, too. The `predict' was stored in the `function' field of
} the context name, indicating that completion was called from predict.

But in insert-and-predict we have:

	  local crs curcontext="${curcontext}"

          [[ -z "$curcontext" ]] && curcontext=:::
          curcontext="${curcontext#*:}predict:"

which makes the context be :completion:::predict::, with `predict' in
the `command' field.  Surely the two should be the same?  If not, why
not?

} However, the other call to zstyle had a missing colon, the one before
} the (not-given) tag.

Well, that part at least is less confusing now.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


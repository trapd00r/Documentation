From zsh-users-return-14654-mason-zsh=primenet.com.au@zsh.org Wed Dec 16 18:00:02 2009
Return-Path: <zsh-users-return-14654-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26721 invoked by alias); 16 Dec 2009 18:00:02 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14654
Received: (qmail 18570 invoked from network); 16 Dec 2009 17:59:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <200912161759.nBGHxo3q015289@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@zsh.org
Subject: Re: Unable to read history on latest Cygwin
In-reply-to: <733654e30912160754q5e505cabo4a2510b41bf1d892@mail.gmail.com>
References: <1260800369.32429.1350005931@webmail.messagingengine.com> <733654e30912160754q5e505cabo4a2510b41bf1d892@mail.gmail.com>
Comments: In-reply-to Wayne Davison <4wayned@gmail.com>
   message dated "Wed, 16 Dec 2009 07:54:08 -0800."
Date: Wed, 16 Dec 2009 17:59:50 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 16 Dec 2009 17:59:52.0998 (UTC) FILETIME=[9174E460:01CA7E79]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.68.0.133

Wayne Davison wrote:
> As for Peter's idea of using a symlink, do you know if the cygwin folks
> mention if their emulation of a symlink is an atomic operation?  We could
> completely get rid of the temp file (used in the hard-link code) and just
> create a symlink named for the lock file, pointing at (essentially)
> $PID/$HOST (since it doesn't matter if the link is valid, just that it
> exists).  According to various web docs, symlinks are atomic on NFS, so that
> might be a good thing to use in general (replacing the use of link()).

Modulo the Cygwin business (which may still need special handling), that
certainly sounds sensible...I think a lot of software does this anyway.
The only question then is whether to special-case the use of link() if
symlink() happens not to be available---I suppose it's trivial and
there's no good reason not to.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-users-return-8338-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 06 16:13:11 2005
Return-Path: <zsh-users-return-8338-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1524 invoked from network); 6 Jan 2005 16:13:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Jan 2005 16:13:10 -0000
Received: (qmail 71953 invoked from network); 6 Jan 2005 16:13:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Jan 2005 16:13:04 -0000
Received: (qmail 22140 invoked by alias); 6 Jan 2005 16:10:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8338
Received: (qmail 22113 invoked from network); 6 Jan 2005 16:10:55 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Jan 2005 16:10:55 -0000
Received: (qmail 66381 invoked from network); 6 Jan 2005 16:09:55 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 6 Jan 2005 16:09:52 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6e55318c650a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-users@sunsite.dk>;
 Thu, 6 Jan 2005 16:08:33 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 6 Jan 2005 16:11:50 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j06G9oZM029164
	for <zsh-users@sunsite.dk>; Thu, 6 Jan 2005 16:09:50 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j06G9n2E029161
	for <zsh-users@sunsite.dk>; Thu, 6 Jan 2005 16:09:49 GMT
Message-Id: <200501061609.j06G9n2E029161@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk (Zsh users list)
Subject: Tip of the day: some glob selectors
Date: Thu, 06 Jan 2005 16:09:48 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 06 Jan 2005 16:11:50.0337 (UTC) FILETIME=[6DDE9310:01C4F40A]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Oliver wrote a section for the book on how to use the "e" glob
qualifier which made me think of some other uses.

Often I want to select a whole set of files that are newer than a given
file, for example to back up files changed since the last backup.
Here's a function to do that:

nt() {
  if [[ -n $1 ]]; then
    local NTREF=${~1}
  fi
  [[ $REPLY -nt $NTREF ]]
}

You use it as follows:

NTREF=/reference/file
ls -l *(e:nt:)

This lists all the files in the current directory newer than the
reference file.

You can also specify the reference file inline; note quotes:

ls -l *(e:'nt ~/.zshenv':)


Another use is a quick way of turning the path to a file in Cygwin into
Cygwin notation, for passing as the argument to a Windows command:

cyg() {
  reply=("$(cygpath -w $REPLY)")
}

Now

explorer ~(e:cyg:)

is enough to convert ~ to the Cygwin form.


I wonder if it's a useful addition to allow

ls -l *(+nt)
explorer ~(+cyg)

as a shorthand?  The + would swallow up, say, all characters that can
appear in an identifier (alphanumerics plus underscore) and save it as
the command.  This would mean you could even chain them: *(+nt+cyg).
With arguments you're stuck with the long syntax, however.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


From zsh-users-return-2394-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jun 17 15:33:22 1999
Return-Path: <zsh-users-return-2394-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22414 invoked from network); 17 Jun 1999 15:33:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Jun 1999 15:33:21 -0000
Received: (qmail 14244 invoked by alias); 17 Jun 1999 15:32:49 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2394
Received: (qmail 14237 invoked from network); 17 Jun 1999 15:32:47 -0000
X-Authentication-Warning: ihp-pc7.ethz.ch: grimm owned process doing -bs
Date: Thu, 17 Jun 1999 17:32:41 +0200 (CEST)
From: Oliver Grimm <grimm@particle.phys.ethz.ch>
X-Sender: grimm@ihp-pc7.ethz.ch
To: zsh-users@sunsite.auc.dk
Subject: Re: PROMPT
In-Reply-To: <990616154246.ZM1576@candle.brasslantern.com>
Message-ID: <Pine.LNX.4.10.9906171727180.11755-100000@ihp-pc7.ethz.ch>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE



Sorry, I meant to write that PROMPT=3DHallo does not work - forget the
equal sign in my first mail.

I am not using RedHat, but Suse Linux 6.1. But I figured out the problem
now:

The /etc/zshrc file sources /etc/profile, which contains the following:

if test -z "$EMACS" ; then
    if   [ -n "$ZSH_VERSION" ]; then
        precmd ()
        {
            if test "$UID" =3D 0; then
                PS1=3D"%m:`pwd -r` # "
            else
                PS1=3D"%n@%m:`pwd -r` > "
            fi
        }
    fi
fi

Uncommenting the second PS1=3D... lines solved the problem. I assume that
this defines a function that is called every time anything is executed
by the shell, and so also make a change of PROMPT impossible.

I wonder if this was intended by the designer of the profile ?

Cheers, Oliver.

> } I do have a strange problem with the PROMPT variable, persisting since
> } some time. After upgrading to Linux 6.1, the command
> } 'PROMPT  Hallo' does not change the prompt anymore.
> }=20
> } Now, the version of zsh is 3.0 (dated 26 June 1996), but it seems
> } that it's not the fault of zsh, since on a different machine with the
> } same version of zsh (but not under Linux but Solaris Unix), this
> } does work properly.
>=20
> Did you recompile zsh after installing the new OS, or are you still
> running the old binary?  I've had a number of strange problems when
> running older Linux binaries on my upgraded OS, including things like
> some of the libc string functions not working correctly -- neither the
> "par" paragraph-formatting package nor the old zmail beta that I'd been
> using as my mailer could parse text properly any more, and the slightly
> newer version of zmail that I'm using now is unable to get the correct
> timezone (you may note that my Date: headers say +0000, though they do
> contain the GMT it would be if I were instantly teleported to England).
>=20
> If `Linux 6.1' really does mean RedHat, you should install the zsh-3.0.5
> RPM (and then carefully consider deleting the /etc/z* files) and let us
> know if the problem persists.
>=20
> --=20
> Bart Schaefer                                 Brass Lantern Enterprises
> http://www.well.com/user/barts              http://www.brasslantern.com
>=20

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
Oliver Grimm=09=09=09   EMail: grimm@particle.phys.ethz.ch
ETH Z=DCrich=09=09=09   Telephone: ++41 - (0)1 - 633 65 01
Labor f=DCr Hochenergiephysik=09   Facsimile: ++41 - (0)1 - 633 11 04
CH-8093 Z=DCrich


From zsh-workers-request@math.gatech.edu Mon Nov 16 09:42:59 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23922 invoked from network); 16 Nov 1998 09:42:58 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 16 Nov 1998 09:42:58 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id EAA11476;
	Mon, 16 Nov 1998 04:29:53 -0500 (EST)
Resent-Date: Mon, 16 Nov 1998 04:29:53 -0500 (EST)
Date: Mon, 16 Nov 1998 10:28:01 +0100 (MET)
Message-Id: <199811160928.KAA10354@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@math.gatech.edu
In-reply-to: Phil Pennock's message of Fri, 13 Nov 1998 21:19:08 +0000 (GMT)
Subject: Re:  bug 3.1.5 symlinks & cd
Resent-Message-ID: <"jLpUV.0.Fp2.H2_Js"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4647
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Phil Pennock wrote:

> 
> Using a stock zsh-3.1.5, there seems to be some problem with completion
> using one interpretation of a directory tree with symlinks, and cd using
> another.  (Linux 2.0.x on x86.)
> 
> % zsh-3.1.5 -f
> machinename% PS1='%~%# '
> ~% mkdir tmp/tst && cd tmp/tst
> ~/tmp/tst% mkdir foo foo/bar wibble
> ~/tmp/tst% ln -s foo/bar .
> ~/tmp/tst% cd bar
> ~/tmp/tst/bar% 
> 
> At this points, try tab-completing "cd ../" and you get "../bar", try
> ../w<tab> and it beeps.  Try "../../w<tab>" and you get the wibble
> directory completed, but:
> 
> ~/tmp/tst/bar% cd ../../wibble
> cd: no such file or directory: ../../wibble
> ~/tmp/tst/bar% cd ../wibble
> ~/tmp/tst/wibble% compctl -L cd
> compctl: no compctl defined for cd
> 
> Note that the ../wibble refuses to tab-complete.

Damn. Currently I see no simple solution for this. It looks as if we
would need a compctl flag for completing paths with special sym-link
handling just for `cd' and friends which seem to be the only builtins
that use CHASESYMLINKS for their arguments.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


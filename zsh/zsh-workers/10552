From zsh-workers-return-10552-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 06 16:44:34 2000
Return-Path: <zsh-workers-return-10552-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17056 invoked from network); 6 Apr 2000 16:44:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Apr 2000 16:44:33 -0000
Received: (qmail 25296 invoked by alias); 6 Apr 2000 16:44:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10552
Received: (qmail 25289 invoked from network); 6 Apr 2000 16:44:17 -0000
Subject: Re: Two questions
In-Reply-To: <1000406155640.ZM16497@candle.brasslantern.com> from Bart Schaefer
 at "Apr 6, 2000 03:56:40 pm"
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Date: Thu, 6 Apr 2000 17:44:11 +0100 (BST)
CC: zsh-workers@sunsite.auc.dk
X-Mailer: ELM [version 2.4ME+ PL66 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id: <E12dFO7-0001W8-00@crucigera.fysh.org>
From: Zefram <zefram@fysh.org>

Bart Schaefer wrote:
>(1) I've forgotten where those filenames starting with `!' are used, and
>there's no mention of it in INSTALL or Etc/zsh-development-guide, nor in
>"configure --help" output, nor any of the other obvious places I looked.
>Will somebody who does remember what it means please document it?

Patch below.  I also added a section on the development tools that are
required, to document the version requirement on autoconf.

>(2) Relying on the ability to edit config.status is bad news to begin with.
>There must be some other way to deal with this?

There isn't.  I tried everything more reasonable first; there really is
no better way to handle this problem.

-zefram

Index: ChangeLog
===================================================================
RCS file: /cvsroot/zsh/zsh/ChangeLog,v
retrieving revision 1.26
diff -c -r1.26 ChangeLog
*** ChangeLog	2000/04/06 12:46:29	1.26
--- ChangeLog	2000/04/06 16:38:53
***************
*** 1,3 ****
--- 1,9 ----
+ 2000-04-06  Andrew Main  <zefram@zsh.org>
+ 
+ 	* zefram1: configure.in, Etc/zsh-development-guide: List of tools
+ 	required for development work, and a little more conspicuous
+ 	explanation of the config.status hack.
+ 
  2000-04-06  Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
  
  	* 10543: Makefile.in: avoid distcleaning Test twice
Index: configure.in
===================================================================
RCS file: /cvsroot/zsh/zsh/configure.in,v
retrieving revision 1.1.1.65
diff -c -r1.1.1.65 configure.in
*** configure.in	2000/03/25 18:04:48	1.1.1.65
--- configure.in	2000/04/06 16:38:58
***************
*** 1607,1613 ****
  [test -z "$CONFIG_HEADERS" || echo > stamp-h])
  
  dnl The standard config.status is missing some essential features.
! dnl So add them now.
  [rm -f $CONFIG_STATUS.old
  cp $CONFIG_STATUS $CONFIG_STATUS.old
  sed '1,$s@^\( *ac_file_inputs=\).*$@\1`echo $ac_file_in | sed -e "s%^%:%" -e "s%:\\([^!]\\)% $ac_given_srcdir/\\1%g" -e "s%:!% %"`@' \
--- 1607,1613 ----
  [test -z "$CONFIG_HEADERS" || echo > stamp-h])
  
  dnl The standard config.status is missing some essential features.
! dnl So add them now.  See the comment at the end of Src/mkmakemod.sh.
  [rm -f $CONFIG_STATUS.old
  cp $CONFIG_STATUS $CONFIG_STATUS.old
  sed '1,$s@^\( *ac_file_inputs=\).*$@\1`echo $ac_file_in | sed -e "s%^%:%" -e "s%:\\([^!]\\)% $ac_given_srcdir/\\1%g" -e "s%:!% %"`@' \
Index: Etc/zsh-development-guide
===================================================================
RCS file: /cvsroot/zsh/zsh/Etc/zsh-development-guide,v
retrieving revision 1.1.1.10
diff -c -r1.1.1.10 zsh-development-guide
*** Etc/zsh-development-guide	1999/12/16 14:26:28	1.1.1.10
--- Etc/zsh-development-guide	2000/04/06 16:39:05
***************
*** 12,17 ****
--- 12,34 ----
  are very simple and hopefully should make for a more orderly development
  of zsh.
  
+ Tools
+ -----
+ 
+ To develop (as opposed to just build) zsh, you'll need a few specialised
+ tools:
+ 
+ * GNU autoconf, version 2.12 or later.  (Earlier versions mostly work,
+   but part of the configuration system now relies on part of the format
+   of the config.status files that get generated.  See the comments in
+   configure.in and at the end of Src/mkmakemod.sh for an explanation.)
+ 
+ * GNU m4.  (Required by autoconf.)
+ 
+ * yodl.
+ 
+ * texi2html.
+ 
  Patches
  -------
  
END


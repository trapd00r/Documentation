From zsh-workers-return-15906-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 30 01:34:23 2001
Return-Path: <zsh-workers-return-15906-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15099 invoked from network); 30 Sep 2001 01:34:22 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Sep 2001 01:34:22 -0000
Received: (qmail 17391 invoked by alias); 30 Sep 2001 01:34:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15906
Received: (qmail 17380 invoked from network); 30 Sep 2001 01:34:16 -0000
Date: Sat, 29 Sep 2001 21:34:05 -0400
From: lordzork@lordzork.com
To: zsh-workers@sunsite.dk
Subject: Re: error on TTY read: no such file or directory
Message-ID: <20010929213405.L16561@hithaeglir.net>
Reply-To: lordzork@lordzork.com
References: <20010929034953.E16561@hithaeglir.net> <3BB62E93.10802@mow.siemens.ru> <20010929170811.G16561@hithaeglir.net> <3BB63D16.5040709@mow.siemens.ru> <20010929173848.H16561@hithaeglir.net> <3BB64378.8060505@mow.siemens.ru> <20010929181100.I16561@hithaeglir.net> <1010929223918.ZM20169@candle.brasslantern.com> <20010929202423.K16561@hithaeglir.net> <1010930012412.ZM20346@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1010930012412.ZM20346@candle.brasslantern.com>
Organization: lordzork industries
X-GPG-Key-ID: 1024D/EE946A6E
X-GPG-Key-Fingerprint: E27C 03D8 A1B6 F7C5 2B92  58A9 4BEA 926A EE94 6A6E
X-GPG-Public-Key: http://lordzork.com/tmk.pub.asc
X-Mailer: CHIKKEN MAIL 0.80 BETA (CHIKKEN)
X-Originating-IP: [127.0.0.1]
X-Midgets: too tall

In the gothic chambers of the underworld on Sat 29 Sep 2001 at 21:24 -0400,
Bart Schaefer muttered darkly:

> It's a system call (that's why it shows up in strace output).
> 
> As a workaround you can try changing
> 
> 	    if (r == 1)
> 		break;
> 
> to
> 
> 	    if (r > 0)
> 		break;
> 
> at line 407 of Src/Zle/zle_main.c; but if the wrong number of bytes may
> be returned by read(), all sorts of other things are going to break (not
> just in zsh), so you shouldn't leave it at that.  You may have to take
> this up on a linux kernel list.
> 

i don't see how it can be the kernel, though. i've tried three different
kernel versions (2.4.7, 2.4.9, 2.4.10) and the problem remains with all
of them. furthermore, i've got virtually the exact setup duplicated on
two other boxes, with the same kernel versions. zsh works fine on both
boxes.

t. 

-- 
4.0k -rw-rw-r--    1 zork     zork       17 Apr 4 17:38 .signature


From zsh-workers-request@math.gatech.edu Wed Nov 04 16:30:55 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25847 invoked from network); 4 Nov 1998 16:30:53 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 4 Nov 1998 16:30:53 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id LAA23591;
	Wed, 4 Nov 1998 11:23:33 -0500 (EST)
Resent-Date: Wed, 4 Nov 1998 11:23:33 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <981104082150.ZM20973@candle.brasslantern.com>
Date: Wed, 4 Nov 1998 08:21:50 -0800
In-Reply-To: <19981104124433.A9660@petzval.math.fu-berlin.de>
Comments: In reply to Stucki <stucki@petzval.math.fu-berlin.de>
        "Strange prompting in new 3.1.5" (Nov  4, 12:44pm)
References: <19981104124433.A9660@petzval.math.fu-berlin.de> 
	<vb1znju0kf.fsf@snake.isode.com> 
	<9811041226.AA32302@ibmth.df.unipi.it>
In-Reply-To: <vb1znju0kf.fsf@snake.isode.com>
Comments: In reply to Bruce Stephens <b.stephens@isode.com>
        "Re: Strange prompting in new 3.1.5" (Nov  4, 12:03pm)
In-Reply-To: <9811041226.AA32302@ibmth.df.unipi.it>
Comments: In reply to Peter Stephenson <pws@ibmth.df.unipi.it>
        "PATCH: Re: Strange prompting in new 3.1.5" (Nov  4,  1:26pm)
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@math.gatech.edu
Subject: Re: Strange prompting in new 3.1.5
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"ABG883.0.Xm5.4-7Gs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4536
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Nov 4, 12:44pm, Stucki wrote:
} Subject: Strange prompting in new 3.1.5
}
} I installed the new Version 3.1.5 and since then my
} (unchanged) 'prompt' always showed '~PWD' where '%~'
} is expanded.

This changed because PWD was "special" before 3.1.5, but became an
ordinary parameter in 3.1.5.  When it was "special" it never got
added to the named directory hash table.

On Nov 4,  1:26pm, Peter Stephenson wrote:
} Subject: PATCH: Re: Strange prompting in new 3.1.5
}
} "Zefram" wrote:
} > Basically, AUTO_NAME_DIRS is a really bad idea if you want to do
} > %~ expansion.  Think about it: ~PWD is always a correct name for the
} > directory you're in.  It's just not useful.  Even if we make an exception
} > for PWD, there's nothing stopping other parameters being equally unhelpful
} > (OLDPWD, and anything the user uses in the chpwd function).
} 
} But %~ doesn't use OLDPWD and users can make arrangments for their own
} variables, whereas PWD is set by the shell and it's up to the shell to
} make it useful.  I don't think it's good enough simply saying %~ and
} autonamedirs are incompatible; that's the shell's fault, not the
} user's.

I have to agree with Peter here.  The shell shouldn't be screwing up its
own features.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-12139-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 03 10:48:03 2000
Return-Path: <zsh-workers-return-12139-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25381 invoked from network); 3 Jul 2000 10:48:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Jul 2000 10:48:02 -0000
Received: (qmail 8503 invoked by alias); 3 Jul 2000 10:47:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12139
Received: (qmail 8496 invoked from network); 3 Jul 2000 10:47:52 -0000
Date: Mon, 03 Jul 2000 11:47:24 +0100
From: Peter Stephenson <pws@cambridgesiliconradio.com>
Subject: 3.1.9-dev-2
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FX40043PBB0W3@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

I have uploaded 3.1.9-dev-2 to ftp://ftp.zsh.org/pub/development.  Once
again, this is mostly bug fixes, plus a few tweaks for styles in the
completion mechanism (suffix, fake, menu), plus a new option to the read
builtin, -t, which returns false and doesn't set anything if there is no
pending input.

I'd really like to have a read with timeout along the same lines (e.g. -T
timeout_in_milliseconds).  Doing this for all platforms, particularly with
timeouts of less than a second, is difficult:  in read_poll(), I had to do
a non-blocking read as a final test.

2000-07-03  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* Config/version.mk: 3.1.9-dev-2.

	* 12138: Src/params.c, Test/06arith.ztst: setting of array
	elements in math context didn't work (ever). 

	* 12121: Src/utils.c, Doc/Zsh/options.yo: save and restore stopmsg
	for precmd, fix #ifdef's for variable declaration in read_poll().

2000-07-03  Sven Wischnowsky  <wischnow@zsh.org>

	* 12134: Completion/Core/_main_complete, Doc/Zsh/compsys.yo,
 	Doc/Zsh/mod_complist.yo, Src/Zle/comp.h, Src/Zle/compcore.c,
 	Src/Zle/complist.c: change format style with warnings tag, don't
 	add descriptions as matches; make a-a-i-n-h in menu selection work
 	even without matches
	
2000-07-02  Bart Schaefer  <schaefer@zsh.org>

	* 12133: Completion/Core/_expand, Completion/Core/_path_files:
	Discard error output from parameter expansions and use "eval" to
	protect the completion system from parse errors and other garbage
	in the strings taken from the command line.

2000-06-29  Sven Wischnowsky  <wischnow@zsh.org>

	* 12125: Src/parse.c, Test/09funcdef.ztst: fix for `foo () print
 	bar' (function definitions without braces)
	
	* 12122: Completion/Core/_main_complete: reverse meaning of yes=num
 	again

	* 12119: Completion/Core/_complete, Completion/Core/_normal: try
 	to return the right value
	
	* 12118: Completion/Core/_expand: don't expand partially typed
 	parameter expansions
	
	* 12115: Completion/Core/_expand, Doc/Zsh/compsys.yo: change
 	suffix style to still do expansion if the suffix contains
 	something to expand
	
	* 12114: Completion/Core/_main_complete, Doc/Zsh/compsys.yo: even
 	more fun with the menu style (no=num, yes=long-list, reverse
 	meaning of yes=num)
	
	* 12113: Completion/Core/_expand, Src/Zle/zle_tricky.c: quote
 	brace-strings
	
2000-06-28  Bart Schaefer  <schaefer@zsh.org>

	* 12112: Src/params.c: Don't make namedirs out of hash elements.

2000-06-28  Sven Wischnowsky  <wischnow@zsh.org>

	* 12109: Completion/Core/_complete: make _complete return the
 	right value
	
	* 12107: Completion/Core/_setup, Src/Zle/complist.c: fix for
 	list-colors handling
	
	* 12105: Completion/Core/_main_complete: reset _comp_mesg (saying
 	whether there were messages) appropriately
	
	* Jan Fedak: 12097: Completion/Use/_ssh: use _ports when
	completing remote ports

	* Andrej: 12094: Doc/Zsh/compsys.yo: a bit of cleanup

	* 12099: Completion/Core/_oldlist: make _oldlist not use the dummy
 	match added for the warning
	
	* 12093: Src/Zle/compcore.c, Src/Zle/complist.c, Src/Zle/compresult.c:
 	make a-a-i-n-h in menu selection work with one match; better undo
 	behaviour for menu selection
	
2000-06-27  Bart Schaefer  <schaefer@brasslantern.com>

	* 12086: Doc/Zsh/compsys.yo: Move _use_lo doc into alphabetical
	order; separate _files and _path_files for same reason.

2000-06-27  Sven Wischnowsky  <wischnow@zsh.org>

	* users/3219: Completion/Core/_main_complete, Doc/Zsh/compsys.yo:
	menu style accepts yes=x to start menu completion if there are at
	least x matches
	
	* Andrej: 12084: Src/Modules/zpty.c: don't close slave if not yet open

	* 12082: Doc/Zsh/compsys.yo: document _use_lo
	
2000-06-27  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* Andrej: 12081: Src/Modules/zpty.c: compiles under Cygwin, but
	still glitches.

2000-06-26  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* unposted: Src/builtin.c, Src/utils.c: move read_poll to utils.c
	as suggested by Bart.

2000-06-26  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12076: Completion/Core/compinstall: overwrote file if no
	style information; overwrote symbolic link instead of following;
	didn't check file name for sanity.

2000-06-26  Bart Schaefer  <schaefer@zsh.org>

	* 12074: Doc/Zsh/builtins.yo, Doc/Zsh/manual.yo: Remove one more
	reference to compfmt; add missing menu items to node listing.

2000-06-26  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12073: Src/builtin.c, Src/utils.c, Doc/Zsh/builtins.yo: first
	pass at `read -t' which tests for availability of input before
	inputting.

2000-06-26  Sven Wischnowsky  <wischnow@zsh.org>

	* users/3208: Completion/User/_use_lo: default completion even if
	there are options
	
	* 12070: Completion/Core/_ignored: fix for completer lookup in
 	_ignored
	
	* 12068: Doc/Zsh/mod_computil.yo, Src/Zle/computil.c: remove
 	compfmt; a bit of explanation for compfiles and compgroups
	
	* 12067: Completion/Core/_history, Src/Zle/zle_tricky.c: typo in
 	_history; missing free()s in zle_tricky.c
	
	* 12066: Src/Zle/computil.c: missing allocation of list for option
 	arguments
	
2000-06-25  Bart Schaefer  <schaefer@zsh.org>

	* 12063: Doc/Zsh/builtins.yo, Doc/Zsh/compwid.yo,
	Doc/Zsh/mod_computil.yo, Doc/Zsh/mod_zutil.yo: Fix typos; assorted
	clarification and reformatting.

2000-06-23  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12044: Src/builtin.c:  read -A assigned an unnecessary null
	if there was trailing whitespace; careful of distinction between
	whitespace and non-whitespace field separators.

2000-06-23  Sven Wischnowsky  <wischnow@zsh.org>

	* 12041,12043 : Completion/Core/compinit: even more compinit stuff,
 	change prompt, search for insecure parent dirs
	
2000-06-22  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 12040: Src/builtin.c: typeset -r on existing parameter set
	the readonly flag before assigning any value on the same command
	line.

2000-06-22  Bart Schaefer  <schaefer@zsh.org>

	* 12039: Test/comptest: Use "compinit -u" to avoid a possible
	prompt about security of the directories; point ZDOTDIR into
	the temporary test directory for the .zcompdump file.

2000-06-22  Sven Wischnowsky  <wischnow@zsh.org>

	* 12033: Completion/Core/compinit: followup to compinit-security
 	patch
	
	* 12029: Completion/Builtins/_arrays, Completion/Builtins/_zstyle,
 	Completion/Commands/_bash_completions,
 	Completion/Commands/_history_complete_word,
 	Completion/Core/_history, Completion/Core/_main_complete,
 	Completion/Core/_parameters, Completion/Core/_setup,
 	Completion/Core/_tags, Completion/Debian/_apt,
 	Completion/X/_x_extension, Doc/Zsh/compsys.yo, Doc/Zsh/compwid.yo,
 	Src/zsh.h, Src/Zle/compcore.c, Src/Zle/compctl.c,
 	Src/Zle/complist.c, Src/Zle/computil.c: allow subscripts for
 	compadd -[ak]; new style for history completion; better
 	list-colors handling
	
2000-06-22  Clint Adams  <schizo@debian.org>

	* 12027: Completion/User/_mailboxes: fix splitting problem in
	12024, add intelligence for mutt mailboxes in $maildirectory
	not specified in muttrc.

	* 12024: Completion/User/_mailboxes: handle multiple mailboxes
	lines in muttrc.

2000-06-21  Chmouel Boudjnah  <chmouel@mandrakesoft.com>

	* 12019: Completion/User/_ssh: upgrade to the last openssh
	options.

2000-06-21  Sven Wischnowsky  <wischnow@zsh.org>

	* 12011: Completion/Commands/_history_complete_word,
 	Completion/Core/_expand, Completion/Core/_history: make history
 	completion use I{PREF,SUF}FIX
	
2000-06-20  Oliver Kiddle  <opk@zsh.org>

	* unposted: Src/exec.c: AIX dependency fix

2000-06-20  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12000: Functions/Misc/zmv: emulate zsh doesn't unset MARKDIRS,
	so use emulate -R.

2000-06-20  Sven Wischnowsky  <wischnow@zsh.org>

	* 11998: Completion/Builtins/_pids, Completion/Core/compdump,
 	Completion/Core/compinit, Doc/Zsh/compsys.yo: a bit of security
 	for compinit (avoid using things writable by others); avoid
 	handling files with the same name twice; remove compconf
	
2000-06-19  Sven Wischnowsky  <wischnow@zsh.org>

	* 11992: Src/Zle/complist.c: make undo break out of menu selection
 	if nothing to undo inside it
	
	* 11985: Completion/Debian/_dpkg, Doc/Zsh/compsys.yo,
	Src/Zle/computil.c: _arguments: small fix for -s and new `!...' for
	things not to complete (but to understand)
	
	* 11982: Test/comptest: update comptest to not set ZLS_COLORS
 	directly
	
	* 11981: Src/Zle/computil.c: more careful when optimising patterns
 	in compfiles
	
	* 11977: Completion/Core/_options, Completion/Core/_set_options,
 	Completion/Core/_unset_options, Doc/Zsh/compwid.yo,
 	Src/Zle/comp.h, Src/Zle/complete.c, Src/Zle/compmatch.c,
 	Test/54compmatch.ztst: new match spec characters bBeE, match only
 	word/line not both
	
	* 11973: Completion/Builtins/_zstyle, Completion/Core/_description,
 	Completion/Core/_expand, Doc/Zsh/compsys.yo, Src/Zle/zle_tricky.c:
 	allow _expand to expand braces; better detection of braces to
 	complete instead of passing to shell code
	
	* 11971: Completion/Core/_path_files, Doc/Zsh/compsys.yo,
 	Src/Zle/compcore.c, Src/Zle/computil.c: improve filename
 	completion; use accept-exact for in-path completion; new fake style

-- 
Peter Stephenson <pws@cambridgesiliconradio.com>
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


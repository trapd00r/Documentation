From zsh-workers-return-15503-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 26 12:21:59 2001
Return-Path: <zsh-workers-return-15503-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10009 invoked from network); 26 Jul 2001 12:21:58 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jul 2001 12:21:58 -0000
Received: (qmail 24637 invoked by alias); 26 Jul 2001 12:21:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15503
Received: (qmail 24625 invoked from network); 26 Jul 2001 12:21:51 -0000
Sender: kiddleo
Message-ID: <3B600B5E.AE478CC0@u.genie.co.uk>
Date: Thu, 26 Jul 2001 13:21:50 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.76 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: PATCH: posixbuiltins test (was Re: Nasty bug in array-element typeset 
 assignments)
References: <Tc0a88d0154fbb3cdbf@mailsweeper01.cambridgesiliconradio.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Peter Stephenson wrote:
> 
> Something like that would definitely be my preference.

Good; I won't commit the "something like that" just yet though, at least
not before Bart has had a chance to say something on this.

> > Incidentally, I get a couple of test failures with the latest CVS - on
> > with _arguments and the other for posixbuiltins.

> I don't get the one for posixbuiltins --- and there isn't much possibility

Ok, I looked in more detail and the problem was that someone here has
installed some run-mailcap package which includes a `print' command.
This means that `command print foo' is not going to fail with `command
not found'. Clearing the path is the easiest way I can think of to fix
this.

Oliver

Index: Test/E01options.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/E01options.ztst,v
retrieving revision 1.8
diff -u -r1.8 E01options.ztst
--- Test/E01options.ztst     2001/07/09 18:31:25     1.8
+++ Test/E01options.ztst     2001/07/26 12:11:04
@@ -691,10 +691,10 @@
 ?(eval):14: no such file or directory: pathtestdir/findme
 
   setopt posixbuiltins
-  command print foo
+  PATH= command print foo
   unsetopt posixbuiltins
   print unsetting...
-  command print foo
+  PATH= command print foo
 127:POSIX_BUILTINS option
 >foo
 >unsetting...


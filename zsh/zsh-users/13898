From zsh-users-return-13898-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 11 10:49:10 2009
Return-Path: <zsh-users-return-13898-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22329 invoked from network); 11 Mar 2009 10:48:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Mar 2009 10:48:58 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 78203 invoked from network); 11 Mar 2009 10:47:16 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Mar 2009 10:47:16 -0000
Received: (qmail 28938 invoked by alias); 11 Mar 2009 10:46:59 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13898
Received: (qmail 28920 invoked from network); 11 Mar 2009 10:46:58 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Mar 2009 10:46:58 -0000
Received: from incc.be (incc.rocteur.com [65.99.212.71])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 9DB8980307F8
	for <zsh-users@sunsite.dk>; Wed, 11 Mar 2009 11:46:54 +0100 (CET)
Received: by incc.be (Postfix, from userid 1000)
	id ED1DC4033D; Wed, 11 Mar 2009 11:46:15 +0100 (CET)
Received: from webmail.rocteur.com (localhost [127.0.0.1])
	by incc.be (Postfix) with ESMTP id 1E7264003F;
	Wed, 11 Mar 2009 11:46:14 +0100 (CET)
Received: from 153.98.68.197
        (SquirrelMail authenticated user jerry)
        by webmail.rocteur.com with HTTP;
        Wed, 11 Mar 2009 11:46:15 +0100 (CET)
Message-ID: <53641.153.98.68.197.1236768375.squirrel@webmail.rocteur.com>
In-Reply-To: <200903110956.n2B9u8Ip018799@news01.csr.com>
References: <57016.153.98.68.197.1236759758.squirrel@webmail.rocteur.com>
    <200903110956.n2B9u8Ip018799@news01.csr.com>
Date: Wed, 11 Mar 2009 11:46:15 +0100 (CET)
Subject: Re: Strange escaped < > behaviour
From: "Jerry Rocteur" <jerry@incc.be>
To: "Peter Stephenson" <pws@csr.com>,
 godlygeek@gmail.com
Cc: zsh-users@sunsite.dk
User-Agent: SquirrelMail/1.4.9a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Scanned: ClamAV 0.92.1/9089/Wed Mar 11 07:38:14 2009 on bifrost
X-Virus-Status: Clean

> "Jerry Rocteur" wrote:
>> We have a bunch of scripts that work on KSH and PDKSH like this:
>>
>>echo '        ULOGPFX        = "<WORK_DIR>/ULOG"' | sed 's/.*\<\(.*\)\>.*/\1/'
>> WORK_DIR
>>
>> Don't ask me why the escaped the < and > above but the scripts have been like
>>  this for a LONG LONG time!
>>
>> Now with ZSH I get this behaviour
>>
>>echo '        ULOGPFX        = "<WORK_DIR>/ULOG"' | sed 's/.*\<\(.*\)\>.*/\1/'
>> ULOG
>
> (This is basically the same answer as Matt just gave but I'll send it
> anyway since I put in slightly different detail.)
>
> There's nothing in zsh that could possibly make a difference, and in
> bash on my system it gives me ULOG too.  This is because "\<" and "\>"
> in certain versions of sed (in particular GNU) match the start and end
> of a word.  See the "Regex syntax clashes" section in the "Reporting
> bugs" node of the GNU sed manual.
>
> I strongly suspect it's either calling a different version of sed, or
> some environment variable is changing the behaviour.  I can't see any
> environment variable relevant to GNU sed, however:  there's some mention
> of POSIXLY_CORRECT in the manual, but it didn't seem to have an effect
> in this case.
>
> If you want to avoid this generally, you do need to remove the
> backslashes from before the "<" and ">", in which case they are
> guaranteed not to do anything special.

Thanks Peter and Matt!!!

Indeed, I tried it on PDKSH with GNU sed and it works the same as on ZSH and BASH now that I've tested it.

You both hit the nail right on the head!

This has absolutely nothing to do with ZSH. I tested the script on HP UX with ksh and didn't check where sed was
coming from.

You guys know your tools, personally I always use perl even in one liners and it is a long time ago that I played with
sed so it didn't ring a bell.

Thanks again very much,

Jerry


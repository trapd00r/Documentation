From zsh-users-return-6998-mason-zsh=primenet.com.au@sunsite.dk Sun Jan 18 12:15:00 2004
Return-Path: <zsh-users-return-6998-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4027 invoked from network); 18 Jan 2004 12:15:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Jan 2004 12:15:00 -0000
Received: (qmail 14332 invoked by alias); 18 Jan 2004 12:14:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6998
Received: (qmail 14258 invoked from network); 18 Jan 2004 12:14:36 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 18 Jan 2004 12:14:36 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [68.1.17.116] by sunsite.dk (MessageWall 1.0.8) with SMTP; 18 Jan 2004 12:14:35 -0000
Received: from quark.localdomain ([68.12.75.33]) by lakemtao05.cox.net
          (InterMail vM.5.01.06.05 201-253-122-130-105-20030824) with ESMTP
          id <20040118121434.KLSD29834.lakemtao05.cox.net@quark.localdomain>
          for <zsh-users@sunsite.dk>; Sun, 18 Jan 2004 07:14:34 -0500
Received: from quark.localdomain (localhost.localdomain [127.0.0.1])
	by quark.localdomain (8.12.9/8.12.9) with ESMTP id i0ICEguO029257
	for <zsh-users@sunsite.dk>; Sun, 18 Jan 2004 06:14:42 -0600 (CST)
	(envelope-from vince@quark.localdomain)
Received: (from vince@localhost)
	by quark.localdomain (8.12.9/8.12.9/Submit) id i0ICEgMZ029256
	for zsh-users@sunsite.dk; Sun, 18 Jan 2004 06:14:42 -0600 (CST)
Date: Sun, 18 Jan 2004 06:14:42 -0600
From: Vincent <zsh@hightek.org>
To: zsh-users@sunsite.dk
Subject: loading dynamic modules in a static shell
Message-ID: <20040118121441.GA29157@quark.localdomain>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.1i

Hi.

Is it supposed to be possible to compile a static shell with part of
the modules built in and to be able to load the remaining modules with
zmodload?  Having a separate link option for every module in
config.modules gives me the impression that I should be able to create
a mixed configuration, with some static and some dynamic, but I have
not been able to get it to work.  I don't know if there is another way
I am supposed to do it but If I tried setting some with link=dynamic
and some with link=static in config.modules it would not work.  It
only compiled either static or dynamic based on how the ldflags were
set when it was configured with configure.

I compiled zsh-4.0.9 configured with
"configure --enable-ldflags=-static", installed it, then reconfigured
it as shared, did a "make modules" and installed the dynamic modules.
However, when I try loading one of the dynamic modules that are not
statically linked in, such as zftp, it just says
"zsh: failed to load module: zsh/zftp".

I have searched the FAQ, mailing lists, and documentation, but have
not found any information that helps me.

I built a static shell to install in /bin on FreeBSD but did not want
it be so big with every module compiled in.

-- 
Avoid the VeriSign/Network Solutions domain registration trap!
http://www.InetAddresses.net


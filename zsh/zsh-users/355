From zsh-workers-request@euclid.skiles.gatech.edu  Tue Aug 13 04:17:00 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id EAA04470 for <mason@primenet.com.au>; Tue, 13 Aug 1996 04:16:57 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id OAA09702; Mon, 12 Aug 1996 14:04:53 -0400 (EDT)
Resent-Date: Mon, 12 Aug 1996 14:02:59 -0400 (EDT)
Message-Id: <199608121801.OAA11270@sassy.aa.ans.net>
From: Matthew Braun <matthew@ans.net>
Date: Mon, 12 Aug 1996 14:01:43 -0400
X-Mailer: Mail User's Shell (7.2.5 10/14/92)
To: zsh-users@math.gatech.edu
Subject: zsh login shell exits on Control-C
Cc: michael shiplett <walrus@ans.net>
Resent-Message-ID: <"RFq0c.0.bL2.I7t3o"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/355
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I have a problem where when I login to a machine, where my shell is set
to zsh, and I type control-C it closes my connection.  But if I login
and type 'exec zsh', it won't hang up on control-C.

I am using kerberos v.4 to do my remote logins and there appears to be a
signaling problem.  It is definately the kerberos code that is
triggering this bug, because zsh does not behave this way using the
regular Berkeley r-commands or ssh to login.  This problem also happens
with /bin/sh, but not with the other shells, /bin/ksh, /bin/csh, and
/usr/local/bin/tcsh.

It appears to be a difference on how zsh treats signals for login shells
vs. doing a 'exec zsh' once logged in (even if your login sehll is
already zsh).  Although my co-worker, walrus, doesn't see the code path
that would be causing this difference after looking at the source for a
short while.

This happens using zsh-2.5.03 through zsh-3.0-pre6.  Most of my testing
was to and from a Solaris 2.5.1 machine, but the exiting problem with
kerberos/zsh happens going to a BSDI machine as well.

Any ideas?  It would be nice if zsh could be made not to exit in this
case, but we'll also be looking at the kerberos code to see if it can be
fixed there as well.

Thanks for any help,

Matthew.

=====

example:

terminator:~> krsh sassy
This rlogin session is using DES encryption for all data transmissions.

Warning: No Kerberos tickets obtained.

Sun Microsystems Inc.   SunOS 5.5.1     Generic May 1996

You have new mail.

sassy:~> <Control-C pressed>Connection closed.
terminator:~> 


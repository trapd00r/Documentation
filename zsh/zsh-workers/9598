From zsh-workers-return-9598-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 07 09:56:30 2000
Return-Path: <zsh-workers-return-9598-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13737 invoked from network); 7 Feb 2000 09:56:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Feb 2000 09:56:29 -0000
Received: (qmail 10345 invoked by alias); 7 Feb 2000 09:56:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9598
Received: (qmail 10337 invoked from network); 7 Feb 2000 09:56:20 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>,
        "Zsh hackers list" <zsh-workers@sunsite.auc.dk>
Subject: RE: Makefile target given more than once (Re: 3.1.6-dev-17)
Date: Mon, 7 Feb 2000 12:56:13 +0300
Message-ID: <NCBBLINKDKKLMKDJFLMCMEIJCBAA.Andrej.Borsenkow@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-reply-To: <1000207080634.ZM8445@candle.brasslantern.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700

> } > Hrm.  This would appear to be gmake cleverly discovering that
> when $(sdir)
> } > is ".", zsh.texi and $(sdir)/zsh.texi are the same target.
> }
> } So far it is just noise. But why we need two targets? One is obviously
> } redundant.
>
> No, that's not true.
>
> The $(sdir)/zsh.texi target is used in dependencies elsewhere in the
> Makefile.
>
> The zsh.texi target is for (cd Doc; make zsh.texi) which is executed by
> the top-level Makefile and also may be typed by a user.
>

Here I'm confused. Top-level Makefile never does (cd Doc; make zsh.texi); it
does all, install, clean ... but never subdir-specific targets.

So, we need zsh.texi in source dir to include it with distribution (for
users without yodl). Right?

I suggest to use placeholder like texi, dvi, html etc as main targets and
make them depend on actual files. Like

all: man texi

man: $(MAN)

texi: $(sdir)/zsh.texi

That is what e.g. bash does.

/andrej


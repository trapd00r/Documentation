From zsh-workers-return-20884-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 28 10:41:52 2005
Return-Path: <zsh-workers-return-20884-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 420 invoked from network); 28 Feb 2005 10:41:51 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Feb 2005 10:41:51 -0000
Received: (qmail 65309 invoked from network); 28 Feb 2005 10:41:45 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Feb 2005 10:41:45 -0000
Received: (qmail 15884 invoked by alias); 28 Feb 2005 10:41:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20884
Received: (qmail 15870 invoked from network); 28 Feb 2005 10:41:40 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Feb 2005 10:41:40 -0000
Received: (qmail 65046 invoked from network); 28 Feb 2005 10:41:40 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 28 Feb 2005 10:41:36 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by 
    MAILSWEEPER01.csr.com (Content Technologies SMTPRS 4.3.12) with ESMTP id 
    <T6f64f5e0d00a6c8d018f0@MAILSWEEPER01.csr.com> for 
    <zsh-workers@sunsite.dk>; Mon, 28 Feb 2005 10:40:05 +0000
Received: from EXCHANGE02.csr.com ([10.100.137.45]) by exchange03.csr.com 
    with Microsoft SMTPSVC (5.0.2195.6713); Mon, 28 Feb 2005 10:42:43 +0000
Received: from tinky-winky ([10.102.144.127]) by EXCHANGE02.csr.com with 
    Microsoft SMTPSVC (5.0.2195.6713); Mon, 28 Feb 2005 10:42:42 +0000
Date: Mon, 28 Feb 2005 10:41:34 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: [PATCH] zle_refresh multibyte fix
Message-Id: <20050228104134.56717d51.pws@csr.com>
In-Reply-To: <200502252217.46201.arvidjaar@newmail.ru>
References: <200502231727.58923.arvidjaar@newmail.ru> 
    <200502231457.j1NEvfBI032390@news01.csr.com> 
    <200502252217.46201.arvidjaar@newmail.ru>
Organization: Cambridge Silicon Radio Ltd.
X-Mailer: Sylpheed version 0.9.9 (GTK+ 1.2.10; sparc-sun-solaris2.8)
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 28 Feb 2005 10:42:42.0996 (UTC) 
    FILETIME=[3B6E3740:01C51D82]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.5

On Fri, 25 Feb 2005 22:17:45 +0300
Andrey Borzenkov <arvidjaar@newmail.ru> wrote:
> I do not have easy answer, but what would be semantic of
> 
> - regexps ([[:print:]] et al.)?
> - $foo[n,m] for scalar?
> - Upper/Lower conversion?
> - comparison (collating)?

We may need flags for at least some of these.  Possibly we should have
an overall shell option.  That would allow the shell to work the way
it always has at startup, but it could easily be set to multibyte mode
for zle and completion functions, for example.  There could still be
flags for parameters and patterns to be explicit.

Case conversion only really makes sense on characters; the question would
be whether, by default, it ignored non-ASCII characters to avoid screwing
something up.  But in this case it's hard to see what.

I don't think we make all that much use of strcoll() since it performed
sorting case-insensitively in some locales but not in others.  The globbing
code that sorts the output of filename generation uses entirely internal
functions.  They don't seem to do anything clever with Meta bytes, so
probably sorting of multibyte strings isn't completely logical, but I
haven't checked.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


From zsh-users-return-14065-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 25 17:39:14 2009
Return-Path: <zsh-users-return-14065-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5969 invoked from network); 25 Apr 2009 17:39:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Apr 2009 17:39:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 6534 invoked from network); 25 Apr 2009 17:38:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Apr 2009 17:38:50 -0000
Received: (qmail 4647 invoked by alias); 25 Apr 2009 17:38:33 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14065
Received: (qmail 4634 invoked from network); 25 Apr 2009 17:38:33 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 25 Apr 2009 17:38:33 -0000
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by bifrost.dotsrc.org (Postfix) with ESMTP id B66658028C72
	for <zsh-users@sunsite.dk>; Sat, 25 Apr 2009 19:36:53 +0200 (CEST)
Received: from torch.brasslantern.com ([96.249.201.13])
 by vms173005.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KIO0035K3NFB1DR@vms173005.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sat, 25 Apr 2009 12:38:11 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n3PHc1Gj010816	for
 <zsh-users@sunsite.dk>; Sat, 25 Apr 2009 10:38:02 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n3PHc1YF010815	for zsh-users@sunsite.dk; Sat,
 25 Apr 2009 10:38:01 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090425103801.ZM10814@torch.brasslantern.com>
Date: Sat, 25 Apr 2009 10:38:01 -0700
In-reply-to: <gsv0d1$u18$1@ger.gmane.org>
Comments: In reply to Thorsten Kampe <thorsten@thorstenkampe.de>
 "Re: Zsh util helpfiles does not produce output" (Apr 25,  2:41pm)
References: <gss5bj$m9j$1@ger.gmane.org>
	<090424145758.ZM8591@torch.brasslantern.com>	<gsv0d1$u18$1@ger.gmane.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@sunsite.dk
Subject: Re: Zsh util helpfiles does not produce output
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.92.1/9289/Sat Apr 25 12:11:31 2009 on bifrost
X-Virus-Status: Clean

On Apr 25,  2:41pm, Thorsten Kampe wrote:
}
} col.txt on the Cygwin host (where it works) is plain text while on the 
} Linux machine it looks like this:
} 
} 1mNAME0m
}        zshbuiltins - zsh built-in commands
} 
} 1mSHELL BUILTIN COMMANDS0m
}        1m- 4m22msimple24m 4mcommand0m
}               See the section `Precommand Modifiers'.
} 
} The pure man output on both machines contains control sequences - but 
} on Linux I see:
} 
} [1mNAME[0m

OK, so what appears to be happening here is that on Linux, the "man"
program itself has become terminfo-aware and is generating terminal-
specific control sequences instead of simple overstriking.  "col"
doesn't know that this is happening, so all it has done is to remove
the ESC characters, not the "escape sequences" that man has output.

So try this:

    TERM=dumb man zshbuiltins > man.txt

That should get you back to something much more like the Cygwin output.


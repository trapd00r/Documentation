From zsh-workers-request@euclid.skiles.gatech.edu Thu Jul 24 11:57:28 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 8279 invoked from network); 24 Jul 1997 11:57:25 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 24 Jul 1997 11:57:25 -0000
Received: (from list@localhost)
	by euclid.skiles.gatech.edu (8.8.5/8.8.5) id HAA04698;
	Thu, 24 Jul 1997 07:47:58 -0400 (EDT)
Resent-Date: Thu, 24 Jul 1997 07:47:58 -0400 (EDT)
Date: Thu, 24 Jul 1997 13:48:00 +0200 (MET DST)
From: "C. v. Stuckrad" <stucki@math.fu-berlin.de>
X-Sender: stucki@petzval
Reply-To: "C. v. Stuckrad" <stucki@math.fu-berlin.de>, rene@math.fu-berlin.de
To: Zsh workers list <zsh-workers@math.gatech.edu>
Subject: Possible Bug / strange behaviour / Version 3.0.2 Solaris 2.4
Message-ID: <Pine.GSO.3.95q.970724133651.3672B-100000@petzval>
X-TestHeaderA: Written by C. v. Stuckrad; FB. Mathematik; EDV
X-TestHeaderB: FU-Berlin; Arnimallee 2-6; 14195 Berlin; GERMANY
Priority: normal
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"tnPnP1.0.L91.k3qrp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3373
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


As this does NOT happen under LINUX and NOT under SunOS
it might be something spuriously depending on the OS and on the
ZSH-Version but we found it extremely strange:

In Solaris 2.4 (compiled with gcc 2.7.2) the zsh 3.0.2
switches the time depending on 'how the TZ-variable was created'

- If exported directly, or exported and a command follows
  the shown value of '%*' changes.
- If just set, or 'exported by just exporting the variable and no command
  on the line' the time stays correct!

Any ideas?   Here are the things we tried:

$ unset TZ; : no variable                                    (0)13:23:00
$ date                                                       (0)13:23:27
Donnerstag, 24. Juli 1997, 13:23:31 Uhr MET DST
$ export TZ=CET-1CEST-2; : oops                              (0)13:23:31
$ TZ=CET-1CEST-2,M3.5.0/02:00:00,M10.5.0/03:00:00
$ date; : TZ generated by export                             (0)12:24:10
Donnerstag, 24. Juli 1997, 13:24:53 Uhr CEST
$ unset TZ; : no variable                                    (0)12:24:53
$ TZ=CET-1CEST-2,M3.5.0/02:00:00,M10.5.0/03:00:00
$ export TZ; : other way round                               (0)13:25:06
$ date; : TZ generated locally                               (0)12:25:34
Donnerstag, 24. Juli 1997, 13:25:39 Uhr CEST
$ unset TZ; : no variable                                    (0)12:25:39
$ export TZ                                                  (0)13:26:01
$ date; : TZ locally, OOPS \?                                (0)13:26:08
Donnerstag, 24. Juli 1997, 13:26:32 Uhr MET DST
$ export TZ; : another command                               (0)13:26:32
$ date; : still ok                                           (0)13:26:58
Donnerstag, 24. Juli 1997, 13:27:09 Uhr MET DST
$ unset TZ; : no variable                                    (0)13:27:10
$ export TZ; : another command                               (0)13:27:16
$ TZ=CET-1CEST-2,M3.5.0/02:00:00,M10.5.0/03:00:00
$ date; : OOPS !!!                                           (0)12:27:27
Donnerstag, 24. Juli 1997, 13:27:44 Uhr CEST
$

Stucki

Christoph von Stuckrad       * *  | talk to  | <stucki@math.fu-berlin.de> \
Freie Universitaet Berlin    |/_* | nickname | ...!unido!fub!leibniz!stucki|
Fachbereich Mathematik, EDV  |\ * | 'stucki' | Tel:+49 30 838-7545{9|8}    |
Arnimallee 2-6/14195 Berlin  * *  |  on IRC  | Fax:+49 30 838-5913        /



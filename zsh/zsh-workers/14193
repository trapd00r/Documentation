From zsh-workers-return-14193-mason-zsh=primenet.com.au@sunsite.dk Wed May 02 05:22:54 2001
Return-Path: <zsh-workers-return-14193-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17900 invoked from network); 2 May 2001 05:22:52 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 May 2001 05:22:52 -0000
Received: (qmail 23251 invoked by alias); 2 May 2001 05:22:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14193
Received: (qmail 23236 invoked from network); 2 May 2001 05:22:43 -0000
From: "F. G. Marx" <fmarx@crosswinds.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15087.39325.225082.482398@starf.org>
Date: Wed, 2 May 2001 01:22:37 -0400
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Cc: Peter Stephenson <pws@csr.com>,
	zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Termcap saga
In-Reply-To: <1010501150227.ZM6942@candle.brasslantern.com>
References: <Tc0a88d015341106398@mailsweeper01.cambridgesiliconradio.com>
	<1010501150227.ZM6942@candle.brasslantern.com>
X-Mailer: VM 6.92 under 21.2  (beta46) "Urania" XEmacs Lucid
Reply-To: fmarx@crosswinds.net


I made clean, Util/preconfig'ed, and configure'd --with-curses-terminfo,
and -ltermcap, which had been being included along with -l(n)curses for a
while (linux), was dropped from the link line.

Test ./C02cond.ztst failed: bad status 1, expected 0 from:
  [[ -r zerolength && ! -r unmodish ]]

was the only fail.

Bart Schaefer writes:
 > On May 1,  1:58pm, Peter Stephenson wrote:
 > }
 > } What's supposed to happen after the last set of changes?
 > 
 > The trouble is that configure's -lcurses vs. -ltermcap decision is based
 > on linking to tgetent, but term{cap,info}.c's decision of which headers
 > to included is based only on whether those headers are present.  So it
 > includes headers it doesn't need, and (for the same reason that Andrej
 > was having trouble with the stat module -- the Cygwin folks are getting
 > overzealous with `const') it ends up declaring global variables it won't
 > need.
 > 
 > Since nobody has howled about 14177 changing the configure messages, I'll
 > commit it and then look at moving the checks for curses.h and term.h into
 > the section for --with-curses-terminfo so they'll be checked for only if
 > they're going to be needed.
 > 
 > -- 
 > Bart Schaefer                                 Brass Lantern Enterprises
 > http://www.well.com/user/barts              http://www.brasslantern.com
 > 
 > Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   
 > 


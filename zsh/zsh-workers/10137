From zsh-workers-return-10137-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Mar 14 16:57:28 2000
Return-Path: <zsh-workers-return-10137-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7979 invoked from network); 14 Mar 2000 16:57:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Mar 2000 16:57:26 -0000
Received: (qmail 11260 invoked by alias); 14 Mar 2000 16:57:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10137
Received: (qmail 11245 invoked from network); 14 Mar 2000 16:57:14 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000314165659.ZM7956@candle.brasslantern.com>
Date: Tue, 14 Mar 2000 16:56:59 +0000
In-Reply-To: <200003141035.LAA06725@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: PATCH: Re: The `zle' command and traps" (Mar 14, 11:35am)
References: <200003141035.LAA06725@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Re: The `zle' command and traps
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 14, 11:35am, Sven Wischnowsky wrote:
} Subject: Re: PATCH: Re: The `zle' command and traps
}
} Killing loops containing only builtins should work fine, because we
} set breaks=loops (and errflag, btw) in the handler -- and it /seems/
} to work fine for me.

Hrm.  I got zsh into a state yesterday where running this loop:

    for ((i=10000; i; --i)) echo LOOP

was not killable.  I had to blow it away with 'kill -9' from another
terminal (because I'd used a much bigger number than 10000 and didn't
want to wait).  I tried sending it INTs, HUPs, QUITs and TERMs with no
effect, after I was unable to ^C it.

Today when I try the same thing in a fresh shell, I'm able to interrupt
it with ^C.  The unkillable shell hadn't been running for more that a
couple of hours, but long enough for me to have forgotten even vaguely
what I did to get it into that state.  All I know is that it was one
where I'd been experimenting with various things ... hmmm, I bet some
function I ran, used the "trap" command without "setopt localtraps".

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


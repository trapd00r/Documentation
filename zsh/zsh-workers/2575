From zsh-workers-request@euclid.skiles.gatech.edu Fri Dec 13 15:12:10 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 1120 invoked from network); 13 Dec 1996 15:12:08 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 13 Dec 1996 15:12:08 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id JAA23428; Fri, 13 Dec 1996 09:46:29 -0500 (EST)
Resent-Date: Fri, 13 Dec 1996 09:46:29 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <16751.199612131444@stone.dcs.warwick.ac.uk>
Subject: Re: fifo configure check
To: schaefer@nbn.com
Date: Fri, 13 Dec 1996 14:44:37 +0000 (GMT)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <961212193711.ZM6210@candle.brasslantern.com> from "Bart Schaefer" at Dec 12, 96 07:37:11 pm
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8568.07
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"Rza1p3.0.-j5.5nMio"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2575
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Bart wrote:
>On Dec 13,  3:30am, Zoltan Hidvegi wrote:
>} Subject: fifo configure check
>}
>} I discovered that fifo test fails if zsh is compiled in an NFS mounted
>} directory.

It works for me on NFS-mounted filesystems.  (Solaris 2.5.1 and SunOS
4.1.4.)  If FIFOs don't work on such filesystems, then that is a
serious bug in the operating system.

>}             The patch below shoud fix it (it's only for configure.in, you
>} need autoconf).  I did not test it but it should work.

It is certainly sensible to perform the test on the same filesystem we
will actually use the FIFOs on.  But the fixed name in /tmp can cause
clashes if two people are configuring zsh at the same time.  I think
some attempt at a unique name is necessary.

>I'm concerned that fifos won't work on the ramdisk file system that many
>newer suns are configured to use for /tmp.  (I know things like lockf()
>fail on the ramdisk.)  Can someone who has a ramdisk /tmp please try this
>soon and let us know?

It works on Solaris 2.5.1.  But of course we have /dev/fd, so the FIFOs
aren't required in any case.

-zefram


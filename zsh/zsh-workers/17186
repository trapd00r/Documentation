From zsh-workers-return-17186-mason-zsh=primenet.com.au@sunsite.dk Mon May 20 16:40:56 2002
Return-Path: <zsh-workers-return-17186-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12222 invoked from network); 20 May 2002 16:40:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 May 2002 16:40:56 -0000
Received: (qmail 19365 invoked by alias); 20 May 2002 16:40:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17186
Received: (qmail 19347 invoked from network); 20 May 2002 16:40:44 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020520164035.ZM22369@candle.brasslantern.com>
Date: Mon, 20 May 2002 16:40:34 +0000
In-Reply-To: <6134254DE87BD411908B00A0C99B044F02E89AE4@mowd019a.mow.siemens.ru>
Comments: In reply to Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
        "RE: _call_program (and possibly other hooks) or opt_args quoting prob lem." (May 18,  3:24pm)
References: <6134254DE87BD411908B00A0C99B044F02E89AE4@mowd019a.mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "'Zsh hackers list'" <zsh-workers@sunsite.dk>
Subject: Re: _call_program (and possibly other hooks) or opt_args quoting prob lem.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 18,  3:24pm, Borsenkow Andrej wrote:
}
} Still even with the following:
} 
} if zstyle -s ":completion:${curcontext}:${1}" command tmp; then
}   if [[ "$tmp" = -* ]]; then
}     eval "$tmp[2,-1]" "${(qqq)argv[2,-1]}"
}   else
}     eval "$tmp"
}   fi
} else
}   eval "${(@qqq)argv[2,-1]}"
} fi
} 
} 
} I get 
} 
} +_info:27> info=( _call_program info info -d $PWD/a b ) 

I don't have this _info completion function, so I'm having a hard time
coming up with a way to reproduce this.

Perhaps "${(@qqq)${(@e)argv[2,-1]}}" ?

Or perhaps drop the `eval' and just use "${(@e)argv[2,-1]}}" directly in
the latter branch -- the only reason I can think of for the `eval' to be
there is to expand aliases, and I wouldn't think we'd want to do that when
inside _call_program, but I could be wrong.

} Actually I begin to feel that _arguments should eval parameter value
} before storing it. Can anybody give example when parameter value as it
} appears on command line is useful? 

I'm not sure what you mean by "parameter value as it appears" -- is the
word "value" out of place in that phrase?

What about the _expand completer?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


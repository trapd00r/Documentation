From zsh-workers-return-11359-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 15 07:49:21 2000
Return-Path: <zsh-workers-return-11359-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14656 invoked from network); 15 May 2000 07:49:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 May 2000 07:49:17 -0000
Received: (qmail 26789 invoked by alias); 15 May 2000 07:48:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11359
Received: (qmail 26661 invoked from network); 15 May 2000 07:48:38 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000515061044.ZM14945@candle.brasslantern.com>
Date: Mon, 15 May 2000 06:10:44 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Seg fault in matcher-list matching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I did this:

zagzig[41] /u/s/l/z/z4/s/zsh
                     ^cursor over the 4, press TAB

The path this was intended to match was /usr/src/local/zsh/zsh-2.4/src/zsh.
I had first tried TAB at the end of the line and gotten a feep, in case
that matters.

Got this stack trace:

589                                     tp[-zoff] = '\0';
(gdb) where
#0  0x401285c3 in match_str (l=0x40197f37 "", w=0x4013395a "", bpp=0xbfffaaa8, 
    bc=0, rwlp=0x0, sfx=1, test=0, part=1)
    at ../../../zsh-3.1.6/Src/Zle/compmatch.c:589
#1  0x40123f7b in addmatches (dat=0xbfffaba8, argv=0xbfffac2c)
    at ../../../zsh-3.1.6/Src/Zle/compcore.c:1768
#2  0x4011d18c in bin_compadd (name=0x401a2f10 "compadd", argv=0xbfffac2c, 
    ops=0xbfffc768 "", func=0) at ../../../zsh-3.1.6/Src/Zle/complete.c:587
#3  0x80517ad in execbuiltin (args=0x401a2e88, bn=0x40134e80)
    at ../../zsh-3.1.6/Src/builtin.c:368
#4  0x806165e in execcmd (state=0xbfffd5d8, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2257
#5  0x805e457 in execpline2 (state=0xbfffd5d8, pcode=4547, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#6  0x805d9e7 in execpline (state=0xbfffd5d8, slcode=6146, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#7  0x805d3ad in execlist (state=0xbfffd5d8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#8  0x807c22d in execwhile (state=0xbfffd5d8, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:379
#9  0x80613ed in execcmd (state=0xbfffd5d8, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#10 0x805e457 in execpline2 (state=0xbfffd5d8, pcode=4483, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#11 0x805d9e7 in execpline (state=0xbfffd5d8, slcode=18434, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#12 0x805d3ad in execlist (state=0xbfffd5d8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#13 0x807c6c7 in execif (state=0xbfffd5d8, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:484
#14 0x80613ed in execcmd (state=0xbfffd5d8, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#15 0x805e457 in execpline2 (state=0xbfffd5d8, pcode=1987, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#16 0x805d9e7 in execpline (state=0xbfffd5d8, slcode=151554, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#17 0x805d3ad in execlist (state=0xbfffd5d8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#18 0x807c6c7 in execif (state=0xbfffd5d8, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:484
#19 0x80613ed in execcmd (state=0xbfffd5d8, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#20 0x805e457 in execpline2 (state=0xbfffd5d8, pcode=1603, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#21 0x805d9e7 in execpline (state=0xbfffd5d8, slcode=183298, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#22 0x805d3ad in execlist (state=0xbfffd5d8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#23 0x807b7ba in execfor (state=0xbfffd5d8, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:140
#24 0x80613ed in execcmd (state=0xbfffd5d8, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#25 0x805e457 in execpline2 (state=0xbfffd5d8, pcode=1539, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#26 0x805d9e7 in execpline (state=0xbfffd5d8, slcode=188418, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#27 0x805d3ad in execlist (state=0xbfffd5d8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#28 0x807c22d in execwhile (state=0xbfffd5d8, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:379
#29 0x80613ed in execcmd (state=0xbfffd5d8, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#30 0x805e457 in execpline2 (state=0xbfffd5d8, pcode=1475, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#31 0x805d9e7 in execpline (state=0xbfffd5d8, slcode=208898, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#32 0x805d3ad in execlist (state=0xbfffd5d8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#33 0x805d0af in execode (p=0x80e5fb0, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:727
#34 0x806417e in runshfunc (prog=0x80e5fb0, wrap=0x0, 
    name=0x40186168 "_alternative") at ../../zsh-3.1.6/Src/exec.c:3406
#35 0x4011e88e in comp_wrapper (prog=0x80e5fb0, w=0x0, 
    name=0x40186168 "_alternative")
    at ../../../zsh-3.1.6/Src/Zle/complete.c:1196
#36 0x8064112 in runshfunc (prog=0x80e5fb0, wrap=0x40134f48, 
    name=0x40186168 "_alternative") at ../../zsh-3.1.6/Src/exec.c:3394
#37 0x8063f6a in doshfunc (name=0x80e2c98 "_alternative", prog=0x80e5fb0, 
    doshargs=0x40185ec8, flags=8192, noreturnval=0)
    at ../../zsh-3.1.6/Src/exec.c:3339
#38 0x8063984 in execshfunc (shf=0x80dd760, args=0x40185ec8)
    at ../../zsh-3.1.6/Src/exec.c:3153
#39 0x80615d8 in execcmd (state=0xbfffda44, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2246
#40 0x805e457 in execpline2 (state=0xbfffda44, pcode=2051, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#41 0x805d9e7 in execpline (state=0xbfffda44, slcode=6146, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#42 0x805d3ad in execlist (state=0xbfffda44, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#43 0x805d0af in execode (p=0x80e5f70, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:727
#44 0x806417e in runshfunc (prog=0x80e5f70, wrap=0x0, 
    name=0x40185b58 "_command_names") at ../../zsh-3.1.6/Src/exec.c:3406
#45 0x4011e88e in comp_wrapper (prog=0x80e5f70, w=0x0, 
    name=0x40185b58 "_command_names")
    at ../../../zsh-3.1.6/Src/Zle/complete.c:1196
#46 0x8064112 in runshfunc (prog=0x80e5f70, wrap=0x40134f48, 
    name=0x40185b58 "_command_names") at ../../zsh-3.1.6/Src/exec.c:3394
#47 0x8063f6a in doshfunc (name=0x80e3048 "_command_names", prog=0x80e5f70, 
    doshargs=0x40185b00, flags=8192, noreturnval=0)
    at ../../zsh-3.1.6/Src/exec.c:3339
#48 0x8063984 in execshfunc (shf=0x80e3038, args=0x40185b00)
    at ../../zsh-3.1.6/Src/exec.c:3153
#49 0x80615d8 in execcmd (state=0xbfffe0bc, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2246
#50 0x805e457 in execpline2 (state=0xbfffe0bc, pcode=1475, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#51 0x805d9e7 in execpline (state=0xbfffe0bc, slcode=3106, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#52 0x805d3f9 in execlist (state=0xbfffe0bc, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:828
#53 0x807c6c7 in execif (state=0xbfffe0bc, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:484
#54 0x80613ed in execcmd (state=0xbfffe0bc, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#55 0x805e457 in execpline2 (state=0xbfffe0bc, pcode=1219, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#56 0x805d9e7 in execpline (state=0xbfffe0bc, slcode=117762, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#57 0x805d3ad in execlist (state=0xbfffe0bc, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#58 0x805d0af in execode (p=0x80ebff8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:727
#59 0x806417e in runshfunc (prog=0x80ebff8, wrap=0x0, 
    name=0x40185878 "_normal") at ../../zsh-3.1.6/Src/exec.c:3406
#60 0x4011e88e in comp_wrapper (prog=0x80ebff8, w=0x0, 
    name=0x40185878 "_normal") at ../../../zsh-3.1.6/Src/Zle/complete.c:1196
#61 0x8064112 in runshfunc (prog=0x80ebff8, wrap=0x40134f48, 
    name=0x40185878 "_normal") at ../../zsh-3.1.6/Src/exec.c:3394
#62 0x8063f6a in doshfunc (name=0x80e7d48 "_normal", prog=0x80ebff8, 
    doshargs=0x40185838, flags=8192, noreturnval=0)
    at ../../zsh-3.1.6/Src/exec.c:3339
#63 0x8063984 in execshfunc (shf=0x80ea458, args=0x40185838)
    at ../../zsh-3.1.6/Src/exec.c:3153
#64 0x80615d8 in execcmd (state=0xbfffe71c, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2246
#65 0x805e457 in execpline2 (state=0xbfffe71c, pcode=3843, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#66 0x805d9e7 in execpline (state=0xbfffe71c, slcode=4098, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#67 0x805d3ad in execlist (state=0xbfffe71c, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#68 0x807c6c7 in execif (state=0xbfffe71c, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:484
#69 0x80613ed in execcmd (state=0xbfffe71c, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#70 0x805e457 in execpline2 (state=0xbfffe71c, pcode=3715, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#71 0x805d9e7 in execpline (state=0xbfffe71c, slcode=89090, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#72 0x805d3ad in execlist (state=0xbfffe71c, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#73 0x805d0af in execode (p=0x80ebfb8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:727
#74 0x806417e in runshfunc (prog=0x80ebfb8, wrap=0x0, 
    name=0x40185598 "_complete") at ../../zsh-3.1.6/Src/exec.c:3406
#75 0x4011e88e in comp_wrapper (prog=0x80ebfb8, w=0x0, 
    name=0x40185598 "_complete") at ../../../zsh-3.1.6/Src/Zle/complete.c:1196
#76 0x8064112 in runshfunc (prog=0x80ebfb8, wrap=0x40134f48, 
    name=0x40185598 "_complete") at ../../zsh-3.1.6/Src/exec.c:3394
#77 0x8063f6a in doshfunc (name=0x80e3028 "_complete", prog=0x80ebfb8, 
    doshargs=0x40185548, flags=8192, noreturnval=0)
    at ../../zsh-3.1.6/Src/exec.c:3339
#78 0x8063984 in execshfunc (shf=0x80e3018, args=0x40185548)
    at ../../zsh-3.1.6/Src/exec.c:3153
#79 0x80615d8 in execcmd (state=0xbffff294, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2246
#80 0x805e457 in execpline2 (state=0xbffff294, pcode=7683, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#81 0x805d9e7 in execpline (state=0xbffff294, slcode=3074, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#82 0x805d3ad in execlist (state=0xbffff294, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#83 0x807c5e5 in execif (state=0xbffff294, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:469
#84 0x80613ed in execcmd (state=0xbffff294, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#85 0x805e457 in execpline2 (state=0xbffff294, pcode=7683, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#86 0x805d9e7 in execpline (state=0xbffff294, slcode=20482, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#87 0x805d3ad in execlist (state=0xbffff294, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#88 0x807b7ba in execfor (state=0xbffff294, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:140
#89 0x80613ed in execcmd (state=0xbffff294, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#90 0x805e457 in execpline2 (state=0xbffff294, pcode=7619, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#91 0x805d9e7 in execpline (state=0xbffff294, slcode=31746, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#92 0x805d3ad in execlist (state=0xbffff294, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#93 0x807b7ba in execfor (state=0xbffff294, do_exec=0)
    at ../../zsh-3.1.6/Src/loop.c:140
#94 0x80613ed in execcmd (state=0xbffff294, input=0, output=0, how=2, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2205
#95 0x805e457 in execpline2 (state=0xbffff294, pcode=6531, how=2, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1183
#96 0x805d9e7 in execpline (state=0xbffff294, slcode=119810, how=2, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:976
#97 0x805d3ad in execlist (state=0xbffff294, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:821
#98 0x805d0af in execode (p=0x80ebef8, dont_change_job=1, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:727
#99 0x806417e in runshfunc (prog=0x80ebef8, wrap=0x0, 
    name=0x40184030 "_main_complete") at ../../zsh-3.1.6/Src/exec.c:3406
#100 0x4011e88e in comp_wrapper (prog=0x80ebef8, w=0x0, 
    name=0x40184030 "_main_complete")
    at ../../../zsh-3.1.6/Src/Zle/complete.c:1196
#101 0x8064112 in runshfunc (prog=0x80ebef8, wrap=0x40134f48, 
    name=0x40184030 "_main_complete") at ../../zsh-3.1.6/Src/exec.c:3394
#102 0x8063f6a in doshfunc (name=0x80dd680 "_main_complete", prog=0x80ebef8, 
    doshargs=0x0, flags=0, noreturnval=0) at ../../zsh-3.1.6/Src/exec.c:3339
#103 0x40120d7d in callcompfunc (s=0x400e4cd0 "/u/s/l/z/z4/s/zsh", 
    fn=0x80dd680 "_main_complete") at ../../../zsh-3.1.6/Src/Zle/compcore.c:774
#104 0x40121627 in makecomplist (s=0x400e4cd0 "/u/s/l/z/z4/s/zsh", incmd=1, 
    lst=0) at ../../../zsh-3.1.6/Src/Zle/compcore.c:923
#105 0x4011f69f in do_completion (dummy=0x40115b38, dat=0xbffff594)
    at ../../../zsh-3.1.6/Src/Zle/compcore.c:328
#106 0x8085446 in runhookdef (h=0x40115b38, d=0xbffff594)
    at ../../zsh-3.1.6/Src/module.c:1615
#107 0x40108828 in docompletion (s=0x80fc0e8 "/u/s/l/z/z4/s/zsh", lst=0, 
    incmd=1) at ../../../zsh-3.1.6/Src/Zle/zle_tricky.c:1703
#108 0x40105ba6 in docomplete (lst=0)
    at ../../../zsh-3.1.6/Src/Zle/zle_tricky.c:763
#109 0x40104577 in completeword (args=0x40115ab4)
    at ../../../zsh-3.1.6/Src/Zle/zle_tricky.c:203
#110 0x40104461 in completecall (args=0x40115ab4)
    at ../../../zsh-3.1.6/Src/Zle/zle_tricky.c:180
#111 0x400f9b33 in execzlefunc (func=0x40113788, args=0x40115ab4)
    at ../../../zsh-3.1.6/Src/Zle/zle_main.c:645
#112 0x400f959f in zleread (lp=0x80c4868 "%m%(#.#.%1v)%h%(#.#.%2v) ", 
    rp=0x80cfc98 "3.1.7-pre-3", flags=3)
    at ../../../zsh-3.1.6/Src/Zle/zle_main.c:564
#113 0x80735d6 in inputline () at ../../zsh-3.1.6/Src/input.c:265
#114 0x80734c9 in ingetc () at ../../zsh-3.1.6/Src/input.c:210
#115 0x806cb78 in ihgetc () at ../../zsh-3.1.6/Src/hist.c:242
#116 0x807839c in gettok () at ../../zsh-3.1.6/Src/lex.c:621
#117 0x8077b3d in yylex () at ../../zsh-3.1.6/Src/lex.c:337
#118 0x808d62c in parse_event () at ../../zsh-3.1.6/Src/parse.c:421
#119 0x8070eaf in loop (toplevel=1, justonce=0)
    at ../../zsh-3.1.6/Src/init.c:121
#120 0x8050da0 in main (argc=2, argv=0xbffff83c)
    at ../../zsh-3.1.6/Src/main.c:86
(gdb) 

Completion styles in effect:

zstyle ':completion:predict:*' cursor key
zstyle :completion::complete:cd:: tag-order local-directories path-directories
zstyle ':completion:*' completer _oldlist _expand _complete _match _ignored _approximate _prefix
zstyle ':completion:*' file-sort modification reverse
zstyle ':completion:*' format 'Completing %d'
zstyle ':completion:*' group-name ''
zstyle ':completion:*' ignore-parents parent pwd ..
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' match-original both
zstyle ':completion:*' matcher-list '' 'r:|[._-,]=* r:|=*' 'm:{a-zA-Z}={A-Za-z} r:|[._-,]=* r:|=*' 'r:|[._-,]=* r:|=* l:|=*'
zstyle ':completion:*' max-errors 2 numeric
zstyle ':completion:*' menu 'select=6'
zstyle ':completion:*' original true
zstyle ':completion:*' verbose true

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


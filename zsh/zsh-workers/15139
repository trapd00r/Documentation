From zsh-workers-return-15139-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 27 15:06:03 2001
Return-Path: <zsh-workers-return-15139-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3473 invoked from network); 27 Jun 2001 15:06:01 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Jun 2001 15:06:01 -0000
Received: (qmail 29782 invoked by alias); 27 Jun 2001 15:05:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15139
Received: (qmail 29767 invoked from network); 27 Jun 2001 15:05:09 -0000
Date: Wed, 27 Jun 2001 18:05:51 +0300 (EET DST)
From: Timo Aaltonen <tjaalton@cc.hut.fi>
X-Sender: tjaalton@tiku.hut.fi
To: zsh-workers@sunsite.dk
Subject: RE: AIX abd GCC
In-Reply-To: <004b01c0ff16$b5a0c6b0$21c9ca95@mow.siemens.ru>
Message-ID: <Pine.OSF.4.10.10106271757030.12353-100000@tiku.hut.fi>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 27 Jun 2001, Andrej Borsenkow wrote:

> > > Did you use DLLDFLAGS=-shared or it worked OOTB?
> > >
> > > Could you give exact configure invocation you used?
> >
> > Yes, that was the only trick I used..
> >
> > ..but it works also without it, OOTB.
> >
> 
> You mean, it even correctly finds boolcodes & friends?

Actually no... both broken in that respect.

> Anyway, after reading AIX ld docs I am not happy with how we are doing it.
> We do not actually build shared libraries (meaning shareable code) so every
> zsh instance gets own copy of every loaded module.
> 
> Timo, could you do me a favour, update CVS and try the following patch. Just
> go into zsh dir and do
> 
> cvs up -dP
> 
> then apply the patch. This should produce better code ... I hope.
> 
> Or should we just leave it as is?

CC="cc" ./configure :

        cc -qlanglvl=ansi -c -I.  -DHAVE_CONFIG_H -O  -o watch.o watch.c
        echo '' builtin.o compat.o cond.o exec.o glob.o hashtable.o hist.o
init.o input.o jobs.o lex.o linklist.o loop.o math.o mem.o module.o
options.o params.o parse.o pattern.o prompt.o signals.o signames.o
string.o subst.o text.o utils.o watch.o >> ../Src/stamp-modobjs.tmp
Updated `termcap.mdh'.
        cc -qlanglvl=ansi -c -I.  -DHAVE_CONFIG_H -O  -o termcap.o
termcap.c
"termcap.c", line 71.13: 1506-334 (S) Identifier boolcodes has already
been defined on line 1342 of "/usr/include/term.h".
make: The error code from the last command is 1.


Stop.
make: The error code from the last command is 1.


Stop.
make: The error code from the last command is 2.


Stop.
make: The error code from the last command is 1.


Stop.

this is old news

-----

CC="cc" LIBS=-ltermcap  ./configure

        cc -qlanglvl=ansi  -s -bM:SRE -o zleparameter.so -bI:zle.export
-bI:../../Src/zsh.export -bE:zleparameter.export -emodentry
zleparameter..o  ../../Src/modentry..o  -ldl -lm -ltermcap -lc 
Target "all" is up to date.
        (  echo 'STARTDEF()';  echo 'def(version)(0)('4.1.0-dev-0')';
echo 'def(date)(0)(''June 4, 2001'')';  echo 'ENDDEF()#' | tr '#' '\\';  )
> ./version.yo
        case zsh.1 in  */*) target=zsh.1 ;;  *) target=./zsh.1 ;;  esac;
case ': yodl' in :*) ;; *)  : yodl -I. -w zman.yo version.yo zsh.yo | sed
-e '1s/\\-/-/g' -e '/^\.'\''/d' > $target  ;; esac;  test -f $target
make: The error code from the last command is 1.


Stop.
make: The error code from the last command is 1.


Stop.


this is somethin new..



_______________/Timo Aaltonen <http://www.hut.fi/~tjaalton>
Work: HUT-Computing Centre - UNIX,  GSM +358-40-5549 618


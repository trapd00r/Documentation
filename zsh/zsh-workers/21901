From zsh-workers-return-21901-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 21 14:40:04 2005
Return-Path: <zsh-workers-return-21901-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19680 invoked from network); 21 Oct 2005 14:40:01 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Oct 2005 14:40:01 -0000
Received: (qmail 36152 invoked from network); 21 Oct 2005 14:39:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Oct 2005 14:39:52 -0000
Received: (qmail 27973 invoked by alias); 21 Oct 2005 14:39:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21901
Received: (qmail 27962 invoked from network); 21 Oct 2005 14:39:48 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Oct 2005 14:39:47 -0000
Received: (qmail 35738 invoked from network); 21 Oct 2005 14:39:47 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 21 Oct 2005 14:39:45 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0IOP00CQYSQ78E60@vms042.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Fri, 21 Oct 2005 09:39:44 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j9LEdg5U007466	for
 <zsh-workers@sunsite.dk>; Fri, 21 Oct 2005 07:39:42 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j9LEdgGQ007465	for zsh-workers@sunsite.dk; Fri,
 21 Oct 2005 07:39:42 -0700
Date: Fri, 21 Oct 2005 14:39:42 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: PATCH: displaying wide characters
In-reply-to: <20051021100352.4467ba69.pws@csr.com>
To: zsh-workers@sunsite.dk
Message-id: <1051021143942.ZM7464@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <200510192031.j9JKVYk7010115@pwslaptop.csr.com>
	<200510192041.j9JKfTJZ010450@pwslaptop.csr.com>
	<237967ef0510191739t103352a9vad735334a790d8b5@mail.gmail.com>
	<EXCHANGE03zfSLZZInL00006f40@exchange03.csr.com>
	<1051020150255.ZM6346@candle.brasslantern.com>
	<20051021100352.4467ba69.pws@csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
 "Re: PATCH: displaying wide characters" (Oct 21, 10:03am)
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

On Oct 21, 10:03am, Peter Stephenson wrote:
} Subject: Re: PATCH: displaying wide characters
}
} It looks like it, but it isn't.  I didn't change the old code here, and
} this feature is in 4.2.

Ah, so this is a newly-added test that's failing.  I missed that part.

}           If the string is longer than the  specified  truncation
}           length,  it  will  appear in full, completely replacing
}           the truncated string.
} 
} which is unambiguous, so I presume there is a bug in the old code.

Either that or an intentional change that failed to make it into the
documentation.  The prompt truncation code was completely rewritten a
while back (prior to 4.0, so *quite* a while back).

} I suspect it's too minor to worry much about and I should just fix the
} old code.  The only time I can think of where this is significant is
} if you have a string with a variable truncation length or truncation
} indicator so can't guarantee in advance this won't happen, which must
} be fairly unlikely.

Actually that's used in some of the themed prompts that are distributed
with the shell, including adam2 and (ahem) bart, so it's not as unlikely
as you might think.


From zsh-workers-return-9164-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Dec 28 20:21:23 1999
Return-Path: <zsh-workers-return-9164-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25899 invoked from network); 28 Dec 1999 20:21:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Dec 1999 20:21:22 -0000
Received: (qmail 15368 invoked by alias); 28 Dec 1999 20:21:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9164
Received: (qmail 15361 invoked from network); 28 Dec 1999 20:21:15 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: `- perl' instead of `- sh'
References: <rsqr9gllitt.fsf@crane.jaist.ac.jp>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 29 Dec 1999 05:21:13 +0900
In-Reply-To: Tanaka Akira's message of "17 Dec 1999 23:53:34 +0900"
Message-ID: <rsqhfh2akau.fsf@crane.jaist.ac.jp>
Lines: 33
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <rsqr9gllitt.fsf@crane.jaist.ac.jp>,
  Tanaka Akira <akr@jaist.ac.jp> writes:

> On Solaris 7, `- sh -c ...' executes /etc/profile and $HOME/.profile
> and doesn't execute shell commands provided by command line arguments.

9108 is not included in 3.1.6-pws-13.  I guess it's because 9108 uses perl.
So I tried to find more portable way to fix the problem.

This patch uses another scripting language --- zsh.  Unfortunately it
is less portable than perl in usual.  But it is perfectly portable in
this case.

Index: Test/01grammar.ztst
===================================================================
RCS file: /projects/zsh/zsh/Test/01grammar.ztst,v
retrieving revision 1.1.1.3
diff -u -F^( -r1.1.1.3 01grammar.ztst
--- Test/01grammar.ztst	1999/12/23 23:01:55	1.1.1.3
+++ Test/01grammar.ztst	1999/12/28 20:13:58
@@ -50,9 +50,8 @@
 #
 # Tests for `Precommand Modifiers'
 #
-  - sh -c 'echo $0'
+  - $ZTST_testdir/../Src/zsh -fc "[[ \$0 = \"-$ZTST_testdir/../Src/zsh\" ]]"
 0:`-' precommand modifier
->-sh
 
   echo f*
   noglob echo f*
-- 
Tanaka Akira


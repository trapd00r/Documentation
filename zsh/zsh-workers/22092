From zsh-workers-return-22092-mason-zsh=primenet.com.au@sunsite.dk Sun Dec 18 14:14:36 2005
Return-Path: <zsh-workers-return-22092-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13535 invoked from network); 18 Dec 2005 14:14:34 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO,
	UNPARSEABLE_RELAY autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Dec 2005 14:14:34 -0000
Received: (qmail 28062 invoked from network); 18 Dec 2005 14:14:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Dec 2005 14:14:28 -0000
Received: (qmail 579 invoked by alias); 18 Dec 2005 14:14:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22092
Received: (qmail 568 invoked from network); 18 Dec 2005 14:14:25 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Dec 2005 14:14:25 -0000
Received: (qmail 27758 invoked from network); 18 Dec 2005 14:14:25 -0000
Received: from rcpt-expgw.biglobe.ne.jp (202.225.89.187)
  by a.mx.sunsite.dk with SMTP; 18 Dec 2005 14:14:24 -0000
Received: from smtp-gw.biglobe.ne.jp
	by rcpt-expgw.biglobe.ne.jp (mssh/3613031104) with ESMTP id jBIEEKXR023982
	for <zsh-workers@sunsite.dk>; Sun, 18 Dec 2005 23:14:21 +0900 (JST)
X-Biglobe-Sender: <takimoto-j@kba.biglobe.ne.jp>
Received: from [192.168.0.3] (61.210.158.15 [61.210.158.15]) by smtp-gw.biglobe.ne.jp
	id XCDLC0A8274D; Sun, 18 Dec 2005 23:14:20 +0900 (JST)
Mime-Version: 1.0
X-Mailer: QUALCOMM MacOS X Eudora Version 6.2J rev3.1
Message-Id: <a06001000bfcb1deaed2f@kba.biglobe.ne.jp>
In-Reply-To: <200512141831.jBEIV3qQ028002@news01.csr.com>
References: <200512141831.jBEIV3qQ028002@news01.csr.com>
Date: Sun, 18 Dec 2005 23:14:19 +0900
To: zsh-workers@sunsite.dk
From: "Jun T." <takimoto-j@kba.biglobe.ne.jp>
Subject: Re: PATCH: multibyte FAQ (MacOS X)
Content-Type: text/plain; charset="us-ascii"

I'm just a user (not a worker) of zsh but want to comment on the mulibyte support on MacOS X.

At 18:31 +0000 05.12.14, Peter Stephenson wrote:
>+multibyte mode is believed to work automatically on:
>+
>+  - All(?) current GNU/Linux distributions
>+  - All(?) current BSD variants
>+  - OS X 10.4.3

In MacOS X, configure does not enable multibyte by default, because __STDC_ISO_10646__ is not defined. So "./configure; make" gives a zsh without multibyte support, although it supports "\u....".

If configured with --enable-mulibyte, then I get a zsh which supports multibyte relatively well, but at least two problems remain;

(1) "\u...." (and so insert-composed-char and insert-unicode-char) doesn't work. This can be fixed by a patch proposed in 22085.

(2) In MacOS X, the standard file system is HFS+ which stores filenames in Unicode but in fully decomposed form. This means the filename returned by the completion is also in decomposed form; the filename is displayed correctly, but it can't be edited correctly. And if I go up/down in the history stack the prompt is destroyed.

I can test only on 10.4.3 but guess the situation is the same in 10.3.x/10.4.x.


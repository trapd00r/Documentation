From zsh-workers-return-18312-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 27 08:47:19 2003
Return-Path: <zsh-workers-return-18312-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2576 invoked from network); 27 Feb 2003 08:47:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 27 Feb 2003 08:47:18 -0000
Received: (qmail 791 invoked by alias); 27 Feb 2003 08:47:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18312
Received: (qmail 779 invoked from network); 27 Feb 2003 08:47:08 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 27 Feb 2003 08:47:08 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.27.190.146] by sunsite.dk (MessageWall 1.0.8) with SMTP; 27 Feb 2003 8:47:8 -0000
Received: from ceramic.fifi.org (mail@ceramic.fifi.org [216.27.190.147])
	by tantale.fifi.org (8.9.3/8.9.3/Debian 8.9.3-21) with ESMTP id AAA26535;
	Thu, 27 Feb 2003 00:47:07 -0800
Received: from phil by ceramic.fifi.org with local (Exim 3.35 #1 (Debian))
	id 18oJh0-0004x4-00; Thu, 27 Feb 2003 00:47:02 -0800
To: "Bart Schaefer" <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Help needed with execcmd() (was: Re: Cant fg a suspended su (4.1.0-dev-7))
References: <200302211807.h1LI74n23531@aragorn.cortexmachina.com>
	<1030222230416.ZM10265@candle.brasslantern.com>
	<87n0kl19el.fsf@ceramic.fifi.org>
From: Philippe Troin <phil@fifi.org>
Date: 27 Feb 2003 00:47:02 -0800
In-Reply-To: <87n0kl19el.fsf@ceramic.fifi.org>
Message-ID: <87smuaw1o9.fsf_-_@ceramic.fifi.org>
Lines: 17
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Philippe Troin <phil@fifi.org>

Could somebody familiar with Src/exec.c point out for me where I can
insert a statement where the following conditions are true:

  - I can find out if we are doing a real exec(), not a "fake" exec
    (BTW, what's a "fake" exec?), following a "exec blah" command
    line. For example, in execcmd(), I can find this out with the
    do_exec variable.

  - the terminal (SHTTY) is still open

  - there will be no more terminal or process group ids changes before
    we hit zexecve() (meaning no more attachtty(), nor setpgrp())

I can't seem to find a spot where all three conditions are true.

Thanks!
Phil.


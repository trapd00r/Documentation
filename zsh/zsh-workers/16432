From zsh-workers-return-16432-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 11 11:53:37 2002
Return-Path: <zsh-workers-return-16432-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1325 invoked from network); 11 Jan 2002 11:53:36 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 11 Jan 2002 11:53:36 -0000
Received: (qmail 28397 invoked by alias); 11 Jan 2002 11:53:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16432
Received: (qmail 28378 invoked from network); 11 Jan 2002 11:53:21 -0000
Date: Fri, 11 Jan 2002 13:44:25 +0200 (EET)
From: Octavian Cerna <tavy@igreconline.com>
X-X-Sender:  <tavy@linux.home>
To: <zsh-workers@sunsite.dk>
Subject: PATCH: VPATH doc build fixes
Message-ID: <Pine.LNX.4.33L2.0201111316030.3052-200000@linux.home>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-1813407442-1010749465=:3052"
X-Virus-Scanned: by AMaViS perl-11

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--8323328-1813407442-1010749465=:3052
Content-Type: TEXT/PLAIN; charset=US-ASCII


Hello,

This is a small patch for the zsh Makefile system to allow building the
documentation in the current directory, not in the source directory.
I do almost all builds in a separate directory (VPATH builds) with a
readonly source directory, and zsh supports this, except for the
documentation-building process.

I thought it would be nice if zsh would also support a VPATH build where
it doesn't touch anything in the source directories.

The patch is against zsh-CVS 2002-01-09.

The change to zshconfig.ac is a hack to ensure that the Doc/Zsh directory
exists in the build directory.  There could be a cleaner way to do this,
but I didn't have the time to figure out something better.
I also noticed that the arguments of texi2html were messed up.
I tested the patch on a Linux-Mandrake 8.1 system.

This could be a ChangeLog entry:

	* zshconfig.ac: Ensure that $builddir/Doc/Zsh exists for building
	the documentation (a hack).
	* Doc/Makefile.in (TEXI2HTML): Fixed the arguments of texi2html.
	* Doc/Makefile.in: Build documentation in the build
	directory, not in the source directory.
	This allows readonly VPATH builds.


Best Regards,
Octavian Cerna
yLabs

---
zsh: The Emacs of all shells.

--8323328-1813407442-1010749465=:3052
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="zsh-vpath-doc.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.33L2.0201111344250.3052@linux.home>
Content-Description: 
Content-Disposition: attachment; filename="zsh-vpath-doc.patch"

LS0tIHpzaGNvbmZpZy5hYy5vcmlnCVdlZCBKYW4gIDkgMDE6NTE6NDkgMjAw
Mg0KKysrIHpzaGNvbmZpZy5hYwlXZWQgSmFuICA5IDAxOjU1OjUwIDIwMDIN
CkBAIC0xOTY2LDYgKzE5NjYsOSBAQA0KIEFDX1NVQlNUX0ZJTEUoREVGU19N
SylkbmwNCiBBQ19TVUJTVF9GSUxFKFZFUlNJT05fTUspZG5sDQogDQorIyBF
bnN1cmUgdGhhdCAkYnVpbGRkaXIvRG9jL1pzaCBleGlzdHMNCit0ZXN0IC1k
IERvYy9ac2ggfHwgJFNIRUxMICRzcmNkaXIvbWtpbnN0YWxsZGlycyBEb2Mv
WnNoDQorDQogQUNfT1VUUFVUKENvbmZpZy9kZWZzLm1rIE1ha2VmaWxlIERv
Yy9NYWtlZmlsZSBFdGMvTWFrZWZpbGUgU3JjL01ha2VmaWxlIFwNCiBUZXN0
L01ha2VmaWxlLCBcDQogW3Rlc3QgLXogIiRDT05GSUdfSEVBREVSUyIgfHwg
ZWNobyA+IHN0YW1wLWhdKQ0KLS0tIERvYy9NYWtlZmlsZS5pbi5vcmlnCVdl
ZCBKYW4gIDkgMDE6NDY6MjYgMjAwMg0KKysrIERvYy9NYWtlZmlsZS5pbglG
cmkgSmFuIDExIDEzOjA5OjA1IDIwMDINCkBAIC00MCw3ICs0MCw3IEBADQog
TUFLRUlORk8gPSBtYWtlaW5mbw0KIFRFWEkyRFZJID0gdGV4aTJkdmkNCiBE
VklQUyA9IGR2aXBzDQotVEVYSTJIVE1MID0gdGV4aTJodG1sIC1leHBhbmQg
aW5mbyAtc3BsaXQgY2hhcHRlcg0KK1RFWEkySFRNTCA9IHRleGkyaHRtbCAt
ZXhwYW5kaW5mbyAtc3BsaXRfY2hhcHRlcg0KIA0KIC5TVUZGSVhFUzogLnlv
IC4xDQogDQpAQCAtODMsMzEgKzgzLDI3IEBADQogZHZpOiB6c2guZHZpDQog
LlBIT05ZOiBkdmkNCiANCi16c2guZHZpOiAkKHNkaXIpL3pzaC50ZXhpDQot
CSQoVEVYSTJEVkkpICQoc2RpcikvenNoLnRleGkNCit6c2guZHZpOiB6c2gu
dGV4aQ0KKwkkKFRFWEkyRFZJKSB6c2gudGV4aQ0KIA0KLXRleGk6ICQoc2Rp
cikvenNoLnRleGkNCit0ZXhpOiB6c2gudGV4aQ0KIC5QSE9OWTogdGV4aQ0K
IA0KLSQoc2RpcikvenNoLnRleGk6DQorenNoLnRleGk6DQogCSQoWU9ETCkg
LW8gJEAgLUkkKHNkaXIpIC13IHp0ZXhpLnlvIHZlcnNpb24ueW8genNoLnlv
OyBcDQogCXRlc3QgLWYgJEANCiANCiBpbmZvOiB6c2guaW5mbw0KIC5QSE9O
WTogaW5mbw0KIA0KLXpzaC5pbmZvOiAkKHNkaXIpL3pzaC50ZXhpDQotCSQo
TUFLRUlORk8pICQoc2RpcikvenNoLnRleGkNCit6c2guaW5mbzogenNoLnRl
eGkNCisJJChNQUtFSU5GTykgenNoLnRleGkNCiANCiAueW8uMToNCi0JY2Fz
ZSAkQCBpbiBcDQotCSAgKi8qKSB0YXJnZXQ9JEAgOzsgXA0KLQkgICopIHRh
cmdldD0kKHNkaXIpLyRAIDs7IFwNCi0JZXNhYzsgXA0KIAljYXNlICckKFlP
REwpJyBpbiA6KikgOzsgKikgXA0KLQkgICAgJChZT0RMKSAtSSQoc2Rpcikg
LXcgem1hbi55byB2ZXJzaW9uLnlvICQ8IHwgc2VkIC1lICcxcy9cXC0vLS9n
JyAtZSAnL15cLidcJycvZCcgPiAkJHRhcmdldCBcDQorCSAgICAkKFlPREwp
IC1JJChzZGlyKSAtdyB6bWFuLnlvIHZlcnNpb24ueW8gJDwgfCBzZWQgLWUg
JzFzL1xcLS8tL2cnIC1lICcvXlwuJ1wnJy9kJyA+ICRAIFwNCiAJOzsgZXNh
YzsgXA0KLQl0ZXN0IC1mICQkdGFyZ2V0DQorCXRlc3QgLWYgJEANCiANCiBw
czogdXNfcHMgYTRfcHMNCiAuUEhPTlk6IHBzDQpAQCAtMTI3LDI4ICsxMjMs
MjQgQEANCiBodG1sOiB6c2hfdG9jLmh0bWwNCiAuUEhPTlk6IGh0bWwNCiAN
Ci16c2hfdG9jLmh0bWw6ICQoc2RpcikvenNoLnRleGkNCi0JJChURVhJMkhU
TUwpICQoc2RpcikvenNoLnRleGkNCit6c2hfdG9jLmh0bWw6IHpzaC50ZXhp
DQorCSQoVEVYSTJIVE1MKSB6c2gudGV4aQ0KIA0KIHpzaGFsbC4xOiB6c2gu
eW8NCi0JY2FzZSAkQCBpbiBcDQotCSAgKi8qKSB0YXJnZXQ9JEAgOzsgXA0K
LQkgICopIHRhcmdldD0kKHNkaXIpLyRAIDs7IFwNCi0JZXNhYzsgXA0KIAlj
YXNlICckKFlPREwpJyBpbiA6KikgOzsgKikgXA0KLQkgICAgJChZT0RMKSAt
SSQoc2RpcikgLURaU0hBTEwgLXcgem1hbi55byB2ZXJzaW9uLnlvIHpzaC55
byB8IHNlZCAtZSAnMXMvXFwtLy0vZycgLWUgJy9eXC4nXCcnL2QnID4gJCR0
YXJnZXQgXA0KKwkgICAgJChZT0RMKSAtSSQoc2RpcikgLURaU0hBTEwgLXcg
em1hbi55byB2ZXJzaW9uLnlvIHpzaC55byB8IHNlZCAtZSAnMXMvXFwtLy0v
ZycgLWUgJy9eXC4nXCcnL2QnID4gJEAgXA0KIAk7OyBlc2FjOyBcDQotCXRl
c3QgLWYgJCR0YXJnZXQNCisJdGVzdCAtZiAkQA0KIA0KIC4uL01FVEEtRkFR
OiBNRVRBLUZBUS55byBac2gvbWV0YWZhcS55bw0KIAljYXNlICckKFlPREwp
JyBpbiA6KikgOzsgKikgXA0KLQkgICAgJChZT0RMKSAtSSQoc2RpcikgTUVU
QS1GQVEueW8gfCBzZWQgLWUgJy9ORVhUTElORS9OJyAtZSAnL0RFTExJTkUv
ZCcgLWUgJy9eU0VDVEhFQUQkJC97TjtzL15TRUNUSEVBRC4vLztoO3MvLi8t
L2c7SDtnO30nIC1lICdzLyAgKiQkLy8nID4gJChzZGlyX3RvcCkvTUVUQS1G
QVEgXA0KKwkgICAgJChZT0RMKSAtSSQoc2RpcikgTUVUQS1GQVEueW8gfCBz
ZWQgLWUgJy9ORVhUTElORS9OJyAtZSAnL0RFTExJTkUvZCcgLWUgJy9eU0VD
VEhFQUQkJC97TjtzL15TRUNUSEVBRC4vLztoO3MvLi8tL2c7SDtnO30nIC1l
ICdzLyAgKiQkLy8nID4gJEAgXA0KIAk7OyBlc2FjDQotCXRlc3QgLWYgJChz
ZGlyX3RvcCkvTUVUQS1GQVENCisJdGVzdCAtZiAkQA0KIA0KICQoWU9ETERP
Qyk6IHZlcnNpb24ueW8NCiANCi0kKHNkaXIpL3pzaC50ZXhpOiAkKFlPRExT
UkMpDQorenNoLnRleGk6ICQoWU9ETFNSQykNCiANCiBtYW46ICQoTUFOKQ0K
IC5QSE9OWTogbWFuDQpAQCAtMTkwLDcgKzE4Miw3IEBADQogCSAgZWNobyAn
ZGVmKHZlcnNpb24pKDApKCckKFZFUlNJT04pJyknOyBcDQogCSAgZWNobyAn
ZGVmKGRhdGUpKDApKCckKFZFUlNJT05fREFURSknKSc7IFwNCiAJICBlY2hv
ICdFTkRERUYoKSMnIHwgdHIgJyMnICdcXCc7IFwNCi0JKSA+ICQoc2Rpcikv
dmVyc2lvbi55bw0KKwkpID4gJEANCiANCiBac2gvbW9kbGlzdC55bzogJChN
T0RET0NTUkMpDQogCSggXA0KQEAgLTIxOCw3ICsyMTAsNyBAQA0KIAkJbW9k
MT0kJG1vZDI7IFwNCiAJCW1vZDI9JCRtb2QzOyBcDQogCSAgICBkb25lIFwN
Ci0JKSA+ICQoc2RpcikvWnNoL21vZGxpc3QueW8NCisJKSA+ICRADQogDQog
WnNoL21vZG1lbnUueW86ICQoTU9ERE9DU1JDKQ0KIAkoIFwNCkBAIC0yMjgs
NyArMjIwLDcgQEANCiAJCSAgICA8ICQoc2RpcikvJCRtb2RmaWxlOyBcDQog
CSAgICBkb25lOyBcDQogCSAgICBlY2hvICJlbmRtZW51KCkiIFwNCi0JKSA+
ICQoc2RpcikvWnNoL21vZG1lbnUueW8NCisJKSA+ICRADQogDQogWnNoL21h
bm1vZG1lbnUueW86ICQoTU9ERE9DU1JDKQ0KIAkoIFwNCkBAIC0yMzYsNyAr
MjI4LDcgQEANCiAJCXNlZCAtbiAnMXtzfF5DT01NRU5UKCFNT0QhXCguKlwp
JCR8bWVudShUaGUgXDEgTW9kdWxlKXw7cDtxO30nIFwNCiAJCSAgICA8ICQo
c2RpcikvJCRtb2RmaWxlOyBcDQogCSAgICBkb25lIFwNCi0JKSA+ICQoc2Rp
cikvWnNoL21hbm1vZG1lbnUueW8NCisJKSA+ICRADQogDQogIyA9PT09PT09
PT09IERFUEVOREVOQ0lFUyBGT1IgSU5TVEFMTElORyA9PT09PT09PT09DQog
DQpAQCAtMjUyLDcgKzI0NCw3IEBADQogaW5zdGFsbC5tYW46IG1hbg0KIAkk
e1NIRUxMfSAkKHNkaXJfdG9wKS9ta2luc3RhbGxkaXJzICQoREVTVERJUikk
KG1hbmRpcikvbWFuMQ0KIAlmb3IgZmlsZSBpbiAkKE1BTik7IGRvIFwNCi0J
ICAgICQoSU5TVEFMTF9EQVRBKSAkKHNkaXIpLyQkZmlsZSAkKERFU1RESVIp
JChtYW5kaXIpL21hbjEvYGVjaG8gJCRmaWxlIHwgc2VkICdzfHpzaHwkKHR6
c2gpfCdgIHx8IGV4aXQgMTsgXA0KKwkgICAgJChJTlNUQUxMX0RBVEEpICQk
ZmlsZSAkKERFU1RESVIpJChtYW5kaXIpL21hbjEvYGVjaG8gJCRmaWxlIHwg
c2VkICdzfHpzaHwkKHR6c2gpfCdgIHx8IGV4aXQgMTsgXA0KIAlkb25lDQog
LlBIT05ZOiBpbnN0YWxsLm1hbg0KIA0KQEAgLTI2Myw3ICsyNTUsNyBAQA0K
IAlta2RpciBpbmZvZGlyDQogCWlmICggXA0KIAkgICAgc2VkICcvXkBzZXRm
aWxlbmFtZS9zfHpzaHwkKHR6c2gpfCcgXA0KLQkJPCAkKHNkaXIpL3pzaC50
ZXhpID4gaW5mb2Rpci90enNoLnRleGkgJiYgXA0KKwkJPCB6c2gudGV4aSA+
IGluZm9kaXIvdHpzaC50ZXhpICYmIFwNCiAJICAgIChjZCBpbmZvZGlyICYm
ICQoTUFLRUlORk8pIHR6c2gudGV4aSkgJiYgXA0KIAkgICAgZm9yIGZpbGUg
aW4gaW5mb2Rpci8kKHR6c2gpLmluZm8qOyBkbyBcDQogCQkkKElOU1RBTExf
REFUQSkgJCRmaWxlICQoREVTVERJUikkKGluZm9kaXIpIHx8IGV4aXQgMTsg
XA0KQEAgLTMyMSw4ICszMTMsOCBAQA0KIC5QSE9OWTogZGlzdGNsZWFuLWhl
cmUNCiANCiByZWFsY2xlYW4taGVyZTogZGlzdGNsZWFuLWhlcmUNCi0JY2Qg
JChzZGlyKSAmJiBybSAtZiBac2gvbW9kbGlzdC55byBac2gvbW9kbWVudS55
byBac2gvbWFubW9kbWVudS55bw0KLQljZCAkKHNkaXIpICYmIHJtIC1mIHZl
cnNpb24ueW8gLi4vTUVUQS1GQVEgenNoLnRleGkgJChNQU4pDQorCXJtIC1m
IFpzaC9tb2RsaXN0LnlvIFpzaC9tb2RtZW51LnlvIFpzaC9tYW5tb2RtZW51
LnlvDQorCXJtIC1mIHZlcnNpb24ueW8gLi4vTUVUQS1GQVEgenNoLnRleGkg
JChNQU4pDQogLlBIT05ZOiByZWFsY2xlYW4taGVyZQ0KIA0KIEBDTEVBTl9N
S0ANCg==
--8323328-1813407442-1010749465=:3052--


From zsh-workers-request@math.gatech.edu Fri Nov 28 17:35:49 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 503 invoked from network); 28 Nov 1997 17:35:47 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 28 Nov 1997 17:35:47 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id MAA15468;
	Fri, 28 Nov 1997 12:19:22 -0500 (EST)
Resent-Date: Fri, 28 Nov 1997 12:19:04 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <971128091832.ZM2720@candle.brasslantern.com>
Date: Fri, 28 Nov 1997 09:18:32 -0800
In-Reply-To: <97Nov28.105909gmt+0100.17030@internet01.amc.de>
Comments: In reply to Christopher Croughton <crough45@amc.de>
        "Re: History key bindings" (Nov 28,  9:57am)
References: <97Nov28.105909gmt+0100.17030@internet01.amc.de> 
	<97Nov28.143140gmt+0100.17031@internet01.amc.de>
In-Reply-To: <97Nov28.143140gmt+0100.17031@internet01.amc.de>
Comments: In reply to Christopher Croughton <crough45@amc.de>
        "Re: History key bindings" (Nov 28,  1:30pm)
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Christopher Croughton <crough45@amc.de>, zsh-users@math.gatech.edu
Subject: Re: History key bindings
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"Jh5zk.0.2n3.7qlVq"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1158
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Nov 28,  9:57am, Christopher Croughton wrote:
} Subject: Re: History key bindings
}
} Bart Schaefer wrote:
} > 
} > } on 3.0 it seems that the mark is initially set to the start of the line,
} > 
} > Aha!  Whenever you use a history operation like ^P, the mark gets set at
} > the beginning of the line before the new history line is inserted.
} 
} The only way I can get it to work is if I do an initial ^X^X after typing 
} the prefix.  If I do <CR>fred<UP> then it just scans through the history 
} matching on nothing at all.

On Nov 28,  1:30pm, Christopher Croughton wrote:
} Subject: Re: History key bindings
}
} Confirmed - this works with (beta) version 3.1.2, not with (released)
} version 3.0 (which seems to put the mark at the start of the line when
} it is first edited or something).

Hrm.  I get the behavior Christopher describes with 3.0.0 and 3.0.1; but
it stops for me as of 3.0.3 (I don't have a 3.0.2 around to try), and I
don't see it in 3.0.4 or 3.0.5.

I believe this ChangeLog entry is relevant:

Mon Jan 20 21:11:22 1997  Zoltan Hidvegi  <hzoli@cs.elte.hu>

        * Src/zle_utils.c: move the mark when characters are
          inserted/deleted.  From Peter (2807)

} BTW, it was not very easy to compile on the Dec Alpha under OSF/1 
} version 3.2.  In Src/Zle/zle_tricky.c line 1551 the parameters to
} yp_all() are not the same (the third parameter is the callback structure
} on OSF1, not a pointer to it as in the code.

Actually, it's the parameter in the prototype in the header that is wrong,
not the pointer in the zsh code.  There's a discussion of this somewhere
in Etc/MACHINES.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


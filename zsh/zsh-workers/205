From zsh-workers-request@math.gatech.edu  Sat Jul 15 10:51:21 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id KAA16651 for <mason@werple.mira.net.au>; Sat, 15 Jul 1995 10:51:19 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA06578
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Fri, 14 Jul 1995 20:52:19 -0400
Received: by math (5.x/SMI-SVR4)
	id AA13173; Fri, 14 Jul 1995 20:48:41 -0400
Resent-Date: Fri, 14 Jul 1995 17:49:42 -0700 (PDT)
Old-Return-Path: <wayne@tenor.clarinet.com>
Subject: Completion quirks
To: zsh-workers@math.gatech.edu
Date: Fri, 14 Jul 1995 17:49:42 -0700 (PDT)
From: Wayne Davison <wayne@tenor.clarinet.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id:  <9507141749.aa19526@tenor.clarinet.com>
Resent-Message-Id: <"QVOig1.0.lD3.e1n1m"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/205
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

My normal completion options have been to have "auto_list" set and nothing
else.  With this setup there has been a long-standing quirk that if you
hit the completion key with a string that exactly matches a possible
completion, zsh would choose that match even if other (longer) matches
exist.  Just today I installed hzoli10.1+ (including patch2) and its
behavior is different but also wrong -- it chooses one of longer matches.

For example, in one directory of mine I have some picture processing
binaries:

ppmquant	pp	ppr	pp.sh	ppmmerge	ppmhist

If I type "ls pp" and hit tab using zsh 2.6 beta8, it generates a space.
Hitting tab again would start a new completion.

If I use zsh 2.6 beta10hzoli10.1+, it generates "ls ppmhist" -- the last
item in the (unsorted) directory (I don't know if that's significant).
If I hit tab a second it seems to try to treat it as a menu complete (even
though it's not turned on), but fails to update correctly -- I get this:
"ls ppmhist mhist".

Turning on "menu_complete" in hzoli10.1+ behaves exactly the same way.

Turning on "auto_menu" without menu_complete also fails, but in a
different way:  it displays "ls ppmhist " (no beep).  One more tab beeps
and backs up a space.  Another tab displays "ls ppmhist .sh".  Another
tab displays "ls ppmhist mhist".

Turning on "auto_menu" in combination with menu_complete actually works,
even though the documentation says that auto_menu is overridden by
menu_complete.  The behavior in this case is to beep and list the choices
on the first tab, and then start menu-completion with proper screen
updating on subsequent tabs.  I like this behavior a lot, so I've made
it my new default, so for the moment I'm happy.

I'm running zsh this under SCO 3.2v4.2 using gcc 2.7.0 -- is anyone
else having a problem with this?

..wayne..


From zsh-workers-return-6972-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 05 10:17:18 1999
Return-Path: <zsh-workers-return-6972-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23399 invoked from network); 5 Jul 1999 10:17:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Jul 1999 10:17:17 -0000
Received: (qmail 3391 invoked by alias); 5 Jul 1999 10:17:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6972
Received: (qmail 3383 invoked from network); 5 Jul 1999 10:17:05 -0000
Message-Id: <9907050948.AA20040@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: Job control bug with pws-25 
In-Reply-To: "Sven Wischnowsky"'s message of "Mon, 05 Jul 1999 12:00:12 DFT."
             <199907051000.MAA06722@beta.informatik.hu-berlin.de> 
Date: Mon, 05 Jul 1999 11:48:23 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> You didn't miss a patch -- I forgot to play with `bg'. Whew, this was
> a bit more complicated. So much so, that I finally put some of the
> things distributed in jobs.c into functions (super_job() and
> handle_sub()).

Much improved, thanks.  There's still a small bug:

% fn() { sleep2; print foo; }
% fn
^Z
% bg
% foo

The function exited, but no message was printed; notify is set.  Running
`jobs' or exiting the shell prints the message.  Runing fn directly in the
background behaves as expected.  (I think we had something like this once
before, but I don't think it was there when the current saga started.)

It seems to me it might be a good idea to collect some of the things which
can potentially go wrong with job control (as well as some which shouldn't
:-)) and put them in a file, say, Misc/job-control-tests.  It doesn't need
to run the tests itself, that's far too hard when the bugs are largely
interactive, just give a collection of code with comments saying what you
should do to see if it's working.  If I get a moment I'll have a look back
in the archive for some.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


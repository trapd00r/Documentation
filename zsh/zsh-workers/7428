From zsh-workers-return-7428-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Aug 13 00:36:18 1999
Return-Path: <zsh-workers-return-7428-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20811 invoked from network); 13 Aug 1999 00:36:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Aug 1999 00:36:14 -0000
Received: (qmail 11995 invoked by alias); 13 Aug 1999 00:36:03 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7428
Received: (qmail 11988 invoked from network); 13 Aug 1999 00:36:02 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: _ps, _pdf and _pspdf.
References: <199908111345.PAA07735@beta.informatik.hu-berlin.de>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 13 Aug 1999 09:35:55 +0900
In-Reply-To: Sven Wischnowsky's message of "Wed, 11 Aug 1999 15:45:59 +0200 (MET DST)"
Message-ID: <rsqlnbg7c0k.fsf@crane.jaist.ac.jp>
Lines: 54
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <199908111345.PAA07735@beta.informatik.hu-berlin.de>,
  Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

> diff -u -r oc/User/_colors Completion/User/_colors

> diff -u -r oc/User/_pbm Completion/User/_pbm

I found small problems in _pbm and _colors.

Index: Completion/User/_pbm
===================================================================
RCS file: /projects/zsh/zsh/Completion/User/Attic/_pbm,v
retrieving revision 1.2.2.1
diff -u -F^( -r1.2.2.1 _pbm
--- _pbm	1999/08/12 23:19:04	1.2.2.1
+++ _pbm	1999/08/13 00:32:21
@@ -116,7 +116,7 @@
     # colon-separated list of words. We just execute this list of words
     # as a command with its arguments.
 
-    if [[ "$after" = *:* ]]; then
+    if [[ "$opts[$after]" = *:* ]]; then
       after="${${opts[after]#*:}//:/ }"
       [[ -z "$after" ]] || $=after 
     fi
Index: Completion/User/_colors
===================================================================
RCS file: /projects/zsh/zsh/Completion/User/Attic/_colors,v
retrieving revision 1.2.2.1
diff -u -F^( -r1.2.2.1 _colors
--- _colors	1999/08/12 23:19:03	1.2.2.1
+++ _colors	1999/08/13 00:32:21
@@ -5,11 +5,13 @@
 
   # Cache of color names doesn't exist yet, create it.
 
-  if [[ -f /usr/lib/X11/rgb.txt ]]; then
-    file=/usr/lib/X11/rgb.txt
-  elif [[ -f /usr/local/lib/X11/rgb.txt ]]; then
-    file=/usr/local/lib/X11/rgb.txt
-  fi
+  for f in /usr/{,local/,X11R6/,openwin/}lib/X11/rgb.txt
+  do
+    if [[ -f $f ]]; then
+      file=$f
+      break;
+    fi
+  done
 
   if [[ -n "$file" ]]; then
     _color_cache=( "${(@)${(@f)$(< $file)}[2,-1]##*		}" )

-- 
Tanaka Akira


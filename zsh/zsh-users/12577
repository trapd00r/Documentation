From zsh-users-return-12577-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 15 10:02:27 2008
Return-Path: <zsh-users-return-12577-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7752 invoked from network); 15 Feb 2008 10:02:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Feb 2008 10:02:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 26241 invoked from network); 15 Feb 2008 10:02:02 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Feb 2008 10:02:02 -0000
Received: (qmail 6515 invoked by alias); 15 Feb 2008 10:01:52 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12577
Received: (qmail 6497 invoked from network); 15 Feb 2008 10:01:52 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 15 Feb 2008 10:01:52 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id CE68B80482A1
	for <zsh-users@sunsite.dk>; Fri, 15 Feb 2008 11:01:48 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly46d.srv.mailcontrol.com (MailControl) with ESMTP id m1FA1kpH011021
	for <zsh-users@sunsite.dk>; Fri, 15 Feb 2008 10:01:47 GMT
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 15 Feb 2008 10:01:46 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m1FA1kYu029143
	for <zsh-users@sunsite.dk>; Fri, 15 Feb 2008 10:01:46 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m1FA1kPV029140
	for <zsh-users@sunsite.dk>; Fri, 15 Feb 2008 10:01:46 GMT
Message-Id: <200802151001.m1FA1kPV029140@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: Zsh users list <zsh-users@sunsite.dk>
Subject: Re: Phil's prompt is not working when LANG is set to UTF-8
In-reply-to: <20080214215550.GA5950@phoenix.nasreddine.info>
References: <237967ef0802102301i71dcd71erb1a2993a7f0bd643@mail.gmail.com> <20080211092021.GC6965@phoenix.nasreddine.info> <20080211130707.7d45f6af@news01> <20080211133743.GA28384@phoenix.nasreddine.info> <200802111407.m1BE77Lh004330@news01.csr.com> <20080211150709.GA28841@localhost.localdomain> <20080211155200.0a8e9ecf@news01> <20080211205721.GD6217@phoenix.nasreddine.info> <20080214123757.GA2943@phoenix.nasreddine.info> <200802141300.m1ED0qOo017425@news01.csr.com> <20080214215550.GA5950@phoenix.nasreddine.info>
Comments: In-reply-to Wael Nasreddine <mla@nasreddine.com>
   message dated "Thu, 14 Feb 2008 22:55:50 +0100."
Date: Fri, 15 Feb 2008 10:01:46 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 15 Feb 2008 10:01:46.0620 (UTC) FILETIME=[C6467BC0:01C86FB9]
X-Scanned-By: MailControl A-08-00-01 (www.mailcontrol.com) on 10.68.0.156
X-Virus-Scanned: ClamAV 0.91.2/5829/Fri Feb 15 05:00:17 2008 on bifrost
X-Virus-Status: Clean

Wael Nasreddine wrote:
> Maybe this problem I am having is actually related to another, very
> irritating, problem and like the problem previously mentioned I don't
> understand why it's happening... The below screenshot[1] is when I run
> my Gnome session from GDM it doesn't happen when I ran it from usual
> startx command, I really don't get it, what would be different when I
> start my Gnome session from GDM or from startx ??
> 
> Take a look at this screenshot[1], it speaks for itself...

Presumably you mean one of the non-ASCII characters is showing up
correctly in one window but different ways in other windows.

Assuming they really are the same character, which you can check e.g. by
looking at the characters in your prompts:

print -P $PS1 | xxd

then there's no obvious sign here this is due to the shell, since everything
appears to be lined up correctly.  You probably need to check the
settings for the terminals in the different windows, in particular that
they're using the same character sets.  Different emulators handle this
differently: in xterm, you need to tell it the enconding as part of the
font, while gnome-terminal and others with menu-driven configuration
will try to combine the locale with the typeface you select.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


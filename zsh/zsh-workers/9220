From zsh-workers-return-9220-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jan 05 15:46:37 2000
Return-Path: <zsh-workers-return-9220-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27651 invoked from network); 5 Jan 2000 15:46:35 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Jan 2000 15:46:35 -0000
Received: (qmail 22089 invoked by alias); 5 Jan 2000 15:46:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9220
Received: (qmail 22082 invoked from network); 5 Jan 2000 15:46:28 -0000
Message-ID: <3873674D.6C340DE7@u.genie.co.uk>
Date: Wed, 05 Jan 2000 15:46:21 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.7 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: help with command completion
References: <200001051437.PAA10986@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:

> Then we can just start generating the printer names in this `if'. One
> possibility is something like:
> 
>   compadd - "${(@)${(@s:|:)${(@)${(@f)$(< /etc/printcap)}:#[    \#]*}%%:*}%%[   ]*}"

I was just looking into trying to adapt this to work on AIX aswell. AIX
lists the print queues in /etc/qconfig.

The following works there:
_lp_cache=( ${${(f)"$(</etc/qconfig)"}%%[:\*[:blank:]]*} )

I am a little unsure what format the /etc/printcap file is supposed to
be in - printcap(5) suggests that | separates alternate names for the
queues but the only printcap file I have access to has entries like
lp|Generic dot-matrix printer entry:\

What are the possible queue names in this case - just lp, lp and Generic
or lp and Generic\ dot-matrix\ printer\ entry? My tests imply that it is
just lp. Sven's pattern would imply the answer is lp and Generic. I
can't properly test it because there aren't any real printers attached
to the one Linux machine I have access to. Does anyone know the answer
to this? The following pattern will work for AIX and I think it behaves
the same as Sven's pattern under Linux:
${(s:|:)${${(f)"$(<$file[1])"}%%[:\#\*[:blank:]]*}}

I'll not send a patch to _lp though until I've looked at IRIX at home
and established what Linux does about those spaces.

Oliver Kiddle


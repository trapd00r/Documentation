From zsh-users-return-5656-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 09 14:38:00 2003
Return-Path: <zsh-users-return-5656-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5914 invoked from network); 9 Jan 2003 14:37:59 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Jan 2003 14:37:59 -0000
Received: (qmail 7461 invoked by alias); 9 Jan 2003 14:37:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5656
Received: (qmail 7443 invoked from network); 9 Jan 2003 14:37:36 -0000
Date: Thu, 9 Jan 2003 14:51:33 +0000
From: Phil Pennock <phil.pennock@globnix.org>
To: zsh-users@sunsite.dk
Subject: Re: Completion of dirs confused over cursor position
Message-ID: <20030109145133.GA22171@globnix.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20030108194619.GA11708@globnix.org> <7407.1042108920@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <7407.1042108920@csr.com>
Organisation: Demon Internet Netherlands

On 2003-01-09 at 10:42 +0000, Peter Stephenson wrote:
> This isn't supposed to happen and doesn't when I use your settings.
> Maybe some invisible character is screwing up the calculations.  I think
> you're stuck with trying to find the minimum set of options, styles and
> parameters which reproduces it, also whether it's specific to a
> particular version or displaying a particular arrangement of filenames.

Well, the exact same _config_ for another user on the same box did not
have that effect.  However, playing around with directories, I do see
issues.

 .
 ./bin
 ./bin/common
 ./bin/openbsd_sparc

Then "cd <TAB><TAB>" shows the issue.  I've not tracked down the exact
combination of filename layout, but it seems to be connected to the
underscore.  Commenting out the matcher-list item removes the issue:

# zstyle ':completion:*' matcher-list 'r:|[._-]=* r:|=*'

I'm sorry that my diagnosis of this stuff is so poor.  I've avoided the
new completion stuff, and am having serious head-scratching moments
trying to figure out how to replicate some old compctl stuff.  Even
simple things, like:
 compctl -f -W ~/some/directory commandname

The FAQ still points to compctl usage.  This is not my week.

(aargh, I can no longer rely upon $_ as being usable. :^( )


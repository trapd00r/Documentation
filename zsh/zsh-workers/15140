From zsh-workers-return-15140-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 27 15:15:45 2001
Return-Path: <zsh-workers-return-15140-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3589 invoked from network); 27 Jun 2001 15:15:44 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Jun 2001 15:15:44 -0000
Received: (qmail 8119 invoked by alias); 27 Jun 2001 15:14:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15140
Received: (qmail 8108 invoked from network); 27 Jun 2001 15:14:53 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Timo Aaltonen" <tjaalton@cc.hut.fi>, <zsh-workers@sunsite.dk>
Subject: RE: AIX abd GCC
Date: Wed, 27 Jun 2001 19:15:33 +0400
Message-ID: <005201c0ff1c$027541a0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <Pine.OSF.4.10.10106271757030.12353-100000@tiku.hut.fi>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006
Importance: Normal


>
> > > > Did you use DLLDFLAGS=-shared or it worked OOTB?
> > > >
> > > > Could you give exact configure invocation you used?
> > >
> > > Yes, that was the only trick I used..
> > >
> > > ..but it works also without it, OOTB.
> > >
> >
> > You mean, it even correctly finds boolcodes & friends?
>
> Actually no... both broken in that respect.
>

So, you did use LIBS=-ltermcap?

>         cc -qlanglvl=ansi -c -I.  -DHAVE_CONFIG_H -O  -o termcap.o
> termcap.c
> "termcap.c", line 71.13: 1506-334 (S) Identifier boolcodes has already
> been defined on line 1342 of "/usr/include/term.h".
> make: The error code from the last command is 1.
>

Erm ... my patch was not aimed at it, so it was not expected to change.

>
> CC="cc" LIBS=-ltermcap  ./configure
>
>         cc -qlanglvl=ansi  -s -bM:SRE -o zleparameter.so -bI:zle.export
> -bI:../../Src/zsh.export -bE:zleparameter.export -emodentry
> zleparameter..o  ../../Src/modentry..o  -ldl -lm -ltermcap -lc
> Target "all" is up to date.
>         (  echo 'STARTDEF()';  echo 'def(version)(0)('4.1.0-dev-0')';
> echo 'def(date)(0)(''June 4, 2001'')';  echo 'ENDDEF()#' | tr '#' '\\';  )
> > ./version.yo
>         case zsh.1 in  */*) target=zsh.1 ;;  *) target=./zsh.1 ;;  esac;
> case ': yodl' in :*) ;; *)  : yodl -I. -w zman.yo version.yo zsh.yo | sed
> -e '1s/\\-/-/g' -e '/^\.'\''/d' > $target  ;; esac;  test -f $target
> make: The error code from the last command is 1.
>
>
> this is somethin new..
>

You need Yodl to build docs if you compile off CVS.

I guess, I apply this patch. So, the remaining problem is boolcodes.
Somewhat easy "fix" is to prefer termcap on AIX until somebody comes up with
better solution. Comments?

-andrej


From zsh-users-return-8799-mason-zsh=primenet.com.au@sunsite.dk Tue May 10 00:36:53 2005
Return-Path: <zsh-users-return-8799-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27796 invoked from network); 10 May 2005 00:36:52 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 May 2005 00:36:52 -0000
Received: (qmail 88177 invoked from network); 10 May 2005 00:36:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 May 2005 00:36:45 -0000
Received: (qmail 18315 invoked by alias); 10 May 2005 00:36:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8799
Received: (qmail 18305 invoked from network); 10 May 2005 00:36:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 May 2005 00:36:37 -0000
Received: (qmail 87148 invoked from network); 10 May 2005 00:36:37 -0000
Received: from blackbird.world-net.net (204.57.72.6)
  by a.mx.sunsite.dk with SMTP; 10 May 2005 00:36:31 -0000
Received: from aspen (dsl2-254.guam.netpci.com [202.128.83.254])
	(authenticated bits=0)
	by blackbird.world-net.net (8.13.1/8.13.1) with ESMTP id j4A0aM6E037302;
	Mon, 9 May 2005 19:36:25 -0500 (CDT)
	(envelope-from teratorn@world-net.net)
To: "Fafa Hafiz Krantz" <fteg@london.com>, zsh-users@sunsite.dk
Subject: Re: zsh login going remarkably slow
References: <20050509192122.961794BEAE@ws1-1.us4.outblaze.com>
Message-ID: <op.sqjamqu56k1y1x@aspen>
Date: Tue, 10 May 2005 10:36:16 +1000
From: "Eric Mangold" <teratorn@world-net.net>
Content-Type: text/plain; format=flowed; delsp=yes; charset=us-ascii
MIME-Version: 1.0
Content-Transfer-Encoding: 8bit
In-Reply-To: <20050509192122.961794BEAE@ws1-1.us4.outblaze.com>
User-Agent: Opera M2/8.0 (Linux, build 1095)
X-Scanned-By: MIMEDefang 2.51 on 204.57.72.6
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Could it be that it's rebuilding ~/.zcompdump every time? After a system  
upgrade I started having that problem: .zcompdump was re-generated even if  
it existed. I didn't figure out the root cause but just started using the  
-C switch to compinit. This made it fast again.

-Eric

On Tue, 10 May 2005 05:21:22 +1000, Fafa Hafiz Krantz <fteg@london.com>  
wrote:

>
> hey!
>
> i just installed zsh on both my freebsd boxes.
> on one of them it works like a charm. on the other, it doesn't.
>
> for this other box, it takes a long time for the prompt to appear.
> also for it to re-appear when i su to root.
>
> this /etc/zshrc file are used for both:
>
> umask 022
>
> alias vi='vim'
> alias j='jobs -l'
> alias h='history'
> alias ls='ls -G'
> alias cd..='cd ..'
> alias cd...='cd ../..'
> alias cd....='cd ../../..'
> alias cd.....='cd ../../../..'
> alias cd......='cd ../../../../..'
> alias cd/='cd /'
> alias wf='w -f'
> alias ws='w -s'
> alias df='df -h'
> alias ftp='lftp'
>
> alias pfdump='tcpdump -n -e -ttt -r /var/log/pflog'
> alias pfmon='tcpdump -n -e -ttt -i pflog0'
> alias pfreload='pfctl -F all && pfctl -f /etc/pf.conf'
>
> autoload -U compinit
> compinit
>
> zstyle ':completion:*' completer _complete _prefix
> zstyle ':completion::prefix-1:*' completer _complete
> zstyle ':completion:incremental:*' completer _complete _correct
> zstyle ':completion:predict:*' completer _complete
> zstyle ':completion::complete:*' use-cache 1
> zstyle ':completion::complete:*' cache-path ~/.zsh/cache/$HOST
> zstyle ':completion:*' expand 'yes'
> zstyle ':completion:*' squeeze-slashes 'yes'
> zstyle ':completion::complete:*' '\'
> zstyle ':completion::complete:*:tar:directories' file-patterns '*~.*(-/)'
> zstyle ':completion:*:complete:-command-::commands' ignored-patterns  
> '*\~'
> zstyle ':completion:*:matches' group 'yes'
> zstyle ':completion:*:options' description 'yes'
> zstyle ':completion:*:options' auto-description '%d'
> zstyle ':completion:*:history-words' stop verbose
> zstyle ':completion:*:history-words' remove-all-dups yes
> zstyle ':completion:*:history-words' list false
> zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
>
> PROMPT=$'%{\e[01;34m%}(%{\e[22;34m%}%n%{\e[01;30m%}@%{\e[22;34m%}%m%{\e[01;34m%})%{\e[01;34m%}%{\e[01;34m%}(%{\e[22;34m%}%D{%H:%M}%{\e[01;30m%}:%{\e[22;34m%}%D{%m/%d/%y}%{\e[01;34m%})%{\e[01;30m\e[00m%}\n%{\e[01;34m%}(%{\e[22;34m%}%#%{\e[01;30m%}:%{\e[22;34m%}%~%{\e[01;34m%})%{\e[01;30m\e[00m%}  
> '
>
> if [[ `whoami` = root ]] then
> PROMPT=$'%{\e[01;31m%}(%{\e[22;31m%}%n%{\e[01;30m%}@%{\e[22;31m%}%m%{\e[01;31m%})%{\e[01;31m%}%{\e[01;31m%}(%{\e[22;31m%}%D{%H:%M}%{\e[01;30m%}:%{\e[22;31m%}%D{%m/%d/%y}%{\e[01;31m%})%{\e[01;30m\e[00m%}\n%{\e[01;31m%}(%{\e[22;31m%}%#%{\e[01;30m%}:%{\e[22;31m%}%~%{\e[01;31m%})%{\e[01;30m\e[00m%}  
> '
> fi
>
> i tried recompiling zsh, but that didn't make no difference.
> i don't know how to capture the output of zsh -x.
>
> zsh -x > file doesn't work, and my entire shell gets twisted after
> running zsh -x.
>
> last but not the least, i was wondering if anyone could help me
> split my prompt line up. i've tried this here. it works, but i get
> an error message saying there's no such command followed by a paste
> of the 2nd line here. if it's due to the whitespace below PROMPT,
> well i kinda want it there because it's superneat.
>
> PROMPT=$'%{\e[01;34m%}(%{\e[22;34m%}%n%{\e[01;30m%}@'\
>        $'%{\e[22;34m%}%m%{\e[01;34m%})%{\e[01;34m%}%{\e[01;34m%}('\
>        $'%{\e[22;34m%}%D{%H:%M}%{\e[01;30m%}:%{\e[22;34m%}%D{%m/%d/%y}'\
>        $'%{\e[01;34m%})%{\e[01;30m\e[00m%}%{\n%}%{\e[01;34m%}('\
>        $'%{\e[22;34m%}%#%{\e[01;30m%}:%{\e[22;34m%}%~%{\e[01;34m%})'\
>        $'%{\e[01;30m\e[00m%} '
>
> thanks!
>
> --
>
> Fafa Hafiz Krantz
>   Research Designer @ http://www.home.no/barbershop
>   Enlightened @ http://www.home.no/barbershop/smart/sharon.pdf
>
>



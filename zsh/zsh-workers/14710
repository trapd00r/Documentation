From zsh-workers-return-14710-mason-zsh=primenet.com.au@sunsite.dk Mon Jun 04 11:47:19 2001
Return-Path: <zsh-workers-return-14710-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3429 invoked from network); 4 Jun 2001 11:47:18 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Jun 2001 11:47:18 -0000
Received: (qmail 1081 invoked by alias); 4 Jun 2001 11:47:03 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14710
Received: (qmail 1053 invoked from network); 4 Jun 2001 11:47:03 -0000
Message-ID: <Tc0a88d0153efe87d08@mailsweeper01.cambridgesiliconradio.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: PATCH: _fc
Date: Mon, 04 Jun 2001 12:46:44 +0100
From: Peter Stephenson <pws@csr.com>

Completion of options to `history' isn't working even after typing an
explicit `-' (this is reproducible with `zsh -f') and the reason seems to
be that the `*' arguments option is swallowing up all the `-' options.
For history, I can just omit the * part, but if I supply it for basic fc,
even as the last option, I still can't complete options, so something's
screwy.  I've had problems understanding what the * option does before.
Here's the only way I can get options to fc to complete at all, just
omitting *, but this clearly isn't right so I won't commit it.

Index: Completion/Zsh/Command/_fc
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_fc,v
retrieving revision 1.2
diff -u -r1.2 _fc
--- Completion/Zsh/Command/_fc	2001/04/11 21:47:18	1.2
+++ Completion/Zsh/Command/_fc	2001/06/04 11:41:27
@@ -4,8 +4,7 @@
 
 fc_common=(
   '(-A -R -W -I)-r[reverse order of the commands]'
-  '(-A -R -W -I -e)-n[suppress line numbers]'
-  '(-A -R -W -I)*::commands:_command_names -e' )
+  '(-A -R -W -I -e)-n[suppress line numbers]' )
 
 fc_hist=(
   '(-A -R -W -I)-m[treat first argument as a pattern]'

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


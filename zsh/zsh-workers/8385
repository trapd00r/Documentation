From zsh-workers-return-8385-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Oct 24 04:43:53 1999
Return-Path: <zsh-workers-return-8385-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7476 invoked from network); 24 Oct 1999 04:43:52 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Oct 1999 04:43:52 -0000
Received: (qmail 22052 invoked by alias); 24 Oct 1999 04:43:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8385
Received: (qmail 22044 invoked from network); 24 Oct 1999 04:43:45 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991024044341.ZM1584@candle.brasslantern.com>
Date: Sun, 24 Oct 1999 04:43:40 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: 3.1.6: Parsing optimization bug
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I'd appreciate it if someone could tell me why parsing whatever follows
"foo()" is different depending on whether "function" appeared before it.
Nevertheless, it's certainly not right to throw away the parse entirely.

zagzig[54] foo() echo bar
zagzig[55] foo
zagzig[56] functions foo
foo () { }
zagzig[57] 

Index: Src/parse.c
===================================================================
@@ -1078,6 +1078,7 @@
 		sl->left = pl = (Pline) allocnode(N_PLINE);
 		pl->type = END;
 		pl->left = par_cmd();
+		c->u.list = l;
 	    }
 	    cmdpop();
 	    c->type = FUNCDEF;

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


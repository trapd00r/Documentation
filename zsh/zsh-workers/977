From hzoli@cs.elte.hu Thu May  2 07:17:52 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id HAA19049 for <mason@werple.mira.net.au>; Thu, 2 May 1996 07:17:49 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA22018; Wed, 1 May 1996 17:08:14 -0400 (EDT)
Resent-Date: Wed, 1 May 1996 17:08:14 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199605012101.XAA02179@hzoli.ppp.cs.elte.hu>
Subject: Re: expandorcompleteprefix patch
To: mp@marvin.jpl.oz.au
Date: Wed, 1 May 1996 23:01:58 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <XFMail.960501122725.mp@marvin.jpl.oz.au> from Michael Pitman at "May 1, 96 12:22:46 pm"
X-Mailer: ELM [version 2.4ME+ PL11 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"_56Lu2.0.yN5.zAzXn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/977
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 687
Status: OR

> Here is a very small patch to fix expand-or-complete-prefix when in automenu
> mode (prob also in menucomplete mode too).
> 
> This comletion mechanism hasn't worked for a while, but I only just got around
> to fixing it.  No idea how to properly submit patches, so I'm just going to
> send to this mailing list with the hope that it's added.

This patch certainly fixes the bug you describe but it is not the proper
fix.  The real problem is that selfinsert() should not change menucomp and
addedsuffix (the later is necessary to make autoremoveslash usable with
expand-or-complete-prefix).  I posted patches for that about a year ago
which will be included in beta17.

Bye,

Zoltan



From zsh-workers-return-12758-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 06 13:24:12 2000
Return-Path: <zsh-workers-return-12758-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19262 invoked from network); 6 Sep 2000 13:24:10 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Sep 2000 13:24:10 -0000
Received: (qmail 11574 invoked by alias); 6 Sep 2000 13:23:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12758
Received: (qmail 11567 invoked from network); 6 Sep 2000 13:23:53 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Zsh hackers list" <zsh-workers@sunsite.auc.dk>
Subject: RE: When should interactive option be set/.zshrc read?
Date: Wed, 6 Sep 2000 17:23:49 +0400
Message-ID: <000801c01805$b10d35f0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal
In-Reply-To: <0G0G00B57UDM35@la-la.cambridgesiliconradio.com>


>
> This is a completely different matter.  The subshell inherits everything
> from the parent shell after the fork; it never re-initialiases.  It does
> unset the options MONITOR and USEZLE, but not INTERACTIVE, for the
> subshell, however.   One might have thought that it would either change all
> three or none.  In particular, the effect of claiming to be interactive but
> not using ZLE looks a bit weird.  Unless there is some standard behind
> this?
>

Here is what SUS V2 says:

A subshell environment will be created as a duplicate of the shell
environment, except that signal traps set by that shell environment will be
set to the default values. Changes made to the subshell environment will not
affect the shell environment. Command substitution, commands that are grouped
with parentheses and asynchronous lists will be executed in a subshell
environment. Additionally, each command of a multi-command pipeline is in a
subshell environment; as an extension, however, any or all commands in a
pipeline may be executed in the current environment. All other commands will
be executed in the current shell environment.

"Environment" includes current option settings, aliases, functions etc. SUS V2
shell supports job control, and has MONITOR option that is on if shell is
interactive. But it is silent on what happens with these options in subshell.

-andrej



From zsh-users-return-14656-mason-zsh=primenet.com.au@zsh.org Thu Dec 17 10:04:01 2009
Return-Path: <zsh-users-return-14656-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22473 invoked by alias); 17 Dec 2009 10:04:01 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14656
Received: (qmail 28986 invoked from network); 17 Dec 2009 10:03:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Thu, 17 Dec 2009 10:03:34 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-users@zsh.org
Subject: Re: Unable to read history on latest Cygwin
Message-ID: <20091217100334.49acb467@news01>
In-Reply-To: <Pine.LNX.4.64.0912162357250.19572@gremlin.fruitbat.org>
References: <1260800369.32429.1350005931@webmail.messagingengine.com>
	<733654e30912160754q5e505cabo4a2510b41bf1d892@mail.gmail.com>
	<Pine.LNX.4.64.0912162357250.19572@gremlin.fruitbat.org>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Dec 2009 10:03:34.0357 (UTC) FILETIME=[31AC1850:01CA7F00]
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.68.0.113

On Thu, 17 Dec 2009 00:04:39 -0800 (PST)
"Peter A. Castro" <doctor@fruitbat.org> wrote:
> On Wed, 16 Dec 2009, Wayne Davison wrote:
> > As for Peter's idea of using a symlink, do you know if the cygwin folks
> > mention if their emulation of a symlink is an atomic operation?  We could
> 
> Symlinks in Cygwin are a close analog to true filesystem supported
> symlinks.  They are just a 'plain' file with a special name (and file
> attribute) and contain the redirection to the target file.  So....since a
> Cygwin app. must access the symlink/file through Cygwin (which is doing
> the symlink resolution) you can considder it "mostly" atomic.  It's
> certainly not atomic from the underlying filesystem perspective (because
> it doesn't support it), but the emulation layer is the only access point
> for the app. to get to the symlink file.  Does that answer your question?

Since we're only locking this against other instances of zsh---we need OS
support if we want "real" locking---I think that does clear it up.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


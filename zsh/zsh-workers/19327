From zsh-workers-return-19327-mason-zsh=primenet.com.au@sunsite.dk Fri Dec 19 12:44:42 2003
Return-Path: <zsh-workers-return-19327-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26049 invoked from network); 19 Dec 2003 12:44:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Dec 2003 12:44:42 -0000
Received: (qmail 14545 invoked by alias); 19 Dec 2003 12:44:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19327
Received: (qmail 14481 invoked from network); 19 Dec 2003 12:44:34 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 19 Dec 2003 12:44:34 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.135.220.2] by sunsite.dk (MessageWall 1.0.8) with SMTP; 19 Dec 2003 12:44:34 -0000
Received: from Hermes.suse.de (Hermes.suse.de [195.135.221.8])
	(using TLSv1 with cipher EDH-RSA-DES-CBC3-SHA (168/168 bits))
	(No client certificate requested)
	by Cantor.suse.de (Postfix) with ESMTP id E7A2019189E4
	for <zsh-workers@sunsite.dk>; Fri, 19 Dec 2003 13:41:45 +0100 (CET)
Received: by bragg.suse.de (Postfix, from userid 30022)
	id 5F4048D9E1; Fri, 19 Dec 2003 13:41:43 +0100 (CET)
Date: Fri, 19 Dec 2003 13:41:42 +0100
From: Mads Martin Joergensen <mmj@suse.de>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: autoconf 2.5 (Re: PATCH: terminfo horor)
Message-ID: <20031219124142.GA20885@suse.de>
References: <3816.1071824371@gmcs3.local> <15713.1071832451@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <15713.1071832451@csr.com>
User-Agent: Mutt/1.5.5.1i

* Peter Stephenson <pws@csr.com> [Dec 19. 2003 12:14]:
> > Ok, I've tweaked the buildenvironment to not having ncurses-devel, and
> > without it:
> > 
> > gcc  -s -rdynamic -o zsh main.o  `cat stamp-modobjs`   -ldl -lnsl -lm -lc
> > utils.o(.text+0x2aa9): In function `gettempname':
> > : the use of `mktemp' is dangerous, better use `mkstemp'
> > init.o(.text+0x1277): In function `init_term':
> > : undefined reference to `tgetent'
> 
> Is termcap still available?  I can't see it in the link line, which is
> suspicious.  What did configure say when it was looking for tgetent
> and tigetflag (from config.log)?

Well, termcap is available, but detection fails because termcap.h is in
/usr/include/termcap/termcap.h and the .so and .a libs are in
/usr/{lib,lib64}/termcap/

So the termcap.h test should use -I $INCLUDE/termcap and the
conftest programs should use -L $LIBDIR/termcap as well.

-- 
Mads Martin Joergensen, http://mmj.dk
"Why make things difficult, when it is possible to make them cryptic
 and totally illogical, with just a little bit more effort?"
                                -- A. P. J.


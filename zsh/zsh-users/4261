From zsh-users-return-4261-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 19 09:12:40 2001
Return-Path: <zsh-users-return-4261-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1088 invoked from network); 19 Sep 2001 09:12:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Sep 2001 09:12:39 -0000
Received: (qmail 11684 invoked by alias); 19 Sep 2001 09:12:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4261
Received: (qmail 11666 invoked from network); 19 Sep 2001 09:12:21 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: d.vogt@lifebits.de, zsh-users@sunsite.auc.dk
Subject: RE: zsh crash, unable to log in
Date: Wed, 19 Sep 2001 12:18:51 +0400
Message-ID: <003c01c140e3$dae61470$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <20010919094606.A4972@lifebits.de>
Importance: Normal

>    $ zsh --version
>    zsh 4.0.1pre3 (i386-suse-linux)
> 
> What happened is this:  After a hard reboot, i.e. switching off
> the machine, my ~/.zsh_history file was corrupt.  It only
> contained 38k of binary trash.  Now, every time when I tried to
> log in I just got the message
> 
>   $ zsh
>   zsh: fatal error: out of memory
> 

this is a bug (BTW I missed if there was any patch for it?) but ...

> If this happens for the root user, the system is out of business.

... root user should use the simplest shell possible. Besides, zsh
relies to some extent on /usr being mounted (at least in default
installation).


-andrej


From zsh-workers-return-19205-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 28 13:03:17 2003
Return-Path: <zsh-workers-return-19205-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1891 invoked from network); 28 Oct 2003 13:03:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 28 Oct 2003 13:03:15 -0000
Received: (qmail 13068 invoked by alias); 28 Oct 2003 13:02:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19205
Received: (qmail 13021 invoked from network); 28 Oct 2003 13:02:51 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 28 Oct 2003 13:02:51 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.254.112.142] by sunsite.dk (MessageWall 1.0.8) with SMTP; 28 Oct 2003 13:2:49 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id BA11C70049; Tue, 28 Oct 2003 08:02:48 -0500 (EST)
Date: Tue, 28 Oct 2003 08:02:48 -0500
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Cc: 217915-forwarded@bugs.debian.org,
	=?iso-8859-1?Q?Fr=E9d=E9ric?= Gobry <frederic.gobry@smartdata.ch>
Subject: NSS LDAP/TLS crashing
Message-ID: <20031028130248.GA25490@scowler.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.5.4i

Is there something that zsh is doing that would make zlib or GNUTLS
unhappy somehow?

(4.0.7-5) was nearly identical to 4.0 branch on July 13.

----- Forwarded message from Frédéric Gobry <frederic.gobry@smartdata.ch> -----

Date: Tue, 28 Oct 2003 09:41:37 +0100
From: Frédéric Gobry <frederic.gobry@smartdata.ch>
Subject: Bug#217915: zsh: crash when accessing homedirs provided by LDAP with TLS

Package: zsh
Version: 4.0.7-5
Severity: normal

First of all, I don't know for sure if this problem is in zsh proper,
but it is the only place where it occurs.

I have an LDAP server which contains unix account information. When I
type:

 cd ~user

where user is resolved via LDAP, zsh crashes. This is the stack dump:

#0  0x410893c9 in mallopt () from /lib/libc.so.6
#1  0x410885d3 in malloc () from /lib/libc.so.6
#2  0x0807b2ef in zcalloc ()
#3  0x404f3933 in deflateInit2_ () from /usr/lib/libz.so.1
#4  0x4048731a in _gnutls_comp_init () from /usr/lib/libgnutls.so.7
#5  0x4048d3bf in _gnutls_write_connection_state_init () from /usr/lib/libgnutls.so.7
#6  0x4048429e in _gnutls_get_adv_version () from /usr/lib/libgnutls.so.7
#7  0x40483571 in _gnutls_handshake_common () from /usr/lib/libgnutls.so.7
#8  0x40482f78 in gnutls_handshake () from /usr/lib/libgnutls.so.7
#9  0x4035b8ba in gnutls_SSL_free () from /usr/lib/libldap.so.2
#10 0x4035b9eb in gnutls_SSL_connect () from /usr/lib/libldap.so.2
#11 0x40359a8d in ldap_pvt_tls_init_def_ctx () from /usr/lib/libldap.so.2
#12 0x4035ab13 in ldap_int_tls_start () from /usr/lib/libldap.so.2
#13 0x4035af20 in ldap_start_tls_s () from /usr/lib/libldap.so.2
#14 0x40318e5a in _fini () from /lib/libnss_ldap.so.2
#15 0x40319fca in _fini () from /lib/libnss_ldap.so.2
#16 0x4031a525 in _fini () from /lib/libnss_ldap.so.2
#17 0x4031b649 in _nss_ldap_getpwnam_r () from /lib/libnss_ldap.so.2
#18 0x410be755 in getpwnam_r () from /lib/libc.so.6
#19 0x410be22f in getpwnam () from /lib/libc.so.6
#20 0x080980f5 in getnameddir ()
#21 0x08091ab5 in filesubstr ()
#22 0x08091763 in filesub ()
#23 0x08090f01 in prefork ()
#24 0x08060e9b in execsubst ()
#25 0x0805e809 in execlist ()
#26 0x0805dfc7 in execlist ()
#27 0x0805dd60 in execlist ()
#28 0x0805d8d7 in execode ()
#29 0x0806dd0a in loop ()
#30 0x080701c3 in zsh_main ()
#31 0x08051477 in main ()
#32 0x4102ce3e in __libc_start_main () from /lib/libc.so.6

It seems to occur in the TLS layer, which is part of GNU TLS I
guess. When configuring LDAP not to use TLS, zsh does not crash.
What makes me think that it might be zsh related is that everything
works with bash, and a simple test program that invokes getpwnam works
also. I've run zsh under valgrind, and it detected some access
violations that could lead to unexpected issues like this one.

The (long) valgrind log is appended below. I hope this might be
useful. I can easily perform additional tests if required.




==20890== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==20890== Copyright (C) 2002-2003, and GNU GPL'd, by Julian Seward.
==20890== Using valgrind-20030725, a program supervision framework for x86-linux.
==20890== Copyright (C) 2000-2003, and GNU GPL'd, by Julian Seward.
==20890== Estimated CPU clock rate is 598 MHz
==20890== For more details, rerun with: -v
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x41008ABA: _dl_relocate_object_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DD70: (within /lib/libc-2.3.2.so)
==20890==    by 0x4100B115: _dl_catch_error_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DFDB: _dl_open (in /lib/libc-2.3.2.so)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x41008B05: _dl_relocate_object_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DD70: (within /lib/libc-2.3.2.so)
==20890==    by 0x4100B115: _dl_catch_error_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DFDB: _dl_open (in /lib/libc-2.3.2.so)
==20891== 
==20891== Invalid write of size 4
==20891==    at 0x805CC10: (within /bin/zsh4)
==20891==    by 0x805D0B2: execute (in /bin/zsh4)
==20891==    by 0x8060013: (within /bin/zsh4)
==20891==    by 0x805E808: (within /bin/zsh4)
==20891==    Address 0x40CAC124 is 0 bytes after a block of size 176 alloc'd
==20891==    at 0x40015CE9: realloc (vg_replace_malloc.c:299)
==20891==    by 0x4104258C: (within /lib/libc-2.3.2.so)
==20891==    by 0x410424B7: putenv (in /lib/libc-2.3.2.so)
==20891==    by 0x8084608: addenv (in /bin/zsh4)
==20892== 
==20892== Invalid write of size 4
==20892==    at 0x805CC10: (within /bin/zsh4)
==20892==    by 0x805D0B2: execute (in /bin/zsh4)
==20892==    by 0x8060013: (within /bin/zsh4)
==20892==    by 0x805E808: (within /bin/zsh4)
==20892==    Address 0x40CAC124 is 0 bytes after a block of size 176 alloc'd
==20892==    at 0x40015CE9: realloc (vg_replace_malloc.c:299)
==20892==    by 0x4104258C: (within /lib/libc-2.3.2.so)
==20892==    by 0x410424B7: putenv (in /lib/libc-2.3.2.so)
==20892==    by 0x8084608: addenv (in /bin/zsh4)
==20894== 
==20894== Invalid write of size 4
==20894==    at 0x805CC10: (within /bin/zsh4)
==20894==    by 0x805D0B2: execute (in /bin/zsh4)
==20894==    by 0x8060013: (within /bin/zsh4)
==20894==    by 0x805E808: (within /bin/zsh4)
==20894==    Address 0x40CAC124 is 0 bytes after a block of size 176 alloc'd
==20894==    at 0x40015CE9: realloc (vg_replace_malloc.c:299)
==20894==    by 0x4104258C: (within /lib/libc-2.3.2.so)
==20894==    by 0x410424B7: putenv (in /lib/libc-2.3.2.so)
==20894==    by 0x8084608: addenv (in /bin/zsh4)
==20896== discard syms in /lib/libnss_compat-2.3.2.so due to munmap()
==20896== discard syms in /lib/libnss_nis-2.3.2.so due to munmap()
==20896== discard syms in /lib/libnss_files-2.3.2.so due to munmap()
==20896== 
==20896== ERROR SUMMARY: 14 errors from 2 contexts (suppressed: 0 from 0)
==20896== malloc/free: in use at exit: 241480 bytes in 10216 blocks.
==20896== malloc/free: 15821 allocs, 5605 frees, 1865477 bytes allocated.
==20896== For a detailed leak analysis,  rerun with: --leak-check=yes
==20896== For counts of detected errors, rerun with: -v
==20897== 
==20897== Invalid write of size 4
==20897==    at 0x805CC10: (within /bin/zsh4)
==20897==    by 0x805D0B2: execute (in /bin/zsh4)
==20897==    by 0x8060013: (within /bin/zsh4)
==20897==    by 0x805E808: (within /bin/zsh4)
==20897==    Address 0x40CAC124 is 0 bytes after a block of size 176 alloc'd
==20897==    at 0x40015CE9: realloc (vg_replace_malloc.c:299)
==20897==    by 0x4104258C: (within /lib/libc-2.3.2.so)
==20897==    by 0x410424B7: putenv (in /lib/libc-2.3.2.so)
==20897==    by 0x8084608: addenv (in /bin/zsh4)
==20898== 
==20898== Invalid write of size 4
==20898==    at 0x805CC10: (within /bin/zsh4)
==20898==    by 0x805D0B2: execute (in /bin/zsh4)
==20898==    by 0x8060013: (within /bin/zsh4)
==20898==    by 0x805E808: (within /bin/zsh4)
==20898==    Address 0x40CAC124 is 0 bytes after a block of size 176 alloc'd
==20898==    at 0x40015CE9: realloc (vg_replace_malloc.c:299)
==20898==    by 0x4104258C: (within /lib/libc-2.3.2.so)
==20898==    by 0x410424B7: putenv (in /lib/libc-2.3.2.so)
==20898==    by 0x8084608: addenv (in /bin/zsh4)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x4211F154: __memp_fopen_int_4001 (in /usr/lib/libdb-4.1.so)
==20890==    by 0x4211EB93: (within /usr/lib/libdb-4.1.so)
==20890==    by 0x420D83D3: __db_dbenv_setup_4001 (in /usr/lib/libdb-4.1.so)
==20890==    by 0x420E7E8F: __db_dbopen_4001 (in /usr/lib/libdb-4.1.so)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x4100896A: _dl_relocate_object_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DD70: (within /lib/libc-2.3.2.so)
==20890==    by 0x4100B115: _dl_catch_error_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DFDB: _dl_open (in /lib/libc-2.3.2.so)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x41008976: _dl_relocate_object_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DD70: (within /lib/libc-2.3.2.so)
==20890==    by 0x4100B115: _dl_catch_error_internal (in /lib/ld-2.3.2.so)
==20890==    by 0x4111DFDB: _dl_open (in /lib/libc-2.3.2.so)
==20890== 
==20890== Syscall param open(pathname) contains uninitialised or unaddressable byte(s)
==20890==    at 0x410E1778: __libc_open (in /lib/libc-2.3.2.so)
==20890==    by 0x41081207: _IO_file_fopen (in /lib/libc-2.3.2.so)
==20890==    by 0x4107745C: (within /lib/libc-2.3.2.so)
==20890==    by 0x410774BD: _IO_fopen (in /lib/libc-2.3.2.so)
==20890==    Address 0x0 is not stack'd, malloc'd or free'd
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x423CF008: gcry_mpi_print (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423A7982: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423A7D7E: gcry_sexp_build (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231FA14: (within /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x423CF008: gcry_mpi_print (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423A7982: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423A7D7E: gcry_sexp_build (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231FA34: (within /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x423CF008: gcry_mpi_print (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423A7982: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423A7D7E: gcry_sexp_build (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423AE3C2: gcry_pk_encrypt (in /usr/lib/libgcrypt.so.1.5.1)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x423CEF6C: gcry_mpi_print (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231F29C: _gnutls_mpi_print (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4232EF1B: _gnutls_gen_dh_common_client_kx (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231AF2B: _gnutls_send_client_kx_message (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8D3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01478 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8D9: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01460 is 0 bytes inside a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A8B3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8DB: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01488 is 16 bytes before a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8E5: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01484 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8EC: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C0148C is 12 bytes before a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8F7: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014A8 is 10 bytes after a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A8FE: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014A4 is 6 bytes after a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A907: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014AC is 14 bytes after a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A917: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014B0 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242A923: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01484 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A93B: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01490 is 8 bytes before a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242A942: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01484 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242A961: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014A4 is 6 bytes after a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A977: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C0149C is 4 bytes inside a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A984: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02AF4 is 168 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242A993: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02AF4 is 168 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242A9AB: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02AF4 is 168 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A9B1: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01468 is 7 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A8B3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A9BA: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C0146C is 11 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A8B3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242A9BD: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01490 is 8 bytes before a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Conditional jump or move depends on uninitialised value(s)
==20890==    at 0x4242A9D0: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A9E2: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02AFC is 176 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A9F4: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014DC is 11 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242A9FA: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02AF0 is 164 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 1
==20890==    at 0x4242AA00: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C0147D is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242AA04: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231929D: (within /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014E0 is 15 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242ABF7: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01468 is 7 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A8B3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242ABFA: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01478 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242AC14: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01474 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242AC1B: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01470 is 15 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A8B3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242AC2C: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01480 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242AC3D: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423223BE: _gnutls_write_connection_state_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01464 is 3 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A8B3: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C707: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01F70 is 4 bytes before a block of size 128 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B057C: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C713: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01F78 is 4 bytes inside a block of size 128 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B057C: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C71F: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01F7C is 8 bytes inside a block of size 128 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B057C: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C72B: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01F84 is 16 bytes inside a block of size 128 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B057C: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C737: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01F88 is 20 bytes inside a block of size 128 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B057C: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C745: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01F90 is 28 bytes inside a block of size 128 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B057C: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 2
==20890==    at 0x4242C74D: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02B10 is 196 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C759: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02B14 is 200 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== More than 50 errors detected.  Subsequent errors
==20890== will still be recorded, but in less detail than before.
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C75F: _tr_init (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02B0C is 192 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 2
==20890==    at 0x4242C782: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014EC is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 2
==20890==    at 0x4242C7A2: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01DE0 is 708 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0A07: gcry_md_ctl (in /usr/lib/libgcrypt.so.1.5.1)
==20890== 
==20890== Invalid write of size 2
==20890==    at 0x4242C7B4: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01ED4 is 952 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0A07: gcry_md_ctl (in /usr/lib/libgcrypt.so.1.5.1)
==20890== 
==20890== Invalid write of size 2
==20890==    at 0x4242C7C9: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C018EC is 552 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C7D2: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02B04 is 184 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C7DA: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02B00 is 180 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C7E2: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02B08 is 188 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242C7E8: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC47: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C02AF8 is 172 bytes inside a block of size 1064 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x423A6019: gcry_free (in /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x423B0584: (within /usr/lib/libgcrypt.so.1.5.1)
==20890==    by 0x4231BB93: _gnutls_hmac_deinit (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242B586: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01484 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242B589: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014A4 is 6 bytes after a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B58E: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C01494 is 4 bytes before a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Use of uninitialised value of size 4
==20890==    at 0x4242B598: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 2
==20890==    at 0x4242B598: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C1C1BE is 2458 bytes inside a block of size 4096 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x8065790: zglob (in /bin/zsh4)
==20890==    by 0x809154E: globlist (in /bin/zsh4)
==20890==    by 0x805F0C5: (within /bin/zsh4)
==20890== 
==20890== Use of uninitialised value of size 4
==20890==    at 0x4108EAEB: memset (in /lib/libc-2.3.2.so)
==20890==    by 0x4242B5B0: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4108EAEB: memset (in /lib/libc-2.3.2.so)
==20890==    by 0x4242B5B0: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    Address 0x41C0C1C0 is 0 bytes inside a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A970: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 1
==20890==    at 0x4108EAF2: memset (in /lib/libc-2.3.2.so)
==20890==    by 0x4242B5B0: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    Address 0x41C1C1BC is 2456 bytes inside a block of size 4096 free'd
==20890==    at 0x400159D1: free (vg_replace_malloc.c:220)
==20890==    by 0x8065790: zglob (in /bin/zsh4)
==20890==    by 0x809154E: globlist (in /bin/zsh4)
==20890==    by 0x805F0C5: (within /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5B1: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014C4 is 12 bytes before a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid read of size 4
==20890==    at 0x4242B5B8: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014DC is 11 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5C1: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014B4 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5C8: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014CC is 4 bytes before a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5DA: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014D0 is 0 bytes inside a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5E1: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014B8 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5E8: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014C0 is 16 bytes before a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5EF: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014D8 is 7 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5F6: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014A0 is 2 bytes after a block of size 6 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B1CE: zalloc (in /bin/zsh4)
==20890==    by 0x809097E: ztrdup (in /bin/zsh4)
==20890==    by 0x807FF27: copyparam (in /bin/zsh4)
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B5FD: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014E4 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B608: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014E8 is not stack'd, malloc'd or free'd
==20890== 
==20890== Invalid write of size 4
==20890==    at 0x4242B613: (within /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AC4F: deflateReset (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4242AA11: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)
==20890==    Address 0x41C014D4 is 3 bytes after a block of size 1 alloc'd
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x807B2EE: zcalloc (in /bin/zsh4)
==20890==    by 0x4242A932: deflateInit2_ (in /usr/lib/libz.so.1.1.4)
==20890==    by 0x4231C319: _gnutls_comp_init (in /usr/lib/libgnutls.so.7.0.9)

valgrind: vg_malloc2.c:312 (mk_plain_bszW): Assertion `bszW != 0' failed.

sched status:

Thread 1: status = Runnable, associated_mx = 0x0, associated_cv = 0x0
==20890==    at 0x400156F1: malloc (vg_replace_malloc.c:153)
==20890==    by 0x4231B92D: _gnutls_hash_copy (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x4231719E: _gnutls_finished (in /usr/lib/libgnutls.so.7.0.9)
==20890==    by 0x423175C8: _gnutls_send_finished (in /usr/lib/libgnutls.so.7.0.9)


Note: see also the FAQ.txt in the source distribution.
It contains workarounds to several common problems.

If that doesn't help, please report this bug to: jseward@acm.org

In the bug report, send all the above text, the valgrind
version, and what Linux distro you are using.  Thanks.





-- System Information:
Debian Release: testing/unstable
Architecture: i386
Kernel: Linux rhin 2.4.22 #1 Wed Aug 27 11:35:06 CEST 2003 i686
Locale: LANG=en_US.ISO8859-1, LC_CTYPE=en_US.ISO8859-1

Versions of packages zsh depends on:
ii  debconf                   1.3.15         Debian configuration management sy
ii  libc6                     2.3.2-7        GNU C Library: Shared libraries an
ii  libcap1                   1:1.10-12      support for getting/setting POSIX.
ii  libncurses5               5.3.20030719-1 Shared libraries for terminal hand

-- debconf information:
* zsh/rcmove: 


----- End forwarded message -----


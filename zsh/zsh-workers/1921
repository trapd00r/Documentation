From zsh-workers-request@euclid.skiles.gatech.edu  Mon Aug  5 18:12:54 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id SAA03740 for <mason@primenet.com.au>; Mon, 5 Aug 1996 18:12:48 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id DAA15153; Mon, 5 Aug 1996 03:49:56 -0400 (EDT)
Resent-Date: Mon, 5 Aug 1996 03:49:56 -0400 (EDT)
Message-Id: <199608050747.AAA00145@bebop.clari.net>
To: Zoltan Hidvegi <hzoli@cs.elte.hu>
Cc: zsh-workers@math.gatech.edu
Subject: Re: Weird problem with zsh running trn's Configure script
In-reply-to: hzoli's message of Mon, 05 Aug 1996 00:39:32 +0200.
	     <199608042239.AAA11670@bolyai.cs.elte.hu> 
Date: Mon, 05 Aug 1996 00:47:25 -0700
From: Wayne Davison <wayne@clari.net>
Resent-Message-ID: <"lFgMK2.0.ii3.UUQ1o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1921
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Zoltan Hidvegi writes:
> I cannot reproduce this with any version of zsh.

The problem turns out to be that the zexit() routine is calling exit()
from a forked process when it should be calling _exit().  When this
occurs, weird things happen to the open file handles, and the file
handle that is reading the input file gets changed somehow and ends
up re-reading part of the input file.

I don't know enough about the inner workings of the exec system to
know what test to make in zexit() to let it choose the right exit
function, so I cannot supply a patch.

> What system/compiler do you use?

Just so you know, I'm running zsh under Solaris x86 2.5 compiled with
gcc 2.7.2.

..wayne..


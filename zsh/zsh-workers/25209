From zsh-workers-return-25209-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 18 11:52:48 2008
Return-Path: <zsh-workers-return-25209-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15195 invoked from network); 18 Jun 2008 11:52:46 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Jun 2008 11:52:46 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 25964 invoked from network); 18 Jun 2008 11:52:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Jun 2008 11:52:40 -0000
Received: (qmail 19967 invoked by alias); 18 Jun 2008 11:52:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25209
Received: (qmail 19949 invoked from network); 18 Jun 2008 11:52:35 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 Jun 2008 11:52:35 -0000
Received: from mail.o2.co.uk (jabba.london.02.net [82.132.130.169])
	by bifrost.dotsrc.org (Postfix) with ESMTP id E17E58084FA0
	for <zsh-workers@sunsite.dk>; Wed, 18 Jun 2008 13:52:27 +0200 (CEST)
Received: from sc.homeunix.net (78.105.216.138) by mail.o2.co.uk (8.0.013.3) (authenticated as stephane.chazelas)
        id 4851DD9500F6615A; Wed, 18 Jun 2008 12:52:27 +0100
Received: from chazelas by sc.homeunix.net with local (Exim 4.69)
	(envelope-from <stephane_chazelas@yahoo.fr>)
	id 1K8wDD-00068E-76; Wed, 18 Jun 2008 12:52:27 +0100
Date: Wed, 18 Jun 2008 12:52:27 +0100
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: zsh-workers@sunsite.dk, Mikael Magnusson <mikachu@gmail.com>
Subject: Re: environment settings
Message-ID: <20080618115227.GZ5016@sc.homeunix.net>
Mail-Followup-To: zsh-workers@sunsite.dk,
	Mikael Magnusson <mikachu@gmail.com>
References: <20080617125834.GI5016@sc.homeunix.net> <20080617131154.GM10734@prunille.vinc17.org> <20080617132611.GL5016@sc.homeunix.net> <237967ef0806170628m56b80d3anaf252e68ad6c497d@mail.gmail.com> <20080617142557.GO5016@sc.homeunix.net> <20080617155429.GT10734@prunille.vinc17.org> <20080617160009.GS5016@sc.homeunix.net> <20080617195007.GV10734@prunille.vinc17.org> <20080617203229.GU5016@sc.homeunix.net> <20080618103808.GB10734@prunille.vinc17.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20080618103808.GB10734@prunille.vinc17.org>
User-Agent: Mutt/1.5.16 (2007-09-19)
X-Virus-Scanned: ClamAV 0.92.1/7498/Wed Jun 18 04:08:00 2008 on bifrost
X-Virus-Status: Clean

So, to sum up.

~user/.zshrc is the interactive shell customisation file of the user
~user/.zprofile is the login session customisation file of the user
~user/.zshenv can be used to set environment for every process
run by the corresponding user through zsh.

Most of the processes a user every runs are run during his login
session. Exceptions one can think of are:

- cron jobs: cron(8) generally doesn't run the user's shell but
  sh to parse the job command line, so .zshenv won't be sourced
  unless the cron job is a zsh script.
- ssh/rsh cmd. sshd/rshd does use the user's shell (which can be
  a pain), so .zshenv will be sourced if the user's login shell
  is zsh
- rexec, no shell involved.
- ~/public_html/xxx.cgi: no shell involved.
- ~/.forward: depends on the MTA, I don't think the user's shell
  is involved.

Basically, there's nothing for "a file that should set env
variable for every process run by this given user".

But in all the cases above, the user can explicitely call a "sh"
that sources a file that does the "exports".

-- 
Stéphane


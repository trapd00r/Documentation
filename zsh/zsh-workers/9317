From zsh-workers-return-9317-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jan 14 09:40:33 2000
Return-Path: <zsh-workers-return-9317-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25288 invoked from network); 14 Jan 2000 09:40:32 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Jan 2000 09:40:32 -0000
Received: (qmail 6340 invoked by alias); 14 Jan 2000 09:40:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9317
Received: (qmail 6330 invoked from network); 14 Jan 2000 09:40:18 -0000
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: _urls quote bookmark
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 14 Jan 2000 18:40:16 +0900
Message-ID: <rsqiu0xhtz3.fsf@crane.jaist.ac.jp>
Lines: 29
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

I rethought that bookmark should be quoted when it is completed.

Index: Completion/User/_urls
===================================================================
RCS file: /projects/zsh/zsh/Completion/User/_urls,v
retrieving revision 1.1.1.17
diff -u -r1.1.1.17 _urls
--- Completion/User/_urls	2000/01/06 14:07:49	1.1.1.17
+++ Completion/User/_urls	2000/01/14 09:37:44
@@ -88,7 +88,7 @@
     if [[ -f "$urls_path/$scheme/${(Q)PREFIX}${(Q)SUFFIX}" &&
 	  -s "$urls_path/$scheme/${(Q)PREFIX}${(Q)SUFFIX}" ]]; then
       _wanted -C bookmark bookmarks expl bookmarks &&
-          compadd "$expl[@]" "$@" -QU - \
+          compadd "$expl[@]" "$@" -U - \
               "$ipre$(<"$urls_path/$scheme/${(Q)PREFIX}${(Q)SUFFIX}")" && ret=0
     else
       if _wanted -C bookmark files expl 'bookmark'; then
@@ -107,7 +107,7 @@
   uhosts=($urls_path/$scheme/$PREFIX*$SUFFIX(/:t))
   (( $#uhosts )) || _hosts -S/ && ret=0
   [[ "$scheme" = http ]] && uhosts=($uhosts $localhttp_servername)
-  compadd "$expl[@]" "$@" -QS/ - $uhosts && ret=0
+  compadd "$expl[@]" "$@" -S/ - $uhosts && ret=0
   return ret
 fi
 host="$match[1]"
-- 
Tanaka Akira


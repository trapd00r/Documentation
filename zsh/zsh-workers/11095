From zsh-workers-return-11095-mason-zsh=primenet.com.au@sunsite.auc.dk Wed May 03 08:51:50 2000
Return-Path: <zsh-workers-return-11095-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17639 invoked from network); 3 May 2000 08:51:49 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 May 2000 08:51:49 -0000
Received: (qmail 24580 invoked by alias); 3 May 2000 08:51:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11095
Received: (qmail 24408 invoked from network); 3 May 2000 08:51:22 -0000
Date: Wed, 3 May 2000 10:51:11 +0200 (MET DST)
Message-Id: <200005030851.KAA23423@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Felix Rosencrantz's message of Tue, 2 May 2000 22:14:36 -0700
	(PDT)
Subject: Re: PATCH: yet another match-spec-cursor bug


Felix Rosencrantz wrote:

> Sven Wischnowsky wrote:
> >I've tried quite a bit now, but can't reproduce it. And you didn't
> >give us much information, did you? ;-) For example, I guess you have a 
> >`r:[^A-Z0-9]||[A-Z0-9]=*', right?
> >
> >So, can you reproduce it with `zsh -f'?
> 
> Sorry not to provide more details.  I was thinking the problem might be
> closely related to the original patch.

It may be... although I'm not sure.

> I am able to get the same intermittent problem with "zsh -f".
> myprompt@ zsh -f
> host% mkdir j ; touch j/build.out{,1,2} ; cd j
> host% bindkey -e; autoload -U compinit; compinit -D
> host% zstyle ':completion:*:complete:*' matcher-list 'm:{a-zA-Z}={A-Za-z} 
> r:|[.,_-]=* r:[^A-Z0-9]||[A-Z0-9]=* r:[A-Z0-9]||[^A-Z0-9]=* r:[^0-9]||[0-9]=*'
> host% more bui<TAB>

Both `r:[^A-Z0-9]||[A-Z0-9]=*' and `r:[^0-9]||[0-9]=*' doesn't seem to 
make much sense, does it?

> If I try completing "bui", I rarely I get only "build" or  more often I get the
> following sequence after hitting tab:
>    bui --> build.out[] --> build[.]out --> build.out[] --> build.out1[]
>          --> build.out2[]
> 
> Most times I get the correct behavior.  Though within several attempts I get
> the
> described incorrect behavior.  

That's bad news: not always repeatable. I've tried it for quite some
time now and still can't reproduce it. I'll continue to try...

The fact that you don't always get it makes me think that it may be a
problem with an not-initialised variable or memory block. Do you have
configured with mem-debug?

What really irritates me is that it doesn't go into menu-completion on 
the second TAB. Hm.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-request@math.gatech.edu Thu Sep 04 01:20:52 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 29532 invoked from network); 4 Sep 1997 01:20:50 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 4 Sep 1997 01:20:50 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id VAA19699;
	Wed, 3 Sep 1997 21:16:15 -0400 (EDT)
Resent-Date: Wed, 3 Sep 1997 21:15:46 -0400 (EDT)
Message-ID: <19970903211554.32046@supernova.math.lsa.umich.edu>
Date: Wed, 3 Sep 1997 21:15:54 -0400
From: Jahwan Kim <jahwan@math.lsa.umich.edu>
To: zsh-users@math.gatech.edu
Subject: Re: zsh always resets LINES to 24.
References: <19970902225543.21124@supernova.math.lsa.umich.edu> <199709030440.AAA01426@hzoli.home>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.81e
In-Reply-To: <199709030440.AAA01426@hzoli.home>; from Zoltan Hidvegi on Wed, Sep 03, 1997 at 12:40:18AM -0400
Resent-Message-ID: <"bYSWF3.0.5p4.1lW3q"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1001
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Quoting Zoltan Hidvegi (hzoli@frontiernet.net):
[snip]
[snip the clear explanation he gave]
[snip the patch]

    Thank you for the wonderful explanation.  I, as a user, want to point two
facts: 
    
    (1) The current behavior of zsh w.r.t. LINES and COLUMNS is not what it
should be.  As far as I experienced, bash and zsh don't have any problem
with LINES and COLUMNS.  I don't have their sources at hand, but zsh-workers
can take a look at them and tell us what's the deal.

    (2) Also the manual doesn't describe the situation properly.  The manual 
lists LINES under 'The following parameters are used by the shell:', not
under 'The following parameters are automatically set by the shell:', where
I think it should be.  And the sentences 'The number of lines for this
terminal session.  Used for printing select lists and for the line editor'
doesn't say anything about zsh resetting LINES.  Hopefully, this should be
fixed in the next release, IMHO.

    I agree with what others have suggested.  Treat LINES and COLUMNS as
magical variables, and whenever those are set by users within a shell, call
appropriate ioctl.

Cheers,
Jahwan


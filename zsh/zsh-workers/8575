From zsh-workers-return-8575-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Nov 05 16:07:38 1999
Return-Path: <zsh-workers-return-8575-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22946 invoked from network); 5 Nov 1999 16:07:37 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Nov 1999 16:07:37 -0000
Received: (qmail 28272 invoked by alias); 5 Nov 1999 16:07:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8575
Received: (qmail 28264 invoked from network); 5 Nov 1999 16:07:32 -0000
Date: Fri, 5 Nov 1999 11:06:42 -0500
From: Clint Adams <schizo@debian.org>
To: Falk Hueffner <falk.hueffner@student.uni-tuebingen.de>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: completion for bug
Message-ID: <19991105110642.A28844@dman.com>
References: <19991104111109.A17009@dman.com> <87k8nyccll.fsf@student.uni-tuebingen.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0pre4i
In-Reply-To: <87k8nyccll.fsf@student.uni-tuebingen.de>; from falk.hueffner@student.uni-tuebingen.de on Thu, Nov 04, 1999 at 07:53:42PM +0100

> There's a tool called 'reportbug' with similar functionality that
> accepts all these options (and some more), so please add it to the
> #comdef line.

Here you go:

--- Completion/Debian/_bug	 Fri Nov  5 10:23:39 1999
+++ Completion/Debian.new/_bug		 Fri Nov  5 11:00:28 1999
@@ -1,15 +1,45 @@
-#compdef bug
+#compdef bug reportbug
 
-_arguments '-c[exclude configs from report]' \
-           '-d[debug - send mail to postmaster@localhost]' \
-           '-f[argument is a file, not a package]' \
-           '-H[special header]:custom header:' \
+_bug_commonargs=('-d[debug: send mail to postmaster@localhost]' \
            '-m[maintainer-only]' \
            '-p[print to stdout instead of mail]' \
            '-q[quiet - no e-mail forwarding]' \
+           '-h[help]' \
+           '-v[version]' \
+           '*:package:_deb_packages installed')
+
+case "$words[1]" in
+bug)
+_arguments '-c[exclude configs from report]' \
+           '-f[argument is a file, not a package]' \
+           '-H[special header]:custom header:' \
            '-s[set subject]:subject:' \
            '-S[set severity]:severity:(wishlist normal important grave critical
)' \
            '-x[do not cc submitter]' \
            '-z[send configs verbatim]' \
-           '-h[help]' \
-           '*:package:_deb_packages installed'
+           "$_bug_commonargs[@]"
+;;
+
+reportbug)
+_arguments '(--no-config-files)-c[exclude configs from report]' \
+           '(--file=)-f[argument is a file, not a package]:filename:' \
+           '(--header=)-H[special header]:custom header:' \
+           '(--subject=)-s[set subject]:subject:' \
+           '(--severity=)-S[set severity]:severity:(wishlist normal important g
rave critical)' \
+           '(--no-cc)-x[do not cc submitter]' \
+           '(--no-compress)-z[send configs verbatim]' \
+           '(--af)-a[use af instead of editor]' \
+           '(--no-bts-query)-b[do not check bts]' \
+           '(--bts=)-B[use alternate BTS]:system:(debian gnome kde tdyc)' \
+           '-g[sign report with GnuPG]' \
+           '(--include=)-i[include text]:' \
+           '(--no-ldap)-l[disable LDAP support]' \
+           '(--mutt)-M[use mutt instead of editor]' \
+           '--mua=[use specified mua instead of editor]' \
+           '(--nmh --mh)-n[use comp instead of editor]' \
+           '(--output=)-o[output to file instead of mail]' \
+           '(--pgp)-P[sign report with PGP]' \
+           '--ldap[enable LDAP support]' \
+           "$_bug_commonargs[@]"
+;;
+esac


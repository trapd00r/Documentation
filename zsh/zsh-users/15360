From zsh-users-return-15360-mason-zsh=primenet.com.au@zsh.org Thu Sep 02 19:58:09 2010
Return-Path: <zsh-users-return-15360-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15126 invoked by alias); 2 Sep 2010 19:58:08 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15360
Received: (qmail 17836 invoked from network); 2 Sep 2010 19:58:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.2 required=5.0 tests=BAYES_00,TVD_RCVD_IP
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at fruitbat.org does not designate permitted sender hosts)
Date: Thu, 2 Sep 2010 12:50:15 -0700 (PDT)
From: "Peter A. Castro" <doctor@fruitbat.org>
To: Reckoner <reckoner@gmail.com>
cc: zsh-users@zsh.org
Subject: Re: cygwin chere not working with zsh version 4.3.10 but worked for
 4.3.9
In-Reply-To: <AANLkTi=YK1nSCnVToHe-E9RUccu+WCMvp46-B6CdK7sE@mail.gmail.com>
Message-ID: <alpine.LNX.2.00.1009021230450.3460@gremlin.fruitbat.org>
References: <AANLkTi=YK1nSCnVToHe-E9RUccu+WCMvp46-B6CdK7sE@mail.gmail.com>
User-Agent: Alpine 2.00 (LNX 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-1463811017-1173093776-1283457015=:3460"

---1463811017-1173093776-1283457015=:3460
Content-Type: TEXT/PLAIN; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8BIT

On Wed, 1 Sep 2010, Reckoner wrote:

> Hi,

Greetings, Reckoner,

> This command line from cygwin chere is not working anymore for zsh version
> 4.3.10, but it worked for zsh version 4.3.9:
>
>   C:\cygwin\bin\run.exe C:\cygwin\bin\rxvt.exe -e /bin/xhere /bin/zsh.exe "%L"
>
> This is supposed to open a new zsh at the directory provided by the %L
> variable. With version 4.3.10, it opens a shell, but leaves you in
> $HOME instead of %L

Hmm.  I don't recall there being anything specific with reguards to
cd'ing to $HOME on startup in 4.3.10.  The sample startup profile,
/etc/zprofile, (source is at
/usr/share/doc/zsh-4.3.10/StartupFiles/etc/zprofile) was updated to be in
sync with /etc/profile from the base-files package, though those changes
weren't all that effective (spaces, tabs, comments, etc).  In
/etc/zprofile we look for an env var named CHERE_INVOKING and either
unset it or do "cd $HOME":

# Make sure we start in home unless invoked by CHERE
if [ ! -z "${CHERE_INVOKING}" ]; then
         unset CHERE_INVOKING
else
         cd "${HOME}"
fi

So, clearly, this should be working in tandum with chere.  You might want
to try commenting out the above block and see if it does what you want.
If so, it may be that chere has changed how "CHERE_INVOKING" is being set
into the environment or, maybe the name changed, or perhaps something
related to that.

I'll install chere and see what I can find out.

> any help appreciated.

-- 
Peter A. Castro <doctor@fruitbat.org> or <Peter.Castro@oracle.com>
 	"Cats are just autistic Dogs" -- Dr. Tony Attwood
---1463811017-1173093776-1283457015=:3460--


From zsh-workers-request@euclid.skiles.gatech.edu Sun Dec 15 22:18:15 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 608 invoked from network); 15 Dec 1996 22:18:13 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 15 Dec 1996 22:18:13 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA23325; Sun, 15 Dec 1996 17:15:15 -0500 (EST)
Resent-Date: Sun, 15 Dec 1996 17:15:15 -0500 (EST)
From: Andy Wick <awick@purple.org>
Message-Id: <199612152216.RAA18253@people-eater.purple.org>
Subject: Lost Job Control
To: zsh-workers@math.gatech.edu
Date: Sun, 15 Dec 1996 17:16:05 -0500 (EST)
X-Mailer: ELM [version 2.4ME+ PL22 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"wY_NE2.0.Oi5.pX7jo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2586
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I just tried zsh 3.0.2-test-3  -f and this bug is still present but not in the 
BUGS file.  I sent a similar message about a month ago but got no response.

==

Wondering if this bug has been fixed or if it is even known.  It has been 
present for a while now.  I am using Solaris 2.5.1, but have seen it on
Solaris 2.4 and OSF1 V3.2.  It is present in both zsh 3.0 and 3.0.1, I seem to 
remember first seeing it about a year ago, but who knows.

xclock &
xclock &
%1
<Control-C>
%
<Control-C>
%
(ZSH Output: zsh: can't set tty pgrp: invalid argument)

>From now on all other jobs are "lost".  If you type "fg" you
get "fg: no job control in this shell".  If you were to do a
kill %1 instead of the "%1 ; <Control-C>" things continue to
work normally, and you get the expected "fg: no current job" for 
the output of the last "%".  If you do just a "%" instead of 
"%1" things also continue to work fine. This is the smallest sequence 
that I can find that causes the error.

I don't know anything about the code in attachtty, the bug not even be there,
but the kill() is returning success.  I only hit this bug about once every 
other week, and it bothers me since I lose my history when I have to start a 
new window.  Oh well. :-)

Thanks,
Andy

-- 
awick@vt.edu                                    Andy Wick
awick@purple.org                              Virginia Tech


From zsh-workers-return-17926-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 11 09:00:02 2002
Return-Path: <zsh-workers-return-17926-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28582 invoked from network); 11 Nov 2002 09:00:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 11 Nov 2002 09:00:01 -0000
Received: (qmail 26381 invoked by alias); 11 Nov 2002 08:59:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17926
Received: (qmail 26371 invoked from network); 11 Nov 2002 08:59:53 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15823.29265.469397.574121@wischnow.berkom.de>
Date: Mon, 11 Nov 2002 10:03:13 +0100
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: Re: completion in braces
In-Reply-To: <E189pkm-0006C2-00@bimbo.logica.co.uk>
References: <20021008045836.GA28326@aeolian.emufarm.org>
	<E189pkm-0006C2-00@bimbo.logica.co.uk>
X-Mailer: VM 7.03 under 21.5 (patch 5) "beets" XEmacs Lucid


Apologies for not replying to the original post earlier. I meant to
answer it, even had a look at the code, couldn't find a good solution
and then got drowned by real work again.

Oliver Kiddle wrote:

> Following patch seems to fix this, at least for the new completion
> system. But I'm no expert on what's going on in the completion code so
> I'd be happier if someone else such as Sven could check this and perhaps
> get it to work for the compctl system too.

The problem with the patch is that it fixes it only for the (few)
cases where the completion code uses the compquote builtin. A better
solution would be to add the change at the place where the completion
or the unambiguous string is inserted into the line (in cline_str()
and instmatch() in compresult.c). But that's not trivial (finding the
commas that have to be quoted, ignoring those that don't have to be
quoted). It was at that place where I didn't find a good solution...
(from the code's point of view). And it's still the same, so no patch
yet.


Bye
  Sven

-- 
Sven Wischnowsky                          wischnow@berkom.de


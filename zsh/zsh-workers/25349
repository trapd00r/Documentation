From zsh-workers-return-25349-mason-zsh=primenet.com.au@sunsite.dk Wed Jul 30 02:37:44 2008
Return-Path: <zsh-workers-return-25349-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23011 invoked from network); 30 Jul 2008 02:37:43 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Jul 2008 02:37:43 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 33090 invoked from network); 30 Jul 2008 02:37:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Jul 2008 02:37:40 -0000
Received: (qmail 25142 invoked by alias); 30 Jul 2008 02:37:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25349
Received: (qmail 25131 invoked from network); 30 Jul 2008 02:37:37 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 30 Jul 2008 02:37:37 -0000
Received: from wa-out-1112.google.com (wa-out-1112.google.com [209.85.146.177])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 3ED9580561C9
	for <zsh-workers@sunsite.dk>; Wed, 30 Jul 2008 04:37:33 +0200 (CEST)
Received: by wa-out-1112.google.com with SMTP id v27so123674wah.21
        for <zsh-workers@sunsite.dk>; Tue, 29 Jul 2008 19:37:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=Gybhdz6yIC9GVeliE+Es9jVhzeQrJeoMDBMJ2YRnglk=;
        b=e96Zfvo4wINefdjIzJbk4OTN6wYQ+xVFz3bNg/jqdtRQ1NBpIc79gg12w5p5slwLxf
         2F8pD+MTzDTEiUiBPtCtg05mPXMQsZ4/XNBP9tCfpjIE3NmYzPgr5qdjrs58ecwnkl0m
         bIV2uDl2dfFfkBED1S30lEc8eUUsCfkeiObgw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=NbrmM48Qxi5tEMSVgBdFT3h05BAlbo+TMGClGPAcorlxiCGeKgslGIxv6325idk49N
         foUgqCFGF1rO1Fi25W3RlAKCmI6Ps4m7ne7CTezaUIlihSehWizFSGnj5BJaPyaRa+KJ
         CcOPZfQ7IEFWFqDLy3dj0PH01Qu1LTt6TAMHs=
Received: by 10.114.157.3 with SMTP id f3mr7684432wae.40.1217385452700;
        Tue, 29 Jul 2008 19:37:32 -0700 (PDT)
Received: by 10.114.159.2 with HTTP; Tue, 29 Jul 2008 19:37:32 -0700 (PDT)
Message-ID: <6cd6de210807291937p5e864c38o6dd9785acf62632c@mail.gmail.com>
Date: Tue, 29 Jul 2008 22:37:32 -0400
From: "Rocky Bernstein" <rocky.bernstein@gmail.com>
To: zsh-workers@sunsite.dk
Subject: trap DEBUG should get run beforehand, not afterwards.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV 0.92.1/7882/Tue Jul 29 21:06:54 2008 on bifrost
X-Virus-Status: Clean

Think for example about whether you'd like to know that 'rm -fr *' is
about to occur or just occurred.

ksh introduced trap DEBUG and bash, and zsh copied it. Both ksh and
bash originally ran after the statement; I guess because that is same
as other traps. However both have switched so that it is run before
the statement.

Alas, it's impossible to contemplate writing any sort of serious
debugger unless  "trap DEBUG" gets run beforehand.

Should I attempt a patch?


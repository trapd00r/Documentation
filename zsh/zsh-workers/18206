From zsh-workers-return-18206-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 08 18:03:37 2003
Return-Path: <zsh-workers-return-18206-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14607 invoked from network); 8 Feb 2003 18:03:36 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 8 Feb 2003 18:03:36 -0000
Received: (qmail 12941 invoked by alias); 8 Feb 2003 18:03:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18206
Received: (qmail 12933 invoked from network); 8 Feb 2003 18:03:24 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 8 Feb 2003 18:03:24 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.130.94] by sunsite.dk (MessageWall 1.0.8) with SMTP; 8 Feb 2003 18:3:24 -0000
Message-ID: <20030208180325.69634.qmail@web10402.mail.yahoo.com>
Received: from [165.247.222.11] by web10402.mail.yahoo.com via HTTP; Sat, 08 Feb 2003 10:03:25 PST
Date: Sat, 8 Feb 2003 10:03:25 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Memory leaks found by valgrind
To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I ran valgrind with a recent version of zsh from cvs (about a week old, so the
line numbers don't much the code today).  And got the following memory leaks. 
The shell ran for a few days, though it didn't get heavy use.  It would be
great if other folks could run with valgrind, purify, or any other code
scouring tools.


659 bytes in 4 blocks are definitely lost in loss record 8 of 13
   at 0x40165A60: malloc (vg_clientfuncs.c:100)
   by 0x8086055: zalloc (mem.c:490)
   by 0x80E2122: calclist (compresult.c:1583)
   by 0x80E8750: complistmatches (complist.c:1607)


(This one seems to have come from children processes.)
464 bytes in 4 blocks are definitely lost in loss record 5 of 11
   at 0x40165A60: malloc (vg_clientfuncs.c:100)
   by 0x80861D5: zcalloc (mem.c:508)
   by 0x807983C: addproc (jobs.c:832)
   by 0x805D6BE: execpline (exec.c:1057)

-FR.

ps valgrind can be found at http://developer.kde.org/~sewardj/ useful for linux
i86 folkds.

__________________________________________________
Do you Yahoo!?
Yahoo! Mail Plus - Powerful. Affordable. Sign up now.
http://mailplus.yahoo.com


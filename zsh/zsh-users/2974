From zsh-users-return-2974-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Mar 18 22:55:48 2000
Return-Path: <zsh-users-return-2974-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1927 invoked from network); 18 Mar 2000 22:55:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Mar 2000 22:55:47 -0000
Received: (qmail 5919 invoked by alias); 18 Mar 2000 22:55:29 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2974
Received: (qmail 5902 invoked from network); 18 Mar 2000 22:55:27 -0000
Date: 18 Mar 2000 22:55:23 -0000
Message-Id: <Liam.953420123.464.22269.1090427954@fizz>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
From: nirva@ishiboo.com (Danny Dulai)
To: schaefer@candle.brasslantern.com (Bart Schaefer)
Cc: zsh-users@sunsite.auc.dk
Subject: Re: clear to end of display
X-Mailer: Liam [version 0.7]
In-Reply-To: <1000318181050.ZM1430@candle.brasslantern.com>

On 03/18/00, Bart Schaefer said:
>What you should be seeing is a clear-to-end-of-display before the prompt
>is printed, and a clear-to-end-of-line after it.  It's suspicious that
>you get the same thing both times, so the termcap/terminfo description
>of your terminal may be messed up.  If what you're actually getting is
>clear-screen-and-home-cursor, termcap/terminfo is _badly_ messed up.

oh, no.. I guess I phrased that badly.. its doing exactly what you said..
clear eod before prompt, clear eol after prompt.

>The %E sequence is for use in prompts that move the cursor around inside
>%{...%} blocks and need to erase lines that may be above the prompt.
>
>What's the problem with having a clear-eol after the prompt?

Well, I have a prompt that displays the time and my login/host in the upper
right of the screen. when the prompt is on the first two lines of the
terminal, the line the prompt is on gets cleared to eol, and overwrites
some of my prompt in the upper right. I have hacks in there so that clear,
^L, and reset, do an echo twice to move the cursor down two lines, but I
was hoping to avoid that.

Also, the reason eod is annoying me is due to uneccessary clears on a
transparent terminal that cause it to slightly flicker. I know this is the
fault of the terminal program, but its a fault I'd like to work around,
since it can't be fixed very easily.

Offtopic:

Transparency can either copy the X window behind it, or it can just let=
 it
fall trhough to the parent window. the fall through method is really fast
and takes no extra resources. One technique to tint the window using
transparency is when you clear the window, you overwrite it with a giant
block of a single color, but you set the graphics context to do an xor or
and or some other bitwise function built into X. That extra draw is what
causes the flicker, sometimes. It really only happens on huge terminal
windows, and avoiding it as much as possible would be nice.

--=20
___________________________________________________________________________
Danny Dulai                                           Feet. Pumice. Lotion.
http://www.ishiboo.com/~nirva/                            nirva@ishiboo.com


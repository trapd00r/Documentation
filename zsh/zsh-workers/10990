From zsh-workers-return-10990-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Apr 28 06:18:37 2000
Return-Path: <zsh-workers-return-10990-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2141 invoked from network); 28 Apr 2000 06:18:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Apr 2000 06:18:36 -0000
Received: (qmail 6159 invoked by alias); 28 Apr 2000 06:18:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10990
Received: (qmail 6145 invoked from network); 28 Apr 2000 06:18:27 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000428061451.ZM23738@candle.brasslantern.com>
Date: Fri, 28 Apr 2000 06:14:51 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Read-only special variables and "local +h"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Try running the following function.

blam() {
    setopt localoptions extendedglob
    zmodload -i zsh/parameter
    set $(typeset +r)
    while (( $# )); do
        [[ $1 = [[:alnum:]]# ]] && {
	    print -n "assigning to local $1\: "
            eval \( local +h $1 \; ${(qf)$(set | grep \^$1=)} \)
	    case $? in
	    0) print no error detected;;
	    136) print floating point exception;;
	    139) print segmentation fault;;
	    *) print other failure;;
            esac
        }
        shift
    done
}

I get:

assigning to local ARGC: segmentation fault
assigning to local ERRNO: segmentation fault
assigning to local LINENO: segmentation fault
assigning to local PPID: segmentation fault
assigning to local TTYIDLE: segmentation fault
assigning to local builtins: floating point exception
assigning to local funcstack: no error detected
assigning to local history: floating point exception
assigning to local historywords: no error detected
assigning to local jobdirs: no error detected
assigning to local jobstates: no error detected
assigning to local jobtexts: no error detected
assigning to local modules: floating point exception
assigning to local parameters: floating point exception
assigning to local reswords: no error detected
assigning to local status: no error detected
assigning to local userdirs: floating point exception

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


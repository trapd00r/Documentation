From zsh-users-return-9934-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 18 16:49:44 2006
Return-Path: <zsh-users-return-9934-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10980 invoked from network); 18 Feb 2006 16:49:42 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Feb 2006 16:49:42 -0000
Received: (qmail 9305 invoked from network); 18 Feb 2006 16:49:35 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Feb 2006 16:49:35 -0000
Received: (qmail 1208 invoked by alias); 18 Feb 2006 16:49:27 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9934
Received: (qmail 1197 invoked from network); 18 Feb 2006 16:49:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Feb 2006 16:49:26 -0000
Received: (qmail 8133 invoked from network); 18 Feb 2006 16:49:26 -0000
Received: from dsl3-63-249-88-2.cruzio.com (HELO dot.blorf.net) (63.249.88.2)
  by a.mx.sunsite.dk with SMTP; 18 Feb 2006 16:49:25 -0000
Received: by dot.blorf.net (Postfix, from userid 1000)
	id D47962CE5; Sat, 18 Feb 2006 08:49:24 -0800 (PST)
Date: Sat, 18 Feb 2006 08:49:24 -0800
From: Wayne Davison <wayned@users.sourceforge.net>
To: Wataru Kagawa <wkagawa@jota.gsc.riken.go.jp>
Cc: zsh-users@sunsite.dk
Subject: Re: problems with multibyte support in dev-4?
Message-ID: <20060218164924.GA18023@dot.blorf.net>
References: <ABF23FC4-6496-4224-9C45-51F8DE9B7878@jota.gsc.riken.go.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <ABF23FC4-6496-4224-9C45-51F8DE9B7878@jota.gsc.riken.go.jp>
User-Agent: Mutt/1.5.11+cvs20060126

On Sat, Feb 18, 2006 at 10:54:41PM +0900, Wataru Kagawa wrote:
> In dev-4, Japanese characters in tab completion lists are  
> not displayed properly (I see a bunch of numbers).

Can you show us some of the output?  That should reveal what byte values
zsh is now escaping.  There was some code added in dev-4 that escapes
invalid characters (using a $'\123' idiom) earlier in the handling of
completed values, but that shouldn't affect any extra characters that
dev-3 wasn't already escaping in the display of the completion items.
Both algorithms are using the same validity check on the strings, the
only significant difference is that one works on on unmetafied strings
(the new one) and the other works on metafied strings (the old one).

..wayne..


From zsh-workers-return-11996-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 19 18:37:31 2000
Return-Path: <zsh-workers-return-11996-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14264 invoked from network); 19 Jun 2000 18:37:30 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jun 2000 18:37:30 -0000
Received: (qmail 25362 invoked by alias); 19 Jun 2000 18:37:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11996
Received: (qmail 25353 invoked from network); 19 Jun 2000 18:37:16 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000619183706.ZM24093@candle.brasslantern.com>
Date: Mon, 19 Jun 2000 18:37:06 +0000
In-Reply-To: <200006191036.MAA23222@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "compinit (was: Re: #compdef -k menu-select glitch in 3.1.9)" (Jun 19, 12:36pm)
References: <200006191036.MAA23222@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: compinit (was: Re: #compdef -k menu-select glitch in 3.1.9)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 19, 12:36pm, Sven Wischnowsky wrote:
} Subject: compinit (was: Re: #compdef -k menu-select glitch in 3.1.9)
}
} > (1) Ask whether to use the completion system.
} > (2) Silently ignore all directories and files that fail.
} > (3) Silently accept all directories and files in $fpath.
} 
} How's the patch below? (Not committed until I get a positive reply.)
} 
} It does the tests you mentioned and makes compinit accept three new
} options. The patterns used to find `insecure' directories and files
} are:
} 
}    _i_wdirs=( ${^fpath}(Nf:g+w:,f:o+w:,^u0u${EUID}) )
}    _i_wfiles=( ${^~fpath:/.}/^([^_]*|*~|*.zwc)(N^u0u${EUID}) )

Argh.  The one problem with this is RedHat linux's penchant for creating
groups that contain exactly one user.  So it's actually safe to have a
group writable directory on RedHat as long as the name of the group is
the same as the name of the user.  This has caused problems for some
other security-conscious packages as well, notably procmail.

I think you should commit the patch as is, and I'll think some more about
the right way to address this.  It might have to be a configure-time thing.
 
} The options:
} 
} -i: silently ignore `insecure' directories and files
} -u: silently use `insecure' directories and files
} -C: the same as in 11440, i.e.: make compinit not try to rebuild the
}     dumpfile if it exists (small optimisation for people who don't
}     fiddle with new completion functions that much)
} 
} This means that `ask whether...' is the default, but that's easy to
} change, of course.
 
No, I think that's fine.

} The patch also contains the test to avoid using the same filename more 
} than once and it removes compconf.

If the former means what I think it means, then thanks very much.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


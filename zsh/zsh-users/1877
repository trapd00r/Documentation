From zsh-workers-request@math.gatech.edu Tue Oct 20 17:45:14 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1717 invoked from network); 20 Oct 1998 17:45:12 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 20 Oct 1998 17:45:12 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id NAA05033;
	Tue, 20 Oct 1998 13:36:48 -0400 (EDT)
Resent-Date: Tue, 20 Oct 1998 13:36:28 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <981020095542.ZM5494@candle.brasslantern.com>
Date: Tue, 20 Oct 1998 09:55:42 -0700
In-Reply-To: <362C9FB4.B4C08045@guildford.ericsson.se>
Comments: In reply to Daniel Rigal <daniel.rigal@deep-thought.ericsson.se>
        "Backticks In zshenv" (Oct 20,  3:35pm)
References: <362C9FB4.B4C08045@guildford.ericsson.se>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Daniel Rigal <daniel.rigal@deep-thought.ericsson.se>,
        zsh-users@math.gatech.edu
Subject: Re: Backticks In zshenv
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"Ryqvs2.0.0E1.SeCBs"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1877
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Oct 20,  3:35pm, Daniel Rigal wrote:
} Subject: Backticks In zshenv
}
} I am having a problem which is driving me up the wall! 
} Basically, Z-Shell seems to randomly decline to run commands
} in backticks in the zshenv (both the central one or the 
} user's own zshenv show this effect).

I've just seen the same problem, on a newly-installed RedHat 5.1 Linux
system with the zsh-3.0.5-2 RPM.  The /etc/zshenv file contains

	if [[ `id -u` -eq 0 ]]
	then
	    ...
	fi

and zsh randomly fails to capture the output of `id -u`.  It seems to
occur only when I rapidly exit and immediately log back in; if I wait
any longer than it takes to retype my login and password as fast as I
can, the problem disappears or becomes much more sporadic.

I ended up replacing `id -u` with $EUID and haven't seen any further
problems.  I'd assumed it was something about the "id" program.

I suspect zsh is getting some kind of a signal -- perhaps SIGWINCH? --
which is interrupting the read on the command substitution.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


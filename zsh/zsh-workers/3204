From zsh-workers-request@euclid.skiles.gatech.edu Thu Jun 05 01:39:45 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 21945 invoked from network); 5 Jun 1997 01:39:44 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 5 Jun 1997 01:39:44 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id VAA11362; Wed, 4 Jun 1997 21:32:05 -0400 (EDT)
Resent-Date: Wed, 4 Jun 1997 21:32:05 -0400 (EDT)
Message-Id: <199706050135.CAA03602@sgi16.york.ac.uk>
From: wjf103@york.ac.uk (Wez Furlong)
Date: Thu, 5 Jun 1997 02:35:46 +0100
X-Mailer: Mail User's Shell (7.2.6 beta(3) 11/17/96)
To: zsh-workers@math.gatech.edu
Subject: modules!??
Resent-Message-ID: <"vOFlJ1.0.Qn2.KSXbp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3204
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Right, here we go...

I have zsh3.1.2-beta on two systems (IRIX 5.3 and SunOS 4.1.3).

On IRIX zsh 'goes away' when it loads the comp1 module on startup. If it
can't find the comp1 module, it carries on without zle or compctl.

As a result I am using the non-dynamic version for IRIX.

Under SunOS, the modules work fine, except:

When you explicitly zmodload comp1:

	ld.so: Undefined symbol: _fallback_compctlread

The shell then exits.

also,

	% zmodload deltochar
	ld.so: Undefined symbol: _zmod

AFAICT, comp1 is not zmodloaded by zsh under SunOs on startup: you can
unload and load the zle and compctl modules as much as you like.

What I don't understand is what is going on! The man page for the
modules says that 

      THE COMP1 MODULE
          The comp1 module does nothing that is visible to the user.
          Its purpose is to provide the internal basis of the
          programmable completion mechanism.  It must be loaded before
          any module that provides a means of controlling completion
          (such as the compctl module), or that uses completions (such
          as the zle module).  This is done automatically for modules
          distributed with zsh, and for other modules can be effected
          by the use of zmodload -d.

It doesn't appear to follow this behaviour for SunOS, and seg-faults, as
is correct(?!) under IRIX....

Can anyone shed some light on this? I didn't expect the modules to work
first time on IRIX 5.3 (in fact, they all do except for the comp1
dependents), and the strange behaviour of the SunOs version is...
strange.

TIA




-- 
Wez - Electronics Undergraduate at the University of York
URL : http://www.twinklestar.demon.co.uk/

Insult Of The Day: Thou mangled plume-plucked malt-worm!


From zsh-users-return-14030-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 11 17:51:08 2009
Return-Path: <zsh-users-return-14030-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8320 invoked from network); 11 Apr 2009 17:51:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Apr 2009 17:51:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 33849 invoked from network); 11 Apr 2009 17:50:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Apr 2009 17:50:49 -0000
Received: (qmail 4867 invoked by alias); 11 Apr 2009 17:50:31 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14030
Received: (qmail 4855 invoked from network); 11 Apr 2009 17:50:30 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Apr 2009 17:50:30 -0000
Received: from pepin.polanet.pl (pepin.quarto.pl [193.34.52.2])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id A68D782D4B6A
	for <zsh-users@sunsite.dk>; Sat, 11 Apr 2009 19:50:16 +0200 (CEST)
Received: by pepin.polanet.pl (Postfix, from userid 1090)
	id 2E3806978A; Sat, 11 Apr 2009 19:50:18 +0200 (CEST)
Date: Sat, 11 Apr 2009 19:50:18 +0200
From: Tomasz Pala <gotar@polanet.pl>
To: zsh-users@sunsite.dk
Subject: Re: Completion for ethtool
Message-ID: <20090411175018.GA20676@polanet.pl>
References: <20080529123042.GA24187@pepin.polanet.pl> <20080623170935.GA7408@pepin.polanet.pl> <20080623185249.GA26138@pepin.polanet.pl> <20080624124700.GA15726@pepin.polanet.pl>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="17pEHd4RhPHOinZp"
Content-Disposition: inline
In-Reply-To: <20080624124700.GA15726@pepin.polanet.pl>
User-Agent: Mutt/1.4.2.3i
X-Virus-Scanned: ClamAV 0.92.1/9224/Fri Apr 10 23:49:29 2009 on bifrost
X-Virus-Status: Clean


--17pEHd4RhPHOinZp
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: inline

Hello,

update for ethtool completion attached.

regards,
-- 
Tomasz Pala <gotar@pld-linux.org>

--17pEHd4RhPHOinZp
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: attachment; filename="zsh-ethtool.patch"

--- _ethtool.orig	2008-11-30 15:31:11.000000000 +0100
+++ _ethtool	2009-04-11 19:43:58.000000000 +0200
@@ -7,7 +7,7 @@
 	  rx|tx)
 		if [[ $words[2] = '-G' ]] && _message -e n 'number of ring entries' || _wanted -x onoff expl 'enabled' compadd off on
 	  ;;
-	  autoneg|adaptive-rx|adaptive-tx|raw|sg|tso)
+	  autoneg|adaptive-rx|adaptive-tx|raw|hex|sg|tso|ufo|gso)
 		_wanted -x onoff expl 'enabled' compadd off on
 	  ;;
 	  rx-usecs|rx-frames|rx-usecs-irq|rx-frames-irq|tx-usecs|tx-frames|tx-usecs-irq|tx-frames-irq|stats-block-usecs|pkt-rate-low|rx-usecs-low|rx-frames-low|tx-usecs-low|tx-frames-low|pkt-rate-high|rx-usecs-high|rx-frames-high|tx-usecs-high|tx-frames-high|sample-interval|rx-mini|rx-jumbo|offset|length|magic|value|phyad|msglvl)
@@ -22,6 +22,18 @@
 	  port)
 		_wanted -x port expl 'device port' compadd tp aui bnc mii
 	  ;;
+	  advertise)
+		_values 'hexidecimal value (or a combination of the following)' \
+			'0x001[10 Half]' \
+			'0x002[10 Full]' \
+			'0x004[100 Half]' \
+			'0x008[100 Full]' \
+			'0x010[1000 Half(not supported by IEEE standards)]' \
+			'0x020[1000 Full]' \
+			'0x8000[2500 Full(not supported by IEEE standards)]' \
+			'0x800[10000 Full]' \
+			'0x03F[Auto]'
+	  ;;
 	  xcvr)
 		_wanted -x xcvr expl 'transceiver type' compadd internal external
 	  ;;
@@ -39,15 +51,18 @@
 	  sopass)
 		_message -e secureon 'password - 6 bytes in ethernet MAC hex format (xx:yy:zz:aa:bb:cc)'
 	  ;;
+	  file)
+		_wanted files expl 'raw register dump files' _files
+	  ;;
 	  *)
 	case $words[2]; in
-	  -A)
+	  -A|--pause)
 		_values -S ' ' -w 'pause options' \
 			'autoneg[Specify if pause autonegotiation is enabled]' \
 			'rx[Specify if RX pause is enabled]' \
 			'tx[Specify if TX pause is enabled]'
 	  ;;
-	  -C)
+	  -C|--coalesce)
 		_values -S ' ' -w 'coalescing settings' \
 			'adaptive-rx' 'adaptive-tx' \
 			'rx-usecs' 'rx-frames' 'rx-usecs-irq' 'rx-frames-irq' \
@@ -61,50 +76,55 @@
 			'tx-usecs-high' 'tx-frames-high' \
 			'sample-interval'
 	  ;;
-	  -G)
+	  -G|--set-ring)
 		_values -S ' ' -w 'ring parameters' \
 			'rx[Change number of ring entries for the RX ring]' \
 			'rx-mini[Change number of ring entries for the RX Mini ring]' \
 			'rx-jumbo[Change number of ring entries for the RX Jumbo ring]' \
 			'tx[Change number of ring entries for the TX ring]'
 	  ;;
-	  -d)
+	  -d|--register-dump)
 		_values -S ' ' -w 'register dump options' \
-			'raw[dump raw register data]'
+			'hex[dump hex register data]' \
+			'raw[dump raw register data]' \
+			'file[use contents from file rather than device]'
 	  ;;
-	  -e)
+	  -e|--eeprom-dump)
 		_values -S ' ' -w 'EEPROM dump options' \
 			'raw[dump raw EEPROM data]' \
 			'offset[dump certain portions of the EEPROM]' \
 			'length[dump certain portions of the EEPROM]'
 	  ;;
-	  -E)
+	  -E|--change-eeprom)
 		_values -S ' ' -w 'EEPROM values' \
 			'magic[device-specific key]' \
 			'offset[select byte]' \
 			'value[new value]'
 	  ;;
-	  -K)
+	  -K|--offload)
 		_values -S ' ' -w 'offload options' \
 			'rx[Specify if RX checksumming is enabled]' \
 			'tx[Specify if TX checksumming is enabled]' \
 			'sg[Specify if scatter-gather is enabled]' \
-			'tso[Specify if tcp segmentation offload is enabled]'
+			'tso[Specify if TCP segmentation offload is enabled]' \
+			'ufo[Specify if UDP segmentation offload is enabled]' \
+			'gso[Specify if generic segmentation offload is enabled]'
 	  ;;
-	  -p)
+	  -p|--identify)
 		if [[ $CURRENT -eq 4 ]] && _message -e length 'seconds'
 	  ;;
-	  -t)
+	  -t|--test)
 		_values -S ' ' -w 'selftest option' \
 			'(online)offline:perform full set of tests possibly causing normal operation interruption (default)]' \
 			'(offline)online:perform limited set of tests do not interrupting normal adapter operation]'
 	  ;;
-	  -s)
+	  -s|--change)
 		_values -S ' ' -w 'change setting' \
 			'speed[Set speed in Mb/s]' \
 			'duplex[Set full or half duplex mode]' \
 			'port[Select device port]' \
 			'autoneg[Specify if autonegotiation is enabled]' \
+			'advertise[Set the speed and duplex advertised by autonegotiation]' \
 			'phyad[PHY address]' \
 			'xcvr[Select transceiver type]' \
 			'wol[Set Wake-on-LAN options]' \
@@ -116,26 +136,29 @@
 	esac
 fi
 
-cmds=(-h -a -A -c -C -g -G -i -d -e -E -k -K -p -r -S -t -s)
+cmds=(-h -a -A -c -C -g -G -i -d -e -E -k -K -p -r -S -t -s
+	--help --show-pause --pause --show-coalesce --coalesce --show-ring
+	--set-ring --driver --register-dump --eeprom-dump --change-eeprom
+	--show-offload --offload --identify --negotiate --statistics --test --change)
 
 _arguments \
 	"($cmds)1:interface:_net_interfaces" \
-	"($cmds 1)-h[shows a short help message]" \
-	"($cmds)-a[queries the specified ethernet device for pause parameter information]" \
-	"($cmds)-A[change the pause parameters of the specified ethernet device]" \
-	"($cmds)-c[queries the specified ethernet device for coalescing information]" \
-	"($cmds)-C[change the coalescing settings of the specified ethernet device]" \
-	"($cmds)-g[queries the specified ethernet device for RX/TX ring parameter information]" \
-	"($cmds)-G[change the RX/TX ring parameters of the specified ethernet device]" \
-	"($cmds)-i[queries the specified ethernet device for associated driver information]" \
-	"($cmds)-d[retrieves and prints a register dump for the specified ethernet device]" \
-	"($cmds)-e[retrieves and prints an EEPROM dump for the specified ethernet device]" \
-	"($cmds)-E[Changes EEPROM byte for the specified ethernet device]" \
-	"($cmds)-k[queries the specified ethernet device for offload information]" \
-	"($cmds)-K[change the offload parameters of the specified ethernet device]" \
-	"($cmds)-p[initiates adapter-specific action intended to identify the adapter by sight]" \
-	"($cmds)-r[restarts auto-negotiation on the specified ethernet device]" \
-	"($cmds)-S[queries the specified ethernet device for NIC- and driver-specific statistics]" \
-	"($cmds)-t[executes adapter selftest on the specified ethernet device]" \
-	"($cmds)-s[allows changing some or all settings of the specified ethernet device]" \
+	"($cmds 1)"{-h,--help}'[shows a short help message]' \
+	"($cmds)"{-a,--show-pause}'[queries the specified ethernet device for pause parameter information]' \
+	"($cmds)"{-A,--pause}'[change the pause parameters of the specified ethernet device]' \
+	"($cmds)"{-c,--show-coalesce}'[queries the specified ethernet device for coalescing information]' \
+	"($cmds)"{-C,--coalesce}'[change the coalescing settings of the specified ethernet device]' \
+	"($cmds)"{-g,--show-ring}'[queries the specified ethernet device for RX/TX ring parameter information]' \
+	"($cmds)"{-G,--set-ring}'[change the RX/TX ring parameters of the specified ethernet device]' \
+	"($cmds)"{-i,--driver}'[queries the specified ethernet device for associated driver information]' \
+	"($cmds)"{-d,--register-dump}'[retrieves and prints a register dump for the specified ethernet device]' \
+	"($cmds)"{-e,--eeprom-dump}'[retrieves and prints an EEPROM dump for the specified ethernet device]' \
+	"($cmds)"{-E,--change-eeprom}'[Changes EEPROM byte for the specified ethernet device]' \
+	"($cmds)"{-k,--show-offload}'[queries the specified ethernet device for offload information]' \
+	"($cmds)"{-K,--offload}'[change the offload parameters of the specified ethernet device]' \
+	"($cmds)"{-p,--identify}'[initiates adapter-specific action intended to identify the adapter by sight]' \
+	"($cmds)"{-r,--negotiate}'[restarts auto-negotiation on the specified ethernet device]' \
+	"($cmds)"{-S,--statistics}'[queries the specified ethernet device for NIC- and driver-specific statistics]' \
+	"($cmds)"{-t,--test}'[executes adapter selftest on the specified ethernet device]' \
+	"($cmds)"{-s,--change}'[allows changing some or all settings of the specified ethernet device]' \
 	'*:' && ret=0

--17pEHd4RhPHOinZp--


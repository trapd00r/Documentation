From zsh-workers-return-8981-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 09 15:07:18 1999
Return-Path: <zsh-workers-return-8981-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7414 invoked from network); 9 Dec 1999 15:07:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Dec 1999 15:07:17 -0000
Received: (qmail 24677 invoked by alias); 9 Dec 1999 15:07:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8981
Received: (qmail 24670 invoked from network); 9 Dec 1999 15:07:00 -0000
Date: Thu, 9 Dec 1999 16:06:58 +0100 (MET)
Message-Id: <199912091506.QAA08106@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Thu, 9 Dec 1999 17:20:00 +0300
Subject: RE: what happened to accept-and-infer-next-hostory ?


Andrej Borsenkow wrote:

> > Which it does for me. Hm, do I have to get pws-11 now to see if/how
> > this differs from the CVS version? Have you tried with `zsh -f'?
> >
> 
> This does not work if _oldlist is used. I have completer as '_oldlist _complete
> _match'. It is enough to simply set completer '_oldlist ...' without additional
> configuration.

Ah. A rather long-standing bug then.

complist should say that the old list is not to be used with a-a-i-n-h.

Bye
 Sven

diff -ru ../z.old/Src/Zle/complist.c Src/Zle/complist.c
--- ../z.old/Src/Zle/complist.c	Thu Dec  9 15:55:43 1999
+++ Src/Zle/complist.c	Thu Dec  9 15:58:19 1999
@@ -916,7 +916,7 @@
 		s->nbrbeg = nbrbeg;
 		s->nbrend = nbrend;
 		s->nmatches = nmatches;
-		menucmp = menuacc = 0;
+		menucmp = menuacc = hasoldlist = 0;
 		fixsuffix();
 		validlist = 0;
 		amatches = pmatches = lastmatches = NULL;

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


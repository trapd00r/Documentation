From zsh-workers-return-10797-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 18 01:20:38 2000
Return-Path: <zsh-workers-return-10797-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23397 invoked from network); 18 Apr 2000 01:20:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Apr 2000 01:20:33 -0000
Received: (qmail 20125 invoked by alias); 18 Apr 2000 01:20:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10797
Received: (qmail 20113 invoked from network); 18 Apr 2000 01:20:08 -0000
Message-ID: <20000418012006.8348.qmail@web1303.mail.yahoo.com>
Date: Mon, 17 Apr 2000 18:20:06 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Re: PATCH: partial word completion
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Zsh seems to crash now with this patch.  The third parameter to sub_join()
is NULL, which causes the crash.  Here's the stack trace:

#0  0xed1ac in sub_join (a=0x16e948, b=0x16de38, e=0x0, anew=1)
    at compmatch.c:1683
#1  0xededc in join_clines (o=0x16de38, n=0x16e948) at compmatch.c:1900
#2  0xe5240 in add_match_data (alt=0, str=0x170058 "zsh3.1.5", line=0x16e948, 
    ipre=0x16f278 "", ripre=0x0, isuf=0x16f280 "", pre=0x0, prpre=0x16f340 "", 
    ppre=0x16f298 "", pline=0x0, psuf=0x0, sline=0x0, suf=0x0, flags=1, 
    exact=0) at compcore.c:2205
#3  0xe3ba0 in addmatches (dat=0xefff7a10, argv=0xefff7b70) at compcore.c:1871
#4  0xd9f70 in bin_compadd (name=0x1c42c0 "compadd", argv=0xefff7b08, 
    ops=0xefff7c80 "", func=0) at complete.c:562
#5  0x24a44 in execbuiltin (args=0x1c4228, bn=0x15a70c) at builtin.c:368


Sorry not to provide a simple test case.  If you need that I can investigate
a little more.  The error happened in a directory with many files, and
some simple pruning didn't uncover the error.

-FR.


__________________________________________________
Do You Yahoo!?
Send online invitations with Yahoo! Invites.
http://invites.yahoo.com


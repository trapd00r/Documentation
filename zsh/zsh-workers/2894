From zsh-workers-request@euclid.skiles.gatech.edu Mon Feb 10 22:41:14 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 24409 invoked from network); 10 Feb 1997 22:41:12 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 10 Feb 1997 22:41:12 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA20614; Mon, 10 Feb 1997 17:34:56 -0500 (EST)
Resent-Date: Mon, 10 Feb 1997 17:34:56 -0500 (EST)
Message-Id: <199702101636.RAA00709@hydra.ifh.de>
To: Zefram <zefram@dcs.warwick.ac.uk>
Subject: Re: autoparamkeys broken in 3.1.1 
In-reply-to: "Zefram"'s message of "Mon, 10 Feb 1997 15:02:01 MET."
             <16084.199702101502@stone.dcs.warwick.ac.uk> 
Date: Mon, 10 Feb 1997 17:36:37 +0100
From: Peter Stephenson <pws@ifh.de>
Sender: zefram@dcs.warwick.ac.uk
Resent-Message-ID: <"UA0bV.0.-15.FAw_o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2894
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Zefram wrote:
> I have neither the time nor facilities here to fix this properly, but
> at a wild guess, try putting
> 
> 	else if(complexpect)
> 	    addedsuffix = 1;
> 
> on the end of the new version of the conditional.

That certainly fixes the problem I was on about.  I didn't see any
menu problems with parameters appearing, but I'm not sure how to
reproduce those.  Here's that as a patch on top of the previous one.

*** Src/Zle/zle_tricky.c.apk	Mon Feb 10 13:34:40 1997
--- Src/Zle/zle_tricky.c	Mon Feb 10 17:23:31 1997
***************
*** 3310,3315 ****
--- 3310,3317 ----
  		insc = 1;
  		if (singlec != ' ')
  		    addedsuffix = menuinsc = 1;
+ 		else if (complexpect)
+ 		    addedsuffix = 1;
  		inscs = cs;
  		if (!menuwe)
  		    cs = ccs;

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutsches Elektronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


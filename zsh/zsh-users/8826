From zsh-users-return-8826-mason-zsh=primenet.com.au@sunsite.dk Fri May 13 17:04:50 2005
Return-Path: <zsh-users-return-8826-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19271 invoked from network); 13 May 2005 17:04:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 May 2005 17:04:49 -0000
Received: (qmail 33732 invoked from network); 13 May 2005 17:04:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 May 2005 17:04:42 -0000
Received: (qmail 11613 invoked by alias); 13 May 2005 17:04:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8826
Received: (qmail 11598 invoked from network); 13 May 2005 17:04:35 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 13 May 2005 17:04:35 -0000
Received: (qmail 32835 invoked from network); 13 May 2005 17:04:35 -0000
Received: from sodans.usata.org (61.211.239.46)
  by a.mx.sunsite.dk with SMTP; 13 May 2005 17:04:28 -0000
Received: from [192.168.1.12] (ZQ222114.ppp.dion.ne.jp [222.13.222.114])
	by sodans.usata.org (Postfix) with ESMTP id 4F235AADF
	for <zsh-users@sunsite.dk>; Sat, 14 May 2005 02:04:16 +0900 (JST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <3959597308a0688a2828efe0655414b2@h8.dion.ne.jp>
References: <E0B61825-6DAD-46DD-84E1-C9FEAC27F437@kalama.no-ip.org> <F4DF8D87-91FF-4917-B61B-3BE56B5A95D3@kalama.no-ip.org> <3959597308a0688a2828efe0655414b2@h8.dion.ne.jp>
Content-Type: multipart/mixed; boundary=Apple-Mail-5-257701549
Message-Id: <fcf8146fc242e7fe7e319b527e63d0ac@h8.dion.ne.jp>
From: Motoi Washida <a66@h8.dion.ne.jp>
Subject: Re: _mac_applications patch for Mac OS X 10.4
Date: Sat, 14 May 2005 02:04:14 +0900
To: zsh-users@sunsite.dk
X-Mailer: Apple Mail (2.622)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6


--Apple-Mail-5-257701549
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Here is a patch to _retreive_mac_apps.

On 2005/05/12, at 1:27, Motoi Washida wrote:

> Hi Ryan,
>
> I want to try your great patch, but I have one remote Tiger machine, 
> which has not finished indexing. :(
>
> On 2005/05/12, at 0:42, lists wrote:
>
>> After poking around some more, I think the best thing to do would be 
>> to modify _retrieve_mac_apps() so that it uses Spotlight to find the 
>> apps if you're running Tiger, and the old way if you're not running 
>> Tiger.  This way the apps would be found using Spotlight the first 
>> time, then added to the cache so you don't have to keep using mdfind 
>> every time you try to tab complete an app's name.  Motoi, since you 
>> are the expert on _retrieve_mac_apps() what do you think?
> I was just thinking about modifying _retrieve_mac_apps() to use Bill 
> and Wataru's idea. If you don't mind, I'll modify and commit it.
>
>>
>> -Ryan
>>
>>
>> On May 11, 2005, at 9:49 AM, lists wrote:
>>
>>> I've done some tweaking based on the submission in 
>>> <http://www.zsh.org/mla/users/2005/msg00479.html> (thanks Scott and 
>>> Wataru) and have put together a patch for _mac_applications which 
>>> uses the _tiger_mac_applications function from the aforementioned 
>>> submission (which I've renamed to _spotlight_mac_apps since 
>>> Spotlight will probably be around after Tiger).  _mac_applications 
>>> will now use Spotlight (via _spotlight_mac_apps) if you're running 
>>> Mac OS X 10.4, and will fall back to the old way if you're not.  I'm 
>>> also including the modified _spotlight_mac_apps function (which will 
>>> now check for an Applications folder in your home directory as 
>>> well).  Please let me know if there are any problems/objections.
>>>
>>> Thanks,
>>> Ryan
>>>
>>>
>>> <_mac_applications.diff.gz>
>>> <_spotlight_mac_apps.gz>
>>>
>>
>>
> --
> Motoi Washida
>
>
--
Motoi Washida

--Apple-Mail-5-257701549
Content-Transfer-Encoding: base64
Content-Type: application/x-gzip;
	x-unix-mode=0644;
	name="_retrieve_mac_apps.patch.gz"
Content-Disposition: attachment;
	filename=_retrieve_mac_apps.patch.gz

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

--Apple-Mail-5-257701549--


From zsh-workers-return-5667-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Mar 07 15:46:50 1999
Return-Path: <zsh-workers-return-5667-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16508 invoked from network); 7 Mar 1999 15:46:49 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Mar 1999 15:46:49 -0000
Received: (qmail 24293 invoked by alias); 7 Mar 1999 15:46:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5667
Received: (qmail 24286 invoked from network); 7 Mar 1999 15:46:24 -0000
Message-Id: <9903071530.AA17294@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: pws-11
Date: Sun, 07 Mar 1999 16:30:26 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

in http://www.ifh.de/~pws/computing/
-rw-r--r--   1 pws quadrics  307532 Mar  7 16:16 zsh-3.1.5-pws-11.doc.tar.bz2
-rw-r--r--   1 pws quadrics  467032 Mar  7 16:16 zsh-3.1.5-pws-11.doc.tar.gz
-rw-r--r--   1 pws quadrics  707577 Mar  7 16:16 zsh-3.1.5-pws-11.tar.bz2
-rw-r--r--   1 pws quadrics  875582 Mar  7 16:16 zsh-3.1.5-pws-11.tar.gz

Sven, you'd better diff the key files against yours, since it's entirely
possible I've missed something.

There is one change in configuration: if you create your own list of
libraries to be compiled into the shell, you should now use the file
mymods.conf instead of the automatically generated modules-bltin, which
will be unconditionally recreated after a `make clean'; mymods.conf is only
deleted with `make distclean' and is otherwise used unconditionally if
present.  You're supposed to `make clean' if you alter mymods.conf after
compiling once, but actually you can probably get away with deleting
modules-bltin:  mymods.conf quite deliberately doesn't appear in the
dependency list, as this sort of thing was causing hair-tearing etc.

Status report on completion: the parts changed this week (complist is now
called compgen, many of the variables have been absorbed into the
associative array $compstate) are probably near their final form --- at
least, until someone other than the four of us tries it out and finds they
don't like it.  However, Sven still plans to add some other bits,
e.g. controlling the re-display of an existing completion list.  The system
now has correcting completion: see the comments in
Completion/Core/_main_complete.

(I put back the change I made to workaround an untraced bug on AIX,
replacing an ncalloc() by a zhalloc() in zle_tricky.c, but it might be
sensible to replace all ncalloc's by zhalloc's where there is definitely no
intention of ever freeing the memory explicitly.)

Here are the changes.


pws: 5557: configure.in for making sure signals really are defined in the
file found.  This was in pws-10, but the patch didn't appear on the list
for four days.

Larry P. Schrof: 5550: last -> previous in history documentation

Sven: 5560: subscripting fixes in params.c: flags for scalars and
converting integer AA element to string

pws: 5561: attempted (untested) fix for QNX4 compilation; halloc() is now
zhalloc().  (By private email from probin@qnx.co.uk, it seems the QNX
problems are more considerable with 3.1.5.)

Sven: 5564, 5577, 5579: massive new completion reworking with $words,
$compstate, etc., etc.

Sven: 5565, 5576: $NUMERIC gives the numeric argument in a zle widget

Sven: 5566: $foo[(b.<index>.i)<match>] starts searching $foo for for
<match> at <index>

Sven: 5571: Functions/Builtins/_cd tests if $cdpath is set

Sven: 5574, 5578: Completion/README notes

Sven: 5582: _path_files will expand /u/ -> /usr/ even if /u exists if
nothing later on would match otherwise (got that?)

pws: 5583: post-patch restructuring of _mh, _zftp, _most_recent_file.

Sven: 5586: addmatch fix (old completion wasn't working)

Sven: 5588: fix _most_recent_file idiocy

Sven: 5590: compadd -p, -s and -P fixes

Sven: 5593: _path_files -w

Matt: 5596: Makefile dependencies for module compilation

pws; 5597: Use separate file mymods.conf for your own builtin modules
rather than the automatically generated modules-bltin.

Sven: 5598: a neater way of handling compadd -p/-P

Sven: 5599: _comp_parts, _path_files tweaks

Sven: 5601: compstate[exact_string] and compstate[total_matchers]

pws: 5602: _tar

Sven: 5603: compstat[pattern_match]

Sven: 5604: approximate completion.  (this is it.  every other shell is out
of the game.)

Sven: 5605: explanation listing fix

Sven: 5613: copy scalar variable used for compgen -y

Bart: 5614: Completion/Base/_match_test works out of the box

Sven: 5620: fix for completion inside expansible braces

Sven: 5621: manual for nmatches and matcher

Sven: 5622: zshcompwid manual: clarifications

Sven: 5623: -X strings with compadd were mishandled

Sven: 5624: CCORIG required to be offered original string when correcting
using COMPCORRECT

pws: 5628: _builtin, _cd, _most_recent_file

Sven: 5629: approximate correction patches

Sven: 5631: compilation warnings

Sven: 5637: mustuseheap check in complistflags

Sven: 5640: _multi_parts, _path_files, _tar

Andrej: 5650: more tricks with _configure

Sven: 5651: widespread completion fixes

Sven: 5659: globcomplete changes

Sven: 5662: / following brace parameter

Sven: 5663: compctl -i _completion_function

Sven: 5665: return values from completion functions

Sven: 5666: calling inststrlen() with a null string

pws: from autoconf 2.13: new config.sub

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


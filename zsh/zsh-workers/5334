From zsh-workers-return-5334-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 11 06:44:57 1999
Return-Path: <zsh-workers-return-5334-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10688 invoked from network); 11 Feb 1999 06:44:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Feb 1999 06:44:56 -0000
Received: (qmail 26592 invoked by alias); 11 Feb 1999 06:44:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5334
Received: (qmail 26584 invoked from network); 11 Feb 1999 06:44:17 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <990210224403.ZM901@candle.brasslantern.com>
Date: Wed, 10 Feb 1999 22:44:03 -0800
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@sunsite.auc.dk
Subject: Something very weird just happened
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I ran `zed -f __find` where __find is from the new-completion-examples, and
a lot of the '-' characters inside [[ ... ]] expressions got doubled.  I
suspect somebody forgot to tweak a pretty-printing routine to handle the new
condition codes?

Here's the output of `functions __find`:

__find () {
        local _opre _oipre _oargs _ocur
        _opre="$PREFIX" 
        _oipre="$IPREFIX" 
        _oargs=("$@") 
        _ocur="$CURRENT" 
        if [[ -mbetween --(ok|exec) \\\; ]]
        then
                do-complete "$@" || return 1
        elif [[ --iprefix - ]]
        then
                complist -s 'daystart {max,min,}depth follow noleaf version xdev \
        {a,c,}newer {a,c,m}{min,time} empty false {fs,x,}type gid inum links \
        {i,}{l,}name {no,}{user,group} path perm regex size true uid used \
        exec {f,}print{f,0,} ok prune ls'
                PREFIX="$_opre" 
                IPREFIX="$_oipre" 
                argv=("$_oargs[@]") 
                CURRENT="$_ocur" 
        elif [[ --position 1 ]]
        then
                complist -g '. ..'
                files -g '(-/)'
        elif [[ -mcurrent --1 -((a|c|)newer|fprint(|0|f)) ]]
        then
                files
        elif [[ -current --1 -fstype ]]
        then
                complist -k '(ufs 4.2 4.3 nfs tmp mfs S51K S52K)'
        elif [[ -current --1 -group ]]
        then
                complist -k groups
        elif [[ -current --1 -user ]]
        then
                complist -u
        fi
}

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


Delivered-To: mason-zsh@primenet.com.au
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
Date: Wed, 3 Feb 1999 10:55:43 +0100 (MET)
Message-Id: <199902030955.KAA10903@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Wed, 3 Feb 1999 00:39:08 -0800
Subject: Re: ${(P)${foo}} (Re: Associative array ordering)
X-Mailing-List: <zsh-workers@sunsite.auc.dk> 5199


Bart Schaefer wrote:

> Let's go this way:  Implement ${(P)foo}, the same as ${(P)${foo}} where
> the inner ${...} has no flags or modifiers, and leave ${!foo} undefined
> until we do real namerefs (if we ever do).

Yep.

Bye
 Sven

--- os/subst.c	Wed Feb  3 10:55:01 1999
+++ Src/subst.c	Wed Feb  3 10:48:21 1999
@@ -991,6 +991,12 @@
 	copied = 1;
 	*s = sav;
 	v = (Value) NULL;
+    } else if (aspar) {
+	if ((v = getvalue(&s, 1))) {
+	    val = idbeg = getstrvalue(v);
+	    subexp = 1;
+	} else
+	    vunset = 1;
     }
     if (!subexp || aspar) {
 	char *ov = val;

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-9089-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 16 18:02:34 1999
Return-Path: <zsh-workers-return-9089-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9540 invoked from network); 16 Dec 1999 18:02:33 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?BZuYCbDXgPT5ZKNZVkl1uMFtrpCwSyts?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 16 Dec 1999 18:02:33 -0000
Received: (qmail 1818 invoked from network); 16 Dec 1999 18:02:24 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns2.primenet.com.au with SMTP; 16 Dec 1999 18:02:24 -0000
Received: (qmail 9405 invoked by alias); 16 Dec 1999 18:01:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9089
Received: (qmail 9398 invoked from network); 16 Dec 1999 18:01:09 -0000
Sender: tim@ftlsol.com
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: zsh and memory
References: <199912161039.LAA13865@beta.informatik.hu-berlin.de>
Mime-Version: 1.0 (generated by tm-edit 7.108)
Content-Type: text/plain; charset=US-ASCII
From: Timothy Writer <tim@starnix.com>
Date: 16 Dec 1999 13:01:02 -0500
In-Reply-To: Sven Wischnowsky's message of "Thu, 16 Dec 1999 11:39:48 +0100 (MET)"
Message-ID: <m3wvqeahpd.fsf@ganesh.ftlsol.com>
Lines: 22
X-Mailer: Gnus v5.6.45/XEmacs 21.1 - "20 Minutes to Nikko"

Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

> I wrote:
> 
> > I'm really tempted to allocate heaps using mmap()
> > (anonymous) to get them out of the way of the zalloc() allocator. I
> > small test showed that with this I only get 39KB of free memory after
> > the completion test, which is really not too bad. I don't have a patch 
> > for that yet, though.
> 
> ... and now I don't think I'll ever write one: neither Solaris nor
> Linux seem to have MAP_ANONYMOUS. Sniff.

Hmmm ... how are you calling mmap exactly?  I've definitely used
MAP_ANONYMOUS on Linux (as far back as kernel 1.3) and I think I've used it
on Solaris too.  Linux doesn't have shared anonymous mappings, i.e. you have
to use MAP_PRIVATE with MAP_ANONYMOUS.

-- 
tim writer <tim@starnix.com>                                  starnix inc.
tollfree: 1-87-pro-linux                         brampton, ontario, canada
http://www.starnix.com              professional linux services & products


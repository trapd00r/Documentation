From zsh-workers-return-16449-mason-zsh=primenet.com.au@sunsite.dk Mon Jan 14 13:08:38 2002
Return-Path: <zsh-workers-return-16449-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21412 invoked from network); 14 Jan 2002 13:08:36 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 Jan 2002 13:08:36 -0000
Received: (qmail 3312 invoked by alias); 14 Jan 2002 13:08:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16449
Received: (qmail 3297 invoked from network); 14 Jan 2002 13:08:29 -0000
Message-ID: <20020114130827.99223.qmail@web9304.mail.yahoo.com>
Date: Mon, 14 Jan 2002 13:08:27 +0000 (GMT)
From: =?iso-8859-1?q?Oliver=20Kiddle?= <okiddle@yahoo.co.uk>
Subject: PATCH: _chkconfig
To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

New completion for both IRIX and RedHat chkconfig.

#compdef chkconfig

local curcontext="$curcontext" state line ret=1

case $OSTYPE in
linux*)
  _arguments -C \
    '(- 2)--list[list services]' \
    '(-)--level[specify runlevels to apply to]:-:_values -s "" "run
levels" 1 2 3 4 5 6 7' \
    '(- 2)--add[add new service]' \
    '(- 2)--del[remove service from chkconfig management]' \
    '1:service name:->services' \
    '2:state:(on off reset)' && ret=0

  if [[ -n "$state" ]]; then
    _wanted services expl 'system service' \
        compadd ${${${(f)"$($words[1] --list)"}%%[ :]*}##$'\t'*} &&
ret=0
  fi
;;
irix*)
  _arguments -C \
    '(- 1)-s[print state of configuration flags]' \
    '(1 -s)-f[set flag state]:configuration flag:->flag:state:(on off)'
\
    '1:configuration flag:->flag' && ret=0

  if [[ -n "$state" ]]; then
    _wanted conf-flags expl 'configuration flag' \
        compadd ${${${(f)"$($words[1])"}[4,-1]##$'\t'}%% *} && ret=0
  fi
;;
esac

return ret


__________________________________________________
Do You Yahoo!?
Everything you'll ever need on one web page
from News and Sport to Email and Music Charts
http://uk.my.yahoo.com


From zsh-users-return-14574-mason-zsh=primenet.com.au@zsh.org Tue Nov 17 10:17:27 2009
Return-Path: <zsh-users-return-14574-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19584 invoked by alias); 17 Nov 2009 10:17:27 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14574
Received: (qmail 28573 invoked from network); 17 Nov 2009 10:17:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (proxy.melb.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <200911171016.nAHAGrTv004753@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@zsh.org
Subject: Re: ksh compatibility experts (extendedglob bareglobqual)
In-reply-to: <58942.153.98.68.197.1258450547.squirrel@webmail.rocteur.com>
References: <58942.153.98.68.197.1258450547.squirrel@webmail.rocteur.com>
Comments: In-reply-to "Jerry Rocteur" <macosx@rocteur.cc>
   message dated "Tue, 17 Nov 2009 10:35:47 +0100."
Date: Tue, 17 Nov 2009 10:16:53 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 17 Nov 2009 10:16:56.0774 (UTC) FILETIME=[178EB660:01CA676F]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-03 (www.mailcontrol.com) on 10.68.0.121

"Jerry Rocteur" wrote:
> We're running in ksh compatibility mode (ksh linked to zsh)
> 
> What I'd like to do is to write some scripts that make use of Extended Glob a
> nd Glob qualifiers!
> 
> I'd like to run something like this:
> 
> #!/usr/bin/ksh
> 
> setopt extendedglob
> setopt bareglobqual
> 
> touch cc.log
> ls (cc|fi).log(N)
> ls cc.log
> 
> 
> But I have the setopt wrong cause I get this:
> 
> ./try.ksh
> ls: (cc|fi).log(N): No such file or directory
> cc.log

You need to "unsetopt shglob".  This reenables bare parentheses.  (I
managed to get this to work after "emulate ksh", but for some reason not
if I used ARGV0=ksh; I haven't worked out the difference.)

Alternatively, you can use ksh globbing syntax:

ls @(cc|fi).log(N)

This works with glob qualifiers as long as bareglobqual is on.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-users-return-4865-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 25 15:33:04 2002
Return-Path: <zsh-users-return-4865-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29632 invoked from network); 25 Apr 2002 15:33:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Apr 2002 15:33:04 -0000
Received: (qmail 14490 invoked by alias); 25 Apr 2002 15:32:46 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4865
Received: (qmail 14478 invoked from network); 25 Apr 2002 15:32:45 -0000
To: zsh-users@sunsite.dk (Zsh users list)
Subject: Re: _normal:26: bad math expression: operator expected at `0 ' 
In-reply-to: "Roman Neuhauser"'s message of "Thu, 25 Apr 2002 17:38:33 +0200."
             <20020425153833.GN82912@roman.mobil.cz> 
Date: Thu, 25 Apr 2002 16:32:03 +0100
Message-ID: <1188.1019748723@csr.com>
From: Peter Stephenson <pws@csr.com>

Roman Neuhauser wrote:
> > It's hard to see how this problem can occur in 4.0.4, unless there's
> > some additional option we should be setting for compatibility in the
> > list given by $_comp_options.  If it really is the function from 4.0.4,
> > try running `emulate zsh' before starting and using the new completion
> > system.  If it works after that, it would help if you send a list of
> > options you've got set.
> 
>     You've nailed it down, thanks! Let me know if you need anything else.
> 
>     roman@roman ~ > setopt                                        107:0
>...
>     octalzeroes
>...

This is the one.  I think this applies cleanly to 4.0, but it's obvious
how to do it by hand anyway.

You can fix it simply by editing the installed compinit to add
NO_octalzeroes to _comp_options.

Index: Completion/compinit
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/compinit,v
retrieving revision 1.8
diff -u -r1.8 compinit
--- Completion/compinit	13 Mar 2002 09:28:05 -0000	1.8
+++ Completion/compinit	25 Apr 2002 15:29:47 -0000
@@ -144,6 +144,7 @@
     NO_allexport
     NO_aliases
     NO_errexit
+    NO_octalzeroes
 )
 
 # And this one should be `eval'ed at the beginning of every entry point

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


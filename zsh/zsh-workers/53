From zsh-workers-request@math.gatech.edu  Tue May 30 04:52:16 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id EAA21971 for <mason@werple.mira.net.au>; Tue, 30 May 1995 04:52:08 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA14967
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Mon, 29 May 1995 14:51:57 -0400
Received: by math (5.x/SMI-SVR4)
	id AA03646; Mon, 29 May 1995 14:50:20 -0400
Resent-Date: Mon, 29 May 1995 20:49:26 +0100 (MET DST)
Old-Return-Path: <hzoli@cs.elte.hu>
From: hzoli@cs.elte.hu (Zoltan Hidvegi)
Message-Id: <9505291849.AA04508@turan.elte.hu>
Subject: Re: ZLE history expansion bug fix
To: A.Main@dcs.warwick.ac.uk (Zefram)
Date: Mon, 29 May 1995 20:49:26 +0100 (MET DST)
In-Reply-To: <1843.199505250311@stone.dcs.warwick.ac.uk> from "Zefram" at May 25, 95 04:11:44 am
X-Mailer: ELM [version 2.4 PL21]
Content-Type: text
Sender: hzoli@cs.elte.hu
Resent-Message-Id: <"eGYF8.0.uu.hTXol"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/53
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

zefram wrote:
> There is a bug in ZLE history expansion (2.6-beta9-test2):
> 
> % echo
> 
> % !{e <TAB>
> [zsh hangs, eating up processor time]
> 
> The problem is that if a history reference is entered, using a { but not a
> matching }, containing a valid history reference followed by a space, ZLE
> enters an infinite loop.  I have not been able to determine why these specific
> conditions are required to manifest this bug, nor whether any other set of
> conditions will work.
> 
> My solution is to make all the ZLE code that calls the lexer treat LEXERR as a
> terminating token, as well as ENDINPUT.  This solves the above bug.

All of these bugs are already corrected in my release. A new hzoli9 release
based on beta9-test5 is now avaible from ktud.elte.hu:/home/ftp/pub/zsh

Zoltan


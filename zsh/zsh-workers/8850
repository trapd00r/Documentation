From zsh-workers-return-8850-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 02 10:35:41 1999
Return-Path: <zsh-workers-return-8850-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4539 invoked from network); 2 Dec 1999 10:35:39 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Dec 1999 10:35:39 -0000
Received: (qmail 2853 invoked by alias); 2 Dec 1999 10:35:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8850
Received: (qmail 2846 invoked from network); 2 Dec 1999 10:35:28 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer thoth.mch.sni.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Vardhan Varma" <vardhan@cadence.com>, "Zefram" <zefram@fysh.org>
Cc: <zsh-workers@sunsite.auc.dk>
Subject: RE: on AIX, builds zsh.xxx.so 
Date: Thu, 2 Dec 1999 13:35:20 +0300
Message-ID: <000001bf3cb0$eed9e030$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6600
In-reply-to: <199912020954.PAA14253@basant.cadence.com>

> > Vardhan Varma wrote:
> > >	on AIX, default makefiles build a zsh.xxx.so.
> > >	What changes do i do to make is statically linked.
> >
> > Add "--disable-dynamic" to the configure command line.
> 	will that not disable dynamic loading of modules too ??
> 	Actuall zsh being dependent on zsh-3.1.6.so is causing
> 	problem. i've compiled on HP and SunOS too, where
> 	ldd zsh doesn not list anny zsh*so

Some systems do not allow access to all symbols in executables at run time (for
use with dynamic loading). Modules - unfortunately - have to access symbols from
main zsh code. Putting main zsh code in dynamic library is one way to solve this
problem. Some systems provide additional compiler/linker flags to export all
symbols from executable.

Zsh tests if symbols in executables are available; and it will use additional
flags to avoid libzsh.so on known systems. If libzsh.so is built on AIX it
means, that these tests fail and you won't be able to use dynamic modules
without libzsh.so at all.

/andrej


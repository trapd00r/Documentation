From zsh-users-return-15575-mason-zsh=primenet.com.au@zsh.org Wed Nov 24 09:23:15 2010
Return-Path: <zsh-users-return-15575-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9960 invoked by alias); 24 Nov 2010 09:23:15 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15575
Received: (qmail 10666 invoked from network); 24 Nov 2010 09:23:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <101124012250.ZM16731@torch.brasslantern.com>
Date: Wed, 24 Nov 2010 01:22:50 -0800
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Passing arguments to anonymous functions
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

Zsh has had anonymous functions for a couple of years now:

% (){ print hello world }
hello world
% 

These are useful for things like creating local variable scopes, which
you can't do with a simple { ... } expression.  However, $@ and $* are
always empty in an anonymous function, which makes them somewhat less
useful than a named function which can be called with arguments.

However, you can redirect the input of an anonymous function, and you
can read into the positional parameters:  

% (){ read -A argv; print -l $@ } <<<"goodnight gracie"
goodnight
gracie
% 

This isn't quite as nice as one might like since one must supply a
single shell word to follow the <<< redirection, but for simple cases
it does suffice, and one can imagine all sorts of tricks involving e.g.
IFS=$'\0' (if one does not use the new POSIX_STRINGS option) to allow
parsing of arguments passed from caller to callee.


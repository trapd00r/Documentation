From zsh-users-return-11665-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 24 23:15:25 2007
Return-Path: <zsh-users-return-11665-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10725 invoked from network); 24 Jul 2007 23:15:23 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Jul 2007 23:15:23 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 69711 invoked from network); 24 Jul 2007 23:15:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Jul 2007 23:15:15 -0000
Received: (qmail 16911 invoked by alias); 24 Jul 2007 23:15:07 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11665
Received: (qmail 16885 invoked from network); 24 Jul 2007 23:15:04 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Jul 2007 23:15:04 -0000
Received: (qmail 68109 invoked from network); 24 Jul 2007 23:15:03 -0000
Received: from vanunu.ucsc.edu (128.114.150.22)
  by a.mx.sunsite.dk with SMTP; 24 Jul 2007 23:14:58 -0000
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by vanunu.ucsc.edu (Postfix) with ESMTP id A235B2E13FE9
	for <zsh-users@sunsite.dk>; Tue, 24 Jul 2007 16:13:55 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <19FD3CB1-1DA7-4FFC-B369-418748C70F73@chemistry.ucsc.edu>
Reply-To: wgscott@chemistry.ucsc.edu
Content-Transfer-Encoding: 7bit
From: William Scott <wgscott@chemistry.ucsc.edu>
Subject: did the way arrays get indexed change between 4.2 and 4.3?
Date: Tue, 24 Jul 2007 16:14:45 -0700
To: zsh-users@sunsite.dk
X-Mailer: Apple Mail (2.752.3)

I am using zsh-4.3.4

I am using the following function to put the current working  
directory and penultimate directory in a tab on iTerm (also works  
with Konsole):

settab () {
         tab_label="$PWD:h:t/$PWD:t"
         rlength="20"
         echo -ne "\e]1;$tab_label[-$rlength,-1]\a"
}

The idea is that if the string is longer than 20 characters, it  
truncates it from the right, instead of the left (default behavior).

On 4.3.4 this works great.  On 4.2.3, if the original string has  
fewer than 20 characters, the tab is blank.

Is there a decent work-around, as I hate to conditionally test for  
the zsh version every time the tab dynamically updates.





William G. Scott

contact info:  http://chemistry.ucsc.edu/~wgscott





From zsh-workers-return-21038-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 21 15:21:46 2005
Return-Path: <zsh-workers-return-21038-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2261 invoked from network); 21 Mar 2005 15:21:45 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Mar 2005 15:21:45 -0000
Received: (qmail 93340 invoked from network); 21 Mar 2005 15:21:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Mar 2005 15:21:39 -0000
Received: (qmail 1755 invoked by alias); 21 Mar 2005 15:21:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21038
Received: (qmail 1739 invoked from network); 21 Mar 2005 15:21:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Mar 2005 15:21:36 -0000
Received: (qmail 93070 invoked from network); 21 Mar 2005 15:21:36 -0000
Received: from sodans.usata.org (61.211.239.46)
  by a.mx.sunsite.dk with SMTP; 21 Mar 2005 15:21:26 -0000
Received: from [192.168.1.12] (ZQ222114.ppp.dion.ne.jp [222.13.222.114])
	by sodans.usata.org (Postfix) with ESMTP id A8AFEA981
	for <zsh-workers@sunsite.dk>; Tue, 22 Mar 2005 00:21:22 +0900 (JST)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <dfeda35b097206a66203d3b2c7b51f62@h8.dion.ne.jp>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Zsh hackers list <zsh-workers@sunsite.dk>
From: Motoi Washida <a66@h8.dion.ne.jp>
Subject: braces and completion
Date: Tue, 22 Mar 2005 00:21:21 +0900
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Hi,

Completing words which have characters such as "\ ", "\\" or "\'" fails 
when I use "{". For example,
% _foo() { compadd 'foo bar' 'foo baz' || echo erorr }
% compdef _foo foo
then, when I push tab like
% foo foo\ {<TAB>
I can complete 'ba'. But when I try to complete second argument in 
brace I can complete nothing.
% foo foo\ {bar,<TAB>
always prints 'error'.

I tested this with zsh from CVS head on Mac OS X, zsh 4.2.3 on FreeBSD 
4.10-RELEASE-p5, and 4.0.6 on Vine Linux 2.6 (one of the popular Linux 
distributions in Japan).

Any idea?


I tried to find what happened using gdb. It seems hasbrpsfx called by 
add_match_data should not return 0, but I have no idea how to solve it.

Thanks,

--
Motoi Washida


From zsh-workers-return-10970-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 27 09:57:33 2000
Return-Path: <zsh-workers-return-10970-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15284 invoked from network); 27 Apr 2000 09:57:32 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Apr 2000 09:57:32 -0000
Received: (qmail 16141 invoked by alias); 27 Apr 2000 09:57:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10970
Received: (qmail 16128 invoked from network); 27 Apr 2000 09:57:23 -0000
Date: Thu, 27 Apr 2000 11:57:19 +0200 (MET DST)
Message-Id: <200004270957.LAA14304@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Adam Spiers's message of Wed, 26 Apr 2000 20:49:17 +0100
Subject: Re: PATCH: _history_complete_word


Adam Spiers wrote:

> ...
> 
> Just noticed another new quirk with h-c-w now.  I have:
> 
>   zstyle ':completion:*:descriptions' format '%B---- %d%b'
>   zstyle ':completion:*:history-words' stop verbose
>   zstyle ':completion:*:history-words' remove_all_dups yep
>                                                         
> The first time I press M-/ the message `---- history word' appears,
> which means that I have to press it twice to get the first match,
> which shouldn't really happen unless the `list' style is turned on.
> How can this be fixed?

I haven't really tried, but I guess this is a result of $historywords
now containing the words from the current command line, too.

In that case "${(@)historywords[2,-1]}" should do the job (see also
Felix' 10894).

> Incidentally, there may still be other outstanding issues with h-c-w
> which I've been meaning to look at for ages but now everything's
> changed so much, I'm not sure I know whether anything needs doing
> about it.  In particular, I'm thinking of what Sven and Bart discussed
> in 8336 and 8341.

No doubt you've been following the discussion with Felix (10894,
10907, 10951). That reminded me of what I said in 8341, too (although
I wouldn't have been able to come up with that number ;-).

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-11260-mason-zsh=primenet.com.au@sunsite.dk Fri Mar 09 16:40:05 2007
Return-Path: <zsh-users-return-11260-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3016 invoked from network); 9 Mar 2007 16:40:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Mar 2007 16:40:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 70937 invoked from network); 9 Mar 2007 16:39:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Mar 2007 16:39:55 -0000
Received: (qmail 6259 invoked by alias); 9 Mar 2007 16:39:44 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11260
Received: (qmail 6246 invoked from network); 9 Mar 2007 16:39:41 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Mar 2007 16:39:41 -0000
Received: (qmail 69631 invoked from network); 9 Mar 2007 16:39:41 -0000
Received: from old-tantale.fifi.org (HELO tantale.fifi.org) (64.81.251.130)
  by a.mx.sunsite.dk with SMTP; 9 Mar 2007 16:39:34 -0000
Received: (from phil@localhost)
	by tantale.fifi.org (8.9.3p2/8.9.3/Debian 8.9.3-21) id IAA04332;
	Fri, 9 Mar 2007 08:39:28 -0800
Sender: phil@fifi.org
To: Chris Johnson <cjohnson@cs.utk.edu>
Cc: zsh-users@sunsite.dk
Subject: Re: cvsvimdiff zshism
References: <20070309161209.GA30333@cetus30.cs.utk.edu>
Mail-Copies-To: nobody
From: Philippe Troin <phil@fifi.org>
Date: 09 Mar 2007 08:39:27 -0800
In-Reply-To: <20070309161209.GA30333@cetus30.cs.utk.edu>
Message-ID: <87649al6bk.fsf@tantale.fifi.org>
Lines: 28
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Chris Johnson <cjohnson@cs.utk.edu> writes:

> I've just started using cvs to manage some code, and sometimes I want to
> compare my working copy of a file to some version in the repository.
> cvs diff offers a facility to do this, but I really prefer vim's diff
> capabilities.  With vim, you can do side by side comparison of files,
> changes are highlighted, and so on.
> 
> So, in order to make cvs diff work with vimdiff, I wrote the following
> function that exploits zsh's tmp file substitution mechanism.  It's not
> very robust, 'cuz I don't know all the ways to break it yet.  But here's
> a start:

Why not simply:

  cvsvimdiff() {
     if [[ $# -ne 2 ]] then
        print Usage: $0 old_version file >& 2
        return 1
     fi

     vimdiff $2 =(cvs -Q up -r $1 -p $2)
  }

Patching is unnecessary when you can extract the old version
directly...

Phil.


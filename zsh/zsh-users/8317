From zsh-users-return-8317-mason-zsh=primenet.com.au@sunsite.dk Tue Dec 28 20:09:43 2004
Return-Path: <zsh-users-return-8317-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15935 invoked from network); 28 Dec 2004 20:09:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Dec 2004 20:09:43 -0000
Received: (qmail 72099 invoked from network); 28 Dec 2004 20:09:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Dec 2004 20:09:34 -0000
Received: (qmail 25218 invoked by alias); 28 Dec 2004 20:09:23 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8317
Received: (qmail 25205 invoked from network); 28 Dec 2004 20:09:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Dec 2004 20:09:22 -0000
Received: (qmail 71020 invoked from network); 28 Dec 2004 20:09:22 -0000
Received: from iron.cat.pdx.edu (131.252.208.92)
  by a.mx.sunsite.dk with SMTP; 28 Dec 2004 20:09:21 -0000
Received: from sct.cs.pdx.edu (sct.cs.pdx.edu [131.252.209.81])
	by iron.cat.pdx.edu (8.13.1/8.13.1) with ESMTP id iBSK9CmS004289
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <zsh-users@sunsite.dk>; Tue, 28 Dec 2004 12:09:13 -0800 (PST)
Received: from sct.cs.pdx.edu (localhost.localdomain [127.0.0.1])
	by sct.cs.pdx.edu (8.12.11/8.12.10) with ESMTP id iBSK9CPw029158
	for <zsh-users@sunsite.dk>; Tue, 28 Dec 2004 12:09:12 -0800
Received: (from tspencer@localhost)
	by sct.cs.pdx.edu (8.12.11/8.12.11/Submit) id iBSK9CqW029157
	for zsh-users@sunsite.dk; Tue, 28 Dec 2004 12:09:12 -0800
Date: Tue, 28 Dec 2004 12:09:12 -0800
From: Travis Spencer <tspencer+zsh@cs.pdx.edu>
To: zsh-users@sunsite.dk
Subject: Tab complete automounted directories
Message-ID: <20041228200912.GG23142@sct.cs.pdx.edu>
Reply-To: Travis Spencer <tspencer+zsh@cs.pdx.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
X-Virus-Scanned: by amavisd-new
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

I would like zsh to list possible completions available for
automounted directories in /pkgs and /stash on my school's network.  I
read through the mailing list archive, and this is what I came up
with:

compctl -Tx 's[/pkgs/] C[0,^/pkgs/*/*]' -S / -s '$(ypcat auto_pkgs | \
    awk '\''{print $NF}'\'' FS=/ | grep "[[:alpha:]]$")'
compctl -Tx 's[/stash/] C[0,^/stash/*/*]' -S/ -s '$(ypcat auto.stash | \
    awk '\''{print $NF}'\'' FS=/ | grep "[[:alpha:]]$")'

I put both of these in my .zshrc file, but doing `ls /pkgs/<TAB>'
doesn't present all possible completions (only the ones that are
already mounted).  

What am I missing?

-- 

Regards,

Travis Spencer


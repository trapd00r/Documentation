From zsh-users-return-4120-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 13 19:27:02 2001
Return-Path: <zsh-users-return-4120-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12369 invoked from network); 13 Aug 2001 19:27:01 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Aug 2001 19:27:01 -0000
Received: (qmail 15807 invoked by alias); 13 Aug 2001 19:26:43 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4120
Received: (qmail 15796 invoked from network); 13 Aug 2001 19:26:41 -0000
From: martin.ebourne@arcordia.com
Expiry-Date: Sun, 11 Nov 2001 -1:-1:-1 +0000
Subject: all-matches with a suffix
To: zsh-users@sunsite.dk
Date: Mon, 13 Aug 2001 20:25:03 +0100
Message-ID: <OF8840F9F6.B6682A73-ON80256AA7.00697312@uk.jpmorgan.com>
X-MIMETrack: Serialize by Router on LON-ARCMTA-01/ARCORDIA(Release 5.0.3 (Intl)|21 March
 2000) at 08/13/2001 08:25:06 PM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii


Hi,

Using the all-matches completer during SQL completion is giving me
corrupted results. ie.

    select * from sysusers

If I do all-matches immediately after the * I get:

    select environ f gidro namem  suidsy uid, susers

I've tracked it down to the -r (or -q) option to compadd. The completions
are added as:

    compadd -S ", " -r ", \t\n\-" -a _sql_columns

This is so that when you complete a column name normally in the select list
it appends a comma and a space, but if you type comma or space it removes
it again.

If I remove the -r then I get the much better:

    select environ,  gid,  name,  suid,  uid,  from sysusers

Presumably if the -r was in still, then typing space would remove that last
comma?

Any idea what's up?

(Zsh 4.0.2)

Cheers,

Martin.




This e-mail message is CONFIDENTIAL and may contain legally privileged
information.  If you are not the intended recipient you should not  read,
copy, distribute, disclose or otherwise use the information in this e-mail.
Please also telephone or fax us immediately and delete the message from
your system.  E-mail may be susceptible to data corruption, interception
and unauthorised amendment, and we do not accept liability for any such
corruption, interception or amendment or the consequences thereof.


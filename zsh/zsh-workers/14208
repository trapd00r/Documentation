From zsh-workers-return-14208-mason-zsh=primenet.com.au@sunsite.dk Wed May 02 16:03:10 2001
Return-Path: <zsh-workers-return-14208-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23585 invoked from network); 2 May 2001 16:03:09 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 May 2001 16:03:09 -0000
Received: (qmail 12898 invoked by alias); 2 May 2001 16:03:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14208
Received: (qmail 12882 invoked from network); 2 May 2001 16:03:04 -0000
Date: Wed, 2 May 2001 12:02:46 -0400
From: Clint Adams <clint@zsh.org>
To: Oliver Kiddle <okiddle@yahoo.co.uk>
Cc: zsh-workers@sunsite.dk
Subject: Re: PATCH: completion for loadkeys
Message-ID: <20010502120246.A27456@dman.com>
References: <20010502110033.A25252@dman.com> <20010502155253.96565.qmail@web9305.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <20010502155253.96565.qmail@web9305.mail.yahoo.com>; from okiddle@yahoo.co.uk on Wed, May 02, 2001 at 04:52:53PM +0100

> > +	':keymap:_files -W /usr/share/keymaps'
> 
> Could we maybe have the usual _is_gnu tests in this? I've only got
> access to Solaris today and there, loadkeys takes only one parameter -
> a file name - so default completion would be best. /usr/share/keymaps
> doesn't even exist on Solaris. 

> If you want, leave it to me and I'll do the change but it may be a few
> days before I get a chance to.

How's this?


Index: Completion/Unix/Command/_loadkeys
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_loadkeys,v
retrieving revision 1.1
diff -u -r1.1 _loadkeys
--- Completion/Unix/Command/_loadkeys	2001/05/02 15:02:35	1.1
+++ Completion/Unix/Command/_loadkeys	2001/05/02 16:01:50
@@ -1,5 +1,8 @@
 #compdef loadkeys
 
+if [[ $OSTYPE == linux* ]]
+then
+
 _arguments \
 	'(--clearcompose)-c[clearcompose]' \
 	'(-c)--clearcompose' \
@@ -14,3 +17,10 @@
 	'(--verbose)-v[verbose]' \
 	'(-v)--verbose' \
 	':keymap:_files -W /usr/share/keymaps'
+
+elif [[ $OSTYPE == solaris* ]]
+then
+
+	_files -W /usr/share/lib/keytables
+
+fi


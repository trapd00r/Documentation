From zsh-workers-return-14457-mason-zsh=primenet.com.au@sunsite.dk Wed May 23 13:16:35 2001
Return-Path: <zsh-workers-return-14457-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23027 invoked from network); 23 May 2001 13:16:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 May 2001 13:16:34 -0000
Received: (qmail 22833 invoked by alias); 23 May 2001 13:16:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14457
Received: (qmail 22818 invoked from network); 23 May 2001 13:16:21 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Wed, 23 May 2001 15:15:37 +0200 (MET DST)
Message-Id: <200105231315.PAA32746@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: compilation issues
In-Reply-To: <Tc0a88d0153b1b5a119@mailsweeper01.cambridgesiliconradio.com>

Peter Stephenson wrote:

> Oliver Kiddle wrote:
> > alpha Compaq Tru64 5.1
> > 
> > It was this machine where I got the V01zmodload test seg fault so it
> > isn't just Solaris and Cygwin.
> 
> This sounds like it needs something added in Etc/MACHINES.

Hm, I'm working on a Tru64 box. V01 ends for me with a core dump, too
(from a floating point exception). And before that I get lots of
`Unresolved symbol ...' from the loader. Something I haven't seen before
and which doesn't happen with that version in normal work.

Hm, it happens at the unload for me, too. The messages about the
unresolved symbols are ok, because the last-but-one test removes all
dependencies, so zmodload thinks it can unload all modules and it's just
that the loader here is clever enough to tell us that some modules have
problems after other modules they really depend upon have been unloaded.

If I try to do at least some of the steps from the test by hand, I don't
get the floating point exception. Looking at the core dump: this seems
to have to do with the zprof module (that seems to make sense, there are
functions running and zprof hooks into the function calling code, but
that should be taken care of (delayed unloading)). And even if I wrap
some functions around the calls to zmodload I don't get the exception.

Dunno what to do now.


The other tests using modules work fine.

Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


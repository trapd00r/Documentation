From zsh-users-return-14519-mason-zsh=primenet.com.au@zsh.org Fri Oct 23 17:26:40 2009
Return-Path: <zsh-users-return-14519-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25870 invoked by alias); 23 Oct 2009 17:26:40 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users@zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14519
Received: (qmail 21719 invoked from network); 23 Oct 2009 17:26:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_WEB autolearn=no version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at convalesco.org does not designate permitted sender hosts)
Subject: Re: proper UTF-8 support under OSX [solved]
Mime-Version: 1.0 (Apple Message framework v1076)
Content-Type: text/plain; charset=utf-8; format=flowed; delsp=yes
From: Panagiotis Atmatzidis <atma@convalesco.org>
In-Reply-To: <20091022233229.GA14613@prunille.vinc17.org>
Date: Fri, 23 Oct 2009 19:31:49 +0300
Cc: zsh-users@zsh.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <B48F55B4-D2EE-46FB-96F7-F63E61155BB2@convalesco.org>
References: <20091022062013.GA3687@primenet.com.au> <20091022233229.GA14613@prunille.vinc17.org>
To: Vincent Lefevre <vincent@vinc17.net>
X-Mailer: Apple Mail (2.1076)

Hello,

Thank you all a priori for the replies,

On 23 =CE=9F=CE=BA=CF=84 2009, at 2:32 =CF=80.=CE=BC., Vincent Lefevre =
wrote:

>> :From: Panagiotis Atmatzidis <atma@convalesco.org>
>> :Subject: proper UTF-8 support under OSX
>> :Hello,
>> :
>> :I have a snow leopard desktop to which I use the default BASH which
>> :works fine. Then I have another system on the house that runs Tiger
>> :(OSX) 10.4.11 mac mini G4 ppc. When I ssh from SL to Tiger I can't
>> :write greek. The UTF-8 support appears to be broken, while I can't =20=

>> see
>> :nor UTF-8 nor ISO-8859-7 chars on mutt email client.
>
> If Mutt is also affected, this is probably not a problem due to zsh.
>
> Also if you use ssh, you need the same charmap on both sides.
>
>> :Of course I tried to set .zshrc LANG and LOCALE options in =20
>> el_GR.UTF-8
>> :mode but it does not work. And while I can't write Greek to zsh and
>> :bash, apparently I can write correctly using ksh!!!
>
> Could you try the following commands?
>
>  env | grep '^\(LANG\|LC_\)'
>  locale
>
> And the following utility:
>
> #include <stdio.h>
> #include <locale.h>
> #include <langinfo.h>
>
> int main (void)
> {
>  setlocale (LC_ALL, "");
>  printf ("%s\n", nl_langinfo (CODESET));
>  return 0;
> }
>
> (This is what "locale charmap" should do, but it is broken on Tiger.)
>
> --=20
> Vincent Lef=C3=A8vre <vincent@vinc17.net> - Web: =
<http://www.vinc17.net/>
> 100% accessible validated (X)HTML - Blog: <http://www.vinc17.net/=20
> blog/>
> Work: CR INRIA - computer arithmetic / Ar=C3=A9naire project (LIP, =
ENS-=20
> Lyon)


The problem is solved :-)

Here are my configurations:

atma@angel:~/ > uname
Darwin
atma@angel:~/ > uname -r
10.0.0
atma@angel:~/ > locale
LANG=3D"el_GR.utf-8"
LC_COLLATE=3D"el_GR.utf-8"
LC_CTYPE=3D"el_GR.utf-8"
LC_MESSAGES=3D"el_GR.utf-8"
LC_MONETARY=3D"el_GR.utf-8"
LC_NUMERIC=3D"el_GR.utf-8"
LC_TIME=3D"el_GR.utf-8"
LC_ALL=3D
atma@angel:~/ > ssh devo
Last login: Fri Oct 23 19:21:13 2009 from angel
Welcome to Darwin!
atma@devo:~/ > uname
Darwin
atma@devo:~/ > uname -r
8.11.0
atma@devo:~/ > locale
LANG=3D"el_GR.utf-8"
LC_COLLATE=3D"el_GR.utf-8"
LC_CTYPE=3D"el_GR.utf-8"
LC_MESSAGES=3D"el_GR.utf-8"
LC_MONETARY=3D"el_GR.utf-8"
LC_NUMERIC=3D"el_GR.utf-8"
LC_TIME=3D"el_GR.utf-8"
LC_ALL=3D"el_GR.utf-8"
atma@devo:~/ >  env | grep '^\(LANG\|LC_\)'
atma@devo:~/ > ./a.out
utf-8
atma@devo:~/ > sudo grep Accept /etc/sshd_config
#GSSAPIStrictAcceptorCheck yes
AcceptEnv LANG LC_*
atma@devo:~/ > =CE=BA=CE=B1=CE=BB=CE=B7=CE=BC=CE=AD=CF=81=CE=B1
zsh: command not found: =CE=BA=CE=B1=CE=BB=CE=B7=CE=BC=CE=AD=CF=81=CE=B1

I just but the same options under .zshrc and the AcceptEnv LANG LC_* =20
under sshd. I restarted the sshd demon and "voila!" :-)

Works mutt, irssi (through screen without -U flag) and everything else =20=

I cheched out with proper UTF-8 support.

Thanks

Panagiotis (atmosx) Atmatzidis

email:	atma@convalesco.org
URL:	http://www.convalesco.org
GnuPG key id: 0xFC4E8BB4
--
The wise man said: "Never argue with an idiot. They bring you down to =20=

their level and beat you with experience."


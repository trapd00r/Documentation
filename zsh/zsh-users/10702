From zsh-users-return-10702-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 11 17:06:10 2006
Return-Path: <zsh-users-return-10702-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15971 invoked from network); 11 Sep 2006 17:06:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Sep 2006 17:06:08 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 78592 invoked from network); 11 Sep 2006 17:06:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2006 17:06:01 -0000
Received: (qmail 469 invoked by alias); 11 Sep 2006 17:05:52 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10702
Received: (qmail 430 invoked from network); 11 Sep 2006 17:05:50 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Sep 2006 17:05:50 -0000
Received: (qmail 77144 invoked from network); 11 Sep 2006 17:05:50 -0000
Received: from cluster-c.mailcontrol.com (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2006 17:05:47 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly14c.srv.mailcontrol.com (MailControl) with ESMTP id k8BH5hSJ020320
	for <zsh-users@sunsite.dk>; Mon, 11 Sep 2006 18:05:43 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 11 Sep 2006 18:05:43 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.4/8.13.4) with ESMTP id k8BH5ZIX016015
	for <zsh-users@sunsite.dk>; Mon, 11 Sep 2006 18:05:35 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.4/8.13.4/Submit) with ESMTP id k8BH5Yfo016012
	for <zsh-users@sunsite.dk>; Mon, 11 Sep 2006 18:05:35 +0100
Message-Id: <200609111705.k8BH5Yfo016012@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: A POSIX and a UTF-8 question 
In-reply-to: <20060911163950.59225.qmail@web36812.mail.mud.yahoo.com> 
References: <20060911163950.59225.qmail@web36812.mail.mud.yahoo.com>
Comments: In-reply-to Daniel Qarras <dqarras@yahoo.com>
   message dated "Mon, 11 Sep 2006 09:39:50 -0700."
Date: Mon, 11 Sep 2006 18:05:34 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 11 Sep 2006 17:05:43.0374 (UTC) FILETIME=[84219EE0:01C6D5C4]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-04-01 (www.mailcontrol.com) on 10.67.0.124

Daniel Qarras wrote:
> 1) There is unfortunately a bash-only expression used in RH's shell
> function library, that is =~. However, this was used only once in
> device mapper related function so that did not affect me, I just
> commented it out. YMMV. (I did not find a www description for this but
> it can be at least checked from bash3.1 manual pages what it does.

That's for extended regular expressions.  That wouldn't be too hard to
support, if we used the system's RE capabilities, although we'd probably
want to do parentheses differently.  However, as you say, it's specific
to bash so isn't that vital.

> 2) It seems that many RH scripts do something like:
> 
> cd /some/path
> . functions
> 
> and in zsh-4.3 as /bin/sh this does not work, it needs to be:
> 
> cd /some/path
> . ./functions

Right.  I think zsh has always been implemented like that.  We don't
really want to change it; the standard (IEEE Std 1003.1, 2004 Edition)
says specifically:

    RATIONALE

    Some older implementations searched the current directory for the
    file, even if the value of PATH disallowed it. This behavior was
    omitted from this volume of IEEE Std 1003.1-2001 due to concerns
    about introducing the susceptibility to trojan horses that the user
    might be trying to avoid by leaving dot out of PATH .

I checked on my Fedora system (about Core 4, I think) and the only init
script without a path is network:

  cd /etc/sysconfig/network-scripts

  . network-functions

If it's still there it probably ought to be fixed.

> Additionally, there's one cosmetic bash feature used that seems to be
> not supported by zsh: RH uses in their i18n effort tricks like:
>
> echo -n $"Starting service foo: "

It would be relatively easy to interpret these in the same fashion as
some other form of quoting.  However, there's not much
internationalization in these parts and won't be without a huge effort
and it's not clear it's worth the effort doing anything apart from that.

Thanks for the notes.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


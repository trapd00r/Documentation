From zsh-workers-return-21907-mason-zsh=primenet.com.au@sunsite.dk Sat Oct 22 16:29:21 2005
Return-Path: <zsh-workers-return-21907-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4986 invoked from network); 22 Oct 2005 16:29:19 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Oct 2005 16:29:19 -0000
Received: (qmail 20465 invoked from network); 22 Oct 2005 16:29:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Oct 2005 16:29:10 -0000
Received: (qmail 11568 invoked by alias); 22 Oct 2005 16:29:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21907
Received: (qmail 11557 invoked from network); 22 Oct 2005 16:29:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Oct 2005 16:29:07 -0000
Received: (qmail 20217 invoked from network); 22 Oct 2005 16:29:07 -0000
Received: from zproxy.gmail.com (64.233.162.193)
  by a.mx.sunsite.dk with SMTP; 22 Oct 2005 16:29:06 -0000
Received: by zproxy.gmail.com with SMTP id i11so609895nzh
        for <zsh-workers@sunsite.dk>; Sat, 22 Oct 2005 09:29:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=h8/coWdCHiYCIHXOoK11Dkui3PK8hTKYjhSERQV/S4vHmchvfxWrQ3vzoAQOl4+1nOHcA4Offep0jey+3eaa55L2lwLgEIyaGLtUGXpXJrjEjBSyh1bjHM4wN2jZ6AriKqfaNL2KylpxfRb23fITCIqnwjiy35O0jvp1v0haWuE=
Received: by 10.36.158.11 with SMTP id g11mr4056381nze;
        Sat, 22 Oct 2005 09:29:04 -0700 (PDT)
Received: by 10.36.22.15 with HTTP; Sat, 22 Oct 2005 09:29:04 -0700 (PDT)
Message-ID: <237967ef0510220929p651a40b5od5741245092394a1@mail.gmail.com>
Date: Sat, 22 Oct 2005 18:29:04 +0200
From: Mikael Magnusson <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: Crash in copy-earlier-word
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,RCVD_BY_IP 
	autolearn=ham version=3.0.4

If i type a few words and then press copy-earlier-word a few times, i
get this backtrace. seems to be at or after it reaches the first word
on the line.

Program received signal SIGSEGV, Segmentation fault.
zlelineasstring (instr=3D0x0, inll=3D3, incs=3D3, outllp=3D0x8101760,
outcsp=3D0x810179c, useheap=3D0)
    at zle_utils.c:146
146=09=09j =3D wctomb(s + mb_len, instr[i]);
(gdb) bt
#0  zlelineasstring (instr=3D0x0, inll=3D3, incs=3D3, outllp=3D0x8101760,
outcsp=3D0x810179c, useheap=3D0)
    at zle_utils.c:146
#1  0xa7bd31ce in metafy_line () at zle_tricky.c:943
#2  0xa7bbe999 in insertlastword (args=3D0xafae3d34) at zle_hist.c:538
#3  0xa7bc64c7 in execzlefunc (func=3D0xa7be4678, args=3D0xafae3d34) at
zle_main.c:1094
#4  0xa7bd267c in bin_zle_call (name=3D0xa7fd4570 "zle", args=3D0x3,
ops=3D0xafae3d80, func=3D0 '\0')
    at zle_thingy.c:696
#5  0xa7bd1738 in bin_zle (name=3D0xa7fd4570 "zle", args=3D0xafae3d30,
ops=3D0xafae3d80, func=3D0)
    at zle_thingy.c:382
#6  0x08053134 in execbuiltin (args=3D0xafae3d80, bn=3D0xa7be5f28) at built=
in.c:439
#7  0x0807073e in execcmd (state=3D0xafae92a0, input=3D0, output=3D0,
how=3D18, last1=3D2) at exec.c:2558
#8  0x08071055 in execpline2 (state=3D0xafae92a0, pcode=3D0, how=3D18,
input=3D0, output=3D0, last1=3D0)
    at exec.c:1289
#9  0x08071623 in execpline (state=3D0xafae92a0, slcode=3D0, how=3D18,
last1=3D0) at exec.c:1075
#10 0x08072f93 in execlist (state=3D0xafae92a0, dont_change_job=3D1,
exiting=3D0) at exec.c:881
#11 0x08073971 in doshfunc (name=3D0x8148310 "copy-earlier-word", prog=3D0x=
82b3758,
    doshargs=3D0xa7a34a04, flags=3D0, noreturnval=3D1) at exec.c:781
#12 0xa7bc6402 in execzlefunc (func=3D0x8148000, args=3D0xa7be613c) at
zle_main.c:1129
#13 0xa7bc6b18 in zlecore () at zle_main.c:862
#14 0xa7bc759d in zleread (lp=3D0x8100fb0, rp=3D0x0, flags=3D3, context=3D3=
)
at zle_main.c:1016
#15 0x0808a4a4 in inputline () at input.c:278
#16 0x0808aaea in ingetc () at input.c:214
#17 0x08081017 in ihgetc () at hist.c:240
#18 0x08096576 in gettok () at lex.c:628
#19 0x08098236 in yylex () at lex.c:344
#20 0x080ba31a in parse_event () at parse.c:451
#21 0x0808733a in loop (toplevel=3D1, justonce=3D0) at init.c:128
#22 0x0808a054 in zsh_main (argc=3D1, argv=3D0xafae9b44) at init.c:1312
#23 0x08052aae in main (argc=3D3, argv=3D0x3) at main.c:93

--
Mikael Magnusson


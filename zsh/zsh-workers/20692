From zsh-workers-return-20692-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 12 10:27:31 2005
Return-Path: <zsh-workers-return-20692-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8222 invoked from network); 12 Jan 2005 10:27:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Jan 2005 10:27:30 -0000
Received: (qmail 74828 invoked from network); 12 Jan 2005 10:27:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2005 10:27:23 -0000
Received: (qmail 18395 invoked by alias); 12 Jan 2005 10:27:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20692
Received: (qmail 18381 invoked from network); 12 Jan 2005 10:27:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Jan 2005 10:27:07 -0000
Received: (qmail 74455 invoked from network); 12 Jan 2005 10:27:07 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2005 10:27:04 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6e72ddd68a0a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Wed, 12 Jan 2005 10:25:43 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 12 Jan 2005 10:29:16 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j0CAR1WM018811
	for <zsh-workers@sunsite.dk>; Wed, 12 Jan 2005 10:27:01 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j0CAR12W018808
	for <zsh-workers@sunsite.dk>; Wed, 12 Jan 2005 10:27:01 GMT
Message-Id: <200501121027.j0CAR12W018808@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: POSIX conformance in coreutils 
In-reply-to: <m3r7kr31g9.fsf@zion.rcn.com> 
References: <m3r7kr31g9.fsf@zion.rcn.com>
Date: Wed, 12 Jan 2005 10:27:01 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 12 Jan 2005 10:29:16.0681 (UTC) FILETIME=[916A0F90:01C4F891]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Vin Shelton wrote:
> GNU coreutils (at least versions 5.2.1 and 5.3.0) enforce POSIX
> conformance, so they don't like 'tail -1', instead they require
> 'tail -n 1'.

Might the environment variable POSIXLY_CORRECT be set?  That seems to be
the effect here.  We could unset it explicitly if that's the case.

Index: Test/ztst.zsh
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/ztst.zsh,v
retrieving revision 1.19
diff -u -r1.19 ztst.zsh
--- Test/ztst.zsh	26 Jul 2004 13:18:14 -0000	1.19
+++ Test/ztst.zsh	12 Jan 2005 10:26:43 -0000
@@ -28,6 +28,9 @@
 [[ -n $LC_COLLATE ]] && LC_COLLATE=C
 [[ -n $LANG ]] && LANG=C
 
+# POSIXLY_CORRECT can cause spurious error messages with "tail -<num>".
+unset POSIXLY_CORRECT
+
 # Set the module load path to correspond to this build of zsh.
 # This Modules directory should have been created by "make check".
 [[ -d Modules/zsh ]] && module_path=( $PWD/Modules )

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


From zsh-workers-return-28101-mason-zsh=primenet.com.au@zsh.org Mon Jul 26 13:50:21 2010
Return-Path: <zsh-workers-return-28101-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11954 invoked by alias); 26 Jul 2010 13:50:21 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28101
Received: (qmail 27145 invoked from network); 26 Jul 2010 13:50:18 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at bewatermyfriend.org does not designate permitted sender hosts)
From: Frank Terbeck <ft@bewatermyfriend.org>
To: zsh-workers@zsh.org
Subject: PATCH: _tmux: fix window completion
Date: Mon, 26 Jul 2010 15:42:56 +0200
Message-Id: <1280151776-14656-1-git-send-email-ft@bewatermyfriend.org>
X-Mailer: git-send-email 1.7.2.rc2
X-Df-Sender: 430444

With tmux 1.3 the output of "tmux list-windows" changed a little,
which threw off the completion slightly. This fix shouldn't break
completion with tmuxes prior to 1.2.
---
 Completion/Unix/Command/_tmux |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/Completion/Unix/Command/_tmux b/Completion/Unix/Command/_tmux
index f250749..e9977fb 100644
--- a/Completion/Unix/Command/_tmux
+++ b/Completion/Unix/Command/_tmux
@@ -1479,7 +1479,7 @@ function __tmux-windows() {
     else
         opts=( )
     fi
-    wins=( ${${(f)"$(command tmux list-windows "${opts[@]}")"}/:[ $'\t']##/:} )
+    wins=( ${${(M)${(f)"$(command tmux list-windows "${opts[@]}")"}:#<->*}/:[ $'\t']##/:} )
     _describe -t windows 'windows' wins "$@"
     if [[ ${IPREFIX} != *: ]]; then
         _wanted sessions expl 'sessions' __tmux-sessions -S:
-- 
1.7.2.rc2


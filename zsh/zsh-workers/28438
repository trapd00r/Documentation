From zsh-workers-return-28438-mason-zsh=primenet.com.au@zsh.org Wed Nov 24 13:58:35 2010
Return-Path: <zsh-workers-return-28438-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12709 invoked by alias); 24 Nov 2010 13:58:34 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28438
Received: (qmail 6998 invoked from network); 24 Nov 2010 13:58:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,
	T_TO_NO_BRKTS_FREEMAIL,URIBL_RED autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.161.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type:subject
         :date:message-id:to:mime-version:x-mailer;
        bh=pSXc3pj0EJHXrgZN5npFUIJ/4Ir4ndU2/bOHyAVaAgg=;
        b=j/gRRXPOLb0EjYIRJY3ODEMm6oQyquma4enpaOXKzUrkU44rc/RyMHS4RdrzcczdG+
         8yxclJw2VtF5dGKwBZbLusYBwsJIPSq3sox58ySNRi6Mb6pVPP3uN/boRvuIqa1Vy6no
         e99vLnLbdoIqQsJwOg27NDzk8mXAn8rO1ge+g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:content-type:subject:date:message-id:to:mime-version:x-mailer;
        b=kcU1t+2wMVkHEqggtr9iS81W2L5e9EyWVsMgLCFRZ7m1XZ0I/lVXVU8if1oKd1CEK3
         WIakYvtBeYjEnwNM3lzxoJx7FpDJsmUKKw6W1ShR9yywUSYeCRKSC6YztePgpQt35bgF
         kdj6gjLTC6e+H6/f9FPqRREB/ZHoHukhQ83hc=
From: Sorin Ionescu <sorin.ionescu@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-2-914777554
Subject: Mac OS X Prompt Bug
Date: Wed, 24 Nov 2010 08:58:26 -0500
Message-Id: <BAB9C52A-B68A-4B5A-99C2-F85B310B1380@gmail.com>
To: zsh-workers@zsh.org
Mime-Version: 1.0 (Apple Message framework v1082)
X-Mailer: Apple Mail (2.1082)

--Apple-Mail-2-914777554
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hello,

Please have a look at the screenshot at http://i.imgur.com/huNpI.jpg. =
Otherwise, the following text may not make sense.

A % character appears before every prompt then it is replaced by the =
prompt; so, it only flashes for a fraction of a second. However, if the =
buffer is empty when ZSH starts, such as when one has a ~/.hushlogin =
file, it results in the behaviour in the screenshot, which is % =
character followed by blank lines.=20

Before you ask, the screenshot was taken via a new user account. There =
is no zshrc, zshenv, nor any combination thereof in the home directory. =
The ZSH versions tested are 4.3.9 and 4.3.10.

There is a global /etc/zshenv file that has the following contents:
# system-wide environment settings for zsh(1)
if [ -x /usr/libexec/path_helper ]; then
	eval `/usr/libexec/path_helper -s`
fi

The output of /usr/libexec/path_helper is the following:
=
PATH=3D"/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/s=
orin/.local/bin:/Users/sorin/.local/sbin"; export PATH;
=
MANPATH=3D"/usr/share/man:/usr/local/share/man:/usr/X11/share/man:/Users/s=
orin/.local/share/man"; export MANPATH;

Thus, /etc/zshenv is not the problem. It could be a fault of =
Terminal.app, but it only happens with ZSH and no other shell.

Thank you,

Sorin Ionescu=

--Apple-Mail-2-914777554--


From zsh-workers-return-8334-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Oct 19 16:07:33 1999
Return-Path: <zsh-workers-return-8334-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12723 invoked from network); 19 Oct 1999 16:07:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Oct 1999 16:07:29 -0000
Received: (qmail 3048 invoked by alias); 19 Oct 1999 16:06:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8334
Received: (qmail 3039 invoked from network); 19 Oct 1999 16:06:37 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991019160617.ZM5989@candle.brasslantern.com>
Date: Tue, 19 Oct 1999 16:06:17 +0000
In-Reply-To: <199910191350.PAA00998@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "PATCH: completion in braces" (Oct 19,  3:50pm)
References: <199910191350.PAA00998@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: completion in braces
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Oct 19,  3:50pm, Sven Wischnowsky wrote:
} Subject: PATCH: completion in braces
}
} Horrors.
} 
} This allows completion inside nested braces.
} [...] the next thing on my list if the nested-quotation problem and 
} that may become at least as hard as this one...

Is there any point at which one of these glorious hacks of yours is
likely to make the code *simpler*? :-)

I always get nervous when I see a uuencoded block, but this doesn't
look too horrific at all.

} Then there was a lot of fiddling [...]
} 
} No fun, really.

Oh, c'mon, admit it -- you like this sort of thing.

} I stumbled of some code in `do_single()' (that's where a single, full
} match is inserted -- either because there is only one match or during
} menucompletion) which makes sure that the otherwise automatically
} inserted comma when completing in braces is *not* inserted during a
} menucompletion. Does anyone rememeber why we did that?

When one of the possible menucompletions is a directory, the directory
name gets a slash auto-appended to it, which then is autoremoved when
you type the comma.  If the brace-completion code also auto-appended a
comma, the slash wouldn't get autoremoved when you typed another comma.
I think.

} The second question: `zle_tricky.c' has now more than 10000
} lines. Ouch. Maybe we should cut it in two/three/four/etc. parts. But
} 1) if we ever offer all the things `comp{ctl,gen}' can do via
} `compadd' plus something, then there is a lot of code that can be
} removed from the file (or maybe if we have these mechanisms, we can at 
} least put that stuff, which will eventually be removed, into a
} separate file)

If you were up for a major code-factoring project -- refer to my remark
above about glorious hacks -- I think it would be a great idea to make
old-completion and new-completion into separate modules that both call
a set of common functions wherever possible.

} 2) I fear, if we cut it, you'll see a lot of my
} blood come dripping out of it.

Well, as long as we still have you around to provide transfusions ...

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


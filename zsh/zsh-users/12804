From zsh-users-return-12804-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 22 05:16:13 2008
Return-Path: <zsh-users-return-12804-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18344 invoked from network); 22 Apr 2008 05:16:09 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.1 required=5.0 tests=BAYES_00,WHOIS_DMNBYPROXY
	autolearn=no version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Apr 2008 05:16:09 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 86269 invoked from network); 22 Apr 2008 05:15:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Apr 2008 05:15:56 -0000
Received: (qmail 20144 invoked by alias); 22 Apr 2008 05:15:46 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12804
Received: (qmail 20124 invoked from network); 22 Apr 2008 05:15:45 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 22 Apr 2008 05:15:45 -0000
Received: from wa-out-1112.google.com (wa-out-1112.google.com [209.85.146.178])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 647FE808A37A
	for <zsh-users@sunsite.dk>; Tue, 22 Apr 2008 07:15:40 +0200 (CEST)
Received: by wa-out-1112.google.com with SMTP id j4so3970624wah.21
        for <zsh-users@sunsite.dk>; Mon, 21 Apr 2008 22:15:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=9/GDa0LoPcxIKZE1fISI3C+Milgm0H9mqMesqUmYSvU=;
        b=elRo/dDA/2v0RNJBQBvOvUFexnuGQu/16oyxkhaGw9FQsTHxkE4R1mxr5d2VEkzc8nRHWhBC9mrb/7TC3c2g7NclTIGWcZPT6id2BvqXGRLD+lM4IpEHAbyqe5EkHQn53zbD/uMwf8XwuwTgLHqsbK0bnJ2M6x7gTyEJWXfep4w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cJCeP+QC9O0lCmMXoeRuA+yoBjrXePh6lsOJMbxuKwBsZdyNbGB9geIhQ+ypC/QKWvWCirV8++nfN6QDlR3savhYSSxuwIFieZQNzVdLWEY/djlAsQw/qu6C5w8ZAI38i2gCRxAeqlnvncsCiEBBrINJW8F7VbBRg206DEo8Pv4=
Received: by 10.114.103.4 with SMTP id a4mr4052567wac.172.1208841335991;
        Mon, 21 Apr 2008 22:15:35 -0700 (PDT)
Received: by 10.114.180.20 with HTTP; Mon, 21 Apr 2008 22:15:35 -0700 (PDT)
Message-ID: <70a3bcb10804212215k728b0228q1d38da7866b3bd61@mail.gmail.com>
Date: Tue, 22 Apr 2008 01:15:35 -0400
From: Achille <achille.listserv@gmail.com>
To: "Alexy Khrabrov" <deliverable@gmail.com>
Subject: Re: detach a process and bring into GNU screen
Cc: zsh-users@sunsite.dk
In-Reply-To: <5762C832-AE51-46E4-8894-B083601ADFA4@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5762C832-AE51-46E4-8894-B083601ADFA4@gmail.com>
X-Virus-Scanned: ClamAV 0.91.2/6878/Tue Apr 22 05:45:17 2008 on bifrost
X-Virus-Status: Clean

Here's another way to do the same, using  'ls -R /' as an example of a
long running process.
Use the following script: http://achille.org/screenify.sh

Naked shell:
* ls -R /  (starts the long process)
* ctrl-z (pause it for a second, go back to the shell)
* disown (will disown the child process, so that it won't die when parent dies)

Inside screen:
 ./screenify.sh PID (disown will tell you the PID)

>From a different shell:
 kill -CONT pid (will restart the process)

You can now kill the naked process.
Should theoretically do the same thing as retty, but the latter does
not work for me (debian, xen kern).

 Cheers


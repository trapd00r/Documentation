From zsh-workers-return-9398-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jan 21 09:53:07 2000
Return-Path: <zsh-workers-return-9398-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15827 invoked from network); 21 Jan 2000 09:53:06 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Jan 2000 09:53:06 -0000
Received: (qmail 28788 invoked by alias); 21 Jan 2000 09:53:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9398
Received: (qmail 28781 invoked from network); 21 Jan 2000 09:52:59 -0000
Date: Fri, 21 Jan 2000 10:52:58 +0100 (MET)
Message-Id: <200001210952.KAA02807@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Fri, 21 Jan 2000 10:43:06 +0100
	(MET)
Subject: Re: PATCH: zfinit


Should have played some more first...

When changing _description I didn't look at Functions/Zftp.

Bye
 Sven

diff -ru ../z.old/Functions/Zftp/zfcd_match Functions/Zftp/zfcd_match
--- ../z.old/Functions/Zftp/zfcd_match	Fri Jan 21 10:39:51 2000
+++ Functions/Zftp/zfcd_match	Fri Jan 21 10:50:23 2000
@@ -30,8 +30,8 @@
   rm -f $tmpf
   [[ -n $dir && $dir != */ ]] && dir="$dir/"
   if [[ -n $WIDGET ]]; then
-    _description expl 'remote directory'
-    compadd -S/ -q -P "$dir" - $reply
+    _description directories expl 'remote directory'
+    compadd "$expl[@]" -S/ -q -P "$dir" - $reply
   elif [[ -n $dir ]]; then
     reply=(${dir}$reply)
   fi
diff -ru ../z.old/Functions/Zftp/zfget_match Functions/Zftp/zfget_match
--- ../z.old/Functions/Zftp/zfget_match	Fri Jan 21 10:39:51 2000
+++ Functions/Zftp/zfget_match	Fri Jan 21 10:48:13 2000
@@ -17,7 +17,7 @@
     local reply
     reply=(${${${(f)"$(<$tmpf)"}##$dir}%\*})
     rm -f $tmpf
-    _description expl 'remote file'
+    _description files expl 'remote file'
     compadd "$expl[@]" -P $dir - $reply
   else
     # On the first argument to ls, we usually get away with a glob.
@@ -29,7 +29,7 @@
   local fcache_name
   zffcache
   if [[ -n $WIDGET ]]; then
-    _description expl 'remote file'
+    _description files expl 'remote file'
     compadd "$expl[@]" -F fignore - ${(P)fcache_name}
   else
     reply=(${(P)fcache_name});

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-28962-mason-zsh=primenet.com.au@zsh.org Wed Mar 30 21:00:20 2011
Return-Path: <zsh-workers-return-28962-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27732 invoked by alias); 30 Mar 2011 21:00:20 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28962
Received: (qmail 7125 invoked from network); 30 Mar 2011 21:00:19 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.4 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE,
	SPF_HELO_PASS,SUBJ_ALL_CAPS autolearn=no version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at bewatermyfriend.org does not designate permitted sender hosts)
From: Frank Terbeck <ft@bewatermyfriend.org>
To: zsh-workers@zsh.org
Subject: PATCH: (0/4) 
Date: Wed, 30 Mar 2011 22:37:12 +0200
Message-Id: <1301517436-11451-1-git-send-email-ft@bewatermyfriend.org>
X-Mailer: git-send-email 1.7.4.1.140.g89781
X-Df-Sender: 430444

Here's a series I had laying around for a bit.

I was writing a little add-on to vcs_info and was wondering how I could
add hooks to certain events to make the add-on work, but without
interfering with hooks the user may have set already.

It turned out that I couldn't so I added "statically" registered hooks,
which are run independently of any context. This is what the first two
patches do.

The third patch adds a new hooks called no-vcs, which is needed by
my little add-on.

The last patch should make sure the nvcsformats style is used to fill
the $vcs_info_msg_N_ variables even if the system is disabled otherwise.
That should make sure that you can turn over full control of your
prompt to these variables, if you'd like to (as advertised in the
manual).

Frank Terbeck (4):
  vcs_info: Support registering hooks independent of the context
  vcs_info: Add functions to add/remove static hooks
  vcs_info: Add `no-vcs' hook
  vcs_info: nvcsformats style should be used if the system is disabled

 Doc/Zsh/contrib.yo                  |   43 ++++++++++++++++++++++++++++----
 Functions/VCS_Info/.distfiles       |    2 +
 Functions/VCS_Info/VCS_INFO_hook    |   18 +++++++++++--
 Functions/VCS_Info/VCS_INFO_set     |    6 +----
 Functions/VCS_Info/vcs_info         |    7 ++++-
 Functions/VCS_Info/vcs_info_hookadd |   22 +++++++++++++++++
 Functions/VCS_Info/vcs_info_hookdel |   45 +++++++++++++++++++++++++++++++++++
 7 files changed, 127 insertions(+), 16 deletions(-)


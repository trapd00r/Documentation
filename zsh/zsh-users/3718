From zsh-users-return-3718-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 22 05:46:48 2001
Return-Path: <zsh-users-return-3718-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18638 invoked from network); 22 Mar 2001 05:46:42 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Mar 2001 05:46:42 -0000
Received: (qmail 11778 invoked by alias); 22 Mar 2001 05:46:10 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3718
Received: (qmail 11766 invoked from network); 22 Mar 2001 05:46:09 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010322054500.ZM19391@candle.brasslantern.com>
Date: Thu, 22 Mar 2001 05:44:59 +0000
In-Reply-To: <Pine.LNX.4.31.0103201457480.8340-100000@neptune>
Comments: In reply to Jeff Shipman <shippy@nmt.edu>
        "prompt weirdness" (Mar 20,  2:59pm)
References: <Pine.LNX.4.31.0103201457480.8340-100000@neptune>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Jeff Shipman <shippy@nmt.edu>, <zsh-users@sunsite.dk>
Subject: Re: prompt weirdness
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 20,  2:59pm, Jeff Shipman wrote:
} Subject: prompt weirdness
}
} PROMPT="%n@%m:%B%30<...<%~%b%(!.#.>) "
} 
} su() { ZDOTDIR=/u/jeff command su "$@" -c zsh }
} 
} I am not seeing the # at the end. Instead, I
} get only a single space after my home directory.
} 
} Why is this happening?

Only one possibility comes to mind:  The "zsh" found when su does its
path search is not the one you expect.  If, for example, /bin/zsh is
a 3.0.x version, and that's what "su -c zsh" finds and executes, then
you'd get exactly the behavior you describe, because 3.0.x doesn't have
the %(!...) test.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-users-return-6765-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 11 19:00:28 2003
Return-Path: <zsh-users-return-6765-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22091 invoked from network); 11 Nov 2003 19:00:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 11 Nov 2003 19:00:27 -0000
Received: (qmail 29285 invoked by alias); 11 Nov 2003 19:00:04 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6765
Received: (qmail 29255 invoked from network); 11 Nov 2003 19:00:04 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 11 Nov 2003 19:00:04 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [213.6.31.68] by sunsite.dk (MessageWall 1.0.8) with SMTP; 11 Nov 2003 19:0:3 -0000
Received: from opk by athlon with esmtp (masqmail 0.2.20) id
 1AJdq8-0EY-00; Tue, 11 Nov 2003 20:06:12 +0100
cc: Jonas Juselius <jonas@iki.fi>, zsh-users@sunsite.dk
In-reply-to: <20031111162338.GD23138@lorien.emufarm.org> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <20030523160020.GA9026@borho.org> <20030523160155.GA14388@lorien.emufarm.org> <20031106153225.GA491@lorien.emufarm.org> <1281.1068232665@athlon> <20031110182013.GA20547@lorien.emufarm.org> <9219.1068538977@gmcs3.local> <20031111162338.GD23138@lorien.emufarm.org>
To: Danek Duvall <duvall@emufarm.org>
Subject: Re: Completion function for bitkeeper? 
Date: Tue, 11 Nov 2003 20:06:12 +0100
Message-ID: <901.1068577572@athlon>

Danek Duvall wrote:
> On Tue, Nov 11, 2003 at 09:22:57AM +0100, Oliver Kiddle wrote:
> 
> > Searching for expl in zshcompsys, it is only used in examples. The one
> > exception is in the context of _arguments actions where it isn't just a
> > convention (_arguments can't use positional parameters for actions).
> 
> And as an action in _arguments is exactly how I'm using the _sccsfiles
> function.  See my posting from May 23 that includes the _bk script.

Sorry, I should have been more clear. What I mean is actually in the
_arguments action itself not within a function called as part of the
action. Looking at the documentation, it isn't as clear on this as it
should be. It doesn't help that in the rearrangement of the
documentation, the expl mention has become separated from the
`{eval-string}' action form and a little from the initial space feature
(have a look at 4.0 documentation).

Basically, it is intended so you can do things like this:

  '-a:desc: _foo -x -y -z "$expl[@]" a b c'
  '-b:desc:{compadd "$expl[@]" one two three}'

(the initial space before _foo prevents _arguments from automatically
putting explanation options after `_foo'.)

It is not intended so that with a specification like:
  '-a:desc:_sccs_files'
_sccs_files can then look in expl.

Any ideas on how to make the documentation clearer on this? Thanks for
raising the issue.

> Hm.  I just saw that.  So in addition to the documented methods of using
> $expl in an action of _arguments to get compadd args and using some of
> the positional parameters, there's also the suggested method of passing
> them in through -O?  What a wealth!

That is only for passing compadd options to _arguments. I don't
personally like it much though.

How's that bitkeeper function doing these days by the way? Is it at a
stage we could include with zsh? Does it conflict with _sccs?

Oliver


From zsh-workers-return-18455-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 19 16:50:35 2003
Return-Path: <zsh-workers-return-18455-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8275 invoked from network); 19 Apr 2003 16:50:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Apr 2003 16:50:34 -0000
Received: (qmail 20156 invoked by alias); 19 Apr 2003 16:50:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18455
Received: (qmail 19957 invoked from network); 19 Apr 2003 16:50:13 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by 127.0.0.1 with SMTP; 19 Apr 2003 16:49:52 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.128.126] by sunsite.dk (MessageWall 1.0.8) with SMTP; 19 Apr 2003 16:49:52 -0000
Message-ID: <20030419164308.17610.qmail@web10412.mail.yahoo.com>
Received: from [65.139.30.160] by web10412.mail.yahoo.com via HTTP; Sat, 19 Apr 2003 09:43:08 PDT
Date: Sat, 19 Apr 2003 09:43:08 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Completion function for _screen
To: zw <zsh-workers@sunsite.dk>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-1895645670-1050770588=:16801"


--0-1895645670-1050770588=:16801
Content-Type: text/plain; charset=us-ascii
Content-Id: 
Content-Disposition: inline

A version of this has been shipping with screen for a while now.  Just adding
it to the zsh distribution.

-FR.

__________________________________________________
Do you Yahoo!?
The New Yahoo! Search - Faster. Easier. Bingo
http://search.yahoo.com
--0-1895645670-1050770588=:16801
Content-Type: text/plain; name="scr_diff.txt"
Content-Description: scr_diff.txt
Content-Disposition: inline; filename="scr_diff.txt"

Index: Completion/Unix/Command/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/.distfiles,v
retrieving revision 1.38
diff -u -r1.38 .distfiles
--- Completion/Unix/Command/.distfiles	14 Mar 2003 12:14:30 -0000	1.38
+++ Completion/Unix/Command/.distfiles	19 Apr 2003 16:35:19 -0000
@@ -19,5 +19,5 @@
 _fsh          _chkconfig    _cdcd         _irssi        _mysqldiff    _sccs
 _netcat       _larch        _texinfo	  _figlet       _elinks       _tidy
 _global       _global_tags  _ant          _lsof         _mt           _xmlsoft
-_perforce     _python       _antiword
+_perforce     _python       _antiword     _screen
 '
Index: Completion/Unix/Command/_screen
===================================================================
RCS file: Completion/Unix/Command/_screen
diff -N Completion/Unix/Command/_screen
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ Completion/Unix/Command/_screen	19 Apr 2003 16:35:20 -0000
@@ -0,0 +1,83 @@
+#compdef screen 
+#Generated by Felix Rosencrantz
+
+ local context state line scr_cmds
+ scr_cmds=(
+  acladd	aclchg		acldel		aclgrp		aclumask
+  activity	addacl		allpartial	at		attrcolor
+  autodetach	autonuke	backtick	bce		bell_msg
+  bind		bindkey		break		breaktype	bufferfile
+  c1		caption		charset		chdir		clear
+  colon		command		compacthist	console		copy
+  copy_reg	crlf		debug		defautonuke	defbce
+  defbreaktype	defc1		defcharset	defencoding	defescape
+  defflow	defgr		defhstatus	defkanji	deflog
+  deflogin	defmode		defmonitor	defobuflimit	defscrollback
+  defshell	defsilence	defslowpaste	defutf8		defwrap
+  defwritelock	defzombie	detach		digraph		dinfo
+  displays	dumptermcap	echo		encoding	escape
+  eval		exec		fit		flow		focus
+  gr		hardcopy	hardcopy_append	hardcopydir	hardstatus
+  height	help		history		hstatus		ignorecase
+  info		ins_reg		kill		lastmsg		license
+  lockscreen	log		logfile		login		logtstamp
+  mapdefault	mapnotnext	maptimeout	markkeys	maxwin
+  meta		monitor		msgminwait	msgwait		multiuser
+  nethack	next		nonblock	number		obuflimit
+  only		other		partial		password	paste
+  pastefont	pow_break	pow_detach	pow_detach_msg	prev
+  printcmd	process		quit		readbuf		readreg
+  redisplay	register	remove		removebuf	reset
+  resize	screen		scrollback	select		sessionname
+  setenv	setsid		shell		shelltitle	silence
+  silencewait	sleep		slowpaste	sorendition	source
+  split		startup_message	stuff		su		term
+  termcap	termcapinfo	terminfo	time		title
+  unsetenv	utf8		vbell		vbell_msg	vbellwait
+  verbose	version		wall		width		windowlist
+  windows	wrap		writebuf	writelock	xoff
+  xon		zombie
+ )
+  
+  typeset -A opt_args
+  _arguments \
+	"-a[Force all capabilities into each window's termcap.]" \
+	'-A:Adapt all windows to the new display width & height.' \
+	"-c:Read configuration file instead of '.screenrc'.:_files -/" \
+	'-d:Detach the elsewhere running screen (with -r: reattach here).:->sessionname' \
+	'-dmS:Start as daemon: Screen session in detached mode.' \
+	'-D:Detach and logout remote (with -r: reattach here).' \
+	'-e:Change command characters.' \
+	'-f-:Flow control on, -fn = off, -fa = auto.:((n\:Flow\ conrol\ off a\:Flow\ conrol\ auto))' \
+	'-h:Set the size of the scrollback history buffer.' \
+	'-i[Interrupt output sooner when flow control is on.]' \
+	'-l[Login mode on (update /var/run/utmp), -ln = off.]' \
+	'-list[Do nothing, just list our SockDir.]' \
+	'-ls[Do nothing, just list our SockDir.]' \
+	"-L[Terminal's last character can be safely updated.]" \
+	'-m[ignore $STY variable, do create a new screen session.]' \
+	'-O[Choose optimal output rather than exact vt100 emulation.]' \
+	'-p:Preselect the named window if it exists.' \
+	'-q[Quiet startup. Exits with non-zero return code if unsuccessful.]' \
+	'-r[Reattach to a detached screen process.]:Handling Tag sessionname:->sessionname' \
+	'-R[Reattach if possible, otherwise start a new session.]' \
+	'-s:Shell to execute rather than $SHELL.' \
+	'-S:Name this session <pid>.sockname instead of <pid>.<tty>.<host>.' \
+	"-t:Set title. (window's name)." \
+	'-T:Use term as $TERM for windows, rather than "screen".' \
+	'-U[Tell screen to use UTF-8 encoding.]' \
+	'-v[Print screen version.]' \
+	'-wipe[Do nothing, just clean up SockDir.]' \
+	'-x[Attach to a not detached screen. (Multi display mode).]' \
+	'-X[Execute <cmd> as a screen command in the specified session.]:screencmd:(${scr_cmds[@]})'
+
+case $state in
+  "sessionname")
+  # Complete folder names.
+  local screendir
+
+    screendir=(`screen -ls | grep Socket | sed -n -e 's/\.$//' -e '$p' | awk '{print $NF;}'`)
+
+  _wanted files expl 'screen process' _path_files -W screendir
+;;
+esac

--0-1895645670-1050770588=:16801--


From zsh-workers-return-10518-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 05 15:10:39 2000
Return-Path: <zsh-workers-return-10518-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28190 invoked from network); 5 Apr 2000 15:10:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Apr 2000 15:10:34 -0000
Received: (qmail 10660 invoked by alias); 5 Apr 2000 15:10:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10518
Received: (qmail 10641 invoked from network); 5 Apr 2000 15:10:20 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000405150953.ZM14928@candle.brasslantern.com>
Date: Wed, 5 Apr 2000 15:09:53 +0000
In-Reply-To: <000501bf9ef1$e272e230$21c9ca95@mow.siemens.ru>
Comments: In reply to "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
        "Zsh info index problems" (Apr  5,  3:27pm)
References: <000501bf9ef1$e272e230$21c9ca95@mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>,
        "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: Re: Zsh info index problems
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 5,  3:27pm, Andrej Borsenkow wrote:
} Subject: Zsh info index problems
}
} i zcompile
} 
} gives me the first lines of shell builtins (description of autoload,
} where zcompile is mentioned) and _not_ zcompile itself.
} 
} i globbing, qualifiers
} 
} ends here:
} 
}      treated specially the way they usually are in globbing.
}                                                    ^^^^^ this word
} 
} Is it the problem of info or something wrong with our info files?

It's the problem of info.  In the printed index, the page numbers will
be much more accurate.

The way indexing is implemented is by jumping to the referenced node and
then searching for the first word (actually, the string up to the first
comma, or the whole string if there isn't any comma) in the index entry.

E.g. if you look in the Concept Index (m Concept Index RET) at the
"aliases, completion of" entry, you'll see "Description of Options" as
the node reference.  So `i aliases, completion RET' first searches the
index and finds "aliases, completion of"; it grabs the first word (up
to the comma) and the node reference; and then jumps to "Description
of Options" searches forward for "aliases".

In that particular case, that gets it to the right spot.  In the case of
zcompile, it finds the first use rather than the definition.  I generally
follow `i' with a search (in emacs info mode, that's just `C-s C-w C-s'
but in standalone info you have to actually type the word).

There are a few cases where we could force the search to be more accurate
by using less-human-friendly strings in the part up to the comma, but not
very many.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


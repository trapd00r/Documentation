From zsh-users-return-14888-mason-zsh=primenet.com.au@zsh.org Thu Feb 25 16:41:18 2010
Return-Path: <zsh-users-return-14888-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3222 invoked by alias); 25 Feb 2010 16:41:18 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14888
Received: (qmail 8087 invoked from network); 25 Feb 2010 16:41:07 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100225084049.ZM2001@torch.brasslantern.com>
Date: Thu, 25 Feb 2010 08:40:49 -0800
In-reply-to: <20100225141219.355b6a1c@news01>
Comments: In reply to Peter Stephenson <pws@csr.com>
 "Re: tab completion in an alias" (Feb 25,  2:12pm)
References: <20100224052122.GA27211@s70206.gridserver.com>
	<20100225141219.355b6a1c@news01>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Re: tab completion in an alias
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Feb 25,  2:12pm, Peter Stephenson wrote:
}
} zle-line-init() {
}   if [[ -n $ZLE_PUSH_STRING ]]; then
}     zle -U "$ZLE_PUSH_STRING"
}     unset ZLE_PUSH_STRING
}   fi
} }
} zle -N zle-line-init
} alias d="ZLE_PUSH_STRING=\$'cd -\\C-i'"

I like that approach, but it doesn't work very well unless your 
zstyles etc. send you directly into menu selection on the first
tab.  It should also perhaps check whether the directory stack is
(not) empty before proceeding.

Using an alias for this seems a little strange in the first place,
because it shouldn't need to run as a command; e.g., you'd never
need/want to prime zle-line-init this way inside a "while" loop.

I'd probably do this with a "select" command to present the menu,
but then you don't get a fancy curses-based arrow-key interface.


From zsh-users-return-14363-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 11 08:07:03 2009
Return-Path: <zsh-users-return-14363-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21889 invoked from network); 11 Sep 2009 08:07:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 11 Sep 2009 08:07:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 62898 invoked from network); 11 Sep 2009 07:58:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2009 07:58:07 -0000
Received: (qmail 20257 invoked by alias); 11 Sep 2009 07:57:54 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14363
Received: (qmail 20242 invoked from network); 11 Sep 2009 07:57:53 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Sep 2009 07:57:53 -0000
Received: from exprod8og106.obsmtp.com (exprod8og106.obsmtp.com [64.18.3.92])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id AB2E18026E39
	for <zsh-users@sunsite.dk>; Fri, 11 Sep 2009 09:57:44 +0200 (CEST)
Received: from source ([153.98.68.229]) (using TLSv1) by exprod8ob106.postini.com ([64.18.7.12]) with SMTP
	ID DSNKSqoC9Q4XwyYyi9ea+GzLuV7dH+FCZ/Pb@postini.com; Fri, 11 Sep 2009 00:57:46 PDT
Received: from hhbrue013.hq.corp.eurocontrol.int (hhbrue013.hq.corp.eurocontrol.int [172.21.42.121])
	by draco.eurocontrol.be (8.13.8/8.13.8) with ESMTP id n8B7ve5H010025
	for <zsh-users@sunsite.dk>; Fri, 11 Sep 2009 09:57:40 +0200
Received: from HHBRUE011.hq.corp.eurocontrol.int ([193.221.161.80]) by hhbrue013.hq.corp.eurocontrol.int with Microsoft SMTPSVC(6.0.3790.3959); Fri, 11 Sep 2009 09:57:40 +0200
Received: from FFBRUE001.cfmu.corp.eurocontrol.int ([193.58.25.50]) by HHBRUE011.hq.corp.eurocontrol.int with Microsoft SMTPSVC(6.0.3790.3959); Fri, 11 Sep 2009 09:57:40 +0200
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [ksh emulation] zle and bindkey commands not available when called from /etc/kshrc
Date: Fri, 11 Sep 2009 09:57:39 +0200
Message-ID: <38D4FA2BB99A674BADDED237051D97A70C75C55B@FFBRUE001.cfmu.corp.eurocontrol.int>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Importance: normal
Priority: normal
Thread-Topic: RE: [ksh emulation] zle and bindkey commands not available when called from /etc/kshrc
thread-index: AcoytQC4MaQa+tgSQX+8alR9R8HiFAAACkUw
From: "Tristan TERPELLE" <tristan.terpelle@eurocontrol.int>
To: <zsh-users@sunsite.dk>
X-OriginalArrivalTime: 11 Sep 2009 07:57:40.0282 (UTC) FILETIME=[8905F9A0:01CA32B5]
X-Virus-Scanned: ClamAV 0.94.2/9795/Fri Sep 11 07:51:32 2009 on bifrost
X-Virus-Status: Clean

> -----Original Message-----
> From: Peter Stephenson [mailto:pws@csr.com]=20
> Sent: Thursday 10 September 2009 11:57
> To: zsh-users@sunsite.dk
> Subject: Re: [ksh emulation] zle and bindkey commands not available =
when called from /etc/kshrc
>=20
> On Thu, 10 Sep 2009 11:37:24 +0200
> "Tristan TERPELLE" <tristan.terpelle@eurocontrol.int> wrote:
>> When I use zsh' ksh emulation mode, the following lines in /etc/kshrc
>> result in errors:
>>
>> autoload -Uz edit-command-line
>> zle -N edit-command-line
>> bindkey -M vicmd 'v' edit-command-line
>>
>> The errors are:
>>
>> /etc/kshrc:4: command not found: zle
>> /etc/kshrc:5: command not found: bindkey
>> /etc/kshrc:4: command not found: zle
>> /etc/kshrc:5: command not found: bindkey
>> /etc/kshrc:4: command not found: zle
>> /etc/kshrc:5: command not found: bindkey
>=20
> When it starts up in ksh emulation, zsh doesn't arrange to load =
modules
> with its own extensions automatically when they are accessed by =
command
> names, so that the names of the builtins don't clash.  It's probably =
worth
> pointing out that zsh isn't really designed to do it's own clever
> extensions in other emulations---they're there as an alternative, to =
make
> it easier to use stuff written for other shells.  So you're going a =
bit
> beyond the design criteria.  However, there are usually ways of fixing
> things up.
>=20
> For an interactive shell you can load the zle module by hand:
>=20
> zmodload zsh/zle
>=20
> (if you have an older version of zsh, not a recent 4.3 release, use
> "zmodload -i zsh/zle" to avoid an error if the module was already =
loaded).
> This is slightly simpler than the code it's replacing, actually, which
> would mark the command zle and bindkey for autoloading---however, if =
you're
> about to call the commands anyway, that's pointless.
>=20
> You might encounter similar problems with completion, if you're using
> that, and need to load the modules zsh/complete and zsh/computil.  I'm =
not
> sure how well the completion system is set up to be called from ksh
> emulation.
>=20

Hi Peter


The zmodload zsh/zle command works beautifully! I've added the following =
lines=20
to /etc/kshrc

autoload -Uz edit-command-line
zmodload -i zsh/zle
bindkey -M vicmd 'v' edit-command-line



Thanks for the help!


Regards


Tristan Terpelle

____
=20
This message and any files transmitted with it are legally privileged =
and intended for the sole use of the individual(s) or entity to whom =
they are addressed. If you are not the intended recipient, please notify =
the sender by reply and delete the message and any attachments from your =
system. Any unauthorised use or disclosure of the content of this =
message is strictly prohibited and may be unlawful.
=20
Nothing in this e-mail message amounts to a contractual or legal =
commitment on the part of EUROCONTROL, unless it is confirmed by =
appropriately signed hard copy.
=20
Any views expressed in this message are those of the sender.


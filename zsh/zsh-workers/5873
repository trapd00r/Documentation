From zsh-workers-return-5873-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 22 13:04:13 1999
Return-Path: <zsh-workers-return-5873-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2649 invoked from network); 22 Mar 1999 13:04:12 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Mar 1999 13:04:12 -0000
Received: (qmail 9017 invoked by alias); 22 Mar 1999 13:03:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5873
Received: (qmail 9008 invoked from network); 22 Mar 1999 13:03:35 -0000
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "Sven Wischnowsky" <wischnow@informatik.hu-berlin.de>,
        <zsh-workers@sunsite.auc.dk>
Subject: RE: PATCH: cleanup in zle_tricky.c
Date: Mon, 22 Mar 1999 16:02:44 +0300
Message-ID: <000901be7464$46fd2760$21c9ca95@mowp.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-reply-to: <199903221056.LAA07941@beta.informatik.hu-berlin.de>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2014.211

> - compstate[pattern_match] is normally set to `*'. If it is set to a
>   string not starting with a star, the code will not automatically
>   insert one at the cursor position.

I don't understand this difference (with globcomplete unset):

bor@itsrm2:/tools/src/zsh-3.1.5-pws-13%> l D/z*iTAB
bor@itsrm2:/tools/src/zsh-3.1.5-pws-13%> l Doc/z*iTAB
bor@itsrm2:/tools/src/zsh-3.1.5-pws-13%> l Doc/zsh.texi

  *really* fine

but

bor@itsrm2:/tools/src/zsh-3.1.5-pws-13%> l /u/i/s/*.hTAB
  b-e-e-p

/u/i/s expands to (single) /usr/include/sys - at least, if the last
component is considered directory:

bor@itsrm2:/tools/src/zsh-3.1.5-pws-13%> ls -d /usr/include/s*(/)
/usr/include/sys

Another one that puzzled me:

bor@itsrm2:/tools/src/zsh-3.1.5-pws-13/Completion%> cp -rp
{Core,Base,Builtin} ~
/.zsh.d/Completion
cp: Cannot access Builtin: No such file or directory
bor@itsrm2:/tools/src/zsh-3.1.5-pws-13/Completion%> cp -rp
{Core,Base,Builtin} ~ /.zsh.d/Completion

I moved cursor before closing bracket (BuiltinCURSOR}) and pressed TAB -
with the result BEEP (this with GLOB_COMPLETE set). If GLOB_COMPLETE is
unset, I get (after TAB):

bor@itsrm2:/tools/src/zsh-3.1.5-pws-13/Completion%> cp -rp Core Base Builtin
~/
.zsh.d/Completion

Now, the first is correct (I need COMPLETE_IN_WORD for this to work). But
what is the second?

Do I understand it correctly, that now * is always added if GLOB_COMPLETE is
set (and never added is GLOB_COMPLETE is unset)? Und is globbing ever done
at all? I mean, normally, Doc/z*i should be globbed before completion even
starts - now (with GLOB_COMPLETE) this is the same as Doc/z*i*.

cheers

/andrej



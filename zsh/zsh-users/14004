From zsh-users-return-14004-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 08 16:47:51 2009
Return-Path: <zsh-users-return-14004-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1008 invoked from network); 8 Apr 2009 16:47:49 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Apr 2009 16:47:49 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 43987 invoked from network); 8 Apr 2009 16:47:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Apr 2009 16:47:38 -0000
Received: (qmail 17410 invoked by alias); 8 Apr 2009 16:47:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14004
Received: (qmail 17400 invoked from network); 8 Apr 2009 16:47:22 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 8 Apr 2009 16:47:22 -0000
Received: from smtprelay04.ispgateway.de (smtprelay04.ispgateway.de [80.67.18.16])
	by bifrost.dotsrc.org (Postfix) with ESMTP id BB72F82D4B6F
	for <zsh-users@sunsite.dk>; Wed,  8 Apr 2009 18:47:17 +0200 (CEST)
Received: from [212.117.84.39] (helo=fsst.voodoo.lan)
	by smtprelay04.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <ft@bewatermyfriend.org>)
	id 1Lravl-0004G8-6N
	for zsh-users@sunsite.dk; Wed, 08 Apr 2009 18:47:17 +0200
Received: from hawk by fsst.voodoo.lan with local (Exim 4.69)
	(envelope-from <ft@bewatermyfriend.org>)
	id 1LravT-00023W-Tu
	for zsh-users@sunsite.dk; Wed, 08 Apr 2009 18:47:00 +0200
Date: Wed, 8 Apr 2009 18:46:59 +0200
From: Frank Terbeck <ft@bewatermyfriend.org>
To: zsh-users@sunsite.dk
Subject: Re: colors gone in cygwin
Message-ID: <20090408164659.GA24917@fsst.voodoo.lan>
Mail-Followup-To: zsh-users@sunsite.dk
References: <fb3648c60904080925s42b55f33sed4ba7979744fcd3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
In-Reply-To: <fb3648c60904080925s42b55f33sed4ba7979744fcd3@mail.gmail.com>
User-Agent: Mutt/1.5.19 (2009-01-05)
X-Df-Sender: 430444
X-Virus-Scanned: ClamAV 0.92.1/9213/Wed Apr  8 14:41:44 2009 on bifrost
X-Virus-Status: Clean

fREW Schmidt <frioux@gmail.com>:
> Hi all,
> I had mailed this list about this before a while back and we never resolved
> it; mostly because work got crazy for me.  I am running cygwin with zsh (zsh
> 4.3.9 (i686-pc-cygwin)) and for some reason all of the colors on my prompt
> are gone.
> 
> You can see my .zshrc here:
> http://github.com/frioux/dotfiles/blob/0cec8a1817001148525170ef5318b54bdd63aa69/zshrc
> 
> There is a fairly long prompt near the bottom, but that wouldn't explain
> where the colors went.  It all works fine in linux.

You're using another version of zsh in linux.

You are using $fg[], $fg_bold[] etc, without loading the colors
function. That used to work for you accidentally because promptinit
(which you are loading) used to load the colors function for you.

In recent versions of zsh (4.3.9 and newer, I think), the prompt
themes are using the new way of specifying colors and therefore don't
need the hashes provided by the colors function anymore. That's why
promptinit doesn't load colors these days.

Just add: autoload -Uz colors && colors

And you'll be fine.

Regards, Frank

-- 
In protocol design, perfection has been reached not when there is
nothing left to add, but when there is nothing left to take away.
                                                  -- RFC 1925


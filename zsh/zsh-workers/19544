From zsh-workers-return-19544-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 06 16:29:57 2004
Return-Path: <zsh-workers-return-19544-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10576 invoked from network); 6 Mar 2004 16:29:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Mar 2004 16:29:57 -0000
Received: (qmail 25900 invoked by alias); 6 Mar 2004 16:29:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19544
Received: (qmail 7006 invoked from network); 6 Mar 2004 16:03:08 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 6 Mar 2004 16:03:08 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [204.127.202.64] by sunsite.dk (MessageWall 1.0.8) with SMTP; 6 Mar 2004 16:3:7 -0000
Received: from madstop.pimlott.net ([65.96.178.14])
          by comcast.net (sccrmhc13) with ESMTP
          id <2004030616030601600gjaame>; Sat, 6 Mar 2004 16:03:06 +0000
Received: from andrew by madstop.pimlott.net with local (Exim 3.35 #1 (Debian))
	id 1AzeJ3-0000Ds-00; Sat, 06 Mar 2004 11:05:41 -0500
Date: Sat, 6 Mar 2004 11:05:40 -0500
From: Andrew Pimlott <andrew@pimlott.net>
To: Clint Adams <schizo@debian.org>
Cc: zsh-workers@sunsite.dk, 236350-forwarded@bugs.debian.org
Subject: Re: Bug#236350: zsh: _prefix completer broken?
Message-ID: <20040306160540.GW19320@pimlott.net>
References: <E1AzKUu-0003tz-00@techloaner2.idiomtech.com> <20040306013513.GA25297@scowler.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20040306013513.GA25297@scowler.net>
User-Agent: Mutt/1.3.28i

On Fri, Mar 05, 2004 at 08:35:13PM -0500, Clint Adams wrote:
> >     zstyle ':completion:*' completer _complete _prefix
> > 
> > However, it doesn't seem that _prefix is having any effect.  According
> > to everything I've read, I should be able to type "vfoo", put the cursor
> > over the 'f', hit tab, and get offered completions like "vi", etc.
> > Instead, I just get a beep.
> 
> If you setopt COMPLETE_IN_WORD, it will complete vi, but otherwise, it
> doesn't appear that $SUFFIX is being set.

I really don't know how I missed that in the documentation and all the
searches I did, but when I setopt COMPLETE_IN_WORD, it indeed does work.
I guess the bug is only that compinstall doesn't generate a complete
configuration for _prefix.  It would probably also be useful to move the
mention of COMPLETE_IN_WORD higher in the documentation for _complete,
and include it in the examples.

I noticed a couple other things.  The documentation says that the
add-space style defaults to true.  This doesn't seem to be the case, as
if I complete with the cursor on 'f' in "egrefoo", I get just "p" by
default, and "p " with

    zstyle ':completion:*' completer _complete _prefix

in my config.

Also, when the completion on prefix succeeds, as in the "egrefoo"
example, there is a beep, unlike with a normal successful completion.
This is distracting.

Thanks for your help.

Andrew


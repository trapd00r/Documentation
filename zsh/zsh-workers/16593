From zsh-workers-return-16593-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 08 15:20:20 2002
Return-Path: <zsh-workers-return-16593-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10972 invoked from network); 8 Feb 2002 15:20:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 8 Feb 2002 15:20:19 -0000
Received: (qmail 25658 invoked by alias); 8 Feb 2002 15:20:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16593
Received: (qmail 25624 invoked from network); 8 Feb 2002 15:20:05 -0000
Message-ID: <3C63ECAC.7000607@genarts.com>
Date: Fri, 08 Feb 2002 10:20:12 -0500
From: Gary Oberbrunner <garyo@genarts.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:0.9.6) Gecko/20011120
X-Accept-Language: en-us
MIME-Version: 1.0
CC: zsh-workers@sunsite.dk
Subject: Re: Zsh 4.0.4 and Emacs 21.1 in Windows XP
References: <000001c17348$9794de80$21c9ca95@mow.siemens.ru>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

In November, the following exchange occurred:

I wrote:

>>I'm trying to use Zsh 4.0.4 on Windows XP with Emacs 21.1 in
>>shell-mode.

 >>Everything works OK except zsh thinks all my input has an extra CR
 >>at the end of each line.  So in order to do a 'ls' I have to do 'ls;'
 >>and then it does the ls properly and then gives me an error 'zsh:
 >>command not found: ^M'.  If I just type ls<CR> I get 'zsh: command not
 >>found: ls^M'.  I've turned off all my .z* scripts and it didn't make

Andrej Borsenkow replied:

> Have you compiled Emacs under Cygwin? (I assume, you have Cygwin
> environment as zsh definitely does not work under native Win32). I
> vaguely remember there were problems (Xemacs is supposed to work
> though).


Then after that I submitted a patch which would strip CRs off the end of 
input lines, so it would work for me.  Well, I finally got enough time 
to track it down.  It had nothing to do with cygwin bin mode, and 
nothing really to do with zsh.  (I could make it happen with other 
shells too.)  And my bogus patch is unnecessary.

It turns out it was caused by the expression (standard-display-european) 
in my .emacs file; once I removed that and just used 
(set-explicit-shell-file-name "/path/to/zsh.exe") I was fine.  I am SO 
HAPPY now -- my beloved zsh, in emacs, on Windows and Irix and Linux, 
all working beautifully!

I know this is a little off topic, but I just wanted to get it into the 
archives in case anyone else had this problem.

-- Gary Oberbrunner


From hzoli@cs.elte.hu Thu May  9 10:14:31 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id KAA16729 for <mason@werple.mira.net.au>; Thu, 9 May 1996 10:14:29 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id UAA20631; Wed, 8 May 1996 20:08:23 -0400 (EDT)
Resent-Date: Wed, 8 May 1996 20:08:23 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199605082243.AAA00374@hzoli.ppp.cs.elte.hu>
Subject: Re: Redirection bugs, and fixes
To: A.Main@dcs.warwick.ac.uk (Zefram)
Date: Thu, 9 May 1996 00:43:22 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <3623.199605081530@cray.dcs.warwick.ac.uk> from Zefram at "May 8, 96 04:30:11 pm"
X-Mailer: ELM [version 2.4ME+ PL11 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"xiCIm3.0.C25.rTJan"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1023
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1600
Status: O

> There are a few remaining bugs in redirection, particularly in closing
> already redirected fds.  The patch below fixes all the problems I know
> about in this area.  The patch to utils.c below fixes a little problem
> with movefd(), that it would always move its argument, even if it was
> already >=10.

Thanks, I'll have a look at.  Somehow I missed your previous patches about
that.

> On other issues (does anyone read these rambling commentaries I post?),

Yes, I read them (even I do not always reply).

> as I now have some free time again, and the baseline is now up to date
> with my multitudinous ZLE patches, I plan to work seriously on making
> ZLE 8-bit clean.  If anyone else has done a significant amount of work
> in this area, please let me know.

Go ahead.  I think in zle it is better to use raw 8-bit data in line which
can even contain nulls if ll is used everywhere.  The raw 8-bit input
should be converted to zsh format each time it gets in touch with any
other part of zsh.  There is a metafy function for that which can generate
a converted version in various ways.  See the comment before metafy() in
utils.c for detals.

> And one more thing: I noticed that Src/.indent.pro disappeared between
> beta16 and beta17.  I don't think it was in any of the hzoli releases.
> I don't use indent myself, but this seems a rather silly change.  Zoltan,
> was there some reason for removing this?

There was no reason, it was an accident.  I always used zsh globbing to
generate releases and I do not have GLOB_DOTS set by default.  I'll put it
back in the next release.

Zoltan



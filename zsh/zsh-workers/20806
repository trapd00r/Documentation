From zsh-workers-return-20806-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 12 00:11:08 2005
Return-Path: <zsh-workers-return-20806-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20326 invoked from network); 12 Feb 2005 00:11:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Feb 2005 00:11:07 -0000
Received: (qmail 55966 invoked from network); 12 Feb 2005 00:11:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Feb 2005 00:11:01 -0000
Received: (qmail 8275 invoked by alias); 12 Feb 2005 00:10:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20806
Received: (qmail 27745 invoked from network); 11 Feb 2005 23:44:17 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Feb 2005 23:44:17 -0000
Received: (qmail 47718 invoked from network); 11 Feb 2005 23:43:41 -0000
Received: from sccrmhc11.comcast.net (204.127.202.55)
  by a.mx.sunsite.dk with SMTP; 11 Feb 2005 23:43:37 -0000
Received: from crud.mn.org (c-24-245-76-195.mn.client2.attbi.com[24.245.76.195])
          by comcast.net (sccrmhc11) with SMTP
          id <2005021123433501100e8rn6e>; Fri, 11 Feb 2005 23:43:35 +0000
Received: (qmail 4857 invoked by uid 501); 11 Feb 2005 17:43:34 -0600
Date: Fri, 11 Feb 2005 17:43:34 -0600
From: Barry.Schwartz@chemoelectric.org
To: zsh-workers@sunsite.dk
Subject: Zsh 4.2.3 and 4.2.4 are built improperly on AMD64 Gentoo Linux version 2005.0
Message-ID: <20050211234334.GA22212@crud.crud.mn.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="CE+1k2dSO48ffgeK"
Content-Disposition: inline
User-Agent: Mutt/1.5.6i
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00,NO_REAL_NAME 
	autolearn=no version=3.0.2
X-Spam-Hits: -2.6


--CE+1k2dSO48ffgeK
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Zsh 4.2.3 and 4.2.4 are built improperly on AMD64 Gentoo Linux,
profile 2005.0.  Here's what the configure script shows:

checking where the RLIMIT macros are located... configure: WARNING: RLIMIT =
MACROS NOT FOUND:  please report to developers
/dev/null
checking if rlim_t is longer than a long... no
checking if the rlim_t is unsigned... yes
checking for rlim_t... yes
checking for limit RLIMIT_AIO_MEM... no
checking for limit RLIMIT_AIO_OPS... no
checking for limit RLIMIT_AS... yes
checking for limit RLIMIT_LOCKS... yes
checking for limit RLIMIT_MEMLOCK... yes
checking for limit RLIMIT_NPROC... yes
checking for limit RLIMIT_NOFILE... yes
checking for limit RLIMIT_PTHREAD... no
checking for limit RLIMIT_RSS... yes
checking for limit RLIMIT_SBSIZE... no
checking for limit RLIMIT_TCACHE... no
checking for limit RLIMIT_VMEM... no
checking for limit RLIMIT_SIGPENDING... yes
checking for limit RLIMIT_MSGQUEUE... yes
checking if RLIMIT_VMEM and RLIMIT_RSS are the same... no
checking if RLIMIT_VMEM and RLIMIT_AS are the same... no


My little workaround is to apply the following patch and run
autoconf.  This doesn't really fix the problem, it just gets zsh built
for me.

--- ORIG/configure.ac   2005-01-12 10:55:06.000000000 +0000
+++ zsh-4.2.3/configure.ac      2005-01-22 06:09:38.567302976 +0000
@@ -1273,6 +1273,7 @@
                    /usr/include/sys/resource.h       dnl
                    /usr/include/bits/resource.h      dnl
                    /usr/include/resourcebits.h       dnl
+                   /usr/include/asm-x86_64/resource.h dnl
                    /dev/null;
 do
   test -f $RESOURCE_H && \




--=20
Barry.Schwartz@chemoelectric.org    http://www.chemoelectric.org
"I have directed that in the future I sign each letter." -- Rumsfeld

--CE+1k2dSO48ffgeK
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQFCDUMmBNGXDWV0vIMRApU2AKCoHBznQdXmQEsMtHT0dEWBV4f5mQCfU8ZD
KKdYMApM7YVMwbXjVYUE95k=
=KE/6
-----END PGP SIGNATURE-----

--CE+1k2dSO48ffgeK--


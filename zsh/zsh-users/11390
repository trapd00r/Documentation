From zsh-users-return-11390-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 12 01:07:21 2007
Return-Path: <zsh-users-return-11390-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4891 invoked from network); 12 Apr 2007 01:07:20 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Apr 2007 01:07:20 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 61058 invoked from network); 11 Apr 2007 19:40:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Apr 2007 19:40:34 -0000
Received: (qmail 12451 invoked by alias); 11 Apr 2007 19:40:26 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11390
Received: (qmail 12441 invoked from network); 11 Apr 2007 19:40:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Apr 2007 19:40:26 -0000
Received: (qmail 59690 invoked from network); 11 Apr 2007 19:40:26 -0000
Received: from mabruk.micah.cowan.name (66.150.225.51)
  by a.mx.sunsite.dk with SMTP; 11 Apr 2007 19:40:21 -0000
Received: from [192.168.6.57] (unknown [69.36.252.2])
	by mabruk.micah.cowan.name (Postfix) with ESMTP id E90823C8A95C
	for <zsh-users@sunsite.dk>; Wed, 11 Apr 2007 12:40:16 -0700 (PDT)
Message-ID: <461D3999.7070007@cowan.name>
Date: Wed, 11 Apr 2007 12:40:09 -0700
From: Micah Cowan <micah@cowan.name>
User-Agent: Thunderbird 1.5.0.10 (X11/20070306)
MIME-Version: 1.0
To:  zsh-users@sunsite.dk
Subject: Re: Reading line by line
References: <242911.74922.qm@web8402.mail.in.yahoo.com> <461D2541.1080104@cowan.name> <20070411183602.GD4996@sc.homeunix.net> <461D2E79.6070907@cowan.name> <20070411191953.GF4996@sc.homeunix.net>
In-Reply-To: <20070411191953.GF4996@sc.homeunix.net>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Stephane Chazelas wrote:
> On Wed, Apr 11, 2007 at 11:52:41AM -0700, Micah Cowan wrote:
> [...]
>> $ echo 'a   b' | read -r
>>
>> zsh will preserve all whitespace between a and b, whereas other shells 
>> will condense it to a single space. POSIX states that, after splitting 
>> the fields, if there is only one variable name left in the args, all 
>> remaining fields will be assigned to that variable, with "their 
>> intervening separation", which IMO is difficult to interpret as anything 
>> other than the original separation that had been encountered.
> [...]
> 
> No, you must have been confused by word splitting occuring upon
> unquoted variable expansions.

Perhaps. I could've sworn I'd quoted it... but now that I think about 
it, I probably used OP's example, which has it unquoted.

> echo 'a  b' | read a
> echo "$a"
> 
> outputs "a  b"
> 
> That's what POSIX requires and that's how zsh behaves when
> in POSIX emulation.

Right; I was talking about bash, dash and ksh behavior not being 
compliant, not zsh. But, if I did indeed leave it unquoted, that would 
explain the difference, since zsh, by default, does not field-split 
unquoted variables.

> Note that word splitting is not the only thing performed by
> POSIX shells upon variable expansion, there's also filename
> generation. That's why one should *NEVER* leave variables
> unquoted in POSIX scripts.

Agreed, absolutely. Well... s/*NEVER*/only when you know that word 
expansion is actually what you really want/

-- 
Micah J. Cowan
Programmer, musician, typesetting enthusiast, gamer...
http://micah.cowan.name/


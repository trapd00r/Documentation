From zsh-workers-return-9470-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Jan 30 01:21:05 2000
Return-Path: <zsh-workers-return-9470-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26513 invoked from network); 30 Jan 2000 01:21:04 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Jan 2000 01:21:04 -0000
Received: (qmail 8402 invoked by alias); 30 Jan 2000 01:20:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9470
Received: (qmail 8394 invoked from network); 30 Jan 2000 01:20:57 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: stylistic override to _deb_packages
References: <20000129173722.A13963@scowler.net>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 30 Jan 2000 10:20:54 +0900
In-Reply-To: Clint Adams's message of "Sat, 29 Jan 2000 17:37:22 -0500"
Message-ID: <rsqiu0cs6bt.fsf@crane.jaist.ac.jp>
Lines: 60
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <20000129173722.A13963@scowler.net>,
  Clint Adams <schizo@debian.org> writes:

> -  _deb_packages_updage_$command
> +  _deb_packages_updage_$pkgset

Oops.  `updage' is my typo.

Index: Completion/Debian/_deb_packages
===================================================================
RCS file: /projects/zsh/zsh/Completion/Debian/_deb_packages,v
retrieving revision 1.1.1.6
diff -u -r1.1.1.6 _deb_packages
--- Completion/Debian/_deb_packages	2000/01/30 00:59:22	1.1.1.6
+++ Completion/Debian/_deb_packages	2000/01/30 01:17:37
@@ -2,7 +2,7 @@
 
 # Usage: _deb_packages expl... avail|installed|uninstalled
 
-_deb_packages_updage_avail () {
+_deb_packages_update_avail () {
   if (( ! $+_deb_packages_cache_uninstalled )); then
     _deb_packages_cache_avail=(
       ${(f)"$(apt-cache dumpavail | awk '/^Package:/ { print $2 }')"}
@@ -11,7 +11,7 @@
   cachevar=_deb_packages_cache_avail
 }
 
-_deb_packages_updage_installed () {
+_deb_packages_update_installed () {
   if (( ! $+_deb_packages_cache_installed )); then
     _deb_packages_cache_installed=(
       ${${${(f)"$(dpkg --get-selections)"}:#*deinstall}%%	*}
@@ -20,9 +20,9 @@
   cachevar=_deb_packages_cache_installed
 }
 
-_deb_packages_updage_uninstalled () {
-  _deb_packages_updage_avail
-  _deb_packages_updage_installed
+_deb_packages_update_uninstalled () {
+  _deb_packages_update_avail
+  _deb_packages_update_installed
   if (( ! $+_deb_packages_cache_uninstalled )); then
     _deb_packages_cache_uninstalled=(
       ${_deb_packages_cache_avail:#${(j:|:)~${_deb_packages_cache_installed:q}}}
@@ -49,9 +49,9 @@
 
   expl=("${(@)argv[1,-2]}")
 
-  _deb_packages_updage_$pkgset
+  _deb_packages_update_$pkgset
 
-  _tags packages && compadd "$expl[@]" - "${(e):-"\${(@)$cachevar}"}"
+  _tags packages && compadd "$expl[@]" - "${(@P)cachevar}"
 }
 
 _deb_packages "$@"
-- 
Tanaka Akira


From zsh-workers-request@euclid.skiles.gatech.edu Sat Jan 11 22:04:29 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 4558 invoked from network); 11 Jan 1997 22:04:28 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 11 Jan 1997 22:04:28 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA05053; Sat, 11 Jan 1997 17:13:11 -0500 (EST)
Resent-Date: Sat, 11 Jan 1997 17:13:11 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <23703.199701112214@stone.dcs.warwick.ac.uk>
Subject: menu completion cleanup
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Sat, 11 Jan 1997 22:14:30 +0000 (GMT)
X-Patch: 194
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8714.63
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"CEB2r.0.uE1.t11so"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2781
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

My recent patch for removable suffixes makes invalidatelist() reset
lastambig.  This means that the test of lastcmd when starting menu
completion with AUTO_MENU is no longer necessary.

 -zefram

      *** Src/Zle/zle_tricky.c	1997/01/11 17:59:12	1.10
      --- Src/Zle/zle_tricky.c	1997/01/11 19:45:02
      ***************
      *** 508,516 ****
            
            /* Check if we have to start a menu-completion (via automenu). */
        
      !     if ((amenu = (isset(AUTOMENU) &&
      ! 		       (lastcmd & ZLE_MENUCMP) &&
      ! 		       lastambig)))
        	usemenu = 1;
        
            /* Expand history references before starting completion.  If anything *
      --- 508,514 ----
            
            /* Check if we have to start a menu-completion (via automenu). */
        
      !     if ((amenu = (isset(AUTOMENU) && lastambig)))
        	usemenu = 1;
        
            /* Expand history references before starting completion.  If anything *

-----BEGIN PGP SIGNATURE-----
Version: 2.6.2

iQCVAwUBMtfvbHD/+HJTpU/hAQFfggQAqBaWvQQ/X3qU6er/1MLpk0tlYVqOJ3Mn
pkMwgGv6a/GV2o7jjLFGCiFwMA0hujjKuW1z9X0qLe2km7EI8Fk18TO1vlGtOul9
NyAr3a572cJApzIOjNzY/R0Q6WZ0OJX+SRpAD1hzuWXgPt2nMUfBDkfGydWOlo6s
Eitk1PRbnJY=
=+zKq
-----END PGP SIGNATURE-----


From zsh-workers-return-13997-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 17 08:53:11 2001
Return-Path: <zsh-workers-return-13997-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28392 invoked from network); 17 Apr 2001 08:53:09 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Apr 2001 08:53:09 -0000
Received: (qmail 10508 invoked by alias); 17 Apr 2001 08:53:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13997
Received: (qmail 10493 invoked from network); 17 Apr 2001 08:53:00 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Tue, 17 Apr 2001 10:52:57 +0200 (MET DST)
Message-Id: <200104170852.KAA05138@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: Slash after directory number in cd completion?
In-Reply-To: <20010412113428.86398.qmail@web9307.mail.yahoo.com>

[ Hello, everyone.  I'm back. ]

Oliver Kiddle wrote:

> ...
> 
> I actually think the correct patch would be to remove the whole if,
> then else because it is done in _tilde and isn't otherwise needed. I've
> left it for the time being though.

I agree.

Bye
  Sven

Index: Completion/Zsh/Type/_directory_stack
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Type/_directory_stack,v
retrieving revision 1.3
diff -u -r1.3 _directory_stack
--- Completion/Zsh/Type/_directory_stack	2001/04/12 11:42:02	1.3
+++ Completion/Zsh/Type/_directory_stack	2001/04/17 08:51:53
@@ -7,16 +7,8 @@
 
 setopt localoptions nonomatch
 
-local expl list lines revlines disp suf
+local expl list lines revlines disp
 
-if [[ "$SUFFIX" = */* ]]; then
-  ISUFFIX="/${SUFFIX#*/}$ISUFFIX"
-  SUFFIX="${SUFFIX%%/*}"
-  suf=(-S '')
-else
-  suf=()
-fi
-
 ### we decided against this, for now...
 #! zstyle -T ":completion:${curcontext}:directory-stack" prefix-needed ||
 
@@ -48,4 +40,4 @@
 fi
 
 _wanted -V directory-stack expl 'directory stack' \
-    compadd "$@" "$suf[@]" "$disp[@]" -Q -a list
+    compadd "$@" "$disp[@]" -Q -a list

-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


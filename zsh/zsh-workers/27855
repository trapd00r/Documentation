From zsh-workers-return-27855-mason-zsh=primenet.com.au@zsh.org Thu Apr 01 22:51:31 2010
Return-Path: <zsh-workers-return-27855-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 293 invoked by alias); 1 Apr 2010 22:51:31 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27855
Received: (qmail 29594 invoked from network); 1 Apr 2010 22:51:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100401155118.ZM11873@torch.brasslantern.com>
Date: Thu, 01 Apr 2010 15:51:18 -0700
In-reply-to: <20100401215752.GA34619@redoubt.spodhuis.org>
Comments: In reply to Phil Pennock <zsh-workers+phil.pennock@spodhuis.org>
   "Re: Is this a bug? Why not?" (Apr  1,  2:57pm)
References: <100330224612.ZM1818@torch.brasslantern.com>
	<20100331060602.GA91691@redoubt.spodhuis.org>
	<100331081153.ZM2688@torch.brasslantern.com>
	<20100401082624.GA56998@redoubt.spodhuis.org>
	<100401073618.ZM10593@torch.brasslantern.com>
	<20100401215752.GA34619@redoubt.spodhuis.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@zsh.org
Subject: Re: Is this a bug? Why not?
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Apr 1,  2:57pm, Phil Pennock wrote:
} Subject: Re: Is this a bug? Why not?
}
} > E.g., why doesn't the following cause $foo to be quoted?
} > 
} > schaefer[516] ARGV0=sh Src/zsh
} > $ foo="???"
} > $ print ${foo+"$foo"}
} > Doc Etc Src
} > $ 
} > 
} > It works in bash.
} 
} Defining "works" as seeing ??? emitted: it works in zsh with glob_subst
} disabled.

Well, note the "ARGV0=sh", so I'm specifically talking about glob_subst.
Just ${foo} "works" by the no_glob_subst definition.

} Is this use-case important enough to warrant yet another option?

Normally I'd be a stickler for not changing existing behavior, but in
this case it looks so obviously like a bug in the way glob_subst is
implemented that I'm not sure a new option is needed.


From zsh-workers-return-10583-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Apr 07 16:12:03 2000
Return-Path: <zsh-workers-return-10583-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16947 invoked from network); 7 Apr 2000 16:11:57 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Apr 2000 16:11:57 -0000
Received: (qmail 25677 invoked by alias); 7 Apr 2000 16:11:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10583
Received: (qmail 25667 invoked from network); 7 Apr 2000 16:11:48 -0000
Message-ID: <38EE08A6.DE6DFA0B@u.genie.co.uk>
Date: Fri, 07 Apr 2000 17:11:18 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.72 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: dfavor@corridor.com
CC: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: How-to AIX + dynamic zsh?
References: <200004061122.FAA18235@corridor.com> <38EC792D.6AFD430A@u.genie.co.uk> <38EC9FF3.B12EE9BE@austin.ibm.com> <38ECA546.107A6D91@u.genie.co.uk> <38ECAE56.97D758B3@austin.ibm.com> <38EDD337.DC2B6B18@u.genie.co.uk> <38EE00D8.82FE48C@austin.ibm.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

"David R. Favor" wrote:
> 
> The weirdest thing... I took out the /dev/null and the error
> message was about being unable to load libc.a, which is strange.
> 
> I put LIBPATH=/lib in the (./conftest; exit) and it worked. I
> have no idea what is going on, but at least I'm past this hurdle.

That is weird. I can't think what might have caused it other than
something like a bug in the compiler or problem with your AIX
installation.

"David R. Favor" wrote:
> 
> Well I did get a clean compile, but have several questions.
> 
> First, if I do a 'dump -Hv' there is no shared library. Is
> there suppose to be a libzsh.foo.so are something like that?

It doesn't work like that. It creates a number of shared libraries for
different things, the idea being that only those which are actually
being used are loaded. They are dynamically loaded at runtime when they
are needed. If you install zsh with make install, it will install these
into /usr/local/lib/zsh/3.1.6-dev-21 (assuming you didn't specify a
different directory with configure). 

> Next, subshells seem to hang, when using ksh grammar. Could
> you try the following in your latest *-21 shell:
> 
>    emulate -R ksh
>    echo $(hostname)
> 
> and see if that works.

That works fine here. Can the zsh definitely find all its shared
libraries. The emulate command basically sets a number of options. If
you try to isolate the option which causes the problem, it might make it
easier to see where the bug is (if that's what it is). I've copied this
to the mailing list so maybe someone else there has an idea.

Oliver


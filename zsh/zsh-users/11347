From zsh-users-return-11347-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 28 00:12:27 2007
Return-Path: <zsh-users-return-11347-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5054 invoked from network); 28 Mar 2007 00:12:26 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Mar 2007 00:12:26 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 63168 invoked from network); 27 Mar 2007 18:45:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 Mar 2007 18:45:38 -0000
Received: (qmail 17549 invoked by alias); 27 Mar 2007 18:45:27 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11347
Received: (qmail 17539 invoked from network); 27 Mar 2007 18:45:27 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 Mar 2007 18:45:27 -0000
Received: (qmail 61365 invoked from network); 27 Mar 2007 18:45:26 -0000
Received: from smtpout0154.sc1.he.tucows.com (HELO n082.sc1.he.tucows.com) (64.97.136.154)
  by a.mx.sunsite.dk with SMTP; 27 Mar 2007 18:45:13 -0000
Received: from sc.homeunix.net (82.26.160.246) by n082.sc1.he.tucows.com (7.2.069.1)
        id 45B8F3DB0049A66F; Tue, 27 Mar 2007 18:45:10 +0000
Received: from chazelas by sc.homeunix.net with local (Exim 4.63)
	(envelope-from <stephane_chazelas@yahoo.fr>)
	id 1HWGfB-00034G-8P; Tue, 27 Mar 2007 19:44:57 +0100
Date: Tue, 27 Mar 2007 19:44:57 +0100
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: meino.cramer@gmx.de
Cc: zsh-users@sunsite.dk
Subject: Re: Lonely spacecowboy
Message-ID: <20070327184457.GC4885@sc.homeunix.net>
Mail-Followup-To: meino.cramer@gmx.de, zsh-users@sunsite.dk
References: <20070327175336.GA22601@solfire>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20070327175336.GA22601@solfire>
User-Agent: Mutt/1.5.6i

On Tue, Mar 27, 2007 at 07:53:36PM +0200, meino.cramer@gmx.de wrote:
> 
> Hi,
> 
>  I _always_ fail with constructions like
> 
>  cat file.txt | while read file
>  do
>      <cmd> "${file}"
>  done
> 
>  when file.txt containing one file per line and
>  a filename looks like:
> 
>     This is an odd filename.txt
>  
>  . Is there one for all cure for such a constellation?
>  Too much space gives me headaches ! ;)
[...]

Should be alright. zsh is even the one shell where you don't
need the quotes around $file.

Maybe your "cmd" is poorly written and can't cope with filenames
containing blanks.

Problems would come for lines that have leading or trailing
blanks or have backslashes.

Try (with GNU xargs)

xargs -d '\n' -n1 cmd < file.txt

Or

for line (${(f)"$(cat file.txt)"}) cmd -- $line

or

while IFS= read -r line; do
  cmd -- $line
done

-- 
Stéphane


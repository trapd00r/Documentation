From zsh-workers-return-8620-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Nov 11 10:58:18 1999
Return-Path: <zsh-workers-return-8620-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29607 invoked from network); 11 Nov 1999 10:58:16 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Nov 1999 10:58:16 -0000
Received: (qmail 29768 invoked by alias); 11 Nov 1999 10:58:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8620
Received: (qmail 29750 invoked from network); 11 Nov 1999 10:58:07 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991111105710.ZM19217@candle.brasslantern.com>
Date: Thu, 11 Nov 1999 10:57:10 +0000
In-Reply-To: <199911100943.KAA28014@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: completion grouping (yes, again)" (Nov 10, 10:43am)
References: <199911100943.KAA28014@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: completion grouping (yes, again)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 10, 10:43am, Sven Wischnowsky wrote:
} Subject: Re: completion grouping (yes, again)
}
} > This is pretty cute, but I wonder if it's going to work correctly with
} > (say) KSH_ARRAYS set?  There aren't very many "emulate -L zsh" calls in
} > the Completion tree at the moment ...
} 
} KSH_ARRAYS is unset in _main_complete.

Ah.  I keep forgetting about that.

} And I hope there are no calls
} to `emulate -L zsh' at all -- I hate it ever since it once reset
} NUMERIC_GLOB_SORT for me when I was testing the patch that made that
} option be used in completion listings.

Completion/Base/_arg_compile:91:emulate -L zsh
Completion/Builtins/_popd:8:emulate -L zsh
Completion/Builtins/_zftp:7:emulate -L zsh
Completion/Commands/_correct_filename:16:emulate -LR zsh
Completion/Commands/_read_comp:25:emulate -L zsh
Completion/Core/compdump:16:emulate -L zsh
Completion/Core/compinit:58:emulate -L zsh
Completion/Core/compinstall:28:emulate -L zsh
Completion/User/_mailboxes:3:emulate -L zsh

} Also, `emulate -L zsh' resets some other options which are tested or
} used in the completion code, e.g.: extended_glob, magic_equal_subst,
} and pushd_minus.

Hrm.  Obviously "emulate" shouldn't be used in functions that call other
functions that might not want it.  Slightly icky thought:  Maybe we need
a variant of "emulate" that gets undone on *entry* to a called function
as well as on exit from the calling function?

I had more to respond to, but I just saw Sven's "should we..." message,
so I'll stop for now.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-10566-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Apr 07 02:23:48 2000
Return-Path: <zsh-workers-return-10566-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24995 invoked from network); 7 Apr 2000 02:23:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Apr 2000 02:23:47 -0000
Received: (qmail 24014 invoked by alias); 7 Apr 2000 02:23:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10566
Received: (qmail 24001 invoked from network); 7 Apr 2000 02:23:16 -0000
Date: Thu, 6 Apr 2000 22:23:15 -0400
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: correct # of args to patgetglobflags
Message-ID: <20000406222315.A8425@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.1.2i

10547 changed the prototype for patgetglobflags, but glob.c invoked
it with only one argument.

Index: Src/glob.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/glob.c,v
retrieving revision 1.2
diff -u -r1.2 glob.c
--- Src/glob.c	2000/04/05 19:29:15	1.2
+++ Src/glob.c	2000/04/07 02:19:27
@@ -698,6 +698,8 @@
 static Complist
 parsepat(char *str)
 {
+    long assert;
+
     patcompstart();
     /*
      * Check for initial globbing flags, so that they don't form
@@ -707,7 +709,7 @@
 	(isset(KSHGLOB) && *str == '@' && str[1] == Inpar &&
 	 str[2] == Pound)) {
 	str += (*str == Inpar) ? 2 : 3;
-	if (!patgetglobflags(&str))
+	if (!patgetglobflags(&str, &assert))
 	    return NULL;
     }
 


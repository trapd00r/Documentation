From zsh-workers-return-12390-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 26 20:25:17 2000
Return-Path: <zsh-workers-return-12390-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25927 invoked from network); 26 Jul 2000 20:25:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jul 2000 20:25:14 -0000
Received: (qmail 15347 invoked by alias); 26 Jul 2000 20:24:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12390
Received: (qmail 15340 invoked from network); 26 Jul 2000 20:24:50 -0000
Date: Wed, 26 Jul 2000 21:24:48 +0100
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: problem with _arguments
Message-ID: <20000726212448.A11510@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

I'm trying to write a very simple completion for a function, with the
following requirements:

 - the function has one optional option '-l' with no parameter
 - the first parameter can't be completed
 - subsequent parameters are files

AFAICS from the docs, the completion function should be something
like:

_foo () {
  _arguments \
    '-l[message for option]' \
    ':description for first param: ' \
    '*:description for files:_files'
}

But with the latest CVS:

$ foo -<TAB>
$ foo -
---- description for first param

What am I doing wrong, or is it a bug?


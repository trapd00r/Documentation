From zsh-workers-return-23083-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 03 23:45:05 2007
Return-Path: <zsh-workers-return-23083-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16265 invoked from network); 3 Jan 2007 23:45:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Jan 2007 23:45:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 57119 invoked from network); 3 Jan 2007 23:44:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Jan 2007 23:44:54 -0000
Received: (qmail 20306 invoked by alias); 3 Jan 2007 23:43:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23083
Received: (qmail 20297 invoked from network); 3 Jan 2007 23:43:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Jan 2007 23:43:22 -0000
Received: (qmail 56634 invoked from network); 3 Jan 2007 23:43:22 -0000
Received: from sj-iport-1-in.cisco.com (HELO sj-iport-1.cisco.com) (171.71.176.70)
  by a.mx.sunsite.dk with SMTP; 3 Jan 2007 23:43:18 -0000
Received: from sj-dkim-1.cisco.com ([171.71.179.21])
  by sj-iport-1.cisco.com with ESMTP; 03 Jan 2007 15:42:44 -0800
X-IronPort-AV: i="4.12,234,1165219200"; 
   d="scan'208"; a="758067227:sNHT70986910"
Received: from sj-core-2.cisco.com (sj-core-2.cisco.com [171.71.177.254])
	by sj-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id l03Ngif9027162
	for <zsh-workers@sunsite.dk>; Wed, 3 Jan 2007 15:42:44 -0800
Received: from cns-build4.cisco.com (cns-build4.cisco.com [128.107.183.19])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id l03NghZH024540
	for <zsh-workers@sunsite.dk>; Wed, 3 Jan 2007 15:42:43 -0800 (PST)
Received: (paullew@localhost) by cns-build4.cisco.com (8.11.2/CISCO.WS.1.2) id l03NggY00662; Wed, 3 Jan 2007 15:42:42 -0800 (PST)
From: Paul Lew <paullew@cisco.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <17820.16242.848823.730831@cns-build4.cisco.com>
Date: Wed, 3 Jan 2007 15:42:42 -0800
To: zsh-workers@sunsite.dk
Subject: smart-insert-last-word problem
X-Mailer: VM 7.18 under Emacs 21.4.1
DKIM-Signature: v=0.5; a=rsa-sha256; q=dns/txt; l=1159; t=1167867764; x=1168731764;
	c=relaxed/simple; s=sjdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=paullew@cisco.com;
	z=From:=20Paul=20Lew=20<paullew@cisco.com>
	|Subject:=20smart-insert-last-word=20problem
	|Sender:=20;
	bh=dnQj77gaYMIyCK0dcD6IJmogAzm8FTg118aM7oUXwVc=;
	b=UkQquIez/03QIUz9gLGemzndIPePpil6VIyOKM4e2pR4LyB50COW54EXBqHWYXQ1hRHLqt47
	mKZr+glZsviWYCGJvIyHup01mEnOzP71uPJHfK9XFTKD6LJqvkEFkDBW;
Authentication-Results: sj-dkim-1; header.From=paullew@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim1002 verified; ); 

Can someone email me a copy of the latest smart-insert-last-word?  My
version copied off the mailing list exhibit problem:

smart-insert-last-word:108: bad math expression: operator expected at
`Account fo...'

The segment looks like:

     94       # This is the "smart" part -- search right-to-left and
     95       # latest-to-earliest through the history for a word.
     96       integer n=0 found=$lastcmd[(I)$pattern]
     97       if zstyle -t :$WIDGET auto-previous
     98       then
     99           while (( found == 0 && ++n ))
    100           do
    101               zle .up-history || return 1
    102               buffer=$history[$HISTNO]
    103               lastcmd=( ${${(z)buffer}:#\;} )
    104               found=$lastcmd[(I)$pattern]
    105           done
    106       fi
    107       (( found-- > 0 &&            # Account for 1-based index
    108         (numeric = $#lastcmd - found) ))
    109   fi

Moving the '# Account for 1-based index' to a line above generates
different error:

    No such widget `auto-suffix-retain'

Are there new widget to download?  BTW, I am using 4.3.2
TIA.


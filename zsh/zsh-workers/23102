From zsh-workers-return-23102-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 12 23:59:11 2007
Return-Path: <zsh-workers-return-23102-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11293 invoked from network); 12 Jan 2007 23:59:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Jan 2007 23:59:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 76766 invoked from network); 12 Jan 2007 23:58:59 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2007 23:58:59 -0000
Received: (qmail 15227 invoked by alias); 12 Jan 2007 23:58:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23102
Received: (qmail 15218 invoked from network); 12 Jan 2007 23:58:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Jan 2007 23:58:56 -0000
Received: (qmail 76515 invoked from network); 12 Jan 2007 23:58:56 -0000
Received: from vinc17.net8.nerim.net (HELO prunille.vinc17.org) (62.212.121.106)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2007 23:58:51 -0000
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id D68C7FE1A49; Sat, 13 Jan 2007 00:58:49 +0100 (CET)
Date: Sat, 13 Jan 2007 00:58:49 +0100
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk
Subject: Building zsh should work with "make -j2"
Message-ID: <20070112235849.GZ22968@prunille.vinc17.org>
Mail-Followup-To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.13-vl-r14963 (2007-01-09)

Hi,

When building zsh with make -j2, in fact

make () {
        command make -j2 "$@" 2>&1 | eet -f make -m bold
}

with a colorizing script, I had the following problem:

make[1]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src'
rm -f stamp-modobjs.tmp
cd .. && /bin/sh $top_srcdir/Src/mkmakemod.sh Src Makemod
creating Src/Makemod.in
config.status: creating Src/Makemod
make[2]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src'
echo 'timestamp for *.mdd files' > ../Src/modules.stamp
creating Src/Builtins/Makefile.in
config.status: creating Src/Builtins/Makefile
make[3]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src/Builtins'
make[3]: Leaving directory `/home/vlefevre/software/zsh-4.3.2/Src/Builtins'
creating Src/Modules/Makefile.in
config.status: creating Src/Modules/Makefile
make[3]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src/Modules'
make[3]: Leaving directory `/home/vlefevre/software/zsh-4.3.2/Src/Modules'
creating Src/Zle/Makefile.in
config.status: creating Src/Zle/Makefile
make[3]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src/Zle'
make[3]: Leaving directory `/home/vlefevre/software/zsh-4.3.2/Src/Zle'
make[2]: Leaving directory `/home/vlefevre/software/zsh-4.3.2/Src'
make[2]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src'
mawk -f ./signames1.awk /usr/include/bits/signum.h >sigtmp.c
make[2]: Entering directory `/home/vlefevre/software/zsh-4.3.2/Src'
mawk -f ./signames1.awk /usr/include/bits/signum.h >sigtmp.c
gcc -E sigtmp.c >sigtmp.out
gcc -E sigtmp.c >sigtmp.out
mawk -f ./signames2.awk sigtmp.out > signames.c
rm -f sigtmp.c sigtmp.out
mawk -f ./signames2.awk sigtmp.out > signames.c
mawk: cannot open sigtmp.out (No such file or directory)
[...]

A dependency bug in the Makefile?

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


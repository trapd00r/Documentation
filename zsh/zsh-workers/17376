From zsh-workers-return-17376-mason-zsh=primenet.com.au@sunsite.dk Fri Jun 28 20:45:23 2002
Return-Path: <zsh-workers-return-17376-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21215 invoked from network); 28 Jun 2002 20:45:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 28 Jun 2002 20:45:21 -0000
Received: (qmail 17110 invoked by alias); 28 Jun 2002 20:45:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17376
Received: (qmail 17095 invoked from network); 28 Jun 2002 20:45:14 -0000
Date: Fri, 28 Jun 2002 23:45:49 +0300
From: Teemu Tervo <teemu.tervo@gmx.net>
To: zsh-workers@sunsite.dk
Subject: Zsh requires Bash?
Message-Id: <20020628234549.424f791c.teemu.tervo@gmx.net>
X-Mailer: Sylpheed version 0.7.4claws (GTK+ 1.2.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Hey, people.

Zsh compilation bombs out when /bin/sh symlink is pointing to zsh. I
tried versions 4.0.4 and 4.1.0-dev-5 both as /bin/zsh and as the
compiled one.

Here's the relevant output of configure:

checking whether executables can be stripped... yes
checking whether libraries can be stripped... yes
creating ./config.modules
./configure:7857: functions: attempt to set slice of associative array
updating cache ./config.cache
creating ./config.status
---
And here's the output of make:
make[1]: Entering directory `/usr/src/zsh-4.0.4/Src'
make[2]: Entering directory `/usr/src/zsh-4.0.4/Src'
make[2]: Leaving directory `/usr/src/zsh-4.0.4/Src'
rm -f stamp-modobjs.tmp
make[2]: Entering directory `/usr/src/zsh-4.0.4/Src'
make[2]: Leaving directory `/usr/src/zsh-4.0.4/Src'
mv: cannot stat `stamp-modobjs.tmp': No such file or directory
Updated `stamp-modobjs'.
make[2]: Entering directory `/usr/src/zsh-4.0.4/Src'
gcc -c -I. -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H
-Wall -Wno-implicit -Wmissing-prototypes -O2  -o main.o main.c
main.c:30: zsh.mdh: No such file or directory
main.c:31: main.pro: No such file or directory
make[2]: *** [main.o] Error 1

With /bin/sh -> bash, the configure section won't produce the error and
make works just fine. I'd really like to delete bash, since I don't use
it as an interactive shell at all.

Please CC me any replies, since I'm not subscribed.

TIA,
Teemu Tervo / teemu.tervo@gmx.net


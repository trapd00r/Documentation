From zsh-users-return-8065-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 18 19:15:16 2004
Return-Path: <zsh-users-return-8065-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18390 invoked from network); 18 Oct 2004 19:15:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Oct 2004 19:15:15 -0000
Received: (qmail 53552 invoked from network); 18 Oct 2004 19:15:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Oct 2004 19:15:10 -0000
Received: (qmail 26705 invoked by alias); 18 Oct 2004 19:14:21 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8065
Received: (qmail 26683 invoked from network); 18 Oct 2004 19:14:19 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Oct 2004 19:14:19 -0000
Received: (qmail 52231 invoked from network); 18 Oct 2004 19:14:19 -0000
Received: from posti6.jyu.fi (130.234.4.43)
  by a.mx.sunsite.dk with SMTP; 18 Oct 2004 19:14:17 -0000
Received: from heresy.ainola.jyu.fi (heresy.ainola.jyu.fi [130.234.191.114])
	by posti6.jyu.fi (8.12.8/8.12.8/antispam) with ESMTP id i9IJEFhA011967
	for <zsh-users@sunsite.dk>; Mon, 18 Oct 2004 22:14:15 +0300
Received: by heresy.ainola.jyu.fi (Postfix, from userid 1000)
	id E2702FC52; Mon, 18 Oct 2004 22:14:33 +0300 (EEST)
To: zsh-users mailing list <zsh-users@sunsite.dk>
Subject: My zsh disturbs nvi?
From: Juhapekka Tolvanen <juhtolv@cc.jyu.fi>
Organization: What?+ Me organized?+ Never!1
X-User-Agent-URL: http://www.gnus.org/
Reply-To: juhtolv@iki.fi
Date: Mon, 18 Oct 2004 22:14:33 +0300
Message-ID: <87mzyj7s9y.fsf@heresy.ainola.jyu.fi>
User-Agent: Gnus/5.1006 (Gnus v5.10.6) Emacs/21.3 (gnu/linux)
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by amavisd-milter (http://www.amavis.org/)
	at posti6.jyu.fi; Mon, 18 Oct 2004 22:14:16 +0300
X-Spam-Checked: by miltrassassin
	at posti6.jyu.fi; Mon, 18 Oct 2004 22:14:16 +0300
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0



I have had weird problems with text-editor called nvi:

http://www.bostic.com/vi/

When I try to run nvi under zsh running under screen as normal luser, it
gives these error messages during startup:

/home/juhtolv/.nexrc, 8: Shell expansion failed
/home/juhtolv/.nexrc, 8: Ex command failed: pending commands discarded
Press Enter to continue: 

I can run nvi normally as root, also under screen:

I sent a bug report about that to Debian:

http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=231851

It seems, I am getting closer to fix. FAQ file provided with nvi says:

Q: I'm using ksh or csh as my vi edit option shell value, and file
   expansions don't work right!
A: The problem may be in your ksh or csh startup files, e.g., .cshrc.  Vi
   executes the shell to do name expansion, and the shell generally reads
   its startup files.  If the startup files are not correctly configured
   for non-interactive use, e.g., they always echo a prompt to the screen,
   vi will be unable to parse the output and things will not work
   correctly.

Now, can you tell me, what's wrong with my shell configs?

http://iki.fi/juhtolv/configs/shellrc/


-- 
Juhapekka "naula" Tolvanen * * http colon slash slash iki dot fi slash juhtolv
"kummaan paikkaan itsesi karkotit, syyttä syyllisten seuduille. raskaisiin
taloihin pesit, kirkuviin huoneisiin. mitä ne sinulle tekevät siellä? kuka on
raapinut nimesi pois, nimesi, kasvosi, mielesi oivat palvelemaan konetta?" CMX


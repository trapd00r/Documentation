From zsh-workers-return-17078-mason-zsh=primenet.com.au@sunsite.dk Mon May 06 07:58:59 2002
Return-Path: <zsh-workers-return-17078-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29115 invoked from network); 6 May 2002 07:58:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 May 2002 07:58:58 -0000
Received: (qmail 14686 invoked by alias); 6 May 2002 07:58:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17078
Received: (qmail 14671 invoked from network); 6 May 2002 07:58:46 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15574.14229.34022.590909@wischnow.berkom.de>
Date: Mon, 6 May 2002 09:58:13 +0200
To: zsh-workers@sunsite.dk
Subject: PATCH: _argument -s
X-Mailer: VM 6.95 under 21.5 (patch 3) "asparagus" XEmacs Lucid


Hi

Oliver pointed me in a private mail to _arguments. The -s option has
stopped working, it seems. This should fix it.


Bye
  Sven

Index: Completion/Base/Utility/_describe
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Base/Utility/_describe,v
retrieving revision 1.10
diff -u -r1.10 _describe
--- Completion/Base/Utility/_describe	19 Oct 2001 10:28:08 -0000	1.10
+++ Completion/Base/Utility/_describe	6 May 2002 07:58:29 -0000
@@ -66,7 +66,7 @@
         if [[ "$1" = (|-*) ]]; then
           _mats=
         else
-          _matss="_a_$_try$_i"
+          _mats="_a_$_try$_i"
           if [[ "$1" = \(*\) ]]; then
             eval local "_a_$_try$_i;_a_$_try$_i"'='$1
           else
@@ -87,9 +87,7 @@
     
         if [[ -n $_mats ]]; then
           compadd "$_opts[@]" "${(@)_expl:/-J/-2V}" -D $_strs - \
-                  "${(@M)${(@P)_strs}##([^:\\]|\\?)##}"
-          compadd "$_opts[@]" "${(@)_expl:/-J/-2V}" -D $_mats - \
-                  "${(@M)${(@P)_strs}##([^:\\]|\\?)##}"
+                  "${(@M)${(@P)_mats}##([^:\\]|\\?)##}"
         else
           compadd "$_opts[@]" "${(@)_expl:/-J/-2V}" -D $_strs - \
                   "${(@M)${(@P)_strs}##([^:\\]|\\?)##}"

-- 
Sven Wischnowsky                          wischnow@berkom.de


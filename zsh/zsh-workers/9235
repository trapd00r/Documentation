From zsh-workers-return-9235-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jan 06 08:39:25 2000
Return-Path: <zsh-workers-return-9235-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10403 invoked from network); 6 Jan 2000 08:39:24 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jan 2000 08:39:24 -0000
Received: (qmail 11668 invoked by alias); 6 Jan 2000 08:39:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9235
Received: (qmail 11659 invoked from network); 6 Jan 2000 08:39:16 -0000
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: change group explicitly
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 06 Jan 2000 17:38:52 +0900
Message-ID: <rsqln63y4pv.fsf@crane.jaist.ac.jp>
Lines: 29
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

Inheriting directory group when creating files are standard behaviour
in BSD.  So I think test suite should call chgrp explicitly.

Index: Test/07cond.ztst
===================================================================
RCS file: /projects/zsh/zsh/Test/07cond.ztst,v
retrieving revision 1.1.1.3
diff -u -r1.1.1.3 07cond.ztst
--- Test/07cond.ztst	1999/12/26 22:57:23	1.1.1.3
+++ Test/07cond.ztst	2000/01/06 08:29:07
@@ -11,6 +11,7 @@
   touch	unmodified
 
   touch zerolength
+  chgrp $EGID zerolength
   print 'Garbuglio' >nonzerolength
 
   mkdir modish
@@ -97,8 +98,6 @@
   [[ -O zerolength ]]
 0:-O cond
 
-# there may be strange cases where this doesn't work, e.g.
-# inherited funny groups for directories via setgid.
   [[ -G zerolength ]]
 0:-G cond
 
-- 
Tanaka Akira


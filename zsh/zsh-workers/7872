From zsh-workers-return-7872-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 16 16:17:16 1999
Return-Path: <zsh-workers-return-7872-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8182 invoked from network); 16 Sep 1999 16:17:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Sep 1999 16:17:14 -0000
Received: (qmail 19991 invoked by alias); 16 Sep 1999 16:17:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7872
Received: (qmail 19984 invoked from network); 16 Sep 1999 16:17:05 -0000
Date: Thu, 16 Sep 1999 17:17:04 +0100
From: Adam Spiers <adam@thelonious.new.ox.ac.uk>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Use of caching with completions
Message-ID: <19990916171704.A17714@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2i
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.9 i686

I've been thinking a bit about whether caching of data relating to
completions is a good idea or not.  Obviously I'm talking about
completions of things like all man pages or installed rpms (or the
platform-equivalent) on the system, where calculation of a potentially
huge list is expensive.

Pros:

  - immediate response after the first completion for the rest of the
    life of the shell

Cons:

  - may make the environment huge (does this matter too much?)
  - duplication of (effort of calculating) data across multiple shells
  - need for manual forcing of recalculation if for example you
    install a new man page

Any others?

Would it be worth storing the data to a file so that recalculation
only takes place when the user says so?  After all, on many systems
the set of man pages (say) very rarely changes.

Would it be worth abstracting the caching layer, so that the user can
force recalculation of any particular data set through a standard
interface?  Or is this all stupidly overkill and should I just get a
life and deal with the n-second pause (where n is small) the first
time I complete man pages/rpm packages/Perl modules etc. etc. in a new
shell? :-)

Adam


From zsh-users-return-11512-mason-zsh=primenet.com.au@sunsite.dk Fri May 25 13:06:05 2007
Return-Path: <zsh-users-return-11512-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9297 invoked from network); 25 May 2007 13:06:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=no
	version=3.2.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 May 2007 13:06:03 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 14870 invoked from network); 25 May 2007 13:05:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 May 2007 13:05:57 -0000
Received: (qmail 15840 invoked by alias); 25 May 2007 13:05:49 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11512
Received: (qmail 15830 invoked from network); 25 May 2007 13:05:48 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 May 2007 13:05:48 -0000
Received: (qmail 13545 invoked from network); 25 May 2007 13:05:48 -0000
Received: from mail.cql.com (216.217.47.170)
  by a.mx.sunsite.dk with SMTP; 25 May 2007 13:05:44 -0000
Received: from SRK1 (frylock.cql.com [216.217.47.138])
	by mail.cql.com (Postfix) with ESMTP id 0FF381CC07
	for <zsh-users@sunsite.dk>; Fri, 25 May 2007 09:37:17 -0400 (EDT)
From: "Seth Kurtzberg" <seth@cql.com>
To: <zsh-users@sunsite.dk>
References: <fb3648c60705240913pedbd3afx957b60b804b33d1a@mail.gmail.com> <237967ef0705240918w6a923e7fk9e7f28164037715e@mail.gmail.com> <fb3648c60705240929i16bb6b3br260bb24b1192cde6@mail.gmail.com> <237967ef0705241011k61e67d42ic905efa86e7179f1@mail.gmail.com> <fb3648c60705241151q3a22e8c8i8f9e89fff77f5912@mail.gmail.com> <011a01c79ec5$2525f920$6800000a@venti>
In-Reply-To: <011a01c79ec5$2525f920$6800000a@venti>
Subject: RE: If then Prompt
Date: Fri, 25 May 2007 09:04:15 -0400
Message-ID: <0d3a01c79ecd$329665b0$97c33110$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AceeyZ1rgi3xZKIWRjmQ2SuP46ZvEwAA11rQ
Content-Language: en-us

There are various ways to try to figure out what the user really has. Most 
emulators have built in environment variables, or they allow you to define 
your own in the client-side config, that you can look for on the server side

in *profile , if the server daemon supports the client setting arbitrary 
variables which many don't. Plus if you hop from machine to machine or use 
su to switch users, you lose the initial environment anyways. Then there is 
answerback, where you send a \005 immediately followed by a timed read to 
collect the answerback response, if the emulator supports it.
(present for ya, one line answerback that takes advantage of bash's timed 
read option, using reads prompt to send the ^E and hiding the response from 
going to the screen.)
[ -z "$MYTERM" ] && read -s -t 1 -p `echo -en "\005"` MYTERM    # bash only
if I could just get rid of those backticks...maybe binary edit the script, 
never tried...

use:
	...  $(echo -en "\005")  ...




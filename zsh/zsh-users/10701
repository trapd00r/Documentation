From zsh-users-return-10701-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 11 16:40:07 2006
Return-Path: <zsh-users-return-10701-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4427 invoked from network); 11 Sep 2006 16:40:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Sep 2006 16:40:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18580 invoked from network); 11 Sep 2006 16:40:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2006 16:40:00 -0000
Received: (qmail 26419 invoked by alias); 11 Sep 2006 16:39:53 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10701
Received: (qmail 26409 invoked from network); 11 Sep 2006 16:39:53 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Sep 2006 16:39:53 -0000
Received: (qmail 17377 invoked from network); 11 Sep 2006 16:39:53 -0000
Received: from web36812.mail.mud.yahoo.com (209.191.85.63)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2006 16:39:52 -0000
Received: (qmail 59227 invoked by uid 60001); 11 Sep 2006 16:39:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=nNJSbCmAbhJGUIMB/t4EFtPxrl26ZvxT4R67bewdRe62F+bAgifksKQ3qOCcppgpEVZ+Z8Bm3CHupfQs/taawg7nfrM63kbyhkqy0GwTVhCBT3smvHXkE6yUCBZjlk52O/+tArqMWqOgydWzz0MSkIMD6Yj+meHUYO2fYk+XmWE=  ;
Message-ID: <20060911163950.59225.qmail@web36812.mail.mud.yahoo.com>
Received: from [62.78.144.84] by web36812.mail.mud.yahoo.com via HTTP; Mon, 11 Sep 2006 09:39:50 PDT
Date: Mon, 11 Sep 2006 09:39:50 -0700 (PDT)
From: Daniel Qarras <dqarras@yahoo.com>
Subject: Re: A POSIX and a UTF-8 question
To: zsh-users@sunsite.dk
In-Reply-To: <20060907190301.b48d23b0.p.w.stephenson@ntlworld.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi!

> One recent headline feature is that in 4.3 (but not 4.2) Wayne has
> fixed it so that (as far as I know) word splitting in sh mode is
> according to other shells.  That has probably been the most
noticeable
> problem in recent years.

I now actually tested on my FC5 laptop linking /bin/sh to a recent
zsh-4.3 from CVS and I was astonished how well it worked! I'm writing
this article from a system with /bin/sh being zsh-4.3!

There were only two glitches that I needed to fix by hand and after
that all services seem to go up and down without any problems:

1) There is unfortunately a bash-only expression used in RH's shell
function library, that is =~. However, this was used only once in
device mapper related function so that did not affect me, I just
commented it out. YMMV. (I did not find a www description for this but
it can be at least checked from bash3.1 manual pages what it does.

2) It seems that many RH scripts do something like:

cd /some/path
. functions

and in zsh-4.3 as /bin/sh this does not work, it needs to be:

cd /some/path
. ./functions

Additionally, there's one cosmetic bash feature used that seems to be
not supported by zsh: RH uses in their i18n effort tricks like:

echo -n $"Starting service foo: "

With bash I get just the normal string, with zsh I also get the $. I
did not look very carefully about this, so not sure what they are
actually doing here.

I filed a note to RH bugzilla about 1 and 2 as 206035 but in any case I
am very impressed how well zsh nowadays works as /bin/sh in a Linux
distribution.

Cheers!



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


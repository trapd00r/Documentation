From zsh-workers-return-21427-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 11 03:27:16 2005
Return-Path: <zsh-workers-return-21427-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10047 invoked from network); 11 Jul 2005 03:27:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Jul 2005 03:27:15 -0000
Received: (qmail 6836 invoked from network); 11 Jul 2005 03:27:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Jul 2005 03:27:10 -0000
Received: (qmail 10996 invoked by alias); 11 Jul 2005 03:27:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21427
Received: (qmail 10987 invoked from network); 11 Jul 2005 03:27:06 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Jul 2005 03:27:06 -0000
Received: (qmail 6481 invoked from network); 11 Jul 2005 03:27:06 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 11 Jul 2005 03:27:03 -0000
Received: from candle.brasslantern.com ([71.116.88.149])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0IJG00BU61L06Q09@vms042.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sun, 10 Jul 2005 22:27:02 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j6B3R0Yf024731	for
 <zsh-workers@sunsite.dk>; Sun, 10 Jul 2005 20:27:00 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j6B3R0Vk024730	for zsh-workers@sunsite.dk; Sun,
 10 Jul 2005 20:27:00 -0700
Date: Mon, 11 Jul 2005 03:26:59 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: PATCH: _unexpand
In-reply-to: <20050711005217.GB12208@ruby.cat.pdx.edu>
To: zsh-workers@sunsite.dk
Message-id: <1050711032659.ZM24729@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20050710061443.GA12208@ruby.cat.pdx.edu>
	<1050710162010.ZM24203@candle.brasslantern.com>
	<20050711005217.GB12208@ruby.cat.pdx.edu>
Comments: In reply to Travis Spencer <tspencer@cs.pdx.edu>
 "Re: PATCH: _unexpand" (Jul 10,  5:52pm)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

On Jul 10,  5:52pm, Travis Spencer wrote:
}
} rehash should invalidate the cache that _pick_variant is hanging onto.

Eventually zsh will have something like ksh's "discipline functions" at 
which point it might be possible to arrange for this to happen when the
path is reset.  As it is, there isn't any good way to "hook" an action
without potentially conflicting with something the user has done.

} Here is a patch that uses _pick_variant instead:

I'll commit this.


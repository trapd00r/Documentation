From zsh-workers-request@math.gatech.edu Wed Mar 04 05:23:14 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 23799 invoked from network); 4 Mar 1998 05:23:13 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 4 Mar 1998 05:23:13 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id AAA17937;
	Wed, 4 Mar 1998 00:03:00 -0500 (EST)
Resent-Date: Wed, 4 Mar 1998 00:03:00 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980303210514.ZM10356@candle.brasslantern.com>
Date: Tue, 3 Mar 1998 21:05:13 -0800
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@math.gatech.edu
Subject: Bug in SIGWINCH (or signals in general?) handling
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"su9L_1.0.CO4.32E_q"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3795
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I was playing around with resizing an xterm and noticed that zsh 3.0.5 wasn't
changing $COLUMNS and $LINES to match the new terminal size.  (It still isn't
doing so, even as I type this.)  Thinking "Hmm, I thought zsh was monitoring
SIGWINCH now," I typed 
	TRAPWINCH() { print FOO }
and resized the window.  Sure enough, FOO appeared.  So then I typed
	eval `resize`
and FOO appeared again, but I didn't get a prompt back; zsh locked up.  The
stack trace (sorry, no debug symbols) looks like:

(gdb) where
#0  0x40076090 in sigsuspend (__sigmask=0x0)
#1  0x400aeb54 in __DTOR_END__ ()
#2  0x805981f in getoutput ()
#3  0x807307e in stringsubst ()
#4  0x8072d5e in prefork ()
#5  0x8057b81 in execcmd ()
#6  0x8056eb3 in execpline2 ()
#7  0x80569ca in execpline ()
#8  0x80566cc in execlist ()
#9  0x8063b6b in loop ()
#10 0x8063969 in main ()
#11 0x8049fee in _start ()

This is on Linux 2.0.33, libc5 (not glibc).

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


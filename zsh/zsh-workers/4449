From zsh-workers-request@math.gatech.edu Mon Oct 26 10:37:41 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23236 invoked from network); 26 Oct 1998 10:37:39 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 26 Oct 1998 10:37:39 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id FAA00715;
	Mon, 26 Oct 1998 05:27:07 -0500 (EST)
Resent-Date: Mon, 26 Oct 1998 05:27:07 -0500 (EST)
Message-Id: <9810261017.AA25285@ibmth.df.unipi.it>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: next release 
In-Reply-To: ""Zefram""'s message of "Mon, 26 Oct 1998 09:59:25 NFT."
             <199810260959.JAA00724@diamond.tao.co.uk> 
Date: Mon, 26 Oct 1998 11:17:09 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"1LjUf1.0.6B.xv4Ds"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4449
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

"Zefram" wrote:
> Those people that have been having problems with ut_xtime on HP-UX:
> I've added a new autoconf test that should detect whether the ut_xtime
> member is actually available.  A couple of people have posted indicating
> that the actual struct member to use is ut_tv.tv_sec.  Can someone tell
> me whether this is the *only* name for the correct member, or is there
> a definition for ut_time in the system header?

Here's the definition of struct utmpx from utmpx.h on a HP-UX B.10.20
machine (dunno if the B. is important).  There's a lot of conditional
compilation but there's no sign of ut_time, only ut_tv; same elsewhere
in utmpx.h. ut_time is present in struct utmp defined in utmp.h,
however.


struct utmpx
  {
        char ut_user[24] ;              /* User login name */
        char ut_id[4] ;                 /* /etc/lines id(usually line #) */
        char ut_line[12] ;              /* device name (console, lnxx) */
        pid_t ut_pid ;                  /* process id */
        short ut_type ;                 /* type of entry */

        struct __exit_status
#ifndef _STRUCT___EXIT_STATUS
#  define _STRUCT___EXIT_STATUS
          {
            short __e_termination ;
            short __e_exit ;
          }
#endif /* _STRUCT___EXIT_STATUS */
        ut_exit;

        unsigned short ut_reserved1 ;   /* Reserved for future use */
        struct timeval
#ifndef _STRUCT_TIMEVAL
#  define _STRUCT_TIMEVAL
        {
          time_t                         tv_sec;                /* seconds */
          long          tv_usec;        /* and microseconds */
        }
#endif /* _STRUCT_TIMEVAL */
        ut_tv;                  /* time entry was made */

        char ut_host[64] ;              /* host name, if remote; 
                                           NOT SUPPORTED */
        unsigned long ut_addr ;         /* Internet addr of host, if remote */
        char ut_reserved2[12] ; /* Reserved for future use */
  } ;

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarotti 2, 56100 Pisa, Italy


From zsh-workers-return-10666-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 11 16:57:16 2000
Return-Path: <zsh-workers-return-10666-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7028 invoked from network); 11 Apr 2000 16:57:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Apr 2000 16:57:14 -0000
Received: (qmail 21537 invoked by alias); 11 Apr 2000 16:57:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10666
Received: (qmail 21524 invoked from network); 11 Apr 2000 16:57:08 -0000
Date: Tue, 11 Apr 2000 10:57:11 -0600 (MDT)
From: dfavor@corridor.com (The Corridor)
Message-Id: <200004111657.KAA20077@corridor.com>
To: zsh-workers@sunsite.auc.dk
Subject: Re: zsh-3.1.6-dev-22 broken several ways on AIX

> On Apr 11, 10:08am, The Corridor wrote:
> } Subject: zsh-3.1.6-dev-22 broken several ways on AIX
> }
> } Several problems show up in this snapshot:
> } 
> } 1) -disable-dynamic no longer works, modules always seem to be enabled.
> 
> You didn't have this problem with -dev-21 ?  There haven't been any
> interesting changes to the build process in a very long time, except
> maybe my patch in 10499, but that shouldn't affect AIX specially.

Best I can tell this occurs in -dev-21 and -dev-22. -dev-20 seemed to work,
as best I can recall.

> Are you using the FTP snapshots, or the SourceForge CVS repository?  If
> the latter, did you remember to run Util/preconfig before making?

FTP'ed snapshot.

> Did you start from scratch or were you compiling in a directory where an
> earlier version had been built before?

Starting from a clean untar into the directory.

> } 2) the GETGPRGP macro should resolve to getpgrp(), not getpgrp(0).
> 
> That configure test hasn't changed in a *very* long time.  When was the
> last snapshot you built successfully?

I know. I've been hand-munging this and the "#pragma alloca" statement
in system.h for quite a while. To support alloca requires the '-ma' option
at compile time. The "#pragma alloca" generates a warning for every source
file compiled.

If it would help I can untar the source in a fresh directory and send you
a log of each step. Maybe that might surface the problem.


From zsh-workers-return-9720-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 14 12:24:05 2000
Return-Path: <zsh-workers-return-9720-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3811 invoked from network); 14 Feb 2000 12:24:04 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Feb 2000 12:24:04 -0000
Received: (qmail 25568 invoked by alias); 14 Feb 2000 12:23:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9720
Received: (qmail 25547 invoked from network); 14 Feb 2000 12:23:55 -0000
Message-ID: <38A7F3D0.EA95B377@u.genie.co.uk>
Date: Mon, 14 Feb 2000 12:23:44 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.7 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.auc.dk
Subject: help with _match, globcomplete etc.
References: <200002081428.PAA02690@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:

> (there is almost no real reason to use
> GLOB_COMPLETE nowadays, the _match completer should be better -- and
> configurable).

I've just been trying to fathom out what is going on with respect to
when zsh expands, menu completes expansions and doesn't expand. It all
is a little bit complicated, especially as the behaviour is controlled
by a mix of options, styles and the choice of widget that tab is bound
to.

Part of the trouble is the way zsh's shell expansion works. If you use
expand-or-complete, I can't see any way of customising what is and isn't
expanded - variables, globs and history are, tildes are not. The
behaviour which I would like is that variables are not expanded unless I
specifically use a widget bound to '^X$' - like tcsh's expand-variables
widget. Would it be possible for the shell expansion used in completion
to be controlled by a style?

The reason I still use glob_complete is that it allows some action when
completing glob patterns (menu completion though I'd prefer expansion in
the case of files) while not expanding variables.

I can however see that the _match completer is better, mainly in that I
can choose menu completion where only one argument is required and
expansion where many are required.

Another thing which I would like to configure with expansion is when
there is only one match, I'd prefer if the space suffix was not added -
this is one of the things that makes the variable expansion annoying.
Ideally, the suffix would be as if normal completion was used so
directories would get a '/'.

Oliver Kiddle

PS. Sorry about sending the wrapped patch before - I forgot to disable
wrapping in my mailer. I can resend it if that would be useful to
anyone.


From zsh-workers-return-14416-mason-zsh=primenet.com.au@sunsite.dk Mon May 21 16:11:31 2001
Return-Path: <zsh-workers-return-14416-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14527 invoked from network); 21 May 2001 16:11:30 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 May 2001 16:11:30 -0000
Received: (qmail 2266 invoked by alias); 21 May 2001 16:11:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14416
Received: (qmail 2233 invoked from network); 21 May 2001 16:11:19 -0000
Sender: kiddleo
Message-ID: <3B093E24.40FB5B85@u.genie.co.uk>
Date: Mon, 21 May 2001 17:11:16 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: use of _arguments for set
References: <3B090939.6661A937@u.genie.co.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Oliver Kiddle wrote:

> This showed up one bug in the recent _arguments changes:
> 
> set -A<tab> will complete only arrays but
> set +A<tab> also offers other + options as if -W had been specified to
> _arguments.

I had a closer look and this seems to be the fix:

Index: Completion/Base/Core/_tags
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Base/Core/_tags,v
retrieving revision 1.1
diff -u -r1.1 _tags
--- Completion/Base/Core/_tags  2001/04/02 11:04:49     1.1
+++ Completion/Base/Core/_tags  2001/05/21 16:06:53
@@ -41,7 +41,7 @@
     "$_sort_tags" "$@"
   else
     zstyle -a ":completion:${curcontext}:" tag-order order ||
-        order=('(|*-)argument-* (|*-)option-* values' options)
+        order=('(|*-)argument-* (|*-)option[-+]* values' options)
 
     for tag in $order; do
       case $tag in


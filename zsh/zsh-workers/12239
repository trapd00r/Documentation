From zsh-workers-return-12239-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 13 10:04:28 2000
Return-Path: <zsh-workers-return-12239-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27657 invoked from network); 13 Jul 2000 10:04:27 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Jul 2000 10:04:27 -0000
Received: (qmail 13565 invoked by alias); 13 Jul 2000 10:03:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12239
Received: (qmail 13543 invoked from network); 13 Jul 2000 10:03:43 -0000
X-Authentication-Warning: balrog.po.cs.msu.su: george owned process doing -bs
Date: Thu, 13 Jul 2000 13:59:44 +0400 (MSD)
From: "Fr. Br. George" <george@po.cs.msu.su>
To: zsh-workers@sunsite.auc.dk
Subject: Zsh 3.1.{6,9} patches
Message-ID: <Pine.BSF.4.21.0007131253420.99431-300000@balrog.po.cs.msu.su>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="0-1855944841-963482355=:99431"

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

--0-1855944841-963482355=:99431
Content-Type: TEXT/PLAIN; charset=US-ASCII

	Hello!

	This is some upgrades i've made for zsh-3.1.6, but it also
useable for zsh-3.1.9

	The first one is code to meke zsh truncate PS1 string backwards.
Just use zro-started argument with %~ command to drop out the REST of
path instead ofte HEAD. See the example (note %01~ entry):
	user@host:/usr..zsh/3.1.9/zsh> pwd; echo $PS1 
	/usr/local/lib/zsh/3.1.9/zsh
	%U%n%u@%B%m%b:%5(~:%01~..%3~:%~)> 
This is useful for keeping starting part of path, so I'll always be
prompted the root of pwd. Who knows how many */bin's a system may have :)
It also possible to use backward flag with another numeric-argumented
commands in the future.

	The second one is Solaris 2.7+ configure patch to make it compile zsh
with libcurses.so by default instead of termcap, which is unnative. If
this is incorrect, and Solaris curses are bugged, please inform me...
I never got a problem using zsh compiled with libcurses.so from Solaris
2.7 (so it was even possible to copy the library to Solaris 2.6 and 2.5.1!).
This is useful for delicate terminal configuring.

	The patchfiles are all for zsh-3.1.9 sources.

			George V Kouryachy (aka Fr. Br. George)
			email: frbrgeorge@intelligencia.com

--0-1855944841-963482355=:99431
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="zsh.backtrunc.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.BSF.4.21.0007131359150.99431@balrog.po.cs.msu.su>
Content-Description: 
Content-Disposition: attachment; filename="zsh.backtrunc.patch"

LS0tIHpzaC0zLjEuOS9TcmMvcHJvbXB0LmMJRnJpIE1hciAyNCAxMzo0Mzoy
MSAyMDAwDQorKysgenNoLTMuMS45Lm5ldy9TcmMvcHJvbXB0LmMJRnJpIEp1
bCAgNyAxNzozNjo1NCAyMDAwDQpAQCAtOTMsNiArOTMsMTAgQEANCiANCiBz
dGF0aWMgaW50IGRvbnRjb3VudDsNCiANCisvKiBCYWNrd2FyZCB0cnVuY2F0
aW5nIGZsYWcgKi8NCisNCitzdGF0aWMgaW50IGJ3Ow0KKw0KIC8qIFN0cmlu
Z3MgdG8gdXNlIGZvciAlciBhbmQgJVIgKGZvciB0aGUgc3BlbGxpbmcgcHJv
bXB0KS4gKi8NCiANCiBzdGF0aWMgY2hhciAqcnN0cmluZywgKlJzdHJpbmc7
DQpAQCAtMTEyLDcgKzExNiw4IEBADQogCW1vZHAgPSB0cmljYXQoIn4iLCBu
ZC0+bmFtLCBwICsgc3RybGVuKG5kLT5kaXIpKTsNCiANCiAgICAgaWYgKG5w
YXRoKSB7DQotCWNoYXIgKnNwdHI7DQorICAgICAgY2hhciAqc3B0cjsNCisg
ICAgICBpZiAoIWJ3KSB7DQogCWZvciAoc3B0ciA9IG1vZHAgKyBzdHJsZW4o
bW9kcCk7IHNwdHIgPiBtb2RwOyBzcHRyLS0pIHsNCiAJICAgIGlmICgqc3B0
ciA9PSAnLycgJiYgIS0tbnBhdGgpIHsNCiAJCXNwdHIrKzsNCkBAIC0xMjIs
NiArMTI3LDE1IEBADQogCWlmICgqc3B0ciA9PSAnLycgJiYgc3B0clsxXSAm
JiBzcHRyICE9IG1vZHApDQogCSAgICBzcHRyKys7DQogCXN0cmFkZChzcHRy
KTsNCisgICAgICB9IGVsc2Ugew0KKyAgICAgICAgY2hhciBjYnU7DQorICAg
ICAgICBmb3IgKHNwdHIgPSBtb2RwKzE7ICpzcHRyOyBzcHRyKysgKQ0KKwkg
ICAgaWYgKCpzcHRyID09ICcvJyAmJiAhLS1ucGF0aCkgYnJlYWs7DQorCWNi
dT0qc3B0cjsNCisJKnNwdHI9MDsNCisJc3RyYWRkKG1vZHApOw0KKwkqc3B0
cj1jYnU7DQorICAgICAgfQ0KICAgICB9IGVsc2UNCiAJc3RyYWRkKG1vZHAp
Ow0KIA0KQEAgLTE5NywxNCArMjExLDE2IEBADQogICAgIE5hbWVkZGlyIG5k
Ow0KIA0KICAgICBmb3IgKDsgKmZtICYmICpmbSAhPSBlbmRjaGFyOyBmbSsr
KSB7DQotCWFyZyA9IDA7DQorCWFyZyA9IGJ3ID0gMDsNCiAJaWYgKCpmbSA9
PSAnJScgJiYgaXNzZXQoUFJPTVBUUEVSQ0VOVCkpIHsNCisJICAgIGlmIChm
bVsxXT09JzAnKSBidz0xOw0KIAkgICAgaWYgKGlkaWdpdCgqKytmbSkpIHsN
CiAJCWFyZyA9IHpzdHJ0b2woZm0sICZmbSwgMTApOw0KIAkgICAgfQ0KIAkg
ICAgaWYgKCpmbSA9PSAnKCcpIHsNCiAJCWludCB0Yywgb3RydW5jbGVuOw0K
IA0KKwkJaWYgKGZtWzFdPT0nMCcpIGJ3PTE7DQogCQlpZiAoaWRpZ2l0KCor
K2ZtKSkgew0KIAkJICAgIGFyZyA9IHpzdHJ0b2woZm0sICZmbSwgMTApOw0K
IAkJfQ0K
--0-1855944841-963482355=:99431
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="zsh.configure.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.BSF.4.21.0007131359151.99431@balrog.po.cs.msu.su>
Content-Description: 
Content-Disposition: attachment; filename="zsh.configure.patch"

LS0tIHpzaC0zLjEuOS9jb25maWd1cmUJVHVlIE1heSAzMCAxMzoxNTozOSAy
MDAwDQorKysgenNoLTMuMS45Lm5ldy9jb25maWd1cmUJRnJpIEp1bCAgNyAx
NzozNzo1NCAyMDAwDQpAQCAtMjk2Nyw3ICsyOTY3LDcgQEANCiANCiANCiBj
YXNlICIkaG9zdF9vcyIgaW4NCi0gIGFpeCp8aHB1eDEwLip8aHB1eDExLiop
IHRlcm1jYXBfY3Vyc2VzX29yZGVyPSJjdXJzZXMgbmN1cnNlcyB0ZXJtY2Fw
IiA7Ow0KKyAgc29sYXJpcyp8YWl4KnxocHV4MTAuKnxocHV4MTEuKikgdGVy
bWNhcF9jdXJzZXNfb3JkZXI9ImN1cnNlcyBuY3Vyc2VzIHRlcm1jYXAiIDs7
DQogICAqKSAgICAgICAgICAgICB0ZXJtY2FwX2N1cnNlc19vcmRlcj0idGVy
bWNhcCBjdXJzZXMgbmN1cnNlcyIgOzsNCiBlc2FjDQogDQpAQCAtNTk2OSwx
MiArNTk2OSwxMiBAQA0KICAgZmkNCiAgIGNhc2UgIiRob3N0X29zIiBpbg0K
ICAgICBocHV4KikgICAgICAgIERMTERGTEFHUz0iJHtETExERkxBR1M9LWJ9
IiA7Ow0KLSAgICBmcmVlYnNkKnxsaW51eCp8aXJpeCp8b3NmKikgRExMREZM
QUdTPSIke0RMTERGTEFHUz0tc2hhcmVkfSIgOzsNCisgICAgc29sYXJpcyp8
ZnJlZWJzZCp8bGludXgqfGlyaXgqfG9zZiopIERMTERGTEFHUz0iJHtETExE
RkxBR1M9LXNoYXJlZH0iIDs7DQogICAgIHN1bm9zKikgICAgICAgRExMREZM
QUdTPSIke0RMTERGTEFHUz0tYXNzZXJ0IG5vZGVmaW5pdGlvbnN9IiA7Ow0K
ICAgICBzeXN2NCp8ZXNpeCopIERMTERGTEFHUz0iJHtETExERkxBR1M9LUcg
JGxkZmxhZ3N9IiA7Ow0KICAgICBuZXRic2QqKSAgICAgIERMTERGTEFHUz0i
JHtETExERkxBR1M9JHtETExEQVJHfS14IC1zaGFyZWQgLS13aG9sZS1hcmNo
aXZlfSIgOzsNCiAgICAgYWl4KikgICAgICAgICBETExERkxBR1M9IiR7RExM
REZMQUdTPS1HIC1iZXhwYWxsIC1sY30iIDs7DQotICAgIHNvbGFyaXMqfHN5
c3Y0Knxlc2l4KikgRExMREZMQUdTPSIke0RMTERGTEFHUz0tR30iIDs7DQor
ICAgIHN5c3Y0Knxlc2l4KikgRExMREZMQUdTPSIke0RMTERGTEFHUz0tR30i
IDs7DQogICAgIG9wZW5ic2QqKSAgICAgRExMREZMQUdTPSIke0RMTERGTEFH
Uz0tQnNoYXJlYWJsZX0iIDs7DQogICBlc2FjDQogICBjYXNlICIkaG9zdCIg
aW4NCg==
--0-1855944841-963482355=:99431--


From zsh-workers-request@math.gatech.edu Mon Jun 01 16:56:33 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19475 invoked from network); 1 Jun 1998 16:56:32 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 1 Jun 1998 16:56:32 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id MAA07064;
	Mon, 1 Jun 1998 12:51:19 -0400 (EDT)
Resent-Date: Mon, 1 Jun 1998 12:51:19 -0400 (EDT)
Message-Id: <19980601125159.13572@actor.cs.vt.edu>
Date: Mon, 1 Jun 1998 12:51:59 -0400
From: Andy Wick <awick@actor.cs.vt.edu>
To: Bart Schaefer <schaefer@brasslantern.com>, zsh-workers@math.gatech.edu
Subject: Re: up-line-or-search
References: <19980601081357.58829@actor.cs.vt.edu> <980601092932.ZM26540@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.89
In-Reply-To: <980601092932.ZM26540@candle.brasslantern.com>; from Bart Schaefer on Mon, Jun 01, 1998 at 09:29:32AM -0700
Resent-Message-ID: <"-gvkz1.0.Gk1.6mjSr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4024
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Mon, Jun 01, 1998 at 09:29:32AM -0700, Bart Schaefer wrote:
> On Jun 1,  8:13am, Andy Wick wrote:
> } Subject: up-line-or-search
> }
> } If you comment out line 376 of Zle/zle_hist.c
> }     iblank(s[histmpos] == Meta ? s[histmpos+1]^32 : s[histmpos]) &&
> } up-line-or-search will kind of work, which is better then not
> 
> I just downloaded and unpacked the 3.1.4 tarfile, and I have that code
> on line 390, not 376.  So you may want to check the state of your
> sources.  (This does not appear to be the reason for the problem.)

Ah yes I typed in the wrong line number, thanks.

> In zle_hist.c, in uplineorsearch(), call historybeginningsearchbackward()
> instead of historysearchbackward() and I believe you'll get what you want.
> How or whether Zefram intends to deal with this is another matter.


THANK YOU, THANK YOU, THANK YOU.  This almost makes it work like it used to.
Only problem is it doesn't stick the cursor at the end of the line, but
I can get used to that.  Actually I think I like it better this way.
It would be nice if the old behavior was some how retained or a new 
binding was added, I don't want to edit the source everywhere.

Also what does "up-line" mean?  Should it go to the previous command
if you haven't typed anything?  In a stock 3.1.4 it just beeps.
Previous versions used to go to the previous command.

Where do you want your pizza? :-)

Thanks,
Andy
-- 
awick@vt.edu                                    Andy Wick
awick@purple.org                              Virginia Tech


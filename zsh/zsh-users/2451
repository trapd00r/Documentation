From zsh-users-return-2451-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 19 23:03:42 1999
Return-Path: <zsh-users-return-2451-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8299 invoked from network); 19 Jul 1999 23:03:41 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jul 1999 23:03:41 -0000
Received: (qmail 26634 invoked by alias); 19 Jul 1999 23:03:26 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2451
Received: (qmail 26620 invoked from network); 19 Jul 1999 23:03:23 -0000
Date: Mon, 19 Jul 1999 16:03:21 -0700
From: Danek Duvall <duvall@lorien.emufarm.org>
To: zsh-users@sunsite.auc.dk (Zsh Users)
Subject: Re: Inserting all completions
Message-ID: <19990719160321.A30158@lorien.emufarm.org>
Mail-Followup-To: zsh-users@sunsite.auc.dk (Zsh Users)
References: <19990719113013.A29253@lorien.emufarm.org> <990719225136.ZM10630@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.4i
In-Reply-To: <990719225136.ZM10630@candle.brasslantern.com>; from Bart Schaefer on Mon, Jul 19, 1999 at 10:51:36PM +0000

On Mon, Jul 19, 1999 at 10:51:36PM +0000, Bart Schaefer wrote:

> On Jul 19, 11:30am, Danek Duvall wrote:
>
> > Is there a simple way to insert all the possible completions into the
> > current commandline?
> 
> In the new 3.1.6 completion system, you can use
> 
> 	compadd -A the_matches ...
> 	compadd -UQ "$the_matches"
> 
> [ Explanation snipped ]

Hmmm, okay ... I don't want to replace completion with this entirely.  I'd
like to have two keystrokes -- one, tab, is the normal completion
mechanism.  The second, ^X^I or something, puts all the matches on the
line.

Could I do something like:

function _widget() {
  function_to_compute_reply
  local -a the_matches
  compadd -A the_matches $reply
  compadd -UQ "$the_matches"
}

zle -N _widget
bindkey "^X^I" _widget

(I haven't yet migrated to the new completion stuff, so forgive me if I'm
stomping all over the normal usage of compadd ... ;)

The question then is, how to write function_to_compute_reply() in a
suitably generic manner ...

Thanks,
Danek


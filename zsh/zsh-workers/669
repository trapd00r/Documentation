From zsh-workers-request@math.gatech.edu  Tue Dec  5 04:24:48 1995
Received: from math.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with SMTP id EAA15945 for <mason@werple.mira.net.au>; Tue, 5 Dec 1995 04:24:42 +1100 (EST)
Received: by math.gatech.edu (5.x/SMI-SVR4)
	id AA14326; Mon, 4 Dec 1995 11:53:33 -0500
Resent-Date: Mon, 4 Dec 1995 17:53:50 +0100 (MET)
Old-Return-Path: <hzoli@cs.elte.hu>
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199512041653.RAA02096@bolyai.cs.elte.hu>
Subject: Re: problems with $WATCH / $WATCHFMT
To: mc@prismtech.co.uk (Matt Chidambaram)
Date: Mon, 4 Dec 1995 17:53:50 +0100 (MET)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <Pine.OSF.3.91.951204143311.561C-100000@alpha3.prismtech.co.uk> from "Matt Chidambaram" at Dec 4, 95 03:01:00 pm
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4 PL24 PGP3 *ALPHA*]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"qjKXH1.0.mV3.CUomm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/669
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> the second problem is the one about installing zsh on dec alpha running 
> osf/1 v3.x ....
> 
> after reading the FAQ and doing as it says about copying ypclnt.h and 
> altering the yp_all() signature's third parameter; i still get errors 
> concerning the zle_tricky.c call to yp_all();
> 
> i eventually altered the call from within zle_tricky.c ....
> from:
>     yp_all(domain, PASSWD_MAP, &cb);
> to:
>     yp_all(domain, PASSWD_MAP, cb);
> 
> it compiles and runs ok now. i havent tested it fully.
> ( - but it hasnt crashed as yet...)
> 
> is the change i made valid/correct?

No it isn't.  The FAQ says that you should not change zle_tricky.c.  If it
compiles after your change it means that you did not change the header file.
The correct prototype for yp_all is

extern int yp_all(char *, char *, struct ypall_callback *);

That's what the faq says.  zle_tricky.c is correct.  Fix
/usr/inclide/rpcsvc/ypclnt.h.  If you do not have root privileges ask your
sysadmin to do it.  Or you may create an rpcsvc subdirectory in the zsh
directory and place the fixed ypclnt.h there (I did not try it but it should
work).

I think that should be mentioned in the FAQ.

Cheers,

Zoltan


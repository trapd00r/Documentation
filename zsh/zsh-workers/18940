From zsh-workers-return-18940-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 10 22:19:26 2003
Return-Path: <zsh-workers-return-18940-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3600 invoked from network); 10 Aug 2003 22:19:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 10 Aug 2003 22:19:25 -0000
Received: (qmail 9885 invoked by alias); 10 Aug 2003 22:19:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18940
Received: (qmail 9875 invoked from network); 10 Aug 2003 22:19:09 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 10 Aug 2003 22:19:09 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [213.46.243.24] by sunsite.dk (MessageWall 1.0.8) with SMTP; 10 Aug 2003 22:19:9 -0000
Received: from s.hn.org ([80.111.3.215]) by amsfep13-int.chello.nl
          (InterMail vM.5.01.05.17 201-253-122-126-117-20021021) with SMTP
          id <20030810221908.UPVT16676.amsfep13-int.chello.nl@s.hn.org>
          for <zsh-workers@sunsite.dk>; Mon, 11 Aug 2003 00:19:08 +0200
Received: (qmail 15254 invoked by uid 1000); 10 Aug 2003 22:19:07 -0000
Date: Mon, 11 Aug 2003 00:19:07 +0200
From: Haakon Riiser <haakon.riiser@fys.uio.no>
To: zsh-workers@sunsite.dk
Subject: Unexpected alias expansion in history list
Message-ID: <20030810221907.GA15013@s.chello.no>
Mail-Followup-To: zsh-workers@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.1i

The following "bug" is probably not important, since it only
happens in a syntactically illegal command, but I chose to report
it anyway, in case the bug has other (more serious) symptomps.

Steps to reproduce:

  % zsh -f
  % alias foo='foo bar'
  % (foo) foo
  zsh: parse error near `foo'
  % history
      1  alias foo='foo bar'
      2  (foo) foo bar
               ^^^^^^^
Here, the second "foo" has been expanded.  This only happens when
the first word in the alias expansion is the same as the name of
the alias being expanded.

Verified on the following systems:

  zsh 4.1.1 (i686-pc-linux-gnu)
  zsh 4.0.2 (i686-pc-linux-gnu)
  zsh 4.0.2 (sparc-sun-solaris2.6)
  zsh 3.0.6 (sparc-sun-solaris2.6)

-- 
 Haakon


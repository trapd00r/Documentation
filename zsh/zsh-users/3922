From zsh-users-return-3922-mason-zsh=primenet.com.au@sunsite.dk Fri Jun 08 07:54:05 2001
Return-Path: <zsh-users-return-3922-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19851 invoked from network); 8 Jun 2001 07:54:04 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jun 2001 07:54:04 -0000
Received: (qmail 2680 invoked by alias); 8 Jun 2001 07:53:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3922
Received: (qmail 2665 invoked from network); 8 Jun 2001 07:53:37 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Timo Aaltonen" <tjaalton@cc.hut.fi>, <zsh-users@sunsite.dk>
Subject: RE: AIX-problem: the main module won't link statically
Date: Fri, 8 Jun 2001 11:53:42 +0400
Message-ID: <001401c0eff0$23452f20$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <Pine.LNX.4.10.10106080940330.23818-100000@nexus6.hut.fi>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

>
>   I tried to compile zsh-4.0.1 w. AIX-4.3 (cc version 5), but the main
> library (/module?) libzsh-4.0.1.so doesn't get in the binary, and when I
> try to run it:
>
> Could not load program ./zsh:
>         Dependent module libzsh-4.0.1.so could not be loaded.
> Could not load module libzsh-4.0.1.so.
> Error was: No such file or directory
>

Have you installed it? Or, better, have you installed it in the same
location as specified when configuring ($prefix/lib/zsh)?

> ..and the binary size is only ~1,5kb (and the library is in ~/lib/zsh,
> size ~690kb)
>

That's correct. Have you configured it with ``configure --prefix=$HOME'' ?
If you just run configure without any arguments zsh expects library in
/usr/local/lib/zsh.

> It seems that the linker doesn't function properly:
>
> ld  -s -G -bexpall -lc -o libzsh-4.0.1.so  `cat stamp-modobjs`
> -ldl -lcurses -lm  -lc
> ld: 0711-327 WARNING: Entry point not found: __start
> ld: 0711-224 WARNING: Duplicate symbol: .getproc
> ld: 0711-224 WARNING: Duplicate symbol: .glob
> ld: 0711-224 WARNING: Duplicate symbol: glob
> ld: 0711-224 WARNING: Duplicate symbol: getproc
> ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
> information.
>

I do not know AIX to decide if these warnings are harmful/harmless.

-andrej


From zsh-workers-request@math.gatech.edu Fri Oct 09 15:49:18 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18099 invoked from network); 9 Oct 1998 15:49:17 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 9 Oct 1998 15:49:17 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id LAA15598;
	Fri, 9 Oct 1998 11:41:24 -0400 (EDT)
Resent-Date: Fri, 9 Oct 1998 11:41:24 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <981009084444.ZM24902@candle.brasslantern.com>
Date: Fri, 9 Oct 1998 08:44:44 -0700
In-Reply-To: <9810091125.AA12690@ibmth.df.unipi.it>
Comments: In reply to Peter Stephenson <pws@ibmth.df.unipi.it>
        "PATCH: 3.1.4: (alternative) neg-argument fix" (Oct  9,  1:25pm)
References: <9810091125.AA12690@ibmth.df.unipi.it>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: PATCH: 3.1.4: (alternative) neg-argument fix
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"icl4y1.0.cp3.awY7s"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4422
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Oct 9,  1:25pm, Peter Stephenson wrote:
} Subject: PATCH: 3.1.4: (alternative) neg-argument fix
}
} There was a patch from Bart back in zsh-workers/4268 to fix a problem
} with neg-argument (\e- in emacs mode), namely \e-\e1 gave you 11
} instead of 1 and so on.  Now I come to look at this, I can't get it to
} work, i.e. neg-argument won't function at all.

Hmm.  I believe you're right.  I changed the 3.1.4 code to match the
equivalent code in 3.0.5, but I missed that digitargument() zeros
zmod.tmult when MOD_TMULT isn't flagged.  (3.0.5 never zeroes zmult,
and always multiplies by it.)

} I couldn't see a way of doing this without
} adding a new flag, though that doesn't mean there isn't one.

Has the whole multiplier thing become more complicated than necessary in
3.1.4?  MOD_TMULT obviously does more than the `gotmult' global in 3.0.5
did.

In any case, Peter's patch is preferable to mine.

} Is there any enthusiasm for upgrading universal-argument to do what
} emacs does, that is to take any following digits as part of the
} argument?

YES!  That would be so much easier than having to clamp down Alt or hit
ESC repeatedly to enter the digits.  Just remember that it also needs
to take a following `-' as part of the argument.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


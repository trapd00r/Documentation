From zsh-users-return-9492-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 12 09:36:20 2005
Return-Path: <zsh-users-return-9492-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1400 invoked from network); 12 Oct 2005 09:36:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Oct 2005 09:36:16 -0000
Received: (qmail 29736 invoked from network); 12 Oct 2005 09:36:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Oct 2005 09:36:07 -0000
Received: (qmail 9071 invoked by alias); 12 Oct 2005 09:36:00 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9492
Received: (qmail 9041 invoked from network); 12 Oct 2005 09:35:59 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Oct 2005 09:35:59 -0000
Received: (qmail 28681 invoked from network); 12 Oct 2005 09:35:59 -0000
Received: from cluster-c.mailcontrol.com (HELO rly17c.srv.mailcontrol.com) (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 12 Oct 2005 09:35:58 -0000
Received: from exchange03.csr.com (mailhost1.csr.com [81.105.217.43])
	by rly17c.srv.mailcontrol.com (MailControl) with ESMTP id j9C9ZuK5011571
	for <zsh-users@sunsite.dk>; Wed, 12 Oct 2005 10:35:56 +0100
Received: from news01 ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 12 Oct 2005 10:38:01 +0100
Date: Wed, 12 Oct 2005 10:35:55 +0100
From: Peter Stephenson <pws@csr.com>
To: zsh-users@sunsite.dk
Subject: Re: Wrong UTF-8-characters in prompt
Message-Id: <20051012103555.6653cc5b.pws@csr.com>
In-Reply-To: <200510112101.24336.arvidjaar@newmail.ru>
References: <20051011093327.GB12645@speutel.de>
	<200510112032.42671.arvidjaar@newmail.ru>
	<EXCHANGE03qjJny7v35000048b4@exchange03.csr.com>
	<200510112101.24336.arvidjaar@newmail.ru>
Organization: Cambridge Silicon Radio
X-Mailer: Sylpheed version 0.9.12 (GTK+ 1.2.10; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 12 Oct 2005 09:38:01.0107 (UTC) FILETIME=[A3007630:01C5CF10]
X-Scanned-By: MailControl A-05-40-00 (www.mailcontrol.com) on 10.67.0.127
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Andrey Borzenkov <arvidjaar@newmail.ru> wrote:
> {pts/2}% ~/pkg/bin/zsh -f
> cooker% PS1=3D"%~> "
> ~/build/zsh> cd ~/tmp/test/____________
> ~/tmp/test/\M-P\M-9\M-Q\M-^F\M-Q\M-^C\M-P\M-:\M-P\M-5\M-P\M-=3D> setopt=
=20
> printeightbit
> ~/tmp/test/____________>

Aha --- it's the %~ that's still using the old nicezputs().  It works fine
if you include the same characters literally in the prompt.  This shouldn't
be too hard to fix.

--=20
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


This message has been scanned for viruses by BlackSpider MailControl - www.=
blackspider.com


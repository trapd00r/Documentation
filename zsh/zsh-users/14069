From zsh-users-return-14069-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 26 05:08:31 2009
Return-Path: <zsh-users-return-14069-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 649 invoked from network); 26 Apr 2009 05:08:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Apr 2009 05:08:27 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 98223 invoked from network); 26 Apr 2009 05:08:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Apr 2009 05:08:10 -0000
Received: (qmail 204 invoked by alias); 26 Apr 2009 05:07:52 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14069
Received: (qmail 189 invoked from network); 26 Apr 2009 05:07:51 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 26 Apr 2009 05:07:51 -0000
Received: from rv-out-0506.google.com (rv-out-0506.google.com [209.85.198.228])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 10F1A80EA0C0
	for <zsh-users@sunsite.dk>; Sun, 26 Apr 2009 07:05:53 +0200 (CEST)
Received: by rv-out-0506.google.com with SMTP id f9so1248423rvb.21
        for <zsh-users@sunsite.dk>; Sat, 25 Apr 2009 22:07:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:sender:cc:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=yRnslo8WTlhsotxayqSGfa4wMKHYpLqIg/yk6bJTNvw=;
        b=fZf4SJKTCgVX3EFjK9ELessNdspVKWPR3Kaein2OmIX5RvF3IU1XydcJWLdRVnFT9X
         TMWshsOFKpQJ/x7HH2LXt3O+Aj++EPDfr8RO8EXFCryH6lBv+vTPLe3+Lpd0DWIpC4pp
         jNmLMSRUTXBx8FT/xNbJUxMoCZwD+Wq6ocN10=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=sender:cc:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=DW0bfR02SNxRr7FMnLO4VAJR9Sq1Z3501NL/qIKV2mWn261rB2Aqq9iaOn1THlWozV
         66oGNg9DH67HvHrvYSl3xOBPvTs05a9jrczF6lB9xgy4bKB136oSP5693cIEvbaAwjD8
         lO8ULzotslMJpSgZ0QcJ948cwIEtyDgTPn3c8=
Received: by 10.114.211.2 with SMTP id j2mr2096313wag.139.1240722452781;
        Sat, 25 Apr 2009 22:07:32 -0700 (PDT)
Received: from ?10.0.1.3? (adsl-99-35-131-129.dsl.pltn13.sbcglobal.net [99.35.131.129])
        by mx.google.com with ESMTPS id k2sm2745500rvb.10.2009.04.25.22.07.31
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 25 Apr 2009 22:07:32 -0700 (PDT)
Sender: "W. G. Scott" <wgscott1@gmail.com>
Cc: Zsh Users List <zsh-users@sunsite.dk>
Message-Id: <880FD236-A5A6-4921-8ABC-AB07CBBB8D38@chemistry.ucsc.edu>
From: "William G. Scott" <wgscott@chemistry.ucsc.edu>
To: Bart Schaefer <schaefer@brasslantern.com>
In-Reply-To: <090422080905.ZM17292@torch.brasslantern.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Compiling Zsh for Mac PowerPC and Intel
Date: Sat, 25 Apr 2009 22:07:30 -0700
References: <d2ecb10b0904220631n4e9e256ctf2250acab9f73ca3@mail.gmail.com> <090422080905.ZM17292@torch.brasslantern.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Scanned: ClamAV 0.92.1/9290/Sun Apr 26 06:09:21 2009 on bifrost
X-Virus-Status: Clean





On Apr 22, 2009, at 8:09 AM, Bart Schaefer wrote:

> On Apr 22,  9:31am, TjL wrote:
> }
> } My question is, how do I compile zsh so I end up with a  
> "universal" binary?
>
> I'm no expert, but "man cc" seems to indicate that you have to pass  
> the
> -arch option to the compiler multiple times.
>
> This did it for me:
>
>    make clean
>    make CFLAGS='-arch i386 -arch ppc -arch ppc64' LDFLAGS='${CFLAGS}'
>
> And now:
>
> schaefer[398] file Src/zsh
> Src/zsh: Mach-O universal binary with 3 architectures
> Src/zsh (for architecture i386):        Mach-O executable i386
> Src/zsh (for architecture ppc7400):     Mach-O executable ppc
> Src/zsh (for architecture ppc64):       Mach-O 64-bit executable ppc64
>
> I have no idea whether it'll actually *run* on all three platforms.

I compiled on intel and tested it on ppc (both 10.5) and it works as  
advertised.  Haven't tried 64-bit yet, but I am glad to see that it  
will be this easy...

dev3 compiles fine on ppc and intel 10.5, fwiw.

Bill



William G. Scott

Contact info:
http://chemistry.ucsc.edu/~wgscott/


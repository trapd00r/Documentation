From zsh-workers-return-10282-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 27 16:49:08 2000
Return-Path: <zsh-workers-return-10282-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7567 invoked from network); 27 Mar 2000 16:49:06 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Mar 2000 16:49:06 -0000
Received: (qmail 14534 invoked by alias); 27 Mar 2000 16:48:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10282
Received: (qmail 14513 invoked from network); 27 Mar 2000 16:48:58 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000327164851.ZM16620@candle.brasslantern.com>
Date: Mon, 27 Mar 2000 16:48:51 +0000
In-Reply-To: <200003271049.MAA04375@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "autoload +X[zk]" (Mar 27, 12:49pm)
References: <200003271049.MAA04375@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: autoload +X[zk]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 27, 12:49pm, Sven Wischnowsky wrote:
} Subject: autoload +X[zk]
}
} Note: intentionally no PATCH in the subject, I think I let others
} decide if we should use this patch, or change it before using it.

I think we should apply it and then fix a couple of things.

} I'm not sure about this because it also changes ksh-style autoloading
} with `autoload +X' (independent if it's done because of giving the new 
} -k flag or because KSH_AUTOLOAD is set) to execute the file loaded to
} get at the function definition. And `autoload +X' has been around for
} some time...

Here's what I'd *like* for it to do, and you tell me how hard it is ...

I'd like autoload +X on a ksh-autoloaded function `foo' to behave "as if"
the user had executed

	f=($^fpath/foo(|)(N))
	eval "function foo { ${$(< $f[1])};"' foo "$@" }'

Otherwise I think this patch is just fine.

} The good thing is that it integrates execautofn() and loadautofn().

Thank you.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


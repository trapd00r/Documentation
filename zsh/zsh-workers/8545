From zsh-workers-return-8545-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Nov 04 18:48:31 1999
Return-Path: <zsh-workers-return-8545-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9046 invoked from network); 4 Nov 1999 18:48:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Nov 1999 18:48:29 -0000
Received: (qmail 12020 invoked by alias); 4 Nov 1999 18:48:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8545
Received: (qmail 12011 invoked from network); 4 Nov 1999 18:48:24 -0000
Date: Thu, 4 Nov 1999 13:48:19 -0500
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: run-help tidying
Message-ID: <19991104134819.A18973@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0pre4i

This is mostly for the ./dot :/colon translation
but some English has been prettied and $HELPDIR
is checked for validity.

--- run-help.dist	Thu Nov  4 11:35:57 1999
+++ run-help	Thu Nov  4 13:43:47 1999
@@ -11,16 +11,19 @@
 emulate -R zsh
 setopt localoptions
 
+[[ $1 == "." ]] && 1="dot"
+[[ $1 == ":" ]] && 1="colon"
+
 # Check whether Util/helpfiles has been used to generate zsh help
 if [[ $1 == "-l" ]]
 then
-    if [[ -n "${HELPDIR:-}" ]]
+    if [[ -n "${HELPDIR:-}" && -d $HELPDIR ]]
     then
-	echo 'Here is a list of topics for which help is available:'
+	echo "Here is a list of topics for which special help is available:"
 	echo ""
 	print -rc $HELPDIR/*(:t)
     else
-	echo 'There is no list of help topics available at this time'
+	echo "There is no list of special help topics available at this time."
     fi
     return 0
 elif [[ -n "${HELPDIR:-}" && -r $HELPDIR/$1 && $1 != compctl ]]
@@ -29,7 +32,7 @@
     return $?
 fi
 
-# No zsh help, use "whence" to figure out where else we might look
+# No zsh help; use "whence" to figure out where else we might look
 local what places newline='
 '
 integer i=0 didman=0


From zsh-workers-return-28849-mason-zsh=primenet.com.au@zsh.org Thu Mar 03 23:21:17 2011
Return-Path: <zsh-workers-return-28849-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15429 invoked by alias); 3 Mar 2011 23:21:17 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28849
Received: (qmail 27389 invoked from network); 3 Mar 2011 23:21:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at lorien.comfychair.org designates 173.8.144.98 as permitted sender)
Date: Thu, 3 Mar 2011 15:00:47 -0800
From: Danek Duvall <duvall@comfychair.org>
To: zsh-workers@zsh.org
Subject: completing a comma-separated pair of values
Message-ID: <20110303230047.GA12871@lorien.comfychair.org>
Mail-Followup-To: Danek Duvall <duvall@comfychair.org>, zsh-workers@zsh.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.20 (2010-04-22)

I'm not sure if this is something I can do with the stock completion
widgets, and I can't think of any examples of this off the top of my head,
but what I need to be able to do is to complete a comma-separated pair of
values, where the order is important, and one side needs more complicated
completion (takes a path).  That is:

    property=value1,value2

I can almost get this with _values, but it requires the values to be in the
form <key>[<kvsep><value>], rather than <value>, and I can't simply make
the values keys.

Am I making any sense?  Do I have to write a copy of _values to do this?

Also, is there any way to make the "=" separator _values uses elide with
the "=" you type to finish (menu) completing?  For instance, if I have
properties prop1, prop2, and prop3, and I type:

    prop<TAB>

I get

    prop1=

and I can cycle through the three by hitting tab, but if I want to start
completing on the value of propN, I have to type something and the
backspace over it, rather than just hitting "=", like I would hit "/" if I
were completing through the directory heirarchy.

Thanks,
Danek


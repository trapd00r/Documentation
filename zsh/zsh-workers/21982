From zsh-workers-return-21982-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 03 03:24:34 2005
Return-Path: <zsh-workers-return-21982-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26898 invoked from network); 3 Nov 2005 03:24:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Nov 2005 03:24:29 -0000
Received: (qmail 56620 invoked from network); 3 Nov 2005 03:24:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Nov 2005 03:24:17 -0000
Received: (qmail 11059 invoked by alias); 3 Nov 2005 03:24:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21982
Received: (qmail 11049 invoked from network); 3 Nov 2005 03:24:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Nov 2005 03:24:13 -0000
Received: (qmail 56435 invoked from network); 3 Nov 2005 03:24:13 -0000
Received: from smtp01.mrf.mail.rcn.net (207.172.4.61)
  by a.mx.sunsite.dk with SMTP; 3 Nov 2005 03:24:12 -0000
Received: from 209-6-229-49.c3-0.nwt-ubr2.sbo-nwt.ma.cable.rcn.com (HELO zion.rcn.com) ([209.6.229.49])
  by smtp01.mrf.mail.rcn.net with ESMTP; 02 Nov 2005 22:24:10 -0500
X-IronPort-AV: i="3.97,283,1125892800"; 
   d="scan'208"; a="115085493:sNHT27096982"
Received: by zion.rcn.com (Postfix, from userid 500)
	id 4C1AB7A8B7; Wed,  2 Nov 2005 22:24:09 -0500 (EST)
To: Peter Stephenson <pws@csr.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: universal argument regression
References: <m33bmf3d76.fsf@zion.rcn.com>
	<20051102100838.547902bf.pws@csr.com>
From: Vin Shelton <acs@alumni.princeton.edu>
Organization: EtherSoft, Inc
Date: Wed, 02 Nov 2005 22:24:08 -0500
In-Reply-To: <20051102100838.547902bf.pws@csr.com> (Peter Stephenson's
 message of "Wed, 2 Nov 2005 10:08:38 +0000")
Message-ID: <m3wtjq1kiv.fsf@zion.rcn.com>
Lines: 35
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.4

Peter Stephenson <pws@csr.com> writes:

> Vin Shelton <acs@alumni.princeton.edu> wrote:
>> It looks like the universal prefix argument is
>> ignored in the latest CVS sources.
>
> This wasn't hard to spot when I started looking...
>
> Index: Src/Zle/zle_misc.c
> ===================================================================
> RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_misc.c,v
> retrieving revision 1.31
> diff -u -r1.31 zle_misc.c
> --- Src/Zle/zle_misc.c	1 Nov 2005 03:26:52 -0000	1.31
> +++ Src/Zle/zle_misc.c	2 Nov 2005 10:07:07 -0000
> @@ -532,11 +532,11 @@
>       * of digits.  We are assuming ASCII is a subset of the multibyte
>       * encoding.
>       */
> -    if (idigit(lastchar))
> +    if (!idigit(lastchar))
>  	return 1;
>  #else
>      /* allow metafied as well as ordinary digits */
> -    if (idigit(lastchar & 0x7f))
> +    if (!idigit(lastchar & 0x7f))
>  	return 1;
>  #endif
>  

Yup, that fixed it.

Thank you, Peter.

  - vin


From zsh-workers-return-24065-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 06 07:45:23 2007
Return-Path: <zsh-workers-return-24065-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 467 invoked from network); 6 Nov 2007 07:45:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Nov 2007 07:45:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 25367 invoked from network); 6 Nov 2007 07:45:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Nov 2007 07:45:09 -0000
Received: (qmail 29241 invoked by alias); 6 Nov 2007 07:45:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24065
Received: (qmail 29223 invoked from network); 6 Nov 2007 07:45:05 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Nov 2007 07:45:05 -0000
Received: (qmail 24952 invoked from network); 6 Nov 2007 07:45:05 -0000
Received: from smtpout0148.sc1.he.tucows.com (HELO n064.sc1.he.tucows.com) (64.97.136.148)
  by a.mx.sunsite.dk with SMTP; 6 Nov 2007 07:44:59 -0000
Received: from sc.homeunix.net (82.26.166.225) by n064.sc1.he.tucows.com (7.2.069.1)
        id 47030C3D00291C3D for zsh-workers@sunsite.dk; Tue, 6 Nov 2007 07:44:57 +0000
Received: from chazelas by sc.homeunix.net with local (Exim 4.68)
	(envelope-from <stephane_chazelas@yahoo.fr>)
	id 1IpJ7I-0001V6-3K
	for zsh-workers@sunsite.dk; Tue, 06 Nov 2007 07:44:56 +0000
Date: Tue, 6 Nov 2007 07:44:56 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: $'\uXXXX'
Message-ID: <20071106074456.GA5411@sc.homeunix.net>
Mail-Followup-To: Zsh hackers list <zsh-workers@sunsite.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.5.16 (2007-09-19)

Hiya,

according to the manual:

  A string enclosed between `$'' and `'' is processed the same
  way as the string arguments of the print builtin, and the
  resulting string is considered to be entirely quoted.  A
  literal `'' character can be included in the string by using
  the `\'' escape.

But:

~$ print '<\u0041>'
<A>
~$ printf '%s\n' $'<\u0041>'
<>

~$ locale
LANG=en_GB.ISO-8859-15
LC_CTYPE=en_US.ISO-8859-15
LC_NUMERIC="en_GB.ISO-8859-15"
LC_TIME="en_GB.ISO-8859-15"
LC_COLLATE="en_GB.ISO-8859-15"
LC_MONETARY="en_GB.ISO-8859-15"
LC_MESSAGES="en_GB.ISO-8859-15"
LC_PAPER="en_GB.ISO-8859-15"
LC_NAME="en_GB.ISO-8859-15"
LC_ADDRESS="en_GB.ISO-8859-15"
LC_TELEPHONE="en_GB.ISO-8859-15"
LC_MEASUREMENT="en_GB.ISO-8859-15"
LC_IDENTIFICATION="en_GB.ISO-8859-15"
LC_ALL=

~$ dpkg -l | grep zsh
ii  zsh                                          4.3.4-25                    A shell with lots of features
ii  zsh-beta                                     4.3.4-dev-1+20071029-1      A shell with lots of features (dev tree)

~$ LC_ALL=C
~$ print $'\u00e9'
zsh: character not in range
zsh: segmentation fault  zsh-beta

Cheers,
Stéphane


From zsh-workers-request@math.gatech.edu Fri Nov 28 12:49:52 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 27460 invoked from network); 28 Nov 1997 12:49:50 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 28 Nov 1997 12:49:50 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id HAA14021;
	Fri, 28 Nov 1997 07:30:42 -0500 (EST)
Resent-Date: Fri, 28 Nov 1997 07:30:25 -0500 (EST)
From: Christopher Croughton <crough45@amc.de>
Message-Id: <97Nov28.143140gmt+0100.17031@internet01.amc.de>
Subject: Re: History key bindings
To: schaefer@brasslantern.com (Bart Schaefer)
Date: Fri, 28 Nov 1997 13:30:18 +0100
Cc: crough45@amc.de, zsh-users@math.gatech.edu
In-Reply-To: <971127095558.ZM2955@candle.brasslantern.com> from "Bart Schaefer" at Nov 27, 97 06:55:58 pm
X-Mailer: ELM [version 2.4 PL24 PGP3 *ALPHA*]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"5MApv1.0.YQ3.XbhVq"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1157
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Bart Schaefer wrote:
> 
> When you first press up-arrow, there (normally) won't be any mark on
> the line, so ^X^X does nothing.  

Confirmed - this works with (beta) version 3.1.2, not with (released)
version 3.0 (which seems to put the mark at the start of the line when
it is first edited or something).

BTW, it was not very easy to compile on the Dec Alpha under OSF/1 
version 3.2.  In Src/Zle/zle_tricky.c line 1551 the parameters to
yp_all() are not the same (the third parameter is the callback structure
on OSF1, not a pointer to it as in the code.  As a diff -c:

*** Src/Zle/zle_tricky.c.old    Fri Nov 28 13:06:33 1997
--- Src/Zle/zle_tricky.c        Fri Nov 28 12:44:51 1997
***************
*** 1548,1554 ****
      if (getdomainname(domain, YPMAXDOMAIN) == 0) {
        cb.foreach = (int ((*) _((void)))) match_username;
        cb.data = (char *)&data;
!       yp_all(domain, PASSWD_MAP, &cb);
  /*    for (n = firstnode(matches); n; incnode(n))
            if (getpwnam(getdata(n)) == NULL)
                uremnode(matches, n);*/
--- 1548,1554 ----
      if (getdomainname(domain, YPMAXDOMAIN) == 0) {
        cb.foreach = (int ((*) _((void)))) match_username;
        cb.data = (char *)&data;
!       yp_all(domain, PASSWD_MAP, cb);
  /*    for (n = firstnode(matches); n; incnode(n))
            if (getpwnam(getdata(n)) == NULL)
                uremnode(matches, n);*/

It also required GNU make (missing .SUFFIXES in several of the makefiles)
not the OSF1 version.  But lots of GNU and GNU-is stuff needs that...

Thanks,
    Chris C


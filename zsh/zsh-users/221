From huyle@pride.ugcs.caltech.edu Sun May 26 22:41:12 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id WAA23496 for <mason@werple.mira.net.au>; Sun, 26 May 1996 22:41:09 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA12163; Sun, 26 May 1996 08:23:25 -0400 (EDT)
Resent-Date: Sun, 26 May 1996 08:19:29 -0400 (EDT)
Message-Id: <199605261219.FAA09817@envy.ugcs.caltech.edu>
To: zsh-users@math.gatech.edu
Subject: 'print -s' in a function
X-URL: http://www.ugcs.caltech.edu/~huyle
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <22969.833113160.1@pride.ugcs.caltech.edu>
Date: Sun, 26 May 1996 05:19:20 -0700
From: Huy Le <huyle@pride.ugcs.caltech.edu>
Resent-Message-ID: <"i9AoH1.0.Vz2.Hn4gn"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/221
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 861
Status: O

VERSION: zsh2.6beta13

So, I'm trying the following:

function fed() {
  # Allows for the editing of functions in memory

  if [[$# -ne 1]]; then
    echo "usage: $0 function"
    return 1
  fi

  local i

  if autoload | grep " $1 " >/dev/null 2>&1; then
    for i in "$fpath[@]"; do
      if [[-f $fpath[1]/$1]]; then
        eval "`echo \"function $1() {\"; <$fpath[1]/$1;
               echo \}`"
        break
      fi
    done
  fi

  builtin print -s "function `which $1`"

  fc
  # Replace the previous line with the next line to see what's intended
  #builtin print -z fc
}


If you try running this, such as running:
      fed fed
you'll notice that what shows up in your editor
is "fed fed" instead of the contents of fed.

The problem is that the history doesn't get updated right
away after the 'print -s' line.  Why?  Could this be a bug?

- Huy



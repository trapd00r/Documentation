From zsh-workers-return-15793-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 12 14:09:32 2001
Return-Path: <zsh-workers-return-15793-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3122 invoked from network); 12 Sep 2001 14:09:31 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Sep 2001 14:09:31 -0000
Received: (qmail 8770 invoked by alias); 12 Sep 2001 14:09:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15793
Received: (qmail 8758 invoked from network); 12 Sep 2001 14:09:22 -0000
Date: Wed, 12 Sep 2001 09:10:15 -0500
From: Monty Scroggins <c-Monty.Scroggins@wcom.com>
Subject: RE: zsh: fatal error: out of memory
In-reply-to: <010911161924.ZM24820@candle.brasslantern.com>
To: zsh-workers@sunsite.dk
Message-id: <AMEBKGFHHNFCEKKEGEOIKEEJCBAA.c-Monty.Scroggins@wcom.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7bit
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal


These are the two parameters that were in the .profile

HISTSIZE=18000; export HISTSIZE
HISTFILE=~/.sh_history; export HISTFILE

The .sh_history file is 168560k and 7952 lines..
This seems like an absurdly large history file and I
am skeptical that anyone could take advantage of it all..
but maybe zsh should handle this type of problem..

I attempted to put a sample of the history file in this
message, but due to the control characters in the lines,
the mail client didn't paste in any text..  In looking
at the file in my text editor (NEdit) it looks like
each line starts with one or more <nul> characters followed
by the command strings..

If nothing else could (or should) be done about this problem,
maybe the error string could be enhanced a bit.. The error text
"out of memory", while being true, was vague enough
that I was heading down a wrong path to resolve the issue...

Just a thought...

Monty

-----Original Message-----
From: Bart Schaefer [mailto:schaefer@brasslantern.com]
Sent: Tuesday, September 11, 2001 6:19 PM
To: Monty Scroggins; zsh-workers@sunsite.dk
Subject: Re: zsh: fatal error: out of memory


On Sep 11,  5:22pm, Monty Scroggins wrote:
>
> HISTFILE=~/.sh_history; export HISTFILE
>
> This seems to have been what was causing me all the
> headaches...   Is this a bug in ZSH?  Is this something
> that ZSH should handle??

At the least it demonstrates a potential problem with different shells using
the same parameter name for what may be differently-formatted data.

What does the content of ~/.sh_history look like?  What's the file size?

It's also possible that it's the setting of HISTSIZE and/or SAVEHIST that
are actually the problem.  Are those parameters set?


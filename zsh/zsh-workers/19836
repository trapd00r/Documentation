From zsh-workers-return-19836-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 27 09:59:45 2004
Return-Path: <zsh-workers-return-19836-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26315 invoked from network); 27 Apr 2004 09:59:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 27 Apr 2004 09:59:43 -0000
Received: (qmail 7109 invoked by alias); 27 Apr 2004 09:59:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19836
Received: (qmail 7096 invoked from network); 27 Apr 2004 09:59:29 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 27 Apr 2004 09:59:29 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 27 Apr 2004 9:59:28 -0000
Received: (qmail 26131 invoked from network); 27 Apr 2004 09:59:28 -0000
Received: from lhuumrelay3.lnd.ops.eu.uu.net (62.189.58.19)
  by a.mx.sunsite.dk with SMTP; 27 Apr 2004 09:59:26 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i3R9wxv17225
	for <zsh-workers@sunsite.dk>; Tue, 27 Apr 2004 09:58:59 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6938066e87c0a88d016a8@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Tue, 27 Apr 2004 10:58:31 +0100
Received: from csr.com ([192.168.144.127]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 27 Apr 2004 10:59:57 +0100
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: PATCH: (2) Re: FreeBSD compatability feature request 
In-reply-to: "Bart Schaefer"'s message of "Tue, 27 Apr 2004 03:56:42 -0000."
             <1040427035642.ZM27361@candle.brasslantern.com> 
Date: Tue, 27 Apr 2004 10:58:59 +0100
Message-ID: <12706.1083059939@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 27 Apr 2004 09:59:57.0630 (UTC) FILETIME=[65892DE0:01C42C3E]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: **
X-Spam-Status: No, hits=2.3 required=6.0 tests=BAYES_70 autolearn=no 
	version=2.63
X-Spam-Hits: 2.3

Bart Schaefer wrote:
> On Apr 22, 11:17am, Peter Stephenson wrote:
> }
> } If anybody actually knows anything about all this, their views would be
> } especially welcome.
> 
> This sounds like something to ask about on the <shell@research.att.com>
> list.

It's not so much the standard as implementing an alternative in a
consistent way that I'm worried about.

However, there is a difference in the current implementation:

$ fn() { sleep 5; kill -USR1 $$; }
$ trap 'echo USR1 fired' USR1
$ fn & sleep 10

ksh (88), bash and Solaris sh wait till the end of the sleep before
delivering the `USR1 fired' (and, where appropriate, sending the
notification message).  In zsh they appear in the middle.  That's
because the exiting background process gives a SIGCHLD and we don't care
which child exits, we just go into end-of-job-processing mode, then
return to wait for the foreground process when we find that's not the
one that exited.

I don't know if this is important enough to worry about.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


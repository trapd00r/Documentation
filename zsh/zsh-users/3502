From zsh-users-return-3502-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Nov 02 05:08:37 2000
Return-Path: <zsh-users-return-3502-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25493 invoked from network); 2 Nov 2000 05:08:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Nov 2000 05:08:36 -0000
Received: (qmail 24046 invoked by alias); 2 Nov 2000 05:08:25 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3502
Received: (qmail 24039 invoked from network); 2 Nov 2000 05:08:25 -0000
From: Jerry Peek <web@jpeek.com>
X-Mailer: nmh-1.0
To: zsh-users@sunsite.auc.dk
Subject: Bug in "dirs a b c" where a b c are relative paths?
Date: Wed, 01 Nov 2000 22:06:54 -0700
Message-ID: <2657.973141614@jpeek.com>
Sender: jpeek@jpeek.com

Hi, all.  I did a quick search and didn't find this potential 3.0.7
bug mentioned in change lists... I hope this isn't a repeat.  It
seems familiar somehow.  Anyway, here goes:

I'm still working on the third edition of O'Reilly's "Unix Power Tools"
...and still rummaging around the zsh manpages for tidbits that fit.
In one of the articles about directory stacks, in the section on
clearing the stack, I was playing with the zsh command "dirs a b c d".
It replaces the stack contents with the directories a b c and d.
I think this has trouble when the directory pathnames are relative
(don't start with a /).

For example, I made five subdirectories in /tmp named a b c d and e.
Then I added them all to the stack.  Watch what happened:

	zsh% pwd 
	/tmp
	zsh% ls -Fd ?
	a/  b/  c/  d/  e/
	zsh% dirs ?
	zsh% dirs
	/tmp a b c d e
	zsh% pushd +2
	/tmp/b c d e /tmp a
	zsh% pushd +2
	pushd: no such file or directory: d

When "dirs a b c d e" puts directories on the stack, should it convert
any relative pathnames to absolute?  Or does the manpage need a warning?

Jerry
-- 
Jerry Peek, web@jpeek.com, http://www.jpeek.com/


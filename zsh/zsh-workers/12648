From zsh-workers-return-12648-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Aug 15 15:49:46 2000
Return-Path: <zsh-workers-return-12648-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10486 invoked from network); 15 Aug 2000 15:49:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Aug 2000 15:49:45 -0000
Received: (qmail 28654 invoked by alias); 15 Aug 2000 15:49:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12648
Received: (qmail 28644 invoked from network); 15 Aug 2000 15:49:22 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>,
   "Oliver Kiddle" <opk@u.genie.co.uk>,
   "Zsh workers" <zsh-workers@sunsite.auc.dk>
Subject: RE: Seg fault with zmodload -u
Date: Tue, 15 Aug 2000 19:49:16 +0400
Message-ID: <000601c006d0$5df53890$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
In-Reply-To: <000501c006cf$9c793540$21c9ca95@mow.siemens.ru>
Importance: Normal

>
> bor@itsrm2% zsh -f
> itsrm2% zmodload -ud zsh/zleparameter zsh/zle
> zsh: bus error (core dumped)  zsh -f
>
> Note, that bus error normaly means unaligned memory access here
> (MIPS R4400).
> That is quite different from out-of-bounds error.
>

(dbx32) where
realfree() at 0x8050958
cleanfree() at 0x8051328
malloc() at 0x80502b4
zcalloc(size = 64), line 469 in "/tools/src/zsh/Src/mem.c"
hbegin(dohist = 1), line 752 in "/tools/src/zsh/Src/hist.c"
.init.loop(toplevel = 1, justonce = 0), line 111 in
"/tools/src/zsh/Src/init.c"
zsh_main(argc = 2, argv = 0x7ffeed4c), line 1197 in
"/tools/src/zsh/Src/init.c"
.main.main(argc = 2, argv = 0x7ffeed4c), line 37 in
"/tools/src/zsh/Src/main.c"
__start() at 0x409c24

It does not help much. malloc() internals are already corrupted :-(

-andrej


From zsh-workers-return-16148-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 25 11:20:16 2001
Return-Path: <zsh-workers-return-16148-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5084 invoked from network); 25 Oct 2001 11:20:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Oct 2001 11:20:15 -0000
Received: (qmail 26885 invoked by alias); 25 Oct 2001 11:20:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16148
Received: (qmail 26869 invoked from network); 25 Oct 2001 11:20:04 -0000
Date: Thu, 25 Oct 2001 13:19:36 +0200
From: Mads Martin Joergensen <mmj@suse.de>
To: Peter Stephenson <pws@csr.com>
Cc: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: 4.0.3
Message-ID: <20011025131936.D16616@staudinger.suse.de>
References: <20011025122902.B16616@staudinger.suse.de> <4121.1004007289@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <4121.1004007289@csr.com>

* Peter Stephenson <pws@csr.com> [Oct 25. 2001 12:55]:
> > (mmj@staudinger) ~> ulimit -Sm unlimited
> > ulimit: bad option: -m
> > zsh: exit 1
> 
> -m corresponds to the internal definition RLIMIT_RSS, see
> /usr/include/sys/resource.h.
> 
> Are you on a system where RLIMIT_VMEM == RLIMIT_RSS?  If so, this is the
> effect of 16033.  (If not, nothing should have changed since 4.0.2.)
> Probably the best thing to do is handle this as a special case, as follows
> --- this applies to both branches.
> 
> I changed the output message for the case in question, since it obviously
> doesn't make sense to discriminate between virtual and physical memory here.
> 
> I can't really test this here, I don't have RLIMIT_RSS.  Not sure if this
> is enough to upgrade 4.0.3 to 4.0.4, but at least I haven't announced 4.0.3
> yet.

With the patch applied, it is happy again, thanks. But I cannot seem to
find the two RLIMITs in question either on my SuSE Linux 7.3 system. It
might very well be that I'm a moron not looking in the right places
though.

I would not justify a 4.0.4 with this, when 4.0.3 as you pointed out not
have been announced yet. There's of course factors like CVS that have to
be taken into question, which I am unaware of.

-- 
Mads Martin Joergensen, http://mmj.dk
"Why make things difficult, when it is possible to make them cryptic
 and totally illogic, with just a little bit more effort."
                                -- A. P. J.


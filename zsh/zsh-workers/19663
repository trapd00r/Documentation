From zsh-workers-return-19663-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 20 00:00:28 2004
Return-Path: <zsh-workers-return-19663-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25386 invoked from network); 20 Mar 2004 00:00:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Mar 2004 00:00:27 -0000
Received: (qmail 10584 invoked by alias); 20 Mar 2004 00:00:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19663
Received: (qmail 10565 invoked from network); 20 Mar 2004 00:00:17 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 20 Mar 2004 00:00:17 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.92.195.173] by sunsite.dk (MessageWall 1.0.8) with SMTP; 20 Mar 2004 0:0:17 -0000
Received: from modem-171.minnesota.dialup.pol.co.uk ([62.137.74.171] helo=pwstephenson.fsnet.co.uk)
	by cmailg3.svr.pol.co.uk with esmtp (Exim 4.14)
	id 1B4TuS-0005vV-Al; Sat, 20 Mar 2004 00:00:16 +0000
Received: by pwstephenson.fsnet.co.uk (Postfix, from userid 501)
	id A28C48649; Fri, 19 Mar 2004 19:02:07 -0500 (EST)
Received: from pwstephenson.fsnet.co.uk (localhost [127.0.0.1])
	by pwstephenson.fsnet.co.uk (Postfix) with ESMTP
	id 85E048646; Sat, 20 Mar 2004 00:02:07 +0000 (GMT)
To: Nikolai Weibull <zsh-workers-list@pcppopper.org>,
	zsh-workers@sunsite.dk
Subject: Re: 101% system resource usage 
In-reply-to: "Nikolai Weibull"'s message of "Fri, 19 Mar 2004 01:10:33 +0100."
             <20040319001033.GD6939@puritan.pcp.ath.cx> 
Date: Sat, 20 Mar 2004 00:02:06 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <20040320000207.A28C48649@pwstephenson.fsnet.co.uk>

Nikolai Weibull wrote:
> grep -c 'a*' test.file: real: 1.212 user: 1.140 system: 0.090 (101%)

In fact the calculation (printtime() in jobs.c) always rounds down
(though I'm not sure why it's done the way it is; it effectively
recalculates three floating point numbers it's already calculated).

It may be an artifact of the way the start of real time is only recorded
by the shell after the process is forked (and the end of real time after
it finishes), while the time of process execution is recorded by the
operating system itself and so is more accurate.  If there's a
significant gap due to scheduling the `real' time may be too short.

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Work: pws@csr.com
Web: http://www.pwstephenson.fsnet.co.uk


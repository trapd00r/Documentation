From zsh-workers-return-15645-mason-zsh=primenet.com.au@sunsite.dk Thu Aug 16 14:12:47 2001
Return-Path: <zsh-workers-return-15645-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5257 invoked from network); 16 Aug 2001 14:12:45 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Aug 2001 14:12:45 -0000
Received: (qmail 27530 invoked by alias); 16 Aug 2001 14:12:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15645
Received: (qmail 27519 invoked from network); 16 Aug 2001 14:12:36 -0000
Date: Thu, 16 Aug 2001 15:12:35 +0100
From: Adam Spiers <adam@spiers.net>
To: zsh-workers@sunsite.dk
Subject: Re: /usr/local/bin/perl
Message-ID: <20010816151235.B20958@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20010327142836.C32602@thelonious.new.ox.ac.uk> <1010327181943.ZM14188@candle.brasslantern.com> <20010327151711.94655.qmail@web9306.mail.yahoo.com> <20010815155420.A14031@thelonious.new.ox.ac.uk> <1010815165958.ZM10425@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <1010815165958.ZM10425@candle.brasslantern.com>; from schaefer@brasslantern.com on Wed, Aug 15, 2001 at 04:59:58PM +0000
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

Bart Schaefer (schaefer@brasslantern.com) wrote:
> On Aug 15,  3:54pm, Adam Spiers wrote:
> }
> } > }    Test/ztst.zsh            :   #!/usr/local/bin/zsh -f
> } > 
> } > That should be ".../zsh -f +Z".
> } 
> } Indeed, and I believe that I've had tests misleadingly fail through
> } running `make test' before `make install' as a result of that.
> 
> You shouldn't have.  `make test' explicitly calls zsh by full path and
> passes it ztst.zsh by name.

Ahah.  Ignore that then; the failures have been fixed now anyway.

> } Shall I change it then?
> 
> I'm not sure it'll help,

Agreed, now that I know how make test works.

> as many OSs won't accept more than one argument after the command
> path when interpreting a #! line. (That's likely why you are having
> trouble with `env perl -w'.)

Gosh, looks like that applies even to a standard Linux box.  How
extraordinary.  What's the reasoning behind that, I wonder?

> } We can persuade emacs to use the right mode using the other method:
> } 
> }   # Local Variables:
> }   # mode:cperl
> }   # End:
> } 
> } should do it.
> 
> Please don't.  I find it aesthetically displeasing to have that cruft
> at the end of every file, and I hate having emacs stop during file load
> to ask whether it should pay attention to it, and it's not secure to
> simply always accept it.  I'd rather just type M-x cperl-mode if emacs
> has got it wrong.

Agreed, it is pretty nasty.  There are other elisp hacks you can solve
the problem with anyway.

> } If we use configure, presumably that would mean having (say)
> } Utils/helpfiles auto-generated from Utils/helpfiles.in?  My vote is
> } for that option.
> 
> Yes, that would be it, but my vote is still to avoid mucking with this
> in configure.  Maybe something like the following, run through the
> just-compiled zsh?

I suppose that's fine, as long as it wouldn't mess things up if you
ran it twice.  I still slightly prefer going via configure, as that
way you're not altering CVS files.  You probably have a more
convincing argument the other way though :-)


From zsh-workers-return-12235-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 12 16:58:20 2000
Return-Path: <zsh-workers-return-12235-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12650 invoked from network); 12 Jul 2000 16:58:19 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Jul 2000 16:58:19 -0000
Received: (qmail 626 invoked by alias); 12 Jul 2000 16:58:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12235
Received: (qmail 619 invoked from network); 12 Jul 2000 16:58:13 -0000
Date: Wed, 12 Jul 2000 17:57:46 +0100
From: Peter Stephenson <pws@cambridgesiliconradio.com>
Subject: Re: Bug in ${(z)...} lexing, or what?
In-reply-to: "Your message of Wed, 12 Jul 2000 12:11:40 BST."
 <0FXL00LET0FF5Y@la-la.cambridgesiliconradio.com>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FXL002CJGG9E2@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

> >   % a='[[ a = (#i)foo ]]'
> >   % print -l ${(z)a}
> >   [[
> >   a
> >   =
> >   (
> >   #i
> >   )
> >   foo
> >   ]]
> 
> Strange, I get (#i)foo on one line, even with zsh -f.  There must be some
> unexpected option dependence, but I can't see what.

That was before applying the patch (the correct behaviour).  After, I get:

[[
a
=
(
;

with interactivecomments set (which is wrong), and what Sven was reporting
without it (which isn't great).  I'd much prefer the old behaviour in this
case, but the interactivecomments variant is definitely broken.

-- 
Peter Stephenson <pws@cambridgesiliconradio.com>
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


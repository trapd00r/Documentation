From zsh-workers-return-9693-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Feb 12 16:47:32 2000
Return-Path: <zsh-workers-return-9693-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11675 invoked from network); 12 Feb 2000 16:47:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Feb 2000 16:47:31 -0000
Received: (qmail 26534 invoked by alias); 12 Feb 2000 16:47:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9693
Received: (qmail 26526 invoked from network); 12 Feb 2000 16:47:23 -0000
Message-ID: <38A58E9A.8ECEE26D@u.genie.co.uk>
Date: Sat, 12 Feb 2000 16:47:22 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.7 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: PATCH: 3.1.6-dev-18 AIX dependency fixes
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Just mod_exports added.

Are we going to get a 3.1.7 (and maybe 4.0) out soonish? The 3.1 series
seems to be quite stable to me now. Also, 3.0 seems to be very far
behind now and it might be better to have more users using the new
functionality.

Oliver


--- Src/params.bak	Sat Feb 12 13:49:32 2000
+++ Src/params.c	Sat Feb 12 13:51:36 2000
@@ -40,6 +40,7 @@
 /* Variables holding values of special parameters */
  
 /**/
+mod_export
 char **pparams,		/* $argv        */
      **cdpath,		/* $cdpath      */
      **fpath,		/* $fpath       */
--- Src/Zle/compcore.bak	Sat Feb 12 14:19:58 2000
+++ Src/Zle/compcore.c	Sat Feb 12 14:34:53 2000
@@ -47,6 +47,7 @@
 /* Non-zero if we should keep an old list. */
 
 /**/
+mod_export
 int oldlist, oldins;
 
 /* This is used to decide when the cursor should be moved to the end
of    *
@@ -59,7 +60,7 @@
 /* The match and group number to insert when starting menucompletion.  
*/
 
 /**/
-int insmnum, insgnum, insgroup, insspace;
+mod_export int insmnum, insgnum, insgroup, insspace;
 
 /* Information about menucompletion. */
 
@@ -133,12 +134,12 @@
 /* Non-zero if we have newly added matches. */
 
 /**/
-int newmatches;
+mod_export int newmatches;
 
 /* Number of permanently allocated matches and groups. */
 
 /**/
-int permmnum, permgnum, lastpermmnum, lastpermgnum;
+mod_export int permmnum, permgnum, lastpermmnum, lastpermgnum;
 
 /* The total number of matches and the number of matches to be listed.
*/
 
@@ -180,7 +181,7 @@
 /* The match counter when unambig_data() was called. */
 
 /**/
-int unambig_mnum;
+mod_export int unambig_mnum;
 
 /* Length of longest/shortest match. */
 
@@ -214,12 +215,12 @@
 /* A heap of free Cline structures. */
 
 /**/
-Cline freecl;
+mod_export Cline freecl;
 
 /* Ambiguous information. */
 
 /**/
-Aminfo ainfo, fainfo;
+mod_export Aminfo ainfo, fainfo;
 
 /* The memory heap to use for new style completion generation. */
 
@@ -2523,7 +2524,7 @@
 /* This duplicates all groups of matches. */
 
 /**/
-int
+mod_export int
 permmatches(int last)
 {
     Cmgroup g = amatches, n;
--- Src/Zle/complete.bak	Sat Feb 12 14:33:25 2000
+++ Src/Zle/complete.c	Sat Feb 12 14:33:46 2000
@@ -71,7 +71,7 @@
 Param *comprpms, *compkpms;
 
 /**/
-void
+mod_export void
 freecmlist(Cmlist l)
 {
     Cmlist n;


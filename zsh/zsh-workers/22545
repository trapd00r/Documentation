From zsh-workers-return-22545-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 11 14:49:24 2006
Return-Path: <zsh-workers-return-22545-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23627 invoked from network); 11 Jul 2006 14:49:22 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.9 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO,
	RCVD_IN_BL_SPAMCOP_NET autolearn=no version=3.1.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Jul 2006 14:49:22 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 20864 invoked from network); 11 Jul 2006 14:49:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Jul 2006 14:49:15 -0000
Received: (qmail 21464 invoked by alias); 11 Jul 2006 14:49:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22545
Received: (qmail 21455 invoked from network); 11 Jul 2006 14:49:12 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Jul 2006 14:49:12 -0000
Received: (qmail 20582 invoked from network); 11 Jul 2006 14:49:12 -0000
Received: from hu-out-0102.google.com (72.14.214.196)
  by a.mx.sunsite.dk with SMTP; 11 Jul 2006 14:49:10 -0000
Received: by hu-out-0102.google.com with SMTP id 35so2843500hue
        for <zsh-workers@sunsite.dk>; Tue, 11 Jul 2006 07:49:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=si23wl1hLhVXxAC2ghc2+sxgsraKfiXs6f0jdR00FXM0HDdO/BK+1PMe7ez3KjjHQVizeQIEcEVRFo6Wx8VBw43JK3kOzJkt7PP1KX2Havxbs8KQ+YYGbE5Oawc9CKBDlmh39JY6Q2xoZfFT4F3ZsleB/JlBwaYAIFuLyvrw3j8=
Received: by 10.35.111.14 with SMTP id o14mr6705152pym;
        Tue, 11 Jul 2006 07:49:09 -0700 (PDT)
Received: by 10.35.122.12 with HTTP; Tue, 11 Jul 2006 07:49:09 -0700 (PDT)
Message-ID: <20a807210607110749q205d2d07n5b6957098a3ca5a1@mail.gmail.com>
Date: Tue, 11 Jul 2006 10:49:09 -0400
From: "Vin Shelton" <acs@alumni.princeton.edu>
Sender: ethersoft@gmail.com
To: "Zsh hackers list" <zsh-workers@sunsite.dk>
Subject: Test issues
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: d3bfd9d4d89401c7

Greetings -

I'd like to bring up a few issues with the test scripts:

1. Since yesterday, the A04 test has been failing on my linux systems
at home (kubuntu) and at work (RHEL).  Here's the tail of
'ZTST_verbose=3 TESTNUM=A04 make test':

Running test: Using {fdvar}> syntax to open a new file descriptor
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.26465, output: /tmp/zsh.ztst.out.26465, error:
/tmp/zsh.ztst.terr.26465
make: [test] Error 127 (ignored)

Please let me know if you need more diagnostic input.

2. Peter, thanks for implementing the multibyte test.  There's a very
minor typo:

Index: Test/D07multibyte.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/D07multibyte.ztst,v
retrieving revision 1.5
diff -u -r1.5 D07multibyte.ztst
--- Test/D07multibyte.ztst      10 Jul 2006 13:08:24 -0000      1.5
+++ Test/D07multibyte.ztst      11 Jul 2006 14:17:52 -0000
@@ -12,7 +12,7 @@
     fi
   done
   if [[ -z $mb_ok ]]; then
-    ZTST_unimplemented="no UTF-8 locale or multibyte mode is not implemnted"
+    ZTST_unimplemented="no UTF-8 locale or multibyte mode is not implemented"
   else
     print Testing multibyte with locale $LANG >&8
   fi

3. Is there a relliable way to get the number of test failures?  In
case #1 above, the output of 'make check' looks like this:

/usr/local/src/zsh-2006-07-11/Test/A03quoting.ztst: starting.
/usr/local/src/zsh-2006-07-11/Test/A03quoting.ztst: all tests successful.
/usr/local/src/zsh-2006-07-11/Test/A04redirect.ztst: starting.
/usr/local/src/zsh-2006-07-11/Test/A05execution.ztst: starting.
/usr/local/src/zsh-2006-07-11/Test/A05execution.ztst: all tests successful.

Note that there's no failure message printed for A04.  What I'm
currently doing is using 'grep -c' to count 'starting' and then
counting 'skipped' and 'successful'.  Currently, my math looks like
this: #failures = #starts - #successful - #skipped.  Is there a better
way?

Peter - I think the test suite is very helpful - thanks for creating it!

Thanks,
  Vin

-- 
Whoever you are, no matter how lonely,
the world offers itself to your imagination,
calls to you like the wild geese, harsh and exciting--
over and over announcing your place
in the family of things.			Mary Oliver


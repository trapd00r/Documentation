From zsh-workers-return-13129-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Nov 08 09:41:51 2000
Return-Path: <zsh-workers-return-13129-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23092 invoked from network); 8 Nov 2000 09:41:49 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Nov 2000 09:41:49 -0000
Received: (qmail 27620 invoked by alias); 8 Nov 2000 09:41:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13129
Received: (qmail 27613 invoked from network); 8 Nov 2000 09:41:43 -0000
Date: Wed, 8 Nov 2000 10:41:41 +0100 (MET)
Message-Id: <200011080941.KAA21063@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Fri, 3 Nov 2000 15:42:30 +0000
Subject: Re: zsh-3.1.9-dev-6 crashes occassionally


Bart Schaefer wrote:

> On Nov 1, 10:41am, Sven Wischnowsky wrote:
> } 
> } Here's the second version, still not-to-be-committed.
> 
> Of course, the question is, does this actually fix Thomas's crash?

I've seen Thomas' reply.

But: is this really the question? Without such a trap-handling delay
and with the code not protecting critical code sections as it is now
(without the patch), crashes like these can always happen. And the
code is full of critical sections because there are many, many places
where we access global data structures.


However, the patch is so deep in the guts of zsh that I hesitate to
decide if it should be committed, especially if Bart says things like
the above ;-). I've been using it on my laptop ever since I posted it
and didn't have any problems but I don't use TRAPALRM(), so that means 
almost nothing (but Peter and I made sure the trap-tests still work
correctly).

Anyway, Peter has the newest version of this patch, together with his
trap-changes.


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


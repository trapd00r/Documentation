From zsh-workers-return-15888-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 28 06:34:13 2001
Return-Path: <zsh-workers-return-15888-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12845 invoked from network); 28 Sep 2001 06:34:11 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Sep 2001 06:34:11 -0000
Received: (qmail 23699 invoked by alias); 28 Sep 2001 06:34:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15888
Received: (qmail 23676 invoked from network); 28 Sep 2001 06:33:59 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Bart Schaefer'" <schaefer@brasslantern.com>, mason@primenet.com.au,
   zsh-workers@sunsite.dk
Subject: RE: Failure of Test/V01 in 4.1.0-dev-2
Date: Fri, 28 Sep 2001 10:33:48 +0400
Message-ID: <001901c147e7$87af3ab0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
In-Reply-To: <1010927154344.ZM28753@candle.brasslantern.com>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal


> }
> } It looks like zsh/zftp doesn't specify a dependency on zsh/net/tcp
> 
> Hrm, it does specify the dependency in the .mdd file, but it's not
being
> respected:
> 
> schaefer<501> zmodload zsh/zftp
> schaefer<502> zmodload -L
> zmodload zsh/main
> zmodload zsh/zutil
> zmodload zsh/compctl
> zmodload zsh/complete
> zmodload zsh/complist
> zmodload zsh/zle
> zmodload zsh/parameter
> zmodload zsh/zftp
> 
> I'm not sure what's going on here.
> 

We discussed it already. Currently there is no mechanism that allows one
*external* module to load another *external* module it depends upon. The
general problem is that it may not be possible to load module (a.k.a.
shared object) before dependent objects have been loaded which means
that dependency information must be encoded OOB. The last statement
(15776) was to simply try to do lazy loading. It means that strictly
speaking no change is needed - module can simply do require_module in
its boot routine. We may first do it for zftp/tcp dependency and if it
works (an systems that we are able to test) code to auto generate these
lines can be added to Makemod.

-andrej


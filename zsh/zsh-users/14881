From zsh-users-return-14881-mason-zsh=primenet.com.au@zsh.org Wed Feb 24 15:38:14 2010
Return-Path: <zsh-users-return-14881-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3932 invoked by alias); 24 Feb 2010 15:38:14 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14881
Received: (qmail 5 invoked from network); 24 Feb 2010 15:38:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 72.14.220.157 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=+KJQ1by2PU4oSEPhHKUdv44RnB51z3kkZVtSc2H5CQY=;
        b=sk83IRpb0HKg6i06LFGW0Rx0m5uKBpzZfysgY7wkaI6T/WGQkyPyqH126ZIoOsYfbT
         vyUyqxZjJSvQYgR3M8on0Z5FUaIYy2RpANjbTn3rKinP+UMCOJ45aAwH0mYIhRT9Lpdm
         85i9IJxuzkHX+mPyXj84BKW6kATqfHo98oEgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=BX9A/39vOo58MfsmUEsMNugHonquCTQmfIWiSh06E3FrPpj41P3l6KxL7YFrKcACma
         PkFWg6U/VY+AT553JjuegBpKZgBqCJJPU+Eq8UH4tZpcu8X0xvV7OfC2Mub68YUTcbfO
         u67Mxr428K0ZcUf5Kx2tHh454OHphyEXnCVg4=
MIME-Version: 1.0
In-Reply-To: <20100224075352.GA8456@fermat.math.technion.ac.il>
References: <20100223161302.61181.qmail@f4mail200.rediffmail.com>
	 <201002232020.49298.arvidjaar@gmail.com>
	 <20100224075352.GA8456@fermat.math.technion.ac.il>
Date: Wed, 24 Feb 2010 10:38:06 -0500
Message-ID: <17393e3e1002240738p2fd4006aud1183c0229ce10f1@mail.gmail.com>
Subject: Re: possible bug in zsh glob
From: Matt Wozniski <godlygeek@gmail.com>
To: zsh-users@zsh.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Wed, Feb 24, 2010 at 2:53 AM, Nadav Har'El <nyh@math.technion.ac.il> wro=
te:
> On Tue, Feb 23, 2010, Andrey Borzenkov wrote about "Re: possible bug in z=
sh glob":
>> On Tuesday 23 of February 2010 19:13:02 dipakgaigole wrote:
>> > *************** bash **************
>> > bash-2.05b$ ls -l *.txt *.jp
>> > ls: *.jp: No such file or directory
>> [...]
>> > #ls -l *.txt *.jp
>> > zsh: no matches found: *.jp
>>
>> setopt no_nomatch
>>
>> to get the same behaviour as in bash.
>
> Amazing! This really surprised me. I was about to answer that, "no, zsh
> behaves exactly like bash in this respect, and the way it should", when I
> suddenly realized that many years ago I added "set +o nomatch" (equivalen=
t
> to setopt no_nomatch you recommended) in my .zshrc, and since forgot abou=
t
> it :-)
>
> Is there any logical reason why zsh's default is the way it is? I.e., whe=
n
> it sees
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0ls -l *.txt *.jp
>
> And there are no *.jp, it has to stop the entire command, rather than let
> the command give you a message, like was always the case in the Bourne sh=
ell,
> ksh, and bash (without the failglob option)?
>
> I always consider what is now apparently the default zsh behavior to be
> annoying especially when you do a command like
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0scp remote:*.c .
>
> and then the shell doesn't do it, and you need to go back and quote out t=
he
> star. Why? What does this extra "beaurocracy" gain us? If the shell can
> just do "the right thing" by passing along the star, why shouldn't it?

Because the sh/ksh/default bash behavior is dangerous if you ever have
filenames containing shell metacharacters.  Consider a command like:

    rm [abc]

The sh/ksh/default bash behavior would be for that to delete any file
named either 'a', or 'b', or 'c', or, if there are no files with any
of those names, to delete the file named '[abc]'.  I, quite frankly,
find that nuts.  Not that the zsh behavior can't be annoying at times
- I'd prefer nonomatch for scp wildcards, for instance - but at least
the zsh behavior is safe.  It does what you tell it to, and aborts if
it can't.  The other shells do what you tell them to, but assume that
you told them to do the wrong thing if they can't.

~Matt


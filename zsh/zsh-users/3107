From zsh-users-return-3107-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 29 17:25:30 2000
Return-Path: <zsh-users-return-3107-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12646 invoked from network); 29 May 2000 17:25:28 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 May 2000 17:25:28 -0000
Received: (qmail 18265 invoked by alias); 29 May 2000 17:24:57 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3107
Received: (qmail 18257 invoked from network); 29 May 2000 17:24:54 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000529172446.ZM1660@candle.brasslantern.com>
Date: Mon, 29 May 2000 17:24:46 +0000
In-Reply-To: <20000529122714.B26887@br-online.de>
Comments: In reply to Andy Spiegl <zsh.Andy@spiegl.de>
        "Re: strange alias effects" (May 29, 12:27pm)
References: <20000529115637.A26887@br-online.de> 
	<1000529101300.ZM1298@candle.brasslantern.com> 
	<20000529122714.B26887@br-online.de> 
	<200005291332.PAA13192@beta.informatik.hu-berlin.de>
In-Reply-To: <200005291332.PAA13192@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: strange alias effects" (May 29,  3:32pm)
X-Mailer: Z-Mail (5.0.0 30July97)
To: ZSH User List <zsh-users@sunsite.auc.dk>
Subject: Re: strange alias effects
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 29, 12:27pm, Andy Spiegl wrote:
} Subject: Re: strange alias effects
}
} Bart Schaefer wrote,
} 
} > Did you happen to compile your dot-files with zcompile?
} No, never used that.
} And the same dot-files worked perfectly with 3.1.6.pws21.
} 
} > It's the same problem as "Bart Schaefer's rule" in FAQ 2.3

I misspoke slightly there.  It's the same as *the reason for* the rule,
which says:

 Define first those aliases you expect to use in the body of a function,
 but define the function first if the alias has the same name as the
 function.

On May 29,  3:32pm, Sven Wischnowsky wrote:
} Subject: Re: strange alias effects
}
} It was always the case that syntactical constructs like if/then/else
} and loops were parsed completely.  [...]  When it is executed, the alias
} is defined, but in this case the functions are already parsed, too.

And the effect of zcompile is that the entire file is parsed as one big
syntactic construct, so no aliases defined within the file are expanded
within the file. [*]

[*] Unless you first "source" the file to define them, and then compile
it with*out* using -U ... but that can also have unexpected results if
you have global aliases (alias -g).

Sven went on:
} It isn't special to zsh, either. All shells (have to) behave this way.

Csh doesn't, but then csh doesn't have functions.  Csh (the original one
from the old BSD Unix) parses and executes syntactic constructs in the
same pass; loops are, in effect, implemented with fseek.  It used to be
possible to create some pretty entertaining csh scripts that rewrote the
script file in place while it was executing.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


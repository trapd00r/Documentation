From zsh-users-return-9880-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 01 22:08:28 2006
Return-Path: <zsh-users-return-9880-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20240 invoked from network); 1 Feb 2006 22:08:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Feb 2006 22:08:25 -0000
Received: (qmail 67831 invoked from network); 1 Feb 2006 22:08:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Feb 2006 22:08:19 -0000
Received: (qmail 17294 invoked by alias); 1 Feb 2006 22:08:11 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9880
Received: (qmail 17278 invoked from network); 1 Feb 2006 22:08:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 1 Feb 2006 22:08:10 -0000
Received: (qmail 66745 invoked from network); 1 Feb 2006 22:08:10 -0000
Received: from 69-12-150-177.dsl.static.sonic.net (HELO ripple.fruitbat.org) (69.12.150.177)
  by a.mx.sunsite.dk with SMTP; 1 Feb 2006 22:08:06 -0000
Received: (from daemon@localhost)
	by ripple.fruitbat.org (8.10.2/8.8.8/PAC-1.3) id k11ILH427926
	for <zsh-users@sunsite.dk>; Wed, 1 Feb 2006 10:21:17 -0800
Received: from ming.fruitbat.org(192.168.55.2) by ripple.fruitbat.org via smap (V2.1/2.1+anti-relay+anti-spam)
	id xma027924; Wed, 1 Feb 06 10:20:20 -0800
Received: from gremlin.fruitbat.org (IDENT:202@gremlin.fruitbat.org [192.168.55.4])
	by ming.fruitbat.org (8.12.10/8.10.2/PAC-1.6) with ESMTP id k11IKI6V011269
	for <zsh-users@sunsite.dk>; Wed, 1 Feb 2006 10:20:18 -0800
Date: Wed, 1 Feb 2006 10:20:18 -0800 (PST)
From: "Peter A. Castro" <doctor@fruitbat.org>
To: list zsh-users <zsh-users@sunsite.dk>
Subject: Re: history trouble
In-Reply-To: <20060201021004.GK5684@fsst.voodoo.lan>
Message-ID: <Pine.LNX.4.63.0602010955410.4099@gremlin.fruitbat.org>
References: <20060128074156.GA19690@thomas-richter.de>
 <1060128155351.ZM730@candle.brasslantern.com> <20060128190424.GC19690@thomas-richter.de>
 <1060128203236.ZM1042@candle.brasslantern.com> <20060129162920.GA32595@thomas-richter.de>
 <Pine.LNX.4.63.0601311548570.4099@gremlin.fruitbat.org>
 <20060201021004.GK5684@fsst.voodoo.lan>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed

On Wed, 1 Feb 2006, Frank Terbeck wrote:

> Peter A. Castro <doctor@fruitbat.org> wrote:
>> On Sun, 29 Jan 2006, Thomas Richter wrote:
>>
>> Greetings, Thomas,
>>   Can you verify something:
>>   Start a shell, enter a few commands, exit the shell, then look at the
>> history file and see if your commands were added to it?  If so, then
>> it's not a matter of your commands not being written to history, but that
>> they are being buffered and, upon exit, flushed to file.
>>
>> Try this:
>>   setopt inc_append_history
>
>> From Thomas' original posting:
>
>> I can write to the history with
>>  setopt inc_append_history
>> but I want the file read!

Yes, I did see that, however, I wanted to make sure that this option was
really set and that history was been appended to.  Because, if that is
the case, then the history file can certainly be accessed (and read
from).

I guess I don't quite understand the problem.  When you (Thomas) say you
can't read history do you mean you can't do any history functions?  Like,
with zle loaded, scroll through interactive history?  At all?

So, if you start a fresh shell session (with zsh -l -i), you can't
retrieve any previous commands?  If you enter a few commands, can you
retrieve them or not?   Can you 'echo $history'?

I must say that HISTSIZE (and SAVEHIST) are ridiculously large (99999 and
9999).  Setting these to something smaller might be worth a try.

Do you have anything special in any of the /etc/z* files?

Lastly, what if you start zsh from a dos prompt instead of from a bash
shell?

> Regards, Frank

-- 
Peter A. Castro <doctor@fruitbat.org> or <Peter.Castro@oracle.com>
 	"Cats are just autistic Dogs" -- Dr. Tony Attwood


From zsh-users-return-9608-mason-zsh=primenet.com.au@sunsite.dk Wed Nov 02 07:13:01 2005
Return-Path: <zsh-users-return-9608-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5629 invoked from network); 2 Nov 2005 07:12:59 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?iih7+yM97qQoMRz/PtDWGDmnglooSjo9?@203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 2 Nov 2005 07:12:59 -0000
Received: (qmail 3327 invoked from network); 2 Nov 2005 07:12:57 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by proxy.melb.primenet.com.au with SMTP; 2 Nov 2005 07:12:57 -0000
Received: (qmail 78583 invoked from network); 2 Nov 2005 07:12:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Nov 2005 07:12:51 -0000
Received: (qmail 24837 invoked by alias); 2 Nov 2005 07:12:44 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9608
Received: (qmail 24827 invoked from network); 2 Nov 2005 07:12:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 2 Nov 2005 07:12:43 -0000
Received: (qmail 77395 invoked from network); 2 Nov 2005 07:12:43 -0000
Received: from david.siemens.de (192.35.17.14)
  by a.mx.sunsite.dk with SMTP; 2 Nov 2005 07:12:41 -0000
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.12.6/8.12.6) with ESMTP id jA27CfUC012600
	for <zsh-users@sunsite.dk>; Wed, 2 Nov 2005 08:12:41 +0100
Received: from mhpahx2c.ww002.siemens.net (mhpahx2c.mch.sbs.de [139.25.165.55])
	by mail1.siemens.de (8.12.6/8.12.6) with ESMTP id jA27Cfj0015778
	for <zsh-users@sunsite.dk>; Wed, 2 Nov 2005 08:12:41 +0100
Received: from MCHP7R6A.ww002.siemens.net ([139.25.131.164]) by mhpahx2c.ww002.siemens.net with Microsoft SMTPSVC(6.0.3790.0);
	 Wed, 2 Nov 2005 08:12:40 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: SOLVED! ( "here" document broken? (New findings))
Date: Wed, 2 Nov 2005 08:12:40 +0100
Message-ID: <6F0CB04509C11D46A54232E852E390AC44B9B2@MCHP7R6A.ww002.siemens.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SOLVED! ( "here" document broken? (New findings))
Thread-Index: AcXb0jByquwPlCGnSGuxLsSs5a4cNgDqOusw
From: "Com MN PG P E B Consultant 3" <mn-pg-p-e-b-consultant-3.com@siemens.com>
To: "zsh-users Mailinglist" <zsh-users@sunsite.dk>
X-OriginalArrivalTime: 02 Nov 2005 07:12:40.0540 (UTC) FILETIME=[CFD049C0:01C5DF7C]
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,PLING_QUERY 
	autolearn=no version=3.0.4

Thank you for all the attention to my problem. I finally was able to
track
down the fault.=20

First I should explain my last message, why suddenly "here" documents
even did
not work with zsh -f. How blind can a man be!!!! You see: For technical
reason,
I use several interactive shells in different windows - zsh, bash and
tcsh.
I did not care from which shell I invoked my zsh scripts, because I
thought this
were not important - after all, the shell script has a #! line and hence
should
not care from which shell it was executed.

I was wrong. I found that the "here" testscripts do not run when called
from an
interactive zsh, but run well when called from interactive bash or tcsh,
and this
was irrespective of flags such as -f. This means the culprit must be in
the=20
environment (which is of course inherited by zsh).=20

There is exactly one setting in my invironment which is different from
an interactive
zsh to that of my bash and tcsh environments, and this is the line

  export TMPPREFIX=3D/tmp/zsh_temporaries/file

Even when I call a script with #!/bin/zsh -f, it sees the TMPPREFIX
environment variable,
which happens to be set whenever I am invoking that script from an
interactive zsh.
When the zsh Script was called from an interactive bash or tcsh,
TMPPREFIX happened
to be undefined.

My mistake was to assume that the directory mentioned in TMPPREFIX would
be created
by zsh automatically, but this is not the case (and the manual does not
claim it either
anyway, so this is clearly my fault). I have changed the line to

  export TMPPREFIX=3D/tmp/zsh_temporary_file

and now everything runs well.

Thank you for all of you helping, and sorry that I put you on the wrong
track.....

Ronald


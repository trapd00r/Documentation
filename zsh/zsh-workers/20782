From zsh-workers-return-20782-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 03 17:14:19 2005
Return-Path: <zsh-workers-return-20782-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14404 invoked from network); 3 Feb 2005 17:14:17 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Feb 2005 17:14:17 -0000
Received: (qmail 38947 invoked from network); 3 Feb 2005 17:14:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Feb 2005 17:14:07 -0000
Received: (qmail 16491 invoked by alias); 3 Feb 2005 17:14:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20782
Received: (qmail 16481 invoked from network); 3 Feb 2005 17:14:04 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Feb 2005 17:14:04 -0000
Received: (qmail 38597 invoked from network); 3 Feb 2005 17:13:31 -0000
Received: from unknown (HELO mailsweeperjp.CSR.COM) (202.214.225.228)
  by a.mx.sunsite.dk with SMTP; 3 Feb 2005 17:13:27 -0000
Received: from exchangejp.csr.com (unverified) by mailsweeperjp.CSR.COM
 (Content Technologies SMTPRS 4.3.1) with ESMTP id <T6ee793300ac0a879016bc@mailsweeperjp.CSR.COM> for <zsh-workers@sunsite.dk>;
 Fri, 4 Feb 2005 02:19:45 +0900
Received: from exchange03.csr.com ([10.100.137.60]) by exchangejp.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 3 Feb 2005 17:13:30 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 3 Feb 2005 17:10:22 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j13HAS5D005952
	for <zsh-workers@sunsite.dk>; Thu, 3 Feb 2005 17:10:28 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j13HASYI005949
	for <zsh-workers@sunsite.dk>; Thu, 3 Feb 2005 17:10:28 GMT
Message-Id: <200502031710.j13HASYI005949@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: 4.2.4 failure on MacOS X 
In-reply-to: <1050203162852.ZM14033@candle.brasslantern.com> 
References: <200502031615.j13GFnuc005915@news01.csr.com> <1050203162852.ZM14033@candle.brasslantern.com>
Date: Thu, 03 Feb 2005 17:10:27 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 03 Feb 2005 17:10:22.0507 (UTC) FILETIME=[3EDA2FB0:01C50A13]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Bart Schaefer wrote:
>> gcc -Wl,-x   -o zsh main.o  `cat stamp-modobjs`   -L/sw/lib -lpcre -ldl 
>> -ltinfo -lm  -lc
>> ld: Undefined symbols:
>> _libiconv
>> _libiconv_close
>> _libiconv_open
> 
> I'd like to know what happens if it's compiled without pcre.  I was a bit
> leery when I saw that "-L" option being inserted by pcre-config, and I
> wonder if it's not a library ordering issue (e.g. -ldl should come before
> -lpcre or some such).

Could be similar, but I don't think it's quite that.  I can see libiconv
in /sw/lib on ppc-sx2.cf.sourceforge.net, but there's no pcre there.
-liconv should presumably be present to get it to link properly; the
missing symbols do seem to be there.  It's possible the pcre bit is
somehow getting rid of -liconv.  I don't see how that could happen,
however.  The line output into configure is simply

if test x$enable_pcre = xyes; then
  LIBS="`pcre-config --libs` $LIBS"
fi

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited. 
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


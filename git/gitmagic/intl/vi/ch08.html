<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Chương&nbsp;8.&nbsp;Bí Quyết của Git</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="ch07.html" title=
  "Chương&nbsp;7.&nbsp;Trở Thành Kiện Tướng">
  <link rel="next" href="ch09.html" title=
  "Chương&nbsp;9.&nbsp;Phụ lục A: Hạn chế của Git">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href="index.html">Lời nói
          đầu</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_l%E1%BB%9Di_c%E1%BA%A3m_%C6%A1n">Lời cảm
            ơn!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_gi%E1%BA%A5y_ph%C3%A9p_s%E1%BB%AD_d%E1%BB%A5ng">
            Giấy phép sử dụng</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1. Giới
          thiệu</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_c%C3%B4ng_vi%E1%BB%87c_gi%E1%BB%91ng_nh%C6%B0_tr%C3%B2_ch%C6%A1i">
            Công Việc giống như Trò Chơi</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_qu%E1%BA%A3n_l%C3%BD_m%C3%A3_ngu%E1%BB%93n">
            Quản Lý Mã Nguồn</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_h%E1%BB%87_th%E1%BB%91ng_ph%C3%A2n_t%C3%A1n">
            Hệ Thống Phân Tán</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_quan_ni%E1%BB%87m_c%E1%BB%95_h%E1%BB%A7">Quan
            Niệm Cổ Hủ</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_xung_%C4%91%E1%BB%99t_khi_tr%E1%BB%99n">Xung
            Đột Khi Trộn</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Các Thủ
          Thuật Cơ Bản</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_ghi_l%E1%BA%A1i_tr%E1%BA%A1ng_th%C3%A1i">Ghi
            lại Trạng thái</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_th%C3%AAm_x%C3%B3a_%C4%91%E1%BB%95i_t%C3%AAn">
            Thêm, Xóa, Đổi Tên</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_ch%E1%BB%A9c_n%C4%83ng_undo_redo">Chức Năng
            Undo/Redo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_s%E1%BB%B1_quay_l%E1%BA%A1i">Sự quay
            lại</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%E1%BA%A1o_nh%E1%BA%ADt_k%C3%BD_c%C3%A1c_thay_%C4%91%E1%BB%95i">
            Tạo Nhật Ký các thay đổi</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%E1%BA%A3i_v%E1%BB%81_c%C3%A1c_t%E1%BB%87p_tin">
            Tải về các Tệp tin</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_th%E1%BB%AD_nghi%E1%BB%87m">Thử
            Nghiệm</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_xu%E1%BA%A5t_b%E1%BA%A3n">Xuất
            Bản</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%C3%B4i_%C4%91%C3%A3_l%C3%A0m_%C4%91%C6%B0%E1%BB%A3c_g%C3%AC">
            Tôi Đã Làm Được Gì?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_b%C3%A0i_t%E1%BA%ADp">Bài
            Tập</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Nhân
          Bản</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_%C4%91%E1%BB%93ng_b%E1%BB%99_h%C3%B3a_c%C3%A1c_m%C3%A1y_t%C3%ADnh">
            Đồng bộ hóa Các Máy tính</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_qu%E1%BA%A3n_l%C3%BD_theo_c%C3%A1ch_c%C5%A9">
            Quản lý theo cách Cũ</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_m%C3%A3_ngu%E1%BB%93n_ri%C3%AAng_t%C6%B0">Mã
            nguồn riêng tư</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_kho_thu%E1%BA%A7n">Kho
            thuần</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_ng%C6%B0%E1%BB%A3c_v%E1%BB%9Bi_pull">Push
            ngược với pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_r%E1%BA%BD_nh%C3%A1nh_m%E1%BB%99t_d%E1%BB%B1_%C3%A1n">
            Rẽ Nhánh một Dự Án</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_sao_l%C6%B0u_kh%C3%B4ng_gi%E1%BB%9Bi_h%E1%BA%A1n">
            Sao Lưu Không Giới Hạn</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_l%C3%A0m_nhi%E1%BB%81u_vi%E1%BB%87c_c%C3%B9ng_l%C3%BAc">
            Làm nhiều việc cùng lúc</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_song_h%C3%A0nh_c%C3%B9ng_c%C3%A1c_h%E1%BB%87_th%E1%BB%91ng_scm_kh%C3%A1c">
            Song Hành cùng các hệ thống SCM khác</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_t%E1%BA%A1i_sao_t%C3%B4i_s%E1%BB%AD_d%E1%BB%A5ng_git">
            Tại sao Tôi sử dụng Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Thủ Thuật
          Tạo Nhánh</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_n%C3%BAt_%C4%91i%E1%BB%81u_khi%E1%BB%83n">Nút
            Điều Khiển</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_b%E1%BA%A3n_nh%C3%A1p">Bản
            Nháp</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_s%E1%BB%ADa_nhanh">Sửa
            Nhanh</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_tr%E1%BB%99n">Trộn</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_l%C3%A0m_vi%E1%BB%87c_li%C3%AAn_t%E1%BB%A5c">
            Làm Việc Liên Tục</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_c%E1%BA%A3i_t%E1%BB%95_l%E1%BA%A1i_s%E1%BB%B1_pha_tr%E1%BB%99n">
            Cải Tổ Lại Sự Pha Trộn</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_qu%E1%BA%A3n_l%C3%BD_c%C3%A1c_nh%C3%A1nh">Quản
            Lý Các Nhánh</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_nh%C3%A1nh_t%E1%BA%A1m">Nhánh
            Tạm</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_l%C3%A0m_theo_c%C3%A1ch_c%E1%BB%A7a_m%C3%ACnh">
            Làm Theo Cách Của Mình</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Bài Học về
          Lịch Sử</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_d%E1%BB%ABng_l%E1%BA%A1i_s%E1%BB%ADa_ch%E1%BB%AFa">
            Dừng Lại Sửa Chữa</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_v%C3%A0_sau_%C4%91%C3%B3_l%C3%A0_nhi%E1%BB%81u_l%E1%BA%A7n">
            … Và Sau đó là Nhiều Lần</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_thay_%C4%91%E1%BB%95i_ri%C3%AAng_s%E1%BA%AFp_x%E1%BA%BFp_sau">
            Thay Đổi Riêng Sắp Xếp Sau</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_vi%E1%BA%BFt_l%E1%BA%A1i_l%E1%BB%8Bch_s%E1%BB%AD">
            Viết Lại Lịch Sử</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_t%E1%BB%B1_t%E1%BA%A1o_l%E1%BB%8Bch_s%E1%BB%AD">
            Tự Tạo Lịch Sử</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_v%E1%BB%8B_tr%C3%AD_n%C3%A0o_ph%C3%A1t_sinh_l%E1%BB%97i">
            Vị Trí Nào Phát Sinh Lỗi?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_ai_%C4%91%C3%A3_l%C3%A0m_n%C3%B3_sai">Ai Đã
            Làm Nó Sai?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_kinh_nghi%E1%BB%87m_ri%C3%AAng">Kinh Nghiệm
            Riêng</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Đa Người
          Dùng</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_t%C3%B4i_l%C3%A0_ai">Tôi Là
            Ai?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_th%C3%B4ng_qua_ssh_http">Git Thông Qua
            SSH, HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_th%C3%B4ng_qua_m%E1%BB%8Di_th%E1%BB%A9">
            Git Thông Qua Mọi Thứ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_v%C3%A1_s%E1%BB%B1_th%E1%BB%8Bnh_h%C3%A0nh_to%C3%A0n_c%E1%BA%A7u">
            Vá: Sự Thịnh Hành Toàn Cầu</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_r%E1%BA%A5t_ti%E1%BA%BFc_t%C3%B4i_%C4%91%C3%A3_chuy%E1%BB%83n_%C4%91i">
            Rất tiếc! Tôi đã chuyển đi</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_nh%C3%A1nh_tr%C3%AAn_m%E1%BA%A1ng">Nhánh
            Trên Mạng</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%C4%91a_m%C3%A1y_ch%E1%BB%A7">Đa Máy
            chủ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_s%E1%BB%9F_th%C3%ADch_ri%C3%AAng_c%E1%BB%A7a_t%C3%B4i">
            Sở Thích Riêng Của Tôi</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Trở Thành
          Kiện Tướng</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_ph%C3%A1t_h%C3%A0nh_m%C3%A3_ngu%E1%BB%93n">Phát
            hành Mã Nguồn</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ch%E1%BB%89_commit_nh%E1%BB%AFng_g%C3%AC_thay_%C4%91%E1%BB%95i">
            Chỉ Commit Những Gì Thay Đổi</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_l%E1%BA%A7n_commit_n%C3%A0y_nhi%E1%BB%81u_qu%C3%A1">
            Lần commit này Nhiều Quá!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_m%E1%BB%A5c_l%E1%BB%A5c_v%C3%B9ng_tr%E1%BA%A1ng_th%C3%A1i_c%E1%BB%A7a_git">
            Mục Lục: Vùng trạng thái của Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%C4%91%E1%BB%ABng_qu%C3%AAn_head_c%E1%BB%A7a_m%C3%ACnh">
            Đừng Quên HEAD Của Mình</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_s%C4%83n_t%C3%ACm_head">Săn
            tìm-HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_x%C3%A2y_d%E1%BB%B1ng_tr%C3%AAn_git">Xây
            Dựng trên Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_c%E1%BB%A9_phi%C3%AAu_l%C6%B0u">Cứ Phiêu
            Lưu</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ng%C4%83n_ng%E1%BB%ABa_commit_sai">Ngăn
            Ngừa Commit Sai</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Bí Quyết của
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_t%C3%ADnh_%E1%BA%A9n">Tính
            Ẩn</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_to%C3%A0n_v%E1%BA%B9n_d%E1%BB%AF_li%E1%BB%87u">
            Toàn Vẹn Dữ Liệu</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_th%C3%B4ng_minh">Thông Minh</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_m%E1%BB%A5c_l%E1%BB%A5c">Mục
            Lục</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_ngu%E1%BB%93n_g%E1%BB%91c_c%E1%BB%A7a_git">Nguồn
            Gốc của Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_c%C6%A1_s%E1%BB%9F_d%E1%BB%AF_li%E1%BB%87u">
            Đối tượng Cơ Sở Dữ Liệu</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_blob">Đối
            Tượng Blob</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_tree">Đối
            Tượng Tree</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_l%E1%BA%A7n_commit">Lần
            Commit</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_kh%C3%B3_ph%C3%A2n_bi%E1%BB%87t_%C4%91%C6%B0%E1%BB%A3c_s%E1%BB%B1_th%E1%BA%A7n_k%E1%BB%B3">
            Khó Phân Biệt Được sự Thần Kỳ</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch09.html">9. Phụ lục A:
          Hạn chế của Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch09.html#_%C4%91i%E1%BB%83m_y%E1%BA%BFu_sha1">Điểm
            Yếu SHA1</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_c%C3%A1c_t%E1%BB%87p_tin_kh%C3%B4ng_li%C3%AAn_quan">
            Các Tệp tin Không liên quan</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_ai_s%E1%BB%ADa_v%C3%A0_s%E1%BB%ADa_g%C3%AC">
            Ai Sửa và Sửa gì?</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l%E1%BB%8Bch_s%E1%BB%AD_t%E1%BB%87p_tin">Lịch
            Sử Tệp Tin</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_kh%E1%BB%9Fi_t%E1%BA%A1o_b%E1%BA%A3n_sao">Khởi
            tạo Bản Sao</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_c%C3%A1c_d%E1%BB%B1_%C3%A1n_hay_thay_%C4%91%E1%BB%95i">
            Các Dự Án Hay Thay Đổi</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_b%E1%BB%99_%C4%91%E1%BA%BFm">Bộ
            Đếm</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_v%E1%BB%9Bi_th%C6%B0_m%E1%BB%A5c_r%E1%BB%97ng">
            Với Thư Mục Rỗng</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l%E1%BA%A7n_commit_kh%E1%BB%9Fi_t%E1%BA%A1o">
            Lần Commit Khởi tạo</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_giao_di%E1%BB%87n_l%E1%BA%ADp_l%E1%BB%9D">Giao
            diện Lập lờ</a></span></li>
          </ul>
        </li>

        <li><span class="chapter"><a href="ch10.html">10. Phụ lục
        B: Dịch Bản Hướng Dẫn Này</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title=
  "Chương&nbsp;8.&nbsp;Bí Quyết của Git">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_b%C3%AD_quy%E1%BA%BFt_c%E1%BB%A7a_git"></a>Chương&nbsp;8.&nbsp;Bí
          Quyết của Git</h2>
        </div>
      </div>
    </div>

    <p>Chúng ta mổ xẻ để hiểu được làm thế nào mà Git có thể thi
    hành kỳ diệu như vậy. Tôi sẽ không thể nói quá chi tiết được.
    Nếu bạn muốn có được sự mô tả chỉ tiết thì hãy đọc <a class=
    "ulink" href="http://schacon.github.com/git/user-manual.html"
    target="_top">sổ tay hướng dẫn sử dụng Git</a>.</p>

    <div class="section" title="Tính Ẩn">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_t%C3%ADnh_%E1%BA%A9n"></a>Tính Ẩn</h2>
          </div>
        </div>
      </div>

      <p>Git làm việc có vẻ kín đáo? Chỉ cần nói riêng về việc sử
      dụng lệnh commit và merge, bạn có thể làm việc mà không cần
      biết đến sự tồn tại của hệ thống quản lý mã nguồn. Cho đến
      khi bạn cần nó, và cho đến khi bạn vui sướng vì Git đã trông
      coi mã nguồn cho bạn trong suốt thời gian qua.</p>

      <p>Các hệ thống quản lý mã nguồn khác ép buộc bạn luôn luôn
      phải tranh đấu với thói quan liêu. Quyền truy cập của các tệp
      tin có thể là chỉ cho phép đọc trừ phi bạn nói rõ với máy chủ
      trung tâm là các tệp tin nào bạn muốn chỉnh sửa. Tốc độ làm
      việc của phần lớn các lệnh sẽ tỷ lệ nghịch với số lượng người
      sử dụng. Mọi công việc sẽ đình trệ khi mạng máy tính hay máy
      chủ ngừng hoạt động.</p>

      <p>Đối lập với hạn chế trên, Git đơn giản giữ lịch sử của dự
      án của bạn tại thư mục <code class="literal">.git</code>
      trong thư mục làm việc của bạn. Đây là bản sao lịch sử của
      riêng bạn, do vậy bạn có thể làm việc không cần mạng cho đến
      khi cần truyền thông với những người khác. Bạn có toàn quyền
      quyết định với các tệp tin của mình bởi vì Git có thể tạo lại
      trạng thái đã ghi lại từ <code class="literal">.git</code>
      bất kỳ lúc nào một cách dễ dàng.</p>
    </div>

    <div class="section" title="Toàn Vẹn Dữ Liệu">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_to%C3%A0n_v%E1%BA%B9n_d%E1%BB%AF_li%E1%BB%87u"></a>Toàn
            Vẹn Dữ Liệu</h2>
          </div>
        </div>
      </div>

      <p>Phần lớn mọi người sử dụng phương pháp mã hóa để giữ cho
      thông tin của mình không bị nhòm ngó, nhưng có thứ quan trọng
      không kém đó là giữ cho thông tin của mình được toàn vẹn.
      Chính việc sử dụng hàm băm mã hóa đã làm ngăn ngừa sự sai
      hỏng dữ liệu do rủi ro hay ác ý.</p>

      <p>Giá trị SHA1 có thể coi như là một số định danh 160-bit
      không trùng lắp cho mỗi chuỗi ký tự bạn dùng trong đời sống
      của mình. Trên thực tế nó còn làm được nhiều hơn thế: nó có
      thể thực hiện điều trên với mọi chuỗi ký tự mà mọi người có
      thể sử dụng trong suốt cuộc đời của mình.</p>

      <p>Bản thân giá trị SHA1 cũng là một chuỗi ký tự, chúng ta có
      thể băm chuỗi có chứa giá trị băm khác. Khả năng quan sát đơn
      giản này cực kỳ hữu dụng: tra cứu <span class=
      "emphasis"><em>hash chains</em></span> (tra cứu theo các
      chuỗi móc xích với nhau bằng giá trị băm). Sau này chúng ta
      sẽ thấy làm cách nào Git sử dụng nó để mà đảm bảo tính toàn
      vẹn của dữ liệu.</p>

      <p>Tóm lại, Git lưu giữ dữ liệu của bạn trong thư mục con
      <code class="literal">.git/objects</code>, thay vì sử dụng
      tên tệp tin như thông thường, bạn sẽ chỉ nhìn thấy ID của
      chúng. Bằng cách sử dụng ID để làm tên tệp tin, cũng tốt như
      là cách sử dụng kỹ thuật lockfiles (khóa tệp tin) và
      timestamp (theo dõi thời gian của tệp tin), Git biến hệ thống
      tệp tin thông thường bất kỳ nào trở thành một cơ sở dữ liệu
      hiệu quả và mạnh mẽ.</p>
    </div>

    <div class="section" title="Thông Minh">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_th%C3%B4ng_minh"></a>Thông
            Minh</h2>
          </div>
        </div>
      </div>

      <p>Làm thể nào mà Git biết bạn đã đổi tên một tệp tin, dù là
      bạn chẳng bao giờ đề cập đến điều này một cách rõ ràng? Chắc
      chắn rồi, bạn có lẽ đã chạy lệnh <span class=
      "strong"><strong>git mv</strong></span>, nhưng nó chính xác
      giống hệt như việc chạy lệnh <span class="strong"><strong>git
      rm</strong></span> sau đó là lệnh <span class=
      "strong"><strong>git add</strong></span>.</p>

      <p>Git khám phá ra cách truy tìm các tệp tin đã được đổi tên
      hay sao chép giữa các phiên bản liên tiếp. Trên thực tế, nó
      có thể tìm ra từng đoạn mã nguồn đã bị di chuyển hay sao chép
      giữa các tệp tin! Dẫu cho nó không thể xử lý được mọi trường
      hợp, nó làm khá tốt, và đặc tính này luôn luôn được phát
      triển. Nếu nó không làm việc với bạn, hãy thử bật các tùy
      chọn dành cho việc phát hiện sự sao chép, và nên cất nhắc đến
      việc cập nhật.</p>
    </div>

    <div class="section" title="Mục Lục">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_m%E1%BB%A5c_l%E1%BB%A5c"></a>Mục Lục</h2>
          </div>
        </div>
      </div>

      <p>Với mọi tệp tin được theo dõi, Git ghi lại các thông tin
      như là kích thước, thời gian tạo và lần cuối sửa đổi trong
      một tệp tin được biết đến là một mục lục <span class=
      "emphasis"><em>index</em></span>. Để xác định rõ một tệp tin
      có bị thay đổi hay không, Git so sánh nó ở thời điểm hiện tại
      với phần lưu giữ trong bộ nhớ. Nếu chúng giống nhau, thế thì
      Git có thể bỏ qua việc đọc tệp tin đó lại lần nữa.</p>

      <p>Bởi vì gọi stat nhanh hơn đáng kể so với đọc tệp tin, nếu
      bạn chỉ chỉnh sửa vài tệp tin, Git có thể cập nhật trạng thái
      của nó cực kỳ nhanh chóng.</p>

      <p>Chúng ta đã nói trước rằng mục lục (index) là vùng làm
      việc của trạng thái. Tại sao lại là một chùm tệp tin stat
      vùng stage? Bởi vì lệnh add đặt các tệp tin vào trong cơ sở
      dữ liệu của Git và cập nhật những stats này, trong lúc lệnh
      commit được thực hiện, mà không có tùy chọn, tạo ra một
      commit trên cơ sở chỉ trên các stats và các tệp tin đã sẵn có
      trong cơ sở dữ liệu.</p>
    </div>

    <div class="section" title="Nguồn Gốc của Git">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_ngu%E1%BB%93n_g%E1%BB%91c_c%E1%BB%A7a_git"></a>Nguồn
            Gốc của Git</h2>
          </div>
        </div>
      </div>

      <p><a class="ulink" href="http://lkml.org/lkml/2005/4/6/121"
      target="_top">Linux Kernel Mailing List post</a> này miêu tả
      các sự kiện nối tiếp nhau về Git. Toàn bộ tuyến này chỉ dành
      cho các sử gia đam mê Git.</p>
    </div>

    <div class="section" title="Đối tượng Cơ Sở Dữ Liệu">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_c%C6%A1_s%E1%BB%9F_d%E1%BB%AF_li%E1%BB%87u">
            </a>Đối tượng Cơ Sở Dữ Liệu</h2>
          </div>
        </div>
      </div>

      <p>Mỗi một phiên bản của dữ liệu của bạn được giữ trong
      <span class="emphasis"><em>đối tượng cơ sở dữ
      liệu</em></span> (object database), mà nó nằm trong thư mục
      con <code class="literal">.git/objects</code>; cái khác nằm
      trong thư mục <code class="literal">.git/</code> lưu giữ ít
      dữ liệu hơn: mục lục, tên các nhánh, các thẻ tag, các tùy
      chọn cấu hình, nhật ký, vị trí hiện tại của head của lần
      commit, và những thứ tương tự như thế. Đối tượng cơ sở dữ
      liệu cho đến bây giờ vẫn là phần tử cơ bản xuất sắc nhất, và
      là cội nguồn sức mạnh của Git.</p>

      <p>Mỗi tệp tin trong <code class=
      "literal">.git/objects</code> là một <span class=
      "emphasis"><em>đối tượng</em></span>. Ở đây có 3 loại đối
      tượng liên quan đến chúng ta: đối tượng <span class=
      "emphasis"><em>blob</em></span>, đối tượng cây <span class=
      "emphasis"><em>tree</em></span>, và đối tượng <span class=
      "emphasis"><em>commit</em></span>.</p>
    </div>

    <div class="section" title="Đối Tượng Blob">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_blob"></a>Đối
            Tượng Blob</h2>
          </div>
        </div>
      </div>

      <p>Đầu tiên, hãy tạo một tệp tin bất kỳ. Đặt cho nó một cái
      tên, tên gì cũng được. Trong một thư mục rỗng:</p>
      <pre class="literallayout">
$ echo sweet &gt; YOUR_FILENAME
$ git init
$ git add .
$ find .git/objects -type f
</pre>

      <p>Bạn sẽ thấy <code class=
      "literal">.git/objects/aa/823728ea7d592acc69b36875a482cdf3fd5c8d</code>.</p>

      <p>Làm sao mà tôi biết được tệp tin khi không thấy tên của
      nó? Đó là bởi vì đó là giá trị băm SHA1 của:</p>
      <pre class="literallayout">
"blob" SP "6" NUL "sweet" LF
</pre>

      <p>là aa823728ea7d592acc69b36875a482cdf3fd5c8d, với SP là
      khoảng trắng, NUL là byte có giá trị bằng 0 và LF ký tự xuống
      dòng. Bạn có thể xác minh lại bằng lệnh sau:</p>
      <pre class="literallayout">
$ printf "blob 6\000sweet\n" | sha1sum
</pre>

      <p>Git sử dụng cách <span class="emphasis"><em>lấy nội dung
      để làm tên cho tệp tin</em></span>: tệp tin không được lưu
      trữ như theo tên của chúng, mà bằng giá trị băm dữ liệu mà
      chúng chứa, trong tệp tin chúng ta gọi là một <span class=
      "emphasis"><em>đối tượng blob</em></span>. Chúng ta có thể
      nghĩ giá trị băm như là một định danh duy nhất cho nội dung
      của tệp tin, do vậy ta có tên tệp tin được định danh bởi nội
      dung của nó. Phần khởi đầu <code class="literal">blob
      6</code> đơn thuần chỉ là phần đầu để thể hiện kiểu của đối
      tượng và độ dài của nó tính bằng byte; việc làm này làm đơn
      giản hóa việc vận hành bên trong Git.</p>

      <p>Đến đây tôi có thể dễ dàng đoán được bạn nghĩ gì. Tên của
      tệp tin là không thích hợp: chỉ khi có dữ liệu bên trong được
      sử dụng để xây dựng nên đối tượng blob.</p>

      <p>Bạn có lẽ sẽ kinh ngạc với những gì xảy ra với các tệp tin
      có cùng nội dung. Hãy thử thêm một bản sao một tệp tin nào đó
      của bạn, với bất kỳ một cái tên nào cũng được. Nội dung của
      <code class="literal">.git/objects</code> ở tại cùng một chỗ
      cho dù bạn thêm vào bao nhiêu lần đi chăng nữa. Git chỉ lưu
      giữ dữ liệu một lần duy nhất.</p>

      <p>Nhưng dẫu sao, các tệp tin nằm trong <code class=
      "literal">.git/objects</code> đã bị nén lại theo chuẩn zlib
      do vậy bạn không thể xem chúng một cách trực tiếp được. Đọc
      chúng thông qua <a class="ulink" href=
      "http://www.zlib.net/zpipe.c" target="_top">zpipe -d</a>, hay
      gõ:</p>
      <pre class="literallayout">
$ git cat-file -p aa823728ea7d592acc69b36875a482cdf3fd5c8d
</pre>

      <p>lệnh này trình bày đối tượng được cho ở dạng dễ đọc trên
      màn hình.</p>
    </div>

    <div class="section" title="Đối Tượng Tree">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_tree"></a>Đối
            Tượng Tree</h2>
          </div>
        </div>
      </div>

      <p>Nhưng mà tên tệp tin ở đâu? Chúng phải được lưu giữ ở đâu
      đó chứ. Git lấy tên tệp tin trong quá trình commit:</p>
      <pre class="literallayout">
$ git commit  # Gõ chú thích.
$ find .git/objects -type f
</pre>

      <p>Bạn sẽ thấy ba đối tượng. Ở thời điểm này tôi không thể
      nói hai tệp tin mới này là cái gì, hãy nghĩ nó là một phần
      của tên tệp tin bạn đang xét. Chúng ta sẽ xuất phát từ giả
      định bạn chọn “rose”. Nếu bạn không làm thế, bạn có thể viết
      lại lịch sử để làm cho nó giống như bạn đã làm thế:</p>
      <pre class="literallayout">
$ git filter-branch --tree-filter 'mv YOUR_FILENAME rose'
$ find .git/objects -type f
</pre>

      <p>Bây giờ bạn có lẽ nhìn thấy tệp tin <code class=
      "literal">.git/objects/05/b217bb859794d08bb9e4f7f04cbda4b207fbe9</code>,
      bởi vì đây là giá trị băm SHA1 của nội dung của nó:</p>
      <pre class="literallayout">
"tree" SP "32" NUL "100644 rose" NUL 0xaa823728ea7d592acc69b36875a482cdf3fd5c8d
</pre>

      <p>Xác thực tệp tin này chứa thông tin như trên bằng cách
      gõ:</p>
      <pre class="literallayout">
$ echo 05b217bb859794d08bb9e4f7f04cbda4b207fbe9 | git cat-file --batch
</pre>

      <p>Với lệnh zpipe, ta có thể dễ dàng xác thực một giá trị
      băm:</p>
      <pre class="literallayout">
$ zpipe -d &lt; .git/objects/05/b217bb859794d08bb9e4f7f04cbda4b207fbe9 | sha1sum
</pre>

      <p>Sự thẩm tra giá trị băm thì rắc rối hơn thông qua lệnh
      cat-file bởi vì phần kết xuất của nó chứa nhiều thông tin hơn
      đối tượng tệp tin thường không bị nén.</p>

      <p>Tệp tin này là một đối tượng cây <span class=
      "emphasis"><em>tree</em></span>: một danh sách các hàng bao
      gồm kiểu tệp tin, tên tệp tin, và giá trị băm. Trong ví dụ
      của chúng ta, kiểu tệp tin là 100644, điều này có nghĩa
      ‘rose` là tệp tin bình thường, và giá trị băm là một đối
      tượng blob mà nó chứa nội dung của `rose’. Dạng tệp tin khác
      có thể là tệp tin thi hành, symlinks hay các thư mục. Trong
      trường hợp cuối, giá trị băm sẽ chỉ đến đối tượng cây
      <span class="emphasis"><em>tree</em></span>.</p>

      <p>Nếu bạn đã chạy lệnh filter-branch, bạn sẽ có các đối
      tượng cũ bạn không cần đến sau này nữa. Mặc dù chúng sẽ bị
      loại bỏ một cách tự động một khi thời hạn chấm dứt đã đến,
      nhưng chúng ta sẽ xóa chúng ngay bây giờ theo cách dưới
      đây:</p>
      <pre class="literallayout">
$ rm -r .git/refs/original
$ git reflog expire --expire=now --all
$ git prune
</pre>

      <p>Với các dự án thật bạn nên tránh việc sử dụng lệnh như
      trên, làm như thế bạn đã phá hủy dữ liệu sao lưu dự phòng.
      Nếu bạn muốn làm sạch kho chứa, cách hay nhất là tạo một bản
      sao mới. Cũng thế, hãy cẩn thận khi thao tác trực tiếp với
      thư mục <code class="literal">.git</code>: điều gì xảy ra nếu
      một lệnh Git khác cũng đang thực thi cùng lúc, hay là mất
      điện đột ngột? Đại khái, refs có thể được xóa bằng lệnh
      <span class="strong"><strong>git update-ref
      -d</strong></span>, mặc dù thường thường nó an toàn hơn xóa
      <code class="literal">refs/original</code> bằng tay.</p>
    </div>

    <div class="section" title="Lần Commit">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_l%E1%BA%A7n_commit"></a>Lần
            Commit</h2>
          </div>
        </div>
      </div>

      <p>Chúng tôi đã giảng giải cho bạn 2 trong số 3 đối tượng của
      Git. Cái thứ 3 chính là <span class=
      "emphasis"><em>commit</em></span>. Nội dung của nó buộc chặt
      vào phần chú thích của lần commit cũng như thời gian, ngày
      tháng chúng được tạo ra. Để cho khớp với những thứ chúng ta
      có ở đây, chúng ta sẽ phải chỉnh nó một chút:</p>
      <pre class="literallayout">
$ git commit --amend -m Shakespeare  # Thay đổi phần chú thích.
$ git filter-branch --env-filter 'export
    GIT_AUTHOR_DATE="Fri 13 Feb 2009 15:31:30 -0800"
    GIT_AUTHOR_NAME="Alice"
    GIT_AUTHOR_EMAIL="alice@example.com"
    GIT_COMMITTER_DATE="Fri, 13 Feb 2009 15:31:30 -0800"
    GIT_COMMITTER_NAME="Bob"
    GIT_COMMITTER_EMAIL="bob@example.com"'  # dấu vết thời gian và tác giả đã bị gian lận.
$ find .git/objects -type f
</pre>

      <p>Bạn có thể thấy <code class=
      "literal">.git/objects/49/993fe130c4b3bf24857a15d7969c396b7bc187</code>
      là giá trị băm SHA1 của nội dung của nó:</p>
      <pre class="literallayout">
"commit 158" NUL
"tree 05b217bb859794d08bb9e4f7f04cbda4b207fbe9" LF
"author Alice &lt;alice@example.com&gt; 1234567890 -0800" LF
"committer Bob &lt;bob@example.com&gt; 1234567890 -0800" LF
LF
"Shakespeare" LF
</pre>

      <p>Như ở phần trước, bạn có thể chạy lệnh zpipe hay cat-file
      để tự mình trông thấy.</p>

      <p>Đây là lần commit đầu tiên, do vậy lần commit này không có
      cha, nhưng những lần commit sau sẽ luôn luôn chứa it nhất là
      một dòng chỉ định commit cha.</p>
    </div>

    <div class="section" title="Khó Phân Biệt Được sự Thần Kỳ">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_kh%C3%B3_ph%C3%A2n_bi%E1%BB%87t_%C4%91%C6%B0%E1%BB%A3c_s%E1%BB%B1_th%E1%BA%A7n_k%E1%BB%B3">
            </a>Khó Phân Biệt Được sự Thần Kỳ</h2>
          </div>
        </div>
      </div>

      <p>Bí mật của Git dường như có vẻ đơn giản. Nó giống như bạn
      có thể trộn lẫn cùng nhau một ít kịch bản và một ít mã C mà
      đun trong vài giờ: nhào trộn của quá trình hoạt động của hệ
      thống tệp tin và mã băm SHA1, bày biện thêm với các khóa và
      đồng bộ hóa tệp tin để tăng vị ngon. Trên thực tế, những mô
      tả như thế với Git các phiên bản trước kia là chính xác. Tuy
      nhiên, ngoài chiêu bài đóng gói để tiết kiệm không gian lưu
      trữ, sử dụng mục lục để tiết kiệm thời gian ra, giờ chúng ta
      còn biết thêm làm cách nào Git khéo léo thay đổi hệ thống tệp
      tin thành một cơ sở dữ liệu hoàn hảo cho việc quản lý mã
      nguồn.</p>

      <p>Ví dụ, nếu một tệp tin bất kỳ nào đó trong đối tượng cơ sở
      dữ liệu bị sai hỏng bởi lỗi do ổ đĩa, thế thì giá trị băm
      tương ứng của nó sẽ không đúng nữa, điều này sẽ mang lại rắc
      rối cho chúng ta. Bằng việc băm giá trị băm của đối tượng
      khác, chúng ta có thể duy trì tính toàn vẹn ở tất cả các mức.
      Commit là hạt nhân, thật vậy đấy, mỗi lần commit không bao
      giờ ghi lại nửa vời: chúng ta có thể chỉ tính toán mã băm của
      lần commit và lưu giữ giá trị của nó trong cơ sở dữ liệu sau
      khi chúng ta đã sẵn sàng lưu tất cả các đối tượng là trees,
      blobs và cha của các lần commit thích hợp. Đối tượng cơ sở dữ
      liệu không bị ảnh hưởng bởi các sự cố ngắt quãng bất ngờ như
      là mất điện đột ngột chẳng hạn.</p>

      <p>Chúng ta có thể làm thất bại ngay cả những kẻ phá hoại
      ranh mãnh. Giả sử người nào đó lén lút sửa chữa nội dung của
      một tệp tin trong một phiên bản cũ của dự án. Để giữ đối
      tượng cơ sở dữ liệu vẫn hoạt động tốt, họ đồng thời cũng phải
      thay đổi giá trị băm của đối tượng blob tương ứng vì lẽ rằng
      nó bây giờ đã khác trước. Điều đó có nghĩa là họ sẽ phải thay
      đổi giá trị băm của một đối tượng tree có liên quan đến tệp
      tin, và việc chỉnh sửa giá trị băm của tất cả các đối tượng
      commit kéo theo như là tree, thêm nữa là các giá trị băm của
      toàn bộ các lần commit con cháu của nó. Cái này kéo theo giá
      trị băm của head tại trung tâm không giống với thứ đó tại kho
      chứa sai hỏng. Bằng cách theo dõi sự tương khớp giá trị băm
      chúng ta có thể xác định được tệp tin bị sai hỏng, cũng như
      là lần commit nơi mà nó lần đầu bị hư hỏng.</p>

      <p>Nói ngắn gọn, dùng 20 byte để đại diện cho lần commit cuối
      là an toàn, nod không thể giả mạo với kho chứa Git.</p>

      <p>Đặc tính nào của Git là trứ danh nhất? Nhánh? Trộn? Hay
      Tags? Chỉ là chi tiết. Head hiện hành được giữ trong tệp tin
      <code class="literal">.git/HEAD</code>, mà nó có chứa giá trị
      băm của một đối tượng commit. Giá trị băm được cập nhật trong
      quá trình commit cũng như là một số lệnh khác. Nhánh đại thể
      cũng tương tự: chúng là các tệp tin trong thư mục
      <code class="literal">.git/refs/heads</code>. Tags cũng thế:
      chúng ở tại <code class="literal">.git/refs/tags</code> nhưng
      chúng được cập nhật bởi các lệnh khác nhau.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

From zsh-workers-return-27472-mason-zsh=primenet.com.au@zsh.org Mon Dec 07 00:38:38 2009
Return-Path: <zsh-workers-return-27472-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20508 invoked by alias); 7 Dec 2009 00:38:38 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27472
Received: (qmail 1338 invoked from network); 7 Dec 2009 00:38:36 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at alea.gnuu.de designates 83.246.114.63 as permitted sender)
X-DKIM: Sendmail DKIM Filter v2.5.2 uucp.gnuu.de C9B20488036
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=gnuu.de; s=banki;
	t=1260145257; i=@alea.gnuu.de; bh=zlF3hPj+JVbPRrPEOJk4EkuhaV66+0H/2
	tQErKAQV/8=; h=From:To:Cc:Subject:Date:Message-Id; b=o/3LEKuHLJQclZ
	eQ/UmwDlAqx0f7Q0fJwgQzMTTs7XJht0OUxvy7vyJXKoYAF/R2l3BaFp2WU0xFyIPs6
	m48Yf3za/OkLTciyqaqkyq+hpM8cOK1bAWJ2HW8xpnNhR1BG6vPOv/4q0rcueRjNXut
	y5kipx08XK53XEjma8t6Cnc=
From: =?UTF-8?q?J=C3=B6rg=20Sommer?= <joerg@alea.gnuu.de>
To: zsh-workers@zsh.org
Cc: =?UTF-8?q?J=C3=B6rg=20Sommer?= <joerg@alea.gnuu.de>
Subject: [PATCH] completion,git: fix zstyle customization of subcommand list
Date: Sun,  6 Dec 2009 22:25:52 +0100
Message-Id: <df1a89e8121b17198642561214b6ac263d8acf2b.1260134626.git.joerg@alea.gnuu.de>
X-Mailer: git-send-email 1.6.5

The variable $curcontext has to be expanded for the zstyle call.
Otherwise the lookup would fail and the customization of the expansion of
the subcommand list doesn't work.
---
 Completion/Unix/Command/_git |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/Completion/Unix/Command/_git b/Completion/Unix/Command/_git
index 2550818..33cfc77 100644
--- a/Completion/Unix/Command/_git
+++ b/Completion/Unix/Command/_git
@@ -304,7 +304,7 @@ _git_commands () {
     'upload-pack:command invoked by clone-pack and fetch-pack')
 
   local wanted_commands
-  zstyle -s ':completion:${curcontext}:' commands wanted_commands || wanted_commands="all -internal"
+  zstyle -s ":completion:${curcontext}:" commands wanted_commands || wanted_commands="all -internal"
 
   local -aU unique_wanted_commands
   unique_wanted_commands=($=wanted_commands)
-- 
1.6.5


From zsh-workers-return-22133-mason-zsh=primenet.com.au@sunsite.dk Sat Jan 07 04:50:21 2006
Return-Path: <zsh-workers-return-22133-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26088 invoked from network); 7 Jan 2006 04:50:20 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Jan 2006 04:50:20 -0000
Received: (qmail 50384 invoked from network); 7 Jan 2006 04:50:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Jan 2006 04:50:13 -0000
Received: (qmail 18807 invoked by alias); 7 Jan 2006 04:50:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22133
Received: (qmail 18797 invoked from network); 7 Jan 2006 04:50:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Jan 2006 04:50:10 -0000
Received: (qmail 50141 invoked from network); 7 Jan 2006 04:50:10 -0000
Received: from zproxy.gmail.com (64.233.162.206)
  by a.mx.sunsite.dk with SMTP; 7 Jan 2006 04:50:09 -0000
Received: by zproxy.gmail.com with SMTP id n29so5338388nzf
        for <zsh-workers@sunsite.dk>; Fri, 06 Jan 2006 20:50:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kKngjT7SN3ExlwkzpCQutD9fmxNY+wP2ySw3U/pDPxzM2kQJ0cpf51xg7/j/tgTImKDHruOpbr+L5ywjZpHT/F2oFf+4a4ZJMZlye4Y2VrRSReeCnwmnBTXERbmd8bjCZiEed3824hrZTKTrxOD693/TkWFX9QyB75vO0tHHDiM=
Received: by 10.37.20.33 with SMTP id x33mr9386104nzi;
        Fri, 06 Jan 2006 20:50:07 -0800 (PST)
Received: by 10.36.19.2 with HTTP; Fri, 6 Jan 2006 20:50:07 -0800 (PST)
Message-ID: <237967ef0601062050ncf2bb12t172634c4ca0d1400@mail.gmail.com>
Date: Sat, 7 Jan 2006 05:50:07 +0100
From: Mikael Magnusson <mikachu@gmail.com>
To: Wayne Davison <wayned@users.sourceforge.net>
Subject: Re: Bug in { completion's comma removal
Cc: zsh-workers@sunsite.dk
In-Reply-To: <20060106203655.GF10111@dot.blorf.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20060106180019.GB10111@dot.blorf.net>
	 <237967ef0601061207h7802915dm580a12122a971242@mail.gmail.com>
	 <20060106203655.GF10111@dot.blorf.net>

On 1/6/06, Wayne Davison <wayned@users.sourceforge.net> wrote:
> On Fri, Jan 06, 2006 at 09:07:19PM +0100, Mikael Magnusson wrote:
> > While we're talking about {}, it also doesn't work so well on
> > filenames with spaces
>
> I haven't seen any problems with spaces as long as you put a backslash
> in front of each one (which is what the completion of a filename with
> spaces will automatically add).  This is to be expected because a
> command-line of "f{oo bar,oo-baz}" (without the quotes) is really two
> args (neither one valid in syntax), but adding a backslash before the
> space makes it a single arg that will expand into two, "foo\ bar" and
> "foo-baz".

Hm, it appears that it doesn't happen with zsh -f, so I'll have to
poke around a bit in my settings before I can say anything useful...

> > and there's no way (that i've figured out) to escape a comma inside
> > the braces.
>
> Yes, this is a problem when completing and expanding in zle.  It does
> appear to work fine in the shell itself:
>
>     % echo ba{r\,1,z\,2}
>     bar,1 baz,2
>
> However, when completing a filename with a comma inside an open {, zsh
> does not add a backslash before the comma, and it strips any existing
> backslash before a comma (e.g. pressing <TAB> on the above term would
> incorrectly expand the line into "echo bar ba1 baz ba2").
>
> ..wayne..
>


--
Mikael Magnusson


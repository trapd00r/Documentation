From zsh-workers-return-24249-mason-zsh=primenet.com.au@sunsite.dk Fri Dec 14 10:24:44 2007
Return-Path: <zsh-workers-return-24249-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5208 invoked from network); 14 Dec 2007 10:24:34 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 14 Dec 2007 10:24:34 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 93260 invoked from network); 14 Dec 2007 10:24:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Dec 2007 10:24:28 -0000
Received: (qmail 22601 invoked by alias); 14 Dec 2007 10:24:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24249
Received: (qmail 22585 invoked from network); 14 Dec 2007 10:24:25 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 14 Dec 2007 10:24:25 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id D8CF28058F54
	for <zsh-workers@sunsite.dk>; Fri, 14 Dec 2007 11:21:37 +0100 (CET)
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [85.115.41.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-workers@sunsite.dk>; Fri, 14 Dec 2007 11:21:37 +0100 (CET)
Received: from rly13g.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly13g.srv.mailcontrol.com (MailControl) with ESMTP id lBEAOHD6022817
	for <zsh-workers@sunsite.dk>; Fri, 14 Dec 2007 10:24:19 GMT
Received: from submission.mailcontrol.com (submission.mailcontrol.com [86.111.216.190])
	by rly13g.srv.mailcontrol.com (MailControl) id lBEANQxa020012
	for zsh-workers@sunsite.dk; Fri, 14 Dec 2007 10:23:26 GMT
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly13g-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id lBEANMXj019529; Fri, 14 Dec 2007 10:23:26 +0000 (GMT)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 14 Dec 2007 10:23:21 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.1/8.13.4) with ESMTP id lBEANLWw001153;
	Fri, 14 Dec 2007 10:23:21 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.1/8.14.1/Submit) with ESMTP id lBEANLI5001150;
	Fri, 14 Dec 2007 10:23:21 GMT
Message-Id: <200712141023.lBEANLI5001150@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: Pea <zsh@raveland.org>, zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: 4.3.4-dev-4 and 4.2.6-dev-2 available
In-reply-to: <20071214104523.32bf017b@portable.raveland.priv>
References: <22582.1197372038@csr.com> <20071213160915.4bcabae3@raveland.org> <20071213181050.55477e48@news01> <20071214104523.32bf017b@portable.raveland.priv>
Comments: In-reply-to Pea <zsh@raveland.org>
   message dated "Fri, 14 Dec 2007 10:45:23 +0100."
Date: Fri, 14 Dec 2007 10:23:21 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 14 Dec 2007 10:23:21.0875 (UTC) FILETIME=[5A487630:01C83E3B]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.71.1.123
X-Virus-Scanned: ClamAV using ClamSMTP

Pea wrote:
> 
> /*      $OpenBSD: curses.h,v 1.3 2003/06/17 21:33:53 millert Exp $
> */
> 
> /*
>  * Placed in the public domain by Todd C. Miller
> <Todd.Miller@courtesan.com>
>  * on June 17, 2003.
>  */
> 
> #ifndef _CURSES_H_
> #define _CURSES_H_
> 
> #ifdef _USE_OLD_CURSES_
> #include <ocurses.h>
> #else
> #include <ncurses.h>
> #endif
> 
> #endif /* _CURSES_H_ */
> 
> Hope it can help..

Thanks for the additional info...

Gah.

I'm now pretty much stuck.  We seem to be forced into including
ncurses.h to get curses functionality, since curses.h includes it, but
that's got a clashing definition with a system header.  I don't really
understand how this can ever have worked.

The only alternative seems to be to define _USE_OLD_CURSES_, but why
would we want to do that?

Is there any indication of why the headers are allowing wchar_t to be
defined twice?  Is there are anything around lines 54/59 of stddef.h
that would indicate what's going on?

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


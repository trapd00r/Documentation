From zsh-users-return-6045-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 23 10:58:54 2003
Return-Path: <zsh-users-return-6045-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3647 invoked from network); 23 Apr 2003 10:58:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 23 Apr 2003 10:58:53 -0000
Received: (qmail 29543 invoked by alias); 23 Apr 2003 10:58:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6045
Received: (qmail 29536 invoked from network); 23 Apr 2003 10:58:36 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 23 Apr 2003 10:58:36 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [53.122.101.2] by sunsite.dk (MessageWall 1.0.8) with SMTP; 23 Apr 2003 10:58:36 -0000
Received: by neptun.sns-felb.debis.de; id MAA24592; Wed, 23 Apr 2003 12:58:35 +0200
Received: from unknown(53.113.82.10) by neptun.sns-felb.debis.de via smap (V5.0)
	id xma024574; Wed, 23 Apr 03 12:58:27 +0200
Received: from mail1.ac1.dsh.de (localhost [127.0.0.1])
	by dshmail1.dsh.de (8.9.1/8.8.7) with ESMTP id MAA16833
	for <zsh-users@sunsite.dk>; Wed, 23 Apr 2003 12:58:23 +0200 (MET DST)
Received: from mail1.ac1.dsh.de (root@localhost [127.0.0.1])
	by mail1.ac1.dsh.de (8.9.3/8.8.6) with ESMTP id MAA24182
	for <zsh-users@sunsite.dk>; Wed, 23 Apr 2003 12:58:18 +0200
Received: from acnt07.ac1.dsh.de (acnt07.ac1.dSh.de [53.50.3.17])
	by mail1.ac1.dsh.de (8.9.3/8.8.6) with ESMTP id MAA24175
	for <zsh-users@sunsite.dk>; Wed, 23 Apr 2003 12:58:18 +0200
Received: by acnt07.ac1.dsh.de with Internet Mail Service (5.5.2653.19)
	id <2CZV218N>; Wed, 23 Apr 2003 12:58:25 +0200
Received: from acp1575.ac1.dsh.de (172.31.20.213 [172.31.20.213]) by acnt07.ac1.dsh.de with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id 2CZV218M; Wed, 23 Apr 2003 12:58:24 +0200
Received: by acp1575.ac1.dsh.de (Postfix, from userid 1000)
	id 4DA18807E; Wed, 23 Apr 2003 13:02:10 +0200 (CEST)
From: Thorsten Haude <zsh@thorstenhau.de>
To: Zsh User ML <zsh-users@sunsite.dk>
Date: Wed, 23 Apr 2003 13:02:10 +0200
Subject: Test fails on HP-UX
Message-ID: <20030423110210.GA1631@acp1575.ac1.dsh.de>
Mail-Followup-To: Zsh User ML <zsh-users@sunsite.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.28i

Hi,

I try to build Zsh 4.0.6 on HP-UX 11.11. Before asking the admin to
install it, I wanted to make sure the test are running ok. However,
they aren't. It seems that some modules cannot be loaded and Zsh
somehow chokes on that. Here is the last part of make's output :

- - - Schnipp - - -
./V01zmodload.ztst: starting.
*** /tmp/zsh.ztst.err.828       Wed Apr 23 11:18:51 2003
--- /tmp/zsh.ztst.terr.828      Wed Apr 23 11:18:51 2003
***************
*** 0 ****
--- 1,7 ----
+ ZTST_execchunk:2: failed to load module: zsh/complete
+ ZTST_execchunk:2: failed to load module: zsh/complete
+ ZTST_execchunk:2: failed to load module: zsh/complete
+ ZTST_execchunk:2: failed to load module: zsh/complete
+ ZTST_execchunk:2: failed to load module: zsh/complete
+ ZTST_execchunk:2: failed to load module: zsh/deltochar
+ ZTST_execchunk:2: failed to load module: zsh/zleparameter
Test ./V01zmodload.ztst failed: error output differs from expected as shown above for:
 for m in $mods
 do
   zmodload -i $m || mods[(r)$m]=()
 done
Was testing: Test loading of all compiled modules
./V01zmodload.ztst: test failed.
./V02zregexparse.ztst: starting.
ZTST_execchunk:2: failed to load module: zsh/complete
Test ./V02zregexparse.ztst failed: non-zero status from preparation code:
  zmodload zsh/zutil
./V02zregexparse.ztst: test failed.
Test ./V02zregexparse.ztst failed: bad status 1, expected 0 from:
  zregexparse p1 p2 ''
Error output:
ZTST_execchunk:2: failed to load module: zsh/complete
ZTST_execchunk:zregexparse:2: autoload failed
Was testing: empty
./V02zregexparse.ztst: test failed.
./Y01completion.ztst: starting.
- - - Schnapp - - -

At this point, the test freezes.


This my be related to the problem described in
http://www.zsh.org/mla/workers/2003/msg00012.html. I tried to include
zpty in the build as suggested by Andrey (is s/dynamic/static/ in
Zpty's line sufficient?), but that changes nothing.

This is from my config.h:
- - - Schnipp - - -
/* Define to 1 if you want to use dynamically loaded modules on HPUX 10 */
/* #undef HPUXDYNAMIC */
- - - Schnapp - - -

What can I do to learn more about the problem?


Thorsten
-- 
The reasonable man adapts himself to the world;
the unreasonable one persists in trying to adapt the world to himself.
Therefore all progress depends on the unreasonable man.
    - George Bernard Shaw


From zsh-workers-return-7166-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jul 16 06:34:50 1999
Return-Path: <zsh-workers-return-7166-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7024 invoked from network); 16 Jul 1999 06:34:48 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jul 1999 06:34:48 -0000
Received: (qmail 4266 invoked by alias); 16 Jul 1999 06:34:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7166
Received: (qmail 4259 invoked from network); 16 Jul 1999 06:34:38 -0000
Date: Fri, 16 Jul 1999 08:34:36 +0200 (MET DST)
Message-Id: <199907160634.IAA14160@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Geoff Wing's message of Fri, 16 Jul 1999 02:20:52 +1000
Subject: Re: Bad optimisations: (Was: Test version zsh-3.1.6-test-1)


Geoff Wing wrote:

> What about just expanding it slightly (with appropriate comments of course)
> instead of duplicating it.
> e.g.
> 
>     if (*args && **args == '?')
>         args++;
>     /* default result parameter */
>     if (*args)
>         reply = *args++;
>     else
>         reply = ops['A'] ? "reply" : "REPLY";

Note this isn't intended as an optimisation (of course), but to work
around a bug in gcc-2.8.1 under DU. And your version doesn't help
here, with that I still get the SEGV. The problem really is in the
first two lines above. It needs more than just the `args++' in after
the `if', otherwise it has a random value for `args' after the it.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-15816-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 16 18:15:17 2001
Return-Path: <zsh-workers-return-15816-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26511 invoked from network); 16 Sep 2001 18:15:16 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Sep 2001 18:15:16 -0000
Received: (qmail 29425 invoked by alias); 16 Sep 2001 18:15:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15816
Received: (qmail 29412 invoked from network); 16 Sep 2001 18:15:08 -0000
Sender: ethersoft@rcn.com
To: zsh-workers@sunsite.dk
Subject: history problems
From: Vin Shelton <acs@alumni.princeton.edu>
Organization: EtherSoft, Inc
Date: 16 Sep 2001 14:16:41 -0400
Message-ID: <m2adzvrofq.fsf@zion.rcn.com>
Lines: 33
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I've been off on vacation for a week and haven't yet had a chance to
catch up on my zsh email, so let me apologize in advance if this has
already been discussed.

With a current zsh built from CVS, I notice the following problem:

zsh -f
zion% ls

... output omitted ...

zion% history
    1  ls
zion% history -100
fc: bad history number: 0

It used to be that 'history -100' would return the same results as
'history' in this case.

I ran into this problem because .zlogout records my shell histories to
separate files upon logout.  The following command only works if at
least $HISTSIZE commands have been run:

fc -nldf -$HISTSIZE >> $outfile

This used to save up to $HISTSIZE commands, but now it generates:

fc: bad history number: 0

if fewer than $HISTSIZE commands have been executed in the shell

Thanks in advance,
  - vin


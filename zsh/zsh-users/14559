From zsh-users-return-14559-mason-zsh=primenet.com.au@zsh.org Thu Nov 12 14:21:37 2009
Return-Path: <zsh-users-return-14559-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14430 invoked by alias); 12 Nov 2009 14:21:36 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14559
Received: (qmail 20545 invoked from network); 12 Nov 2009 14:21:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (proxy.melb.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <200911121421.nACELAiv013321@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@zsh.org
Subject: Re: Expansion, matching, files
In-reply-to: <62575.153.98.68.197.1258022509.squirrel@webmail.rocteur.com>
References: <62575.153.98.68.197.1258022509.squirrel@webmail.rocteur.com>
Comments: In-reply-to "Jerry Rocteur" <macosx@rocteur.cc>
   message dated "Thu, 12 Nov 2009 11:41:49 +0100."
Date: Thu, 12 Nov 2009 14:21:09 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 12 Nov 2009 14:21:13.0219 (UTC) FILETIME=[6369FD30:01CA63A3]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-03 (www.mailcontrol.com) on 10.71.0.121

"Jerry Rocteur" wrote:
> But I would like to do this:
> 
> [[ -e (cc|ff).log ]] && echo yes
> zsh: parse error near `('
> 
> Can I use this kind of pattern in an if statement ?

No, an "if" doesn't do file globbing.

The usual way of doing this is just to go the glob with the (N) flag
which removes anything that doesn't match.  There are various ways of
doing this, for example

  array=((cc|ff).log(N))
  if (( $#array )); then
    # something there
  else
    # not
  fi

or if you want to make this more generic

  exists() {
    local -a array
    array=(${^~*}(N))
    (( $#array ))
  }
  exists '(cc|ff).log' && echo yes

Note the quotes in the second case; you don't want the pattern expanded
until it gets the (N) on the end.  "exists" as defined can take multiple
pattern arguments which are "or"ed.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


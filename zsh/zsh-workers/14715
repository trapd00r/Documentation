From zsh-workers-return-14715-mason-zsh=primenet.com.au@sunsite.dk Mon Jun 04 21:38:35 2001
Return-Path: <zsh-workers-return-14715-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17966 invoked from network); 4 Jun 2001 21:38:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Jun 2001 21:38:34 -0000
Received: (qmail 26025 invoked by alias); 4 Jun 2001 21:38:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14715
Received: (qmail 26013 invoked from network); 4 Jun 2001 21:38:19 -0000
Date: Mon, 4 Jun 2001 14:37:59 -0700
From: Jos Backus <josb@cncdsl.com>
To: zsh-workers@sunsite.dk
Subject: 4.0.1: problem with sourcing on Solaris
Message-ID: <20010604143759.A91833@lizzy.bugworks.com>
Reply-To: Jos Backus <josb@cncdsl.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i

taiko:/depot/src/zsh-4.0.1% cat x                     
a=`uname -s`
taiko:/depot/src/zsh-4.0.1% uname -s
SunOS
taiko:/depot/src/zsh-4.0.1% truss -f -o out Src/zsh -f
taiko% . ./x
[hangs][press ^C]
taiko% exit

Relevant section of truss output:

29085:  write(1, " S u n O S\n", 6)                     = 6
29084:  read(12, " S u n O S\n", 5120)                  = 6
29085:  _exit(0)
29084:  read(12, 0x000F734C, 5120)                      = 0
29084:  llseek(12, 0, SEEK_CUR)                         Err#29 ESPIPE
29084:  close(12)                                       = 0
29084:  sigprocmask(SIG_BLOCK, 0x000DABE0, 0x000DABFC)  = 0
29084:  kill(29085, SIG#0)                              = 0
29084:      Received signal #18, SIGCLD, in sigsuspend() [caught]
29084:        siginfo: SIGCLD CLD_EXITED pid=29085 status=0x0000
29084:  sigsuspend(0xFFBEF000)                          Err#4 EINTR
29084:  sigprocmask(SIG_BLOCK, 0x000DABE0, 0x000DABFC)  = 0
29084:  sigprocmask(SIG_SETMASK, 0xFFBEEBD8, 0xFFBEEB48) = 0
29084:  waitid(P_ALL, 0, 0xFFBEEAE8, WEXITED|WTRAPPED|WSTOPPED|WNOHANG) = 0
29084:  times(0x000DAB38)                               = 932283769
29084:  waitid(P_ALL, 0, 0xFFBEEAE8, WEXITED|WTRAPPED|WSTOPPED|WNOHANG) Err#10 E
CHILD
29084:  setcontext(0xFFBEECE8)
29084:  sigprocmask(SIG_BLOCK, 0x000DABE0, 0x000DABFC)  = 0
29084:  kill(29085, SIG#0)                              Err#3 ESRCH
29084:  kill(29085, SIGCONT)                            Err#3 ESRCH
29084:  sigsuspend(0xFFBEF000)          (sleeping...)
29084:      Received signal #2, SIGINT, in sigsuspend() [caught]
29084:  sigsuspend(0xFFBEF000)                          Err#4 EINTR

Anyone else seen this?

-- 
Jos Backus                 _/  _/_/_/        "Modularity is not a hack."
                          _/  _/   _/                -- D. J. Bernstein
                         _/  _/_/_/             
                    _/  _/  _/    _/
josb@cncdsl.com     _/_/   _/_/_/            use Std::Disclaimer;


From zsh-users-return-13201-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 09 06:13:27 2008
Return-Path: <zsh-users-return-13201-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20617 invoked from network); 9 Sep 2008 06:13:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Sep 2008 06:13:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46287 invoked from network); 9 Sep 2008 06:12:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Sep 2008 06:12:38 -0000
Received: (qmail 16372 invoked by alias); 9 Sep 2008 06:11:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13201
Received: (qmail 16355 invoked from network); 9 Sep 2008 06:11:54 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 9 Sep 2008 06:11:54 -0000
Received: from vms173003pub.verizon.net (vms173003pub.verizon.net [206.46.173.3])
	by bifrost.dotsrc.org (Postfix) with ESMTP id B935B80307AD
	for <zsh-users@sunsite.dk>; Tue,  9 Sep 2008 08:11:48 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.178])
 by vms173003.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K6W0051BZV4ZP54@vms173003.mailsrvcs.net> for
 zsh-users@sunsite.dk; Tue, 09 Sep 2008 01:11:29 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m896BK1Q016674; Mon,
 08 Sep 2008 23:11:21 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m896BEUw016673; Mon, 08 Sep 2008 23:11:14 -0700
Date: Mon, 08 Sep 2008 23:11:14 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: configure NIS test hangs on one of my OS X machines
In-reply-to: <114E89DE-AC95-4C16-83E7-100CD5E1AA87@chemistry.ucsc.edu>
To: "William G. Scott" <wgscott@chemistry.ucsc.edu>
Cc: zsh-users@sunsite.dk
Message-id: <080908231114.ZM16672@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <64EBA058-6335-4AFB-BE06-72FC3E476F29@chemistry.ucsc.edu>
	<080908213933.ZM16288@torch.brasslantern.com>
	<114E89DE-AC95-4C16-83E7-100CD5E1AA87@chemistry.ucsc.edu>
Comments: In reply to "William G. Scott" <wgscott@chemistry.ucsc.edu>
 "Re: configure NIS test hangs on one of my OS X machines" (Sep  8, 10:04pm)
X-Virus-Scanned: ClamAV 0.92.1/8196/Tue Sep  9 03:02:39 2008 on bifrost
X-Virus-Status: Clean

On Sep 8, 10:04pm, William G. Scott wrote:
}
} Thanks for the reply.
} 
} No strace (has traceroute -- no idea how to use it).

I just googled it, what you'd want is called ktrace.  However, the
error messages below are probably good enough.
 
} The one I have at work participates in an NFS network, webserver, and  

Those are all completely irrelevant.  YP (yellow pages) is its own
network service.  NIS stands for "network information service".

} zsh-% /usr/bin/ypcat passwd.byname
} 
} YP server for domain localhost not responding, still trying
} 
} (indefinite hang).

So it just stops printing those error messages?  That's a bit odd.
Anyway, it'd probably time out after 15 minutes or so.
 
} I turned off file sharing and bluetooth sharing and it still hangs...

This has absolutely nothing to do with files or the web or bluetooth.
 
} Is there a way to avoid the test entirely?

Unfortunately not without changing the configure script.  The easiest
thing might be to temporarily rename /usr/bin/ypcat, and then rename it
back after configuration has finished.

} This is for the fink zsh package on OS X and they all should configure
} identically anyway.

They are configuring identically.  The problem is that an underlying
system service, in this case the yellow pages, is incompletely set up,
and is behaving badly.  For example on my home linux system:

schaefer[533] /usr/bin/ypcat passwd.byname
ypcat: can't get local yp domain: Local domain name not set
schaefer[534] 

This is more along the lines of what I'd have expected (and what the
writer of that part of zsh's configure script expected) ypcat to do:
fail immediately if no server could be reached, not keep trying for
some unknown length of time.


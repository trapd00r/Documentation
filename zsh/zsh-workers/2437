From zsh-workers-request@euclid.skiles.gatech.edu  Wed Nov 20 17:21:22 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id RAA10261 for <mason@primenet.com.au>; Wed, 20 Nov 1996 17:21:19 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id BAA22330; Wed, 20 Nov 1996 01:04:56 -0500 (EST)
Resent-Date: Wed, 20 Nov 1996 01:04:56 -0500 (EST)
Date: Wed, 20 Nov 1996 09:06:21 +0300 (MOW)
From: Andrej Borsenkow <borsenkow.msk@sni.de>
X-Sender: bor@itsrm1.mow.sni.de
Reply-To: borsenkow.msk@sni.de
To: Thorsten Meinecke <kaefer@aglaia.aball.DE>
cc: zsh-workers@math.gatech.edu
Subject: Re: 3.1.0-test3: gcc -ansi -pedantic
In-Reply-To: <m0vPx3J-00008PC@aglaia.aball.DE>
Message-ID: <Pine.SV4.3.95.961120090334.9611A-100000@itsrm1.mow.sni.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"njH8Z.0.qS5.8-fao"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2437
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Tue, 19 Nov 1996, Thorsten Meinecke wrote:

> Hello, did anyone bother before to build zsh with gcc -ansi -pedantic?
> 
> It looks like some of the module-related changes aren't ANSI/ISO C,
> and from some of the older stuff it elicits warnings about variable
> sized arrays and conversions w/o cast as well.  Furthermore, there's
> trouble in module.c, because gcc says ANSI forbids assignment between
> function pointer and `void *'.  Most serious:
> 
>   ../Src> gcc -c -I.. -I. -I. -DHAVE_CONFIG_H -Wall -Wno-implicit \
>   -Wmissing-prototypes -g -ansi -pedantic  zle_main.c
>   zle_main.c: In function `zleread':
>   zle_main.c:439: warning: ANSI C forbids use of conditional expressions as lvalues
>   zle_main.c: In function `unbindzlefunc':
>   zle_main.c:1257: initializer element for `keybindlist[0]' is not computable at load time
>   zle_main.c:1257: initializer element for `keybindlist[1]' is not computable at load time
>   make: *** [zle_main.o] Error 1
> 

I don't use gcc, but my compiler did give the same errors. I just had no
time to send a patch :-(


> I can offer fixes for the error (and the warnings) in the zle_*
> module-related code, by introducing yet another level of indirection
> to both underlying problems.
>

Yes, I was ready to propose the same ;)
thanks

greetings
 
-------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 252 01 05
SNI ITS Moscow			Tel:   +7 (095) 252 13 88

NERV:  borsenkow.msk		E-Mail: borsenkow.msk@sni.de
-------------------------------------------------------------------------



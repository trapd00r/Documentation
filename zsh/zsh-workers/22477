From zsh-workers-return-22477-mason-zsh=primenet.com.au@sunsite.dk Wed May 31 09:25:33 2006
Return-Path: <zsh-workers-return-22477-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10353 invoked from network); 31 May 2006 09:25:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.2 (2006-05-25) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.2
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 31 May 2006 09:25:30 -0000
Received: (qmail 87274 invoked from network); 31 May 2006 09:25:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 31 May 2006 09:25:24 -0000
Received: (qmail 3917 invoked by alias); 31 May 2006 09:25:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22477
Received: (qmail 3907 invoked from network); 31 May 2006 09:25:21 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 31 May 2006 09:25:21 -0000
Received: (qmail 86954 invoked from network); 31 May 2006 09:25:21 -0000
Received: from cluster-d.mailcontrol.com (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 31 May 2006 09:25:20 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly06d.srv.mailcontrol.com (MailControl) with ESMTP id k4V9PILE028691
	for <zsh-workers@sunsite.dk>; Wed, 31 May 2006 10:25:18 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 31 May 2006 10:24:20 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.4/8.13.4) with ESMTP id k4V9PH5Q020381
	for <zsh-workers@sunsite.dk>; Wed, 31 May 2006 10:25:17 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.4/8.13.4/Submit) with ESMTP id k4V9PH0C020378
	for <zsh-workers@sunsite.dk>; Wed, 31 May 2006 10:25:17 +0100
Message-Id: <200605310925.k4V9PH0C020378@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: PATCH: multibyte characters in patterns. 
In-reply-to: <20060531011630.GB15729@blorf.net> 
References: <200604092139.k39Lcw7P015097@pwslaptop.csr.com> <20060531011630.GB15729@blorf.net>
Date: Wed, 31 May 2006 10:25:17 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 31 May 2006 09:24:20.0127 (UTC) FILETIME=[FF151AF0:01C68493]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-00-10 (www.mailcontrol.com) on 10.68.0.116

Wayne Davison wrote:
> FYI, I just checked in a few changes to pattern.c to fix some compiler
> warnings about signed/unsigned mismatches.

Thanks.

> One of these was assigning a literal -1 to the
> variable, so I added a PEOF define to use either WEOF or EOF for this
> value (like the Zle code uses -- perhaps we should make a global define
> for this in zsh.h?).

Yes, I was in the process of moving a whole load of stuff from zle.h to
zsh.h and turning ZLE_CHAR_T into ZCHAR_T, and so on.  It was in aid of
turning the completion code (the libraries, not the interaction with the
lexical analyser in the main shell) into wide characters instead of multibyte
characters, although this bit stood alone.  I stopped because I wondered
whether it was a good idea to have wide characters in completion after
all:  one of the good features at the moment is being able to use
completion even if the locale is a bit off base, and we would probably
lose that.  The part that needs redoing anyway is the matching control,
which is based around 256 octet character sets.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


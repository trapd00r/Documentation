From zsh-users-return-2144-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Feb 13 02:47:47 1999
Return-Path: <zsh-users-return-2144-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12787 invoked from network); 13 Feb 1999 02:47:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Feb 1999 02:47:45 -0000
Received: (qmail 21680 invoked by alias); 13 Feb 1999 02:46:45 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2144
Received: (qmail 21668 invoked from network); 13 Feb 1999 02:46:32 -0000
Message-Id: <199902130246.VAA10174@ocalhost>
Content-Type: text/plain
MIME-Version: 1.0
X-Image-URL: http://www.peak.org/~luomat/luomat@peak.org.tiff
In-Reply-To: <199902122123.QAA05026@po_box.cig.mot.com>
From: Timothy J Luoma <public+Lists/Unix/Zsh/Users@fdt.net>
Date: Fri, 12 Feb 1999 21:46:22 -0500
To: "Larry P . Schrof" <schrof@cig.mot.com>
Subject: Re: zsh and login shells.
cc: zsh-users@sunsite.auc.dk
References: <199902122123.QAA05026@po_box.cig.mot.com>

	Author:	"Larry P . Schrof" <schrof@cig.mot.com>
	Date:	Fri, 12 Feb 1999 15:22:16 -0600
	ID:	<199902122123.QAA05026@po_box.cig.mot.com>

> [ -f ${HOME}/loc/bin/zsh ] && exec ${HOME}/loc/bin/zsh -l
>
> in my .login (and made .login executable).
>
> However, upon logging in, I simply get the ksh prompt, as if the
> conditional statement evaluated to false.  When running this on the
> command line, it works just fine.
>
> I know the system ksh was reading my old .login file before I
> moved it out of the way and put in the (simple) new one.


What would happen when zsh starts and processes .login ?

Also, the condition should not be '-f', I would suggest something like this

check that it IS executable
	and NOT a directory
	and NOT a link

if [ -x ${HOME}/loc/bin/zsh \
-a ! -d ${HOME}/loc/bin/zsh \
-a ! -h ${HOME}/loc/bin/zsh ]; then

	exec ${HOME}/loc/bin/zsh -l
	
fi

I would try putting that in .kshrc or equivalent.
(on 2nd thought, that may not be ksh syntax)


Can you change your shell to /bin/sh and put the above in .profile and see  
if that works?

If you wanted to be more verbose:

if [ -x ${HOME}/loc/bin/zsh \
-a ! -d ${HOME}/loc/bin/zsh \
-a ! -h ${HOME}/loc/bin/zsh ]; then

	exec ${HOME}/loc/bin/zsh -l
	
else

	if [ -f ${HOME}/loc/bin/zsh ]; then
		echo ${HOME}/loc/bin/zsh exists
	
	else
		echo ${HOME}/loc/bin/zsh not found
		
	fi
	
	if [ -d ${HOME}/loc/bin/zsh ]; then
		echo ${HOME}/loc/bin/zsh is a directory
	fi
	
	if [ -h ${HOME}/loc/bin/zsh ]; then
		echo ${HOME}/loc/bin/zsh is a link
	fi
fi


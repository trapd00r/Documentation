From zsh-workers-return-12653-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Aug 16 07:26:02 2000
Return-Path: <zsh-workers-return-12653-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1582 invoked from network); 16 Aug 2000 07:26:01 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Aug 2000 07:26:01 -0000
Received: (qmail 4033 invoked by alias); 16 Aug 2000 07:25:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12653
Received: (qmail 4026 invoked from network); 16 Aug 2000 07:25:34 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Zsh hackers list" <zsh-workers@sunsite.auc.dk>
Subject: RE: How to cache $CFLAGS, $LIBS etc.
Date: Wed, 16 Aug 2000 11:25:31 +0400
Message-ID: <000001c00753$28acb0e0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-reply-to: <0FZ400K4WL6P0H@la-la.cambridgesiliconradio.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

>
> 2. Use `--enable-cflags', `--enable-libs', `--enable-ldflags' or whatever.
> This probably ought to work because the arguments are remembered for use
> with --recheck.  But the guide for how configure is used is pretty
> fascistic about not allowing anything RMS wouldn't like, so I don't know if
> there are drawbacks to this.  Plus we need to be careful if people supply
> environment variables in the standard way.
>
> Does anyone know how to do this properly?
>

May be it is too late, but NEWS for current CVS autoconf says:

- Remembers environment variables when reconfiguring.
  The previous scheme to set envvar before running configure was
    ENV=VAL ./configure
  what prevented configure from remembering the environment in which
  it was run, therefore --recheck was run in an inconsistent
  environment.  Now, one should run
    ./configure ENV=VAR
  and then --recheck will work properly.  Variables declared with
  AC_ARG_VAR are also preserved.

It also has the whole bunch of new tests (64 bit, LFS, check for proper
function prototypes etc etc).

The CVS version was recently stamped with version number that probably
indicates it's relative "stableness" :-) If we commit to using it ... some
packages do (NTP being one). It also gives a chance to test autoconf before
release (at least, I'd be very interested to see if tests for 64bit/LFS really
work here).

-andrej


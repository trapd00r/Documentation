From hzoli@cs.elte.hu Mon Mar 11 11:05:24 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.4/8.7.3) with ESMTP id LAA10389 for <mason@werple.mira.net.au>; Mon, 11 Mar 1996 11:05:22 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id SAA20032; Sun, 10 Mar 1996 18:44:07 -0500 (EST)
Resent-Date: Sun, 10 Mar 1996 18:44:07 -0500 (EST)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199603102333.AAA02216@hzoli.ppp.cs.elte.hu>
Subject: Still zle line refresh bugs
To: zsh-workers@math.gatech.edu
Date: Mon, 11 Mar 1996 00:33:02 +0100 (MET)
X-Mailer: ELM [version 2.4 PL25 ME8b]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"Pex7Q.0.wu4.6bsGn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/809
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1293
Status: OR

The patch in art. 742 from Geoff Wing really fixes the worst bugs in zle
line refresh but unfortunately there are still some bugs.

Type ^V^J^V^J1234567890^A- at a prompt.  You get:

%

--234567890

As you see, the `-' character is repeated and it overwrites `1'.  It only
happens if there are at least 10 characters in the line.

The other bug is probably the same but I can only reproduce is on a Linux
console.  If a line wraps and there are at most 10 characters between the
cursor and the right edge of the screen and least 10 characters wraps to the
next screen line and a character is inserted, the first character on the
wrapped line will be duplicated.

Note that the patch from Geoff tried to fix some very similar bugs.

And here is one more bug which is unrelated to Geoff's patch.  I think it
was caused by a patch from Peter but I cannot find it in the ChangeLog.  zsh
tries to ensure that cut & paste in xterm works for wrapped lines so that no
bogous newline will be added to the clipboard.  But zsh overdoes that even
multiline buffers will be cut as a single line.  This does not happen when a
multi-line buffer is directly typed in a buffer but only when such a
multiline structure comes readily e.g. from the history when using the
up-arrow key or in vared (zed).

Zoltan



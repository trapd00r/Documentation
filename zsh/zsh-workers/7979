From zsh-workers-return-7979-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Sep 21 09:05:45 1999
Return-Path: <zsh-workers-return-7979-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11899 invoked from network); 21 Sep 1999 09:05:42 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Sep 1999 09:05:42 -0000
Received: (qmail 9401 invoked by alias); 21 Sep 1999 09:05:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7979
Received: (qmail 9394 invoked from network); 21 Sep 1999 09:05:33 -0000
Date: Tue, 21 Sep 1999 11:05:31 +0200 (MET DST)
Message-Id: <199909210905.LAA14475@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Sat, 18 Sep 1999 23:47:49 +0000
Subject: Re: Crash while testing a completion: trap handlers and malloc?


Bart Schaefer wrote:

> In the same shell where I'd been testing my patch from 7929, I was fooling
> with the _mailboxes updates I sent in 7932.  I typed "mutt -f <TAB>" and
> got a core dump with the following huge stack trace.  Note that the SIGALRM
> trap handler is being called (so it's a TMOUT thing) and further that it is
> being called during zalloc().  This is bad news, as the malloc() arena is
> not re-entrant in most implementations.

I think the library should take care of this, but maybe if we move the 
(|un)queue_signals() calls from our malloc down into zalloc() and friends?

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


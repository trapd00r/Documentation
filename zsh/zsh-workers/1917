From zsh-workers-request@euclid.skiles.gatech.edu  Mon Aug  5 07:43:46 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id HAA01695 for <mason@primenet.com.au>; Mon, 5 Aug 1996 07:43:44 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA11642; Sun, 4 Aug 1996 17:30:33 -0400 (EDT)
Resent-Date: Sun, 4 Aug 1996 17:30:33 -0400 (EDT)
Message-Id: <199608042128.OAA27658@bebop.clari.net>
To: zsh-workers@math.gatech.edu
Subject: Weird problem with trn's Configure script
Date: Sun, 04 Aug 1996 14:28:55 -0700
From: Wayne Davison <wayne@clari.net>
Resent-Message-ID: <"j7m09.0.qr2.vPH1o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1917
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I finally tested trn's Configure script with zsh enulating sh and I found
one weird problem.  The script is trying to ensure that it is being run
by sh, not csh, so it does this test (tweaked for simplicity):

	(exit $?0) || echo You are not running sh

Under zsh 3.0pre6 in either zsh or sh compatibility mode this causes a
large chunk of the script to get executed multiple times.  Try the
following script:

	#!/local/bin/zsh
	(exit) || echo This should not be seen
	echo we are here

With pre6 you'll see the "we are here" statement twice!  In pre3 it
did something a little weirder:

	./testscript: command not found: ould [4]
	we are here

I haven't had a chance to check the code, but it looks like the closing
paren isn't being parsed correctly in this instance.  This only seems
to happen if the last command in ()'s is an exit.

..wayne..


From zsh-users-return-13048-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 21 22:19:23 2008
Return-Path: <zsh-users-return-13048-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 348 invoked from network); 21 Jul 2008 22:19:22 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Jul 2008 22:19:22 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 12939 invoked from network); 21 Jul 2008 22:19:02 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Jul 2008 22:19:02 -0000
Received: (qmail 15138 invoked by alias); 21 Jul 2008 22:18:52 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13048
Received: (qmail 15125 invoked from network); 21 Jul 2008 22:18:51 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 21 Jul 2008 22:18:51 -0000
Received: from yw-out-2324.google.com (yw-out-2324.google.com [74.125.46.29])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 951BF80561C3
	for <zsh-users@sunsite.dk>; Tue, 22 Jul 2008 00:18:48 +0200 (CEST)
Received: by yw-out-2324.google.com with SMTP id 5so566171ywb.81
        for <zsh-users@sunsite.dk>; Mon, 21 Jul 2008 15:18:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=+BKWmg7XZ0UmQG5WMhkdL7DdujRzR2OgZ7zMOnOU5cs=;
        b=uPbh0hGVpq+j8VONCVl1dMsvVg/9ghf28AeVh3ee/ebvw+1L31Qzt6Qa+gWhaeQm3K
         2QCrbxT+Zyio7LM3CHNT5ZNJx8tcCP4llmhnPIfe9Z933LCpp5i9MqfN1PX7Vdgf8IB+
         J5w3gPLdNRtjg/lwjRT5CmunFCk/tEdT7+6Cg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=aRrSw0aWCV3KF5wCeC75yGaJQcxnTGtMUZhrCOh0DylKusGTG4CCqX6BWTZ5SW9+T3
         cL4vDqv0OT/k6vpA1eZweiJdxDzhaesHdb1LdW8Ag2BYiQ2Oygm2LmQ4yNoVS48ZX6H6
         QHMt3IUTpOle5bQ6QR246nsvPm+b/+veZsdX0=
Received: by 10.150.58.5 with SMTP id g5mr4482800yba.90.1216678727758;
        Mon, 21 Jul 2008 15:18:47 -0700 (PDT)
Received: from ?192.168.1.101? ( [75.181.118.140])
        by mx.google.com with ESMTPS id 9sm8226447ywf.2.2008.07.21.15.18.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 21 Jul 2008 15:18:47 -0700 (PDT)
Message-Id: <C40BEC83-7722-4379-894C-71B9D210C635@gmail.com>
From: dackz <dackze@gmail.com>
To: zsh-users@sunsite.dk
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v926)
Subject: Tilde (%~) prompt expansion inconsistent with named directories?
Date: Mon, 21 Jul 2008 18:18:45 -0400
X-Mailer: Apple Mail (2.926)
X-Virus-Scanned: ClamAV 0.92.1/7771/Mon Jul 21 23:09:37 2008 on bifrost
X-Virus-Status: Clean

After starting up zsh, if I cd into another home folder, it prints out  
the full path. If I then do "cd ~<tab>", it starts printing out the  
named directory for the home folder.

For example:

$ cd /home/ftp
$ print -P '%~'
/home/ftp
$ cd ~<tab>
$ print -P '%~'
~ftp

I'm guessing this has to do with the named directory cache not being  
populated. Shouldn't the expansion of %~ populate it automatically?

Also, how is a directory determined to be named in prompt expansion?  
If I run "cd ~www-data", "print -P '%~'" prints /var/www instead of  
~www-data. I actually prefer this behavior, but I'm wondering how zsh  
makes the distinction in that case.


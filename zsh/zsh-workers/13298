From zsh-workers-return-13298-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Dec 19 13:51:55 2000
Return-Path: <zsh-workers-return-13298-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21096 invoked from network); 19 Dec 2000 13:51:49 -0000
Received: from postoffice.telstra.net (203.50.1.76)
  by ns1.primenet.com.au with SMTP; 19 Dec 2000 13:51:49 -0000
Received: from sunsite.auc.dk (sunsite.dk [130.225.51.30])
	by postoffice.telstra.net (8.9.3/8.9.3) with SMTP id AAA06589
	for <mason-zsh@primenet.com.au>; Wed, 20 Dec 2000 00:51:10 +1100 (EST)
	(envelope-from zsh-workers-return-13298-mason-zsh=primenet.com.au@sunsite.auc.dk)
Received: (qmail 9332 invoked by alias); 19 Dec 2000 13:48:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13298
Received: (qmail 9325 invoked from network); 19 Dec 2000 13:48:46 -0000
Date: Tue, 19 Dec 2000 14:48:42 +0100 (MET)
Message-Id: <200012191348.OAA00591@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Tue, 19 Dec 2000 12:36:28 +0000
Subject: Re: bug with for and |&


Peter Stephenson wrote:

> The problem is general to cases where a current-shell construct on the left
> of the pipeline contains an external command.  It doesn't matter what's on
> the right of the pipeline.  The code on the left seems to be executing all
> right.
> 
> % exec 3>&2
> % { ls; print Finished >&3 } |& cat
> Finished
> 
> and it hangs in zwaitjobs, waiting for the job to finish, which it never
> does.  Change `ls' to `print foo' and the problem goes away.

Rats. I still can't reproduce it, neither with (on Linux), nor without 
(on DU) the patch. So I guess there must be some kind of race
condition somewhere...


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


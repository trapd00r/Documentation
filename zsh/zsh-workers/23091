From zsh-workers-return-23091-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 05 20:46:59 2007
Return-Path: <zsh-workers-return-23091-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16528 invoked from network); 5 Jan 2007 20:46:52 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Jan 2007 20:46:52 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 33929 invoked from network); 5 Jan 2007 20:46:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Jan 2007 20:46:46 -0000
Received: (qmail 21955 invoked by alias); 5 Jan 2007 20:46:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23091
Received: (qmail 21945 invoked from network); 5 Jan 2007 20:46:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Jan 2007 20:46:43 -0000
Received: (qmail 33634 invoked from network); 5 Jan 2007 20:46:43 -0000
Received: from mtaout03-winn.ispmail.ntl.com (81.103.221.49)
  by a.mx.sunsite.dk with SMTP; 5 Jan 2007 20:46:40 -0000
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout03-winn.ispmail.ntl.com with ESMTP
          id <20070105204635.UVJN1865.mtaout03-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <zsh-workers@sunsite.dk>; Fri, 5 Jan 2007 20:46:35 +0000
Received: from pwslaptop.csr.com ([81.107.47.35])
          by aamtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070105204635.QNXF219.aamtaout01-winn.ispmail.ntl.com@pwslaptop.csr.com>
          for <zsh-workers@sunsite.dk>; Fri, 5 Jan 2007 20:46:35 +0000
Received: from pwslaptop.csr.com (pwslaptop.csr.com [127.0.0.1])
	by pwslaptop.csr.com (8.13.8/8.13.7) with ESMTP id l05KkQI8018388
	for <zsh-workers@sunsite.dk>; Fri, 5 Jan 2007 20:46:27 GMT
Message-Id: <200701052046.l05KkQI8018388@pwslaptop.csr.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-workers@sunsite.dk
Subject: Re: problems in zshcompctl.1, zshcontrib.1, zshmodules.1 
In-Reply-To: Message from esr@thyrsus.com 
   of "Mon, 01 Jan 2007 19:04:55 EST." <200701020004.l0204tp2028017@snark.thyrsus.com> 
Date: Fri, 05 Jan 2007 20:46:26 +0000

esr@thyrsus.com wrote:
> Problems with zshcompctl.1:
> 
> 1. List syntax error. This means .IP, .TP or .RS/.RE markup is garbled.
> This confuses doclifter, and may also mess up stricter troff
> interpreters like Xman, Rosetta, and TkMan.

I would guess it's complaining about the nofill() instructions, but it's
not clear... I've rewritten it to be closer to other command descriptions.

> Problems with zshcontrib.1:
> 
> 1. List syntax error. This means .IP, .TP or .RS/.RE markup is garbled.
> This confuses doclifter, and may also mess up stricter troff
> interpreters like Xman, Rosetta, and TkMan.

This was an item()(...) formatted so as to get indented paragraphs with
no other mark up; I couldn't find another way of doing that in Yodl.
I've simply removed the extra formatting.

> Problems with zshmodules.1:
> 
> 1. Unbalanced .RS or .RE macro
> 
> 2. Unclosed .RS, appears to be a broken attempt to express list structure.

This doesn't seem to be happening with yodl 1.31.18.  I gave up on more
recent versions in frustration.

Index: Doc/Zsh/compctl.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/compctl.yo,v
retrieving revision 1.7
diff -u -r1.7 compctl.yo
--- Doc/Zsh/compctl.yo	24 Apr 2005 18:38:03 -0000	1.7
+++ Doc/Zsh/compctl.yo	5 Jan 2007 20:42:19 -0000
@@ -559,15 +559,19 @@
 list of flags is used even if the current list produced matches.
 
 texinode(Extended Completion)(Example)(Alternative Completion)(Completion Using compctl)
+
+Additional options are available that restrict completion to some part
+of the command line; this is referred to as `extended completion'.
+
 sect(Extended Completion)
 startlist()
-list(nofill(tt(compctl) [ tt(-CDT) ] var(options) \
-tt(-x) var(pattern) var(options) tt(-) ... tt(-)tt(-)
-  [ var(command) ... ]))
-list(nofill(tt(compctl) [ tt(-CDT) ] var(options) \
-[ tt(-x) var(pattern) var(options) tt(-) ... tt(-)tt(-) ]
-  [ tt(PLUS()) var(options) [ tt(-x) ... tt(-)tt(-) ] ... [tt(PLUS())] ] \
-[ var(command) ... ]))
+list(tt(compctl) [ tt(-CDT) ] var(options) \
+tt(-x) var(pattern) var(options) tt(-) ... tt(-)tt(-))
+list(         [ var(command) ... ])
+list(tt(compctl) [ tt(-CDT) ] var(options) \
+[ tt(-x) var(pattern) var(options) tt(-) ... tt(-)tt(-) ])
+list(         [ tt(PLUS()) var(options) [ tt(-x) ... tt(-)tt(-) ] ... \
+[tt(PLUS())] ] [ var(command) ... ])
 endlist()
 
 The form with `tt(-x)' specifies extended completion for the
Index: Doc/Zsh/contrib.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/contrib.yo,v
retrieving revision 1.65
diff -u -r1.65 contrib.yo
--- Doc/Zsh/contrib.yo	15 Dec 2006 11:44:29 -0000	1.65
+++ Doc/Zsh/contrib.yo	5 Jan 2007 20:42:21 -0000
@@ -1624,8 +1624,6 @@
 should be checked if attempting to execute a file by extension
 tt(.)var(ext) does not have the expected effect.
 
-startitem()
-item()(
 The command `tt(alias -s) var(ext)' should show
 `tt(ps=zsh-mime-handler)'.  If it shows something else, another suffix
 alias was already installed and was not overwritten.  If it shows
@@ -1633,8 +1631,7 @@
 handler was found in the tt(.mime.types) and tt(mailcap) combination for
 tt(.ext) files.  In that case, appropriate handling should be added to
 tt(~/.mime.types) and tt(mailcap).
-)
-item()(
+
 If the extension is handled by tt(zsh-mime-handler) but the file is
 not opened correctly, either the handler defined for the type is
 incorrect, or the flags associated with it are in appropriate.  Running
@@ -1648,8 +1645,6 @@
 
 example(text/html; /usr/bin/lynx '%s'; needsterminal)
 )
-enditem()
-)
 findex(pick-web-browser)
 item(tt(pick-web-browser))(
 This function is separate from the two MIME functions described above

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


From zsh-users-return-8719-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 20 17:21:14 2005
Return-Path: <zsh-users-return-8719-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9620 invoked from network); 20 Apr 2005 17:21:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Apr 2005 17:21:13 -0000
Received: (qmail 68860 invoked from network); 20 Apr 2005 17:21:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Apr 2005 17:21:05 -0000
Received: (qmail 10993 invoked by alias); 20 Apr 2005 17:20:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8719
Received: (qmail 10974 invoked from network); 20 Apr 2005 17:20:55 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Apr 2005 17:20:55 -0000
Received: (qmail 67890 invoked from network); 20 Apr 2005 17:20:55 -0000
Received: from sj-iport-3-in.cisco.com (HELO sj-iport-3.cisco.com) (171.71.176.72)
  by a.mx.sunsite.dk with SMTP; 20 Apr 2005 17:20:51 -0000
Received: from sj-core-2.cisco.com (171.71.177.254)
  by sj-iport-3.cisco.com with ESMTP; 20 Apr 2005 10:20:39 -0700
X-IronPort-AV: i="3.92,117,1112598000"; 
   d="scan'208"; a="252318228:sNHT1051061028"
Received: from cns-build4.cisco.com (cns-build4.cisco.com [128.107.183.19])
	by sj-core-2.cisco.com (8.12.10/8.12.6) with ESMTP id j3KHKUKx005068;
	Wed, 20 Apr 2005 10:20:30 -0700 (PDT)
Received: (paullew@localhost) by cns-build4.cisco.com (8.11.2/CISCO.WS.1.2) id j3KHKZQ24653; Wed, 20 Apr 2005 10:20:35 -0700 (PDT)
From: Paul Lew <paullew@cisco.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16998.36707.213044.785468@cns-build4.cisco.com>
Date: Wed, 20 Apr 2005 10:20:35 -0700
To: Peter Stephenson <pws@csr.com>
Cc: "zsh-users@sunsite.dk" <zsh-users@sunsite.dk>
Subject: Re: Testing for broken symlinks 
In-Reply-To: <200504200915.j3K9Fbsi018162@news01.csr.com>
References: <opspishpc86k1y1x@aspen>
	<200504200915.j3K9Fbsi018162@news01.csr.com>
X-Mailer: VM 7.18 under Emacs 21.4.1
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

>>>>> "Peter" == Peter Stephenson <pws@csr.com> writes:

    Eric>> Is there any way to test if a symlink is broken?

    Peter> This will work:

    Peter> broken=(mylinktest(N-@))

    Peter> if (( ${#broken} )); then
    Peter> print mylinktest is a broken symbolic link
    Peter> else
    Peter> print mylinktest is not a symbolic link or is not broken
    Peter> fi
    Peter> <snip>

A off-topic question, what ever happen to the old feature (some
eariler version of zsh) that displays an '&' at end of the bad symlink
when displaying filename completion lists?  e.g.,

   > touch foo1 foo2
   > ln -s not-exist foo3
   > ls foo<tab>
   foo1@   foo2@   foo3&


From zsh-workers-return-11143-mason-zsh=primenet.com.au@sunsite.auc.dk Thu May 04 08:53:02 2000
Return-Path: <zsh-workers-return-11143-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1658 invoked from network); 4 May 2000 08:53:00 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 May 2000 08:53:00 -0000
Received: (qmail 26535 invoked by alias); 4 May 2000 08:52:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11143
Received: (qmail 26480 invoked from network); 4 May 2000 08:52:42 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Re: side effect of promptsubst.
References: <200005040841.KAA20875@beta.informatik.hu-berlin.de>
MIME-Version: 1.0 (generated by SEMI 1.13.7 - "Awazu")
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@m17n.org>
Date: 04 May 2000 17:53:42 +0900
In-Reply-To: <200005040841.KAA20875@beta.informatik.hu-berlin.de>
 (Sven Wischnowsky's message of "Thu, 4 May 2000 10:41:29 +0200 (MET DST)")
Message-ID: <hvozoq6pug9.fsf@serein.m17n.org>
Lines: 91
User-Agent: T-gnus/6.14.1 (based on Gnus v5.8.3) (revision 16) SEMI/1.13.7 (Awazu) FLIM/1.13.2 (Kasanui) Emacs/20.6 (i686-pc-linux-gnu) MULE/4.0 (HANANOEN)

In article <200005040841.KAA20875@beta.informatik.hu-berlin.de>,
  Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

> Missing save/restore for one of the variables used during lexing.

Thanks.  The problem is fixed.  But... 

| % make check
| cd Test ; gmake check
| gmake[1]: Entering directory `/home/akr/zsh/zsh/Test'
| if test -n "gcc"; then \
|   cd .. && \
|   gmake MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
| fi
| for f in ./*.ztst; do \
|   ../Src/zsh -f ./ztst.zsh $f; \
| done
| ./01grammar.ztst: all tests successful.
| ./02alias.ztst: all tests successful.
| ./03quoting.ztst: all tests successful.
| ./04redirect.ztst: all tests successful.
| ./05command.ztst: all tests successful.
| ./06arith.ztst: all tests successful.
| ./07cond.ztst: all tests successful.
| This test takes at least three seconds...
| This test, too, takes at least three seconds...
| ./08traps.ztst: all tests successful.
| ./09funcdef.ztst: all tests successful.
| Oops. Bug in parse_subst_string: c != STRING
| ./10prompt.ztst: all tests successful.
| ./11glob.ztst: all tests successful.
| ./12procsubst.ztst: all tests successful.
| *** /tmp/zsh.ztst.out.11863     Thu May  4 17:52:11 2000
| --- /tmp/zsh.ztst.tout.11863    Thu May  4 17:52:11 2000
| ***************
| *** 1 ****
| ! and now even the pubs are shut.
| --- 1 ----
| ! 'and now' "even the pubs" \a\r\e shut.
| Test ./13parameter.ztst failed: output differs from expected as shown above for:
|   foo="'and now' \"even the pubs\" \\a\\r\\e shut."
|   print -r ${(Q)foo}
| Error output:
| Oops. Bug in parse_subst_string: len < l
| Was testing: ${(Q)...}
| ./13parameter.ztst: test failed.
| ./50cd.ztst: all tests successful.
| ./51xtrace.ztst: all tests successful.
| ./52zregexparse.ztst: all tests successful.
| *** /tmp/zsh.ztst.out.12302     Thu May  4 17:52:14 2000
| --- /tmp/zsh.ztst.tout.12302    Thu May  4 17:52:21 2000
| ***************
| *** 1,12 ****
|   line: {: }{}
| ! DESCRIPTION:{file}
| ! DI:{dir1}
| ! DI:{dir2}
| ! FI:{file1}
| ! FI:{file2}
| ! line: {: dir1/}{}
| ! line: {: dir2/}{}
| ! line: {: file1}{}
| ! line: {: file2}{}
| ! line: {: dir1/}{}
| ! line: {: dir2/}{}
| --- 1,7 ----
|   line: {: }{}
| ! line: {: }{}
| ! line: {: }{}
| ! line: {: }{}
| ! line: {: }{}
| ! line: {: }{}
| ! line: {: }{}
| Test ./53completion.ztst failed: output differs from expected as shown above for:
|   comptest $': \t\t\t\t\t\t\t'
| Error output:
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Oops. Bug in parse_subst_string: len < l
| Was testing: directories and files
| ./53completion.ztst: test failed.
| gmake[1]: *** [check] Error 1
| gmake[1]: Leaving directory `/home/akr/zsh/zsh/Test'
| gmake: *** [check] Error 2
-- 
Tanaka Akira


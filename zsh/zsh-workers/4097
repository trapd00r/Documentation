From zsh-workers-request@math.gatech.edu Fri Jun 12 07:47:23 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24486 invoked from network); 12 Jun 1998 07:47:22 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 12 Jun 1998 07:47:22 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id DAA19042;
	Fri, 12 Jun 1998 03:42:26 -0400 (EDT)
Resent-Date: Fri, 12 Jun 1998 03:42:26 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980612004322.ZM19699@candle.brasslantern.com>
Date: Fri, 12 Jun 1998 00:43:22 -0700
In-Reply-To: <199806101056.DAA06694@bebop.clari.net>
Comments: In reply to Wayne Davison <wayne@clari.net>
        "PATCH: some minor fixes for zle_hist.c (3.1.4)" (Jun 10,  3:56am)
References: <199806101056.DAA06694@bebop.clari.net>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@math.gatech.edu
Subject: Re: PATCH: some minor fixes for zle_hist.c (3.1.4)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"XSTy_1.0.Tf4.XlDWr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4097
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Jun 10,  3:56am, Wayne Davison wrote:
} Subject: PATCH: some minor fixes for zle_hist.c (3.1.4)
}
} I've fixed a couple minor bugs in zle_hist.c in 3.1.4:
} 
}  + The up-line and down-line code was duplicated in multiple spots
}    in zle_hist.c, and among the different versions there was one
}    inconsistency which I believe is a bug.

I'm staring at this code and I've come to the conclusion that if it
works the same as the old code, then the old code had more bugs than
Wayne fixed.

I would have expected zmult to indicate how many previous occurrences
of the first word on the current line to search through. However,
historysearchbackward() ignores zmult entirely, and uplineorsearch()
attempts to move up zmult lines (and reduces zmult by the number of
lines it moved) -before- beginning the search ...

So a multiplier on up-line-or-search means "move up N lines in the edit
buffer, or if you can't move N lines, then search the history for the
first word on the first line in the edit buffer."

Does that seem as useless to anyone else as it does to me?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-26197-mason-zsh=primenet.com.au@sunsite.dk Mon Dec 29 23:40:51 2008
Return-Path: <zsh-workers-return-26197-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6274 invoked from network); 29 Dec 2008 23:40:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Dec 2008 23:40:47 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 30190 invoked from network); 29 Dec 2008 23:40:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Dec 2008 23:40:43 -0000
Received: (qmail 12353 invoked by alias); 29 Dec 2008 23:40:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26197
Received: (qmail 12336 invoked from network); 29 Dec 2008 23:40:37 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 29 Dec 2008 23:40:37 -0000
Received: from fk-out-0910.google.com (fk-out-0910.google.com [209.85.128.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id F3B9D80308BE
	for <zsh-workers@sunsite.dk>; Tue, 30 Dec 2008 00:40:33 +0100 (CET)
Received: by fk-out-0910.google.com with SMTP id 26so2684799fkx.13
        for <zsh-workers@sunsite.dk>; Mon, 29 Dec 2008 15:40:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=env6XVxzZhEI2NboEs/l/HJptTxi4GfiJgLB+jJFdJc=;
        b=s7HcgVhZVL4s4PGL/pEjyLbBC5vCLPXMZC2/0NxRHNQDMozgaIU9kO3197aa28Ony7
         75bYyAg1Tty+5hHCdyRM1dLTGWC+ZeyBdPIidfeMnfuhDmngdbcudORnNMykntsUqz7m
         t9yQ8m0jZ0Y9X0TMSg3fCWbwwPwfmbkuRqsZ8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=OhQaWwFh64hD7/ptV3Go+phQz54k6XbqTl5OrPTqbjUEJUNJR/wADaOE09NYkhBfgM
         N/uu2wR8EdQG4/gIeYOFT78CEJWoZMHlXSeuvdEGu9uIfyayiieWNXjaFkR0gI4FZmQn
         T5E5asGp7ol9eMO6ncJd2i7vS+nCdGSQIn5ZQ=
Received: by 10.103.233.12 with SMTP id k12mr5059094mur.36.1230594033166;
        Mon, 29 Dec 2008 15:40:33 -0800 (PST)
Received: by 10.103.108.4 with HTTP; Mon, 29 Dec 2008 15:40:33 -0800 (PST)
Message-ID: <17393e3e0812291540u366992a2l4ef42fee6341a0bf@mail.gmail.com>
Date: Mon, 29 Dec 2008 18:40:33 -0500
From: "Matt Wozniski" <godlygeek@gmail.com>
To: "Richard Hartmann" <richih.mailinglist@gmail.com>, 381842@bugs.debian.org, 
	zsh-workers@sunsite.dk
Subject: Re: Bug triage
In-Reply-To: <20081229233506.GM17090@prunille.vinc17.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d460de70812291311s3fe60715of556b785037f3bb1@mail.gmail.com>
	 <20081229233506.GM17090@prunille.vinc17.org>
X-Virus-Scanned: ClamAV 0.92.1/8811/Mon Dec 29 21:02:38 2008 on bifrost
X-Virus-Status: Clean

On 12/29/08, Vincent Lefevre wrote:
> reopen 381842
>  found 381842 4.3.6-7
>  thanks
>
>  On 2008-12-29 22:11:49 +0100, Richard Hartmann wrote:
>  > I am triaging bugs against zsh in Debian's BTS.
>  > zsh 4.3.6 does not show this behaviour, any more.
>  >
>  > Re-open if I made a mistake, please.
>
>  The bug occurs when one types Ctrl-C at the first dpkg completion
>  (e.g. "dpkg -s lib[TAB]"), and before zsh could find the possible
>  matches. A shell variable _deb_packages_cache_installed gets defined
>  but contains nothing.
>
>  I can reproduce it all the time on my powerpc machine, but not on
>  x86_64 (but perhaps because this x86_64 machine is so fast I cannot
>  type Ctrl-C early enough).
>
>  I can also reproduce it on my Nokia N810 with a zsh 4.3.9 I compiled.
>
>  I don't know how this can be fixed, but something like: do not
>  define this variable when the function that computed this cache
>  had been interrupted, or regard an empty variable as an invalid
>  cache.

Seems that not defining the variable when the function that defined it
was interrupted would be best, if it's not too tough to implement.
Regarding an empty variable as invalid is still better than allowing
an empty variable, but depending on the code (which I haven't looked
at) it might be able to create a variable holding only part of a valid
cache.

Just something to think about.

~Matt


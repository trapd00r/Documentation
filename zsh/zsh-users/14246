From zsh-users-return-14246-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 23 02:14:29 2009
Return-Path: <zsh-users-return-14246-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20797 invoked from network); 23 Jul 2009 02:14:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 23 Jul 2009 02:14:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 52873 invoked from network); 23 Jul 2009 02:13:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Jul 2009 02:13:56 -0000
Received: (qmail 14498 invoked by alias); 23 Jul 2009 02:13:19 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14246
Received: (qmail 14477 invoked from network); 23 Jul 2009 02:13:18 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 23 Jul 2009 02:13:18 -0000
Received: from mail-ew0-f218.google.com (mail-ew0-f218.google.com [209.85.219.218])
	by bifrost.dotsrc.org (Postfix) with ESMTP id C14CF8027106
	for <zsh-users@sunsite.dk>; Thu, 23 Jul 2009 04:13:10 +0200 (CEST)
Received: by ewy18 with SMTP id 18so656047ewy.45
        for <zsh-users@sunsite.dk>; Wed, 22 Jul 2009 19:13:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=OZ3aKt6k0TqG71mcxiiAy7UxbtrEsbxqCwJTlCmhOkI=;
        b=GU+7sFXZRm1w9JCua+HabrPJDN+d8eSgWoAiNOfMzDjSY+tugKuIN8uAQ4p6SROgNM
         0hz8GQtvWFkBTk047JBqDNTeFItcCTSpuKFSQbJ43Wu9aRaysRiPGjTuejSeUR9UWLMG
         en1PyAN/i9T2YgRfx38vY1NjUamKtySxt9yE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CeFne44dgk7WbEcTiQuPtdbv/tv1Q5qJ6kRVvmqtvmowMC6etL82h2XSlvEGbDMx6j
         Wl0Wpo0AE9rGP31eFzD4O0wi2KIKA2WaEvGB2WVp27NcGC32RoAaGhCgeojUfUnk9Zfo
         dKnvDHzLoE8WUH4MRM9axBi5wQzn1kxsNdkbU=
MIME-Version: 1.0
Received: by 10.210.109.19 with SMTP id h19mr7292232ebc.56.1248315189383; Wed, 
	22 Jul 2009 19:13:09 -0700 (PDT)
In-Reply-To: <291b78b50907052054q52e5515cp3104fa34b19e670a@mail.gmail.com>
References: <291b78b50907052054q52e5515cp3104fa34b19e670a@mail.gmail.com>
Date: Thu, 23 Jul 2009 10:13:09 +0800
Message-ID: <291b78b50907221913k568b8ea5m50a851df6a570e54@mail.gmail.com>
Subject: Re: git completion really slow in a big repo
From: Ryan Ye <yejianye@gmail.com>
To: zsh-users@sunsite.dk
Content-Type: multipart/alternative; boundary=000e0cd1e5966e5405046f5607d4
X-Virus-Scanned: ClamAV 0.94.2/9606/Wed Jul 22 23:32:02 2009 on bifrost
X-Virus-Status: Clean

--000e0cd1e5966e5405046f5607d4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Anyone know the solution about this ?
Another question is if I can't bear the slowness of git completion, how
could I turn that off in .zshrc ?

Thanks,
Ryan

2009/7/6 Ryan Ye <yejianye@gmail.com>

> I am using zsh 4.3.10. When I type 'git checkout master-<TAB>', the
> completion for the rest of the branch name is really slow (take more than 15
> secs).
> When I use strace to log all system calls in the completion, I found zsh
> access all the files in all sub dirs under current working directory.
> Because I'm executing the command at the root of my tree, there're more than
> 10,000 files, which really slows things down. To prove that's the cause of
> the problem, I cd into a leaf directory and do 'git checkout master-<TAB>'
> again. This time the completion finishing in less than one sec.
>
> So my question is that why a git checkout need reading the full file list
> under a directory? it's unacceptable for a large tree. Is there any options
> I could tweak to change this behavior ?
>
> Thanks,
> Ryan
>

--000e0cd1e5966e5405046f5607d4
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Anyone know the solution about this ? <br>Another question is if I can&#39;=
t bear the slowness of git completion, how could I turn that off in .zshrc =
?<br><br>Thanks,<br>Ryan<br><br><div class=3D"gmail_quote">2009/7/6 Ryan Ye=
 <span dir=3D"ltr">&lt;<a href=3D"mailto:yejianye@gmail.com">yejianye@gmail=
.com</a>&gt;</span><br>
<blockquote class=3D"gmail_quote" style=3D"border-left: 1px solid rgb(204, =
204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">I am using zsh 4.=
3.10. When I type &#39;git checkout master-&lt;TAB&gt;&#39;, the completion=
 for the rest of the branch name is really slow (take more than 15 secs). <=
br>
When I use strace to log all system calls in the completion, I found zsh ac=
cess all the files in all sub dirs under current working directory. Because=
 I&#39;m executing the command at the root of my tree, there&#39;re more th=
an 10,000 files, which really slows things down. To prove that&#39;s the ca=
use of the problem, I cd into a leaf directory and do &#39;git checkout mas=
ter-&lt;TAB&gt;&#39; again. This time the completion finishing in less than=
 one sec. <br>

<br>So my question is that why a git checkout need reading the full file li=
st under a directory? it&#39;s unacceptable for a large tree. Is there any =
options I could tweak to change this behavior ?<br><br>Thanks,<br><font col=
or=3D"#888888">Ryan<br>

</font></blockquote></div><br>

--000e0cd1e5966e5405046f5607d4--


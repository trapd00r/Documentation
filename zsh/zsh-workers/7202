From zsh-workers-return-7202-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 19 15:08:17 1999
Return-Path: <zsh-workers-return-7202-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11761 invoked from network); 19 Jul 1999 15:08:15 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jul 1999 15:08:14 -0000
Received: (qmail 9866 invoked by alias); 19 Jul 1999 15:08:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7202
Received: (qmail 9859 invoked from network); 19 Jul 1999 15:08:00 -0000
Message-Id: <9907191437.AA34541@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: DEC Alpha - Digital Unix 3.0 - Re: Diff file for 3.1.6-test-2 available 
In-Reply-To: "Irving_Wolfe@Happy-Man.com"'s message of "Mon, 19 Jul 1999 07:47:30 DFT."
             <19990719074730.H326@Happy-Man.com> 
Date: Mon, 19 Jul 1999 16:37:04 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Irving_Wolfe@Happy-Man.com wrote:
> My "make all" ended with:
> 
> gcc -c -I.  -DHAVE_CONFIG_H -DMODULE -Wall -Wno-implicit -Wmissing-prototypes
>  -O2 -fpic -o clone..o clone.c
> clone.c: In function `bin_clone':
> clone.c:64: too few arguments to function `ioctl'
> *** Exit 1
> Stop.

Don't see why ioctl() shouldn't have three arguments, like it does
everywhere else in the code --- some manual pages specify this --- but it's
weird this hasn't shown up before.  Maybe it's got something to do with the
difference between varargs and stdarg?

--- Src/Modules/clone.c.ioc	Thu Dec 17 12:17:01 1998
+++ Src/Modules/clone.c	Mon Jul 19 16:26:35 1999
@@ -61,7 +61,7 @@
 	    zwarnnam(nam, "failed to create new session: %e", NULL, errno);
 #endif
 #ifdef TIOCNOTTY
-	    if (ioctl(SHTTY, TIOCNOTTY))
+	    if (ioctl(SHTTY, TIOCNOTTY, 0))
 		zwarnnam(nam, "%e", NULL, errno);
 	    setpgrp(0L, mypid);
 #endif

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-workers-return-21708-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 08 10:02:20 2005
Return-Path: <zsh-workers-return-21708-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14472 invoked from network); 8 Sep 2005 10:02:18 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Sep 2005 10:02:18 -0000
Received: (qmail 990 invoked from network); 8 Sep 2005 10:02:12 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Sep 2005 10:02:12 -0000
Received: (qmail 28681 invoked by alias); 8 Sep 2005 10:02:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21708
Received: (qmail 28672 invoked from network); 8 Sep 2005 10:02:09 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Sep 2005 10:02:09 -0000
Received: (qmail 705 invoked from network); 8 Sep 2005 10:02:09 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 8 Sep 2005 10:02:04 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T7341cce7ec0a6c8d012dc@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Thu, 8 Sep 2005 10:59:46 +0100
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 8 Sep 2005 11:03:05 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j88A222w024380
	for <zsh-workers@sunsite.dk>; Thu, 8 Sep 2005 11:02:02 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j88A215f024377
	for <zsh-workers@sunsite.dk>; Thu, 8 Sep 2005 11:02:02 +0100
Message-Id: <200509081002.j88A215f024377@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: Re: various weirdnesses with unicode support 
In-reply-to: <20050908085533.GA2463@fargo> 
References: <237967ef05090713304637c1f1@mail.gmail.com> <20050908085533.GA2463@fargo>
Date: Thu, 08 Sep 2005 11:02:00 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 08 Sep 2005 10:03:05.0772 (UTC) FILETIME=[81CE9EC0:01C5B45C]
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

David =?utf-8?B?R8OzbWV6?= wrote:
> Hi Mikael ;),
> 
> On Sep 07 at 10:30:24, Mikael Magnusson wrote:
> > * Having zsh in utf-8 locale but the terminal inputting for example
> > ISO-8859-1 makes zsh enter some weird state where
> 
> Yep, i noticed too this one. It becomes necessary to logout, resetting
> the terminal doesn't fix it. From your list, i think this is the
> most serious problem.

It might be because the multibyte input state never gets reset
(getrestchar() in zle_main.c).  How does this manifest itself?  Are you
unable even to generate a new line?  If you can, resetting the state for
each line would be enough.  Otherwise we could time out multibyte
characters and return, for example, a '?'.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


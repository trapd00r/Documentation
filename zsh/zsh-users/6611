From zsh-users-return-6611-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 24 15:59:13 2003
Return-Path: <zsh-users-return-6611-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15590 invoked from network); 24 Sep 2003 15:59:12 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 24 Sep 2003 15:59:12 -0000
Received: (qmail 3862 invoked by alias); 24 Sep 2003 15:58:45 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6611
Received: (qmail 3851 invoked from network); 24 Sep 2003 15:58:44 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 24 Sep 2003 15:58:44 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [212.227.126.204] by sunsite.dk (MessageWall 1.0.8) with SMTP; 24 Sep 2003 15:58:44 -0000
Received: from [172.17.36.7] (helo=erdbeere.use.schlund.de)
	by mxintern.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1A2C2O-000221-00
	for zsh-users@sunsite.dk; Wed, 24 Sep 2003 17:58:44 +0200
Received: from luthien by erdbeere.use.schlund.de with local
	id 1A2C3R-0003eQ-00
	for <zsh-users@sunsite.dk>; Wed, 24 Sep 2003 17:59:49 +0200
Date: Wed, 24 Sep 2003 17:59:49 +0200
From: Dominik Vogt <dominik.vogt@gmx.de>
To: zsh-users@sunsite.dk
Subject: Re: a little problem with the second argument to cd
Message-ID: <20030924155949.GE32061@gmx.de>
Reply-To: zsh-users@sunsite.dk
Mail-Followup-To: zsh-users@sunsite.dk
References: <20030924135231.GB32061@gmx.de> <1030924153602.ZM30551@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1030924153602.ZM30551@candle.brasslantern.com>
User-Agent: Mutt/1.3.28i

On Wed, Sep 24, 2003 at 03:36:02PM +0000, Bart Schaefer wrote:
> On Sep 24,  3:52pm, Dominik Vogt wrote:
> } Subject: a little problem with the second argument to cd
> }
> }   $ cd foo bar
> }   cd: no such file or directory: .../bar/libfoo
> } 
> } Can I force zsh to consider foo/libbar as a match too (preferrably
> } without re-implementing the whole functionality as a script)?
> 
> The answer is either "no", or "only by manually clarifying", e.g:
> 
>     $ cd bfoo bbar
> 
> The two-arg form of cd does _exactly_ what this does:
> 
>     cd ${PWD/foo/bar}
> 
> There's no "considering" involved, it's a strictly textual replacement
> with no reference to the filesystem.
> 
> The function to do what you want would look something like this:
> 
>     cd2 () {
> 	integer i=0
> 	local target="$1"
> 	if ((ARGC > 1))
> 	then
> 	    while ((++i)) && [[ "$PWD" != "${(SI-$i-)PWD#${(q)1}}" ]]
> 	    do
> 		target="${(SI-$i-)PWD/${(q)1}/$2}"
> 		[[ -d "$target" && -r "$target" ]] && break
> 		target="${(SI-$i-)PWD//${(q)1}/$2}"
> 		[[ -d "$target" && -r "$target" ]] && break
> 		target=
> 	    done
> 	fi
> 	cd "${target:-${PWD/${(q)1}/$2}}"
>     }

Wow, I love this shell.  I thought it would be much more difficult.
Works like a charm, thank you very much!

Ciao

Dominik ^_^  ^_^


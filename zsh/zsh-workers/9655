From zsh-workers-return-9655-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 10 13:37:49 2000
Return-Path: <zsh-workers-return-9655-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22564 invoked from network); 10 Feb 2000 13:37:48 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Feb 2000 13:37:48 -0000
Received: (qmail 1585 invoked by alias); 10 Feb 2000 13:37:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9655
Received: (qmail 1576 invoked from network); 10 Feb 2000 13:37:39 -0000
Date: Thu, 10 Feb 2000 13:37:36 +0000
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: duplicate targets in Makefile rule
Message-ID: <20000210133736.A12687@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
References: <20000209235805.A24294@thelonious.new.ox.ac.uk> <E12IqMG-0003bS-00@crucigera.fysh.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre3i
In-Reply-To: <E12IqMG-0003bS-00@crucigera.fysh.org>
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.12 i686

Zefram (zefram@fysh.org) wrote:
> Adam Spiers wrote:
> >When is sdir not `.'?
> 
> When you're compiling in a build tree separate from the source tree.

I see ... so how can we stop make from complaining when sdir is `.' ?
If we're compiling in a separate build tree then presumably we don't
need a rule for the source tree version of zsh.texi, so can we just
get rid of the zsh.texi target and leave the $(dir)/zsh.texi one?  If
we can, the patch is below.  However noone else seems to have
encountered a problem with this (and neither did I before Christmas),
so it's more likely I've done something wrong.  Any ideas what?

Index: Doc/Makefile.in
===================================================================
RCS file: /projects/zsh/zsh/Doc/Makefile.in,v
retrieving revision 1.1.1.60
diff -u -r1.1.1.60 Makefile.in
--- Doc/Makefile.in	2000/02/07 01:59:21	1.1.1.60
+++ Doc/Makefile.in	2000/02/10 13:33:29
@@ -82,7 +82,7 @@
 zsh.dvi: $(sdir)/zsh.texi
 	$(TEXI2DVI) $(sdir)/zsh.texi
 
-zsh.texi $(sdir)/zsh.texi:
+$(sdir)/zsh.texi:
 	case $@ in \
 	  */*) target=$@ ;; \
 	  *) target=$(sdir)/$@ ;; \


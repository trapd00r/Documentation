From zsh-users-return-11952-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 08 01:22:57 2007
Return-Path: <zsh-users-return-11952-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16390 invoked from network); 8 Oct 2007 01:22:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Oct 2007 01:22:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 101 invoked from network); 8 Oct 2007 01:22:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2007 01:22:39 -0000
Received: (qmail 14307 invoked by alias); 8 Oct 2007 01:22:31 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11952
Received: (qmail 14286 invoked from network); 8 Oct 2007 01:22:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Oct 2007 01:22:30 -0000
Received: (qmail 98651 invoked from network); 8 Oct 2007 01:22:30 -0000
Received: from g.primenet.com.au (203.24.36.10)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2007 01:22:23 -0000
Received: (qmail 3529 invoked by uid 100); 8 Oct 2007 01:22:19 -0000
Date: Mon, 8 Oct 2007 11:22:19 +1000
From: Geoff Wing <gcw@zsh.org>
To: zsh-users@sunsite.dk
Subject: Re: PROMPT escape sequences
Message-ID: <20071008012219.GA595@primenet.com.au>
References: <20071007103407.33577.qmail@smasher.org> <071007103242.ZM23816@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <071007103242.ZM23816@torch.brasslantern.com>
Organization: PrimeNet Computer Consultancy
User-Agent: Mutt/1.5.16 (2007-06-09)

On Monday 2007-10-08 10:40 +1000, Bart Schaefer output:
:On Oct 7, 11:34pm, Atom Smasher wrote:
[...]
:} PS1='%{^[[36m%}%# '
:This enters cyan coloring mode but does not leave it again.

:So the answer to this question is:
:} is there a way to set a color at the prompt that doesn't reset to default 
:} when i tab-complete?
:No, there isn't, because you're relying on the entire prompt being re-
:painted every time zsh needs to redraw the line that begins with the

I (obviously) don't understand what the desired result is.  Ah, OK, 
now I've tried with alwayslastprompt it becomes clearer.

The only stored character attributes (currently) from the prompt are
bold, standout and underline.  If you use one of those (I use bold for
my main text) then you should also be setting POSTEDIT appropriately,
e.g.  POSTEDIT=`print -P -n %b`  # note that %b turns off all attributes

:It "works" for %S because of a quirk in the way some terminals (xterm
:included) implement "standout mode", not because of anything zsh does
:differently.

Well, actually, it should be handling these correctly.  For bold, standout
and underline.

Regards,
Geoff


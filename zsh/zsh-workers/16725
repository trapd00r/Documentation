From zsh-workers-return-16725-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 27 08:22:01 2002
Return-Path: <zsh-workers-return-16725-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19524 invoked from network); 27 Feb 2002 08:22:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 27 Feb 2002 08:22:00 -0000
Received: (qmail 11595 invoked by alias); 27 Feb 2002 08:21:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16725
Received: (qmail 11581 invoked from network); 27 Feb 2002 08:21:54 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Zsh hackers list'" <zsh-workers@sunsite.dk>
Subject: detecting superuser condition in completion
Date: Wed, 27 Feb 2002 11:25:18 +0300
Message-ID: <001501c1bf68$4a8cccd0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.3416
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal

Sometimes some options make sense only for superuser. Unfortunately
testing for EUID is not enough because it does not work for completions
after sudo (at least).

Brute force method is to make _sudo set some variable and test for it
later. Any better idea? If not, I guess we should agree on variable name
or provide some helper like

_is_superuser && _wanted ...

Comments?

-andrej


From zsh-workers-return-14260-mason-zsh=primenet.com.au@sunsite.dk Tue May 08 13:34:43 2001
Return-Path: <zsh-workers-return-14260-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16838 invoked from network); 8 May 2001 13:34:42 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 May 2001 13:34:42 -0000
Received: (qmail 14616 invoked by alias); 8 May 2001 13:34:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14260
Received: (qmail 14586 invoked from network); 8 May 2001 13:34:30 -0000
Date: Tue, 8 May 2001 09:34:04 -0400
From: Clint Adams <clint@zsh.org>
To: Peter Stephenson <pws@csr.com>
Cc: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: Termcap saga again
Message-ID: <20010508093404.A20808@dman.com>
References: <Tc0a88d01536464c3f9@mailsweeper01.cambridgesiliconradio.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <Tc0a88d01536464c3f9@mailsweeper01.cambridgesiliconradio.com>; from pws@csr.com on Tue, May 08, 2001 at 10:36:59AM +0100

> SunOS 5.8 is giving me
> 
> ../../../Src/Modules/termcap.c: In function `scantermcap':
> ../../../Src/Modules/termcap.c:327: `boolcodes' undeclared (first use in this function)
> ../../../Src/Modules/termcap.c:327: (Each undeclared identifier is reported only once
> ../../../Src/Modules/termcap.c:327: for each function it appears in.)
> ../../../Src/Modules/termcap.c:336: `numcodes' undeclared (first use in this function)
> ../../../Src/Modules/termcap.c:345: `strcodes' undeclared (first use in this function)

I don't get that from Forte C; these are the only warnings I get.

"parse.c", line 1911: warning: end-of-loop code not reached
"parse.c", line 1973: warning: end-of-loop code not reached
"parse.c", line 1983: warning: end-of-loop code not reached
"/usr/include/iso/stddef_iso.h", line 73: warning: macro redefined: offsetof
"termcap.c", line 132: warning: argument #3 is incompatible with prototype:
        prototype: pointer to function(char) returning int : "/usr/include/term.h", line 1205
        argument : pointer to function(int) returning int
"termcap.c", line 135: warning: improper pointer/integer combination: arg #1
"termcap.c", line 135: warning: argument #3 is incompatible with prototype:
        prototype: pointer to function(char) returning int : "/usr/include/term.h", line 1205
        argument : pointer to function(int) returning int
"terminfo.c", line 96: warning: argument #3 is incompatible with prototype:
        prototype: pointer to function(char) returning int : "/usr/include/term.h", line 1205
        argument : pointer to function(int) returning int

HAVE_CURSES_H is being defined.

On the other hand, I get what you get with gcc 2.95.2.

> which I find a bit alarming.  However, the arg 3 messages are because I
> have `int (*)(char)' as that argument's type whereas we're using `int
> (*)(int)', while the arg 1 message appears because tgoto is only defined if
> __STDC__ isn't.  So this doesn't seem really to be our fault

We could test for this and provide char (*)(int) and int (*)(char) versions
of putraw/putshout, but it hardly seems worth it.


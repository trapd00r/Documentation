From zsh-workers-return-14856-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 12 08:17:33 2001
Return-Path: <zsh-workers-return-14856-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21175 invoked from network); 12 Jun 2001 08:17:31 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Jun 2001 08:17:31 -0000
Received: (qmail 14495 invoked by alias); 12 Jun 2001 08:17:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14856
Received: (qmail 14457 invoked from network); 12 Jun 2001 08:17:03 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Tue, 12 Jun 2001 10:15:59 +0200 (MET DST)
Message-Id: <200106120815.KAA02209@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
CC: Timothy Miller <tsm@cs.brown.edu>
Subject: Re: fatal flaw zsh 4.0.1 on irix 6.3 & 6.5: suspend "ls -l|less" then resume hangs
In-Reply-To: <yehsnh7uk41.fsf@water.cs.brown.edu>

Timothy Miller wrote:

> I continue to not be a subscriber to this list :-)
> 
> If I invoke zsh as "zsh-4.0.1 -f" and then run "ls -l|less" on irix 6.3
> or 6.5, control-z to suspend, and then "fg" to resume, the shell prints out
> 
> [1]  + done       ls -l | 
>        continued  less
> 
> and then hangs, unresponsive to all input (ctrl-c, ctrl-z, ctrl-\, other keys,
> etc). I include the results of Util/reporter at the end of this email. This
> bug does not happen on Solaris 2.7, AIX 4.3.2, or redhat 7.0 linux 2.2.16.
> The version of less I'm using is 290 on irix 6.3 and 332 on irix 6.5,
> solaris, and ix, and 358 on linux.

Hm, that's weird -- it's not even one of the complicated cases. The
reporter output isn't of much help here. Hence some questions:

- What does the output of `ps j' (or equivalent, showing pids and parent
  pids) show when the job hangs? (ps output with signal masks might
  help, too.)
- Have you tried it with earlier versions of zsh? Does it work there?
- Does it work if you replace `less' with another program that doesn't
  program the terminal (so much), e.g. `more' and `cat'?

And of course it works under Tru64 Unix, too, so I can't reproduce it...
sigh.


Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


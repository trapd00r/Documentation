From zsh-workers-return-20777-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 02 16:58:38 2005
Return-Path: <zsh-workers-return-20777-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6515 invoked from network); 2 Feb 2005 16:58:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 2 Feb 2005 16:58:37 -0000
Received: (qmail 70394 invoked from network); 2 Feb 2005 16:58:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Feb 2005 16:58:30 -0000
Received: (qmail 23174 invoked by alias); 2 Feb 2005 16:58:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20777
Received: (qmail 23161 invoked from network); 2 Feb 2005 16:58:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 2 Feb 2005 16:58:22 -0000
Received: (qmail 70118 invoked from network); 2 Feb 2005 16:58:22 -0000
Received: from unknown (HELO mailsweeperjp.CSR.COM) (202.214.225.228)
  by a.mx.sunsite.dk with SMTP; 2 Feb 2005 16:58:17 -0000
Received: from exchangejp.csr.com (unverified) by mailsweeperjp.CSR.COM
 (Content Technologies SMTPRS 4.3.1) with ESMTP id <T6ee25eeb50c0a879016bc@mailsweeperjp.CSR.COM> for <zsh-workers@sunsite.dk>;
 Thu, 3 Feb 2005 02:04:34 +0900
Received: from exchange03.csr.com ([10.100.137.60]) by exchangejp.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 2 Feb 2005 16:58:16 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 2 Feb 2005 16:58:13 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j12GwBqY017801
	for <zsh-workers@sunsite.dk>; Wed, 2 Feb 2005 16:58:11 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j12GwAjN017798
	for <zsh-workers@sunsite.dk>; Wed, 2 Feb 2005 16:58:10 GMT
Message-Id: <200502021658.j12GwAjN017798@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: handling of variables 
In-reply-to: <1050202152427.ZM12285@candle.brasslantern.com> 
References: <2005-02-01T12-49-14@devnull.michael-prokop.at> <200502011410.j11EAA9D029705@news01.csr.com> <1050201152428.ZM9278@candle.brasslantern.com> <1050201164011.ZM9367@candle.brasslantern.com> <1050202034754.ZM10212@candle.brasslantern.com> <200502021248.j12CmW60001921@news01.csr.com> <1050202152427.ZM12285@candle.brasslantern.com>
Date: Wed, 02 Feb 2005 16:58:10 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 02 Feb 2005 16:58:14.0016 (UTC) FILETIME=[62398800:01C50948]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Bart Schaefer wrote:
> Hmm, though, I suppose we should have added regression tests for those
> bug fixes.

Index: Test/A06assign.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/A06assign.ztst,v
retrieving revision 1.2
diff -u -r1.2 A06assign.ztst
--- Test/A06assign.ztst	7 Jul 2004 15:40:57 -0000	1.2
+++ Test/A06assign.ztst	2 Feb 2005 16:50:56 -0000
@@ -264,3 +264,16 @@
 >hello
 >hello
 >hello
+
+ repeat 10 FOO=BAR BAR=FOO echo $FOO $BAR
+0:save and restore multiple variables around builtin
+>
+>
+>
+>
+>
+>
+>
+>
+>
+>
Index: Test/C02cond.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/C02cond.ztst,v
retrieving revision 1.14
diff -u -r1.14 C02cond.ztst
--- Test/C02cond.ztst	17 Mar 2004 14:22:20 -0000	1.14
+++ Test/C02cond.ztst	2 Feb 2005 16:50:56 -0000
@@ -195,6 +195,16 @@
   [ `echo 0` -lt `echo 1` ]
 0:substituion in `[' builtin
 
+  fn() {
+    # careful: first file must exist to trigger bug
+    [[ -e unmodified ]] || print Where\'s my file\?
+    [[ unmodified -nt NonExistentFile ]]
+    print status = $?
+  }
+  fn
+0:-nt shouldn't abort on non-existent files
+>status = 1
+
 %clean
   # This works around a bug in rm -f in some versions of Cygwin
   chmod 644 unmodish


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited. 
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


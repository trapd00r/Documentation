From zsh-workers-return-8343-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Oct 20 20:49:41 1999
Return-Path: <zsh-workers-return-8343-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8067 invoked from network); 20 Oct 1999 20:49:40 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Oct 1999 20:49:40 -0000
Received: (qmail 6411 invoked by alias); 20 Oct 1999 20:33:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8343
Received: (qmail 24711 invoked from network); 20 Oct 1999 16:46:14 -0000
To: zsh-workers@sunsite.auc.dk
Subject: computil problems?
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 21 Oct 1999 01:46:12 +0900
Message-ID: <rsqd7ua2d63.fsf@crane.jaist.ac.jp>
Lines: 60
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

I found some completion problems.

Z(2):akr@is27e1u11% Src/zsh -f
is27e1u11% bindkey -e; fpath=($PWD/Completion/*(/)); autoload -U compinit; compinit -D; compdef _tst tst
is27e1u11% compconf group_matches=yes message_format='%d' description_format='%d'
is27e1u11% compconf describe_options=yes describe_values=yes option_prefix=yes

(1) flex -<TAB> show the option "+" incorrectly.

is27e1u11% flex -<TAB>
option
-  -- generate C++ scanner class
-7 -- generate 7-bit scanner
...

In pws-6, options are showd as:

option
-+ -- generate C++ scanner class
-7 -- generate 7-bit scanner
...

(2) bison <TAB> doesn't complete files at all.

is27e1u11% bison <TAB>

In pws-6, it completes files in current directory.

# I found that _bison doesn't treat *.y specialy...
# It should be treated as well as *.(yacc|bison).

(3) bison Sr<TAB> completes option letters after "Sr"

is27e1u11% bison Sr<TAB>
option
-V -- show version
...

(4) cvs add <TAB> completes cvs commands.

is27e1u11% cvs add <TAB>
cvs command
add       commit    export    log       release   tag       watchers
admin     diff      history   login     remove    unedit    
annotate  edit      import    logout    rtag      update    
checkout  editors   init      rdiff     status    watch     

Of course, it should complete arguments for `cvs add'.  Following
example shows the problem more simply.

is27e1u11% _tst () { _arguments -s '-d+:msg1:' '*::msg2:_tst2' }
is27e1u11% _tst2 () { compadd $CURRENT }
is27e1u11% tst add <TAB>
->
is27e1u11% tst add 1

It should be complete "2" rather than "1".
# pws-6 completes "2".
-- 
Tanaka Akira


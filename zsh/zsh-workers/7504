From zsh-workers-return-7504-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Aug 26 13:17:53 1999
Return-Path: <zsh-workers-return-7504-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28539 invoked from network); 26 Aug 1999 13:17:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Aug 1999 13:17:51 -0000
Received: (qmail 15904 invoked by alias); 26 Aug 1999 13:17:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7504
Received: (qmail 15873 invoked from network); 26 Aug 1999 13:17:24 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: completion
References: <199908261220.OAA15915@beta.informatik.hu-berlin.de>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 26 Aug 1999 22:17:14 +0900
In-Reply-To: Sven Wischnowsky's message of "Thu, 26 Aug 1999 14:20:11 +0200 (MET DST)"
Message-ID: <rsqzozeof51.fsf@crane.jaist.ac.jp>
Lines: 32
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <199908261220.OAA15915@beta.informatik.hu-berlin.de>,
  Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

> Should be fixed by this patch. 

Hm. `cvs -e vi <TAB>' works now. Thanks.
But common options are too disabled.

Z(2):akr@is27e1u11% ./Src/zsh -f
is27e1u11% bindkey -e; fpath=($PWD/Completion/*(/)); autoload -U compinit; compinit -D; compdef _tst tst
is27e1u11% compconf group_matches=yes
is27e1u11% compconf message_format='%d'
is27e1u11% compconf description_format='%d'
is27e1u11% cvs <TAB>
add        commit     export     log        release    tag        watchers
admin      diff       history    login      remove     unedit     
annotate   edit       import     logout     rtag       update     
checkout   editors    init       rdiff      status     watch      

In this case, the cursor is on first non-option argument *or* option
argument.  So, _arguments should complete options addition to call
_cvs_command, I suppose.

Or, should _cvs be changed to
"_arguments ... ':cvs command:_cvs_commands' '*::cvs command arguments:_cvs_args'" ?

is27e1u11% cvs -evi <TAB>
unknown cvs command: -evi

Hm.
-- 
Tanaka Akira


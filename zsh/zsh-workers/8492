From zsh-workers-return-8492-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Nov 02 14:18:10 1999
Return-Path: <zsh-workers-return-8492-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2046 invoked from network); 2 Nov 1999 14:18:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Nov 1999 14:18:08 -0000
Received: (qmail 983 invoked by alias); 2 Nov 1999 14:17:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8492
Received: (qmail 976 invoked from network); 2 Nov 1999 14:17:55 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Sven Wischnowsky" <wischnow@informatik.hu-berlin.de>,
        <zsh-workers@sunsite.auc.dk>
Subject: RE: PATCH: Re: _match still does not work in _path_files
Date: Tue, 2 Nov 1999 17:17:40 +0300
Message-ID: <002801bf253d$05c20f60$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <199910180838.KAA25889@beta.informatik.hu-berlin.de>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300

> In a different message:
>
> > Ahem ... but why is menu completion started for the last path
> component in the
> > first place? I expect it to be started for
> {functions,functions.old} - the first
> > ambiguous part. And I bet it was - once.
> >
> > I tested it in zsh-3.1.6 and there _match works :-) and look what happens:
> >
> > itsrm2% l /t/s/z/f*/_<TAB>
> > itsrm2% l /tools/share/zsh/functions/_
> > functions/      functions.old/
> >
> > press TAB once more and selection is started for the first
> ambiguous component:
>
> This works for me again. If it still doesn't work for you, I need to
> know your compconfig.
>

Nope, it still does not work here. This is the ZSH from CVS of Tanaka Akira ...
quite recent, couple of hours (anybody know, how to find exact time when files
have been updated?)

Compare:

bor@itsrm2:/tools/src/zsh-cvs/zsh%> zsh -f
itsrm2% compinit -D
zsh: command not found: compinit
itsrm2% autoload -U compinit; compinit -D
itsrm2% bindkey -e
itsrm2% setopt nolistambiguous
itsrm2% {
cursh> compconf completer='_oldlist:_complete:_match'
cursh> compconf correct_accept='2n'
cursh> compconf correct_prompt='correct to:'
cursh> compconf dumpfile='/home/bor/.zcompdump'
cursh> compconf match_insert='unambig'
cursh> compconf match_original='yes'
cursh> compconf oldlist_list='_match'
cursh> compconf path_cursor='yes'
cursh> }
itsrm2% zmodload complist
itsrm2% SELECTMIN=0
itsrm2% ls /t/s/z/f*/_<TAB>
beeps

but

bor@itsrm2:/tools/src/db-2.7.7/build_unix%> zsh-3.1.6 -f
itsrm2% cd /tools/src/zsh-3.1.6/Completion
itsrm2% fpath=($PWD/*(/))
itsrm2% autoload -U compinit; compinit -D
itsrm2% {
cursh> compconf completer='_oldlist:_complete:_match'
cursh> compconf correct_accept='2n'
cursh> compconf correct_prompt='correct to:'
cursh> compconf dumpfile='/home/bor/.zcompdump'
cursh> compconf match_insert='unambig'
cursh> compconf match_original='yes'
cursh> compconf oldlist_list='_match'
cursh> compconf path_cursor='yes'
cursh> }
itsrm2% SELECTMIN=0
itsrm2% zmodload complist
itsrm2% bindkey -e
itsrm2% setopt nolistambiguous
itsrm2% ls /t/s/z/f*/_<TAB>
itsrm2% ls /tools/share/zsh/functions<CURSOR>/_
functions/      functions.old/

with TAB cycling between functions and functions.old

It is much worse actually; in the above setup as simple as

itsrm2% ls /t/s/z/f/_<TAB>

does not work - it beeps. In 3.1.6 pure I at least get both functions and
functions.old listed (I am still not quite happy with what happens after the
second TAB ...)



/andrej


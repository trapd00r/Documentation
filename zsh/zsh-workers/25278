From zsh-workers-return-25278-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 14 16:54:03 2008
Return-Path: <zsh-workers-return-25278-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6030 invoked from network); 14 Jul 2008 16:54:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 14 Jul 2008 16:54:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 65121 invoked from network); 14 Jul 2008 16:53:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Jul 2008 16:53:52 -0000
Received: (qmail 18500 invoked by alias); 14 Jul 2008 16:53:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25278
Received: (qmail 18483 invoked from network); 14 Jul 2008 16:53:47 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 14 Jul 2008 16:53:47 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 28B3080525AB
	for <zsh-workers@sunsite.dk>; Mon, 14 Jul 2008 18:53:43 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly28g.srv.mailcontrol.com (MailControl) with ESMTP id m6EGrYcW032591
	for <zsh-workers@sunsite.dk>; Mon, 14 Jul 2008 17:53:34 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 14 Jul 2008 17:53:33 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m6EGrXel000810
	for <zsh-workers@sunsite.dk>; Mon, 14 Jul 2008 17:53:33 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m6EGrX4g000807
	for <zsh-workers@sunsite.dk>; Mon, 14 Jul 2008 17:53:33 +0100
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: PATCH: completion sections
X-Mailer: MH-E 8.0.3; nmh 1.3; GNU Emacs 22.1.1
Date: Mon, 14 Jul 2008 17:53:33 +0100
Message-ID: <806.1216054413@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 14 Jul 2008 16:53:33.0277 (UTC) FILETIME=[268DA8D0:01C8E5D2]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.71.0.138
X-Virus-Scanned: ClamAV 0.92.1/7709/Mon Jul 14 18:16:52 2008 on bifrost
X-Virus-Status: Clean

Once too often, I've selected the info node "Builtin Commands" and found
myself inside the completion description.

Index: Doc/Zsh/compctl.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/compctl.yo,v
retrieving revision 1.9
diff -u -r1.9 compctl.yo
--- Doc/Zsh/compctl.yo	16 May 2008 11:49:21 -0000	1.9
+++ Doc/Zsh/compctl.yo	14 Jul 2008 16:52:14 -0000
@@ -134,7 +134,7 @@
 The form with tt(-M) as the first and only option defines global
 matching specifications (see
 ifzman(zshcompwid)\
-ifnzman(noderef(Matching Control))\
+ifnzman(noderef(Completion Matching Control))\
 ). The match specifications given will be used for every completion
 attempt (only when using tt(compctl), not with the new completion
 system) and are tried in the order in which they are defined until one 
@@ -539,7 +539,7 @@
 only when testing words for the list of flags this flag appears in. The format
 of the var(match-spec) string is described in 
 ifzman(zshcompwid)\
-ifnzman(noderef(Matching Control))\
+ifnzman(noderef(Completion Matching Control))\
 .
 )
 enditem()
Index: Doc/Zsh/compsys.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/compsys.yo,v
retrieving revision 1.211
diff -u -r1.211 compsys.yo
--- Doc/Zsh/compsys.yo	10 Jun 2008 08:50:36 -0000	1.211
+++ Doc/Zsh/compsys.yo	14 Jul 2008 16:52:15 -0000
@@ -1956,16 +1956,16 @@
 This style is tested separately for each tag valid in the current
 context.  Its value is added to any match specifications given by the 
 tt(matcher-list) style.  It should be in the form described in
-ifzman(the section `Matching Control' in zmanref(zshcompwid))\
-ifnzman(noderef(Matching Control))\
+ifzman(the section `Completion Matching Control' in zmanref(zshcompwid))\
+ifnzman(noderef(Completion Matching Control))\
 .
 )
 kindex(matcher-list, completion style)
 item(tt(matcher-list))(
 This style can be set to a list of match specifications that are to
 be applied everywhere. Match specifications are described in
-ifzman(the section `Matching Control' in zmanref(zshcompwid))\
-ifnzman(noderef(Matching Control))\
+ifzman(the section `Completion Matching Control' in zmanref(zshcompwid))\
+ifnzman(noderef(Completion Matching Control))\
 .
 The completion system will try them one after another for each completer
 selected.  For example, to try first simple completion and, if that
Index: Doc/Zsh/compwid.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/compwid.yo,v
retrieving revision 1.42
diff -u -r1.42 compwid.yo
--- Doc/Zsh/compwid.yo	16 Jun 2008 13:01:57 -0000	1.42
+++ Doc/Zsh/compwid.yo	14 Jul 2008 16:52:15 -0000
@@ -48,15 +48,15 @@
 widget, in this case tt(expand-or-complete).
 
 startmenu()
-menu(Special Parameters)
-menu(Builtin Commands)
-menu(Condition Codes)
-menu(Matching Control)
+menu(Completion Special Parameters)
+menu(Completion Builtin Commands)
+menu(Completion Condition Codes)
+menu(Completion Matching Control)
 menu(Completion Widget Example)
 endmenu()
 
-texinode(Special Parameters)(Builtin Commands)()(Completion Widgets)
-sect(Special Parameters)
+texinode(Completion Special Parameters)(Completion Builtin Commands)()(Completion Widgets)
+sect(Completion Special Parameters)
 
 Inside completion widgets, and any functions called from them, some
 parameters have special meaning; outside these functions they are not
@@ -432,8 +432,8 @@
 )
 enditem()
 
-texinode(Builtin Commands)(Condition Codes)(Special Parameters)(Completion Widgets)
-sect(Builtin Commands)
+texinode(Completion Builtin Commands)(Completion Condition Codes)(Completion Special Parameters)(Completion Widgets)
+sect(Completion Builtin Commands)
 startitem()
 findex(compadd)
 cindex(completion widgets, adding specified matches)
@@ -634,8 +634,8 @@
 )
 item(tt(-M) var(match-spec))(
 This gives local match specifications as described below in
-noderef(Matching Control). This option may be given more than once. In 
-this case all var(match-spec)s given are concatenated with spaces
+noderef(Completion Matching Control). This option may be given more than once.
+In this case all var(match-spec)s given are concatenated with spaces
 between them to form the specification string to use.
 Note that they will only be used if the tt(-U) option is not given.
 )
@@ -809,8 +809,8 @@
 )
 enditem()
 
-texinode(Condition Codes)(Matching Control)(Builtin Commands)(Completion Widgets)
-sect(Condition Codes)
+texinode(Completion Condition Codes)(Completion Matching Control)(Completion Builtin Commands)(Completion Widgets)
+sect(Completion Condition Codes)
 cindex(completion widgets, condition codes)
 
 The following additional condition codes for use within the tt([[ ... ]])
@@ -835,8 +835,8 @@
 )
 enditem()
 
-texinode(Matching Control)(Completion Widget Example)(Condition Codes)(Completion Widgets)
-sect(Matching Control)
+texinode(Completion Matching Control)(Completion Widget Example)(Completion Condition Codes)(Completion Widgets)
+sect(Completion Matching Control)
 
 It is possible by use of the
 tt(-M) option of the tt(compadd) builtin command to specify how the
@@ -848,8 +848,8 @@
 tt(compstate) special association is set to a non-empty string.
 
 The var(match-spec) given as the argument to the tt(-M) option (see
-ifzman(`Builtin Commands' above)\
-ifnzman(noderef(Builtin Commands))\
+ifzman(`Completion Builtin Commands' above)\
+ifnzman(noderef(Completion Builtin Commands))\
 ) consists of one or more matching descriptions separated by
 whitespace.  Each description consists of a letter followed by a colon
 and then the patterns describing which character sequences on the line match
@@ -1096,7 +1096,7 @@
 specific contexts by using the tt(matcher) and tt(matcher-list)
 styles. The values for the latter will be used everywhere.
 
-texinode(Completion Widget Example)()(Matching Control)(Completion Widgets)
+texinode(Completion Widget Example)()(Completion Matching Control)(Completion Widgets)
 sect(Completion Widget Example)
 cindex(completion widgets, example)
 
Index: Doc/Zsh/manual.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/manual.yo,v
retrieving revision 1.17
diff -u -r1.17 manual.yo
--- Doc/Zsh/manual.yo	1 Dec 2006 10:23:07 -0000	1.17
+++ Doc/Zsh/manual.yo	14 Jul 2008 16:52:15 -0000
@@ -115,10 +115,10 @@
 
 Completion Widgets
 
-menu(Special Parameters)
-menu(Builtin Commands)
-menu(Condition Codes)
-menu(Matching Control)
+menu(Completion Special Parameters)
+menu(Completion Builtin Commands)
+menu(Completion Condition Codes)
+menu(Completion Matching Control)
 menu(Completion Widget Example)
 
 Completion System


-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From zsh-workers-return-25894-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 14 12:07:59 2008
Return-Path: <zsh-workers-return-25894-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25696 invoked from network); 14 Oct 2008 12:07:56 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.1 required=5.0 tests=AWL autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 14 Oct 2008 12:07:56 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 47617 invoked from network); 14 Oct 2008 12:07:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Oct 2008 12:07:46 -0000
Received: (qmail 22220 invoked by alias); 14 Oct 2008 12:07:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25894
Received: (qmail 22195 invoked from network); 14 Oct 2008 12:07:34 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 14 Oct 2008 12:07:34 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 2A3E580524C0
	for <zsh-workers@sunsite.dk>; Tue, 14 Oct 2008 14:07:28 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly50d.srv.mailcontrol.com (MailControl) with ESMTP id m9EC7GFV013314
	for <zsh-workers@sunsite.dk>; Tue, 14 Oct 2008 13:07:22 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 14 Oct 2008 13:07:19 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m9EC7J8P027996
	for <zsh-workers@sunsite.dk>; Tue, 14 Oct 2008 13:07:19 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m9EC7JCd027992
	for <zsh-workers@sunsite.dk>; Tue, 14 Oct 2008 13:07:19 +0100
Message-Id: <200810141207.m9EC7JCd027992@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: Remove history entries
In-reply-to: <2d460de70810140448h5a47e48aw103779f180f8e84b@mail.gmail.com>
References: <slrngf4oua.r2h.joerg@alea.gnuu.de> <2d460de70810140426t7c382888pfc22e02c17396d55@mail.gmail.com> <20081014124351.2047fb30@news01> <2d460de70810140448h5a47e48aw103779f180f8e84b@mail.gmail.com>
Comments: In-reply-to "Richard Hartmann" <richih.mailinglist@gmail.com>
   message dated "Tue, 14 Oct 2008 13:48:10 +0200."
Date: Tue, 14 Oct 2008 13:07:19 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 14 Oct 2008 12:07:19.0283 (UTC) FILETIME=[680F2430:01C92DF5]
X-Scanned-By: MailControl A-08-50-15 (www.mailcontrol.com) on 10.68.0.160
X-Virus-Scanned: ClamAV 0.92.1/8422/Tue Oct 14 10:34:30 2008 on bifrost
X-Virus-Status: Clean

"Richard Hartmann" wrote:
> On Tue, Oct 14, 2008 at 13:43, Peter Stephenson <pws@csr.com> wrote:
> 
> > It might be possible to force it to overwrite it, but I don't think that's
> > a simple change.
> 
> Can't you "just" move the hooks for these functions? And/or introduce
> a new set?

No, the hook has to run before the line is saved.  Delaying saving it
until other code has run breaks the current model for how history code
works.  In particular executing history commands within the executed but
unsaved command would be screwed up.  There may be a fix, but I don't
see an easy fix.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From zsh-users-return-12608-mason-zsh=primenet.com.au@sunsite.dk Sun Feb 17 07:11:44 2008
Return-Path: <zsh-users-return-12608-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17283 invoked from network); 17 Feb 2008 07:11:42 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Feb 2008 07:11:42 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 88305 invoked from network); 17 Feb 2008 07:11:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Feb 2008 07:11:28 -0000
Received: (qmail 28668 invoked by alias); 17 Feb 2008 07:11:17 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12608
Received: (qmail 28651 invoked from network); 17 Feb 2008 07:11:16 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 17 Feb 2008 07:11:16 -0000
Received: from vms173001pub.verizon.net (vms173001pub.verizon.net [206.46.173.1])
	by bifrost.dotsrc.org (Postfix) with ESMTP id EB0B18026E0B
	for <zsh-users@sunsite.dk>; Sun, 17 Feb 2008 08:11:11 +0100 (CET)
Received: from torch.brasslantern.com ([71.121.18.67])
 by vms173001.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0JWD000KGFEOYV99@vms173001.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sun, 17 Feb 2008 00:59:13 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m1H7B0tZ018272	for
 <zsh-users@sunsite.dk>; Sat, 16 Feb 2008 23:11:01 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m1H7B0he018271	for zsh-users@sunsite.dk; Sat,
 16 Feb 2008 23:11:00 -0800
Date: Sat, 16 Feb 2008 23:11:00 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: timeout problem in ssh sessions
In-reply-to: <20080217000027.GN619@prunille.vinc17.org>
To: ZSH User List <zsh-users@sunsite.dk>
Message-id: <080216231100.ZM18270@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20080213134200.GB31852@spiegl.de>
	<200802131349.m1DDnXRF004831@news01.csr.com>
	<27b8b8a0802130621x47568c7fo304848d02a1c6e76@mail.gmail.com>
	<20080213143803.GI619@prunille.vinc17.org>	<20080214125415.GC31852@spiegl.de>
	<20080214180818.GO619@prunille.vinc17.org>	<20080215103220.GF31852@spiegl.de>
	<080215123047.ZM29728@torch.brasslantern.com>
	<20080215221834.GA23684@spiegl.de>
	<080215192616.ZM30010@torch.brasslantern.com>
	<20080217000027.GN619@prunille.vinc17.org>
Comments: In reply to Vincent Lefevre <vincent@vinc17.org>
 "Re: timeout problem in ssh sessions" (Feb 17,  1:00am)
X-Virus-Scanned: ClamAV 0.91.2/5845/Sun Feb 17 06:22:12 2008 on bifrost
X-Virus-Status: Clean

On Feb 17,  1:00am, Vincent Lefevre wrote:
}
} On 2008-02-15 19:26:16 -0800, Bart Schaefer wrote:
} > You can load the zsh/stat module and use
} > 
} > for fd in {0..63}; zstat -f $fd ...
} 
} How do you know which ones will block ssh?

Well ... unfortunately probably none of them will.  An X program is
going to look at $DISPLAY and open its own connection to the X server;
you can't discover that by examining the descriptors that zsh still
has open.  You'd need read access to /proc/$PPID/fd or the equivalent,
which generally you won't have because those will be owned by the
privileged user that started sshd (even though sshd itself will have
dropped privileges to become owned by the current user).


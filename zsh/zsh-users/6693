From zsh-users-return-6693-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 12 17:02:02 2003
Return-Path: <zsh-users-return-6693-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25656 invoked from network); 12 Oct 2003 17:02:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 12 Oct 2003 17:02:01 -0000
Received: (qmail 6040 invoked by alias); 12 Oct 2003 17:01:43 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6693
Received: (qmail 6024 invoked from network); 12 Oct 2003 17:01:42 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 12 Oct 2003 17:01:42 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.193.203.32] by sunsite.dk (MessageWall 1.0.8) with SMTP; 12 Oct 2003 17:1:41 -0000
Received: from DervishD.pleyades.net (212.Red-80-35-44.pooles.rima-tde.net [80.35.44.212])
	by madrid10.amenworld.com (8.10.2/8.10.2) with ESMTP id h9CH1ZS24857;
	Sun, 12 Oct 2003 19:01:36 +0200
Received: from raul@pleyades.net by DervishD.pleyades.net with local (Exim MTA 2.05)
	  id <1A8jfI-00062P-00>; Sun, 12 Oct 2003 19:05:56 +0200
Date: Sun, 12 Oct 2003 19:05:56 +0200
From: DervishD <raul@pleyades.net>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: delete-word does not delete the entire word...
Message-ID: <20031012170556.GG23106@DervishD>
Mail-Followup-To: Bart Schaefer <schaefer@brasslantern.com>,
	Zsh Users <zsh-users@sunsite.dk>
References: <20031011121052.GA5092@DervishD> <1031011173654.ZM13301@candle.brasslantern.com> <20031011195149.GA22610@DervishD> <1031011210014.ZM13588@candle.brasslantern.com> <20031012085732.GA22968@DervishD> <1031012163245.ZM19645@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <1031012163245.ZM19645@candle.brasslantern.com>
User-Agent: Mutt/1.4i
Organization: Pleyades
User-Agent: Mutt/1.4i <http://www.mutt.org>

    Hi Bart :)

 * Bart Schaefer <schaefer@brasslantern.com> dixit:
> } > What you're missing is that the documentation nearly always is
> } > expressed in terms of character positions, not semantic buffer
> } > contents.
> } [Zsh doc] doesn't say explicitly (I think, I haven't read the entire
> } documentation) that a word is not a semantic entity but just the
> } buffer contents from the cursor position to the next word boundary.
> You're right, it doesn't. Most of the functions emulate behavior of
> emacs or vi, so the doc assumes the reader is familiar with one of
> those.

    I assume that, at the moment of writing, 99% of UNIX users used
vi or emacs (or both...), so this behaviour was the expected
behaviour. In fact, since I haven't used word commands, this
behaviour is good for me, I can live with it, without writing
wrappers, and I should live with it, since my editor does exactly the
same, and it's very comfortable to have the same keybindings in the
shell and the editor (at least for me, I spend most of my time coding
or doing things in the shell). The problem, IMHO, is not the
behaviour, is the documentation, that should be more precise.

> That was OK when those parts of the docs were written several years
> ago, but is not the best thing now.

    And updating the documentation is several times harder than
updating the code, I have that problem when coding ;)) Anyway, zsh
docs are pretty good on the average. I like them ;)

> Incidentally, a wrapper function to delete the word under the cursor
> is a little tricky to write.

    Writing zle widgets is tricky. I've written a couple of them
lately, just for learning, and it has been a bit tricky. I've written
wrappers for up-line-or-search and down-line-or-search which searchs
$LBUFFER, not the first word. Like up/down-line-or-beginning-search,
that comes with zsh 4.1.x, but without bells and whistles: no NUMERIC
support, no zstyles, and an easy handling of PREBUFFER.

    I have a problem with it, not easy to solve since it has to do
with carrying information from the current execution of the widget to
the next execution of the widget, etc...

> You either need to examine $LBUFFER[-1] to
> determine if it is [not] a word boundary

    But that means dealing with WORDCHARS. I prefer your suggestion
of doing a double movement and testing where the cursor is
afterwards. BTW, thanks ;)))

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736
http://www.pleyades.net & http://raul.pleyades.net/


From zsh-workers-return-20230-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 01 14:15:32 2004
Return-Path: <zsh-workers-return-20230-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9739 invoked from network); 1 Aug 2004 14:15:32 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Aug 2004 14:15:32 -0000
Received: (qmail 10114 invoked from network); 1 Aug 2004 14:15:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Aug 2004 14:15:25 -0000
Received: (qmail 15623 invoked by alias); 1 Aug 2004 14:15:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20230
Received: (qmail 15614 invoked from network); 1 Aug 2004 14:15:11 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 1 Aug 2004 14:15:11 -0000
Received: (qmail 8964 invoked from network); 1 Aug 2004 14:13:13 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 1 Aug 2004 14:13:12 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id EB52E7004E; Sun,  1 Aug 2004 10:13:09 -0400 (EDT)
Date: Sun, 1 Aug 2004 10:13:09 -0400
From: Clint Adams <clint@zsh.org>
To: Vincent Lefevre <vincent@vinc17.org>, zsh-workers@sunsite.dk,
	262157@bugs.debian.org
Subject: Re: Bug#262157: zsh: Missed completion for apt-get install -t unstable
Message-ID: <20040801141309.GA13073@scowler.net>
References: <20040729225547.GA3042@ay.vinc17.org> <20040730154111.GB4059@scowler.net> <20040730171026.GM2892@ay.vinc17.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20040730171026.GM2892@ay.vinc17.org>
User-Agent: Mutt/1.5.6+20040722i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-4.9 required=6.0 tests=BAYES_00 autolearn=no 
	version=2.63
X-Spam-Hits: -4.9

> The best solution would be c. If this is too complicated or would
> take too much time, at least choose b if the -t option is used.

Here's the shortcut.


Index: Completion/Debian/Command/_apt
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Command/_apt,v
retrieving revision 1.8
diff -u -r1.8 _apt
--- Completion/Debian/Command/_apt	21 Nov 2003 08:05:43 -0000	1.8
+++ Completion/Debian/Command/_apt	1 Aug 2004 14:09:42 -0000
@@ -423,7 +423,7 @@
     /$'update\0'/ \| \
     /$'upgrade\0'/ \| \
     \( \
-    /$'install\0'/ /$'[^\0]#\0'/ ':packages::{ _deb_packages "$expl_packages[@]" uninstalled || _deb_packages "$expl_packages[@]" installed }' \# \
+    /$'install\0'/ /$'[^\0]#\0'/ ':packages::_deb_packages "$expl_packages[@]" avail' \# \
     /$'[^\0/]#/'/ /$'[^\0/]#\0'/ ':release name::_apt_releases' \) \| \
     /$'remove\0'/ /$'[^\0]#\0'/ ':packages::_deb_packages "$expl_packages[@]" installed' \# \| \
     /$'dist-upgrade\0'/ \| \


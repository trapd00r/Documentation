From zsh-users-return-9582-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 28 12:27:10 2005
Return-Path: <zsh-users-return-9582-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18419 invoked from network); 28 Oct 2005 12:27:03 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Oct 2005 12:27:03 -0000
Received: (qmail 7801 invoked from network); 28 Oct 2005 12:26:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Oct 2005 12:26:55 -0000
Received: (qmail 10368 invoked by alias); 28 Oct 2005 12:26:48 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9582
Received: (qmail 10358 invoked from network); 28 Oct 2005 12:26:47 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Oct 2005 12:26:47 -0000
Received: (qmail 6710 invoked from network); 28 Oct 2005 12:26:47 -0000
Received: from mxfep04.bredband.com (195.54.107.79)
  by a.mx.sunsite.dk with SMTP; 28 Oct 2005 12:26:46 -0000
Received: from ironport.bredband.com ([195.54.107.82] [195.54.107.82])
          by mxfep04.bredband.com with ESMTP
          id <20051028122646.WRTZ4878.mxfep04.bredband.com@ironport.bredband.com>
          for <zsh-users@sunsite.dk>; Fri, 28 Oct 2005 14:26:46 +0200
Received: from c-fa2b70d5.018-10-67626713.cust.bredbandsbolaget.se (HELO puritan.petwork) ([213.112.43.250])
  by ironport.bredband.com with ESMTP; 28 Oct 2005 14:26:22 +0200
X-IronPort-AV: i="3.97,262,1125871200"; 
   d="scan'208"; a="6485645:sNHT3630394080"
Received: by puritan.petwork (Postfix, from userid 1000)
	id 70DA3ADFE2; Fri, 28 Oct 2005 14:26:44 +0200 (CEST)
Date: Fri, 28 Oct 2005 14:26:44 +0200
From: Nikolai Weibull <mailing-lists.zsh-users@rawuncut.elitemail.org>
To: zsh-users@sunsite.dk
Subject: Re: Simple Tip of the Day
Message-ID: <20051028122644.GA9035@puritan.petwork>
Mail-Followup-To: zsh-users@sunsite.dk
References: <ci14m1hm45ig6umsu2v0tkini1gp0bad3r@4ax.com> <87ek65zwuw.fsf@trews52.bothi.fi>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <87ek65zwuw.fsf@trews52.bothi.fi>
User-Agent: Mutt/1.5.11
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Hannu Koivisto wrote:

> zzapper <david@tvis.co.uk> writes:

> > bindkey -M viins '^O' copy-prev-word
> >
> > "^O" copy-prev-word

> Wouldn't copy-prev-shell-word be even more useful for that purpose?
> It handles things like cp filename\ with\ spaces.txt ^O

What I was going to say as well, but thanks for introducing
copy-prev-word to me, as I was wanting that functionality but hadn't
found it earlier.

> > Your most useful binding?

> Hmm, I can't name just one.  But I couldn't imagine using zsh without
> the following:
> 
> bindkey '^[[A' history-beginning-search-backward # "Up"
> bindkey '^[[B' history-beginning-search-forward  # "Down"

Like Vim does it.  I have only one binding for these:

bindkey "^X^L" history-beginning-search-backward

That's also how Vim does it, in insert mode.

My most useful binding is

_sudo-command-line() {
  [[ $BUFFER != sudo\ * ]] && LBUFFER="sudo $LBUFFER"
}
zle -N sudo-command-line _sudo-command-line
bindkey "^Os" sudo-command-line

as I always forget to add a sudo...

> Just in case you are wondering what that 'cds' is, it is an
> interactive way to select a directory from the directory
> stack-treated-as-history, along the lines of a similar feature in 4nt:
> 
> cds () {
>     local DIR="$PWD"
>     if [[ ! -z "$dirstack" ]]; then
>         DIR=$(print -rl $dirstack | tac \
>             > iselect -a -f -n chdir -Q "$PWD" -t "Change directory to..." -p ${#dirstack})
>     fi
>     cd "$DIR"
> >
> 
> As you can see, it requires 'iselect' utility that is available as a
> Debian package, for example.  (I wish I could implement an iselect
> replacement using only zsh/zle.)  Also, in order to be useful it
> requires you to setopt auto_pushd.  I also setopt pushd_ignore_dups
> and set DIRSTACKSIZE to a reasonably large value.

Here's my version of a command like that:

~/.zsh/functions/d:

# contents: d command.
#
# Copyright © 2005 Nikolai Weibull <nikolai@bitwi.se>

emulate -L zsh

autoload -U colors

local color=$fg_bold[blue]
integer i=0
dirs -p | while read dir; do
  local num="${$(printf "%-4d " $i)/ /.}"
  printf " %s  $color%s$reset_color\n" $num $dir
  (( i++ ))
done
integer dir=-1
read -r 'dir?Jump to directory: ' || return
(( dir == -1 )) && return
if (( dir < 0 || dir >= i )); then
  echo d: no such directory stack entry: $dir
  return 1
fi
cd ~$dir

I don't know how iselect works, but this works very well for me.

-- 
Nikolai Weibull: now available free of charge at http://bitwi.se/!
Born in Chicago, IL USA; currently residing in Gothenburg, Sweden.
main(){printf(&linux["\021%six\012\0"],(linux)["have"]+"fun"-97);}


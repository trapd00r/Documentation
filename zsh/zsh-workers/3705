From zsh-workers-request@math.gatech.edu Tue Jan 13 15:44:33 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 12960 invoked from network); 13 Jan 1998 15:44:31 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 13 Jan 1998 15:44:31 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id KAA02814;
	Tue, 13 Jan 1998 10:32:09 -0500 (EST)
Resent-Date: Tue, 13 Jan 1998 10:32:09 -0500 (EST)
Date: Tue, 13 Jan 1998 16:31:42 +0100 (MET)
Message-Id: <199801131531.QAA10756@baby.link.no>
To: zsh-workers@math.gatech.edu
Subject: Bug in zsh 3.1.0 on RedHat 5.0
From: Petter Reinholdtsen <pere@td.org.uit.no>
Reply-to: pere@td.org.uit.no
Resent-Message-ID: <"u7Thj3.0.uh.uZukq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3705
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


On RedHat 5.0 (with glibc), zsh v3.1.0 was unable to find yp_all(), as 
-lnsl was missing during linking.  This patch fixed my problem.

diff -ur /store/store/stash/zsh/src-3.1.0/configure.in src-3.1.0-386linuxlibc6/configure.in
--- /store/store/stash/zsh/src-3.1.0/configure.in       Sat Dec 21 01:14:15 1996
+++ src-3.1.0-386linuxlibc6/configure.in        Tue Jan 13 15:13:32 1998
@@ -361,9 +361,13 @@

 dnl Some systems (Solaris 2.x) require libnsl (Network Services Library)
 dnl to find getdomainname and yp_all
-AC_CHECK_FUNCS(getdomainname)
+AC_CHECK_FUNCS(getdomainname yp_all)
 if test $ac_cv_func_getdomainname = no; then
   AC_CHECK_LIB(nsl, getdomainname)
+fi
+dnl Others (Linux RedHat 5.0) need nsl just to get yp_all
+if test $ac_cv_func_yp_all = no; then
+  AC_CHECK_LIB(nsl, yp_all)
 fi

 dnl I am told that told that unicos reqire these for nis_list
-- 
##>  Petter Reinholdtsen <##    | pere@td.org.uit.no
 O-  <SCRIPT Language="Javascript">window.close()</SCRIPT>
http://www.hungry.com/~pere/    | Go Mozilla, go! Go!


From zsh-users-return-12916-mason-zsh=primenet.com.au@sunsite.dk Fri Jun 13 13:19:40 2008
Return-Path: <zsh-users-return-12916-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23463 invoked from network); 13 Jun 2008 13:19:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Jun 2008 13:19:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 13572 invoked from network); 13 Jun 2008 13:19:14 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Jun 2008 13:19:14 -0000
Received: (qmail 12418 invoked by alias); 13 Jun 2008 13:19:04 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12916
Received: (qmail 12401 invoked from network); 13 Jun 2008 13:19:04 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 13 Jun 2008 13:19:04 -0000
Received: from mx.spodhuis.org (redoubt.spodhuis.org [193.202.115.177])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 39AC780525B4
	for <zsh-users@sunsite.dk>; Fri, 13 Jun 2008 15:18:51 +0200 (CEST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=d200803; d=spodhuis.org;
	h=Received:Date:From:To:Subject:Message-ID:Mail-Followup-To:References:MIME-Version:Content-Type:Content-Disposition:In-Reply-To;
	b=Lc1PaiVdydc+rW/hji+eqV01cgIeIDCIwxUeT0/CznBKpsBjJ1xawPkhJSoBX1z66m4duGZN/Jg9OOQg/MeNnmpbdt5OiHr8syfhoZAoOYIC6yZxv1uv6LiaPWTSwwYzINtlNoBM/gnY8MZxe6jsoDtA8BlF9B7ICmWO21l7DwA=;
Received: by smtp.spodhuis.org with local 
	id 1K79B5-0003LS-Pb; Fri, 13 Jun 2008 13:18:51 +0000
Date: Fri, 13 Jun 2008 06:18:51 -0700
From: Phil Pennock <zsh-workers+phil.pennock@spodhuis.org>
To: zsh-users@sunsite.dk
Subject: Re: strace completion (Re: grouping/joining _values)
Message-ID: <20080613131851.GA12764@redoubt.spodhuis.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20080607193937.GA14443@pepin.polanet.pl> <20080613002731.GA11526@pepin.polanet.pl> <20080613113302.GA40053@redoubt.spodhuis.org> <20080613121226.GA18890@scru.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20080613121226.GA18890@scru.org>
X-Virus-Scanned: ClamAV 0.92.1/7464/Fri Jun 13 14:18:33 2008 on bifrost
X-Virus-Status: Clean

On 2008-06-13 at 12:12 +0000, Clint Adams wrote:
> On Fri, Jun 13, 2008 at 04:33:02AM -0700, Phil Pennock wrote:
> > Are there any other useful strategies for extracting the real list of
> > syscalls at runtime, so that on systems which package up the same
> > version of zsh for N years the list doesn't grow stale?
> 
> On the other hand, the list of syscalls is hard-coded into strace at
> build time, so you probably don't want a dynamic completion list either.

On the gripping hand, the modification time of the zsh completion file
in a particular distribution probably has little, if any, correlation to
the build time of strace.  Especially when zsh devel work happens on a
devel branch with many years between "stable" releases, so many OSes by
default are shipping zsh 4.2.x, so zsh 4.4.x will hang around for a long
time.

The closest we can come to being up-to-date is to get the values as
currently known on the system; if strace hasn't been rebuilt recently,
that's not zsh's problem.  :)  That's for the sysadmin to rebuild strace
to get the latest syscalls if they're interested in them.

If we can't get the values currently known, then we're back to
approximations.  If we had a portable non-gcc way of doing this, I'd
feel better about saying "if you don't have a compiler, why are you
analysing trace dumps", thus my question above, seeking other techniques
for extracting the list.

-Phil


From zsh-users-return-14330-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 02 01:39:23 2009
Return-Path: <zsh-users-return-14330-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27183 invoked from network); 2 Sep 2009 01:39:20 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.9 required=5.0 tests=BAYES_00,DATE_IN_PAST_96_XX
	autolearn=no version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 2 Sep 2009 01:39:20 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 17985 invoked from network); 2 Sep 2009 01:30:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Sep 2009 01:30:28 -0000
Received: (qmail 10654 invoked by alias); 2 Sep 2009 01:30:12 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14330
Received: (qmail 10624 invoked from network); 2 Sep 2009 01:30:11 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 2 Sep 2009 01:30:11 -0000
Received: from mail2.asahi-net.or.jp (mail2.asahi-net.or.jp [202.224.39.198])
	by bifrost.dotsrc.org (Postfix) with ESMTP id E5CCD801E2BF
	for <zsh-users@sunsite.dk>; Wed,  2 Sep 2009 03:30:04 +0200 (CEST)
Received: from binki (z162008.dynamic.ppp.asahi-net.or.jp [110.4.162.8])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 66D987B0F9;
	Wed,  2 Sep 2009 10:30:02 +0900 (JST)
Message-ID: <20090824063045.3400@binki>
From: "d.henman" <dhenman@gmail.com>
Date: Mon, 24 Aug 2009 06:30:45 +0900
To: <zsh-users@sunsite.dk>
Cc: <dhenman@gmail.com>
Subject: Request for offical change to "/etc/zprofile" file
X-Mailer: MH-E 8.2; GNU Mailutils 2.0; GNU Emacs 23.1.50
X-Virus-Scanned: ClamAV 0.94.2/9764/Tue Sep  1 21:54:15 2009 on bifrost
X-Virus-Status: Clean



I would like to request that a simple change be made to the
distributed "/etc/zprofile" startup file.

I my case I want 'f' to be defined in the ~/.zshenv file for all scripts, both interactive and non-interactive.

The reason is that it /etc/zprofile clobbers one of my frequently
used parameters that I set in my $ZDOTDIR/.zshenv file, the parameter "f".
This may affect other zsh users as well who like really short parameter names
for frequently used commands or variables.


In two locations in the /etc/zprofile the parameter gets clobbers

(#1 around line# 64)
	/bin/find . -type f | while read f; do
		fDest=`echo ${f} | sed -e 's/^\.//g'`
		if [ ! -e "${HOME}${fDest}" -a ! -L "${HOME}${fDest}" ]; then
			/usr/bin/install -D -p -v "${zshf}" "${HOME}/${fDest}"
		fi




(#2 around line# 147)
if [ -d "/etc/profile.d" ]; then
	while read f; do
		if [ -f "${d}" ]; then
			. "${f}"
		fi
	done <<- EOF
	`/bin/find -L /etc/profile.d -type f -iname '*.sh' -or -iname '*.zsh' | LC_ALL=C sort`
	EOF
fi



--- I tried declaring "local f" at the beginning of the file but this had no effect.

--- Changing the parameter name to something uncommon like "zshf" however worked, so that my  f parameter does not get clobbered.



I humbly request that the official source code for this /etc/zprofile be change to use an uncommon name instead of "f",  maybe ".f" or something similarly appropriate.


The reason being that I would like to avoid not being able to update /etc/zprofile
with new zsh updates. (see notice below in /etc/zprofile file itself)

# WARNING
#
# IF THIS FILE IS MODIFIED IT WILL NOT BE UPDATED BY THE CYGWIN
# SETUP PROGRAM.  IT BECOMES YOUR RESPONSIBILITY.


thanks for your consideration.

regards,
   darel  henman


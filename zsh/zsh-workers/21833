From zsh-workers-return-21833-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 04 16:11:41 2005
Return-Path: <zsh-workers-return-21833-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23954 invoked from network); 4 Oct 2005 16:11:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Oct 2005 16:11:38 -0000
Received: (qmail 91825 invoked from network); 4 Oct 2005 16:11:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2005 16:11:32 -0000
Received: (qmail 20937 invoked by alias); 4 Oct 2005 16:11:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21833
Received: (qmail 20928 invoked from network); 4 Oct 2005 16:11:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Oct 2005 16:11:28 -0000
Received: (qmail 91526 invoked from network); 4 Oct 2005 16:11:28 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2005 16:11:25 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0INU00CJ6FMSL474@vms042.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Tue, 04 Oct 2005 11:11:17 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j94GBF9D032270;
 Tue, 04 Oct 2005 09:11:15 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j94GBEAT032269; Tue, 04 Oct 2005 09:11:15 -0700
Date: Tue, 04 Oct 2005 16:11:14 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Bug? in complist when filenames are longer than the screen
In-reply-to: <20051003144536.GA3179@DervishD>
To: DervishD <zsh@dervishd.net>, Zsh Workers <zsh-workers@sunsite.dk>
Message-id: <1051004161114.ZM32268@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20051003144536.GA3179@DervishD>
Comments: In reply to DervishD <zsh@dervishd.net>
 "Bug? in complist when filenames are longer than the screen" (Oct  3,  4:45pm)
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

On Oct 3,  4:45pm, DervishD wrote:
}
}     $ touch a b c filename1 filename2 d e
}     $ zmodload zsh/complist
}     $ COLUMNS=3

I didn't look at this all that closely before, but it's not at all
surprising that the display gets messed up when COLUMNS is not the
same as the actual width of the window.  The complist module relies
on the terminal emulator to have wrapped long lines, etc., when they
were output; it does not insert its own line breaks at an imaginary
window boundary.  (ZLE sometimes appears to do so, but it has a lot
of extra smarts regarding terminals that don't auto-scroll, very few
of which smarts were ever incorporated into complist.)

Are you sure you don't mean MENUSELECT=3 in that example?  If you
have never set MENUSELECT, then loading the zsh/complist module is
not going to have any effect, and in this next step ...

}     $ ls <TAB><TAB><TAB><TAB><UP><DOWN>

... the up/down are going to scroll through the history, not through
the completions.  If you're getting a reproducible crash exactly as
described above, then it's not completion that's crashing, and we
need to be looking elsewhere.


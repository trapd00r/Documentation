From zsh-users-return-13666-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 08 01:53:01 2009
Return-Path: <zsh-users-return-13666-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4654 invoked from network); 8 Jan 2009 01:52:57 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Jan 2009 01:52:57 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 64990 invoked from network); 8 Jan 2009 01:52:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Jan 2009 01:52:44 -0000
Received: (qmail 22034 invoked by alias); 8 Jan 2009 01:52:23 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13666
Received: (qmail 22016 invoked from network); 8 Jan 2009 01:52:22 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 8 Jan 2009 01:52:22 -0000
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 219D5802720C
	for <zsh-users@sunsite.dk>; Thu,  8 Jan 2009 02:52:18 +0100 (CET)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id 789912FBFCB5; Thu,  8 Jan 2009 02:52:17 +0100 (CET)
Date: Thu, 8 Jan 2009 02:52:17 +0100
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-users@sunsite.dk
Subject: Re: "unarchive" script/function?
Message-ID: <20090108015216.GW14649@prunille.vinc17.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <d2ecb10b0901070818v44d2bbbdvb03b11d0fb0410e0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <d2ecb10b0901070818v44d2bbbdvb03b11d0fb0410e0@mail.gmail.com>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.19-vl-r26315 (2009-01-05)
X-Virus-Scanned: ClamAV 0.92.1/8842/Wed Jan  7 15:06:50 2009 on bifrost
X-Virus-Status: Clean

On 2009-01-07 11:18:38 -0500, TjL wrote:
> Basically I want to be able to throw any kind of archive/compression
> method and have them all dealt with, so I could theoretically do this:
> 
>          unarchive file1.zip file2.tar file3.tbz file4.tar.gz
> 
> and the "unarchive' program would know what to do with each.

FYI, I have in my .zshrc:

unarch()
{
  local file decomp
  for file in $@
  do
    unset decomp
    [[ ( $file:e == gz && $file:r:e == tar ) || $file:e == tgz ]] \
      && decomp=gunzip
    [[ $file:e == bz2 && $file:r:e == tar ]] \
      && decomp=bunzip2
    [[ $file:e == lzma && $file:r:e == tar ]] \
      && decomp=unlzma
    if [[ -z $decomp ]] then
      echo "Usage: $0 [ \033[4mtgz-file\033[m | \033[4mbz2-file\033[m ] | \033[4mlzma-file\033[m ] ..." >&2
      return 1
    fi
    if [[ -r $file ]] then
      echo "$0 $file ..."
      $decomp $file -c | tar xf -
    else
      echo "$0: $file is not readable" >&2
    fi
  done
}

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


From zsh-workers-return-5504-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Feb 24 13:17:32 1999
Return-Path: <zsh-workers-return-5504-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17724 invoked from network); 24 Feb 1999 13:17:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Feb 1999 13:17:31 -0000
Received: (qmail 3442 invoked by alias); 24 Feb 1999 13:17:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5504
Received: (qmail 3435 invoked from network); 24 Feb 1999 13:16:57 -0000
Message-Id: <9902241301.AA16501@ibmth.df.unipi.it>
To: Bernd Eggink <eggink@uni-hamburg.de>,
        zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: signames problem 
In-Reply-To: "Bernd Eggink"'s message of "Wed, 24 Feb 1999 12:37:43 NFT."
             <36D3E487.7B42C369@uni-hamburg.de> 
Date: Wed, 24 Feb 1999 14:00:56 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

> In SuSE Linux 6.0, zsh-3.1.5-pws-9 doesn't know any signames.
> 
> Possibly because the former /usr/include/asm/signal.h has moved to
> /usr/include/signum.h !?

configure has changed so it's now supposed to work it out from the files
that `#include <signal.h>' actually includes.  Anything with `sig' in it is
tested. Is zsh_cv_path_signal_h set to /dev/null in config.cache?  What
does the new code (I've replaced $CPP with gcc -E, $AWK with awk assuming
that's what's used):

echo "#include <signal.h>" > nametmp.c
sigfile_list="`gcc -E nametmp.c |
sed -n 's/^#[ 	].*\"\(.*\)\"/\1/p' |
sed 's/\\\\\\\\/\//g' |
awk '{ if (\$1 ~ \"sig\") files[\$1] = \$1 }
  END { for (var in files) print var }'`"

produce for $sigfile_list?  (There's a space and a tab in the empty [ ]
which does funny things if you paste it into zsh.)

I can add /usr/include/signum.h to the fallback list anyway, but I'd like
to find out why it can't find it.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


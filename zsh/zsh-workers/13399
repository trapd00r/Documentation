From zsh-workers-return-13399-mason-zsh=primenet.com.au@sunsite.dk Mon Jan 29 15:10:52 2001
Return-Path: <zsh-workers-return-13399-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7122 invoked from network); 29 Jan 2001 15:10:51 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Jan 2001 15:10:51 -0000
Received: (qmail 11339 invoked by alias); 29 Jan 2001 15:10:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13399
Received: (qmail 11328 invoked from network); 29 Jan 2001 15:10:45 -0000
Message-ID: <Tc0a8890c516786f052@mailsweeper01.cambridgesiliconradio.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: termcap moodule problem on Cygwin 
In-Reply-To: Your message of "Mon, 29 Jan 2001 17:55:53 +0300."
             <001601c08a03$93fb5170$21c9ca95@mow.siemens.ru> 
Date: Mon, 29 Jan 2001 15:10:17 +0000
From: Peter Stephenson <pws@csr.com>

> Cygwin has only static libtermcap. It gets linked twice - into main zsh
> (libzsh to be sure) where term is (re-)initalized and into termcap.dll where
> bin_echotc is defined. Only first one calls tgetent() so every call to `echot
> c
> cap' crashes somewhere in termcap.

It must surely be possible to make sure it is linked in once only, which
would be the right thing to do.  If the worst comes to the worst, get
configure to detect a static termcap and only link it into the main module.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


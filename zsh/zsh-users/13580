From zsh-users-return-13580-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 10 18:14:03 2008
Return-Path: <zsh-users-return-13580-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9784 invoked from network); 10 Dec 2008 18:14:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Dec 2008 18:14:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 93710 invoked from network); 10 Dec 2008 18:13:48 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Dec 2008 18:13:48 -0000
Received: (qmail 8800 invoked by alias); 10 Dec 2008 18:13:32 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13580
Received: (qmail 8781 invoked from network); 10 Dec 2008 18:13:31 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Dec 2008 18:13:31 -0000
Received: from monty.telenet-ops.be (monty.telenet-ops.be [195.130.132.56])
	by bifrost.dotsrc.org (Postfix) with ESMTP id DB10680524C3
	for <zsh-users@sunsite.dk>; Wed, 10 Dec 2008 19:13:28 +0100 (CET)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by monty.telenet-ops.be (Postfix) with SMTP id 554B654008
	for <zsh-users@sunsite.dk>; Wed, 10 Dec 2008 19:13:28 +0100 (CET)
Received: from [172.16.1.3] (d54C04090.access.telenet.be [84.192.64.144])
	by monty.telenet-ops.be (Postfix) with ESMTP id 39D635408D
	for <zsh-users@sunsite.dk>; Wed, 10 Dec 2008 19:13:27 +0100 (CET)
Message-Id: <304B7520-9E2A-48C8-9673-FF8081A3E9C0@rocteur.cc>
From: "@ Rocteur CC" <macosx@rocteur.cc>
To: zsh-users@sunsite.dk
In-Reply-To: <20081210151936.GC4843@sc.homeunix.net>
Content-Type: multipart/signed; boundary=Apple-Mail-41--629978960; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Parameter Expansion pattern compatibility
Date: Wed, 10 Dec 2008 19:13:27 +0100
References: <60710.153.98.68.197.1228920251.squirrel@webmail.rocteur.com> <20081210151936.GC4843@sc.homeunix.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Scanned: ClamAV 0.92.1/8743/Wed Dec 10 16:08:45 2008 on bifrost
X-Virus-Status: Clean


--Apple-Mail-41--629978960
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


On 10 Dec 2008, at 16:19, Stephane Chazelas wrote:

> On Wed, Dec 10, 2008 at 03:44:11PM +0100, Jerry Rocteur wrote:
>> Hi,
>> [... deleted]
>> Given a list of strings like this
>>
>> set -A userId  p0btu pabtu p11btu p11eb41 rs0bt2 jro dri
>>
>> I would like to see btu btu btu eb41 bt2 jro dri
>>
>> if string begins with any case prt and is followed by one and one  
>> only [0-9] or [a-z] folowed by any mumber of digits.
>> Remove everything up to the last digit.
>>
>> In ksh we did it like this ${userId[$i]##([pPRrTt]@([0-9]|[a- 
>> z])*([0-9]))}
>
> That's ksh globbing syntax (except for the outer (...)). To
> enable it in zsh, you need setopt kshglob.
>
> The zsh equivalent of @(...) is (...), the equivalent of *(x) is
> x# (with extendedglob).
>
> ~$ setopt kshglob; echo ${userId##[pPRrTt]@([0-9]|[a-z])*([0-9])}
> btu btu btu eb41 bt2 jro dri
>
> ~$ setopt nokshglob extendedglob; echo ${userId##[pPRrTt]([0-9]|[a- 
> z])[0-9]#}
> btu btu btu eb41 bt2 jro dri


OUCH, I tried those with no success so the problems were setopt and  
the outer ()

I did try kshglob and I didn't think to remove the outer bracket.   
(I've just tried it on my home system and it works with the outer  
bracket ?

This all happens in a massive script so I could put setopt kshgob  
within the function.

As always Stephane, thanks very much .. I really appreciate your help  
all the time!

As an aside note, how would one do this in standard zsh without the  
kshglob ?

Cheers,

Jerry



--Apple-Mail-41--629978960
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIGIzCCAtww
ggJFoAMCAQICEBAKBtY/Ftix985rqrfjhe8wDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA4MDMyMjE3MjY0N1oXDTA5MDMyMjE3MjY0
N1owQzEfMB0GA1UEAxMWVGhhd3RlIEZyZWVtYWlsIE1lbWJlcjEgMB4GCSqGSIb3DQEJARYRbWFj
b3N4QHJvY3RldXIuY2MwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC+Cw8L8fo1C9aY
GFMKdduaRnIH6Zojs4CEVay9FPY9hnpAlr4D5IvptcFqZB1PFbtWgvuR47HiIP4uojE19nFbN4mm
HXZ5sgWAHNf+1O7XL4P6ATzosK2eZZyjXN2vf+4RT06lATwzySNGpjdEKA72nFkYPx2/Pld0GCcG
ucxwyppZJd2Rm2TM/JSdVZ5qbvJ/YRSQ0o2aRfwOAtVvtqirn2FbcmKo5W2InxanT0wS3WdaXEc8
S+MI/AavzLLfBD2+m7UUW8ORji1/GdKNSqTngyChFahvRkqSCduur/keGSC3iQJ1WX9Q+N8WH/Hr
VsAIw/RY2CxnKfGxjmWEUeLvAgMBAAGjLjAsMBwGA1UdEQQVMBOBEW1hY29zeEByb2N0ZXVyLmNj
MAwGA1UdEwEB/wQCMAAwDQYJKoZIhvcNAQEFBQADgYEAgx0d51PzN0o3FIOP6RTpXlPup/ZSEafI
Vq1LZHSu0i9hVf0IHGVAPPxB4OmslmPAHtkTKC7Gxwv6qpc0MDKdlaIeSbbG8VFWkU2pb5jBr6Pw
SI+m5sYsjvr+oUCKMzM2w4G4Nu4yrr+UIymltpE/CClMVE/qdpQ0chHCRbqJgrkwggM/MIICqKAD
AgECAgENMA0GCSqGSIb3DQEBBQUAMIHRMQswCQYDVQQGEwJaQTEVMBMGA1UECBMMV2VzdGVybiBD
YXBlMRIwEAYDVQQHEwlDYXBlIFRvd24xGjAYBgNVBAoTEVRoYXd0ZSBDb25zdWx0aW5nMSgwJgYD
VQQLEx9DZXJ0aWZpY2F0aW9uIFNlcnZpY2VzIERpdmlzaW9uMSQwIgYDVQQDExtUaGF3dGUgUGVy
c29uYWwgRnJlZW1haWwgQ0ExKzApBgkqhkiG9w0BCQEWHHBlcnNvbmFsLWZyZWVtYWlsQHRoYXd0
ZS5jb20wHhcNMDMwNzE3MDAwMDAwWhcNMTMwNzE2MjM1OTU5WjBiMQswCQYDVQQGEwJaQTElMCMG
A1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNv
bmFsIEZyZWVtYWlsIElzc3VpbmcgQ0EwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMSmPFVz
VftOucqZWh5owHUEcJ3f6f+jHuy9zfVb8hp2vX8MOmHyv1HOAdTlUAow1wJjWiyJFXCO3cnwK4Va
qj9xVsuvPAsH5/EfkTYkKhPPK9Xzgnc9A74r/rsYPge/QIACZNenprufZdHFKlSFD0gEf6e20Txh
BEAeZBlyYLf7AgMBAAGjgZQwgZEwEgYDVR0TAQH/BAgwBgEB/wIBADBDBgNVHR8EPDA6MDigNqA0
hjJodHRwOi8vY3JsLnRoYXd0ZS5jb20vVGhhd3RlUGVyc29uYWxGcmVlbWFpbENBLmNybDALBgNV
HQ8EBAMCAQYwKQYDVR0RBCIwIKQeMBwxGjAYBgNVBAMTEVByaXZhdGVMYWJlbDItMTM4MA0GCSqG
SIb3DQEBBQUAA4GBAEiM0VCD6gsuzA2jZqxnD3+vrL7CF6FDlpSdf0whuPg2H6otnzYvwPQcUCCT
cDz9reFhYsPZOhl+hLGZGwDFGguCdJ4lUJRix9sncVcljd2pnDmOjCBPZV+V2vf3h9bGCE6u9uo0
5RAaWzVNd+NWIXiC3CEZNd4ksdMdRv9dX2VPMYIDEDCCAwwCAQEwdjBiMQswCQYDVQQGEwJaQTEl
MCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBl
cnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEBAKBtY/Ftix985rqrfjhe8wCQYFKw4DAhoFAKCC
AW8wGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUxDxcNMDgxMjEwMTgxMzI4
WjAjBgkqhkiG9w0BCQQxFgQUKXZVf4FWNjggdCMXQkpr62+59fgwgYUGCSsGAQQBgjcQBDF4MHYw
YjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAq
BgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBAhAQCgbWPxbYsffOa6q3
44XvMIGHBgsqhkiG9w0BCRACCzF4oHYwYjELMAkGA1UEBhMCWkExJTAjBgNVBAoTHFRoYXd0ZSBD
b25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBJ
c3N1aW5nIENBAhAQCgbWPxbYsffOa6q344XvMA0GCSqGSIb3DQEBAQUABIIBAH48EcFLkSqDzsdW
VMItUMcNG4tcnb0t3uCkP6saj5vWB/ZiQhLSTyJrfr/q1O5yDDeS51+BjgXdPF+csIgQ4efHFisb
68+rViwLVyNbfxorvdqnNSfufPO6UE1WEBsT3HdMMXUIAT7gxcentC+B0O/tgax62HqDcOw6glgI
+5KXoiHdRXgAMN9ztP8sIAF+WURU88/SbKD48mERUnORgS9sgZ4SrTEsU56fYsSuhavZFQviQzM9
4p1hV0qQZq2lkM1twnuDShWyfTRgN/DfB4XVezpUUKhJ8Y46iHyONU2scW75ee40rJhyhgtQ+VbB
X3PySH+D27avpH5C3ykTEUQAAAAAAAA=

--Apple-Mail-41--629978960--


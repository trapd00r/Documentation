From zsh-users-return-8755-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 25 16:32:29 2005
Return-Path: <zsh-users-return-8755-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4209 invoked from network); 25 Apr 2005 16:32:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Apr 2005 16:32:28 -0000
Received: (qmail 53178 invoked from network); 25 Apr 2005 16:32:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Apr 2005 16:32:19 -0000
Received: (qmail 13709 invoked by alias); 25 Apr 2005 16:32:12 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8755
Received: (qmail 13698 invoked from network); 25 Apr 2005 16:32:11 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 Apr 2005 16:32:11 -0000
Received: (qmail 52130 invoked from network); 25 Apr 2005 16:32:11 -0000
Received: from vms044pub.verizon.net (206.46.252.44)
  by a.mx.sunsite.dk with SMTP; 25 Apr 2005 16:32:05 -0000
Received: from candle.brasslantern.com ([4.11.1.68])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2 HotFix 0.04
 (built Dec 24 2004)) with ESMTPA id <0IFI00GNDGLEKBSB@vms044.mailsrvcs.net> for
 zsh-users@sunsite.dk; Mon, 25 Apr 2005 11:32:03 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j3PGW2m2025029	for
 <zsh-users@sunsite.dk>; Mon, 25 Apr 2005 09:32:02 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j3PGW2V1025028	for zsh-users@sunsite.dk; Mon,
 25 Apr 2005 09:32:02 -0700
Date: Mon, 25 Apr 2005 16:32:02 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: localtraps
In-reply-to: <20050425063521.GA17598@quark.hightek.org>
To: zsh-users@sunsite.dk
Message-id: <1050425163202.ZM25027@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20050425063521.GA17598@quark.hightek.org>
Comments: In reply to Vincent Stemen <zsh@hightek.org>        "localtraps" (Apr
 25,  1:35am)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

On Apr 25,  1:35am, Vincent Stemen wrote:
} Subject: localtraps
} 
} I don't seem to be able to get the localtraps option to work.

Try it where the outer function is NOT a trap for the same signal
that you're trapping inside the function.

I suspect that changing the trap of the same signal that is trapped
is confusing the trap code, because low-level signal handling already
requires that the signal handler restore itself before exiting, so in 
effect you're restoring multiple different traps, and the order in
which function exit and trap unwinding are processed is mixed up.


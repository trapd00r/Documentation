From zsh-users-return-3766-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 29 08:38:06 2001
Return-Path: <zsh-users-return-3766-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20195 invoked from network); 29 Mar 2001 08:38:06 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Mar 2001 08:38:06 -0000
Received: (qmail 10332 invoked by alias); 29 Mar 2001 08:37:54 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3766
Received: (qmail 10320 invoked from network); 29 Mar 2001 08:37:54 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
Date: Thu, 29 Mar 2001 12:37:51 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Ville Herva <vherva@mail.niksula.cs.hut.fi>
cc: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>,
   <zsh-users@sunsite.auc.dk>
Subject: Re: yodl [Re: Compilation problem on Cygwin]
In-Reply-To: <20010329112755.O3478@niksula.cs.hut.fi>
Message-ID: <Pine.SV4.4.33.0103291232210.26074-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 29 Mar 2001, Ville Herva wrote:

> On Thu, Mar 29, 2001 at 11:39:33AM +0400, you [Andrej Borsenkow] claimed:
> > One more possibility (and I'm pretty sure it is it): the temporary files
> > are created on text-mounted file system and then simply copied into /home
> > and get DOS lineend.
>
> mlmakemod.sh was the build step that failed. So I played a bit with.
>
> Doing
> top_srcdir=../zsh /bin/bash ../zsh/Src/mkmakemod.sh Src Makemod
>
> instead of
> top_srcdir=../zsh /bin/sh ../zsh/Src/mkmakemod.sh Src Makemod
> which is what the make tries to do, helped. It now created Makemod.in.
>
> So I replaced /bin/sh.exe with /bin/bash.exe and started the build from
> scratch (rm -rf build, configure etc).
>
> It now works. I'm still not sure what the problem was.
>

Hmm ... On cygwin /bin/sh is actually ash and ash != bash. Have you the
actual ash version? Else you probably have to report this on Cygwin list.
Looks like a problem (bug?) in ash.

Still, I wonder why I do not have this problem (now). Try to update ash
first.

> Now I have the same problem as with Linux, though.
>
> configure says
>
> checking for yodl... no
>
> but the compilation still fails with
>
> case ': yodl' in :*) ;; *) \
>     : yodl -I../../zsh/Doc -w zman.yo version.yo ../../zsh/Doc/zsh.yo | sed
> -e '1s/\\-/-/g' -e '/^\.'\''/d' > $target \
> ;; esac; \
> test -f $target
> make[1]: *** [zsh.1] Error 1
> make[1]: Leaving directory /home/vherva/zsh/build/Doc'
> make: *** [all] Error 1
>
> presumably just beacause of the lacking yodl. Is yodl necessary for the
> build? If so, configure should propably barf?
>

Yodl is not needed if you build from tarball, because it includes man
pages and info files. I believe, yodl is needed if you build from CVS. The
problem is, how can configure know if it was tarball or CVS?

I build from src mounted off Unix where I do have yodl so I do not have
this problem.

-andrej


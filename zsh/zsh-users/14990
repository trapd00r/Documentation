From zsh-users-return-14990-mason-zsh=primenet.com.au@zsh.org Fri Apr 09 09:49:28 2010
Return-Path: <zsh-users-return-14990-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22181 invoked by alias); 9 Apr 2010 09:49:28 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14990
Received: (qmail 27016 invoked from network); 9 Apr 2010 09:49:26 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at seiken.de does not designate permitted sender hosts)
From: Joke de Buhr <joke@seiken.de>
To: zsh-users@zsh.org
Subject: Re: Count only visible characters?
Date: Fri, 9 Apr 2010 11:49:20 +0200
User-Agent: KMail/1.12.2 (Linux/2.6.31-9-rt; KDE/4.3.2; x86_64; ; )
References: <loom.20100409T002951-342@post.gmane.org> <201004091102.55291.joke@seiken.de> <87d3y90z07.fsf@ft.bewatermyfriend.org>
In-Reply-To: <87d3y90z07.fsf@ft.bewatermyfriend.org>
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <201004091149.20747.joke@seiken.de>

Sorry. I used the color array ${fg_*[green]} for my prompt. They need to be 
escaped. 


If you want to do character counting as suggested earlier you need to escape 
the %F{...} sequences or it won't work unless you change the replacing pattern 
to recognize %F, %f, %K, %k sequences.

On Friday, 9. April 2010 11:13:44 Frank Terbeck wrote:
> Joke de Buhr wrote:
> > Since you are using prompt expansion you should always escape the color
> > codes with "%{...%}". That's the only way zsh can calculate the length of
> > the prompt line correctly. Otherwise the cursor will not be positioned at
> > the end of the visual end.
> >
> > testing="%{%F{green}%}hello"
> 
> No, with %F{...}...%f he does *not* need to wrap things in %{...%}.
> 
> Regards, Frank
> 


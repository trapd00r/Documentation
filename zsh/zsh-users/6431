From zsh-users-return-6431-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 04 09:16:21 2003
Return-Path: <zsh-users-return-6431-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26141 invoked from network); 4 Aug 2003 09:16:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Aug 2003 09:16:18 -0000
Received: (qmail 6612 invoked by alias); 4 Aug 2003 09:15:59 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6431
Received: (qmail 6600 invoked from network); 4 Aug 2003 09:15:59 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 4 Aug 2003 09:15:59 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.167.170.152] by sunsite.dk (MessageWall 1.0.8) with SMTP; 4 Aug 2003 9:15:58 -0000
Received: from zefram by bowl.fysh.org with local (Exim 3.35 #1 (Debian))
	id 19jbRe-0007rK-00; Mon, 04 Aug 2003 10:15:58 +0100
Date: Mon, 4 Aug 2003 10:15:57 +0100
To: Nikolai Weibull <lone-star@home.se>
Cc: zsh-users@sunsite.dk
Subject: Re: ~/.zshenv or ~/.zprofile
Message-ID: <20030804091557.GA22717@fysh.org>
References: <20030803221858.GA2720@puritan.pcp.ath.cx>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20030803221858.GA2720@puritan.pcp.ath.cx>
User-Agent: Mutt/1.3.28i
From: Zefram <zefram@fysh.org>

Nikolai Weibull wrote:
>                    The problem really is that if you put, for example,
>your PATH definition in ~/.zshenv, and have a script or application that
>modifies PATH and later runs a shell, that shell will not use the
>specifically crafted PATH, but will read the standard one from
>~/.zshenv.

When I run an interactive zsh, I want my customised environment
from ~/.zshenv regardless of what the parent process was doing.
$SHELL shouldn't be being used for any other purpose; a program that
wants a shell to interpret a command it's just generated should be using
/bin/sh directly, or, if it wants zsh, should be using /usr/bin/zsh -f.

Unfortunately there are many programs that are not well-behaved, and
use $SHELL as a non-interactive command interpreter, expecting it to
interpret some particular shell command language.  With make and procmail
(both of which are badly-behaved in this manner), it is wise to always
explicitly set SHELL=/bin/sh in the configuration file.

-zefram


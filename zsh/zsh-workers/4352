From zsh-workers-request@math.gatech.edu Tue Aug 25 16:38:24 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7963 invoked from network); 25 Aug 1998 16:38:23 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 25 Aug 1998 16:38:23 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id MAA16045;
	Tue, 25 Aug 1998 12:23:15 -0400 (EDT)
Resent-Date: Tue, 25 Aug 1998 12:23:15 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980825092518.ZM15160@candle.brasslantern.com>
Date: Tue, 25 Aug 1998 09:25:18 -0700
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@math.gatech.edu
Subject: PATCH: 3.1.4: Quash excess output from compile of manpages and info
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"xDjoc.0.bw3.pJkur"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4352
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I find confusing that "make" in the Doc subtree prints out

 	echo Info documentation cannot be compiled without makeinfo. ;
 	echo You can find precompiled info files in zsh-doc.tar.gz. ; }

even when I have makeinfo and the whole compile has gone fine.  It always
makes me think for a moment that something has gone wrong, before I spot
the leading "echo" on each of those lines.

It's also unnecessarily verbose to see the entire "case" statement used
to set $target in the yodl-to-man conversion.

Nit I didn't fix:  Why `yodl || exit 1 ; test` rather than `yodl && test`?

Index: Doc/Makefile.in
===================================================================
RCS file: /extra/cvsroot/zsh/zsh-3.1/Doc/Makefile.in,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 Makefile.in
--- Makefile.in	1998/06/01 17:08:42	1.1.1.1
+++ Makefile.in	1998/08/23 19:05:20
@@ -64,7 +64,8 @@
 	$(TEXI2DVI) $(sdir)/zsh.texi
 
 zsh.info: zsh.texi
-	$(MAKEINFO) $(sdir)/zsh.texi || { \
+	@echo $(MAKEINFO) $(sdir)/zsh.texi
+	@$(MAKEINFO) $(sdir)/zsh.texi || { \
 	echo Info documentation cannot be compiled without $(MAKEINFO). ; \
 	echo You can find precompiled info files in zsh-doc.tar.gz. ; }
 
@@ -73,10 +74,11 @@
 	test -f $(sdir)/zsh.texi
 
 .yo.$(manext):
-	case $@ in \
+	@case $@ in \
 	  */*) target=$@ ;; \
 	  *) target=$(sdir)/$@ ;; \
 	esac; \
+	echo $(YODL) -o $$target -I$(sdir) -w zman.yo paths.yo $< ; \
 	$(YODL) -o $$target -I$(sdir) -w zman.yo paths.yo $< || exit 1; \
 	test -f $$target
 

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-6959-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jul 03 12:48:27 1999
Return-Path: <zsh-workers-return-6959-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16262 invoked from network); 3 Jul 1999 12:48:25 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Jul 1999 12:48:25 -0000
Received: (qmail 6615 invoked by alias); 3 Jul 1999 12:48:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6959
Received: (qmail 6605 invoked from network); 3 Jul 1999 12:48:13 -0000
Message-Id: <9907031219.AA13740@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Job control bug with pws-25
Date: Sat, 03 Jul 1999 14:19:34 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Actually, as soon as I had I chance to look I found some more job control
bugs (hope I got all the right patches into pws-25).  If you do

while true; do zcat; done

and hit ^C repeatedly, the zcat gets killed but the loop continues.
Eventually, however, you catch the shell when it's not running zcat and the
loop exits.  Doing this a few times gives the message

zsh: job table full

and you can't run any more external jobs, so it's not getting deleted
properly.


Secondly (and this really makes me suspect I've missed a patch):

% fn() { sleep 2; print foo; }
% fn
^Zzsh: 13719 suspended  fn
% bg
[1]  - continued  fn
<after a while>
% jobs -l
[1]  - 13719 running    fn
% fg %1
^C^C^C^C^C^C^C^Z^Z^Z^Z^Z^Z^Z^Z

no effect.  Shell has to killed with -9 from somewhere else.  Note that it
has forked, as expected, and doesn't seem to be doing anything.

     pws 13719 26505   0 14:15:24  pts/0  0:00 ./zsh 
     pws 26505 41151   0 14:15:16  pts/0  0:00 ./zsh 

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


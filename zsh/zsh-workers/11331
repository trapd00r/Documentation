From zsh-workers-return-11331-mason-zsh=primenet.com.au@sunsite.auc.dk Thu May 11 20:07:07 2000
Return-Path: <zsh-workers-return-11331-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1464 invoked from network); 11 May 2000 20:07:03 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 May 2000 20:07:03 -0000
Received: (qmail 4202 invoked by alias); 11 May 2000 20:06:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11331
Received: (qmail 4152 invoked from network); 11 May 2000 20:06:40 -0000
To: zsh-workers@sunsite.auc.dk
Subject: _complete_debug causes core dump.
MIME-Version: 1.0 (generated by SEMI 1.13.7 - "Awazu")
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@m17n.org>
Date: 12 May 2000 05:07:52 +0900
Message-ID: <hvoln1gam07.fsf@serein.m17n.org>
Lines: 52
User-Agent: T-gnus/6.14.1 (based on Gnus v5.8.3) (revision 16) SEMI/1.13.7 (Awazu) FLIM/1.13.2 (Kasanui) Emacs/20.6 (i686-pc-linux-gnu) MULE/4.0 (HANANOEN)

_complete_debug causes core dump as follows.

Z(4):akr@serein% Src/zsh -f  
serein% bindkey -e; fpath=($PWD/Completion/*(/)); autoload -U compinit; compinit -D; compdef _tst tst
serein% _tst () {}
serein% tst <C-x>?
zsh: segmentation fault (core dumped)  Src/zsh -f
Z(4):akr@serein% gdb Src/zsh core
GNU gdb 19991004
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i586-redhat-linux"...
Core was generated by `Src/zsh -f'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libnsl.so.1...done.
Reading symbols from /lib/libtermcap.so.2...done.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /home/akr/zsh/lib/zsh/3.1.7-pre-3/zsh/zle.so...done.
Reading symbols from /home/akr/zsh/lib/zsh/3.1.7-pre-3/zsh/complete.so...done.
Reading symbols from /home/akr/zsh/lib/zsh/3.1.7-pre-3/zsh/compctl.so...done.
Reading symbols from /home/akr/zsh/lib/zsh/3.1.7-pre-3/zsh/parameter.so...done.
Reading symbols from /home/akr/zsh/lib/zsh/3.1.7-pre-3/zsh/zutil.so...done.
Reading symbols from /home/akr/zsh/lib/zsh/3.1.7-pre-3/zsh/computil.so...done.
#0  0x401f1893 in do_completion (dummy=0x401e2b48, dat=0xbffff3c0) at compcore.c:407
407                 while (!m->mcount)
(gdb) where
#0  0x401f1893 in do_completion (dummy=0x401e2b48, dat=0xbffff3c0) at compcore.c:407
#1  0x80886a9 in runhookdef (h=0x401e2b48, d=0xbffff3c0) at module.c:1615
#2  0x401d4f9b in docompletion (s=0x8101450 "", lst=0, incmd=0) at zle_tricky.c:1703
#3  0x401d20f0 in docomplete (lst=0) at zle_tricky.c:763
#4  0x401d097f in completeword (args=0x401e2ac4) at zle_tricky.c:203
#5  0x401d0857 in completecall (args=0x401e2ac4) at zle_tricky.c:180
#6  0x401c5d01 in execzlefunc (func=0x80f99e8, args=0x401e2ac4) at zle_main.c:645
#7  0x401c591c in zleread (lp=0x80e0a90 "%m%# ", rp=0x0, flags=3) at zle_main.c:564
#8  0x80762b5 in inputline () at input.c:265
#9  0x80761a6 in ingetc () at input.c:210
#10 0x806f088 in ihgetc () at hist.c:242
#11 0x807b4e8 in gettok () at lex.c:621
#12 0x807acd5 in yylex () at lex.c:337
#13 0x8090ee3 in parse_event () at parse.c:421
#14 0x80737c1 in loop (toplevel=1, justonce=0) at init.c:121
#15 0x8051752 in main (argc=2, argv=0xbffff784) at ./main.c:86
(gdb) 
-- 
Tanaka Akira


From zsh-workers-request@math.gatech.edu Thu Jan 29 09:39:07 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 21111 invoked from network); 29 Jan 1998 09:39:05 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 29 Jan 1998 09:39:05 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id EAA18413;
	Thu, 29 Jan 1998 04:28:41 -0500 (EST)
Resent-Date: Thu, 29 Jan 1998 04:28:41 -0500 (EST)
Message-Id: <199801290930.KAA04420@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: Terminal settings and background processes 
In-reply-to: "Andrew Main"'s message of "Wed, 28 Jan 1998 17:11:25 MET."
             <199801281711.RAA06825@taos.demon.co.uk> 
Date: Thu, 29 Jan 1998 10:30:22 +0100
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"5WygC.0.eV4.9l4qq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3746
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Andrew Main wrote:
> Peter Stephenson wrote:
> >I'm still getting my terminal settings messed up because of background
> >processes exiting on IRIX.  Did this patch not make it into zefram3?
> >I'm not sure I ever had the definitive version since there were numerous.
> 
> There were many patches on that issue, with several conflicting branches.

I certainly appreciate this:  any from me could certainly be ignored,
since I'm pretty sure the changes I suggested were incorporated into more
sophisticated variants.

> What precisely is not working for you?

After experimenting, it looks like killing a background job causes the
problem.  It doesn't matter if the job is running or suspended, and it
doesn't matter how simple the job is --- it's not just with emacs, it
happens even with sleep:

% stty -a
...
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>;
eol2 = <undef>; swtch = <undef>; start = ^Q; stop = ^S; susp = ^Z; dsusp = ^Y;
rprnt = ^R; werase = ^W; lnext = ^V; flush = ^O;
...
% sleep 10 &
[1] 3007
% kill %1
[1] + 3007 terminated sleep 10
% stty -a
...
intr = ^C; quit = <undef>; erase = ^?; kill = ^U; eof = ^A; eol = <undef>;
eol2 = <undef>; swtch = <undef>; start = ^Q; stop = ^S; susp = <undef>;
dsusp = <undef>; rprnt = ^R; werase = ^W; lnext = <undef>; flush = <undef>;
...

My terminal is reduced to a vt100, since the X terminal server is
down, so debugging is a little unrewarding at the moment and I haven't
looked any further yet.

-- 
Peter Stephenson <pws@ifh.de>       Tel: +39 50 911239
WWW:  http://www.ifh.de/~pws/
Gruppo Teorico, Dipartimento di Fisica
Piazza Torricelli 2, 56100 Pisa, Italy


From zsh-users-return-11210-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 20 07:51:34 2007
Return-Path: <zsh-users-return-11210-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25517 invoked from network); 20 Feb 2007 07:51:29 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Feb 2007 07:51:29 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 43603 invoked from network); 20 Feb 2007 07:51:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Feb 2007 07:51:22 -0000
Received: (qmail 3535 invoked by alias); 20 Feb 2007 07:51:14 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11210
Received: (qmail 3525 invoked from network); 20 Feb 2007 07:51:14 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Feb 2007 07:51:14 -0000
Received: (qmail 42488 invoked from network); 20 Feb 2007 07:51:14 -0000
Received: from smtp01.cdmon.com (86.109.99.230)
  by a.mx.sunsite.dk with SMTP; 20 Feb 2007 07:51:08 -0000
Received: from localhost (212.Red-80-35-44.staticIP.rima-tde.net [80.35.44.212])
	by smtp01.cdmon.com (Postfix) with ESMTP id A3784F7F83;
	Tue, 20 Feb 2007 08:51:08 +0100 (CET)
Date: Tue, 20 Feb 2007 08:52:26 +0100
From: DervishD <zsh@dervishd.net>
To: Lydgate <zsh@lydgate.e4ward.com>
Cc: zsh-users@sunsite.dk
Subject: Re: test if a parameter is numeric
Message-ID: <20070220075226.GA11608@DervishD>
Mail-Followup-To: Lydgate <zsh@lydgate.e4ward.com>,
	zsh-users@sunsite.dk
References: <Xns98D2ADD16C100zzappergmailcom@80.91.229.5> <070209182939.ZM18654@torch.brasslantern.com> <003d01c74d3f$3bbd7960$6600000a@venti> <E1HG3Bl-0007Ge-DM@e4ward.com> <E1HJIfJ-0002Ok-Ql@e4ward.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <E1HJIfJ-0002Ok-Ql@e4ward.com>
User-Agent: Mutt/1.4.2.2i
Organization: DervishD

    Hi Lydgate :)

 * Lydgate <zsh@lydgate.e4ward.com> dixit:
> On Sun, Feb 11, 2007 at 02:08:40AM +0100, DervishD wrote:
> >     If you can use "expr", you can do it with "expr", using simple
> > regexes. OK, not the fastest method, but should do and should do it
> > pretty fast. I use this approach in my "mobs" project. Being bulletproof
> > using almost-portable shell scripting is, at least, tricky. And probably
> > impossible, for what I've seen...
> 
> Sorry maybe I'm missing something, but if you need to match more than
> one digit, what's wrong with:
> 
> [[ "$1" == [0-9][0-9]* ]]
> 
> Which I think is more portable?

    If you are considering the second part as a regex, then the above is
definitely NON portable. It's not even POSIX.

    But the second part is not a regex, but a shell globbing pattern.
That means that the above will match something like "1234abcd", for
example, and ONLY if the file exists. Otherwise it won't match anything.

    In addition to this, if the expansion is not successful, some shells
may substitute nothing in the second part, leaving you with the invalid
construct:

    [[ "$1" == ]]

    And the "[[" is NOT portable, either, it's a zsh thing (and probably
bash has too, I don't know, but AFAIK is not POSIX/SuS).

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736 | http://www.dervishd.net
It's my PC and I'll cry if I want to... RAmen!


From zsh-users-return-7326-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 05 03:51:30 2004
Return-Path: <zsh-users-return-7326-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27064 invoked from network); 5 Apr 2004 03:51:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 5 Apr 2004 03:51:29 -0000
Received: (qmail 17714 invoked by alias); 5 Apr 2004 03:51:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7326
Received: (qmail 17703 invoked from network); 5 Apr 2004 03:51:15 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 5 Apr 2004 03:51:15 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 5 Apr 2004 3:51:15 -0000
Received: (qmail 4574 invoked from network); 5 Apr 2004 03:51:14 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 5 Apr 2004 03:51:13 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 464837004D; Sun,  4 Apr 2004 23:50:46 -0400 (EDT)
Date: Sun, 4 Apr 2004 23:50:46 -0400
From: Clint Adams <clint@zsh.org>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-users@sunsite.dk
Subject: Re: Completion for cd
Message-ID: <20040405035046.GA6081@scowler.net>
References: <040401100439.ZM13083@candle.brasslantern.com> <20040401204424.GI994@eumel.yoo.net> <1040402043837.ZM13655@candle.brasslantern.com> <20040402065247.GB862@eumel.yoo.net> <040402081155.ZM14332@candle.brasslantern.com> <20040404144311.GA1858@eumel.yoo.net> <20040404151433.GA788@scowler.net> <20040404152653.GC1858@eumel.yoo.net> <20040404163912.GA1479@scowler.net> <1040405000443.ZM22220@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1040405000443.ZM22220@candle.brasslantern.com>
User-Agent: Mutt/1.5.5.1+cvs20040105i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

> Isn't this a job for the ignore-parents zstyle?  I don't recall if I've
> seen bug #240624, so maybe I'm unaware of some detail.

The specific complaint is that if you cd to a named directory, then try
to complete an argument to cd when CDABLE_VARS is set, the named
directory which is the same as $PWD will be offered for completion
(in addition to usernames which are invalid arguments at this point;
this facet is bug #240618).

> zstyle :completion::complete:cd:: ignore-parents pwd

This works if I do something like

% cd ../<TAB>

$PWD will be excluded.

But if I do

% cd
% zstyle :completion::complete:cd:: ignore-parents pwd
% cdpath=(..)
% cd c<TAB>

or

% cd
% zstyle :completion::complete:cd:: ignore-parents pwd
% setopt cdablevars
% cd c<TAB>

"clint" will be completed in either case.  I believe that the latter
behavior illustrates Thorsten's complaint.


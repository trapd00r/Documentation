From zsh-workers-request@euclid.skiles.gatech.edu  Tue Aug  6 01:57:58 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id BAA07256 for <mason@primenet.com.au>; Tue, 6 Aug 1996 01:57:55 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id LAA20912; Mon, 5 Aug 1996 11:54:00 -0400 (EDT)
Resent-Date: Mon, 5 Aug 1996 11:54:00 -0400 (EDT)
Date: Mon, 5 Aug 1996 18:53:17 +0300
From: Risto J Laitinen <rjl@math.jyu.fi>
Message-Id: <199608051553.AA074130397@tarzan.math.jyu.fi>
X-Charset: ISO_8859-1
To: zsh-workers@math.gatech.edu
Subject: zsh-3.0-pre6 zstrtol broken
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Resent-Message-ID: <"dJ_Ny1.0.e65.OaX1o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1924
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>From utils.c:

>   /* Convert string to long.  This function (without the z) *
>    * is contained in the ANSI standard C library, but a lot *
>    * of them seem to be broken.                             */

... and so is zstrtol; it does not skip leading whitespace.

--- Src/utils.c.orig    Sun Aug  4 15:39:19 1996
+++ Src/utils.c Mon Aug  5 14:04:28 1996
@@ -1035,6 +1035,8 @@
 zstrtol(const char *s, char **t, int base)
 {
     long ret = 0;
+
+    while (inblank(*s)) s++;
  
     if (!base)
        if (*s != '0')


From zsh-workers-request@euclid.skiles.gatech.edu Thu Dec 19 00:47:01 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 1136 invoked from network); 19 Dec 1996 00:47:00 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 19 Dec 1996 00:47:00 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id TAA00922; Wed, 18 Dec 1996 19:38:51 -0500 (EST)
Resent-Date: Wed, 18 Dec 1996 19:32:33 -0500 (EST)
Date: Thu, 19 Dec 1996 01:10:35 +0100 (MET)
From: Wolfgang Hukriede <whukriede@ifm.uni-kiel.de>
Message-Id: <199612190010.BAA14942@sally.ifm.uni-kiel.de>
To: zsh-users@math.gatech.edu
Subject: Re: zsh 3.0.2 useless on NeXTStation? (Solved)
Resent-Message-ID: <"Xb4M_.0.iC.Xq8ko"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/559
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Dear zsh-workers!

Turns out, stdout (aka shout) was totally unbuffered, no wonder, it was
too slow. Buffering should be beneficial to other systems also.

Many thanks, and special greetings to Timothy!

Wolfgang.

----------------------------------------------------------------------------
Now, here's the patch:

*** init.c.old  Tue Dec 17 21:14:11 1996
--- init.c      Thu Dec 19 00:53:37 1996
***************
*** 376,378 ****
  #ifdef _IOFBF
!     setvbuf(shout, NULL, _IOFBF, 0);
  #endif
--- 376,378 ----
  #ifdef _IOFBF
!     setvbuf(shout, NULL, _IOFBF, BUFSIZ);
  #endif

----------------------------------------------------------------------------
On Wed, 18 Dec 1996 22:55:50 +0100,
Wolfgang Hukriede <whukriede@ifm.uni-kiel.de> wrote:

>
> On Tue, 17 Dec 96 21:04:42 -0500 Timothy J Luoma <luomat@peak.org> wrote:
>
> > > Zsh version 3.0.2 has been released!
>
> > It is still too slow to be usable on my NeXTStation, specifically
> > the redrawing of the prompts.
> >
> > I'm at a loss as to what to do.  I'd really like to use 3.0.2, I'm
> > still on 2.6.  Is anyone else using 3.0.2 on a non-turbo
> > NeXTstation?  Are you experiencing any troubles such as the ones I
> > mentioned?   I'm also seeing weird things when I use the up arrow to
> > go through history.
>
> Dear zsh-workers!
>
> I've to confirm this. I just downloaded and compiled zsh-3.0.2 on NextStep
> 3.2 (Blackbox). The symptoms are as Timothy describes them. Setting BAUD to
> zero does help only very little. Yes, the behaviour was much better with zsh
> 2.5.2. (More plainly, 2.5.2 was right, 3.0.2 isn't.)
>
> The symptoms look as if there now are too many flushes in the zsh terminal
> output code. Since on the Next all screen output is done via
> Display-Postscript, which does heavy buffering on its own, I'd urgently
> suspect the problems are caused by interference of the buffering mechanisms.
>


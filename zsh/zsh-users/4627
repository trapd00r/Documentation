From zsh-users-return-4627-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 25 08:59:47 2002
Return-Path: <zsh-users-return-4627-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 803 invoked from network); 25 Jan 2002 08:59:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Jan 2002 08:59:46 -0000
Received: (qmail 21801 invoked by alias); 25 Jan 2002 08:59:23 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4627
Received: (qmail 21787 invoked from network); 25 Jan 2002 08:59:22 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020125085910.ZM2110@candle.brasslantern.com>
Date: Fri, 25 Jan 2002 08:59:10 +0000
In-Reply-To: <20020124215304.B32699@gerf.org>
Comments: In reply to The Doctor What <docwhat@gerf.org>
        "ZSH 3.0.8 and modifiers" (Jan 24,  9:53pm)
References: <20020124215304.B32699@gerf.org>
X-Mailer: Z-Mail (5.0.0 30July97)
To: The Doctor What <docwhat@gerf.org>, zsh-users@sunsite.dk
Subject: Re: ZSH 3.0.8 and modifiers
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jan 24,  9:53pm, The Doctor What wrote:
} Subject: ZSH 3.0.8 and modifiers
}
}  path=( ${$path}(/N) )

I presume you mean ${^path}, as ${$path} gives "bad substitution" in
4.0.x and expands to the PID (i.e., ${$}, i.e., $$) in 3.0.x.

} But under 3.0.8 (on my Darwin/OS X iBook) it produces an array
} with the string (/N) appended to each item.  Is there something I'm
} missing?

In 3.0.8, a trailing parenthesized string is not interpreted as glob
qualifiers unless there is at least one other globbing special char
in the rest of the string.  Brace expansions, including RC_EXPAND_PARAM,
are NOT considered to be globbing characters.

In 4.0.x, using brace expansion or RC_EXPAND_PARAM is sufficient to
cause the trailing the parens to be interpreted as qualifiers.  I have
forgotten when or why this change was made.

The usual workaround is to insert an empty alternation pattern into
the string, like so:

    path=( ${^path}(|)(/N) )


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


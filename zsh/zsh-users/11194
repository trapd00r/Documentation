From zsh-users-return-11194-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 14 16:54:59 2007
Return-Path: <zsh-users-return-11194-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7467 invoked from network); 14 Feb 2007 16:54:53 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 14 Feb 2007 16:54:53 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 33399 invoked from network); 14 Feb 2007 16:54:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Feb 2007 16:54:46 -0000
Received: (qmail 20090 invoked by alias); 14 Feb 2007 16:54:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11194
Received: (qmail 20079 invoked from network); 14 Feb 2007 16:54:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 14 Feb 2007 16:54:38 -0000
Received: (qmail 32225 invoked from network); 14 Feb 2007 16:54:38 -0000
Received: from p54850b5e.dip0.t-ipconnect.de (HELO localhost) (84.133.11.94)
  by a.mx.sunsite.dk with SMTP; 14 Feb 2007 16:54:32 -0000
Received: from localhost ([127.0.0.1])
	by localhost with esmtp (Exim 4.62)
	(envelope-from <Meino.Cramer@gmx.de>)
	id 1HHNOk-00031w-7P; Wed, 14 Feb 2007 17:54:28 +0100
Date: Wed, 14 Feb 2007 17:54:25 +0100 (CET)
Message-Id: <20070214.175425.74743859.Meino.Cramer@gmx.de>
To: pws@csr.com
Cc: zsh-users@sunsite.dk
Subject: Re: lines to array
From: Meino Christian Cramer <Meino.Cramer@gmx.de>
In-Reply-To: <20070214112820.b115e849.pws@csr.com>
References: <17393e3e0702132143v36772365j179fff0f77cd6f@mail.gmail.com>
	<14989d6e0702132345yecd64f9xdaf474f1d3bf85ec@mail.gmail.com>
	<20070214112820.b115e849.pws@csr.com>
X-Mailer: Mew version 5.1.51 on Emacs 21.4 / Mule 5.0 (SAKAKI)
Mime-Version: 1.0
Content-Type: Text/Plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

From: Peter Stephenson <pws@csr.com>
Subject: Re: lines to array
Date: Wed, 14 Feb 2007 11:28:20 +0000

Hi,

 thanks a lot for the code and its explanation! :)

 One additional question: Is there a zshy way to sort
 the array and throw away any doubled entry ?

 Happy zshing!
 mcc



> "Christian Walther" <cptsalek@gmail.com> wrote:
> > On 14/02/07, Matt Wozniski <godlygeek@gmail.com> wrote:
> > > array=( "${(f)$(ls -l)}" )
> > 
> > Could you please explain what ${(f)...} actually does? Is there some
> > kind of parameter expansion going on?
> 
> Yes, the effect of (f) is described in "Parameter Expansion Flags" in the
> zshexpn manual page.  There's a hairy description below that of how nested
> parmaeter expansion works.  This counts as a nested parameter expansion
> even though the innermost level is actually a command substitution.
> 
> This gets explained every now and then on this list, but to recap:
> 
> $(...) inside parameter is treated as a normal command substitution.  The
> text for enclosing parameter expansion operations is the result of the
> command substitution rather than taken from a parameter.  Because of the
> double quotes, the command substitution produces a single word at this
> point.
> 
> (f) is documented as being equivalent to (ps:\n:).  The s:\n: forces the
> text to be split on \n. the p interprets the \n as a newline according to
> normal "print" rules.
> 
> The result is the text of "ls -l", split into lines.
> 
> You'll often see this written as
> 
> array=( ${(f)"$(ls -l)"} )
> 
> which indicates explicitly the only the command substitution is affected by
> the double quotes.  However, forced splitting (unlike automatic word
> splitting) overrides the double quotes anyway.
> 
> -- 
> Peter Stephenson <pws@csr.com>                  Software Engineer
> CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
> Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070
> 
> 
> To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php
> 
> To get further information regarding CSR, please visit our Investor Relations page at http://ir.csr.com/csr/about/overview


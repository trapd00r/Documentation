From zsh-users-return-3665-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 14 08:49:58 2001
Return-Path: <zsh-users-return-3665-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24336 invoked from network); 14 Mar 2001 08:49:55 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Mar 2001 08:49:55 -0000
Received: (qmail 7872 invoked by alias); 14 Mar 2001 08:49:13 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3665
Received: (qmail 7861 invoked from network); 14 Mar 2001 08:49:12 -0000
From: jarausch@igpm.rwth-aachen.de
Message-Id: <200103140847.JAA64682@numa1.igpm.rwth-aachen.de>
Date: Wed, 14 Mar 2001 09:47:02 +0100
Reply-To: jarausch@igpm.rwth-aachen.de
Subject: Re: strange effect on Linux
To: schaefer@candle.brasslantern.com
cc: zsh-users@sunsite.dk
In-Reply-To: <1010312221520.ZM29765@candle.brasslantern.com>
MIME-Version: 1.0
Content-Type: TEXT/plain; charset=us-ascii

On 12 Mar, Bart Schaefer wrote:
> On Mar 12, 10:51am, jarausch@igpm.rwth-aachen.de wrote:
> } Subject: strange effect on Linux
> }
> } Progs=(perl5.7.$V sperl5.7.$V perl suidperl a2p c2ph h2ph h2xs \
> }        perlbug perldoc pl2pm splain perlcc dprofpp s2p find2perl \
> }        pod2man pod2html pod2latex pod2text pod2usage podchecker podselect pstruct)
> } mkdir Perl.$Mode.5.7.$V.$R
> } mv -f $^Progs Perl.$Mode.5.7.$V.$R/
> } 
> } Again and again I get the error messages
> } 
> } mv: Perl.Prod.5.7.0.9063/perl: No such file or directory
> } mv: Perl.Prod.5.7.0.9063/suidperl: No such file or directory
> } mv: Perl.Prod.5.7.0.9063/pstruct: No such file or directory
> } 
> } and I don't understand why it tries to access these files.
> 
> perl, suidperl, and pstruct are all hard links to other files.  In each
> case your "mv" command has already "mv"d the other name (e.g. perl5.7.0
> for perl) for those files to the new directory.
> 
> This sounds like a bug in "mv" -- are you using zsh's files module, or
> /bin/mv, or ...?  Which linux *distribution* (not just kernel version)
> of linux are you using?  What version of GNU fileutils?  Are there any
> NFS file systems involved?


Many thanks, you're right.
It seems to be a bug in GNU fileutils-4.0

There is no NFS file system involved.

I've made a simple test in a fresh directory

mkdir TT
touch a
ln a b
mv a b TT

and I get the same error message that
TT/b is missing.

Having loaded zsh/files
it works just fine.

So, I'll have to write a bug report to gnu.

Thanks for solving this mystery,
Helmut.


-- 
Helmut Jarausch
Lehrstuhl fuer Numerische Mathematik
Institute of Technology, RWTH Aachen
D 52056 Aachen, Germany


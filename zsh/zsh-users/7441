From zsh-users-return-7441-mason-zsh=primenet.com.au@sunsite.dk Mon May 10 14:54:12 2004
Return-Path: <zsh-users-return-7441-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9107 invoked from network); 10 May 2004 14:54:12 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 10 May 2004 14:54:12 -0000
Received: (qmail 28035 invoked from network); 10 May 2004 14:53:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 May 2004 14:53:30 -0000
Received: (qmail 20709 invoked by alias); 10 May 2004 14:53:21 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7441
Received: (qmail 20700 invoked from network); 10 May 2004 14:53:20 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 10 May 2004 14:53:17 -0000
Received: (qmail 27452 invoked from network); 10 May 2004 14:53:16 -0000
Received: from lhuumrelay3.lnd.ops.eu.uu.net (62.189.58.19)
  by a.mx.sunsite.dk with SMTP; 10 May 2004 14:53:14 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i4AEqlv16596
	for <zsh-users@sunsite.dk>; Mon, 10 May 2004 14:52:47 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T697c060d0dc0a88d01858@MAILSWEEPER01.csr.com> for <zsh-users@sunsite.dk>;
 Mon, 10 May 2004 15:52:17 +0100
Received: from csr.com ([192.168.144.127]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 10 May 2004 15:54:20 +0100
To: zsh-users@sunsite.dk
Subject: Re: ksh Emulation Not Clearing Envariables 
In-reply-to: "Bart Schaefer"'s message of "Sun, 09 May 2004 14:58:00 PDT."
             <Pine.LNX.4.44.0405091449250.29962-100000@toltec.zanshin.com> 
Date: Mon, 10 May 2004 15:52:47 +0100
Message-ID: <3140.1084200767@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 10 May 2004 14:54:20.0026 (UTC) FILETIME=[AC83ADA0:01C4369E]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: **
X-Spam-Status: No, hits=2.1 required=6.0 tests=BAYES_90 autolearn=no 
	version=2.63
X-Spam-Hits: 2.1

Bart Schaefer wrote:
> On Sat, 8 May 2004, Chris Jepeway wrote:
> 
> > I'd expect the output to be
> > 
> > 	X=one
> > 
> > Instead, I see
> > 
> > 	X=one
> > 	X=one
> > 
> > Without ksh emulation enabled, I see the expected output.
> > 
> > This is a bug, right?
> 
> It's the intended behavior.  Whether the intention is wrong, I'm not sure.
> I believe there was a discussion of the POSIX requirements for this at
> some point in the past, and the non-zsh-emulation modes follow POSIX while
> (as usual, e.g. shwordsplit) zsh-mode does what it thinks is preferable.

I vaguely remember the argument years ago...

bash and ksh 88 both remove the environment variable, so probably we
ought to do the same.  It would be odd for zsh to insist on niceties
when the shells based more firmly on POSIX don't.

Solaris8 sh doesn't actually bother to set X at all when the command is a
function.  Strange.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


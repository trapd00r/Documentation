From zsh-workers-return-20463-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 07 01:43:47 2004
Return-Path: <zsh-workers-return-20463-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2540 invoked from network); 7 Oct 2004 01:42:47 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?tkxrmnujdgGVW4loFbSMaWtmSuD1W9Is?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 7 Oct 2004 01:42:47 -0000
Received: (qmail 12246 invoked from network); 6 Oct 2004 17:54:59 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns2.melb.primenet.com.au with SMTP; 6 Oct 2004 17:54:59 -0000
Received: (qmail 23165 invoked from network); 6 Oct 2004 17:53:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Oct 2004 17:53:51 -0000
Received: (qmail 22966 invoked by alias); 6 Oct 2004 17:53:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20463
Received: (qmail 22952 invoked from network); 6 Oct 2004 17:53:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Oct 2004 17:53:36 -0000
Received: (qmail 22802 invoked from network); 6 Oct 2004 17:53:36 -0000
Received: from dan.emsphone.com (199.67.51.101)
  by a.mx.sunsite.dk with SMTP; 6 Oct 2004 17:53:32 -0000
Received: (from dan@localhost)
	by dan.emsphone.com (8.12.11/8.12.11) id i96HrUrO069436;
	Wed, 6 Oct 2004 12:53:30 -0500 (CDT)
	(envelope-from dan)
Date: Wed, 6 Oct 2004 12:53:30 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: Peter Stephenson <pws@csr.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: bug with for and time
Message-ID: <20041006175328.GB87634@dan.emsphone.com>
References: <41616CDC.8020701@codesourcery.com> <200410041610.i94GAl92005952@news01.csr.com> <20041005113848.6f3715bd@buddha.localdomain.de> <20041005181820.GC30419@dan.emsphone.com> <20041006134818.089f5218@buddha.localdomain.de> <200410061706.i96H6LTO010315@news01.csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <200410061706.i96H6LTO010315@news01.csr.com>
X-OS: FreeBSD 5.3-BETA7
X-message-flag: Outlook Error
User-Agent: Mutt/1.5.6i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

In the last episode (Oct 06), Peter Stephenson said:
> This has never been great.  There appear to be two problems.

Actually it _was_ great back in zsh 2.5, which did use getrusage().  It
was dropped in zsh 3.0 for some reason.  My TIMEFMT is still set to
"U:%U S:%S E:%E CPU:%P Faults:%F Swaps:%W" as a reminder to put it back
in (not a very effective reminder I guess).

> The following tries to address both problems.  It's basically working,
> but there could easily be glitches.

Bonus points for anyone who adds back the extra TIMEFMT options too.

-- 
	Dan Nelson
	dnelson@allantgroup.com


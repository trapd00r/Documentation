From zsh-workers-return-14334-mason-zsh=primenet.com.au@sunsite.dk Mon May 14 17:05:23 2001
Return-Path: <zsh-workers-return-14334-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22399 invoked from network); 14 May 2001 17:05:22 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 May 2001 17:05:22 -0000
Received: (qmail 6841 invoked by alias); 14 May 2001 17:05:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14334
Received: (qmail 6820 invoked from network); 14 May 2001 17:05:11 -0000
X-Authentication-Warning: paullew-ultra.cisco.com: paullew set sender to paullew@cisco.com using -f
From: Paul Lew <paullew@cisco.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="1arJv505QS"
Content-Transfer-Encoding: 7bit
Message-ID: <15104.4136.595537.497564@paullew-ultra.cisco.com>
Date: Mon, 14 May 2001 10:04:40 -0700
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Cc: zsh-workers@sunsite.dk, Paul Lew <paullew@cisco.com>
Subject: Re: architecture independent wordcode files (.zwc)
In-Reply-To: <200105140715.JAA06614@beta.informatik.hu-berlin.de>
References: <1010513171048.ZM8231@candle.brasslantern.com>
	<200105140715.JAA06614@beta.informatik.hu-berlin.de>
X-Mailer: VM 6.92 under Emacs 20.7.1


--1arJv505QS
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "Sven" == Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

    Sven> Bart Schaefer wrote:
    >> ...
    >> 
    >> There are architectures where `unsigned int' is 16 bits or 64
    >> bits.  We should be determining a 32-bit type via configure and
    >> using it here.

    Sven> When we added zcompile, I asked if there were systems on
    Sven> which sizeof(int) != 4 but got no reply.  And I suggested
    Sven> using a configure test but I still don't know enough about
    Sven> configure to write this test myself...

    Sven> Paul, I had tested it with the three architectures I have
    Sven> access to here: Redhat Linux 5.someting, Solaris 2.6 and
    Sven> Tru64 Unix.  That still works for me for the test cases I
    Sven> tried (between the latter to systems this includes the
    Sven> completion system).  So I need more information, could you
    Sven> send us the uncompiled files (or a simplified but still
    Sven> not-working version if there's something in there you don't
    Sven> want to show)?

I have lots of startup files for zsh, fortunately, the .zshenv is good
enough to trigger the problem.  Attached below.

					-- Paul  05/14/01  09:10 AM --


--1arJv505QS
Content-Type: text/plain
Content-Description: .zshenv
Content-Disposition: inline;
	filename=".zshenv"
Content-Transfer-Encoding: 7bit

#! /auto/insbu-cnstools/bin/zsh -f
#
#	Z shell environment setup
#
#	Created at:	06/05/91  08:44 PM
#	Last update:	05/12/01  07:34 PM  (Edition: 177)
#
[[ -O /tmp/zshenv-debug.$LOGNAME ]] && . /tmp/zshenv-debug.$LOGNAME
#---------------------------------------------------------------#
#		      Command Search Path			#
#---------------------------------------------------------------#
artool=/auto/insbu-cnstools/ar
[[ -d $HOME/.zdata ]] || mkdir $HOME/.zdata
zpath=$HOME/.zdata/zpath.$(/bin/uname -n)
[[ $zpath -nt .zshenv ]] || /bin/rm -f $zpath
case $(/bin/uname -sr) in
	Linux\ 2.2.14*)					# Linux redhat 7.0
		bindir=binx86
		libdir=libx86
		zshenv=/bin/zsh				;;
	SunOS\ 5.5.*)
		bindir=bin-5.5
		libdir=lib-5.5
		zshenv=/usr/local/bin/zsh		;;
	*)	bindir=bin
		libdir=lib
		zshenv=/auto/insbu-cnstools/bin/zsh	;;
	esac
if [[ -r $zpath ]]; then
	path=($(< $zpath ))
else
	#odeuname=/usr/sde/tools/common/ode_uname
	dirs=(.)
	dirs=($dirs $artool/$bindir $artool/sh $artool/perl)
	dirs=($dirs /auto/insbu-cnstools/$bindir)		#cisco CNS
	dirs=($dirs /auto/insbu-cnstools/s$bindir)		#cisco CNS

	#dirs=($dirs /auto/insbu-cnstools/Office51/bin)		#Star Office
	dirs=($dirs /auto/cnsadpub/cns/$bindir)			#cisco CNS
	dirs=($dirs /auto/insbu-cnstools/apache/$bindir)	#Cisco apache
	dirs=($dirs /auto/insbu-cnstools/mysql/$bindir)		#Cisco mysql
	dirs=($dirs /opt/AICar1/usrbin)				#cisco AR
	dirs=($dirs /nfs/csc/mib-release/bin)			#cisco MIB
	dirs=($dirs /auto/insbu-cnstools/java/$bindir)		#cisco java
	dirs=($dirs /usr/local/java/bin)
	dirs=($dirs /usr/local/bin /usr/local/sbin)
	dirs=($dirs /sw/licensed/sun/SUNWspro/5.0/sparc-sun-solaris2.6/bin)
								#SunPro C++
	dirs=($dirs /usr/dt/bin /router/bin)			#cisco
	dirs=($dirs /sw/current/solaris2bin)			#cisco
	dirs=($dirs /usr/atria/bin)				#Clearcase
	dirs=($dirs /usr/local/ddts/bin)			#cisco
	dirs=($dirs $([[ -r $odeuname ]] && $odeuname -p))	#css stuff
	dirs=($dirs /www/bin)					#mhttpd stuff
	dirs=($dirs /usr/X11R6/bin /usr/openwin/bin)		#SunOS
	dirs=($dirs /usr/etc/netls)				#hpux
	dirs=($dirs /usr/bin/X11)
	dirs=($dirs /sbin /usr/sbin /usr/lbin)			#osf + ultrix
	dirs=($dirs /usr/ccs/bin)				#solaris
	dirs=($dirs /usr/X11/bin /usr/openwin/bin)		#Linux
	dirs=($dirs /usr/andrew/bin)				#Linux
	dirs=($dirs /usr/ucb /usr/bin /bin)
	dirs=($dirs /etc /usr/etc)
	dirs=($dirs /usr/local/games /usr/games /pub/games)
	unset odeuname
	# if [[ $(uname -s) = "OSF1" && $(uname -v) -ge 878 ]]; then
	#	export _RLD_ARGS=-ignore_all_versions           #osf 4.0d
	#							#need for less
	#	fi
	path=()
	foreach dir ($dirs)
		if [[ -d $dir ]]; then path=(${path} $dir); fi
		end
	echo $path > $zpath
	chmod go-w $zpath
	unset dirs dir
	fi

case $(uname) in
	SunOS)
		LD_LIBRARY_PATH=/auto/insbu-cnstools/$libdir
		LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib
		LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/sw/licensed/sun/SUNWspro/5.0/sparc-sun-solaris2.6/lib
		export LD_LIBRARY_PATH					;;
	Linux)
		LD_LIBRARY_PATH=/auto/insbu-cnstools/$libdir
		LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib
		export LD_LIBRARY_PATH					;;
	OSF1)	export XMCD_LIBDIR=/usr/lib/X11/xmcd			;;
	*)								;;
	esac
#---------------------------------------------------------------#
#		Application Environment Variables		#
#---------------------------------------------------------------#
# Allow group write, to protect valueble data, set up .in and .out
# file in the directory
umask 002
HPATH=~/info/tcsh
PAGER=less
MORE='-cs'

LESS='-Xj5-PM?pb%pb\%. ?f%f:stdin.  ?ltLine\: %lt-%lb:Byte\: %bt-%bb.'
LESS="$LESS"'  ?ssize\: %s. ?m(%i of %m). ?e(EOF) ?x- Next\: %x.$'
LESS="${LESS}MicesaO/usr/tmp/less_$UID.xxxxx"

EDITOR='vi'
#PHONES=~paullew/dat/phones.tip
#REMOTE=~paullew/dat/remote.tip
#HELPDIR=~/lib/gnuplot-help
HELPDIR=$artool/zsh/zsh-help
TORSO='-n -c3'
FCODES=~/log/$USER.bg
FTPR_PASSWORD="-$LOGNAME@cisco.com"

# make sure sub-shells are zsh
export SHELL=$zshenv

# for GNU emacs shell mode
ESHELL=/bin/csh

TGIF_LOGIC=~/lib/tgif/logic
TGIF_FLOWCHART=~/lib/tgif/flowchart
TGIF_PETRI=~/lib/tgif/petri
TGIF_LATEX=~/lib/tgif/latex

GUI_BUILDER=/usr/local/lib/GuiBuilder

# Basic types handled by zsh postfix characters, we just use color to
# highlight the archive, program source code, etc.
LS_COLORS='no=00:fi=00:di=00:ln=00:pi=00:so=00:bd=00:cd=00:ex=00'
LS_COLORS="${LS_COLORS}:*.cmd=00;35:*.exe=00;35:*.com=00;35"
LS_COLORS="${LS_COLORS}:*.btm=00;35:*.bat=00;35"
LS_COLORS="${LS_COLORS}:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31"
LS_COLORS="${LS_COLORS}:*.lzh=00;31:*.zip=00;31"
LS_COLORS="${LS_COLORS}:*.z=00;31:*.Z=00;31:*.gz=00;31:*.zoo=00;31"
LS_COLORS="${LS_COLORS}:*.jpg=01;35:*.gif=01;35:*.bmp=01;35"
LS_COLORS="${LS_COLORS}:*.xbm=01;35:*.xpm=01;35:*.tif=01;35"
LS_COLORS="${LS_COLORS}:*.c=00;34:*.h=00;34"

ICAL_LIBRARY=/usr/local/lib/ical/v2.0p2

# netscape 4.73 (06/15/00  09:08 AM)
export MOZILLA_HOME=/auto/insbu-cnstools/netscape

# netshow 2.9 (10/04/99  08:08 AM)
#export NETSHOW_HOME_DIR=/usr/cns/netshow

export PAGER MORE LESS EDITOR PHONES REMOTE HELPDIR TORSO FCODES
export TGIF_LOGIC TGIF_FLOWCHART TGIF_PETRI TGIF_LATEX GUI_BUILDER
export LS_COLORS FTPR_PASSWORD ICAL_LIBRARY

export TZ=PST8PDT

# Java stuff - for j2sdk-1.3.0.02 (04/07/01  08:59 PM)
CLASSPATH=/auto/insbu-cnstools/java:/auto/insbu-cnstools/java/lib
CLASSPATH=$CLASSPATH:/auto/insbu-cnstools/java/jre/lib
export CLASSPATH

# turn off zle for emacs (04/24/01  02:48 PM)
if [[ $EMACS == "t" ]]; then
	unsetopt zle
	fi

# ssh setup (09/14/99  07:38 AM)
# To allow no password ssh and scp
if [[ -r ~/.ssh/authorized_keys && $(hash -m ssh-agent) != "" ]]; then
	# run ssh-agent once for each engineer''s first login
	/bin/ps -U $(id | sed -n 's/uid=//;s/(.*$//p') | \
		grep ssh-agen > /dev/null
	if [[ $? -ne 0 ]]; then
		racefile=~/.ssh/ssh-agent.$HOST.tmp
		echo $pid >> $racefile
		if [[ $(head -1 $racefile) -eq $pid ]]; then
			# I am the first one
			ssh-agent -s > ~/.ssh/ssh-agent.$HOST
			(sleep 5; rm -f $racefile) &
			fi
		unset racefile
		fi
	if [[ -r ~/.ssh/ssh-agent.$HOST ]]; then
		. ~/.ssh/ssh-agent.$HOST
		fi
	fi
#---------------------------------------------------------------#
#		  Project Environment Variables			#
#---------------------------------------------------------------#
# PAW stuff
#export CVSROOT=/nfs/paw/src
#export PAWDEV=~lew/paw/u-world.CUR
#
# CSS ODE stuff
#export ODE_VER=ode4.0
#export PRINCIPAL=Paul_Lew
#export ODE_DIFF=ode-wdiff
#export ODE_VDIFF=ode-ediff
#
# Cisco Clearcase
export CC_PREPEND_PATH=$artool/sh:/auto/insbu-cnstools/bin
export CC_DISABLE_COPYRIGHT_CHECK=1
if [[ "$CLEARCASE_ROOT" != "" ]]; then
	export DOT_TAGS=/vob/cnsar/thin/destiny/.tags
	fi

# Printer Setup
# 11/06/00  10:44 AM
export LPDEST=sj20-b9
# printer spool directory for StarOffice
export STAR_SPOOL_DIR=/tmp

# export DISPLAY=${DISPLAY:=$LOGNAME-ultra:0.0}
#---------------------------------------------------------------#
#		source private zshenv setup			#
#---------------------------------------------------------------#
[[ -r $HOME/.zshenv-private ]] && . $HOME/.zshenv-private

## Local Variables:	#
## mode: ksh		#
## End:			#

--1arJv505QS--


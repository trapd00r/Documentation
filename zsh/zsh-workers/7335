From zsh-workers-return-7335-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Aug 02 06:06:53 1999
Return-Path: <zsh-workers-return-7335-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3933 invoked from network); 2 Aug 1999 06:06:50 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Aug 1999 06:06:50 -0000
Received: (qmail 9616 invoked by alias); 2 Aug 1999 06:06:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7335
Received: (qmail 9609 invoked from network); 2 Aug 1999 06:06:39 -0000
To: zsh-workers@sunsite.auc.dk
Path: mason
From: mason@primenet.com.au (Geoff Wing)
X-Newsgroups: lists.zsh.workers
Subject: Re: Couldn't Build 3.1.6 on Nextstep 3.3 m68k System
Date: 2 Aug 1999 06:06:29 GMT
Organization: PrimeNet Computer Consultants
Lines: 32
Distribution: local
Message-ID: <slrn7qadb5.3pf.mason@coral.primenet.com.au>
References: <Pine.NXT.3.96.990801214243.13380A-100000@reddog>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 933573989 3888 203.43.15.2 (2 Aug 1999 06:06:29 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: 2 Aug 1999 06:06:29 GMT
User-Agent: slrn/0.9.5.6 (UNIX)

Irving Wolfe <irving@Happy-Man.com> typed:
:The make ended thus:
:
:Updated `zshpaths.h'.
:Creating `zshxmods.h'.
:cc -c -I.  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o init.o init.c
:init.c: In function `init_io':
:init.c:360: too few arguments to function `fcntl'
:init.c:364: too few arguments to function `fcntl'
:*** Exit 1
:Stop.

Try the following; with F_GETFL, all args are ignored anyway.


--- Src/init.c.org	Wed Jun 30 02:33:52 1999
+++ Src/init.c	Mon Aug  2 16:05:27 1999
@@ -353,7 +353,7 @@
 	 * Try both stdin and stdout before trying /dev/tty. -- Bart
 	 */
 #if defined(HAVE_FCNTL_H) && defined(F_GETFL)
-#define rdwrtty(fd)	((fcntl(fd, F_GETFL) & O_RDWR) == O_RDWR)
+#define rdwrtty(fd)	((fcntl(fd, F_GETFL, 0) & O_RDWR) == O_RDWR)
 #else
 #define rdwrtty(fd)	1
 #endif


-- 
Geoff Wing : <gcw@pobox.com>     Work URL: http://www.primenet.com.au/
Rxvt Stuff : <gcw@rxvt.org>      Ego URL : http://pobox.com/~gcw/
Zsh Stuff  : <gcw@zsh.org>       Phone   : (Australia) 0413 431 874


From zsh-users-return-12245-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 20 19:31:22 2007
Return-Path: <zsh-users-return-12245-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10595 invoked from network); 20 Nov 2007 19:31:14 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Nov 2007 19:31:14 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18969 invoked from network); 20 Nov 2007 19:31:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 19:31:08 -0000
Received: (qmail 18031 invoked by alias); 20 Nov 2007 19:30:53 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12245
Received: (qmail 18011 invoked from network); 20 Nov 2007 19:30:52 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Nov 2007 19:30:52 -0000
Received: (qmail 17628 invoked from network); 20 Nov 2007 19:30:52 -0000
Received: from wizard.cse.nd.edu (129.74.152.2)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 19:30:47 -0000
Received: from wizard.cse.nd.edu (wizard.cse.nd.edu [129.74.152.2])
	by wizard.cse.nd.edu (8.13.4/8.13.4) with ESMTP id lAKJUdee002753
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <zsh-users@sunsite.dk>; Tue, 20 Nov 2007 14:30:39 -0500 (EST)
Received: from localhost (jwozniak@localhost)
	by wizard.cse.nd.edu (8.13.4/8.12.10/Submit) with ESMTP id lAKJUdto002749
	for <zsh-users@sunsite.dk>; Tue, 20 Nov 2007 14:30:39 -0500 (EST)
X-Authentication-Warning: wizard.cse.nd.edu: jwozniak owned process doing -bs
Date: Tue, 20 Nov 2007 14:30:39 -0500 (EST)
From: Justin M Wozniak <jwozniak@cse.nd.edu>
To: zsh-users@sunsite.dk
Subject: Re: Random numbers in functions 
In-Reply-To: <200711201823.lAKIN5oM011816@news01.csr.com>
Message-ID: <Pine.GSO.4.61.0711201411140.5718@cse.nd.edu>
References: <200711201823.lAKIN5oM011816@news01.csr.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-CSE-Virus-Scan: engine v5.1.00; dat v5152
X-CSE-SpamScan: SpamAssassin 3.002000
X-Scanned-By: MIMEDefang 2.62 on 129.74.152.2


Thanks!  But since I'm planning to obtain many random numbers I'd like to 
do this without file operations.  Using a global variable should be 
equivalent to your solution but the output of rand48() seems to be 
convergent.

Is the seed or the state of the generator saved?

Here's a simplified version of what I'm looking at:

The lib (functions.zsh):

typeset -g RANDOM_PARAMETER="abcabcabcabc"

random()
{
   print "RP: $RANDOM_PARAMETER"
   T=$(( rand48(RANDOM_PARAMETER) * 1000 ))
   print "RP: $RANDOM_PARAMETER"

   RESULT=$(( T % 10 ))
   print "RESULT: ${RESULT}"

   print
}

The call:

source functions.zsh
for i in {1..4} ; { print "TOP_RP: $RANDOM_PARAMETER" ; random }

The result:

TOP_RP: abcabcabcabc
RP: abcabcabcabc
RP: 004db541003a
RESULT: 0

TOP_RP: 004db541003a
RP: 004db541003a
RP: 004db541003a
RESULT: 0

TOP_RP: 004db541003a
RP: 004db541003a
RP: 004db541003a
RESULT: 0

TOP_RP: 004db541003a
RP: 004db541003a
RP: 004db541003a
RESULT: 0


-- 
Justin Michael Joseph Wozniak

On Tue, 20 Nov 2007, Peter Stephenson wrote:


From zsh-workers-return-5670-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 08 08:19:27 1999
Return-Path: <zsh-workers-return-5670-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24046 invoked from network); 8 Mar 1999 08:19:25 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Mar 1999 08:19:25 -0000
Received: (qmail 18764 invoked by alias); 8 Mar 1999 08:19:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5670
Received: (qmail 18757 invoked from network); 8 Mar 1999 08:19:00 -0000
Date: Mon, 8 Mar 1999 09:18:16 +0100 (MET)
Message-Id: <199903080818.JAA11303@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Vin Shelton's message of Sun, 07 Mar 1999 18:30:20 -0500
Subject: Re: Variable completion in pws-11


Vin Shelton wrote:

> echo $ZSH<TAB> just beeps at me in pws-11.  It did the right thing in pws-10 - 
> it offered me the menu of ZSH_NAME or ZSH_VERSION.  
> 
> : ~ Sun 7 18:20; echo $ZSH<TAB>
>                            ^
>                            +---- This just beeps.
> 
> BTW, both echo and print have the same behavior.  This behavior occurs even
> with zsh -f.

Sorry, this was lost (with old-style completion) when adding the
`parameter' context for new style completion.

Bye
 Sven

diff -u os/Zle/zle_tricky.c Src/Zle/zle_tricky.c
--- os/Zle/zle_tricky.c	Mon Mar  8 09:06:41 1999
+++ Src/Zle/zle_tricky.c	Mon Mar  8 09:16:20 1999
@@ -5315,7 +5315,7 @@
     char *p, *os = s;
 
     /* Inside $... ? */
-    if ((p = check_param(s, 0)))
+    if (compfunc && (p = check_param(s, 0)))
 	os = s = p;
 
     /* We build a copy of the list of matchers to use to make sure that this

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


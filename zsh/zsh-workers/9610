From zsh-workers-return-9610-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 07 23:18:19 2000
Return-Path: <zsh-workers-return-9610-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22358 invoked from network); 7 Feb 2000 23:18:18 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Feb 2000 23:18:18 -0000
Received: (qmail 9004 invoked by alias); 7 Feb 2000 23:18:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9610
Received: (qmail 8996 invoked from network); 7 Feb 2000 23:18:11 -0000
To: zsh-workers@math.gatech.edu
Cc: Jukka Laurila <jplauril@cc.hut.fi>
Subject: Re: Zsh 3.1.6 - ${~foo} expansion bug
References: <Pine.OSF.4.10.10002072343280.17515-100000@jade.hut.fi>
X-Attribution: adl
From: Alexandre Duret-Lutz <duret_g@epita.fr>
Date: 08 Feb 2000 00:16:43 +0100
In-Reply-To: Jukka Laurila's message of "Tue, 8 Feb 2000 00:29:23 +0200 (EET)"
Message-ID: <mvbya8wppr8.fsf@phobos.lrde.epita.fr>
Lines: 54
User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.5
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

>>> "Jukka" == Jukka Laurila <jplauril@cc.hut.fi> writes:

[...]

 Jukka> I just tried compiling zsh-3.1.6-dev-17 both with gcc 2.95.2 in my
 Jukka> Debian Potato environment and with egcs-2.91.66 in my RedHat 6.1
 Jukka> environment (using chroot). The one compiled in Potato was broken
 Jukka> but the one compiled in RH 6.1 worked!

 Jukka> Could someone try compiling zsh with gcc 2.95.2 and tell me if it
 Jukka> breaks?

I can reproduce this with zsh patched up to date (Debian, gcc 2.95.2).

>From my experiments I am tempted to deduce that this is
reproducible as long as you don't call a builtin before
the for loop.

~/tmp/tmp % zsh -f                                                     0:10 #27
phobos% f=*
phobos% for i ($~f) echo $i
a b c d
phobos% for i ($~f) echo $i
a
b
c
d
phobos% 
~/tmp/tmp % zsh -f                                                     0:10 #27
phobos% gcc
gcc: No input files
phobos% f=*
phobos% for i ($~f) echo $i
a b c d
phobos% 
~/tmp/tmp % zsh -f                                                     0:10 #27
phobos% cd .
phobos% f=*
phobos% for i ($~f) echo $i
a
b
c
d
phobos% 
~/tmp/tmp % zsh -f                                                     0:11 #27
phobos% /bin/echo

phobos% f=*
phobos% for i ($~f) echo $i
a b c d
phobos% 

-- 
Alexandre Duret-Lutz


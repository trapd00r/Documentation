From zsh-workers-return-8955-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Dec 08 21:24:36 1999
Return-Path: <zsh-workers-return-8955-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27144 invoked from network); 8 Dec 1999 21:24:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Dec 1999 21:24:34 -0000
Received: (qmail 20068 invoked by alias); 8 Dec 1999 21:24:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8955
Received: (qmail 20052 invoked from network); 8 Dec 1999 21:24:17 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: zfsession function log out and segmentation fault 
In-reply-to: ""V. L. Simpson""'s message of "Tue, 07 Dec 1999 21:28:02 CST."
             <14413.53314.881388.174064@godzilla.micronet> 
Date: Wed, 08 Dec 1999 21:24:38 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E11voZJ-0006u8-00.1999-12-08-21-24-16@mail3.svr.pol.co.uk>

"V. L. Simpson" wrote:
> While using zftp system with zsh-3.1.6-pws-10
> zfsession returns default
> zfsession -l kicks me out to my login prompt.

For some reason, I had more trouble with the session subcommand than any of
the others.  I shall write out a hundred times `fixed-size buffers without
tests are hostages to fortune'.

--- Src/Modules/zftp.c.sess	Fri Dec  3 18:47:07 1999
+++ Src/Modules/zftp.c	Wed Dec  8 21:10:48 1999
@@ -3076,7 +3076,7 @@
 static int
 bin_zftp(char *name, char **args, char *ops, int func)
 {
-    char fullname[11] = "zftp ";
+    char fullname[20] = "zftp ";
     char *cnam = *args++, *prefs, *ptr;
     Zftpcmd zptr;
     int n, ret = 0;

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>


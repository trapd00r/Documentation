From zsh-workers-return-11500-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 22 13:54:51 2000
Return-Path: <zsh-workers-return-11500-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2380 invoked from network); 22 May 2000 13:54:49 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 May 2000 13:54:49 -0000
Received: (qmail 229 invoked by alias); 22 May 2000 13:54:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11500
Received: (qmail 222 invoked from network); 22 May 2000 13:54:34 -0000
Date: Mon, 22 May 2000 15:52:56 +0200 (MET DST)
Message-Id: <200005221352.PAA20526@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Mon, 22 May 2000 17:44:14 +0400
Subject: PATCH: Re: Still problems RE: PATCH: RE: side effect of "select=long"


Andrej Borsenkow wrote:

> ...
> 
> bor@itsrm2% zsh -f
> itsrm2% autoload -U compinit; compinit -D
> itsrm2% bindkey -e
> itsrm2% zmodload complist
> itsrm2% zstyle ':completion:*' menu 'select=0' 'select=long-list'
> 
> Try anything simple like 'ls TAB TAB' - NO menu selection whatever, just
> menu completion.

Oops. That test for `=long*' shouldn't keep us from trying the other
`select=...' values.

Bye
 Sven

Index: Completion/Core/_main_complete
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Core/_main_complete,v
retrieving revision 1.25
diff -u -r1.25 _main_complete
--- Completion/Core/_main_complete	2000/05/22 12:22:49	1.25
+++ Completion/Core/_main_complete	2000/05/22 13:52:32
@@ -194,7 +194,8 @@
         zmodload -i zsh/complist
         MENUSELECT=0
       fi
-    else
+    fi
+    if [[ "$MENUSELECT" != 0 ]]; then
       sel=( "${(@M)_menu_style:#select*}" )
 
       if (( $#sel )); then

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


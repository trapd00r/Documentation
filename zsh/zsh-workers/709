From zsh-workers-request@euclid.skiles.gatech.edu  Fri Jan  5 23:17:37 1996
Received: from euclid.skiles.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with ESMTP id XAA21786 for <mason@werple.mira.net.au>; Fri, 5 Jan 1996 23:17:32 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id HAA03165; Fri, 5 Jan 1996 07:00:18 -0500 (EST)
Resent-Date: Fri, 5 Jan 1996 07:00:18 -0500 (EST)
Date: Fri, 5 Jan 1996 21:00:38 +0900
Message-Id: <199601051200.VAA08016@mokuren.nis.co.jp>
From: Kunihiro Ishiguro <kunihiro@mokuren.nis.co.jp>
To: zsh-workers@math.gatech.edu
Subject: zsh-2.6-beta13-hzoli12's fc looks like fc -2
Resent-Message-ID: <"HwQab2.0.Nn.IBHxm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/709
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Small problem about zsh-2.6-beta13-hzoli12.  Built-in function fc with
no args looks like fc -2.

kunihiro(mokuren)% zsh-2.6-beta13-hzoli12 -f
mokuren% pwd
/usr/home/kunihiro
mokuren% ls
News                    diff                    ptop
RR                      diff~                   rfc1882.txt
mokuren% fc
<run into vi and show 'pwd'. I expect 'ls'>

This doesn't occur with zsh-2.6-beta13. Below code is from zsh-2.6-beta13.
Thanks.
/kunihiro@nis.co.jp

*** builtin.c.dist	Fri Jan  5 20:36:23 1996
--- builtin.c	Fri Jan  5 20:36:58 1996
***************
*** 2371,2377 ****
      }
      /* delayrem is set if the command is r */
      delayrem = !strcmp(nam, "r");
!     if (!delayrem && !(ops['l'] && unset(HISTNOSTORE)))
  	remhist();
      if (ops['R']) {
  	/* read history from a file */
--- 2371,2378 ----
      }
      /* delayrem is set if the command is r */
      delayrem = !strcmp(nam, "r");
!     if (!delayrem && !(ops['l'] && unset(HISTNOSTORE)) &&
! 	(ops['R'] || ops['W'] || ops['A']))
  	remhist();
      if (ops['R']) {
  	/* read history from a file */


From zsh-users-return-4720-mason-zsh=primenet.com.au@sunsite.dk Fri Mar 01 00:17:39 2002
Return-Path: <zsh-users-return-4720-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23171 invoked from network); 1 Mar 2002 00:17:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 Mar 2002 00:17:38 -0000
Received: (qmail 11688 invoked by alias); 1 Mar 2002 00:17:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4720
Received: (qmail 11674 invoked from network); 1 Mar 2002 00:17:21 -0000
Date: Fri, 1 Mar 2002 00:16:23 +0000
From: Ian Lynagh <igloo@earth.li>
To: zsh-users@sunsite.dk
Subject: segfault when overriding complete-word then trying to use tab completion
Message-ID: <20020301001623.GA3551@stu163.keble.ox.ac.uk>
Mail-Followup-To: zsh-users@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.3.25i
Sender: Ian Lynagh <ian@lynagh.demon.co.uk>


Hi all

When overriding complete-word seemingly at random I either get binary
junk, a segfault, both or nothing (but never tab completion) when
pressing tab.

For example:

ian@majestica:~/.zsh% zsh
ian@majestica:~/.zsh% . ./z1
ian@majestica:~/.zsh% ls јх^M^H^HX^M^H^Ш^Y^Q^H^Ш^Y^Q^H( ^N^H( ^N^H0^Ъ^[@0^Ъ^[@8^Ъ^[@8^Ъ^[@А^Ы^P^HР^?^M^H^ич^P^H^ич^P^HP^Ъ^[@P^Ъ^[@X^Ъ^[@X^Ъ^[@`^Ъ^[@`^Ъ^[@@№^M^H@№^M^Hp^Ъ^[@p^Ъ^[@(^Q^N^H(^Q^N^H^Р^Ъ^[@^Р^Ъ^[@^Ш^Ъ^[@^Ш^Ъ^[@^а^Ъ^[@^а^Ъ^[@^и^Ъ^[@^и^Ъ^[@ ^Ъ^[@ ^Ъ^[@Ј^Ъ^[@Ј^Ъ^[@Ш^U^N^H "^N^H№ ^N^Hјх^P^HШBUFFERLINESјх^M^H^HX^M^H^Ш^Y^Q^H^Ш^Y^Q^H( ^N^H( ^N^H0^Ъ^[@0^Ъ^[@8^Ъ^[@8^Ъ^[@А^Ы^P^HР^?^M^H^ич^P^H^ич^P^HP^Ъ^[@P^Ъ^[@X^Ъ^[@X^Ъ^[@`^Ъ^[@`^Ъ^[@@№^M^H@№^M^Hp^Ъ^[@p^Ъ^[@(^Q^N^H(^Q^N^H^Р^Ъ^[@^Р^Ъ^[@^Ш^Ъ^[@^Ш^Ъ^[@^а^Ъ^[@^а^Ъ^[@^и^Ъ^[@^и^Ъ^[@ ^Ъ^[@ ^Ъ^[@Ј^Ъ^[@Ј^Ъ^[@Ш^U^N^H "^N^H№ ^N^Hјх^P^HШzsh: segmentation fault  zsh
ian@majestica:~/.zsh% cat z1

function complete-word {
    zle .complete-word
}
zle -N complete-word

ian@majestica:~/.zsh% bindkey -L | grep "\^I"
bindkey "^I" complete-word
ian@majestica:~/.zsh% 


Thanks
Ian


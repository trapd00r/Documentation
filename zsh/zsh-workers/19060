From zsh-workers-return-19060-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 10 22:39:01 2003
Return-Path: <zsh-workers-return-19060-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14288 invoked from network); 10 Sep 2003 22:39:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 10 Sep 2003 22:39:00 -0000
Received: (qmail 16429 invoked by alias); 10 Sep 2003 22:38:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19060
Received: (qmail 16419 invoked from network); 10 Sep 2003 22:38:48 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 10 Sep 2003 22:38:48 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [66.93.131.57] by sunsite.dk (MessageWall 1.0.8) with SMTP; 10 Sep 2003 22:38:47 -0000
Received: from lorien.emufarm.org (localhost [127.0.0.1])
	by lorien.emufarm.org (8.12.7/8.12.7) with ESMTP id h8AMckkI018412
	for <zsh-workers@sunsite.dk>; Wed, 10 Sep 2003 15:38:46 -0700
Received: (from duvall@localhost)
	by lorien.emufarm.org (8.12.7/8.12.7/Submit) id h8AMcjfo018411
	for zsh-workers@sunsite.dk; Wed, 10 Sep 2003 15:38:45 -0700
Date: Wed, 10 Sep 2003 15:38:45 -0700
From: Danek Duvall <duvall@emufarm.org>
To: Zsh <zsh-workers@sunsite.dk>
Subject: Re: Getting rid of temporaries...
Message-ID: <20030910223845.GA10805@lorien.emufarm.org>
Mail-Followup-To: Danek Duvall <duvall@emufarm.org>,
	Zsh <zsh-workers@sunsite.dk>
References: <20030910203429.GA354@DervishD>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20030910203429.GA354@DervishD>
User-Agent: Mutt/1.5.4i

I'm not sure if it's possible to get rid of the temporary *and* the uniq
in a simple fashion, but:

    typeset -U array
    array=( /directory/*/* )
    array=( ${^array%.<00-99>.jpg} )
    print -l $array

will do what you want.  The "typeset -U" makes $array discard duplicate
elements, but that requires the reassignment once the dups are gone,
though it might be a nice candidate for yet another parameter expansion
flag.  :)

The "^" turns on rcexpandparam for the expansion of $array, which means
that, as an array, each element is modified.  And I turned your "??"
into "<00-99>", which explicitly only matches two-digit numbers (you
could also use "<->" to match all numbers).

Danek


From zsh-users-return-15196-mason-zsh=primenet.com.au@zsh.org Thu Jul 22 00:56:26 2010
Return-Path: <zsh-users-return-15196-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28043 invoked by alias); 22 Jul 2010 00:56:25 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15196
Received: (qmail 16783 invoked from network); 22 Jul 2010 00:56:23 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,T_TO_NO_BRKTS_FREEMAIL autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.215.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:mime-version:content-type:content-disposition
         :content-transfer-encoding;
        bh=EApkOfE18s/txwu6RwBSZqTlQldFQEXFfjDW7IJp8GY=;
        b=Qm++27S/Odn0yh5s1wfDg17rRJK0aYkboceUhho3PQUJWuJ5FlG5Y65CSsFGRvm4LZ
         JZZOtbi/ShzlWFNkmzp8M/QLjiZUFt1w7w9TD5m5RLjwcjWcsOGsQ1V/2q/aXa7IKIWH
         3o7cV/8zkBn3ZW9kLQiZGgamxAJt90kSmtGoQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=date:from:to:subject:message-id:mime-version:content-type
         :content-disposition:content-transfer-encoding;
        b=Ob8CRYeEHeLDlB0OtsB+9gjau5ye7uwgXLvAUXOVGZRVRWKCf/dN8e3MIe3mfzlWbS
         KuKwNzliJyBybZuQfmOwQ6SAqLiWudcIzdY2sJPlE3TTvaiNR7EVIWxsxHu/Zujx9H2+
         lEXcwd7SwXKtG4tBzNl1CDsapEM0cIi+4bmJ8=
Date: Thu, 22 Jul 2010 03:55:58 +0300
From: =?utf-8?Q?Rogut=C4=97s?= Sparnuotos <rogutes@googlemail.com>
To: zsh-users@zsh.org
Subject: completion: matcher(-list) and tags
Message-ID: <20100722005557.GA16523@urvas>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit

G'day,

I am trying to get this to work:

  zstyle ':completion:*:all-files' matcher-list '' \
         'm:{[:lower:]}={[:upper:]}' '+e:=*' '+b:=*'

because I do not need the matcher-list to apply for all tags (and it is
too slow with slower machines). But the zstyle does not work.

Looking through zshcompsys(1), I find a paragraph under the tag-order
explanation, saying that matcher-list "is tested very early in the
completion system and hence can't be set for single commands nor for more
specific contexts" (but if so, shouldn't such matcher-list usage exit with
an error?). So I try to adapt a tag-order + matcher example to test things
out:

zsh --no-rcs
autoload -Uz compinit; compinit
zstyle ':completion:*' format '=== %d ==='
zstyle ':completion:*' tag-order '*:-case:XXX'
zstyle ':completion:*:*-case' matcher 'm:{a-z}={A-Z}'

And it seems to work for commands, but not for files... What am I doing
wrong (zsh-4.3.10)?


----
Below is a snippet from a testing run with the above zstyles (ran from
/usr/bin, with it being in path and containing the Xorg binary):

1. 'ls<TAB>' shows '=== XXX ==='
2. 'ls <TAB>' shows '=== XXX ==='
3. 'ls xorg<TAB>' prints '=== `files' or `XXX' ==='
4. 'xorg<TAB>' completes to 'Xorg'
5. './xorg<TAB>' prints
   === `external command', `XXX', `executable file or directory', `builtin
   command', `shell function', `alias', `suffix alias', `reserved word',
   `job', or `parameter' ===

-- 
--  RogutÄ—s Sparnuotos


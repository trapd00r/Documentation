From zsh-workers-return-20598-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 30 13:50:22 2004
Return-Path: <zsh-workers-return-20598-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2922 invoked from network); 30 Nov 2004 13:50:20 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Nov 2004 13:50:20 -0000
Received: (qmail 68977 invoked from network); 30 Nov 2004 13:50:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Nov 2004 13:50:15 -0000
Received: (qmail 23335 invoked by alias); 30 Nov 2004 13:49:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20598
Received: (qmail 23314 invoked from network); 30 Nov 2004 13:49:56 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 30 Nov 2004 13:49:56 -0000
Received: (qmail 68030 invoked from network); 30 Nov 2004 13:48:56 -0000
Received: from rent.teradyne.com (198.51.251.8)
  by a.mx.sunsite.dk with SMTP; 30 Nov 2004 13:48:55 -0000
Received: from chorus.teradyne.com (chorus.teradyne.com [131.101.1.195])
	by rent.teradyne.com (8.8.8+Sun/8.8.8) with ESMTP id IAA07198
	for <zsh-workers@sunsite.dk>; Tue, 30 Nov 2004 08:48:53 -0500 (EST)
Received: from kiki.icd.teradyne.com (kiki.icd.teradyne.com [131.101.10.126]) by chorus.teradyne.com (8.8.8+Sun/8.7.1) with ESMTP id IAA01139 for <zsh-workers@sunsite.dk>; Tue, 30 Nov 2004 08:48:53 -0500 (EST)
Received: from denver.icd.teradyne.com (denver [131.101.18.106])
	by kiki.icd.teradyne.com (8.9.3+Sun/8.9.3) with ESMTP id IAA24976
	for <zsh-workers@sunsite.dk>; Tue, 30 Nov 2004 08:50:30 -0500 (EST)
Received: (from sheltonv@localhost)
	by denver.icd.teradyne.com (8.11.6+Sun/8.11.6) id iAUDmqE05484;
	Tue, 30 Nov 2004 08:48:52 -0500 (EST)
X-Authentication-Warning: denver.icd.teradyne.com: sheltonv set sender to acs@alumni.princeton.edu using -f
To: zsh-workers@sunsite.dk
Subject: New Test Failure
From: Vin Shelton <acs@alumni.princeton.edu>
Organization: Teradyne, Inc
Date: Tue, 30 Nov 2004 08:48:52 -0500
Message-ID: <545brdf8n23.fsf@alumni.princeton.edu>
Lines: 333
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

It looks like the $(##) change broke something:

cd Test ; make check
make[1]: Entering directory `/u/sheltonv/software/SunOS-5.8/build/zsh-2004-11-30/Test'
if test -n "cc"; then \
  cd .. && DESTDIR= \
  make MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
fi
mkdir /u/sheltonv/software/SunOS-5.8/build/zsh-2004-11-30/Test/Modules
mkdir /u/sheltonv/software/SunOS-5.8/build/zsh-2004-11-30/Test/Modules/zsh
mkdir /u/sheltonv/software/SunOS-5.8/build/zsh-2004-11-30/Test/Modules/zsh/net
for f in /u/sheltonv/software/SunOS-5.8/src/zsh-2004-11-30/Test/C01*.ztst; do \
  ZTST_exe=../Src/zsh \
    ../Src/zsh +Z -f /u/sheltonv/software/SunOS-5.8/src/zsh-2004-11-30/Test/ztst.zsh $f; \
done
/u/sheltonv/software/SunOS-5.8/src/zsh-2004-11-30/Test/C01arith.ztst: starting.
ZTST_getsect: read section name: test
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  integer light there
ZTST_getchunk: read code chunk:
  integer light there
  (( light = 42 )) &&
  let 'there = light' &&
  print $(( there ))
ZTST_test: examining line:
>42
ZTST_getredir: read redir for '>':
42
ZTST_test: examining line:

Running test: basic integer arithmetic
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
42
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  float light there
ZTST_getchunk: read code chunk:
  float light there
  integer rnd
  (( light = 3.1415 )) &&
  let 'there = light' &&
  print -- $(( rnd = there * 10000 ))
ZTST_test: examining line:
>31415.
ZTST_getredir: read redir for '>':
31415.
ZTST_test: examining line:

Running test: basic floating point arithmetic
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
31415.
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $(( 0x10 + 0X01 + 2#1010 ))
ZTST_getchunk: read code chunk:
  print $(( 0x10 + 0X01 + 2#1010 ))
ZTST_test: examining line:
>27
ZTST_getredir: read redir for '>':
27
ZTST_test: examining line:

Running test: base input
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
27
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  float light
ZTST_getchunk: read code chunk:
  float light
  (( light = 4 ))
  print $light
  typeset -F light
  print $light
ZTST_test: examining line:
>4.000000000e+00
ZTST_getredir: read redir for '>':
4.000000000e+00
4.0000000000
ZTST_test: examining line:

Running test: conversion to float
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
4.000000000e+00
4.0000000000
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  integer i
ZTST_getchunk: read code chunk:
  integer i
  (( i = 32.5 ))
  print $i
ZTST_test: examining line:
>32
ZTST_getredir: read redir for '>':
32
ZTST_test: examining line:

Running test: conversion to int
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
32
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  integer i
ZTST_getchunk: read code chunk:
  integer i
  (( i = 4 - - 3 * 7 << 1 & 7 ^ 1 | 16 ** 2 ))
  print $i
ZTST_test: examining line:
>1591
ZTST_getredir: read redir for '>':
1591
ZTST_test: examining line:

Running test: precedence (arithmetic)
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
1591
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $(( 1 < 2 || 2 < 2 && 3 > 4 ))
ZTST_getchunk: read code chunk:
  print $(( 1 < 2 || 2 < 2 && 3 > 4 ))
ZTST_test: examining line:
>1
ZTST_getredir: read redir for '>':
1
ZTST_test: examining line:

Running test: precedence (logical)
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
1
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $(( 1 + 4 ? 3 + 2 ? 4 + 3 ? 5 + 6 ? 4 * 8 : 0 : 0 : 0 : 0 ))
ZTST_getchunk: read code chunk:
  print $(( 1 + 4 ? 3 + 2 ? 4 + 3 ? 5 + 6 ? 4 * 8 : 0 : 0 : 0 : 0 ))
ZTST_test: examining line:
>32
ZTST_getredir: read redir for '>':
32
ZTST_test: examining line:

Running test: precedence (ternary)
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
32
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $(( 3 ? 2 ))
ZTST_getchunk: read code chunk:
  print $(( 3 ? 2 ))
ZTST_test: examining line:
?(eval):1: ':' expected
ZTST_getredir: read redir for '?':
(eval):1: ':' expected
ZTST_test: examining line:

Running test: parsing ternary (1)
ZTST_test: expecting status: 1
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 1
ZTST_test: test produced standard output:

ZTST_test: and standard error:
(eval):1: ':' expected
Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $(( 3 ? 2 : 1 : 4 ))
ZTST_getchunk: read code chunk:
  print $(( 3 ? 2 : 1 : 4 ))
ZTST_test: examining line:
?(eval):1: ':' without '?'
ZTST_getredir: read redir for '?':
(eval):1: ':' without '?'
ZTST_test: examining line:

Running test: parsing ternary (2)
ZTST_test: expecting status: 1
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 1
ZTST_test: test produced standard output:

ZTST_test: and standard error:
(eval):1: ':' without '?'
Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $(( 0, 4 ? 3 : 1, 5 ))
ZTST_getchunk: read code chunk:
  print $(( 0, 4 ? 3 : 1, 5 ))
ZTST_test: examining line:
>5
ZTST_getredir: read redir for '>':
5
ZTST_test: examining line:

Running test: comma operator
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
5
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  foo=000
ZTST_getchunk: read code chunk:
  foo=000
  print $(( ##A + ##\C-a + #foo + $#foo ))
ZTST_test: examining line:
>117
ZTST_getredir: read redir for '>':
117
ZTST_test: examining line:

Running test: #, ## and $#
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 0
ZTST_test: test produced standard output:
117
ZTST_test: and standard error:

Test successful.
ZTST_test: looking for new test
ZTST_test: examining line:

ZTST_test: examining line:
  print $((##))
ZTST_getchunk: read code chunk:
  print $((##))
ZTST_test: examining line:
>0
ZTST_getredir: read redir for '>':
0
ZTST_test: examining line:

Running test: ## without following character
ZTST_test: expecting status: 0
Input: /tmp/zsh.ztst.in.5429, output: /tmp/zsh.ztst.out.5429, error: /tmp/zsh.ztst.terr.5429
ZTST_execchunk: status 1
Test /u/sheltonv/software/SunOS-5.8/src/zsh-2004-11-30/Test/C01arith.ztst failed: bad status 1, expected 0 from:
  print $((##))
Error output:
(eval):1: character missing after ##
Was testing: ## without following character
/u/sheltonv/software/SunOS-5.8/src/zsh-2004-11-30/Test/C01arith.ztst: test failed.
make[1]: [check] Error 1 (ignored)
rm -rf Modules .zcompdump
make[1]: Leaving directory `/u/sheltonv/software/SunOS-5.8/build/zsh-2004-11-30/Test'

HTH,
  Vin

-- 
In a minute there is time
For decisions and revisions which a minute will reverse.         T.S. Eliot
[URL: http://www.cs.amherst.edu/~ccm/prufrock.html]


From zsh-workers-return-27264-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 10 15:49:58 2009
Return-Path: <zsh-workers-return-27264-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3590 invoked from network); 10 Sep 2009 15:49:55 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 10 Sep 2009 15:49:55 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 4371 invoked from network); 10 Sep 2009 15:48:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Sep 2009 15:48:57 -0000
Received: (qmail 971 invoked by alias); 10 Sep 2009 15:48:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 27264
Received: (qmail 945 invoked from network); 10 Sep 2009 15:48:48 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Sep 2009 15:48:48 -0000
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 1CE6C8026E39
	for <zsh-workers@sunsite.dk>; Thu, 10 Sep 2009 17:48:32 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.222.107])
 by vms173005.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KPR00G97IJT0F85@vms173005.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 10 Sep 2009 10:47:58 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n8AFlq5C010466	for
 <zsh-workers@sunsite.dk>; Thu, 10 Sep 2009 08:47:52 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n8AFlp9T010465	for zsh-workers@sunsite.dk; Thu,
 10 Sep 2009 08:47:51 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090910084751.ZM10464@torch.brasslantern.com>
Date: Thu, 10 Sep 2009 08:47:51 -0700
In-reply-to: <m3bplin8ia.fsf@klanderman.net>
Comments: In reply to Greg Klanderman <gak@klanderman.net>
 "Re: file completion of ~user/... stats wrong directory" (Sep 10, 11:07am)
References: <19030.11925.370937.608524@gargle.gargle.HOWL>
	<20090710100721.56b0874c@news01>	<m31vooljj7.fsf@klanderman.net>
	<200907101421.n6AELWFS028008@news01.csr.com>	<m3my54ohzj.fsf@klanderman.net>
	<m3bplin8ia.fsf@klanderman.net>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@sunsite.dk
Subject: Re: file completion of ~user/... stats wrong directory
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.94.2/9791/Thu Sep 10 03:03:33 2009 on bifrost
X-Virus-Status: Clean

On Sep 10, 11:07am, Greg Klanderman wrote:
}
} Attached below is the one line fix.

I seem to recall having run into this before, attempting that same
change, and then finding that it breaks some OTHER more common case.

However, there are so many places like this in _path_files that I
may easily be confusing it with another "if" branch.

If I had copious free time, I'd rewrite _path_files from scratch.


} -      if [[ -d $donepath$tmp1 ]]; then
} +      if [[ -d $prepath$realpath$donepath$tmp1 ]]; then



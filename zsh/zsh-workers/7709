From zsh-workers-return-7709-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 08 00:46:58 1999
Return-Path: <zsh-workers-return-7709-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24125 invoked from network); 8 Sep 1999 00:46:57 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Sep 1999 00:46:57 -0000
Received: (qmail 12367 invoked by alias); 8 Sep 1999 00:46:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7709
Received: (qmail 12360 invoked from network); 8 Sep 1999 00:46:46 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990908004632.ZM11891@candle.brasslantern.com>
Date: Wed, 8 Sep 1999 00:46:32 +0000
In-Reply-To: <rsq4sh62utd.fsf@crane.jaist.ac.jp>
Comments: In reply to Tanaka Akira <akr@jaist.ac.jp>
        "Re: PATCH: Completion/User/_cvs again." (Sep  8,  7:58am)
References: <199909070717.JAA03524@beta.informatik.hu-berlin.de> 
	<rsqg10r2e2a.fsf@crane.jaist.ac.jp> 
	<990907222631.ZM11028@candle.brasslantern.com> 
	<rsq4sh62utd.fsf@crane.jaist.ac.jp>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Tanaka Akira <akr@jaist.ac.jp>, zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Completion/User/_cvs again.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 8,  7:58am, Tanaka Akira wrote:
> Subject: Re: PATCH: Completion/User/_cvs again.
> In article <990907222631.ZM11028@candle.brasslantern.com>,
>   "Bart Schaefer" <schaefer@candle.brasslantern.com> writes:
> 
> > maybe a bit less readable ...
> 
> +    _cvs_"${${(k)cmds[(R)* $words[1] *]}:-${words[1]:#*~(${(@kj:|:)~cmds})}}"

I think we've just gone from "a bit" to "a lot".  How about:

Index: Completion/User/_cvs
===================================================================
@@ -35,7 +35,7 @@
   if (( CURRENT == 1 )); then
     compadd "$@" ${(k)cmds} || compadd "$@" ${(kv)=cmds}
   else
-    _cvs_"${${(k)cmds[(R)* $words[1] *]}:-${words[1]:#*~(${(@kj:|:)~cmds})}}"
+    _cvs_"${${(k)cmds[(R)* $words[1] *]}:-${(k)cmds[(i)$words[1]]}}"
   fi
 }
 


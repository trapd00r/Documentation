From zsh-workers-return-26202-mason-zsh=primenet.com.au@sunsite.dk Tue Dec 30 05:37:50 2008
Return-Path: <zsh-workers-return-26202-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11512 invoked from network); 30 Dec 2008 05:37:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Dec 2008 05:37:47 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 32889 invoked from network); 30 Dec 2008 05:37:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Dec 2008 05:37:42 -0000
Received: (qmail 24598 invoked by alias); 30 Dec 2008 05:37:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26202
Received: (qmail 24581 invoked from network); 30 Dec 2008 05:37:36 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 30 Dec 2008 05:37:36 -0000
Received: from cork.scru.org (cork.scru.org [209.20.67.2])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 3536280308BE
	for <zsh-workers@sunsite.dk>; Tue, 30 Dec 2008 06:37:32 +0100 (CET)
Received: by cork.scru.org (Postfix, from userid 1000)
	id 66DD5104158; Tue, 30 Dec 2008 05:37:31 +0000 (UTC)
Date: Tue, 30 Dec 2008 05:37:31 +0000
From: Clint Adams <schizo@debian.org>
To: =?iso-8859-1?Q?J=F6rg?= Sommer <joerg@alea.gnuu.de>,
	486283@bugs.debian.org
Cc: zsh-workers@sunsite.dk
Subject: Re: Bug#486283: Use description of modules from zshmodules
Message-ID: <20081230053731.GA28044@scru.org>
Mail-Followup-To: =?iso-8859-1?Q?J=F6rg?= Sommer <joerg@alea.gnuu.de>,
	486283@bugs.debian.org, zsh-workers@sunsite.dk
References: <20080614214409.GA29319@alea.gnuu.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20080614214409.GA29319@alea.gnuu.de>
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Scanned: ClamAV 0.92.1/8812/Tue Dec 30 01:49:14 2008 on bifrost
X-Virus-Status: Clean

On Sat, Jun 14, 2008 at 11:44:09PM +0200, Jörg Sommer wrote:
> Hi,
> 
> run-help (mapped to ESC h) gives for modules only the hint to look at the
> zshmodules manpage. Instead, the part from this manpage should be shown.
> 
> % run-help sched |cat
> sched  See the section `The zsh/sched Module' in zshmodules(1).
> 
> % man zshmodules | sed -n '/THE ZSH\/SCHED/,/^T/p' |sed '$d'
> THE ZSH/SCHED MODULE
>        The zsh/sched module makes available one builtin command and one param‐
>        eter.
> 
>        sched [-o] [+]hh:mm[:ss] command ...
>        sched [-o] [+]seconds command ...
>        sched [ -item ]
>               Make an entry in the scheduled list of commands to execute.  The
> 
> 
> Or you could move the HELPDIR stuff away and create run-help functions
> for them.
> 
> run-help-sched ()
> {
>     LESS="${LESS:--}p^THE ZSH/SCHED" man zshmodules
> }

I suppose we could, at build time, produce a list of '^module(' from
builtins.yo, then use that to do something more like the sed program
above.  That would seem to be more helpful than this:

Index: Functions/Misc/run-help
===================================================================
RCS file: /cvsroot/zsh/zsh/Functions/Misc/run-help,v
retrieving revision 1.12
diff -u -r1.12 run-help
--- Functions/Misc/run-help	10 Oct 2008 09:53:22 -0000	1.12
+++ Functions/Misc/run-help	30 Dec 2008 05:34:47 -0000
@@ -76,7 +76,7 @@
 	(clone) ;&
 	(ln|mkdir|mv|rm|rmdir|sync) ;&
 	(sched) ;&
-	(stat) man zshmodules;;
+	(echotc|echoti|sched|stat|zprof|zpty|zsocket|zstyle|ztcp) man zshmodules;;
 	(zftp) man zshftpsys;;
 	(*) man zshbuiltins;;
 	esac


From zsh-workers-return-27322-mason-zsh=primenet.com.au@zsh.org Fri Oct 30 23:08:35 2009
Return-Path: <zsh-workers-return-27322-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7750 invoked by alias); 30 Oct 2009 23:08:35 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27322
Received: (qmail 15345 invoked from network); 30 Oct 2009 23:08:32 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at bewatermyfriend.org does not designate permitted sender hosts)
Date: Sat, 31 Oct 2009 00:01:33 +0100
From: Frank Terbeck <ft@bewatermyfriend.org>
To: zsh-workers@zsh.org
Subject: Re: zsh eats 100% CPU with completion in /
Message-ID: <20091030230133.GM3082@fsst.voodoo.lan>
Mail-Followup-To: zsh-workers@zsh.org
References: <20091030161027.GL3082@fsst.voodoo.lan> <alpine.LNX.2.01.0910301724070.8074@hp.internal>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
In-Reply-To: <alpine.LNX.2.01.0910301724070.8074@hp.internal>
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Df-Sender: 430444

Benjamin R. Haskell <zsh@benizi.com>:
> On Fri, 30 Oct 2009, Frank Terbeck wrote:
> > Zsh eats 100% CPU on a colleague's laptop if you do this:
> > % cd /
> > % cd ..
> > % ./<tab>
[...]
> As a potential source of differences, it might be interesting to see 
> what's mounted in the root directory of each machine.  This reminds me of 
> Zsh scanning drives under /cygdrive/ when running under Cygwin.
> 
> Though I'm not sure how the 'cd ..' plays into it... something relating to 
> changes that dealt with current-directory tracking?  (sorry, can't recall 
> specifics -- it was on here or zsh-users within the past three months or 
> so)

Ah, I just remembered something:

After doing:
% cd /
% cd ..

My colleague could hang the shell by doing this:
% cd ~
% ./<tab>

I don't know if he could reproduce that every time, but I saw him do
it at least once.

So, I'm not to sure if what's mounted to / comes into play...
For my machine, I can tell you that I got an encrypted partition
mounted at /mnt and non-encrypted partitions at /home, /var, /tmp and
/usr.

On my colleague's system, / homes everything with respect to his linux
system, except for /boot which is a separate partition at the start of
the hard drive. I think he had a cdrom mounted at /media/cdrom0 which
/cdrom was a symlink to, IIRC. He also had his NTFS windows partition
mounted read-only at /media/something (where something is the actual
directory name, which I cannot recall right now).

Too bad this doesn't happen on a system of mine... But the fact that
Mikael can reproduce it at least means I'm not seeing things. :)

Regards, Frank


From zsh-workers-return-27485-mason-zsh=primenet.com.au@zsh.org Tue Dec 08 11:36:16 2009
Return-Path: <zsh-workers-return-27485-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21720 invoked by alias); 8 Dec 2009 11:36:16 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27485
Received: (qmail 308 invoked from network); 8 Dec 2009 11:36:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.218.210 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:cc:subject
         :message-id:mail-followup-to:references:mime-version:content-type
         :content-disposition:content-transfer-encoding:in-reply-to
         :user-agent;
        bh=PqvYcbKi6BOZvuXeWiK5b5HkP8fukjurz2Q94kCATAw=;
        b=ERrjJmib48Wl4LIAon8EBepf6mkb/ouvH3xTiVTYpGLkKkcWDKnzb49z2BuprX/gv+
         9thwIixhJnNjBdDmbWWU8NoxiZ0xkGn6D51y3Zvj7CHXzQIdMbFpVyxqzArpNgjXlWMX
         1xS5J8FVQb3RCd1aWopocJGDfSLzgKfhUsTmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:subject:message-id:mail-followup-to:references
         :mime-version:content-type:content-disposition
         :content-transfer-encoding:in-reply-to:user-agent;
        b=NgiLuxd0T48W4NHI9TAJoDnkUNEJgVUOZMyoXaKk7DOtc89SNlCyMhYAamwq2ByxkA
         mZ4+zexebrUBu9bsk8jWb38z3BbgnMK9Zu2/qmOHqcL/cHxt5teNjcnBZQB5VJV6qwM/
         1Y8GY64pSXjkYf8hejQM/WDp1N50O6k25iysI=
Date: Tue, 8 Dec 2009 12:37:29 +0100
From: =?utf-8?B?xaB0xJtww6FuIE7Em21lYw==?= <stepnem@gmail.com>
To: Nikolai Weibull <now@bitwi.se>
Cc: "Alexey I. Froloff" <raorn@altlinux.org>, zsh-workers@zsh.org
Subject: Re: [PATCH] _git: offer files relative to current directory
Message-ID: <20091208113729.GD21684@headley>
Mail-Followup-To: Nikolai Weibull <now@bitwi.se>,
	"Alexey I. Froloff" <raorn@altlinux.org>, zsh-workers@zsh.org
References: <20091205174551.GF3344@altlinux.org>
 <1260136353-20093-1-git-send-email-raorn@altlinux.org>
 <20091207224056.GD9335@altlinux.org>
 <20091208104839.GC21684@headley>
 <dbfc82860912080250i7c4e36fcn565d7ea4770c9486@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <dbfc82860912080250i7c4e36fcn565d7ea4770c9486@mail.gmail.com>
User-Agent: Mutt/1.5.20 (2009-08-27)

On Tue, Dec 08, 2009 at 11:50:18AM +0100, Nikolai Weibull wrote:
> On Tue, Dec 8, 2009 at 11:48, Štěpán Němec <stepnem@gmail.com> wrote:
> 
> > In a repository where `git status' reports the following changed files:
> > #       modified:   doc/tags
> > #       modified:   filetype.vim
> > #       modified:   ftplugin/vim.vim
> > #       modified:   ftplugin/zsh.vim
> > #       modified:   indent/sh.vim
> > #       modified:   plugin/utl.vim
> > #       modified:   snippets/_.snippets
> > #       modified:   syntax/elisp.vim
> > #       modified:   syntax/sh.vim
> > #       modified:   syntax/vim.vim
> >
> > `git commit <tab>' only suggests:
> > doc           filetype.vim  ftplugin      indent        plugin        snippets      syntax
> 
> Why’s that wrong?  Completing git commit syntax hopefully adds a slash
> and lets you complete the files in the sub-folder, right?

    Yes, you're right, even though I still prefer when `git ci <tab>' shows
and completes all the files immediately, not forcing me into first
deleting the completed slash and then continue completing the files in
the directory... But I guess Alexey's version might actually be more
consistent with Zsh's behaviour in that regard in other similar
situations. So, sorry for that point.

    Unfortunately, there seem to be other problems:
When I enter the doc directory in the above structure, `git commit
<tab>' only shows:

.. tags

instead of all the other changed files/directories (displayed relative
to the current subdirectory). Wasn't exactly that the problem we are
solving here?


    Štěpán

P.S.: Well now I think about it, of course you can just continue to
"manually" complete the `..', so in my case I have to first complete
../, then delete and recomplete the '/' or add and delete a space, then
continue similarly to get to the other files. Maybe it is the behaviour
you expect and like, but for me it's really suboptimal. Maybe it's just
some problem in my setup? Anyway, with my solution, git ci <tab> always
completes and shows all the files relative to the current directory,
i.e. in the form git-commit will accept, *immediately*. I still very
much prefer that behaviour.


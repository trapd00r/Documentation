From zsh-workers-return-5394-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 15 16:19:15 1999
Return-Path: <zsh-workers-return-5394-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21524 invoked from network); 15 Feb 1999 16:19:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Feb 1999 16:19:13 -0000
Received: (qmail 152 invoked by alias); 15 Feb 1999 16:18:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5394
Received: (qmail 136 invoked from network); 15 Feb 1999 16:17:59 -0000
Message-Id: <9902151602.AA30646@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: Terminal problem with linux-2.0.34 
In-Reply-To: ""Larry P . Schrof""'s message of "Mon, 15 Feb 1999 09:20:59 NFT."
             <199902151522.KAA06190@po_box.cig.mot.com> 
Date: Mon, 15 Feb 1999 17:02:02 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

"Larry P . Schrof" wrote:
> - Any time the user runs a program that makes a stat() call, the
> shell hangs forever, until the user breaks out of it. Even after sending
> the process, say ls -l, a signal, it takes awhile to get the shell prompt
> back.

Something this weird suggests zsh is tickling something in Linux, and also
suggests the only way to find out what is just painfully to comment bits of
code out until it goes away; it's probably not just zle.  (Does the stat()
problem go away if you run zsh without zle?)

I have access to a 2.0.32 system --- unfortunately it needs booting too
often to show this problem --- with zsh 3.0.2 and looking at strace I can
only suggest checking things like

- setlocale()
- getuid(), geteuid(), and friends
- isatty()
- tcsetpgrp() and related terminal handling
- getrlimit() --- if this gets a wrong type for a limit, and passes it on,
  that could cause fireworks, though why after 250 days uptime?
- termcap

I can pass on what strace is giving here for comparison, if that's any
use.

Also, it would be worth making sure it isn't in the latest development
version
http://www.ifh.de/~pws/computing/zsh-3.1.5-pws-8.tar.gz
since the stuff that opens the terminal has changed a bit.

I doubt if this is helpful.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


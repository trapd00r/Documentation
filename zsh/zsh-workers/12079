From zsh-workers-return-12079-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 27 00:51:33 2000
Return-Path: <zsh-workers-return-12079-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27925 invoked from network); 27 Jun 2000 00:51:32 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Jun 2000 00:51:32 -0000
Received: (qmail 8931 invoked by alias); 27 Jun 2000 00:51:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12079
Received: (qmail 8920 invoked from network); 27 Jun 2000 00:51:18 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <000626175106.ZM30186@candle.brasslantern.com>
Date: Mon, 26 Jun 2000 17:51:06 -0700
In-Reply-To: <20000626214302.A28182@br-online.de>
Comments: In reply to Andy Spiegl <zsh.Andy@spiegl.de>
        "Re: bug in _mutt ?" (Jun 26,  9:43pm)
References: <20000619211650.A5701@br-online.de> 
	<Pine.LNX.4.20.0006191312080.1808-100000@aztec.zanshin.com> 
	<20000620132829.K23705@br-online.de> 
	<20000620100216.A5814@scowler.net> 
	<20000620171801.C3224@br-online.de> 
	<20000621095529.A27178@br-online.de> 
	<1000621152106.ZM31139@candle.brasslantern.com> 
	<20000626214302.A28182@br-online.de>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Andy Spiegl <zsh.Andy@spiegl.de>, zsh-workers@sunsite.auc.dk
Subject: Re: bug in _mutt ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 26,  9:43pm, Andy Spiegl wrote:
> > [...] on strings that aren't necessarily file names.  So you should find
> > that if you type
> > 
> > % mutt -f =sub<TAB>
> > 
> > it'll append the slash, and offer completions of
> > 
> > cus  mutt  zsh  zsh-workers  linux  kira  akte
> 
> Hm, it does append the slash, but then I only get a beep. :-(

Time for <C-x?> and a look at the trace output.  As I said, I don't use
mutt, so it's not straightforward for me to debug this stuff.

> actually in that case I would expect zsh to offer me _all_ the files in
> that directory.  Hm, that's probably the same issue as whether completion
> after = or + should only list the .muttrc-defined mailboxes or whether it
> should list all files under ~/Mail.  I'd prefer both...in separate groups.

Right now _mailboxes understands "mailboxes" and "files in $maildirectory"
as two separate groups, and the prefix `=' is used to introduce "mailboxes"
rather than being an abbreviation for $maildirectory.

It would be possible to treat `=' both ways by moving the `compset -P' test
from the `case' statement down into the `while _tags' loop, I think; it
would also be necessary to special-case the _files call for mutt to pass
it -W $maildirectory, and maybe some other things ...


From zsh-workers-return-9784-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 17 19:42:59 2000
Return-Path: <zsh-workers-return-9784-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23193 invoked from network); 17 Feb 2000 19:42:57 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Feb 2000 19:42:57 -0000
Received: (qmail 13456 invoked by alias); 17 Feb 2000 19:42:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9784
Received: (qmail 13143 invoked from network); 17 Feb 2000 19:41:22 -0000
X-Authentication-Warning: cassini.us.mandrakesoft.com: chmou set sender to chmouel@mandrakesoft.com using -f
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: archive completion with mandrake tar
From: Chmouel Boudjnah <chmouel@mandrakesoft.com>
Date: 17 Feb 2000 11:40:27 +0100
Message-ID: <m3og9gqfhg.fsf@cassini.us.mandrakesoft.com>
Lines: 29
User-Agent: Gnus/5.0804 (Gnus v5.8.4) Emacs/20.5
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi,

On mandrake we use -y as filter (it's the obsolete option but a lot of
our users use it) for bzip2, here is the patch :

--- zsh-3.1.6-pws-18/Completion/User/_tar.chmou   Sun Nov 28 18:42:27 1999
+++ zsh-3.1.6-pws-18/Completion/User/_tar       Tue Nov 30 15:09:40 1999
@@ -94,6 +94,8 @@
 
   if [[ $_tar_cmd = *z* ]]; then
     largs=-tzf
+  elif [[ $_tar_cmd = *y* ]]; then
+    largs=-tyf
   elif [[ $_tar_cmd = *Z* ]]; then
     largs=-tZf
   else
--- zsh-3.1.6-dev-16/Completion/User/_tar_archive.chmou Sat Jan 15 20:41:31 2000
+++ zsh-3.1.6-dev-16/Completion/User/_tar_archive       Mon Jan 24 11:23:42 2000
@@ -16,7 +16,7 @@
 if [[ "$1" = *[tx]* ]]; then
   if [[ "$1" = *[zZ]* ]]; then
     _files "$expl[@]" -g '*.((tar|TAR).(gz|GZ|Z)|tgz)'
-  elif [[ "$1" = *I* ]]; then
+  elif [[ "$1" = *[Iy]* ]]; then
     _files "$expl[@]" -g '*.(tar|TAR).bz2'
   else
     _files "$expl[@]" -g '*.(tar|TAR)'

                                  --Chmouel


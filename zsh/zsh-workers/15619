From zsh-workers-return-15619-mason-zsh=primenet.com.au@sunsite.dk Tue Aug 14 08:28:42 2001
Return-Path: <zsh-workers-return-15619-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22188 invoked from network); 14 Aug 2001 08:28:41 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Aug 2001 08:28:41 -0000
Received: (qmail 12625 invoked by alias); 14 Aug 2001 08:28:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15619
Received: (qmail 12612 invoked from network); 14 Aug 2001 08:28:34 -0000
Date: Tue, 14 Aug 2001 18:28:28 +1000
From: Geoff Wing <gcw@zsh.org>
To: Zsh Hackers <zsh-workers@sunsite.dk>
Subject: Re: Various vared problems with screen refresh, etc.
Message-ID: <20010814182828.A22134@primenet.com.au>
References: <1010814073010.ZM7551@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <1010814073010.ZM7551@candle.brasslantern.com>; from schaefer@brasslantern.com on Tue, Aug 14, 2001 at 07:30:50AM +0000
Organization: PrimeNet Computer Consultancy

Bart Schaefer <schaefer@brasslantern.com> typed:
:I'm encountering all the problems I'm about to describe while using PWS's
:"zse" (zstyle edit) function.  Stripped down, it looks like:
[...]
:Use it with a small enough window that all the styles won't fit on one
:screen, so you have to scroll up and down.  In fact it's probably best
:if they require more than -two- screens, but I'm not sure.
:
:First problem:  Display refresh when a "minibuffer" command is used.
:Make sure the cursor is at the last line (do end-of-buffer-or-history).
:Invoke history-incremental-search-backward or -forward and look closely
:at the display.  In my case, I'm seeing some lines that should be off
:the top of the screen appearing above the `bck-i-search:' prompt.  I
:think a refresh computation somewhere is counting down N lines from the
:first line in the whole buffer, rather than down N lines from the first
:visible line.

My problem.  I'll provide a patch for it.  It's duplicating a scroll
around zle_refresh.c:436+ and snextline define.

Regards,
-- 
Geoff Wing : <gcw@pobox.com>
Rxvt Stuff : <gcw@rxvt.org>
Zsh Stuff  : <gcw@zsh.org>


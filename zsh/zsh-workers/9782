From zsh-workers-return-9782-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 17 19:07:53 2000
Return-Path: <zsh-workers-return-9782-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23020 invoked from network); 17 Feb 2000 19:07:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Feb 2000 19:07:51 -0000
Received: (qmail 8524 invoked by alias); 17 Feb 2000 19:07:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9782
Received: (qmail 8514 invoked from network); 17 Feb 2000 19:07:43 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000217190738.ZM2460@candle.brasslantern.com>
Date: Thu, 17 Feb 2000 19:07:38 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Playing with zle widget gives unexpected exit
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I can make this happen repeatedly, but not by any particular series of
actions.  I'm playing with a zle widget function fiddles with $CURSOR
and then calls "zle .transpose-words", and the exit seems to happen only
after I've removed and re-autoloaded the function definition, but it
doesn't happen *every* time I remove and re-autoload the definition.

(gdb) where
#0  0x400939c0 in _exit ()
#1  0x40053741 in exit (status=1) at exit.c:70
#2  0x8057c6d in zexit (val=1, from_signal=0)
    at ../../zsh-3.1.6/Src/builtin.c:3226
#3  0x400f8779 in getkey (keytmout=0)
    at ../../../zsh-3.1.6/Src/Zle/zle_main.c:413
#4  0x400f7f1d in getkeybuf (w=0)
    at ../../../zsh-3.1.6/Src/Zle/zle_keymap.c:1188
#5  0x400f7d47 in getkeymapcmd (km=0x80dafc8, funcp=0xbffff508, 
    strp=0xbffff4fc) at ../../../zsh-3.1.6/Src/Zle/zle_keymap.c:1150
#6  0x400f8090 in getkeycmd () at ../../../zsh-3.1.6/Src/Zle/zle_keymap.c:1224
#7  0x400f9314 in zleread (lp=0x80d9808 "%m<%h> ", rp=0x0, flags=3)
    at ../../../zsh-3.1.6/Src/Zle/zle_main.c:558
#8  0x8072ada in inputline () at ../../zsh-3.1.6/Src/input.c:265
#9  0x80729cd in ingetc () at ../../zsh-3.1.6/Src/input.c:210
#10 0x806c538 in ihgetc () at ../../zsh-3.1.6/Src/hist.c:242
#11 0x80779bb in gettok () at ../../zsh-3.1.6/Src/lex.c:560
#12 0x8077239 in yylex () at ../../zsh-3.1.6/Src/lex.c:313
#13 0x808c5c3 in parse_event () at ../../zsh-3.1.6/Src/parse.c:292
#14 0x8070452 in loop (toplevel=1, justonce=0)
    at ../../zsh-3.1.6/Src/init.c:120
#15 0x80509f9 in main (argc=1, argv=0xbffff6e4)
    at ../../zsh-3.1.6/Src/main.c:89

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-users-return-6725-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 21 19:28:53 2003
Return-Path: <zsh-users-return-6725-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6132 invoked from network); 21 Oct 2003 19:28:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 21 Oct 2003 19:28:52 -0000
Received: (qmail 3091 invoked by alias); 21 Oct 2003 19:27:48 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6725
Received: (qmail 3076 invoked from network); 21 Oct 2003 19:27:47 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 21 Oct 2003 19:27:47 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.193.203.32] by sunsite.dk (MessageWall 1.0.8) with SMTP; 21 Oct 2003 19:27:46 -0000
Received: from DervishD.pleyades.net (212.Red-80-35-44.pooles.rima-tde.net [80.35.44.212])
	by madrid10.amenworld.com (8.10.2/8.10.2) with ESMTP id h9LJReF23725;
	Tue, 21 Oct 2003 21:27:40 +0200
Received: from raul@pleyades.net by DervishD.pleyades.net with local (Exim MTA 2.05)
	  id <1AC27G-0002HF-00>; Tue, 21 Oct 2003 21:24:26 +0200
Date: Tue, 21 Oct 2003 21:24:26 +0200
From: DervishD <raul@pleyades.net>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: Can this be done with compctl?
Message-ID: <20031021192426.GE8334@DervishD>
Mail-Followup-To: Bart Schaefer <schaefer@brasslantern.com>,
	Zsh Users <zsh-users@sunsite.dk>
References: <20031018161752.GB17781@DervishD> <1031021181244.ZM3702@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <1031021181244.ZM3702@candle.brasslantern.com>
User-Agent: Mutt/1.4i
Organization: Pleyades
User-Agent: Mutt/1.4i <http://www.mutt.org>

    Hi Bart :)

 * Bart Schaefer <schaefer@brasslantern.com> dixit:
> }     I wanted to simulate the bash behaviour of completing command
> } names if you hit TAB on an empty prompt [...] It seems that compctl
> } don't even try to complete if there is not a word in the prompt :??
> That's partly correct.  TAB is magic in the old compctl system -- it
> is *always* self-inserted when there is only whitespace at the prompt.

    OK, that's the point :(

> can't do so with a TAB unless you create a widget with "zle -C".
> This can of course be as simple as
[...]

    Yes, I thought of it (didn't know that it was as easy as just
removing the 'tab' string from compstate...). I used to think that
the compsys was all bells and whistles and a lot of unreadable shell
code in functions starting with '_', and that compctl could do all
for you. In some way, I still think like that. I mean, for very
simple completions (sort of 'when the command is cd just complete
directory names, not files'), I would use 'compctl'. For me is more
straightforward. For very sophisticated completions I would use
compsys, together with the provided functions, that is, with
_menu_complete (the bells and whistles...). For general I suppose
that I would use a simple dispatcher (far simpler than
'_menu_complete'...) and a liberal use of compadd. By now the only
thing compctl doesn't do for me is command completion in the empty
(just whitespace) command line.

    I must confess that anyway for general use compsys is better.
I've really changed my mind. I still don't use the _menu_complete
thing, because I don't need it (for me, a very sophisticated
completion is sort of 'when the command is tar, just complete .tar.gz
files), but the mechanisms that compsys offers are very good, no
doubt. And anyway, I suppose I should go with compsys, just in case
the zsh workers decide to get rid of compctl... I'll try to decide...

    Thanks a lot for your help, Bart.

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736
http://www.pleyades.net & http://raul.pleyades.net/


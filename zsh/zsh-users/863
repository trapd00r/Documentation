From zsh-workers-request@euclid.skiles.gatech.edu Wed May 21 23:53:00 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 26318 invoked from network); 21 May 1997 23:52:59 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 21 May 1997 23:52:59 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id TAA04474; Wed, 21 May 1997 19:44:53 -0400 (EDT)
Resent-Date: Wed, 21 May 1997 19:41:30 -0400 (EDT)
Message-Id: <199705211344.SAA09891@lator.cybercom.net>
Date: Wed, 21 May 1997 18:45:14 -0400 (EDT)
From: Chris Laas <chrisl@cybercom.net>
Sender: Chris Laas <chris@cybercom.net>
Reply-To: chrisl@cybercom.net
Subject: Re: Ignoring ~ when expanding scripts
To: zsh-users@math.gatech.edu
In-Reply-To: <9705211938.AA14580@belgium.fishkill.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=US-ASCII
Resent-Message-ID: <"BjjMX2.0.601.fWuWp"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/863
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On 21 May, hzoli@VNET.IBM.COM wrote:
> Dov Grobgeld wrote:
>> How can I make zsh ignore executables that end in ~ when doing
>> command completion? This is different from fignore where you want to
>> ignore parameters to the command.
> 
> As far as I know, there is no simple way to do that.  A hackish solution
> would be executing hash -f; unhash -m '*~' each time you change the $PATH.
> Unfortunately hash -f can be quite slow, but you can probably live with it
> since it is done anyway the first time you try to complete a command.

I'd say his problem is more when you are testing a script, and typing:

./scr[TAB]

You want:

./script-file _

You get:

./script-file[BEEP]_
./script-file ./script-file~

A hack like this:

compctl -C -g '*[^~](*)' + -c

when combined with the "hash -f ; unhash -m '*~'" hack, gives something
like the desired result, though it incorrectly completes for matching
executable files in the current directory, even if it is not (and it
should not be) in your PATH.  Anyone know how to fix that?

--Chris

-- 
We hold these truths to be self-evident:  That all men are created
equal...
    -- Thomas Jefferson, Prologue, "Declaration of Independence"
______________________________________________________________________
Chris Laas:  Unix, C++, Perl, Tcl/Tk / mailto:chrisl@cybercom.net
Limit[tech->Inf](words/acronyms)==0 / http://www.cybercom.net/~chrisl/


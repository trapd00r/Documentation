From zsh-users-return-11697-mason-zsh=primenet.com.au@sunsite.dk Thu Aug 02 04:11:35 2007
Return-Path: <zsh-users-return-11697-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17318 invoked from network); 2 Aug 2007 04:11:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,STOX_REPLY_TYPE
	autolearn=ham version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 2 Aug 2007 04:11:30 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 79435 invoked from network); 2 Aug 2007 04:11:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Aug 2007 04:11:24 -0000
Received: (qmail 26939 invoked by alias); 2 Aug 2007 04:11:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11697
Received: (qmail 26929 invoked from network); 2 Aug 2007 04:11:14 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 2 Aug 2007 04:11:14 -0000
Received: (qmail 78062 invoked from network); 2 Aug 2007 04:11:14 -0000
Received: from s1tank.virtdom.com (216.240.101.50)
  by a.mx.sunsite.dk with SMTP; 2 Aug 2007 04:11:07 -0000
Received: (qmail 44706 invoked by uid 89); 2 Aug 2007 04:33:15 -0000
Received: from ool-44c5a2de.dyn.optonline.net (HELO venti) (brian@aljex.com@68.197.162.222)
  by s1tank.virtdom.com with SMTP; 2 Aug 2007 04:33:15 -0000
Message-ID: <009a01c7d4bb$1f5e38f0$6b00000a@venti>
From: "Brian K. White" <brian@aljex.com>
To: <zsh-users@sunsite.dk>
References: <fb3648c60708011423x64c03105i8a4a63b9ba2f55e3@mail.gmail.com>
Subject: Re: pretty easy thing but too hard for me! (random array element)
Date: Thu, 2 Aug 2007 00:10:55 -0400
Organization: Aljex Software
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.3138


----- Original Message ----- 
From: "fREW" <frioux@gmail.com>
To: "Zsh users list" <zsh-users@sunsite.dk>
Sent: Wednesday, August 01, 2007 5:23 PM
Subject: pretty easy thing but too hard for me! (random array element)


> Hello zsh amigos!
>
> I want to make a tiny fuction that will
>
> #1 get a list of files
> #2 choose a random file
> #3 open the random file
>
> I was going to just do something like
>
> arr=( * )
>
> and then
>
> feh $arr[(some random number or something)]
>
> but I don't know how to do the random number part and there may be a
> better way anyway.  Thoughts?  Ideas?  Wisdom?
>
> -- 
> -fREW
>
> Q: Why is this email 5 sentences or less?
> A: http://five.sentenc.es


I have a random splash thing where as part of my companies software the 
start script flashes an ascii splash logo for a half-second on start-up. I 
got bored one day, found a ascii art font generator thing on line that let 
me plug in our name and get large ascii art renditions of it in about 30 
differentr fonts.

I did something cruder even than loading up an array. It requires the files 
have consecutive numerical filenames and just applies $RANDOM and a little 
math directly.
But it works in bash/ksh/zsh and doesn't require zsh or a zsh module
I wouldn't be surprised if both uses of backticks are avoidable somehow.
Since even my SCO boxes all have zsh by now redoing this with the randline 
thing has appeal.

-----
#!/bin/sh
# Select a splash at random and display it.
# requires bash/ksh/zsh
# 20060411 brian@aljex.com
# put as many splash files as you want in /u/aljex/splash
# use only 3-digit, zero padded, numerical, consecutive filenames
# starting with 000

SplashDir=/u/aljex/splash

cd $SplashDir || exit 1
typeset -i SplashQty=`echo * |wc -w`
typeset -i RandomDivider=$((32767/$SplashQty))

RandomSelection=`printf "%03d" $((RANDOM/$RandomDivider))`

# The math is slightly off
# .1% of the time RandomSelection == SplashQty, which is 1 too high.
# Never comes out below 0 but what the heck, might as well catch that too.
[ $RandomSelection -lt 000 ] && RandomSelection=000
[ $RandomSelection -ge $SplashQty ] && RandomSelection=$((SplashQty-1))

echo
cat $RandomSelection
echo
sleep ${1:-.5}
-----


Brian K. White    brian@aljex.com    http://www.myspace.com/KEYofR
+++++[>+++[>+++++>+++++++<<-]<-]>>+.>.+++++.+++++++.-.[>+<---]>++.
filePro  BBx    Linux  SCO  FreeBSD    #callahans  Satriani  Filk!


From zsh-workers-return-14214-mason-zsh=primenet.com.au@sunsite.dk Thu May 03 07:11:20 2001
Return-Path: <zsh-workers-return-14214-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9574 invoked from network); 3 May 2001 07:11:19 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 May 2001 07:11:18 -0000
Received: (qmail 24578 invoked by alias); 3 May 2001 07:11:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14214
Received: (qmail 24567 invoked from network); 3 May 2001 07:11:13 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Thu, 3 May 2001 09:10:58 +0200 (MET DST)
Message-Id: <200105030710.JAA04833@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: A minor glitch with _arguments
In-Reply-To: <1010502151336.ZM17348@candle.brasslantern.com>

Bart Schaefer wrote:

> ...
> 
> I think this cure is worse than the disease:
> 
> schaefer<509> ../zsh-4.0/configure '--e<TAB>
> schaefer<509> ../zsh-4.0/configure --e 
> _arguments:191: unmatched '
> schaefer<509> ../zsh-4.0/configure '--e

How embarrassing.


Bye
  Sven

Index: Src/Zle/computil.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/computil.c,v
retrieving revision 1.51
diff -u -r1.51 computil.c
--- Src/Zle/computil.c	2001/05/02 09:23:07	1.51
+++ Src/Zle/computil.c	2001/05/03 07:08:55
@@ -1253,7 +1253,7 @@
     Caopt ptr, wasopt = NULL, dopt;
     struct castate state;
     char *line, *pe, **argxor = NULL;
-    int cur, doff, argend, arglast;
+    int cur, doff, argend, arglast, ne;
     Patprog endpat = NULL, napat = NULL;
     LinkList sopts = NULL;
 
@@ -1319,7 +1319,10 @@
 
         /* remove quotes */
         line = dupstring(line);
+        ne = noerrs;
+        noerrs = 2;
         parse_subst_string(line);
+        noerrs = ne;
         remnulargs(line);
         untokenize(line);
 

-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


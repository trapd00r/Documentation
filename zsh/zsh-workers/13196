From zsh-workers-return-13196-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Nov 27 10:19:41 2000
Return-Path: <zsh-workers-return-13196-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19672 invoked from network); 27 Nov 2000 10:19:40 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Nov 2000 10:19:40 -0000
Received: (qmail 20320 invoked by alias); 27 Nov 2000 10:19:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13196
Received: (qmail 20313 invoked from network); 27 Nov 2000 10:19:24 -0000
Date: Mon, 27 Nov 2000 10:18:55 +0000
From: Peter Stephenson <pws@csr.com>
Subject: Re: PATCH: Module configuration changes
In-reply-to: "Your message of Mon, 27 Nov 2000 12:02:15 +0300."
 <000301c05850$bca2fcc0$21c9ca95@mow.siemens.ru>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0G4O00561HZJGU@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

> there seems to be one more value "either" that links dynamically if possible
> else statically. Is it user visible? In this case better name is needed.

No, it doesn't work in config.modules, it just allows configure to choose.
It means it should be linked by whichever way we have.

> "auto"? Also, "dynamic" won't link a module
> if compiled statically. That needs a word in documentation.

But the dynamic and static object files have different names, probably
because of this, so running `make prep', as it says in INSTALL, then `make'
should recompile properly, shouldn't it?  If not, what goes wrong?

Index: Etc/zsh-development-guide
===================================================================
RCS file: /cvsroot/zsh/zsh/Etc/zsh-development-guide,v
retrieving revision 1.4
diff -u -r1.4 zsh-development-guide
--- Etc/zsh-development-guide	2000/11/26 20:01:03	1.4
+++ Etc/zsh-development-guide	2000/11/27 10:16:45
@@ -182,6 +182,9 @@
 
   - name            name of the module
   - link            `static', `dynamic' or `no', as described in INSTALL.
+		    In addition, the value `either' is allowed in the .mdd
+		    file, which will be converted by configure to `dynamic'
+		    if that is available, else `static'.
 		    May also be a command string, which will be run within
 		    configure and whose output is used to set the value
 		    of `link' in config.modules.  This allows a

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


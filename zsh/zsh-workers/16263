From zsh-workers-return-16263-mason-zsh=primenet.com.au@sunsite.dk Sun Nov 18 07:57:30 2001
Return-Path: <zsh-workers-return-16263-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19688 invoked from network); 18 Nov 2001 07:57:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Nov 2001 07:57:27 -0000
Received: (qmail 10847 invoked by alias); 18 Nov 2001 07:57:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16263
Received: (qmail 10833 invoked from network); 18 Nov 2001 07:57:12 -0000
Message-ID: <3BF769E0.8080409@mail.ru>
Date: Sun, 18 Nov 2001 10:57:20 +0300
From: Andrej Borsenkow <arvidjaar@mail.ru>
Reply-To: Andrej.Borsenkow@mow.siemens.ru
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.5) Gecko/20011012
X-Accept-Language: en-us
MIME-Version: 1.0
To: ZSH Workers Mailing List <zsh-workers@sunsite.dk>
Subject: Module depndencies problem (fails on Linux at least)
Content-Type: text/plain; charset=KOI8-R; format=flowed
Content-Transfer-Encoding: 7bit

Yesterday I wrote patch that automatically adds module dependencies at 
compile time just to find out that under Linux (Mandrake cooker, 
glibc-2.2.4, gcc-2.96 as modified by Mandrake) shared object can't have 
unresolved data references else dlopen() fails. In case of zftp/tcp it 
appears to work, but e.g. loading of complist (that is done as the very 
first in my ~/.zshrc) fails due to large number of references to 
external variables.

Which meas that 'dlopen it and get list of dependencies' won't work 
until huge part of Zsh has been rewritten to not require direct access 
to external variables. Something I welcome wholeheartedly but do not 
dare to undertake :-)

-andrej


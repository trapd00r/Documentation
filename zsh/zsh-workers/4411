From zsh-workers-request@math.gatech.edu Mon Oct 05 10:30:33 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4347 invoked from network); 5 Oct 1998 10:30:32 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 5 Oct 1998 10:30:32 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id GAA15640;
	Mon, 5 Oct 1998 06:20:12 -0400 (EDT)
Resent-Date: Mon, 5 Oct 1998 06:20:12 -0400 (EDT)
To: zsh-workers@math.gatech.edu
Subject: Re: Autoremoveslash bug?
References: <rsqogrrpoi4.fsf@crane.jaist.ac.jp>
 <981005024107.ZM1609@candle.brasslantern.com>
User-Agent: SEMI/1.8.7.0 (Isurugi) FLAM-DOODLE/1.10.0
 (=?ISO-2022-JP?B?GyRCNDs7UhsoQg==?= 7.5YR7.0/11.0) Emacs/20.3.90
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)
MIME-Version: 1.0 (generated by SEMI 1.8.7.0 - "Isurugi")
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 05 Oct 1998 19:20:15 +0900
Message-ID: <rsqhfxjqpi8.fsf@crane.jaist.ac.jp>
Lines: 31
Resent-Message-ID: <"DbCNU2.0.Jq3.Sr96s"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4411
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

In article <981005024107.ZM1609@candle.brasslantern.com>,
  "Bart Schaefer" <schaefer@brasslantern.com> writes:

> } Is this correct?
> 
> Unfortunately, I don't know the completion code well enough to answer.

That is wrong ;-)

Previous patch does not fix the behaviour on pressing slash key
instead of return key.

So, I'm using following patch now.

------------------------------------------------------------
--- zle_tricky.c.org	Mon Oct  5 06:12:39 1998
+++ zle_tricky.c	Mon Oct  5 08:16:01 1998
@@ -3269,7 +3269,10 @@
 	if(ae && !atend)
 	    inststrlen(firstm + strlen(firstm) - ae, 0, ae);
 	if(ab || (ae && !atend))
+	{
+	    fixsuffix();
 	    inv = 1;
+	}
 	/* If the LIST_AMBIGUOUS option (meaning roughly `show a list only *
 	 * if the completion is completely ambiguous') is set, and some    *
 	 * prefix was inserted, return now, bypassing the list-displaying  *
------------------------------------------------------------
-- 
[Tanaka Akira]


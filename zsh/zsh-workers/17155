From zsh-workers-return-17155-mason-zsh=primenet.com.au@sunsite.dk Tue May 14 14:32:28 2002
Return-Path: <zsh-workers-return-17155-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12671 invoked from network); 14 May 2002 14:32:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 May 2002 14:32:27 -0000
Received: (qmail 20684 invoked by alias); 14 May 2002 14:32:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17155
Received: (qmail 20644 invoked from network); 14 May 2002 14:32:10 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020514143155.ZM13540@candle.brasslantern.com>
Date: Tue, 14 May 2002 14:31:55 +0000
In-Reply-To: <1020514142335.ZM13473@candle.brasslantern.com>
Comments: In reply to "Bart Schaefer" <schaefer@brasslantern.com>
        "Re: completion in quotes - " vs ' - no suffix added" (May 14,  2:23pm)
References: <15576.54689.459113.686818@wischnow.berkom.de> 
	<6134254DE87BD411908B00A0C99B044F02E89A73@mowd019a.mow.siemens.ru> 
	<15577.7296.682622.411849@wischnow.berkom.de> 
	<1020508153855.ZM7837@candle.brasslantern.com> 
	<15583.34740.981994.404489@wischnow.berkom.de> 
	<6134254DE87BD411908B00A0C99B044F02E89A8C@mowd019a.mow.siemens.ru> 
	<1020513173320.ZM12360@candle.brasslantern.com> 
	<1021313089.2926.10.camel@localhost.localdomain> 
	<15584.49227.780505.590251@wischnow.berkom.de> 
	<1020514142335.ZM13473@candle.brasslantern.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@berkom.de>, zsh-workers@sunsite.dk
Subject: Re: completion in quotes - " vs ' - no suffix added
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 14,  2:23pm, Bart Schaefer wrote:
}
} -rw-rw-r--   1 schaefer schaefer        0 May 13 10:29 a\ b
} drwxrwxr-x   2 schaefer schaefer     1024 May 13 10:29 a\ d/
} schaefer<503> zsh -c "ls a<TAB>
} schaefer<503> zsh -c "ls a\\\\\\ 

It's worse than that -- if I type TAB again at this point, the shell
crashes.

#0  0x400ab824 in chunk_free (ar_ptr=0x80fc458b, p=0x81b2e08) at malloc.c:2899
#1  0x400ab7c1 in __libc_free (mem=0x81b2e10) at malloc.c:2872
#2  0x808496a in zsfree (p=0x81b2e10 "patterns")
    at ../../zsh-4.0/Src/mem.c:1399
#3  0x809012f in strsetfn (pm=0x81b1a98, x=0x819a460 "")
    at ../../zsh-4.0/Src/params.c:2354
#4  0x808d874 in setstrvalue (v=0xbfffc844, val=0x819a460 "")
    at ../../zsh-4.0/Src/params.c:1608
#5  0x808ebb1 in assignsparam (s=0x81a2495 "", val=0x819a460 "", augment=0)
    at ../../zsh-4.0/Src/params.c:1994
#6  0x805e057 in addvars (state=0xbfffc9cc, pc=0x81a2350, export=0)
    at ../../zsh-4.0/Src/exec.c:1569
#7  0x805bd69 in execsimple (state=0xbfffc9cc) at ../../zsh-4.0/Src/exec.c:753
#8  0x805becb in execlist (state=0xbfffc9cc, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:806
#9  0x807ec73 in execif (state=0xbfffc9cc, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:519
#10 0x805bdc6 in execsimple (state=0xbfffc9cc) at ../../zsh-4.0/Src/exec.c:760
#11 0x805becb in execlist (state=0xbfffc9cc, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:806
#12 0x805bccf in execode (p=0x81a22a0, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#13 0x8063026 in runshfunc (prog=0x81a22a0, wrap=0x0, 
    name=0x40135758 "_normal") at ../../zsh-4.0/Src/exec.c:3492
#14 0x80cfc44 in comp_wrapper (prog=0x81a22a0, w=0x0, 
    name=0x40135758 "_normal") at ../../../zsh-4.0/Src/Zle/complete.c:1274
#15 0x8062fba in runshfunc (prog=0x81a22a0, wrap=0x8121200, 
    name=0x40135758 "_normal") at ../../zsh-4.0/Src/exec.c:3480
#16 0x8062dce in doshfunc (name=0x815c680 "_normal", prog=0x81a22a0, 
    doshargs=0x40135728, flags=8192, noreturnval=0)
    at ../../zsh-4.0/Src/exec.c:3407
#17 0x80627dc in execshfunc (shf=0x815c1a0, args=0x40135728)
    at ../../zsh-4.0/Src/exec.c:3217
#18 0x80603d8 in execcmd (state=0xbfffd04c, input=0, output=0, how=18, last1=2)
    at ../../zsh-4.0/Src/exec.c:2295
#19 0x805d0ef in execpline2 (state=0xbfffd04c, pcode=963, how=18, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#20 0x805c667 in execpline (state=0xbfffd04c, slcode=3074, how=18, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#21 0x805bfb5 in execlist (state=0xbfffd04c, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#22 0x807ec73 in execif (state=0xbfffd04c, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:519
#23 0x80601ed in execcmd (state=0xbfffd04c, input=0, output=0, how=18, last1=2)
    at ../../zsh-4.0/Src/exec.c:2253
#24 0x805d0ef in execpline2 (state=0xbfffd04c, pcode=835, how=18, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#25 0x805c667 in execpline (state=0xbfffd04c, slcode=57346, how=18, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#26 0x805bfb5 in execlist (state=0xbfffd04c, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#27 0x805bccf in execode (p=0x817c6c0, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#28 0x8063026 in runshfunc (prog=0x817c6c0, wrap=0x0, name=0x40135500 "_sh")
    at ../../zsh-4.0/Src/exec.c:3492
#29 0x80cfc44 in comp_wrapper (prog=0x817c6c0, w=0x0, name=0x40135500 "_sh")
    at ../../../zsh-4.0/Src/Zle/complete.c:1274
#30 0x8062fba in runshfunc (prog=0x817c6c0, wrap=0x8121200, 
    name=0x40135500 "_sh") at ../../zsh-4.0/Src/exec.c:3480
#31 0x8062dce in doshfunc (name=0x816afb8 "_sh", prog=0x817c6c0, 
    doshargs=0x401354d0, flags=8192, noreturnval=0)
    at ../../zsh-4.0/Src/exec.c:3407
#32 0x80627dc in execshfunc (shf=0x816b630, args=0x401354d0)
    at ../../zsh-4.0/Src/exec.c:3217
#33 0x80603d8 in execcmd (state=0xbfffd470, input=0, output=0, how=18, last1=2)
    at ../../zsh-4.0/Src/exec.c:2295
#34 0x805d0ef in execpline2 (state=0xbfffd470, pcode=131, how=18, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#35 0x805c667 in execpline (state=0xbfffd470, slcode=3074, how=18, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#36 0x805bfb5 in execlist (state=0xbfffd470, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#37 0x805bccf in execode (p=0x40135498, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#38 0x8056a4d in bin_eval (nam=0x40135458 "eval", argv=0xbfffd4b8, 
    ops=0xbfffd51c "", func=14) at ../../zsh-4.0/Src/builtin.c:3824
#39 0x804b339 in execbuiltin (args=0x40135438, bn=0x811d988)
    at ../../zsh-4.0/Src/builtin.c:380
#40 0x806045e in execcmd (state=0xbfffda2c, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2306
#41 0x805d0ef in execpline2 (state=0xbfffda2c, pcode=3523, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#42 0x805c667 in execpline (state=0xbfffda2c, slcode=4130, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#43 0x805c001 in execlist (state=0xbfffda2c, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:833
#44 0x807ec73 in execif (state=0xbfffda2c, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:519
#45 0x80601ed in execcmd (state=0xbfffda2c, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2253
#46 0x805d0ef in execpline2 (state=0xbfffda2c, pcode=3395, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#47 0x805c667 in execpline (state=0xbfffda2c, slcode=43010, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#48 0x805bfb5 in execlist (state=0xbfffda2c, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#49 0x805bccf in execode (p=0x81a2d38, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#50 0x8063026 in runshfunc (prog=0x81a2d38, wrap=0x0, 
    name=0x40135008 "_dispatch") at ../../zsh-4.0/Src/exec.c:3492
#51 0x80cfc44 in comp_wrapper (prog=0x81a2d38, w=0x0, 
    name=0x40135008 "_dispatch") at ../../../zsh-4.0/Src/Zle/complete.c:1274
#52 0x8062fba in runshfunc (prog=0x81a2d38, wrap=0x8121200, 
    name=0x40135008 "_dispatch") at ../../zsh-4.0/Src/exec.c:3480
#53 0x8062dce in doshfunc (name=0x815bdf0 "_dispatch", prog=0x81a2d38, 
    doshargs=0x40134ee8, flags=8192, noreturnval=0)
    at ../../zsh-4.0/Src/exec.c:3407
#54 0x80627dc in execshfunc (shf=0x815bd98, args=0x40134ee8)
    at ../../zsh-4.0/Src/exec.c:3217
#55 0x80603d8 in execcmd (state=0xbfffde60, input=0, output=0, how=18, last1=2)
    at ../../zsh-4.0/Src/exec.c:2295
#56 0x805d0ef in execpline2 (state=0xbfffde60, pcode=1667, how=18, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#57 0x805c667 in execpline (state=0xbfffde60, slcode=8194, how=18, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#58 0x805bfb5 in execlist (state=0xbfffde60, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#59 0x805bccf in execode (p=0x81a22a0, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#60 0x8063026 in runshfunc (prog=0x81a22a0, wrap=0x0, 
    name=0x40134de0 "_normal") at ../../zsh-4.0/Src/exec.c:3492
#61 0x80cfc44 in comp_wrapper (prog=0x81a22a0, w=0x0, 
    name=0x40134de0 "_normal") at ../../../zsh-4.0/Src/Zle/complete.c:1274
#62 0x8062fba in runshfunc (prog=0x81a22a0, wrap=0x8121200, 
    name=0x40134de0 "_normal") at ../../zsh-4.0/Src/exec.c:3480
#63 0x8062dce in doshfunc (name=0x815c680 "_normal", prog=0x81a22a0, 
    doshargs=0x40134da0, flags=8192, noreturnval=0)
    at ../../zsh-4.0/Src/exec.c:3407
#64 0x80627dc in execshfunc (shf=0x815c1a0, args=0x40134da0)
    at ../../zsh-4.0/Src/exec.c:3217
#65 0x80603d8 in execcmd (state=0xbfffe4d8, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2295
#66 0x805d0ef in execpline2 (state=0xbfffe4d8, pcode=7555, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#67 0x805c667 in execpline (state=0xbfffe4d8, slcode=4130, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#68 0x805c001 in execlist (state=0xbfffe4d8, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:833
#69 0x807ec73 in execif (state=0xbfffe4d8, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:519
#70 0x80601ed in execcmd (state=0xbfffe4d8, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2253
#71 0x805d0ef in execpline2 (state=0xbfffe4d8, pcode=7427, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#72 0x805c667 in execpline (state=0xbfffe4d8, slcode=114690, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#73 0x805bfb5 in execlist (state=0xbfffe4d8, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#74 0x805bccf in execode (p=0x81a12a0, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#75 0x8063026 in runshfunc (prog=0x81a12a0, wrap=0x0, 
    name=0x40134978 "_complete") at ../../zsh-4.0/Src/exec.c:3492
#76 0x80cfc44 in comp_wrapper (prog=0x81a12a0, w=0x0, 
    name=0x40134978 "_complete") at ../../../zsh-4.0/Src/Zle/complete.c:1274
#77 0x8062fba in runshfunc (prog=0x81a12a0, wrap=0x8121200, 
    name=0x40134978 "_complete") at ../../zsh-4.0/Src/exec.c:3480
#78 0x8062dce in doshfunc (name=0x815ae28 "_complete", prog=0x81a12a0, 
    doshargs=0x40134928, flags=8192, noreturnval=0)
    at ../../zsh-4.0/Src/exec.c:3407
#79 0x80627dc in execshfunc (shf=0x815b2c8, args=0x40134928)
    at ../../zsh-4.0/Src/exec.c:3217
#80 0x80603d8 in execcmd (state=0xbffff088, input=0, output=0, how=18, last1=2)
    at ../../zsh-4.0/Src/exec.c:2295
#81 0x805d0ef in execpline2 (state=0xbffff088, pcode=9987, how=18, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#82 0x805c667 in execpline (state=0xbffff088, slcode=3074, how=18, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#83 0x805bfb5 in execlist (state=0xbffff088, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#84 0x807eb91 in execif (state=0xbffff088, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:504
#85 0x80601ed in execcmd (state=0xbffff088, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2253
#86 0x805d0ef in execpline2 (state=0xbffff088, pcode=9667, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#87 0x805c667 in execpline (state=0xbffff088, slcode=48130, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#88 0x805bfb5 in execlist (state=0xbffff088, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#89 0x807dd10 in execfor (state=0xbffff088, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:159
#90 0x80601ed in execcmd (state=0xbffff088, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2253
#91 0x805d0ef in execpline2 (state=0xbffff088, pcode=9155, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#92 0x805c667 in execpline (state=0xbffff088, slcode=90114, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#93 0x805bfb5 in execlist (state=0xbffff088, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#94 0x807dd10 in execfor (state=0xbffff088, do_exec=0)
    at ../../zsh-4.0/Src/loop.c:159
#95 0x80601ed in execcmd (state=0xbffff088, input=0, output=0, how=2, last1=2)
    at ../../zsh-4.0/Src/exec.c:2253
#96 0x805d0ef in execpline2 (state=0xbffff088, pcode=7875, how=2, input=0, 
    output=0, last1=0) at ../../zsh-4.0/Src/exec.c:1201
#97 0x805c667 in execpline (state=0xbffff088, slcode=205826, how=2, last1=0)
    at ../../zsh-4.0/Src/exec.c:991
#98 0x805bfb5 in execlist (state=0xbffff088, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:826
#99 0x805bccf in execode (p=0x819ae48, dont_change_job=1, exiting=0)
    at ../../zsh-4.0/Src/exec.c:729
#100 0x8063026 in runshfunc (prog=0x819ae48, wrap=0x0, 
    name=0x40133030 "_main_complete") at ../../zsh-4.0/Src/exec.c:3492
#101 0x80cfc44 in comp_wrapper (prog=0x819ae48, w=0x0, 
    name=0x40133030 "_main_complete")
    at ../../../zsh-4.0/Src/Zle/complete.c:1274
#102 0x8062fba in runshfunc (prog=0x819ae48, wrap=0x8121200, 
    name=0x40133030 "_main_complete") at ../../zsh-4.0/Src/exec.c:3480
#103 0x8062dce in doshfunc (name=0x818a750 "_main_complete", prog=0x819ae48, 
    doshargs=0x0, flags=0, noreturnval=0) at ../../zsh-4.0/Src/exec.c:3407
#104 0x80d1a75 in callcompfunc (s=0x4011b420 "ls a\\\\\\ ", 
    fn=0x818a750 "_main_complete") at ../../../zsh-4.0/Src/Zle/compcore.c:781
#105 0x80d217a in makecomplist (s=0x4011b420 "ls a\\\\\\ ", incmd=0, lst=0)
    at ../../../zsh-4.0/Src/Zle/compcore.c:932
#106 0x80d078d in do_completion (dummy=0x812465c, dat=0xbffff37c)
    at ../../../zsh-4.0/Src/Zle/compcore.c:342
#107 0x80886f2 in runhookdef (h=0x812465c, d=0xbffff37c)
    at ../../zsh-4.0/Src/module.c:1858
#108 0x810c9e6 in docompletion (s=0x81b5d68 "ls a\\\\\\ ", lst=0, incmd=0)
    at ../../../zsh-4.0/Src/Zle/zle_tricky.c:1822
#109 0x8109ebb in docomplete (lst=0)
    at ../../../zsh-4.0/Src/Zle/zle_tricky.c:810
#110 0x8108a0f in completeword (args=0x81245d8)
    at ../../../zsh-4.0/Src/Zle/zle_tricky.c:205
#111 0x8108923 in completecall (args=0x81245d8)
    at ../../../zsh-4.0/Src/Zle/zle_tricky.c:181
#112 0x80ff2c1 in execzlefunc (func=0x812233c, args=0x81245d8)
    at ../../../zsh-4.0/Src/Zle/zle_main.c:662


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


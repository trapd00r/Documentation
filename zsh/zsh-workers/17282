From zsh-workers-return-17282-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 04 14:29:48 2002
Return-Path: <zsh-workers-return-17282-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14105 invoked from network); 4 Jun 2002 14:29:48 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Jun 2002 14:29:48 -0000
Received: (qmail 18778 invoked by alias); 4 Jun 2002 14:29:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17282
Received: (qmail 18758 invoked from network); 4 Jun 2002 14:29:34 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020604142853.ZM2297@candle.brasslantern.com>
Date: Tue, 4 Jun 2002 14:28:53 +0000
In-Reply-To: <15612.30140.846841.485740@wischnow.berkom.de>
Comments: In reply to Sven Wischnowsky <wischnow@berkom.de>
        "Re: Glitch in optimized menu-selection display" (Jun  4, 10:09am)
References: <1020602164355.ZM10254@candle.brasslantern.com> 
	<15612.30140.846841.485740@wischnow.berkom.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@berkom.de>, zsh-workers@sunsite.dk
Subject: Re: Glitch in optimized menu-selection display
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 4, 10:09am, Sven Wischnowsky wrote:
}
} Bart Schaefer wrote:
} 
} > It's very difficult to explain how to reproduce this, but occasionally
} > when I accept a choice in menu selection and the display is erased, the
} > word that I selected is "left behind", no longer highlighted but still
} > visible somewhere in the middle of the white space where the selection
} > display had been.
} 
} Err... `display erased' when you `accept a choice'? It shouldn't get
} erased on an accept-line. And it doesn't get for me. Hence I couldn't
} reproduce this.

OK, I managed to reproduce it:

---------------------------------------------------------------------------
schaefer<501> ls /usr/src/local/zsh/zsh-4.0/Src/c
---------------------------------------------------------------------------

Cursor is over the final 'c' when I press TAB:

---------------------------------------------------------------------------
schaefer<501> ls /usr/src/local/zsh/zsh-4.0/Src/c
Completing files
exec.c       math.c       params.c     prompt.c     options.c    watch.c    
jobs.c       init.c       hist.c       input.c      linklist.c   string.c   
signals.c    glob.c       builtin.c    pattern.c    hashtable.c  modentry.c 
lex.c        cond.c       parse.c      text.c       module.c     mem.c      
utils.c      subst.c      loop.c       compat.c     zsh.rc       main.c     
---------------------------------------------------------------------------

(I have zstyle ':completion:*' file-sort modification)

Press TAB nine times (this many may not be necessary) so that `cond.c' is
highlighted.  Then press accept-line:

---------------------------------------------------------------------------
schaefer<501> ls /usr/src/local/zsh/zsh-4.0/Src/cond.c 




             cond.c       

---------------------------------------------------------------------------

(Cursor is now at the end of the command line after `cond.c '.

Potentially relevant styles:

zstyle ':completion:*' menu 'yes=long' 'select=9'  
zstyle ':completion:*' completer \
	_oldlist _expand _complete _match _ignored _approximate _prefix
zstyle ':completion:*' group-name ''
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' matcher-list '' 'r:|[-._,]=** r:|=**' \
	'm:{a-zA-Z}={A-Za-z} r:|[-._,]=** r:|=**' 'r:|[-._,]=** r:|=** l:|=*'
zstyle ':completion:*' max-errors 2 numeric
zstyle ':completion:*' original true 
zstyle ':completion:*' format 'Completing %d'


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


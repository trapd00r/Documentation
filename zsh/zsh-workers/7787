From zsh-workers-return-7787-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Sep 12 22:42:03 1999
Return-Path: <zsh-workers-return-7787-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20875 invoked from network); 12 Sep 1999 22:42:01 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Sep 1999 22:42:01 -0000
Received: (qmail 24255 invoked by alias); 12 Sep 1999 22:41:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7787
Received: (qmail 24248 invoked from network); 12 Sep 1999 22:41:51 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990912224147.ZM23589@candle.brasslantern.com>
Date: Sun, 12 Sep 1999 22:41:47 +0000
In-Reply-To: <rsq671gosz1.fsf@crane.jaist.ac.jp>
Comments: In reply to Tanaka Akira <akr@jaist.ac.jp>
        "Re: PATCH: 3.1.6-pws-3: bslashquote() is slightly messed up." (Sep 13,  4:00am)
References: <990912165419.ZM23254@candle.brasslantern.com> 
	<rsq671gosz1.fsf@crane.jaist.ac.jp>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: 3.1.6-pws-3: bslashquote() is slightly messed up.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 13,  4:00am, Tanaka Akira wrote:
} Subject: Re: PATCH: 3.1.6-pws-3: bslashquote() is slightly messed up.
}
} In article <990912165419.ZM23254@candle.brasslantern.com>,
}   "Bart Schaefer" <schaefer@candle.brasslantern.com> writes:
} 
} > +    DPUTS(!e || sf, "BUG: Wild pointer *e in bslashquote()");
} 
} Hm. Is this really a bug? I think e == NULL is allowed.

Hm.  It's really tricky to write the conditions for DPUTS(), partly because
I keep thinking in terms of assert(), of which DPUTS() is the reverse.

Index: utils.c
===================================================================
@@ -2999,7 +2999,7 @@
 
     if (e && *e == u)
 	*e = v, sf = 1;
-    DPUTS(!e || sf, "BUG: Wild pointer *e in bslashquote()");
+    DPUTS(e && !sf, "BUG: Wild pointer *e in bslashquote()");
 
     return buf;
 }

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-users-return-3762-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 29 07:39:51 2001
Return-Path: <zsh-users-return-3762-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19488 invoked from network); 29 Mar 2001 07:39:49 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Mar 2001 07:39:49 -0000
Received: (qmail 24496 invoked by alias); 29 Mar 2001 07:39:35 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3762
Received: (qmail 24479 invoked from network); 29 Mar 2001 07:39:35 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
Date: Thu, 29 Mar 2001 11:39:33 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Ville Herva <vherva@mail.niksula.cs.hut.fi>
cc: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>,
   <zsh-users@sunsite.auc.dk>
Subject: Re: Compilation problem on Cygwin
In-Reply-To: <20010328150338.I3478@niksula.cs.hut.fi>
Message-ID: <Pine.SV4.4.33.0103291108240.26074-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

One more possibility (and I'm pretty sure it is it): the temporary files
are created on text-mounted file system and then simply copied into /home
and get DOS lineend.

anybody knows where configure creates temporary files?

Ville, could you check

- config.status, and probably a couple of makefiles (Src/Makemod,
Src/Makefile) for CR-LF? Better copy over to Unix (to avoid Cygwin
sideeffects; do not forget bin mode :-). If you see something like
"#!/bin/shCR" - it canot work of course.

- how your /tmp (and may be TMP, TEMP, TMPDIR) are mounted? If they are
inside text-mounted filesystem? Note, that Cygwin defaulted to text mount;
since 1.1.8 (I believe) it defaults to binary, but it won't change
defaults by update.

-andrej


 On Wed, 28 Mar 2001, Ville Herva wrote:

> On Wed, Mar 28, 2001 at 03:12:31PM +0400, you [Andrej Borsenkow] claimed:
> > I think I have seen this once ... can you please try separate build
> > directory? I probably never tried it in src dir.
>
> I did
> cd ..
> mkdir build
> cd build
> ../configure --prefix=/usr
> make
>
> and it gave
>
> make[1]: Entering directory /home/vherva/zsh/build/Src'
> cd .. && /bin/sh $top_srcdir/Src/mkmakemod.sh Src Makemod
> creating Src/Makemod.in
> ./config.status: not found
> make[2]: Entering directory /home/vherva/zsh/build/Src'
> make[2]: Makemod: No such file or directory
> make[2]: *** No rule to make target
> akemod'.  Stop.
> make[2]: Leaving directory /home/vherva/zsh/build/Src'
> make[2]: Entering directory /home/vherva/zsh/build/Src'
> make[2]: Makemod: No such file or directory
> make[2]: *** No rule to make target
> akemod'.  Stop.
> make[2]: Leaving directory /home/vherva/zsh/build/Src'
> make[1]: *** [headers] Error 2
> make[1]: Leaving directory /home/vherva/zsh/build/Src'
> make: *** [all] Error 1
>
>
> > Another possibilities are:
> >
> > - binary/text mount. Zsh is not very happy with DOS lineendings. Please,
> > check how your home is mounted; if it is text, remount it in binary (you
> > porbably need to repeat cvs checkout to get correct lineendings)
>
> I checked mount. It should be binary:
> c:\home             /home               user         binmode
>
> > - you are on FAT and Cygwin does not understand that config.status is
> > executable. Do we have #!/bin/sh there? (I presume, yes).
>
> This is NTFS. I do have /bin/sh.
>
> > - every now and then there are bug reports for CVS under Cygwin.
>
> This happened with 4.0.1pre2 as well.
>
> > I'll be able to do more next week.
>
> Thanks!
>
>
> -- v --
>
> v@iki.fi
>
>

-- 
------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 737 2747
Siemens ICP ITS Moscow		Tel:   +7 (095) 737 2723

E-Mail: Andrej.Borsenkow@mow.siemens.ru
-------------------------------------------------------------------------


From zsh-workers-request@math.gatech.edu Sun Nov 15 03:54:56 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2140 invoked from network); 15 Nov 1998 03:54:55 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 15 Nov 1998 03:54:55 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id WAA21958;
	Sat, 14 Nov 1998 22:54:16 -0500 (EST)
Resent-Date: Sat, 14 Nov 1998 22:54:16 -0500 (EST)
From: Phil Pennock <phil@athenaeum.demon.co.uk>
Message-Id: <199811150301.DAA04613@athenaeum.demon.co.uk>
Subject: Re: bug 3.1.5 symlinks & cd
In-Reply-To: <981113214816.ZM19988@candle.brasslantern.com> from Bart Schaefer at "Nov 13, 98 09:48:16 pm"
To: zsh-workers@math.gatech.edu
Date: Sun, 15 Nov 1998 03:01:58 +0000 (GMT)
Cc: schaefer@brasslantern.com
X-Disclaimer-1: Any views expressed in this message, where not explicitly
X-Disclaimer-2: attributed otherwise, are mine and mine alone.  Such views
X-Disclaimer-3: do not necessarily coincide with those of any organisation
X-Disclaimer-4: or company with which I am or have been affiliated.
X-Phase-of-Moon: The Moon is Waning Crescent (15% of Full)
X-Mailer: ELM [version 2.4ME+ PL37 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"NhDAZ2.0.1N5.e1bJs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4637
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Typing away merrily, Bart Schaefer produced the immortal words:
> On Nov 13,  9:19pm, Phil Pennock wrote:
> } Using a stock zsh-3.1.5, there seems to be some problem with completion
> } using one interpretation of a directory tree with symlinks, and cd using
> } another.
> 
> This isn't new.  It behaves the same way in 3.0.5.  `setopt chaselinks'
> will make the effect go away.

Yes, but:
       CHASE_LINKS (-w)
              Resolve symbolic links to their  true  values  when
              changing directory.

The 'effect' only goes away insofar as this avoids the problem by never
having a symbolic-link as part of PWD.

If you want to have the 'real' view of a layout, fine.  But forcing this
option just to get a consistent interpretation of the FS dodges the fact
that two different parts of the shell are taking differing approaches to
symbolic-links pointing to directories.  Completion ignores the symbolic
aspect of PWD, such that a ../ always uses the underlying 'true' layout,
whilst cd handles the symbolic links.  This is a conflict that's
entirely due to two parts of zsh doing things very differently.

$0.01 (discounted 50% -- as Bart says, it can be worked around, but it
       shouldn't have to be.)
-- 
-Phil 'my paragraphs naturally right-align' Pennock


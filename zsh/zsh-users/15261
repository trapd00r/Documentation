From zsh-users-return-15261-mason-zsh=primenet.com.au@zsh.org Wed Aug 11 21:51:57 2010
Return-Path: <zsh-users-return-15261-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5930 invoked by alias); 11 Aug 2010 21:51:57 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15261
Received: (qmail 9006 invoked from network); 11 Aug 2010 21:51:54 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
Date: Wed, 11 Aug 2010 17:51:24 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Joke de Buhr <joke@seiken.de>
cc: zsh-users <zsh-users@zsh.org>
Subject: Re: Completion and double quotes
In-Reply-To: <201008112130.10895.joke@seiken.de>
Message-ID: <alpine.LNX.2.01.1008111741040.19568@hp>
References: <201008112130.10895.joke@seiken.de>
User-Agent: Alpine 2.01 (LNX 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Wed, 11 Aug 2010, Joke de Buhr wrote:

> Hi,
> 
> Currently my completion is somehow configured to transform double 
> quoted paths to backslash escaped paths.
> 
> Example:
>   ls /path/to/"file with"<TAB> -> /path/to/file\ with\ spaces
> 
> I would like the completion not to touch the quotation. But I can't 
> figure out how to get zsh to do this. The completion should work like 
> this.
> 
> Example:
>   ls /path/to/"file with"<TAB> -> /path/to/"file with spaces"
> 
> I don't remember what completion options caused the current behavior 
> but I remember having zsh configured to not touch the quotes.

Are you sure your above example worked before?  It's always bugged me a 
little (but not enough to search for it) that zsh leaves:

"/path/to/file with<Tab>
as a quoted string:
"/path/to/file with spaces"

but:
/path/to/"file with<Tab>
becomes toothpicked[1]:
/path/to/file\ with\ spaces

So, I'd also be interested to know what I'm overlooking.

A similar thing that bothers me is the way named directories are 
somewhat inconsistently expanded.  (From my perspective, that is.  It's 
probably entirely internally consistent.)  I can't come up with a 
minimal example right now, but I notice it most when trying to do things 
like:

for l in ~/bin/{*.pl,<Tab>

(That is: combinations of bracket expansion and file completion.)

Perhaps the cure(s) are the same or similar?  (Wouldn't be surprised if 
the latter weren't curable.)

-- 
Best,
Ben

[1] http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome


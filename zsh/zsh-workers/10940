From zsh-workers-return-10940-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 26 17:24:28 2000
Return-Path: <zsh-workers-return-10940-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8077 invoked from network); 26 Apr 2000 17:24:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Apr 2000 17:24:26 -0000
Received: (qmail 28820 invoked by alias); 26 Apr 2000 17:24:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10940
Received: (qmail 28805 invoked from network); 26 Apr 2000 17:24:14 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000426172340.ZM20629@candle.brasslantern.com>
Date: Wed, 26 Apr 2000 17:23:39 +0000
In-Reply-To: <20000426173759.A11067@thelonious.new.ox.ac.uk>
Comments: In reply to Adam Spiers <adam@spiers.net>
        "PATCH: bugfixes for _rpm" (Apr 26,  5:37pm)
References: <20000426173759.A11067@thelonious.new.ox.ac.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Adam Spiers <adam@spiers.net>,
        zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: bugfixes for _rpm
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 26,  5:37pm, Adam Spiers wrote:
} Subject: PATCH: bugfixes for _rpm
}
} --rmsource completion still doesn't work exactly as I'd like it to
} after the patch is applied - it completes all files, not just *.spec.
} Have I done something wrong, or do I have to finally take the plunge
} and try to understand the file-patterns style?

You've done something wrong.

} +  spec_file)
} +    _wanted specfiles expl 'spec file' \
} +        _files "$expl[@]" -g \*.spec && ret=0
} +    ;;

Take that "$expl[@]" out of there, you don't need it and it's ultimately
causing an empty string as an argument to _files.  (Could that be a bug
elsewhere?  Shouldn't "$foo[@]" completely disappear, as does "$@"?)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


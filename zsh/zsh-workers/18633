From zsh-workers-return-18633-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 25 11:58:59 2003
Return-Path: <zsh-workers-return-18633-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12188 invoked from network); 25 Jun 2003 11:58:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Jun 2003 11:58:58 -0000
Received: (qmail 5242 invoked by alias); 25 Jun 2003 11:58:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18633
Received: (qmail 5235 invoked from network); 25 Jun 2003 11:58:53 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 25 Jun 2003 11:58:53 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [192.18.42.14] by sunsite.dk (MessageWall 1.0.8) with SMTP; 25 Jun 2003 11:58:52 -0000
Received: from sunfin.Finland.Sun.COM ([129.159.101.10])
	by nwkea-mail-2.sun.com (8.12.9/8.12.9) with ESMTP id h5PBwnfU020467;
	Wed, 25 Jun 2003 04:58:50 -0700 (PDT)
Received: from ultrahot.Finland.Sun.COM (ultrahot [129.159.101.87])
	by sunfin.Finland.Sun.COM (8.12.9+Sun/8.12.9/ENSMAIL,v2.3beta) with ESMTP id h5PBwmcP005422;
	Wed, 25 Jun 2003 14:58:48 +0300 (EEST)
Received: from ultrahot.Finland.Sun.COM (localhost [127.0.0.1])
	by ultrahot.Finland.Sun.COM (8.12.9+Sun/8.12.9) with ESMTP id h5PBwmHI026620;
	Wed, 25 Jun 2003 14:58:48 +0300 (EEST)
Received: (from tomppa@localhost)
	by ultrahot.Finland.Sun.COM (8.12.9+Sun/8.12.9/Submit) id h5PBwl3x026617;
	Wed, 25 Jun 2003 14:58:47 +0300 (EEST)
From: Tomi Vainio - Sun Finland <Tomi.Vainio@Sun.COM>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16121.36471.200540.460093@ultrahot.finland.sun.com>
Date: Wed, 25 Jun 2003 14:58:47 +0300
To: Oliver Kiddle <okiddle@yahoo.co.uk>
Cc: zsh-workers@sunsite.dk
Subject: Re: 4.1.1 doesn't compile 
In-Reply-To: <21028.1056534512@gmcs3.local>
References: <16120.21181.974421.168422@ultrahot.finland.sun.com>
	<13714.1056468548@gmcs3.local>
	<16121.23378.685635.437515@ultrahot.finland.sun.com>
	<21028.1056534512@gmcs3.local>
X-Mailer: VM 7.16 under 21.4 (patch 9) "Informed Management" XEmacs Lucid
Reply-To: Tomi.Vainio@Sun.COM

Oliver Kiddle writes:
 > Tomi Vainio - Sun Finland wrote:
 > > I also found another problem but this time only when I try to compile
 > > 32bit binary.
 > > 
 > > Compiler is Sun ONE Studio 8, Compiler Collection
 > >             cc: Sun C 5.5 Patch 112760-01 2003/05/18 
 > > 
 > > cc -c -I. -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -xO4  -o compat.o compat.c
 > > "compat.c", line 441: variable length array can not be declared with a static storage class: llbuf
 > > cc: acomp failed for compat.c
 > 
 > This I can't reproduce. The compiler I have is older than that.
 > 
 > The line in question is:
 >      static char llbuf[DIGBUFSIZE];
 > and system.h defines:
 >      #define DIGBUFSIZE ((int)(((sizeof(zlong) * 8) - 1) * 0.30103) + 3)
 > 
 > So quite why the compiler thinks it has a variable length array I
 > don't understand. Could you perhaps try substituting that in directly
 > and see if you can tweak it to work. The int cast might be causing the
 > problem in which case the * 0.30103 could perhaps be changed to * 30103
 > / 100000. But I don't understand what the calculation is doing. Anyone
 > else have any idea?
 > 
I also tried with older compiler "cc: Forte Developer 7 C 5.4
2002/03/09" which doesn't give an error on this.

  Tomppa


From zsh-workers-request@euclid.skiles.gatech.edu  Thu Nov 14 14:42:31 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id OAA06854 for <mason@primenet.com.au>; Thu, 14 Nov 1996 14:42:27 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id WAA17473; Wed, 13 Nov 1996 22:42:31 -0500 (EST)
Resent-Date: Wed, 13 Nov 1996 22:42:31 -0500 (EST)
From: Geoff Wing <gwing@primenet.com.au>
Message-Id: <199611140335.OAA06721@coral.primenet.com.au>
Subject: Re: zle_refrech bug
To: hzoli@cs.elte.hu (Zoltan Hidvegi)
Date: Thu, 14 Nov 1996 14:35:47 +1100 (EST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199611132210.XAA01414@bolyai.cs.elte.hu> from "Zoltan Hidvegi" at Nov 13, 96 11:10:42 pm
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"bo5rF.0.uG4.cKfYo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2404
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Zoltan Hidvegi wrote:
:After applying patches 2336, 2351, 2359, 2386 and 2387 from Geoff
:and doing:

You're still expecting me to be able to count.  I didn't get a degree with a
major in Maths for nothing, you know.


*** zle_refresh.c.~5~	Thu Nov 14 14:29:16 1996
--- zle_refresh.c	Thu Nov 14 14:31:53 1996
***************
*** 805,811 ****
  tc_rightcurs(int cl)
  {
      int ct,			/* number of characters to move across	    */
- 	horz_tabs,		/* number of horizontal tabs if we do them  */
  	i = vcs,		/* cursor position after initial movements  */
  	j;
      char *t;
--- 805,810 ----
***************
*** 820,827 ****
  
  /* try tabs if tabs are non destructive and multright is not possible */
      if (!oxtabs && tccan(TCNEXTTAB) && ((vcs | 7) < cl)) {
- 	horz_tabs = 1;
  	i = (vcs | 7) + 1;
  	for ( ; i + 8 <= cl; i += 8)
  	    tcout(TCNEXTTAB);
  	if ((ct = cl - i) == 0) /* number of chars still to move across */
--- 819,826 ----
  
  /* try tabs if tabs are non destructive and multright is not possible */
      if (!oxtabs && tccan(TCNEXTTAB) && ((vcs | 7) < cl)) {
  	i = (vcs | 7) + 1;
+ 	tcout(TCNEXTTAB);
  	for ( ; i + 8 <= cl; i += 8)
  	    tcout(TCNEXTTAB);
  	if ((ct = cl - i) == 0) /* number of chars still to move across */

-- 
Geoff Wing [gwing@primenet.com.au]   Technical Manager
  Phone    : +61-3-9818 2977	     PrimeNet - Internet Consultancy
  Facsimile: +61-3-9819 3788	     Web : <URL:http://www.primenet.com.au/>
  Mobile   : 0412 162 441


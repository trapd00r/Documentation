From zsh-workers-return-8564-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Nov 05 11:57:08 1999
Return-Path: <zsh-workers-return-8564-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18987 invoked from network); 5 Nov 1999 11:57:07 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Nov 1999 11:57:07 -0000
Received: (qmail 10051 invoked by alias); 5 Nov 1999 11:56:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8564
Received: (qmail 10044 invoked from network); 5 Nov 1999 11:56:52 -0000
Subject: Re: PATCH: AIX .export files
In-Reply-To: <991105091919.ZM29481@candle.brasslantern.com> from Bart Schaefer at "Nov 5, 1999  9:19:19 am"
To: schaefer@candle.brasslantern.com (Bart Schaefer)
Date: Fri, 5 Nov 1999 11:56:50 +0000 (GMT)
Cc: zsh-workers@sunsite.auc.dk
X-Mailer: ELM [version 2.4ME+ PL48 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id: <E11jhz8-0001KN-00@crucigera.fysh.org>
From: Zefram <zefram@fysh.org>

Bart Schaefer wrote:
>(4) Rewrite makepro.awk to avoid accumulating all the function def'n's
>    before printing any of them, thus producing uglier .pro files.

This one gets my vote.  The .pro files aren't primarily meant to be nice;
I made it collect all the locals together to make it as close as possible
to how a human would lay it out, but if that's causing problems it can
be sacrificed.

Or there's another possibility: run makepro.awk over the file twice,
once generating local definitions and once externals, and glue the two
together.  You'd get the current form of .pro files, without requiring
awk to handle lengthy strings, at the cost of doubling generation time.

-zefram


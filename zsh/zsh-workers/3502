From zsh-workers-request@math.gatech.edu Wed Sep 17 13:13:43 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 15735 invoked from network); 17 Sep 1997 13:13:42 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 17 Sep 1997 13:13:42 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id JAA19146;
	Wed, 17 Sep 1997 09:09:04 -0400 (EDT)
Resent-Date: Wed, 17 Sep 1997 09:09:04 -0400 (EDT)
Message-Id: <199709171309.PAA05444@sgi.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: Directory completion and Initial path completion option 
In-reply-to: "Sven Wischnowsky"'s message of "Wed, 17 Sep 1997 14:58:00 MET."
             <m0xBJgb-00013EC@worf.informatik.hu-berlin.de> 
Date: Wed, 17 Sep 1997 15:09:18 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"NE4yp3.0.2h4.mPz7q"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3502
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Sven Wischnowsky wrote:
> That should be `cc-mask & CC_DIRS'.
> 
> here we probably should use "path expected after -%c".

you're right, here's another additional patch (requires both previous
sets of patches).


*** Src/Zle/compctl.c~	Tue Sep 16 16:27:08 1997
--- Src/Zle/compctl.c	Wed Sep 17 15:06:37 1997
***************
*** 285,291 ****
  		    cct.withd = (*argv) + 1;
  		    *argv = "" - 1;
  		} else if (!argv[1]) {
! 		    zwarnnam(name, "command string expected after -%c", NULL,
  			    **argv);
  		    return 1;
  		} else {
--- 285,291 ----
  		    cct.withd = (*argv) + 1;
  		    *argv = "" - 1;
  		} else if (!argv[1]) {
! 		    zwarnnam(name, "path expected after -%c", NULL,
  			    **argv);
  		    return 1;
  		} else {
*** Src/Zle/zle_tricky.c~	Tue Sep 16 16:53:46 1997
--- Src/Zle/zle_tricky.c	Wed Sep 17 15:06:00 1997
***************
*** 2638,2644 ****
  				prpre = pp;
  			    }
  			}
! 		    } else if (cc->mask && CC_DIRS)
  			gen_matches_files(1, 0, 0);
  		    /* The compctl has a glob pattern (compctl -g). */
  		    if (cc->glob) {
--- 2638,2644 ----
  				prpre = pp;
  			    }
  			}
! 		    } else if (cc->mask & CC_DIRS)
  			gen_matches_files(1, 0, 0);
  		    /* The compctl has a glob pattern (compctl -g). */
  		    if (cc->glob) {

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutsches Elektronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, Platanenallee 6, 15738 Zeuthen, Germany.


From zsh-workers-return-8709-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Nov 22 03:51:37 1999
Return-Path: <zsh-workers-return-8709-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18723 invoked from network); 22 Nov 1999 03:51:35 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Nov 1999 03:51:35 -0000
Received: (qmail 26790 invoked by alias); 22 Nov 1999 03:51:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8709
Received: (qmail 26783 invoked from network); 22 Nov 1999 03:51:25 -0000
To: "Zsh Hacker's List" <zsh-workers@sunsite.auc.dk>
Subject: Re: 3.1.6-pws-9 available, I hope
References: <38388B85.6644A0DA@supanet.com>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 22 Nov 1999 12:51:19 +0900
In-Reply-To: Peter Stephenson's message of "Mon, 22 Nov 1999 00:17:09 +0000"
Message-ID: <rsqwvrbuqtk.fsf@crane.jaist.ac.jp>
Lines: 183
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <38388B85.6644A0DA@supanet.com>,
  Peter Stephenson <pws@supanet.com> writes:

> This will be a test of the new setup; seemed to go all right, but
> I'm accessing the net via Pictures for the time being --- hope to fix
> that in days rather than weeks.  This also means I haven't compared
> with the CVS archive, which I shall try to do in future --- and I
> shall also be more explicit about alternative patches included,
> updated configuration files, etc., so that that can be kept in sync.

I imported pws-9 and compared to last revision patched from bart-8.

This is summary of `cvs diff -r zsh-workers_8702 -r zsh-3_1_6-pws-9'.

| Index: ChangeLog

ChangeLog is updated.  Great.

| Index: configure.in
| ===================================================================
| RCS file: /projects/zsh/zsh/configure.in,v
| retrieving revision 1.1.1.39
| retrieving revision 1.1.1.40
| diff -u -r1.1.1.39 -r1.1.1.40
| --- configure.in	1999/11/05 16:30:35	1.1.1.39
| +++ configure.in	1999/11/22 01:05:47	1.1.1.40
| @@ -1241,7 +1241,7 @@
|  dnl if found tcsetpgrp, test to see if it actually works
|  dnl for instance, BeOS R4.51 does not support it yet
|  dnl -----------
| -if test -t 0 -a $ac_cv_func_tcsetpgrp=yes; then
| +if test $ac_cv_func_tcsetpgrp=yes; then
|      AC_CACHE_CHECK(if tcsetpgrp() actually works,
|      zsh_cv_sys_tcsetpgrp,
|      [AC_TRY_RUN([

8501 is missed.

| Index: Completion/Builtins/_vars
| ===================================================================
| RCS file: /projects/zsh/zsh/Completion/Builtins/_vars,v
| retrieving revision 1.1.1.2
| retrieving revision 1.1.1.3
| diff -u -r1.1.1.2 -r1.1.1.3
| --- Completion/Builtins/_vars	1999/11/15 12:01:48	1.1.1.2
| +++ Completion/Builtins/_vars	1999/11/22 01:05:48	1.1.1.3
| @@ -22,3 +22,5 @@
|  else
|    _tags parameters && _parameters
|  fi
| +
| +

Two additional empty lines.  No problem.

| Index: Completion/Core/compinit
| ===================================================================
| RCS file: /projects/zsh/zsh/Completion/Core/compinit,v
| retrieving revision 1.1.1.37
| retrieving revision 1.1.1.38
| diff -u -r1.1.1.37 -r1.1.1.38
| --- Completion/Core/compinit	1999/11/18 10:05:45	1.1.1.37
| +++ Completion/Core/compinit	1999/11/22 01:05:50	1.1.1.38
| @@ -106,7 +106,7 @@
|  
|  # Loading it now ensures that the `funcstack' parameter is always correct.
|  
| -zmodload -i parameter
| +: $funcstack
|  
|  # This function is used to register or delete completion functions. For
|  # registering completion functions, it is invoked with the name of the

I missed 8512.

| Index: Completion/User/_make
| ===================================================================
| RCS file: /projects/zsh/zsh/Completion/User/_make,v
| retrieving revision 1.1.1.15
| retrieving revision 1.1.1.16
| diff -u -r1.1.1.15 -r1.1.1.16
| --- Completion/User/_make	1999/11/15 12:01:49	1.1.1.15
| +++ Completion/User/_make	1999/11/22 01:05:51	1.1.1.16
| @@ -18,11 +18,11 @@
|      file=''
|    fi
|  
| -  [[ -n "$file" ]] && _wanted targets expl 'make target' &&
| -      compadd "$expl[@]" - \
| -          $(awk '/^[a-zA-Z0-9][^\/ \t]+:/ {print $1}
| -	         /^\.include  *<bsd\.port\.(subdir\.|pre\.)?mk>/ || /^\.include  *".*mk\/bsd\.pkg\.(subdir\.)?mk"/ {
| -	           print "fetch fetch-list extract patch configure build install reinstall deinstall package describe checkpatch checksum makesum" }' \
| -	        FS=: $file) && ret=0
| +   [[ -n "$file" ]] && _wanted targets expl 'make target' &&
| +       compadd "$expl[@]" - \
| +           $(awk '/^[a-zA-Z0-9][^\/ \t]+:/ {print $1}
| + 	         /^\.include  *<bsd\.port\.(subdir\.|pre\.)?mk>/ || /^\.include  *".*mk\/bsd\.pkg\.(subdir\.)?mk"/ {
| + 	           print "fetch fetch-list extract patch configure build install reinstall deinstall package describe checkpatch checksum makesum" }' \
| + 	        FS=: $file) && ret=0
|    (( ret )) && { compset -P 1 '*\='; _files }
|  fi

Indent changes.  No problem.

| Index: Config/version.mk

VERSION and VERSION_DATE is updated.

| Index: Doc/Zsh/compsys.yo
| ===================================================================
| RCS file: /projects/zsh/zsh/Doc/Zsh/compsys.yo,v
| retrieving revision 1.1.1.77
| retrieving revision 1.1.1.78
| diff -u -r1.1.1.77 -r1.1.1.78
| --- Doc/Zsh/compsys.yo	1999/11/19 10:19:14	1.1.1.77
| +++ Doc/Zsh/compsys.yo	1999/11/22 01:05:54	1.1.1.78
| @@ -2027,6 +2027,12 @@
|  taken as the name of an array and its elements will be given to
|  functions called to generate matches when executing the
|  var(actions). For example, this allows one to give options for the
| +tt(compadd) builtin that should be used.
| +
| +Another option supported is `tt(-O) var(name)'. The var(name) will be
| +taken as the name of an array and its elements will be given to
| +functions called to generate matches when executing the
| +var(actions). For example, this allows one to give options for the
|  tt(compadd) builtin that should be used for all var(action)s.
|  
|  Also, the tt(-M) option followed by a string may be given before the

The paragraph is doubled.

| Index: Src/builtin.c
| ===================================================================
| RCS file: /projects/zsh/zsh/Src/builtin.c,v
| retrieving revision 1.1.1.36
| retrieving revision 1.1.1.37
| diff -u -r1.1.1.36 -r1.1.1.37
| --- Src/builtin.c	1999/11/19 09:18:25	1.1.1.36
| +++ Src/builtin.c	1999/11/22 01:05:59	1.1.1.37
| @@ -3212,7 +3212,6 @@
|  	if (isset(MONITOR)) {
|  	    /* send SIGHUP to any jobs left running  */
|  	    killrunjobs(from_signal);
| -	    errflag = 0;
|  	}
|  	if (isset(RCS) && interact) {
|  	    if (!nohistsave)

Hm.  Why?  8607?

| Index: Src/math.c
| ===================================================================
| RCS file: /projects/zsh/zsh/Src/math.c,v
| retrieving revision 1.1.1.21
| retrieving revision 1.1.1.22
| diff -u -r1.1.1.21 -r1.1.1.22
| --- Src/math.c	1999/11/21 03:35:38	1.1.1.21
| +++ Src/math.c	1999/11/22 01:06:01	1.1.1.22
| @@ -188,8 +188,8 @@
|      char *prev_locale;
|  #endif
|      int cct = 0;
| -
|      yyval.type = MN_INTEGER;
| +
|      for (;; cct = 0)
|  	switch (*ptr++) {
|  	case '+':
| @@ -367,7 +367,7 @@
|  #ifdef USE_LOCALE
|  		    setlocale(LC_NUMERIC, prev_locale);
|  #endif
| -		    if (ptr == nptr || *nptr == '.') {
| +		    if (ptr == nptr || *nptr == '.' ) {
|  			zerr("bad floating point constant", NULL, 0);
|  			return EOI;
|  		    }
| 

White space changes.  No problem.
-- 
Tanaka Akira


From zsh-workers-return-7108-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 13 10:37:49 1999
Return-Path: <zsh-workers-return-7108-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16752 invoked from network); 13 Jul 1999 10:37:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Jul 1999 10:37:47 -0000
Received: (qmail 14520 invoked by alias); 13 Jul 1999 10:37:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7108
Received: (qmail 14513 invoked from network); 13 Jul 1999 10:37:40 -0000
Date: Tue, 13 Jul 1999 12:37:34 +0200 (MET DST)
Message-Id: <199907131037.MAA24749@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: some more job-control-tests


These are collected from some of the mails.

Peter: the file contains the sed-loop from 7056 which didn't work for
you -- could you reproduce the failure?

Bye
 Sven

--- Misc/job-control-tests.old	Tue Jul 13 12:35:30 1999
+++ Misc/job-control-tests	Tue Jul 13 12:00:13 1999
@@ -29,3 +29,48 @@
 # ignoring the error messages from sed.
 # ^Z is more of a problem since you have to catch the sed.
 while true; do sed -e 's/foo/bar/' non-existent-file >/dev/null; done
+
+# Try
+#   ^Z
+#   fg
+#   ^Z
+#   fg
+fn() {
+  local a
+  while read a; do :; done
+  less "$@"
+}
+cat foo | fn bar
+
+# Try
+#   ^Z
+#   fg
+fn() {
+  cat builtin.c
+}
+fn | while read a; do :; done
+
+# Try
+#   ^Z
+#   fg
+#   q
+#   ^Z
+#   fg
+#   q
+fn() {
+  less builtin.c
+  echo done
+}
+x=2; while (( x-- )); do f; done
+
+# Try
+#   ^C
+# This won't work because zcat doesn't tell us that it received a signal.
+# But
+#   ^Z
+#   fg
+#   ^C (probably a second ^C is needed: if the continued zcat is still running)
+# works.
+# (See also the file Etc/BUGS)
+while true; do zcat foo.gz > /dev/null; done
+

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-6820-mason-zsh=primenet.com.au@sunsite.dk Mon Dec 01 01:06:24 2003
Return-Path: <zsh-users-return-6820-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29782 invoked from network); 1 Dec 2003 01:06:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 Dec 2003 01:06:23 -0000
Received: (qmail 27833 invoked by alias); 1 Dec 2003 01:06:09 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6820
Received: (qmail 27729 invoked from network); 1 Dec 2003 01:06:08 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 1 Dec 2003 01:06:08 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [219.55.112.42] by sunsite.dk (MessageWall 1.0.8) with SMTP; 1 Dec 2003 1:6:8 -0000
Received: from smile.house (localhost.house [127.0.0.1])
	by smile.house (Postfix) with ESMTP
	id 6A5DACC239; Mon,  1 Dec 2003 10:06:06 +0900 (JST)
Date: Mon, 01 Dec 2003 10:06:06 +0900
Message-ID: <m365h173ep.wl%petersen@redhat.com>
From: Jens Petersen <petersen@redhat.com>
To: Philippe Troin <phil@fifi.org>
Cc: Zsh-users <zsh-users@sunsite.dk>
Subject: Re: problem building zsh in background
In-Reply-To: <87zneewgvd.fsf@ceramic.fifi.org>
References: <m3d6bgq2tk.wl%petersen@redhat.com>
	<87d6bgrxml.fsf@ceramic.fifi.org>
	<m3vfp7o6c8.wl%petersen@redhat.com>
	<877k1ngcp5.fsf@ceramic.fifi.org>
	<m365h68uk6.wl%petersen@redhat.com>
	<m3y8u26r3t.wl%petersen@redhat.com>
	<87zneewgvd.fsf@ceramic.fifi.org>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.4 (Hosorogi) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 14) (Reasonable Discussion) (i386-redhat-linux)
X-Face: 64N,SZ}bM~X-HZK0w(B)t]7rZ}7_bNq^}A%e7_;~lN3nVJ,50%>pW7y^=\\sy2w\"7?cu}g@t#JRW\\4kvSY8i%OMorx`_I]/5+~db.s\\H!)|YE.y#-sFk#]iYRU/w+({~_l-c1uS)s<KHR^vv$2e{OV6K~1S@^g4GxF`R@0HbB_/Y,0^cEHEFSR0iwdyXwJ,c[7a^2$A_5.x:7C5)^O[,w\\Ayq2foSPJ)BPKz2C2V95sQ!`8Zn+?Su(@Ht}>%;72$Nmv>U)ZeyLBdF#c-i.ECMy9>twG+9Ln$<vWho^=@SrMU6w
MIME-Version: 1.0 (generated by SEMI 1.14.4 - "Hosorogi")
Content-Type: text/plain; charset=US-ASCII

>>>>> "PT" == Philippe Troin <phil@fifi.org> writes:

    PT> Jens Petersen <petersen@redhat.com> writes:
    >> but with the second patch (msg00896.html) when there
    >> is no tty I see:
    >>
    >> : checking if kill(pid, 0) returns ESRCH
    >> correctly... yes checking if POSIX sigsuspend()
    >> works... yes checking if tcsetpgrp() actually
    >> works... notty configure: error: no controlling tty

    PT> The first patch fails to detect if configure runs
    PT> without a controlling tty, does not run the test and
    PT> assumes that tcsetpgrp() works correctly.

    PT> The second patch aborts the configure run in that
    PT> case.

Ok. :)

    PT> The first patch was a work in progress, the second
    PT> patch is supposed to be an improvement :-)

    PT> Why do you want to run configure with nohup?

Building with the second patch fails in our buildsystem. ;-)

    PT> I guess I could run the test in a separate, created
    PT> pty, but that is going to be messy to do portably in
    PT> configure.

I don't know which platform this test benefits, but
presumably with modern glibc it works ok.  Perhaps the test
could be skipped except on affected platforms?

Jens


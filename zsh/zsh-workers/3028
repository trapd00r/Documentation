From zsh-workers-request@euclid.skiles.gatech.edu Tue Mar 25 23:10:38 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 14592 invoked from network); 25 Mar 1997 23:10:37 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 25 Mar 1997 23:10:36 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA03202; Tue, 25 Mar 1997 17:55:38 -0500 (EST)
Resent-Date: Tue, 25 Mar 1997 17:55:38 -0500 (EST)
Date: Mon, 24 Mar 1997 18:51:49 GMT
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <28101.199703241851@stone.dcs.warwick.ac.uk>
Subject: module names
X-Patch: 226
Resent-Message-ID: <"20uMP2.0.nn.dV5Ep"@euclid>
To: zsh-workers@math.gatech.edu
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3028
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

In one of the early versions of the module code, all the boot/cleanup
functions had fixed names, so that a single module could be linked
under several names and loaded as any of them.  However, some systems
apparently couldn't cope with the symbol name clash.  This patch adds
the capability back, but with an autoconf test to see if the differing
names must be used.

Unlike the earlier versions, in this patch the code defining boot/cleanup
functions must know the canonical name of the module.  In practice
this has not been a problem.  The layout of the function headers looks
a little odd, but it avoids problems with makepro.sed, and keeps the
function name starting in column 1.

 -zefram

begin 644 nameclash_patch.gz
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
*YG]AX4&V@3@`````
`
end

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia
Charset: ascii

iQCVAwUBMzS6u3D/+HJTpU/hAQEU0gQAlk64oqZZaRonYHwO7VGvZqe2zDEv6dtK
tLxLCngottRqu6BmLgnqLZ98CHC9nbWX0W4Mc3e+AHGxOMSV5Q2fODuZNbsfkA1M
F0tJf1LQYzs/uz1uJEkuCbdvSxd2Bzuv3sw+1JONtNq/3OOwthS+7yiuQqc21nMU
km7R7cSrW38=
=Jv46
-----END PGP SIGNATURE-----


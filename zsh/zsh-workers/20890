From zsh-workers-return-20890-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 28 14:45:12 2005
Return-Path: <zsh-workers-return-20890-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6096 invoked from network); 28 Feb 2005 14:45:11 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Feb 2005 14:45:11 -0000
Received: (qmail 46628 invoked from network); 28 Feb 2005 14:45:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Feb 2005 14:45:04 -0000
Received: (qmail 22709 invoked by alias); 28 Feb 2005 14:44:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20890
Received: (qmail 22668 invoked from network); 28 Feb 2005 14:44:40 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Feb 2005 14:44:40 -0000
Received: (qmail 44180 invoked from network); 28 Feb 2005 14:44:40 -0000
Received: from morda.newmail.ru (HELO flock1.newmail.ru) (212.48.140.150)
  by a.mx.sunsite.dk with SMTP; 28 Feb 2005 14:44:32 -0000
Received: (qmail 21252 invoked by alias); 28 Feb 2005 14:29:04 -0000
Message-ID: <20050228142904.21251.qmail@flock1.newmail.ru>
From: Borzenkov Andrey <arvidjaar@newmail.ru>
To: <zsh-workers@sunsite.dk>
Subject: Re[2]: SIGTTOU old problem
X-Priority: 3
MIME-Version: 1.0
X-Mailer: DenMail v1.0 by ORC
X-Uid: 1148242
X-RemoteIP: 212.248.25.26 (unknown)
Date: Mon, 28 Feb 2005 17:29:03 +0300
In-Reply-To: <873bvgahbc.fsf@ceramic.fifi.org>
X-DWM-In-Reply-To: <1109600943.21233.denwebmail-34-INBOX@arvidjaar@newmail.ru>
Content-type: text/plain; charset="koi8-r"
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.2 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.2

Hello Philippe Troin 

Пн, 28.02.2005 18:29:43 you wrote:
PT> > -    trap "" SIGTTOU > /dev/null 2>&1 || :
PT> > +    ( trap "" SIGTTOU > /dev/null 2>&1 ) && trap "" SIGTTOU > /dev/null 2>&1 
PT> Why?  What does it buy?
PT> 

SUS specifies that trap is special builtin so error in "trap" should terminate non-interactive shell. On my system (and as Peter hinted probably everywhere else) trap SIGTTOU is invalid (trap TTOU is valid) so configure exits without any chance to see || :.

To the author of original check - please test if my patch works for you as intended and I commit it. Alternative is to change it into "trap "" TTOU" that is likely to be more portable.

-andrey

__________
www.newmail.ru -- узел свободных коммуникаций.


From zsh-workers-return-20564-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 18 16:40:32 2004
Return-Path: <zsh-workers-return-20564-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25158 invoked from network); 18 Nov 2004 16:40:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Nov 2004 16:40:31 -0000
Received: (qmail 52095 invoked from network); 18 Nov 2004 16:40:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Nov 2004 16:40:25 -0000
Received: (qmail 5061 invoked by alias); 18 Nov 2004 16:40:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20564
Received: (qmail 5047 invoked from network); 18 Nov 2004 16:40:10 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Nov 2004 16:40:10 -0000
Received: (qmail 50472 invoked from network); 18 Nov 2004 16:39:11 -0000
Received: from smtp-out6.blueyonder.co.uk (195.188.213.9)
  by a.mx.sunsite.dk with SMTP; 18 Nov 2004 16:39:10 -0000
Received: from sc ([82.41.208.120]) by smtp-out6.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 18 Nov 2004 16:39:38 +0000
Date: Thu, 18 Nov 2004 16:39:01 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: zsh-workers@sunsite.dk
Subject: Re: SUGGESTION: kill -l could show numbers, too (+CLD vs CHLD)
Message-ID: <20041118163901.GD4511@sc>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20041118145208.GD13232@gerf.org> <20310.1100793917@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20310.1100793917@csr.com>
User-Agent: Mutt/1.5.6i
X-OriginalArrivalTime: 18 Nov 2004 16:39:38.0717 (UTC) FILETIME=[320F68D0:01C4CD8D]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=RCVD_IN_SORBS,UPPERCASE_25_50 
	autolearn=no version=2.63
X-Spam-Hits: 1.5

On Thu, Nov 18, 2004 at 04:05:17PM +0000, Peter Stephenson wrote:
> Christian =?iso-8859-1?Q?H=F6ltje?= wrote:
> > I have a suggestion for the kill builtin:
> > 
> > It would be nice if when you did '-l' to show the list of signal
> > that it show the signal number.
> 
> Not quite as convenient, but try this function:
> 
> kill-l() {
>   for i in {1..$#signals}; do
>     print $((i-1))\) SIG$signals[$i]
>   done | pr -t5
> }
[...]

Or, to avoid "pr":

kill-l () {
        local -a s
        for i in {1..$#signals}
        do
                s[i]="$((i-1))) SIG$signals[$i]"
        done
        print -C5 $s
}

BTW, I noted some discrepancies on the result of kill -l between
various shells and /bin/kill on that Linux-i386:

bash    bin     csh     dash    ksh     pdksh   zsh     

ABRT    ABRT    ABRT    ABRT    IOT     ABRT    ABRT
        STKFLT  STKFLT  16      SIG16   STKFLT  STKFLT
CHLD    CHLD    CHLD    CHLD    CHLD    CHLD    CLD
IO      POLL    POLL    IO      POLL    IO      POLL
SYS     SYS     SYS     SYS     SYS     UNUSED  SYS


Why SIGCLD and not SIGCHLD for zsh?

SUSv3 (POSIX) seems to require SIGCHLD
http://www.opengroup.org/onlinepubs/009695399/basedefs/signal.h.html
http://www.opengroup.org/onlinepubs/009695399/utilities/trap.html

-- 
Stéphane


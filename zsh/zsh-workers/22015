From zsh-workers-return-22015-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 24 06:01:13 2005
Return-Path: <zsh-workers-return-22015-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16433 invoked from network); 24 Nov 2005 06:01:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Nov 2005 06:01:12 -0000
Received: (qmail 22427 invoked from network); 24 Nov 2005 06:01:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Nov 2005 06:01:06 -0000
Received: (qmail 21671 invoked by alias); 24 Nov 2005 06:00:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22015
Received: (qmail 21662 invoked from network); 24 Nov 2005 06:00:58 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Nov 2005 06:00:58 -0000
Received: (qmail 21826 invoked from network); 24 Nov 2005 06:00:58 -0000
Received: from vms040pub.verizon.net (206.46.252.40)
  by a.mx.sunsite.dk with SMTP; 24 Nov 2005 06:00:57 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms040.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-4.02 (built Sep  9 2005))
 with ESMTPA id <0IQG000XG3DJ9G45@vms040.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 24 Nov 2005 00:00:56 -0600 (CST)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id jAO60snt029997	for
 <zsh-workers@sunsite.dk>; Wed, 23 Nov 2005 22:00:54 -0800
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id jAO60sxK029996	for zsh-workers@sunsite.dk; Wed,
 23 Nov 2005 22:00:54 -0800
Date: Thu, 24 Nov 2005 06:00:54 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: PATCH: newuser system
In-reply-to: <200511231113.jANBD95L013878@news01.csr.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Message-id: <1051124060054.ZM29995@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <200511231113.jANBD95L013878@news01.csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
 "PATCH: newuser system" (Nov 23, 11:13am)

On Nov 23, 11:13am, Peter Stephenson wrote:
}
} Here's a first pass.

This is an impressive piece of work.

} As this will be seen by a great many new users it
} really needs to be tested as widely as possible.

Am I wrong in thinking this could be tested by starting the shell with
ZDOTDIR in the environment pointing to an empty directory?

} It's designed to be running assuming .zshrc doesn't initially exist and
} doesn't assume (nor probe) any other shell settings.

Presuming that Clint will do something sensible for Debian, we should find
people to check a few other standard OS distributions (FreeBSD, NetBSD,
RedHat Linux, perhaps Solaris, etc.) to see if their standard new-user
skeletons might already include a .zshrc.  I don't recall having seen any
but I'm not exposed to as many OS variants as I used to be.

Misc. stuff:

} Index: INSTALL
} +"name=zsh/newuser" int the config.modules file, which is generated in the
                       ^^
(I didn't proofread the rest so closely, I fear.)

} +# Substitute an initial ~ for human consumption.
} +if [[ $zd = $HOME ]]; then
} +  zdmsg="~"
} +else
} +  zdmsg=$zd
} +fi

  zdmsg=${(%):-%~}

(How's *that* for obfuscation?)

Regarding keymaps ... it might be helpful if the explanatory text were
to recommend choosing the emacs keymap, as that's the one assumed by
most of the completion system initialization and the one most similar
to other line editors (e.g. bash/readline).


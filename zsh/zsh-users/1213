From zsh-workers-request@math.gatech.edu Fri Jan 02 02:31:05 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 2944 invoked from network); 2 Jan 1998 02:31:03 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 2 Jan 1998 02:31:03 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id VAA18044;
	Thu, 1 Jan 1998 21:11:52 -0500 (EST)
Resent-Date: Thu, 1 Jan 1998 21:11:23 -0500 (EST)
Message-ID: <19980102021236.14138@thelonious.new.ox.ac.uk>
Date: Fri, 2 Jan 1998 02:12:36 +0000
From: Adam Spiers <adam@thelonious.new.ox.ac.uk>
To: zsh users mailing list <zsh-users@math.gatech.edu>
Subject: Equivalent of tcsh dabbrev-expand?
Reply-To: Adam Spiers <adam.spiers@new.ox.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.84
Resent-Message-ID: <"zzFKr2.0.QP4.Ap4hq"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1213
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I've been meaning to switch from tcsh to zsh for a while now, as
zsh is clearly vastly superior.  However, one thing has put me
off, and that is the apparent lack of a key command which is the
equivalent of tcsh's dabbrev-expand.  For those who don't know,
dabbrev-expand is a method of completion which works by looking
backwords through the history to find a matching word, and I
believe may have originated from emacs' Lisp function of the
same name (by default both tcsh and emacs bind M-/ to it).

I realise that compctl provides the -H switch for searching
through history, but I find it extremely useful to have the
dabbrev-expand functionality bound to a separate key so that I
can choose whether I want to complete a word from the history or
according to the compctl settings.  Not only would having this
choice be useful in itself, but it would also eliminate the
problem of having history and other completions merged into the
same list of possible completions; this is currently a problem
with zsh because if you use the -H switch in order to be able to
complete from history and then on a particular occasion wish to
complete using file names, you can't get a list solely of
available files through list-choices or AUTO_LIST or whatever.

I did extensive searches through script archives, FAQs, mailing
list archives etc. but couldn't find any mention of anyone else
who's wanted to do this or even succeeded.  At first I thought
it would be possible to write a function which temporarily makes
all commands complete using history only, and then bind that to
the M-/ keypress, but I've just discovered that being able to
bind keypresses to functions is still on the wishlist :-(

So, could anyone tell me if there's another way of doing it that
I've missed, or if it would be particularly hard to write a
patch for the source which introduces the function?  Should I
join the zsh-workers list and mention it there?

Many thanks in advance!

--
Adam Spiers, Computing Officer, New College, Oxford University, UK **
cello/modern jazz/juggling/cycling/Perl/Linux/Quake fanatic, M$ hater


From zsh-workers-request@euclid.skiles.gatech.edu Wed Mar 05 22:06:21 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 7195 invoked from network); 5 Mar 1997 22:06:19 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 5 Mar 1997 22:06:19 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA03486; Wed, 5 Mar 1997 16:48:39 -0500 (EST)
Resent-Date: Wed, 5 Mar 1997 16:48:39 -0500 (EST)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <970305135559.ZM7056@candle.brasslantern.com>
Date: Wed, 5 Mar 1997 13:55:59 -0800
In-Reply-To: <hzoli@VNET.IBM.COM> (Zoltan T. Hidvegi)
        "Re: zle_refresh patch 2" (Mar  5,  3:56pm)
References: <9703052056.AA20981@lotto.fishkill.ibm.com>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: <hzoli@VNET.IBM.COM> (Zoltan T. Hidvegi)
Subject: Re: zle_refresh patch 2
Cc: gwing@primenet.com.au, zsh-workers@math.gatech.edu
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"-hxZ81.0.Ps.seU7p"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2955
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Mar 5,  3:56pm,  (Zoltan T. Hidvegi) wrote:
} Subject: Re: zle_refresh patch 2
}
} Bart Schaefer wrote:
} > On Feb 3,  9:55pm, gwing@primenet.com.au wrote:
} > } Subject: zle_refresh patch 2
} > }
} > } It fixes coredumps and bad displays when terms are 1 or 2 lines.
} > } When a terminal is 1 or 2 lines high, the terminal will act as if
} > } SINGLE_LINE_ZLE is set.  This avoids many problems with the status line.
} >
} > There's already code that causes SINGLE_LINE_ZLE to become set if the
} > terminal starts out at, or is shrunk to, 1 line high or 1 column wide.
} 
} I'm not exactly sure that it is a good idea to explicitely set
} SINGLELINEZLE when the terminal shrinks to one or two lines.

Yes; I already agreed about that in response to a posting from Geoff on
Feb. 3.  The code is as it is now (and I changed it as I did in that
patch) because I didn't know about the meaning of "termok".  It would
be possible to replace all the fudging of SINGLELINEZLE and ZLE with
changes to "termok" -- at least, I think that's what PWS said at some
point.

} An other problem with Geoff's patch (whics is not a new problem, just this
} patch brought it up.  tsetcap only works in multiline mode, as it simply
} assumes that in single line mode termcap escapes are not available.  This
} means that some prompt escapes do not work in single line mode, which is
} especially annoying in print -P commands.  There should be a separate flag

I think "termok" is the right thing for that, too, but Peter or Geoff
should confirm.

} I'd really like to release zsh-3.0.3 ASAP, but these problems should be
} solved first.

I believe Geoff also said that there were some changes he needed to make
for very narrow terminals as well as very short ones.  Geoff?

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern


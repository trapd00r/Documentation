From zsh-workers-return-10957-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 27 07:18:20 2000
Return-Path: <zsh-workers-return-10957-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14130 invoked from network); 27 Apr 2000 07:18:18 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Apr 2000 07:18:18 -0000
Received: (qmail 20080 invoked by alias); 27 Apr 2000 07:18:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10957
Received: (qmail 20072 invoked from network); 27 Apr 2000 07:18:09 -0000
Date: Thu, 27 Apr 2000 09:18:08 +0200 (MET DST)
Message-Id: <200004270718.JAA11049@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Adam Spiers's message of Wed, 26 Apr 2000 18:49:05 +0100
Subject: Re: PATCH: bugfixes for _rpm and _hash


Adam Spiers wrote:

> Adam Spiers (adam@spiers.net) wrote:
> > Bart Schaefer (schaefer@candle.brasslantern.com) wrote:
> > > Take that "$expl[@]" out of there, you don't need it and it's ultimately
> > > causing an empty string as an argument to _files.
> > 
> > Ahah.  In that case is _hash wrong?  It has
> > 
> >   _wanted -C value values expl 'executable file' _files "$expl[@]" -g '*(-*)'
> > 
> > which seems to exhibit the same problem.
> 
> As soon as someone confirms this, I'll apply this patch, which makes
> things work as expected.

I don't know rpm, so I can only talk about the other stuff.

It is ok, but you don't need to use _wanted for _files if you don't
need to change the context (i.e. if you don't need to give the -C
option to _wanted as _hash does). _files is one of the functions that
does everything you need (like the other type-of-matches functions,
e.b. _pids, _options and so on).

About the $expl[@] stuff... sorry for that, I think I should take the
time to look at all the completion functions again to see if such bugs 
are somewhere else, too. Sigh.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


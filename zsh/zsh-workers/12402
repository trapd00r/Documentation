From zsh-workers-return-12402-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 27 09:14:14 2000
Return-Path: <zsh-workers-return-12402-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10645 invoked from network); 27 Jul 2000 09:14:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Jul 2000 09:14:13 -0000
Received: (qmail 17751 invoked by alias); 27 Jul 2000 09:13:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12402
Received: (qmail 17722 invoked from network); 27 Jul 2000 09:13:49 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>,
   "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: RE: Anybody objects to the following change in createparamtable()?
Date: Thu, 27 Jul 2000 13:13:21 +0400
Message-ID: <000501bff7aa$e912d610$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-reply-to: <1000727085054.ZM32014@candle.brasslantern.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal

> } ššif ((!(pm = (Param) paramtab->getnode(paramtab, iname)) ||
>
> Where'd those '\232' characters come from?  Please don't let any of those
> creep into the actual source code ...
>

Copy'n'paste out of Motif GVim under Exceed ... ough :-) There is something
fishy with Vim; I noted it already but am too lazy to look into ...

> [schaefer@candle]$ zsh-3.1.9-dev-3 -f
> zagzig% echo $ZSH_VERSION $FOO
> 3.1.9-dev-3 BAR=BAZ                            <-- Last appears to win but
> zagzig% printenv | grep FOO
> FOO=FOO                                        <-- does not match environ!

Yes, I know. Call to setsparam() finally calls replenv() that searches old
environment, finds nothing and does nothing. So, newly built env table gets
the first value found, but parameter itself the last one.

>
> This all depends on your definition of "safe" ...
>

I just meant, that it won't prevent importing value of some parameter already
exported by Zsh on it's own.

-andrej


From zsh-workers-return-5438-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Feb 20 15:17:30 1999
Return-Path: <zsh-workers-return-5438-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17531 invoked from network); 20 Feb 1999 15:17:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Feb 1999 15:17:29 -0000
Received: (qmail 23730 invoked by alias); 20 Feb 1999 15:17:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5438
Received: (qmail 19505 invoked from network); 20 Feb 1999 12:32:04 -0000
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <14030.43817.482637.21623@mulelab.etl.go.jp>
Date: Sat, 20 Feb 1999 21:31:37 +0900 (JST)
From: Martin Buchholz <martin@xemacs.org>
To: zsh-workers@math.gatech.edu
Subject: Bug report:  PWD environment variable broken!
X-Mailer: VM 6.62 under 21.0 "Pyrenean63" XEmacs Lucid (beta63)

On some platforms, the PWD environment variable is not being properly
updated after a cd.  This is the environment variable, not the
internal PWD variable.

Here is some output on a variety of systems for this command sequence:

uname -a; echo $ZSH_VERSION; cd ~/x/build;  env | grep PWD | grep -v OLDPWD

Conclusions:  3.1 Seems to be broken on Linux and BSDI.  A serious bug.

I tried to downgrade to 3.0.5.

3.0.5 on BSDI coredumps on invocation. 

On Linux 3.0.5 failed to build:

gcc -c -I.. -I. -I.  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2 builtin.c
builtin.c:4279: macro `dup' used with just one arg

:-(

It's sad to see my favorite shell so buggy!

-------------- etlindy11 ----------------
IRIX etlindy11 6.2 03131015 IP22
3.1.5
PWD=/usr/users/martin/x/build
-------------- etlsui2  ----------------
HP-UX etlsui2 B.10.20 A 9000/780 2004436110 two-user license
3.1.5
PWD=/usr/users/martin/x/build
-------------- mongkok  ----------------
Linux mongkok 2.0.34 #5 Tue Feb 16 17:22:05 JST 1999 i586 unknown
3.1.2-debian
PWD=/usr/users/martin
-------------- mule     ----------------
SunOS mule 4.1.4 2 sun4m
3.1.5
PWD=/usr/users/martin/x/build
-------------- etlken   ----------------
SunOS etlken 5.6 Generic_105181-08 sun4u sparc SUNW,Ultra-2
3.1.5
PWD=/usr/users/martin/x/build
-------------- gneiss   ----------------
OSF1 gneiss.etl.go.jp V4.0 1091 alpha
3.1.5
PWD=/usr/users/martin/x/build
-------------- yuenlong ----------------
export DISPLAY=mulelab:0.0
uname -a; echo $ZSH_VERSION; cd ~/x/build;  env | grep PWD
FreeBSD yuenlong.etl.go.jp 2.2.8-RELEASE FreeBSD 2.2.8-RELEASE #0: Mon Nov 30 06:34:08 GMT 1998     jkh@time.cdrom.com:/usr/src/sys/compile/GENERIC  i386
3.0.5
PWD=/usr/users/martin/x/build
-------------- kowloon  ----------------
export DISPLAY=mulelab:0.0
uname -a; echo $ZSH_VERSION; cd ~/x/build;  env | grep PWD
BSD/OS kowloon.etl.go.jp 4.0 BSDI BSD/OS 4.0 Kernel #0: Tue Jul 28 15:56:54 MDT 1998     polk@demiurge.BSDI.COM:/rel/proto/4.0-i386/usr/src/sys/compile/GENERIC  i386
3.1.5
PWD=/usr/home/martin
-------------- mulelab  ----------------
SunOS mulelab 5.5.1 Generic_103640-05 sun4u sparc SUNW,Ultra-2
3.1.5
PWD=/usr/users/martin/x/build


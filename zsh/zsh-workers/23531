From zsh-workers-return-23531-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 06 15:50:18 2007
Return-Path: <zsh-workers-return-23531-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22078 invoked from network); 6 Jun 2007 15:50:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=no
	version=3.2.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Jun 2007 15:50:16 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 59385 invoked from network); 6 Jun 2007 15:50:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Jun 2007 15:50:10 -0000
Received: (qmail 23214 invoked by alias); 6 Jun 2007 15:50:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23531
Received: (qmail 23204 invoked from network); 6 Jun 2007 15:50:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Jun 2007 15:50:07 -0000
Received: (qmail 59080 invoked from network); 6 Jun 2007 15:50:07 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 6 Jun 2007 15:50:03 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 13C1A5C284; Wed,  6 Jun 2007 11:49:56 -0400 (EDT)
Date: Wed, 6 Jun 2007 11:49:56 -0400
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.dk
Cc: Vincent Lefevre <vincent@vinc17.org>, 416970@bugs.debian.org
Subject: Re: Bug#416970: reverse-menu-complete crashes
Message-ID: <20070606154956.GB2381@scowler.net>
Mail-Followup-To: zsh-workers@sunsite.dk,
	Vincent Lefevre <vincent@vinc17.org>, 416970@bugs.debian.org
References: <20070331210751.GA10982@FroodyComp.localdomain> <20070401001520.GA19107@scowler.net> <389efefd0703311723kd2618a2k16087b84ce6a7eb3@mail.gmail.com> <20070401054949.GB26048@scowler.net> <20070606120142.GA20642@prunille.vinc17.org> <20070606140926.GA31426@scowler.net> <20070606152145.GE6414@prunille.vinc17.org> <20070606153247.GA1887@scowler.net> <20070606154305.GF6414@prunille.vinc17.org> <20070606154632.GB22795@prunille.vinc17.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20070606154632.GB22795@prunille.vinc17.org>
User-Agent: Mutt/1.5.13 (2006-08-11)

On Wed, Jun 06, 2007 at 05:46:32PM +0200, Vincent Lefevre wrote:
> This is quite simple in fact:
> 
> vin:~> zsh -f
> vin% bindkey '\e\t' reverse-menu-complete
> vin% aaa
> 
> At this time, I type Esc-Tab.
> 
> vin% aaazsh: segmentation fault (core dumped)  zsh -f
> vin:~[139]>

Now that I can reproduce.

Program received signal SIGSEGV, Segmentation fault.
0xb7b02c95 in reverse_menu (dummy=0xb7b36fc4, dummy2=0x0) at ../../../Src/Zle/compresult.c:1231
1231    ../../../Src/Zle/compresult.c: No such file or directory.
        in ../../../Src/Zle/compresult.c
(gdb) bt full
#0  0xb7b02c95 in reverse_menu (dummy=0xb7b36fc4, dummy2=0x0) at ../../../Src/Zle/compresult.c:1231
No locals.
#1  0xb7b2b93e in reversemenucomplete (args=0xb7b3725c) at ../../../Src/Zle/zle_tricky.c:357
No locals.
#2  0xb7b195e4 in execzlefunc (func=0xb7b34978, args=0xb7b3725c, set_bindk=0)
    at ../../../Src/Zle/zle_main.c:1261
        ret = <value optimized out>
        w = (Widget) 0xb7b36884
        save_bindk = (Thingy) 0xb7b34978
#3  0xb7b19b8a in zlecore () at ../../../Src/Zle/zle_main.c:1019
No locals.
#4  0xb7b1a1b7 in zleread (lp=0x80d5594, rp=0x0, flags=3, context=0) at ../../../Src/Zle/zle_main.c:1174
        s = <value optimized out>
        old_errno = 0
        initthingy = (Thingy) 0x0
#5  0x0807d586 in ingetc () at ../../Src/input.c:278
        flags = 0
        lastc = <value optimized out>
#6  0x08078dc7 in ihgetc () at ../../Src/hist.c:240
        c = <value optimized out>
#7  0x0808451e in gettok () at ../../Src/lex.c:630
        c = -1208868200
        d = 0
        peekfd = -1
        peek = <value optimized out>
#8  0x08084d4a in yylex () at ../../Src/lex.c:345
No locals.
#9  0x0809cc39 in parse_event () at ../../Src/parse.c:451
No locals.
#10 0x0807bfaa in loop (toplevel=1, justonce=0) at ../../Src/init.c:128
        prog = (Eprog) 0xb7f22298
#11 0x0807cc94 in zsh_main (argc=2, argv=0xbfc3d104) at ../../Src/init.c:1347
        arg0 = <value optimized out>
        t = <value optimized out>
        t0 = <value optimized out>
#12 0x08054822 in main (argc=1474660693, argv=0xce85356) at ../../Src/main.c:93
No locals.


From zsh-workers-return-14150-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 28 09:12:08 2001
Return-Path: <zsh-workers-return-14150-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11989 invoked from network); 28 Apr 2001 09:12:07 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Apr 2001 09:12:07 -0000
Received: (qmail 26468 invoked by alias); 28 Apr 2001 09:12:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14150
Received: (qmail 26456 invoked from network); 28 Apr 2001 09:12:02 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <zsh-workers@sunsite.auc.dk>
Subject: RE: zsh segfaults on $(( [#2] 0xDEADBEEF ))
Date: Sat, 28 Apr 2001 13:11:54 +0400
Message-ID: <000601c0cfc3$4505bc30$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <20010428181541.A5537@exodus>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal

>     18:00 ~% echo $(( [#2] 0xDEADBEEF ))
>     zsh: 6139 segmentation fault  zsh

Confirmed after long pause;

bor@itsrm2% echo $(( [#2] 0xDEADBEEF ))
zsh: segmentation fault (core dumped)  zsh
bor@itsrm2% dbx =zsh core
dbx V2.4C00 SINIX (Jun 19 2000)
Copyright (C) Siemens AG 1998
Base:   BSD, Copyright (C) The Regents of the University of California
All rights reserved
reading symbolic information ...
Current signal in memory image is: SIGSEGV (11) (address not mapped to object,
faulting address = 0x31303131)
needed shared libraries:
        /tools/lib/zsh/4.0.1-pre-3/zsh/parameter.so
        /tools/lib/zsh/4.0.1-pre-3/zsh/zutil.so
        /tools/lib/zsh/4.0.1-pre-3/zsh/complist.so
        /tools/lib/zsh/4.0.1-pre-3/zsh/complete.so
        /tools/lib/zsh/4.0.1-pre-3/zsh/zle.so
        /usr/lib/libc.so.1
        /lib/libnsl.so
        /lib/libdl.so
        /lib/libsocket.so
... reading /tools/lib/zsh/4.0.1-pre-3/zsh/parameter.so
... reading /tools/lib/zsh/4.0.1-pre-3/zsh/zutil.so
... reading /tools/lib/zsh/4.0.1-pre-3/zsh/complist.so
... reading /tools/lib/zsh/4.0.1-pre-3/zsh/complete.so
... reading /tools/lib/zsh/4.0.1-pre-3/zsh/zle.so
... reading /usr/lib/libc.so.1
... reading /lib/libnsl.so
... reading /lib/libdl.so
... reading /lib/libsocket.so
[using memory image in core]
32bit dbx - 32bit program
Type 'help' for help
(dbx32) where
arithsubst(a = "illegal address (0x31310023)
, bptr = 0x7ffee760, rest = ""), line 2012 in "/tools/src/zsh/Src/subst.c"
$b13, line 163 in "/tools/src/zsh/Src/subst.c"
$b12, line 163 in "/tools/src/zsh/Src/subst.c"
stringsubst(list = 0x7893f8, node = 0x78940c, ssub = 0), line 163 in
"/tools/src/zsh/Src/subst.c"
$b1, line 73 in "/tools/src/zsh/Src/subst.c"
prefork(list = 0x7893f8, flags = 0), line 73 in "/tools/src/zsh/Src/subst.c"
execcmd(state = 0x7ffeeca4, input = 0, output = 0, how = 18, last1 = 2), line
1742 in "/tools/src/zsh/Src/exec.c"
execpline2(state = 0x7ffeeca4, pcode = 131, how = 18, input = 0, output = 0,
last1 = 0), line 1189 in "/tools/src/zsh/Src/exec.c"
execpline(state = 0x7ffeeca4, slcode = 4098, how = 18, last1 = 0), line 982 in
"/tools/src/zsh/Src/exec.c"
execlist(state = 0x7ffeeca4, dont_change_job = 0, exiting = 0), line 826 in
"/tools/src/zsh/Src/exec.c"
execode(p = 0x7893a0, dont_change_job = 0, exiting = 0), line 729 in
"/tools/src/zsh/Src/exec.c"
$b210, line 160 in "/tools/src/zsh/Src/init.c"
.init.loop(toplevel = 1, justonce = 0), line 160 in
"/tools/src/zsh/Src/init.c"
zsh_main(argc = 1, argv = 0x7ffeeddc), line 1209 in
"/tools/src/zsh/Src/init.c"
.main.main(argc = 1, argv = 0x7ffeeddc), line 37 in
"/tools/src/zsh/Src/main.c"
__start() at 0x40a124

>     18:00 ~%
>
> after a few more seconds of playing around (i am now friends
> with Esc A):
>
>     18:02 ~% echo $(( [#2] 0x1FFFFF ))
>     2#111111111111111111111
>     18:02 ~% echo $(( [#2] 0x200000 ))
>     zsh: 6192 segmentation fault  zsh
>

This one works here.

-andrej


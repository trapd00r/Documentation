From zsh-users-return-2302-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 14 11:36:39 1999
Return-Path: <zsh-users-return-2302-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25567 invoked from network); 14 Apr 1999 11:36:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Apr 1999 11:36:38 -0000
Received: (qmail 29930 invoked by alias); 14 Apr 1999 11:36:14 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2302
Received: (qmail 29923 invoked from network); 14 Apr 1999 11:36:13 -0000
Date: Wed, 14 Apr 1999 13:35:11 +0200
From: Vincent Lefevre <Vincent.Lefevre@ens-lyon.fr>
To: zsh-users@sunsite.auc.dk
Subject: probable problem with redirections and screen
Message-ID: <19990414133510.A18459@vin.ens-lyon.fr>
Mail-Followup-To: zsh-users@sunsite.auc.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95.4i
X-Mailer-Info: http://www.ens-lyon.fr/~vlefevre/mutt_eng.html

I start a perl script, say my_script, with the following command line:

  nice -2 zsh -c "./my_script 2>&1 2> secstep.out"

to redirect the error output to both the terminal and secstep.out.
When I did this in an rxvt, there was no problem. Now, I start the
script from screen, and sometimes the script dies silently. In the
terminal, I only have the normal output (to stdout) of the script
and the following line:

nice -2 zsh -c   942.81s user 10.38s system 2% cpu 10:30:06.84 total

but no error message, and no non-zero exit status (when I type
"nice -2 zsh -c false", "zsh: exit 1     nice -2 zsh -c false"
is displayed; with my script, there's nothing). So, I don't think
this comes from Perl. Perhaps zsh (the one that starts my_script)
dies before my_script?

The file secstep.out is generally empty. I think the problem occurs
when the script wants to write something to stderr (but sometimes,
writing to stderr doesn't kill the process).

Is there anything I shouldn't do concerning MULTIOS redirections
when I use screen? Or is there a bug in zsh (I use zsh 3.1.5)?

TIA for any information,

-- 
Vincent Lefevre <Vincent.Lefevre@ens-lyon.fr> - PhD stud. in Computer Science
Web: <http://www.vinc17.org/> or <http://www.ens-lyon.fr/~vlefevre/> - 100%
validated HTML - Acorn Risc PC, Yellow Pig 17, Championnat International des
Jeux Mathematiques et Logiques, TETRHEX, Faits divers insolites, etc.


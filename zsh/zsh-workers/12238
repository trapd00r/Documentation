From zsh-workers-return-12238-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 13 09:10:41 2000
Return-Path: <zsh-workers-return-12238-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27306 invoked from network); 13 Jul 2000 09:10:40 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Jul 2000 09:10:40 -0000
Received: (qmail 9010 invoked by alias); 13 Jul 2000 09:10:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12238
Received: (qmail 9002 invoked from network); 13 Jul 2000 09:10:27 -0000
Date: Thu, 13 Jul 2000 11:10:25 +0200 (MET DST)
Message-Id: <200007130910.LAA25985@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Wed, 12 Jul 2000 18:54:37 +0000
Subject: PATCH: Re: ZLE Widget: Insert last word (except &)


[moved to -workers]

Bart Schaefer wrote:

> ...
> Two, `zle WIDGET -n NUM' is broken for NUM > 9.

Just a little parsing error in bin_zle_call().

Bye
 Sven

Index: Src/Zle/zle_thingy.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_thingy.c,v
retrieving revision 1.1.1.30
diff -u -r1.1.1.30 zle_thingy.c
--- Src/Zle/zle_thingy.c	2000/03/14 11:18:02	1.1.1.30
+++ Src/Zle/zle_thingy.c	2000/07/13 09:09:45
@@ -628,7 +628,7 @@
 		    return 1;
 		}
 		if (!args[0][1])
-		    args++;
+		    *++args = "" - 1;
 		modsave = zmod;
 		saveflag = 1;
 		zmod.mult = atoi(num);

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


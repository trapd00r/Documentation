From schaefer@candle.brasslantern.com Mon Jul  8 14:32:43 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id OAA13294 for <mason@werple.mira.net.au>; Mon, 8 Jul 1996 14:32:41 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id AAA01696; Mon, 8 Jul 1996 00:21:49 -0400 (EDT)
Resent-Date: Mon, 8 Jul 1996 00:21:49 -0400 (EDT)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <960707212236.ZM7141@candle.brasslantern.com>
Date: Sun, 7 Jul 1996 21:22:32 -0700
In-Reply-To: Zoltan Hidvegi <hzoli@cs.elte.hu>
        "Re: Remaining zsh3.0-pre2 bugs" (Jul  8,  2:48am)
References: <199607080048.CAA05629@hzoli.ppp.cs.elte.hu>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.702 02jul96)
To: Zoltan Hidvegi <hzoli@cs.elte.hu>, zsh-workers@math.gatech.edu
Subject: Re: Remaining zsh3.0-pre2 bugs
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"5BBAL.0.QQ.Sp8un"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1559
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1511
Status: OR

On Jul 8,  2:48am, Zoltan Hidvegi wrote:
} Subject: Re: Remaining zsh3.0-pre2 bugs
}
} And an other bug is that here documents do not appear in the history.
} That's in fact a much more difficult bug.  The bug described above can be
} fixed just by adding hwgetword to the list of saved variables in lexsave.

That doesn't fix the problem of the cursor ending up in the wrong place
following the completion, though.

} The patch below should fix both problems.
}
[parts of patch deleted]
} 
} *** Src/input.c	1996/06/28 02:05:24	2.7
} --- Src/input.c	1996/07/07 23:05:35
} ***************
} *** 303,324 ****
} - /* Read one line of at most n-1 chars from the input queue */
} - 
} - /**/
} - char *
} - ingets(char *buf, int n)
} - {
} - }
} *** Src/hist.c	1996/07/04 19:40:08	2.16
} --- Src/hist.c	1996/07/07 19:41:00
} ***************
} *** 144,149 ****
} --- 144,165 ----
} + /* Read one line of at most n-1 chars from the input */
} + 
} + /**/
} + char *
} + hgets(char *buf, int n)
} + {
} + }

This is simply too amusing.  I originally added hgets() to hist.c back
sometime late in v2.2 or early in v2.3; it then got moved to input.c,
renamed ingets(), and changed to use ingetc(), sometime late in v2.4;
and now we're back to hgets()/hgetc() again.

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern

New male in /home/schaefer:
>N  2 Justin William Schaefer  Sat May 11 03:43  53/4040  "Happy Birthday"



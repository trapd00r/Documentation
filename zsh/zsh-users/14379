From zsh-users-return-14379-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 15 08:41:25 2009
Return-Path: <zsh-users-return-14379-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3910 invoked from network); 15 Sep 2009 08:41:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 15 Sep 2009 08:41:12 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 74866 invoked from network); 15 Sep 2009 08:41:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Sep 2009 08:41:03 -0000
Received: (qmail 13075 invoked by alias); 15 Sep 2009 08:40:47 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14379
Received: (qmail 13063 invoked from network); 15 Sep 2009 08:40:46 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 15 Sep 2009 08:40:46 -0000
Received: from titania.nodes.seiken.de (seiken.de [94.23.38.107])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 14B138026E39
	for <zsh-users@sunsite.dk>; Tue, 15 Sep 2009 10:40:39 +0200 (CEST)
Received: from p54841a89.dip0.t-ipconnect.de ([84.132.26.137] helo=oberon.localnet)
	by titania.nodes.seiken.de with esmtpsa (TLS1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.69)
	(envelope-from <joke@titania.nodes.seiken.de>)
	id 1MnTaZ-0007op-2w
	for zsh-users@sunsite.dk; Tue, 15 Sep 2009 10:40:39 +0200
From: Joke de Buhr <joke.de.buhr@seiken.de>
Organization: http://www.seiken.de/
To: zsh-users@sunsite.dk
Subject: Re: alternative method for a simple for
Date: Tue, 15 Sep 2009 10:40:28 +0200
User-Agent: KMail/1.12.1 (Linux/2.6.28-15-generic; KDE/4.3.1; x86_64; ; )
References: <20090915125419.3528@binki>
In-Reply-To: <20090915125419.3528@binki>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart2603930.6XsjOKQdNY";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200909151040.35397.joke.de.buhr@seiken.de>
Sender: joke.de.buhr@seiken.de
X-Virus-Scanned: ClamAV 0.94.2/9806/Mon Sep 14 20:37:58 2009 on bifrost
X-Virus-Status: Clean

--nextPart2603930.6XsjOKQdNY
Content-Type: Text/Plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable

On Tuesday 15 September 2009 05:54:19 d.henman wrote:

Maybe you want to use the short version of for. It's rather short

  for file (*wav) ffmpeg -b 160k -i $file $file:r.mp3

or=20

  for file (*wav) { ffmpeg -b 160k -i $file $file:r.mp3 }

That's short and clear syntax.

> Background:
>=20
> I was just playing around and trying to find an alternative way to
>  accomplish the following simple for loop:
>=20
> $  for file in *.wav
> for>      do
> for>      ffmpeg -b 160k -i $file  ${file:r}.mp3
> for>      done
>=20
>=20
> (Method 1.) Note that I could not not use this method as shown below
>   $ zmv -p ffmpeg -o " -b 160k -i" '(*).wav' '$1.mp3'
>=20
> because it puts two hypens, "--", between -i and filename, as below:
>      ffmpeg -b 160k -i -- song1.wav song1.mp3
>      ffmpeg -b 160k -i -- song2.wav song2.mp3
>=20
> --------
>=20
> (Method 2.) Likewise I could not use zargs, yet at least,
>      because replacements or expansions //l/r or :r didn't seem to
>  work..
>=20
> $ zargs --replace=3Darg -e.. -- *.wav .. ffmpeg -b 160k -i arg
>  ${${file::=3Darg}//.wav/.mp3}
>=20
> produces:
>      ffmpeg -b 160k -i song1.wav  song1.wav
>      ffmpeg -b 160k -i song2.wav  song2.wav
>=20
>=20
> and both of
> $ zargs --replace=3Darg -e.. -- *.wav .. echo -b 160k -i arg
>  ${${file::=3Darg}:r}.mp3 and
> $ zargs --replace=3Darg -e.. -- *.wav .. echo -b 160k -i arg arg.mp3
>=20
> produces the below with .mp3 appended, but .wav not taken off first.
>      ffmpeg -b 160k -i Chaos-Voices-Music.wav
>  Chaos-Voices-Music.wav.mp3 ffmpeg -b 160k -i Dave-s_Song-Part_2.wav
>  Dave-s_Song-Part_2.wav.mp3
>=20
>=20
> I can't help thinking that zargs could handle this if someway, but I
>  don't know how to yet.   Just wondering if anyone had any suggestions.
>=20
> Thanks,
>   Darel Henmanm
>=20

--nextPart2603930.6XsjOKQdNY
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQIcBAABCgAGBQJKr1L9AAoJEMcNQWzYfbLs6zgP/RfMoJan7Gol2QgsIDMloi6r
+VzPj6BcAYKAf79dff00VZc9gumABhQIHsYEcFWkvfjInRKICm7hmtmrORaAo41o
9xmYSAaj60i9C/tKrALMfBgAGi2ILuM9qYm5H6wDYR38iKuvIVju1ESMiMELg9EA
XehzF10Jya7KbLHscqUtm9uTjsJEJkx/VgI9aZPS7F4NJMchWyLEPQ2mIvxvJpNw
zgHO9BTxRCGfj9o8ubpPiU8b3YrxLLwF6ME50Co8Gn77i6UouU410y2Pd7CJFUbw
bD+MJdEG5bNL9x/EQvkIFFgxBYpTgZLAdJnYhfUWF2buwL0vI7E6bcFRjuV6tj1O
0dUpNEHGwXpo35TNhZ0UfVM/ro4d2ty9attRXVrLRuCEHHEgtsjSNsjri0AtFCYK
6s9PWMiss89FhKRv6/FnNNlwdVPkgipOPeynft7EZ/L5R/SMUJB+XvdjpTodOA55
+vKS+JxPlqBmCX2e05K3m3VSwjPJdKBuScWzIQuUR9ZbI/Uo08u2BJIFJMOuYf81
3LF+4yM7h7bxqfdUCnujH0f/0PmCk7A/hHlx7fnCtaPnvV9YF809k4kbgFHJZSz4
1O1F7Cux+ZI/qMil0cQVNhVyITB81cB1tVwFCKrXiBeFkSee5lEqnqNtJL+g0OgT
kdibAt00JtIODcFpji2U
=Ja/E
-----END PGP SIGNATURE-----

--nextPart2603930.6XsjOKQdNY--


From zsh-users-return-4256-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 18 22:51:28 2001
Return-Path: <zsh-users-return-4256-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6709 invoked from network); 18 Sep 2001 22:51:27 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Sep 2001 22:51:27 -0000
Received: (qmail 25886 invoked by alias); 18 Sep 2001 22:51:03 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4256
Received: (qmail 25868 invoked from network); 18 Sep 2001 22:51:02 -0000
X-Authentication-Warning: greux.loria.fr: lefevre set sender to vincent@vinc17.org using -f
Date: Wed, 19 Sep 2001 00:50:26 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-users@sunsite.dk
Subject: Re: can't find termcap info
Message-ID: <20010919005025.A18079@greux.loria.fr>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20010918142514.A16873@greux.loria.fr> <20010918053813.C13299@hq.newdream.net> <20010918145958.A17178@greux.loria.fr> <20010918062537.G13299@hq.newdream.net> <20010918165111.B17411@greux.loria.fr> <20010918155339.20305.qmail@web12504.mail.yahoo.com> <20010918181329.A17722@greux.loria.fr> <010918121941.ZM8023@candle.brasslantern.com> <4abc1a97d3vincent@vinc17.org> <010918151018.ZM8119@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <010918151018.ZM8119@candle.brasslantern.com>
User-Agent: Mutt/1.3.22.1i
X-Mailer-Info: http://www.vinc17.org/mutt_eng.html

On Tue, Sep 18, 2001 at 15:10:18 -0700, Bart Schaefer wrote:
> On Sep 18, 10:39pm, Vincent Lefevre wrote:
> > greux:~> export TERMCAP=$HOME/.termcap
> > greux:~> TERM=nettle
> > zsh: segmentation fault (core dumped)  zsh
> 
> OK, that's pretty unpleasant.  Unfortunately, I'm not able to reproduce
> this, so you'll have to at least get us a stack trace with gdb and send it.

(gdb) backtrace
#0  chunk_alloc (ar_ptr=0x2abf1d60, nb=24) at malloc.c:2814
#1  0x2ab5c5ce in __libc_malloc (bytes=16) at malloc.c:2696
#2  0x2aae1f09 in _init () from /lib/libtermcap.so.2
#3  0x2aae2328 in _init () from /lib/libtermcap.so.2
#4  0x2aae2b3b in _init () from /lib/libtermcap.so.2
#5  0x2aae2bc8 in tgetent () from /lib/libtermcap.so.2
#6  0x806fdf8 in init_term ()
#7  0x80865f9 in termsetfn ()
#8  0x8083e5c in setstrvalue ()
#9  0x80849a6 in setsparam ()
#10 0x805fc03 in untokenize ()
#11 0x805e232 in execode ()
#12 0x805e329 in execlist ()
#13 0x805e1b1 in execode ()
#14 0x806f318 in loop ()
#15 0x807172c in zsh_main ()
#16 0x80516ca in main ()
#17 0x2ab1b9cb in __libc_start_main (main=0x80516b4 <main>, argc=1,
    argv=0x7ffff674, init=0x8050c34 <_init>, fini=0x80a1794 <_fini>,
    rtld_fini=0x2aab5e60 <_dl_fini>, stack_end=0x7ffff66c)
    at ../sysdeps/generic/libc-start.c:92

> If $HOME/.termcap isn't too huge, include that too.

It's too huge: 748544 KB.

I generated it with "tic -C -T terminfo.src", where terminfo.src is the
file distributed with ncurses 5.2 + a couple of lines for the nettle
terminal.

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/> - 100%
validated HTML - Acorn Risc PC, Yellow Pig 17, Championnat International des
Jeux Mathématiques et Logiques, TETRHEX, etc.
Work: CR INRIA - computer arithmetic / SPACES project at LORIA


From zsh-workers-return-10726-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 13 08:18:22 2000
Return-Path: <zsh-workers-return-10726-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3089 invoked from network); 13 Apr 2000 08:18:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Apr 2000 08:18:21 -0000
Received: (qmail 6859 invoked by alias); 13 Apr 2000 08:18:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10726
Received: (qmail 6841 invoked from network); 13 Apr 2000 08:18:15 -0000
Date: Thu, 13 Apr 2000 10:18:13 +0200 (MET DST)
Message-Id: <200004130818.KAA12751@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Wed, 12 Apr 2000 17:15:28 -0700
Subject: PATCH: Re: dev-22 compile problem


Bart Schaefer wrote:

> On Apr 12,  4:29pm, Jason Price wrote:
> > Subject: dev-22 compile problem
> > 
> > hashtable.c:1191: structure has no member named `en_cols'
> 
> Apparently no one else is building zsh with HAVE_NIS_PLUS.
> 
> Try deleting half of the .en_cols.en_cols on line 1191 of hashtable.c.

No. The field is named en_cols_len. Weird, I'm pretty sure I once was
able to compile and use it -- some years ago.

Bye
 Sven

Index: Src/hashtable.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/hashtable.c,v
retrieving revision 1.2
diff -u -r1.2 hashtable.c
--- Src/hashtable.c	2000/04/01 20:49:48	1.2
+++ Src/hashtable.c	2000/04/13 08:16:46
@@ -1188,7 +1188,7 @@
 static int
 add_userdir(nis_name table, nis_object *object, void *userdata)
 {
-    if (object->zo_data.objdata_u.en_data.en_cols.en_cols >= 6) {
+    if (object->zo_data.objdata_u.en_data.en_cols.en_cols_len >= 6) {
 	static char name[40], dir[PATH_MAX + 1];
 	register entry_col *ec =
 	    object->zo_data.objdata_u.en_data.en_cols.en_cols_val;

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-10780-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 04 11:17:53 2006
Return-Path: <zsh-users-return-10780-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12091 invoked from network); 4 Oct 2006 11:17:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Oct 2006 11:17:47 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 27641 invoked from network); 4 Oct 2006 11:17:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2006 11:17:39 -0000
Received: (qmail 28864 invoked by alias); 4 Oct 2006 11:17:31 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10780
Received: (qmail 28854 invoked from network); 4 Oct 2006 11:17:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Oct 2006 11:17:30 -0000
Received: (qmail 26467 invoked from network); 4 Oct 2006 11:17:30 -0000
Received: from mx2-2.spamtrap.magma.ca (209.217.78.161)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2006 11:17:25 -0000
Received: from mail1.magma.ca (mail1.internal.magma.ca [10.0.10.11])
	by mx2-2.spamtrap.magma.ca (8.13.1/8.13.1) with ESMTP id k94BHKZh015968
	for <zsh-users@sunsite.dk>; Wed, 4 Oct 2006 07:17:20 -0400
Received: from localhost.localdomain (ottawa-hs-69-20-224-150.d-ip.magma.ca [69.20.224.150])
	by mail1.magma.ca (Magma's Mail Server) with ESMTP id k94BHGCl014268
	(version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NOT)
	for <zsh-users@sunsite.dk>; Wed, 4 Oct 2006 07:17:20 -0400
Received: from orchid by localhost.localdomain with local (Exim 4.50)
	id 1GV4kQ-0002Xq-RM
	for zsh-users@sunsite.dk; Wed, 04 Oct 2006 07:17:10 -0400
To: zsh-users@sunsite.dk
Subject: ssh user name completion 
From: Angelina Carlton <brat@magma.ca>
Mail-Followup-To: zsh-users@sunsite.dk
X-Subliminal-Message: everything I know is wrong
Date: Wed, 04 Oct 2006 07:17:10 -0400
Message-ID: <87ejtotjnt.fsf@magma.ca>
User-Agent: Gnus/5.11 (Gnus v5.11) Emacs/23.0.0 (gnu/linux)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-magma-MailScanner-Information: Magma Mailscanner Service
X-magma-MailScanner: Clean


Hello everyone,

I have several computers running various flavours of Debian GNU/Linux
On my server, (Debian stable)  I have installed the package zsh-beta:
zsh-beta  4.3.0-dev-2+20 A shell with lots of features (dev tree)

On my desktop, (Debian unstable) I also have zsh-beta:
zsh-beta  4.3.2-dev-1+20060928-1 A shell with lots of features (dev
tree)

in my ~/.zshrc on both machines:

#ssh completion
local _myhosts;
_myhosts=( ${${=${${(f)"$(cat {/etc/ssh_,~/.ssh/known_}hosts(|2)(N) /dev/null)"}%%[# ]*}//,/ }:#\!*}
${=${(f)"$(cat /etc/hosts(|)(N) <<EOF
(ypcat hosts 2>/dev/null))"}%%\#*} );
zstyle ':completion:*' hosts $_myhosts;

I got this code from a zshrc I found on the net, but i don't pretend to
understand how exactly it works, or even if it is the correct way to do
ssh conmpletion..

The problem is on the Debian Stable server, if I type:
ssh u<TAB>
the shell expands to:
ssh username@
then I type the first letter of the host and it expands that as well.
This is excellent behaviour and makes things very fast.

However on my Debian unstable computer, typing:
ssh u<TAB>
will just make the shell beep, as it seems not to know how to complete
the command. I have to manually type in the username@ string and then it
will complete the hostname for me.

Obviously I would like the version of zsh on Debian unstable to behave
(at least with respects to ssh completion) just like the version of zsh
on Debian stable. 

Does anyone know how to do this?
Thanks very much.

-- 
-----Angelina Carlton-----
orchid on irc.freenode.net
     brat@magma.ca
web:bzgirl.bakadigital.com
--------------------------


From zsh-workers-request@euclid.skiles.gatech.edu  Wed Oct 16 12:13:17 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id MAA25585 for <mason@primenet.com.au>; Wed, 16 Oct 1996 12:13:14 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id WAA08571; Tue, 15 Oct 1996 22:09:41 -0400 (EDT)
Resent-Date: Tue, 15 Oct 1996 22:03:07 -0400 (EDT)
Date: Tue, 15 Oct 1996 19:02:01 -0700
Message-Id: <199610160202.TAA04520@kontiki.Eng.Sun.COM>
From: John S Cooper <jsc@Eng.Sun.COM>
To: zsh-users@math.gatech.edu
CC: john.cooper@Eng.Sun.COM
Subject: `popd' is blocked on non-existent directory
X-Attribution: JSC
X-Mailer: VM 5.96 (beta) under 19.14 XEmacs Lucid
Mime-Version: 1.0 (generated by tm-edit 7.89)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"P2BPK1.0.U42.R94Po"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/436
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Under zsh 3.0.0, if a directory in the directory stack is removed, popd
seems to get "blocked".  In 2.5, the non-existent directory would just be
removed from the stack.  Here's what happens:

1175 kontiki%> dirs -v                                                  ~/elisp
0       ~/elisp
1       ~/elisp/foo
2       ~/elisp/foo/tm
3       ~Sputnik/sdtmail
1176 kontiki%>                                                          ~/elisp
1176 kontiki%> popd                                                     ~/elisp
popd: no such file or directory: /space/jsc/elisp/foo
1177 kontiki%> dirs -v                                                  ~/elisp
0       ~/elisp
1       ~/elisp/foo
2       ~/elisp/foo/tm
3       ~Sputnik/sdtmail
1178 kontiki%>                                                          ~/elisp


I'm now unable to pop the stack back past the non-existent "~/elisp/foo"
directory.  I know I can `cd -3' but it would be much better to have the
non-existent stuff cleaned out of the stack.

Is there a way to get the old behavior, i.e. have all non-existent
directories removed from the stack?

Also, when there's only one entry left on the dir stack, (I think) a popd
used to remove it and pop me to my home directory.  This is no longer the
case in 3.0.0 .

Thanks,

    --- John.


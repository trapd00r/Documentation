From zsh-users-return-12237-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 20 11:49:53 2007
Return-Path: <zsh-users-return-12237-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7819 invoked from network); 20 Nov 2007 11:49:46 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Nov 2007 11:49:46 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 12582 invoked from network); 20 Nov 2007 11:49:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 11:49:40 -0000
Received: (qmail 5519 invoked by alias); 20 Nov 2007 11:49:28 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12237
Received: (qmail 5505 invoked from network); 20 Nov 2007 11:49:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Nov 2007 11:49:28 -0000
Received: (qmail 11351 invoked from network); 20 Nov 2007 11:49:28 -0000
Received: from cluster-g.mailcontrol.com (85.115.41.190)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 11:49:22 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly04g.srv.mailcontrol.com (MailControl) with ESMTP id lAKBnDRj020925
	for <zsh-users@sunsite.dk>; Tue, 20 Nov 2007 11:49:16 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 20 Nov 2007 11:48:52 +0000
Date: Tue, 20 Nov 2007 11:48:51 +0000
From: Peter Stephenson <pws@csr.com>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: Multibyte characters and menu completion
Message-ID: <20071120114851.1e934598@news01>
In-Reply-To: <20071118203757.GA1816@DervishD>
References: <20071118203757.GA1816@DervishD>
Organization: CSR
X-Mailer: Claws Mail 3.0.2 (GTK+ 2.10.14; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Nov 2007 11:48:52.0122 (UTC) FILETIME=[523C07A0:01C82B6B]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.71.0.114

On Sun, 18 Nov 2007 21:37:57 +0100
DervishD <zsh@dervishd.net> wrote:
> But if the character code point is greater than U+00FF, weird things
> happen. For example, I have a file named U+8336 (kanji for "tea")
> followed by U+306e (hiragana "no") followed by U+5473 (kanji for
> odor/smell) and zsh prints the name correctly (well, since I'm in a text
> mode terminal, it uses three instances of my "unknown character" glyph,
> but thinks that each letter is three glyphs wide, putting the cursor six
> spaces after the file name once it is completed:

I just tried these characters on my gnome-terminal (which seems to have the
best multibyte support of the limited number of terminals I've tried) and
they work OK.  They're two glyphs wide in this case, and the shell is handling
this correctly.  I think your terminal is probably problematic.  It's not
entirely trivial turning on all the bits you need to get multibyte characters
working.  There's some guidance in the FAQ (section 5.3).

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


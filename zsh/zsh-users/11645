From zsh-users-return-11645-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 16 04:12:06 2007
Return-Path: <zsh-users-return-11645-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24412 invoked from network); 16 Jul 2007 04:12:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Jul 2007 04:12:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 69507 invoked from network); 16 Jul 2007 04:11:59 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Jul 2007 04:11:59 -0000
Received: (qmail 16963 invoked by alias); 16 Jul 2007 04:11:49 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11645
Received: (qmail 16952 invoked from network); 16 Jul 2007 04:11:48 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 16 Jul 2007 04:11:48 -0000
Received: (qmail 68258 invoked from network); 16 Jul 2007 04:11:48 -0000
Received: from redoubt.spodhuis.org (HELO mx.spodhuis.org) (193.202.115.177)
  by a.mx.sunsite.dk with SMTP; 16 Jul 2007 04:11:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=first1; d=spodhuis.org;
	h=Received:Date:From:To:Subject:Message-ID:Mail-Followup-To:References:MIME-Version:Content-Type:Content-Disposition:In-Reply-To;
	b=dTNX719zgctfPdgAnqxXoVT511DKQAe/UtT0iTJPQO4uZ5j5NoggenO5Ne2tdAtRKtRsLu1BfDtowwCq5t7jN5rLw9PSBSI8huQm1k7pA/DcAESQYekZbukMdyDe+k3Mhne2LtP4y1RHn/FGdwL2j26vJ0FGFOHGVCyJorpHHe8=;
Received: by smtp.spodhuis.org with local 
	id 1IAHw0-0000gR-61; Mon, 16 Jul 2007 04:11:44 +0000
Date: Sun, 15 Jul 2007 21:11:44 -0700
From: Phil Pennock <zsh-workers+phil.pennock@spodhuis.org>
To: zsh-users@sunsite.dk
Subject: Re: How to do a simple find-replace autocomplete?
Message-ID: <20070716041143.GA53799@redoubt.spodhuis.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <200707152136.40771.mats_a@mit.edu> <3442bf5a0707151933i47b9acfevfbc20c8dc178d0e6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <3442bf5a0707151933i47b9acfevfbc20c8dc178d0e6@mail.gmail.com>

On 2007-07-15 at 19:33 -0700, Peter Mawhorter wrote:
> There may be a better way to do this tha's Zsh specific, but I've
> always just stuck a couple of variable declarations in my .zprofile:
> 
> export $p=/home/pmawhorter/media/pictures
> 
> and the like. When I type:
> 
> cd $p<Tab>
> 
> It completes to /home/pmawhorter/media/pictures.
> What is anoying is that I can't type '$p/a<Tab>' and complete directly
> to /home/pmawhorter/media/pictures/arrivals... I have to hit tab
> twice. Still, it's one way to "shortcut" directories.

% hash -d foo=~/bin/common
% less ~foo/<tab>
[shows completions]

Without the / before the <tab>, the ~foo is expanded first.

This is just adding entries to the directory hash table, the same one
that by default auto-populates with users' home directories.  (Which is
unwieldy when there's tens of thousands of users via LDAP and NFS
homedir automounts, so there's some hoops to jump through if you want to
artificially restrict it to a limited subset of users who are of
interest, but that's a whole different story).


Now, you can keep all the existing variables by just doing:
% setopt cdablevars

which will let you use ~p/ to mean the contents of $d/ but tying more
nicely into things like tab-completion.

-Phil


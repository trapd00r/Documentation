From zsh-users-return-15068-mason-zsh=primenet.com.au@zsh.org Wed May 19 18:47:15 2010
Return-Path: <zsh-users-return-15068-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27913 invoked by alias); 19 May 2010 18:47:15 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15068
Received: (qmail 20099 invoked from network); 19 May 2010 18:47:14 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,T_TO_NO_BRKTS_FREEMAIL autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.161.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=+rARzdsO8iuYEaO3Hqp2d0xhPgx2c0m/pI4fsoo2mo8=;
        b=l3k12qXrnm8mMhuD1eWyU8TjOjII67d9w5H9Bz5+vdd6Tc8YdEYUjIPUIj3A0u4Djb
         QFbrS8bOMyuni1i2kNscWZZ5HP/K7j5x5YWZvZtZPD+s8XvjrgGj2pd4gf636mJny8bx
         IyNOoNslKtxb4jSwCvaB27YftYqjzsK9uehAc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=howvuzi7mm7W9aVPLJm5BV3YLBKfc64sB7zpZvTI80EAepZCWqkE/ilU91ur5BYvBk
         8KG8EhLZDYVLyKDwNjREBe2QB0UEEvLqjkEaGOk5lN3+kOHH80V1mn0LRANSm03zt9rk
         IFyYtv3juDbSuJOCexo41/ElC0N6ImRGIU+Jw=
MIME-Version: 1.0
In-Reply-To: <20100519191103.b712607f.tartifola@gmail.com>
References: <20100519191103.b712607f.tartifola@gmail.com>
Date: Wed, 19 May 2010 20:39:48 +0200
Message-ID: <AANLkTikMDn2tqfIdv1-UE0ZtJrGY7cgMpUHREwor2a6_@mail.gmail.com>
Subject: Re: convert number
From: Christian Walther <cptsalek@gmail.com>
To: tartifola@gmail.com
Cc: zsh-users@zsh.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

On 19 May 2010 19:11,  <tartifola@gmail.com> wrote:
>
> Hi,
> I'm lost in a shell issue with no clue where to look for a solution.
> I have a very long column of three digit numbers and I need to transform
> each of them into a one digit number according to the following
> "conversion table"
>
> 151 =A0 =A0 2
> 152 =A0 =A0 2
> 153 =A0 =A0 2
> 158 =A0 =A0 4
> 159 =A0 =A0 3
> 160 =A0 =A0 2
> 171 =A0 =A0 4
> 172 =A0 =A0 1
> 173 =A0 =A0 4

if there is no mathematical formula for the "conversion table"
available, I would put this table in a hash, e.g. something like:

typeset -A convtable
convtable[151]=3D2
convtable[152]=3D2

etc...

If there is a value that appears very often, such as 2 in your
example, and it's not possible to parse an invalid number (such as
154-157 which doesn't appear to exist in your example), you could drop
every number that needs to be transformed to 2 and use something like:

typeset -A convtable
convtable[158]=3D4
convtable[159]=3D3
convtable[171]=3D4
convtable[172]=3D1
convtable[173]=3D4

The transformation would be done as

${convtable[$number]=3D2}

e.g.

number=3D158
echo ${convtable[$number]=3D2}
4

number=3D151
echo ${convtable[$number]=3D2}
2

HTH
Christian Walther


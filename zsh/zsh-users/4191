From zsh-users-return-4191-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 04 16:13:53 2001
Return-Path: <zsh-users-return-4191-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17941 invoked from network); 4 Sep 2001 16:13:52 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Sep 2001 16:13:52 -0000
Received: (qmail 15038 invoked by alias); 4 Sep 2001 16:13:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4191
Received: (qmail 15024 invoked from network); 4 Sep 2001 16:13:32 -0000
Date: Tue, 4 Sep 2001 16:13:22 +0000
From: Kevin Way <kevin.way@overtone.org>
To: zsh-users@sunsite.dk
Subject: TRAPALRM and vlock problem
Message-ID: <20010904161322.B49337@bean.overtone.org>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="nFreZHaLTZJo0R7j"
Content-Disposition: inline
User-Agent: Mutt/1.2.5i


--nFreZHaLTZJo0R7j
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

I'm having a problem with the TRAPALRM+TMOUT feature of zsh, and I'd greatly
appreciate any help.  My .zshrc contains:

    TMOUT=3D300

    TRAPALRM () {
        clear
        echo Inactivity timeout on $TTY
        echo
        vlock -c
        echo
        echo Terminal unlocked. [ Press Enter ]
    }

The goal being, of course, to lock unused terminals after five minutes.

The problem is that when called by zsh in this manner, vlock will only
accept one character, making it impossible to unlock the terminal.  I end
up with:

    This TTY is now locked.
    Please enter the password to unlock.
    kway's Password:
    root's Password:
     *** That password is incorrect; please try again. ***=20

    This TTY is now locked.
    Please enter the password to unlock.
    kway's Password:
    root's Password:
     *** That password is incorrect; please try again. ***=20

despite the fact that if I all vlock -c from the command line, it works as
expected:

    This TTY is now locked.
    Please enter the password to unlock.
    kway's Password:
    [kway@bean kway]%=20

Does anybody know why this happens, or how to stop it?  I'd greatly
appreciate any assistance in this matter.

Kevin Way

--nFreZHaLTZJo0R7j
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (FreeBSD)
Comment: For info see http://www.gnupg.org

iD8DBQE7lP2iKxA01iDoLN4RAmuyAJ4lIxpRUfASEivbuImKY1Ynj6V01ACeMgHM
tdoeKYPN/gHx7emgVdOmBy0=
=Wx60
-----END PGP SIGNATURE-----

--nFreZHaLTZJo0R7j--


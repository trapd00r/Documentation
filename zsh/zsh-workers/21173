From zsh-workers-return-21173-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 24 12:16:16 2005
Return-Path: <zsh-workers-return-21173-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11466 invoked from network); 24 Apr 2005 12:16:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Apr 2005 12:16:15 -0000
Received: (qmail 28710 invoked from network); 24 Apr 2005 12:16:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Apr 2005 12:16:09 -0000
Received: (qmail 19333 invoked by alias); 24 Apr 2005 12:16:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21173
Received: (qmail 19318 invoked from network); 24 Apr 2005 12:16:05 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Apr 2005 12:16:05 -0000
Received: (qmail 28478 invoked from network); 24 Apr 2005 12:16:05 -0000
Received: from zoidberg.org (HELO cthulhu.zoidberg.org) (213.133.99.5)
  by a.mx.sunsite.dk with SMTP; 24 Apr 2005 12:16:00 -0000
Received: from zoidberg (3ece4e6e.datahighways.de [::ffff:62.206.78.110])
  (AUTH: PLAIN tobias, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by cthulhu.zoidberg.org with esmtp; Sun, 24 Apr 2005 14:15:55 +0200
  id 01402CC3.426B8E00.00004E10
Date: Sun, 24 Apr 2005 14:15:54 +0200
From: Tobias Gruetzmacher <tobias@portfolio16.de>
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: Cleaner envrionment after some completions
Message-ID: <20050424121554.GA9580@portfolio16.de>
Mail-Followup-To: Tobias Gruetzmacher <tobias@portfolio16.de>,
	zsh-workers@sunsite.dk
References: <20050423201944.GA23939@portfolio16.de> <1050424002330.ZM20410@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
In-Reply-To: <1050424002330.ZM20410@candle.brasslantern.com>
User-Agent: Mutt/1.5.9i
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Hi,

On Sun, Apr 24, 2005 at 12:23:30AM +0000, Bart Schaefer wrote:
> On Apr 23, 10:19pm, Tobias Gruetzmacher wrote:
> }
> } +++ mod/Completion/Unix/Command/_subversion
> }  
> }    if (( ! $+_svn_cmds )); then
> } -    typeset -gA _svn_cmds
> } +    typeset -A _svn_cmds
> 
> This one is wrong.  The "g" in there makes _svn_cmds a global; if it's
> removed to make it a a local, then 'if (( ! $+_svn_cmds ))' will always
> be true, and _call_program will always be run.

I somehow manged to miss the caching... So, yes, this is obviously
wrong.

> Perhaps you meant 'typeset -gHA _svn_cmds' ?

Yes, that looks good.

Greetings Tobi

-- 
GPG-Key 0xE2BEA341 - signed/encrypted mail preferred
My, oh so small, homepage: http://portfolio16.de/
http://www.fli4l.de/ - ISDN- & DSL-Router on one disk!
Registered FLI4L-User #00000003


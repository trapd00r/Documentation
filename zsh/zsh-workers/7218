From zsh-workers-return-7218-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 20 08:51:32 1999
Return-Path: <zsh-workers-return-7218-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12101 invoked from network); 20 Jul 1999 08:51:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Jul 1999 08:51:31 -0000
Received: (qmail 24915 invoked by alias); 20 Jul 1999 08:51:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7218
Received: (qmail 24908 invoked from network); 20 Jul 1999 08:51:17 -0000
Message-Id: <9907200820.AA20466@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: Zsh online manuals under SunOS 5.7. 
In-Reply-To: "Tanaka Akira"'s message of "20 Jul 1999 14:27:16 DFT."
             <rsqso6jvqkr.fsf@crane.jaist.ac.jp> 
Date: Tue, 20 Jul 1999 10:20:15 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Tanaka Akira wrote:
> > Under SunOS 5.7, if windex is generated by /bin/catman -w, man command
> > cannot refer zsh online manuals.
> 
> I tried to make workaround for this problem.
> At least, following patch fix the problem under SunOS 5.7.

OK, but it seems to me we might as well delete all the .' lines, which I
think are just there to work around a yodl bug.  And me might as well
work around the other bug, that sections are printed as ""NAME.

This is all with yodl 1.22.  I can't find a newer version.

--- Doc/Makefile.in.yobug	Tue Jul 20 09:32:53 1999
+++ Doc/Makefile.in	Tue Jul 20 10:02:06 1999
@@ -83,7 +83,7 @@
 	  */*) target=$@ ;; \
 	  *) target=$(sdir)/$@ ;; \
 	esac; \
-	$(YODL) -I$(sdir) -w zman.yo version.yo $< | sed -e '1s/\\-/-/g' -e '/^\.SH ""NAME/,/^\.SH ""/ { /^\.'\''/d; }' > $$target || exit 1; \
+	$(YODL) -I$(sdir) -w zman.yo version.yo $< | sed -e '1s/\\-/-/g' -e '/^\.'\''/d' > $$target || exit 1; \
 	test -f $$target
 
 zsh_us.ps: zsh.dvi
@@ -100,7 +100,7 @@
 	  */*) target=$@ ;; \
 	  *) target=$(sdir)/$@ ;; \
 	esac; \
-	$(YODL) -I$(sdir) -DZSHALL -w zman.yo version.yo zsh.yo | sed -e '1s/\\-/-/g' -e '/^\.SH ""NAME/,/^\.SH ""/ { /^\.'\''/d; }' > $$target || exit 1; \
+	$(YODL) -I$(sdir) -DZSHALL -w zman.yo version.yo zsh.yo | sed -e '1s/\\-/-/g' -e '/^\.'\''/d' > $$target || exit 1; \
 	test -f $$target
 
 ../META-FAQ: META-FAQ.yo Zsh/metafaq.yo
--- Doc/zman.yo.yobug	Sat Jun 12 15:47:20 1999
+++ Doc/zman.yo	Tue Jul 20 10:00:16 1999
@@ -61,8 +61,9 @@
 
 def(chapter)(1)(CMT())
 
+COMMENT(--- the "" works around a yodl bug ---)
 def(sect)(1)(\
-  NOTRANS(.SH ")UPPERCASE(ARG1)(0)"NL()\
+  NOTRANS(.SH )UPPERCASE(ARG1)(0)""NL()\
   STDPAR()\
   CMT()\
 )

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


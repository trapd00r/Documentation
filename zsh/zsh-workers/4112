From zsh-workers-request@math.gatech.edu Sun Jun 14 14:58:47 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28482 invoked from network); 14 Jun 1998 14:58:45 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 14 Jun 1998 14:58:45 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id KAA29207;
	Sun, 14 Jun 1998 10:53:30 -0400 (EDT)
Resent-Date: Sun, 14 Jun 1998 10:53:30 -0400 (EDT)
Message-Id: <199806140034.CAA15087@ZengHe.ens.fr>
Subject: bad interaction of zsh 3.0.5 with locale
To: zsh-workers@math.gatech.edu
Date: Sun, 14 Jun 1998 02:34:11 +0200 (CEST)
Reply-To: francoisrene.rideau@cnet.francetelecom.fr
Reply-To: Fare Rideau <francoisrene.rideau@cnet.francetelecom.fr>
From: Fare Rideau <francoisrene.rideau@cnet.francetelecom.fr>
X-Mailer: ELM [version 2.4ME+ PL37 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
X-MIME-Autoconverted: from 8bit to quoted-printable by ZengHe.ens.fr id CAA15087
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by math.gatech.edu id KAA29186
Resent-Message-ID: <"rW1VY1.0.F87.gF-Wr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4112
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Dear ZSH Workers,
   I've recently experienced troubles with ZSH 3.0.5,
that I've diagnosed as very bad interaction with localization
in RedHat-5.0_FR (Linux 2.0 on i386).
   I originally ran into trouble by using my usual
more [A-Z]* to read all metafiles (README*, QuickStart, Makefile, FAQ, etc),
in a source packages [Note: more () { =less $@ }].
Surprisingly, ZSH would indistinctly show all files,
in case-independent sorted order. Ouch.
   After losing some time chasing down the problem (that I didn't have
on other computers running RH 5.0 with mostly equivalent configuration files,
library and zsh versions!), I identified it as ZSH making stupid things
with locale.
   My .zshenv includes (roughly):
	{ export LC_CTYPE=iso_8859_1 ; export LANG=fr_FR }
When I { unset LANG }, [A-Z] globbing works anew.

Worse! While making various tests with locale, I defined the
following functions:

nolocale () {
        unset LANG LC_CTYPE LC_ALL
}
localefr () {
        export LC_CTYPE=iso_8859_1 LANG=fr_FR
        unset LC_ALL
}

Well, executing { nolocale ; localefr } will kill ZSH!!!!
Pasting the individual export/unset commands seems to work ok.

Looking forward to ZSH 3.0.6 (or ZSH 3.2.x)...

## Faré | VN: Ð£ng-Vû Bân   | Join the TUNES project!  http://www.tunes.org/ ##
## FR: François-René Rideau |    TUNES is a Useful, Not Expedient System     ##
## Reflection&Cybernethics  | Project for a Free Reflective Computing System ##
Programming today is a race between software engineers striving to
build bigger and better idiot-proof programs, and the Universe trying
to produce bigger and better idiots.

So far, the Universe is winning.
                -- Rich Cook


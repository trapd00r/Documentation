From zsh-workers-return-22699-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 12 21:02:42 2006
Return-Path: <zsh-workers-return-22699-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29099 invoked from network); 12 Sep 2006 21:02:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Sep 2006 21:02:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 32365 invoked from network); 12 Sep 2006 21:02:31 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Sep 2006 21:02:31 -0000
Received: (qmail 20356 invoked by alias); 12 Sep 2006 21:02:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22699
Received: (qmail 20347 invoked from network); 12 Sep 2006 21:02:27 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Sep 2006 21:02:27 -0000
Received: (qmail 32120 invoked from network); 12 Sep 2006 21:02:27 -0000
Received: from sd-green-bigip-60.dreamhost.com (HELO spunkymail-a15.dreamhost.com) (208.97.132.60)
  by a.mx.sunsite.dk with SMTP; 12 Sep 2006 21:02:23 -0000
Received: from [192.168.1.2] (ppp-68-122-73-242.dsl.pltn13.pacbell.net [68.122.73.242])
	by spunkymail-a15.dreamhost.com (Postfix) with ESMTP id 3CE977F085
	for <zsh-workers@sunsite.dk>; Tue, 12 Sep 2006 14:02:21 -0700 (PDT)
Mime-Version: 1.0
Message-Id: <pdy98830624063ec12ccd3188de@[192.168.1.2]>
In-Reply-To: <237967ef0609121251u4fa6cb4erd3061a267cf4a645@mail.gmail.com>
References: <pdy98830624063bc12cb7255de8@192.168.1.2>
 <237967ef0609121251u4fa6cb4erd3061a267cf4a645@mail.gmail.com>
Date: Tue, 12 Sep 2006 13:57:39 -0700
To: zsh-workers@sunsite.dk
From: Dave Yost <Dave@Yost.com>
Subject: Re: builtin setuid and setgid commands
Content-Type: text/plain; charset="us-ascii"

At 09:51 PM +0200 2006-09-12, Mikael Magnusson wrote:
>On 9/12/06, Dave Yost <Dave@yost.com> wrote:
>>Zshell should have builtins to call the setuid and setgid system calls.
>>
>>With this feature, one can write a shell script that is executed by
>>root but runs as another user.
>>
>>The usefulness of this feature came up in the context of the
>>mysql.server script, which starts/stops the server and is run by root
>>at boot time.  It would be nice if the script itself could use a
>>setuid command to ensure that it is running as the mysql user.
>>
>>Thanks
>>
>>Dave
>
># whoami
>root
># UID=1003
># whoami
>mikaelh
># UID=0
># whoami
>mikaelh
>
>another session
># whoami
>root
># EUID=1003
># whoami
>mikaelh
># EUID=0
># whoami
>root
>
>
>--
>Mikael Magnusson

Thanks.  Also note:

0 516 Z% grep setuid /tmp/zshall.1
1 517 Z%     

:)

Dave


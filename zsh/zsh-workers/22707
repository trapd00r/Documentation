From zsh-workers-return-22707-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 14 23:12:18 2006
Return-Path: <zsh-workers-return-22707-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15784 invoked from network); 14 Sep 2006 23:12:17 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 14 Sep 2006 23:12:17 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46278 invoked from network); 14 Sep 2006 23:12:11 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Sep 2006 23:12:11 -0000
Received: (qmail 7804 invoked by alias); 14 Sep 2006 23:12:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22707
Received: (qmail 7794 invoked from network); 14 Sep 2006 23:12:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 14 Sep 2006 23:12:06 -0000
Received: (qmail 46006 invoked from network); 14 Sep 2006 23:12:06 -0000
Received: from smtp4-g19.free.fr (212.27.42.30)
  by a.mx.sunsite.dk with SMTP; 14 Sep 2006 23:12:06 -0000
Received: from localhost (evr91-1-82-227-12-160.fbx.proxad.net [82.227.12.160])
	by smtp4-g19.free.fr (Postfix) with ESMTP id 990DB4ED04
	for <zsh-workers@sunsite.dk>; Fri, 15 Sep 2006 01:12:05 +0200 (CEST)
Date: Fri, 15 Sep 2006 01:12:05 +0200
From: "arno." <arno.@no-log.org>
To: zsh-workers@sunsite.dk
Subject: setopt autocontinue doesn't work
Message-ID: <20060914231205.GA10768@localhost.localdomain>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="rwEMma7ioTxnRzrJ"
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)


--rwEMma7ioTxnRzrJ
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,
setopt autocontinue doesn't work

% setopt autocontinue  =20
% [[ -o autocontinue ]]
% print $?
1

That's because in function execcmd in file Src/exec.c, AUTOCONTINUE=20
value is saved :
oautocont =3D opts[AUTOCONTINUE]; (l 1841)
command is executed, and autocontinue is then restored :
opts[AUTOCONTINUE] =3D oautocont; (l 2679)
It happens to for every command, even when command is : setopt=20
autocontinue

so, assignement works well, at line, 2678, AUTOCONTINUE is set=20
(isset(AUTOCONTINUE) returns true), but that results is erased.

What is the point of saving and restoring autocontinue in that function?

Is there a way not to restore autocontinue if command was setopt=20
autocontinue ?

hope that helps

arno

--rwEMma7ioTxnRzrJ
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (GNU/Linux)

iD8DBQFFCeHFiH9aBScBsrMRAsopAJ402ISCXvxKuw6gb48HXOPlQEbsWgCgghEp
VpnAiVBjyCtHx+MVPfuaF6U=
=2GCh
-----END PGP SIGNATURE-----

--rwEMma7ioTxnRzrJ--


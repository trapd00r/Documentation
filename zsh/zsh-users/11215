From zsh-users-return-11215-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 20 23:26:03 2007
Return-Path: <zsh-users-return-11215-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21073 invoked from network); 20 Feb 2007 23:25:57 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Feb 2007 23:25:57 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 97589 invoked from network); 20 Feb 2007 23:25:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Feb 2007 23:25:51 -0000
Received: (qmail 29003 invoked by alias); 20 Feb 2007 23:25:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11215
Received: (qmail 28853 invoked from network); 20 Feb 2007 23:25:33 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Feb 2007 23:25:33 -0000
Received: (qmail 95006 invoked from network); 20 Feb 2007 23:25:32 -0000
Received: from mtaout01-winn.ispmail.ntl.com (81.103.221.47)
  by a.mx.sunsite.dk with SMTP; 20 Feb 2007 23:25:26 -0000
Received: from aamtaout03-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070220232525.VDYW2951.mtaout01-winn.ispmail.ntl.com@aamtaout03-winn.ispmail.ntl.com>;
          Tue, 20 Feb 2007 23:25:25 +0000
Received: from pwslaptop.csr.com ([82.6.97.145])
          by aamtaout03-winn.ispmail.ntl.com with SMTP
          id <20070220232525.UCEF26699.aamtaout03-winn.ispmail.ntl.com@pwslaptop.csr.com>;
          Tue, 20 Feb 2007 23:25:25 +0000
Date: Tue, 20 Feb 2007 23:24:54 +0000
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: "Pax Unix" <paxunix@gmail.com>
Cc: zsh-users@sunsite.dk
Subject: Re: parameter expansion within a string not working?
Message-Id: <20070220232454.87ebef84.p.w.stephenson@ntlworld.com>
In-Reply-To: <44613de00702201440k44c8087fy17b6616be11de1be@mail.gmail.com>
References: <44613de00702201440k44c8087fy17b6616be11de1be@mail.gmail.com>
X-Mailer: Sylpheed version 2.2.10 (GTK+ 2.10.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

On Tue, 20 Feb 2007 17:40:20 -0500
"Pax Unix" <paxunix@gmail.com> wrote:
> To demonstrate:
> 
> $ zsh -f -c 'blah=(xa xb ya yb); print ${(t)blah}; print 0${blah:#x*}0'
> array
> 0ya yb0
> 
> as expected.  However:
> 
> $ zsh -f -c 'blah=(xa xb ya yb); print ${(t)blah}; print "0${blah:#x*}0"'
> array
> 00
> 
> which I found rather surprising.  Am I missing something regarding
> expansions within double-quotes?

It's a bit counterintuitive because the double quotes take effect
immediately on the substitution.  So what you're matching on is
the string "xa xb ya yb", the whole of which is removed.  You can force
it to keep the array as an array despite the double quotes with the (@)
flag:

% print "0${(@)blah:#x*}0"
0ya yb0

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


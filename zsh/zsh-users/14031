From zsh-users-return-14031-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 11 18:07:31 2009
Return-Path: <zsh-users-return-14031-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9170 invoked from network); 11 Apr 2009 18:07:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Apr 2009 18:07:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 39704 invoked from network); 11 Apr 2009 18:07:20 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Apr 2009 18:07:20 -0000
Received: (qmail 12912 invoked by alias); 11 Apr 2009 18:07:06 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14031
Received: (qmail 12900 invoked from network); 11 Apr 2009 18:07:06 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Apr 2009 18:07:06 -0000
Received: from pepin.polanet.pl (pepin.quarto.pl [193.34.52.2])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 58A6982D4B6A
	for <zsh-users@sunsite.dk>; Sat, 11 Apr 2009 20:07:02 +0200 (CEST)
Received: by pepin.polanet.pl (Postfix, from userid 1090)
	id 20A2A671BC; Sat, 11 Apr 2009 20:07:05 +0200 (CEST)
Date: Sat, 11 Apr 2009 20:07:05 +0200
From: Tomasz Pala <gotar@polanet.pl>
To: zsh-users@sunsite.dk
Subject: Re: completion for ipset
Message-ID: <20090411180705.GA27075@polanet.pl>
References: <20080529123042.GA24187@pepin.polanet.pl> <20080623170935.GA7408@pepin.polanet.pl>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="PNTmBPCT7hxwcZjr"
Content-Disposition: inline
In-Reply-To: <20080623170935.GA7408@pepin.polanet.pl>
User-Agent: Mutt/1.4.2.3i
X-Virus-Scanned: ClamAV 0.92.1/9224/Fri Apr 10 23:49:29 2009 on bifrost
X-Virus-Status: Clean


--PNTmBPCT7hxwcZjr
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: inline

Hi,

here goes updated ipset completion code.

-- 
Tomasz Pala <gotar@pld-linux.org>

--PNTmBPCT7hxwcZjr
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: attachment; filename="zsh-ipset.patch"

--- _ipset.orig	2008-11-30 15:31:11.000000000 +0100
+++ _ipset	2009-04-11 20:03:40.000000000 +0200
@@ -11,7 +11,11 @@
 		'iphash[Hash of IP addresses]' \
 		'nethash[Hash of network addresses]' \
 		'ipporthash[Hash of IP address and port pairs]' \
-		'iptree[Tree of IP addresses, optionally with timeout]'
+		'ipportiphash[Hash of IP address,port and IP address triples]' \
+		'ipportnethash[Hash of IP address,port and network address triples]' \
+		'iptree[Tree of IP addresses, optionally with timeout]' \
+		'iptreemap[Tree of IP addresses or networks]' \
+		'setlist[List of sets]'
 }
 
 if [[ $words[2] = (-q|--quiet) ]]; then
@@ -77,12 +81,18 @@
 	  nethash)
 		args=(	$hash )
 	  ;;
-	  ipporthash)
+	  ipporthash|ipportiphash|ipportnethash)
 		args=(	$from_to $hash )
 	  ;;
 	  iptree)
 	  	args=(	'--timeout[Timeout value for the entries in seconds (default 0)]:timeout' )
 	  ;;
+	  iptreemap)
+	  	args=(	'--gc[Garbage collection inverval (default 300 seconds)]:timeout' )
+	  ;;
+	  setlist)
+	  	args=(	'--size[Size of the new setlist (default 8)]:size' )
+	  ;;
 	esac
   ;;
   -T|--test)

--PNTmBPCT7hxwcZjr--


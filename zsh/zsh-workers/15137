From zsh-workers-return-15137-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 27 14:31:03 2001
Return-Path: <zsh-workers-return-15137-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2868 invoked from network); 27 Jun 2001 14:31:02 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Jun 2001 14:31:02 -0000
Received: (qmail 1099 invoked by alias); 27 Jun 2001 14:30:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15137
Received: (qmail 1069 invoked from network); 27 Jun 2001 14:30:12 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <Tomi.Vainio@Sun.COM>
Cc: <zsh-workers@sunsite.dk>
Subject: RE: Zsh 4.0.2 + 64bit Solaris 8 Forte 6.1 compiler
Date: Wed, 27 Jun 2001 18:30:48 +0400
Message-ID: <004a01c0ff15$c20557a0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <15161.60034.565764.974647@gargle.gargle.HOWL>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006
Importance: Normal


>  >
> Everything is moving to 64-bit environment and it's much easier to
> have only one set of local libraries for free software.  For example
> compiling something like xemacs I will need ten extra libraries and I
> rather compile only 64-bit versions if I need these even once and
> don't touch 32-bit stuff at all.
>

O.K., granted. But note, that it is not a simple. Currently zsh tries to
autodetect compiler flags (including those to enable LFS mode). But it does
it only if you did not explicitly specify any flags yourself. It is near to
impossible to write configure that wil parse e.g. LDFLAGS and infer
DLLDFLAGS. So, if you specify LDFLAGS you must specify DLLDFLAGS.

So, what you actually want is the way to specify "I want LP64 mode". It was
briefly discussed here when LFS support was added. The problem is, while LFS
support is more or less standardized (via getconf interface), there is no
standard way to enable LP64 mode. We'd end up listing every possible
combination of system/compiler.

> Firstly I thought you like to see how my environment is probed but you
> like to get piece of code how to detect Sun 64-bit Forte compiler.
>

Yes. I do not have either Solaris or Forte compiler so I cannot do it
myself. As said, either describe how your compiler can be detected or, if it
is confirmed that -KPIC is supported by all compilers on Solaris, we can
change it.

-andrej



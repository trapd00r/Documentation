From zsh-users-return-9903-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 10 18:04:28 2006
Return-Path: <zsh-users-return-9903-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21321 invoked from network); 10 Feb 2006 18:04:23 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Feb 2006 18:04:23 -0000
Received: (qmail 15664 invoked from network); 10 Feb 2006 18:04:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Feb 2006 18:04:15 -0000
Received: (qmail 19818 invoked by alias); 10 Feb 2006 18:04:08 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9903
Received: (qmail 19809 invoked from network); 10 Feb 2006 18:04:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Feb 2006 18:04:07 -0000
Received: (qmail 14586 invoked from network); 10 Feb 2006 18:04:07 -0000
Received: from cluster-c.mailcontrol.com (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 10 Feb 2006 18:04:06 -0000
Received: from exchange03.csr.com (uuk202166.uk.customer.alter.net [62.189.241.194] (may be forged))
	by rly09c.srv.mailcontrol.com (MailControl) with ESMTP id k1AI43hh029828
	for <zsh-users@sunsite.dk>; Fri, 10 Feb 2006 18:04:04 GMT
Received: from csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 10 Feb 2006 18:04:03 +0000
To: zsh-users@sunsite.dk
Subject: Re: print entire array *with* subscript? 
In-reply-to: <20060210175012.GA10021@princo> 
References: <20060210175012.GA10021@princo>
Comments: In-reply-to Jean-Rene David <jrdavid@magma.ca>
   message dated "Fri, 10 Feb 2006 12:50:12 -0500."
Date: Fri, 10 Feb 2006 18:03:54 +0000
From: Peter Stephenson <pws@csr.com>
Message-ID: <EXCHANGE03XHbQbilav0000bbe8@exchange03.csr.com>
X-OriginalArrivalTime: 10 Feb 2006 18:04:03.0020 (UTC) FILETIME=[601878C0:01C62E6C]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-06-00-02 (www.mailcontrol.com) on 10.67.0.119

Jean-Rene David wrote:
> It would be nice to be able to do this:
> 
> print ${(k)files}
> 1 foo.h 2 foo.c 3 bar.h 4 bar.c
> 
> instead of:
> 
> for f in {1..$#files}; do 
>   print $f ${files[$f]};
> done
> 
> Not a big deal. Just asking because that's what I
> thought the documentation meant.

I think the documentation for the (k) flag is (for once) reasonably
clear and accurate:

       k      If  name  refers  to  an  associative array, substitute the keys
              (element names) rather than the values of  the  elements.   Used
              with  subscripts  (including  ordinary arrays), force indices or
              keys to be substituted even if the subscript form refers to val-
              ues.   However,  this  flag  may  not be combined with subscript
              ranges.

This means you can use it with normal arrays, but only with individual
indices.  So:

% print ${(k)files[(r)foo.c]}
2

but it doesn't work with a subscript nor with a range nor with the *
and @ subscripts (which are special ranges).

That doesn't mean this is convenient...

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


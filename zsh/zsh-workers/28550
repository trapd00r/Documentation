From zsh-workers-return-28550-mason-zsh=primenet.com.au@zsh.org Wed Dec 29 14:59:56 2010
Return-Path: <zsh-workers-return-28550-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28494 invoked by alias); 29 Dec 2010 14:59:56 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28550
Received: (qmail 18634 invoked from network); 29 Dec 2010 14:59:45 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,T_TO_NO_BRKTS_FREEMAIL autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.210.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=sXcoH7zjPIPPTXSKkgp8jYkNBxcsl08t26KMq0N1vfs=;
        b=Acl06ihBIBuFKvjnhtdnmgU3MozwYV0UiCgQ8Rggg1ArUf177l5C8h+gmtGes4maGA
         8Sr0dgb/i7PqTa6JxnDpAbJbEBeOlzXmfFHdflaoNf0Jxco44E7hPrNmUF1bcmgfL7ZU
         HN2Kduk4rTSvHq6JTmPrsKgBqbrgmWsM3x8nk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Qit7RnHpgtax0tfR+zE779q9GCcUdZuVSoNHR8wJpV8C5UvIF1Os4gmjG2QYe88GlV
         /d6seDdN4saLT9suDzLfJtIfWf3FRtW4xrc1F1/Hv5v3+HZEjCr7khNHG/n1YJieIMD0
         r4YcC4dK/DskqKuZGsdXgH8kIA9iNqXSjPufY=
MIME-Version: 1.0
Date: Wed, 29 Dec 2010 15:51:35 +0100
Message-ID: <AANLkTimOap2E8qTY=Mykcn2zh+U-PNSBYqxtD5noMgot@mail.gmail.com>
Subject: bug: DIR/*<tab> expansion doesn't work with directories with
 apostrophe in the name
From: =?UTF-8?B?SHJ2b2plIE5pa8WhacSH?= <hniksic@gmail.com>
To: zsh-workers@zsh.org
Content-Type: text/plain; charset=UTF-8

The zsh FAQ states that this is the address for reporting zsh bugs. As
a Ubuntu user I've reported this bug in launchpad, but I'm not
convinced that launchpad developers forward their bugs upstream, so
I'm Cc'ing it here. Please ignore if it has already been reported.


When the directory contains a single quote (apostrophe) in its name,
pressing the tab key to expand dir/* into a list of files no longer
works. What happens instead is that the tab key doesn't do anything
while cursor is inside the dir/* word.

This worked as expected in previous versions of zsh. In zsh 4.3.10
(specifically 4.3.10-14ubuntu1, Ubuntu maverick) it works only for
directories without apostrophes in the name. I discovered it while
trying to choose mp3s to queue in a music player, with the mp3s
residing in a directory with apostrophe in the name.

Here is a recipe to repeat the bug:

$ zsh -f
mulj% mkdir "a'b"
mulj% touch "a'b"/{1,2,3}
mulj% ls a\'b/* # press TAB with cursor immediately after the *, nothing happens
# pressing enter correctly executes the (expanded) command:
a'b/1 a'b/2 a'b/3
mulj% mv a\'b ab
mulj% ls ab/* # now pressing TAB with cursor immediately after the * correctly
                    # expands ab/* to ab/1 ab/2 ab/3
mulj% ls ab/1 ab/2 ab/3


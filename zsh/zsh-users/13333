From zsh-users-return-13333-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 16 16:58:04 2008
Return-Path: <zsh-users-return-13333-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4236 invoked from network); 16 Oct 2008 16:57:51 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.7 required=5.0 tests=AWL,BAYES_00,MISSING_HEADERS
	autolearn=no version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Oct 2008 16:57:51 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 15248 invoked from network); 16 Oct 2008 16:57:12 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Oct 2008 16:57:12 -0000
Received: (qmail 14638 invoked by alias); 16 Oct 2008 16:56:29 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13333
Received: (qmail 14622 invoked from network); 16 Oct 2008 16:56:28 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 16 Oct 2008 16:56:28 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 909A780524C5
	for <zsh-users@sunsite.dk>; Thu, 16 Oct 2008 18:56:24 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly08d.srv.mailcontrol.com (MailControl) with ESMTP id m9GGuNSu021358
	for <zsh-users@sunsite.dk>; Thu, 16 Oct 2008 17:56:23 +0100
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 16 Oct 2008 17:56:23 +0100
Date: Thu, 16 Oct 2008 17:56:18 +0100
From: Peter Stephenson <pws@csr.com>
Cc: zsh-users@sunsite.dk
Subject: Re: Just for fun
Message-ID: <20081016175618.32116963@news01>
In-Reply-To: <081016080548.ZM24644@torch.brasslantern.com>
References: <081016080548.ZM24644@torch.brasslantern.com>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 16 Oct 2008 16:56:23.0677 (UTC) FILETIME=[1EF322D0:01C92FB0]
X-Scanned-By: MailControl A-08-50-15 (www.mailcontrol.com) on 10.68.0.118
X-Virus-Scanned: ClamAV 0.92.1/8434/Thu Oct 16 12:16:49 2008 on bifrost
X-Virus-Status: Clean

On Thu, 16 Oct 2008 08:05:47 -0700
Bart Schaefer <schaefer@brasslantern.com> wrote:
> A long time ago Alan Third posted the following function to zsh-users.
> Anyone want to have a stab at updating it to use the new prompt coloring
> code for better accuracy?
> 
> function most_useless_use_of_zsh {
>     local lines columns colour a b p q i pnew
>     ((columns=COLUMNS-1, lines=LINES-1, colour=0))
>     for ((b=-1.5; b<=1.5; b+=3.0/lines)) do
>         for ((a=-2.0; a<=1; a+=3.0/columns)) do
>             for ((p=0.0, q=0.0, i=0; p*p+q*q < 4 && i < 32; i++)) do
>                 ((pnew=p*p-q*q+a, q=2*p*q+b, p=pnew))
>             done
>             ((colour=(i/4)%8))
>             echo -n "\\e[4${colour}m " 
>         done
>         echo
>     done
> }

Hmmm.... trivially tweaking it to use more colours is easy (I'm not sure
that "colours*4" and "(i/4)%colours" are still appropriate, I haven't done any
of the maths, just changed the obvious bits).  You do have to remember that if
you're printing " " that changing the foreground colour is a bit pointless,
however.  If you've really got lots of colours you could probably do something
cleverer with the RGB space.

The trouble is the only interesting part of the Mandelbrot set is near
the border, so without some cleverer change it doesn't actually look very
different on this scale---most of it is still (on my terminal, at least) either
red or black.

Maybe the thing to do is to narrow in on one particular part of the
boundary (and upgrade your CPU).

Unfortunately it's time I did something else...

function most_useless_use_of_zsh {
    integer colours

    if (( $# )); then
      colours=$1
    else
      colours=$(echotc Co) || return 1
    fi

    local lines columns colour a b p q i pnew
    ((columns=COLUMNS-1, lines=LINES-1, colour=0))
    for ((b=-1.5; b<=1.5; b+=3.0/lines)) do
        for ((a=-2.0; a<=1; a+=3.0/columns)) do
            for ((p=0.0, q=0.0, i=0; p*p+q*q < 4 && i < colours*4; i++)) do
                ((pnew=p*p-q*q+a, q=2*p*q+b, p=pnew))
            done
            ((colour=(i/4)%colours))
	    print -nP "%${colour}K %k"
        done
        echo
    done
}

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


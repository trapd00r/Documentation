From zsh-workers-return-12310-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 19 09:14:30 2000
Return-Path: <zsh-workers-return-12310-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27489 invoked from network); 19 Jul 2000 09:14:24 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jul 2000 09:14:24 -0000
Received: (qmail 1794 invoked by alias); 19 Jul 2000 09:13:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12310
Received: (qmail 1785 invoked from network); 19 Jul 2000 09:13:56 -0000
Date: Wed, 19 Jul 2000 10:13:29 +0100
From: Peter Stephenson <pws@cambridgesiliconradio.com>
Subject: Re: excessive memory usage?
In-reply-to: "Your message of Wed, 19 Jul 2000 04:59:10 EDT."
 <20000719045910.A2446@scowler.net>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FXX006FNTMGB9@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

> I received this bug report last week.  Due to lack of time,
> I haven't had a chance to look into it thoroughly, but I
> just tried it out, and it did suck up (rather slowly) about
> 42 megs (temporarily) before it finally completed.
...
> ----- Forwarded message -----
...
> _wanted dictwords expl dictword \
>   compadd -M 'm:{a-zA-Z}={A-Za-z} r:|=*' "$@" - "$dictwords[@]"

Change the second line to:

  compadd -M 'm:{a-zA-Z}={A-Za-z} r:|=*' -a "$@" - dictwords     

which is a good deal faster --- haven't checked the memory, but that ought
to be more manageable to.  This is why the -a option was added.

-- 
Peter Stephenson <pws@cambridgesiliconradio.com>
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


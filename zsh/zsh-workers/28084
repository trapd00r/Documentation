From zsh-workers-return-28084-mason-zsh=primenet.com.au@zsh.org Thu Jul 15 22:50:00 2010
Return-Path: <zsh-workers-return-28084-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18272 invoked by alias); 15 Jul 2010 22:49:59 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28084
Received: (qmail 8307 invoked from network); 15 Jul 2010 22:49:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at m.gmane.org designates 80.91.229.12 as permitted sender)
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-workers@zsh.org
From: Seth House <seth@eseth.com>
Subject: [PATCH 1/2] Cleaned up =?utf-8?b?dmNzX2luZm8tZXhhbXBsZXM=?= "Hooks" section
Date: Thu, 15 Jul 2010 22:34:15 +0000 (UTC)
Lines: 105
Message-ID: <loom.20100716T000226-14@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 65.46.56.18 (Mozilla/5.0 (X11; U; Linux x86_64; en-US) AppleWebKit/533.5 (KHTML, like Gecko) Chrome/5.0.377.0 Safari/533.5)

When quickly browsing vcs_info-examples the section delimiters were a
little confusing. Mercurial didn't need it's own section inside of
Hooks, for example. This removes the Mercurial-specific section and adds
an 'hg' or 'git' prefix to each example.
---
 Misc/vcs_info-examples |   58 ++++++++++++++++++++++++-----------------------
 1 files changed, 30 insertions(+), 28 deletions(-)

diff --git a/Misc/vcs_info-examples b/Misc/vcs_info-examples
index 742ba34..1c15972 100644
--- a/Misc/vcs_info-examples
+++ b/Misc/vcs_info-examples
@@ -67,29 +67,6 @@ precmd() {
 }
 
 
-### Hooks ####################################################################
-
-# A number of examples in this file revolve around the concept of `hooks'
-# in vcs_info. Hooks are places in vcs_info where you may put in your
-# own code to achieve something "totally awesome"[tm].
-#
-# Hooks can be confusing. It's hard to keep track of what's going on.
-# In order to help you with that vcs_info can output some debugging
-# information when it processes hooks. This will tell you which hooks
-# are being run and which functions are attempted to run (and if the
-# functions in question were found or not).
-#
-# If you feel like you need to see what's attempted and where, I suggest
-# you use the following line and see for yourself.
-zstyle ':vcs_info:*+*:*' debug true
-
-# You can just comment it out (or disable it) again when you've seen enough.
-# Debugging is off by default - of course.
-zstyle ':vcs_info:*+*:*' debug false
-
-# Further down, every example that uses a function named `+vi-*' uses a hook.
-
-
 ### check-for-changes just in some places ####################################
 
 # Some backends (git and mercurial at the time of writing) can tell you
@@ -126,21 +103,46 @@ function estyle-cfc() {
 }
 
 
-###  Mercurial Tips  #########################################################
+### Hook Examples ############################################################
 
-### Truncate Long Hashes  ####################################################
+# A number of examples in this file revolve around the concept of `hooks'
+# in vcs_info. Hooks are places in vcs_info where you may put in your
+# own code to achieve something "totally awesome"[tm].
+#
+# Hooks can be confusing. It's hard to keep track of what's going on.
+# In order to help you with that vcs_info can output some debugging
+# information when it processes hooks. This will tell you which hooks
+# are being run and which functions are attempted to run (and if the
+# functions in question were found or not).
+#
+# If you feel like you need to see what's attempted and where, I suggest
+# you use the following line and see for yourself.
+zstyle ':vcs_info:*+*:*' debug true
+
+# You can just comment it out (or disable it) again when you've seen enough.
+# Debugging is off by default - of course.
+zstyle ':vcs_info:*+*:*' debug false
+
+# Further down, every example that uses a function named `+vi-*' uses a hook.
+
+
+### Truncate Long Hashes
 
 ### Truncate a long hash to 12 characters (which is usually unique enough)
 # NOTE: On Mercurial this will hide the second parent hash during a merge
-# (see an example in the Mercurial section below on how to retain both parents)
+# (see an example below on how to retain both parents)
 # Use zformat syntax (remember %i is the hash): %12.12i
 
+# git:
+zstyle ':vcs_info:git*' formats "(%s)-[%12.12i %b]-" # hash & branch
+
+# hg:
 # First, remove the hash from the default 'branchformat':
 zstyle ':vcs_info:hg:*' branchformat '%b'
 # Then add the hash to 'formats' as %i and truncate it to 12 chars:
 zstyle ':vcs_info:hg:*' formats ' (%s)-[%12.12i %b]-'
 
-### Truncate long hash to 12-chars but also allow for multiple parents
+### hg: Truncate long hash to 12-chars but also allow for multiple parents
 # Hashes are joined with a + to mirror the output of `hg id`.
 zstyle ':vcs_info:hg+set-hgrev-format:*' hooks hg-shorthash
 function +vi-hg-shorthash() {
@@ -153,7 +155,7 @@ function +vi-hg-shorthash() {
     ret=1
 }
 
-### Show marker when the working directory is not on a branch head
+### hg: Show marker when the working directory is not on a branch head
 # This may indicate that running `hg up` will do something
 # NOTE: the branchheads.cache file is not updated with every Mercurial
 # operation, so it will sometimes give false positives. Think of this more as a
-- 
1.7.1.1



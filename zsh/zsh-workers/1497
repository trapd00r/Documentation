From hzoli@cs.elte.hu Tue Jul  2 07:10:00 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id HAA07730 for <mason@werple.mira.net.au>; Tue, 2 Jul 1996 07:09:53 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA16147; Mon, 1 Jul 1996 17:02:23 -0400 (EDT)
Resent-Date: Mon, 1 Jul 1996 17:02:23 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199607012102.XAA09412@bolyai.cs.elte.hu>
Subject: Re: cshjunkieparen bothers me (and always has)
To: schaefer@nbn.com
Date: Mon, 1 Jul 1996 23:02:11 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <960701121913.ZM617@candle.brasslantern.com> from Bart Schaefer at "Jul 1, 96 12:19:11 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"A-Nf1.0.Dy3.Up3sn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1497
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 3514
Status: OR

> Here's a patch that does just that -- removes cshjunkieparen, leaving the
> associated syntax supported.  This patch also includes, but comments out,
> the code to implement cshjunkietests.
> 
> No man page patch here, as I'm offering this only for consideration at
> this point.

I approve this without cshjunkietests since it makes the code simpler.  The
other reason is that the while list; { ... } syntax always worked.

Below is the documentation.  I do not know much about nroff so if something
is wrong in it, tell me.  I'll be away till thursday.  Than I'll release
3.0-per2.  I've already fixed most signal related bugs and made ulimit bash
compatible.

Zoltan

*** Doc/zshoptions.man	1996/06/26 08:58:31	2.12
--- Doc/zshoptions.man	1996/07/01 20:49:45
***************
*** 126,136 ****
  "\fIlist\fP; \fBend\fP" instead of
  "\fBdo\fP \fIlist\fP; \fBdone\fP".
  .TP
- \fBCSH_JUNKIE_PAREN\fP
- Allow \fBfor\fP, \fBif\fP and \fBwhile\fP loops where the argument
- list is given in parentheses.  Otherwise, the parentheses will be
- treated as specifying a subshell.
- .TP
  \fBCSH_JUNKIE_QUOTES\fP
  Complain if a quoted expression runs off the end of a line;
  prevent quoted expressions from containing unescaped newlines.
--- 126,131 ----
*** Doc/zshmisc.man	1996/06/26 08:58:31	2.8
--- Doc/zshmisc.man	1996/07/01 20:48:30
***************
*** 250,257 ****
  of \fIexp\fP.
  .SH "ALTERNATE FORMS FOR COMPLEX COMMANDS"
  .PP
! Many of zsh's complex commands have alternate forms.  These forms
! require that the option \fBCSH_JUNKIE_PAREN\fP  be set.  These particular
  versions of complex commands should be considered deprecated and may be
  removed in the future.  The versions in the previous section should be
  preferred instead.
--- 250,256 ----
  of \fIexp\fP.
  .SH "ALTERNATE FORMS FOR COMPLEX COMMANDS"
  .PP
! Many of zsh's complex commands have alternate forms.  These particular
  versions of complex commands should be considered deprecated and may be
  removed in the future.  The versions in the previous section should be
  preferred instead.
***************
*** 259,269 ****
  .RS
  .PD 0
  .TP
! \fBif\fP \fB(\fP \fIlist\fP \fB) {\fP
  .TP
  \fIlist\fP
  .TP
! \fB} elif (\fP \fIlist\fP \fB) {\fP
  .TP
  \fIlist\fP
  .TP
--- 258,272 ----
  .RS
  .PD 0
  .TP
! \fBif\fP \fIlist\fP
! .TP
! \fB{\fP
  .TP
  \fIlist\fP
  .TP
! \fB} elif \fIlist\fP
! .TP
! \fB{\fP
  .TP
  \fIlist\fP
  .TP
***************
*** 273,286 ****
  .TP
  \fB}\fP
  .PD
! An alternate form of \fBif\fP.  The parentheses surrounding \fIlist\fP
! can be omitted if the only command in the list is a conditional expression
! of the form [[ exp ]].
  .PP
  .PD 0
  .TP
! \fBif (\fP \fIlist\fP \fB)\fP \fIsublist\fP
! A shorter form of previous one.
  .PD
  .PP
  .PD 0
--- 276,290 ----
  .TP
  \fB}\fP
  .PD
! An alternate form of \fBif\fP.
  .PP
  .PD 0
  .TP
! \fBif\fP \fIlist\fP
! .TP
! \fIsublist\fP
! A shorter form of previous one which only works in \fBNO_SHORT_LOOPS\fP
! is not set.
  .PD
  .PP
  .PD 0
***************
*** 297,307 ****
  .TP
  \fBfor\fP \fIname\fP \fB(\fP \fIword\fP ... \fB) \fIsublist\fP
  .PD
! A shorter form of the previous one.
  .PP
  .PD 0
  .TP
! \fBwhile (\fP \fIlist\fP \fB) {\fP
  .TP
  \fIlist\fP
  .TP
--- 301,314 ----
  .TP
  \fBfor\fP \fIname\fP \fB(\fP \fIword\fP ... \fB) \fIsublist\fP
  .PD
! A shorter form of the previous one which only works in \fBNO_SHORT_LOOPS\fP
! is not set.
  .PP
  .PD 0
  .TP
! \fBwhile\fP \fIlist\fP
! .TP
! \fB{\fP
  .TP
  \fIlist\fP
  .TP



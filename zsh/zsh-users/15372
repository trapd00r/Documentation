From zsh-users-return-15372-mason-zsh=primenet.com.au@zsh.org Tue Sep 07 18:59:53 2010
Return-Path: <zsh-users-return-15372-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12358 invoked by alias); 7 Sep 2010 18:59:53 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15372
Received: (qmail 14789 invoked from network); 7 Sep 2010 18:59:50 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
Date: Tue, 7 Sep 2010 14:59:21 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: "Peter A. Castro" <doctor@fruitbat.org>
cc: reckoner <reckoner@gmail.com>, zsh-users@zsh.org
Subject: Re: cygwin chere not working with zsh version 4.3.10 but worked for
 4.3.9
In-Reply-To: <alpine.LNX.2.00.1009071044110.3510@gremlin.fruitbat.org>
Message-ID: <alpine.LNX.2.01.1009071441090.4535@hp>
References: <AANLkTi=YK1nSCnVToHe-E9RUccu+WCMvp46-B6CdK7sE@mail.gmail.com> <alpine.LNX.2.00.1009021230450.3460@gremlin.fruitbat.org> <alpine.LNX.2.01.1009021701530.4535@hp> <4C863E1C.4060907@gmail.com>
 <alpine.LNX.2.00.1009071044110.3510@gremlin.fruitbat.org>
User-Agent: Alpine 2.01 (LNX 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 7 Sep 2010, Peter A. Castro wrote:

> On Tue, 7 Sep 2010, reckoner wrote:
> 
> > Dear Ben:
> > 
> > It turns out that commenting out CHERE_INVOKING fixed problem.

(To give credit where it's due: Peter originally pointed out CHERE_INVOKING.)


> > Evidently, there was no CHERE_INVOKING environment variable.
> > 
> > Mysterious.
> 
> This implies a change to chere, rather than zsh, but I don't think 
> that's the case, since you mentioned it worked previously with zsh 
> 4.3.9.  The code in /etc/zprofile concerning CHERE_INVOKING has not 
> changed between versions.  And yet, Ben mentioned 4.3.10 working with 
> chere for him as is.  This will require some debugging, I suppose.

As another data point, I added:
echo CHERE_INVOKING=X${CHERE_INVOKING}X

to my /etc/zprofile, and it echoes:
CHERE_INVOKING=XtrueX

So the versions I'm using seem to pass it properly.


> Is there anything special about your cygwin installation?  Are using a 
> mix of older Cygwin packages with newer Cygwin packages?  Like, maybe 
> chere is 1.5 based?  Zsh 4.3.9 that's in the repository was built 
> under Cygwin 1.5, so there might be some relationship if chere is also 
> 1.5 based.

Beyond that, the next thing I'd suspect is something in your own startup 
files.  (Don't recall whether you mentioned them.)  Before this thread, 
I didn't know 'chere' existed, and had my own function to drop me into 
my home directory on my old Win XP Cygwin installation (It used to start 
me in /usr/bin, presumably the working directory for whatever Zsh 
shortcut I had setup.  Worked out-of-the-box on Win7, so I never 
installed my hack.)  What Windows version are you running?  Maybe it's a 
factor.

A stretch, and mostly out of curiosity, do you have anything in 
/usr/share/zsh/site-functions ?

-- 
Best,
Ben


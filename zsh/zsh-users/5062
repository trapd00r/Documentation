From zsh-users-return-5062-mason-zsh=primenet.com.au@sunsite.dk Mon Jun 17 05:56:15 2002
Return-Path: <zsh-users-return-5062-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1501 invoked from network); 17 Jun 2002 05:56:14 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Jun 2002 05:56:14 -0000
Received: (qmail 8619 invoked by alias); 17 Jun 2002 05:56:03 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5062
Received: (qmail 8606 invoked from network); 17 Jun 2002 05:56:03 -0000
Date: Mon, 17 Jun 2002 00:55:57 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: zsh-users@sunsite.dk
Subject: Re: .zshrc help...
Message-ID: <20020617055557.GE81446@dan.emsphone.com>
References: <20020617052841.GD30974@hq.newdream.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20020617052841.GD30974@hq.newdream.net>
User-Agent: Mutt/1.3.99i
X-OS: FreeBSD 5.0-CURRENT
X-message-flag: Outlook Error

In the last episode (Jun 16), Will Yardley said:
> FreeBSD's most recent release has changed the format for the LSCOLORS
> variable.
> 
> with that in mind, i need some help adjusting my generic .zshrc. 
> 
> i currently use something like this (stolen from someone else) to adjust
> stuff based on my ZSH_VERSION:
> 
> if [[ $ZSH_VERSION == 3.1.<5->* || $ZSH_VERSION == 3.<2->* ||
>       $ZSH_VERSION == <4->* ]]; then
> 
> i'd like to do something similar to this (in concept; obviously it has
> to be something more complex than this).  a good (but simple)
> discsussion of the syntax above would also be helpful....
> 
>                 if [ $(uname -r) <= 4.5 ]; then
>                 LSCOLORS="3x5x2x3x1x464301060203"
>                 elif [ $(uname -r) >= 4.6 ]; then
>                 LSCOLORS="dxfxBxcxbxegedabagacad"
>                 fi

You could use the is-at-least function (included with zsh 3.1.6 and
newer):

  autoload -U is-at-least
  if is-at-least 4.6 $OSTYPE ; then
    # new style
    LSCOLORS="dxfxBxcxbxegedabagacad"
  else
    # Old Style
    LSCOLORS="3x5x2x3x1x464301060203"
  fi

The syntax in the ZSH_VERSION test you pasted uses numeric range globs. 
<-> matches any number, <3-> matches the number 3 and higher, etc. 
That test could have been written more simply:

  if is-at-least 3.1.5 ; then

When passed one argument, is-at-least compares against $ZSH_VERSION.

-- 
	Dan Nelson
	dnelson@allantgroup.com


From zsh-workers-return-9631-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Feb 09 08:27:09 2000
Return-Path: <zsh-workers-return-9631-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4176 invoked from network); 9 Feb 2000 08:27:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Feb 2000 08:27:08 -0000
Received: (qmail 21020 invoked by alias); 9 Feb 2000 08:27:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9631
Received: (qmail 21012 invoked from network); 9 Feb 2000 08:27:01 -0000
Date: Wed, 9 Feb 2000 09:27:00 +0100 (MET)
Message-Id: <200002090827.JAA03378@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Felix Rosencrantz's message of Tue, 8 Feb 2000 23:33:34 -0800
	(PST)
Subject: Re: Clearcase and filename completion


Felix Rosencrantz wrote:

> ...
> 
> Is there anyway to tell path_files to use the existing head of the filename,
> if the head already exists.  So if I type "vi foo.c@@/" and then
> attempt completion, zsh would check to see if foo.c@@/ exists, and if
> it does, accept it, and complete files in that directory.  
> It seems that the code seems to test for existence using globbing, which
> fails in this case.
> 
> I looked at the man page, and looked at trace output to see what styles
> are being checked, and none seemed to be what I wanted.

Currently there is now way to do that except by modifying _path_files
(one of the reasons for how the new completion system looks was that
we wanted to give users the chance to do that).

In this case it should be enough to add another one of those `if's
around line 278 to skip over components that match `[^/]##@@/' and then 
handle them like we handle `(.|..)/' now (line 265).

Hm, I've no idea how widely used Clearcase is -- or other filesystems
that give special semantics to certain names, making globbing fail. If 
there is a cheap way to detect the use of Clearcase I could probably
be convinced to put that into the core. And if there are other uses
for a style that gives a pattern to match pathname components that
should be accepted immediatly, I could easily be convinced to add that 
(somehow that sounds useful, but I can't think of an example).

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


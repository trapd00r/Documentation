From zsh-workers-request@math.gatech.edu Fri Mar 20 14:45:14 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 3622 invoked from network); 20 Mar 1998 14:45:13 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 20 Mar 1998 14:45:13 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id JAA18493;
	Fri, 20 Mar 1998 09:29:20 -0500 (EST)
Resent-Date: Fri, 20 Mar 1998 09:29:06 -0500 (EST)
Date: Fri, 20 Mar 1998 17:26:54 +0300 (MSK)
From: Andrej Borsenkow <borsenkow.msk@sni.de>
X-Sender: bor@itsrm2
Reply-To: borsenkow.msk@sni.de
To: "Eddy J. Gurney" <eddy@ans.net>
cc: zsh-users@math.gatech.edu
Subject: Re: Directory-only `cd' completion via compctl bug
In-Reply-To: <980319144456.ZM19809@gizmo.aa.ans.net>
Message-ID: <Pine.SV4.3.95.980320172520.16527A-100000@itsrm2>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"1076-.0.KW4.nqd4r"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1407
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Thu, 19 Mar 1998, Eddy J. Gurney wrote:

> 
> # Another possibility for cd/pushd is to use it in conjunction with the
> # cdmatch function (in the Functions subdirectory of zsh distribution).
> 
> if [[ -o AUTO_REMOVE_SLASH ]] then
>     compctl -x 'p[2]' -Q -K cdmatch2 - 'S[/][~][./][../]' -g '*(-/)' + \
>         -g '*(-/D)' - 'n[-1,/], s[]' -K cdmatch -q -S '/' -- cd pushd
> else
>     compctl -x 'p[2]' -Q -K cdmatch2 - 'S[/][~][./][../]' -g '*(-/)' + \
>         -g '*(-/D)' - 'n[-1,/], s[]' -K cdmatch -S '/' -- cd pushd
> fi
> 
> This works great... except for one case that I've found so far.
> 
> If you try to CD into a directory with spaces in the name, for some
> reason it escapes the backslashes:
> 
> cd Schoolhouse\\\ Rock\\\ -\\\ America\\\ Rock/
> 

Just tried with zsg-3.1.2-zefram3 (+some patches) and it works quite fine.
I am using the same completion. Which zsh version do you have? Try to
start with vanilla zsh -f (may be, some options you set cause it). 


-------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 796 99 20
SNI ITS Moscow			Tel:   +7 (095) 796 99 24

NERV:  borsenkow.msk		E-Mail: borsenkow.msk@sni.de
-------------------------------------------------------------------------



From zsh-users-return-15660-mason-zsh=primenet.com.au@zsh.org Mon Dec 20 16:16:16 2010
Return-Path: <zsh-users-return-15660-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29104 invoked by alias); 20 Dec 2010 16:16:16 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15660
Received: (qmail 2533 invoked from network); 20 Dec 2010 16:16:14 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <101220081549.ZM26193@torch.brasslantern.com>
Date: Mon, 20 Dec 2010 08:15:47 -0800
In-reply-to: <20101220145918.6dd9ff24@pwslap01u.europe.root.pri>
Comments: In reply to Peter Stephenson <Peter.Stephenson@csr.com>
 "Re: exit status problem" (Dec 20,  2:59pm)
References: <20101203152438.GL1727@prunille.vinc17.org>
	<20101220113433.GA15894@prunille.vinc17.org>
	<20101220145918.6dd9ff24@pwslap01u.europe.root.pri>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: <zsh-users@zsh.org>
Subject: Re: exit status problem
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Dec 20,  2:59pm, Peter Stephenson wrote:
}
} Hmmm.... I've done exactly that and the time *is* updated at 3.

I've tried it as well but it's extremely difficult to tell whether
the time is updated at step 3 or not, because every system where I
try this (including my iMac, though it now occurs to me that may be
a VNC side-effect, so I should check again when I'm physically in
front of it) sends multiple SIGWINCH at the shell, and there's no way
to capture what happens after only one of them.  Vincent seems to be
getting only a single update after the resize is finished.

} Could be terminal specific in some way, but I got this both with urxvt
} and xterm.  More likely system-specific and an fflush() is still
} missing.

I attempted to trace through the prompt computation and printing and
had Vincent try adding a fflush() at a likely-looking spot, but that
didn't change anything.  Someone who has a better handle on how the
prompt display is screen-motion-optimized may have to jump in.

-- 


From borsenkow.msk@sni.de Thu Jul 11 21:29:03 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id VAA07054 for <mason@werple.mira.net.au>; Thu, 11 Jul 1996 21:29:01 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id HAA17370; Thu, 11 Jul 1996 07:02:22 -0400 (EDT)
Resent-Date: Thu, 11 Jul 1996 07:02:22 -0400 (EDT)
Date: Thu, 11 Jul 1996 15:00:05 +0400 (MOW)
From: Andrej Borsenkow <borsenkow.msk@sni.de>
X-Sender: bor@itsrm1
Reply-To: borsenkow.msk@sni.de
To: Zsh workers mailing list <zsh-workers@math.gatech.edu>
Subject: Slight adjustment to aclocal.m4 for SINIX
Message-ID: <Pine.SV4.3.94.960711145204.17975I-100000@itsrm1>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"_ceaW2.0.KF4.uyDvn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1607
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1298
Status: OR

Hi!

The general problem with ANSI C on our system (SINIX MIPS + C-DS):

compiler can be run in several modes - K&R, ANSI, and `strict' ANSI. In
K&R it still accepts prototypes, but doesn't obey ANSI rules - so it
cannot be seen as ANSI conform; in ANSI it is O.K.; in `strict' mode some
headers magically disappear and nothing compiles ;)

configure checks only for STDC and wether protoypes are accepted - thus
our cc fools it in believing it deals with ANSI, ehich is not the case.

I added additional check: if first check for proto is succesful, check, if
compiler *rejects* passing wrong parameter to function. If yes, it could
be seen as ANSi with a little greater probability ;0)

I hope, it won't cause the check fail on other systems - if it will cause
problems, well, I can add check for mips-sni*. But if check fails, it
would mean non-ANSI compiler!!!

-kansi hast to be before -Xc, because -Xc puts cc in `strict' mode
(documented nowhere - but is a fact).

thanks if you accept it

greetings

-------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 252 01 05
SNI ITS Moscow			Tel:   +7 (095) 252 13 88

NERV:  borsenkow.msk		E-Mail: borsenkow.msk@sni.de
-------------------------------------------------------------------------




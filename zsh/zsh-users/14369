From zsh-users-return-14369-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 14 20:30:43 2009
Return-Path: <zsh-users-return-14369-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1442 invoked from network); 14 Sep 2009 20:30:40 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 14 Sep 2009 20:30:40 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 56205 invoked from network); 14 Sep 2009 20:30:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Sep 2009 20:30:30 -0000
Received: (qmail 16632 invoked by alias); 14 Sep 2009 20:30:09 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14369
Received: (qmail 16594 invoked from network); 14 Sep 2009 20:30:08 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 14 Sep 2009 20:30:08 -0000
Received: from rzcomm22.rz.tu-bs.de (rzcomm22.rz.tu-bs.de [134.169.9.68])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id CA0D78026E39
	for <zsh-users@sunsite.dk>; Mon, 14 Sep 2009 22:29:52 +0200 (CEST)
Received: from rzcomm23 (rzcomm23.rz.tu-bs.de [134.169.9.69])
	by rzcomm22.rz.tu-bs.de (8.14.2/8.13.8) with ESMTP id n8EKTq1r011112
	for <zsh-users@sunsite.dk>; Mon, 14 Sep 2009 22:29:52 +0200
	(envelope-from stephan.friedrichs@tu-bs.de)
Received: from [192.168.178.20] (port-92-203-19-147.dynamic.qsc.de [92.203.19.147])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by rzcomm23 (Postfix) with ESMTP id 060A13AA5
	for <zsh-users@sunsite.dk>; Mon, 14 Sep 2009 22:29:51 +0200 (CEST)
Message-ID: <4AAEA7BF.109@tu-bs.de>
Date: Mon, 14 Sep 2009 22:29:51 +0200
From: Stephan Friedrichs <stephan.friedrichs@tu-bs.de>
User-Agent: Thunderbird 2.0.0.23 (X11/20090827)
MIME-Version: 1.0
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: compinit and promptinit fail on virtual terminal
References: <4AAE9931.9030106@tu-bs.de> <alpine.LNX.2.01.0909141535240.2540@hp.internal>
In-Reply-To: <alpine.LNX.2.01.0909141535240.2540@hp.internal>
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: ClamAV 0.94.2/9806/Mon Sep 14 20:37:58 2009 on bifrost
X-Virus-Status: Clean

Benjamin R. Haskell wrote:
> [...]
> 
> (I use paludis, not portage).

I also use paludis :)

And as at least one Gentoo user is reading this: I even tried 'paludis
-i zsh --dl-reinstall always', which recursively rebuilds all
dependencies of zsh (i. e. half of my system), but didn't fix the issue.

> I noticed that zsh-completion has a version number of '20080310', which 
> predates the release of both 4.3.9 and 4.3.10 (so your downgrade to 4.3.9 
> might not have avoided some interaction between the two).  Try backing off 
> to 4.3.6 to see if it still occurs [scratch that, try 4.3.4-r1; even 4.3.6 
> was late March, 2008].  Maybe just try removing zsh-completion entirely, 
> to see if it's the problem.

Unfortunately, no combination of downgrading to app-shells/zsh-4.3.4-r1
and removing zsh-completion doesn't fix the issue.

> Otherwise, my question would be, what other .zsh files might you have?  I 
> didn't pare it down to the minimal .zshrc you posted (I've got too much 
> else going on in mine), but your first post on the Gentoo forum thread 
> looked like it was searching in .config/zsh/modules in your home 
> directory, which seems odd to me.

My usual setup is a ~/.zshrc file, which sources half a dozen files from
~/.config/zsh/ containing the actual configuration (prompt, alias,
completion, ...). But the default gentoo ~/.zshrc (the 'simple .zshrc'
that I posted) also provokes the same error.

//Stephan

-- 

Früher hieß es ja: Ich denke, also bin ich.
Heute weiß man: Es geht auch so.

 - Dieter Nuhr


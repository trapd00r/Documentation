From zsh-workers-request@math.gatech.edu Fri Mar 20 13:30:15 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 29125 invoked from network); 20 Mar 1998 13:30:14 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 20 Mar 1998 13:30:14 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id IAA16783;
	Fri, 20 Mar 1998 08:14:45 -0500 (EST)
Resent-Date: Fri, 20 Mar 1998 08:14:45 -0500 (EST)
Date: Fri, 20 Mar 1998 08:12:43 -0500
Message-Id: <9803201312.AA06169@drkstr>
From: Kevin Sullivan <kevins@drkstr.lkg.dec.com>
To: zsh-users@math.gatech.edu
Cc: zsh-workers@math.gatech.edu
Subject: Re: background jobs / feature request
In-Reply-To: <Pine.NXT.3.96.980318142519.11767B-100000@luomat>
References: <Pine.NXT.3.96.980318142519.11767B-100000@luomat>
Resent-Message-ID: <"4joUA3.0.964.4lc4r"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3810
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Timothy Luoma writes:
> 
> Say I have several background jobs which I can see with jobs -l which are
> either running in & mode or were control-Z'd into submission
> 
> [1]    11381 running    tail -1f /tmp/console.log
> [2]  - 11839 suspended  ls --ignore=.dir.tiff --ignore=.opendir.tiff
> --ignore=.dir3_0.wmd --classify  |
>        11840 suspended  less
> [3]  + 11841 suspended  find / -xdev -newer /etc/sendmail.cw -print
> [4]    11767 suspended  /usr/local/bin/pine -p
> /Users/luomat/Unix/pine/pine.rc -sort arrival -f activ
> 
> 
> 
> Now I want to get #2 back... is there any way that ZSH could be made to
> understand
> 
> fg \[2\]
> 
> or, better
> 
> fg 11839
> 
> ?
> 
> This would be much more convenient, especially in the case of pine where I
> have to type
> 
> fg /usr/local/bin/pine
> 

I use this.

compctl -j -P '%' + -s '`ps x | tail +2 | cut -c1-5`' + \
       -x 's[-] p[1]' -k "($signals[1,-3])" -- kill disown fg

which allows me to tab through current jobs. I got the basis for this
from someone, cann't remember who. It was originally designed for
'kill' only but I extended it for 'disown' and 'fg'. The nice thing
about this particular aproach is I don't have to perform an extra
command and muddy up my display. 

Kevin Sullivan


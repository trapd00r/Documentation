From zsh-users-return-3921-mason-zsh=primenet.com.au@sunsite.dk Fri Jun 08 07:25:12 2001
Return-Path: <zsh-users-return-3921-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19588 invoked from network); 8 Jun 2001 07:25:11 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jun 2001 07:25:11 -0000
Received: (qmail 14795 invoked by alias); 8 Jun 2001 07:24:43 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3921
Received: (qmail 14782 invoked from network); 8 Jun 2001 07:24:43 -0000
Date: Fri, 8 Jun 2001 10:24:54 +0300 (EET DST)
From: Timo Aaltonen <tjaalton@cc.hut.fi>
X-Sender: tjaalton@nexus6.hut.fi
To: zsh-users@sunsite.dk
Subject: AIX-problem: the main module won't link statically
Message-ID: <Pine.LNX.4.10.10106080940330.23818-100000@nexus6.hut.fi>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


	Hi!

  I tried to compile zsh-4.0.1 w. AIX-4.3 (cc version 5), but the main
library (/module?) libzsh-4.0.1.so doesn't get in the binary, and when I
try to run it:

Could not load program ./zsh:
        Dependent module libzsh-4.0.1.so could not be loaded.
Could not load module libzsh-4.0.1.so.
Error was: No such file or directory

..and the binary size is only ~1,5kb (and the library is in ~/lib/zsh,
size ~690kb)

It seems that the linker doesn't function properly:

ld  -s -G -bexpall -lc -o libzsh-4.0.1.so  `cat stamp-modobjs` -ldl -lcurses -lm  -lc
ld: 0711-327 WARNING: Entry point not found: __start
ld: 0711-224 WARNING: Duplicate symbol: .getproc
ld: 0711-224 WARNING: Duplicate symbol: .glob
ld: 0711-224 WARNING: Duplicate symbol: glob
ld: 0711-224 WARNING: Duplicate symbol: getproc
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information.


I also tried using gcc-2.8.1, but it failed miserably...


_______________/Timo Aaltonen <http://www.hut.fi/~tjaalton>
GSM +358-40-5549 618



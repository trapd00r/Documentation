From zsh-workers-return-18874-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 20 16:13:10 2003
Return-Path: <zsh-workers-return-18874-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10169 invoked from network); 20 Jul 2003 16:13:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Jul 2003 16:13:09 -0000
Received: (qmail 19049 invoked by alias); 20 Jul 2003 16:13:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18874
Received: (qmail 19040 invoked from network); 20 Jul 2003 16:13:01 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 20 Jul 2003 16:13:01 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.254.112.142] by sunsite.dk (MessageWall 1.0.8) with SMTP; 20 Jul 2003 16:13:0 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 1B79170093; Sun, 20 Jul 2003 12:12:59 -0400 (EDT)
Date: Sun, 20 Jul 2003 12:12:59 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Cc: 202185-forwarded@bugs.debian.org, vincent@vinc17.org
Subject: PATCH: _subversion and PATH
Message-ID: <20030720161259.GA26326@acolyte.scowler.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.4i

VL> A "svn add [TAB]" currently completes on directories only (unless
VL> there is no match, in which case it completes on files).

VL> By default, it should complete on both directories and files that
VL> haven't been added yet (like the completion for "cvs add").

Partially addressed by patch below.

VL> A "svn log [TAB]" currently completes on URLs. It should complete
VL> on URLs, directories and files that have already been added to the
VL> repository.

The files part is broken, and still there's no effort to check what's in
the repository.

VL> Some other completions for subcommands should be improved too.

Yes.

Index: Completion/Unix/Command/_subversion
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_subversion,v
retrieving revision 1.1
diff -u -r1.1 _subversion
--- Completion/Unix/Command/_subversion	7 Jul 2003 03:23:15 -0000	1.1
+++ Completion/Unix/Command/_subversion	20 Jul 2003 15:55:56 -0000
@@ -49,7 +49,7 @@
   )
 
   [[ "$_svn_subcmd_usage" == *URL* ]] && _svn_subcmds=($_svn_subcmds ":url:_urls")
-  [[ "$_svn_subcmd_usage" == *PATH* ]] && _svn_subcmds=($_svn_subcmds "*:path:_files -/")
+  [[ "$_svn_subcmd_usage" == *PATH* ]] && _svn_subcmds=($_svn_subcmds "*:path:_files")
 
     _arguments \
     	"$_svn_subcmds[@]" && ret=0


From zsh-workers-return-10686-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 12 08:31:00 2000
Return-Path: <zsh-workers-return-10686-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16533 invoked from network); 12 Apr 2000 08:30:59 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Apr 2000 08:30:59 -0000
Received: (qmail 268 invoked by alias); 12 Apr 2000 08:30:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10686
Received: (qmail 224 invoked from network); 12 Apr 2000 08:30:35 -0000
Date: Wed, 12 Apr 2000 10:30:32 +0200 (MET DST)
Message-Id: <200004120830.KAA07215@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Tue, 11 Apr 2000 21:19:10 +0100
Subject: PATCH: Re: Question


Peter Stephenson wrote:

> Sven Wischnowsky wrote:
> > Currently, if a completion list is too long, the completion system
> > asks if onw wants to see all <n> matches. This is not only ugly in
> > cases like _complete_help with styles-output -- it askes if one wants
> > to see all `0' matches.
> > 
> > Should we change it to mention the number of lines needed? I think it
> > would always be more interesting.
> 
> Yes, it would.  I suppose this is too deep to be able to use a style.

Yes, it is. In fact everything about this was always hard-coded,
including the prompt itself. Changing that would be easy, but is it
worth it?

Bye
 Sven

Index: Src/Zle/compresult.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/compresult.c,v
retrieving revision 1.3
diff -u -r1.3 compresult.c
--- Src/Zle/compresult.c	2000/04/10 08:06:39	1.3
+++ Src/Zle/compresult.c	2000/04/12 08:27:38
@@ -1585,8 +1585,8 @@
 	 (!complistmax && listdat.nlines >= lines))) {
 	int qup;
 	zsetterm();
-	qup = printfmt("zsh: do you wish to see all %n possibilities? ",
-		       listdat.nlist, 1, 1);
+	qup = printfmt("zsh: do you wish to see all %n lines? ",
+		       listdat.nlines, 1, 1);
 	fflush(shout);
 	if (getzlequery() != 'y') {
 	    if (clearflag) {
Index: Src/Zle/zle_tricky.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_tricky.c,v
retrieving revision 1.3
diff -u -r1.3 zle_tricky.c
--- Src/Zle/zle_tricky.c	2000/04/10 09:29:09	1.3
+++ Src/Zle/zle_tricky.c	2000/04/12 08:27:38
@@ -1991,8 +1991,8 @@
 	int qup;
 
 	zsetterm();
-	qup = printfmt("zsh: do you wish to see all %n possibilities? ",
-		       num, 1, 1);
+	qup = printfmt("zsh: do you wish to see all %n lines? ",
+		       nlines, 1, 1);
 	fflush(shout);
 	if (getzlequery() != 'y') {
 	    if (clearflag) {

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


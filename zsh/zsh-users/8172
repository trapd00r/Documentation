From zsh-users-return-8172-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 04 17:56:57 2004
Return-Path: <zsh-users-return-8172-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1985 invoked from network); 4 Nov 2004 17:56:57 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Nov 2004 17:56:57 -0000
Received: (qmail 48782 invoked from network); 4 Nov 2004 17:56:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Nov 2004 17:56:51 -0000
Received: (qmail 9386 invoked by alias); 4 Nov 2004 17:55:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8172
Received: (qmail 9350 invoked from network); 4 Nov 2004 17:55:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Nov 2004 17:55:37 -0000
Received: (qmail 46635 invoked from network); 4 Nov 2004 17:55:37 -0000
Received: from moonbase.zanshin.com (64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 4 Nov 2004 17:55:35 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.13.1/8.13.1) with ESMTP id iA4GPJ9G003579
	for <zsh-users@sunsite.dk>; Thu, 4 Nov 2004 08:25:19 -0800
Date: Thu, 4 Nov 2004 08:25:19 -0800 (PST)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-users@sunsite.dk
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: Tilde expansion and completion again
In-Reply-To: <20041104105225.GA23709@DervishD>
Message-ID: <Pine.LNX.4.61.0411040816450.5131@toltec.zanshin.com>
References: <20041104105225.GA23709@DervishD>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Thu, 4 Nov 2004, DervishD wrote:

>     This is short: why aren't PWD and OLDPWD stored in $nameddirs
> until a 'cd' command is issued?

Peter told you the workaround, but he didn't answer "why".

The effect of autonamedirs is that the parameter becomes a named directory 
when a string beginning with a slash is assigned to it.

In the cases of PWD, OLDPWD, and nearly all other variables "known to the 
shell" their values have already been assigned long before autonamedirs 
can become set in your rc files.  Therefore they don't become nameddirs 
until the _next_ time they are assigned (which for PWD and OLDPWD is upon 
the next "cd"), or when nameddirs are forcibly rebuilt with "hash -d".

> Why aren't the rest of parameters whose value starts with a slash stored 
> directly in $nameddirs withouth the need to call 'hash -d'?

Because it's not the job of the "setopt" command to track down and tickle 
all possible side effects of the options that you've told it to change.
And if you think about it, you wouldn't want it to even if it could.


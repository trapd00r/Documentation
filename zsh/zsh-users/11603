From zsh-users-return-11603-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 10 18:11:14 2007
Return-Path: <zsh-users-return-11603-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24195 invoked from network); 10 Jul 2007 18:11:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jul 2007 18:11:12 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 44290 invoked from network); 10 Jul 2007 18:11:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2007 18:11:06 -0000
Received: (qmail 5942 invoked by alias); 10 Jul 2007 18:10:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11603
Received: (qmail 5933 invoked from network); 10 Jul 2007 18:10:54 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Jul 2007 18:10:54 -0000
Received: (qmail 42974 invoked from network); 10 Jul 2007 18:10:54 -0000
Received: from cluster-g.mailcontrol.com (85.115.41.190)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2007 18:10:49 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly07g.srv.mailcontrol.com (MailControl) with ESMTP id l6AIAl2j008738
	for <zsh-users@sunsite.dk>; Tue, 10 Jul 2007 19:10:47 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 10 Jul 2007 19:10:46 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.8/8.13.4) with ESMTP id l6AIAkYf025729
	for <zsh-users@sunsite.dk>; Tue, 10 Jul 2007 19:10:46 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.8/8.13.8/Submit) with ESMTP id l6AIAkNr025726
	for <zsh-users@sunsite.dk>; Tue, 10 Jul 2007 19:10:46 +0100
Message-Id: <200707101810.l6AIAkNr025726@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: Help on filename generation 
In-reply-to: <200707101753.l6AHrIjL025548@news01.csr.com> 
References: <87r6nggnrv.fsf@W0053328.mgh.harvard.edu> <200707101753.l6AHrIjL025548@news01.csr.com>
Comments: In-reply-to Peter Stephenson <pws@csr.com>
   message dated "Tue, 10 Jul 2007 18:53:17 +0100."
Date: Tue, 10 Jul 2007 19:10:46 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 10 Jul 2007 18:10:46.0044 (UTC) FILETIME=[A30E4DC0:01C7C31D]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-07-05 (www.mailcontrol.com) on 10.71.0.117

Peter Stephenson wrote:
> Joel J. Adamson wrote:
> > function doit() {
> >    for file in $1/*(generic)*~*(~)
> >    print $file
> >    exit
> > }
> > 
> > Currently I get "doit:1: unknown file attribute."   When I enter this
> > globbing pattern at the interactive prompt, I get the files I want.
> 
> The pattern should be:
> 
>  $1/*generic*~*\~

I've also just looked at the rest of the function and noticed:

- you also don't want that "exit" there.  That will
exit the whole shell that's calling the function.  "return" is the
command to use from functions.  However, simply falling off the end is
fine.

- you don't want both "function" *and* the "()", since they're doing the
same job.  You'll end up with a function called "function" that does the
samething as "doit".

- The for loop syntax is a bit confusing.  The short form will work, but
if the command to be executed isn't on the same line it's not obvious
which statements are inside the loop, and may confuse you when you edit
it, so I'd recommend avoiding it here.

  Try:

doit() {
   for file in $1/*generic*~*\~
   do
     print $file
   done
}

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php

To get further information regarding CSR, please visit our Investor Relations page at http://ir.csr.com/csr/about/overview


From zsh-workers-return-10772-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Apr 16 20:27:39 2000
Return-Path: <zsh-workers-return-10772-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23390 invoked from network); 16 Apr 2000 20:27:37 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Apr 2000 20:27:37 -0000
Received: (qmail 12791 invoked by alias); 16 Apr 2000 20:27:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10772
Received: (qmail 12775 invoked from network); 16 Apr 2000 20:27:24 -0000
X-Authentication-Warning: cassini.us.mandrakesoft.com: chmou set sender to chmouel@mandrakesoft.com using -f
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: completion with rpm and --target
From: Chmouel Boudjnah <chmouel@mandrakesoft.com>
Date: 13 Apr 2000 06:53:18 -0700
Message-ID: <m2bt3e6rap.fsf@cassini.us.mandrakesoft.com>
Lines: 30
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


completion with rpm and --target

PS: what is the Completetion/Rpm/ directory appeared in the cvs ?

--- ./Completion/Linux/_rpm.chmou       Thu Apr 13 06:45:58 2000
+++ ./Completion/Linux/_rpm     Thu Apr 13 06:47:55 2000
@@ -162,6 +162,7 @@
       '--ftpproxy:FTP proxy server:_hosts' \
       '--ftpport:FTP port number:' \
       --{short-circuit,clean,rmsource,sign,test} \
+      '--target:specify a build target:->target'\
       '--buildroot:build root directory:_files -/' \
       '--buildarch:architecture for which to build:' \
       '--buildos:ositecture for which to build:' \
@@ -189,6 +190,10 @@
   package_or_file)
     state=package_file
     ;&
+  target)
+    _wanted target expl 'Target platforms' \
+        compadd $(_call target rpm --showrc |grep 'compatible archs'|sed 's/.*: //') && ret=0
+    ;;
   package)
     _wanted packages expl 'RPM package' \
         compadd -M 'r:|-=* r:|=*' - $(_call packages rpm -qa) && ret=0

-- 
MandrakeSoft Inc                http://www.mandrakesoft.com
Montreal, QC CA.                                  --Chmouel


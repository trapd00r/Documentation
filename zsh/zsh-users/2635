From zsh-users-return-2635-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 30 09:41:29 1999
Return-Path: <zsh-users-return-2635-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1893 invoked from network); 30 Sep 1999 09:41:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Sep 1999 09:41:29 -0000
Received: (qmail 14960 invoked by alias); 30 Sep 1999 09:40:53 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2635
Received: (qmail 14952 invoked from network); 30 Sep 1999 09:40:52 -0000
Message-Id: <9909300905.AA16808@ibmth.df.unipi.it>
To: zsh-users@sunsite.auc.dk
Subject: Re: various completion queries
In-Reply-To: "Adam Spiers"'s message of "Wed, 29 Sep 1999 21:10:25 DFT."
             <19990929211025.A16175@thelonious.new.ox.ac.uk> 
Date: Thu, 30 Sep 1999 11:05:14 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Adam Spiers wrote:
> Actually it is, but the new system handles complex completions much
> more effortlessly, and with greater success.
> 
> Damn, I can see similar questions arising when I get my friends going
> on 3.1.6.  Peter, is any of that re-usable in the guide?  Probably
> not.

It's the sort of thing I want to say.  There's even a case to be made for
my jumping straight to that chapter and doing it next, since it's topical.
The downside is it's going to need a lot of rewriting later (some kind of
stability in the features of the completion system is the main prerequisite
for 3.1.7).  Unfortunately, even then it could be slow to write: I've been
lucky so far, in that I'm finishing up here, so things have been slacker
than usual and I've had some time, but from now on anything could happen.

> Benjamin Korvemaker (benjamin@cs.ualberta.ca) wrote:
> > I'm at that point in my life where I need a shell that fills in the
> > completion automagically and changes it as necessary the more I type
> > (just like that horrible feature that MS products tend to have).
> 
> If I understand you correctly, then yes, there's a function called
> incremental-complete-word

Yes, that's the place to look first.  It could probably do with some
developing --- it's getting quite complicated, almost like an editor within
the editor.

> Presumably you'd want to tell it complete words from the history.  I
> don't know when it first appeared, but you're best off using it with
> the latest development versions: 3.1.6 and later.

You'll certainly need 3.1.6; although it's not actually a new completion
widget, and should interact happily with old compctl-style completion (I
haven't tried), it still needs editor features from 3.1.6 or later.

One remaining task might be to allow it to combine with specific completion
widgets, not just ordinary contextual completion.  Actually, that shouldn't
be so hard: replace the call to `zle complete-word' with something more
general which tests if a parameter with an alternative command was set by a
wrapper.  The trick is to make sure such commands don't use menu
behaviour, which will confuse it.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


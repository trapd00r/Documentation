From zsh-users-return-12771-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 10 09:03:52 2008
Return-Path: <zsh-users-return-12771-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20763 invoked from network); 10 Apr 2008 09:03:50 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Apr 2008 09:03:50 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 73183 invoked from network); 10 Apr 2008 09:03:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Apr 2008 09:03:38 -0000
Received: (qmail 16646 invoked by alias); 10 Apr 2008 09:03:30 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12771
Received: (qmail 16629 invoked from network); 10 Apr 2008 09:03:30 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Apr 2008 09:03:30 -0000
Received: from wf-out-1314.google.com (wf-out-1314.google.com [209.85.200.173])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 0967D802265E
	for <zsh-users@sunsite.dk>; Thu, 10 Apr 2008 11:03:24 +0200 (CEST)
Received: by wf-out-1314.google.com with SMTP id 25so52311wfc.3
        for <zsh-users@sunsite.dk>; Thu, 10 Apr 2008 02:03:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:cc:message-id:from:to:in-reply-to:content-type:mime-version:subject:date:references:x-mailer;
        bh=Ucd8p5kg00uFKawT9G1OePrkwapa15Ja2w9E5nMjIYw=;
        b=KgApd+jZ+5nNRxZqVQ07c4hsSJ4vS5WDK9GP25LK59nZWL1uzDi6X8YkeEwd4n++ad4+gz+F1yyrVvumiQEHCxjDGGuqnSOUtRWqqXzNdfBY/+6PbJeTzBQnHdwn8HJwWnBSQda9SPWcyy/rYYgKoD/EIZsPT7G0JIvoQIYMRMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=cc:message-id:from:to:in-reply-to:content-type:mime-version:subject:date:references:x-mailer;
        b=nOqBqYPH4DvM/HsoatVAiBy7jv3GgTCjO1EYjToAYkFBw193Quqypk2vp3j8i5tGbenHdd0d0s+Lwz/U3NvpEGpCfXJvdFswmnxGHpLClIToBimMiO/xxlWEoZ9pMbcCyOoE/ZYULyzNHEQJNeXQz5qd2fuDxV3qUqP33sl8NqU=
Received: by 10.142.215.5 with SMTP id n5mr373830wfg.11.1207818203817;
        Thu, 10 Apr 2008 02:03:23 -0700 (PDT)
Received: from ?192.168.1.100? ( [24.19.134.239])
        by mx.google.com with ESMTPS id 27sm2397817wff.8.2008.04.10.02.03.22
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 10 Apr 2008 02:03:22 -0700 (PDT)
Cc: zsh-users@sunsite.dk
Message-Id: <DDABD6BC-F3D9-4277-86C1-776B24CB914F@gmail.com>
From: Alexy Khrabrov <deliverable@gmail.com>
To: Peter Stephenson <pws@csr.com>
In-Reply-To: <200804100851.m3A8pk9S003521@news01.csr.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-67--269748914
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: Re: iterating through a hierarchy with a filter
Date: Thu, 10 Apr 2008 02:03:21 -0700
References: <8BAD0AA6-3B6F-4946-B636-6C16B56A944E@gmail.com> <200804100851.m3A8pk9S003521@news01.csr.com>
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: ClamAV 0.91.2/6693/Thu Apr 10 10:22:27 2008 on bifrost
X-Virus-Status: Clean


--Apple-Mail-67--269748914
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


On Apr 10, 2008, at 1:51 AM, Peter Stephenson wrote:
> [...]
>
> zsh doesn't have any specific code for descending hierarchies, so you
> would have to do that by trickery.  If it's shallow enough that  
> globbing
> the whole thing in one go will work, you can do things along the lines
> of (untested):
>
> for file1 in source/**/*.xml; do
>  file2=dest/${${file1##source/}:r}.txt
>  destdir=${file2:h}
>  [[ -d $destdir ]] || mkdir -p $destdir
>  filter <$file1 >$file2
> done
>
> If that doesn't work even with a few small tweaks, you'll probably  
> have
> to tell us why before we can advise better.

Well, my hierarchy is a million small files.  So I doubt globbing will  
work -- should I try?  :)

Cheers,
Alexy
--Apple-Mail-67--269748914
Content-Type: text/html;
	charset=US-ASCII
Content-Transfer-Encoding: quoted-printable

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space; "><br><div><html>On Apr 10, 2008, =
at 1:51 AM, Peter Stephenson wrote:</html><blockquote type=3D"cite"><font =
class=3D"Apple-style-span" =
color=3D"#000000">[...]</font></blockquote><blockquote =
type=3D"cite"><br>zsh doesn't have any specific code for descending =
hierarchies, so you<br>would have to do that by trickery. &nbsp;If it's =
shallow enough that globbing<br>the whole thing in one go will work, you =
can do things along the lines<br>of (untested):<br><br>for file1 in =
source/**/*.xml; do<br> &nbsp;file2=3Ddest/${${file1##source/}:r}.txt<br> =
&nbsp;destdir=3D${file2:h}<br> &nbsp;[[ -d $destdir ]] || mkdir -p =
$destdir<br> &nbsp;filter &lt;$file1 >$file2<br>done<br><br>If that =
doesn't work even with a few small tweaks, you'll probably have<br>to =
tell us why before we can advise =
better.<br></blockquote></div><br><div>Well, my hierarchy is a million =
small files. &nbsp;So I doubt globbing will work -- should I try? =
&nbsp;:)</div><div><br></div><div>Cheers,</div><div>Alexy</div></body></ht=
ml>=

--Apple-Mail-67--269748914--


From zsh-users-return-8895-mason-zsh=primenet.com.au@sunsite.dk Mon May 23 07:23:42 2005
Return-Path: <zsh-users-return-8895-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5600 invoked from network); 23 May 2005 07:23:41 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 May 2005 07:23:41 -0000
Received: (qmail 35885 invoked from network); 23 May 2005 07:23:35 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 May 2005 07:23:35 -0000
Received: (qmail 21381 invoked by alias); 23 May 2005 07:23:28 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8895
Received: (qmail 21369 invoked from network); 23 May 2005 07:23:27 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 23 May 2005 07:23:27 -0000
Received: (qmail 34780 invoked from network); 23 May 2005 07:23:27 -0000
Received: from zproxy.gmail.com (64.233.162.193)
  by a.mx.sunsite.dk with SMTP; 23 May 2005 07:23:23 -0000
Received: by zproxy.gmail.com with SMTP id 13so1486258nzp
        for <zsh-users@sunsite.dk>; Mon, 23 May 2005 00:23:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=elIMcPeZaiCFHEXSVGZ8pTMMaO3+DxtMJq7QcWs00CEHmd1RVCEm7JHMr7K7bk9qMNgCreOD+t37fDO4scYGfDBKJCBbM7vLCPRIzYoFgoEvQPrlXUjxFrPonvGwVc8e7j2+g+pBrU6rzzWywXj7tT7GenfhcepIBVFASxjmEj4=
Received: by 10.36.24.6 with SMTP id 6mr1342520nzx;
        Mon, 23 May 2005 00:23:21 -0700 (PDT)
Received: by 10.36.5.2 with HTTP; Mon, 23 May 2005 00:23:21 -0700 (PDT)
Message-ID: <dc507f4a050523002352f05af1@mail.gmail.com>
Date: Mon, 23 May 2005 00:23:21 -0700
From: Felix Rosencrantz <f.rosencrantz@gmail.com>
Reply-To: Felix Rosencrantz <f.rosencrantz@gmail.com>
To: zsh-users@sunsite.dk
Subject: Re: zsh compiling on Apple OSX v. 10.4.x
In-Reply-To: <294439D0-476D-43F3-8326-8209C1F3FE9C@chemistry.ucsc.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <294439D0-476D-43F3-8326-8209C1F3FE9C@chemistry.ucsc.edu>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=6.0 tests=AWL,BAYES_00,RCVD_BY_IP 
	autolearn=ham version=3.0.2
X-Spam-Hits: -2.4

It wasn't clear to me from Bill's original question, that the folks at
Apple have made some mods to the zsh build to get it work on OSX 10.4.
 Here's the url for their Portfile:
http://cvs.opendarwin.org/index.cgi/proj/darwinports/dports/shells/zsh/

It seems that on 10.4, it's better to use select() than poll() for the
terminal IO. Otherwise you get the broken behavior Bill mentions. =20
Though configure for zsh hasn't been modified to know this.  I'm not
sure how to modify the autoconfg code to change this code for 10.4.=20
But it would be nice to fix this, so that zsh builds properly on OSX
10.4 w/o hand-edits to config.h.

-FR.

On 5/19/05, William Scott <wgscott@chemistry.ucsc.edu> wrote:
> When I tried compiling zsh on OSX v. 10.4, I found that the resulting
> zsh, when invoked, did not appear to respond to arrow keys, back-
> spaces and so-forth (I say "appear" because apparently it just
> doesn't update the terminal display).  Following Apple's patch, I
> configured and then edited the file config.h to remove the lines
>=20
>=20
>      391 /* Define to 1 if you have the `poll' function. */
>      392 /* #define HAVE_POLL 1 */
>      393
>      394 /* Define to 1 if you have the <poll.h> header file. */
>      395 /* #define HAVE_POLL_H 1 */
>=20
> Then compiled and installed and the problem went away.


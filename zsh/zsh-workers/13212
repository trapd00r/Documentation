From zsh-workers-return-13212-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Dec 01 09:33:29 2000
Return-Path: <zsh-workers-return-13212-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5419 invoked from network); 1 Dec 2000 09:33:28 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Dec 2000 09:33:28 -0000
Received: (qmail 10436 invoked by alias); 1 Dec 2000 09:32:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13212
Received: (qmail 10429 invoked from network); 1 Dec 2000 09:32:51 -0000
Date: Fri, 1 Dec 2000 10:32:50 +0100 (MET)
Message-Id: <200012010932.KAA01248@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Thu, 30 Nov 2000 18:30:33 +0000
Subject: Re: Last patch


Peter Stephenson wrote:

> Just realised after I sent it that the diff for installing functions
> contained Bart's tweak for forbidding traps during traps, which hasn't been
> committed.  The traps are the last piece of major unfinished business I
> know about.  (I am not volunteering to anything about it.)

I'll have a look at the weekend. Let's see if we can do it with
signal-queueing.

As I already said, the globals in the completion system shouldn't be a 
problem if we just prevent it from being called while it is still
active (I haven't looked yet, maybe we already do that -- I have the
impression that I shoudl now this, hm). The globals in zle: for now we 
only need to protect those that can be touched by using the `zle'
builtin. The stuff used for the lexer/parser/execution code shouldn't
be a problem either because they are already saved and restored. And
for the rest we could probably start by making the protected section
somewhat larger than necessary (the functions used in the hashtable
structs might be good candidates, for example).


And then there is also the issue of moving the shell code into the
final directory structure.


Is our goal to bring out 4.0 before christmas? (`zsh christmas edition'?)
Sounds like a good goal and considering that we got only few bug
reports lately and quite a few people already seem to use 3.1.x...

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-26834-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 15 16:54:22 2009
Return-Path: <zsh-workers-return-26834-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13831 invoked from network); 15 Apr 2009 16:54:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Apr 2009 16:54:08 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 84656 invoked from network); 15 Apr 2009 16:54:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Apr 2009 16:54:00 -0000
Received: (qmail 2216 invoked by alias); 15 Apr 2009 16:53:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26834
Received: (qmail 2203 invoked from network); 15 Apr 2009 16:53:54 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 15 Apr 2009 16:53:54 -0000
Received: from mx7.netwood.net (mx7.netwood.net [209.247.184.8])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id D36778058ACF
	for <zsh-workers@sunsite.dk>; Wed, 15 Apr 2009 18:53:48 +0200 (CEST)
Received: from netwood.net (mail.netwood.net [209.247.184.35])
	by mx7.netwood.net (8.14.2/8.14.2) with ESMTP id n3FGrjdV086593
	for <zsh-workers@sunsite.dk>; Wed, 15 Apr 2009 09:53:45 -0700 (PDT)
	(envelope-from jessw@netwood.net)
Received: from [169.254.0.252] [67.150.4.160] by netwood.net with ESMTP
  (SMTPD-8.22) id A1120458; Wed, 15 Apr 2009 09:53:38 -0700
Mime-Version: 1.0 (Apple Message framework v624)
Content-Transfer-Encoding: 7bit
Message-Id: <6d29e79100d88017193a64ab04a318eb@netwood.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: zsh-workers@sunsite.dk
From: Jesse W <jessw@netwood.net>
Subject: Building yodl on OS X 10.3.9?
Date: Wed, 15 Apr 2009 09:55:21 -0700
X-Mailer: Apple Mail (2.624)
X-Virus-Scanned: ClamAV 0.94/9240/Wed Apr 15 07:15:47 2009 on mx7.netwood.net
X-Virus-Scanned: ClamAV 0.92.1/9240/Wed Apr 15 16:15:47 2009 on bifrost
X-Virus-Status: Clean

Can anyone give me some further pointers out how to go about building 
yodl?  I'm on OSX 10.3.9, with an up-to-date Fink installation.  I 
downloaded the copy of yodl available on the zsh site (1.31.18), and 
tried to follow the instructions -- but it breaks in a way I'm having 
trouble understanding.

I heard rumors that it needs an additional, unusual build system -- but 
it's not clear to me 1) what the name of the system is, or 2) where I 
can get it.

According to the INSTALL.txt file, all I need are standard tools, and I 
should just do the standard configure, make, make install dance...

The INSTALL.txt file refers to "configure", not "./configure", but I 
presume that's a typo.  It also makes mention of a script called 
"bin/set-yo.sh", which I'm leary of running as it seems from reading it 
that it writes outside the main build directory (specifically in ~/usr, 
of all places).

When I just run ./configure, I get the following output:

loading cache ./config.cache
checking Package... YODL
checking for stepmake... ./stepmake  (${prefix}/share/stepmake not 
found)
checking host system type... configure: error: can not guess host type; 
you must specify one

If I follow instructions and run "./configure --host=ppc" it seems to 
work (full output below), but then fails when I run make, with this 
command reporting fatal errors:

  gcc -c    -DHAVE_CONFIG_H  -I../.. -Iinclude -Iout -I../.. -I. 
-I../../src/lib -Iout -g    -o out/closefile.o closefile.c
In file included from closefile.c:4:
/usr/include/stdlib.h:136: error: conflicting types for `free'
lib.h:20: error: previous declaration of `free'
/usr/include/stdlib.h:140: error: conflicting types for `malloc'
lib.h:21: error: previous declaration of `malloc'
/usr/include/stdlib.h:147: error: conflicting types for `realloc'
lib.h:22: error: previous declaration of `realloc'

I'd be very grateful for any pointers about how to fix this, or even 
just what to look at next.

Thanks for your attention,

	Jesse Weinstein



------------------
Full "./configure --host=ppc" output:
-----
loading cache ./config.cache
checking Package... YODL
checking for stepmake... ./stepmake  (${prefix}/share/stepmake not 
found)
checking host system type... powerpc-unknown-none
checking for gmake... (cached) make
checking for find... (cached) find
checking for tar... (cached) tar
checking for bash... (cached) /bin/sh
checking for python... (cached) /sw/bin/python
checking for gcc... (cached) gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking how to run the C preprocessor... (cached) gcc -E
checking for ANSI C header files... (cached) yes
checking for malloc.h... (cached) no
checking for bison... (cached) bison -y
checking for bison... (cached) bison
checking for flex... (cached) flex
./configure: line 1840: test: too many arguments
checking for ar... (cached) ar
checking for ranlib... (cached) ranlib
checking language... English
checking for gettext in -lintl... (cached) no
checking for gettext... (cached) no
checking for groff... (cached) groff
checking for troff... (cached) troff
checking for tbl... (cached) tbl
checking for snprintf... (cached) yes
checking for vsnprintf... (cached) yes
checking for makeinfo... (cached) makeinfo
checking for basename... (cached) yes
checking for dirname... (cached) yes
creating ./config.status
creating config.make
creating config.h
config.h is unchanged
configuring in stepmake
running /bin/sh ./configure  --host=ppc --cache-file=.././config.cache 
--srcdir=.
loading cache .././config.cache
checking Package... Stepmake package!
checking host system type... powerpc-unknown-none
checking for gmake... (cached) make
checking for find... (cached) find
checking for tar... (cached) tar
checking for bash... (cached) /bin/sh
checking for python... (cached) /sw/bin/python
checking language... English
checking for makeinfo... (cached) makeinfo
creating ./config.status
creating config.make
creating config.hh
config.hh is unchanged

---------------------------
Full "make" output:
-----
stepmake/stepmake/generic-targets.make:166: out/dummy.dep: No such file 
or directory
mkdir out
mkdir: cannot create directory `out': File exists
make: [out/dummy.dep] Error 1 (ignored)
touch out/dummy.dep
make --no-builtin-rules PACKAGE=YODL -C make all &&  make 
--no-builtin-rules PACKAGE=YODL -C src all &&  make --no-builtin-rules 
PACKAGE=YODL -C scripts all &&  make --no-builtin-rules PACKAGE=YODL -C 
bin all &&  make --no-builtin-rules PACKAGE=YODL -C macros all &&  make 
--no-builtin-rules PACKAGE=YODL -C debian all &&  make 
--no-builtin-rules PACKAGE=YODL -C Documentation all &&  make 
--no-builtin-rules PACKAGE=YODL -C hsearch all &&  make 
--no-builtin-rules PACKAGE=YODL -C ./stepmake all && true
../stepmake/stepmake/generic-targets.make:166: out/dummy.dep: No such 
file or directory
mkdir out
mkdir: cannot create directory `out': File exists
make[1]: [out/dummy.dep] Error 1 (ignored)
touch out/dummy.dep
true
../stepmake/stepmake/generic-targets.make:166: out/dummy.dep: No such 
file or directory
mkdir out
mkdir: cannot create directory `out': File exists
make[1]: [out/dummy.dep] Error 1 (ignored)
touch out/dummy.dep
make PACKAGE=YODL -C lib all &&  make PACKAGE=YODL -C yodl all &&  make 
PACKAGE=YODL -C yodl2html-post all &&  make PACKAGE=YODL -C 
yodlfixlabels all && true
../../stepmake/stepmake/generic-targets.make:166: out/dummy.dep: No 
such file or directory
mkdir out
mkdir: cannot create directory `out': File exists
make[2]: [out/dummy.dep] Error 1 (ignored)
touch out/dummy.dep
rm -f out/closefile.dep; DEPENDENCIES_OUTPUT="out/closefile.dep 
out/closefile.o" gcc -c    -DHAVE_CONFIG_H  -I../.. -Iinclude -Iout 
-I../.. -I. -I../../src/lib -Iout -g    -o out/closefile.o closefile.c
In file included from closefile.c:4:
/usr/include/stdlib.h:136: error: conflicting types for `free'
lib.h:20: error: previous declaration of `free'
/usr/include/stdlib.h:140: error: conflicting types for `malloc'
lib.h:21: error: previous declaration of `malloc'
/usr/include/stdlib.h:147: error: conflicting types for `realloc'
lib.h:22: error: previous declaration of `realloc'
make[2]: *** [out/closefile.o] Error 1
make[1]: *** [all] Error 2
make: *** [all] Error 2


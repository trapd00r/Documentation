From zsh-workers-return-9117-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Dec 20 10:16:47 1999
Return-Path: <zsh-workers-return-9117-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5069 invoked from network); 20 Dec 1999 10:16:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Dec 1999 10:16:45 -0000
Received: (qmail 7218 invoked by alias); 20 Dec 1999 10:16:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9117
Received: (qmail 7210 invoked from network); 20 Dec 1999 10:16:37 -0000
Date: Mon, 20 Dec 1999 10:17:04 GMT
Message-Id: <199912201017.KAA10179@mango.dublin.iona.ie>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: RE: No rules to make zsh.mdh
From: zefram@fysh.org

>$(dir_top)//zsh.mdh: FORCE
>        @cd $(dir_top)/ && $(MAKE) $(MAKEDEFS) zsh.mdh
>
> $(dir_top)/Src/zsh.mdh:
>        false # should only happen with make -n

This is slightly broken.  I can't reproduce this; I'd guess that
your Makefiles have got out of synch with the recent patches.
Do "./config.status --recheck; ./config.status; make prep" from the
top-level directory to get them all rebuilt.  Actually, you might need to
do a "rm **/*.mdh*" as well, if the incorrect pathnames have propagated
to the headers too.

>Note initial blank - is it correct? Is it portable?

It's correct in that I knew it could be there (actually it's always
there, exactly one space) and considred it insignificant.  However,
this patch will remove it, for neatness.

diff -cr ../zsh-/Src/mkmakemod.sh ./Src/mkmakemod.sh
*** ../zsh-/Src/mkmakemod.sh	Thu Dec 16 14:26:33 1999
--- ./Src/mkmakemod.sh	Mon Dec 20 10:01:58 1999
***************
*** 350,356 ****
  	    echo
  	done | sed 's,^\(.*\)@%@\(.*\)@%@\(.*\)/\([^/]*\)$,\1\3\2\4,'
  	if test -n "$other_mdhs"; then
! 	    echo "${other_mdhs}:"
  	    echo "	false # should only happen with make -n"
  	    echo
  	fi
--- 350,356 ----
  	    echo
  	done | sed 's,^\(.*\)@%@\(.*\)@%@\(.*\)/\([^/]*\)$,\1\3\2\4,'
  	if test -n "$other_mdhs"; then
! 	    echo "${other_mdhs}:" | sed 's,^ ,,'
  	    echo "	false # should only happen with make -n"
  	    echo
  	fi
***************
*** 360,366 ****
  	    echo
  	done | sed 's,^\(.*\)@%@\(.*\)@%@\(.*\)/\([^/]*\)$,\1\3\2\4,'
  	if test -n "$other_exports"; then
! 	    echo "${other_exports}:"
  	    echo "	false # should only happen with make -n"
  	    echo
  	fi
--- 360,366 ----
  	    echo
  	done | sed 's,^\(.*\)@%@\(.*\)@%@\(.*\)/\([^/]*\)$,\1\3\2\4,'
  	if test -n "$other_exports"; then
! 	    echo "${other_exports}:" | sed 's,^ ,,'
  	    echo "	false # should only happen with make -n"
  	    echo
  	fi
END


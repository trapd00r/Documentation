From zsh-workers-return-28661-mason-zsh=primenet.com.au@zsh.org Wed Jan 26 17:30:14 2011
Return-Path: <zsh-workers-return-28661-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18555 invoked by alias); 26 Jan 2011 17:30:14 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28661
Received: (qmail 23790 invoked from network); 26 Jan 2011 17:30:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <110126092944.ZM2205@torch.brasslantern.com>
Date: Wed, 26 Jan 2011 09:29:44 -0800
In-reply-to: <110126090508.ZM2111@torch.brasslantern.com>
Comments: In reply to Bart Schaefer <schaefer@brasslantern.com>
 "Re: Slow completion when using aptitude" (Jan 26,  9:05am)
References: <AANLkTimtzJnpA=_QQgz4bSYZEjHydCSh6PLMKzFtwueS@mail.gmail.com>
	<AANLkTimYBY7nA_FCXTA8n-ukYwBxnobmoUNowJ6kxaGz@mail.gmail.com>
	<AANLkTikAKmnTt+9o5ibUGevk+m=rZJg9WrxV1WP+hX6w@mail.gmail.com>
	<AANLkTinYiKLp11GTOKaMb_8BTPKvjP+U6won9V4BFHxk@mail.gmail.com>
	<87oc74dpuy.fsf@ft.bewatermyfriend.org>
	<AANLkTimKPLUHcHj_aZciwNLDt_+noEW0G=PEdYSVEL9b@mail.gmail.com>
	<87d3njemu9.fsf@ft.bewatermyfriend.org>
	<110126090508.ZM2111@torch.brasslantern.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: cheer_xiao <xiaqqaix@gmail.com>, zsh-workers@zsh.org
Subject: Re: Slow completion when using aptitude
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Jan 26,  9:05am, Bart Schaefer wrote:
} Subject: Re: Slow completion when using aptitude
}
} Comparing _complete_debug output for the two, the main difference
} seems to be that _aptitude passes through _deb_packages repeatedly
} if you have a matcher-list, while _apt makes only a single pass.

Oh, forgot to mention -- the _apt completer, at least for apt-get,
seems to suffer from the common bug of returning 0 when it finds no
completions, fooling the higher layers into thinking it succeeded
but there's nothing to do rather than that it failed.  Of course it
may be that this is the right thing in this case, and _aptitude is
instead buggy when it returns 1 in the same circumstance.

That's probably why the number of passes through _deb_packages differs.


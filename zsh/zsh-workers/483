From zsh-workers-request@math.gatech.edu  Thu Oct 19 05:33:18 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.net.au (8.7/8.7) with SMTP id FAA29857 for <mason@werple.mira.net.au>; Thu, 19 Oct 1995 05:33:16 +1000 (EST)
Received: from euclid (euclid.skiles.gatech.edu) by gatech.edu with SMTP id AA15134
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Wed, 18 Oct 1995 15:32:40 -0400
Received: by euclid (5.x/SMI-SVR4)
	id AA10357; Wed, 18 Oct 1995 15:30:30 -0400
Resent-Date: Wed, 18 Oct 1995 15:28:02 -0400
Old-Return-Path: <coleman@math.gatech.edu>
Message-Id: <9510181928.AA01846@redwood.skiles.gatech.edu>
X-Mailer: exmh version 1.6.4 10/10/95
To: zsh-workers@math.gatech.edu
Subject: Re: global zlogout and .zlogout 
In-Reply-To: Your message of "Wed, 18 Oct 1995 16:54:08 -0200."
             <199510181854.QAA00335@snfep1.if.usp.br> 
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Wed, 18 Oct 1995 15:28:02 -0400
From: Richard Coleman <coleman@math.gatech.edu>
Resent-Message-Id: <"ECA5D1.0.lX2.LNLXm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/483
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>  >> > I noticed that the global zlogout is not sourced if NORCS is set. I
>  >> > think this is wrong, it should always be executed, just like the
>  >> > global zshenv.
> 
>  >I'm want to know what everyone this is the most usual behavoir.
> 
> Is this a local dialect? :-)

That's what I get for writing e-mail at 2am.  I meant to say I want to know
what everyone thinks is the preferred behavior.

>  >Currently in the zsh baseline, the global zlogout is only
>  >executed for a login shell if NO_RCS is not set and the shell is
>  >interactive.  This is definitely wrong.  My first reaction is to have
>  >the global zlogout always executed (regardless of NO_RCS) when a login
>  >shell is exiting.
> 
> This is exactly what I said above.

Yes, I know.  Just repeating it for emphasis (I like to hear myself talk :-)

>  >This is the way the global zlogin file is handled.
> 
> No, because you can set NO_RCS in your .zshenv. That's why I say above
> "just like the global zshenv", which is the only one that's always
> executed.

I meant to say the global zshenv, not the global zlogin.  But the more I
think about it, I'm no longer happy with this idea.  There should be
someway to suppress the sourcing of the global zlogout.  But you don't
want users to be able to do this.  I believe it was Zoltan who mentioned
sourcing the global zlogout only if the global zlogin was sourced.  That is
easy to do.  Before anything is changed, I would like to know for what
purposes are people using the global zlogout file.

>  >Also, I now realize another potential problem.  When the init scripts
>  >are sourced when the shell is starting up, there is a hack (setting the
>  >sourcelevel to 32768) that prevents an error in these scripts from tripping
>  >ERREXIT.  This same should probably apply to the global zlogout and .zlogout.
> 
> Only to the global one. The user's one is his problem.

ERREXIT is suppressed for all the init script (both global and personal).
Seems like the same should be the case for the global zlogout and .zlogout.

rc



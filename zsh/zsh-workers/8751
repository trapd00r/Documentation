From zsh-workers-return-8751-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Nov 23 14:37:08 1999
Return-Path: <zsh-workers-return-8751-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9637 invoked from network); 23 Nov 1999 14:37:06 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Nov 1999 14:37:06 -0000
Received: (qmail 18815 invoked by alias); 23 Nov 1999 14:37:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8751
Received: (qmail 18806 invoked from network); 23 Nov 1999 14:36:58 -0000
Date: Tue, 23 Nov 1999 14:36:53 +0000
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: configure-time problem with tcsetpgrp test (again)
Message-ID: <19991123143653.B2727@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre3i
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.12 i686

I just got this weird problem when running ./configure.  It only
happens when I redirect stdout from the configure to a file.  When the
`checking if POSIX sigsuspend() works... yes' line is reached, the
configure process gets suspended.  If I tail -f the log file at the
same time it looks like this:


checking if named FIFOs work... yes
checking if echo in /bin/sh interprets escape sequences... no
checking if link() works... yes
checking if kill(pid, 0) returns ESRCH correctly... yes
Waiting for data... (interrupt to abort)[1]  + 17124 suspended (tty output)  ./configure --prefix=/usr --bindir=/bin --enable-etcdir=/etc  >| foo
checking if POSIX sigsuspend() works... yes
Waiting for data... (interrupt to abort)


config.log (and also sometimes the log file I redirected to) always
indicates that the tcsetpgrp() test two tests later always gets
reached before the process gets suspended; could it be this test which
causes the problems instead?  I noticed from the archives that this
tcsetpgrp() has been the cause of trouble in the past ... ah, wait a
minute.  It's the `-t 0 -a' bit which is going wrong, isn't it?  The
test should be skipped, but isn't being?  If I insert a `</dev/null'
on the command line for configure then the test gets skipped and all
is well.  Should there be a `-t 1 -a -t 2 -a' as well or something?

Adam


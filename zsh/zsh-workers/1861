From zsh-workers-request@euclid.skiles.gatech.edu  Thu Aug  1 18:44:31 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id SAA04634 for <mason@primenet.com.au>; Thu, 1 Aug 1996 18:44:27 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA04846; Thu, 1 Aug 1996 04:42:20 -0400 (EDT)
Resent-Date: Thu, 1 Aug 1996 04:42:20 -0400 (EDT)
Message-Id: <199608010841.KAA02372@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list), borsenkow.msk@sni.de
Subject: Re: Procmail rejects zsh as being "broken" 
In-reply-to: "borsenkow.msk@sni.de"'s message of "Thu, 01 Aug 1996 12:28:50 MET."
             <Pine.SV4.3.95.960801121636.4508C-100000@itsrm1> 
Date: Thu, 01 Aug 1996 10:40:59 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"koDcM2.0.eB1.it60o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1861
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

borsenkow.msk@sni.de wrote:
> Hi!
> 
> I recently installed procmail-3.11pre4 under zsh-3.0pre4. When running
> 'make init' procmail gave me warning, that `/opt/local/bin/zsh is broken'.
> I checked initmake script and here is relevant part:
> 
> case "$SHELL" in
>  ...
>        *zsh*) $RM src/_autotst
>             $SHELL <<HERE
>             O="echo test >src/_autotst"
>             exec 2>$DEVNULL
>             \$O
> HERE                                                                         
>    
>            if test ! -f src/_autotst                                         
>    
>            then
>               echo "Warning: your $SHELL is broken, avoiding it"; SHELL=""
>            fi ;;
> 
> The test seems to imply, that in
> % foo="echo test > test"
> % $foo
> 
> the line is to be rescanned for I/O redirections *after* foo is expanded. 
> I am not aware of any shell to behave this way. 
> 
> Do I  miss something? What is the sense of this test? And why it is done
> only for zsh ;)?

No, I think it's an incorrect test:  it should probably be something like
O="touch src/_autost"
if what they're doing is testing for word splitting.  But if that *is*
the point, since the test is only for zsh, why don't they simply issue
`setopt shwordsplit' which works in every single version of zsh?

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


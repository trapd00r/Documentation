From zsh-workers-return-12858-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Sep 22 15:57:48 2000
Return-Path: <zsh-workers-return-12858-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19936 invoked from network); 22 Sep 2000 15:57:48 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Sep 2000 15:57:48 -0000
Received: (qmail 27780 invoked by alias); 22 Sep 2000 15:57:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12858
Received: (qmail 27770 invoked from network); 22 Sep 2000 15:57:06 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000922154729.ZM7968@candle.brasslantern.com>
Date: Fri, 22 Sep 2000 15:47:29 +0000
In-Reply-To: <001901c022f3$1cf94770$21c9ca95@mow.siemens.ru>
Comments: In reply to "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
        "PATCH: _insert_all_matches bindable command" (Sep 20,  3:08pm)
References: <001901c022f3$1cf94770$21c9ca95@mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>,
        <zsh-workers@sunsite.auc.dk>
Subject: Suffixes and menu completion vs. menu selection
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 20,  3:08pm, Andrej Borsenkow wrote:
} Subject: PATCH: _insert_all_matches bindable command
}
} there is subtle difference between menu completion and menu selection - menu
} selection adds space where menu completion does not. E.g.:
} 
} bor@itsrm2% l f*
} fOo   foO   foo
} 
} (selection)
} 
} bor@itsrm2% l fOo
} Completing file
} fOo   foO   foo
} (press `i')
} bor@itsrm2% l fOo i
} Completing file
} fOo   foO   foo
} 
} (completion)
} 
} bor@itsrm2% ls fOo
} Completing file
} fOo   foO   foo
} (press `i')
} bor@itsrm2% ls fOoi
} Completing file
} fOo   foO   foo
} 
} I would really prefer the same behaviour in both cases.

In the case of menu selection, you're actually choosing a match. In the
case of menu completion, you're disambiguating the ambiguous prefix.

You could argue that menu selection should abort, rather than accept, on
self-insert, and thus restore the original string to the command line
before inserting the `i', but it should not both accept a match and
append the inserted character to it without also first inserting the
usual completion suffix.  The current menu selection behavior, though,
is intended to interrupt your typing as little as possible (i.e. you
needn't explicitly hit RETURN to accept the selection).

If you're suggesting that the menu completion menu should include the
suffix for each of the matches, even when that suffix is a space (it
already e.g. appends the slash for directories), that might be another
matter -- but it'd be a change from the way zsh has behaved for years.
If I have `ls f*<TAB>" and that results in `ls fOo ' (note space) plus
a listing, what happens when I press SPACE TAB ?  What visual feedback
is there that `f*<TAB><SPACE><TAB>' is not the same as `f*<TAB><TAB>'?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-17064-mason-zsh=primenet.com.au@sunsite.dk Thu May 02 13:55:04 2002
Return-Path: <zsh-workers-return-17064-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4685 invoked from network); 2 May 2002 13:55:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 2 May 2002 13:55:03 -0000
Received: (qmail 9706 invoked by alias); 2 May 2002 13:54:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17064
Received: (qmail 9690 invoked from network); 2 May 2002 13:54:41 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: zsh 4.0.4 on Solaris 2.6, shared (dynamic) library issues
In-Reply-To: <12708.1020346430@csr.com>
References: <12708.1020346430@csr.com>
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Mailer: Ximian Evolution 1.0.3-1mdk 
Date: 02 May 2002 17:52:47 +0400
Message-Id: <1020347579.31005.11.camel@localhost.localdomain>
Mime-Version: 1.0

=F7 =FE=D4=D7, 02.05.2002, =D7 17:33, Peter Stephenson =
=CE=C1=D0=C9=D3=C1=CC:
> Borsenkow Andrej wrote:
> > Actually proper fix would have been to check if we use GNU ld (or =
GNU =3D
> > C)
> > as linker and adjust flags accordingly. This has been mentioned a =
while
> > back. But I am not sure how to do it in clean way.
>=20
> I just noticed that Imlib's aclocal.m4 has stuff for this in it.
> Copyright (as usual with autoconf material) is nice and simple.
> It's 128 kB so I haven't included it.  I'm looking at imlib-1.9.14 =
from
> the GNOME website, see =
http://www.gnome.org/start/installing/index.php3
> for links.  Possibly it's in other GTK/GNOME stuff, this is the first
> I've looked at in detail.
>=20

May be we need not go so far. Here is what libtool is using; and if it
is good for libtool I expect it should be good for us as well.

# AC_PROG_LD_GNU -
AC_DEFUN([AC_PROG_LD_GNU],
[AC_CACHE_CHECK([if the linker ($LD) is GNU ld], lt_cv_prog_gnu_ld,
[# I'd rather use --version here, but apparently some GNU ld's only
accept -v.
if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
  lt_cv_prog_gnu_ld=3Dyes
else
  lt_cv_prog_gnu_ld=3Dno
fi])
with_gnu_ld=3D$lt_cv_prog_gnu_ld
])




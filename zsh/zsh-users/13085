From zsh-users-return-13085-mason-zsh=primenet.com.au@sunsite.dk Sat Aug 02 21:39:08 2008
Return-Path: <zsh-users-return-13085-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1738 invoked from network); 2 Aug 2008 21:38:56 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 2 Aug 2008 21:38:56 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 16326 invoked from network); 2 Aug 2008 21:37:33 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Aug 2008 21:37:33 -0000
Received: (qmail 11409 invoked by alias); 2 Aug 2008 21:36:10 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13085
Received: (qmail 11389 invoked from network); 2 Aug 2008 21:36:07 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 2 Aug 2008 21:36:07 -0000
Received: from vms046pub.verizon.net (vms046pub.verizon.net [206.46.252.46])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 77F53805A42F
	for <zsh-users@sunsite.dk>; Sat,  2 Aug 2008 23:36:02 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.175])
 by vms046.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K4Z00229TBZ7Y71@vms046.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sat, 02 Aug 2008 16:36:00 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m72LZwXA000817	for
 <zsh-users@sunsite.dk>; Sat, 02 Aug 2008 14:35:59 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m72LZwlt000816	for zsh-users@sunsite.dk; Sat,
 02 Aug 2008 14:35:58 -0700
Date: Sat, 02 Aug 2008 14:35:56 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: completion: highlight matching part
In-reply-to: <20080801163301.GA3589@pepin.polanet.pl>
To: zsh-users@sunsite.dk
Message-id: <080802143558.ZM815@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20080801163301.GA3589@pepin.polanet.pl>
Comments: In reply to Tomasz Pala <gotar@polanet.pl>
 "completion: highlight matching part" (Aug  1,  6:33pm)
X-Virus-Scanned: ClamAV 0.92.1/7915/Sat Aug  2 05:45:09 2008 on bifrost
X-Virus-Status: Clean

On Aug 1,  6:33pm, Tomasz Pala wrote:
}
} is it possible for zsh to highlight (bold, change color etc.) of
} matching part of available completions?

This is possible with a combination of tricks.  You have to use the
"list-colors" zstyle rather than setting the ZLS_COLORS variable, and
you have to use "zstyle -e" to set an evaluated style.

The really hard part is deciphering the documentation for list-colors,
which doesn't have much in the way of examples.

Here's an example that makes the prefix green and puts a green
background behind each of the characters that you can type next:

autoload -U colors
colors
zstyle -e ':completion:*' list-colors \
  'reply=( "=(#b)(*$PREFIX)(?)*=00=$color[green]=$color[bg-green]" )'

The first =00 gives the default color (none) for any part of the
listing that does not match one of the sub-patterns that is enclosed
in parens.

The above doesn't work when completing files in subdirectories, and
something is forcing e.g. executable files to be colored bold green,
directories red, etc., if there is ANY value at all for list-colors or
ZLS_COLORS; this must be a bug in the complist module, because the doc
says any value with a leading equal sign should take precedence.

} $ ls abcd[tab]
} abcd123		abcd456		abcd789
} abcdefg		abcdhij		abcdklm
} 
} and I'd like the 'abcd' to be lightgreen.

You'll have to work out for yourself what to replace $color[green]
with, in the example above.  "light green" is not a standard ANSI
color and the code for it may vary.  Just find the number that your
terminal uses and insert that above.

-- 


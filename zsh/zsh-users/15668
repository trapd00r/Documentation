From zsh-users-return-15668-mason-zsh=primenet.com.au@zsh.org Thu Dec 23 07:09:53 2010
Return-Path: <zsh-users-return-15668-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8977 invoked by alias); 23 Dec 2010 07:09:53 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15668
Received: (qmail 15712 invoked from network); 23 Dec 2010 07:09:40 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <101222230927.ZM21944@torch.brasslantern.com>
Date: Wed, 22 Dec 2010 23:09:26 -0800
In-reply-to: <AANLkTik5Lc-57VHSkwOE6v2q=tM24N_0DWbXgTsrATDp@mail.gmail.com>
Comments: In reply to Nikolai Weibull <now@bitwi.se>
 "Why are empty elements removed from array expansion?" (Dec 22,  9:46pm)
References: <AANLkTik5Lc-57VHSkwOE6v2q=tM24N_0DWbXgTsrATDp@mail.gmail.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: Zsh Users <zsh-users@zsh.org>
Subject: Re: Why are empty elements removed from array expansion?
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Dec 22,  9:46pm, Nikolai Weibull wrote:
} Subject: Why are empty elements removed from array expansion?

To understand this, you have to go all the way back to about 1992
when zsh was first being written.

Zsh was designed to make interactive csh users feel comfortable with 
the more rigorously parsed Bourne shell syntax.  In /bin/sh, the only
arrays are $* and its fraternal twin $@, so the behavior of those
variables became the prototype for the behavior of all arrays.

Implicit word splitting of expanded strings was one of the things that
bothered Paul Faulstad about the Bourne shell, but a side-effect of
splitting is that if you first join an array and then split it again,
the empty elements vanish.  So in order to make $* behave in zsh the
way it _appears_ to behave in /bin/sh, empty elements have to vanish.
And because $* is the prototype for all array expansions, all arrays
behave that way.

This is thus a "principle of least surprise" issue -- not what least
surprises *you*, as a programmer expecting certain rigid rules, but
what least surprises an inexpert shell user trying to figure out why
"cat $a" says that the empty string can't be opened as a file.


From zsh-workers-return-20783-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 03 17:39:22 2005
Return-Path: <zsh-workers-return-20783-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24742 invoked from network); 3 Feb 2005 17:39:21 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Feb 2005 17:39:21 -0000
Received: (qmail 66232 invoked from network); 3 Feb 2005 17:39:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Feb 2005 17:39:15 -0000
Received: (qmail 1543 invoked by alias); 3 Feb 2005 17:39:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20783
Received: (qmail 1528 invoked from network); 3 Feb 2005 17:39:12 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Feb 2005 17:39:12 -0000
Received: (qmail 65666 invoked from network); 3 Feb 2005 17:38:36 -0000
Received: from unknown (HELO mailsweeperjp.CSR.COM) (202.214.225.228)
  by a.mx.sunsite.dk with SMTP; 3 Feb 2005 17:38:32 -0000
Received: from exchangejp.csr.com (unverified) by mailsweeperjp.CSR.COM
 (Content Technologies SMTPRS 4.3.1) with ESMTP id <T6ee79c6363c0a879016bc@mailsweeperjp.CSR.COM>;
 Fri, 4 Feb 2005 02:29:48 +0900
Received: from exchange03.csr.com ([10.100.137.60]) by exchangejp.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 3 Feb 2005 17:23:33 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 3 Feb 2005 17:19:28 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j13HJZ9l006039;
	Thu, 3 Feb 2005 17:19:35 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j13HJO7b006036;
	Thu, 3 Feb 2005 17:19:24 GMT
Message-Id: <200502031719.j13HJO7b006036@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list),
        "Peter A. Castro" <doctor@fruitbat.org>
Subject: Re: 4.2.4 failure on MacOS X 
In-reply-to: <1050203162852.ZM14033@candle.brasslantern.com> 
References: <200502031615.j13GFnuc005915@news01.csr.com> <1050203162852.ZM14033@candle.brasslantern.com>
Date: Thu, 03 Feb 2005 17:19:24 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 03 Feb 2005 17:19:28.0915 (UTC) FILETIME=[84896E30:01C50A14]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

> gcc -Wl,-x   -o zsh main.o  `cat stamp-modobjs`   -L/sw/lib -lpcre -ldl 
> -ltinfo -lm  -lc
> ld: Undefined symbols:
> _libiconv
> _libiconv_close
> _libiconv_open

Another possibility:  this error doesn't show the headers, and we now
attempt to compile in the iconv stuff if the headers only were found:

#   if defined(HAVE_ICONV_H) || defined(HAVE_ICONV) || defined(HAVE_LIBICONV)

Peter, are the tests for HAVE_ICONV_H really necessary on Cygwin?
Shouldn't HAVE_LIBICONV be defined from the test you added?

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited. 
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


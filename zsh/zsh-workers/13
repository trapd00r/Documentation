From zsh-workers-request@math.gatech.edu  Fri May 19 21:10:02 1995
Received: from gatech.edu (gatech.edu [128.61.1.1]) by werple.mira.net.au (8.6.10/8.6.9) with SMTP id VAA03519 for <mason@werple.mira.net.au>; Fri, 19 May 1995 21:09:59 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA19709
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Fri, 19 May 1995 07:05:36 -0400
Received: by math (5.x/SMI-SVR4)
	id AA18919; Fri, 19 May 1995 07:03:25 -0400
Resent-Date: Fri, 19 May 1995 11:57:23 +0100
Old-Return-Path: <walkerjj@sweng.ecid.cig.mot.com>
From: walkerjj@jurua.sweng.ecid.cig.mot.com (Joe Walker)
Message-Id: <9505191157.ZM5000@jurua.sweng.ecid.cig.mot.com>
Date: Fri, 19 May 1995 11:57:23 +0100
Reply-To: walkerjj@ecid.cig.mot.com
Phone: (+44) 793 545346
X-Face: ,\m{?h\)X
X-To: archbsd
X-Mailer: Z-Mail (3.0.1 04apr94)
To: zsh-workers@math.gatech.edu
Subject: cd $DIR_NAME problem
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0
Resent-Message-Id: <"KzRzp3.0.Xd4.yh7ll"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/13
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


I found a very wierd problem by trying to run a GNU configure script.
A boiled down version is below:

% pwd
	/home/jurua/walkerjj/l

% ls -l

	total 2
	drwxr-xr-x  2 walkerjj      512 May 11 15:43 test_dir
	-rwxr-xr-x  1 walkerjj       84 May 11 15:43 test_script

% cat test_script

	#!/bin/sh -x

	DIR="test_dir"
 	echo "DIR is ($DIR)"
	cd $DIR
	echo "Test passed"

% test_script

	DIR=test_dir
	+ echo DIR is (test_dir)
	DIR is (test_dir)
	+ cd test_dir
	test_script: test_dir: bad directory


So that is the problem: any shell script that changes to a directory using a
variable, fails.

However it get stranger:

% mv test_* ..
% cd ..
% pwd
	/home/jurua/walkerjj

% test_script

	DIR=test_dir
	+ echo DIR is (test_dir)
	DIR is (test_dir)
	+ cd test_dir
	+ echo Test passed
	Test passed


For all of the above:

% echo $ZSH_VERSION

	2.6-beta8

% uname -a

	SunOS jurua 4.1.3_U1 8 sun4m


I've only edited the output to make it easier to read.
Sorry but I don't know enough about Z-shell internals yet to be able to suggest
a fix.

Thanks,

Joe.

--

  ____
 |___ | ___  ___   EMail: walkerjj@sweng.ecid.cig.mot.com
 _  | |/ _ \| __|  SMail: Motorola, 16 Euroway, Blagrove, SWINDON SN58YQ
| |_| | (_) | _|   Tel:   [+44/0] 793 54 5346
 \___/ \___/|___|  Fax:   [+44/0] 793 54 1228


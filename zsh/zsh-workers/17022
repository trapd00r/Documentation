From zsh-workers-return-17022-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 22 18:33:21 2002
Return-Path: <zsh-workers-return-17022-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15942 invoked from network); 22 Apr 2002 18:33:20 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 22 Apr 2002 18:33:20 -0000
Received: (qmail 1985 invoked by alias); 22 Apr 2002 18:33:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17022
Received: (qmail 1965 invoked from network); 22 Apr 2002 18:33:09 -0000
Date: Mon, 22 Apr 2002 11:32:35 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: schaefer@ns1.sodaware.com
To: Felix Rosencrantz <f_rosencrantz@yahoo.com>
cc: zsh-workers <zsh-workers@sunsite.auc.dk>, Julian Seward <jseward@acm.org>
Subject: Re: valgrind: useful memory checker
In-Reply-To: <20020422182026.19547.qmail@web10401.mail.yahoo.com>
Message-ID: <Pine.LNX.4.44.0204221128350.24441-100000@ns1.sodaware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 22 Apr 2002, Felix Rosencrantz wrote:

> One of the problems was that zsh calls malloc() during signal handlers.
> Which Julian pointed out is not a particularly safe thing to do....  (I
> figure Bart or others might comment about this.)

It's "not particularly safe" only if you don't know what you're doing.

We went to some trouble a while ago to assure that signals are blocked
while zsh is performing other memory allocations, so that we don't have
re-entry problems with calling malloc() from inside the handlers when they
do get called.


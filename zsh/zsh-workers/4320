From zsh-workers-request@math.gatech.edu Tue Aug 18 18:39:01 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5876 invoked from network); 18 Aug 1998 18:39:00 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 18 Aug 1998 18:39:00 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id OAA17279;
	Tue, 18 Aug 1998 14:32:45 -0400 (EDT)
Resent-Date: Tue, 18 Aug 1998 14:32:45 -0400 (EDT)
From: pacman@cqc.com
Message-ID: <19980818183525.15460.qmail@defiant.cqc.com>
Subject: Re: recipe for a ZLE segfault
To: zsh-workers@math.gatech.edu
Date: Tue, 18 Aug 1998 13:35:25 -0500 (EST)
In-Reply-To: <199808181029.MAA07660@hydra.ifh.de> from "Peter Stephenson" at Aug 18, 98 12:29:57 pm
Content-Type: text
Resent-Message-ID: <"QvjFj3.0.wD4.DZSsr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4320
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Peter Stephenson writes the following:
>
>I get this too.  Does this fix it?  (It looks like it's necessary anyway,
>according to my reading of mkundoent().)
>
>*** Src/Zle/zle_utils.c.ch	Wed Apr 29 23:42:46 1998
>--- Src/Zle/zle_utils.c	Tue Aug 18 12:24:07 1998
>***************
>*** 516,521 ****
>--- 516,522 ----
>  	line[ll - 1 - suf] == lastline[lastll - 1 - suf]; )
>  	suf++;
>      ch = zalloc(sizeof(*ch));
>+     ch->next = NULL;
>      ch->hist = histline;
>      ch->off = pre;
>      if(suf + pre == lastll)

Yes, this takes care of it.
-- 
Alan Curry


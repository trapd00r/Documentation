From zsh-workers-return-12656-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Aug 16 09:57:22 2000
Return-Path: <zsh-workers-return-12656-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2883 invoked from network); 16 Aug 2000 09:57:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Aug 2000 09:57:21 -0000
Received: (qmail 18780 invoked by alias); 16 Aug 2000 09:57:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12656
Received: (qmail 18767 invoked from network); 16 Aug 2000 09:56:59 -0000
Date: Wed, 16 Aug 2000 11:56:44 +0200 (MET DST)
Message-Id: <200008160956.LAA11550@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Wed, 16 Aug 2000 10:45:05 +0100
Subject: Re: PATCH: $modules (was: Re: Seg fault with zmodload -u)


Peter Stephenson wrote:

> Sven wrote:
> > Oliver Kiddle wrote:
> > > On the subject of zmodload completion, how would I prevent the 'module
> > > alias' description from being displayed when there are no module
> > > aliases - do I have to put the zmodload -A output in an array first and
> > > then not call the _requested line if the array is empty - or is there a
> > > better way?
> > 
> > Eh? The description for the aliases should not be displayed when there 
> > are no matches added for it (or none of the strings added for it match 
> > what's on the line). Automatically. And it works for me (using a
> > simple test completion function).
> 
> I had the same experience as Oliver before I changed _zmodload.  Could it
> make a difference if the string on the line is empty?  Or that I have
> different match groups listed separately?

No. It's that without aliases, `zmodload -A' prints a newline. I.e.,
one line. So `${${(f)"$(zmodload -A)"}%% *}' produces one string (an
empty one). This could have been fixes by using:
`${${${(f)"$(zmodload -A)"}%% *}:#}'.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


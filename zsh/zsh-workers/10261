From zsh-workers-return-10261-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 27 08:32:19 2000
Return-Path: <zsh-workers-return-10261-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1647 invoked from network); 27 Mar 2000 08:32:18 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Mar 2000 08:32:18 -0000
Received: (qmail 11516 invoked by alias); 27 Mar 2000 08:32:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10261
Received: (qmail 11504 invoked from network); 27 Mar 2000 08:32:01 -0000
Date: Mon, 27 Mar 2000 10:32:00 +0200 (MET DST)
Message-Id: <200003270832.KAA01709@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Sat, 25 Mar 2000 20:39:22 +0000
Subject: Re: endianness of wordcode


Bart Schaefer wrote:

> On Mar 23,  9:04pm, Peter Stephenson wrote:
> } Subject: endianness of wordcode
> }
> } I'm a little doubtful about the necessity of having doubled wordcode files
> } for different endianness.  [...]  I wonder whether it would be
> } better always to dump in the native format, check if the order is swapped
> } when reading, and if so swap it back on the fly.
> 
> At one point I think the wordcode files were always mmap'd, which meant
> they couldn't be unswapped.  Now that Sven has written the code to read
> the files when mmap isn't available, it should be possible to recognize
> swapped files and switch to reading them -- but it'll be a little messy,
> as swapped-ness won't be detected until after the file is mmap'd.

No, this can be decided by reading only the header, which is done
before mmap'ing a file.

I'm not sure if we want to get rid of the endianess stuff, though. The 
original request for it came because we were thinking about globally
installed wordcode files. I wasn't too hapy with that at the time, but 
*if* global wordcode files are a good idea, we should make them
contain both versions. If we don't do that people may think that the
files are mapped but they aren't, just because they are on the wrong
architecture.

(I'll come back to the other things later...)

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


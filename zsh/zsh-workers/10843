From zsh-workers-return-10843-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 19 15:50:48 2000
Return-Path: <zsh-workers-return-10843-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7059 invoked from network); 19 Apr 2000 15:50:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Apr 2000 15:50:47 -0000
Received: (qmail 5073 invoked by alias); 19 Apr 2000 15:50:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10843
Received: (qmail 5053 invoked from network); 19 Apr 2000 15:50:32 -0000
Message-ID: <38FDD5C4.829DF9F@u.genie.co.uk>
Date: Wed, 19 Apr 2000 16:50:28 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.72 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: new _print and thoughts on _arguments mutexes
References: <E12hwAK-0001Xi-00@crucigera.fysh.org>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Zefram wrote:

> I suppose you could play with (:>&p) type stuff.

That seems to work nicely, thanks.

> >      I can find out which file-descriptors are currently active using
> >/dev/fd/n tests but I haven't bothered because it wouldn't be much use
> >unless I could create meaningful descriptions of the file/pipe that the
> >file-descriptor points to.
> 
> Under Linux, readlink(2) on /proc/<foo>/fd/<n> is scarily useful.

That is useful. On the debian system here, there is a readlink(1). Is
that common on Linux?

When I look in /proc/$$/fd after creating a coprocess, I get something
like:
lrwx------    1 kiddleo  kiddleo        64 Apr 19 16:35 0 -> /dev/pts/0
lrwx------    1 kiddleo  kiddleo        64 Apr 19 16:35 1 -> /dev/pts/0
lrwx------    1 kiddleo  kiddleo        64 Apr 19 16:35 10 -> /dev/pts/0
lr-x------    1 kiddleo  kiddleo        64 Apr 19 16:35 11 ->
pipe:[111653]
l-wx------    1 kiddleo  kiddleo        64 Apr 19 16:35 14 ->
pipe:[111654]
lrwx------    1 kiddleo  kiddleo        64 Apr 19 16:35 2 -> /dev/pts/0
l-wx------    1 kiddleo  kiddleo        64 Apr 19 16:35 4 ->
pipe:[111654]

Does anyone know what the significance of the 111654 and 111653 is. Can
I convert them into anything useful like the PID of the coprocess. 

I'll look at doing an _file_descriptors this evening. Which directory
should it go in - Builtins? I suppose it'll only be useful for _print,
_read and _redirect?

Oliver


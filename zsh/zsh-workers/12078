From zsh-workers-return-12078-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 26 21:30:15 2000
Return-Path: <zsh-workers-return-12078-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26110 invoked from network); 26 Jun 2000 21:30:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jun 2000 21:30:14 -0000
Received: (qmail 12078 invoked by alias); 26 Jun 2000 21:29:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12078
Received: (qmail 12066 invoked from network); 26 Jun 2000 21:29:36 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: PATCH: `read -t' tests for available input before reading. 
In-reply-to: ""Bart Schaefer""'s message of "Mon, 26 Jun 2000 15:33:56 -0000."
             <1000626153356.ZM25846@candle.brasslantern.com> 
Date: Mon, 26 Jun 2000 22:29:25 +0100
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E136gRa-000800-00.2000-06-26-22-29-26@cmailg3.svr.pol.co.uk>

"Bart Schaefer" wrote:
> On Jun 26,  3:54pm, Peter Stephenson wrote:
> } Subject: PATCH: `read -t' tests for available input before reading.
> }
> } I implemented this because I need it for a set of commands [...]
> 
> May I suggest that the read_poll() helper function belongs somewhere 
> other than in builtin.c ?  Perhaps in utils.c where other tty mucking
> is located?  (Not that utils.c itself isn't getting a bit large.)

I've put it it utils.c, where it needs an extra argument since readfd isn't
accessible, but it's otherwise unchanged, so I haven't posted it.

The patch seems to work on Linux, so I hope not too much tinkering will be
necessary.  I'm now fighting here with endless
  There are insecure directories, continue [ny]? y
messages, as predicted by Bart.

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Work: pws@CambridgeSiliconRadio.com
Web: http://www.pwstephenson.fsnet.co.uk


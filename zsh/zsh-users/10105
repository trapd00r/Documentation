From zsh-users-return-10105-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 29 18:09:32 2006
Return-Path: <zsh-users-return-10105-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13771 invoked from network); 29 Mar 2006 18:09:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Mar 2006 18:09:30 -0000
Received: (qmail 41137 invoked from network); 29 Mar 2006 18:09:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Mar 2006 18:09:22 -0000
Received: (qmail 25748 invoked by alias); 29 Mar 2006 18:09:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10105
Received: (qmail 25739 invoked from network); 29 Mar 2006 18:09:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 29 Mar 2006 18:09:15 -0000
Received: (qmail 40201 invoked from network); 29 Mar 2006 18:09:15 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 29 Mar 2006 18:09:14 -0000
Received: from torch.brasslantern.com ([71.116.81.225])
 by vms042.mailsrvcs.net (Sun Java System Messaging Server 6.2-4.02 (built Sep
 9 2005)) with ESMTPA id <0IWW00BLEIFCVRF1@vms042.mailsrvcs.net> for
 zsh-users@sunsite.dk; Wed, 29 Mar 2006 12:09:13 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id k2TI91iT005910	for
 <zsh-users@sunsite.dk>; Wed, 29 Mar 2006 10:09:10 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id k2TI91Vc005909	for zsh-users@sunsite.dk; Wed,
 29 Mar 2006 10:09:01 -0800
Date: Wed, 29 Mar 2006 10:09:01 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: cd && cdable_vars (bug?)
In-reply-to: <20060329114653.GA24380@let.rug.nl>
To: Zsh User <zsh-users@sunsite.dk>
Message-id: <060329100901.ZM5908@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20060329114653.GA24380@let.rug.nl>
Comments: In reply to Francisco Borges <f.borges@rug.nl>
 "cd && cdable_vars (bug?)" (Mar 29,  1:46pm)

On Mar 29,  1:46pm, Francisco Borges wrote:
}
} Two questions/comments about cd and cdable_vars:
} 
} 1. I have cdable_vars set and I do have some data directories with
}    "integer" names: 2, 3, 5.
} 
}    When trying to complete on these dirs, I get not only the dirs I'm
}    supposed to get (those inside directory "5/.") but I also get all
}    subdirs of the fifth entry in my dirstack as "directory after
}    cdablevar".

That looks like a bug in _cd.  It should be getting handled by _tilde
and classified as "directory-stack".
 
}    Which AFAIK should not happen, since there is a directory "5", so
}    there should be no cdablevar lookup, right?

That's probably true, but it may depend on your other completion settings.
Completion usually errs on the side of giving you too many choices, when
there is ambiguity.
 
} 2. The first problem lead me to try completing on cdablevars from the

Do you mean "completing" here, or do you mean executing "cd"?

}    dirstack. This is *not* something I would like to do, but I tried
}    motivated by the noise when completing.
} 
}    And it failed! But it shouldn't, right?

I think the doc for CDABLE_VARS predates the ability to refer to dirstack
entries with tilde-notation ... "as if it were preceded by a `~'" really
means "look it up in the named directories table and use the value of the
parameter".  Since "3" is not really a parameter ...  Anyway, I believe
this is a case of the implementation outrunning the doc.


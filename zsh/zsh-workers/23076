From zsh-workers-return-23076-mason-zsh=primenet.com.au@sunsite.dk Mon Dec 25 01:23:34 2006
Return-Path: <zsh-workers-return-23076-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6885 invoked from network); 25 Dec 2006 01:23:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Dec 2006 01:23:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 69604 invoked from network); 25 Dec 2006 01:23:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Dec 2006 01:23:21 -0000
Received: (qmail 3976 invoked by alias); 25 Dec 2006 01:23:19 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23076
Received: (qmail 3966 invoked from network); 25 Dec 2006 01:23:18 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 Dec 2006 01:23:18 -0000
Received: (qmail 69354 invoked from network); 25 Dec 2006 01:23:18 -0000
Received: from jlefevre.net1.nerim.net (HELO ay.vinc17.org) (80.65.226.245)
  by a.mx.sunsite.dk with SMTP; 25 Dec 2006 01:23:13 -0000
Received: from lefevre by ay.vinc17.org with local (Exim 4.63)
	(envelope-from <vincent@vinc17.org>)
	id 1GyeYS-0008A0-9r; Mon, 25 Dec 2006 02:23:04 +0100
Date: Mon, 25 Dec 2006 02:23:04 +0100
From: Vincent Lefevre <vincent@vinc17.org>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: configure should have --with-ncurses and --with-ncursesw
Message-ID: <20061225012304.GC31010@ay.vinc17.org>
Mail-Followup-To: Zsh hackers list <zsh-workers@sunsite.dk>
References: <20061218143802.GX11091@prunille.vinc17.org> <20061218154652.a9a77e25.pws@csr.com> <20061219161216.GC7815@DervishD> <200612191622.kBJGMcXb005284@news01.csr.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <200612191622.kBJGMcXb005284@news01.csr.com>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.13-vl-r13495 (2006-11-01)

On 2006-12-19 16:22:38 +0000, Peter Stephenson wrote:
> DervishD wrote:
> >     Hi Peter :)
> > 
> >  * Peter Stephenson <pws@csr.com> dixit:
> > > Vincent Lefevre <vincent@vinc17.org> wrote:
> > > > No-one commented on this.
> > > 
> > > That's probably because this is MAC-specific and nobody knew what it
> > > meant.
> > 
> >     Not at all, AFAIK. The ncursesw library can be used in any Linux,
> > for example.
> 
> Indeed, I've got it here.  The problem seems to be that in the case in
> question it's getting in the way for some reason and if we knew the whys
> and wherefores we could presumably avoid it.

The problem is that zsh uses the curses API by default, so that
currently, the only way to use the ncurses library is to install
curses compatibility link (ncurses doesn't install them, but
Linux distributions and Mac OS X do). The problem occurs when
the user wants to install a newer version of ncurses (from
upstream) in /usr/local, /opt/local or whatever. As zsh uses
curses by default, it uses the old ncurses library (which, in
the case of Mac OS X, is buggy).

To be able to use ncurses by default, I had to change the configure
script:

-  termcap_curses_order="tinfo curses ncurses termcap"
+  termcap_curses_order="ncurses tinfo curses termcap"

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


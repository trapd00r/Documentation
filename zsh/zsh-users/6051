From zsh-users-return-6051-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 26 09:09:23 2003
Return-Path: <zsh-users-return-6051-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28071 invoked from network); 26 Apr 2003 09:09:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 26 Apr 2003 09:09:22 -0000
Received: (qmail 22152 invoked by alias); 26 Apr 2003 09:09:07 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6051
Received: (qmail 22144 invoked from network); 26 Apr 2003 09:09:07 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 26 Apr 2003 09:09:07 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.238.3.230] by sunsite.dk (MessageWall 1.0.8) with SMTP; 26 Apr 2003 9:9:7 -0000
Received: from multimail.skynet.be (dina.skynet.be [195.238.2.122])
        by sarek.skynet.be (8.12.9/8.12.9/Skynet-OUT-2.21) with SMTP id h3Q98vsW027590;
	Sat, 26 Apr 2003 11:08:57 +0200
        (envelope-from <koen.van_hoof@skynet.be>)
Message-Id: <200304260908.h3Q98vsW027590@sarek.skynet.be>
X-Webmail-posting-IP: 80.200.219.35
From: koen.van_hoo1@skynet.be
Subject: RE: wrong LINES, COLUMNS
To: Tomi.Vainio@Sun.COM, koen.van_hoo1@skynet.be
Cc: zsh-users@sunsite.dk
Date: Sat, 26 Apr 2003 11:08:57 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary=-----boundalter150977


-------boundalter150977
Content-Type: text/plain
Content-Transfer-Encoding: 8bit

Hi,

Yes, it is on Solaris 2.6, but I don't know what patch it was.
I just sent this mail, so maybe somebody can apply my changes into the official sources.
I don't have the knowledgne nor the time to find out how to do it myself, that's why I sent it to the mailing list.
It's probably not so important, but I guess it's a little effort for somebody who knows the procedure.

-- Koen






koen.van_hoo1@skynet.be writes:
> 
> Recently it did install some patches on our servers, which caused 
> ioctl(SHTTY, TIOCGWINSZ, (char *)&shttyinfo.winsize)
> to return an error.
> In that case ws_row and ws_col in shttyinfo.winsize are set to 0 in Src/utils.c, 
> and a lot off tools like vi, more, less, ... don't work properly anymore.
> 
You didn't say which server you are talking about. Might it be
Solaris 2.6 and you installed latest kernel jumbo patch which has
identical problem you just described?

4843340 patch 105181-34 /kernel/strmod/ptem returns EINVAL for
TIOCGWINSZ ioctl

Tomppa
-------boundalter150977--


From zsh-workers-request@euclid.skiles.gatech.edu  Fri Aug 23 06:43:38 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id GAA02963 for <mason@primenet.com.au>; Fri, 23 Aug 1996 06:43:35 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA29654; Thu, 22 Aug 1996 16:41:18 -0400 (EDT)
Resent-Date: Thu, 22 Aug 1996 16:41:18 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199608222039.WAA15249@bolyai.cs.elte.hu>
Subject: Re: RLIMIT, HP-UX B.10.20
To: rudy@foghorn.rose.hp.com (Rudy Anderson)
Date: Thu, 22 Aug 1996 22:39:58 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <3218B5E1.4D20@foghorn.rose.hp.com> from Rudy Anderson at "Aug 19, 96 11:43:45 am"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"T_wkI3.0.GF7.jNC7o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2049
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> Howdy, here ya go:
> 
> cc -Aa -D_HPUX_SOURCE -c -I.. -I. -I.  -DHAVE_CONFIG_H -O builtin.c
> cpp: "builtin.c", line 3639: error 4062: there are some unknown limits.  Fix me!
> 
> CPU=HP 9000/715-75 (hppa1.1)
> OS=HP-UX B.10.20
> 
> I'm using the HP (ansi) compiler, ran the regular 'config.' This worked fine
> under HP-UX 10.10...

The patch below should make it work.  Does the ulimit on HP-UX 10.20 has
some option to set this limit?  We may add this new option to zsh's ulimit
as well (now you must use limit cachedthreads to set it).

Zoltan


*** Src/builtin.c	1996/08/14 15:25:29	2.77
--- Src/builtin.c	1996/08/22 20:34:41
***************
*** 3638,3643 ****
--- 3638,3651 ----
  # if NEXT_RLIM != RLIM_NLIMITS
     #error there are some unknown limits.  Fix me!
  # endif
+ # if defined RLIMIT_TCACHE && RLIMIT_TCACHE == NEXT_RLIM
+ #  undef NEXT_RLIM
+ #  define NEXT_RLIM (RLIMIT_TCACHE + 1)
+     "cachedthreads",
+ # endif /* RLIMIT_TCACHE */
+ # if NEXT_RLIM != RLIM_NLIMITS
+    #error there are some unknown limits.  Fix me!
+ # endif
  # undef NEXT_RLIM
      NULL
  };
***************
*** 4142,4147 ****
--- 4150,4161 ----
  	    limit /= 1024;
  	break;
  # endif /* RLIMIT_AS */
+ # ifdef RLIMIT_TCACHE
+     case RLIMIT_TCACHE:
+ 	if (head)
+ 	    printf("cached threads             ");
+ 	break;
+ # endif /* RLIMIT_TCACHE */
      }
      /* display the limit */
      if (limit == RLIM_INFINITY)


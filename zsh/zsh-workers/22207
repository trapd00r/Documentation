From zsh-workers-return-22207-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 09 23:36:06 2006
Return-Path: <zsh-workers-return-22207-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2081 invoked from network); 9 Feb 2006 23:35:57 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO,UPPERCASE_25_50 autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Feb 2006 23:35:57 -0000
Received: (qmail 67055 invoked from network); 9 Feb 2006 23:35:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Feb 2006 23:35:39 -0000
Received: (qmail 24044 invoked by alias); 9 Feb 2006 23:35:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22207
Received: (qmail 24035 invoked from network); 9 Feb 2006 23:35:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Feb 2006 23:35:36 -0000
Received: (qmail 66738 invoked from network); 9 Feb 2006 23:35:36 -0000
Received: from ns2.hostinglmi.net (213.194.149.12)
  by a.mx.sunsite.dk with SMTP; 9 Feb 2006 23:35:34 -0000
Received: from 90.red-213-97-199.staticip.rima-tde.net ([213.97.199.90]:11585 helo=localhost)
	by ns2.hostinglmi.net with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.52)
	id 1F7LK4-0000h9-UO
	for zsh-workers@sunsite.dk; Fri, 10 Feb 2006 00:35:37 +0100
Date: Fri, 10 Feb 2006 00:32:02 +0100
From: David =?utf-8?B?R8OzbWV6?= <david@pleyades.net>
To: Zsh-workers <zsh-workers@sunsite.dk>
Subject: Libtool/zsh quoting problem
Message-ID: <20060209233201.GA5875@fargo>
Mail-Followup-To: Zsh-workers <zsh-workers@sunsite.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.4.2.1i
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ns2.hostinglmi.net
X-AntiAbuse: Original Domain - sunsite.dk
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - pleyades.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 

Hi all ;),

>From some time till now i was having problems compiling certaing packages, in
particular those ones that used macros in the command with spaces in it. I
thought it was a libtool problem, but the culprit seems zsh ;).

I was missing the origin of the problem because in another systems with zsh
everything compiled correctly. The difference was that in those machines /bin/sh
pointed to a bash shell (no problem) and in my system /bin/sh points to zsh.

All libtool scripts start with /bin/sh, so everything will work ok if the 
sh symlink is a bash shell.

A example, with the littlecms source (http://www.littlecms.com):

[huma@fargo] [~/lcms-1.15] % make
Making all in src
make[1]: Entering directory `/home/huma/lcms-1.15/src'
if /bin/sh ../libtool --tag=CC --mode=compile gcc -DPACKAGE_NAME=\"lcms\"
-DPACKAGE_TARNAME=\"lcms\" -DPACKAGE_VERSION=\"1.15\" -DPACKAGE_STRING=\"lcms\
1.15\" -DPACKAGE_BUGREPORT=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1
-DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1
-DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1
-DHAVE_DLFCN_H=1 -DSIZEOF_INT=4 -DSIZEOF_UNSIGNED_INT=4 -DSIZEOF_LONG=4
-DSIZEOF_UNSIGNED_LONG=4 -DSIZEOF_LONG_LONG=8 -DSIZEOF_UNSIGNED_LONG_LONG=8
-DHasJPEG=1 -DHasZLIB=1 -DHasTIFF=1 -DHAVE_TIFFCONF_H=1  -I. -I. -I../include
-I../include    -g -O2 -MT cmscnvrt.lo -MD -MP -MF ".deps/cmscnvrt.Tpo" -c -o
cmscnvrt.lo cmscnvrt.c; \ then mv -f ".deps/cmscnvrt.Tpo" ".deps/cmscnvrt.Plo";
else rm -f ".deps/cmscnvrt.Tpo"; exit 1; fi
 gcc -DPACKAGE_NAME=\"lcms\" -DPACKAGE_TARNAME=\"lcms\"
-DPACKAGE_VERSION=\"1.15\" -DPACKAGE_STRING=\"lcms 1.15\"
-DPACKAGE_BUGREPORT=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1
-DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1
-DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1
-DHAVE_DLFCN_H=1 -DSIZEOF_INT=4 -DSIZEOF_UNSIGNED_INT=4 -DSIZEOF_LONG=4
-DSIZEOF_UNSIGNED_LONG=4 -DSIZEOF_LONG_LONG=8 -DSIZEOF_UNSIGNED_LONG_LONG=8
-DHasJPEG=1 -DHasZLIB=1 -DHasTIFF=1 -DHAVE_TIFFCONF_H=1 -I. -I. -I../include
-I../include -g -O2 -MT cmscnvrt.lo -MD -MP -MF .deps/cmscnvrt.Tpo -c
cmscnvrt.c  -fPIC -DPIC -o .libs/cmscnvrt.o gcc: 1.15": No such file or
directory
make[1]: *** [cmscnvrt.lo] Error 1
make[1]: Leaving directory `/home/huma/lcms-1.15/src'
make: *** [all-recursive] Error 1

Where -DPACKAGE_STRING=\"lcms 1.15\" in the gcc command should be quoted
to avoid the error.

I noticed this problem too compiling other packages: Xorg modular and libIDL.

Is there any option in zsh to avoid this problem?

thanks,

-- 
David GÃ³mez                                      Jabber ID: davidge@jabber.org


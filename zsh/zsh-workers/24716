From zsh-workers-return-24716-mason-zsh=primenet.com.au@sunsite.dk Sun Mar 16 14:41:03 2008
Return-Path: <zsh-workers-return-24716-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 314 invoked from network); 16 Mar 2008 14:41:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Mar 2008 14:41:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 91772 invoked from network); 16 Mar 2008 14:40:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Mar 2008 14:40:54 -0000
Received: (qmail 22859 invoked by alias); 16 Mar 2008 14:40:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24716
Received: (qmail 22839 invoked from network); 16 Mar 2008 14:40:49 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 16 Mar 2008 14:40:49 -0000
Received: from n068.sc1.he.tucows.com (smtpout0155.sc1.he.tucows.com [64.97.136.155])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 2E68780307F7
	for <zsh-workers@sunsite.dk>; Sun, 16 Mar 2008 15:40:42 +0100 (CET)
Received: from sc1-out09.emaildefenseservice.com (64.97.139.2) by n068.sc1.he.tucows.com (7.2.069.1)
        id 4769316E00EEBED5 for zsh-workers@sunsite.dk; Sun, 16 Mar 2008 14:40:40 +0000
X-SpamScore: 2
X-Spamcatcher-Summary: 2,0,0,d35211cfb28cede4,f13c46a7ac4381a0,stephane_chazelas@yahoo.fr,-,RULES_HIT:355:379:973:982:988:989:1260:1277:1311:1312:1313:1314:1345:1437:1515:1516:1518:1519:1534:1537:1561:1593:1594:1595:1596:1711:1714:1730:1747:1766:1792:2194:2199:2393:2559:2562:2828:3421:3653:3865:3867:3869:3874:4361:4605:5007:6119:6261,0,RBL:none,CacheIP:none,Bayesian:0.5,0.5,0.5,Netcheck:none,DomainCache:0,MSF:not bulk,SPF:fu,MSBL:none,DNSBL:none
X-Spamcatcher-Explanation: 
Received: from sc.homeunix.net (client-82-26-171-1.edin.adsl.virgin.net [82.26.171.1])
	by sc1-out09.emaildefenseservice.com (Postfix) with ESMTP
	for <zsh-workers@sunsite.dk>; Sun, 16 Mar 2008 14:40:40 +0000 (UTC)
Received: from chazelas by sc.homeunix.net with local (Exim 4.69)
	(envelope-from <stephane_chazelas@yahoo.fr>)
	id 1Jau2Q-0002ad-Kx
	for zsh-workers@sunsite.dk; Sun, 16 Mar 2008 14:40:38 +0000
Date: Sun, 16 Mar 2008 14:40:38 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: ${a[(i)pattern]} if a=()
Message-ID: <20080316144038.GA4910@sc.homeunix.net>
Mail-Followup-To: Zsh hackers list <zsh-workers@sunsite.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.5.16 (2007-09-19)
X-Virus-Scanned: ClamAV 0.91.2/6256/Sun Mar 16 14:34:18 2008 on bifrost
X-Virus-Status: Clean

Hiya,

$ zsh -f -c 'a=(b); echo ${a[(i)a]}'
2
$ zsh -f -c 'a=(); echo ${a[(i)a]}'
0

Shouldn't the above return 1?

That at leasts causes compinstall to fail on

         elt=${amenu[(i)*select*]}
	 [...]
	 amenu[$elt]="select=$select"
__ci_do_selection:91: amenu: assignment to invalid subscript range

Best regards,
Stéphane


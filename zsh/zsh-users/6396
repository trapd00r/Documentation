From zsh-users-return-6396-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 14 17:36:15 2003
Return-Path: <zsh-users-return-6396-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10408 invoked from network); 14 Jul 2003 17:36:14 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 Jul 2003 17:36:14 -0000
Received: (qmail 5009 invoked by alias); 14 Jul 2003 17:35:58 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6396
Received: (qmail 4995 invoked from network); 14 Jul 2003 17:35:58 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 14 Jul 2003 17:35:58 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [68.55.195.109] by sunsite.dk (MessageWall 1.0.8) with SMTP; 14 Jul 2003 17:35:58 -0000
Received: by mithrandir.aperiodic.net (Postfix, from userid 1000)
	id C03DBC084E; Mon, 14 Jul 2003 13:35:56 -0400 (EDT)
Date: Mon, 14 Jul 2003 13:35:56 -0400
From: Phil!Gregory <phil_g@pobox.com>
To: zsh-users@sunsite.dk
Subject: $? being clobbered?
Message-ID: <20030714173555.GA4352@mithrandir.aperiodic.net>
Mail-Followup-To: zsh-users@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
X-Uptime-Bragging: aragorn: 3 days, 10:38:10.65
X-message-flag: You're using Outlook?  I highly recommend changing mail programs.
User-Agent: Mutt/1.5.4i

I'm having a problem with zsh, and am not sure if it's a bug or a
feature.  If I have a program executed in my prompt, its return status
clobbers the value of $?, which isn't really what I want.  Example:

> PROMPT='> '
> perl -e 'exit 42'
> echo $?
42
> PROMPT='%{$(echoti cub 80)%}> '
> perl -e 'exit 42'
> echo $?
0

Is there some way to fix this?

(zsh 4.0.7, Sven.)

-- 
...computer contrarian of the first order... / http://aperiodic.net/phil/
PGP: 026A27F2  print: D200 5BDB FC4B B24A 9248  9F7A 4322 2D22 026A 27F2
--- --
This is a one line proof... if we start sufficiently far to the left.
                       -- Cambridge University math professor
---- --- --


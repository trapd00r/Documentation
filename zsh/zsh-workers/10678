From zsh-workers-return-10678-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 11 21:57:03 2000
Return-Path: <zsh-workers-return-10678-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10010 invoked from network); 11 Apr 2000 21:57:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Apr 2000 21:57:02 -0000
Received: (qmail 20799 invoked by alias); 11 Apr 2000 21:56:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10678
Received: (qmail 20776 invoked from network); 11 Apr 2000 21:56:54 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <000411145647.ZM8972@candle.brasslantern.com>
Date: Tue, 11 Apr 2000 14:56:47 -0700
In-Reply-To: <20000411213823.B1605@thelonious.new.ox.ac.uk>
Comments: In reply to Adam Spiers <adam@spiers.net>
        "core dump with fc" (Apr 11,  9:38pm)
References: <20000411213823.B1605@thelonious.new.ox.ac.uk>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: core dump with fc
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 11,  9:38pm, Adam Spiers wrote:
>
> Stack trace follows.  This /doesn't/ happen if I start up with -f

It *does* happen to me when I start up with -f.  Essentially the same
stack trace, but that value for `sub' doesn't look very good in frame #0.
(I have zsh-mem-debug etc. turned on, so that's probably a freed-memory
pattern.)

(gdb) where
#0  0x80538db in fcsubs (sp=0xbffff714, sub=0xffffffff)
    at ../../zsh-3.1.6/Src/builtin.c:1345
#1  0x8053b01 in fclist (f=0x80ce320, n=0, r=0, D=0, d=0, first=2, last=2, 
    subs=0x400e4898, pprog=0x0) at ../../zsh-3.1.6/Src/builtin.c:1410
#2  0x8053755 in bin_fc (nam=0x400e4848 "fc", argv=0xbffff7a4, 
    ops=0xbffff804 "", func=16) at ../../zsh-3.1.6/Src/builtin.c:1279
#3  0x80516ed in execbuiltin (args=0x400e47f8, bn=0x80b1aa8)
    at ../../zsh-3.1.6/Src/builtin.c:368
#4  0x8061526 in execcmd (state=0xbffffab8, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2254
#5  0x805e327 in execpline2 (state=0xbffffab8, pcode=259, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1180
#6  0x805d8b7 in execpline (state=0xbffffab8, slcode=8194, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:973
#7  0x805d2b5 in execlist (state=0xbffffab8, dont_change_job=0, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:820
#8  0x805cfb7 in execode (p=0x400e4778, dont_change_job=0, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:726
#9  0x8070922 in loop (toplevel=1, justonce=0)
    at ../../zsh-3.1.6/Src/init.c:150
#10 0x8050ce0 in main (argc=2, argv=0xbffffb34)
    at ../../zsh-3.1.6/Src/main.c:86


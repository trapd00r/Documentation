From zsh-workers-return-24485-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 29 17:41:38 2008
Return-Path: <zsh-workers-return-24485-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17981 invoked from network); 29 Jan 2008 17:41:36 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Jan 2008 17:41:36 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 1653 invoked from network); 29 Jan 2008 17:41:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Jan 2008 17:41:29 -0000
Received: (qmail 6242 invoked by alias); 29 Jan 2008 17:41:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24485
Received: (qmail 6232 invoked from network); 29 Jan 2008 17:41:25 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 29 Jan 2008 17:41:25 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 12EEF8028C6A
	for <zsh-workers@sunsite.dk>; Tue, 29 Jan 2008 18:41:18 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly10d.srv.mailcontrol.com (MailControl) with ESMTP id m0THeKXF023393
	for <zsh-workers@sunsite.dk>; Tue, 29 Jan 2008 17:41:15 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 29 Jan 2008 17:41:07 +0000
Date: Tue, 29 Jan 2008 17:41:07 +0000
From: Peter Stephenson <pws@csr.com>
To: "Zsh Hackers' List" <zsh-workers@sunsite.dk>
Subject: Re: 4.3.4-dev-8
Message-ID: <20080129174107.6029840b@news01>
In-Reply-To: <479F5C90.1090109@math.technion.ac.il>
References: <32478.1201607012@csr.com>
	<479F5C90.1090109@math.technion.ac.il>
Organization: CSR
X-Mailer: Claws Mail 3.2.0 (GTK+ 2.10.14; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 29 Jan 2008 17:41:07.0597 (UTC) FILETIME=[20E013D0:01C8629E]
X-Scanned-By: MailControl A-08-00-01 (www.mailcontrol.com) on 10.68.0.120
X-Virus-Scanned: ClamAV 0.91.2/5599/Tue Jan 29 17:27:10 2008 on bifrost
X-Virus-Status: Clean

On Tue, 29 Jan 2008 19:04:16 +0200
"Zvi Har'El" <rl@math.technion.ac.il> wrote:
> I would like to remind you that on solaris syestem, where ncursesw 
> installed in /usr/local and needs /usr/local/include/ncursesw/term.h 
> rather than /usr/include/term.h, normal build fails, and I need to run 
> "*CFLAGS=-I/usr/local/include/ncursesw ./configure*".

Ick.  I wasn't aware there were yet more problems after the zillion zillion
zillion little hacks for ncurses libraries.

In the long run it ought to be possible to move the configuration code for
term further down until we've probed for variants of curses and have some
idea what libraries we're using; that's more logical anyway since the code
includes curses.h which we may not actually be using.

We also have a perennial warning on Solaris from configure that it doesn't
like term.h (because it needs curses.h---which is what we're testing for,
but configure doesn't like us doing it that way) and that future versions
of autoconf may just go into a sulk.

For now here's a note.

Index: INSTALL
===================================================================
RCS file: /cvsroot/zsh/zsh/INSTALL,v
retrieving revision 1.33
diff -u -r1.33 INSTALL
--- INSTALL	20 Nov 2007 14:20:00 -0000	1.33
+++ INSTALL	29 Jan 2008 17:38:52 -0000
@@ -336,6 +336,11 @@
 configure.  Similarly, you may need to pass LDFLAGS=-L/usr/local/lib
 (or wherever) in order to find the library.
 
+You may also need to add headers if you need to include the file term.h
+from an installation of an ncurses variant instead of from the system
+directories.  For example, CPPFLAGS=-I/usr/local/include/ncursesw will
+force configure to search for term.h in the given directory.
+
 On some systems a suitable development package with a name such as
 curses-devel or ncurses-devel needs to be installed before zsh can
 be compiled.  This is likely to be contained on any installation media,


-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


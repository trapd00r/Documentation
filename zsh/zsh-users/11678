From zsh-users-return-11678-mason-zsh=primenet.com.au@sunsite.dk Sat Jul 28 18:24:06 2007
Return-Path: <zsh-users-return-11678-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8569 invoked from network); 28 Jul 2007 18:24:04 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Jul 2007 18:24:04 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 9521 invoked from network); 28 Jul 2007 18:23:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Jul 2007 18:23:57 -0000
Received: (qmail 10454 invoked by alias); 28 Jul 2007 18:23:50 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11678
Received: (qmail 10444 invoked from network); 28 Jul 2007 18:23:50 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Jul 2007 18:23:50 -0000
Received: (qmail 8305 invoked from network); 28 Jul 2007 18:23:50 -0000
Received: from flock1.newmail.ru (82.204.219.207)
  by a.mx.sunsite.dk with SMTP; 28 Jul 2007 18:23:46 -0000
Received: (qmail 20757 invoked from network); 28 Jul 2007 18:23:44 -0000
Received: from unknown (HELO cooker.net) (arvidjaar@newmail.ru@91.76.106.35)
  by smtpd.newmail.ru with SMTP; 28 Jul 2007 18:23:44 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-users@sunsite.dk,
 linux_milano@yahoo.it
Subject: Re: the konsole title bar
Date: Sat, 28 Jul 2007 22:23:32 +0400
User-Agent: KMail/1.9.7
References: <f8fj85$9ud$1@sea.gmane.org>
In-Reply-To: <f8fj85$9ud$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart2111657.QjB8vb3nNm";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200707282223.41165.arvidjaar@newmail.ru>

--nextPart2111657.QjB8vb3nNm
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On Saturday 28 July 2007, pol wrote:
> I am using the following command in /etc/zsh/zshrc to change the title bar
> and tab bar according to the current directory:
>
> precmd () {
>      tab_lable=3D"$PWD:h:t/$PWD:t"
>      rlength=3D"20"   # number of characters to appear before truncation =
from
> the left
>
>     dcop "$KONSOLE_DCOP_SESSION" renameSession "$tab_lable[-$rlength,-1]"
>
>     }
>
> When running vim, the running command is added to  <current dir>, in the
> title and tab names.
> However, as vim has been closed, title bar and tab name take the form:
> <current dir> Konsole <current dir>

may be you mean <current dir> - <current dir> - Konsole

at least that is what I get in such case.

>
> That is not what expected
>
> What is wrong?
>

There are session name and window title. Some programs do set window title;=
=20
this is relatively portable in the sense it works on xterm and derivatives =
as=20
well as konsole and even cygwin as far as I remember. Windows title set thi=
s=20
way comes before session name.

what you could do

a) configure all programs you use to no set window title. This may be=20
impossible (e.g. sometimes I log in remotely in a system where I simply do=
=20
not have any way to turn this off).

b) set session name to some "innocent" fixed string and use window title=20
instead yourself. Setting session name to empty string gives ugly:

<your window title> - - Konsole

may be it is possible to turn session name and Konsole off completely but I=
=20
cannot find it.=20

Oh, and you set window title with

  print -nP -u2 '\033]0;<your title goes here>\a

--nextPart2111657.QjB8vb3nNm
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGq4mmR6LMutpd94wRAva2AKDA4iyzfOq1usKqW+fkE2DRdMe21wCfdyP/
gyP4KAcWw4D32vPyzaztfLs=
=VjyZ
-----END PGP SIGNATURE-----

--nextPart2111657.QjB8vb3nNm--


From zsh-workers-request@math.gatech.edu Sun May 03 04:20:52 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27988 invoked from network); 3 May 1998 04:20:50 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 3 May 1998 04:20:50 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id AAA06168;
	Sun, 3 May 1998 00:17:30 -0400 (EDT)
Resent-Date: Sun, 3 May 1998 00:17:18 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980502210851.ZM29855@candle.brasslantern.com>
Date: Sat, 2 May 1998 21:08:51 -0700
In-Reply-To: <19980502174011.28193@astaroth.nit.gwu.edu>
Comments: In reply to Sweth Chandramouli <sweth@astaroth.nit.gwu.edu>
        "csplit: 100 file limit reached at arg {9999}" (May  2,  5:40pm)
References: <19980502174011.28193@astaroth.nit.gwu.edu>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Sweth Chandramouli <sweth@astaroth.nit.gwu.edu>,
        ZSH Users <zsh-users@math.gatech.edu>
Subject: Re: csplit: 100 file limit reached at arg {9999}
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"HTwCm3.0.RV1.rw-Ir"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1500
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On May 2,  5:40pm, Sweth Chandramouli wrote:
} Subject: csplit: 100 file limit reached at arg {9999}
}
} 	i'm trying to write a script to convert pegasus mail-style
} mailboxes into the normal unix mbox format, and am having a few problems,
} at least one of which i think is shell-related.  [...]
} i get 100 messages split out, and then csplit returns the error in my
} subject line.  is this a shell or kernel paramater (i think i read somewhere 
} about a max # of files that a single process could create), or something
} else entirely?

The csplit program simply refuses to create more than 100 output files.
The limit you're thinking of is the maximum number of files that a process
can have -open- at the same time; I doubt csplit is keeping all 100 files
open, so that's not likely to be the problem.

} i want to use formail to
} reformat each message, but since pmail uses the ^Z char as its message
} delimiter, formail only sees one large message per mailbox

Is that the only reason formail sees only one message?  What's the text
immediately following each ^Z?  You might be able to get away with using
sed to replace the ^Z with something formail will recognize.  Also, have
you tried "formail -d" ?

} so i'm now
} trying to find a way to split out the messages and pass each one to
} formail separately.

Got perl?

perl -p032 -e 'close(STDOUT); s/.$//; open(STDOUT, "|formail >> mboxfile");'

(That assumes that the last message is not followed by a ^Z.  If it is,
you'll get one extra "From " line at the end of mboxfile.  It also assumes
you've got enough memory to have perl slurp up an entire message before it
sends any output to formail.)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


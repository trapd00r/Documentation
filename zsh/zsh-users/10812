From zsh-users-return-10812-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 09 02:37:53 2006
Return-Path: <zsh-users-return-10812-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12457 invoked from network); 9 Oct 2006 02:37:49 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.6 (2006-10-03) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.6
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Oct 2006 02:37:49 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 78249 invoked from network); 9 Oct 2006 02:37:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Oct 2006 02:37:42 -0000
Received: (qmail 6330 invoked by alias); 9 Oct 2006 02:37:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10812
Received: (qmail 6314 invoked from network); 9 Oct 2006 02:37:33 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Oct 2006 02:37:33 -0000
Received: (qmail 77015 invoked from network); 9 Oct 2006 02:37:33 -0000
Received: from rollercoaster.insane.pl (HELO mail.in5.pl) (213.251.173.13)
  by a.mx.sunsite.dk with SMTP; 9 Oct 2006 02:37:31 -0000
Received: from c182-250.icpnet.pl ([85.221.182.250] helo=enkidu.local)
	by mail.in5.pl with esmtpsa (TLS-1.0:RSA_AES_256_CBC_SHA1:32)
	(envelope-from <sthalik@tehran.lain.pl>)
	id 1GWl1G-0000nG-DV
	for zsh-users@sunsite.dk; Mon, 09 Oct 2006 04:37:30 +0200
Received: from sthalik by enkidu.local with local (Exim 4.63)
	(envelope-from <sthalik@tehran.lain.pl>)
	id 1GWl1F-0001lc-Mb
	for zsh-users@sunsite.dk; Mon, 09 Oct 2006 04:37:29 +0200
Date: Mon, 9 Oct 2006 04:37:29 +0200
From: Stanislaw Halik <sthalik@tehran.lain.pl>
To: zsh-users@sunsite.dk
Subject: problems with ssh tab completion
Message-ID: <20061009023729.GA6361@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
X-User: sthalik

I'm having problems with Tab completion script for ssh.

When I execute a zstyle line:

zstyle ':completion:*' hosts

to only use hosts from ~/.ssh/config, omitting ones in /etc/hosts, and
type:

% ssh username@^I

I get:

% ssh username@.

with a literal dot after the '@' sign. The host list is displayed after
another Tab key press. However, typing characters won't help to
disambiguate the list, as the leading '.' is there. Why is it being
displayed?

Strangely enough, it only happens if the username portion is longer than
4 characters.

The second problem occurs after matching multiple similar hosts, such as
ones I connect to: "rollercoaster.insane.pl" and "rodney.ltd.pl".
Typing:

% ssh sthalik@ro^I

yields:

~% ssh sthalik@ro..pl
remote host name
rodney.ltd.pl            rollercoaster.insane.pl

with the cursor placed between two dots.

I'd like it to just omit the '..pl' portion, as I find this kind of
completion confusing.

Oddly enough, it only happens if I specify the username portion and the
'@' sign.

I'm using zsh 4.3.2.

Any hints?
-- sh


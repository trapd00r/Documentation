From zsh-workers-return-10544-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 06 11:47:28 2000
Return-Path: <zsh-workers-return-10544-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9968 invoked from network); 6 Apr 2000 11:47:27 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Apr 2000 11:47:27 -0000
Received: (qmail 26507 invoked by alias); 6 Apr 2000 11:47:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10544
Received: (qmail 26474 invoked from network); 6 Apr 2000 11:47:12 -0000
Message-ID: <38EC792D.6AFD430A@u.genie.co.uk>
Date: Thu, 06 Apr 2000 12:46:53 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.72 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: The Corridor <dfavor@corridor.com>
CC: zsh@corridor.com
Subject: Re: How-to AIX + dynamic zsh?
References: <200004061122.FAA18235@corridor.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The Corridor wrote:
> 
> If someone has any of these working on AIX:
>    - dynamically loadable modules
>    - shared library for zsh itself
> email me directions of how you got it to work.

I have exactly that working and I haven't needed to do anything
particularly special to achieve it.

I have the following set in my .zshenv although you really shouldn't
need them.

export CC="/bin/cc"
export CFLAGS="-O2"
export LDFLAGS="-s"

If you are running csh or tcsh to build zsh, you will need to type
something like setenv CC "/bin/cc"

Unpack the zsh source and run configure. I tend to use a couple of
parameters like --enable-functions-subdirs and
--enable-etcdir=/usr/local/etc but these shouldn't make a difference.

When configure has finished, run make.

Which version of zsh are you trying to build? Exactly what errors or
problems do you come up against - with details of that I can probably
work out what the problem is? If you are compiling 3.1.6-dev-21, you
will need my small patch to utils.c which was in message #10519. All it
does is add mod_export to to the definition of utils.c - AIX needs an
explicit list of all symbols shared between separate shared libraries.

Oliver Kiddle


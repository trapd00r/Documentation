From zsh-users-return-15439-mason-zsh=primenet.com.au@zsh.org Thu Sep 30 14:51:33 2010
Return-Path: <zsh-users-return-15439-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7504 invoked by alias); 30 Sep 2010 14:51:32 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15439
Received: (qmail 3227 invoked from network); 30 Sep 2010 14:51:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,
	T_TO_NO_BRKTS_FREEMAIL autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 74.125.82.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=mLmZ/3jsDlFykFU53XvTAeyruFWG3g+zPLt2b1YLRZg=;
        b=NFFFeCK6Vf6g5HMgYR02t3gu5HS5Bw+/15yo3PAo0Jr3H5Z89icGvSUcnow0abA8mZ
         nrnR1b1HyzXXyVBXCyWDQg+LxAHsaLHBYekAXDpREx2u+h1Bim9FT1KLVY66QPEiH54M
         VC/HYtBSbaL649KczSflWQmouJgMiKqSY6Yfg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=XOLpFmA4R/KixAyjeIE7YnDwEImR1CCsul3qZsiqyf5yIxPtD5vC3rzWTFBBXY1z9d
         T2xMbnI+tpcnZZkiBs4Hp+ac6PCBgh7zip17rD1KzmCNysx5PcRbvS5rpSv6aPxDbseC
         d+zt2xw+8AKkit4gX7MVmcnAyGwPe9kQCvouE=
MIME-Version: 1.0
Date: Thu, 30 Sep 2010 16:44:12 +0200
Message-ID: <AANLkTikx9YPujdRz+u56CLcHcSkTVgoe4iYVDD1kbj9r@mail.gmail.com>
Subject: SH_WORD_SPLIT, $* and null IFS
From: Paul Mertz <paul.mertz6@gmail.com>
To: zsh-users@zsh.org
Content-Type: multipart/alternative; boundary=0016367fba5cd9a51904917b1cab

--0016367fba5cd9a51904917b1cab
Content-Type: text/plain; charset=ISO-8859-1

Hello Everyone,

I encountered some strange behavior with the SH_WORD_SPLIT option and i was
wondering if someone could give me some insight on the matter.

When SH_WORD_SPLIT is set, Zsh will use the IFS to split words during
variable expansion...

But there is apparently some other side effects as well... One of them is
the handling of the special parameter $* and it's double quoted form "$*".

When SH_WORD_SPLIT is NOT set (the default):
- "$*" expand to a single field, with each parameter separated by the IFS.
-  $*   will not care about the IFS, and expand all parameters as usual
(individually).

When SH_WORD_SPLIT is set:
- "$*" expand to a single field, with each parameter separated by the IFS
(same as before).
-  $    will not care about the IFS... EXCEPT if the IFS is null (set to no
value)... then it will also expands to a single field without delimiters

I really don't understand this last behavior...

SH_WORD_SPLIT is a compatibility feature which is automatically triggered
when zsh is invoked as sh or ksh. This behavior is effectively reproducible
using Dash (so this is probably not a bug), but not ksh, nor Bash (even if
invoked as sh, and using the --posix option).

So... it is some kind of POSIX specificity? Or just a hack? Do you know what
was really intended here?

Thanks

Paul

--0016367fba5cd9a51904917b1cab--


From zsh-workers-return-23406-mason-zsh=primenet.com.au@sunsite.dk Wed May 09 20:19:20 2007
Return-Path: <zsh-workers-return-23406-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21350 invoked from network); 9 May 2007 20:19:18 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=no
	version=3.2.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 May 2007 20:19:18 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 20152 invoked from network); 9 May 2007 20:19:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 May 2007 20:19:13 -0000
Received: (qmail 2366 invoked by alias); 9 May 2007 20:19:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23406
Received: (qmail 2356 invoked from network); 9 May 2007 20:19:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 May 2007 20:19:10 -0000
Received: (qmail 19841 invoked from network); 9 May 2007 20:19:10 -0000
Received: from flock1.newmail.ru (82.204.219.207)
  by a.mx.sunsite.dk with SMTP; 9 May 2007 20:19:06 -0000
Received: (qmail 5897 invoked from network); 9 May 2007 20:19:06 -0000
Received: from unknown (HELO cooker.local) (arvidjaar@newmail.ru@85.141.134.196)
  by smtpd.newmail.ru with SMTP; 9 May 2007 20:19:06 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-workers@sunsite.dk
Subject: Re: Prompt redrawing bug with ctrl-d
Date: Thu, 10 May 2007 00:18:54 +0400
User-Agent: KMail/1.9.6
References: <237967ef0705010238y5155269ev1738d449460e3b90@mail.gmail.com>
In-Reply-To: <237967ef0705010238y5155269ev1738d449460e3b90@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart2133026.3MYm6kycuV";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200705100018.58161.arvidjaar@newmail.ru>

--nextPart2133026.3MYm6kycuV
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On Tuesday 01 May 2007, Mikael Magnusson wrote:
> Hello, noticed this a while ago.
>
> % zsh -f
> % setopt ignoreeof
> % <ctrl-d>
>
> zsh: use 'exit' to exit.
>
> The prompt is now invisible.


message is displayed using showmsg() that sets "clearflag" which should tel=
l=20
zrefresh() to not clear until end of screen (to preserve message).=20
Unfortunately this flag has side effect that zrefresh() does not redisplay=
=20
prompt either and skips over it.

Unfortunately I do not see any easy way short of adding yet another flag. I=
=20
have started git cvsimport to try bisect; have no idea how long it takes.

--nextPart2133026.3MYm6kycuV
Content-Type: application/pgp-signature

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGQiyvR6LMutpd94wRAvKkAJsH7aiDgmV80h++SkHTB7gcY0y4ngCgvTVr
CJEOJstmTtoEtBwILNXsT2M=
=egeD
-----END PGP SIGNATURE-----

--nextPart2133026.3MYm6kycuV--


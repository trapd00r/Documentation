From zsh-workers-return-19650-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 17 13:20:21 2004
Return-Path: <zsh-workers-return-19650-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 874 invoked from network); 17 Mar 2004 13:20:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Mar 2004 13:20:19 -0000
Received: (qmail 8420 invoked by alias); 17 Mar 2004 13:20:03 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19650
Received: (qmail 8401 invoked from network); 17 Mar 2004 13:20:02 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 17 Mar 2004 13:20:02 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.95.128.56] by sunsite.dk (MessageWall 1.0.8) with SMTP; 17 Mar 2004 13:20:1 -0000
Received: from 127.0.0.1 (localhost [127.0.0.1])
	by dummy.domain.name (Postfix) with SMTP id 74036369663
	for <zsh-workers@sunsite.dk>; Wed, 17 Mar 2004 21:19:59 +0800 (WST)
Received: from gulag.gu.uwa.edu.au (gulag.guild.uwa.edu.au [130.95.100.5])
	by asclepius.uwa.edu.au (Postfix) with ESMTP id 69DD83680F4
	for <zsh-workers@sunsite.dk>; Wed, 17 Mar 2004 21:19:59 +0800 (WST)
Received: from gulag.gu.uwa.edu.au (devenish@localhost [127.0.0.1])
	by gulag.gu.uwa.edu.au (8.12.3/8.12.3/Debian-6.6) with ESMTP id i2HDJw3X018986
	for <zsh-workers@sunsite.dk>; Wed, 17 Mar 2004 21:19:58 +0800
Received: (from devenish@localhost)
	by gulag.gu.uwa.edu.au (8.12.3/8.12.3/Debian-6.6) id i2HDJwio018984
	for zsh-workers@sunsite.dk; Wed, 17 Mar 2004 21:19:58 +0800
Date: Wed, 17 Mar 2004 21:19:58 +0800
From: James Devenish <j-devenish@users.sourceforge.net>
To: zsh-workers@sunsite.dk
Subject: Re: Mac OS X 10.3 again
Message-ID: <20040317131957.GA17600@mail.guild.uwa.edu.au>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <28264.1079449650@csr.com> <12351.1079466466@trentino.logica.co.uk> <BCC268FF-77A4-11D8-B853-003065E5EFE0@mneptok.com> <24420.1079518350@trentino.logica.co.uk> <20040317102338.GA14418@mail.guild.uwa.edu.au> <B898C7D7-7803-11D8-B853-003065E5EFE0@mneptok.com> <20040317113412.GA15737@mail.guild.uwa.edu.au>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20040317113412.GA15737@mail.guild.uwa.edu.au>
User-Agent: Mutt/1.3.28i

For those wondering about the relationship between Darwin and Mac OS X
(Darwin can be obtained separately from Mac OS X, but Mac OS X is built
on top of Darwin), here is Apple's list:
<http://www.opensource.apple.com/darwinsource/index.html>

Also, note that the SourceForge compilation farm has the "Server"
versions of Mac OS X (as found in Xserves) while most users will
have the "Client" versions on their desktops. (However, hopefully,
the differences are immaterial as far as porting zsh goes.)

The boring news is that zsh HEAD basically works fine under Mac OS
10.3.3 ;-) The -N test still fails because HFS (the default filesystem)
does not record 'atime' -- we went through this on one of the zsh lists
earlier (but I notice the error message has not been updated to include
HFS). The minor issues that I saw during compilation were the following
warnings:

init.c:411: warning: implicit declaration of function `ioctl'
utils.c:985: warning: implicit declaration of function `ioctl'
utils.c:3349: warning: no previous prototype for `ucs4toutf8'
clone.c:81: warning: implicit declaration of function `ioctl'
zpty.c:324: warning: implicit declaration of function `ioctl'
zle_main.c:179: warning: implicit declaration of function `ioctl'
zle_utils.c:305: warning: implicit declaration of function `ioctl'

(ioctl is in sys/ioctl.h, and config.log shows:
    zsh_cv_header_sys_ioctl_h_ioctl_proto=yes
    #define HAVE_IOCTL_PROTO 1
but I guess there is still an actual #include that is lacking.)

Also saw this:

utils.c:3371: warning: suggest parentheses around arithmetic in operand of |

(Note: I have not gone through and enabled or disabled ./configurable
options, so I don't /really/ know if it all works. Nevertheless, `make
test` works, and there are no obvious show-stoppers like with Mac OS
10.2 and earlier. I don't recall any problems during my own usage.)

There is still a prominent number of people using 10.2, who might be
appreciative of patches, but it increasingly appears (at least to me --
and perhaps I am just repeating conclusions from earlier discussions)
that any 10.2-specific patches would be superfluous under 10.3.



From zsh-users-return-3255-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 06 09:36:18 2000
Return-Path: <zsh-users-return-3255-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16347 invoked from network); 6 Jul 2000 09:36:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jul 2000 09:36:17 -0000
Received: (qmail 17436 invoked by alias); 6 Jul 2000 09:35:09 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3255
Received: (qmail 17401 invoked from network); 6 Jul 2000 09:35:03 -0000
Date: Thu, 6 Jul 2000 11:34:55 +0200
From: Bernd Eggink <eggink@uni-hamburg.de>
To: Zsh Users <zsh-users@sunsite.auc.dk>
Subject: Probs with nested braces in PROMPT
Message-ID: <20000706113451.A2892@eggink3.rrz.uni-hamburg.de>
Mail-Followup-To: Zsh Users <zsh-users@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.2i

Are nested braces supposed to work in PROMPT (zsh 3.1.9-dev-2)? 
I tried this:

PROMPT='%{^[[5;46m%}%m:%l %T %~${PROJECT:+ %{^[[31m[%}}$PROJECT${PROJECT:+]%{^[[30m%}}%#%{^[[0m%}'

which looks good if PROJECT is set, for example with PROJECT=ecc:

    eggink3:1 11:25 ~/necht [ecc]%

(actually nicely coloured). However, when PROJECT is not set, it results
in something ugly:

    eggink3:1 11:26 ~/necht}}%

Bug or feature?

Regards,
Bernd

-- 
Bernd Eggink
Regionales Rechenzentrum der Uni Hamburg
eggink@uni-hamburg.de
http://www.rrz.uni-hamburg.de/eggink/BEggink.html


From zsh-workers-return-9196-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jan 04 12:13:20 2000
Return-Path: <zsh-workers-return-9196-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11245 invoked from network); 4 Jan 2000 12:12:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Jan 2000 12:12:56 -0000
Received: (qmail 27875 invoked by alias); 4 Jan 2000 12:12:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9196
Received: (qmail 27868 invoked from network); 4 Jan 2000 12:12:28 -0000
X-Authentication-Warning: mraz.iskon.hr: hniksic set sender to hniksic@iskon.hr using -f
Sender: hniksic@iskon.hr
To: zsh-workers@sunsite.auc.dk
Subject: Bindings in .zshrc
X-Attribution: Hrvoje
X-Face: &{dT~)Pu6V<0y?>3p$;@vh\`C7xB~A0T-J%Og)J,@-1%q6Q+,
        gs<-9M#&`I8cJp2b1{vPE|~+JE+gx;a7%BG{}nY^ehK1"q#rG
        O,Rn1A_Cy%t]V=Brv7h<L@)<XGh#XroV6xQg$VA8K
From: Hrvoje Niksic <hniksic@iskon.hr>
Date: 04 Jan 2000 13:12:07 +0100
Message-ID: <9t9bt72doiw.fsf@mraz.iskon.hr>
Lines: 34
User-Agent: Gnus/5.0802 (Gnus v5.8.2) XEmacs/21.2 (Hecate)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I want M-p and M-n bound to history-beginning-search-backward and
history-beginning-search-forward respectively, but it doesn't seem to
work in recent versions of zsh.

Zsh version is 3.1.6-pws-12 from Debian potato.  A detailed recipe to
repeat the problem follows.

$ mkdir tst
$ cat > tst/.zshrc
echo start
bindkey '\ep' history-beginning-search-backward
bindkey '\en' history-beginning-search-forward
echo end
^D
$ ZDOTDIR=~/tst zsh
start
end
mraz% bindkey -e        # new zsh, use Emacs-style bindings
mraz% bindkey
...
"^[n" history-search-forward
"^[p" history-search-backward
...

Obviously, the bindings didn't take effect, although .zshrc is read.
If I type it manually, it works:

mraz% bindkey '\ep' history-beginning-search-backward
mraz% bindkey '\en' history-beginning-search-forward
mraz% bindkey 
...
"^[n" history-beginning-search-forward
"^[p" history-beginning-search-backward
...


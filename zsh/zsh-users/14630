From zsh-users-return-14630-mason-zsh=primenet.com.au@zsh.org Thu Dec 03 09:52:36 2009
Return-Path: <zsh-users-return-14630-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21258 invoked by alias); 3 Dec 2009 09:52:36 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14630
Received: (qmail 3882 invoked from network); 3 Dec 2009 09:52:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (proxy.melb.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <200912030952.nB39qFu7005462@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@zsh.org
Subject: Re: compaudit:74: _i_addfiles: assignment to invalid subscript range
In-reply-to: <20091203065205.GA15270@panix.com>
References: <20091203065205.GA15270@panix.com>
Comments: In-reply-to rj <rj@panix.com>
   message dated "Thu, 03 Dec 2009 01:52:05 -0500."
Date: Thu, 03 Dec 2009 09:52:15 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 03 Dec 2009 09:52:18.0398 (UTC) FILETIME=[4CFC6FE0:01CA73FE]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-03 (www.mailcontrol.com) on 10.68.0.117

rj wrote:
> Here's one, though, where I'm out of my depth:  when I start zsh on Ubuntu,
> I'm getting this warning:
> 
>         compaudit:74: _i_addfiles: assignment to invalid subscript range

That probably means the subscript is zero.  I think the problem is
equivalent to this one:

% test=()
% for i in {1..$#test}; do print $i; done
1
0

It's looping over a non-existent and a not-even-valid entry for an empty
array, which is not very helpful.  That number is then being used as
a subscript for the empty array.  I'm not actually sure the syntax
{1..0} should be doing that, I don't think we've ever defined what it
does.

The reason why you see this ($_i_addfiles is empty) is the same one as
the following...

> I looked at the compaudit file but have no clue what to do there.  Also,
> when I tab to complete anything, I get this:
> 
>         zsh:4: _main_complete: function definition file not found
> 
> I have this in my .zshrc:
> 
> # where to look for autoloaded function definitions:
> fpath=( /usr/share/zsh/functions/* )

fpath doesn't descend subdirectories.  If, for some reason, you can't
use the default fpath, which will include wherever the files are
supposed to be installed (this is the preferred solution), try

fpath=( /usr/share/zsh/functions/**/*(/) )

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


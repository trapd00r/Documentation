From zsh-workers-return-9354-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jan 18 19:56:48 2000
Return-Path: <zsh-workers-return-9354-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12074 invoked from network); 18 Jan 2000 19:56:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Jan 2000 19:56:47 -0000
Received: (qmail 7574 invoked by alias); 18 Jan 2000 19:56:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9354
Received: (qmail 7567 invoked from network); 18 Jan 2000 19:56:40 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: zsh problems on sparc: fixed 
In-reply-to: ""Zvi Har'El""'s message of "Tue, 18 Jan 2000 14:35:57 +0200."
             <Pine.GSO.4.10.10001181434300.20378-100000@leeor.math.technion.ac.il> 
Date: Tue, 18 Jan 2000 19:59:02 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E12AejM-0002dD-00.2000-01-18-19-55-56@cmailg5.svr.pol.co.uk>

"Zvi Har'El" wrote:
> On 17 Jan 2000, Francis GALIEGUE wrote:
> 
> > 
> > The solution: --disabe-lfs in ./configure. Strange. Patch (the
> > utility) also has problems with large fs support on sparc... Dunno why
> > but now it's solved and I can at least use my favorite shell on these
> > marvellous toys :)
> > 
> > 
> This was my first solution, but upgrading my gcc (now I have
> gcc version 2.95.2 19991024 (release)) did the trick without disabling lfs!

I've put this in the MACHINES file, but it would be nice to know a bit more
about what Solaris systems and gcc versions are and aren't affected.  I
wouldn't completely rule out an alignment problem in zsh, but without more
detailed bug tracking it's impossible to say.  Although there seems to be
some argument about whether it does fix it.

Index: Etc/MACHINES
===================================================================
RCS file: /home/pws/CVSROOT/projects/zsh/Etc/MACHINES,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 MACHINES
--- Etc/MACHINES	1999/11/28 17:42:27	1.1.1.1
+++ Etc/MACHINES	2000/01/18 19:11:20
@@ -131,3 +131,9 @@
 	To avoid this, make sure you compile zsh without any reference
 	to /usr/ucblib in your LD_LIBRARY_PATH.  You can easily do this
 	by just unsetting LD_LIBRARY_PATH before building zsh.
+
+	Problems have been reported using --enable-lfs (the default) to
+	enable large file system and integer support on Solaris 2 with gcc.
+	Apparently upgrading to gcc version 2.95.2 fixes this.  If this
+	is not feasible, configure with --disable-lfs.  We would be
+	grateful for more detailed information.

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>


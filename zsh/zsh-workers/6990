From zsh-workers-return-6990-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 06 14:52:07 1999
Return-Path: <zsh-workers-return-6990-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22775 invoked from network); 6 Jul 1999 14:52:06 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jul 1999 14:52:06 -0000
Received: (qmail 3493 invoked by alias); 6 Jul 1999 14:52:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6990
Received: (qmail 3486 invoked from network); 6 Jul 1999 14:52:01 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
Date: Tue, 6 Jul 1999 18:51:54 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-Sender: bor@itsrm2.mow.siemens.ru
To: Zsh workers list <zsh-workers@sunsite.auc.dk>
Subject: PATCH: pws-25: really small patch
Message-ID: <Pine.SV4.4.10.9907061850100.15558-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Some variables in completion fucntions were not local

/andrej


--- Completion/Builtins/_cd.old	Mon Jul  5 13:53:06 1999
+++ Completion/Builtins/_cd	Tue Jul  6 18:03:04 1999
@@ -56,7 +56,7 @@
 
   return ret
 elif [[ $PREFIX != (\~|/|./|../)* && $#cdpath -ne 0 ]]; then
-  local tdir
+  local tdir tdir2
   # With cdablevars, we can convert foo/bar/... to ~foo/bar/... if
   # there is no directory foo.  In that case we could also complete
   # variable names, but it hardly seems worth it.
--- Completion/Core/_path_files.old	Mon Jul  5 18:39:55 1999
+++ Completion/Core/_path_files	Tue Jul  6 18:01:12 1999
@@ -33,12 +33,11 @@
 setopt localoptions nullglob rcexpandparam extendedglob
 unsetopt markdirs globsubst shwordsplit nounset
 
+local sopt='-' gopt='' opt
 exppaths=()
 prepaths=('')
 ignore=()
 group=()
-sopt='-'
-gopt=''
 pats=()
 addpfx=()
 addsfx=()


From zsh-workers-return-7145-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 14 14:49:13 1999
Return-Path: <zsh-workers-return-7145-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3519 invoked from network); 14 Jul 1999 14:49:11 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Jul 1999 14:49:11 -0000
Received: (qmail 13033 invoked by alias); 14 Jul 1999 14:48:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7145
Received: (qmail 13026 invoked from network); 14 Jul 1999 14:48:55 -0000
Message-Id: <9907141417.AA39843@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Completing subcommand strings
Date: Wed, 14 Jul 1999 16:17:59 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Here's the latest version of _sh (which in your case you have not got,
due to incompetence).  It now works pretty much OK, although at this point
things get rather hairy, so it's not surprising if there are some remaining
difficulties.  I managed to get into trouble completing after

  sh -c 'tar xvf 

when it seems to like to insert another copy of `tar xvf' along with any
file it's inserting; the bug could be in a lot of different places.  I'm
certainly not expecting every little thing like that to be fixed before
3.1.6.

--- Completion/User/_sh.old	Wed Jul 14 16:13:10 1999
+++ Completion/User/_sh	Wed Jul 14 16:10:43 1999
@@ -0,0 +1,6 @@
+#compdef sh ksh bash zsh csh tcsh rc
+
+if (( CURRENT == ${words[(i)-c]} + 1 )); then
+  compset -q
+  _normal
+fi

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


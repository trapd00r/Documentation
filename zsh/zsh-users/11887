From zsh-users-return-11887-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 29 01:19:10 2007
Return-Path: <zsh-users-return-11887-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1878 invoked from network); 29 Sep 2007 01:18:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.2.3
Received: from ns2.primenet.com.au (HELO primenet.com.au) (@203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 29 Sep 2007 01:18:41 -0000
Received: (qmail 17287 invoked from network); 28 Sep 2007 20:53:51 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns2.melb.primenet.com.au with SMTP; 28 Sep 2007 20:53:51 -0000
Received-SPF: none (ns2.melb.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92133 invoked from network); 28 Sep 2007 20:53:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2007 20:53:44 -0000
Received: (qmail 26973 invoked by alias); 28 Sep 2007 20:53:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11887
Received: (qmail 26961 invoked from network); 28 Sep 2007 20:53:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Sep 2007 20:53:37 -0000
Received: (qmail 90993 invoked from network); 28 Sep 2007 20:53:37 -0000
Received: from nz-out-0506.google.com (64.233.162.227)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2007 20:53:31 -0000
Received: by nz-out-0506.google.com with SMTP id r28so1997131nza
        for <zsh-users@sunsite.dk>; Fri, 28 Sep 2007 13:53:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=/t+NQTtYRCVwlzMl9RuNbPl+Z2ngnO5zGwcatAjP7D4=;
        b=BZxxMtiyvmgMBLAz+wKydQBwXSnUqrBGlV1V01aJg0fusRxjFdpaEufq4N7OgvpY77YH8o4fySY1sQ6QkDcYv6vACQSYEe50V5nP/J/CNg5WSiR3hG9TvtH4CGuiCLCuDqbayKR3msc3qkk1Gz6/Z1WlTBAlbpZShJXXuZCOE9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BJBsb9M5XqhpwseX+6x5xYhxbD0YY0SfcFDjHqQcVJmek71HDdyhBwE7c3s/625Pz5vNK+ttXGjYzJxhUb0HiZxnDtgzDP0qH8GNXCuXidpAZEr0GkArkpqC1HgfzR9Dt+PncB667o0XqWLjUKEv28Fvqq0OndQwPDSPBhHenvg=
Received: by 10.65.191.3 with SMTP id t3mr8495113qbp.1191012807156;
        Fri, 28 Sep 2007 13:53:27 -0700 (PDT)
Received: by 10.65.236.14 with HTTP; Fri, 28 Sep 2007 13:53:27 -0700 (PDT)
Message-ID: <30c383e70709281353o6392e31dsfb2d89be0e2a9365@mail.gmail.com>
Date: Fri, 28 Sep 2007 22:53:27 +0200
From: "Pau Amaro-Seoane" <vim.unix@googlemail.com>
Reply-To: vim.unix@gmail.com
To: "wgscott@chemistry.ucsc.edu" <wgscott@chemistry.ucsc.edu>
Subject: Re: nohup dies
Cc: zsh-users@sunsite.dk
In-Reply-To: <20070928134459.5393d050.wgscott@chemistry.ucsc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <30c383e70709281338x1f2609dcsdc4dd7283d387c1c@mail.gmail.com>
	 <20070928134459.5393d050.wgscott@chemistry.ucsc.edu>

Hi Bill,

thanks for the answer.

By the way, I meant

>     nohup cat ./input | ~pau/executables/NB4_NoPN > diagnostic&

when I wrote

>      cat ./input | ~pau/executables/NB4_NoPN > diagnostic&

!

Yes, I am thinking of screen... I used it a lot in the past but I
stopped because it'd screw up my mutt colour scheme and I never could
fix that...

The OS of the cluster is Debian GNU/Linux etch.

If you knew how long I have needed to realise about this! I was
hunting fictitious bugs in my code...

sigh...

thanks,

Pau

2007/9/28, wgscott@chemistry.ucsc.edu <wgscott@chemistry.ucsc.edu>:
> Hi Pau:
>
> I've not run into this problem using any version of zsh, so I can't advise, but in general I find it is much more robust to start a screen session, issue the command, and detatch the screen.
>
> You didn't say what your OS is, but OS X and linux come with screen by default, and I think you can install it on anything zsh would run on.
>
> Bill
>
>
>
> On Fri, 28 Sep 2007 22:38:48 +0200
> "Pau Amaro-Seoane" <vim.unix@googlemail.com> wrote:
>
>      Hi,
>
>      I have been using zsh for a while and I like it a lot. Yet, today I
>      ran into a snag...
>
>      I use a kind of beowulf cluster to run computer simulations and the
>      way I have launched them for years has always been
>
>      cat ./input | ~pau/executables/NB4_NoPN > diagnostic&
>
>      and then I usually shutdown the laptop or close the terminal.
>
>      Two years ago I moved to another institute and this has also a
>      cluster. Recently I restarted doing the same kind of simulations and
>      somehow I had problems with them all the time
>
>      I am in a very bad mood... you cannot imagine how wretched I am; I spent _many_
>      days trying to find "bugs" in my code and didn't understand at all why the runs
>      died after "some minutes" without any output message...
>
>      The problem? nohup dies in zsh 4.3.2
>
>      Today I closed the ssh session with exit and then exit again after the
>      message and got this:
>
>      zsh: you have running jobs.
>      tuffi1| exit
>      zsh: warning: 1 jobs SIGHUPed
>      [1]  + 18591 done       nohup cat ./input |
>             18592 hangup     ~pau/executables/NB4_NoPN > diagnostic
>
>      When I used the cluster in my former institute everything went fine,
>      and there they have zsh 4.2.4
>
>      So it seems that "deadly" nohups are inherent to the most recent zsh version...
>      a "new feature" of the shell, maybe?
>
>      I changed the shell to ksh and the simulations (i.e. nohup) are not
>      killed when I quit the session...
>
>      What's wrong with zsh 4.2.4?
>
>      Cheers,
>
>      Pau Amaro Seoane
>
>


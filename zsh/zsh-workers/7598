From zsh-workers-return-7598-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 01 09:55:40 1999
Return-Path: <zsh-workers-return-7598-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19237 invoked from network); 1 Sep 1999 09:55:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Sep 1999 09:55:38 -0000
Received: (qmail 4586 invoked by alias); 1 Sep 1999 09:55:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7598
Received: (qmail 4579 invoked from network); 1 Sep 1999 09:55:28 -0000
Date: Wed, 1 Sep 1999 11:55:26 +0200 (MET DST)
Message-Id: <199909010955.LAA00151@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Will Day's message of Tue, 31 Aug 1999 20:18:56 -0400
Subject: Re: recexact in 3.1.6


Will Day wrote:

> Option "recexact" doesn't seem to work quite right for me under 3.1.6, or
> at least not as well as it did under 3.1.5:

We had some changes to the option handling some months ago but I don't 
rmember everything about it.

Maybe this is just a remnant of times where we didn't have the extra
code to find out if the string on the line was inserted by the
completion code or if it was typed by the user. If it is, the patch
below is probably the right thing.

Since I don't use REC_EXACT, I have to ask for everyone's help here to 
tell me if the behavior with the patch below is what you want/like/expect.

Bye
 Sven

diff -u os/Zle/zle_tricky.c Src/Zle/zle_tricky.c
--- os/Zle/zle_tricky.c	Tue Aug 31 13:25:43 1999
+++ Src/Zle/zle_tricky.c	Wed Sep  1 11:50:58 1999
@@ -4482,7 +4482,7 @@
 
 	hasunqu = 0;
 	useline = (lst != COMP_LIST_COMPLETE);
-	useexact = (isset(RECEXACT) && usemenu != 1);
+	useexact = isset(RECEXACT);
 	uselist = (useline ?
 		   ((isset(AUTOLIST) && !isset(BASHAUTOLIST)) ? 
 		    (isset(LISTAMBIGUOUS) ? 3 : 2) : 0) : 1);

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


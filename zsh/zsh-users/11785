From zsh-users-return-11785-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 20 23:04:33 2007
Return-Path: <zsh-users-return-11785-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1037 invoked from network); 20 Aug 2007 23:04:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Aug 2007 23:04:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 65989 invoked from network); 20 Aug 2007 15:57:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Aug 2007 15:57:32 -0000
Received: (qmail 7499 invoked by alias); 20 Aug 2007 15:57:23 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11785
Received: (qmail 7488 invoked from network); 20 Aug 2007 15:57:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Aug 2007 15:57:22 -0000
Received: (qmail 64673 invoked from network); 20 Aug 2007 15:57:22 -0000
Received: from vms046pub.verizon.net (206.46.252.46)
  by a.mx.sunsite.dk with SMTP; 20 Aug 2007 15:57:15 -0000
Received: from torch.brasslantern.com ([71.116.91.65])
 by vms046.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JN200762XJBDTI0@vms046.mailsrvcs.net> for
 zsh-users@sunsite.dk; Mon, 20 Aug 2007 10:54:48 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id l7KFsjpj010828; Mon,
 20 Aug 2007 08:54:46 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id l7KFsjUk010827; Mon, 20 Aug 2007 08:54:45 -0700
Date: Mon, 20 Aug 2007 08:54:45 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Excluding certain directories
In-reply-to: <20070820130536.GA8985@namib.cs.utk.edu>
To: Chris Johnson <cjohnson@cs.utk.edu>, zzapper <david@tvis.co.uk>
Cc: zsh-users@sunsite.dk
Message-id: <070820085445.ZM10826@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <Xns99927746C1B45zzappergmailcom@80.91.229.5>
	<20070820130536.GA8985@namib.cs.utk.edu>
Comments: In reply to Chris Johnson <cjohnson@cs.utk.edu>
 "Re: Excluding certain directories" (Aug 20,  9:05am)

On Aug 20,  9:05am, Chris Johnson wrote:
}
} zzapper sent me the following 0.2K:
} 
} > I want to exclude subdirectories dev*
} > ls {^dev*,}/index.php(.N)

ZZapper, Did you really mean to include the "/index.php" (a file in the
root directory "/") in the pattern?  I suspect you wanted

    ls {^dev*/,}index.php(.N)

Even so that's a bit of an odd pattern, because the (.N) will mean that
you run "ls" with no arguments if there is no file index.php.  Usually
one would only use (N) with a pattern in the path tail.

} Here's one approach:
} 
}    ls -d **/*~**/dev/*~**/dev
} 
} It's not entirely correct, since you can have a plain file named dev
} that's ignored by the last clause.

It's also not correct because "dev*" is not the same as "dev/*".

If you have extendedglob set (which you must if "^dev*" works), then
you can do this:

    ls **/index.php~dev*(/*)##

} It'd be nice to be able to embed
} glob qualifiers (/) into the negated pattern clauses, but it seems
} that's not supported.

Note that although the stuff to the left of the tilde (~) is a file
expansion, the stuff to the right of the tilde is a simple string match.
The "**/" construct doesn't mean anything (or rather, is no different
than "*/") in a string match.  Similarly, glob qualifiers don't mean
anything in a string match; but in a string match you can use # and ##
on a sub-pattern than contains a slash, which is meaningless in a glob.


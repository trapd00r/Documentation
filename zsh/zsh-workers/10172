From zsh-workers-return-10172-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 20 09:25:24 2000
Return-Path: <zsh-workers-return-10172-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24189 invoked from network); 20 Mar 2000 09:25:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Mar 2000 09:25:23 -0000
Received: (qmail 25773 invoked by alias); 20 Mar 2000 09:25:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10172
Received: (qmail 25756 invoked from network); 20 Mar 2000 09:25:11 -0000
Date: Mon, 20 Mar 2000 10:25:09 +0100 (MET)
Message-Id: <200003200925.KAA09355@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Fri, 17 Mar 2000 21:12:29 +0300
Subject: PATCH: Re: Again something strange with select/match


Andrej Borsenkow wrote:

> With all (hopefully :-) current patches:
> 
> bor@itsrm2% zstyle -L
> zstyle ':completion:*' completer _oldlist _complete _match
> zstyle :completion::approximate: max-errors 3
> zstyle ':completion:*' menu 'select=0'
> zstyle ':completion:*::::default' list-colors ''
> zstyle ':completion:*:match:*' original yes
> zstyle ':completion:*:match:*' insert-unambiguous yes
> zstyle ':completion:*:paths' cursor yes
> zstyle ':completion:*:oldlist' list _match
> zstyle ':completion:*' list-rows-first yes
> zstyle ':completion:*:*:files' matcher 'r:|[.-]=**'
> zstyle ':completion:*:cd:*' matcher 'r:|[.-]=**'
> zstyle ':completion:*' group-name ''
> zstyle ':completion:*:descriptions' format 'Completing %d'
> bor@itsrm2% l /u2/pub/unix/zsh/patches/3.1.6-dev-19/<10000->TAB
> bor@itsrm2% l /u2/pub/unix/zsh/patches/3.1.6-dev-19/10006
> Completing file
> 10006       10009       10011       10013       10017       10025     
> 10028       10029       10040       10041       10044       10058     
> .......... long list ...
> 
> Menu completion without menu selection.
> 
> Do I miss something obvious again?

No, I did. A value of automenu-unambiguous may start menu completion,
so the test-pattern wasn't correct.

> BTW, what's the way to sosrt matches in numerical order?

`setopt numericglobsort' should do the job.

Bye
 Sven

diff -ru ../z.old/Completion/Core/_main_complete Completion/Core/_main_complete
--- ../z.old/Completion/Core/_main_complete	Mon Mar 20 10:04:36 2000
+++ Completion/Core/_main_complete	Mon Mar 20 10:21:34 2000
@@ -133,7 +133,7 @@
 
   _menu_style=( "$_menu_style[@]" "$_def_menu_style[@]" )
 
-  if [[ "$compstate[insert]" = *menu ]]; then
+  if [[ "$compstate[insert]" = *menu* ]]; then
     if [[ -n "$_menu_style[(r)no-select*]" ]]; then
       unset SELECTMIN
     else

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


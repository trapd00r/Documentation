From zsh-workers-return-20488-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 15 04:19:44 2004
Return-Path: <zsh-workers-return-20488-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15481 invoked from network); 15 Oct 2004 04:19:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Oct 2004 04:19:43 -0000
Received: (qmail 79729 invoked from network); 15 Oct 2004 04:19:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Oct 2004 04:19:37 -0000
Received: (qmail 20594 invoked by alias); 15 Oct 2004 04:19:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20488
Received: (qmail 20578 invoked from network); 15 Oct 2004 04:19:34 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 15 Oct 2004 04:19:34 -0000
Received: (qmail 79319 invoked from network); 15 Oct 2004 04:18:34 -0000
Received: from moonbase.zanshin.com (64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 15 Oct 2004 04:18:32 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.13.1/8.13.1) with ESMTP id i9F4IVDp031065;
	Thu, 14 Oct 2004 21:18:31 -0700
Date: Thu, 14 Oct 2004 21:18:31 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: Wayne Davison <wayned@users.sourceforge.net>
cc: zsh-workers@sunsite.dk
Subject: Re: characters not added in _rsync completion
In-Reply-To: <20041013164626.GA3017@blorf.net>
Message-ID: <Pine.LNX.4.61.0410131943440.24408@toltec.zanshin.com>
References: <20041013054015.GA824@blorf.net> <Pine.LNX.4.61.0410122330050.17741@toltec.zanshin.com>
 <20041013164626.GA3017@blorf.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Wed, 13 Oct 2004, Wayne Davison wrote:

> On Tue, Oct 12, 2004 at 11:41:52PM -0700, Bart Schaefer wrote:
> > I'm puzzled why the version of rsync itself makes any difference,
> > because _rsync specifies everything explicitly, so unless you've
> > edited _rsync it won't ever complete those options.
> 
> This is not how it works on my system.  The _rsync script appears to be
> querying rsync to ask it what options it supports, and combining that
> list with the list in _rsync.

I've belatedly spotted that _rsync does in fact pass the "--" option to
_arguments, which causes it to parse the --help output.

> > Without plunging into the why of it, a cursory inspection seems to 
> > indicate that when an option has an argument then zsh fails to find 
> > the longest common prefix among that option and any other options that 
> > do NOT
> 
> It's strange that the --no<TAB> case doesn't match this idea.

Hrm.  Well, I did say it was a cursory inspection.

Fooling around with how this behaves in interactive menu selection is ... 
unfortunately pretty much the opposite of "enlightening."


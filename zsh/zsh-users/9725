From zsh-users-return-9725-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 01 00:40:38 2005
Return-Path: <zsh-users-return-9725-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16227 invoked from network); 1 Dec 2005 00:40:35 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Dec 2005 00:40:35 -0000
Received: (qmail 88963 invoked from network); 1 Dec 2005 00:40:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Dec 2005 00:40:27 -0000
Received: (qmail 5292 invoked by alias); 1 Dec 2005 00:40:20 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9725
Received: (qmail 5282 invoked from network); 1 Dec 2005 00:40:19 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 1 Dec 2005 00:40:19 -0000
Received: (qmail 87828 invoked from network); 1 Dec 2005 00:40:19 -0000
Received: from ladle.dreamhost.com (205.196.219.4)
  by a.mx.sunsite.dk with SMTP; 1 Dec 2005 00:40:16 -0000
Received: from [192.168.1.103] (adsl-68-77-176-238.dsl.wotnoh.ameritech.net [68.77.176.238])
	by ladle.dreamhost.com (Postfix) with ESMTP id 6EAAC129A83
	for <zsh-users@sunsite.dk>; Wed, 30 Nov 2005 16:40:10 -0800 (PST)
Message-ID: <438E4667.6000307@tntluoma.com>
Date: Wed, 30 Nov 2005 19:40:07 -0500
From: Lists <lists@tntluoma.com>
User-Agent: Thunderbird 1.5 (Windows/20051025)
MIME-Version: 1.0
To: zsh-users@sunsite.dk
Subject: Why can't I get my remote host into a variable?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit


Zsh 4.2.5 on FreeBSD.  I'm ssh'ing into the FreeBSD machine.

I'm trying to get my remote host into a variable REMOTE_HOST.  I have 
tried both of these in .zshenv:

REMOTE_HOST=`who am i | awk '{print $NF}'|tr -d '(|)'`

$ who am i
luomat           ttyp0    Nov 30 19:34 (192.168.1.103)

That works on the commandline, but when I try it in .zshenv I get 
"19:34" or whatever the timestamp is for that session.

Thinking I would be clever, I tried this

TTYSHORT=`echo $TTY |colrm 1 8`
REMOTE_HOST=`w | fgrep $TTYSHORT | awk '{print $3}'`

but that does not work either.

Anyone know how to get this to work in .zshenv?






From zsh-users-return-13829-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 13 01:52:19 2009
Return-Path: <zsh-users-return-13829-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26130 invoked from network); 13 Feb 2009 01:52:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Feb 2009 01:52:06 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 89740 invoked from network); 13 Feb 2009 01:51:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Feb 2009 01:51:51 -0000
Received: (qmail 24667 invoked by alias); 13 Feb 2009 01:51:35 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13829
Received: (qmail 24656 invoked from network); 13 Feb 2009 01:51:35 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 13 Feb 2009 01:51:35 -0000
Received: from wa-out-1112.google.com (wa-out-1112.google.com [209.85.146.176])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 3FD6380271F0
	for <zsh-users@sunsite.dk>; Fri, 13 Feb 2009 02:51:31 +0100 (CET)
Received: by wa-out-1112.google.com with SMTP id v27so545599wah.29
        for <zsh-users@sunsite.dk>; Thu, 12 Feb 2009 17:51:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=X6prbOH8oDhYbqpA6zYM58mUbaeTWzlQjrvzGq86N98=;
        b=ucwFHqs4Z4ukBBH4lceyqSl/bGUWGFPnAlcLMcTcIxwCVonl5npn6mpJr7vVoYrgqZ
         vpImK07CU2hFcKi9D3BKNT+PlKaaFz55IBs2WL7Hagkxc4SIp6X00OlvMtQXppr4SJYl
         OjuJSNUQaK0wNYT/tGI4/rpIHqyCy7hukNFUU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=JR94wLZ8lwxQ4EF2S6n6OI2mHlqy4uxjkyJQMhv5ihzPhXe7+FLuyd/PFrlJM/ZJnC
         ipTGtNKNuQZSC3A+8C86eR4SwGD6MBG7H23FH4RgBYLm3EHZ6lqq4Ukc918KSrc2aXF9
         disvbTndGxU6/SInGCD6tT0035z81PY42tBRw=
MIME-Version: 1.0
Received: by 10.114.192.3 with SMTP id p3mr679414waf.25.1234489890399; Thu, 12 
	Feb 2009 17:51:30 -0800 (PST)
In-Reply-To: <4994CFCF.2090408@gatech.edu>
References: <4994CFCF.2090408@gatech.edu>
Date: Fri, 13 Feb 2009 02:51:30 +0100
Message-ID: <237967ef0902121751k37dd810co312238682d9b60f0@mail.gmail.com>
Subject: Re: /usr/bin/printf
From: Mikael Magnusson <mikachu@gmail.com>
To: zsh-users@sunsite.dk
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/8985/Thu Feb 12 23:11:57 2009 on bifrost
X-Virus-Status: Clean

2009/2/13 Matthew Flaschen <matthew.flaschen@gatech.edu>:
> zsh (zsh 4.3.4 (i686-pc-linux-gnu)) seems to use (probably for
> optimization) its built-in printf even if you explicitly specify
> /usr/bin/printf .  Of course, this is only coming up because zsh's
> printf seems to be wrong (or it least doesn't match the executable it's
> mimicking)
>
> Under bash:
>
> $ printf "%s\n" foo
> foo
>
> Under dash (or bash):
>
> $ /usr/bin/printf "%s\n" foo
> foo
>
> Under zsh:
>
> % printf "%s\n" foo
>
> " foofoo
>
> /usr/bin/printf "%s\n" foo
>
> " foofoo
>
> zsh's printf does some really bizarre things:
>
> % /usr/bin/printf "%s" > /dev/null
> " > /dev/null
>
> It actually prints the text /dev/null !
>
> Under bash:
>
> $ /usr/bin/printf "%s" > /dev/null
> $
>
> Is this a known issue?

This is because your preexec() function is broken and is outputting
the newline from the cmdline without escaping it, which makes your
terminal stop reading the title, and the rest of the command line is
just echoed. This is kind of hard to figure out the first time.

-- 
Mikael Magnusson


From yasu@isl.rdc.toshiba.co.jp Sun Jun 23 01:15:38 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id BAA15955 for <mason@werple.mira.net.au>; Sun, 23 Jun 1996 01:15:34 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id KAA16355; Sat, 22 Jun 1996 10:50:00 -0400 (EDT)
Resent-Date: Sat, 22 Jun 1996 10:50:00 -0400 (EDT)
Message-Id: <199606221443.XAA01116@isl.rdc.toshiba.co.jp>
To: zsh-workers@math.gatech.edu
Subject: Parameter expansion does'nt work
Mime-Version: 1.0
X-Attribution: yasu
Content-Type: text/plain; charset=US-ASCII
Date: Sat, 22 Jun 1996 23:43:12 +0900
From: "KIMURA Yasuhiro / =?ISO-2022-JP?B?GyRCTFpCPDkvOUAbKEI=?= " <yasu@isl.rdc.toshiba.co.jp>
Resent-Message-ID: <"Y0xW9.0.Q_3.OW0pn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1424
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 11058
Status: OR

Hello maintainers.

Last week I updated zsh from beta13 to beta20 and recieved a report
from a user in my site that parameter expansion didn't work. He made a 
following example.

% foo=bar
% echo "\
> $foo"

When using beta13, this produces following output.

% foo=bar
% echo "\
> $foo"
bar
% 

But now with beta20, result is

% foo=bar
% echo "\
> $foo"
$foo
%

This probrem was found on SunOS 4.1.x and Solaris 2.x. Since sh and
ksh produces the same result as beta13, I concluded this is a
newly-introduced bug and decided to report it. The output of
'reporter' script is included below. If you need any information,
please reply directly to me since I'm not a subscriber of the
mailing-list.

----------------------------------------------------------------------
# START zsh saveset
# uname:  SunOS zinnia 5.5 Generic sun4u

# Aliases.

alias dir='ls -AFgl'
alias la='ls -AF'
alias lg='ls -Fgl'
alias ll='ls -Fl'
alias ls='ls -F'
alias ne='mule -nw'
alias po=popd
alias pu=pushd
alias run-help=man
alias which-command=whence

# Key bindings.

bindkey -r "^@"
bindkey -r "^A"
bindkey -r "^B"
bindkey -r "^C"
bindkey -r "^D"
bindkey -r "^E"
bindkey -r "^F"
bindkey -r "^G"
bindkey -r "^H"
bindkey -r "^I"
bindkey -r "^J"
bindkey -r "^K"
bindkey -r "^L"
bindkey -r "^M"
bindkey -r "^N"
bindkey -r "^O"
bindkey -r "^P"
bindkey -r "^Q"
bindkey -r "^R"
bindkey -r "^S"
bindkey -r "^T"
bindkey -r "^U"
bindkey -r "^V"
bindkey -r "^W"
bindkey -r "^X"
bindkey -r "^Y"
bindkey -r "^Z"
bindkey -r "\e"
bindkey -r "^_"
bindkey -r "^?"
bindkey -r "^X^B"
bindkey -r "^X^F"
bindkey -r "^X^J"
bindkey -r "^X^K"
bindkey -r "^X^N"
bindkey -r "^X^O"
bindkey -r "^X^U"
bindkey -r "^X^V"
bindkey -r "^X^X"
bindkey -r "^X*"
bindkey -r "^XG"
bindkey -r "^Xg"
bindkey -r "^Xr"
bindkey -r "^Xs"
bindkey -r "^Xu"
bindkey -r "\e^D"
bindkey -r "\e^G"
bindkey -r "\e^H"
bindkey -r "\e^I"
bindkey -r "\e^J"
bindkey -r "\e^L"
bindkey -r "\e^M"
bindkey -r "\e^_"
bindkey -r "\e "
bindkey -r "\e!"
bindkey -r "\e\\""
bindkey -r "\e$"
bindkey -r "\e'"
bindkey -r "\e-"
bindkey -r "\e."
bindkey -r "\e0"
bindkey -r "\e1"
bindkey -r "\e2"
bindkey -r "\e3"
bindkey -r "\e4"
bindkey -r "\e5"
bindkey -r "\e6"
bindkey -r "\e7"
bindkey -r "\e8"
bindkey -r "\e9"
bindkey -r "\e<"
bindkey -r "\e>"
bindkey -r "\e?"
bindkey -r "\eA"
bindkey -r "\eB"
bindkey -r "\eC"
bindkey -r "\eD"
bindkey -r "\eF"
bindkey -r "\eG"
bindkey -r "\eH"
bindkey -r "\eL"
bindkey -r "\eN"
bindkey -r "\eP"
bindkey -r "\eQ"
bindkey -r "\eS"
bindkey -r "\eT"
bindkey -r "\eU"
bindkey -r "\eW"
bindkey -r "\e[A"
bindkey -r "\e[B"
bindkey -r "\e[C"
bindkey -r "\e[D"
bindkey -r "\e_"
bindkey -r "\ea"
bindkey -r "\eb"
bindkey -r "\ec"
bindkey -r "\ed"
bindkey -r "\ef"
bindkey -r "\eg"
bindkey -r "\eh"
bindkey -r "\el"
bindkey -r "\en"
bindkey -r "\ep"
bindkey -r "\eq"
bindkey -r "\es"
bindkey -r "\et"
bindkey -r "\eu"
bindkey -r "\ew"
bindkey -r "\ex"
bindkey -r "\ey"
bindkey -r "\ez"
bindkey -r "\e|"
bindkey -r "\e^?"

bindkey "^@"	set-mark-command
bindkey "^A"	beginning-of-line
bindkey "^B"	backward-char
bindkey "^C"	undefined-key
bindkey "^D"	delete-char-or-list
bindkey "^E"	end-of-line
bindkey "^F"	forward-char
bindkey "^G"	send-break
bindkey "^H"	backward-delete-char
bindkey "^I"	expand-or-complete
bindkey "^J"	accept-line
bindkey "^K"	kill-line
bindkey "^L"	clear-screen
bindkey "^M"	accept-line
bindkey "^N"	down-line-or-history
bindkey "^O"	accept-line-and-down-history
bindkey "^P"	up-line-or-history
bindkey "^Q"	push-line
bindkey "^R"	history-incremental-search-backward
bindkey "^S"	history-incremental-search-forward
bindkey "^T"	transpose-chars
bindkey "^U"	kill-whole-line
bindkey "^V"	quoted-insert
bindkey "^W"	backward-kill-word
bindkey "^X"	prefix
bindkey "^Y"	yank
bindkey "^Z"	undefined-key
bindkey "\e"	prefix
bindkey "^_"	undo
bindkey "^?"	backward-delete-char
bindkey "^X^B"	vi-match-bracket
bindkey "^X^F"	vi-find-next-char
bindkey "^X^J"	vi-join
bindkey "^X^K"	kill-buffer
bindkey "^X^N"	infer-next-history
bindkey "^X^O"	overwrite-mode
bindkey "^X^U"	undo
bindkey "^X^V"	vi-cmd-mode
bindkey "^X^X"	exchange-point-and-mark
bindkey "^X*"	expand-word
bindkey "^XG"	list-expand
bindkey "^Xg"	list-expand
bindkey "^Xr"	history-incremental-search-backward
bindkey "^Xs"	history-incremental-search-forward
bindkey "^Xu"	undo
bindkey "\e^D"	list-choices
bindkey "\e^G"	send-break
bindkey "\e^H"	backward-kill-word
bindkey "\e^I"	self-insert-unmeta
bindkey "\e^J"	self-insert-unmeta
bindkey "\e^L"	clear-screen
bindkey "\e^M"	self-insert-unmeta
bindkey "\e^_"	copy-prev-word
bindkey "\e "	expand-history
bindkey "\e!"	expand-history
bindkey "\e\\""	quote-region
bindkey "\e$"	spell-word
bindkey "\e'"	quote-line
bindkey "\e-"	neg-argument
bindkey "\e."	insert-last-word
bindkey "\e0"	digit-argument
bindkey "\e1"	digit-argument
bindkey "\e2"	digit-argument
bindkey "\e3"	digit-argument
bindkey "\e4"	digit-argument
bindkey "\e5"	digit-argument
bindkey "\e6"	digit-argument
bindkey "\e7"	digit-argument
bindkey "\e8"	digit-argument
bindkey "\e9"	digit-argument
bindkey "\e<"	beginning-of-buffer-or-history
bindkey "\e>"	end-of-buffer-or-history
bindkey "\e?"	which-command
bindkey "\eA"	accept-and-hold
bindkey "\eB"	backward-word
bindkey "\eC"	capitalize-word
bindkey "\eD"	kill-word
bindkey "\eF"	forward-word
bindkey "\eG"	get-line
bindkey "\eH"	run-help
bindkey "\eL"	down-case-word
bindkey "\eN"	history-search-forward
bindkey "\eP"	history-search-backward
bindkey "\eQ"	push-line
bindkey "\eS"	spell-word
bindkey "\eT"	transpose-words
bindkey "\eU"	up-case-word
bindkey "\eW"	copy-region-as-kill
bindkey "\e[A"	up-line-or-history
bindkey "\e[B"	down-line-or-history
bindkey "\e[C"	forward-char
bindkey "\e[D"	backward-char
bindkey "\e_"	insert-last-word
bindkey "\ea"	accept-and-hold
bindkey "\eb"	backward-word
bindkey "\ec"	capitalize-word
bindkey "\ed"	kill-word
bindkey "\ef"	forward-word
bindkey "\eg"	get-line
bindkey "\eh"	run-help
bindkey "\el"	down-case-word
bindkey "\en"	history-search-forward
bindkey "\ep"	history-search-backward
bindkey "\eq"	push-line
bindkey "\es"	spell-word
bindkey "\et"	transpose-words
bindkey "\eu"	up-case-word
bindkey "\ew"	copy-region-as-kill
bindkey "\ex"	execute-named-cmd
bindkey "\ey"	yank-pop
bindkey "\ez"	execute-last-named-cmd
bindkey "\e|"	vi-goto-column
bindkey "\e^?"	backward-kill-word

# Completions.


# Undefined functions.


# Defined functions.

StartX () {
	echo 'Starting X (Control-C to interrupt)'
	sleep 5
	export XAUTHORITY=$HOME/.Xauthority.$HOST
	export XINITRC=$HOME/.Xinitrc
	export XRSH_AUTH_TYPE=none
	export XRSH_ENVS_TO_PASS="XAUTHORITY XRSH_AUTH_TYPE"
	magic-cookie | xauth -q
	xinit -- -auth $XAUTHORITY
	kbd_mode -a
	unset XAUTHORITY XINITRC XRSH_AUTH_TYPE XRSH_ENVS_TO_PASS
	echo 'Automatically logout (Control-C to interrupt)'
	sleep 5
	logout
}

# Limits.

limit datasize        2047MB
limit stacksize       8MB
limit descriptors     64

# Non-array variables.

TERMCAP=''
TERM='kterm'
\'!\'="0"
\'#\'="0"
\'$\'="13481"
\'?\'="1"
ARGC="0"
AWK="nawk"
BAUD="38400"
BBSEDITOR="\'mule -nw\'"
BBSPAGER="more"
BBSREADER="less"
CC_DEF_PATH="/isl/home/yasu/lib/X11/ccdef"
CDPATH="\'\'"
COLUMNS="80"
CPP="/usr/ccs/lib/cpp"
DIRSTACKSIZE="-1"
EGID="600"
ERRNO="0"
EUID="382"
FCEDIT="vi"
FIGNORE="\'\'"
FPATH="\'\'"
GID="600"
HISTCHARS="\'!^#\'"
HISTSIZE="30"
HOME="/isl/home/yasu"
HOST="zinnia"
HZ="100"
JTEX="ASCII"
KEYTIMEOUT="40"
LANG="ja"
LESSCHARSET="japanese-ujis"
LINENO="329"
LINES="58"
LISTMAX="100"
LOGCHECK="60"
LOGNAME="yasu"
MACHTYPE="sparc"
MAIL="/var/mail/yasu"
MAILCHECK="60"
MAILPATH="\'\'"
MANPATH="/usr/man:/usr/X11R6/man:/usr/X11R5/man:/usr/local/man:/usr/local/gnu/man:/isl/man"
NNTPSERVER="monaco.csl.rdc.toshiba.co.jp"
NULLCMD="cat"
OLDPWD="/isl/home/yasu"
ONEW_ROMKAND="/usr/local/lib/wnn/ja_JP/rk"
OPTARG="\'\'"
OPTIND="1"
OSTYPE="solaris2"
PAGER="less"
PATH="/opt/SUNWspro/bin:/usr/ccs/bin:/usr/local/gnu/bin:/usr/local/bin:/usr/ucb:/usr/bin:/isl/home/yasu/bin:/isl/home/yasu/bin/solaris2:/isl/bin:/usr/X11R6/bin:/usr/X11R5/bin:/usr/local/TeX/bin:/usr/local/bin/mh:/usr/local/bin/rcs:/usr/local/etc:/usr/sbin"
PERIOD="0"
POSTEDIT="\'\'"
PPID="13478"
PRINTER="ml.aag"
PROMPT="\'%n@%m[%h]%# \'"
PROMPT2="\'> \'"
PROMPT3="\'?# \'"
PROMPT4="\'+ \'"
PS1="\'%n@%m[%h]%# \'"
PS2="\'> \'"
PS3="\'?# \'"
PS4="\'+ \'"
PSPRINTER="ml.aag"
PSVAR="\'\'"
PWD="/isl/home/yasu/tmp"
RANDOM="32252"
READNULLCMD="more"
REPORTTIME="-1"
RPROMPT="\'\'"
RPS1="\'\'"
SAVEHIST="0"
SECONDS="39"
SHELL="/bin/zsh"
SHLVL="1"
SPROMPT="\'zsh: correct \'\\'\'%R\'\\'\' to \'\\'\'%r\'\\'\' [nyae]? \'"
TIMEFMT="\'%J  %U user %S system %P cpu %*E total\'"
TMOUT="0"
TMPPREFIX="/tmp/zsh"
TTY="/dev/pts/2"
TTYIDLE="-1"
TZ="Japan"
UID="382"
USERNAME="yasu"
VENDOR="sun"
WATCH="\'\'"
WATCHFMT="\'%n has %a %l from %m.\'"
WORDCHARS="\'*?_-.[]~=/&;!#$%^(){}<>\'"
ZSH_NAME="zsh"
ZSH_VERSION="2.6-beta20"
each="/usr/local/gnu/bin"
histchars="\'!^#\'"
reporter_OSVersion="SunOS_5.5"
reporter_junkiequotes="no"
status="1"
str="\'SunOS zinnia 5.5 Generic sun4u\'"
prompt='test%'

# Array variables.

argv=()
'*'=()
cdpath=()
fignore=()
fpath=()
mailpath=()
manpath=(/usr/man /usr/X11R6/man /usr/X11R5/man /usr/local/man /usr/local/gnu/man/isl/man )
path=(/opt/SUNWspro/bin /usr/ccs/bin /usr/local/gnu/bin /usr/local/bin /usr/ucb /usr/bin /isl/home/yasu/bin /isl/home/yasu/bin/solaris2 /isl/bin /usr/X11R6/bin /usr/X11R5/bin /usr/local/TeX/bin /usr/local/bin/mh /usr/local/bin/rcs /usr/local/etc/usr/sbin )
psvar=()
signals=(EXIT HUP INT QUIT ILL TRAP IOT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM USR1 USR2 CLD PWR WINCH URG POLL STOP TSTP CONT TTIN TTOU VTALRM PROF XCPU XFSZ WAITING LWP FREEZE THAW RTMIN 37 38 39 40 41 42 RTMAX ZERRDEBUG)
watch=()

# Exported variables.

export TERMCAP
export TERM
export BBSEDITOR='mule -nw'
export BBSPAGER=more
export BBSREADER=less
export CC_DEF_PATH=/isl/home/yasu/lib/X11/ccdef
export HOME=/isl/home/yasu
export HZ=100
export JTEX=ASCII
export LANG=ja
export LESSCHARSET=japanese-ujis
export LOGNAME=yasu
export MAIL=/var/mail/yasu
export MANPATH=/usr/man:/usr/X11R6/man:/usr/X11R5/man:/usr/local/man:/usr/local/gnu/man:/isl/man
export NNTPSERVER=monaco.csl.rdc.toshiba.co.jp
export ONEW_ROMKAND=/usr/local/lib/wnn/ja_JP/rk
export PAGER=less
export PATH=/opt/SUNWspro/bin:/usr/ccs/bin:/usr/local/gnu/bin:/usr/local/bin:/usr/ucb:/usr/bin:/isl/home/yasu/bin:/isl/home/yasu/bin/solaris2:/isl/bin:/usr/X11R6/bin:/usr/X11R5/bin:/usr/local/TeX/bin:/usr/local/bin/mh:/usr/local/bin/rcs:/usr/local/etc:/usr/sbin
export PRINTER=ml.aag
export PSPRINTER=ml.aag
export PWD=/isl/home/yasu/tmp
export SHELL=/bin/zsh
export SHLVL=1
export TERM=kterm
export TZ=Japan

# Setopt.

setopt bgnice
setopt hashcmds
setopt hashdirs
setopt hashlistall
setopt histignoredups
setopt ignoreeof
setopt listtypes
setopt login
setopt notify
setopt pushdignoredups

# END zsh saveset
----------------------------------------------------------------------

---
Yasuhiro Kimura // yasu@isl.rdc.toshiba.co.jp
Reserch Lab. III    Communication and Information System Labs.
Research and Developement Center    TOSHIBA CORPORATION



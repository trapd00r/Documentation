From zsh-workers-return-12299-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 18 10:52:19 2000
Return-Path: <zsh-workers-return-12299-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6693 invoked from network); 18 Jul 2000 10:52:18 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Jul 2000 10:52:18 -0000
Received: (qmail 23056 invoked by alias); 18 Jul 2000 10:51:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12299
Received: (qmail 23012 invoked from network); 18 Jul 2000 10:51:16 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: PATCH: _man - small fix for manpages without section number suffix
Date: Tue, 18 Jul 2000 14:50:24 +0400
Message-ID: <000001bff0a5$f9dfb140$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0001_01BFF0C7.80F45E80"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

This is a multi-part message in MIME format.

------=_NextPart_000_0001_01BFF0C7.80F45E80
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit

Our version of CDE installs manpages without section suffix (i.e.
/usr/dt/man/man1/dtsession.Z instead of dtsession.1.Z).

Anybody objects to the following patch?

-andrej

Have a nice DOS!
B >>

------=_NextPart_000_0001_01BFF0C7.80F45E80
Content-Type: application/octet-stream;
	name="_man.patch"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="_man.patch"

--- Completion/User/_man	Thu Jun  1 09:58:09 2000=0A=
+++ /tools/share/zsh/3.1.9-dev-3/functions/User/_man	Tue Jul 18 14:44:54 =
2000=0A=
@@ -30,13 +30,13 @@=0A=
 mrd=3D(${^manpath/\%L/${LANG:-En_US.ASCII}}/mandb(N))=0A=
 if [[ $words[2] =3D (<->*|1M|l|n) ]]; then=0A=
   rep=3D(=0A=
-  =
$manpath/(sman|man|cat)${words[2]}/${~approx}$PREFIX${~star}$SUFFIX.<->*(=
N:t) )=0A=
+  =
$manpath/(sman|man|cat)${words[2]}/${~approx}$PREFIX${~star}$SUFFIX.(<->*=
|Z)(N:t) )=0A=
   (($#mrd)) && rep[$#rep+1]=3D($(awk "\$2 =3D=3D \"$words[2]\" {print =
\$1}" $mrd))=0A=
 else=0A=
-  rep=3D( =
$manpath/(sman|man|cat)*/${~approx}$PREFIX${~star}$SUFFIX.<->*(N:t) )=0A=
+  rep=3D( =
$manpath/(sman|man|cat)*/${~approx}$PREFIX${~star}$SUFFIX.(<->*|Z)(N:t) )=0A=
   (($#mrd)) && rep[$#rep+1]=3D($(awk '{print $1}' $mrd))=0A=
 fi=0A=
 =0A=
 =0A=
 (( $#rep )) && _wanted manuals expl 'manual page' \=0A=
-    compadd - ${rep%%.[^.]##(.gz|.bz2|)}=0A=
+    compadd - ${rep%%.[^.]##(.gz|.bz2|.Z|)}=0A=

------=_NextPart_000_0001_01BFF0C7.80F45E80--


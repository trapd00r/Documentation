From zsh-workers-return-17846-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 24 09:01:54 2002
Return-Path: <zsh-workers-return-17846-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3648 invoked from network); 24 Oct 2002 09:01:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 24 Oct 2002 09:01:53 -0000
Received: (qmail 6080 invoked by alias); 24 Oct 2002 09:01:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17846
Received: (qmail 6061 invoked from network); 24 Oct 2002 09:01:38 -0000
X-VirusChecked: Checked
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: EXIT trap and the return status
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <8187.1035449998.1@logica.com>
Date: Thu, 24 Oct 2002 10:00:14 +0100
Sender: kiddleo@logica.com
Message-Id: <E184dqg-000286-00@bimbo.logica.co.uk>

I was trying to work out why the _prefix completer that follows
_approximate at the end of my completers is never being run in zsh 4.1.
The trace looks like this:

+_approximate:113> return 1
+_main_complete:1> unfunction compadd
+_main_complete:156> ret=0 
+_main_complete:157> break 2

The `unfunction compadd' comes from _approximate doing
  trap 'unfunction compadd' EXIT INT
The problem is that because that trap is successful, _approximate is
returning 0 instead of 1. This possibly has something to do with the
change in 17250. It doesn't seem right to me (and is inconsistent with
ksh93). So is this a bug? If not, I'll adjust _approximate.

Oliver

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


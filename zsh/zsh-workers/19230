From zsh-workers-return-19230-mason-zsh=primenet.com.au@sunsite.dk Sun Nov 09 21:21:50 2003
Return-Path: <zsh-workers-return-19230-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2558 invoked from network); 9 Nov 2003 21:21:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Nov 2003 21:21:49 -0000
Received: (qmail 8011 invoked by alias); 9 Nov 2003 21:21:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19230
Received: (qmail 7999 invoked from network); 9 Nov 2003 21:21:39 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 9 Nov 2003 21:21:39 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [4.3.58.249] by sunsite.dk (MessageWall 1.0.8) with SMTP; 9 Nov 2003 21:21:38 -0000
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.11.6/8.11.6) id hA9LLa614476
	for zsh-workers@sunsite.dk; Sun, 9 Nov 2003 13:21:36 -0800
X-Authentication-Warning: candle.brasslantern.com: schaefer set sender to schaefer@closedmail.com using -f
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1031109212136.ZM14473@candle.brasslantern.com>
Date: Sun, 9 Nov 2003 21:21:36 +0000
In-Reply-To: <20031109161853.GL22980@DervishD>
Comments: In reply to DervishD <raul@pleyades.net>
        "Re: Strange problem with ulimit" (Nov  9,  5:18pm)
References: <20031108095037.GA11894@fargo>  <20031109161853.GL22980@DervishD>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Zsh-workers <zsh-workers@sunsite.dk>
Subject: Re: Strange problem with ulimit
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

[Hmm, I don't seem to have received the first message in this thread.]

On Nov 9,  5:18pm, DervishD wrote:
}
}  * Davil=EDn <david@pleyades.net> dixit:
} > I noticed that if a script has a bang path with /bin/sh (which in
} > my case points to zsh) the ulimit built-in is not found. Is
} > deliberate to not use some built-ins when zsh in in bash-compatible
} > mode?
} =

}     I can reproduce it here, with zsh 4.0.7. I've took a look at the
} sources, with no success :((

That's because the code in question is in the file "bltinmods.list"
which is generated at configure time and then #include'd by init.c.

The "ulimit" builtin is not a full-fledged builtin -- it's supplied by
the zsh/rlimits module.  Even though that module is normally linked to
the base executable (rather than dynamically loaded), the rule is that
modules have to pass through zmodload before any of their functionality
is available.

Modules are zmodload'd automatically at startup only when the shell is
invoked as zsh.  This is to prevent clashes with command and variable
names used e.g. by "sh" scripts that are expecting a clean namespace.

-- =

Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net  =
 =


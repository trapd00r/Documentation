From zsh-workers-return-17561-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 18 23:07:49 2002
Return-Path: <zsh-workers-return-17561-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4834 invoked from network); 18 Aug 2002 23:07:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Aug 2002 23:07:49 -0000
Received: (qmail 17724 invoked by alias); 18 Aug 2002 23:07:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17561
Received: (qmail 17708 invoked from network); 18 Aug 2002 23:07:41 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020818230703.ZM15676@candle.brasslantern.com>
Date: Sun, 18 Aug 2002 23:07:02 +0000
In-Reply-To: <3D5FCB68.mailW511LWZ0@viadomus.com>
Comments: In reply to DervishD <raul@pleyades.net>
        "Re: About menu selection (again)" (Aug 18,  6:29pm)
References: <3D56CD6E.mailMX1LBVZ3@viadomus.com> 
	<1020812060148.ZM28748@candle.brasslantern.com> 
	<3D5906BF.mail17S21TJ8M@viadomus.com> 
	<1020813150050.ZM30758@candle.brasslantern.com> 
	<3D5954F7.mail1L21A9GN@viadomus.com> 
	<3D595620.mail3I11T8QF@viadomus.com> 
	<1020814022702.ZM31935@candle.brasslantern.com> 
	<3D5CEB3E.mailV211HY5E@viadomus.com> 
	<15708.60068.71382.607117@wischnow.berkom.de> 
	<3D5FCB68.mailW511LWZ0@viadomus.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: DervishD <raul@pleyades.net>, zsh-workers@sunsite.dk
Subject: Re: About menu selection (again)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Aug 18,  6:29pm, DervishD wrote:
}
} I mean: complist needs some form of completion to get menu selection to
} work, so if 'compctl' is not loaded, which other can I load?.

You can run `compinit' to load the "new" shell-function-based completion
system.  (We need to come up with a name for that; I suppose we can just
call it "compsys" as that's the name of the manual section.)

Currently the question "is a completion system loaded?" is tested as "is
the zsh/complete module loaded?"  The assumption being that no one would
load zsh/complete unless they were going to make use of it.  zsh/compctl
gets loaded iff zsh/complete has not been.

The problem is that zsh/complist has a dependency on zsh/complete -- which
is a C-code dependency rather than a functional dependency, so it can't be
dropped -- and that confuses the test by loading the module without any
"form of completion" included.

One possibility might be to split the zsh/complete module still further,
to separate the part that implements the internals of compsys from the
part that complist depends on.  (Maybe move that latter into compcore.c?)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


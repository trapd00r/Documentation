From zsh-workers-return-20155-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 13 04:48:42 2004
Return-Path: <zsh-workers-return-20155-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21917 invoked from network); 13 Jul 2004 04:48:41 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 13 Jul 2004 04:48:41 -0000
Received: (qmail 30681 invoked from network); 13 Jul 2004 04:52:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Jul 2004 04:52:13 -0000
Received: (qmail 4808 invoked by alias); 13 Jul 2004 04:48:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20155
Received: (qmail 4798 invoked from network); 13 Jul 2004 04:48:20 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.85)
  by sunsite.dk with SMTP; 13 Jul 2004 04:48:20 -0000
Received: (qmail 30387 invoked from network); 13 Jul 2004 04:52:04 -0000
Received: from moonbase.zanshin.com (@64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 13 Jul 2004 04:51:51 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.12.11/8.12.11) with ESMTP id i6D4m5mX024051
	for <zsh-workers@sunsite.dk>; Mon, 12 Jul 2004 21:48:05 -0700
Date: Mon, 12 Jul 2004 21:48:05 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: Zsh Hackers <zsh-workers@sunsite.dk>
Subject: Re: Another completion-time screen refresh bug
In-Reply-To: <20040713020254.GA856@primenet.com.au>
Message-ID: <Pine.LNX.4.60.0407122137580.19233@toltec.zanshin.com>
References: <1040331164725.ZM29343@candle.brasslantern.com>
 <20040713020254.GA856@primenet.com.au>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Tue, 13 Jul 2004, Geoff Wing wrote:

> Bart Schaefer <schaefer@brasslantern.com> output in workers/19714:
> :With this style:
> :zstyle ':completion:*' completer _all_matches _complete _match _approximate
> :
> :If, in the zsh source tree, I type:
> :schaefer<528> rm <TAB>
> :I get the following output, with the cursor on the SECOND line:
> :
> :schaefer<528> rm  
> :Completing filrm
> ...
> :Completing all matches
> :Src ChangeLog Completion stamp-h.in configure autom4te-2.53.cache configure. ...
> 
> I can't reproduce this anymore (though I think I could at the time).
> Was it fixed or did it just go away or can people still reproduce it (and
> provide steps from "zsh -f")

I believe it's dependent on the width of and/or number of lines in the 
listing.  When Oliver and PWS rearranged the NEWS file etc. into the top 
level directory, they eliminated the conditions necessary to reproduce it. 
It's rather tricky to construct by hand a listing that reproduces the 
effect; I haven't managed to do so.

> I can't reproduce workers/19587 either (don't remember if I could 
> previously).

This one I can reproduce as follows:

zsh -f
autoload -U compinit
compinit -D
zstyle ':completion:*' completer \
    _oldlist _expand _complete _match _ignored _approximate _prefix
zstyle ':completion:*' format '%SCompleting %U%d%u%s'

and then enter "egrefoo" and TAB twice on the "f", as described in 19587.

Interestingly, the display remains wrong even after ^R (redisplay).  This 
bug may be related to 19714, and both may, I suppose, be related to the 
use of %S/%s and %U/%u in the format string ...


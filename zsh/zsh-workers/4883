From zsh-workers-request@math.gatech.edu Wed Jan 06 16:43:30 1999
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26536 invoked from network); 6 Jan 1999 16:43:28 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 6 Jan 1999 16:43:28 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id LAA17172;
	Wed, 6 Jan 1999 11:41:44 -0500 (EST)
Resent-Date: Wed, 6 Jan 1999 11:41:44 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <990106084028.ZM14163@candle.brasslantern.com>
Date: Wed, 6 Jan 1999 08:40:28 -0800
In-Reply-To: <19990106101741.A15834@fysh.org>
Comments: In reply to Phil Pennock <comet@fysh.org>
        "3.0.5 patches" (Jan  6, 10:17am)
References: <19990106101741.A15834@fysh.org>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Phil Pennock <comet@fysh.org>,
        Zsh Development Workers <zsh-workers@math.gatech.edu>
Subject: Re: 3.0.5 patches
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"Yc-4Q2.0.FC4.89vas"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4883
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Jan 6, 10:17am, Phil Pennock wrote:
} Subject: 3.0.5 patches
}
} How many current patches are there against 3.0.5?
} 
} Bart refered in one article to 3.0.5-extended -- is that local to you
} Bart?  A search on the web-site archives turns up nothing.

You'll find it if you search the zsh-users archive with partial word
matching turned on, for the string 3.0.5-extended .  It's a bit out of
date now.

} I'm thinking of creating a megapatch.  The list I currently have is:
}  Archive#   Details
}  3548(1997) Zoltan - rcexpandparam
}  1880       Bart - handling EINTR with command substitutions
}  4644       Bart - arithmetic expressions
}  4870       Goran Larsson - Y2k
}  3809       Bart (3.0.5 adapt of PWS 3.1.x patch) - Glob qualifier close
}  4447       Bart - (believe sigwinch)

There's a lot more than that in the -extended patch, though the 4xxx
ones aren't there.

} I know that this last patch might be objected to - I'd go on opinion
} here.  Or am I just duplicating what someone else has already done?

There was talk at about the time 3.1.5 popped out of doing an official
3.0.6.  Here's a summary of the patches to 3.0.5 I have in my CVS tree,
most of which was sent to Zefram back in October; I don't know all the
article numbers:

----------------

The HIST_REDUCE_BLANKS option.

PWS's "preexec" function (ala "precmd"), from zsh-users 1068.

Andreas J. Koenig's patch from zsh-workers 3660 to cause failure of rlimits.awk
to properly abort the build.

PWS's patch from zsh-workers 3526 to permit history commands (fc and r) to be
used in command substitutions ($() and ``).

Patch readoutput() so the output of command substitutions isn't lost on an
EINTR read error, from zsh-users 1880.

PWS's patch from zsh-workers 3808 for (:s/x/y) glob qualifiers.

PWS's patch for number-range globbing with number-prefix matching.

PWS's patch from zsh-workers 4172 to eliminate the `lastc' global and thereby
clean up some goofy history management and a couple of unexpected exits.

PWS's patch for mishandled job wait when the last job in a pipeline is not
added to the job table before an earlier job in the same pipeline is reaped,
from zsh-workers 4397.

PWS's patch from zsh-workers 3818 to not mess up the tty settings when doing
a command while zle is active (e.g. inside a completion function).

Zoltan's patch from zsh-workers 3974 for crash on unset of a special param.

Adaptation to 3.0.5 of Zoltan's patch from zsh-workers 4376 for case ... esac
parsing; any single complex command should parse as if semicolon-terminated.

PWS's patch from zsh-workers 3806 for ${var:s/x/y} modifiers.

Zoltan's patch for rcexpandparam bug, from zsh-workers 3548.

Zefram's chaselinks patch from zsh-workers 3872.

Don't call ioctl(TIOCSWINSZ) from non-interactive shells.

PWS's patch from zsh-workers 3816 for bindkey exiting too vigorously on error.

Sven's patch from 4148 for starting menucompletion when the inserted prefix
would otherwise trigger REC_EXACT.

Sven's patch from 4147 for strange completinword behavior.

Sven Wischnowsky's patch from zsh-workers 4140 for starting menu completion
following a compctl that uses -U.

PWS's patch to simplify expand-or-complete-prefix.

Wayne Davison's patch from zsh-workers 3969 for positioning the mark after
a yank.

PWS's helpfiles revision, from zsh-workers 3598.

PWS's tweak from zsh-workers 4612 that seems to fix signed char problems
which in turn break input of chars with the high bit set.

Fix (for unspecified problem) from Sven in zsh-workers 4697.

Fix strange cursor placement following vi-oper-swap-case.

Cross end-of-line in vi-forward-word when editing multiple lines.

Fix for ${(l<10><x>)foo} and ${(l<10><0><x>)foo} from zsh-workers 4644.

----------------

I'm not actually running the resulting version on a regular basis (mainly
because I'm too lazy/distracted to install it).  Hmm, it appears I never
committed the SIGWINCH change, probably because I don't have trouble with
it.

I could generate a patch for all of that pretty easily, though I also have
a couple of local changes that I'd have to excise.  However, I'd rather not
do it if Zefram is going to surface and release 3.0.6 pretty soon.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-16196-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 31 16:39:30 2001
Return-Path: <zsh-workers-return-16196-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7878 invoked from network); 31 Oct 2001 16:39:30 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?/6dMFXXo1mciDF67UvCVQ4bZml9/KBYt?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 31 Oct 2001 16:39:30 -0000
Received: (qmail 6203 invoked from network); 31 Oct 2001 16:39:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by proxy.melb.primenet.com.au with SMTP; 31 Oct 2001 16:39:28 -0000
Received: (qmail 23749 invoked by alias); 31 Oct 2001 16:39:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16196
Received: (qmail 23730 invoked from network); 31 Oct 2001 16:39:10 -0000
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1011031163856.ZM31759@candle.brasslantern.com>
Date: Wed, 31 Oct 2001 16:38:56 +0000
In-Reply-To: <Pine.LNX.4.21.0110301018500.31194-100000@life.blorf.net>
Comments: In reply to Wayne Davison <wayned@users.sourceforge.net>
        "Re: .zsh_history bugreport" (Oct 30, 10:25am)
References: <Pine.LNX.4.21.0110301018500.31194-100000@life.blorf.net>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Wayne Davison <wayned@users.sourceforge.net>
Subject: Re: .zsh_history bugreport
Cc: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Oct 30, 10:25am, Wayne Davison wrote:
}
} One other potential change: Should readhistline() return "start"
} instead of "0" when fgets() fails? [...] if we've got some characters
} in the string, I figure we might as well return them. Do you agree?

I considered that when first rewriting readhistline(), but ...

I think it's more likely that if the history file is corrupted, then we
should treat the line as entirely unusable, rather than possibly push
garbage into the history list.  It's not overtly harmful, of course,
since history entries don't get executed directly, but once there's junk
in the history it may be confusing for many users to figure out how to
get it *out* of the history again (particularly without losing what comes
before and after it).

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


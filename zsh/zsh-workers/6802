From zsh-workers-return-6802-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jun 23 08:44:10 1999
Return-Path: <zsh-workers-return-6802-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9548 invoked from network); 23 Jun 1999 08:44:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Jun 1999 08:44:08 -0000
Received: (qmail 27126 invoked by alias); 23 Jun 1999 08:43:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6802
Received: (qmail 27119 invoked from network); 23 Jun 1999 08:43:55 -0000
Date: Wed, 23 Jun 1999 10:43:53 +0200 (MET DST)
Message-Id: <199906230843.KAA06161@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Tue, 22 Jun 1999 17:06:54 +0000
Subject: Re: PATCH: collist v2.0


Bart Schaefer wrote:

> }   [...] Could someone who actually uses coulured lists
> }   please check if the default values are correct? (They look very bad.)
> 
> I agree that they're pretty icky.  Here's what I get (no LS_COLORS set,
> ZLS_COLORS set but empty):
> 
> 	ls --color	Zsh
> 	----------	----------
> 	blue		green		directories
> 	green		magenta		executables
> 	cyan		cyan		symlinks
> 	magenta		goldenrod?	sockets
> 	yellow		reverse-blue	devices
> 
> I get this even if I move /etc/DIR_COLORS out of the way.

...and some of the bold, right? But these colours don't look very good 
either. The patch below gives complist what I get as the default for
`ls --colour'. Dunno if they are better...

> (Aren't you glad that I didn't let you use the name "complist" before?)

;-) I was thinking about this, too.

> I just rebuilt with all the latest patches, and now I can't get menu-select
> to start.  I did 
>     bindkey \\t menu-select
> and confirmed with bindkey -L that tab was indeed re-bound, but when I try
>     zsh% ls <TAB>
> it simply starts normal menu completion.  Oh, I see -- menu-select depends
> on ZLS_COLORS being set!  That seems odd.

Maybe, but what if you have a terminal that doesn't understand the
codes used for highlighting? Setting `ZLS_COLO(|U)RS' is a bit like
saying: `I know that my terminal can understand these codes'.


Andrej Borsenkow wrote:

> Collist still is not autoloaded. As I understand, xmods.conf adds to the list of
> autoloaded modules ... but collist does not have anything that can trigger it's
> load. May be, ZLS_* should be added to autoparams for collist? This would
> trigger loading as soon as anything from ZLS_* is defined.

Hm. Autoloaded parameters are intended for modules that *define*
parameters instead of just using them. But then, complist does nothing 
if `ZLS_COLO(|U)RS' isn't set. Hm. Maybe.

Bye
 Sven

diff -u os/Zle/complist.c Src/Zle/complist.c
--- os/Zle/complist.c	Wed Jun 23 10:33:37 1999
+++ Src/Zle/complist.c	Wed Jun 23 10:35:31 1999
@@ -67,7 +67,7 @@
 /* Default values. */
 
 static char *defcols[] = {
-    "0", "0", "32", "36", "31", "33", "44;37", "44;37", "35", NULL,
+    "0", "0", "1;34", "1;36", "33", "1;35", "1;33", "1;33", "1;32", NULL,
     "\033[", "m", NULL, "7"
 };
 

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


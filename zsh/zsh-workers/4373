From zsh-workers-request@math.gatech.edu Fri Aug 28 18:57:05 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10520 invoked from network); 28 Aug 1998 18:57:02 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 28 Aug 1998 18:57:02 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id OAA05782;
	Fri, 28 Aug 1998 14:43:12 -0400 (EDT)
Resent-Date: Fri, 28 Aug 1998 14:43:12 -0400 (EDT)
Date: Fri, 28 Aug 1998 14:45:50 -0400
Message-Id: <9808281845.AA07200@ezdzit.zko.dec.com>
From: Paul Lew <lew@ezdzit.zko.dec.com>
To: "Bart Schaefer" <schaefer@brasslantern.com>
Cc: Paul Lew <lew@ezdzit.zko.dec.com>, zsh-workers@math.gatech.edu
Subject: Re: Signal propagation problem with 3.1.4 on Digital UNIX
In-Reply-To: <980828093631.ZM7550@candle.brasslantern.com>
References: <9808281409.AA06675@ezdzit.zko.dec.com>
	<980828093631.ZM7550@candle.brasslantern.com>
X-Mailer: VM 6.37 under Emacs 20.2.1
Mime-Version: 1.0 (generated by tm-edit 7.106)
Content-Type: multipart/mixed;
 boundary="Multipart_Fri_Aug_28_14:45:49_1998-1"
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"FC47D.0.HQ1.0flvr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4373
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

--Multipart_Fri_Aug_28_14:45:49_1998-1
Content-Type: text/plain; charset=US-ASCII

>>>>> "Bart" == Bart Schaefer <schaefer@brasslantern.com> writes:

    Bart> The bug is that the SIGINT should -not- have caused ode to
    Bart> exit. Either ode should have exec'd zsh without forking, so
    Bart> the second zsh inherits PID 11, or it should be catching or
    Bart> ignoring tty-generated signals, or it should have been taken
    Bart> out of the tty process group.

I tried setting SHELL to /bin/csh and run ode, then send INT to it.
It terminated with message 'signal 2'.  This can be avoided if zsh
reset itself as the process group leader.  Should this be the case?

    Bart> I'm a little confused as to why that last didn't happen
    Bart> automatically.  I would have thought that zsh 12 would force
    Bart> jadfal to be the tty group leader, thus preventing the
    Bart> signals from reaching ode.  That certainly seems to happen
    Bart> on my linux machine (using "perl -e 'system zsh'" in place
    Bart> of ode, and "sleep 10" in place of jadfal).  So the bug may
    Bart> be more insidious than one of interrupt handling in ode.

    Bart> You didn't say what operating system you're using.  It's
    Bart> possible that zsh is not doing tty pgrp management
    Bart> correctly.  Do you happen to have the config.h file that was
    Bart> generated when zsh was built?

I am using Digital UNIX 3.2c.  Attached is the config.h generated.


--Multipart_Fri_Aug_28_14:45:49_1998-1
Content-Type: application/octet-stream
Content-Disposition: attachment; filename="config.h"
Content-Transfer-Encoding: x-gzip64

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

--Multipart_Fri_Aug_28_14:45:49_1998-1--


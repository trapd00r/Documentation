From zsh-workers-return-5335-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 11 07:41:20 1999
Return-Path: <zsh-workers-return-5335-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11046 invoked from network); 11 Feb 1999 07:41:19 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Feb 1999 07:41:19 -0000
Received: (qmail 29578 invoked by alias); 11 Feb 1999 07:40:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5335
Received: (qmail 29570 invoked from network); 11 Feb 1999 07:40:48 -0000
Date: Thu, 11 Feb 1999 08:40:00 +0100 (MET)
Message-Id: <199902110740.IAA05171@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Wed, 10 Feb 1999 22:44:03 -0800
Subject: Re:  Something very weird just happened


Bart Schaefer wrote:

> I ran `zed -f __find` where __find is from the new-completion-examples, and
> a lot of the '-' characters inside [[ ... ]] expressions got doubled.  I
> suspect somebody forgot to tweak a pretty-printing routine to handle the new
> condition codes?

Yes. Actually I changed text.c to print the new condition codes
correctly, then changed the way their names are stored and forgot to
change text.c for this.

Bye
 Sven

--- os/text.c	Thu Feb 11 08:38:46 1999
+++ Src/text.c	Thu Feb 11 08:38:58 1999
@@ -415,7 +415,6 @@
 	    /* Module defined prefix condition. */
 	    char **p = (char **) nm->right;
 
-	    taddstr("-");
 	    taddstr(nm->left);
 	    for (; *p; p++) {
 		taddstr(" ");
@@ -426,7 +425,7 @@
     case COND_MODI:
 	/* Module defined infix condition. */
 	taddstr(((char **) nm->right)[0]);
-	taddstr(" -");
+	taddstr(" ");
 	taddstr(nm->left);
 	taddstr(" ");
 	taddstr(((char **) nm->right)[1]);

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


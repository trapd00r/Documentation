From zsh-workers-return-20733-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 20 18:05:29 2005
Return-Path: <zsh-workers-return-20733-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12688 invoked from network); 20 Jan 2005 18:05:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Jan 2005 18:05:28 -0000
Received: (qmail 12734 invoked from network); 20 Jan 2005 18:05:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Jan 2005 18:05:22 -0000
Received: (qmail 7662 invoked by alias); 20 Jan 2005 18:05:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20733
Received: (qmail 7651 invoked from network); 20 Jan 2005 18:05:15 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Jan 2005 18:05:15 -0000
Received: (qmail 11978 invoked from network); 20 Jan 2005 18:04:40 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 20 Jan 2005 18:04:37 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-15.tower-36.messagelabs.com!1106244275!13082916!1
X-StarScan-Version: 5.4.5; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 20874 invoked from network); 20 Jan 2005 18:04:35 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-15.tower-36.messagelabs.com with SMTP; 20 Jan 2005 18:04:35 -0000
Received: from trentino.logica.co.uk ([158.234.142.59])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id j0KI4Zn6007099
	for <zsh-workers@sunsite.dk>; Thu, 20 Jan 2005 18:04:35 GMT
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id 357822A0DF
	for <zsh-workers@sunsite.dk>; Thu, 20 Jan 2005 19:04:15 +0100 (CET)
To: zsh-workers@sunsite.dk
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <1050120152948.ZM4504@candle.brasslantern.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <41EAE932.5070808@portfolio16.de> <6483.1106219109@trentino.logica.co.uk> <1050120152948.ZM4504@candle.brasslantern.com>
Subject: Re: Strange bug when completing [ in file names 
Date: Thu, 20 Jan 2005 19:04:15 +0100
Message-ID: <13797.1106244255@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Bart Schaefer wrote:
> 
> Doesn't that need to be
> 
>                         (#s)(*[^\\]|)[^*?\(\)\<\>\{\}\|]*
> 
> or something similar, so that a word beginning with "[[" can match?
> E.g. a word beginning with the pattern [[:alpha:].]

I did think about that. The documentation says "unless that suffix
itself contains characters eligible for expansion" so I thought I could
ignore trying to worry about an area that isn't the suffix. After
finding an example, I've concluded that it is better with your change.
The following shows the difference:

  touch test/file
  foo=file
  : t*/$foo<tab>
  : */$foo<tab>

The code doesn't only look in the suffix for "other characters eligible
for expansion" anyway. That'd be hard. Is it worth adjusting the
documentation?

There are still inconsistencies in the behaviour but people probably
don't have precise expectations if they ever try such things. Try this:

  bar=test
  : ./$bar/$foo<tab>
  : ~/$bar/$foo<tab>

Oliver


From zsh-users-return-3466-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Oct 23 05:30:05 2000
Return-Path: <zsh-users-return-3466-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6530 invoked from network); 23 Oct 2000 05:30:04 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Oct 2000 05:30:04 -0000
Received: (qmail 14948 invoked by alias); 23 Oct 2000 05:29:50 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3466
Received: (qmail 14941 invoked from network); 23 Oct 2000 05:29:49 -0000
Date: Mon, 23 Oct 2000 08:29:46 +0300
From: Juhapekka Tolvanen <juhtolv@st.jyu.fi>
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-user mailing list <zsh-users@sunsite.auc.dk>
Subject: Re: Whatta fsck is this?
Message-ID: <20001023082922.A25651@verso.st.jyu.fi>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.2i
Organization: =?iso-8859-1?Q?Overhovel_of_Jyv=E4skyl=E4?=
X-URL: http://www.jyu.fi/~juhtolv/
X-Mailer-URL: http://www.mutt.org/
X-Editor: Vim http://www.vim.org/
X-Operating-System: Linux 2.2.17pre16 on an i586


http://www.zsh.org/mla/users/2000/msg00570.html

>Juhapekka Tolvanen wrote:

>> ...
>> > > 
>> > > If I do that, I experience these kind of things:
>> > > 
>> > > juhtolv@heresy : /home/juhtolv
>> > > % date '+%A, %d %B %Y'
>> > > 10002 | pts/5
>> > > \e]0;%n@%m:%d : date '+%A, %d %B %Y'\a
>> > > perjantai, 25 elokuu 2000
>> > > juhtolv@heresy : /home/juhtolv
>> > > % uname -a
>> > > 10003 | pts/5
>> > > \e]0;%n@%m:%d : uname -a\a
>> > 
>> > Hrm, works for me (and should have been -rn).
>> > 
>> > Well, how about:
>> > 
>> >   print -Pn '\e]0;'
>> >   print -rn "${EXECTEXT}"
>> >   print -Pn '\a'
>> 
>> Works fine otherwise, but if I give for example a commnd "vi", my
>> titlebar
>> looks like this as long as I run that vi:
>> 
>> %n@%m:%d : vi
>
>But I guess by now you know what the problem is and how to solve it,
>right? ;-)

writetitle()
{
  export TITLETEXT="${ROOTTEXT}${ROOTTITLEADD}%n@%m:%d | ${COLUMNS}x${LINES} | %l"
}

writeexectitle()
{
  export EXECTEXT1="${ROOTTEXT}${ROOTTITLEADD}%n@%m:%d : "
  export EXECTEXT2="$*"
}

# TERMINAL TYPES

case "$TERM" in

*xterm*|rxvt|(dt|k|E)term)
precmd()
  {
    writetitle
    print -Pn "\e]0;${TITLETEXT}\a"
  }

  preexec()
  {
    writeexectitle $*
    print -Pn '\e]0;'
    print -Pn "${EXECTEXT1}"
    print -rn "${EXECTEXT2}"
    print -Pn '\a'
  }
;;

And so on...

I'll upload that config here ASAP:

http://www.jyu.fi/~juhtolv/configs/shellrc/

P.S: I don't subscribe to these lists, but I am smart enough to read
Mailing List Archive and you can Cc: to me, i you want.

-- 
Juhapekka "naula" Tolvanen * * * U of Jyväskylä * * * juhtolv@st.jyu.fi
http://www.cc.jyu.fi/~juhtolv/index.html * * "STRAIGHT BUT NOT NARROW!"
-----------------------------------------------------------------------
"Rakasta mua, tai vihaa mua. Hei, kuinka vaan. Kai sillä sitten voit
jotain uutta saavuttaa. Kai mä ansaitsen uuden tilaisuuden. Kai mä
ansaitsen. Hei, mä tiedän sen. Olen liikaa. Minä olen liikaa." Apulanta


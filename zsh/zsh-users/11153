From zsh-users-return-11153-mason-zsh=primenet.com.au@sunsite.dk Sun Jan 28 20:26:12 2007
Return-Path: <zsh-users-return-11153-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26430 invoked from network); 28 Jan 2007 20:26:07 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Jan 2007 20:26:07 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 94919 invoked from network); 28 Jan 2007 20:26:02 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Jan 2007 20:26:02 -0000
Received: (qmail 3027 invoked by alias); 28 Jan 2007 20:25:53 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11153
Received: (qmail 3016 invoked from network); 28 Jan 2007 20:25:53 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Jan 2007 20:25:53 -0000
Received: (qmail 93591 invoked from network); 28 Jan 2007 20:25:53 -0000
Received: from web36809.mail.mud.yahoo.com (209.191.85.60)
  by a.mx.sunsite.dk with SMTP; 28 Jan 2007 20:25:46 -0000
Received: (qmail 16253 invoked by uid 60001); 28 Jan 2007 20:25:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=DUA+DFVwPG+UOBrsMAk4WUwYiPUvCWa74OsQW9YC9AoPzeu4OpWCLh2tITQjmFk0jT/70r4fqzEZ6tI81EhhmgKLcQcULPf9z7ciHSsCSSk2cxS/liSqXdTQImWAX2p126xAN1Xs4qadtW71Ov/yU8P8GklIE4TDt7DP2oIGnWI=;
X-YMail-OSG: bPQ3lbQVM1lJWvHiKhbRRhwyr0NutZglZP1dcW_g2SUI7g6s5IaabwUelsEdIed8YwWfNsduAhcQ4FD9BIL4N8rN4SVvTAeG62wGMYmiMRw6cxTf42iB8R7i2VNGPZTHePiH2IzN38rABiwMYinJeLPAJnPCCjKeXdBYfD3g4DL6a8YiYQOzpmcME7JW
Received: from [88.114.230.68] by web36809.mail.mud.yahoo.com via HTTP; Sun, 28 Jan 2007 12:25:45 PST
Date: Sun, 28 Jan 2007 12:25:45 -0800 (PST)
From: Daniel Qarras <dqarras@yahoo.com>
Subject: Re: zsh handling of non-standard if-evaluations
To: Bart Schaefer <schaefer@brasslantern.com>, zsh-users@sunsite.dk
In-Reply-To: <070128120533.ZM730@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Message-ID: <64357.15315.qm@web36809.mail.mud.yahoo.com>

Hi!

> } Hmm, my login shell is zsh and I've set in my ~/.zshenv:
> } 
> } . /etc/profile
> } 
> } which in turns goes thru /etc/profile.d/*.sh and one of those
> scripts
> } is from the proprietary application. So perhaps I should do "setopt
> } no_equals" before the above mentioned line?
> 
> Generally speaking ~/.zshenv is too early in the startup script order
> to be reading /etc/profile from there.  If you need to read
> /etc/profile you should do it from ~/.zprofile.

Good point. I definitely need to do it, I have an account on several
machines where admins and applications add scripts under /etc/profile.d
to set up various things like paths and variables.

> your original state, you need something like this:
> 
>     zmodload -i zsh/parameter && {
>       __zsh=( ${(kv)options} )
>       emulate sh
>       . /etc/profile
>       emulate zsh
>       options=( $__zsh )
>       unset __zsh
>     }
> 
> This has the side-effect of vacating any option settings from any
> scripts
> in /etc/profile.d that happen to know about zsh, but I think of that
> as a good thing.

I need to test this a bit. I'll get back to this when I've done some
experiments.

Thanks!




 
____________________________________________________________________________________
8:00? 8:25? 8:40? Find a flick in no time 
with the Yahoo! Search movie showtime shortcut.
http://tools.search.yahoo.com/shortcuts/#news


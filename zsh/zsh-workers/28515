From zsh-workers-return-28515-mason-zsh=primenet.com.au@zsh.org Fri Dec 10 11:43:57 2010
Return-Path: <zsh-workers-return-28515-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29114 invoked by alias); 10 Dec 2010 11:43:57 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28515
Received: (qmail 21101 invoked from network); 10 Dec 2010 11:43:54 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,RCVD_IN_DNSWL_LOW autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.212.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:cc:content-type:content-transfer-encoding;
        bh=PB4GUfbWRJme8dieetvp0tOznZe+Bi1uHf/QCCEvfhg=;
        b=Lwh1RSAjlqP33d1mbNYyeNDFOJT7jP8NrZWWF3KPa1CGAZGmdMH5mqD59v1RtZSTyk
         kAlTSuYZn/khqYIQbsxqyIdiCOShQQouuHaMgYHCji77w5Dk3OiPfPs6lq87KFZTbECd
         W5RdxsENl/rZMJc8CB7zjMx5O4lsTlttr/yX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        b=Ac1DB8zWqy8PTG2v+QrgBmvh3rP2Js1cJa2S4gLVAXL4Be+iFkTn+30oqJFE8UaYMY
         aDILP1gWJZLgoTwpmCdXq2MmGveXBugsCfDJLa7sRuYkyEjksVZrAikzvtcBH6Z5kJu1
         uzayteu5naVstdzJohbvOeU5ZLHfgZEeGXmLg=
MIME-Version: 1.0
Sender: nikolai.weibull@gmail.com
In-Reply-To: <87k4jhsx78.fsf@ft.bewatermyfriend.org>
References: <AANLkTi=4OkTExqGZOCY8B64HGatuKh9S=8hkfKkMrF3K@mail.gmail.com>
	<alpine.LNX.2.01.1012091710280.2792@hp>
	<87k4jhsx78.fsf@ft.bewatermyfriend.org>
Date: Fri, 10 Dec 2010 12:37:37 +0100
X-Google-Sender-Auth: Z2uFxZ3tdkBtu8tpdTT6f90GE7g
Message-ID: <AANLkTi=RiNxd=f4yezvHFd6sVGs-9PvSsM=S=c0p1Ybj@mail.gmail.com>
Subject: Re: Git completion slowness
From: Nikolai Weibull <now@bitwi.se>
To: Frank Terbeck <ft@bewatermyfriend.org>
Cc: "Benjamin R. Haskell" <zsh@benizi.com>, Brett Simmers <swtaarrs@gmail.com>, zsh-workers@zsh.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Dec 10, 2010 at 12:07, Frank Terbeck <ft@bewatermyfriend.org> wrote=
:

> We've heard people complaining about _git performance on IRC for a while
> now. I have started to rewrite the _git file related completions some
> time ago, but have since been swamped at work. So that has slowed down
> to a halt.
>
> I'll attach the code to this mail though; maybe it'll be useful to
> someone (search for "Git file listing helpers" to find the helper
> functions). It doesn't have a helper for pathspecs yet, which the
> git-checkout completion (and others) may need.
>
> Also, it's something I experimented with for only a short while. The
> completions did work for me in my limited set of use-cases - they are
> probably not perfect, yet. But they scaled well even on huge
> repositories with many *many* files (like the linux kernel's git
> repository).

> Cc:ing Nikolai, too.

I=E2=80=99ve been rewriting _git for a while now.  I=E2=80=99ve updated all=
 the Main
Porcelain Commands.  I=E2=80=99m currently stuck on something as unimportan=
t
as git-config, but I want to get everything right and I=E2=80=99m doing it =
all
in man page order.  I=E2=80=99ll hopefully have a delayed Christmas gift fo=
r
you all at the beginning of 2011.  I=E2=80=99ll take a look at your changes
and integrate them if they are still applicable.

My main problem right now is that I=E2=80=99m working off of the Debian Zsh
Git repository where I don=E2=80=99t have write permissions.  I=E2=80=99d l=
ike to set
up a Zsh Git repository at GitHub so that I can more easily distribute
my changes, but I haven=E2=80=99t had time to look into setting this up.
Perhaps someone can explain how you set up a CVS-to-Git mirror on
GitHub?

I=E2=80=99ll also try to set up zstyles to the effect of allowing you to
disable potentially costly completions.


From zsh-users-return-10010-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 11 07:51:08 2006
Return-Path: <zsh-users-return-10010-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2497 invoked from network); 11 Mar 2006 07:50:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from ns2.primenet.com.au (HELO primenet.com.au) (@203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 11 Mar 2006 07:50:58 -0000
Received: (qmail 21316 invoked from network); 10 Mar 2006 15:14:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns2.melb.primenet.com.au with SMTP; 10 Mar 2006 15:14:44 -0000
Received: (qmail 55398 invoked from network); 10 Mar 2006 15:13:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Mar 2006 15:13:37 -0000
Received: (qmail 22541 invoked by alias); 10 Mar 2006 15:13:30 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10010
Received: (qmail 22532 invoked from network); 10 Mar 2006 15:13:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Mar 2006 15:13:29 -0000
Received: (qmail 54294 invoked from network); 10 Mar 2006 15:13:29 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 10 Mar 2006 15:13:27 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id DEE4870055; Fri, 10 Mar 2006 10:13:23 -0500 (EST)
Date: Fri, 10 Mar 2006 10:13:23 -0500
From: Clint Adams <clint@zsh.org>
To: Dominic Mitchell <dom@happygiraffe.net>
Cc: Zsh User <zsh-users@sunsite.dk>
Subject: Re: rake completion
Message-ID: <20060310151323.GA3593@scowler.net>
Mail-Followup-To: Dominic Mitchell <dom@happygiraffe.net>,
	Zsh User <zsh-users@sunsite.dk>
References: <20060309235749.GA80406@gimli.happygiraffe.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20060309235749.GA80406@gimli.happygiraffe.net>
User-Agent: Mutt/1.5.11+cvs20060126

> If you're using Rails, this completion for the rake command might come
> in handy:
> 
>   http://weblog.rubyonrails.com/articles/2006/03/09/fast-rake-task-completion-for-zsh

That could be rewritten to something like the following, but we already
distribute a rake completion function.  It would probably be better to
modify that to add caching-layer support and address any other
deficiencies rake users might point out.

#compdef rake

if [[ -f Rakefile ]]; then
  if [[ ! -f .rake_tasks ]] || [[ .rake_tasks -ot Rakefile ]]; then
    print ${${(f)"$(rake --silent --tasks)"}#* } > .rake_tasks
  fi
  compadd $(cat .rake_tasks)
fi


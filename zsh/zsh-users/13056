From zsh-users-return-13056-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 24 13:57:42 2008
Return-Path: <zsh-users-return-13056-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25739 invoked from network); 24 Jul 2008 13:57:31 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Jul 2008 13:57:31 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92291 invoked from network); 24 Jul 2008 13:57:12 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Jul 2008 13:57:12 -0000
Received: (qmail 17702 invoked by alias); 24 Jul 2008 13:57:03 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13056
Received: (qmail 17688 invoked from network); 24 Jul 2008 13:57:02 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 24 Jul 2008 13:57:02 -0000
Received: from an-out-0708.google.com (an-out-0708.google.com [209.85.132.246])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 029A980561C3
	for <zsh-users@sunsite.dk>; Thu, 24 Jul 2008 15:56:58 +0200 (CEST)
Received: by an-out-0708.google.com with SMTP id b33so985080ana.13
        for <zsh-users@sunsite.dk>; Thu, 24 Jul 2008 06:56:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=D+jDml5XZdcBNw3TF3+csbsCWcOOAcezGkL1j3s4wvY=;
        b=Tmi2VjcgrAZNgqDCerD9PbFrfs2+TZvtBhtbOz5kTU7mUX08uYo8KcQE+n3PYP0ipo
         7Br53XbhuPZdeI9UnkPHNiV9Ps3339nxff+0wzFDHqVAhpcQE1Z1dIosPhb9ZOklIYeO
         pJIw8F9rKl8BtyEhDsedpaP8D+4BAgT35qIgc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=K9B9P0+St5tcD8tDs4ojdbLkynS8OVWLONoQFj5AB/YwBMSVsZcEQx/ArFc5GYqkqu
         tfH4e8SqRMdIjsjAL0ihMYQ5Hj4efgx/qh+VPbCF0G6PSP6SC7PvurFdpkai+3K2TUbs
         NhC7QGCegWyG4YzTSm3wbU5QQuCKd5NW1VsF4=
Received: by 10.100.152.5 with SMTP id z5mr552324and.100.1216907817961;
        Thu, 24 Jul 2008 06:56:57 -0700 (PDT)
Received: by 10.100.43.19 with HTTP; Thu, 24 Jul 2008 06:56:57 -0700 (PDT)
Message-ID: <2d460de70807240656k538326f2k2925e06f7098da38@mail.gmail.com>
Date: Thu, 24 Jul 2008 15:56:57 +0200
From: "Richard Hartmann" <richih.mailinglist@gmail.com>
To: "Peter Stephenson" <pws@csr.com>
Subject: Re: A scheme to manage several ZSH config file collections?
Cc: "Zsh users list" <zsh-users@sunsite.dk>
In-Reply-To: <200807241205.m6OC5ExC014430@news01.csr.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2d460de70807240448v2d77b44dr5b25580e7a39f51b@mail.gmail.com>
	 <200807241205.m6OC5ExC014430@news01.csr.com>
X-Virus-Scanned: ClamAV 0.92.1/7810/Thu Jul 24 12:54:32 2008 on bifrost
X-Virus-Status: Clean

On Thu, Jul 24, 2008 at 14:05, Peter Stephenson <pws@csr.com> wrote:

> I don't know enough about this set-up to be able to answer this properly.
> I presume the system is strictly booting and configuring from CD only,
> so every time you boot you get to pick choices from scratch (i.e. every
> time it looks like the user has been freshly created), however I don't
> know how things are stored once the system is running.

In most cases, it is, in fact, a 'blank' CD without any volatile data. There
are ways to install grml as well as ways to keep a persistant overlay
and/or home directory on usb sticks, hdds and the likes, as well.


> You later refer to "for the first time"... I presume you mean that
> although the stuff needs doing each time you boot from the CD, later
> instances of the shell will pick up the same settings?

Yes. The session on tty1 already does display a small 'how to get
started, would you like to set up some stuff' menu which could be
expanded accordingly.
The shells on the other ttys should wait for this decission to be
made. Alternatively, they could time out and load a default or wait
until said decission is made or a key is pressed in which case they
would load the default config.


>  Do you have a
> writeable home area for the user in which .zshrc files can be copied for
> this?  In that case, the zsh/newuser module added to the main line (and
> in recent 4.3 releases) should be something like what you want, since it
> runs if there are no existing user startup files.  You may well want to
> adapt the zsh-newuser-install function to your own ends: you can simply
> write a drop-in replacement for this without altering the core of the
> system---it's been designed with this in mind.  You can simply get
> zsh-newuser-install to write a .zshrc that sources the appropriate
> selected set of files, or copy in as much or as little code and
> comments as you want.  Then the user can just edit the .zshrc.

Yes, data storage is not a problem. Depending on the end-user setup,
that would be persistant across sessions or not, but that could be
handled easily, I guess. I very much like the idea of replacing
zsh-newuser-install!
Other than sending a HUP/USR1/USR2 and trapping it in all other
zsh-newuser-install, are there any other mechnanisms that would
enable the other instances to know that a configuration decission
has been made?


> Presumably there's somewhere to save this stuff, in that case you should
> be able to use this system just by setting ZDOTDIR appropriately, since
> zsh/newuser will respect this.

Sounds like a neat solution indeed. Yet another reason to love ZSH,
I guess :)


Thanks,
Richard


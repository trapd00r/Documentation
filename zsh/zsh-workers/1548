From schaefer@candle.brasslantern.com Sun Jul  7 16:11:58 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id QAA24550 for <mason@werple.mira.net.au>; Sun, 7 Jul 1996 16:11:56 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id CAA22323; Sun, 7 Jul 1996 02:07:23 -0400 (EDT)
Resent-Date: Sun, 7 Jul 1996 02:07:23 -0400 (EDT)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <960706230814.ZM2227@candle.brasslantern.com>
Date: Sat, 6 Jul 1996 23:08:12 -0700
In-Reply-To: Huy Le <huyle@chop.ugcs.caltech.edu>
        "Remaining zsh3.0-pre2 bugs" (Jul  6,  3:59pm)
References: <199607062259.PAA11588@envy.ugcs.caltech.edu>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.702 02jul96)
To: Huy Le <huyle@chop.ugcs.caltech.edu>, zsh-workers@math.gatech.edu
Subject: Re: Remaining zsh3.0-pre2 bugs
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"CZkoH2.0.gS5.QGrtn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1548
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 915
Status: OR

On Jul 6,  3:59pm, Huy Le wrote:
} Subject: Remaining zsh3.0-pre2 bugs
}
} 4. vi-compatibility ZLE bug
} In vi-mode, when hitting <u> for undo, the cursor does not end up
} where it would in vi.

I think this has to do with the very last line of undo() in zle_misc.c:

    cs = ue->cs;

Unless I'm mistaken, this resets the cursor position to where it was
before the undo.  Vi doesn't act that way.  However, there doesn't
seem to be any way to tell whether undo() was called from emacs-mode
"undo" or from vi-mode "vi-undo-change".  Probably the right thing is
to skip that assignment when called as vi-undo-change, but I'm not
sure that's quite right either.

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern

New male in /home/schaefer:
>N  2 Justin William Schaefer  Sat May 11 03:43  53/4040  "Happy Birthday"



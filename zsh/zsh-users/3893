From zsh-users-return-3893-mason-zsh=primenet.com.au@sunsite.dk Tue May 22 15:11:35 2001
Return-Path: <zsh-users-return-3893-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4520 invoked from network); 22 May 2001 15:11:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 May 2001 15:11:34 -0000
Received: (qmail 9390 invoked by alias); 22 May 2001 15:11:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3893
Received: (qmail 9374 invoked from network); 22 May 2001 15:11:13 -0000
Date: Tue, 22 May 2001 11:11:11 -0400
From: Jason Price <jprice@cyberbuzz.gatech.edu>
To: zsh-users@sunsite.dk
Cc: Zsh users list <zsh-users@sunsite.dk>
Subject: Re: 4.0.1-pre-5 (solaris issues)
Message-ID: <20010522111111.A11800@oobleck.gatech.edu>
References: <Tc0a88d0153ac729d36@mailsweeper01.cambridgesiliconradio.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1us
In-Reply-To: <Tc0a88d0153ac729d36@mailsweeper01.cambridgesiliconradio.com>; from pws@csr.com on Tue, May 22, 2001 at 10:23:42AM +0100

Some solaris issues still seem to linger around in pre-5.

In Solaris 8.  This is from part of 'make test' with a strait './configure ; 
make':

./A04redirect.ztst: starting.
*** /tmp/zsh.ztst.out.10981     Tue May 22 10:41:37 2001
--- /tmp/zsh.ztst.tout.10981    Tue May 22 10:41:37 2001
***************
*** 1,3 ****
  out1 out2
! out1: All files
! out2: All files
--- 1,3 ----
  out1 out2
! out1: 
! out2: 
Test ./A04redirect.ztst failed: output differs from expected as shown above 
for:
  print *
  print "out1: $(<out1)\nout2: $(<out2)"
Was testing: read multio with globbing

And later in make test:

./V01zmodload.ztst: starting.
Segmentation Fault

------------------------------------------------------------------------------

In Solaris 7.  This is also from 'make test' with './configure ; make':

./V01zmodload.ztst: starting.
Segmentation Fault

------------------------------------------------------------------------------

And in solaris 2.6, we've got lots of issues.  First and formost, it won't
compile out of the box.  When it does, you get:

gcc -c -I. -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -Wall 
-Wno-implicit -Wmissing-prototypes -O2  -o exec.o exec.c
In file included from /usr/include/sys/wait.h:24,
                 from system.h:243,
                 from zsh.mdh:15,
                 from exec.c:30:
/usr/include/sys/resource.h:148: warning: `struct rlimit64' declared inside 
parameter list
/usr/include/sys/resource.h:148: warning: its scope is only this definition 
or declaration,
/usr/include/sys/resource.h:148: warning: which is probably not what you
want.
/usr/include/sys/resource.h:149: warning: `struct rlimit64' declared inside 
parameter list
exec.c: In function `zsetlimit':
exec.c:179: invalid use of undefined type `struct rlimit64'
exec.c:179: invalid use of undefined type `struct rlimit64'
exec.c:180: invalid use of undefined type `struct rlimit64'
exec.c:180: invalid use of undefined type `struct rlimit64'
exec.c:181: arithmetic on pointer to an incomplete type
exec.c:181: warning: passing arg 2 of `setrlimit64' from incompatible
pointer type
exec.c:186: invalid use of undefined type `struct rlimit64'
exec.c:186: invalid use of undefined type `struct rlimit64'
exec.c: At top level:
exec.c:173: storage size of `current_limits' isn't known
exec.c:173: storage size of `limits' isn't known
make[2]: *** [exec.o] Error 1
make[2]: Leaving directory `/export/home/jprice/programs/zsh/zsh-lfs/Src'
make[1]: *** [modobjs] Error 2
make[1]: Leaving directory `/export/home/jprice/programs/zsh/zsh-lfs/Src'
make: *** [all] Error 1


and there are a fair number of other warnings in the make process. I can
send it along if needed.

Also, in solaris 2.6, if you do a './configure --disable-lfs ; make ; make
test', you get:

./V01zmodload.ztst: starting.
Segmentation Fault

I can give any more details that people may need/want.  Let me know.

Jason

-- 
"Friendship is the bridge between lonely and loved, between a glance and a
gaze. It stretches from the fog into sunshine, hopelessness into faith, 
between despair and joy. It crosses the chasm from hell and to heaven, from 
God to man, and from you to me." --Unknown   Jason Price  jprice@gatech.edu


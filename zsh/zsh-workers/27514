From zsh-workers-return-27514-mason-zsh=primenet.com.au@zsh.org Mon Dec 14 15:51:21 2009
Return-Path: <zsh-workers-return-27514-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7890 invoked by alias); 14 Dec 2009 15:51:21 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27514
Received: (qmail 24552 invoked from network); 14 Dec 2009 15:51:19 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <091214075055.ZM8191@torch.brasslantern.com>
Date: Mon, 14 Dec 2009 07:50:55 -0800
In-reply-to: <200912141342.nBEDg23i004301@news01.csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
 "Re: [PATCH] run-help: ugly workaround for run-help-$X with alias for $X" (Dec
 14,  1:42pm)
References: <20091214114004.GA31015@alea.gnuu.de>
	<200912141342.nBEDg23i004301@news01.csr.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@zsh.org
Subject: Re: [PATCH] run-help: ugly workaround for run-help-$X with alias for $X
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Dec 14,  1:42pm, Peter Stephenson wrote:
} Subject: Re: [PATCH] run-help: ugly workaround for run-help-$X with alias 
}
} =?iso-8859-1?Q?J=F6rg?= Sommer wrote:
} > Why do you need the unset here?
} 
} It's the same "unset" that was in the original, just moved to a
} position where it's guaranteed always to be executed.

Aside:  I can't find the "var=value command ..." syntax anywhere in
the zsh manual.  I was sure there was some mention of it, but it seems
to be in the category of "things all shells do" that zsh's manual does
not bother to reiterate.

That unset is probably there because older versions of zsh had some
bugs in the implementation of "var=value command ..." particularly in
the case where "command" is a function or builtin.  This stemmed from
zsh's efforts to avoid forking when no external program was involved.

(I have the nagging feeling there are still some cases where the
parameter will intentionally remain set, but I can't recall what.)

However, the versions of zsh that have that problem will choke on the
"always" syntax, so there's no backwards compatibility benefit here.


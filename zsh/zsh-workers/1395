From pws@ifh.de Fri Jun 21 19:22:13 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id TAA15456 for <mason@werple.mira.net.au>; Fri, 21 Jun 1996 19:22:11 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id FAA26467; Fri, 21 Jun 1996 05:01:05 -0400 (EDT)
Resent-Date: Fri, 21 Jun 1996 05:01:05 -0400 (EDT)
Message-Id: <199606210900.LAA17786@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: Runaway Shell (bug>) 
In-reply-to: "gene@bear.com"'s message of "Thu, 20 Jun 1996 10:41:35 MET."
	                  <9606201441.AA28450@bear.com> --------
Date: Fri, 21 Jun 1996 11:00:30 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"kNoPC3.0.TT6.GJcon"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1395
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1087
Status: OR

gene@bear.com wrote:
> Hi:
> 
>    I have the following in beta 21 on hpux 2/700 9.01. If I (mis)type the 
> following silly line, I get an untinterruptable runway shell.
> 
> ps -eaf | gre[ foo

Nasty.  With NO_BAD_PATTERN, exec.c around line 1177 is repeatedly
globbing the same line because it is always returned containing
tokens.  Any problem with the having NOBADPATTERN untokenize at that
point?  As globbing is the last operation, I can't see any.

The non-interruptibility is a different bug, but that's now traditional.

*** Src/glob.c.bad	Tue Jun 18 20:09:22 1996
--- Src/glob.c	Fri Jun 21 10:54:22 1996
***************
*** 516,521 ****
--- 516,522 ----
      q = parsepat(str);
      if (!q || errflag) {	/* if parsing failed */
  	if (isset(NOBADPATTERN)) {
+ 	    untokenize(ostr);
  	    insertlinknode(list, node, ostr);
  	    return;
  	}

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.



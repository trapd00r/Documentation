From zsh-workers-return-25567-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 31 13:21:40 2008
Return-Path: <zsh-workers-return-25567-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22699 invoked from network); 31 Aug 2008 13:21:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 31 Aug 2008 13:21:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 60392 invoked from network); 31 Aug 2008 13:21:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 31 Aug 2008 13:21:25 -0000
Received: (qmail 14849 invoked by alias); 31 Aug 2008 13:21:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25567
Received: (qmail 14830 invoked from network); 31 Aug 2008 13:21:16 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 31 Aug 2008 13:21:16 -0000
Received: from wa-out-1112.google.com (wa-out-1112.google.com [209.85.146.183])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 130AC801E2B4
	for <zsh-workers@sunsite.dk>; Sun, 31 Aug 2008 15:21:11 +0200 (CEST)
Received: by wa-out-1112.google.com with SMTP id v27so1083509wah.21
        for <zsh-workers@sunsite.dk>; Sun, 31 Aug 2008 06:21:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zfBl3n1idIt5EvKzBspobovEWbK0tWEM1ZZ1myb3l7Y=;
        b=bOL3ElbaJs7EBQqoIkRoDDGpzOTXKgVNE19qsHTVG0yFoLPGgEB86rtgAycs4HbEiL
         8nwDWAp0ExvQn1Aet+kkpGR6KYnAnUm5AVV10tc6sJMicEgTCFORB6Cl8T81wkBe19B4
         ALphCK8xzsCB5LyCAcWPcUQnjoOC5hBpqHuyY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=KRSJjex76WU+mkmUKPlMhgC4Y7lMUhQ6skJ+CYJwAEH/GdVy1jjrJt3ptD6w/u3EL1
         EO5RnuQDoLHDHL7S/Neat68vNJI5dZymdExcut6ucR5oIHlSuifsP1XMuuwSt2svT7nB
         rpb1Yj6ZaCjKRHBOymcY1yONn4V/T11cJKhwE=
Received: by 10.114.73.1 with SMTP id v1mr4529937waa.16.1220188870213;
        Sun, 31 Aug 2008 06:21:10 -0700 (PDT)
Received: by 10.114.159.2 with HTTP; Sun, 31 Aug 2008 06:21:10 -0700 (PDT)
Message-ID: <6cd6de210808310621j6faa90d9yfc3c5d21b0b70dca@mail.gmail.com>
Date: Sun, 31 Aug 2008 09:21:10 -0400
From: "Rocky Bernstein" <rocky.bernstein@gmail.com>
To: "Dan Nelson" <dnelson@allantgroup.com>
Subject: Re: Numeric version of ZSH_VERSION?
Cc: "Zsh hackers list" <zsh-workers@sunsite.dk>
In-Reply-To: <20080831031632.GI26653@dan.emsphone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6cd6de210808301954x6fd72987i4bb0ea3665951de1@mail.gmail.com>
	 <20080831031632.GI26653@dan.emsphone.com>
X-Virus-Scanned: ClamAV 0.92.1/8122/Sun Aug 31 03:04:56 2008 on bifrost
X-Virus-Status: Clean

Ok -  Great. I'll use this.

By the way the -z option listed as an option under autoload is not
documented there. However this is written:
              Equivalent to "functions -u", with the exception of -X/+X and  -w.

which is a bit compressed in meaning. I gather it means two different
things. First that it does the same thing as "functions -u"  and
therefore second that it takes the same options as that, except those
mentioned. So third, you should look at "functions" to find out the
meaning of the unmentioned options.

Ok. So we then go to "functions" to try to figure out what "-z" does.
And along the way we've now picked up another option "-u" that we need
to understand.  Both "-z" and "-u" are listed again but not documented
in "functions" either.  However we get

    Equivalent to "typeset -f" with the exception ...

Okay so now we have to chase down a 3rd reference and have picked up
yet a third option to now understand: "-f".

typeset has a grab bag of options that have nothing to do with either
"functions -u" or "autoload". In fact the "-u" means something
different when combined with "-f" than it does when that's not there.


On Sat, Aug 30, 2008 at 11:16 PM, Dan Nelson <dnelson@allantgroup.com> wrote:
> In the last episode (Aug 30), Rocky Bernstein said:
>> It'd be nice to have a numeric version of ZSH_VERSION which is just a
>> monotonically increasing number. It would make testing for features in
>> (possibly open-ended) ranges easy.
>
> The Misc/is-at-least function should do what you need:
>
> OTHER FUNCTIONS
>  Descriptions
>  is-at-least needed [ present ]
>    Perform a greater-than-or-equal-to  comparison  of  two  strings
>    having  the format of a zsh version number; that is, a string of
>    numbers and text with segments separated by dots or dashes.   If
>    the  present string is not provided, $ZSH_VERSION is used.  Seg-
>    ments are paired left-to-right in the two strings  with  leading
>    non-number parts ignored.  If one string has fewer segments than
>    the other, the missing segments are considered zero.
>
>    This is useful in startup files to set options and  other  state
>    that are not available in all versions of zsh.
>
>      is-at-least 3.1.6-15 && setopt NO_GLOBAL_RCS
>      is-at-least 3.1.0 && setopt HIST_REDUCE_BLANKS
>      is-at-least 2.6-17 || print "You can't use is-at-least here."
>
>
> --
>        Dan Nelson
>        dnelson@allantgroup.com
>


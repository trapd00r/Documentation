From zsh-users-return-3681-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 17 21:35:39 2001
Return-Path: <zsh-users-return-3681-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23823 invoked from network); 17 Mar 2001 21:35:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Mar 2001 21:35:39 -0000
Received: (qmail 1197 invoked by alias); 17 Mar 2001 21:35:25 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3681
Received: (qmail 1185 invoked from network); 17 Mar 2001 21:35:24 -0000
From: Bruce Stephens <bruce@cenderis.demon.co.uk>
To: zsh-users@sunsite.dk
Subject: Re: `make' completion in zsh-3.1.9
References: <3AB37F1C.FF6C67F6@uow.edu.au>
	<1010317165153.ZM6844@candle.brasslantern.com>
	<874rws6zmn.fsf@cenderis.demon.co.uk>
	<1010317210252.ZM9495@candle.brasslantern.com>
In-Reply-To: <1010317210252.ZM9495@candle.brasslantern.com> ("Bart Schaefer"'s message of "Sat, 17 Mar 2001 21:02:52 +0000")
Message-ID: <87pufg5bah.fsf@cenderis.demon.co.uk>
User-Agent: Gnus/5.090001 (Oort Gnus v0.01) XEmacs/21.2 (Thelxepeia (GTK Inside))
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: 17 Mar 2001 21:35:22 +0000
Lines: 45

"Bart Schaefer" <schaefer@candle.brasslantern.com> writes:

> On Mar 17,  6:04pm, Bruce Stephens wrote:
> } Subject: Re: `make' completion in zsh-3.1.9
> }
> } I'm guessing there's some difference in make behaviour.  Presumably
> } this is relevant:
> } 
> } # make -nsp --no-print-directory -f Makefile .PHONY | wc -l
> } 1494859
> 
> Yow.
> 
> You don't have a MAKEFLAGS environment variable set, do you?

No.

> You might try capturing a bit of the "make -nsp ..." output to see
> if it really is honoring the -n (do not execute) and -s (don't print
> commands) options.

I think it's honouring the -n, but possibly not the -s.  I can see
lots of commands that I'm guessing it would do without the -n.

> However, it's possible that the Linux kernel build process has been
> restructured in 2.4 in such a way that it's extremely expensive to run
> make without actually building anything.  I don't have the 2.4 kernel
> source downloaded here at home ...

Yes, I think that's what's happening: one or other of the Makefiles is
overriding something, somehow.  The same happens with Kaffe
(<http://www.kaffe.org/>).  I get over 2M lines with that.

[...]

>     zstyle ':completion:*:make:*:version' command :
> 
> which will prevent completion from discovering that you have GNU
> make; which in turn will cause it to parse the Makefile directly.
> You lose completion of any targets that are availble only via
> recursive makes, and it'll miss GNUmakefile files, but it should run
> a lot faster.

I guess.  make sucks---it really ought to be easy, somehow, to get at
a plausible list of targets.


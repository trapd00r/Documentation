From zsh-workers-return-26219-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 31 18:47:28 2008
Return-Path: <zsh-workers-return-26219-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12939 invoked from network); 31 Dec 2008 18:47:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 31 Dec 2008 18:47:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 55844 invoked from network); 31 Dec 2008 18:47:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 31 Dec 2008 18:47:10 -0000
Received: (qmail 13730 invoked by alias); 31 Dec 2008 18:47:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26219
Received: (qmail 13721 invoked from network); 31 Dec 2008 18:47:05 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 31 Dec 2008 18:47:05 -0000
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by bifrost.dotsrc.org (Postfix) with ESMTP id BB221808A1E6
	for <zsh-workers@sunsite.dk>; Wed, 31 Dec 2008 19:47:00 +0100 (CET)
Received: from torch.brasslantern.com ([96.238.220.215])
 by vms173005.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0KCR00AFZ862XSE5@vms173005.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Wed, 31 Dec 2008 12:46:55 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id mBVIknmZ022714	for
 <zsh-workers@sunsite.dk>; Wed, 31 Dec 2008 10:46:50 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id mBVIknTL022713	for zsh-workers@sunsite.dk; Wed,
 31 Dec 2008 10:46:49 -0800
Date: Wed, 31 Dec 2008 10:46:49 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Don't suggest completion functions when 'correcting' on
 non-existant commands
In-reply-to: <2d460de70812310948s2ecf04e3gb13ac58311ead2f@mail.gmail.com>
In-reply-to: <20081231181247.GE4052@fsst.voodoo.lan>
To: "Zsh Workers" <zsh-workers@sunsite.dk>
Message-id: <081231104649.ZM22712@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <2d460de70812310948s2ecf04e3gb13ac58311ead2f@mail.gmail.com>
	<20081231181247.GE4052@fsst.voodoo.lan>
Comments: In reply to "Richard Hartmann" <richih.mailinglist@gmail.com>
 "Don't suggest completion functions when 'correcting' on non-existant
 commands" (Dec 31,  6:48pm)
Comments: In reply to Frank Terbeck <ft@bewatermyfriend.org>
 "Re: Don't suggest completion functions when 'correcting' on non-existant
 commands" (Dec 31,  7:12pm)
X-Virus-Scanned: ClamAV 0.92.1/8819/Wed Dec 31 15:28:33 2008 on bifrost
X-Virus-Status: Clean

[Removed debian bugs from recipients]

On Dec 31,  6:48pm, Richard Hartmann wrote:
}
} richih@roadwarrior ~ % figlet
} zsh: correct 'figlet' to '_figlet'? [N/y/a/e]
} 
} I don't know enough about zsh internas to guesstimate if this is
} an easy fix or not. Two possible solutions which come to mind:
} 
} 1) Make zsh aware of what functions came in through $FPATH
} and which came in through $PATH

No, that doesn't make sense.  Functions never "come in" through $PATH,
only external commands do; and of functions only autoloaded ones are
affected by $FPATH.

A closer approximation to what you want would be for correction to
filter out names that are bound to widgets, but even that doesn't go
far enough; it'd also have to filter out names that begin with an
underscore.  The reason for the leading-underscore convention is so
that things like that would be possible, but of course it is only a
convention.

Filtering out widgets is problematic because correction is a part of
the base shell and ZLE is added as a module.

} 2) Make the completion function do the filtering outlined in 1)

That doesn't work either because correction and completion have almost
nothing to do with one another, internally.  Completion is long since
over before correction kicks in.

What you really want is something like $fignore applied to correction.

On Dec 31,  7:12pm, Frank Terbeck wrote:
} 
} Here's a possible solution for this:
} <http://bewatermyfriend.org/posts/2007/12-26.11-50-38-tooltime.html>

That's not really a solution; it just replaces the correction prompt
with a different prompt.  It might be interesting for other reasons.


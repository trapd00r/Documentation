From carlos@riglos.fisica.ufpr.br Thu Jun  6 03:42:23 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id DAA04896 for <mason@werple.mira.net.au>; Thu, 6 Jun 1996 03:42:20 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id NAA00765; Wed, 5 Jun 1996 13:32:52 -0400 (EDT)
Resent-Date: Wed, 5 Jun 1996 13:32:52 -0400 (EDT)
Message-Id: <m0uRMR2-000031C@riglos.fisica.ufpr.br>
Date: Wed, 5 Jun 96 14:31 EST
From: Carlos Carvalho <carlos@riglos.fisica.ufpr.br>
To: schaefer@nbn.com
Cc: zsh-workers@math.gatech.edu
Subject: Re: beta 19 cannot run this script
In-Reply-To: <960605090343.ZM5719@candle.brasslantern.com>
References: <m0uRK3H-00001zC@riglos.fisica.ufpr.br>
	<carlos@riglos.fisica.ufpr.br>
	<960605090343.ZM5719@candle.brasslantern.com>
Resent-Message-ID: <"WvwOW2.0.tB.4JSjn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1265
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1108
Status: OR

Bart Schaefer (schaefer@candle.brasslantern.com) wrote on 5 June 1996 09:03:
 >On Jun 5, 11:59am, Carlos Carvalho wrote:
 >} Subject: beta 19 cannot run this script
 >}
 >} I had to link /bin/sh to zsh in order to make automatic tex font
 >} generation work. However, zsh (called as sh), doesn't run this script:
 >
 >This seems to be the problem:
 >
 >======
 >bash:
 >
 >$ [ ! ] && echo OK
 >OK
 >======
 >True Bourne shell:
 >
 >$ [ ! ] && echo OK
 >[: argument expected
 >======
 >zsh:
 >
 >% [ ! ] && echo OK
 >[: argument expected
 >======
 >
 >So I think zsh is OK in this case.

Hmmm...

 >Here's the culprit in the script:
 >
 >	if [ ! $APS_BASEDIR ]; then
 >
 >This isn't a very portable script in the first place.  A better test for
 >a variable being unset would be:
 >
 >
 >	if [ -z "$APS_BASEDIR" ]; then

I tried this and it doesn't work :-(

Trying with this small version:

#! /bin/sh
if [ -z $APS_BASEDIR ]; then
	APS_BASEDIR=`grep APS_BASEDIR /etc/printcap | cut -d ':' -f 2`
	export APS_BASEDIR
fi

I get

./foo: [: argument expected [2]

So there seems to be something wrong...

Carlos



From zsh-users-return-4621-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 24 07:18:11 2002
Return-Path: <zsh-users-return-4621-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1520 invoked from network); 24 Jan 2002 07:18:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 24 Jan 2002 07:18:10 -0000
Received: (qmail 2072 invoked by alias); 24 Jan 2002 07:17:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4621
Received: (qmail 2060 invoked from network); 24 Jan 2002 07:17:53 -0000
Subject: Re: "converting"
From: Joakim Ryden <jryden@forumone.com>
To: Will Yardley <william@hq.newdream.net>
Cc: Zsh-users List <zsh-users@sunsite.dk>
In-Reply-To: <20020124070047.GZ30803@hq.newdream.net>
References: <1011854953.21262.33.camel@jo> 
	<20020124070047.GZ30803@hq.newdream.net>
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature";
	boundary="=-qS/xoeW7lq0NZpkcF6dG"
X-Mailer: Evolution/1.0.1 
Date: 23 Jan 2002 23:17:15 -0800
Message-Id: <1011856636.20375.48.camel@jo>
Mime-Version: 1.0
X-Virus-Scanned: by AMaViS snapshot-20010714


--=-qS/xoeW7lq0NZpkcF6dG
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

On Wed, 2002-01-23 at 23:00, Will Yardley wrote:
> Joakim Ryden wrote:
> >=20
> > i found a neat looking prompt written for bash that i'd like to use wit=
h
> > zsh. the whole thing looks like:
> >=20
> > TOPBAR=3D"$SP$MT$CL$CR User: $CB\u$NC$CR  Host: $CB\h$NC$CR Time:
> > $CB\t$NC$RP"
> > PS1=3D"\n$CW[$CB\w$CW]$NC$TOPBAR"
> >=20
> > i'm not really sure at all where to start with this, the only thing i
> > would really know how to do is "translate" the "\u,\h,\w" to something
> > zsh understands. can someone point me to a good place for starting to
> > "convert" this?
>=20
> hrmm perhaps TFM?  search for 'PROMPT EXPANSION' in the zshall man page.
>=20
>        %n     $USERNAME.
>        %M     The full machine hostname.
>        %m     The  hostname  up to the first `.'.  An integer may
>               follow the `%' to specify how  many  components  of
>               the hostname are desired.  With a negative integer,
>               trailing components of the hostname are shown.

right, i just said these were about the only things i knew how to
"translate" from the prompt above.

ok, let's try the question again... the problem with the above prompt
(assuming you change the \w etc to %~ or whatever) is this:

.zshrc:13: bad math expression: operand expected at `\[\033[0;1...'

i'm not sure whether this is because i have a certain combination of
setopt's or am lacking some setopt's[1] or the control codes need to be
expressed differently etc.

also, the prompt is neat but i'm not about to read TWFM to figure out
what i need to do to get it to work in zsh. :)

<SNIP>

> also, you don't need to do as much fancy stuff to put stuff in the xterm
> titlebar.

the above prompt doesn't put anything in the xterm titlebar. it keeps a
"floating" bar with username/host/time in the terminal window. fire up
bash and try it. ;)

--Jo

[1] these are the options i have set:

autocd
noautoparamslash
autopushd
autoresume
nobgnice
cdablevars
noclobber
correct
correctall
globdots
histignoredups
nohup
interactive
interactivecomments
login
longlistjobs
mailwarning
markdirs
monitor
printexitvalue
promptsubst
pushdminus
pushdsilent
pushdtohome
rcquotes
recexact
shinstdin
zle

--=-qS/xoeW7lq0NZpkcF6dG
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQA8T7T7Mf4iPcNp4x8RAiz8AJsHM6+l6E9bhq3EN+7c30Odx613EACfSbfd
Kt2kXTdLuwHh2Y+T4Vxt+Dg=
=/ZDi
-----END PGP SIGNATURE-----

--=-qS/xoeW7lq0NZpkcF6dG--


From zsh-workers-return-19552-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 08 10:58:12 2004
Return-Path: <zsh-workers-return-19552-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21155 invoked from network); 8 Mar 2004 10:58:11 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 8 Mar 2004 10:58:11 -0000
Received: (qmail 18495 invoked by alias); 8 Mar 2004 10:58:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19552
Received: (qmail 18479 invoked from network); 8 Mar 2004 10:58:02 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 8 Mar 2004 10:58:01 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.189.58.19] by sunsite.dk (MessageWall 1.0.8) with SMTP; 8 Mar 2004 10:58:1 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i28Aw1v08963
	for <zsh-workers@sunsite.dk>; Mon, 8 Mar 2004 10:58:01 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T683687b133c0a88d01768@MAILSWEEPER01.csr.com>;
 Mon, 8 Mar 2004 10:57:41 +0000
Received: from csr.com ([192.168.144.127]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 8 Mar 2004 10:59:52 +0000
To: Ibraheem Umaru-Mohammed <ibraheem@umarumohammed.org>,
   zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: 4.2.0-pre-3 
In-reply-to: "Ibraheem Umaru-Mohammed"'s message of "Mon, 08 Mar 2004 09:15:04 GMT."
             <1078737304.7471.6.camel@sonic> 
Date: Mon, 08 Mar 2004 10:58:00 +0000
Message-ID: <11002.1078743480@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 08 Mar 2004 10:59:52.0062 (UTC) FILETIME=[7B5479E0:01C404FC]

Ibraheem Umaru-Mohammed wrote:
> 	/usr/vac/bin/cc -qlanglvl=ansi  -s -bM:SRE -o datetime.so
> -bI:../../Src/zsh.export -bE:datetime.export -emodentry datetime..o 
> ../../Src/modentry..o  -liconv -ldl -lcurses -ltermcap -lm  -lc 
> ld: 0711-317 ERROR: Undefined symbol: .isident
> ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
> information.

This is the feature of AIX that symbol exports and imports need to
be marked explicitly.  Most systems don't require that, so this gets
missed until someone tries to compile it on AIX.  This should fix
this one...

(I'm not sure if the dependencies of the lists of exports are correct.
You may have to remove zsh.export, for example.  I used to use AIX
but that was 4 1/2 years ago.)

Please keep going, we must be nearly there now.

Index: Src/params.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/params.c,v
retrieving revision 1.76
diff -u -r1.76 params.c
--- Src/params.c	15 Jan 2004 11:10:52 -0000	1.76
+++ Src/params.c	8 Mar 2004 10:40:07 -0000
@@ -777,7 +777,7 @@
 /* Return 1 if the string s is a valid identifier, else return 0. */
 
 /**/
-int
+mod_export int
 isident(char *s)
 {
     char *ss;

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


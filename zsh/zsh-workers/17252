From zsh-workers-return-17252-mason-zsh=primenet.com.au@sunsite.dk Wed May 29 15:04:02 2002
Return-Path: <zsh-workers-return-17252-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13722 invoked from network); 29 May 2002 15:04:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 29 May 2002 15:04:00 -0000
Received: (qmail 24495 invoked by alias); 29 May 2002 15:03:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17252
Received: (qmail 24482 invoked from network); 29 May 2002 15:03:49 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15604.60893.312758.631636@wischnow.berkom.de>
Date: Wed, 29 May 2002 17:03:57 +0200
To: zsh-workers@sunsite.dk
Subject: Re: unzip and _path_files interaction
In-Reply-To: <Pine.LNX.4.44.0205290752310.29013-100000@ns1.sodaware.com>
References: <15604.48114.57479.460088@wischnow.berkom.de>
	<Pine.LNX.4.44.0205290752310.29013-100000@ns1.sodaware.com>
X-Mailer: VM 7.03 under 21.5 (patch 5) "beets" XEmacs Lucid


Bart Schaefer wrote:

> ...
> 
> I think (z) should keep working the way it does, or at least we need
> somthing that does work the way it now does.  So for the time being I'd
> go with the second patch.

I was feeling the same way...


Bye
  Sven

Index: Completion/Unix/Type/_path_files
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Type/_path_files,v
retrieving revision 1.17
diff -u -r1.17 _path_files
--- Completion/Unix/Type/_path_files	21 May 2002 07:35:34 -0000	1.17
+++ Completion/Unix/Type/_path_files	29 May 2002 15:03:36 -0000
@@ -23,9 +23,11 @@
 (( $tmp1[(I)-[/g]*] )) && haspats=yes
 (( $tmp1[(I)-g*] )) && gopt=yes
 if (( $tmp1[(I)-/] )); then
-  pats=( '*(-/)' ${(z)${(M)tmp1:#-g*}#-g} )
+  pats="${(@)${(@M)tmp1:#-g*}#-g}"
+  pats=( '*(-/)' ${${(z):-x $pats}[2,-1]} )
 else
-  pats=( "${(@z)${(@M)tmp1:#-g*}#-g}" )
+  pats="${(@)${(@M)tmp1:#-g*}#-g}"
+  pats=( ${${(z):-x $pats}[2,-1]} )
 fi
 pats=( "${(@)pats:# #}" )
 

-- 
Sven Wischnowsky                          wischnow@berkom.de


From zsh-workers-return-25908-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 17 13:29:20 2008
Return-Path: <zsh-workers-return-25908-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26787 invoked from network); 17 Oct 2008 13:29:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Oct 2008 13:29:16 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 62218 invoked from network); 17 Oct 2008 13:28:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Oct 2008 13:28:52 -0000
Received: (qmail 8976 invoked by alias); 17 Oct 2008 13:28:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25908
Received: (qmail 2197 invoked from network); 17 Oct 2008 11:41:50 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 17 Oct 2008 11:41:50 -0000
Received: from mail.vicoop.com (mail0.vicoop.com [85.17.210.107])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 5FB6380524C0
	for <zsh-workers@sunsite.dk>; Fri, 17 Oct 2008 13:41:46 +0200 (CEST)
Received: from localhost (213-155-151-233.customer.teliacarrier.com [213.155.151.233])
	(Authenticated sender: porridge@sl.owsiany.pl)
	by mail.vicoop.com (Postfix) with ESMTP id 1C6D41E8D4
	for <zsh-workers@sunsite.dk>; Fri, 17 Oct 2008 13:34:31 +0200 (CEST)
Received: from mowsiany by localhost with local (Exim 4.67)
	(envelope-from <marcin@owsiany.pl>)
	id 1KqniX-0002QO-SO
	for zsh-workers@sunsite.dk; Fri, 17 Oct 2008 12:42:05 +0100
Date: Fri, 17 Oct 2008 12:42:05 +0100
From: Marcin Owsiany <marcin@owsiany.pl>
To: zsh-workers@sunsite.dk
Subject: ERR_EXIT and pipelines
Message-ID: <20081017114205.GA8893@beczulka>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.15+20070412 (2007-04-11)
X-Virus-Scanned: ClamAV 0.92.1/8438/Fri Oct 17 08:37:10 2008 on bifrost
X-Virus-Status: Clean

Hello,

I have recently found a problem with _bash_ that is described in the
following thread in bash-bug mailing list:
http://groups.google.com/group/gnu.bash.bug/browse_thread/thread/e37f5c7ddcc55eeb/57474f8d2f8efa59

In short, it's about the fact that either of the following lines make a
"set -e" script abort:
 true | false
 for a in 1; do false; done
but the following does not:
 true | for a in 1; do false; done

I thought that this inconsistency was a bug in bash, but as you can find
out in the thread, it is the first type of statements that behaves
incorrectly, according to bash maintainer's interpretation of SUS.

zshoptions manpage defines 'ERR_EXIT' sematics differently: more like I
would like it to work. It also works consistently in the above examples.

Since I like zsh behavior more (makes it easier to write reliable
scripts), I'm considering switching my program (cruft) to zsh. But
before I do it, can someone please confirm that what is written in the
manpage and how zsh behaves right now is indeed the intended behaviour,
and will not in forseeable future be changed to match bash's behaviour?

regards,
-- 
Marcin Owsiany <marcin@owsiany.pl>              http://marcin.owsiany.pl/
GnuPG: 1024D/60F41216  FE67 DA2D 0ACA FC5E 3F75  D6F6 3A0D 8AA0 60F4 1216
 
"Every program in development at MIT expands until it can read mail."
                                                              -- Unknown


From zsh-workers-request@euclid.skiles.gatech.edu Thu Jun 05 18:31:01 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 29895 invoked from network); 5 Jun 1997 18:30:59 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 5 Jun 1997 18:30:59 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id OAA26200; Thu, 5 Jun 1997 14:21:30 -0400 (EDT)
Resent-Date: Thu, 5 Jun 1997 14:21:30 -0400 (EDT)
From: <hzoli@VNET.IBM.COM> (Zoltan T. Hidvegi)
Message-Id: <9706051824.AA14896@belgium.fishkill.ibm.com>
Subject: Re: modules!??
In-Reply-To: <10020.199706051733@jelly.dcs.warwick.ac.uk> from Zefram at "Jun 5, 97 06:33:10 pm"
To: zsh-workers@math.gatech.edu (Zsh workers list)
Date: Thu, 5 Jun 1997 14:24:55 -0400 (EDT)
X-Mailer: ELM [version 2.4ME+ PL31H (25)]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"-r8pd2.0.JP6.gEmbp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3211
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Zefram wrote:
> >Deltochar have a similar problem, it wants to use the zmod symbol exported
> >by the zle module.  The symbols defined by a module can be discovered using
> >dlsym even on these systems, so we may find some way to overcome this
> >limitation.  I think it is possible to do that with some script-generated C
>
> How?  Would this be a case of #defining all imported symbols to
> (*symbol_table[SYMBOL_NUM]) and having the module base manage home-made
> symbol tables?  If so, what do we do about systems where there are
> several sizes of pointer?

Yes, I was thingking something like that.  I do not understand what you
mean about several sizes of pointer.  Could you give some more detail?

>
> >                 The imported function list is hard to portably generate
> >automatically,
>
> What's wrong with `nm obj.o | grep " U "` and comparing against the
> lists of exported symbols?  This could even be used to generate module
> dependencies automatically.

The nm output format varies from system to system, so it's probably hard to
make it portable.  And one should not have to have nm to compile zsh.  But
if we can automatize everything on Linux I'd be happy.

Zoltan


From hzoli@cs.elte.hu Mon Jul  1 02:27:56 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id CAA03546 for <mason@werple.mira.net.au>; Mon, 1 Jul 1996 02:27:54 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA27944; Sun, 30 Jun 1996 12:15:12 -0400 (EDT)
Resent-Date: Sun, 30 Jun 1996 12:15:12 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199606301613.SAA01458@hzoli.ppp.cs.elte.hu>
Subject: Re: bug (?) in 3.0-pre1
To: schaefer@nbn.com
Date: Sun, 30 Jun 1996 18:13:13 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <960629121357.ZM5651@candle.brasslantern.com> from Bart Schaefer at "Jun 29, 96 12:13:55 pm"
X-Mailer: ELM [version 2.4ME+ PL17 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"R21PO.0.Vq6.FWgrn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1488
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 533
Status: OR

> Seems like almost any of the MUSTUSEHEAP() functions should adjust and
> then restore the allocation strategy internally, rather than relying on
> every caller to do so ...

But usually it is a bug if the caller use permanent allocation.  In most
places zsh uses heap allocation.  It is an exception when a function uses
permanent allocation and in that case it must always be very careful.  I
know that you do not like this heap very much but I still think that it
simplifies the code and makes memory management faster.

Zoltan



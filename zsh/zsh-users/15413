From zsh-users-return-15413-mason-zsh=primenet.com.au@zsh.org Sun Sep 19 14:56:02 2010
Return-Path: <zsh-users-return-15413-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24072 invoked by alias); 19 Sep 2010 14:56:02 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15413
Received: (qmail 29975 invoked from network); 19 Sep 2010 14:55:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.212.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type;
        bh=YCg+7QBBRHpfOj2RhQYWNr0AOYNEGUH8BeMXosk+NpI=;
        b=l9P5OH2v1+JsYakDFpHiCZADMBU9ur3mGz4m1x+dlwKchMOiIcoUTqssQKW9XXQyk7
         eX/CZ6CwQfjSA17xzAgAnlJqrSrefkBDzaGxsHVr9313AMA5DNpTjBcM+Hs7fIQ3SFjg
         kvEI2MQq+ddePJuRwM/hEPYrnVzINkpCXIriU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=tWXiedDgHLIiDiQ4jKM9rXronkUZXNDbSpHpfpNLjtZ2SkBqCEVnlIwQI4X4UoDZK1
         n1C50p2IwT7WjTMZNvh7lKR1V5y8zvpRY/EOCyn+cbHqZS7mx2k5+kSmyWS25a3GjPAb
         DrRm0QyXXfx9FjNGBK8QinUUBoAmC5TGtarqY=
MIME-Version: 1.0
In-Reply-To: <AANLkTi=6=JwmvqSqdCCJ2PskGRShmD1t8AfLLFTbSWXm@mail.gmail.com>
References: <AANLkTinNJXay4pibEiQmKR4PSRcNiwCJ3w==Scc9rco0@mail.gmail.com>
	<20100913130345.GA9240@Lancelot>
	<AANLkTikq=h-awW+-HAB8-QWdg0dWTuY+uydMu-Ezmt-0@mail.gmail.com>
	<6227C736-CCD3-4E09-A922-106573F3D70D@biskalar.de>
	<AANLkTimj6n_qSd3_5Egk6RN=v47GwWBb+W3_MjWpMs4t@mail.gmail.com>
	<AANLkTi=28cEq+XhxCy7pYKtu+bmSNG3QSKMfBUckJ7Tc@mail.gmail.com>
	<20100918230945.GA4530@Lancelot>
	<AANLkTin4ufgJ-5WHPxojvuukJiksMaqywFJtU0-So1Mo@mail.gmail.com>
	<AANLkTi=H78fPNwCSnp9ZQQ901oP-Coak=odh+9kw5S+V@mail.gmail.com>
	<AANLkTi=6=JwmvqSqdCCJ2PskGRShmD1t8AfLLFTbSWXm@mail.gmail.com>
Date: Sun, 19 Sep 2010 16:55:58 +0200
Message-ID: <AANLkTinXx4m_m=db-aXo1Br0pyjXOmkBpn0rEpdm7dVt@mail.gmail.com>
Subject: Re: Dynamic colored command in zsh
From: Mikael Magnusson <mikachu@gmail.com>
To: Julien Nicoulaud <julien.nicoulaud@gmail.com>
Cc: Michel <michel.barret@gmail.com>, zsh-users@zsh.org
Content-Type: text/plain; charset=UTF-8

On 19 September 2010 16:39, Mikael Magnusson <mikachu@gmail.com> wrote:
> On 19 September 2010 13:50, Julien Nicoulaud <julien.nicoulaud@gmail.com> wrote:
>> My version merged with Roy's last one that handles inconsistent spacing in
>> the command: http://gist.github.com/586698
>>
>> Nobody found how to trigger it whenever the buffer changes ? I tried with
>> _refresh without success.
>
> I posted a crazy thing a while back, see
> http://www.zsh.org/mla/workers/2009/msg01225.html , that function is
> called every time the line is redrawn _including on cursor movement_,
> so it is probably very slow, but it should at least look correct. It
> requires patching zsh though, so it's not very portable.

I should perhaps also note that this patch breaks some things like ^r
history search in some subtle ways. (and possibly other things).

-- 
Mikael Magnusson


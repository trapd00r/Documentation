From zsh-workers-return-20386-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 19 17:48:17 2004
Return-Path: <zsh-workers-return-20386-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24679 invoked from network); 19 Sep 2004 17:48:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Sep 2004 17:48:16 -0000
Received: (qmail 53634 invoked from network); 19 Sep 2004 17:48:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Sep 2004 17:48:10 -0000
Received: (qmail 747 invoked by alias); 19 Sep 2004 17:47:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20386
Received: (qmail 731 invoked from network); 19 Sep 2004 17:47:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 19 Sep 2004 17:47:56 -0000
Received: (qmail 53343 invoked from network); 19 Sep 2004 17:47:56 -0000
Received: from cmailg4.svr.pol.co.uk (195.92.195.174)
  by a.mx.sunsite.dk with SMTP; 19 Sep 2004 17:47:55 -0000
Received: from modem-14.lemonpeel-angel.dialup.pol.co.uk ([62.137.37.14] helo=pwstephenson.fsnet.co.uk)
	by cmailg4.svr.pol.co.uk with esmtp (Exim 4.14)
	id 1C95mz-0005Ij-V3
	for zsh-workers@sunsite.dk; Sun, 19 Sep 2004 18:47:54 +0100
Received: by pwstephenson.fsnet.co.uk (Postfix, from userid 501)
	id 3557D863A; Sun, 19 Sep 2004 13:52:11 -0400 (EDT)
Received: from pwstephenson.fsnet.co.uk (localhost [127.0.0.1])
	by pwstephenson.fsnet.co.uk (Postfix) with ESMTP id 17DF18639
	for <zsh-workers@sunsite.dk>; Sun, 19 Sep 2004 18:52:11 +0100 (BST)
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: exit after 10 EOF's 
In-reply-to: <Pine.LNX.4.61.0409190935150.6971@toltec.zanshin.com> 
References: <200409131118.i8DBIM5B005245@news01.csr.com> <Pine.LNX.4.61.0409181943300.6971@toltec.zanshin.com> <D8064C1C-0A0F-11D9-A0DD-0003931123E4@cis.strath.ac.uk> <Pine.LNX.4.61.0409190935150.6971@toltec.zanshin.com>
Date: Sun, 19 Sep 2004 18:52:09 +0100
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <20040919175211.3557D863A@pwstephenson.fsnet.co.uk>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=BAYES_44,RCVD_IN_SORBS 
	autolearn=no version=2.63
X-Spam-Hits: 1.5

Bart Schaefer wrote:
> On Sun, 19 Sep 2004, Duncan Sinclair wrote:
> 
> > But in the absence of any special binding I don't see what's wrong with 
> > giving in and exiting after <some number> of the standard ignoreeof 
> > warnings have been printed.
> 
> You may have hit on the solution.  Rather than counting the number of EOF 
> key presses, count the number of warnings printed.  Thus suppressing the 
> warning is the same as suppressing the exit behavior (which is not true of 
> the code as patched by 20363).  I'd settle for that, I think.

Yes, that sounds OK.  If we could somehow make it (without too much
tortuous code) that any zle -N widget, no matter what it contains,
suppresses the warning and the EOF behaviour, I would be fairly happy.

My main remaining unhappiness is with the structure of the code, which
is why the message and the exiting are separate as patched; the same
test occurs in two places (not counting the main loop in the main
shell).  However, maybe that can be fixed, too.

pws


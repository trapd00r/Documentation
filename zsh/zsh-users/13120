From zsh-users-return-13120-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 08 18:18:16 2008
Return-Path: <zsh-users-return-13120-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19355 invoked from network); 8 Aug 2008 18:18:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Aug 2008 18:18:13 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 70345 invoked from network); 8 Aug 2008 18:17:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Aug 2008 18:17:51 -0000
Received: (qmail 29988 invoked by alias); 8 Aug 2008 18:17:12 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13120
Received: (qmail 29960 invoked from network); 8 Aug 2008 18:17:09 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 8 Aug 2008 18:17:09 -0000
Received: from asmtpout015.mac.com (asmtpout015.mac.com [17.148.16.90])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 4066380561D1
	for <zsh-users@sunsite.dk>; Fri,  8 Aug 2008 20:17:04 +0200 (CEST)
MIME-version: 1.0
Content-type: multipart/alternative;
 boundary="Boundary_(ID_lLz7e5Cy7+FXlG8qOY8EEw)"
Received: from macmini.hfriedman.rdsl.lmi.net ([66.117.137.114])
 by asmtp015.mac.com
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPA id <0K5A00DY3O3FQU60@asmtp015.mac.com> for zsh-users@sunsite.dk;
 Fri, 08 Aug 2008 11:16:30 -0700 (PDT)
Cc: Zsh Users <zsh-users@sunsite.dk>
Message-id: <19AAE650-59D0-4C1D-A26B-A7761B4C05BC@mac.com>
From: "Eric D. Friedman" <eric_friedman@mac.com>
To: "Benjamin R. Haskell" <zsh@benizi.com>
In-reply-to: <alpine.LNX.1.10.0808070509320.26055@elation.Princeton.EDU>
Subject: Re: Multi-Minute Startup?
Date: Fri, 08 Aug 2008 11:16:27 -0700
References: <c4e763ac0808062357g44f7b75amf30db12fc1535409@mail.gmail.com>
 <alpine.LNX.1.10.0808070254580.26055@elation.Princeton.EDU>
 <c4e763ac0808070020r595f3b64u38eeefbc37bc85b6@mail.gmail.com>
 <alpine.LNX.1.10.0808070327310.26055@elation.Princeton.EDU>
 <c4e763ac0808070152k2846913dn4b637fe9ea275ef2@mail.gmail.com>
 <alpine.LNX.1.10.0808070509320.26055@elation.Princeton.EDU>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Scanned: ClamAV 0.92.1/7981/Fri Aug  8 17:29:53 2008 on bifrost
X-Virus-Status: Clean


--Boundary_(ID_lLz7e5Cy7+FXlG8qOY8EEw)
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-transfer-encoding: 7BIT


On Aug 7, 2008, at 2:28 AM, Benjamin R. Haskell wrote:

>> On Thu, Aug 7, 2008 at 3:33 PM, Benjamin R. Haskell  
>> <zsh@benizi.com> wrote:
>>> Something similar came up just under a month ago on this list:
>>>
>>> ==
>>> Eric D. Friedman wrote:
>>> Subject: new-style completion and large numbers of users
>>>
>>> I'm using zsh 4.2.0 on a machine with a very large number of  
>>> users. When I
>>> first log on and do a completion of any kind, it triggers a cache- 
>>> load of
>>> all of the user names, which is quite time consuming. I'd like to  
>>> disable
>>> [...]


I was the original poster with that long completion pause and none of  
the suggested solutions actually worked out.  Following the advice in  
this thread, I ran a shell with -l -x on and captured the relavant  
bits.  The big pause occurs at the last line in the following.  Any  
ideas as to what else I could try? My goal is to not have the  
completion system show me every user in my company's home dir when I  
do the first cd<TAB>; I'd never use that completion and it takes far  
too long to get it anyway.

+_setup:69> zstyle -s :completion::complete:cd::users force-list val

+_description:20> name=expl

+_description:22> zstyle -s :completion::complete:cd::users format  
format

+_description:23> zstyle -s :completion::complete:cd::descriptions  
format format

+_description:25> zstyle -s :completion::complete:cd::users hidden  
hidden

+_description:30> zstyle -s :completion::complete:cd::users matcher  
match

+_description:32> [[ -n '' ]]

+_description:36> zstyle -s :completion::complete:cd::users sort sort

+_description:37> zstyle -s :completion::complete:cd:: sort sort

+_description:46> [[ -z '' ]]

+_description:47> zstyle -a :completion::complete:cd::users ignored- 
patterns _comp_ignore

+_description:50> zstyle -s :completion::complete:cd::users ignore- 
line hidden

+_description:61> ((  1  ))

+_description:61> opts=( -F _comp_ignore )

+_description:66> tag=users

+_description:68> shift 2

+_description:69> [[ -z user ]]

+_description:71> [[ -n '' ]]

+_description:75> [[ -n '' ]]

+_description:82> [[ -n '' ]]

+_description:85> set -A expl -F _comp_ignore -J -default-

+_description:89> ((  0  ))

+_description:90> zstyle -a :completion::complete:cd::users fake match

+_description:100> return 0

+_all_labels:39> compadd -F _comp_ignore -J -default- -qS/ -k userdirs

--Boundary_(ID_lLz7e5Cy7+FXlG8qOY8EEw)
Content-type: text/html; charset=US-ASCII
Content-transfer-encoding: quoted-printable

<html><body style=3D"word-wrap: break-word; -webkit-nbsp-mode: space; =
-webkit-line-break: after-white-space; "><br><div><div>On Aug 7, 2008, =
at 2:28 AM, Benjamin R. Haskell wrote:</div><br =
class=3D"Apple-interchange-newline"><blockquote type=3D"cite"><span =
class=3D"Apple-style-span" style=3D"border-collapse: separate; color: =
rgb(0, 0, 0); font-family: Helvetica; font-size: 12px; font-style: =
normal; font-variant: normal; font-weight: normal; letter-spacing: =
normal; line-height: normal; orphans: 2; text-align: auto; text-indent: =
0px; text-transform: none; white-space: normal; widows: 2; word-spacing: =
0px; -webkit-border-horizontal-spacing: 0px; =
-webkit-border-vertical-spacing: 0px; =
-webkit-text-decorations-in-effect: none; -webkit-text-size-adjust: =
auto; -webkit-text-stroke-width: 0; "><blockquote type=3D"cite">On Thu, =
Aug 7, 2008 at 3:33 PM, Benjamin R. Haskell &lt;<a =
href=3D"mailto:zsh@benizi.com">zsh@benizi.com</a>> =
wrote:<br></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite">Something similar came up just under a month ago on this =
list:<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote =
type=3D"cite">=3D=3D<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">Eric D. Friedman =
wrote:<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite">Subject: new-style completion and large numbers of =
users<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite"><br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">I'm using zsh 4.2.0 on a machine =
with a very large number of users. When =
I<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote =
type=3D"cite">first log on and do a completion of any kind, it triggers =
a cache-load of<br></blockquote></blockquote><blockquote =
type=3D"cite"><blockquote type=3D"cite">all of the user names, which is =
quite time consuming. I'd like to =
disable<br></blockquote></blockquote><blockquote type=3D"cite"><blockquote=
 =
type=3D"cite">[...]</blockquote></blockquote></span></blockquote></div><br=
><div><br></div><div>I was the original poster with that long completion =
pause and none of the suggested solutions actually worked out. =
&nbsp;Following the advice in this thread, I ran a shell with -l -x on =
and captured the relavant bits. &nbsp;The big pause occurs at the last =
line in the following. &nbsp;Any ideas as to what else I could try? My =
goal is to not have the completion system show me every user in my =
company's home dir when I do the first cd&lt;TAB>; I'd never use that =
completion and it takes far too long to get it =
anyway.</div><div><br></div><div><p dir=3D"LTR"><span lang=3D"en-us"><font=
 face=3D"Courier New">+_setup:69> zstyle -s =
:completion::complete:cd::users force-list val</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:20> name=3Dexpl</font></span></p><p dir=3D"LTR"><span =
lang=3D"en-us"><font face=3D"Courier New">+_description:22> zstyle -s =
:completion::complete:cd::users format format</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:23> zstyle -s :completion::complete:cd::descriptions =
format format</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:25> zstyle -s =
:completion::complete:cd::users hidden hidden</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:30> zstyle -s :completion::complete:cd::users matcher =
match</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:32> [[ -n '' ]]</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:36> zstyle -s :completion::complete:cd::users sort =
sort</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:37> zstyle -s =
:completion::complete:cd:: sort sort</font></span></p><p dir=3D"LTR"><span=
 lang=3D"en-us"><font face=3D"Courier New">+_description:46> [[ -z '' =
]]</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:47> zstyle -a =
:completion::complete:cd::users ignored-patterns =
_comp_ignore</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:50> zstyle -s =
:completion::complete:cd::users ignore-line hidden</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:61> ((&nbsp; 1&nbsp; ))</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:61> opts=3D( -F _comp_ignore )</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:66> tag=3Dusers</font></span></p><p dir=3D"LTR"><span =
lang=3D"en-us"><font face=3D"Courier New">+_description:68> shift =
2</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:69> [[ -z user ]]</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:71> [[ -n '' ]]</font></span></p><p dir=3D"LTR"><span =
lang=3D"en-us"><font face=3D"Courier New">+_description:75> [[ -n '' =
]]</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:82> [[ -n '' ]]</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:85> set -A expl -F _comp_ignore -J =
-default-</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:89> ((&nbsp; 0&nbsp; =
))</font></span></p><p dir=3D"LTR"><span lang=3D"en-us"><font =
face=3D"Courier New">+_description:90> zstyle -a =
:completion::complete:cd::users fake match</font></span></p><p =
dir=3D"LTR"><span lang=3D"en-us"><font face=3D"Courier =
New">+_description:100> return 0</font></span></p><p dir=3D"LTR"><span =
lang=3D"en-us"><font face=3D"Courier New">+_all_labels:39> compadd -F =
_comp_ignore -J -default- -qS/ -k =
userdirs</font></span></p></div></body></html>=

--Boundary_(ID_lLz7e5Cy7+FXlG8qOY8EEw)--


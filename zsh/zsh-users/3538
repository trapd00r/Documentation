From zsh-users-return-3538-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Nov 30 16:45:32 2000
Return-Path: <zsh-users-return-3538-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20152 invoked from network); 30 Nov 2000 16:45:31 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Nov 2000 16:45:31 -0000
Received: (qmail 4173 invoked by alias); 30 Nov 2000 16:45:15 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3538
Received: (qmail 4164 invoked from network); 30 Nov 2000 16:45:13 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1001130164407.ZM28394@candle.brasslantern.com>
Date: Thu, 30 Nov 2000 16:44:07 +0000
In-Reply-To: <20001130154606.B17960@vin.ens-lyon.fr>
Comments: In reply to Vincent Lefevre <vincent@vinc17.org>
        "Re: [zsh 3.1.9] history bug?" (Nov 30,  3:46pm)
References: <20001129141451.A24159@lepois.loria.fr> 
	<1001129155002.ZM26865@candle.brasslantern.com> 
	<20001130154606.B17960@vin.ens-lyon.fr>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-users@sunsite.auc.dk
Subject: Re: [zsh 3.1.9] history bug?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 30,  3:46pm, Vincent Lefevre wrote:
}
} : 975595084:0;zztest 1
} : 975595088:0;zztest 2
} : 975595113:0;zztest 1
} : 975595128:0;zztest 2
} : 975595167:0;zztest 3
} : 975595230:0;zztest 1
} : 975595181:0;zztest 2
} 
} The problem is that the above two lines are inverted.

I can't reproduce this here with 3.1.9-dev-7, but I don't see any
ChangeLog entry that would be directly related. The function that writes
the history file always opens and closes the file for each write (which
means for each line, with incappendhistory) so it shouldn't be an output
buffering problem.

One question would be, what does the history file contain after you've
given *each* of the last three commands, and *before* you close the
third terminal, in your example? With incappendhistory set, each command
should be saved as it is issued, and closing the terminal should not
change the file.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-request@math.gatech.edu Sun Aug 30 00:19:15 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7641 invoked from network); 30 Aug 1998 00:19:14 -0000
Received: from math.gatech.edu (root@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 30 Aug 1998 00:19:14 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id SAA19779;
	Sat, 29 Aug 1998 18:38:45 -0400 (EDT)
Resent-Date: Sat, 29 Aug 1998 18:34:57 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980829153654.ZM14207@candle.brasslantern.com>
Date: Sat, 29 Aug 1998 15:36:54 -0700
In-Reply-To: <19980829215951.A5782@cs.uni-magdeburg.de>
Comments: In reply to Roland Jesse <jesse@prinz-atm.CS.Uni-Magdeburg.De>
        "cdmatch installs where?" (Aug 29,  9:59pm)
References: <19980829215951.A5782@cs.uni-magdeburg.de> 
	<Pine.OSF.3.96.980829220607.31543A-100000@pol1.phy.cam.ac.uk>
In-Reply-To: <Pine.OSF.3.96.980829220607.31543A-100000@pol1.phy.cam.ac.uk>
Comments: In reply to "Owen M. Astley" <oma1000@cam.ac.uk>
        "Re: cdmatch installs where?" (Aug 29, 10:08pm)
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Roland Jesse <jesse@prinz-atm.CS.Uni-Magdeburg.De>,
        ZSH Users mailing list <zsh-users@math.gatech.edu>
Subject: Re: cdmatch installs where?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"_WeKK3.0.ip4.G88wr"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1773
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Aug 29,  9:59pm, Roland Jesse wrote:
} Subject: cdmatch installs where?
}
} compctl -g '*(-/)' cd pushd
} 
} in my $HOME/.zcompctl and as long as this is the only rule specifying the
} cd completion, everything works just fine.

With 3.1.4, it's better to use -/ instead of -g '*(/)'.

	compctl -/ cd chdir dirs pushd

(see Misc/compctl-examples).

On Aug 29, 10:08pm, Owen M. Astley wrote:
} Subject: Re: cdmatch installs where?
}
} > # Another possibility for cd/pushd is to use it in conjunction with the
} > # cdmatch function (in the Functions subdirectory of zsh distribution).
} [snip other compctl example]
} 
} cdmatch is a function, and so needs to be in the $fpath search path,
} not the $path search list.

That's correct, but that's not all ... it also needs to be registered with
autoload.  The easiest way to do this is (after setting fpath):

    autoload $^fpath/*(N:t)

} btw: fpath may be set to this by default, I can't remember.

FPATH and fpath are unset, by default.

On Aug 29, 11:49pm, Roland Jesse wrote:
} Subject: Re: cdmatch installs where?
}
} Ok, are there any reasons for keeping $path and $fpath different? Or would
} it be ok to set fpath=$path?

The fpath is where zsh searches for things to autoload.  Binary executables
are obviously not suitable for autoloading, so you'll have to selectively
autoload (rather than using a glob trick like I did above) if there are any
non-zsh-function files in $fpath.  Further, it requires care to make an
autoloadable file that can also be executed as a shell script by non-zsh
shells.

} That would help me out quite a lot because...
} 
} ... I would be able to do this in a global directory (like /usr/local/etc)
} to make the functions available for other users, too.

Why would this require $fpath = $path ?  $fpath can point to "global"
directories just as easily as $path can (set fpath in /etc/zshenv, for
example).

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


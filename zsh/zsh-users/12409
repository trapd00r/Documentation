From zsh-users-return-12409-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 10 05:47:45 2008
Return-Path: <zsh-users-return-12409-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19488 invoked from network); 10 Jan 2008 05:47:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jan 2008 05:47:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92418 invoked from network); 10 Jan 2008 05:47:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jan 2008 05:47:18 -0000
Received: (qmail 10850 invoked by alias); 10 Jan 2008 05:47:08 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12409
Received: (qmail 10833 invoked from network); 10 Jan 2008 05:47:07 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Jan 2008 05:47:07 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id AE0F68058FF2
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 06:47:04 +0100 (CET)
Received: from atom.smasher.org (atom.smasher.org [69.55.237.145])
	by bifrost.dotsrc.org (Postfix) with SMTP
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 06:47:04 +0100 (CET)
Received: (qmail 63407 invoked by uid 1000); 10 Jan 2008 04:48:42 -0000
Message-ID: <20080110044842.63406.qmail@smasher.org>
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Date: Thu, 10 Jan 2008 17:48:41 +1300 (NZDT)
From: Atom Smasher <atom@smasher.org>
In-Reply-To: <200801091239.m09CdmR9003125@news01.csr.com>
MIME-Version: 1.0
OpenPGP: id=0xB88D52E4D9F57808; algo=1 (RSA); size=4096; url=http://atom.smasher.org/pgp.txt
References: <20080109091335.49226.qmail@smasher.org> <200801091239.m09CdmR9003125@news01.csr.com>
Subject: Re: [ -f glob ]
To: zsh-users@sunsite.dk
X-POM: The Moon is Waxing Crescent (4% of Full)
X-Hashcash: 1:20:0801100448:zsh-users@sunsite.dk::F+W7Rd9cYPpRObNT:0000000000000
	0000000000000000000000005fBb
X-Virus-Scanned: ClamAV using ClamSMTP

On Wed, 9 Jan 2008, Peter Stephenson wrote:

> This is broken: -f expectes exactly one argument and you're giving it an 
> expression that expands to multiple arguments.
================

but, why would it work on bsd and not work on solaris?


> The [ ... ] form of tests isn't recommended anyway, because the 
> arguments aren't parsed properly so this sort of error will be hidden. 
> But it's not at all clear what you're trying to do.  I think you're 
> looking to see if at least one of the files in the expansion exists, in 
> which case try expanding the expression and using a null glob:
>
> files=(/usr/{share,lib,share/lib}/{zoneinfo,locale/TZ}/${TZ}(N))
> if (( ${#files} )); then
>  # stuff
> fi
================

very slightly modified, and working great...

  local tz_file
  tz_file=(/usr/{share,lib,share/lib}/{zoneinfo,locale/TZ}/${TZ}(.N))
  (( ${#tz_file} )) || export TZ=Etc/UTC

thanks!


-- 
         ...atom

  ________________________
  http://atom.smasher.org/
  762A 3B98 A3C3 96C9 C6B7 582A B88D 52E4 D9F5 7808
  -------------------------------------------------

 	"I believe that banking institutions are more dangerous
 	 to our liberties than standing armies."
 		-- Thomas Jefferson


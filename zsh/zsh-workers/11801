From zsh-workers-return-11801-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jun 07 15:40:24 2000
Return-Path: <zsh-workers-return-11801-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15979 invoked from network); 7 Jun 2000 15:40:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Jun 2000 15:40:23 -0000
Received: (qmail 22262 invoked by alias); 7 Jun 2000 15:40:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11801
Received: (qmail 22226 invoked from network); 7 Jun 2000 15:40:09 -0000
Date: Wed, 7 Jun 2000 11:38:31 -0400
From: Clint Adams <schizo@debian.org>
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Cc: zsh-workers@sunsite.auc.dk
Subject: _argument sets [was Re: a couple of completion questions]
Message-ID: <20000607113831.B10695@scowler.net>
References: <200006070850.KAA13208@beta.informatik.hu-berlin.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0.1i
In-Reply-To: <200006070850.KAA13208@beta.informatik.hu-berlin.de>; from wischnow@informatik.hu-berlin.de on Wed, Jun 07, 2000 at 10:50:45AM +0200

> I know nothing about dpkg and friends. In which way does it behave
> differently from what's documented and how do you make use of it
> (i.e.: is there something wrong? or only documented in the wrong way?
> or should have both what it's doing and what's documented?)?

Okay, first off, this is what I want.  <arg> is meant to be
-i, -A, or the long-option equivalents.

dpkg <arg> <TAB> right now completes _files -g \*.deb by default.
If I remove the -A to _arguments, it will complete $_dpkg_options.
Ideally, it should complete _files -g \*.deb, $_dpkg_options,
and $_dpkg_options_recursive, unless one of $_dpkg_options_recursive
is present, in which case it should complete directories instead of
\*.deb.  BTW, I swapped the positions of -C and -A to _arguments.

It does this, except for completing $_dpkg_options or
$_dpkg_options_recursive.  Or rather, it will for

dpkg --install --<TAB>
dpkg --install -<TAB>
dpkg --install -O<TAB>

but it won't complete for

dpkg --install --a<TAB>

So if I type dpkg --install --<TAB> I get --abort-after,
but if I type --a<TAB>, I get corrections.


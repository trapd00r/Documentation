From zsh-users-return-12504-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 30 11:56:39 2008
Return-Path: <zsh-users-return-12504-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 784 invoked from network); 30 Jan 2008 11:56:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Jan 2008 11:56:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 55864 invoked from network); 30 Jan 2008 11:56:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Jan 2008 11:56:24 -0000
Received: (qmail 1360 invoked by alias); 30 Jan 2008 11:56:16 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12504
Received: (qmail 1348 invoked from network); 30 Jan 2008 11:56:15 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 30 Jan 2008 11:56:15 -0000
Received: from rv-out-0910.google.com (rv-out-0910.google.com [209.85.198.191])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 4385480482A0
	for <zsh-users@sunsite.dk>; Wed, 30 Jan 2008 12:56:10 +0100 (CET)
Received: by rv-out-0910.google.com with SMTP id b22so152759rvf.21
        for <zsh-users@sunsite.dk>; Wed, 30 Jan 2008 03:56:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=o45VgzDtnObSA7ZppULJp5bU5w/D0xuKdxRlFvG9K3Q=;
        b=oAlbqgzoevsUUDhbVWV280RfDmaB3nPPcLv436f5tBpcpTr2Wlmx8FeCgEHfEVy8JiTYkzQ/WoedOozy7o17wPnpX+jBStmtzOBXcVKKl7r5Dx/TsveJkfEKWR0+ZhlbyuE7Me8FqzwVHFC0DlP5ngV2rYeJqLACQ3C/HeL06xo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=itGhz5iFjwag1PF8nxr7jO6A5/QcAL9YBCfAXBMztJ8vIJLxAKBcjZ9xdw2IdcDinmrNf0svpfEqO0Lj05ctdwvECYui0iYZTD3WhbJ6B3xJwZmCU3hITGRryx7p8tEs3LQo5BI8KLl8NWIn+ZuDCHVXMxfZbyQsSQaQqPq7r+c=
Received: by 10.141.49.6 with SMTP id b6mr470016rvk.89.1201694165303;
        Wed, 30 Jan 2008 03:56:05 -0800 (PST)
Received: by 10.140.127.7 with HTTP; Wed, 30 Jan 2008 03:56:05 -0800 (PST)
Message-ID: <237967ef0801300356q6fe00738ha11723966ce400fe@mail.gmail.com>
Date: Wed, 30 Jan 2008 12:56:05 +0100
From: "Mikael Magnusson" <mikachu@gmail.com>
To: zsh-users@sunsite.dk
Subject: Re: removing spaces from a file name
In-Reply-To: <237967ef0801300341u1af07b2l1a4aece5614e09dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Xns9A3574A71769Dzzappergmailcom@80.91.229.13>
	 <237967ef0801300341u1af07b2l1a4aece5614e09dd@mail.gmail.com>
X-Virus-Scanned: ClamAV 0.91.2/5605/Wed Jan 30 12:04:40 2008 on bifrost
X-Virus-Status: Clean

On 30/01/2008, Mikael Magnusson <mikachu@gmail.com> wrote:
> On 30/01/2008, zzapper <david@tvis.co.uk> wrote:
> > Hi
> > I still dislike spaces in file names:-
> >
> > mv Licence\ to\ Print\ Money.pdf !#^:gs/ //
> >
> > Is there a better/other way?
>
> You could define a function in your .zshrc (or make a script in your
> ~/bin or something) that does it for you
> function renamespaces() { for a ($@) {mv $a ${a// } } }

If you're the kind of person who likes keybinds, I guess this works
too, if you have copy-earlier-word bound somewhere too.

autoload -U modify-current-argument
function _stripspaces() { modify-current-argument '${ARG//\\ }' }
zle -N _stripspaces
bindkey 'somekey' _stripspaces
bindkey 'anotherkey' copy-earlier-word

To use it you just type mv file\ with\ spaces as usual, then press
anotherkey and somekey, and you should end up with mv file\ with\
spaces filewithspaces
an obvious weakness of this solution is it depends on the type of
quoting used in the previous word. Maybe better to change to
${(q)${(Q)ARG// }}

The only good thing about this solution is it isn't specific to moving
files, you can use it for cp, ln -s, or whatever you want. That isn't
so hard to achieve with the function now that i think about it:
function nospace() {
  cmd=$1
  shift
  for a ($@) {$cmd $a ${a// } } }
}

-- 
Mikael Magnusson


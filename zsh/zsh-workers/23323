From zsh-workers-return-23323-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 25 13:23:02 2007
Return-Path: <zsh-workers-return-23323-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19951 invoked from network); 25 Apr 2007 13:23:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Apr 2007 13:23:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 70510 invoked from network); 25 Apr 2007 13:22:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Apr 2007 13:22:54 -0000
Received: (qmail 8792 invoked by alias); 25 Apr 2007 13:22:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23323
Received: (qmail 18548 invoked from network); 24 Apr 2007 20:01:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Apr 2007 20:01:07 -0000
Received: (qmail 3176 invoked from network); 24 Apr 2007 20:01:07 -0000
Received: from mx.meyering.net (82.230.74.64)
  by a.mx.sunsite.dk with SMTP; 24 Apr 2007 20:01:04 -0000
Received: by rho.meyering.net (Acme Bit-Twister, from userid 1000)
	id BC8758374; Tue, 24 Apr 2007 22:01:02 +0200 (CEST)
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: zsh 4.3.4: bindkey -s xx 'yyy\n' no longer works (with bindkey -v)
From: Jim Meyering <jim@meyering.net>
In-Reply-To: <070424074606.ZM22655@torch.brasslantern.com> (Bart Schaefer's message of "Tue\, 24 Apr 2007 07\:46\:06 -0700")
References: <loom.20070424T152752-311@post.gmane.org>
	<070424074606.ZM22655@torch.brasslantern.com>
Date: Tue, 24 Apr 2007 22:01:02 +0200
Message-ID: <87y7kh8rup.fsf@rho.meyering.net>
Lines: 29
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Bart Schaefer <schaefer@brasslantern.com> wrote:
> On Apr 24,  1:31pm, Jim Meyering wrote:
> } But with 4.3.4, the latter bindkey seems to have no effect:
> }
> }   r$ zsh -f
> }   r% bindkey -v
> }   r% bindkey -s '^x^x' '!!\n'
> }   r% echo foo
> }   foo
> }   r% ^X^X                <<=== here I typed control-X twice,
> }                                and it merely echos them
>
> I am not able to reproduce this.  You'll have to provide some more
> information about your OS, how zsh was compiled, etc.

I first saw this problem with Debian unstable's zsh-4.3.4-2 on
x86_64-linux-gnu (amd64).  kernel: 2.6.18-4-amd64, and libc6 2.5-3.
I also built from the latest cvs sources, in that same environment,
including e.g., gcc version 4.1.2 20061115 (prerelease) (Debian 4.1.1-21).

I configured/built/installed like this:
  ./configure --prefix=/t/zz --disable-dynamic && make && make install
then ran /t/zz/bin/zsh -f.

[BTW, without --disable-dynamic, not much worked, since it couldn't
find any modules, e.g., zle]

FWIW, $KEYTIMEOUT was 40, and I tried setting it (via "export KEYTIMEOUT=N")
with values of 100 and 100000, with the same result.


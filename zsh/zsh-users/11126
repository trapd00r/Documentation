From zsh-users-return-11126-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 17 10:32:21 2007
Return-Path: <zsh-users-return-11126-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28807 invoked from network); 17 Jan 2007 10:32:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Jan 2007 10:32:16 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 65863 invoked from network); 17 Jan 2007 10:32:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Jan 2007 10:32:09 -0000
Received: (qmail 11082 invoked by alias); 17 Jan 2007 10:32:00 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11126
Received: (qmail 11071 invoked from network); 17 Jan 2007 10:31:59 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Jan 2007 10:31:59 -0000
Received: (qmail 64592 invoked from network); 17 Jan 2007 10:31:59 -0000
Received: from vms048pub.verizon.net (206.46.252.48)
  by a.mx.sunsite.dk with SMTP; 17 Jan 2007 10:31:53 -0000
Received: from torch.brasslantern.com ([71.116.79.148])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JC000EUYD93NVC2@vms048.mailsrvcs.net> for
 zsh-users@sunsite.dk; Wed, 17 Jan 2007 04:31:52 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id l0HAVpld027538	for
 <zsh-users@sunsite.dk>; Wed, 17 Jan 2007 02:31:51 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id l0HAVpMg027537	for zsh-users@sunsite.dk; Wed,
 17 Jan 2007 02:31:51 -0800
Date: Wed, 17 Jan 2007 02:31:51 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: recovering zombie process
In-reply-to: <010301c73a07$1d094f80$0901a8c0@venti>
To: <zsh-users@sunsite.dk>
Message-id: <070117023151.ZM27536@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20070116231141.GC21799@sen>
 <00d801c739d5$7ce4b890$0901a8c0@venti>
	<20070117035048.GB10583@prunille.vinc17.org>
	<010301c73a07$1d094f80$0901a8c0@venti>
Comments: In reply to "Brian K. White" <brian@aljex.com>
 "Re: recovering zombie process" (Jan 17,  2:14am)

On Jan 17,  2:14am, Brian K. White wrote:
}
} It's impractical to use on linux though because your kernel is always a 
} moving target not supported by the module.
} It's wonderful on commercial OS's where you have the same kernel as
} everyone 

There are plenty of commercial distributions of linux that deliberately
stay on relatively stable kernel versions, and free distributions that
mirror those commercial ones closely for the same reason.

} > If the parent has crashed, there's no hangup.
} 
} Then shouldn't the next higher parent do it?

No.  Why would it?  It doesn't know what those jobs are; it doesn't
even get CHLD signals about them.

HUP signals are sent by the TTY driver layer when a connection is lost,
to the process group associated with that TTY.  In the case of the kind
of terminal multiplexer he was using, there's only one job in the
process group of the user-facing TTY, and that's the multiplexer itself.
All the other shells are in process groups attached to their respective
pseudo-TTY devices, and they haven't lost those connections.

On a normal lost connection the multiplexer would get the HUP and be
responsible for propagating it.  If the multiplexer has crashed, the
chain of responsibility is broken.


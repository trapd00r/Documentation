From zsh-users-return-12856-mason-zsh=primenet.com.au@sunsite.dk Sun May 18 19:48:57 2008
Return-Path: <zsh-users-return-12856-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5035 invoked from network); 18 May 2008 19:48:45 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 May 2008 19:48:45 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 44255 invoked from network); 18 May 2008 19:48:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 May 2008 19:48:30 -0000
Received: (qmail 8912 invoked by alias); 18 May 2008 19:48:21 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12856
Received: (qmail 8899 invoked from network); 18 May 2008 19:48:20 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 May 2008 19:48:20 -0000
Received: from elation.princeton.edu (elation.Princeton.EDU [128.112.144.224])
	by bifrost.dotsrc.org (Postfix) with ESMTP id B19EB80589A4
	for <zsh-users@sunsite.dk>; Sun, 18 May 2008 21:48:16 +0200 (CEST)
Received: from [192.168.1.103] (pool-70-20-73-235.pitbpa.east.verizon.net [70.20.73.235])
	by elation.princeton.edu (Postfix) with ESMTP id 602BF1E02D698
	for <zsh-users@sunsite.dk>; Sun, 18 May 2008 15:39:52 -0400 (EDT)
Date: Sun, 18 May 2008 15:49:41 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: [ZSH] Question on filename completion
In-Reply-To: <d53cb3110805181023p1e823d8drb196db9e52f79b33@mail.gmail.com>
Message-ID: <alpine.LNX.1.10.0805181540260.9622@transport>
References: <d53cb3110805181023p1e823d8drb196db9e52f79b33@mail.gmail.com>
User-Agent: Alpine 1.10 (LNX 1032 2008-04-11)
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="655616-708719296-1211140205=:9622"
X-Virus-Scanned: ClamAV 0.91.2/7151/Sun May 18 20:36:29 2008 on bifrost
X-Virus-Status: Clean

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

--655616-708719296-1211140205=:9622
Content-Type: TEXT/PLAIN; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8BIT

On Sun, 18 May 2008, Gowtham M wrote:

> I noticed that zsh gets very slow/unresponsive when I try to
> complete a file name which resides in the following file system
> hierarchy:
> 
> /some/path/to/something/<folders>/xyz/<file to be completed>
> 
> The number of folders in <folders> is very high (of the order of
> 10 thousand). Let us assume they are numbered from 0 to 9999
> 
> When I hit tab at
> zsh> ls /some/path/to/something/761/xyz/_Â  # Tab is hit when cursor is at _
> 
> zsh spends a lot of time in stat64()ing all the directories from
> /some/path/to/something/0 to /some/path/to/something/9999
> 
> I do not understand why this is required to complete the filename
> after /some/path/to/something/761/xyz
>

I've also noticed this in a different situation. When forced to use 
Windows, I run Zsh under Cygwin. Tab-completing any filenames under the 
/cygdrive directory always causes some kind of access to what would be the 
A: drive, a floppy disk drive on that particular machine.

e.g. /cygdrive/c/Documents\ and\ Settings/_ <Tab>
causes an attempted access of /cygdrive/a, which causes the drive to check 
for a floppy disk that's never there.

I don't have access to the machine right now, but my completion settings 
aren't too tweaked. (i.e. they're close to the defaults)

Best,
Ben
--655616-708719296-1211140205=:9622--


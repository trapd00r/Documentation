From zsh-workers-return-8501-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Nov 03 03:02:41 1999
Return-Path: <zsh-workers-return-8501-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16344 invoked from network); 3 Nov 1999 03:02:40 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Nov 1999 03:02:40 -0000
Received: (qmail 26043 invoked by alias); 3 Nov 1999 03:02:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8501
Received: (qmail 26036 invoked from network); 3 Nov 1999 03:02:33 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991103030218.ZM15300@candle.brasslantern.com>
Date: Wed, 3 Nov 1999 03:02:18 +0000
In-Reply-To: <19991102151031.A5951@dman.com>
Comments: In reply to Clint Adams <schizo@debian.org>
        "PATCH: tcsetpgrp test switch" (Nov  2,  3:10pm)
References: <19991102151031.A5951@dman.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Clint Adams <schizo@debian.org>, zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: tcsetpgrp test switch
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 2,  3:10pm, Clint Adams wrote:
} Subject: PATCH: tcsetpgrp test switch
}
} This provides a configure switch to prevent the testing of tcsetpgrp.

There doesn't seem to be much point in performing this test at all when
it can't possibly succeed.  Rather than a command-line switch, why not:

Index: configure.in
===================================================================
@@ -1233,7 +1233,7 @@
 dnl if found tcsetpgrp, test to see if it actually works
 dnl for instance, BeOS R4.51 does not support it yet
 dnl -----------
-if test $ac_cv_func_tcsetpgrp=yes; then
+if test -t 0 -a $ac_cv_func_tcsetpgrp=yes; then
     AC_CACHE_CHECK(if tcsetpgrp() actually works,
     zsh_cv_sys_tcsetpgrp,
     [AC_TRY_RUN([


One reason "why not" may be that it's better to err on the side of no job
control rather than broken job control; but perhaps in that case we should
try something more clever -- such as, build in the job control functions
but default the state of the option to NO_MONITOR.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


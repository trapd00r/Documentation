From zsh-workers-return-11357-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 15 07:09:29 2000
Return-Path: <zsh-workers-return-11357-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14228 invoked from network); 15 May 2000 07:09:28 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 May 2000 07:09:28 -0000
Received: (qmail 6853 invoked by alias); 15 May 2000 07:09:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11357
Received: (qmail 6803 invoked from network); 15 May 2000 07:09:15 -0000
To: zsh-workers@sunsite.auc.dk
Subject: zparseopts causes core dump
MIME-Version: 1.0 (generated by SEMI 1.13.7 - "Awazu")
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@m17n.org>
Date: 14 May 2000 07:54:40 +0900
Message-ID: <hvobt2auklr.fsf@serein.m17n.org>
Lines: 29
User-Agent: T-gnus/6.14.1 (based on Gnus v5.8.3) (revision 16) SEMI/1.13.7 (Awazu) FLIM/1.13.2 (Kasanui) Emacs/20.6 (i686-pc-linux-gnu) MULE/4.0 (HANANOEN)

zparseopts causes core dump as follows.

Z(4):akr@serein% Src/zsh -f 
serein% set - -a
serein% zparseopts -a=xxx
zsh: segmentation fault (core dumped)  Src/zsh -f

#0  0x400adda1 in strlen () from /lib/libc.so.6
(gdb) where
#0  0x400adda1 in strlen () from /lib/libc.so.6
#1  0x80830f3 in dupstring (s=0x401a4760 "zparseopts") at mem.c:517
#2  0x4021ed22 in bin_zparseopts (nam=0x401a4760 "zparseopts", 
    args=0xbffff360, ops=0xbffff3b8 "", func=0) at zutil.c:1336
#3  0x80521c8 in execbuiltin (args=0x401a4740, bn=0x40220a7c) at builtin.c:368
#4  0x8062b30 in execcmd (state=0xbffff690, input=0, output=0, how=18, last1=2)
    at exec.c:2257
#5  0x805f66b in execpline2 (state=0xbffff690, pcode=195, how=18, input=0, 
    output=0, last1=0) at exec.c:1183
#6  0x805ebc9 in execpline (state=0xbffff690, slcode=4098, how=18, last1=0)
    at exec.c:976
#7  0x805e599 in execlist (state=0xbffff690, dont_change_job=0, exiting=0)
    at exec.c:821
#8  0x805e286 in execode (p=0x401a46f0, dont_change_job=0, exiting=0)
    at exec.c:727
#9  0x8073915 in loop (toplevel=1, justonce=0) at init.c:150
#10 0x8051752 in main (argc=2, argv=0xbffff784) at ./main.c:86
(gdb) 
-- 
Tanaka Akira


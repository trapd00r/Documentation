From zsh-workers-return-17288-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 05 08:26:08 2002
Return-Path: <zsh-workers-return-17288-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7466 invoked from network); 5 Jun 2002 08:26:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 5 Jun 2002 08:26:07 -0000
Received: (qmail 7039 invoked by alias); 5 Jun 2002 08:25:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17288
Received: (qmail 7028 invoked from network); 5 Jun 2002 08:25:55 -0000
X-Authentication-Warning: aja.vitaphone.net: ahall owned process doing -bs
Date: Wed, 5 Jun 2002 03:25:54 -0500 (CDT)
From: Aaron Hall <ahall@vitaphone.net>
To: zsh-workers@sunsite.dk
Subject: Test Y03 hangs on Mac OS X
Message-ID: <Pine.LNX.4.44.0206050310390.29593-100000@aja.vitaphone.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Hello, I'm attempting to build zsh 4.0.4 on Mac OS X 10.1.5 (newly
released; but I tried on 10.1.4 and the symptoms are the same). A Google
search brought up some list archives relating to this on other
platforms, but I couldn't find a resolution.

Compilation is fine, but test Y03 fails during 'make check'.

Are there any workarounds I can use, or is it safe to simply use zsh
anyway after this? If you need any other information, please let me
know.

Here's the output of 'make TESTNUM=Y03 check' with ZTST_verbose=2 (I saw
to do that from the archives):

   cd Test ; make check
   if test -n "gcc"; then \
     cd .. && DESTDIR= \
     make MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
   fi
   for f in ./Y03*.ztst; do \
     ../Src/zsh +Z -f ./ztst.zsh $f; \
   done
   ./Y03arguments.ztst: starting.
   ZTST_getsect: read section name: prep
   ZTST_getchunk: read code chunk:
     . $ZTST_srcdir/comptest
   ZTST_execchunk: status 0
   ZTST_getchunk: read code chunk:
     mkdir comp.tmp
     cd comp.tmp
   ZTST_execchunk: status 0
   ZTST_getchunk: read code chunk:
     comptestinit -z $ZTST_testdir/../Src/zsh &&
     {
       comptesteval 'compdef _tst tst'
       tst_arguments () { comptesteval "_tst () { _arguments ${${(@qq)*}} }" }
     }
   ZTST_execchunk: status 0
   ZTST_getchunk: read code chunk:

   ZTST_getsect: read section name: test
   ZTST_test: looking for new test
   ZTST_test: examining line:
    tst_arguments ':desc1:(arg1)'
   ZTST_getchunk: read code chunk:
    tst_arguments ':desc1:(arg1)'
    comptest $'tst \t\C-wa\t\C-war\t\C-warg\t\C-warg1\t\C-wr\t\C-wx\t \ty \t'
   ZTST_test: examining line:
   >line: {tst arg1 }{}
   ZTST_getredir: read redir for '>':
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst r}{}
   line: {tst x}{}
   line: {tst x }{}
   MESSAGE:{no more arguments}
   line: {tst x y }{}
   MESSAGE:{no more arguments}
   ZTST_test: examining line:

   Running test: one non-option argument
   ZTST_test: expecting status: 0
   Input: /tmp/zsh.ztst.in.3090, output: /tmp/zsh.ztst.out.3090, error: /tmp/zsh.ztst.terr.3090
   ZTST_execchunk: status 0
   ZTST_test: test produced standard output:
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst arg1 }{}
   line: {tst r}{}
   line: {tst x}{}
   line: {tst x }{}
   MESSAGE:{no more arguments}
   line: {tst x y }{}
   MESSAGE:{no more arguments}
   ZTST_test: and standard error:

   Test successful.
   ZTST_test: looking for new test
   ZTST_test: examining line:

   ZTST_test: examining line:
    tst_arguments ':desc1:(a b)'
   ZTST_getchunk: read code chunk:
    tst_arguments ':desc1:(a b)'
    comptest $'tst \t'
   ZTST_test: examining line:
   >line: {tst }{}
   ZTST_getredir: read redir for '>':
   line: {tst }{}
   DESCRIPTION:{desc1}
   NO:{a}
   NO:{b}
   ZTST_test: examining line:

   Running test: a and b
   ZTST_test: expecting status: 0
   Input: /tmp/zsh.ztst.in.3090, output: /tmp/zsh.ztst.out.3090, error: /tmp/zsh.ztst.terr.3090
   ^Cmake[1]: *** [check] Interrupt
   make: *** [check] Interrupt

And the output of uname -a:

Darwin revolver 5.5 Darwin Kernel Version 5.5: Thu May 30 14:51:26 PDT 2002; root:xnu/xnu-201.42.3.obj~1/RELEASE_PPC  Power Macintosh powerpc

Thanks for any help. I'm a tcsh user right now, but I'm looking forward
to playing with zsh. 3.0.8 is installed as /bin/sh on OS X, but I wanted
to be up-to-date before I seriously started goofing with it. <g>

Thanks again,
Aaron

-- 
Aaron Hall           :       Mac OS X: Macintosh on top, Unix underneath.
ahall@vitaphone.net  :               The perfect software love-in.

Macintosh/UNIX Geek, Network Flack, and...eh, whatever.


From zsh-workers-request@math.gatech.edu Sat Aug 22 11:14:17 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2243 invoked from network); 22 Aug 1998 11:14:16 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 22 Aug 1998 11:14:16 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id HAA17883;
	Sat, 22 Aug 1998 07:05:02 -0400 (EDT)
Resent-Date: Sat, 22 Aug 1998 07:04:45 -0400 (EDT)
>Received: from marge by delcam.com; Sat, 22 Aug 98 11:57:07 BST
Date: Sat, 22 Aug 1998 07:00:56 -0400 (EDT)
From: Chavdar Ivanov <ci@delcam.com>
X-Sender: ci@marge
To: Matthew Lovell <lovell@fc.hp.com>
Cc: "Zsh User's List" <zsh-users@math.gatech.edu>
Subject: Re: Help with compiling 3.1.4 on HPUX 10.20
In-Reply-To: <13789.43827.684548.946200@hatchet.fc.hp.com>
Message-Id: <Pine.HPX.4.02.9808220653070.1559-100000@marge>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"vZkxT1.0.-M4.DNgtr"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1749
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Fri, 21 Aug 1998, Matthew Lovell wrote:

> Hi,
> 
> I grabbed zsh-3.1.4 earlier today and have tried compiling under both
> gcc and HP's ansic.  I seem to have some header problem, but I'm at
> somewhat of a loss.
> 
> I would appreciated any help/advice you could offer.
> 
>   cc: "watch.c", line 130: error 1588: "ut_xtime" undefined.
>   cc: "watch.c", line 130: error 1531: Invalid member of struct or union.
>   cc: "watch.c", line 144: error 1531: Invalid member of struct or union.
>   cc: "watch.c", line 144: error 1563: Expression in if must be scalar.
>   cc: "watch.c", line 158: error 1531: Invalid member of struct or union.
>   cc: "watch.c", line 417: error 1588: "ut_xtime" undefined.
>   cc: "watch.c", line 417: error 1531: Invalid member of struct or union.
>   cc: "watch.c", line 417: error 1531: Invalid member of struct or union.
>   cc: "watch.c", line 417: error 1563: Expression in if must be scalar.
>   cc: "watch.c", line 419: error 1531: Invalid member of struct or union.
>   cc: "watch.c", line 419: error 1531: Invalid member of struct or union.     
> 
> Thanks!
> 
> -- 
> 
> Matthew Lovell                       voice: (970) 898-6264 
> Hewlett-Packard FSL                    fax: (970) 898-2510 
> 3404 E. Harmony Rd. MS A0         location: 3UR4
> Fort Collins, CO 80528-9599         mailto:lovell@fc.hp.com
> 
> 

I had this a few months ago when I first got 3.1.4 compiled under HP-UX
10.20; I do not remember what did I do at the time; I suspect I just used
gcc instead of HP cc ; I don't quite managed to grasp the sequence of
#if's and #defines just before the redefinition of ut_time as ut_xtime;
however, brute 

#undef REAL_UTMPX_FILE

before 

#if !defined(WATCH_STRUCT_UTMP) && defined(REAL_UTMPX_FILE) &&
         defined(HAVE_STRUCT_UTMPX)

sorted the problem for me. ( I haven't tested the functionality provided
by this part of the shell, though; it seems to work OK. )

Also I can't fathom why when I compiled zsh-3.1.4 today for this test both
with gcc 2.8.1 and cc, I got over 700k stripped executables, while on the
1st of June my executable was just 548k...

-------------------------that's my version of the compiler-----------
marge# what /usr/bin/cc
/tmp/zsh-3.1.4/Src
/usr/bin/cc:
              LINT A.10.32.16 CXREF  A.10.32.16
        HP92453-01 A.10.32.17 HP C Compiler
         /usr/lib/libc: $Revision: 76.3 $
--------------------------------------------------------------------

Regards, 

Chavdar Ivanov           | Talbot Way, Small Heath Business Park
Delcam UK Limited        | Birmingham B10 0HJ, United Kingdom
Customer Support Dept.   | (+44)121-6831014



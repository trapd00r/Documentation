From zsh-users-return-11904-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 30 19:57:22 2007
Return-Path: <zsh-users-return-11904-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15727 invoked from network); 30 Sep 2007 19:57:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Sep 2007 19:57:12 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18872 invoked from network); 30 Sep 2007 19:57:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Sep 2007 19:57:07 -0000
Received: (qmail 13609 invoked by alias); 30 Sep 2007 19:56:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11904
Received: (qmail 13593 invoked from network); 30 Sep 2007 19:56:55 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 30 Sep 2007 19:56:55 -0000
Received: (qmail 17244 invoked from network); 30 Sep 2007 19:56:55 -0000
Received: from nz-out-0506.google.com (64.233.162.235)
  by a.mx.sunsite.dk with SMTP; 30 Sep 2007 19:56:49 -0000
Received: by nz-out-0506.google.com with SMTP id r28so2237852nza
        for <zsh-users@sunsite.dk>; Sun, 30 Sep 2007 12:56:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=U3s6cygIvciev/lNePnPCXS73+FUaFuzop9eSyjRc38=;
        b=lTP+kBNAbHG0h+gbhPCzaSowAi7fFRhp7PzkieO1dCU+dyL3sLKCQO9qbjbcDKivGP/HlAk+MrW3Y6oJ9lKVnsOkGGXOmZ7UY9H5Ow7hxpcHxaZbVDrKns+loPQLyzNHimmB1ISNiE18R/bZIP5YDS5cJHcQA+lPOj9ZBZU7Nq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=I5l5M2jfAElZE8f2g3DF+8e+g49hznjVXrWEBshPjxOMKUu3v0Ol1YHar9WMy0D4W98Wy9aYwk4WjCuXcTxHJoZkPXv5HCbMW0zj10quFXRKoX8SadCuN7Hb9u0jcbYZxByqAX923MVp5c4ahbtlGAKsamHmFomMEgg5nEltdl0=
Received: by 10.65.103.14 with SMTP id f14mr13085993qbm.1191182207011;
        Sun, 30 Sep 2007 12:56:47 -0700 (PDT)
Received: by 10.142.126.1 with HTTP; Sun, 30 Sep 2007 12:56:46 -0700 (PDT)
Message-ID: <30c383e70709301256m570d4cd7v4ce180db1d83cc67@mail.gmail.com>
Date: Sun, 30 Sep 2007 21:56:46 +0200
From: "Pau Amaro-Seoane" <vim.unix@googlemail.com>
Reply-To: vim.unix@gmail.com
To: zsh-users@sunsite.dk
Subject: Re: nohup dies
In-Reply-To: <200709291256.l8TCuak4003565@pws-pc.ntlworld.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <vim.unix@googlemail.com>
	 <30c383e70709290023x46dc7d13o2ff3904a05413496@mail.gmail.com>
	 <200709291256.l8TCuak4003565@pws-pc.ntlworld.com>

| Just "setopt nohup" in your initialisation file

nope...

I tried that and the process died again... Same error

The only way is to start the simulation from ksh. Zsh stubbornly
refuses to nohup it...

I didn't try emulate ksh since I stick to zsh syntax and have billions
of zsh scripts.

Pau


2007/9/29, Peter Stephenson <p.w.stephenson@ntlworld.com>:
> "Pau Amaro-Seoane" wrote:
> > > nohup is not a shell builtin; it's simply an executable programme that's
> >
> > man nohup
> >
> > (...)
> >        NOTE:  your  shell may have its own version of nohup, which
> > usually supersedes the version described
> >        here.  Please refer to your shell's documentation for details
> > about the options it supports.
> > (...)
>
> Yes, I'm well aware nohup *may* be a shell builtin, but in zsh it
> isn't.  The easy way to check is to run "which nohup".
>
> > > A lot of other shells, I presume (but I haven't actually checked)
> > > including ksh, don't send SIGHUP to processes when the shell exits.
> >
> > But zsh is supposed to emulate ksh, right?
>
> Not unless you have "emulate ksh" in effect.  If you do, "setupt nohup"
> is turned on and you have the same (global) effect as in ksh (you don't
> need the "nohup" command at all).
>
> > nohup whatever should work regardless of shell.
>
> "nohup" does work; as I pointed out you're using it the wrong way.  The
> difference in ksh is that you don't need it at all; it's harmless if you
> do use it, but ksh doesn't send the HUP signal anyway.
>
> > And it _did_ in the
> > older version of zsh, now not anymore. Can you tell me why?
>
> Nothing here has changed, but as I suggested before your old setup may
> have had the "nohup" option turned on.
>
> > the "solution" for now is to launch the simulation with ksh... or
> > resort to screen... but it's a pity, I stick to zsh a lot
>
> Just "setopt nohup" in your initialisation file, or "emulate ksh" if
> you're set on ksh syntax generally.
>
> --
> Peter Stephenson <p.w.stephenson@ntlworld.com>
> Web page now at http://homepage.ntlworld.com/p.w.stephenson/
>


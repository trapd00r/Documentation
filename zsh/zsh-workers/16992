From zsh-workers-return-16992-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 16 08:00:56 2002
Return-Path: <zsh-workers-return-16992-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7700 invoked from network); 16 Apr 2002 08:00:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Apr 2002 08:00:55 -0000
Received: (qmail 3554 invoked by alias); 16 Apr 2002 08:00:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16992
Received: (qmail 3543 invoked from network); 16 Apr 2002 08:00:45 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15547.55803.189771.469484@wischnow.berkom.de>
Date: Tue, 16 Apr 2002 09:59:55 +0200
To: zsh-workers@sunsite.dk
Subject: Re: problem with quoting in completion function
In-Reply-To: <1018728981.6553.7.camel@localhost.localdomain>
References: <1018728981.6553.7.camel@localhost.localdomain>
X-Mailer: VM 6.95 under 21.5 (patch 3) "asparagus" XEmacs Lucid


Borsenkow Andrej wrote:

> 
> This applies to 4.0.4 as distributed by Mandrake.
> 
> I spent some time trying to understand why the following (suggested by
> Sven) does not work:
> 
>  compset -P "*,"
>  all_sources=( ${all_sources:#(${~IPREFIX//,/|})} )

Bart already suggested using foo=( ${foo:#(${(Q)~IPREFIX//,/|})} ),
which works for me, even inside quotes etc., so nothing new here.

> ...
> 
> If this quoting is intentional it does not seem to be described in
> documentation. But I still do not like it, it comes unexpected enough.
> It makes it impossible to simply  compare strings.

What do you mean by `unexpected'? It has always been this way (module
a couple of bugs, as you know, having been here all the time ;-). And
the string is moved from $PREFIX to $IPREFIX without being changed, so
what could be more expectable?

And maybe you remember, that all this quoting stuff (which I won't
touch again without better reasons) always was a bit of a compromise,
being a very complicated matter -- nowadays even with the possibility
of nested quoting levels and whatnot. And still, it's cleaner now than
it was in previous stable versions.


Bye
  Sven

-- 
Sven Wischnowsky                          wischnow@berkom.de


From zsh-workers-request@math.gatech.edu Sat May 16 19:24:55 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6796 invoked from network); 16 May 1998 19:24:53 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 16 May 1998 19:24:53 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id PAA01230;
	Sat, 16 May 1998 15:20:47 -0400 (EDT)
Resent-Date: Sat, 16 May 1998 15:20:47 -0400 (EDT)
Date: Sat, 16 May 1998 21:21:12 +0200 (MET DST)
From: "C. v. Stuckrad" <stucki@math.fu-berlin.de>
X-Sender: stucki@petzval
Reply-To: "C. v. Stuckrad" <stucki@math.fu-berlin.de>
To: Tristan Horn <tristan+z@ethereal.net>
cc: zsh-workers@math.gatech.edu, torstenb@freebsd.org
Subject: Re: possible bug in zsh-3.0.5
In-Reply-To: <19980512042905.I6203@ethereal.net>
Message-ID: <Pine.GSO.3.95q.980516210423.13317A-100000@petzval>
X-TestHeaderA: Written by C. v. Stuckrad; FB. Mathematik; EDV
X-TestHeaderB: FU-Berlin; Arnimallee 2-6; 14195 Berlin; GERMANY
Priority: normal
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"rp561.0.9J.FSUNr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3979
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Tue, 12 May 1998, Tristan Horn wrote:

> On Mon, May 11, 1998 at 02:20:12PM -0400, Snob Art Genre wrote:
> > I'm having a problem with zsh 3.0.5 on FreeBSD-stable.  Although the
> > arrow keys sometimes work, sometimes they just generate a bell and an
> > 'A', 'B', 'C' or 'D'.
> 
> This happens often to me after using things like ncftp in visual mode,
> although I can't seem to recreate the problem at the moment.
> 
> 'reset' tends to fix it.  Anyone have a termcap/terminfo patch for this?
> I'm not sure what the actual cause is.

There is *nothing* wrong with zsh if 'reset' fixes it.

Your TERM(inal) is one of the types (like vt100) that has *two* Arrow-Key
modes.  Curses-driven Programs like ncftp or vi and lots of others switch
the mode of the teminal to the 'non default one' during curses-interaction
with the user.  Normally those programs switch back when they end, but if
something fails, or if you have something 'filtering' or interferring
between the program and the terminal, you get strange effects.  The result
is the terminal sending one set of codes for arrow-key and the zsh
accepting only the other which gives beeps for ununderstood zle-bindings
or entered characters (mostly ABCD). 

Somebody *might*(?) create an zle-option to *always* set the correct
terminal-setup for every zle-start, but I doubt it's a good idea.

Your's   Stucki

Christoph von Stuckrad       * *  | talk to  | <stucki@math.fu-berlin.de> \
Freie Universitaet Berlin    |/_* | nickname | ...!unido!fub!leibniz!stucki|
Fachbereich Mathematik, EDV  |\ * | 'stucki' | Tel:+49 30 838-75459        |
Arnimallee 2-6/14195 Berlin  * *  |  on IRC  | Fax:+49 30 838-75454       /


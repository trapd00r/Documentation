From zsh-workers-return-16057-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 15 17:41:31 2001
Return-Path: <zsh-workers-return-16057-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21658 invoked from network); 15 Oct 2001 17:41:30 -0000
Received: from unknown (HELO sunsite.dk) (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Oct 2001 17:41:30 -0000
Received: (qmail 2959 invoked by alias); 15 Oct 2001 17:41:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16057
Received: (qmail 2943 invoked from network); 15 Oct 2001 17:41:16 -0000
Date: Mon, 15 Oct 2001 13:41:07 -0400
From: Clint Adams <clint@zsh.org>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: =?iso-8859-1?Q?Ra=FAl_N=FA=F1ez_de_Arenas_Coronado?= <dervishd@jazzfree.com>,
   zsh-workers@sunsite.dk
Subject: Re: How about MODDIR being configure'able?
Message-ID: <20011015134107.A17772@dman.com>
References: <E15t82J-0007k1-00@DervishD> <1011015153328.ZM8149@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <1011015153328.ZM8149@candle.brasslantern.com>; from schaefer@brasslantern.com on Mon, Oct 15, 2001 at 03:33:27PM +0000

> No, we've been over this before; there's even a comment in utils.c to
> this effect:  zsh uses mktemp() in a safe way.  Specifically, the names
> created by gettempname() are always opened with O_CREAT later, so if
> they exist the open() call will fail.  Creating them with mkstemp(), on
> the other hand, causes problems with redirections and NO_CLOBBER.

Hmm.. shouldn't that be O_CREAT|O_EXCL, which we're not doing in
all cases?


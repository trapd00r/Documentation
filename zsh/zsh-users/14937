From zsh-users-return-14937-mason-zsh=primenet.com.au@zsh.org Mon Mar 15 10:21:34 2010
Return-Path: <zsh-users-return-14937-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4392 invoked by alias); 15 Mar 2010 10:21:34 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14937
Received: (qmail 13754 invoked from network); 15 Mar 2010 10:21:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at vinc17.org does not designate permitted sender hosts)
Date: Mon, 15 Mar 2010 11:15:46 +0100
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-users@zsh.org
Subject: zsh sometimes freezes when completing a command
Message-ID: <20100315101546.GA28047@prunille.vinc17.org>
Mail-Followup-To: zsh-users@zsh.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.20-6061-vl-r35499 (2010-03-08)

For instance:

patate:~/wd/tmd/oldtests[255]> cront[TAB]

has frozen, and it isn't possible to interrupt it (with either Ctrl-C
or Ctrl-\). This is with zsh 4.3.8 (I'll recompile the latest version).

FYI, here's my $cdpath: . /home/vlefevre ..

I've run gdb on the current process. Here's the backtrace:

(gdb) bt
#0  0x00007fe80de60b1f in poll () from /lib/libc.so.6
#1  0x00007fe80853811d in ldap_result () from /usr/lib/libldap_r-2.4.so.2
#2  0x00007fe808772d8e in ?? () from /lib/libnss_ldap.so.2
#3  0x00007fe808773069 in ?? () from /lib/libnss_ldap.so.2
#4  0x00007fe808774d75 in _nss_ldap_endpwent () from /lib/libnss_ldap.so.2
#5  0x00007fe80de7923b in __nss_endent () from /lib/libc.so.6
#6  0x00007fe80de36c2a in endpwent () from /lib/libc.so.6
#7  0x000000000042c025 in ?? ()
#8  0x00007fe805c5d5e4 in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/parameter.so
#9  0x000000000042cde8 in scanmatchtable ()
#10 0x000000000042ce19 in scanhashtable ()
#11 0x000000000044b9f1 in paramvalarr ()
#12 0x000000000044bad8 in ?? ()
#13 0x000000000044bb9d in getarrvalue ()
#14 0x00007fe8055fb20d in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#15 0x00007fe8055fdf6b in addmatches ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#16 0x00007fe8055f8279 in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#17 0x0000000000415f85 in execbuiltin ()
#18 0x0000000000422863 in ?? ()
#19 0x000000000042391c in ?? ()
#20 0x0000000000423d00 in ?? ()
#21 0x0000000000424be9 in execlist ()
#22 0x000000000043e33b in execif ()
#23 0x00000000004221f5 in ?? ()
#24 0x000000000042391c in ?? ()
#25 0x0000000000423d00 in ?? ()
#26 0x0000000000424bd5 in execlist ()
#27 0x000000000043e59f in execwhile ()
#28 0x00000000004221f5 in ?? ()
#29 0x000000000042391c in ?? ()
#30 0x0000000000423d00 in ?? ()
#31 0x0000000000424bd5 in execlist ()
#32 0x0000000000424d25 in execode ()
#33 0x0000000000424e0f in runshfunc ()
#34 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#35 0x0000000000424dc5 in runshfunc ()
#36 0x00000000004251af in doshfunc ()
#37 0x00000000004253e2 in ?? ()
#38 0x00000000004227a2 in ?? ()
#39 0x000000000042391c in ?? ()
#40 0x0000000000423d00 in ?? ()
#41 0x0000000000424be9 in execlist ()
#42 0x000000000043e59f in execwhile ()
#43 0x00000000004221f5 in ?? ()
#44 0x000000000042391c in ?? ()
#45 0x0000000000423d00 in ?? ()
#46 0x0000000000424bd5 in execlist ()
#47 0x0000000000424d25 in execode ()
#48 0x0000000000424e0f in runshfunc ()
#49 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#50 0x0000000000424dc5 in runshfunc ()
#51 0x00000000004251af in doshfunc ()
#52 0x00000000004253e2 in ?? ()
#53 0x00000000004227a2 in ?? ()
#54 0x000000000042391c in ?? ()
#55 0x0000000000423d00 in ?? ()
#56 0x0000000000424bd5 in execlist ()
#57 0x0000000000424d25 in execode ()
#58 0x0000000000425beb in ?? ()
#59 0x00000000004221f5 in ?? ()
#60 0x000000000042391c in ?? ()
#61 0x0000000000423d00 in ?? ()
#62 0x0000000000424bd5 in execlist ()
#63 0x0000000000424d25 in execode ()
#64 0x0000000000424e0f in runshfunc ()
#65 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#66 0x0000000000424dc5 in runshfunc ()
#67 0x00000000004251af in doshfunc ()
#68 0x00000000004253e2 in ?? ()
#69 0x00000000004227a2 in ?? ()
#70 0x000000000042391c in ?? ()
#71 0x0000000000423d00 in ?? ()
#72 0x0000000000424be9 in execlist ()
#73 0x000000000043e59f in execwhile ()
#74 0x00000000004221f5 in ?? ()
#75 0x000000000042391c in ?? ()
#76 0x0000000000423d00 in ?? ()
#77 0x0000000000424bd5 in execlist ()
#78 0x0000000000424d25 in execode ()
#79 0x0000000000425beb in ?? ()
#80 0x00000000004221f5 in ?? ()
#81 0x000000000042391c in ?? ()
#82 0x0000000000423d00 in ?? ()
#83 0x0000000000424bd5 in execlist ()
#84 0x0000000000424d25 in execode ()
#85 0x0000000000424e0f in runshfunc ()
#86 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#87 0x0000000000424dc5 in runshfunc ()
#88 0x00000000004251af in doshfunc ()
#89 0x00000000004253e2 in ?? ()
#90 0x00000000004227a2 in ?? ()
#91 0x000000000042391c in ?? ()
#92 0x0000000000423d00 in ?? ()
#93 0x0000000000424bd5 in execlist ()
#94 0x000000000043e59f in execwhile ()
#95 0x00000000004221f5 in ?? ()
#96 0x000000000042391c in ?? ()
#97 0x0000000000423d00 in ?? ()
#98 0x0000000000424bd5 in execlist ()
#99 0x000000000043e33b in execif ()
#100 0x00000000004221f5 in ?? ()
#101 0x000000000042391c in ?? ()
#102 0x0000000000423d00 in ?? ()
#103 0x0000000000424bd5 in execlist ()
#104 0x000000000043e33b in execif ()
#105 0x00000000004221f5 in ?? ()
#106 0x000000000042391c in ?? ()
#107 0x0000000000423d00 in ?? ()
#108 0x0000000000424bd5 in execlist ()
#109 0x000000000043effb in execfor ()
#110 0x00000000004221f5 in ?? ()
#111 0x000000000042391c in ?? ()
#112 0x0000000000423d00 in ?? ()
#113 0x0000000000424bd5 in execlist ()
#114 0x000000000043e59f in execwhile ()
#115 0x00000000004221f5 in ?? ()
#116 0x000000000042391c in ?? ()
#117 0x0000000000423d00 in ?? ()
#118 0x0000000000424bd5 in execlist ()
#119 0x0000000000424d25 in execode ()
#120 0x0000000000424e0f in runshfunc ()
#121 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#122 0x0000000000424dc5 in runshfunc ()
#123 0x00000000004251af in doshfunc ()
#124 0x00000000004253e2 in ?? ()
#125 0x00000000004227a2 in ?? ()
#126 0x000000000042391c in ?? ()
#127 0x0000000000423d00 in ?? ()
#128 0x0000000000424be9 in execlist ()
#129 0x000000000043e33b in execif ()
#130 0x00000000004221f5 in ?? ()
#131 0x000000000042391c in ?? ()
#132 0x0000000000423d00 in ?? ()
#133 0x0000000000424bd5 in execlist ()
#134 0x000000000043e33b in execif ()
#135 0x00000000004221f5 in ?? ()
#136 0x000000000042391c in ?? ()
#137 0x0000000000423d00 in ?? ()
#138 0x0000000000424bd5 in execlist ()
#139 0x0000000000424d25 in execode ()
#140 0x0000000000424e0f in runshfunc ()
#141 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#142 0x0000000000424dc5 in runshfunc ()
#143 0x00000000004251af in doshfunc ()
#144 0x00000000004253e2 in ?? ()
#145 0x00000000004227a2 in ?? ()
#146 0x000000000042391c in ?? ()
#147 0x0000000000423d00 in ?? ()
#148 0x0000000000424c4b in execlist ()
#149 0x0000000000424d25 in execode ()
#150 0x0000000000425beb in ?? ()
#151 0x00000000004221f5 in ?? ()
#152 0x000000000042391c in ?? ()
#153 0x0000000000423d00 in ?? ()
#154 0x0000000000424bd5 in execlist ()
#155 0x0000000000424d25 in execode ()
#156 0x0000000000424e0f in runshfunc ()
#157 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#158 0x0000000000424dc5 in runshfunc ()
#159 0x00000000004251af in doshfunc ()
#160 0x00000000004253e2 in ?? ()
#161 0x00000000004227a2 in ?? ()
#162 0x000000000042391c in ?? ()
#163 0x0000000000423d00 in ?? ()
#164 0x0000000000424bd5 in execlist ()
#165 0x0000000000424d25 in execode ()
#166 0x000000000040ed62 in bin_eval ()
#167 0x0000000000415f85 in execbuiltin ()
#168 0x0000000000422863 in ?? ()
#169 0x000000000042391c in ?? ()
#170 0x0000000000423d00 in ?? ()
#171 0x0000000000424be9 in execlist ()
#172 0x000000000043e33b in execif ()
#173 0x00000000004221f5 in ?? ()
#174 0x000000000042391c in ?? ()
#175 0x0000000000423d00 in ?? ()
#176 0x0000000000424bd5 in execlist ()
#177 0x0000000000424d25 in execode ()
#178 0x0000000000424e0f in runshfunc ()
#179 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#180 0x0000000000424dc5 in runshfunc ()
#181 0x00000000004251af in doshfunc ()
#182 0x00000000004253e2 in ?? ()
#183 0x00000000004227a2 in ?? ()
#184 0x000000000042391c in ?? ()
#185 0x0000000000423d00 in ?? ()
#186 0x0000000000424be9 in execlist ()
#187 0x000000000043e33b in execif ()
#188 0x00000000004221f5 in ?? ()
#189 0x000000000042391c in ?? ()
#190 0x0000000000423d00 in ?? ()
#191 0x0000000000424bd5 in execlist ()
#192 0x0000000000424d25 in execode ()
#193 0x0000000000424e0f in runshfunc ()
#194 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#195 0x0000000000424dc5 in runshfunc ()
#196 0x00000000004251af in doshfunc ()
#197 0x00000000004253e2 in ?? ()
#198 0x00000000004227a2 in ?? ()
#199 0x000000000042391c in ?? ()
#200 0x0000000000423d00 in ?? ()
#201 0x0000000000424bd5 in execlist ()
#202 0x000000000043e2c6 in execif ()
#203 0x00000000004221f5 in ?? ()
#204 0x000000000042391c in ?? ()
#205 0x0000000000423d00 in ?? ()
#206 0x0000000000424bd5 in execlist ()
#207 0x000000000043effb in execfor ()
#208 0x00000000004221f5 in ?? ()
#209 0x000000000042391c in ?? ()
#210 0x0000000000423d00 in ?? ()
#211 0x0000000000424bd5 in execlist ()
#212 0x000000000043effb in execfor ()
#213 0x00000000004221f5 in ?? ()
#214 0x000000000042391c in ?? ()
#215 0x0000000000423d00 in ?? ()
#216 0x0000000000424bd5 in execlist ()
#217 0x0000000000424d25 in execode ()
#218 0x0000000000424e0f in runshfunc ()
#219 0x00007fe8055f640a in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#220 0x0000000000424dc5 in runshfunc ()
#221 0x00000000004251af in doshfunc ()
#222 0x00007fe8055ff335 in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#223 0x00007fe805600346 in do_completion ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/complete.so
#224 0x00007fe80593d1f3 in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#225 0x00007fe80593fb82 in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#226 0x00007fe80593b160 in completecall ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#227 0x00007fe80592e0e6 in execzlefunc ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#228 0x00007fe80593ac9d in ?? ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#229 0x0000000000415f85 in execbuiltin ()
#230 0x0000000000422863 in ?? ()
#231 0x000000000042391c in ?? ()
#232 0x0000000000423d00 in ?? ()
#233 0x0000000000424bd5 in execlist ()
#234 0x000000000043e33b in execif ()
#235 0x00000000004221f5 in ?? ()
#236 0x000000000042391c in ?? ()
#237 0x0000000000423d00 in ?? ()
#238 0x0000000000424bd5 in execlist ()
#239 0x0000000000424d25 in execode ()
#240 0x0000000000424e0f in runshfunc ()
#241 0x00000000004251af in doshfunc ()
#242 0x00007fe80592df88 in execzlefunc ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#243 0x00007fe80592e391 in zlecore ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#244 0x00007fe80592e99c in zleread ()
   from /home/vlefevre/x86_64/lib/zsh/4.3.8/zsh/zle.so
#245 0x0000000000432bef in zleentry ()
#246 0x0000000000435d64 in ingetc ()
#247 0x000000000043183a in ?? ()
#248 0x000000000043ca38 in yylex ()
#249 0x00000000004561c7 in parse_event ()
#250 0x00000000004347b2 in loop ()
#251 0x00000000004354c6 in zsh_main ()
#252 0x00007fe80ddb81a6 in __libc_start_main () from /lib/libc.so.6
#253 0x000000000040ddca in _start ()

-- 
Vincent Lefèvre <vincent@vinc17.net> - Web: <http://www.vinc17.net/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.net/blog/>
Work: CR INRIA - computer arithmetic / Arénaire project (LIP, ENS-Lyon)


From zsh-users-return-14599-mason-zsh=primenet.com.au@zsh.org Tue Nov 24 18:51:22 2009
Return-Path: <zsh-users-return-14599-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6983 invoked by alias); 24 Nov 2009 18:51:21 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14599
Received: (qmail 8871 invoked from network); 24 Nov 2009 18:51:19 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (proxy.melb.primenet.com.au: domain at seiken.de does not designate permitted sender hosts)
From: Joke de Buhr <joke.de.buhr@seiken.de>
Organization: http://www.seiken.de/
To: zsh-users@zsh.org
Subject: Re: Redirecting shell output to a pipe
Date: Tue, 24 Nov 2009 19:50:57 +0100
User-Agent: KMail/1.12.3 (Linux/2.6.31-15-generic; KDE/4.3.3; x86_64; ; )
References: <20091124143140.GA7612@fermat.math.technion.ac.il> <4B0C2709.5080307@sun.com>
In-Reply-To: <4B0C2709.5080307@sun.com>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart1345324.8yv2kchYUT";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <200911241951.03589.joke.de.buhr@seiken.de>

--nextPart1345324.8yv2kchYUT
Content-Type: Text/Plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable

On Tuesday 24 November 2009 19:33:45 Peter Miller wrote:
> Nadav Har'El wrote:
> > Hi,
> >
> > If a shell script wants all its output to go to a file, it's easy:
> >
> > 	exec >filename 2>&1
> >
> > Isn't it natural to assume that in the same fashion, you should also
> > be able to redirect the scripts output to a pipe? E.g., a very useful
> > idiom could have been
> >
> > 	exec | tee filename
>=20
> exec |& tee filename

bourne shell compatible syntax:

  exec 2>&1 | tee filename

>=20
> > to redirect stdout both to a file, and to the terminal.
> > But unfortunately, the above line does *not* work. Is there a reason
> > why it doesn't? Wouldn't this be a useful feature?
> >
> > By the way, for the curious, there is actually a different solution
> > to this need, but it is much more convoluted. The other solution is
> > to write this:
> >
> > 	exec 3>&1
> > 	coproc tee /tmp/b >&3
> > 	exec >&p 2>&1
> >
> > (and perhaps do something, I'm not even sure what, at the end of the
> > script to give the tee coprocess enough time to finish outputting
> > before the script exits).
> >
> > Another downside of this solution, besides being extremely complex
> > (99% of the zsh users will probably not be able to figure it out), is
> > that it takes the only coprocess that zsh gives you, which won't work
> > if your code is already using coprocesses.
>=20

--nextPart1345324.8yv2kchYUT
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQIcBAABCgAGBQJLDCsRAAoJEMcNQWzYfbLsmIcP/jfZAgXbr1IA6/AJC3lgIKnM
G20VTxjtW+hg0NK72rVpZkl+1AhR2Rwpg/1I5/uHWp3ko56eMH8sMrvWIBGIN9Ou
9ERVjOGGBkGNySfu/0ZutvIkp5sd3ZQYi/orSXR7n/HsiVEDqRVr+UY6SX4vo8Wc
9ydFbRrdjuenUXPa1bJdFNKzrptipb3sjAvzI9VlaCoN08oqm1lQ4/Ht5gWMnZlR
Pu6hnyUDdUEc01G1HQ8U2E+zqi9PmPHdVqf3WZJjgfVistCVE7UmCABDNLbShqyb
5qT/0Y3XV2j572rzniEz4rS8Ur9ScVBXIxhptN5VuD0xdvIa5Rai0fA2vFcoEHx2
atYCtM/cuTzzjMzStNHUP2sPHsO8+owWLmyOkYosWLqQp0ivVCxRrq4qwRSIFxVK
sSY9igYZ1ut7bOa5OswPPnZlmmtwoxoWK/y7tj4wYzYGQpIOa1TkSBkUJ3YN8zN4
2stsaUEVu5L80J8wP5gHx206fCAA+ZVYXnhv7z32+kzADTVy+L5JKQ9hglYPLgbr
yqBMR5ke2c31zlxd8sDMao2hG3D0la2CND4DJKW+UK+uU1lZ3rZpRTnbiklLwZNn
4yvw372jbgE47+va0UbNB3NZSaOfWeCzpRs3JWtzCoXN/OwFf7ihjq1C3mwb1vM8
GLcFY7KOm99XJLvPuAh2
=/hMU
-----END PGP SIGNATURE-----

--nextPart1345324.8yv2kchYUT--


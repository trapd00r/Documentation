From zsh-workers-return-15533-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 30 14:55:39 2001
Return-Path: <zsh-workers-return-15533-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16025 invoked from network); 30 Jul 2001 14:55:37 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Jul 2001 14:55:37 -0000
Received: (qmail 5224 invoked by alias); 30 Jul 2001 14:55:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15533
Received: (qmail 5212 invoked from network); 30 Jul 2001 14:55:30 -0000
Date: Mon, 30 Jul 2001 15:55:28 +0100
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: location of pcre.h
Message-ID: <20010730155528.B16163@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
References: <20010730153817.A16119@thelonious.new.ox.ac.uk> <007d01c11906$5ad4acb0$21c9ca95@mow.siemens.ru>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <007d01c11906$5ad4acb0$21c9ca95@mow.siemens.ru>; from Andrej.Borsenkow@mow.siemens.ru on Mon, Jul 30, 2001 at 06:46:02PM +0400
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

Borsenkow Andrej (Andrej.Borsenkow@mow.siemens.ru) wrote:
> Do they have anything else in /usr/include/pcre? Else I'd call this broken
> (yet another thing in 7.0).

Yes, pcreposix.h is also there.

> Obvious fix is to check for both pcre.h and pcre/pcre.h and take whatever
> exists
> 
> #ifdef HAVE_PCRE_H
> #include <pcre.h>
> #else
> #ifdef HAVE_PCRE_PCRE_H - ick!
> #include <pcre/pcre.h>
> #else
> #error pcre not found
> #endif
> #endif

Yep.  Presumably this needs some autoconf wizardry to set
HAVE_PCRE_PCRE_H in the first place, which is where I get lost ...

> Additionally, pcre should be compiled conditionally only if prerequisites
> are found (compare termcap.mdd or terminfo.mdd).

There must be a bug in that too then, because I get

  checking for pcre.h... no


From zsh-workers-return-14219-mason-zsh=primenet.com.au@sunsite.dk Fri May 04 10:50:31 2001
Return-Path: <zsh-workers-return-14219-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2086 invoked from network); 4 May 2001 10:50:03 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 May 2001 10:50:03 -0000
Received: (qmail 248 invoked by alias); 4 May 2001 10:49:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14219
Received: (qmail 148 invoked from network); 4 May 2001 10:49:13 -0000
X-VirusChecked: Checked
Sender: kiddleo@cav.logica.co.uk
Message-ID: <3AF28717.2C52E766@u.genie.co.uk>
Date: Fri, 04 May 2001 11:40:23 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.76 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: PATCH: _bindkey
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

This makes _bindkey cope with Peter's changes to bindkey in 14046.

The example in the docs (bindkey -rpM viins '^[') isn't completed
properly - the keymap and prefix are completed the wrong way around. I
think the way _arguments works is the better order but then I'd
probably always write this as something like bindkey -rp '^[' -M viins.

Oliver

Index: Completion/Zsh/Command/_bindkey
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_bindkey,v
retrieving revision 1.1
diff -u -r1.1 _bindkey
--- Completion/Zsh/Command/_bindkey	2001/04/02 11:25:59	1.1
+++ Completion/Zsh/Command/_bindkey	2001/05/04 10:17:14
@@ -14,7 +14,7 @@
   '(-v -a -M -l -D -A -N -p)-e[select emacs keymap and bind it to main]' \
   '(-e -a -M -l -D -A -N -p)-v[select viins keymap and bind it to main]' \
   '(-e -v -M -l -D -A -N -p)-a[select vicmd keymap]' \
-  '(-e -v -a -l -D -A -N -p)-M[specify keymap to select]:keymap:->keymap' \
+  '(-e -v -a -l -D -A -N)-M[specify keymap to select]:keymap:->keymap' \
   '(-e -v -a -M -D -A -N -m -p -r -s -R *)-l[list existing keymap names]' \
   '(-e -v -a -d -A -N -m -r -s -R *)-L[output in form of bindkey commands]' \
   '(-e -v -a -l -D -A -N -m -p -r -s -R *)-d[delete existing keymaps and reset to default state]' \
@@ -22,8 +22,8 @@
   '(-e -v -a -M -l -L -d -D -N -m -p -r -s -R *)-A[create alias to keymap]:old-keymap:->keymap:new-keymap:->keymap' \
   '(-e -v -a -M -l -L -d -D -A -m -p -r -s -R *)-N[create new keymap]:new-keymap:->keymap:old-keymap to copy:->keymap' \
   '(-l -L -d -D -A -N -p -r -s -r -R *)-m[add builtin meta-key bindings to selected keymape]' \
-  '(-e -v -a -M -d -D -A -N -m -r -s -R *)-p[list bindings which have given key sequence as a prefix]:key sequence' \
-  '(-l -L -d -D -A -N -m -p -s *)-r[unbind specified in-strings]:*:in-string' \
+  '(-e -v -a -d -D -A -N -m -s -R *)-p[list bindings which have given key sequence as a prefix]:key sequence' \
+  '(-l -L -d -D -A -N -m -s *)-r[unbind specified in-strings]:*:in-string' \
   '(-l -L -d -D -A -N -m -p -r *)-s[bind each in-string to each out-string]:*:key string' \
   '(-e -v -a -M -l -L -d -D -A -N -m -p)-R[interpret in-strings as ranges]' \
   '(-l -L -d -A -N -m -p -r -s)*::widgets:->widget' && ret=0

_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


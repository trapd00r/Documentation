From zsh-users-return-14926-mason-zsh=primenet.com.au@zsh.org Fri Mar 12 15:54:49 2010
Return-Path: <zsh-users-return-14926-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13151 invoked by alias); 12 Mar 2010 15:54:49 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14926
Received: (qmail 3274 invoked from network); 12 Mar 2010 15:54:38 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-6.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_MED autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at spf.postini.com designates 64.18.3.98 as permitted sender)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Subject: Can't trace script not in PATH
Date: Fri, 12 Mar 2010 16:07:35 +0100
Message-ID: <38D4FA2BB99A674BADDED237051D97A70EE02067@FFBRUE001.cfmu.corp.eurocontrol.int>
Importance: normal
Priority: normal
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Can't trace script not in PATH
thread-index: AcrB9b+BzperJRFxSru5DGNtWBYGrg==
From: "LORANG Geert" <geert.lorang@eurocontrol.int>
To: <zsh-users@zsh.org>
X-OriginalArrivalTime: 12 Mar 2010 15:07:35.0923 (UTC) FILETIME=[BF9AEC30:01CAC1F5]

Hello,

We use zsh in ksh mode, but you get the same behavior when using zsh.
Could someone explain me following behavior?=20

$ cat /home/geert/bin/testscript
#!/bin/ksh
echo called

$ export PATH=3D$PATH:/home/geert/bin

$ ksh -x /home/geert/bin/testscript
+ /usr/bin/id -un
+ [ geert '!=3D' root ']'
+ KSH_FLAGS=3Dx
+ echo x
+ grep i
+ [ -n '' ']'
+ [ -r /home/geert/.kshrc ']'
+ . /home/geert/.kshrc
+ zmodload -ab -i zsh/rlimits ulimit
+ ulimit -c 4194303 -s 65536
+ set -o nohashcmds
+ echo called <=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D trace of the script
called

No problem so far...

$ ksh -x testscript
testscript: can't open input file: testscript=20

Ksh/zsh won't search PATH... I could try -c ...

$ ksh -x -c testscript
+ /usr/bin/id -un
+ [ geert '!=3D' root ']'
+ KSH_FLAGS=3Dx
+ echo x
+ grep i
+ [ -n '' ']'
+ [ -r /home/geert/.kshrc ']'
+ . /home/geert/.kshrc
+ zmodload -ab -i zsh/rlimits ulimit
+ ulimit -c 4194303 -s 65536
+ set -o nohashcmds
+ testscript <=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D NO trace
called

Now it does search PATH but the actual trace of the script is missing.
Though it does trace /etc/kshrc but not the actual script.

So, is this a bug? Or is there a way to let zsh/ksh search the PATH when
you invoke a script? (Like the original ksh)

Regards,
Geert

____
=20
This message and any files transmitted with it are legally privileged =
and intended for the sole use of the individual(s) or entity to whom =
they are addressed. If you are not the intended recipient, please notify =
the sender by reply and delete the message and any attachments from your =
system. Any unauthorised use or disclosure of the content of this =
message is strictly prohibited and may be unlawful.
=20
Nothing in this e-mail message amounts to a contractual or legal =
commitment on the part of EUROCONTROL, unless it is confirmed by =
appropriately signed hard copy.
=20
Any views expressed in this message are those of the sender.


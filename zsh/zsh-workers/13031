From zsh-workers-return-13031-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Oct 18 17:17:09 2000
Return-Path: <zsh-workers-return-13031-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17746 invoked from network); 18 Oct 2000 17:17:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Oct 2000 17:17:08 -0000
Received: (qmail 21137 invoked by alias); 18 Oct 2000 17:17:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13031
Received: (qmail 21112 invoked from network); 18 Oct 2000 17:17:01 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1001018171648.ZM4506@candle.brasslantern.com>
Date: Wed, 18 Oct 2000 17:16:48 +0000
In-Reply-To: <20001018093716.A20977@ichips.intel.com>
Comments: In reply to Clint Olsen <olsenc@ichips.intel.com>
        "Zsh 3.1.9 on HP-UX 10.20/11.0" (Oct 18,  9:37am)
References: <20001018093716.A20977@ichips.intel.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Clint Olsen <olsenc@ichips.intel.com>, zsh-workers@sunsite.auc.dk
Subject: Re: Zsh 3.1.9 on HP-UX 10.20/11.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Oct 18,  9:37am, Clint Olsen wrote:
} Subject: Zsh 3.1.9 on HP-UX 10.20/11.0
}
} I recently downloaded 3.1.9 and built it on 10.20 (for forward
} compatibility). I can now login with this version of Zsh (thanks!).
} However, the cursor is behaving a little strangely. When I hit
} backspace, the cursor advances as if I typed a <space>. ^U doesn't
} seem to clear the line either (well, it does, but the clear isn't
} reflected visually in the tty).

It sounds as though the terminal description (terminfo or termcap) doesn't
have the correct codes for some cursor motions.  Both of the symptoms you
described could be explained if zsh were emitting the wrong code for "move
cursor left" and then emitting either spaces (to cover up one character) or
clear-to-EOL (for ^U).  A simple "typescript" capture of a brief session
would show what's being emitted by ZLE.

} I was wondering if anyone could offer any suggestions?

My guess would be that there's some incompatibility in termcap and terminfo 
on the two versions of the OS.  Either zsh's configure is choosing the
"wrong one" when you build on the older HP-UX, or the one it finds is not
working properly with the terminal description database on the new machine,
or both.

You say:

} I have my own TERMINFO database I'm using for Thomas Dickey's color
} xterm.

Are you sure zsh is successfully reading that database on both platforms?
HP-UX probably has some utilitity equivalent to "strace" ("truss" on Sun)
that would let you examine the system calls to see which terminfo files
are actually being opened.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


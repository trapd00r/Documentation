From zsh-workers-return-18846-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 14 16:11:30 2003
Return-Path: <zsh-workers-return-18846-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8202 invoked from network); 14 Jul 2003 16:11:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 Jul 2003 16:11:29 -0000
Received: (qmail 28878 invoked by alias); 14 Jul 2003 16:11:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18846
Received: (qmail 28868 invoked from network); 14 Jul 2003 16:11:25 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 14 Jul 2003 16:11:25 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [66.93.131.57] by sunsite.dk (MessageWall 1.0.8) with SMTP; 14 Jul 2003 16:11:20 -0000
Received: from lorien.emufarm.org (localhost [127.0.0.1])
	by lorien.emufarm.org (8.12.7/8.12.7) with ESMTP id h6EGBG50025591;
	Mon, 14 Jul 2003 09:11:17 -0700
Received: (from duvall@localhost)
	by lorien.emufarm.org (8.12.7/8.12.7/Submit) id h6EGBFcg025590;
	Mon, 14 Jul 2003 09:11:15 -0700
Date: Mon, 14 Jul 2003 09:11:15 -0700
From: Danek Duvall <duvall@emufarm.org>
To: Peter Stephenson <pws@csr.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: Preventing sorting in completers
Message-ID: <20030714161115.GA25478@lorien.emufarm.org>
Mail-Followup-To: Danek Duvall <duvall@emufarm.org>,
	Peter Stephenson <pws@csr.com>, zsh-workers@sunsite.dk
References: <1030713181710.ZM5187@candle.brasslantern.com> <5798.1058195468@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <5798.1058195468@csr.com>
User-Agent: Mutt/1.5.4i

Peter Stephenson wrote:

> Bart Schaefer wrote:
> > On Jul 12,  7:49pm, Philippe Troin wrote:
> > } 
> > } zstyle ":completion:*:processes" command \
> > }   'ps -u $UID -o ''pid tty s args'' --forest'
> > 
> > Hmm.  When I try to use that set of "ps" arguments, I get no completions
> > at all.  Some investigation reveals that "ps" is giving
> > 
> > ERROR: TTY could not be found.
> 
> My guess is your system is using stdout to decide what the tty is, which
> is explicitly closed.  Try using 1>&2 on the ps command line.  (Or
> something gets closed.  Is it stdin?  Anyway, reopen it.)

I just looked at this, and I get the same error just by running

    ps -o pid tty s args

which is effectively what's getting run above.  I believe that -o
requires *one* argument, with either space or comma separated fields:

    ps -o 'pid tty s args'

or

    ps -o pid,tty,s,args

both of which succeed, and print out a perfectly decent process listing.

I would guess that the double single quotes that Philippe is using
should probably be single quotes escaped by backslashes, or double
quotes, or just using commas to separate them.

My version of ps, on Linux, is 2.0.10.

Danek


From zsh-users-return-14806-mason-zsh=primenet.com.au@zsh.org Sun Feb 07 18:37:08 2010
Return-Path: <zsh-users-return-14806-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27983 invoked by alias); 7 Feb 2010 18:37:08 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14806
Received: (qmail 28219 invoked from network); 7 Feb 2010 18:37:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
Date: Sun, 7 Feb 2010 13:37:02 -0500 (EST)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Users <zsh-users@zsh.org>
Subject: Shell options during completion?
Message-ID: <alpine.LNX.2.01.1002071325000.2729@hp.internal>
User-Agent: Alpine 2.01 (LNX 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I'm still getting up to speed writing completion functions, but I can't 
seem to tell the following:

Are completion functions called with some consistent set of shell 
options?  I'm writing a completion function for the VirtualBox 
utilities, and I'd included the following:

if [[ -o rematchpcre ]] ; then
# do something with pcre's
else
# (essentially) fall back to splitting on whitespace
# (unwritten during my personal testing)
fi

I wasn't getting things working quite right, and I was surprised to see 
that my _virtualbox file was the only match in:

$ grep -r rematchpcre ~/git/zsh/Completion

Is it a result of my question above (consistent options), or are 
completion functions generally written to assume the lowest common 
functionality?  (i.e. get by with POSIX extended regex)

-- 
Best,
Ben


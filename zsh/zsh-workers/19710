From zsh-workers-return-19710-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 30 18:56:14 2004
Return-Path: <zsh-workers-return-19710-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24796 invoked from network); 30 Mar 2004 18:56:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 30 Mar 2004 18:56:13 -0000
Received: (qmail 27407 invoked by alias); 30 Mar 2004 18:56:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19710
Received: (qmail 27375 invoked from network); 30 Mar 2004 18:56:08 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 30 Mar 2004 18:56:08 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 30 Mar 2004 18:56:8 -0000
Received: (qmail 5703 invoked from network); 30 Mar 2004 18:56:08 -0000
Received: from ip-66-80-62-153.dsl.sca.megapath.net (HELO ripple.fruitbat.org) (66.80.62.153)
  by a.mx.sunsite.dk with SMTP; 30 Mar 2004 18:56:06 -0000
Received: (from daemon@localhost)
	by ripple.fruitbat.org (8.10.2/8.8.8/PAC-1.3) id i2UIsql24588;
	Tue, 30 Mar 2004 10:54:52 -0800
Received: from ming.fruitbat.org(192.168.1.2) by ripple.fruitbat.org via smap (V2.1/2.1+anti-relay+anti-spam)
	id xma024581; Tue, 30 Mar 04 10:54:04 -0800
Received: from gremlin.fruitbat.org (IDENT:202@gremlin.fruitbat.org [192.168.1.4])
	by ming.fruitbat.org (8.10.2/8.10.2/PAC-1.6) with ESMTP id i2UJs4i10488;
	Tue, 30 Mar 2004 11:54:04 -0800
Date: Tue, 30 Mar 2004 10:54:09 -0800 (PST)
From: "Peter A. Castro" <doctor@fruitbat.org>
To: Oliver Kiddle <okiddle@yahoo.co.uk>
cc: zzapper <david@tvis.co.uk>, zsh-workers@sunsite.dk, cygwin@cygwin.com
Subject: Re: zsh and line breaks 
In-Reply-To: <3372.1080639122@trentino.logica.co.uk>
Message-ID: <Pine.LNX.4.53.0403301047250.5939@gremlin.fruitbat.org>
References: <s38u10erwrz.fsf@ackusativ.ling.uu.se> <1vvf60l9i7n4nlobcroik2le5ofe6v2rn4@4ax.com>
 <Pine.LNX.4.53.0403291441160.5939@gremlin.fruitbat.org>
 <3372.1080639122@trentino.logica.co.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Tue, 30 Mar 2004, Oliver Kiddle wrote:

> "Peter A. Castro" wrote:
> > > I run zsh on Cygwin, unlike bash zsh gets very upset if it sees dos
> > > returns. I have to run dos2unix on my zsh scripts.
> > >
> > > I haven't seen an explanation for this
> > Hmm... I'll have to look into this.  I thought I'd corrected this for
> > Cygwin...
>
> Are those corrections likely to be limited to the Cygwin package for
> zsh?

Yes.  Currently, my changes are Cygwin specific and really don't apply to
the other platforms.

> I don't use Cygwin myself but from a quick search, it looks like there
> is an O_TEXT flag to open which we could use (a couple of places in
> init.c would cover scripts I think). Wouldn't work where the script
> comes from stdin, though. Does that perhaps help?

I'm aware of O_TEXT and I thought I'd changed all of the places where
files are opened already, but I just checked my patches and those changes
are gone!  AARRGGHH!!  Ok, I'll re-edit and get that back in.  Going
through stdin or via piped fds may be an issue still.  Anyway, thanks for
the thought!

> Oliver

-- 
Peter A. Castro <doctor@fruitbat.org> or <Peter.Castro@oracle.com>
	"Cats are just autistic Dogs" -- Dr. Tony Attwood


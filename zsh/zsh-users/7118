From zsh-users-return-7118-mason-zsh=primenet.com.au@sunsite.dk Fri Mar 05 15:27:24 2004
Return-Path: <zsh-users-return-7118-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8172 invoked from network); 5 Mar 2004 15:27:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 5 Mar 2004 15:27:23 -0000
Received: (qmail 13468 invoked by alias); 5 Mar 2004 15:27:06 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7118
Received: (qmail 13391 invoked from network); 5 Mar 2004 15:27:06 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 5 Mar 2004 15:27:05 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [81.134.135.91] by sunsite.dk (MessageWall 1.0.8) with SMTP; 5 Mar 2004 15:27:5 -0000
Received: from uk.ibm.com (localhost [127.0.0.1])
	by koetsu.lan (Postfix) with ESMTP id EBEED5FC28
	for <zsh-users@sunsite.dk>; Fri,  5 Mar 2004 15:25:43 +0000 (GMT)
Message-ID: <40489BF7.3020001@uk.ibm.com>
Date: Fri, 05 Mar 2004 15:25:43 +0000
From: Cosmo <cosmo@uk.ibm.com>
Organization: IBM Informix
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040114
X-Accept-Language: en, en-gb, en-us
MIME-Version: 1.0
Cc: Zsh users list <zsh-users@sunsite.dk>
Subject: Re: 4.2.0-pre-3
References: <20681.1078496403@csr.com>
In-Reply-To: <20681.1078496403@csr.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Peter Stephenson wrote:
> 
> 
> 
> I've uploaded 4.2.0-pre-3 to ftp.zsh.org.
> 
> Used autoconf 2.59 to try to improve matters on HPUX.

Unfortunately my HPSUX 11.11 seems to have a broken /bin/sh and this
part of configure gets the wrong PATH_SEPARATOR.

# The user is always right.
if test "${PATH_SEPARATOR+set}" != set; then
   echo "#! /bin/sh" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
   if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
     PATH_SEPARATOR=';'
   else
     PATH_SEPARATOR=:
   fi
:  rm -f conf$$.sh
fi

Once that is broken, it can't find awk... and other bad things
happen. Manually setting PATH_SEPARATOR=: then gives me a slew of:

checking sys/time.h usability... no
checking sys/time.h presence... yes
configure: WARNING: sys/time.h: present but cannot be compiled
configure: WARNING: sys/time.h:     check for missing prerequisite headers?
configure: WARNING: sys/time.h: see the Autoconf documentation
configure: WARNING: sys/time.h:     section "Present But Cannot Be Compiled"
configure: WARNING: sys/time.h: proceeding with the preprocessor's result
configure: WARNING: sys/time.h: in the future, the compiler will take precedence
configure: WARNING:     ## ------------------------------------------ ##
configure: WARNING:     ## Report this to the AC_PACKAGE_NAME lists.  ##
configure: WARNING:     ## ------------------------------------------ ##
checking for sys/time.h... yes

For a number of header files.

First compilation then fails with:

         gcc -c -I.  -DHAVE_CONFIG_H -Wall -Wmissing-prototypes -O2  -o builtin.o builtin.c
In file included from system.h:110,
                  from zsh.mdh:13,
                  from builtin.c:33:
/usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.11/3.1/include/stdio.h:607: parse error before 
"_hpux_size_t"
/usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.11/3.1/include/stdio.h:608: parse error before 
"_hpux_size_t"
In file included from /usr/include/strings.h:14,
                  from system.h:203,
                  from zsh.mdh:13,
                  from builtin.c:33:
/usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.11/3.1/include/string.h:263: parse error before 
"_hpux_size_t"
/usr/local/lib/gcc-lib/hppa2.0n-hp-hpux11.11/3.1/include/string.h:315: parse error before 
"_hpux_size_t"

I didn't build or install the gcc 3.1 that is on this machine - I'll try alternatives.







Cosmo



From zsh-workers-return-17632-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 06 15:26:18 2002
Return-Path: <zsh-workers-return-17632-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10154 invoked from network); 6 Sep 2002 15:26:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Sep 2002 15:26:17 -0000
Received: (qmail 29546 invoked by alias); 6 Sep 2002 15:26:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17632
Received: (qmail 29530 invoked from network); 6 Sep 2002 15:26:10 -0000
X-VirusChecked: Checked
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: PATCH: _cvs
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <31479.1031325820.1@logica.com>
Date: Fri, 06 Sep 2002 16:23:48 +0100
Sender: kiddleo@logica.com
Message-Id: <E17nKxY-0008Br-00@bimbo.logica.co.uk>

This adds descriptions for the keyword substitutions and corrects
`don't recursive' to `don't recurse' which makes more sense.

Index: Completion/Unix/Command/_cvs
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_cvs,v
retrieving revision 1.16
diff -u -r1.16 _cvs
--- Completion/Unix/Command/_cvs	16 Jul 2002 04:47:58 -0000	1.16
+++ Completion/Unix/Command/_cvs	6 Sep 2002 15:03:13 -0000
@@ -125,7 +125,7 @@
 _cvs_annotate () {
   # "+lr:D:fR"
   _arguments -s \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '-f[use head revision]' \
     '(-l)-R[recursive]' \
     '(-f -D)-r+[specify revision]:tag:_cvs_revisions' \
@@ -137,7 +137,7 @@
 _cvs_rannotate () {
   # "+lr:D:fR"
   _arguments -s \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '-f[use head revision]' \
     '(-l)-R[recursive]' \
     '(-f -D)-r+[specify revision]:tag:_cvs_revisions' \
@@ -153,7 +153,7 @@
     '-A[reset sticky tags, dates and -k]' \
     '-n[disable checkout program]' \
     '-f[use most recent revision if -D/-r is not matched]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '(-s)-c[module database]' \
     '(-c)-s[module database with status]' \
@@ -171,7 +171,7 @@
   # "+nlRm:fF:r:"
   _arguments -s \
     '-n[disable module program]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-f[force to commit]' \
     '(-F)-m+[message]:message:_cvs_m' \
@@ -217,7 +217,7 @@
 
   # "+abcdefhilnpstuw0123456789BHNRC:D:F:I:L:U:V:W:k:r:"
   _arguments -s \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-k+[keyword]:keyword substitution:_cvs_k' \
     '(-r)-D+[specify date]:date:_cvs_D' \
@@ -299,7 +299,7 @@
 _cvs_edit () {
   # "+lRa:"
   _arguments -s \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-a+[specify action]:action:(edit unedit commit all none)' \
     '*:file:_cvs_files'
@@ -309,7 +309,7 @@
 _cvs_editors () {
   # "+lR"
   _arguments -s \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '*:file:_cvs_files'
 }
@@ -321,7 +321,7 @@
     '-N[don'\''t shorten module paths]' \
     '-n[disable checkout program]' \
     '-f[use most recent revision if -D/-r is not matched]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-k+[keyword]:keyword substitution:_cvs_k' \
     '-d+[directory]:directory:_files -/' \
@@ -415,7 +415,7 @@
   _arguments -s \
     '-b[default branch]' \
     '(-t)-h[header]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-N[don'\''t list tags]' \
     '(-h)-t[header with descriptive text]' \
@@ -444,7 +444,7 @@
     '-u[output a unified diff]' \
     '-f[use most recent revision if -D/-r is not matched]' \
     '-s[short patch]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-V+[specify version]:version:' \
     '-k+[keyword]:keyword substitution:_cvs_k' \
@@ -469,7 +469,7 @@
   # "+flR"
   _arguments -s \
     '-f[force to remove]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '*:removed file:_cvs_remove_arg'
 }
@@ -491,7 +491,7 @@
     '(-d)-a[clear tag from removed files]' \
     '-n[disable tag program]' \
     '(-d)-f[force a head revision]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '(-b)-d[delete tag]' \
     '(-d)-b[create branch]' \
@@ -506,7 +506,7 @@
   # "+vlR"
   _arguments -s \
     '-v[verbose]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '*:file:_cvs_files'
 }
@@ -516,7 +516,7 @@
   # "+FQqlRcdr:D:bf"
   _arguments -s \
     '(-d)-F[move tag if already exists]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-c[check that working files unmodified]' \
     '(-b)-d[delete tag]' \
@@ -532,7 +532,7 @@
 _cvs_unedit () {
   # "+lR"
   _arguments -s \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '*:file:_cvs_files'
 }
@@ -546,7 +546,7 @@
     '-p[check out to standard output]' \
     '-P[prune empty directory]' \
     '-f[use head revision]' \
-    '(-R)-l[don'\''t recursive]' \
+    "(-R)-l[don't recurse]" \
     '(-l)-R[recursive]' \
     '-d[create directories]' \
     '-k+[keyword]:keyword substitution:_cvs_k' \
@@ -568,14 +568,14 @@
     case "$words[2]" in
       on|off) # "+lR"
 	_arguments -s \
-	    '(-R)-l[don'\''t recursive]' \
+	    "(-R)-l[don't recurse]" \
 	    '(-l)-R[recursive]' \
 	    ':watch command:' \
 	    '*:file:_cvs_files'
 	;;
       add|remove) # "+lRa:"
 	_arguments -s \
-	    '(-R)-l[don'\''t recursive]' \
+	    "(-R)-l[don't recurse]" \
 	    '(-l)-R[recursive]' \
 	    '*-a+[specify action]:action:(edit unedit commit all none)' \
 	    ':watch command:' \
@@ -589,7 +589,7 @@
 _cvs_watchers () {
   # "+lR"
   _arguments -s \
-      '(-R)-l[don'\''t recursive]' \
+      "(-R)-l[don't recurse]" \
       '(-l)-R[recursive]' \
       '*:file:_cvs_files'
 }
@@ -674,7 +674,13 @@
 
 (( $+functions[_cvs_k] )) ||
 _cvs_k () {
-  _tags values && compadd "$@" kv kvl k o b v
+  _values 'keyword substitution' \
+    'kv[generate keyword strings using the default form]' \
+    "kvl[include locker's name in strings if given revision is locked]" \
+    'k[generate only keyword names in keyword strings; omit their values]' \
+    'o[generate the old keyword string as present in the file before check in]' \
+    "b[binary - like \`o' but also inhibit line ending conversions]" \
+    'v[generate only keyword values for keyword strings]'
 }
 
 (( $+functions[_cvs_m] )) ||

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


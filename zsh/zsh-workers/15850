From zsh-workers-return-15850-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 21 11:01:35 2001
Return-Path: <zsh-workers-return-15850-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6633 invoked from network); 21 Sep 2001 11:01:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Sep 2001 11:01:34 -0000
Received: (qmail 23589 invoked by alias); 21 Sep 2001 11:01:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15850
Received: (qmail 23575 invoked from network); 21 Sep 2001 11:01:23 -0000
X-VirusChecked: Checked
Sender: kiddleo@cav.logica.co.uk
Message-ID: <3BAB1D55.8258B237@yahoo.co.uk>
Date: Fri, 21 Sep 2001 11:58:29 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: printf builtin
References: <3BAA3F2A.86D73181@yahoo.co.uk> <1010920203312.ZM16858@candle.brasslantern.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Bart Schaefer wrote:
> 
> On Sep 20,  8:10pm, Oliver Kiddle wrote:
> }
> } Ksh and bash both have a printf builtin. This adds one to zsh.
> 
> Did you also notice that "print -f" in ksh is the same as printf?

Oh dear. I didn't notice that. print was one of the things which David
Korn was keen to have in the standard and without the -f, ksh's print
would be little more than echo. It's also quite a nice feature.

> This raises the question of whether it should be possible to combine
> print -f with all the other print options, which would imply quite a
> different implementation from what's in this patch, and would likely
> preclude it from being a module.

ksh allows -s, -p and -u to be combined with print -f. What you say
about this precluding it from being a module is certainly true. What I
think I'll do is commit this as it is for now. I also think this could
be safely committed to the stable branch so unless anyone says otherwise
I'll do that. My argument for this being that it doesn't touch any
existing functionality and just does something where we didn't do
anything useful before - so it is similar to us allowing new completion
functions to be added to 4.0.

I'll put the ksh print -f functionality on my todo list though. It makes
sense to combine the -b, -m, -s, -o, -O, -i, -u, -p, -z, -D and -P
options with -f. -r, -R, -n, -l, -N and -c would make no sense to
combine. -l and -N would be fairly redundant because it would be better
to use a format of "%s\n" or "%s\0" so they should perhaps then be
declared obsolete. -P (and maybe -D) is also perhaps slightly
unfortunate because a %P format specification might be better.

Oliver


_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


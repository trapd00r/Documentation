From zsh-workers-return-8328-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Oct 19 05:23:00 1999
Return-Path: <zsh-workers-return-8328-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5523 invoked from network); 19 Oct 1999 05:22:59 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Oct 1999 05:22:59 -0000
Received: (qmail 16700 invoked by alias); 19 Oct 1999 05:22:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8328
Received: (qmail 16692 invoked from network); 19 Oct 1999 05:22:53 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991019052248.ZM4198@candle.brasslantern.com>
Date: Tue, 19 Oct 1999 05:22:48 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Patch: 3.1.6-bart-7: Another rlimit
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Albert Chin reports that IRIX 6.5 has

     RLIMIT_PTHREAD   The maximum number of threads (pthreads(5)) that a
                      process may create.  Functions that attempt to create
                      new threads beyond this limit will fail with the error
                      EAGAIN.

Index: Doc/Zsh/builtins.yo
===================================================================
@@ -521,6 +521,7 @@
 sitem(tt(descriptors))(Maximum value for a file descriptor.)
 sitem(tt(filesize))(Largest single file allowed.)
 sitem(tt(maxproc))(Maximum number of processes.)
+sitem(tt(maxpthreads))(Maximum number of threads per process.)
 sitem(tt(memorylocked))(Maximum amount of memory locked in RAM.)
 sitem(tt(memoryuse))(Maximum resident set size.)
 sitem(tt(resident))(Maximum resident set size.)
Index: Src/Builtins/rlimits.awk
===================================================================
@@ -33,6 +33,7 @@
 	    if (limnam == "NOFILE")  { msg[limnum] = "Ndescriptors" }
 	    if (limnam == "NPROC")   { msg[limnum] = "Nmaxproc" }
 	    if (limnam == "OFILE")   { msg[limnum] = "Ndescriptors" }
+	    if (limnam == "PTHREAD") { msg[limnum] = "Nmaxpthreads" }
 	    if (limnam == "RSS")     { msg[limnum] = "Mresident" }
 	    if (limnam == "SBSIZE")  { msg[limnum] = "Msockbufsize" }
 	    if (limnam == "STACK")   { msg[limnum] = "Mstacksize" }

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


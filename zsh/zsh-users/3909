From zsh-users-return-3909-mason-zsh=primenet.com.au@sunsite.dk Sat Jun 02 00:40:44 2001
Return-Path: <zsh-users-return-3909-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9397 invoked from network); 2 Jun 2001 00:40:42 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Jun 2001 00:40:42 -0000
Received: (qmail 52 invoked by alias); 2 Jun 2001 00:40:08 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3909
Received: (qmail 38 invoked from network); 2 Jun 2001 00:40:07 -0000
Message-ID: <20010602004009.8849.qmail@web12507.mail.yahoo.com>
Date: Fri, 1 Jun 2001 17:40:09 -0700 (PDT)
From: a normal guy <ee_in_co@yahoo.com>
Subject: HP-UX 11.00 tgetenv dilemma
To: zsh-users@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hello:

I have been championing zsh here at my lab at HP and love this
shell.  Up until recently we were using HP-UX 10.20 with zsh
3.1.9 with no problems.  However, when we upgraded to HP-UX
11.00, the termcap compatibility was broken.  I finally
figured out the problem.

HP-UX 11.00 has two man pages discussing tgetent.  'man termcap'
says:

=======================================================(quote)
        :
tgetent()       ...tgetent() returns -1 if it cannot
                access the terminfo directory, 0 if there is no
                capability file for name, and 1 if all goes
well.
        :
=======================================================(unquote)

but 'man tgetent' says


=======================================================(quote)
	:
RETURN VALUE
      Upon successful completion, functions that return an
      integer return OK(0).  Otherwise, they return ERR(-1).

      Functions that return pointers return a null pointer on
      error.
	:
=======================================================(unquote)

The code in init.c, init_term() requires the man termcap
functionality.  HP claims that the man tgetent functionality is
the true X-Open Standard.  (I have not confirmed this.)

We can solve the problem in two ways.

1. If we link with -lHcurses, we get tgetent to return the
expected 1 with success.  I suppose this would be done in the
configure script.  This library may not be around for the
future.

2. If the X-Open Standard is truely as HP claims, we can add
another #ifdef block to the existing TGETENT_ACCEPTS_NULL to
work with this situation.  Then we link with -lcurses as the
current configure script does.

If possible, I would appreciate a fix in the next release
(either 3.1.x or 4.0.x).

Thanks

Scott


__________________________________________________
Do You Yahoo!?
Get personalized email addresses from Yahoo! Mail - only $35 
a year!  http://personal.mail.yahoo.com/


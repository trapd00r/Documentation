From zsh-workers-return-27175-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 20 08:34:21 2009
Return-Path: <zsh-workers-return-27175-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15186 invoked from network); 20 Jul 2009 08:34:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 20 Jul 2009 08:34:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 96767 invoked from network); 20 Jul 2009 08:34:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Jul 2009 08:34:08 -0000
Received: (qmail 17618 invoked by alias); 20 Jul 2009 08:34:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 27175
Received: (qmail 17592 invoked from network); 20 Jul 2009 08:33:59 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 20 Jul 2009 08:33:59 -0000
Received: from smtp1-g21.free.fr (smtp1-g21.free.fr [212.27.42.1])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 236978027106
	for <zsh-workers@sunsite.dk>; Mon, 20 Jul 2009 10:33:55 +0200 (CEST)
Received: from smtp1-g21.free.fr (localhost [127.0.0.1])
	by smtp1-g21.free.fr (Postfix) with ESMTP id 4123C9401D3;
	Mon, 20 Jul 2009 10:33:52 +0200 (CEST)
Received: from xvii.vinc17.org (c5850-a2-3-62-147-9-68.dial.proxad.net [62.147.9.68])
	by smtp1-g21.free.fr (Postfix) with ESMTP id A3B58940183;
	Mon, 20 Jul 2009 10:33:49 +0200 (CEST)
Received: from vinc17 by xvii.vinc17.org with local (Exim 4.69)
	(envelope-from <vincent@vinc17.org>)
	id 1MSoHQ-0002N4-TD; Mon, 20 Jul 2009 10:31:28 +0200
Date: Mon, 20 Jul 2009 10:31:28 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk
Subject: Re: zsh 4.3.10 terminates with SIGINT when one types Ctrl-G in emacs
 under Mac OS X
Message-ID: <20090720083128.GA6861@xvii>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <schaefer@brasslantern.com>
 <090712193623.ZM14823@torch.brasslantern.com>
 <200907131839.n6DIdO6Z003291@pws-pc.ntlworld.com>
 <20090716162419.GA26179@prunille.vinc17.org>
 <090717222936.ZM8648@torch.brasslantern.com>
 <20090718101602.GA5392@xvii>
 <090718113509.ZM10405@torch.brasslantern.com>
 <20090718230930.GB5412@xvii>
 <090719113147.ZM3140@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <090719113147.ZM3140@torch.brasslantern.com>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.20-5983-vl-r30292 (2009-07-14)
X-Virus-Scanned: ClamAV 0.94.2/9589/Sun Jul 19 05:14:56 2009 on bifrost
X-Virus-Status: Clean

On 2009-07-19 11:31:47 -0700, Bart Schaefer wrote:
> On Jul 19,  1:09am, Vincent Lefevre wrote:
> } Subject: Re: zsh 4.3.10 terminates with SIGINT when one types Ctrl-G in em
> }
> } > } [bash] ignores SIGINT if the caller chose to ignore it; also when
> } > } executing a process, it restores the trap to the default behavior,
> } > } in case it was ignored (that's another difference with zsh).
> } > 
> } > And that's a case where I think the zsh behavior is in fact preferable.
> } 
> } Is there any reason?
> 
> If bash really "restores the trap to the default behavior, in case it was
> ignored" then I think bash is wrong because "the default behavior" is to
> exit on the signal.

Sorry, I was not enough clear. I meant that bash restores the trap
to the behavior at the time that bash was called. But it seems to
be something different, something like if SIGINT is ignored when
bash is executed, a "trap command INT" has no effect unless both
bash and its child receive a SIGINT. Now, this behavior is a bit
strange, maybe a bug.

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


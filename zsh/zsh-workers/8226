From zsh-workers-return-8226-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Oct 12 17:26:21 1999
Return-Path: <zsh-workers-return-8226-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10579 invoked from network); 12 Oct 1999 17:26:20 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Oct 1999 17:26:20 -0000
Received: (qmail 5247 invoked by alias); 12 Oct 1999 17:26:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8226
Received: (qmail 5233 invoked from network); 12 Oct 1999 17:26:12 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <991012171307.ZM9148@candle.brasslantern.com>
Date: Tue, 12 Oct 1999 17:13:07 +0000
In-Reply-To: <56D553C0B61BD311AD2300A0C9F485C2197AFF@xfc02.fc.hp.com>
Comments: In reply to "GARCIA,JULIO (HP-FtCollins,ex1)" <julio_garcia@am.exch.hp.com>
        "FW: zsh-3.1.6 on hppa2.0n-hp-hpux11.00?" (Oct 12,  6:46am)
References: <56D553C0B61BD311AD2300A0C9F485C2197AFF@xfc02.fc.hp.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "GARCIA,JULIO (HP-FtCollins,ex1)" <julio_garcia@am.exch.hp.com>,
        "'zsh-workers@sunsite.auc.dk'" <zsh-workers@sunsite.auc.dk>
Subject: Re: FW: zsh-3.1.6 on hppa2.0n-hp-hpux11.00?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Oct 12,  6:46am, GARCIA,JULIO (HP-FtCollins,ex1) wrote:
} Subject: FW: zsh-3.1.6 on hppa2.0n-hp-hpux11.00?
}
} configuring for zsh 3.1.6
} checking host system type... Invalid configuration `hppa2.0n-hp-hpux11.00':
} machine `hppa2.0n-hp' not recognized

I think the problem is that zsh's config.sub has become out of date with
respect to the version of autoconf that was used to produce the configure
script -- although on my system the only other "config.sub"s I can find,
which are the from automake and libtool, are even further out of whack
than zsh's.

However, it puzzles me greatly that configure didn't stop upon getting
that error.  It should have printed:

    configure: error: can not guess host type; you must specify one

and then exited.  (The one to specify would be "hppa2.0-hp-hpux11.00" i.e.
with no "n" after the "0").

Index: config.sub
===================================================================
@@ -175,7 +175,8 @@
 	      | m88k-* | sparc-* | ns32k-* | fx80-* | arc-* | arm-* | c[123]* \
 	      | mips-* | pyramid-* | tron-* | a29k-* | romp-* | rs6000-* \
 	      | power-* | none-* | 580-* | cray2-* | h8300-* | i960-* \
-	      | xmp-* | ymp-* | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* \
+	      | xmp-* | ymp-* \
+	      | hppa-* | hppa1.0-* | hppa1.1-* | hppa2.0-* | hppa2.0[nw]-* \
 	      | alpha-* | alphaev5-* | alphaev56-* | we32k-* | cydra-* \
 	      | ns16k-* | pn-* | np1-* | xps100-* | clipper-* | orion-* \
 	      | sparclite-* | pdp11-* | sh-* | powerpc-* | powerpcle-* \


} ./configure[2861]: test: Specify a parameter with this command.

It's difficult to tell where this is coming from.  I should have asked you
to send your config.log file.

}  ~/Shar/zsh/zsh-3.1.6 > make 
} No suffix list.

This is just "make" warning needlessly that zsh's build has intentionally
clobbered one of its defaults.

} sh: cc -E:  not found.

I'm going to assume for the time being that this is an artifact of something
you did while configuring on a different machine than where you compiled,
and instead look at the other output you sent:

} 	nawk -f ../Src/makepro.awk builtin.c Src > builtin.pro
[...]
} 	cc -c -I.  -DHAVE_CONFIG_H -O  -o builtin.o builtin.c
} cc: "builtin.pro", line 4: error 1000: Unexpected symbol: "in".
} cc: "builtin.pro", line 5: error 1000: Unexpected symbol: "ebuil".
} cc: "builtin.pro", line 6: error 1000: Unexpected symbol: "a".
} cc: "builtin.pro", line 6: error 1000: Unexpected symbol: "void".
} cc: "builtin.pro", line 6: error 1000: Unexpected symbol: "HashNode".
} cc: "builtin.pro", line 6: error 1000: Unexpected symbol: "prin".
} cc: "builtin.pro", line 6: error 1000: Unexpected symbol: ";".
} cc: "builtin.pro", line 6: warning 558: Empty declaration.
} cc: "builtin.pro", line 7: error 1000: Unexpected symbol: "a".
} cc: "builtin.pro", line 7: error 1000: Unexpected symbol: "void".
} cc: "builtin.pro", line 8: error 1000: Unexpected symbol: "execbuil".
} cc: "builtin.pro", line 8: error 1000: Unexpected symbol: "args".
} cc: "builtin.pro", line 8: error 1000: Unexpected symbol: "in".
} cc: "builtin.pro", line 8: error 1000: Unexpected symbol: ")".
} cc: "builtin.pro", line 9: error 1000: Unexpected symbol: "bin_enable".
} cc: error 2017: Cannot recover from earlier errors, terminating.
} *** Error exit code 1

Every lower-case "t" in your builtin.pro file has been turned into a space.
This suggests that your copy of nawk is misinterpreting this command in
makepro.awk:

	gsub(/\t/, " ")

And it may also be misreading

	if (line == "" && $0 ~ /^[ \t]*#/) {

Either obtain gawk, or try replacing those \t in Src/makepro.awk with
actual tab characters, then rm Src/*.pro and reconfigure.  Let us know
how it goes.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-6961-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jul 03 13:17:16 1999
Return-Path: <zsh-workers-return-6961-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23510 invoked from network); 3 Jul 1999 13:17:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Jul 1999 13:17:14 -0000
Received: (qmail 8538 invoked by alias); 3 Jul 1999 13:17:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6961
Received: (qmail 8530 invoked from network); 3 Jul 1999 13:17:07 -0000
To: zsh-workers@sunsite.auc.dk
Path: mason
From: mason@primenet.com.au (Geoff Wing)
X-Newsgroups: lists.zsh.workers
Subject: Re: Job control bug with pws-25
Date: 3 Jul 1999 13:16:55 GMT
Organization: PrimeNet Computer Consultants
Lines: 50
Distribution: local
Message-ID: <slrn7ns3a7.m03.mason@coral.primenet.com.au>
References: <9907031219.AA13740@ibmth.df.unipi.it>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 931007815 22532 203.43.15.2 (3 Jul 1999 13:16:55 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: 3 Jul 1999 13:16:55 GMT
User-Agent: slrn/0.9.5.6 (UNIX)

Peter Stephenson <pws@ibmth.df.unipi.it> typed:
:Actually, as soon as I had I chance to look I found some more job control
:bugs (hope I got all the right patches into pws-25).  If you do
:while true; do zcat; done
:and hit ^C repeatedly, the zcat gets killed but the loop continues.

Didn't really have a problem with this.  I was able to stop it with little
grief.

:Eventually, however, you catch the shell when it's not running zcat and the
:loop exits.  Doing this a few times gives the message
:zsh: job table full

Never saw this.

:and you can't run any more external jobs, so it's not getting deleted
:properly.


:Secondly (and this really makes me suspect I've missed a patch):
:% fn() { sleep 2; print foo; }
:% fn
:^Zzsh: 13719 suspended  fn
:% bg
:[1]  - continued  fn
:<after a while>
:% jobs -l
:[1]  - 13719 running    fn

% ps 13719
  PID TT  STAT      TIME COMMAND
13719 p0  T      0:00.00 zsh

That's why you had to kill -9 it. 
Now, what's this bit: "[1]  - 13719"...
                            ^
			    ^ ?????
% fg
fg: no current job
% %
fg: no such job: 2

:% fg %1
:^C^C^C^C^C^C^C^Z^Z^Z^Z^Z^Z^Z^Z

Regards,
-- 
Geoff Wing : <gcw@pobox.com>     Work URL: http://www.primenet.com.au/
Rxvt Stuff : <gcw@rxvt.org>      Ego URL : http://pobox.com/~gcw/
Zsh Stuff  : <gcw@zsh.org>       Phone   : (Australia) 0413 431 874


From zsh-users-return-7826-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 13 09:35:56 2004
Return-Path: <zsh-users-return-7826-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4076 invoked from network); 13 Aug 2004 09:35:55 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Aug 2004 09:35:55 -0000
Received: (qmail 91537 invoked from network); 13 Aug 2004 09:35:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Aug 2004 09:35:50 -0000
Received: (qmail 590 invoked by alias); 13 Aug 2004 09:35:07 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7826
Received: (qmail 580 invoked from network); 13 Aug 2004 09:35:07 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 13 Aug 2004 09:35:07 -0000
Received: (qmail 89577 invoked from network); 13 Aug 2004 09:33:15 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 13 Aug 2004 09:33:11 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-16.tower-36.messagelabs.com!1092389589!8454057
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 3872 invoked from network); 13 Aug 2004 09:33:09 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-16.tower-36.messagelabs.com with SMTP; 13 Aug 2004 09:33:09 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i7D9X8f6006347;
	Fri, 13 Aug 2004 10:33:08 +0100
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP
	id 7EAA5791B004; Fri, 13 Aug 2004 11:33:08 +0200 (CEST)
Cc: Zsh-users List <zsh-users@sunsite.dk>
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <20040813074526.GM1191@localhost> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <20040813074526.GM1191@localhost>
To: Jesper Holmberg <jeho5791@student.uu.se>
Subject: Re: Problem with complete-all 
Date: Fri, 13 Aug 2004 11:33:08 +0200
Message-ID: <14903.1092389588@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

Jesper Holmberg wrote:
> I can't get complete-all to work as I would like it to. Perhaps I have

> This is what I have in my .zshrc, taken from the manual:

It seems we need to fix the example in the manual.

> zle -C all-matches complete-word _generic
> bindkey '^Xx' all-matches
> zstyle ':completion:all-matches:*' old-matches only
> zstyle ':completion:all-matches::::' completer _all_matches

Try changing the last style to add _complete after _all_matches:
  zstyle ':completion:all-matches::::' completer _all_matches _complete
It needs _complete there to actually generate some matches.

I also use this:
  zstyle ':completion:all-matches:*' insert true
which makes it just insert the matches instead of giving you them as
an extra match.

and this:
  zstyle ':completion:all-matches:*' file-patterns \
      '%p:globbed-files' '*(-/):directories' '*:all-files'
That prevents it from inserting all the sub-directories in cases where
subdirectories are only completed to allow you to complete files within
them.

Oliver


From zsh-users-return-6966-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 01 00:36:34 2004
Return-Path: <zsh-users-return-6966-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12360 invoked from network); 1 Jan 2004 00:36:33 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 Jan 2004 00:36:33 -0000
Received: (qmail 6189 invoked by alias); 1 Jan 2004 00:36:17 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6966
Received: (qmail 6091 invoked from network); 1 Jan 2004 00:36:16 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 1 Jan 2004 00:36:16 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [66.111.4.26] by sunsite.dk (MessageWall 1.0.8) with SMTP; 1 Jan 2004 0:36:16 -0000
X-Sasl-enc: ecGrI8d4DhXnJhMfl+2BcQ 1072917372
Received: from fastmail.fm (son-ts12-20.mlode.com [65.160.220.83])
	by www.fastmail.fm (Postfix) with ESMTP id 39763490E6A
	for <zsh-users@sunsite.dk>; Wed, 31 Dec 2003 19:36:11 -0500 (EST)
Date: Wed, 31 Dec 2003 16:34:55 -0800
Mime-Version: 1.0 (Apple Message framework v553)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Subject: zsh 4.1.1 make check errors on OS X 10.2
From: Culley Harrelson <culley@fastmail.fm>
To: zsh-users@sunsite.dk
Content-Transfer-Encoding: 7bit
Message-Id: <525FE6E8-3BF2-11D8-B757-000A9591EB8C@fastmail.fm>
X-Mailer: Apple Mail (2.553)

I am new to zsh so I don't know how to do further tests on the below 
errors.  It installed fine and seems to be working without problems.  
With 10.3 out now my environment is getting obscure but I thought I 
would post these test results anyway...

culley

=============
culley@localhost ~/Documents/software/zsh-4.1.1
  % make check
cd Test ; make check
if test -n ""; then \
   cd .. && DESTDIR= \
   make MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
fi
for f in ./*.ztst; do \
   ../Src/zsh +Z -f ./ztst.zsh $f; \
done
./A01grammar.ztst: starting.
This test hangs the shell when it fails...
./A01grammar.ztst: all tests successful.
./A02alias.ztst: starting.
./A02alias.ztst: all tests successful.
./A03quoting.ztst: starting.
./A03quoting.ztst: all tests successful.
./A04redirect.ztst: starting.
./A04redirect.ztst: all tests successful.
./A05execution.ztst: starting.
./A05execution.ztst: all tests successful.
./A06assign.ztst: starting.
./A06assign.ztst: all tests successful.
./B01cd.ztst: starting.
./B01cd.ztst: all tests successful.
./B02typeset.ztst: starting.
./B02typeset.ztst: all tests successful.
./B03print.ztst: starting.
./B03print.ztst: all tests successful.
./B04read.ztst: starting.
./B04read.ztst: all tests successful.
./C01arith.ztst: starting.
./C01arith.ztst: all tests successful.
./C02cond.ztst: starting.
Test ./C02cond.ztst failed: bad status 1, expected 0 from:
   sleep 1
   cat unmodified
   touch newnewnew
   if [[ $OSTYPE == "cygwin" ]]; then
     print -u8 "Warning: not testing [[ -N file ]] (not supported on 
Cygwin)"
     true
   else
     [[ -N newnewnew && ! -N unmodified ]]
   fi
Was testing: -N cond
./C02cond.ztst: test failed.
The following may (or may not) help identifying the cause:
   This test can fail on NFS-mounted filesystems as the access and
   modification times are not updated separately.  This does not indicate
   a problem in the shell.
./C03traps.ztst: starting.
This test takes at least three seconds...
This test, too, takes at least three seconds...
./C03traps.ztst: all tests successful.
./C04funcdef.ztst: starting.
./C04funcdef.ztst: all tests successful.
./D01prompt.ztst: starting.
./D01prompt.ztst: all tests successful.
./D02glob.ztst: starting.
./D02glob.ztst: all tests successful.
./D03procsubst.ztst: starting.
./D03procsubst.ztst: all tests successful.
./D04parameter.ztst: starting.
./D04parameter.ztst: all tests successful.
./D05array.ztst: starting.
./D05array.ztst: all tests successful.
./D06subscript.ztst: starting.
./D06subscript.ztst: all tests successful.
./E01options.ztst: starting.
./E01options.ztst: all tests successful.
./E02xtrace.ztst: starting.
./E02xtrace.ztst: all tests successful.
./V01zmodload.ztst: starting.
Warning: zsh/example not linked: not checking autoloading
./V01zmodload.ztst: all tests successful.
./V02zregexparse.ztst: starting.
./V02zregexparse.ztst: all tests successful.
./Y01completion.ztst: starting.
comptestinit:7: failed to load module: zsh/zpty
Test ./Y01completion.ztst failed: non-zero status from preparation code:
   comptestinit -z $ZTST_testdir/../Src/zsh &&
   {
     mkdir dir1 &&
     mkdir dir2 &&
     touch file1 &&
     touch file2
   }
./Y01completion.ztst: test failed.
Test ./Y01completion.ztst failed: bad status 1, expected 0 from:
   comptest $': \t\t\t\t\t\t\t'
Error output:
comptest:2: command not found: zpty
comptest:3: command not found: zpty
Was testing: directories and files
./Y01completion.ztst: test failed.
./Y02compmatch.ztst: starting.
comptestinit:7: failed to load module: zsh/zpty
Test ./Y02compmatch.ztst failed: non-zero status from preparation code:
   comptestinit -z $ZTST_testdir/../Src/zsh &&
   {
     list1=(IndianRed IndianRed2 IndianRed3 IndianRed4)
     test_code () {
         matcher=$1;
         list=$2;
         code="compdef _tst tst ; _tst () { echo -n '<COMPADD>';compadd 
-M '"
         code="$code$matcher"
         code="$code'  - ${(P)list} ; echo  -n '</COMPADD>'"
         code="$code; $extra_cmd"
         code="$code; echo -n '<INSERT_POSITIONS>'"
         code="$code; echo \$compstate[insert_positions]"
         code="$code; echo -n '</INSERT_POSITIONS>'"
         code="$code}"
         comptesteval "$code"
     }
   }
./Y02compmatch.ztst: test failed.
Test ./Y02compmatch.ztst failed: bad status 1, expected 0 from:
  test_code z: list1
  comptest  $'tst \t'
Error output:
(eval):1: command not found: test_code
comptest:2: command not found: zpty
comptest:3: command not found: zpty
Was testing: Match Error for "z:"
./Y02compmatch.ztst: test failed.
./Y03arguments.ztst: starting.
comptestinit:7: failed to load module: zsh/zpty
Test ./Y03arguments.ztst failed: non-zero status from preparation code:
   comptestinit -z $ZTST_testdir/../Src/zsh &&
   {
     comptesteval 'compdef _tst tst'
     tst_arguments () { comptesteval "_tst () { _arguments ${${(@qq)*}} 
}" }
   }
./Y03arguments.ztst: test failed.
Test ./Y03arguments.ztst failed: bad status 1, expected 0 from:
  tst_arguments ':desc1:(arg1)'
  comptest $'tst \t\C-wa\t\C-war\t\C-warg\t\C-warg1\t\C-wr\t\C-wx\t \ty 
\t'
Error output:
(eval):1: command not found: tst_arguments
comptest:2: command not found: zpty
comptest:3: command not found: zpty
Was testing: one non-option argument
./Y03arguments.ztst: test failed.
make[1]: [check] Error 1 (ignored)
rm -rf Modules .zcompdump


From zsh-workers-return-11033-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Apr 30 21:00:57 2000
Return-Path: <zsh-workers-return-11033-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26817 invoked from network); 30 Apr 2000 21:00:55 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Apr 2000 21:00:55 -0000
Received: (qmail 4558 invoked by alias); 30 Apr 2000 21:00:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11033
Received: (qmail 4551 invoked from network); 30 Apr 2000 21:00:40 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: PATCH: -> 3.1.7-pre-2
Date: Sun, 30 Apr 2000 22:00:29 +0100
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E12m0pL-0006Bt-00.2000-04-30-22-00-31@mail6.svr.pol.co.uk>

This is the patch to make 3.1.7-pre-2: it fixes up some .distfiles and adds
more or less what I suggested to Etc/NEWS.

Index: Completion/Commands/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Commands/.distfiles,v
retrieving revision 1.1.1.12
diff -u -r1.1.1.12 .distfiles
--- Completion/Commands/.distfiles	2000/03/13 10:26:17	1.1.1.12
+++ Completion/Commands/.distfiles	2000/04/30 20:57:25
@@ -1,6 +1,6 @@
 DISTFILES_SRC='
     .distfiles
-    _bash_completions _correct_filename _correct_word _expand_word 
-    _history_complete_word _read_comp _most_recent_file _complete_help
-    _next_tags
+    _bash_completions _complete_debug _correct_filename _correct_word
+    _expand_word _history_complete_word _read_comp _most_recent_file
+    _complete_help _next_tags
 '
Index: Completion/User/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/.distfiles,v
retrieving revision 1.5
diff -u -r1.5 .distfiles
--- Completion/User/.distfiles	2000/04/28 11:20:55	1.5
+++ Completion/User/.distfiles	2000/04/30 20:57:25
@@ -2,8 +2,9 @@
     .distfiles
     _a2ps _archie _bison _bunzip2 _bzip2 _chown _compress
     _configure _cvs _dd _diff _diff_options _dir_list _dirs
-    _domains _dvi _find _finger _fakeroot _flex _gcc _gdb  _getconf _gprof _groups
-    _gs _gv _gzip _hosts _imagemagick _ispell _killall _lp _lynx
+    _domains _dvi _enscript
+    _find _finger _fakeroot _flex _gcc _gdb  _getconf _gprof _groups
+    _gs _gv _gzip _hosts _imagemagick _ispell _joe _killall _lp _lynx
     _mailboxes _make _man _mh _mount _mutt _my_accounts _mysql_utils _nedit
     _netscape _nslookup _other_accounts _pack _patch _pbm _pdf _perl
     _perl_basepods _perl_builtin_funcs _perl_modules _perldoc
Index: Config/version.mk
===================================================================
RCS file: /cvsroot/zsh/zsh/Config/version.mk,v
retrieving revision 1.5
diff -u -r1.5 version.mk
--- Config/version.mk	2000/04/19 19:03:09	1.5
+++ Config/version.mk	2000/04/30 20:57:27
@@ -27,5 +27,5 @@
 # This must also serve as a shell script, so do not add spaces around the
 # `=' signs.
 
-VERSION=3.1.7-pre-1
-VERSION_DATE='April 19, 2000'
+VERSION=3.1.7-pre-2
+VERSION_DATE='April 30, 2000'
Index: Etc/NEWS
===================================================================
RCS file: /cvsroot/zsh/zsh/Etc/NEWS,v
retrieving revision 1.1.1.5
diff -u -r1.1.1.5 NEWS
--- Etc/NEWS	1999/08/01 14:49:09	1.1.1.5
+++ Etc/NEWS	2000/04/30 20:57:31
@@ -2,6 +2,109 @@
 CHANGES FROM PREVIOUS VERSIONS OF ZSH
 -------------------------------------
 				     
+New features in zsh version 3.1.7
+---------------------------------
+Further enhancements to new completion system:
+ - Comprehensive context-sensitive configuration vai `styles', which
+   can be set by the menu-driven front end in compinstall.
+ - General mechanism for setting patterns to be ignored in a completion;
+   overriding  of patterns to be matched for functions
+ - New completers: _prefix to complete word before cursor, _ignored
+   to complete using words so far ignored (like $fignore but more
+   powerful), _history to complete words from shell history
+ - Multiple use of completers with different options, similalry splitting
+   of different types of completion (`tags') so they are considered with
+   different styles
+ - Many more supplied completions for standard commands which work out of
+   the box, and better handling of command line options/arguments which
+   behave in the usual way   
+ - $fpath now set up to use installed functions by default; functions
+   can be loaded just by `autoload -U compinit; compinit'
+ - Much improved handling of nested quoting
+ - New LIST_PACKED and LIST_ROWS_FIRST completion options and corresponding
+   styles
+ - compctl library separated out (frozen but still supported)
+ - User-friendly introduction available at zsh website
+   http://sunsite.auc.dk/zsh/
+
+Additions to complist listing library (coloured completion and menu
+selection):
+ - Listings can be shown page by page (are by default for new completion)
+ - Menu selection allows full up and down scrolling of long lists
+
+Other editing features:
+ - new parameters $PENDING, $MARK, $BUFFERLINES
+ - Easy display of a prompt from within an editing widget
+
+Code parsing, storing and execution:
+ - Completely new system of storing code internally, greatly optimised
+ - Much less memory for shell functions etc.
+ - Can compile shell functions to .zwc `wordcode' functions for fast
+   loading
+ - Can create `digest' files of entire directories in .zwc format
+
+Parameters:
+ - Floating point support added, similar to ksh93, `typeset -F' and
+   `typeset -E' declare floating point variables; usual C/Fortran-like
+   rules for integer/float conversion
+ - Mathematical library zsh/mathfunc contains all the standard mathematical
+   functions for use in arithmetical expressions
+ - Improved parsing of arithmetical expressions and better error messages
+ - Special parameters can be made local
+ - `typeset -h' hides specialness of parameters, either as parameter
+   attribute or when declaring new local variable
+ - Local parameters can now be exported as in other shells; new option
+   GLOBAL_EXPORTS on by default provides old behaviour that `typeset -x'
+   referred to global parameters.
+ - zsh/parameter module enhanced: now needed for new completion; parameters
+   provided have `-h' flag set so that they are hidden by `typeset', so
+   that existing functions don't need to be changed
+ - Quotes can be stripped from parameter values with ${(Q)...}, providing
+   reverse of ${(q...)...} facility
+
+Globbing and pattern matching:
+ - Pattern matching rewritten for efficiency
+ - Supports `backreferences', i.e. extracting parenthesised chunks of
+   matches, e.g.
+     [[ $foo = (#b)(*/)[^/]* ]]
+   stores the part of $foo up to the last / in $match[1] and the indexes of
+   the match in $mbegin[1], $mend[1].  (#m) is also availabel to set $MATCH
+   to the entire match and corresponding $MBEGIN, $MEND:  useful in
+   parameter substitutions like ${.../.../...}.
+ - (#s) and (#e) match start and end of pattern like ^ and $ in regular
+   expression, useful in complex expressions such as ((#s)|/)dirname((#e)|/)
+   and in parameter expressions.
+
+ - Depth-first/last listing of recursive glob lists
+
+Functions etc.:
+ - `autoload -X' inside a function body instructs the shell to
+   bootstrap the function at that point
+ - `autoload +X fn' says load the function fn but don't execute it
+ - Prompt `themes' make customization of prompts easier
+
+Modules:
+ - New hierarchical naming scheme for modules; supplied modules go into
+   zsh subdirectory, so zle becomes zsh/zle etc.; aliases supplied for
+   compatibility for existing code, but the new format should be used in
+   future.
+ - zmodload is more consistent between dynamicall and statically linked
+   shells
+ - zsh/zftp and its function suite support multiple sessions (zfsession
+   command); zftransfer allows transfer of files between two ftp sessions
+   with no local file; use styles for e.g. progress style; IPv6 supported;
+   recursive put `zfput -r' for uploads
+ - zsh/zpty module creates pseudoterminal and allows builtin `expect'-like
+   behaviour
+
+Other:
+ - Test suite, not yet complete (`make test')
+ - use of Linux task limits
+ - Many fixes including output redirection with `setopt xtrace' and
+   other redirection fixes; NIS+ problem.
+ - Better null-command behaviour in sh and csh emulation
+ - Internal memory usage optimisations
+
 New features in zsh version 3.1.6 (beta version)
 ------------------------------------------------
 Note also the changes for 3.0.6, which include changes between 3.1.5. and

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Work: pws@CambridgeSiliconRadio.com
Web: http://www.pwstephenson.fsnet.co.uk


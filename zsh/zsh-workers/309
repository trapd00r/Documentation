From zsh-workers-request@math.gatech.edu  Tue Aug 15 12:21:36 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id MAA08720 for <mason@werple.mira.net.au>; Tue, 15 Aug 1995 12:21:30 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA06819
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Mon, 14 Aug 1995 22:22:14 -0400
Received: by math (5.x/SMI-SVR4)
	id AA25438; Mon, 14 Aug 1995 11:20:40 -0400
Resent-Date: Mon, 14 Aug 1995 17:20:38 +0200 (MET DST)
Old-Return-Path: <hzoli@cs.elte.hu>
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199508141520.RAA02500@bolyai.cs.elte.hu>
Subject: Re: Nasty bug in 2.6-beta10-hzoli10.2
To: brown@ftms.com (Vidiot)
Date: Mon, 14 Aug 1995 17:20:38 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu (zsh-workers)
In-Reply-To: <199508141509.KAA10536@ftms.ftms.com> from "Vidiot" at Aug 14, 95 10:09:10 am
X-Mailer: ELM [version 2.4 PL24]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"IDZCq2.0.OD6.7dsBm"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/309
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Vidiot wrote:
> 
> <I still suspect that your signames.h is wrongly generated.  Many systems has a
> <broken nawk which causes very similar problems.  Check that your signames.h
> <again.  It should begin like this (on SunOS 4.1.2):
> <
> </** signals.h                                 **/
> </** architecture-customized signals.h for zsh **/
> <
> <#define SIGCOUNT        31
> 
> Here is my file:
> 
> /** signals.h                                 **/
> /** architecture-customized signals.h for zsh **/
>  
> #define SIGCOUNT        0
>  
> #ifdef GLOBALS
>  
> char *sigmsg[SIGCOUNT+2] = {
>         "done",
>         NULL
> };
>  
> char *sigs[SIGCOUNT+4] = {
>         "EXIT",
>         "ZERR",
>         "DEBUG",
>         NULL
> };
>  
> #else
> extern char *sigs[SIGCOUNT+4],*sigmsg[SIGCOUNT+2];
> #endif
> 
> 
> 
> You are right in that it is wrong.  Now we have to figure out what is wrong
> with the awk script.  Why do I say that?  Because gawk has been used all
> along.  I've had it installed for ages and configure finds it.  Here is the
> line from the make:
> 
> 	gawk -f ./signames.awk < /dev/null > signames.h
> 
> Any ideas?

I think you forgot to remove config.cache before running configure and
configure used the cached place for signal.h, which was /dev/null.  Remove
config.cache and run configure again.  I really forgot to mention this.
While running configure, watch for the line:

checking where signal.h is located... /usr/include/sys/signal.h

If your configure finds something else, send me the output of configure and
the congig.log file.  In this case you can create the signames.h by hand using

gawk -f ./signames.awk < /usr/include/sys/signal.h > signames.h

Otherwise remove signames.h and do a make.

Zoltan


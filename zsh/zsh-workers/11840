From zsh-workers-return-11840-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 09 14:49:06 2000
Return-Path: <zsh-workers-return-11840-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8328 invoked from network); 9 Jun 2000 14:49:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jun 2000 14:49:02 -0000
Received: (qmail 15316 invoked by alias); 9 Jun 2000 14:48:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11840
Received: (qmail 15307 invoked from network); 9 Jun 2000 14:48:52 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000609144837.ZM17431@candle.brasslantern.com>
Date: Fri, 9 Jun 2000 14:48:37 +0000
In-Reply-To: <20000609100241.B21890@scowler.net>
Comments: In reply to Clint Adams <schizo@debian.org>
        "trap handling segfault" (Jun  9, 10:02am)
References: <20000609100241.B21890@scowler.net>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Clint Adams <schizo@debian.org>, zsh-workers@sunsite.auc.dk
Subject: Re: trap handling segfault
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 9, 10:02am, Clint Adams wrote:
} Subject: trap handling segfault
}
} I haven't looked at this in depth, but it's dying in endtrapscope()
} when it tries to dereference st->list->funcdef (when st->list happens to
} be NULL).  Reversing 11736 smoothes things out.

If you have a compiled shell with 11736 reversed, please try adding a
`setopt localtraps' at the top level (i.e. above `function TRAPEXIT')
in your snippet and then see if it still dumps core.  I don't think
11736 can really be the cause of this crash.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


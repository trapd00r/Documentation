From zsh-workers-return-12062-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Jun 25 17:01:29 2000
Return-Path: <zsh-workers-return-12062-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27832 invoked from network); 25 Jun 2000 17:01:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Jun 2000 17:01:29 -0000
Received: (qmail 12850 invoked by alias); 25 Jun 2000 17:01:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12062
Received: (qmail 12843 invoked from network); 25 Jun 2000 17:01:19 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000625170109.ZM17466@candle.brasslantern.com>
Date: Sun, 25 Jun 2000 17:01:09 +0000
In-Reply-To: <Pine.LNX.4.21.0006250116490.5360-100000@phong.blorf.net>
Comments: In reply to Wayne Davison <wayned@users.sourceforge.net>
        "Re: A couple completion glitches" (Jun 25,  1:38am)
References: <Pine.LNX.4.21.0006250116490.5360-100000@phong.blorf.net>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Wayne Davison <wayned@users.sourceforge.net>
Subject: Re: A couple completion glitches
Cc: Zsh Workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 25,  1:38am, Wayne Davison wrote:
} Subject: Re: A couple completion glitches
}
} On Sat, 24 Jun 2000, Bart Schaefer wrote:
} > You DO need to set the suffix style, but you need to set it to "false".
} 
} This has an unfortuante side-effect.
} 
}     % ls ~/foo<tab>
} 
} This becomes:
} 
}     % ls /home/wayne/foo
}     /home/wayne/foo
}     ~/foo
} 
} Which is not what I want at all.

That's because the keep-prefix style defaults to "changed" which means
that the prefix expands if and only if the suffix does not.  So you also
want

    zstyle ':completion:*:expand:*' keep-prefix true

which means to never expand the prefix.

} It still seems strange to me that (without the above suffix option)
} foo* gets glob expansion but ~/foo* does not.  Surely this should not
} be the default even if this turns out (for some strange reason) not to
} be a bug.

I never noticed this myself because using

    zstyle ':completion:*' matcher-list '' 'r:|[._-,]=* r:|=*'
    zstyle ':completion:*' completer _expand _complete _match

causes most glob expansions to occur during the matching phase.

In light of the examples you've given, I think the suffix style should
have its meaning completely reversed (which probably means we ought to
change its name, sigh) so that the default is to expand the suffix and
the setting "false" means to NOT expand it.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-request@math.gatech.edu Thu Aug 27 17:17:26 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7232 invoked from network); 27 Aug 1998 17:17:25 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 27 Aug 1998 17:17:25 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id NAA08155;
	Thu, 27 Aug 1998 13:07:31 -0400 (EDT)
Resent-Date: Thu, 27 Aug 1998 13:07:15 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980827100954.ZM2595@candle.brasslantern.com>
Date: Thu, 27 Aug 1998 10:09:54 -0700
In-Reply-To: <vbyasahjmt.fsf@snake.isode.com>
Comments: In reply to Bruce Stephens <b.stephens@isode.com>
        "Re: 'man' completion" (Aug 27, 10:14am)
References: <000a01bdd108$27f40910$21c9ca95@ao13.mow.sni.de> 
	<vbk93v8zwm.fsf@snake.isode.com> 
	<980826103628.ZM21060@candle.brasslantern.com> 
	<19980827115105.A13312@tertius.net.au> 
	<vbyasahjmt.fsf@snake.isode.com>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: ZSH users mailing list <zsh-users@math.gatech.edu>
Subject: Re: 'man' completion
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"FgiPT2.0.u-1.29Pvr"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1767
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Aug 27, 10:14am, Bruce Stephens wrote:
} Subject: Re: 'man' completion
}
} Gossamer <gossamer@tertius.net.au> writes:
} 
} > I have a nifty set of completion macros for man pages but unfortunately
} > they stop me from getting the filename completion when I'm specifying the
} > file directly
} 
} Ah.  I think if you stick a -f right after the compctl, then that'll
} give you filename completion too.

Yes, that's right, but it might be preferable to use -g with the same
pattern that's in the R[] expression:

	compctl -/ -g '*.([1-9nlo]|[1-9](|[a-z]))' ...

Also, I don't know what the "match-man" function does, but if it's nothing
more than a search of $MANPATH as Gossamer's comment suggested, then it
can be replaced with

	-g "${(@)^${(s(:))MANPATH}}/*/*.([1-9nlo]|[1-9](|[a-z]))(:t:r)"

The only missing bit being that if you want to use the section number to
restrict the search (i.e. "man 5 x<TAB>" completes only to "xferlog" and
not to "xterm" etc.), then you need a function.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-9323-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jan 14 19:33:46 2000
Return-Path: <zsh-workers-return-9323-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2298 invoked from network); 14 Jan 2000 19:33:44 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Jan 2000 19:33:44 -0000
Received: (qmail 3163 invoked by alias); 14 Jan 2000 19:33:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9323
Received: (qmail 3155 invoked from network); 14 Jan 2000 19:33:36 -0000
Date: Fri, 14 Jan 2000 14:33:31 -0500
From: Gene Cohler <gene@bear.com>
To: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
Cc: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>,
        Zsh hackers list <zsh-workers@sunsite.auc.dk>
Subject: Re: dl.h/dlfnc.h clash in module.c RE: 3.1.6-dev-15
Message-ID: <20000114143330.W1480@bear.com>
References: <E128p4T-0008Ql-00.2000-01-13-18-34-10@cmailg1.svr.pol.co.uk> <000001bf5df8$b7dab6e0$21c9ca95@mow.siemens.ru>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.1.1-current-19991229i
In-Reply-To: <000001bf5df8$b7dab6e0$21c9ca95@mow.siemens.ru>; from Andrej.Borsenkow@mow.siemens.ru on Thu, Jan 13, 2000 at 10:02:20PM +0300

This is my fault here. I had (incorrectly assumed that this dlfcn.h business
was hp-spcific. So presumably protecting it with something like #ifdef hpux 
ought to contain it.


On Thu, Jan 13, 2000 at 10:02:20PM +0300, Andrej Borsenkow wrote:
> O.K., looks, like my mail was lost.
> 
> I complained about inability to load complete.so (that depends on zle.so) in
> dev-14. It turned out to be patch from 9200, that changed
> 
> #ifdef HAVE_DLFNC_H
> #include <dlfnc.h>
> 
> into
> 
> #ifdef HAVE_DLFNC_H
> #ifdef HAVE_DL_H
> #include <dl.h>
> #else
> #include <dlfnc.h>
> #endif
> 
> 
> Our system has dl.h that has nothing to do with dynamic locading (it is most
> probably from Double Linked lists). It results in RTLD_GLOBAL being undefined
> (defined to dummy value in module.c) - with obvious consequencies ...
> 
> The wording in 9200 was "HPUX 11.0 does not have dlfnc.h ..." - I fail to see
> how above patch fixes that.
> 
> /andrej
> 

-- 
  Gene Cohler
  Bear Stearns & Co.


***********************************************************************
Bear Stearns is not responsible for any recommendation, solicitation, 
offer or agreement or any information about any transaction, customer 
account or account activity contained in this communication.
***********************************************************************


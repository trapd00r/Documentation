From zsh-users-return-9713-mason-zsh=primenet.com.au@sunsite.dk Sun Nov 27 20:20:50 2005
Return-Path: <zsh-users-return-9713-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10663 invoked from network); 27 Nov 2005 20:20:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 Nov 2005 20:20:48 -0000
Received: (qmail 59919 invoked from network); 27 Nov 2005 20:20:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 Nov 2005 20:20:40 -0000
Received: (qmail 29680 invoked by alias); 27 Nov 2005 20:20:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9713
Received: (qmail 29670 invoked from network); 27 Nov 2005 20:20:34 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 Nov 2005 20:20:34 -0000
Received: (qmail 58980 invoked from network); 27 Nov 2005 20:20:34 -0000
Received: from wsip-68-98-209-187.ph.ph.cox.net (HELO maggie.pointcircle.com) (68.98.209.187)
  by a.mx.sunsite.dk with SMTP; 27 Nov 2005 20:20:31 -0000
Received: from localhost (localhost [127.0.0.1])
	by maggie.pointcircle.com (Postfix) with ESMTP id C0329141CB579;
	Sun, 27 Nov 2005 13:21:25 -0700 (MST)
Received: from maggie.pointcircle.com ([127.0.0.1])
 by localhost (maggie.pointcircle.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 09552-09; Sun, 27 Nov 2005 13:21:25 -0700 (MST)
Received: from [192.168.1.31] (gretchen.pointcircle.com [192.168.1.31])
	(using TLSv1 with cipher RC4-SHA (128/128 bits))
	(No client certificate requested)
	by maggie.pointcircle.com (Postfix) with ESMTP id 67053141CB0E2;
	Sun, 27 Nov 2005 13:21:25 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E3336F7C-77CC-4670-8EE9-5911598B9B23@pointcircle.com>
Content-Transfer-Encoding: 7bit
From: Steven Klass <sklass@pointcircle.com>
Subject: ZSH Local or Remote?
Date: Sun, 27 Nov 2005 13:20:26 -0700
To: zsh-users <zsh-users@sunsite.dk>
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: amavisd-new at maggie.pointcircle.com

Hi all,

	Does anyone have a nice slick function to determine whether the  
machine you are logged on to is local or remote?  Basically you will  
get the tty of the current shell and grep for this in who or pinky.   
If you get :[0-9] you must be local.

	Clearly this isn't bullet proof but I was wondering if any of you  
had a really slick way of figuring this out..

Why you ask?  If I am locally logged in I want to run keychain.  If a  
person is remote AND the machine is a trusted_machine I want to run  
keychain.  Otherwise don't...

Keep in mind this needs to run multiplatform - so be carefull which  
command you use..





---

Steven Klass

sklass@pointcircle.com
(480) 988-5657


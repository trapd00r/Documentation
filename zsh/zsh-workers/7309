From zsh-workers-return-7309-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 28 16:44:33 1999
Return-Path: <zsh-workers-return-7309-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5334 invoked from network); 28 Jul 1999 16:44:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Jul 1999 16:44:31 -0000
Received: (qmail 1065 invoked by alias); 28 Jul 1999 16:44:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7309
Received: (qmail 1058 invoked from network); 28 Jul 1999 16:44:20 -0000
Message-Id: <9907281613.AA34132@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: 3.1.6-test-3: crash in _cvs dot-files stuff 
In-Reply-To: "Peter Stephenson"'s message of "Wed, 28 Jul 1999 18:05:10 DFT."
             <9907281605.AA27434@ibmth.df.unipi.it> 
Date: Wed, 28 Jul 1999 18:13:17 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

dammit.

--- Src/Zle/zle_tricky.c.pm2	Wed Jul 28 17:49:06 1999
+++ Src/Zle/zle_tricky.c	Wed Jul 28 18:07:17 1999
@@ -6340,7 +6340,7 @@
 				/* It's a simple pattern, so append it to *
 				 * the path we have on the command line.  */
 				    int minlen = o + strlen(g);
-				    if (minlen > paalloc)
+				    if (minlen >= paalloc)
 					pa = (char *)
 					    zrealloc(pa, paalloc = minlen+1);
 				    strcpy(pa + o, g);

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-workers-request@euclid.skiles.gatech.edu  Sun Feb 18 03:52:53 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with ESMTP id DAA06093 for <mason@werple.mira.net.au>; Sun, 18 Feb 1996 03:52:51 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id LAA22746; Sat, 17 Feb 1996 11:37:45 -0500 (EST)
Resent-Date: Sat, 17 Feb 1996 11:37:45 -0500 (EST)
From: Geoff Wing <mason@werple.net.au>
Message-Id: <199602171637.DAA05698@werple.net.au>
Subject: Re: TCCLEAREOD in zle_refresh.c/refresh()
To: cedman@Princeton.EDU (Carl Edman)
Date: Sat, 17 Feb 1996 01:29:43 +1100 (EST)
In-Reply-To: <199602031700.MAA19427@capitalist.princeton.edu> from "Carl Edman" at Feb 3, 96 12:00:43 pm
X-Mailer: ELM [version 2.4 PL23]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: mason@werple.net.au
Resent-Message-ID: <"Yp_Eh3.0.HZ5.NHW9n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/768
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

>From article 753 (and 756):
:In beta13 this function contains these lines:
:        if (!clearflag)
:            if (tccan(TCCLEAREOD))
:                tcout(TCCLEAREOD);
:            else
:                cleareol = 1;   /* set */
:The effect is to have every prompt clear to the end of screen.  That  
:causes display glitches under several terminal emulators with scroll-back  
:buffers.   I replaced the TCCLEAREOD with TCCLEAREOL which fixes that  
:problem without any apparent unwelcome side-effects.
:
:But then I'm not an expert on this section of the code, so maybe there is  
:a good, non-obvious reason that this has to be TCCLEAREOD ?  Unless there  
:is an outcry of complaint, I'll submit a two-line patch in a few days.

Not a good idea, and it should remain CLEAREOD.  If you can't handle
CLEAREOD because it affects your scrollback, one option may be to
disable it in your termcap/terminfo.  Most other things that need to clear
the screen will use a different terminal capability.


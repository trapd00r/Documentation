From zsh-workers-return-15444-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 22 03:43:16 2001
Return-Path: <zsh-workers-return-15444-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22872 invoked from network); 22 Jul 2001 03:43:15 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Jul 2001 03:43:15 -0000
Received: (qmail 13345 invoked by alias); 22 Jul 2001 03:43:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15444
Received: (qmail 13331 invoked from network); 22 Jul 2001 03:43:07 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010722034119.ZM11228@candle.brasslantern.com>
Date: Sun, 22 Jul 2001 03:41:19 +0000
In-Reply-To: <20010722014311.A3932@ay.free.fr>
Comments: In reply to Vincent Lefevre <vincent@vinc17.org>
        "Re: [4.0.2 bug] commands not written to history" (Jul 22,  1:43am)
References: <20010629163348.A9632@greux.loria.fr> 
	<20010721154449.A1971@ay.free.fr> 
	<1010721183220.ZM8456@candle.brasslantern.com> 
	<20010722014311.A3932@ay.free.fr>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Vincent Lefevre <vincent@vinc17.org>, zsh-workers@sunsite.dk
Subject: Re: [4.0.2 bug] commands not written to history
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 22,  1:43am, Vincent Lefevre wrote:
}
} Yes, I'm sure that the command has exited. But is it important in my
} case? Commands are written to the history before they start.

Er, right.  I'm confusing what happens when the history is written at
exit with what happens on incremental append.

} BTW, a problem could be (but I don't think it is this problem here)

That's one thing I'm hoping all those different shells' history dumps
will tell us.

} because I ignore immediate dups:
} 
} Shell 1: true a
} Shell 2: true b
} Shell 1: true a
} Shell 1: true c
} 
} Though after the last "true a", "true c" has been typed immediately
} after it, the HISTFILE contains
} 
} true a
} true b
} true c
} 
} Is it possible to have immediate dups in the HISTFILE, but not in
} the shell history?

Not for duplicates occurring in the same shell.  That is, you might get
two `true a' in a row written out by different shells -- though they'd
collapse to one when the $HISTFILE exceeded $SAVEHIST lines by a large
enough margin to cause zsh to re-read/write it -- but in any given shell,
the duplicate is thrown away before the check for unsaved commands is
done.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


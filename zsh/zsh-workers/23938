From zsh-workers-return-23938-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 11 19:19:10 2007
Return-Path: <zsh-workers-return-23938-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15348 invoked from network); 11 Oct 2007 19:19:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Oct 2007 19:19:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 20455 invoked from network); 11 Oct 2007 19:18:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2007 19:18:54 -0000
Received: (qmail 16002 invoked by alias); 11 Oct 2007 19:18:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23938
Received: (qmail 15985 invoked from network); 11 Oct 2007 19:18:48 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Oct 2007 19:18:48 -0000
Received: (qmail 19771 invoked from network); 11 Oct 2007 19:18:48 -0000
Received: from mtaout03-winn.ispmail.ntl.com (81.103.221.49)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2007 19:18:41 -0000
Received: from aamtaout03-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout03-winn.ispmail.ntl.com with ESMTP
          id <20071011191840.NJEN26125.mtaout03-winn.ispmail.ntl.com@aamtaout03-winn.ispmail.ntl.com>
          for <zsh-workers@sunsite.dk>; Thu, 11 Oct 2007 20:18:40 +0100
Received: from pws-pc.ntlworld.com ([81.107.45.67])
          by aamtaout03-winn.ispmail.ntl.com with ESMTP
          id <20071011191839.WTWM26699.aamtaout03-winn.ispmail.ntl.com@pws-pc.ntlworld.com>
          for <zsh-workers@sunsite.dk>; Thu, 11 Oct 2007 20:18:39 +0100
Received: from pws-pc.ntlworld.com (pws-pc.ntlworld.com [127.0.0.1])
	by pws-pc.ntlworld.com (8.14.1/8.13.8) with ESMTP id l9BJI33N021057
	for <zsh-workers@sunsite.dk>; Thu, 11 Oct 2007 20:18:03 +0100
Message-Id: <200710111918.l9BJI33N021057@pws-pc.ntlworld.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: ZSH (CVS) configure problem?
In-Reply-To: Message from Clint Adams <clint@zsh.org>
   of "Thu, 11 Oct 2007 14:28:53 EDT." <20071011182853.GA19842@scowler.net>
Date: Thu, 11 Oct 2007 20:18:03 +0100

Clint Adams wrote:
> On Thu, Oct 11, 2007 at 12:26:45PM +0100, Peter Stephenson wrote:
> > the week).  Clint thinks in that case we need -I/usr/include/ncursesw,
> > so it may not be entirely trivial.
> 
> Clint probably was mistaken, since the headers in /usr/include/ncursesw
> include <ncurses/$otherheader>.

(Moved to zsh-workers).

On my system the entire contents of /usr/include/ncurses (which it seems
to be well-established we don't need to add to the search path) are
simply links into /usr/include/ncursesw.

Shall we try this?  I'd be interested to see how it works out.
If we end up not compiling in multibyte support, should be replacing
ncursesw with ncurses, or is that unnecessary?

Index: configure.ac
===================================================================
RCS file: /cvsroot/zsh/zsh/configure.ac,v
retrieving revision 1.70
diff -u -r1.70 configure.ac
--- configure.ac	8 Oct 2007 02:04:01 -0000	1.70
+++ configure.ac	11 Oct 2007 19:14:52 -0000
@@ -648,12 +648,12 @@
   termcap_curses_order="$withval"
   AC_SEARCH_LIBS(tigetstr, [$termcap_curses_order])
 else
-  termcap_curses_order="tinfo termcap ncurses curses"
+  termcap_curses_order="ncursesw tinfo termcap ncurses curses"
 fi],
 [case "$host_os" in
   hpux10.*|hpux11.*|solaris*)
       termcap_curses_order="Hcurses ncurses curses termcap" ;;
-  *)             termcap_curses_order="tinfo termcap ncurses curses" ;;
+  *)             termcap_curses_order="ncursesw tinfo termcap ncurses curses" ;;
 esac])dnl
 
 AH_TEMPLATE([HAVE_BOOLCODES],

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


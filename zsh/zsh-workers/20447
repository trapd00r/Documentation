From zsh-workers-return-20447-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 04 16:11:31 2004
Return-Path: <zsh-workers-return-20447-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10809 invoked from network); 4 Oct 2004 16:11:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Oct 2004 16:11:30 -0000
Received: (qmail 54529 invoked from network); 4 Oct 2004 16:11:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2004 16:11:24 -0000
Received: (qmail 1706 invoked by alias); 4 Oct 2004 16:09:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20447
Received: (qmail 1680 invoked from network); 4 Oct 2004 16:09:39 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Oct 2004 16:09:39 -0000
Received: (qmail 49986 invoked from network); 4 Oct 2004 16:09:04 -0000
Received: from 90.red-213-97-199.pooles.rima-tde.net (HELO fargo) (213.97.199.90)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2004 16:09:01 -0000
Received: (qmail 4541 invoked by uid 500); 4 Oct 2004 16:08:59 -0000
Date: Mon, 4 Oct 2004 18:08:58 +0200
From: David =?iso-8859-15?Q?G=F3mez?= <david@dervishd.net>
To: Oliver Kiddle <okiddle@yahoo.co.uk>
Cc: David =?iso-8859-15?Q?G=F3mez?= <david@dervishd.net>,
  Zsh-workers <zsh-workers@sunsite.dk>
Subject: Re: UTF-8 support
Message-ID: <20041004160858.GA4510@fargo>
Mail-Followup-To: Oliver Kiddle <okiddle@yahoo.co.uk>,
	David =?iso-8859-15?Q?G=F3mez?= <david@dervishd.net>,
	Zsh-workers <zsh-workers@sunsite.dk>
References: <20041001184122.GA9094@fargo> <23473.1096659965@trentino.logica.co.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <23473.1096659965@trentino.logica.co.uk>
User-Agent: Mutt/1.4.1i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=NO_EXPERIENCE,RCVD_IN_RFCI 
	autolearn=no version=2.63
X-Spam-Hits: 1.5

Hi Oliver ;),

> > So i conclude from your response that nobody is working on it ;).
> > I understand the time problem, everybody is short on time, including
> 
> Nothing has been done. A few people may have done some work that was
> never posted.

Is yet possible to find that work ;)?

> I got as far reading up, thinking about what the right
> approach would be and adding support for stuff like the following to
> print characters given their unicode code point:
>   echo '\u20ac'
> It seemed a good point to start because it'll be useful for testing.

Yes, it's useful for testing to be able use unicode points as input
to echo. I've used to do some testing myself ;)

> Most parts of the source will need work but it is possible to add
> support in individual areas. So don't start with completion, find
> something simple like the print builtin (in particular -c and -C
> options).

I see, splitting the parameters in columns needs the print builtin
have knowledge of the real width if you're using UTF-8 input.

> Builtins in general are simple because they are relatively
> self-contained. If you try to attack zle first, you'll just get fed up
> with it being too hard.

I think you're totally right. zle is to hard for a start, given i
have no experience in zsh source. I'll give a look to the print builtin
and will play a bit with zsh code to learn more.

> done, another idea for something simple would be to add a Test/U01 test
> and add code to make it search for a UTF-8 locale ($langinfo[CODESET] in
> the langinfo module will help) 

Good, i didn't know about that module ;)

> The source and comments are the only documentation I know of but you can
> always ask on the list.

Thanks, i'll do ;)

> Do you know much about unicode/UTF-8? For the
> minimum, read http://www.joelonsoftware.com/articles/Unicode.html
> and then read http://www.cl.cam.ac.uk/~mgk25/unicode.html

I knew a bit. But i've been reading your links these days and have
refreshed my rusted utf-8 concepts ;).

> In my opinion it would be sensible to support multibyte encodings in
> general and not just UTF-8.

I think the reason behind using UTF-8 is not having to use any other
encondings at all, so adding support for other multibytes encoding
wouldn't be needed in my opinion. But, on the other hand, using mbs*
from libc would made easy support any multibyte the current locale
has selected.

> stateful encodings. There are a few characters which are defined to
> display as double width even in proportional fonts so keep that in mind.

In what scripts happens these characters?

> You can detect whether UTF-8 is enabled with the C library's locale
> functions but we shouldn't need to: functions such as mbrlen do all the
> work for us.

Shouldn't mbrlen and company only be used when an UTF-8 locale is selected?

Thanks,

-- 
David Gómez

"The question of whether computers can think is just like the question of
whether submarines can swim." -- Edsger W. Dijkstra


From zsh-users-return-7693-mason-zsh=primenet.com.au@sunsite.dk Wed Jul 14 11:34:22 2004
Return-Path: <zsh-users-return-7693-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1203 invoked from network); 14 Jul 2004 11:34:22 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 14 Jul 2004 11:34:22 -0000
Received: (qmail 18941 invoked from network); 14 Jul 2004 11:33:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 Jul 2004 11:33:17 -0000
Received: (qmail 4561 invoked by alias); 14 Jul 2004 11:22:40 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7693
Received: (qmail 4551 invoked from network); 14 Jul 2004 11:22:40 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (@130.225.247.85)
  by sunsite.dk with SMTP; 14 Jul 2004 11:22:40 -0000
Received: (qmail 32155 invoked from network); 14 Jul 2004 11:27:12 -0000
Received: from madrid10.amenworld.com (62.193.203.32)
  by a.mx.sunsite.dk with SMTP; 14 Jul 2004 11:26:56 -0000
Received: from DervishD.pleyades.net (212.Red-80-35-44.pooles.rima-tde.net [80.35.44.212])
	by madrid10.amenworld.com (8.10.2/8.10.2) with ESMTP id i6EBM4c15534
	for <zsh-users@sunsite.dk>; Wed, 14 Jul 2004 13:22:09 +0200
Received: from raul@pleyades.net by DervishD.pleyades.net with local (Exim MTA 2.05)
	  id <1BkhpX-0001lv-00>; Wed, 14 Jul 2004 13:21:43 +0200
Date: Wed, 14 Jul 2004 13:21:43 +0200
From: DervishD <raul@pleyades.net>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Coloring completions
Message-ID: <20040714112143.GA6811@DervishD>
Mail-Followup-To: Zsh Users <zsh-users@sunsite.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.4.2.1i
Organization: Pleyades
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

    Hi all :)

    I'm playing with compsys, and I don't understand what happens
with coloring. I currently don't use the shell functions for
completion, I use compsys but 'naked' (resuming: I don't have any
compinit call in my RC's), and when I hit 'TAB' (which currently is
bound to 'expand-or-complete'), the completions appear colored
, and that's ok because I have zsh/complist loaded. The problem
appears when I do the following:

bindkey "^O" completer
zle -C completer expand-or-complete completer

function completer () {
    if [[ $words[1] == cd ]]
    then
        compadd -f *(/)
    else
        compadd -f *
    fi
}

    That's a stupid test to play with compsys. If I do the above,
when I hit '^O', depending on the first word only dirs or all files
are listed, but they are listed without coloring. I thought coloring
was automatic as long as zsh/complist was loaded. If I do the above
(remember: I don't use the compsys shell functions), do I need to
'color' de completion matches myself?

    If it is not long, boring or off-topic: could anyone explain me
how the shell functions given with compsys do the coloring or what
should I read first to understand how _main_complete et al. do the
coloring? Given that _main_complete is far complex that my crappy
function above ;) the principles should be the same and the
completion matches are generated by compadd calls, so the coloring is
done by some function or by compsys itself, am I wrong?

    Thanks a lot in advance :)

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736
http://www.pleyades.net & http://raul.pleyades.net/


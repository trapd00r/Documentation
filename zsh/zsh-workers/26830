From zsh-workers-return-26830-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 12 11:35:07 2009
Return-Path: <zsh-workers-return-26830-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18341 invoked from network); 12 Apr 2009 11:35:04 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Apr 2009 11:35:04 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 29217 invoked from network); 12 Apr 2009 11:34:48 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Apr 2009 11:34:48 -0000
Received: (qmail 1675 invoked by alias); 12 Apr 2009 11:34:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26830
Received: (qmail 1593 invoked from network); 12 Apr 2009 11:34:33 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Apr 2009 11:34:33 -0000
Received: from vint.altlinux.org (vint.altlinux.org [194.107.17.35])
	by bifrost.dotsrc.org (Postfix) with ESMTP id C0BDD82D4B6B
	for <zsh-workers@sunsite.dk>; Sun, 12 Apr 2009 13:34:17 +0200 (CEST)
Received: from imap.altlinux.org (imap.altlinux.org [194.107.17.38])
	by vint.altlinux.org (Postfix) with ESMTP id 91B2C3F80EDB
	for <zsh-workers@sunsite.dk>; Sun, 12 Apr 2009 11:34:17 +0000 (UTC)
Received: from [213.85.39.63] (unknown [213.85.39.63])
	by imap.altlinux.org (Postfix) with ESMTPSA id 61E173E48E30
	for <zsh-workers@sunsite.dk>; Sun, 12 Apr 2009 15:34:17 +0400 (MSD)
Received: by hell.fortress (Postfix, from userid 500)
	id EF08D360005B; Sun, 12 Apr 2009 15:34:16 +0400 (MSD)
Resent-From: raorn@altlinux.org
Resent-Date: Sun, 12 Apr 2009 15:34:16 +0400
Resent-Message-ID: <20090412113416.GG9102@altlinux.org>
Resent-To: zsh-workers@sunsite.dk
X-Original-To: raorn@altlinux.org
Delivered-To: raorn@imap.altlinux.org
Received: from imap.altlinux.org [194.107.17.38]
	by hell.fortress with IMAP (fetchmail-6.3.9)
	for <raorn@localhost> (single-drop); Sun, 12 Apr 2009 15:17:32 +0400 (MSD)
Received: from [213.85.39.63] (unknown [213.85.39.63])
	by imap.altlinux.org (Postfix) with ESMTPSA id C81073E48D8F;
	Sun, 12 Apr 2009 15:15:57 +0400 (MSD)
Received: by hell.fortress (Postfix, from userid 500)
	id 604953600058; Sun, 12 Apr 2009 15:15:57 +0400 (MSD)
From: "Alexey I. Froloff" <raorn@altlinux.org>
To: zsh workers <zsh-workers@sunsite.dk>
Cc: "Alexey I. Froloff" <raorn@altlinux.org>
Subject: [PATCH 4/4] _man: strip section and extension from all manual pages.
Date: Sun, 12 Apr 2009 15:15:57 +0400
Message-Id: <1239534957-9358-3-git-send-email-raorn@altlinux.org>
X-Mailer: git-send-email 1.6.1.3.GIT
In-Reply-To: <1239534957-9358-2-git-send-email-raorn@altlinux.org>
References: <1239534957-9358-1-git-send-email-raorn@altlinux.org>
 <1239534957-9358-2-git-send-email-raorn@altlinux.org>
X-Spam: no; 0.00; Alexey:01 Froloff:01 strip:01 bz2:01 Unix:01 diff:01 --git:01 100644:01 options:01 altlinux:04 pages:05 ----:06 ---:08 raorn:09 org:09 
X-Virus-Scanned: ClamAV 0.92.1/9225/Sun Apr 12 05:35:10 2009 on bifrost
X-Virus-Status: Clean

Before:

$ man n op<Tab>
---- manual page, section n ----
open.n.gz      optimize.n.gz  option.n.gz    options.n.bz2

After:

$ man n op
---- manual page, section n ----
open      optimize  option    options

Signed-off-by: Alexey I. Froloff <raorn@altlinux.org>
---
 Completion/Unix/Command/_man |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/Completion/Unix/Command/_man b/Completion/Unix/Command/_man
index 8f28d34..dc5bb1f 100644
--- a/Completion/Unix/Command/_man
+++ b/Completion/Unix/Command/_man
@@ -98,9 +98,9 @@ _man_pages() {
   if ((CURRENT > 2)) ||
       ! zstyle -t ":completion:${curcontext}:manuals.$sect" insert-sections
   then
-    compadd "$@" - ${pages%.(?|<->*(|.gz|.bz2|.Z))}
+    compadd "$@" - ${pages%.((?|<->*)(|.gz|.bz2|.Z))}
   else
-    compadd "$@" -P "$sopt$sect " - ${pages%.(?|<->*(|.gz|.bz2|.Z))}
+    compadd "$@" -P "$sopt$sect " - ${pages%.((?|<->*)(|.gz|.bz2|.Z))}
   fi
 }
 
-- 
1.6.1.3.GIT


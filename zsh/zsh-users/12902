From zsh-users-return-12902-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 10 04:17:49 2008
Return-Path: <zsh-users-return-12902-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11456 invoked from network); 10 Jun 2008 04:17:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jun 2008 04:17:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 29001 invoked from network); 10 Jun 2008 04:17:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jun 2008 04:17:27 -0000
Received: (qmail 8089 invoked by alias); 10 Jun 2008 04:17:13 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12902
Received: (qmail 8072 invoked from network); 10 Jun 2008 04:17:12 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Jun 2008 04:17:12 -0000
Received: from elation.princeton.edu (elation.Princeton.EDU [128.112.144.224])
	by bifrost.dotsrc.org (Postfix) with ESMTP id E72C68028AC3
	for <zsh-users@sunsite.dk>; Tue, 10 Jun 2008 06:17:06 +0200 (CEST)
Received: from [192.168.1.106] (pool-70-17-169-170.pitt.east.verizon.net [70.17.169.170])
	by elation.princeton.edu (Postfix) with ESMTP id A71E41E1A3FC0
	for <zsh-users@sunsite.dk>; Tue, 10 Jun 2008 00:16:24 -0400 (EDT)
Date: Tue, 10 Jun 2008 00:13:03 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: Re: idea for new feature (was: Re: sticky-note and zle
 bindings)
In-Reply-To: <13ed09c00806062139g6e0e81eaxb350eaca45698a94@mail.gmail.com>
Message-ID: <alpine.LNX.1.10.0806100002360.11378@transport.benizi.com>
References: <080125095733.ZM20873@torch.brasslantern.com>  <080124215848.ZM19758@torch.brasslantern.com>  <2d460de70801250149t360f9938u18d458b03f464c72@mail.gmail.com>  <1B47D24854C7BC4FA8DA28BEBB59B0BA02E64EAC@orsmsx419.amr.corp.intel.com> 
 <2d460de70801260729q34fb7ed8o11446e63a320b2ad@mail.gmail.com>  <13ed09c00801251018l1007ac9an9c453651d5695c46@mail.gmail.com>  <080125181227.ZM21172@torch.brasslantern.com>  <2d460de70801260741q16e4f197he2307be6e4f81c82@mail.gmail.com> 
 <080126153143.ZM6173@torch.brasslantern.com>  <20080128163340.GA18831@spiegl.de> <13ed09c00806062139g6e0e81eaxb350eaca45698a94@mail.gmail.com>
User-Agent: Alpine 1.10 (LNX 1032 2008-04-11)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; format=flowed; charset=US-ASCII
X-Virus-Scanned: ClamAV 0.92.1/7417/Tue Jun 10 03:14:29 2008 on bifrost
X-Virus-Status: Clean

On Sat, 7 Jun 2008, Robert Knight wrote:

> Hi folks,
>
> I'd like to implement my part of this quite soon.  So here is a more
> concrete proposal:

I couldn't find the original thread (more than two months ago?), so I'm 
not sure what I'm suggesting below covers everything.


> [...]
>
> Digging back through my mail from users, something which would earn much 
> love from sysadmins would be if they could save the state of their 
> terminal, with 10-20 connections to various machines via SSH and later 
> restore that again instantly - including as much state as possible on 
> the remote end.

Have you tried 'screen'? I think it's a GNU project now (or maybe always 
was). It does basically what you're looking for. I use screen on most 
boxes I SSH to. And I run it on my own machine for long-running processes 
that I might want to come back to.

One of my startup files is even .zsh_screen:
[ "$TERM" = "screen" ] && other=Other || other=Running
S=$(screen -ls | perl -lnwe 'BEGIN{$sty=$ENV{STY}||"ZZZ";} print if /^\s/ and /\S/ and !/\b\Q$sty\E\b/')
[ -n "$S" ] && printf '%s screens:\n%s\n' $other $S

(basically munges the output of screen -ls to cut some lines and not show 
the current session)


On a machine where I have troubles (from some locations) with timeouts via 
SSH, I have it automatically start a screen session, and it tries to 
reattach if there's one that's doen.

On another, I have the command-line mercurial daemon and two command-line 
trac daemons running in screen sessions. If I SSH in and reattach, it's as 
if I never left.

Best,
Ben


From zsh-workers-request@math.gatech.edu Sun Nov 01 18:23:24 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2326 invoked from network); 1 Nov 1998 18:23:23 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 1 Nov 1998 18:23:23 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id NAA26600;
	Sun, 1 Nov 1998 13:17:06 -0500 (EST)
Resent-Date: Sun, 1 Nov 1998 13:16:56 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <981101101357.ZM24098@candle.brasslantern.com>
Date: Sun, 1 Nov 1998 10:13:57 -0800
In-Reply-To: <13884.8743.733953.358182@knecht>
Comments: In reply to Roland Jesse <jesse@prinz-atm.CS.Uni-Magdeburg.De>
        "Re: Strange behaviour of zsh-3.1.5 on IRIX 6.2" (Nov  1,  9:56am)
References: <19981031003916.B29500@cs.uni-magdeburg.de> 
	<Pine.LNX.4.05.9810301553210.6235-100000@protovision.fcn.net> 
	<13884.8743.733953.358182@knecht>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Roland Jesse <jesse@prinz-atm.CS.Uni-Magdeburg.De>,
        zsh-users@math.gatech.edu
Subject: Re: Strange behaviour of zsh-3.1.5 on IRIX 6.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"snbTj3.0.6V6.NMAFs"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1915
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Nov 1,  9:56am, Roland Jesse wrote:
} Subject: Re: Strange behaviour of zsh-3.1.5 on IRIX 6.2
}
} After the build the shell works just fine on this particular
} machine. But on another O2 machine I simply get: "13116:-zsh: rld:
} Fatal Error: attempted access to unresolvable symbol in -zsh:
} cap_get_proc."

"cap_get_proc" is part of the POSIX "capability sets" system, for extended
protection/access rules.  Apparently this is installed on the system where
you built zsh, but is not on the system where you're getting that failure.

The file access part of capability sets is isolated to the "cap" module,
but the runtime tests for process privileges (setuid/setgid) are built in
to the main binary in the privasserted() function in Src/utils.c.

The only effect that a failure of privasserted() would have as far as I
can tell is to alter (or fail to alter) the display of the prompt, or to
incorrectly report that a directory was inaccessible in [[ -x dir ]].  So
it would probably be reasonable to either put that in a module as well,
or simply provide a configure option to turn it off.

} BTW: As I wrote before: zsh-3.0.5 build the same way as above was
} running just fine.

3.0.5 doesn't know about capability sets.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


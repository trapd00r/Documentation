From zsh-workers-return-14726-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 06 05:56:39 2001
Return-Path: <zsh-workers-return-14726-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2196 invoked from network); 6 Jun 2001 05:56:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jun 2001 05:56:39 -0000
Received: (qmail 17902 invoked by alias); 6 Jun 2001 05:56:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14726
Received: (qmail 17887 invoked from network); 6 Jun 2001 05:56:19 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "a normal guy" <ee_in_co@yahoo.com>,
   "Zsh Hackers" <zsh-workers@sunsite.auc.dk>
Subject: RE: Export problem
Date: Wed, 6 Jun 2001 09:56:24 +0400
Message-ID: <000801c0ee4d$6b321270$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200
In-Reply-To: <20010605155236.50747.qmail@web12508.mail.yahoo.com>
Importance: Normal


>
>
> --- Bart Schaefer <schaefer@candle.brasslantern.com> wrote:
> > On Jun 5,  9:18am, Andrej Borsenkow wrote:
> > } Subject: RE: Export problem
> > }
> > } This is a bug. No field splitting should be done in
> > parameter assignment
> > } context.
> >
> > The arguments of the `export' command are not a parameter
> > assignment context,
> > or at least zsh has never treated them as such.  If you want
> > parameter
> > assignment context, you have to do two separate commands:
> >
> >     RUN_DATE=`date +%Y%m%e%H%M.%S`
> >     export RUN_DATE
> >
> > This does not do field splitting.
> >
> > If the SUS says elsewhere that the arguments of `export' (and
> > `typeset' et al.) are to be parsed as parameter assignments,
> > we're going to have to change `export' (etc.) from command
> > names to keywords.
>
> As for compatibility with other shells (POSIX, Korn shell,
> BASH), this would need to be addressed.  An option setting would
> do if necessary.
>

To clarify:

1. I was wrong initially (missed export). SUS never says that export is to
be treated differently from any other command. So there is no question about
POSIX compatibility (zsh is already POSIX-compatible)

2. Both bash and ksh88 (version that I have) do not split export arguments.
That calls for compatibility option.

I am not sure how to call it. May be it is time to start POSIX_* set of
options. POSIX_EXPORT_SPLIT?

-andrej


From zsh-workers-return-9080-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 16 10:07:38 1999
Return-Path: <zsh-workers-return-9080-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4253 invoked from network); 16 Dec 1999 10:07:37 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Dec 1999 10:07:37 -0000
Received: (qmail 22455 invoked by alias); 16 Dec 1999 10:07:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9080
Received: (qmail 22448 invoked from network); 16 Dec 1999 10:07:31 -0000
Date: Thu, 16 Dec 1999 11:07:26 +0100 (MET)
Message-Id: <199912161007.LAA13400@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Adam Spiers's message of Mon, 13 Dec 1999 19:24:57 +0000
Subject: Re: optimisations


Adam Spiers wrote:

> Bart Schaefer (schaefer@candle.brasslantern.com) wrote:
> > The last one is a bit unfortunate, but just "compinit" (without even
> > trying any completions yet) adds half a megabyte to the RSS of zsh on
> > my system, and it only goes up from there as functions autload and
> > start caching their results in shell variables.
> 
> This reminds me.  Not only does the completion system make the
> environment, and hence memory usage large, but it slows startup down.
> Are there any significant optimisations which can be done?  Maybe
> caching some of the large associative arrays to disk in (say) DBM
> format so that several shells can share them?  I know this is already
> done in .zcompdump ... any others?  (I've been meaning to do this for
> _man, actually.)  I notice that $history gets set to the whole
> history; what uses that?  I have HISTSIZE=5000 so this variable is
> fairly sizeable!

One thing I forgot to say: we could easily add a boolean style `cache'
which says if caching should be done in a certain context or
not. Leaving it to the user to decide if he prefers speed or a small
memory footprint.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


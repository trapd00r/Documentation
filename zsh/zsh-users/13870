From zsh-users-return-13870-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 20 14:15:35 2009
Return-Path: <zsh-users-return-13870-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18654 invoked from network); 20 Feb 2009 14:15:32 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Feb 2009 14:15:32 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 76745 invoked from network); 20 Feb 2009 14:15:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Feb 2009 14:15:18 -0000
Received: (qmail 14683 invoked by alias); 20 Feb 2009 14:14:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13870
Received: (qmail 14669 invoked from network); 20 Feb 2009 14:14:57 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 20 Feb 2009 14:14:57 -0000
Received: from yx-out-2324.google.com (yx-out-2324.google.com [74.125.44.29])
	by bifrost.dotsrc.org (Postfix) with ESMTP id A7030802720F
	for <zsh-users@sunsite.dk>; Fri, 20 Feb 2009 15:14:53 +0100 (CET)
Received: by yx-out-2324.google.com with SMTP id 8so332093yxm.81
        for <zsh-users@sunsite.dk>; Fri, 20 Feb 2009 06:14:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=m8paDU7NoDs1Rz4kXxU50h9C88R31ktFkpiL4IFmJQ4=;
        b=TCp3YPwfZW6rMkzlgEuLo6aql0w6b2jaW3R6ahTZTL4wv6ZLjZ3ZY1iXF3DdL7DJAE
         jjYk/cxpRE8cZdVdWeVZKdFRDtCRP1UXIf+OX2T/KfJg6DLH85gR7QxWpV7k64C2fkhp
         jIcYTVTZHQxE6Y2V4cqgj5O0Lc63TOwxGnD/8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=T5ogyj2pSf6XRp3JdWdHa/4h0K0sKzNekRrt29mW1GAq/xhZXA7Dg5g0cbopU+RHgx
         m5dX0/AlNMDPhR38QAc7V/im9XrlHTe4pBSk0hk5ouplYzR6kiH1Nt1jeJBb14jATU7h
         fGYP1b+qFkjLK/K253kwTGdL+HXmwbQNAj+3k=
MIME-Version: 1.0
Received: by 10.220.45.81 with SMTP id d17mr83722vcf.20.1235139292527; Fri, 20 
	Feb 2009 06:14:52 -0800 (PST)
Date: Fri, 20 Feb 2009 09:14:52 -0500
Message-ID: <b2e43f8f0902200614l6cce1febh784827765976ba62@mail.gmail.com>
Subject: Tab completion of multiple files using curly braces
From: Allan Caffee <allan.caffee@gmail.com>
To: Zsh Users <zsh-users@sunsite.dk>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/9016/Fri Feb 20 05:03:22 2009 on bifrost
X-Virus-Status: Clean

With my current setup tab completion of a word with curly braces in it
(e.g. foo{bar,biz}) Zsh expands it.  For example:

% diff ./{old,new}/obnoxiously_long_f<TAB>

% diff ./old/obnoxiously_long_f ./new/obnoxiously_long_f

I'd really like to have the shell avoid expansion and instead look for
possible completions using the union of the file names under all
expansions.  For example:

% diff ./{old,new}/obnoxiously_long_f<TAB>

% diff ./{old,new}/obnoxiously_long_file_name.
  obnoxiously_long_file_name.c obnoxiously_long_file_name.h

where obnoxiously_long_file_name.c and obnoxiously_long_file_name.h
exist in both old and new.  I imagine it wouldn't be too difficult to
write a completion function for this and I already have the completer
set up to favor completion over expansion.  Is this completion function
already implemented?


~Allan


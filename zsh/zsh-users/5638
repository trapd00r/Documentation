From zsh-users-return-5638-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 03 10:20:06 2003
Return-Path: <zsh-users-return-5638-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11680 invoked from network); 3 Jan 2003 10:20:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 3 Jan 2003 10:20:04 -0000
Received: (qmail 16760 invoked by alias); 3 Jan 2003 10:19:51 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5638
Received: (qmail 16745 invoked from network); 3 Jan 2003 10:19:51 -0000
Date: Fri, 3 Jan 2003 11:19:50 +0100
From: Phil Pennock <Phil.Pennock@globnix.org>
To: zsh-users@sunsite.dk
Subject: Re: Proposed changes to _bsd_pkg -- request for comments
Message-ID: <20030103111950.A31382@globnix.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20030102140412.GG2863@gulag.guild.uwa.edu.au> <20030103083927.GB17651@gulag.guild.uwa.edu.au>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <20030103083927.GB17651@gulag.guild.uwa.edu.au>; from j-devenish@users.sourceforge.net on Fri, Jan 03, 2003 at 04:39:27PM +0800
X-Disclaimer: Any views expressed in this message, where not explicitly
	attributed otherwise, are mine and mine alone.  Such views
	do not necessarily coincide with those of any organisation
	or company with which I am or have been affiliated.

On 2003-01-03 at 16:39 +0800, James Devenish wrote:
>                          I am working with OpenBSD but would really
> appreciate some feedback from someone using _bsd_pkg under FreeBSD.

I can't help with that part, since I've not yet migrated away from
compctl bindings ...

It's also worth noting that all the *BSDs have online man-pages.

> I like the "new" behaviour. Basically, the selection list is much more
> readable and can understand packages subdirectories (to help jog one's
> memory). So far, the latter is in a 'case' construct for OpenBSD since
> I don't know how other BSDs lay out their /usr/ports/packages/*.

OpenBSD:
 /usr/ports/packages/`uname -m`/category/package
where "category" is "All" or one of the categories from /usr/ports, in
which case the contents are symlinks to the All case.

I can't remember how the multi-package situation was resolved, so you
might want to look more closely at the layout for something like the
teTeX packages.  Sorry, the only OpenBSD box which I can currently reach
is 2.9 and predates a lot of the rearrangements.

Under FreeBSD, packages are strictly optional and are built from the
installed files (as opposed to the OpenBSD fake-root install, then
package creation, then real install from packages).  _If_
/usr/ports/packages has been created, then packages will be created
under there; if not, then they'll be created inside the ports directory
and you'll have things like /usr/ports/shells/zsh/zsh-4.0.6.tgz.

Also, FreeBSD is moving steadily towards bzip2 instead of gzip, so
you'll see packages with .tbz2 extensions (or, for a short while, there
were .tbz extensions, still for bzip2).  Which will be created, .tbz2 or
.tgz, depends simply upon how old your ports infrastructure makefiles
are.  My workstation has both, simply because I keep my ports tree
updated, including /usr/ports/Mk/.

FreeBSD skips the `uname -m` directory level, but is otherwise the same.
If memory serves, FreeBSD doesn't have multi-packages, so that issue
doesn't arise.  Nor does FreeBSD have flavored packages; the package
built will have one name, no matter which $USE_* variables were passed
to the make system.

> # OpenBSD compatability for pkg_delete, pkg_info, pkg_create options.

OpenBSD's pkg_info rocks, simply because it doesn't need the version
number of a package if there's one version installed.
"pkg_info -L zsh" is so convenient.


-Phil (the person to blame if you dislike OpenBSD's not including zftp
       unless you explicitly pick that flavo(u)r of zsh.)
-- 
"We've got a patent on the conquering of a country through the use of force.
 We believe in world peace through extortionate license fees." -- Andy Forster


From zsh-workers-return-9821-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 21 16:41:32 2000
Return-Path: <zsh-workers-return-9821-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20423 invoked from network); 21 Feb 2000 16:41:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Feb 2000 16:41:31 -0000
Received: (qmail 18571 invoked by alias); 21 Feb 2000 16:41:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9821
Received: (qmail 18559 invoked from network); 21 Feb 2000 16:41:21 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000221164101.ZM21266@candle.brasslantern.com>
Date: Mon, 21 Feb 2000 16:41:01 +0000
In-Reply-To: <200002211230.NAA13030@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: PATCH: Improved _mailboxes" (Feb 21,  1:30pm)
References: <200002211230.NAA13030@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Improved _mailboxes
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Feb 21,  1:30pm, Sven Wischnowsky wrote:
} Subject: Re: PATCH: Improved _mailboxes
}
} > (1) The default style should be to make the all-files group be alternate
} >     completions, i.e., not shown unless the -default- group is empty.
} 
} No. We should use tags so the user can decide what he wants to see.

Ah; that is of course what I meant, thank you for doing it.
 
} > (3) I'm sometimes offered a blank completion -- an empty slot at the top
} >     of the list of all completions.  I don't know where that comes from;
} >     it shouldn't be there.  Quoting problem somewhere?
} 
} Almost. There was no test for $MAIL and in _multi_parts a missing ()
} at an assignment. And some more of these in _mailboxes.

Hmm, I thought `typeset -U' would deal with that, but of course it also
applies to colon-separated lists.  Could have used `typeset -Ua' though,
nowadays, instead of all those empty initializations you added.

} > And of course, I haven't yet written any actual completion functions to
} > call this one; it's used only from _mutt, so far.
} 
} I think we should make the caching somewhat cleverer. I.e. only build
} the caches for the commands really used (tried completion upon).

The problem is that mutt uses _maildir_cache, pine uses _mbox_cache, and
zmail uses _mh_cache.  (Actually now that I think about it, pine can use
_mh_cache too.)  How do you deal with the crossover without caching them
all?  I'd rather not duplicate the knowledge of which programs can read
which other programs' mailboxes in both caching and tag-testing sections.

} Oh, and I could not apply 9812 and 9815 automatically, I hope this
} patch here applies without problems. Dunno how that happened.

That could be my trouble, as I was playing with _mailboxes before.  Did
anyone else have a problem?  I can re-diff against -dev-19 if needed.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


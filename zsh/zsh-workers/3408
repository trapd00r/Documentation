From zsh-workers-request@euclid.skiles.gatech.edu Mon Aug 04 01:17:34 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 14404 invoked from network); 4 Aug 1997 01:17:32 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 4 Aug 1997 01:17:32 -0000
Received: (from list@localhost)
	by euclid.skiles.gatech.edu (8.8.5/8.8.5) id VAA25203;
	Sun, 3 Aug 1997 21:01:48 -0400 (EDT)
Resent-Date: Sun, 3 Aug 1997 21:01:48 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@frontiernet.net>
Message-Id: <199708040101.VAA02604@hzoli.home>
Subject: Re: Still able to reproduce history crash (3.0.4)
In-Reply-To: <970803165508.ZM12879@candle.brasslantern.com> from Bart Schaefer at "Aug 3, 97 04:55:08 pm"
To: schaefer@brasslantern.com (Bart Schaefer)
Date: Sun, 3 Aug 1997 21:01:51 -0400 (EDT)
Cc: zsh-workers@math.gatech.edu
X-Mailer: ELM [version 2.4ME+ PL31 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"NDW07.0.h96.xdIvp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3408
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> And still unable to get a backtrace.
> 
> Easiest way to reproduce is to start zsh -f, then do:
> 
> HISTSIZE=0
> HISTSIZE=5
> 
> and then execute at least five commands.  Appears to dump in malloc(), but
> as the stack is complete garbage there's no way to be sure.  I've enabled
> all the debug and mem-debug options but there's not even a hint of an error
> until the gooey kablooey.

I'll try to look at it, but right now, I'm busy rewriting paramsubst() to
clean up the mess around rc_expand_param and the (e) flag.  This turned
out to be a much more difficult problem than I first thought, but
hopefully the final code will be a bit simpler than the current one.

Zoltan


From zsh-users-return-13156-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 24 16:11:41 2008
Return-Path: <zsh-users-return-13156-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22539 invoked from network); 24 Aug 2008 16:11:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Aug 2008 16:11:39 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 20385 invoked from network); 24 Aug 2008 16:11:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Aug 2008 16:11:30 -0000
Received: (qmail 17200 invoked by alias); 24 Aug 2008 16:11:04 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13156
Received: (qmail 17188 invoked from network); 24 Aug 2008 16:11:03 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 24 Aug 2008 16:11:03 -0000
Received: from vms173003pub.verizon.net (vms173003pub.verizon.net [206.46.173.3])
	by bifrost.dotsrc.org (Postfix) with ESMTP id A36D3801E2B4
	for <zsh-users@sunsite.dk>; Sun, 24 Aug 2008 18:10:57 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.178])
 by vms173003.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K6400HSV4XO5GP3@vms173003.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sun, 24 Aug 2008 11:10:37 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m7OGAZYi016644	for
 <zsh-users@sunsite.dk>; Sun, 24 Aug 2008 09:10:36 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m7OGAZwX016643	for zsh-users@sunsite.dk; Sun,
 24 Aug 2008 09:10:35 -0700
Date: Sun, 24 Aug 2008 09:10:35 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Selfwritten widget won't bind to keymap
In-reply-to: <200808241746.23630.raichoo@googlemail.com>
To: zsh-users@sunsite.dk
Message-id: <080824091035.ZM16640@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
References: <200808241746.23630.raichoo@googlemail.com>
Comments: In reply to "=?iso-8859-1?q?xRaich=5Bo=5D=B2x?="
 <raichoo@googlemail.com>        "Selfwritten widget won't bind to keymap" (Aug
 24,  5:46pm)
X-Virus-Scanned: ClamAV 0.92.1/8081/Sun Aug 24 15:41:12 2008 on bifrost
X-Virus-Status: Clean

On Aug 24,  5:46pm, Bj=F6rn wrote:
}
} I find this VERY confusing. What am i doing wrong?

You're assuming that menuselect is like any other keymap, which it is
not.  Menu selection hijacks the key mapping mechanism, it doesn't
build upon it.  (This is largely because menu selection was invented
before there was a keymap mechanism, and the menuselect keymap is sort
of a half-hearted retrofit.)

In the documentation for the zsh/complist module, you'll find a list
of zle functions under a paragraph that ends with "The following zle
functions have special meaning during menu selection:" ... and then
followed by a paragraph which adds "any other zle function not listed
leaves menu selection and executes that function."  In this case "any
other" includes any user-created ones that you have bound.

So it's impossible to add new keybindings that take effect within the
menuselect operation, and it's also impossible to change the meaning
of any of the keybindings that menuselect pre-empts.  All you can do
is change the keys to which the pre-empted keybindings are attached.


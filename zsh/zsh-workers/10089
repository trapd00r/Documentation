From zsh-workers-return-10089-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Mar 12 15:30:53 2000
Return-Path: <zsh-workers-return-10089-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12173 invoked from network); 12 Mar 2000 15:30:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Mar 2000 15:30:51 -0000
Received: (qmail 23611 invoked by alias); 12 Mar 2000 15:30:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10089
Received: (qmail 23596 invoked from network); 12 Mar 2000 15:30:45 -0000
Message-ID: <38CBB81A.EC87E0AA@u.genie.co.uk>
Date: Sun, 12 Mar 2000 15:30:34 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.72 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: _groups and _condition
References: <38CBB634.816D2213@u.genie.co.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sorry, I yet again forgot to turn off word-wrap before sending a patch.

Oliver

--- Completion/User/_groups.bak	Thu Feb 17 17:52:19 2000
+++ Completion/User/_groups	Sun Mar 12 07:18:55 2000
@@ -1,13 +1,13 @@
 #compdef newgrp
 
-local expl groups
+local expl groups tmp
 
 _wanted groups expl group || return 1
 
 if ! zstyle -a ":completion:${curcontext}:" groups groups; then
   (( $+_cache_groups )) ||
-      if (( ${+commands[ypcat]} )); then
-        : ${(A)_cache_groups:=${${(s: :)$(ypcat group.byname)}%%:*}} # If you use YP
+      if (( ${+commands[ypcat]} )) && tmp=$(ypcat group.byname); then
+        : ${(A)_cache_groups:=${${(f)tmp}%%:*}} # If you use YP
       else
         : ${(A)_cache_groups:=${${(s: :)$(</etc/group)}%%:*}}
       fi
--- Compoletion/Base/_condition.bak	Sun Mar 12 06:42:06 2000
+++ Compoletion/Base/_condition	Sun Mar 12 06:46:23 2000
@@ -4,7 +4,7 @@
 
 if [[ "$prev" = -o ]]; then
   _tags -C -o options && _options
-elif [[ "$prev" = -([no]t|ef) ]]; then
+elif [[ "$prev" = -([a-hkprsuwxLOGSN]|[no]t|ef) ]]; then
   _tags -C "$prev" files && _files
 else
   _alternative 'files:: _files' 'parameters:: _parameters'


From zsh-workers-return-13375-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 18 15:58:38 2001
Return-Path: <zsh-workers-return-13375-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26622 invoked from network); 18 Jan 2001 15:58:38 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Jan 2001 15:58:38 -0000
Received: (qmail 13042 invoked by alias); 18 Jan 2001 15:58:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13375
Received: (qmail 13031 invoked from network); 18 Jan 2001 15:58:32 -0000
Sender: kvho@sebb.bel.alcatel.be
Message-ID: <3A6711BF.7DE6DF56@alcatel.be>
Date: Thu, 18 Jan 2001 16:54:39 +0100
From: koen van hoof <koen.van_hoof@alcatel.be>
Reply-To: koen.van_hoof@alcatel.be
Organization: Alcatel Bell
X-Mailer: Mozilla 4.7 [en] (X11; I; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
CC: Zsh hackers list <zsh-workers@sunsite.auc.dk>
Subject: Re: Some general problems with exporting cariables (Was: TERMCAP  
 problem. )
References: <001e01c08150$ee0dc320$21c9ca95@mow.siemens.ru>
Content-Type: multipart/mixed;
 boundary="------------57C95A87C2B15BFC68AF8F6E"

This is a multi-part message in MIME format.
--------------57C95A87C2B15BFC68AF8F6E
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Andrej Borsenkow wrote:

>
>
> > Whithout the patch, getenv("TERM") still returns 0, but now tgetent
> > from libcursus.a
> > is used.
> > With the patch, getenv("TERM") returns "dumb" before tgetent is
> > called, so I guess it
> > will also be fine for tgetent from the termcap library
>
> What do you mean "before""? Zsh itself never calls getenv("TERM").

I did it manualy from within the debugger

>
> Koen, you can look in configure for a
>
> case "$host_os" in
>   aix*|hpux10.*|hpux11.*|solaris*)
>       termcap_curses_order="curses ncurses termcap" ;;
>   *)             termcap_curses_order="termcap curses ncurses" ;;
> esac
>
> remove solaris, and reconfigure zsh (probably, make distclean first). It
> should give you old behaviour. Then we see if patch really helps :-)))
>
> I'll change configure to use AC_SERCH_LIBS instead to be able to override
> library selection.
>
> -andrej

It now uses termcap again.
Zsh without the patch crashes within screen.
After applying the patch, it works fine. !!!!

-Koen

--
==========================================================
Koen Van Hoof    koen.van_hoof@alcatel.be   32 3 451 60 31
==========================================================



--------------57C95A87C2B15BFC68AF8F6E
Content-Type: text/x-vcard; charset=us-ascii;
 name="koen.van_hoof.vcf"
Content-Transfer-Encoding: 7bit
Content-Description: Card for koen van hoof
Content-Disposition: attachment;
 filename="koen.van_hoof.vcf"

begin:vcard 
n:Van Hoof;Koen
x-mozilla-html:TRUE
adr:;;;;;;
version:2.1
email;internet:koen.van_hoof@alcatel.be
x-mozilla-cpt:;0
fn:Koen Van Hoof
end:vcard

--------------57C95A87C2B15BFC68AF8F6E--


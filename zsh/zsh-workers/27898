From zsh-workers-return-27898-mason-zsh=primenet.com.au@zsh.org Fri Apr 23 22:38:56 2010
Return-Path: <zsh-workers-return-27898-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 820 invoked by alias); 23 Apr 2010 22:38:56 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27898
Received: (qmail 14568 invoked from network); 23 Apr 2010 22:38:45 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at plenz.com does not designate permitted sender hosts)
Date: Sat, 24 Apr 2010 00:28:58 +0200
From: Julius Plenz <julius@plenz.com>
To: zsh-workers@zsh.org
Subject: Bug: _oldlist and automatic coloring of matched
Message-ID: <20100423222858.GC11609@plenz.com>
Mail-Followup-To: zsh-workers@zsh.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
X-Editor: vim 7.1
User-Agent: Mutt/1.5.18 (2008-05-17)

Hey there,

while I recently created a new zsh configuration from scratch I
stumbled upon a bug in the _oldlist completer. (At least _oldlist
if one of the sources of the problem - other completers might behave
similarly.)

I wanted to configure Zsh not to use colors at all. So I simply didn't
set the 'list-colors' style for the default tag anywhere. This,
however, is not enough in the case of _oldlist. Consider this minimal
zshrc:

    autoload -U compinit && compinit
    zmodload -i zsh/complist
    zstyle ':completion:*' completer _oldlist _complete
    zstyle ':completion:*' menu select select=long-list

If you hit Tab the first time, the listing of filenames is not
colored. But once you hit Tab again (and the _oldlist completer comes
into play) suddenly some matches are colored.

I guess the problem is that _oldlist somehow sets the list-colors
style to '' which then causes Zsh to color the list according to the
default colors. I was, however, not able to trace the source of the
problem any further.

Cheers,
Julius


From zsh-users-return-9707-mason-zsh=primenet.com.au@sunsite.dk Sat Nov 26 04:32:55 2005
Return-Path: <zsh-users-return-9707-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11703 invoked from network); 26 Nov 2005 04:32:53 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Nov 2005 04:32:53 -0000
Received: (qmail 33358 invoked from network); 26 Nov 2005 04:32:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Nov 2005 04:32:47 -0000
Received: (qmail 29770 invoked by alias); 26 Nov 2005 04:32:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9707
Received: (qmail 29759 invoked from network); 26 Nov 2005 04:32:34 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 26 Nov 2005 04:32:34 -0000
Received: (qmail 31754 invoked from network); 26 Nov 2005 04:32:34 -0000
Received: from wsip-68-98-209-187.ph.ph.cox.net (HELO maggie.pointcircle.com) (68.98.209.187)
  by a.mx.sunsite.dk with SMTP; 26 Nov 2005 04:32:33 -0000
Received: from localhost (localhost [127.0.0.1])
	by maggie.pointcircle.com (Postfix) with ESMTP id B8977141CB579;
	Fri, 25 Nov 2005 21:33:20 -0700 (MST)
Received: from maggie.pointcircle.com ([127.0.0.1])
 by localhost (maggie.pointcircle.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 28115-17; Fri, 25 Nov 2005 21:33:20 -0700 (MST)
Received: from [192.168.1.31] (gretchen.pointcircle.com [192.168.1.31])
	(using TLSv1 with cipher RC4-SHA (128/128 bits))
	(No client certificate requested)
	by maggie.pointcircle.com (Postfix) with ESMTP id 68CF3141CB0E2;
	Fri, 25 Nov 2005 21:33:20 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2FDFACEA-C7A6-4F45-897D-B786CC632463@pointcircle.com>
Content-Transfer-Encoding: 7bit
From: Steven Klass <sklass@pointcircle.com>
Subject: path and += troubles
Date: Fri, 25 Nov 2005 21:32:29 -0700
To: zsh-users@sunsite.dk
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: amavisd-new at maggie.pointcircle.com

Hi all,

	OK after reading the FAQ completely I am at my wits end.  I want to  
create three basic functions dealing with arrays
		- Append
		- Prepend
		- Delete
	
	The basic usage would be something along the lines of let's say I  
had this nice array called path which looked like this:
	
	echo $path
		/usr/sbin	/bin	/foo	/usr/local/bin

Then I did ran a couple of functions..
		appendPath  path /bin
		prependPath path /sbin
		deletePath path /foo

and ended up with...

	echo $path
		/sbin /usr/sbin /usr/local/bin /bin


My basic functions would be:

	appendPath() {
		# if the path exists delete it..
		deletePath $1 $2
		# Append the path to the end..
		$1+=($2)
	}

	deletePath () {
   		# I cannot take credit for this - Borrowed from the net - but it  
works :)
		# I couldn't figure out how to use ${var#del}
		local element
   		local build
   		build=()
   		eval '
   			foreach element in "$'"$1"'[@]"
   			do
     				if [[ -d "$element" && "$element" != $2 ]]
     				then
       					build=("$build[@]" "$element")
     				fi
   			done
   			'"$1"'=( "$build[@]" )
   		'
	}

But THIS DOESN"T WORK!!!  IT Should!!  According to the FAQ += should  
add the path to the array.  Can someone help me with 2 things.
	1.  Why does += not work when adding to the array - It should right?
	2.  How will I handle prepend - I need to do a shift of all array items

Comments welcome thanks!!

---

Steven Klass

sklass@pointcircle.com
(480) 988-5657


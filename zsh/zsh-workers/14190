From zsh-workers-return-14190-mason-zsh=primenet.com.au@sunsite.dk Tue May 01 18:19:43 2001
Return-Path: <zsh-workers-return-14190-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12575 invoked from network); 1 May 2001 18:19:42 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 May 2001 18:19:42 -0000
Received: (qmail 13611 invoked by alias); 1 May 2001 18:19:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14190
Received: (qmail 13595 invoked from network); 1 May 2001 18:19:36 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
Date: Tue, 1 May 2001 22:19:33 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: Termcap saga
In-Reply-To: <Pine.SV4.4.33.0105012119290.27756-100000@itsrm2.mow.siemens.ru>
Message-ID: <Pine.SV4.4.33.0105012206370.5063-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 1 May 2001, Andrej Borsenkow wrote:

> On Tue, 1 May 2001, Peter Stephenson wrote:
>
> > After updating and reconfiguring from scratch on cygwin with
> > --disable-dynamic I now get
> >
> > Modules/termcap.o(.text+0xad): undefined reference to `_imp__tgetnum'
...
> >
> > What do I do about this?  The link line is
> >
> > gcc -g   -o zsh.exe main.o zsh.res.o `cat stamp-modobjs`   -ltermcap -lm -L/g/bc01/bc01/devHost/HostStack -lzframe -lc
> >
> > (the extra library I added is irrelevant here).  Somehow the termcap module
> > seems to think it has to import the symbols, which in this case it doesn't.
>
> Well, on Monday I recompiled on cygwin, but without --disable-synamic. The
> above symbols look O.K. to me - they belong to termcap (IIRC terminfo
> versions are called tigetnum etc). What version of Cygwin and utilities
> are you using?
>

It looks, like zsh picks up ncurses defitions but tries to link against
termcap. There is no termcap DLL under cygwin, so the above comes from
ncurses.

There was a short period of time when installing ncurses would overwrite
termcap.h with its own header; it is fixed now but if you happen to catch
this old version, you have to reinstall termcap to get original header.

There is no term.h under Cygwin so it looks like the only possibility.

-andrej



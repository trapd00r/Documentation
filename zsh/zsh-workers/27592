From zsh-workers-return-27592-mason-zsh=primenet.com.au@zsh.org Mon Jan 11 22:01:43 2010
Return-Path: <zsh-workers-return-27592-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19241 invoked by alias); 11 Jan 2010 22:01:43 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27592
Received: (qmail 20083 invoked from network); 11 Jan 2010 22:01:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED,UNPARSEABLE_RELAY autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at yahoo.fr does not designate permitted sender hosts)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Date:From:To:Subject:Message-ID:Mail-Followup-To:References:MIME-Version:Content-Type:Content-Disposition:In-Reply-To:User-Agent;
  b=mHaLauzEle1Dafwm+HqNRW0UF10mUpFIkSGeqdHvieetN+E2sE5o3GwXBHDZI0sAD3Dx044G1uktkl4m7tdi77GN1vnTnJ1/Q48Czdk1in6KQ6OEbvsuaHi3sxNJtCFHz1jUcAFTJn/An3A3B1t08AiVDHrC8a3uhpKbhRIjJos=  ;
X-Yahoo-SMTP: V1UR0WuswBDVD1eFhM33188Ir8ciBckz4W8ZMsAh
X-YMail-OSG: I6uF83EVM1lh5dfbVDVHoG4_BNMNYOkc7ckTqzLAkyaqlBFQpR.xIGoiEwrLPFYUILaWv_Bup4GrqOxVR22zeULFUVscSCHJm6GPO0o6xpEU3x6wkmCaGnlmN2IWCdJbZ62JdHcbiwL3f_LpGHKtpVfem0mZ1udV8WThVV.v7b9OrloUj5YQFB2T.SGiac1Ls94aYVacroykvLH.QXvvEbgZjnpOrIRr47J_ZDRtZq7n
X-Yahoo-Newman-Property: ymail-3
Date: Mon, 11 Jan 2010 22:01:37 +0000
From: Stephane Chazelas <stephane_chazelas@yahoo.fr>
To: Zsh hackers list <zsh-workers@zsh.org>
Subject: Re: problem with RANDOM and arrays
Message-ID: <chaz20100111220137.GA15014@seebyte.com>
Mail-Followup-To: Zsh hackers list <zsh-workers@zsh.org>
References: <chaz20100111201312.GB3902@seebyte.com> <chaz20100111205846.GE3902@seebyte.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <chaz20100111205846.GE3902@seebyte.com>
User-Agent: Mutt/1.5.16 (2007-09-19)

2010-01-11 20:58:46 +0000, Stephane Chazelas:
> 2010-01-11 20:13:12 +0000, Stephane Chazelas:
> [...]
> > Similar problem:
> > 
> > $ x=0; ((a[++x]++)); echo $x
> > 2
> > 
> > All the +=, -=, *=... operators are also affected.
> [...]
> 
> Strange, their must be something in my .zshrc that affects the
> behavior as I get:
> 
> $ zsh -c 'x=0; ((a[++x]++)); echo $x'
> 1
[...]

Well no, actually it's the fact that "a" is previously unset
that affects the behavior:

~$ unset a
~$ x=0; ((a[++x]++)); echo $x
1
~$ unset a
~$ a[1]=0
~$ a[2]=0
~$ x=0; ((a[++x]++)); echo $x
2
~$ unset a
~$ a[3]=0
~$ x=0; ((a[++x]++)); echo $x
2


So the behavior is slighly worse than in bash or ksh93 (which
consistently give 2 above).

-- 
Stephane


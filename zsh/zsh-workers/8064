From zsh-workers-return-8064-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Sep 27 13:19:48 1999
Return-Path: <zsh-workers-return-8064-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16923 invoked from network); 27 Sep 1999 13:19:46 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Sep 1999 13:19:46 -0000
Received: (qmail 2318 invoked by alias); 27 Sep 1999 13:19:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8064
Received: (qmail 2311 invoked from network); 27 Sep 1999 13:19:34 -0000
Date: Mon, 27 Sep 1999 14:19:10 +0100
From: Adam Spiers <adam@thelonious.new.ox.ac.uk>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: PATCH: documentation for new accounts completion
Message-ID: <19990927141910.D10336@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2i
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.9 i686

Here's the promised documentation.  Hope it's OK.  Also a tiny
tweak to _other_accounts.

Index: Completion/User/_other_accounts
===================================================================
RCS file: /usr/local/cvsroot/zsh/Completion/User/_other_accounts,v
retrieving revision 1.1
diff -u -r1.1 _other_accounts
--- Completion/User/_other_accounts	1999/09/26 13:50:53	1.1
+++ Completion/User/_other_accounts	1999/09/27 01:43:32
@@ -1,4 +1,4 @@
-#compdef ytalk finger
+#compdef talk ntalk ytalk finger
 
 local expl nm="$compstate[nmatches]"
 local accounts_users_hosts
Index: Doc/Zsh/compsys.yo
===================================================================
RCS file: /usr/local/cvsroot/zsh/Doc/Zsh/compsys.yo,v
retrieving revision 1.4
diff -u -r1.4 compsys.yo
--- Doc/Zsh/compsys.yo	1999/09/27 01:36:37	1.4
+++ Doc/Zsh/compsys.yo	1999/09/27 01:47:45
@@ -1252,6 +1252,30 @@
 not set by the user, it will be set to a list of the service names
 from `tt(/etc/services)'.
 )
+item(tt(my_accounts))(
+This array is used for completion of usernames and hostnames for many
+commands, including the tt(ssh) and tt(rlogin) family. It should
+contain elements of the form `var(host)tt(:)var(user)', corresponding
+to the user's own accounts. These pairs will be used to complete names
+of hosts and usernames depending on the information already on the
+line, so that if, for example, the username is already typed, only
+those hostnames will be completed for which pairs with the username
+from the line exist.
+)
+item(tt(other_accounts))(
+Like tt(my_accounts), except that it should contain the usernames and
+hostnames of other people's accounts, for use with commands such as
+tt(talk), tt(ytalk) and tt(finger).
+)
+item(var(command)tt(_accounts))(
+Any of the commands which use the above tt(my_accounts) and
+tt(other_accounts) arrays can have this behaviour overridden by
+specifying a username/hostname array unique to that command.
+For example, if you wanted tt(rcp) to complete usernames and hostnames
+from a different set of accounts, you could set the array
+tt(rcp_accounts) with username/hostname pairs in the same format as
+tt(my_accounts).
+)
 item(tt(telnet_hosts_ports_users))(
 This array is used by the completion function for tt(telnet). It
 should contain elements of the form


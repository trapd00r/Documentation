From zsh-workers-return-6111-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Apr 26 11:01:31 1999
Return-Path: <zsh-workers-return-6111-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25475 invoked from network); 26 Apr 1999 11:01:29 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Apr 1999 11:01:29 -0000
Received: (qmail 803 invoked by alias); 26 Apr 1999 11:01:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6111
Received: (qmail 796 invoked from network); 26 Apr 1999 11:01:20 -0000
Date: Mon, 26 Apr 1999 13:01:18 +0200 (MET DST)
Message-Id: <199904261101.NAA07631@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Mon, 26 Apr 1999 02:53:24 -0700
Subject: Re: foo=<TAB> always gives context array_value


Bart Schaefer wrote:

> On Apr 26, 10:26am, Sven Wischnowsky wrote:
> } Subject: Re: foo=<TAB> always gives context array_value
> }
> } @@ -555,7 +555,7 @@
> }  /* These are flags saying if we are completing in the command *
> }   * position, in a redirection, or in a parameter expansion.   */
> }  
> } -static int lincmd, linredir, ispar, linwhat;
> } +static int lincmd, linredir, ispar, linwhat, linarr;
> 
> OK, I have to ask ... what does the leading `l' stand for in all those
> names except `ispar'?

Historical reasons... most of them were `local' copies of the variables
without the `l' that were used elsewhere. Now, that's a bit stupid,
since `inarr' is used only in tricky.c, I didn't see the `ispar' and
wanted to make it consistent. But in a certain sense it is: those with 
the `l' are set when parsing is done (real parsing) and thus give a
hint where to look (well, at least for those who know the code). But
`ispar' is the flag set in `check_param()' which tests if we are
completing in a parameter expansion for the new style completion --
and doesn't have to do with *real* parsing.

It might be argued that we should rename `ispar' to `lispar' or rename 
`linarr' to `inarr', though. (Although the current state might help me 
to remember what's going on.)

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-4767-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 23 19:36:55 2002
Return-Path: <zsh-users-return-4767-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17075 invoked from network); 23 Mar 2002 19:36:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 23 Mar 2002 19:36:54 -0000
Received: (qmail 561 invoked by alias); 23 Mar 2002 19:36:35 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4767
Received: (qmail 550 invoked from network); 23 Mar 2002 19:36:33 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020323193618.ZM28746@candle.brasslantern.com>
Date: Sat, 23 Mar 2002 19:36:18 +0000
In-Reply-To: <20020323185649.GA12320@ritz.math.fu-berlin.de>
Comments: In reply to Sven Guckes <guckes@math.fu-berlin.de>
        "var expansion in glob pattern?" (Mar 23,  7:56pm)
References: <20020323185649.GA12320@ritz.math.fu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Guckes <guckes@math.fu-berlin.de>, zsh-users@sunsite.dk
Subject: Re: var expansion in glob pattern?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 23,  7:56pm, Sven Guckes wrote:
} Subject: var expansion in glob pattern?
}
}   $ for i in 1 2 3 4 5 10 15 20 25 30 35 40 35 40 45 50; do
}       ls *(.Lk-$i)|wc -l
}     end
}   zsh: parse error near `end'

You need "done" rather than "end", there.  There's nothing wrong with
the glob expression -- except that passing it as the argument to "ls"
may do the wrong thing when there are no matches at all.

Of course note that the files smaller than 50k includes all the files
smaller than 45k, and so on ... so I'd try:

    j=0
    for i in 1 2 3 4 5 10 15 20 25 30 35 40 35 40 45 50; do
      print ${(l:3:)i}k : "${#${(f)$(print -l *(N.Lk-${i}Lk+${j}))}}"
      ((j=i-1))
    done
    print Rest : "${#${(f)$(print -l *(N.Lk+${j}))}}"

Detailed explanation available upon request.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


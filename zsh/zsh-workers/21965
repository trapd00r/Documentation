From zsh-workers-return-21965-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 01 10:20:27 2005
Return-Path: <zsh-workers-return-21965-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9455 invoked from network); 1 Nov 2005 10:20:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Nov 2005 10:20:23 -0000
Received: (qmail 56033 invoked from network); 1 Nov 2005 10:20:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Nov 2005 10:20:17 -0000
Received: (qmail 3100 invoked by alias); 1 Nov 2005 10:20:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21965
Received: (qmail 3091 invoked from network); 1 Nov 2005 10:20:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 1 Nov 2005 10:20:13 -0000
Received: (qmail 55710 invoked from network); 1 Nov 2005 10:20:13 -0000
Received: from cluster-c.mailcontrol.com (HELO rly15c.srv.mailcontrol.com) (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 1 Nov 2005 10:20:11 -0000
Received: from exchange03.csr.com (mailhost1.csr.com [81.105.217.43])
	by rly15c.srv.mailcontrol.com (MailControl) with ESMTP id jA1AK4hC015070
	for <zsh-workers@sunsite.dk>; Tue, 1 Nov 2005 10:20:05 GMT
Received: from news01 ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 1 Nov 2005 10:22:28 +0000
Date: Tue, 1 Nov 2005 10:20:04 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: changing ZLE_CHAR_T?
Message-Id: <20051101102004.1dba858f.pws@csr.com>
In-Reply-To: <20051101043104.GD18495@blorf.net>
References: <20051028225841.GC27510@blorf.net>
	<200510290959.j9T9x0aI003876@pwslaptop.csr.com>
	<20051031214538.GB18495@blorf.net>
	<20051101043104.GD18495@blorf.net>
Organization: Cambridge Silicon Radio
X-Mailer: Sylpheed version 0.9.12 (GTK+ 1.2.10; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 01 Nov 2005 10:22:28.0251 (UTC) FILETIME=[290156B0:01C5DECE]
X-Scanned-By: MailControl A-05-40-01 (www.mailcontrol.com) on 10.67.0.125
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Wayne Davison <wayned@users.sourceforge.net> wrote:
> I almost changed icntrl() too, but I noticed that zsh is currently
> treating chars 128 - 159 as control characters (something that the
> normal iscntrl() function does not do), so I left it alone for now.
> This does point out an inconsistency in multibyte mode: the ZC_icntrl()
> macro (which currently uses iswcntrl()) will not return true for these
> extended chars.  Do we need this?

I think we probably just need to let the old logic largely do what it
always did to avoid surprises (if the same thing can be done better by
making the code more consistent that's fine), and have the new code use the
system macros wherever possible.

The old code made wild guesses on the assumption that it couldn't rely on
system tests, which was probably true when it was originally written.
Characters 160 on are marked as alphanumeric for the same reason.  I don't
see any point being too clever with it now; it might as well stay
consistent with the way it's always been.

Now we have the ability to do things properly in the new code we should do
that wherever possible.  Consistency with the old logic isn't really a big
issue for once---proper multibyte support is bound to do a lot of things
differently.

We will gradually want to extend the use of iswalnum() etc, which might
well mean the current set of i-macros is gradually phased out of the
multibyte version.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com


From hzoli@cs.elte.hu Tue Jun  4 02:12:06 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id CAA21632 for <mason@werple.mira.net.au>; Tue, 4 Jun 1996 02:12:04 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA16078; Mon, 3 Jun 1996 12:01:22 -0400 (EDT)
Resent-Date: Mon, 3 Jun 1996 12:01:22 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199606031601.SAA17377@bolyai.cs.elte.hu>
Subject: Re: "You have running jobs" warning
To: hniksic@public.srce.hr
Date: Mon, 3 Jun 1996 18:01:22 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu (Zsh workers list)
In-Reply-To: <199606031345.PAA03340@jagor.srce.hr> from Hrvoje Niksic at "Jun 3, 96 03:45:28 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"SI7Gu3.0.5x3.Hnmin"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1254
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 996
Status: OR

> In your mail, you said:
> > >I am not sure I follow you.
> > >          MONITOR (-m)
> > >               Allow job control.  Set by default in  interactive
> > >               shells.
> > > 
> > >What does this have to do with what I have written?
> > 
> > If you disable job control, you will not get the warning when
> > terminating the shell.
> 
> Well, yes of course. If I kill -9 $$, I will also get no warning, but it is
> definitely not what I had in mind.

You can alias exit to 'unsetopt monitor ; exit' or you can write an exit
function which checks if there are suspended jobs and exits unconditionally
if no suspended jobs found and gives a warning otherwise.  This way you can
write an exit which does exactly what you want.  The main point that this
can be done uning the existing shell tools so we should not complicate the
code with this.  Also many people (including myself) perfer the present
behaviour.  I always use setopt nohup but I'd still like to get warnings.

Zoltan



From zsh-workers-return-5976-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 29 22:18:36 1999
Return-Path: <zsh-workers-return-5976-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23735 invoked from network); 29 Mar 1999 22:18:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Mar 1999 22:18:34 -0000
Received: (qmail 21778 invoked by alias); 29 Mar 1999 22:18:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5976
Received: (qmail 21746 invoked from network); 29 Mar 1999 22:17:50 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <990329141731.ZM13798@candle.brasslantern.com>
Date: Mon, 29 Mar 1999 14:17:31 -0800
In-Reply-To: <9903261119.AA69482@ibmth.df.unipi.it>
Comments: In reply to Peter Stephenson <pws@ibmth.df.unipi.it>
        "pws-14" (Mar 26, 12:19pm)
References: <9903261119.AA69482@ibmth.df.unipi.it>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Miscellaneous Re: pws-14
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Peter didn't mention Sven's patch from 5936 in his list of those included
in pws-14, but it appears to be there nonetheless.

Peter explicitly mentiond that 5955 was NOT in pws-14; when I applied it
to pws-14, exactly one hunk of zle_tricky.c failed:

***************
*** 6721,6728 ****
  	/* We are currently not in a menu-completion, *
  	 * so set the position variables.             */
  	menupos = wb;
- 	/* previously:	menuwe = (cs == we) || isset(ALWAYSTOEND); */
- 	menuwe = isset(ALWAYSTOEND);
  	menuend = we;
      }
      /* If we are already in a menu-completion or if we have done a *
--- 6758,6764 ----
  	/* We are currently not in a menu-completion, *
  	 * so set the position variables.             */
  	menupos = wb;
+ 	menuwe = (movetoend >= 2 || (movetoend = 1 && !menucmp));
  	menuend = we;
      }
      /* If we are already in a menu-completion or if we have done a *


My pws-14 has the code that is inside the /* previously: ... */ comment
above.  Am I missing some other patch that should be applied to pws-14
before applying 5955?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-users-return-9672-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 08 19:34:41 2005
Return-Path: <zsh-users-return-9672-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29294 invoked from network); 8 Nov 2005 19:34:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Nov 2005 19:34:36 -0000
Received: (qmail 94445 invoked from network); 8 Nov 2005 19:34:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Nov 2005 19:34:29 -0000
Received: (qmail 29445 invoked by alias); 8 Nov 2005 19:34:21 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9672
Received: (qmail 29435 invoked from network); 8 Nov 2005 19:34:20 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Nov 2005 19:34:20 -0000
Received: (qmail 93313 invoked from network); 8 Nov 2005 19:34:20 -0000
Received: from zoidberg.org (HELO cthulhu.zoidberg.org) (213.133.99.5)
  by a.mx.sunsite.dk with SMTP; 8 Nov 2005 19:34:19 -0000
Received: from kos-mos (d463c7cf.datahighways.de [::ffff:212.99.199.207])
  (AUTH: PLAIN tobias, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by cthulhu.zoidberg.org with esmtp; Tue, 08 Nov 2005 20:34:19 +0100
  id 02816323.4370FDBB.00007A65
Date: Tue, 8 Nov 2005 20:34:18 +0100
From: Tobias Gruetzmacher <tobias@portfolio16.de>
To: zsh-users@sunsite.dk
Subject: Re: Is zsh buggy in connection with screen?
Message-ID: <20051108193418.GD7694@portfolio16.de>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20051108130233.GA6146@hpfsc.de> <20051108141317.GQ27583@ay.vinc17.org> <20051108174411.GH24349@dot.blorf.net> <20051108181157.GB5882@hpfsc.de>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=_cthulhu.zoidberg.org-31333-1131478459-0001-2"
Content-Disposition: inline
In-Reply-To: <20051108181157.GB5882@hpfsc.de>
User-Agent: Mutt/1.5.11
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.4

This is a MIME-formatted message.  If you see this text it means that your
E-mail software does not support MIME-formatted messages.

--=_cthulhu.zoidberg.org-31333-1131478459-0001-2
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,

On Tue, Nov 08, 2005 at 07:11:57PM +0100, Sebastian Stein wrote:
> Wayne Davison <wayned@users.sourceforge.net> [051108 18:52]:
> > I use screen too, and have implemented some environment variable
> > "tunneling" to ensure that the inner shells get their environment
> > updated.  What I did is to write a shell script named "update_screenenv"
> > that writes out a set of environment-updating commands into a file named
> > ~/.screenenv.  I then alias my normal screen-startup command (which
> > happens to be the alias "scr") to run this command before starting
> > screen:
>=20
> Man, you safed my life :-) This is a really awesome solution! It works gr=
eat
> here!

It gets ugly if you want to take multiple attached screens into
account. I have a very ugly, very Linux-specific, solution, which even
does not need any special calls while reattaching screen. It imports
the environment variables from the parent shell of the most recently
reattaching screen.

Ah, and it does not work with grsec :)

See: http://portfolio16.de/tmp/zshrc.screen

Greetings Tobi

PS: I know it would be easy to make the script more portable by saving
the environment variables in some temporary file, but I was to lazy to
implement the file-reaping-logic ;)
--=20
GPG-Key 0xE2BEA341 - signed/encrypted mail preferred
My, oh so small, homepage: http://portfolio16.de/
http://www.fli4l.de/ - ISDN- & DSL-Router on one disk!
Registered FLI4L-User #00000003

--=_cthulhu.zoidberg.org-31333-1131478459-0001-2
Content-Type: application/pgp-signature; name="signature.asc"
Content-Transfer-Encoding: 7bit
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFDcP26Gf7YPOK+o0ERAmKzAJ9OuJaeWlTv6VkM/owCC0n6uOVFngCg8Tnb
EiD6RjACTVCqDWkOC7bZE3U=
=7+Lt
-----END PGP SIGNATURE-----

--=_cthulhu.zoidberg.org-31333-1131478459-0001-2--


From zsh-workers-return-27794-mason-zsh=primenet.com.au@zsh.org Mon Mar 15 14:03:33 2010
Return-Path: <zsh-workers-return-27794-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16247 invoked by alias); 15 Mar 2010 14:03:33 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27794
Received: (qmail 21875 invoked from network); 15 Mar 2010 14:03:31 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW,SPF_HELO_PASS autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Mon, 15 Mar 2010 14:03:14 +0000
From: Peter Stephenson <pws@csr.com>
To: "Zsh Hackers' List" <zsh-workers@zsh.org>
Subject: Re: Can't trace script not in PATH
Message-ID: <20100315140314.0e723abe@news01>
In-Reply-To: <20100315125923.63a6afa6@news01>
References: <38D4FA2BB99A674BADDED237051D97A70EE02067@FFBRUE001.cfmu.corp.eurocontrol.int>
	<20100315125923.63a6afa6@news01>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Mar 2010 14:03:14.0893 (UTC) FILETIME=[417DBFD0:01CAC448]
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.68.0.149

On Mon, 15 Mar 2010 12:59:23 +0000
Peter Stephenson <pws@csr.com> wrote:
> +    /* sets INTERACTIVE, SHINSTDIN and SINGLECOMMAND */
> +    parseargs(argv, &runscript);
>  
>      SHTTY = -1;
>      init_io();
>      setupvals();
> +    setupshin(runscript);
> +
>      init_signals();
>      init_bltinmods();
>      init_builtins();

ackshly, the new code should be after run_init_scripts(), just off the
bottom of the hunk, to ensure PATH has been set up, so I will move it.
(Remember all I'm changing is how we find the file, I'm not changing
anything to do with where code is executed, although it will now execute
start-up files even if can't find the script which didn't happen before.)

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


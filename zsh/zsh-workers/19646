From zsh-workers-return-19646-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 17 11:20:44 2004
Return-Path: <zsh-workers-return-19646-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21242 invoked from network); 17 Mar 2004 11:20:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Mar 2004 11:20:43 -0000
Received: (qmail 10985 invoked by alias); 17 Mar 2004 11:20:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19646
Received: (qmail 10970 invoked from network); 17 Mar 2004 11:20:32 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 17 Mar 2004 11:20:32 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.245.230.51] by sunsite.dk (MessageWall 1.0.8) with SMTP; 17 Mar 2004 11:20:32 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-6.tower-33.messagelabs.com!1079522431!2589724
X-StarScan-Version: 5.1.15; banners=-,-,-
Received: (qmail 1671 invoked from network); 17 Mar 2004 11:20:31 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-6.tower-33.messagelabs.com with SMTP; 17 Mar 2004 11:20:31 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i2HBKVCk022451;
	Wed, 17 Mar 2004 11:20:31 GMT
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP
	id 091F679721C1; Wed, 17 Mar 2004 12:19:47 +0100 (CET)
Cc: zsh-workers@sunsite.dk
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <20040317102338.GA14418@mail.guild.uwa.edu.au> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <28264.1079449650@csr.com> <12351.1079466466@trentino.logica.co.uk> <BCC268FF-77A4-11D8-B853-003065E5EFE0@mneptok.com> <24420.1079518350@trentino.logica.co.uk> <20040317102338.GA14418@mail.guild.uwa.edu.au>
To: James Devenish <j-devenish@users.sourceforge.net>
Subject: Re: PATCH: zpty on HP/UX (and Mac OS X 10.3) 
Date: Wed, 17 Mar 2004 12:19:46 +0100
Message-ID: <11443.1079522386@trentino.logica.co.uk>

James Devenish wrote:
> % zpty -r date
> Wed Mar 17 18:17:21 WST 2004

Okay, good. Thanks.

> % echo $ZSH_VERSION
> 4.1.1

I tried building raw 4.1.1 and zpty has the same problems as for the
latest sources.

> I wonder if this is the version that is available as tarball/CVS from
> Apple's website?

Is this the tarball in http://darwinsource.opendarwin.org/tarballs/other/
Their zpty.c is unchanged from zsh 4.1.1.

Perhaps something was changed or fixed in Mac OS X 10.3 itself. If so,
it perhaps isn't worth expending too much effort trying to fix things for
older versions. Any chance someone with version 10.3 could try building
4.2.0-pre-4 (or latest CVS)?

> > If you build zsh on MacOS X.3, does it build the dynamic modules
> > without your having to install the dlcompat library?
> 
> % locate dlcompat | fgrep -v /sw/fink
> %
> % otool -L =zsh

Okay thanks. So that tells us that it isn't dynamically linked against
dlcompat but it is still quite possible that they built dlcompat and
linked zsh against the .a file.

If you try man dlopen, does the manpage exist (outside of your fink
installation)?

Thanks

Oliver


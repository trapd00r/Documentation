From zsh-users-return-7439-mason-zsh=primenet.com.au@sunsite.dk Sun May 09 00:48:57 2004
Return-Path: <zsh-users-return-7439-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4983 invoked from network); 9 May 2004 00:48:53 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 9 May 2004 00:48:53 -0000
Received: (qmail 18043 invoked from network); 9 May 2004 00:48:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 May 2004 00:48:21 -0000
Received: (qmail 14313 invoked by alias); 9 May 2004 00:48:09 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7439
Received: (qmail 13581 invoked from network); 9 May 2004 00:41:27 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 9 May 2004 00:41:24 -0000
Received: (qmail 15098 invoked from network); 9 May 2004 00:41:24 -0000
Received: from arwen.webrelay.net (66.243.72.252)
  by a.mx.sunsite.dk with SMTP; 9 May 2004 00:41:22 -0000
Received: from [10.0.1.3] (pcp01847643pcs.southk01.tn.comcast.net [68.47.245.210])
	by arwen.webrelay.net (Postfix) with ESMTP id DEBFC2FB9A
	for <zsh-users@sunsite.dk>; Sat,  8 May 2004 20:41:19 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v613)
Content-Transfer-Encoding: 7bit
Message-Id: <95E51012-A151-11D8-B3B9-000A95B34D8E@blasted-heath.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: zsh-users@sunsite.dk
From: Chris Jepeway <jepeway@blasted-heath.com>
Subject: ksh Emulation Not Clearing Envariables
Date: Sat, 8 May 2004 20:41:18 -0400
X-Mailer: Apple Mail (2.613)
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=BAYES_44,RCVD_IN_SORBS 
	autolearn=no version=2.63
X-Spam-Hits: 1.5

I ran into some trouble with ksh emulation when trying to get zsh
to work with a ksh88 script.  Here's a smallish test case that
illustrates the problem:

	emulate ksh

	function e {
		env | egrep ^X
	}

	X=one e <<-EEK
       	Oy
	EEK

	e

I'd expect the output to be

	X=one

Instead, I see

	X=one
	X=one

Without ksh emulation enabled, I see the expected output.
This, with zsh-4.2.0.

This is a bug, right?  If so, should I file a report @ sourceforge.net?

Chris <jepeway@blasted-heath.com>.


From zsh-workers-return-13380-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 19 14:33:27 2001
Return-Path: <zsh-workers-return-13380-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17681 invoked from network); 19 Jan 2001 14:33:26 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jan 2001 14:33:26 -0000
Received: (qmail 1674 invoked by alias); 19 Jan 2001 14:33:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13380
Received: (qmail 1662 invoked from network); 19 Jan 2001 14:33:19 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: PATCH: confgigure.in: AC_SEARCH_LIBS(tgetent)
Date: Fri, 19 Jan 2001 17:33:15 +0300
Message-ID: <000801c08224$c2309050$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

This replaces AC_CHECK_LIB with AC_SEARCH_LIBS. The latter take sinto account
user settings (LIBS=-lfoo) while the former will blindly add library if not
needed.

BTW ironically SVR4 does not count as sysv-derived system :-)

-andrej

Have a nice DOS!
B >>


Index: configure.in
===================================================================
RCS file: /cvsroot/zsh/zsh/configure.in,v
retrieving revision 1.38
diff -u -r1.38 configure.in
--- configure.in        2000/12/23 07:26:11     1.38
+++ configure.in        2001/01/19 14:10:33
@@ -505,16 +505,12 @@
   *)             termcap_curses_order="termcap curses ncurses" ;;
 esac

-for lib in $termcap_curses_order; do
-  AC_CHECK_LIB(${lib}, tgetent, [LIBS="-l$lib $LIBS"; break])
-done
+AC_SEARCH_LIBS(tgetent, [$termcap_curses_order])

 dnl Some systems (Solaris 2.x, Linux Redhat 5.x) require
 dnl libnsl (Network Services Library) to find yp_all
-AC_CHECK_FUNCS(yp_all)
-if test $ac_cv_func_yp_all = no; then
-  AC_CHECK_LIB(nsl, yp_all)
-fi
+
+AC_SEARCH_LIBS(yp_all, nsl)

 dnl I am told that told that unicos reqire these for nis_list
 if test `echo $host_os | sed 's/^\(unicos\).*/\1/'` = unicos; then


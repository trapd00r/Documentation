From zsh-workers-return-16971-mason-zsh=primenet.com.au@sunsite.dk Fri Apr 12 21:35:31 2002
Return-Path: <zsh-workers-return-16971-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13375 invoked from network); 12 Apr 2002 21:35:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 12 Apr 2002 21:35:30 -0000
Received: (qmail 13356 invoked by alias); 12 Apr 2002 21:35:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16971
Received: (qmail 13340 invoked from network); 12 Apr 2002 21:35:23 -0000
Date: Fri, 12 Apr 2002 14:35:13 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: schaefer@ns1.sodaware.com
To: "Jeremy M. Dolan" <jmd@pobox.com>
cc: zsh-workers@sunsite.dk
Subject: Re: tab comlpetion bug
In-Reply-To: <20020412162344.A2049@foozle.jmd>
Message-ID: <Pine.LNX.4.44.0204121430030.23748-100000@ns1.sodaware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 12 Apr 2002, Jeremy M. Dolan wrote:

>  % cd "aaa\!       <-- what zsh changes it to
>    *hit tab again*
>
> No matches found. It works ok if I don't put the " at the begining.

It works if you "setopt no_bang_hist", or if you use single quotes (but
note that if you're using the new completion system it won't work exactly
as you have it there, because the argument to "cd" must be a directory).

The problem is that inside the completion system zsh doesn't know that the
backslash in front of the exclamation point is there solely for the
purpose of preventing a history expansion.  So it is trying to complete
files whose names contain a literal backslash-bang.


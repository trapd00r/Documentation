From zsh-workers-return-17295-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 05 20:56:44 2002
Return-Path: <zsh-workers-return-17295-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24544 invoked from network); 5 Jun 2002 20:56:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 5 Jun 2002 20:56:44 -0000
Received: (qmail 28090 invoked by alias); 5 Jun 2002 20:56:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17295
Received: (qmail 28075 invoked from network); 5 Jun 2002 20:56:34 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: PATCH: zle -F with no arguments
Date: Wed, 05 Jun 2002 21:57:31 +0100
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <20020605205736.652761C0B7@pwstephenson.fsnet.co.uk>

The amount of time I waste...

`zle -F' on its own could fail because it looked at an undefined
argument.

Index: Src/Zle/zle_thingy.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_thingy.c,v
retrieving revision 1.5
diff -u -r1.5 zle_thingy.c
--- Src/Zle/zle_thingy.c	21 May 2002 11:10:17 -0000	1.5
+++ Src/Zle/zle_thingy.c	5 Jun 2002 20:55:03 -0000
@@ -697,7 +712,7 @@
 
     if (ops['L'] || !*args) {
 	/* Listing handlers. */
-	if (args[1]) {
+	if (*args && args[1]) {
 	    zwarnnam(name, "too many arguments for -FL", NULL, 0);
 	    return 1;
 	}

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Work: pws@csr.com
Web: http://www.pwstephenson.fsnet.co.uk


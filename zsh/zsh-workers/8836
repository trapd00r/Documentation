From zsh-workers-return-8836-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Dec 01 11:15:53 1999
Return-Path: <zsh-workers-return-8836-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12228 invoked from network); 1 Dec 1999 11:15:52 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Dec 1999 11:15:52 -0000
Received: (qmail 15339 invoked by alias); 1 Dec 1999 11:15:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8836
Received: (qmail 15330 invoked from network); 1 Dec 1999 11:15:44 -0000
Sender: aduret@antares.l2i
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: _prompt: two useless ':*:'
From: Alexandre Duret-Lutz <alexandre.duret@greyc.ismra.fr>
Date: 01 Dec 1999 12:15:48 +0000
In-Reply-To: Sven Wischnowsky's message of "Fri, 26 Nov 1999 09:46:13 +0100 (MET)"
Message-ID: <7d7liy7t6z.fsf@antares.l2i>
Lines: 29
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


~ % prompt -<TAB>
~ % prompt -_arguments: bad pattern: adam1):*: [253]

parse_cadef/parse_caarg won't split the action at colons once the
first `:*pattern:' is encountered in a description, or for description
of normal/rest arguments (starting with `n:', `*:' or `:').

Should this be said en zshcompsys.1 ?  I guess this means we can
write `:foo:((a\:bar b\:baz))' without needing to escape colons in
such cases (I didn't try).


--- Completion/User/_prompt.old	Wed Dec  1 09:43:21 1999
+++ Completion/User/_prompt	Wed Dec  1 11:43:24 1999
@@ -2,6 +2,8 @@
 
 _arguments -s \
   '-l[list themes]:*:' \
+  '-c[show selected theme]:*:' \
   "-h[help]::prompt theme:($prompt_themes):*:" \
-  "-p[preview theme(s)]:*:prompt theme:($prompt_themes):*:" \
-  {-s'[set and save theme]','*'}":prompt themes:($prompt_themes):*:"
+  "-p[preview theme(s)]:*:prompt theme:($prompt_themes)" \
+  "-s[set and save theme]:prompt theme:($prompt_themes):*:" \
+  ":prompt theme:($prompt_themes)"

-- 
Alexandre Duret-Lutz


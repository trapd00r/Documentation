From zsh-workers-return-22847-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 08 22:23:04 2006
Return-Path: <zsh-workers-return-22847-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21010 invoked from network); 8 Oct 2006 22:23:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.6 (2006-10-03) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.6
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Oct 2006 22:23:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 86619 invoked from network); 8 Oct 2006 22:22:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2006 22:22:53 -0000
Received: (qmail 20076 invoked by alias); 8 Oct 2006 22:22:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22847
Received: (qmail 20067 invoked from network); 8 Oct 2006 22:22:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Oct 2006 22:22:49 -0000
Received: (qmail 86270 invoked from network); 8 Oct 2006 22:22:49 -0000
Received: from vms040pub.verizon.net (206.46.252.40)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2006 22:22:48 -0000
Received: from torch.brasslantern.com ([71.116.118.106])
 by vms040.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-4.02 (built Sep  9 2005))
 with ESMTPA id <0J6U00FZA8TYDZOE@vms040.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sun, 08 Oct 2006 17:22:47 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id k98MMjvG008162	for
 <zsh-workers@sunsite.dk>; Sun, 08 Oct 2006 15:22:46 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id k98MMjio008161	for zsh-workers@sunsite.dk; Sun,
 08 Oct 2006 15:22:45 -0700
Date: Sun, 08 Oct 2006 15:22:45 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: [bug] color none vs. default
In-reply-to: <200610082129.k98LTxIq003101@torgo.zanshin.com>
To: zsh-workers@sunsite.dk
Message-id: <061008152245.ZM8160@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <200610082129.k98LTxIq003101@torgo.zanshin.com>
Comments: In reply to denis <blacklotus@gmx-topmail.de>
 "[bug] color none vs. default" (Oct  8, 11:27pm)

On Oct 8, 11:27pm, denis wrote:
}
} according to the manpage (zshcontrib) you could reset all
} attributes using the color 'none', but this doesn't work.

You're misreading the documentation.

The second paragraph under "colors" in zshcontrib is providing
background material on ANSI terminal color attributes.  It is NOT
talking about the contents of the arrays or how you use them.  Note
that it begins:  "The eight base colors are: black, red, green,
yellow, blue, magenta, cyan, and white."

Later, under the description of the "fg" array, it says: "Map the
eight basic color names ...".  Notice that "none" is NOT one of the
eight basic color names; there is no $fg[none].

There is, however, $reset_color, which is what you want here.  If you
look at the assignment of $reset_color in the "colors" function def'n,
you'll see that it uses $color[none].

   echo "$fg[red]this is red${reset_color}this is no longer red"

It is true that $fg[default] is undocumented.  The effect of the ANSI
"default color" value is apparently supposed to be to reset the color
without changing other attributes, whereas $reset_color resets all the
attributes.


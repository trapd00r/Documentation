From zsh-users-return-9428-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 20 15:00:44 2005
Return-Path: <zsh-users-return-9428-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2205 invoked from network); 20 Sep 2005 15:00:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Sep 2005 15:00:37 -0000
Received: (qmail 39913 invoked from network); 20 Sep 2005 15:00:31 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Sep 2005 15:00:31 -0000
Received: (qmail 7787 invoked by alias); 20 Sep 2005 15:00:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9428
Received: (qmail 7778 invoked from network); 20 Sep 2005 15:00:22 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Sep 2005 15:00:22 -0000
Received: (qmail 38819 invoked from network); 20 Sep 2005 15:00:22 -0000
Received: from unknown (HELO centrmmtao03.cox.net) (68.1.16.141)
  by a.mx.sunsite.dk with SMTP; 20 Sep 2005 15:00:21 -0000
Received: from quark.hightek.org ([68.12.75.33]) by centrmmtao03.cox.net
          (InterMail vM.6.01.05.02 201-2131-123-102-20050715) with ESMTP
          id <20050920150019.SPFQ974.centrmmtao03.cox.net@quark.hightek.org>
          for <zsh-users@sunsite.dk>; Tue, 20 Sep 2005 11:00:19 -0400
Received: from quark.hightek.org (localhost [127.0.0.1])
	by quark.hightek.org (Postfix) with ESMTP id 04BC876C4A
	for <zsh-users@sunsite.dk>; Tue, 20 Sep 2005 09:54:41 -0500 (CDT)
Received: (from vince@localhost)
	by quark.hightek.org (8.12.11/8.12.11) id j8KEse8B013755
	for zsh-users@sunsite.dk; Tue, 20 Sep 2005 09:54:40 -0500 (CDT)
Date: Tue, 20 Sep 2005 09:54:40 -0500
From: Vincent Stemen <zsh@hightek.org>
To: zsh-users@sunsite.dk
Subject: Re: ulimit "command not found" when run from a script on NetBSD
Message-ID: <20050920145440.GA3153@quark.hightek.org>
References: <20050919192129.GA23976@quark.hightek.org> <1050920020712.ZM8701@candle.brasslantern.com> <200509200654.58805.arvidjaar@newmail.ru>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <200509200654.58805.arvidjaar@newmail.ru>
User-Agent: Mutt/1.5.6i
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.4

On Tue, Sep 20, 2005 at 06:54:57AM +0400, Andrey Borzenkov wrote:
> On Tuesday 20 September 2005 06:07, Bart Schaefer wrote:
> > On Sep 19,  2:21pm, Vincent Stemen wrote:
> > }
> > } Could this be a bug?
> >
> > The ulimit builtin comes from the rlimits module.  Modules are not
> > automatically loaded when zsh runs as "sh", to avoid polluting the
> > variable namespaces or replacing external commands with builtins.
> >
> > Whether it's noncompliant from a POSIX point of view that "ulimit"
> > is not a "normal" builtin, I don't know.  (I ought to bookmark the
> > spec one of these days ...)
> 
> well, ulimit shell builtin is part of current SUS:
> 
> Since ulimit affects the current shell execution environment, it is always 
> provided as a shell regular built-in. 
> 
> I do not have POSIX to check.

I just downloaded the posix_std-1003.1-2004 document and it does indeed
say that.

I encountered the problem when running the mysql startup script for
NetBSD using zsh in place of sh.  It has the line
ulimit -n 4096
just before it starts up the mysql server.  The BSD shell works fine
with it. 

Is this something that can be easily corrected in zsh?

-- 
Vincent Stemen
Avoid the VeriSign/Network Solutions domain registration trap!
Read how Network Solutions (NSI) was involved in stealing our domain name.
http://inetaddresses.net/about_NSI.html



From zsh-workers-return-10826-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 19 09:40:50 2000
Return-Path: <zsh-workers-return-10826-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1230 invoked from network); 19 Apr 2000 09:40:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Apr 2000 09:40:47 -0000
Received: (qmail 7767 invoked by alias); 19 Apr 2000 09:40:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10826
Received: (qmail 7755 invoked from network); 19 Apr 2000 09:40:31 -0000
Date: Wed, 19 Apr 2000 10:39:51 +0100
From: Peter Stephenson <pws@cambridgesiliconradio.com>
Subject: Re: bindkey bug with zsh-3.1.6-dev-21?
In-reply-to: "Your message of Wed, 19 Apr 2000 11:26:30 +0200."
 <200004190926.LAA21931@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FT9003CKC6F7T@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

> Hm, maybe a test of the form
> 
>   if (load(zle) || !loaded(complete)) load(compctl);
> 
> There's find_module() for that kind of test.
> 
> Does that sound sensible?

Looks worth trying --- assuming (which I haven't checked) that something in
compinit loads complete, this is about the best you can do.  The only other
possibilitity I can see is to delay loading old completion until zle
actually starts up --- then if there's no new completion, it's safe to
assume old completion is required.  That might be quite sensible if it's
easy to implement.

-- 
Peter Stephenson <pws@cambridgesiliconradio.com>
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


From zsh-workers-request@math.gatech.edu  Sun May 21 02:55:53 1995
Received: from gatech.edu (gatech.edu [128.61.1.1]) by werple.mira.net.au (8.6.10/8.6.9) with SMTP id CAA24191 for <mason@werple.mira.net.au>; Sun, 21 May 1995 02:55:51 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA12961
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Sat, 20 May 1995 12:52:32 -0400
Received: by math (5.x/SMI-SVR4)
	id AA02540; Sat, 20 May 1995 12:50:05 -0400
Resent-Date: Sat, 20 May 1995 12:49:57 -0400 (EDT)
Old-Return-Path: <chip@cybernetics.net>
From: chip@cybernetics.net (Chip Salzenberg)
Message-Id: <9505201649.AA04510@cybernetics.net>
Subject: Re: Deliver script (was Re: procmail)
To: mason@werple.mira.net.au (Geoff Wing)
Date: Sat, 20 May 1995 12:49:57 -0400 (EDT)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199505190544.PAA16613@werple03.mira.net.au> from "Geoff Wing" at May 19, 95 03:44:42 pm
X-Mailer: ELM [version 2.4 PL24]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"9lgnG3.0.Yd.xsXll"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/14
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

According to Geoff Wing:
> If you want store in individual files, but not use the rcvstore program, you
> might try the following procmailrc recipes, which store the lists in
> 3 different directories. Each message is stored as its message number.
> 
> :0: 				# Zsh announce mailing list
> * ^Resent-Sender: zsh
> * ^X-Mailing-List: <zsh-announce.*\/[0-9]+
> zsh-announce/$MATCH
> 
> :0: 				# Zsh users mailing list
> * ^Resent-Sender: zsh
> * ^X-Mailing-List: <zsh-users.*\/[0-9]+
> zsh-users/$MATCH
> 
> :0: 				# Zsh workers mailing list
> * ^Resent-Sender: zsh
> * ^X-Mailing-List: <zsh-workers.*\/[0-9]+
> zsh-workers/$MATCH

You should be able to do the same thing with Deliver.  Assuming you
have Perl (DON'T YOU?), your .deliver file would look like:

----------------------------------------------------------------
#!/usr/bin/perl

open(H, $ENV{'HEADER'});
while (<H>) {
	if (/^X-Mailing-List: <(zsh-\w+)[^/]*/(\d+)/) {
		print $1, "/", $2, "\n";
		exit;
	}
}
close(H);

print $ARGV[0], "\n";
----------------------------------------------------------------



-- 
            Chip Salzenberg, aka <chip@cybernetics.net>
     "And remember to worship at the railroad of your choice."
        -- Mike Nelson, MST3K: "The Amazing Transparent Man"


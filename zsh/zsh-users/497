From zsh-workers-request@euclid.skiles.gatech.edu  Wed Nov  6 20:09:30 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id UAA07132 for <mason@primenet.com.au>; Wed, 6 Nov 1996 20:09:28 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id DAA10751; Wed, 6 Nov 1996 03:59:34 -0500 (EST)
Resent-Date: Wed, 6 Nov 1996 03:45:24 -0500 (EST)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <961106004858.ZM7917@candle.brasslantern.com>
Date: Wed, 6 Nov 1996 00:48:58 -0800
In-Reply-To: Alexey Solovyov <alekso@math.ucr.edu>
        "Re: Contrl-Z action." (Nov  5,  8:49pm)
References: <199611060449.UAA14674@charity.ucr.edu>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Alexey Solovyov <alekso@math.ucr.edu>, gwing@primenet.com.au (Geoff Wing),
        zsh-users@math.gatech.edu
Subject: Re: Contrl-Z action.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"4tgX53.0.Ka2.a05Wo"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/497
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Nov 5,  8:49pm, Alexey Solovyov wrote:
} Subject: Re: Contrl-Z action.
}
} > :But I've got a question. Once I came up why I want to have my job
} > :suspended by pressing Cntrl-Z ? Ok, I want it to run in background
} > :right after that.
} > 
} > I can't think of a elegant way of doing this automatically without a
} > lot of overhead.
} 
} Thanks, I will probably do it this way though actually I was thinking
} about changing the sources... :)

Eww, don't do that.

} But anyway suggestions about eliminating the second Ctrl-Z are welcome.

    function autobg() {
	jobs -s >| /tmp/j$$
	while read jnum jdesc
	do
	    bg %${${jnum#\[}%\]}
	done < /tmp/j$$
	rm -f /tmp/j$$
    }

    function precmd() {
	autobg
    }

I really question whether this is the behavior you want, though.  You
might want to change the `bg ...' command in autobg to something like

	case $jdesc in
	(*( vi | vim | *emacs )*) ;;	# Don't autobg any editors,
	(*) bg %${${jnum#\[}%\]} ;;	# but anything else is OK.
	esac

or possibly something even more restrictive where you list the things
that you *do* want to autobg rather than those that you don't.

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern


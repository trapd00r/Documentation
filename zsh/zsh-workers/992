From pws@ifh.de Tue May  7 18:38:33 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id SAA16095 for <mason@werple.mira.net.au>; Tue, 7 May 1996 18:38:31 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA09207; Tue, 7 May 1996 04:18:16 -0400 (EDT)
Resent-Date: Tue, 7 May 1996 04:18:16 -0400 (EDT)
Message-Id: <199605070817.KAA08463@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: fdtable
Date: Tue, 07 May 1996 10:17:21 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"e8k5j1.0.kF2.2TmZn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/992
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1046
Status: O

In 2.6-beta17, fdtable[] is a char array, and there are tests like

		    if (fdtable[i] < 0)
			fdtable[i]--;

for which gcc on IRIX is complaining about limited range of data type.
Shouldn't fdtable[] be `signed char'? (Yes.)

*** Src/globals.h.sc	Tue May  7 10:09:50 1996
--- Src/globals.h	Tue May  7 10:10:13 1996
***************
*** 397,403 ****
   * table is not used.  A table element is set by movefd and cleard *
   * by zclose.                                                      */
  
! EXTERN char fdtable[OPEN_MAX];
  
  /* input fd from the coprocess */
  
--- 397,403 ----
   * table is not used.  A table element is set by movefd and cleard *
   * by zclose.                                                      */
  
! EXTERN signed char fdtable[OPEN_MAX];
  
  /* input fd from the coprocess */
  
-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.



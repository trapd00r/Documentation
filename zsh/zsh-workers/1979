From zsh-workers-request@euclid.skiles.gatech.edu  Thu Aug 15 10:36:29 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id KAA04133 for <mason@primenet.com.au>; Thu, 15 Aug 1996 10:36:27 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id UAA12248; Wed, 14 Aug 1996 20:33:09 -0400 (EDT)
Resent-Date: Wed, 14 Aug 1996 20:33:09 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199608150032.CAA09479@bolyai.cs.elte.hu>
Subject: Re: BSD_ECHO
To: coleman@math.gatech.edu (Richard Coleman)
Date: Thu, 15 Aug 1996 02:32:24 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199608142045.QAA00597@redwood.skiles.gatech.edu> from Richard Coleman at "Aug 14, 96 04:45:31 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"CLuEm.0.J_2.41d4o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1979
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Richard wrote:
[...]
> > I still object to having a configure test for the default behavior of
> > BSD_ECHO when run as "sh".  This should NOT be something that varies
> > from one installation to the next!
[...]
> I completely agree...
> 
> The options for zsh when called as sh, should not depend on
> your current configuration.  It is especially bad for us sysadmins
> who work on heterogenous environments.... I don't want zsh working
> one way on one machine, and another way on another machine.

Seing the big opposition I'll remove that configure check.  However this
was not a completely unreasonable change.  I use zsh as /bin/sh on Linux
where the default /bin/sh is bash.  I bet that without BSD_ECHO some
scripts will break.

On the other hand someone else reported that on an other system zsh broke
some scripts because of BSD_ECHO.  It is possible to turn on BSD_ECHO iff
zsh is invoked as /bin/sh (with full pathname) and configure detected that
/bin/sh use BSD_ECHO but it would not be set by emulate or alternatively is
would be always set or unset by emulate.  On systems where zsh is installed
as /bin/sh the system administrator probably knows enough about how to set
the desired default and others won't be affected by this change.

I know that prefect solution is not possible.  Even POSIX did not dare to
define the default echo behaviour.  If one wants to write a portable script
it must begin with something like #! /usr/local/bin/zsh -f.  We have 7
different OS'es in an NFS/NIS network where zsh is very useful as portable
script language (and as a login shell of course).

Zoltan


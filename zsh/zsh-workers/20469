From zsh-workers-return-20469-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 10 20:11:26 2004
Return-Path: <zsh-workers-return-20469-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5972 invoked from network); 10 Oct 2004 20:11:25 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Oct 2004 20:11:25 -0000
Received: (qmail 11879 invoked from network); 10 Oct 2004 20:11:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Oct 2004 20:11:18 -0000
Received: (qmail 24597 invoked by alias); 10 Oct 2004 20:11:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20469
Received: (qmail 21269 invoked from network); 10 Oct 2004 20:04:24 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Oct 2004 20:04:24 -0000
Received: (qmail 5592 invoked from network); 10 Oct 2004 20:03:24 -0000
Received: from smtp.wp.pl (212.77.101.160)
  by a.mx.sunsite.dk with SMTP; 10 Oct 2004 20:03:17 -0000
Received: (wp-smtpd smtp.wp.pl 21271 invoked from network); 10 Oct 2004 22:03:14 +0200
Received: from unknown (HELO localhost.localdomain) (wolf42@[213.155.167.154])
          (envelope-sender <wolf42@wp.pl>)
          by smtp.wp.pl (WP-SMTPD) with AES256-SHA encrypted SMTP
          for <zsh-workers@sunsite.dk>; 10 Oct 2004 22:03:14 +0200
Received: by localhost.localdomain (Postfix, from userid 500)
	id 3F82A1C418C0; Sun, 10 Oct 2004 22:03:14 +0200 (CEST)
Date: Sun, 10 Oct 2004 22:03:14 +0200
From: Bartosz Taudul <wolf42@wp.pl>
To: zsh-workers@sunsite.dk
Subject: SVN completion fix
Message-ID: <20041010200314.GA7369@bajzel>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="liOOAslEiF7prFVr"
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-Face: N`G1nOY<,/McwZPoeG/Oiw*].!bLo6%"5W!XtOU-DLIn"EF?w!>r8(%]gEGS[ZDF!I;#d<:4y1&##c<J^_%LbQTH\QWUED.b3l[_q#OuW3N^`<&s`R*!LM-y;d0+fc;R[syci4iaGo9^'Tw^)8:~D94Q6rqO)biS_@fOZNe:ud]
User-Agent: Mutt/1.4.2.1i
X-WP-AV: skaner antywirusowy poczty Wirtualnej Polski S. A.
X-WP-AS1: NO Body=1 Fuz1=1 Fuz2=1                          
X-WP-AS2: NO 0.500004  
X-WP-AS3: NO       
X-WP-SPAM: NO 
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=1.0 required=6.0 tests=FROM_ENDS_IN_NUMS autolearn=no 
	version=2.63
X-Spam-Hits: 1.0


--liOOAslEiF7prFVr
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: inline
Content-Transfer-Encoding: 8bit

Hi,
Subversion got support of i18n, and because of this, zsh subversion
completion fails. Fixed by adding 'LANG=C' before svn is called.

wolf
-- 
  Bartek   .  - Ja mam jeszcze lekcje z 2D, a tam same baby, tak wiêc...
  Taudul   :  - U nas sze¶æ i tak g³o¶no.
          .:....................................................................
w o l f @ p l d - l i n u x . o r g            .:. http://wolf.valkyrie.one.pl/

--liOOAslEiF7prFVr
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="zsh-svn.patch"

--- _subversiona	2004-09-24 01:55:00.000000000 +0200
+++ _subversion	2004-10-10 21:51:34.000000000 +0200
@@ -41,7 +41,7 @@
   if (( ! $+_svn_cmds )); then
     typeset -gA _svn_cmds
     _svn_cmds=(
-      ${=${(f)${${"$(_call_program commands svn help)"#l#*Available subcommands:}%%Subversion is a tool*}}/(#s)[[:space:]]#(#b)([a-z]##)[[:space:]]#(\([a-z, ?]##\))#/$match[1] :$match[1]${match[2]:+:${${match[2]//[(),]}// /:}}:}
+      ${=${(f)${${"$(_call_program commands LANG=C svn help)"#l#*Available subcommands:}%%Subversion is a tool*}}/(#s)[[:space:]]#(#b)([a-z]##)[[:space:]]#(\([a-z, ?]##\))#/$match[1] :$match[1]${match[2]:+:${${match[2]//[(),]}// /:}}:}
     )
   fi
 
@@ -64,10 +64,10 @@
 _svn_subcommand () {
   local subcmd _svn_subcmds _svn_subcmd_usage
 
-  _svn_subcmd_usage=${${(M)${(f)"$(_call_program options svn help $1)"}:#usage:*}#usage: $1 }
+  _svn_subcmd_usage=${${(M)${(f)"$(_call_program options LANG=C svn help $1)"}:#usage:*}#usage: $1 }
 
   _svn_subcmds=(
-    ${${=${${${(M)${(f)"$(_call_program options svn help $1)"##*Valid options:}:#* :*}%% #:*}/ arg/:arg:}/(#b)-([[:alpha:]]) \[--([a-z-]##)\](:arg:)#/(--$match[2])-$match[1]$match[3] (-$match[1])--$match[2]$match[3]}[2,-1]}
+    ${${=${${${(M)${(f)"$(_call_program options LANG=C svn help $1)"##*Valid options:}:#* :*}%% #:*}/ arg/:arg:}/(#b)-([[:alpha:]]) \[--([a-z-]##)\](:arg:)#/(--$match[2])-$match[1]$match[3] (-$match[1])--$match[2]$match[3]}[2,-1]}
   )
 
   case $1 in;

--liOOAslEiF7prFVr--


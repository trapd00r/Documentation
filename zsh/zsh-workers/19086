From zsh-workers-return-19086-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 16 00:06:23 2003
Return-Path: <zsh-workers-return-19086-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18756 invoked from network); 16 Sep 2003 00:06:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Sep 2003 00:06:22 -0000
Received: (qmail 21068 invoked by alias); 16 Sep 2003 00:06:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19086
Received: (qmail 21055 invoked from network); 16 Sep 2003 00:06:15 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 16 Sep 2003 00:06:15 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [207.172.4.62] by sunsite.dk (MessageWall 1.0.8) with SMTP; 16 Sep 2003 0:6:15 -0000
Received: from 65-78-17-226.c3-0.nwt-ubr2.sbo-nwt.ma.cable.rcn.com ([65.78.17.226] helo=zion.rcn.com)
	by smtp03.mrf.mail.rcn.net with esmtp (Exim 3.35 #4)
	id 19z3ME-00031H-00
	for zsh-workers@sunsite.dk; Mon, 15 Sep 2003 20:06:14 -0400
Received: by zion.rcn.com (Postfix, from userid 500)
	id 6F8A51E086; Mon, 15 Sep 2003 20:01:57 -0400 (EDT)
To: zsh-workers@sunsite.dk
Subject: Unload modules failure on Sparc Solaris
From: Vin Shelton <acs@alumni.princeton.edu>
Organization: EtherSoft, Inc
Date: Mon, 15 Sep 2003 20:01:57 -0400
Message-ID: <m3y8wplhxm.fsf@zion.rcn.com>
Lines: 112
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On the Solaris 5.8 Sparc box here at work, I'm getting a coredump in
the V01 modload test:

Running test: Delete the module alias again
Test successful.
Running test: Unload the modules loaded by this test suite
Segmentation Fault - core dumped
make: [check] Error 139 (ignored)

Here is the backtrace:


#0  0x00000000 in ?? ()
#1  0x0005bda4 in unsetparam_pm (pm=0xb7230, altflag=0, exp=1) at /u/shelton2/software/src/zsh-2003-09-15/Src/params.c:2230
#2  0xfeee1f58 in ?? ()
#3  0xfeee2030 in ?? ()
#4  0x00051c80 in dyn_cleanup_module (m=0xa2408) at /u/shelton2/software/src/zsh-2003-09-15/Src/module.c:637
#5  0x00051d9c in cleanup_module (m=0xa2408) at /u/shelton2/software/src/zsh-2003-09-15/Src/module.c:685
#6  0x00054478 in unload_module (m=0xa2408, node=0xb6150) at /u/shelton2/software/src/zsh-2003-09-15/Src/module.c:1475
#7  0x000547d0 in bin_zmodload_load (nam=0xff1d1538 "zmodload", args=0xffbecaec, ops=0xffbecb00) at /u/shelton2/software/src/zsh-2003-09-15/Src/module.c:1585
#8  0x00053358 in bin_zmodload (nam=0x0, args=0xffbecaec, ops=0xffbecb00, func=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/module.c:1010
#9  0x00019efc in execbuiltin (args=0x75, bn=0x95cb4) at /u/shelton2/software/src/zsh-2003-09-15/Src/builtin.c:440
#10 0x0002df30 in execcmd (state=0xffbed500, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2406
#11 0x0002b198 in execpline2 (state=0xffbed500, pcode=515, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#12 0x0002a620 in execpline (state=0xffbed500, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#13 0x00029fb8 in execlist (state=0xffbed500, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:876
#14 0x0004babc in execif (state=0xffbed500, do_exec=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/loop.c:519
#15 0x0002dce4 in execcmd (state=0xffbed500, input=0, output=0, how=18, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2353
#16 0x0002b198 in execpline2 (state=0xffbed500, pcode=387, how=18, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#17 0x0002a620 in execpline (state=0xffbed500, slcode=0, how=18, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#18 0x00029f8c in execlist (state=0xffbed500, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#19 0x0004ac78 in execfor (state=0xffbed500, do_exec=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/loop.c:159
#20 0x0002dce4 in execcmd (state=0xffbed500, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2353
#21 0x0002b198 in execpline2 (state=0xffbed500, pcode=259, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#22 0x0002a620 in execpline (state=0xffbed500, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#23 0x00029f8c in execlist (state=0xffbed500, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#24 0x00029ca8 in execode (p=0xa4c10, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:770
#25 0x000307e4 in runshfunc (prog=0xa4c10, wrap=0x0, name=0xff1d0920 "zmodunload") at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3619
#26 0xfee31478 in ?? ()
#27 0x00030770 in runshfunc (prog=0xa4c10, wrap=0xfee41c18, name=0xff1d0920 "zmodunload") at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3607
#28 0x0003059c in doshfunc (name=0xa0ec0 "zmodunload", prog=0xa4c10, doshargs=0xa94a4, flags=0, noreturnval=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3534
#29 0x000300bc in execshfunc (shf=0xa0df0, args=0xff1d0540) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3344
#30 0x0002de9c in execcmd (state=0xffbedb40, input=0, output=0, how=18, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2395
#31 0x0002b198 in execpline2 (state=0xffbedb40, pcode=259, how=18, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#32 0x0002a620 in execpline (state=0xffbedb40, slcode=0, how=18, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#33 0x00029f8c in execlist (state=0xffbedb40, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#34 0x00029ca8 in execode (p=0xff1d0390, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:770
#35 0x00024c64 in bin_eval (nam=0xff1d0208 "eval", argv=0xff1d0390, ops=0xffbedc40, func=14) at /u/shelton2/software/src/zsh-2003-09-15/Src/builtin.c:4135
#36 0x00019efc in execbuiltin (args=0xff1d01e8, bn=0x95564) at /u/shelton2/software/src/zsh-2003-09-15/Src/builtin.c:440
#37 0x0002df30 in execcmd (state=0xffbedfe0, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2406
#38 0x0002b198 in execpline2 (state=0xffbedfe0, pcode=195, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#39 0x0002a620 in execpline (state=0xffbedfe0, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#40 0x00029f8c in execlist (state=0xffbedfe0, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#41 0x00029ca8 in execode (p=0xa4b70, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:770
#42 0x000307e4 in runshfunc (prog=0xa4b70, wrap=0x0, name=0xff361848 "ZTST_execchunk") at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3619
#43 0xfee31478 in ?? ()
#44 0x00030770 in runshfunc (prog=0xa4b70, wrap=0xfee41c18, name=0xff361848 "ZTST_execchunk") at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3607
#45 0x0003059c in doshfunc (name=0xb3028 "ZTST_execchunk", prog=0xa4b70, doshargs=0xb2060, flags=0, noreturnval=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3534
#46 0x000300bc in execshfunc (shf=0xb3018, args=0xff361728) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3344
#47 0x0002de9c in execcmd (state=0xffbeec30, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2395
#48 0x0002b198 in execpline2 (state=0xffbeec30, pcode=4675, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#49 0x0002a620 in execpline (state=0xffbeec30, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#50 0x00029f8c in execlist (state=0xffbeec30, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#51 0x0004babc in execif (state=0xffbeec30, do_exec=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/loop.c:519
#52 0x0002dce4 in execcmd (state=0xffbeec30, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2353
#53 0x0002b198 in execpline2 (state=0xffbeec30, pcode=4291, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#54 0x0002a620 in execpline (state=0xffbeec30, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#55 0x00029f8c in execlist (state=0xffbeec30, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#56 0x0004b6c4 in execwhile (state=0xffbeec30, do_exec=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/loop.c:414
#57 0x0002dce4 in execcmd (state=0xffbeec30, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2353
#58 0x0002b198 in execpline2 (state=0xffbeec30, pcode=259, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#59 0x0002a620 in execpline (state=0xffbeec30, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#60 0x00029f8c in execlist (state=0xffbeec30, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#61 0x00029ca8 in execode (p=0xa4be8, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:770
#62 0x000307e4 in runshfunc (prog=0xa4be8, wrap=0x0, name=0xff361038 "ZTST_test") at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3619
#63 0x0003059c in doshfunc (name=0xb3088 "ZTST_test", prog=0xa4be8, doshargs=0xb1f58, flags=0, noreturnval=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3534
#64 0x000300bc in execshfunc (shf=0xb3078, args=0xff360ff0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:3344
#65 0x0002de9c in execcmd (state=0xffbef778, input=0, output=0, how=2, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2395
#66 0x0002b198 in execpline2 (state=0xffbef778, pcode=25731, how=2, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#67 0x0002a620 in execpline (state=0xffbef778, slcode=0, how=2, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#68 0x00029f8c in execlist (state=0xffbef778, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#69 0x0004bdc0 in execcase (state=0xffbef778, do_exec=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/loop.c:597
#70 0x0002dce4 in execcmd (state=0xffbef778, input=0, output=0, how=18, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2353
#71 0x0002b198 in execpline2 (state=0xffbef778, pcode=24707, how=18, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#72 0x0002a620 in execpline (state=0xffbef778, slcode=0, how=18, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#73 0x00029f8c in execlist (state=0xffbef778, dont_change_job=1, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#74 0x0004b6c4 in execwhile (state=0xffbef778, do_exec=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/loop.c:414
#75 0x0002dce4 in execcmd (state=0xffbef778, input=0, output=0, how=18, last1=2) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:2353
#76 0x0002b198 in execpline2 (state=0xffbef778, pcode=24643, how=18, input=0, output=0, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1268
#77 0x0002a620 in execpline (state=0xffbef778, slcode=0, how=18, last1=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:1058
#78 0x00029f8c in execlist (state=0xffbef778, dont_change_job=0, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:869
#79 0x00029ca8 in execode (p=0xff360a00, dont_change_job=0, exiting=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/exec.c:770
#80 0x0003e4d8 in loop (toplevel=1, justonce=0) at /u/shelton2/software/src/zsh-2003-09-15/Src/init.c:165
#81 0x00040cbc in zsh_main (argc=5, argv=0x9d218) at /u/shelton2/software/src/zsh-2003-09-15/Src/init.c:1251
#82 0x000196ec in main (argc=5, argv=0x9d218) at /u/shelton2/software/src/zsh-2003-09-15/Src/main.c:37


Here are my configuration options:

#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host denver:
#
# /u/shelton2/software/src/zsh-2003-09-15/configure  --prefix=/u/shelton2/software/SunOS-5.8/zsh-2003-09-15-gcc --datadir=/u/shelton2/software/share --enable-zsh-mem --enable-etcdir=/u/shelton2/software/etc --enable-dynamic --disable-nls --disable-locale

In checking my records, it looks like this has been failing since at
least 2003-09-02.

HTH,
  Vin


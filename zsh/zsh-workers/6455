From zsh-workers-return-6455-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 04 03:12:12 1999
Return-Path: <zsh-workers-return-6455-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14779 invoked from network); 4 Jun 1999 03:12:11 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Jun 1999 03:12:11 -0000
Received: (qmail 18836 invoked by alias); 4 Jun 1999 03:12:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6455
Received: (qmail 18829 invoked from network); 4 Jun 1999 03:12:01 -0000
Date: Thu, 3 Jun 1999 20:11:57 -0700 (PDT)
From: Wayne Davison <wayne@clari.net>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
cc: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: 3.0.6-pre-3: mainly history bug fixes
In-Reply-To: <990603061922.ZM2764@candle.brasslantern.com>
Message-ID: <Pine.GSO.4.10.9906031943490.11008-100000@house.clari.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 3 Jun 1999, Bart Schaefer wrote:
> Something I don't want to accidentally do is fold in the history
> search change (whole words at beginning of line) that caused so
> much complaint and eventual back-patching.  I don't *think* I see
> it in here anywhere, but if you can reassure me, please do.

Quite correct, I did not include that change, nor any history change
that was not a bug fix or a code optimization.  For example, several
functions now properly use the numeric prefix that had previously
ignored it.  Also, the majority of the differences in zle_hist.c was
from a unification of the upline/downline code into separate
functions so that the formerly-duplicated code would not continue to
diverge (it was inconsistent in one case, I believe).

> what's going to happen when somebody with this option set fires up
> a new zsh and it loads his existing old-format .zhistory?

The new code is smart enough to treat a finish length that is >= the
start time as the old format.  This should be OK, since I don't
believe that people will be running a program continuously for over
29 years.

Going back from a new shell with this new EXTENDED_HISTORY format to
an old shell without it can cause the finish times to read in as
very early dates, but I wasn't particularly concerned about this.
Do you feel differently?

..wayne..


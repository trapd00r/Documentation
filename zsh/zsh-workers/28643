From zsh-workers-return-28643-mason-zsh=primenet.com.au@zsh.org Sun Jan 23 17:51:19 2011
Return-Path: <zsh-workers-return-28643-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3833 invoked by alias); 23 Jan 2011 17:51:18 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28643
Received: (qmail 22236 invoked from network); 23 Jan 2011 17:51:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.3 required=5.0 tests=BAYES_00,DKIM_ADSP_CUSTOM_MED,
	FREEMAIL_FROM,NML_ADSP_CUSTOM_MED,RCVD_IN_DNSWL_MED,T_TO_NO_BRKTS_FREEMAIL
	autolearn=ham version=3.3.1
Received-SPF: neutral (ns1.primenet.com.au: 128.2.11.61 is neither permitted nor denied by SPF record at _spf.google.com)
Date: Sun, 23 Jan 2011 12:45:08 -0500
From: gi1242+zsh@gmail.com
To: zsh-workers@zsh.org
Subject: _arguments: Sets not working?
Message-ID: <20110123174508.GC2593@andrew.cmu.edu>
Mail-Followup-To: gi1242+zsh@gmail.com, zsh-workers@zsh.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.18 (2008-05-17)
X-PMX-Version: 5.5.9.388399, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2011.1.23.173314
X-SMTP-Spam-Clean: 33% (
 RDNS_SUSP_FORGED_FROM 3.5, FORGED_FROM_GMAIL 0.1, BODYTEXTP_SIZE_3000_LESS 0, BODY_SIZE_1000_1099 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, NO_REAL_NAME 0, RDNS_BROADBAND 0, RDNS_GENERIC_POOLED 0, RDNS_POOLED 0, RDNS_SUSP 0, RDNS_SUSP_GENERIC 0, RDNS_SUSP_SPECIFIC 0, __CD 0, __CT 0, __CT_TEXT_PLAIN 0, __FRAUD_WEBMAIL 0, __FRAUD_WEBMAIL_FROM 0, __FROM_GMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __PHISH_SPEAR_STRUCTURE_1 0, __RDNS_BROADBAND_5 0, __RDNS_POOLED_11 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __USER_AGENT 0)
X-SMTP-Spam-Score: 33%
X-Scanned-By: MIMEDefang 2.60 on 128.2.11.61

Hi All,

It looks like argument sets separated by single hyphens are not working.
You can see the bug by trying to complete arguments of 'vncserver'. When
you ask for completions, none are returned. [Behaviour persists in
latest release from Git]

The vncserver code seems to use completion sets. From zshcomsys, line
3397 in zsh4.3.10:

    It is possible to specify multiple sets of options and arguments
    with the sets separated by single hyphens. The specifications before
    the first hyphen (if any) are shared by all the remaining sets.

(I couldn't get the documentation from git to build on my system, so
don't know if the behaviour has changed or not.)

When I remove lines 

      - start \
      - kill \
      - help \

from Completion/**/_vnc, then options are completed as expected. With
the above lines, I get no argument completions; and I can't figure out
how the syntax contradicts the man page. Is there a bug?

Thanks,

GI

-- 
'Disco' -- A din of iniquity.


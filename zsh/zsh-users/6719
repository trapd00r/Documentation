From zsh-users-return-6719-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 20 19:20:31 2003
Return-Path: <zsh-users-return-6719-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6562 invoked from network); 20 Oct 2003 19:20:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Oct 2003 19:20:30 -0000
Received: (qmail 1097 invoked by alias); 20 Oct 2003 19:20:09 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6719
Received: (qmail 1050 invoked from network); 20 Oct 2003 19:20:09 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 20 Oct 2003 19:20:09 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [80.67.170.6] by sunsite.dk (MessageWall 1.0.8) with SMTP; 20 Oct 2003 19:20:9 -0000
Received: by mail-aubervilliers.netaktiv.com (Postfix, from userid 10)
	id B0FE123CC9; Mon, 20 Oct 2003 21:20:09 +0200 (CEST)
Received: from sources.org (stephane@localhost [127.0.0.1])
	by ludwigV.sources.org (8.12.3/8.12.3/Debian -4) with ESMTP id h9KJIBne010508;
	Mon, 20 Oct 2003 21:18:11 +0200
Message-Id: <200310201918.h9KJIBne010508@ludwigV.sources.org>
X-Mailer: exmh version 2.5 07/13/2001 (debian 2.5-1) with nmh-1.0.4+dev
From: Stephane Bortzmeyer <stephane@sources.org>
To: Leslie Joshua Wang <rexo@ubergoonz.com>
Cc: zsh-users@sunsite.dk
Subject: Re: Hostname Menu completion 
In-reply-to: <F5FA898F-0313-11D8-9531-000393AB66AA@ubergoonz.com> 
     (Leslie Joshua Wang <rexo@ubergoonz.com>'s message of 
     Mon, 20 Oct 2003 23:42:07 +0800)
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Date: Mon, 20 Oct 2003 21:18:11 +0200

On Monday 20 October 2003, at 23 h 42, the keyboard of Leslie Joshua Wang 
<rexo@ubergoonz.com> wrote:

> Does anyone have any suggestion what is the best way to go about 
> creating a hostname completion system using zsh?

I believe that zsh has a different way to do it in its most recent versions 
but this works for me:

etchosts=( ${(s: :)${(ps:\t:)${${(f)"$(</etc/hosts)"}%%\#*}##[:blank:]#[^[:blan
k:]]#}} )
sshhosts=(${${${${(f)"$(<$HOME/.ssh/known_hosts)"}:#[0-9]*}%%\ *}%%,*})
ftphosts=(${${${(f)"$(tail +3 $HOME/.ncftp/bookmarks)"}#*,}%%,*})
hosts=($etchosts $sshhosts $ftphosts)
ncftpbookmarks=(${${(f)"$(tail +3 $HOME/.ncftp/bookmarks)"}%%,*}) 
ncftphosts=($ncftpbookmarks $ftphosts)

compctl -k hosts traceroute mtr ping echoping fping tcptraceroute



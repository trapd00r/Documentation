From zsh-workers-return-18869-mason-zsh=primenet.com.au@sunsite.dk Sat Jul 19 00:01:52 2003
Return-Path: <zsh-workers-return-18869-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5650 invoked from network); 19 Jul 2003 00:01:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Jul 2003 00:01:51 -0000
Received: (qmail 21115 invoked by alias); 19 Jul 2003 00:01:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18869
Received: (qmail 16274 invoked from network); 18 Jul 2003 21:46:44 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 18 Jul 2003 21:46:44 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [132.206.3.88] by sunsite.dk (MessageWall 1.0.8) with SMTP; 18 Jul 2003 21:46:43 -0000
Received: from navy.CS.McGill.CA (navy.CS.McGill.CA [132.206.3.43])
	by relay10.cs.mcgill.ca (Postfix) with ESMTP id DD1AF536F36
	for <zsh-workers@sunsite.dk>; Fri, 18 Jul 2003 17:46:42 -0400 (EDT)
Received: from navy.CS.McGill.CA (cgoard@localhost [127.0.0.1])
	by navy.CS.McGill.CA (8.12.3/8.12.3/Debian-6.4) with ESMTP id h6ILkgA4012156
	for <zsh-workers@sunsite.dk>; Fri, 18 Jul 2003 17:46:42 -0400
Received: (from cgoard@localhost)
	by navy.CS.McGill.CA (8.12.3/8.12.3/Debian-6.4) id h6ILkgHC012154
	for zsh-workers@sunsite.dk; Fri, 18 Jul 2003 17:46:42 -0400
Date: Fri, 18 Jul 2003 17:46:42 -0400
From: Chris Goard <cgoard@cs.mcgill.ca>
To: zsh-workers@sunsite.dk
Subject: bug in list-colors use of LS_COLORS?
Message-ID: <20030718214642.GA12151@cs.mcgill.ca>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.28i

I'm using the following directive to enable coloured completion lists:

  zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}

If, in the dircolors configuration file, I declare that symbolic links should
inherit the color of their target (LINK target), then the completion list
display will be broken. For example:

[/usr/lib/mozilla/plugins]% ls 
files                       ls _
argetmflashplayer.xpt@    argetmjavaplugin_oji.so@  argetmlibflashplayer.so@ li
bnullplugin.so  

(_ is the position of the cursor after hitting tab)

I can work around this by declaring a colour for link twice in the dircolors
configuration file:

  LINK 01;36
  LINK target

zsh uses the first and ls uses the second. This, at least, doesn't result in a
munged display, but it would be nice if zsh could honour the target directive,
too.


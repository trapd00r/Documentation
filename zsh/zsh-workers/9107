From zsh-workers-return-9107-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Dec 17 14:07:35 1999
Return-Path: <zsh-workers-return-9107-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20724 invoked from network); 17 Dec 1999 14:07:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Dec 1999 14:07:33 -0000
Received: (qmail 7846 invoked by alias); 17 Dec 1999 14:07:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9107
Received: (qmail 7839 invoked from network); 17 Dec 1999 14:07:27 -0000
Date: Fri, 17 Dec 1999 15:07:25 +0100 (MET)
Message-Id: <199912171407.PAA11678@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Oliver Kiddle's message of Fri, 17 Dec 1999 13:47:26 +0000
Subject: PATCH: Re: complist bug and PATCH: spelling


Oliver Kiddle wrote:

> The menu selection doesn't seem to be working. I get:
> 
> SELECTMIN=0
> cd <tab><tab>    -- menu selection doesn't start
> echo $SELECTMIN
> 9999999          -- and SELECTMIN has been messed up

>From the docs for the complist module:

  When using the shell function based completion system, the
  tt(SELECTMIN) parameter should not be used (like the tt(ZLS_COLORS)
  and tt(ZLS_COLOURS) parameters described above). Instead, the tt(menu) 
  style should be used.

If I had a brain I would have thought about $SELECTMIN when I made the 
default styles set up in compinit use $ZLS_COLORS.

But still, if $SELECTMIN in set up after compinit is called, the
default will not work (nor will it work for people like me who use
`zstyle -d' to get rid of the defaults from compinit).

Bye
 Sven

diff -ru ../z.old/Completion/Core/compinit Completion/Core/compinit
--- ../z.old/Completion/Core/compinit	Fri Dec 17 11:41:05 1999
+++ Completion/Core/compinit	Fri Dec 17 15:04:01 1999
@@ -479,6 +479,7 @@
 zstyle ':completion:correct'  prompt        'correct to:'
 zstyle ':completion:*'        completer     '_complete'
 zstyle ':completion*:default' list-colors   "${(s.:.)ZLS_COLORS:-${ZLS_COLOURS:-no=0:fi=0:di=0:ln=0:pi=0:so=0:bd=0:cd=0:ex=0}}"
+(( $+SELECTMIN )) && zstyle ':completion*:default' menu "select=$SELECTMIN"
 zstyle ':completion:*' tag-order 'arguments values' options \
                                  globbed-files directories all-files
 

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


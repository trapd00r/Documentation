From zsh-workers-request@math.gatech.edu Thu Jun 04 17:20:29 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5956 invoked from network); 4 Jun 1998 17:20:28 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 4 Jun 1998 17:20:28 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id NAA00018;
	Thu, 4 Jun 1998 13:09:31 -0400 (EDT)
Resent-Date: Thu, 4 Jun 1998 13:09:31 -0400 (EDT)
From: Zefram <zefram@tao.co.uk>
Message-Id: <199806041710.SAA16377@taos.demon.co.uk>
Subject: Re: What's with the ctrl-A characters in the .yo files?
To: schaefer@brasslantern.com (Bart Schaefer)
Date: Thu, 4 Jun 1998 18:10:21 +0100 (BST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <980604094422.ZM13799@candle.brasslantern.com> from "Bart Schaefer" at Jun 4, 98 09:44:22 am
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"miI_b3.0.D.AJjTr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4041
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Bart Schaefer wrote:
>I notice there'a macro expansion for it, mentioning a yodl bug.  When is it
>necessary to insert one?

The yodl engine mishandles file inclusion.  Macro expansion works with the
pending input stack in the intuitively obvious way, but the INCLUDEFILE()
macro, rather than expanding to the contents of the file, expands to
nothing, and as a side effect adds the file's contents to the *end* of the
pending input stack.  The practical upshot is that file inclusion does not
work correctly anywhere except at the outermost level of macro expansion;
anywhere else, evil things happen to the text immediately following the
macro call.  IIRC, the ^A characters are actually there as a substitute
for a backslash, in a place where an actual backslash disappears.

-zefram


From zsh-workers-return-22022-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 24 14:39:50 2005
Return-Path: <zsh-workers-return-22022-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27868 invoked from network); 24 Nov 2005 14:39:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Nov 2005 14:39:47 -0000
Received: (qmail 93492 invoked from network); 24 Nov 2005 14:39:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Nov 2005 14:39:41 -0000
Received: (qmail 29770 invoked by alias); 24 Nov 2005 14:39:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22022
Received: (qmail 29759 invoked from network); 24 Nov 2005 14:39:39 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Nov 2005 14:39:39 -0000
Received: (qmail 93193 invoked from network); 24 Nov 2005 14:39:39 -0000
Received: from cluster-e.mailcontrol.com (HELO rly13e.srv.mailcontrol.com) (217.79.216.190)
  by a.mx.sunsite.dk with SMTP; 24 Nov 2005 14:39:38 -0000
Received: from porgy.logica.co.uk (porgy.logica.co.uk [158.234.250.67])
	by rly13e.srv.mailcontrol.com (MailControl) with ESMTP id jAOEdab7023018
	for <zsh-workers@sunsite.dk>; Thu, 24 Nov 2005 14:39:36 GMT
Received: from localhost.localdomain ([158.234.142.59])
	by porgy.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id jAOEdaCK025890
	for <zsh-workers@sunsite.dk>; Thu, 24 Nov 2005 14:39:36 GMT
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (Postfix) with ESMTP id A9BEC85B89
	for <zsh-workers@sunsite.dk>; Thu, 24 Nov 2005 15:40:47 +0100 (CET)
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: PATCH: _dchroot
Date: Thu, 24 Nov 2005 15:40:47 +0100
Message-ID: <25704.1132843247@localhost.localdomain>
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-05-40-01 (www.mailcontrol.com) on 10.69.0.123

New completion function for dchroot.

Oliver

Index: Completion/Debian/Command/_dchroot
===================================================================
RCS file: Completion/Debian/Command/_dchroot
diff -N Completion/Debian/Command/_dchroot
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ Completion/Debian/Command/_dchroot	23 Nov 2005 11:14:54 -0000
@@ -0,0 +1,18 @@
+#compdef dchroot
+
+local curcontext="$curcontext" state line expl ret=1
+
+_arguments -C \
+  '(-c -l -h -V)-a[execute in all known chroots]' \
+  '(-a -l -h -V)-c[execute in specified chroot]:chroot:->chroots' \
+  '(- *)-l[list available chroots]' \
+  '(-l)-d[preserve environment in chroot]' \
+  '(-h -l -V)-q[be quiet]' \
+  '(- *)-h[display help information]' \
+  '(- *)-V[display version information]' \
+  '*::args: _normal' && ret=0
+
+[[ -n $state ]] && _wanted chroots expl chroot \
+    compadd ${${$(dchroot -l)[3,-1]%,}:#\[*\]} && ret=0
+
+return ret


This e-mail and any attachment is for authorised use by the intended recipient(s) only. It may contain proprietary material, confidential information and/or be subject to legal privilege. It should not be copied, disclosed to, retained or used by, any other party. If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender. Thank you.


From zsh-workers-return-19403-mason-zsh=primenet.com.au@sunsite.dk Sat Jan 31 22:07:56 2004
Return-Path: <zsh-workers-return-19403-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7235 invoked from network); 31 Jan 2004 22:07:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 31 Jan 2004 22:07:56 -0000
Received: (qmail 26368 invoked by alias); 31 Jan 2004 22:07:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19403
Received: (qmail 26310 invoked from network); 31 Jan 2004 22:07:45 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 31 Jan 2004 22:07:45 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [212.26.224.78] by sunsite.dk (MessageWall 1.0.8) with SMTP; 31 Jan 2004 22:7:45 -0000
Received: from solemn.turbinal.org (dialup186.m-dialup.ryazan.ru [212.26.238.186] (may be forged))
	by kripton.ineco.ryazan.su (8.12.10/8.12.10) with ESMTP id i0VM74fk028052;
	Sun, 1 Feb 2004 01:07:08 +0300
Received: by solemn.turbinal.org (Postfix, from userid 500)
	id E65D21B5C; Sun,  1 Feb 2004 01:06:32 +0300 (MSK)
Date: Sun, 1 Feb 2004 01:06:32 +0300
From: Alexey Tourbin <at@altlinux.ru>
To: Zsh Workers <zsh-workers@sunsite.dk>
Cc: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: zpty and sutff
Message-ID: <20040131220632.GB30765@solemn.turbinal.org>
Mail-Followup-To: Zsh Workers <zsh-workers@sunsite.dk>,
	Bart Schaefer <schaefer@brasslantern.com>
References: <20040107121100.GA1432@DervishD> <1040107160210.ZM10597@candle.brasslantern.com> <20040107185618.GE13633@DervishD>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="dc+cDN39EJAMEtIO"
Content-Disposition: inline
In-Reply-To: <20040107185618.GE13633@DervishD>


--dc+cDN39EJAMEtIO
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

On Wed, Jan 07, 2004 at 07:56:18PM +0100, DervishD wrote:
>     Maybe PTY handling is the problem, but if I run the test as you
> say, the test is indeed more verbose but hangs anyway :( It stops at:
> 
>     comptestinit -z $ZTST_testdir/../Src/zsh &&
>     {
>         mkdir dir1
>         mkdir dir2
>         touch file1
>         touch file2
>     }
> 
>     Don't know why 'comptestinit' stops there :??
> 
>     BTW, I have /dev/ptmx AND /dev/ptyp? so the test shouldn't fail
> even if zsh thinks I don't have the PTY multiplexer :?

Hi,

I've got rather similar problem with pty handling (zpty).
Last year I pached zsh to use "native" glibc calls (getpt(3) and so on)
and posted a patch to this list.  The patch was non-portabe, though.

What is the output of the following commands with zsh you've built?

zmodload zsh/zpty
zpty job1 date
zpty -r job1

--dc+cDN39EJAMEtIO
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAHCbofBKgtDjnu0YRArVqAJ9wz50CEu8JEYhAsXTilPczTNSiZwCgwXJg
J53opHeCYefJrlHaXaRt3p4=
=IXoy
-----END PGP SIGNATURE-----

--dc+cDN39EJAMEtIO--


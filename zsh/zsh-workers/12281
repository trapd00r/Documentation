From zsh-workers-return-12281-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 17 17:49:22 2000
Return-Path: <zsh-workers-return-12281-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13518 invoked from network); 17 Jul 2000 17:49:20 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Jul 2000 17:49:20 -0000
Received: (qmail 23645 invoked by alias); 17 Jul 2000 17:49:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12281
Received: (qmail 23638 invoked from network); 17 Jul 2000 17:49:11 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000717174853.ZM22633@candle.brasslantern.com>
Date: Mon, 17 Jul 2000 17:48:53 +0000
In-Reply-To: <20000717160933.B6739@thelonious.new.ox.ac.uk>
Comments: In reply to Adam Spiers <adam@spiers.net>
        "Re: adding a toplevel zsh.spec.in file" (Jul 17,  4:09pm)
References: <E13AcAZ-0004bN-00@crucigera.fysh.org> 
	<1000707181834.ZM1473@candle.brasslantern.com> 
	<20000717160933.B6739@thelonious.new.ox.ac.uk>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Adam Spiers <adam@spiers.net>,
        zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: adding a toplevel zsh.spec.in file
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 17,  4:09pm, Adam Spiers wrote:
} Subject: Re: adding a toplevel zsh.spec.in file
}
} In /etc/zshenv:
} 
} What about setting of umask?  In the last discussion about this kind
} of stuff you suggested that umask setting was better done in zshrc.
} But shouldn't it be set correctly for non-interactive processes too?

I suggested that zshrc was better than zprofile (and that it should
be in only one or the other, and not both as it was).  Neither of those
catches non-interactive processes, so I wasn't addressing that at all.

In the case of RedHat's umask setting, which involves executing $(id -gn)
and several other tests, I'd say that avoiding the startup overhead is
more important for non-interactive shells.  If it's really a problem for
some reason, set umask conservatively in zshenv and then do the tests in
zshrc to relax the umask if appropriate.

} These don't do much harm either (quoted mostly straight from Bart
} anyway ;-)
} 
}   export USER=`id -un`
}   export LOGNAME=$USER
}   export HOSTNAME=$HOST
}   
}   # this only on appropriate boxes of course
}   export MAIL=/var/spool/mail/$USER

I agree that these don't do much harm, but this is bad:

}   HISTSIZE=1000
}   HISTFILE=~/.zshhistory
}   SAVEHIST=1000

Please don't mess with the shape of my history or the location of any of
my dotfiles.

} Is there any good reason why /sbin and /usr/sbin should not be on
} every user's path by default?  They're not under RedHat, which is
} infuriating when it comes to using traceroute, lsof etc.

Some system administrators believe in hiding system administration commands
from users who are not system administrators.  I don't care one way or the
other.

} Now here's a candidate for StartupFiles/RedHat/zshrc.  Anything badly
} wrong?

Yes.  Don't screw with my fpath and don't autoload functions for me.  I
very carefully set fpath and autoload functions in stages so that some
functions are available in non-interactive shells, and I don't use the
execute bit to mean anything nor should I be required to do so.  Your
assumptions about where under my home directory there might be functions
are wrong, and if your RPM is built correctly there shouldn't be anything
useful in /usr/doc/zsh*/Functions -- the only things that could be there
are leftovers from some 3.0.x-y RPM, which you don't want to pick up.

I won't call the aliases "badly" wrong, but I object to them anyway, and
I'd just as soon not have all that crap in my prompt, thanks.  Which I
guess means I think /etc/zshrc should be empty (except maybe for umask
as discussed above).

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


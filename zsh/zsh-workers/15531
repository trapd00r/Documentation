From zsh-workers-return-15531-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 30 14:46:30 2001
Return-Path: <zsh-workers-return-15531-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15945 invoked from network); 30 Jul 2001 14:46:28 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Jul 2001 14:46:28 -0000
Received: (qmail 3535 invoked by alias); 30 Jul 2001 14:46:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15531
Received: (qmail 3524 invoked from network); 30 Jul 2001 14:46:22 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: Adam Spiers <adam@spiers.net>,
   zsh workers mailing list
	 <zsh-workers@sunsite.auc.dk>
Subject: RE: location of pcre.h
Date: Mon, 30 Jul 2001 18:46:02 +0400
Message-ID: <007d01c11906$5ad4acb0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <20010730153817.A16119@thelonious.new.ox.ac.uk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006

>
> On my RedHat 7.0 system, pcre.h is in /usr/include/pcre, not
> /usr/include or any other standard include path, so compilation of
> Src/Modules/pcre.c fails unless I change the
>
>   #include <pcre.h>
>
> to
>
>   #include <pcre/pcre.h>
>
> Obviously this needs a more general fix, but I'm not sure how to do
> it.
>

Do they have anything else in /usr/include/pcre? Else I'd call this broken
(yet another thing in 7.0).


Obvious fix is to check for both pcre.h and pcre/pcre.h and take whatever
exists

#ifdef HAVE_PCRE_H
#include <pcre.h>
#else
#ifdef HAVE_PCRE_PCRE_H - ick!
#include <pcre/pcre.h>
#else
#error pcre not found
#endif
#endif

Additionally, pcre should be compiled conditionally only if prerequisites
are found (compare termcap.mdd or terminfo.mdd).

-andrej


From zsh-workers-return-18131-mason-zsh=primenet.com.au@sunsite.dk Mon Jan 20 17:43:39 2003
Return-Path: <zsh-workers-return-18131-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8777 invoked from network); 20 Jan 2003 17:43:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Jan 2003 17:43:38 -0000
Received: (qmail 9951 invoked by alias); 20 Jan 2003 17:43:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18131
Received: (qmail 9942 invoked from network); 20 Jan 2003 17:43:22 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Date: Mon, 20 Jan 2003 12:43:21 -0500
From: Clint Adams <clint@zsh.org>
To: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: Pcre compilation problem persists
Message-ID: <20030120174321.GA15011@dman.com>
References: <20030116160203.25585.qmail@web10402.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20030116160203.25585.qmail@web10402.mail.yahoo.com>
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

> Could someone fix this problem before we release zsh again.

Does this work for you?

Index: zshconfig.ac
===================================================================
RCS file: /cvsroot/zsh/zsh/zshconfig.ac,v
retrieving revision 1.28
diff -u -r1.28 zshconfig.ac
--- zshconfig.ac	6 May 2002 14:50:11 -0000	1.28
+++ zshconfig.ac	20 Jan 2003 17:37:30 -0000
@@ -482,6 +482,13 @@
 AC_HEADER_TIME
 AC_HEADER_STAT
 AC_HEADER_SYS_WAIT
+
+oldcflags="$CFLAGS"
+AC_CHECK_PROG([PCRECONF], pcre-config, pcre-config)
+if test "x$ac_cv_prog_PCRECONF" = xpcre-config; then
+  CFLAGS="$CFLAGS `pcre-config --cflags`"
+fi
+
 AC_CHECK_HEADERS(sys/time.h sys/times.h sys/select.h termcap.h termio.h \
 		 termios.h sys/param.h sys/filio.h string.h memory.h \
 		 limits.h fcntl.h libc.h sys/utsname.h sys/resource.h \


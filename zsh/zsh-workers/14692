From zsh-workers-return-14692-mason-zsh=primenet.com.au@sunsite.dk Sun Jun 03 18:05:38 2001
Return-Path: <zsh-workers-return-14692-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23080 invoked from network); 3 Jun 2001 18:05:36 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Jun 2001 18:05:36 -0000
Received: (qmail 13126 invoked by alias); 3 Jun 2001 18:05:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14692
Received: (qmail 13106 invoked from network); 3 Jun 2001 18:05:23 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010603180433.ZM24939@candle.brasslantern.com>
Date: Sun, 3 Jun 2001 18:04:33 +0000
In-Reply-To: <Pine.SV4.4.33.0106031239260.19014-100000@itsrm2.mow.siemens.ru>
Comments: In reply to Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
        "Re: PATCH: "make check" with libzsh (e.g. FreeBSD)" (Jun  3, 12:40pm)
References: <Pine.SV4.4.33.0106031239260.19014-100000@itsrm2.mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: <zsh-workers@sunsite.dk>
Subject: Re: PATCH: "make check" with libzsh (e.g. FreeBSD)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 3, 12:40pm, Andrej Borsenkow wrote:
} Subject: Re: PATCH: "make check" with libzsh (e.g. FreeBSD)
}
} On Sun, 3 Jun 2001, Bart Schaefer wrote:
} 
} > This is hardly ever going to be a problem except for someone who is
} > trying to keep up with individual patches.
} 
} And these are exactly those who need tests :-)

Actually, I was thinking that the tests are really needed by people who
are building on a new platform for the first time.  The developers are
more likely to know what they're doing -- for example, as of right now,
you can't run "make check" for a static build without knowing that you
have to change the default linkage of zpty.

In any case, *re*compiling with a different LD_RUN_PATH doesn't seem to
be an option.  We could, however, compile two different zsh binaries --
e.g., zsh and zsh-test -- and use the zsh-test binary for "make check".
On systems without libzsh, zsh-test could just be a link to zsh, but
where libzsh was needed, it'd be a separate binary with LD_RUN_PATH set
to the build directory.

Then we'd have to update the tests to always run zsh-test rather than
just zsh.  We'd still need an LD_LIBRARY_PATH patch in Test/Makefile.in
for systems that don't use an LD_RUN_PATH.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


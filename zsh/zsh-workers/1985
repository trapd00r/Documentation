From zsh-workers-request@euclid.skiles.gatech.edu  Thu Aug 15 19:34:26 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id TAA00281 for <mason@primenet.com.au>; Thu, 15 Aug 1996 19:34:24 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id FAA15996; Thu, 15 Aug 1996 05:32:17 -0400 (EDT)
Resent-Date: Thu, 15 Aug 1996 05:32:17 -0400 (EDT)
Message-Id: <199608150930.LAA17853@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Bad substitution bug: hold the release...
Date: Thu, 15 Aug 1996 11:30:59 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"czx5F1.0.tv3.Wwk4o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1985
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I suggest this needs fixing now rather than later (!)...

% print $(<nosuchfile)
zsh: 16949 segmentation fault (core dumped)  zsh

The only question is the appropriate error message: I copied the one
you get from a simple `<nosuchfile'.

*** Src/exec.c.getout	Thu Aug 15 10:33:18 1996
--- Src/exec.c	Thu Aug 15 11:27:04 1996
***************
*** 2033,2039 ****
  	if (errflag)
  	    return NULL;
  	untokenize(s);
! 	stream = open(unmeta(s), O_RDONLY);
  	return readoutput(stream, qt);
      }
  
--- 2033,2042 ----
  	if (errflag)
  	    return NULL;
  	untokenize(s);
! 	if ((stream = open(unmeta(s), O_RDONLY)) == -1) {
! 	    zerr("%e: %s", s, errno);
! 	    return NULL;
! 	}
  	return readoutput(stream, qt);
      }
  
-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


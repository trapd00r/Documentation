<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Appendix&nbsp;A.&nbsp;Git Shortcomings</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="ch08.html" title=
  "Chapter&nbsp;8.&nbsp;Secrets Revealed">
  <link rel="next" href="apb.html" title=
  "Appendix&nbsp;B.&nbsp;Translating This Guide">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Preface</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_thanks">Thanks!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_license">License</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Introduction</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_work_is_play">Work is Play</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_version_control">Version
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_distributed_control">Distributed
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_a_silly_superstition">A Silly
            Superstition</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_merge_conflicts">Merge
            Conflicts</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Basic
          Tricks</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_saving_state">Saving State</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_add_delete_rename">Add, Delete,
            Rename</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_advanced_undo_redo">Advanced
            Undo/Redo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_reverting">Reverting</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_changelog_generation">Changelog
            Generation</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_downloading_files">Downloading
            Files</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_the_bleeding_edge">The Bleeding
            Edge</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_instant_publishing">Instant
            Publishing</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_what_have_i_done">What Have I
            Done?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_exercise">Exercise</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Cloning
          Around</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_sync_computers">Sync
            Computers</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_classic_source_control">Classic Source
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_secret_source">Secret
            Source</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bare_repositories">Bare
            repositories</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_versus_pull">Push versus
            pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_forking_a_project">Forking a
            Project</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_ultimate_backups">Ultimate
            Backups</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_light_speed_multitask">Light-Speed
            Multitask</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_guerilla_version_control">Guerilla Version
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_why_i_use_git">Why I use
            Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Branch
          Wizardry</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_the_boss_key">The Boss Key</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_dirty_work">Dirty Work</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_quick_fixes">Quick Fixes</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_merging">Merging</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_uninterrupted_workflow">Uninterrupted
            Workflow</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_reorganizing_a_medley">Reorganizing a
            Medley</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_managing_branches">Managing
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_temporary_branches">Temporary
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_work_how_you_want">Work How You
            Want</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Lessons of
          History</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_i_stand_corrected">I Stand
            Corrected</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_and_then_some">… And Then
            Some</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_local_changes_last">Local Changes
            Last</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_rewriting_history">Rewriting
            History</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_making_history">Making
            History</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_where_did_it_all_go_wrong">Where Did It All
            Go Wrong?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_who_made_it_all_go_wrong">Who Made It All
            Go Wrong?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_personal_experience">Personal
            Experience</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Multiplayer
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_who_am_i">Who Am I?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_over_ssh_http">Git Over SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_over_anything">Git Over
            Anything</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_the_global_currency">Patches: The
            Global Currency</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_sorry_we_8217_ve_moved">Sorry, We’ve
            Moved</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_remote_branches">Remote
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_multiple_remotes">Multiple
            Remotes</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_my_preferences">My
            Preferences</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Git
          Grandmastery</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_source_releases">Source
            Releases</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_commit_what_changed">Commit What
            Changed</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_my_commit_is_too_big">My Commit Is Too
            Big!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_the_index_git_8217_s_staging_area">The
            Index: Git’s Staging Area</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_don_8217_t_lose_your_head">Don’t Lose Your
            HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_head_hunting">HEAD-hunting</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_building_on_git">Building On
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_daring_stunts">Daring
            Stunts</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_preventing_bad_commits">Preventing Bad
            Commits</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Secrets
          Revealed</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_invisibility">Invisibility</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integrity">Integrity</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelligence">Intelligence</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indexing">Indexing</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_git_8217_s_origins">Git’s
            Origins</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_the_object_database">The Object
            Database</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_trees">Trees</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_commits">Commits</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indistinguishable_from_magic">Indistinguishable
            From Magic</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Git
          Shortcomings</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_sha1_weaknesses">SHA1
            Weaknesses</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_unrelated_files">Unrelated
            Files</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_who_8217_s_editing_what">Who’s Editing
            What?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_file_history">File History</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initial_clone">Initial Clone</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_volatile_projects">Volatile
            Projects</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_global_counter">Global
            Counter</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_empty_subdirectories">Empty
            Subdirectories</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initial_commit">Initial
            Commit</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_interface_quirks">Interface
            Quirks</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B.
        Translating This Guide</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="appendix" title=
  "Appendix&nbsp;A.&nbsp;Git Shortcomings">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_git_shortcomings"></a>Appendix&nbsp;A.&nbsp;Git
          Shortcomings</h2>
        </div>
      </div>
    </div>

    <p>There are some Git issues I’ve swept under the carpet. Some
    can be handled easily with scripts and hooks, some require
    reorganizing or redefining the project, and for the few
    remaining annoyances, one will just have to wait. Or better
    yet, pitch in and help!</p>

    <div class="section" title="SHA1 Weaknesses">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_sha1_weaknesses"></a>SHA1
            Weaknesses</h2>
          </div>
        </div>
      </div>

      <p>As time passes, cryptographers discover more and more SHA1
      weaknesses. Already, finding hash collisions is feasible for
      well-funded organizations. Within years, perhaps even a
      typical PC will have enough computing power to silently
      corrupt a Git repository.</p>

      <p>Hopefully Git will migrate to a better hash function
      before further research destroys SHA1.</p>
    </div>

    <div class="section" title="Microsoft Windows">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_microsoft_windows"></a>Microsoft Windows</h2>
          </div>
        </div>
      </div>

      <p>Git on Microsoft Windows can be cumbersome:</p>

      <div class="itemizedlist">
        <ul class="itemizedlist">
          <li class="listitem"><a class="ulink" href=
          "http://cygwin.com/" target="_top">Cygwin</a>, a
          Linux-like environment for Windows, contains <a class=
          "ulink" href="http://cygwin.com/packages/git/" target=
          "_top">a Windows port of Git</a>.</li>

          <li class="listitem"><a class="ulink" href=
          "http://code.google.com/p/msysgit/" target="_top">Git on
          MSys</a> is an alternative requiring minimal runtime
          support, though a few of the commands need some
          work.</li>
        </ul>
      </div>
    </div>

    <div class="section" title="Unrelated Files">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_unrelated_files"></a>Unrelated Files</h2>
          </div>
        </div>
      </div>

      <p>If your project is very large and contains many unrelated
      files that are constantly being changed, Git may be
      disadvantaged more than other systems because single files
      are not tracked. Git tracks changes to the whole project,
      which is usually beneficial.</p>

      <p>A solution is to break up your project into pieces, each
      consisting of related files. Use <span class=
      "strong"><strong>git submodule</strong></span> if you still
      want to keep everything in a single repository.</p>
    </div>

    <div class="section" title="Who’s Editing What?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_who_8217_s_editing_what"></a>Who’s Editing What?</h2>
          </div>
        </div>
      </div>

      <p>Some version control systems force you to explicitly mark
      a file in some way before editing. While this is especially
      annoying when this involves talking to a central server, it
      does have two benefits:</p>

      <div class="orderedlist">
        <ol class="orderedlist" type="1">
          <li class="listitem">Diffs are quick because only the
          marked files need be examined.</li>

          <li class="listitem">One can discover who else is working
          on the file by asking the central server who has marked
          it for editing.</li>
        </ol>
      </div>

      <p>With appropriate scripting, you can achieve the same with
      Git. This requires cooperation from the programmer, who
      should execute particular scripts when editing a file.</p>
    </div>

    <div class="section" title="File History">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_file_history"></a>File
            History</h2>
          </div>
        </div>
      </div>

      <p>Since Git records project-wide changes, reconstructing the
      history of a single file requires more work than in version
      control systems that track individual files.</p>

      <p>The penalty is typically slight, and well worth having as
      other operations are incredibly efficient. For example,
      <code class="literal">git checkout</code> is faster than
      <code class="literal">cp -a</code>, and project-wide deltas
      compress better than collections of file-based deltas.</p>
    </div>

    <div class="section" title="Initial Clone">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_initial_clone"></a>Initial
            Clone</h2>
          </div>
        </div>
      </div>

      <p>Creating a clone is more expensive than checking out code
      in other version control systems when there is a lengthy
      history.</p>

      <p>The initial cost is worth paying in the long run, as most
      future operations will then be fast and offline. However, in
      some situations, it may be preferable to create a shallow
      clone with the <code class="literal">--depth</code> option.
      This is much faster, but the resulting clone has reduced
      functionality.</p>
    </div>

    <div class="section" title="Volatile Projects">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_volatile_projects"></a>Volatile Projects</h2>
          </div>
        </div>
      </div>

      <p>Git was written to be fast with respect to the size of the
      changes. Humans make small edits from version to version. A
      one-liner bugfix here, a new feature there, emended comments,
      and so forth. But if your files are radically different in
      successive revisions, then on each commit, your history
      necessarily grows by the size of your whole project.</p>

      <p>There is nothing any version control system can do about
      this, but standard Git users will suffer more since normally
      histories are cloned.</p>

      <p>The reasons why the changes are so great should be
      examined. Perhaps file formats should be changed. Minor edits
      should only cause minor changes to at most a few files.</p>

      <p>Or perhaps a database or backup/archival solution is what
      is actually being sought, not a version control system. For
      example, version control may be ill-suited for managing
      photos periodically taken from a webcam.</p>

      <p>If the files really must be constantly morphing and they
      really must be versioned, a possibility is to use Git in a
      centralized fashion. One can create shallow clones, which
      checks out little or no history of the project. Of course,
      many Git tools will be unavailable, and fixes must be
      submitted as patches. This is probably fine as it’s unclear
      why anyone would want the history of wildly unstable
      files.</p>

      <p>Another example is a project depending on firmware, which
      takes the form of a huge binary file. The history of the
      firmware is uninteresting to users, and updates compress
      poorly, so firmware revisions would unnecessarily blow up the
      size of the repository.</p>

      <p>In this case, the source code should be stored in a Git
      repository, and the binary file should be kept separately. To
      make life easier, one could distribute a script that uses Git
      to clone the code, and rsync or a Git shallow clone for the
      firmware.</p>
    </div>

    <div class="section" title="Global Counter">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_global_counter"></a>Global
            Counter</h2>
          </div>
        </div>
      </div>

      <p>Some centralized version control systems maintain a
      positive integer that increases when a new commit is
      accepted. Git refers to changes by their hash, which is
      better in many circumstances.</p>

      <p>But some people like having this integer around. Luckily,
      it’s easy to write scripts so that with every update, the
      central Git repository increments an integer, perhaps in a
      tag, and associates it with the hash of the latest
      commit.</p>

      <p>Every clone could maintain such a counter, but this would
      probably be useless, since only the central repository and
      its counter matters to everyone.</p>
    </div>

    <div class="section" title="Empty Subdirectories">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_empty_subdirectories"></a>Empty Subdirectories</h2>
          </div>
        </div>
      </div>

      <p>Empty subdirectories cannot be tracked. Create dummy files
      to work around this problem.</p>

      <p>The current implementation of Git, rather than its design,
      is to blame for this drawback. With luck, once Git gains more
      traction, more users will clamour for this feature and it
      will be implemented.</p>
    </div>

    <div class="section" title="Initial Commit">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_initial_commit"></a>Initial
            Commit</h2>
          </div>
        </div>
      </div>

      <p>A stereotypical computer scientist counts from 0, rather
      than 1. Unfortunately, with respect to commits, git does not
      adhere to this convention. Many commands are unfriendly
      before the initial commit. Additionally, some corner cases
      must be handled specially, such as rebasing a branch with a
      different initial commit.</p>

      <p>Git would benefit from defining the zero commit: as soon
      as a repository is constructed, HEAD would be set to the
      string consisting of 20 zero bytes. This special commit
      represents an empty tree, with no parent, at some time
      predating all Git repositories.</p>

      <p>Then running git log, for example, would inform the user
      that no commits have been made yet, instead of exiting with a
      fatal error. Similarly for other tools.</p>

      <p>Every initial commit is implicitly a descendant of this
      zero commit.</p>

      <p>However there are some problem cases unfortunately. If
      several branches with different initial commits are merged
      together, then rebasing the result requires substantial
      manual intervention.</p>
    </div>

    <div class="section" title="Interface Quirks">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_interface_quirks"></a>Interface Quirks</h2>
          </div>
        </div>
      </div>

      <p>For commits A and B, the meaning of the expressions "A..B"
      and "A…B" depends on whether the command expects two
      endpoints or a range. See <span class="strong"><strong>git
      help diff</strong></span> and <span class=
      "strong"><strong>git help rev-parse</strong></span>.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

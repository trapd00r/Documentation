From zsh-workers-return-12305-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 18 20:08:12 2000
Return-Path: <zsh-workers-return-12305-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12667 invoked from network); 18 Jul 2000 20:08:11 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Jul 2000 20:08:11 -0000
Received: (qmail 25927 invoked by alias); 18 Jul 2000 20:08:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12305
Received: (qmail 25920 invoked from network); 18 Jul 2000 20:08:03 -0000
X-Authentication-Warning: hoser.devel.redhat.com: teg set sender to teg@redhat.com using -f
Sender: teg@hoser.devel.redhat.com
To: Zefram <zefram@fysh.org>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: Re: adding a toplevel zsh.spec.in file
References: <E13EdUP-0005J0-00@crucigera.fysh.org>
Organization: Red Hat, Inc.
From: teg@redhat.com (Trond Eivind=?iso-8859-1?q?_Glomsr=F8d?=)
Date: 18 Jul 2000 16:07:52 -0400
In-Reply-To: Zefram's message of "Tue, 18 Jul 2000 20:57:13 +0100 (BST)"
Message-ID: <xuyzonfjj6v.fsf@hoser.devel.redhat.com>
Lines: 57
User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Zefram <zefram@fysh.org> writes:

> Trond Eivind Glomsrød wrote:
> >Of course, and you're free to change it in your own files - but that
> >doesn't mean systems should be set up with sensible values (like
> >specifying NNTPSERVER, MAIL, QTDIR etc. etc). 
> 
> Setting those by default when the user logs in is fine.  These do
> belong in /etc/profile.  It's unfortunate that zsh processes .zshenv
> before /etc/zprofile, as it would be nice to be able to set those things
> similarly for zsh while allowing the user to override them in
> .zshenv.

Agreed - all default system values should be first, then personal.

> >If it makes sense, do it - it's just another default, a user can
> >override it. The default BASH prompt is "bash-2.04#", and changing
> >this to something more sensible is good (IMHO, of course - and if you
> >don't like it, pick your own).
> 
> I've already described the problem with setting PS1 by default -- PS1
> gets inherited by other shells.

The default value sucks (IMHO) - the alternative is patching the
source, which would be much more confusing. The solution for zsh is
simple - just set something in your .zshrc.
> 
> >It's not broken, it's just not designed to handle zsh - it's designed
> >to handle bash only. Fixing this (setting another default prompt for
> >zsh) should be simple if required.
> 
> Ah, I actually can't find the really nasty bits of default setup (such
> as enabling colour output from ls) in the recent versions, so this
> seems to have been fixed (assuming that I'm remembering correctly in
> that being Red Hat). 

This is now being done by ls itself in a file sourced from
/etc/profile.d/ - if you don't like it, convince bero@redhat.com :
You'll have a hard time. 

> There are a couple of things where I think it's
> still overstepping its territory, particularly setting HISTSIZE and
> INPUTRC,

HISTSIZE isn't too bad (you can override it) and /etc/inputrc is
necesarry to make bash 1.4x work with non-ASCII characters.

When creating a distribution, you have to walk a thin line between
those who want the most functionality out of the box and those who
don't. We are restrictive in what the default setup does, but some
things are necesarry: Like changing the default prompt in bash
and enabling 8 bit support. And of course, system configuration: The
latter is handled individually by each package from /etc/profile.d

-- 
Trond Eivind Glomsrød
Red Hat, Inc.


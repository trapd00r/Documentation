From zsh-workers-return-10145-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Mar 15 09:38:28 2000
Return-Path: <zsh-workers-return-10145-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7984 invoked from network); 15 Mar 2000 09:38:27 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Mar 2000 09:38:27 -0000
Received: (qmail 10457 invoked by alias); 15 Mar 2000 09:38:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10145
Received: (qmail 10443 invoked from network); 15 Mar 2000 09:38:17 -0000
Date: Wed, 15 Mar 2000 10:38:16 +0100 (MET)
Message-Id: <200003150938.KAA15656@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Tue, 14 Mar 2000 18:24:08 +0000
Subject: PATCH: Re: zle -U


Bart Schaefer wrote:

> On Mar 11,  7:57am, Bart Schaefer wrote:
> }
> } 	zle -U frob
> } 
> } This results in "brof" being inserted onto the command line.
> 
> Sven sent a patch to fix that, but there's still a problem with this:
> 
> 	zle -U f
> 	zle -U r
> 	zle -U o
> 	zle -U b
> 
> Once again we get "brof".  Maybe we should just admit that there is no
> input "queue" (only a stack), as is done with "print -z"?

Right. I haven't changed the order in which the characters from one
string are pushed, hope that's ok for everyone.

Bye
 Sven

diff -ru ../z.old/Doc/Zsh/mod_zle.yo Doc/Zsh/mod_zle.yo
--- ../z.old/Doc/Zsh/mod_zle.yo	Wed Mar 15 10:32:54 2000
+++ Doc/Zsh/mod_zle.yo	Wed Mar 15 10:36:41 2000
@@ -258,9 +258,14 @@
 the widget returns (until it is overwritten by subsequent commands).
 )
 item(tt(-U) var(string))(
-This puts the characters in the var(string) in the input queue of
+This pushes the characters in the var(string) onto the input stack of
 ZLE. After the widget currently executed finishes ZLE will behave as
 if the characters in the var(string) were typed by the user.
+
+Note that since ZLE uses a stack, using tt(zle) with this option more
+than once will make the last string pushed be used first. The
+characters in each var(string) will be used in the order in which they
+appear in the string, though.
 )
 item(var(widget) tt([ -n) var(num) tt(]) tt([ -N ]) var(args) ...)(
 Invoke the specified widget.  This can only be done when ZLE is

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


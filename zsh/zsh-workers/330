From zsh-workers-request@math.gatech.edu  Fri Aug 18 07:13:53 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id HAA19000 for <mason@werple.mira.net.au>; Fri, 18 Aug 1995 07:13:51 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA26287
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Thu, 17 Aug 1995 17:11:25 -0400
Received: by math (5.x/SMI-SVR4)
	id AA01972; Thu, 17 Aug 1995 17:06:41 -0400
Resent-Date: Thu, 17 Aug 1995 22:08:22 +0100 (BST)
Old-Return-Path: <zefram@dcs.warwick.ac.uk>
From: Zefram <A.Main@dcs.warwick.ac.uk>
Message-Id: <1992.199508172108@tamarind.dcs.warwick.ac.uk>
Subject: Redirection Bug II -- It's Back
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Thu, 17 Aug 1995 22:08:22 +0100 (BST)
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]6149.40
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"7Iihk3.0.kU.WzwCm"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/330
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

% echo x >x >&1

The redirection is into the file, one copy only, and is permanent.
"echo x >&1 >x", however, works, doing a normal multio.

I'm not sure what the redirection above ought to do, but it certainly
shouldn't be a permanent redirection.  I'm working on this bug right
now.

As a debugging tool, I'm doing something I did to solve the previous
redirection bug.  I'm using debugging macros in zsh.h that output
debugging information whenever a file-descriptor manipulating function
(e.g. redup) is called.  I find this more helpful than trying to
interpret a strace, particularly as it gives to location of each call.
Does anyone think it would be worth me doing this properly (with
wrapper functions etc., making it portable) and leaving the code
available and #ifdef'ed out?

-zefram


From zsh-workers-request@euclid.skiles.gatech.edu Sun May 04 01:09:50 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 19072 invoked from network); 4 May 1997 01:09:49 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 4 May 1997 01:09:49 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id VAA23779; Sat, 3 May 1997 21:04:07 -0400 (EDT)
Resent-Date: Sat, 3 May 1997 21:04:07 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@ny.frontiercomm.net>
Message-Id: <199705040107.VAA03050@hzoli.home>
Subject: Re: rlim_t
In-Reply-To: <9152.199705032219@stone.dcs.warwick.ac.uk> from Zefram at "May 3, 97 11:19:34 pm"
To: zefram@dcs.warwick.ac.uk (Zefram)
Date: Sat, 3 May 1997 21:07:21 -0400 (EDT)
Cc: zsh-workers@math.gatech.edu
X-Mailer: ELM [version 2.4ME+ PL31 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"zKyRD1.0.Up5.62-Qp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3096
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> Zoltan's rlim_t patch contains:
> 
> +AC_CACHE_CHECK(for rlim_t, zsh_cv_type_rlim_t,
> +[AC_TRY_COMPILE([
> +#include <sys/types.h>
> +#ifdef HAVE_SYS_TIME_H
> +#include <sys/time.h>
> +#endif
> +#include <sys/resource.h>],
> +[rlim_t l;],
> +zsh_cv_type_rlim_t=yes,
> +zsh_cv_type_rlim_t=no)])
> +if test $zsh_cv_type_rlim_t = no; then
> +  AC_DEFINE_UNQUOTED(rlim_t, $DEFAULT_RLIM_T)
>  fi
> 
> Shouldn't that be
> 
> AC_CHECK_TYPE(rlim_t, $DEFAULT_RLIM_T)

AC_CHECK_TYPE does not do shell expansion on the second argument.  Also:

 - Macro: AC_CHECK_TYPE (TYPE, DEFAULT)
     If the type TYPE is not defined in `sys/types.h', or `stdlib.h' or
     `stddef.h' if they exist, define it to be the C (or C++) builtin
     type DEFAULT; e.g., `short' or `unsigned'.

So this does not include sys/resource.h.

Zoli


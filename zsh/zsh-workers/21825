From zsh-workers-return-21825-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 04 10:13:23 2005
Return-Path: <zsh-workers-return-21825-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19324 invoked from network); 4 Oct 2005 10:13:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 4 Oct 2005 10:13:15 -0000
Received: (qmail 5512 invoked from network); 4 Oct 2005 10:13:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2005 10:13:00 -0000
Received: (qmail 6426 invoked by alias); 4 Oct 2005 10:12:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21825
Received: (qmail 6417 invoked from network); 4 Oct 2005 10:12:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 4 Oct 2005 10:12:56 -0000
Received: (qmail 5151 invoked from network); 4 Oct 2005 10:12:56 -0000
Received: from cluster-c.mailcontrol.com (HELO rly02c.srv.mailcontrol.com) (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 4 Oct 2005 10:12:54 -0000
Received: from exchange03.csr.com (mailhost1.csr.com [81.105.217.43])
	by rly02c.srv.mailcontrol.com (MailControl) with ESMTP id j94AConB004494
	for <zsh-workers@sunsite.dk>; Tue, 4 Oct 2005 11:12:50 +0100
Received: from news01 ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 4 Oct 2005 11:14:47 +0100
Date: Tue, 4 Oct 2005 11:12:48 +0100
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: Latest 4.3.0-dev infinite-loops in Y0*.ztst
Message-Id: <20051004111248.07a496a2.pws@csr.com>
In-Reply-To: <20051004095350.GA19213@DervishD>
References: <1051004025021.ZM23329@candle.brasslantern.com>
	<1051004033617.ZM24182@candle.brasslantern.com>
	<1051004041456.ZM29954@candle.brasslantern.com>
	<20051004095350.GA19213@DervishD>
Organization: Cambridge Silicon Radio
X-Mailer: Sylpheed version 0.9.12 (GTK+ 1.2.10; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 04 Oct 2005 10:14:47.0324 (UTC) FILETIME=[72B475C0:01C5C8CC]
X-Scanned-By: MailControl A-05-40-00 (www.mailcontrol.com) on 10.67.0.112
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

DervishD <zsh@dervishd.net> wrote:
> > Index: Src/Zle/complist.c
> > 675c675
> > <     while ((cc = *s)) {
> > ---
> > >     while ((cc = *s++)) {
> 
>     When applying this patch to a 4.2.5 source, it looks like already
> applied, so I applied it with "patch -R" and the crash now happens
> immediately, as soon as menu completion is started.

The problem wasn't present in 4.2.5: applying the patch in reverse you are
creating it.

It got introduced when I added a separate #ifdef branch for multibyte
handling and screwed up the existing code.  That's what happens when you
change your mind in the middle about what you're doing.

pws


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com


From zsh-users-return-7360-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 18 14:17:40 2004
Return-Path: <zsh-users-return-7360-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3570 invoked from network); 18 Apr 2004 14:17:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Apr 2004 14:17:39 -0000
Received: (qmail 29170 invoked by alias); 18 Apr 2004 14:17:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7360
Received: (qmail 29155 invoked from network); 18 Apr 2004 14:17:21 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 18 Apr 2004 14:17:21 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 18 Apr 2004 14:17:21 -0000
Received: (qmail 10555 invoked from network); 18 Apr 2004 14:17:21 -0000
Received: from main.gmane.org (80.91.224.249)
  by a.mx.sunsite.dk with SMTP; 18 Apr 2004 14:17:18 -0000
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1BFD6j-0002YD-00
	for <zsh-users@sunsite.dk>; Sun, 18 Apr 2004 16:17:18 +0200
Received: from isi-dialin-129-122.isionline-dialin.de ([195.158.129.122])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Sun, 18 Apr 2004 16:17:17 +0200
Received: from thorsten by isi-dialin-129-122.isionline-dialin.de with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Sun, 18 Apr 2004 16:17:17 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-users@sunsite.dk
From: Thorsten Kampe <thorsten@thorstenkampe.de>
Subject: completion not inserting matches
Date: Sun, 18 Apr 2004 16:17:14 +0200
Lines: 141
Message-ID: <x1n6gf1ludq1.dlg@thorstenkampe.de>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: isi-dialin-129-122.isionline-dialin.de
User-Agent: 40tude_Dialog/2.0.10.1de
Sender: news <news@sea.gmane.org>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.1 required=6.0 tests=HTML_60_70,HTML_MESSAGE 
	autolearn=no version=2.63
X-Spam-Hits: 0.1

I have the following directories in /usr/src:

linux@
linux-2.4.20-wolk4.9s-r6/
linux-2.4.20-wolk4.11s-r3/
linux-2.4.25-gentoo-r2/
linux-2.4.25_pre7-gss-r3/
linux-2.6.5-gentoo-r1/

Now I am in /usr/src and want to change to "linux-2.4.20-wolk4.11s-r3"
by typing

,---
| root@wolfbrand# cd r3<TAB>
| root@wolfbrand# cd linux-2.4.2--<TAB>-sr3
|                                ^ Cursor jumps to this point
| local directory
| linux-2.4.20-wolk4.11s-r3/  linux-2.4.25_pre7-gss-r3/
| root@wolfbrand# cd linux-2.4.2---sr3
|                                     ^ Cursor jumps to the end
| No match for: `local directory', `directory in cdpath', `user', `named directory', or `corrections'
`---

So the Completion System is correctly showing the possible two matches
on the first <TAB>, but doesn't doesn't insert them at the second
<TAB> and instead tells me now that there are /no matches/!

These are my completion settings: [1] and [2]. One "culprit" is

# case-insensitive and partial-word then substring
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z} m:[-._]=[-._] r:|[-./_]=** r:|=*' '+l:|=*'

and more precisely the "partial word" completion "r:|[-./_]=** r:|=*"
(which is directly taken from the user's guide).

So what am I doing wrong? Am I trying "to complete too much"?


Thorsten

[1]
,---
| setopt   alwayslastprompt
| unsetopt alwaystoend
| setopt   autoparamkeys
| setopt   autoparamslash
| setopt   autoremoveslash
| setopt   completealiases
| setopt   completeinword
| 
| # ambigious completions
| setopt   autolist
| setopt   automenu
| unsetopt bashautolist
| unsetopt beep
| unsetopt listambiguous
| unsetopt listbeep
| unsetopt menucomplete
| unsetopt recexact
|
| # displaying completions
| setopt   listpacked
| setopt   listrowsfirst
| setopt   listtypes
`---

[2]
,---
| # contexts: ':completion:<function>:<completer>:<command>:<arg>:<tag>' <style> <value> (^Xh)
| autoload -U compinit; compinit -C   # completion system
| 
| zstyle ':completion:*' auto-description "specifies %d"
| zstyle ':completion:*' commands         broken ineed iuse needsme pause restart start status stop usesme zap
| zstyle ':completion:*' completer        _expand _complete _approximate _ignored
| zstyle ':completion:*' domains          thorstenkampe.de
| zstyle ':completion:*' group-name       ''
| zstyle ':completion:*' ignore-parents   parent pwd
| zstyle ':completion:*' list-colors      ${(s.:.)LS_COLORS}
| zstyle ':completion:*' list-prompt      "%{${ltgreen}%}last line %l (%p)%{${reset_color}%}  %{${ltwhite}%}last match %m%{${reset_color}%}"
| # case-insensitive and partial-word then substring
| zstyle ':completion:*' matcher-list     'm:{a-zA-Z}={A-Za-z} m:[-._]=[-._] r:|[-./_]=** r:|=*' '+l:|=*'
| zstyle ':completion:*' menu             select=10 select=long-list
| zstyle ':completion:*' prefix-needed    false
| zstyle ':completion:*' remote-access    false
| zstyle ':completion:*' select-prompt    "%{${ltgreen}%}line %l (%p)%{${reset_color}%}  %{${ltwhite}%}match %m%{${reset_color}%}"
| zstyle ':completion:*' select-scroll    -1
| zstyle ':completion:*' sort             true
| zstyle ':completion:*' verbose          yes
| 
| zstyle ':completion::approximate*:*'  insert-unambiguous true
| zstyle ':completion:*:approximate:*'  max-errors         2  # more than '2' degrades performance regardless of "matcher-list"
| zstyle ':completion:*:approximate*:*' original           false
| 
| zstyle ':completion::complete:*' use-cache true
| 
| zstyle ':completion:*:expand:*' accept-exact     continue
| zstyle ':completion:*:expand:*' add-space        file
| zstyle ':completion:*:expand:*' glob             true
| zstyle ':completion:*:expand:*' keep-prefix      true
| zstyle ':completion:*:expand:*' subst-globs-only true
| zstyle ':completion:*:expand:*' substitute       true
| zstyle ':completion:*:expand:*' suffix           true
| zstyle ':completion::expand:*'  tag-order        all-expansions
| 
| zstyle ':completion:*:ignored:*' single-ignored show
| 
| zstyle ':completion:*:corrections'  format "%{${ltyellow}%}%d (errors: %e)%{${reset_color}%}"
| zstyle ':completion:*:descriptions' format "%{${ltgreen}%}%d%{${reset_color}%}"
| zstyle ':completion:*:messages'     format "%{${ltgreen}%}%d%{${reset_color}%}"
| zstyle ':completion:*:warnings'     format "%{${ltred}%}No match for%{${reset_color}%}: %d"
| 
| zstyle ':completion:*:files'                      list-suffixes     true
| zstyle ':completion::(^approximate*):*:functions' ignored-patterns  '_*'
| zstyle ':completion:*:jobs'                       list-colors       'no=01;31'
| zstyle ':completion:*:manuals'                    separate-sections true
| 
| zstyle ':completion:*:paths' ambiguous       true
| zstyle ':completion:*:paths' expand          suffix
| zstyle ':completion:*:paths' preserve-prefix "?:/"  # "C:\" style
| zstyle ':completion:*:paths' special-dirs    ..
| 
| zstyle ':completion:*:processes' command     'ps -e'
| zstyle ':completion:*:processes' insert-ids  single
| zstyle ':completion:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'
| 
| zstyle ':completion:*:complete:dpkg:option--status-1:*' packageset avail
| 
| autoload -U predict-on; predict-on
| zle-line-init() { predict-on }
| zle -N zle-line-init
| zle -N predict-on
| zle -N predict-off
| bindkey '^P'   predict-on
| bindkey '^Xp'  predict-off
| bindkey '^X^P' predict-off
| zstyle ':predict' toggle  true
| zstyle ':predict' verbose true
| 
| zstyle ':completion:predict::::' cursor complete key
| zstyle ':completion:predict::::' list   always
`---


From zsh-workers-return-13356-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 16 08:53:27 2001
Return-Path: <zsh-workers-return-13356-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22884 invoked from network); 16 Jan 2001 08:53:26 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jan 2001 08:53:26 -0000
Received: (qmail 5398 invoked by alias); 16 Jan 2001 08:53:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13356
Received: (qmail 5387 invoked from network); 16 Jan 2001 08:53:20 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <koen.van_hoof@alcatel.be>
Cc: <zsh-workers@sunsite.auc.dk>
Subject: RE: TERMCAP problem.
Date: Tue, 16 Jan 2001 11:52:57 +0300
Message-ID: <000501c07f99$b8d08110$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <3A6406C0.AF8A744A@alcatel.be>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal


> Here is the backtrace.  If you want, I can also send you the core file.
> #0  0xef5a4274 in strcmp () from /usr/lib/libc.so.1
> #1  0x126c00 in tgetent (bp=0x0, name=0x15c2e8 "xterm") at termcap.c:469
> #2  0x48608 in init_term () at init.c:478
> #3  0x6f808 in termsetfn (pm=0x145e20, x=0x15c2e8 "xterm") at params.c:2763
> #4  0x6c514 in setstrvalue (v=0xefffed28, val=0x15c2e8 "xterm") at
> params.c:1513
>
> #5  0x6d7d0 in setsparam (s=0xeffffe45 "", val=0x15c2e8 "xterm") at
> params.c:1810
> #6  0x6767c in createparamtable () at params.c:515
> #7  0x491d0 in setupvals () at init.c:715
> #8  0x12158 in main (argc=1, argv=0xeffff4ac) at ./main.c:78
>

This strcmp() is in library function tgetent. Try to unset
TGETENT_ACCEPTS_NULL, recompile and try again. It is possible that your OS
actually needs preallocated buffer.

One more possibilty is, that screen creates too long termcap entry. IIRC I've
seen something similar. How long is new termcap entry? I think, common limit
is 1024.

-andrej


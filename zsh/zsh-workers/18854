From zsh-workers-return-18854-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 14 21:39:47 2003
Return-Path: <zsh-workers-return-18854-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14490 invoked from network); 14 Jul 2003 21:39:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 Jul 2003 21:39:47 -0000
Received: (qmail 8899 invoked by alias); 14 Jul 2003 21:39:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18854
Received: (qmail 8889 invoked from network); 14 Jul 2003 21:39:42 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 14 Jul 2003 21:39:42 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [4.64.233.9] by sunsite.dk (MessageWall 1.0.8) with SMTP; 14 Jul 2003 21:39:41 -0000
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.11.6/8.11.6) id h6ELdem06928
	for zsh-workers@sunsite.dk; Mon, 14 Jul 2003 14:39:40 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1030714213940.ZM6927@candle.brasslantern.com>
Date: Mon, 14 Jul 2003 21:39:40 +0000
In-Reply-To: <87n0fg3l1m.fsf@ceramic.fifi.org>
Comments: In reply to Philippe Troin <phil@fifi.org>
        "More fun with completion: glob qualifiers ignored for ignored-patterns style?" (Jul 14,  1:33pm)
References: <87n0fg3l1m.fsf@ceramic.fifi.org>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Re: More fun with completion: glob qualifiers ignored for ignored-patterns style?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 14,  1:33pm, Philippe Troin wrote:
} Subject: More fun with completion: glob qualifiers ignored for ignored-pat
}
} % zstyle ':completion:*:all-files' ignored-patterns '*(/)'

The ignored-patterns style is not checked for the all-files tag, only for
the globbed-files tag in _files and the argument-rest tag in _normal.

However, even if you set it for the correct tag, it still won't work,
because it really is a _pattern_ (as in [[ string = pattern ]]) and not
a filesystem glob.  It can only match the string, not the file type.

} Is that because bare_glob_qual is unset when expanding the pattern?

So, no.

} By the way, the manual says about glob qualifiers:
} 
}    If the option BARE_GLOB_QUAL is set, then a trailing set of parentheses
}    containing no `|' or `(' characters (or `~' if it is special) is taken
}    as a set of glob qualifiers.
} 
} Does that mean that:
} 
}  - if BARE_GLOB_QUAL is set, glob qualifiers are enabled
} 
}  - if BARE_GLOB_QUAL is unset, glob qualifiers are disabled?

In 4.0.x, that's effectively what it means.  BARE_GLOB_QUAL was added in
anticipation of other qualifier syntax that had not been invented yet.

In 4.1.x, it means that if BARE_GLOB_QUAL is set, zsh uses a heuristic to
decide if a trailing parenthesized expression is a glob qualifier, and if
BARE_GLOB_QUAL is NOT set, you have to 'setopt EXTENDED_GLOB' and use an
explicit (#q) to introduce a qualifier.


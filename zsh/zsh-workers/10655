From zsh-workers-return-10655-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 11 14:58:39 2000
Return-Path: <zsh-workers-return-10655-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 707 invoked from network); 11 Apr 2000 14:58:37 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Apr 2000 14:58:37 -0000
Received: (qmail 26472 invoked by alias); 11 Apr 2000 14:58:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10655
Received: (qmail 26452 invoked from network); 11 Apr 2000 14:58:22 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000411145817.ZM31950@candle.brasslantern.com>
Date: Tue, 11 Apr 2000 14:58:17 +0000
In-Reply-To: <200004110754.JAA03928@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "PATCH: Re: 3.1.6-dev-22" (Apr 11,  9:54am)
References: <200004110754.JAA03928@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Re: 3.1.6-dev-22
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 11,  9:54am, Sven Wischnowsky wrote:
} Subject: PATCH: Re: 3.1.6-dev-22
}
} I wrote:
} 
} - The change to file-patterns suggested by Peter (I planned to send
}   this in a separate patch and then accidentally overwrote it, sorry).
}   I.e. it looks a bit more like tags-order, one can do:
} 
}     ... file-patterns '*.o:obj-files *(-/):dirs' ...
} 
}   Giving more than one pattern per string, with different tags. Small
}   problem: one can still give more than one pattern per tag -- and has 
}   to separate them with commas. I don't like that, it's different from 
}   every other separation character we have.

One possibility is to use the familiar brace expansion syntax:

  ... file-patterns '{*.(a|o),*(*)}:compiled-files *(-/):dirs' ...

In fact, that syntax could be used everywhere that multiple glob patterns
are presently separated by spaces, which would e.g. make it clearer that
all the patterns in a PATTERNS:TAG form were associated with the TAG.
However, that's a much bigger change, and I don't know whether it makes
parsing a lot more difficult.

That also "looks like" it should mean:

  ... file-patterns '*.(a|o):compiled-files *(*):compiled-files ...' ...

which ought to be supported as equivalent if it isn't yet, that is,
mentioning a tag a second time in the same string should union rather
than replace the previous patterns for that tag.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


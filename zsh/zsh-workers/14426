From zsh-workers-return-14426-mason-zsh=primenet.com.au@sunsite.dk Mon May 21 19:09:11 2001
Return-Path: <zsh-workers-return-14426-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24399 invoked from network); 21 May 2001 19:09:10 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 May 2001 19:09:10 -0000
Received: (qmail 16020 invoked by alias); 21 May 2001 19:09:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14426
Received: (qmail 16003 invoked from network); 21 May 2001 19:09:00 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <010521120700.ZM10954@candle.brasslantern.com>
Date: Mon, 21 May 2001 12:07:00 -0700
In-Reply-To: <Pine.LNX.4.33L2.0105211106540.1399-100000@phong.blorf.net>
Comments: In reply to Wayne Davison <wayned@users.sourceforge.net>
        "Re: Mandrake 8.0 - compinit in /etc/zshrc" (May 21, 11:17am)
References: <Pine.LNX.4.33L2.0105211106540.1399-100000@phong.blorf.net>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Chmouel Boudjnah <chmouel@mandrakesoft.com>
Subject: Re: Mandrake 8.0 - compinit in /etc/zshrc
Cc: <cooker@linux-mandrake.com>, Zsh Workers <zsh-workers@sunsite.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 21, 11:17am, Wayne Davison wrote:
> Subject: Re: Mandrake 8.0 - compinit in /etc/zshrc
> On 21 May 2001, Chmouel Boudjnah wrote:
> > and how do you do when you have to modify the skel file on upgrade ?
> 
> Here's an alternate solution.  See if you like this.
> 
> For a package such as zsh, create a patch in the source rpm that adds
> an extra rc-file check that works like this:  If the user's rc file is
> missing, we read the default rc file from /usr/lib/zsh (or similar).

It wouldn't be necessary to modify the source for that, would it?  The
last line of /etc/zshrc would just need to be:

[[ -r ${ZDOTDIR:-$HOME}/.zshrc ]] || source /usr/lib/zsh/power_options

This is basically the same as my function-based suggestion except that
you never create the ~/.zshrc file for the user.

} The only
} downside I see in this is that the user needs to be made aware that when
} they create their own rc file, that they may wish to copy the default rc
} file and modify that rather than starting from scratch.

Making them aware of that is the reason for creating their .zshrc with some
kind of comment embedded in it.  But it works passably either way.
-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-19652-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 17 14:01:46 2004
Return-Path: <zsh-workers-return-19652-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5720 invoked from network); 17 Mar 2004 14:01:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Mar 2004 14:01:46 -0000
Received: (qmail 17876 invoked by alias); 17 Mar 2004 14:01:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19652
Received: (qmail 17863 invoked from network); 17 Mar 2004 14:01:38 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 17 Mar 2004 14:01:38 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [193.109.254.211] by sunsite.dk (MessageWall 1.0.8) with SMTP; 17 Mar 2004 14:1:38 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-11.tower-36.messagelabs.com!1079532097!4725173
X-StarScan-Version: 5.2.5; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 12387 invoked from network); 17 Mar 2004 14:01:37 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-11.tower-36.messagelabs.com with SMTP; 17 Mar 2004 14:01:37 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i2HE1bCk002372
	for <zsh-workers@sunsite.dk>; Wed, 17 Mar 2004 14:01:37 GMT
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id 2947879721C1
	for <zsh-workers@sunsite.dk>; Wed, 17 Mar 2004 15:00:53 +0100 (CET)
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <18692.1079528577@csr.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <18692.1079528577@csr.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: zpty on Mac OS X 10.2 
Date: Wed, 17 Mar 2004 15:00:53 +0100
Message-ID: <12579.1079532053@trentino.logica.co.uk>

Peter wrote:
> I tried the Macs at Sourceforge.  They claim to be be `Mac OS X 10.1'
> and `Mac OS X 10.2'.  On the second uname -a gives `Darwin
> ppc-osx2.cf.sourceforge.net 6.8 Darwin Kernel Version 6.8: Wed Sep 10

For what it's worth, the other is darwin 5.5.

> I don't know the relationship between Darwin and Mac OS X.

Darwin is the base system which is available as open source. It lacks
all the GUI stuff. You can install darwin alone (even on an x86 box
apparently), but you'd have little more than BSD Unix.

> Does it help to turn the #ifdef __FreeBSD__ in zpty.c into
> #if defiend(__FreeBSD__) || defined(__APPLE__)

It doesn't help. It's possibly a valid change though: pty(4) lists
     /dev/pty[p-sP-S][a-z0-9]   master pseudo terminals
     /dev/tty[p-sP-S][a-z0-9]   slave pseudo terminals
but if you go by the contents of /dev, it might be /dev/pty[p-w][a-f0-9]

Judging from what I read on an Apple web page, I think both __APPLE__
and __MACH__ are supposed to be checked. Presumably because __APPLE__
is defined on A/UX (though I can't imagine anyone running zsh on that
anymore).

Oliver


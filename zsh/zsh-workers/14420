From zsh-workers-return-14420-mason-zsh=primenet.com.au@sunsite.dk Mon May 21 17:07:35 2001
Return-Path: <zsh-workers-return-14420-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14999 invoked from network); 21 May 2001 17:07:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 May 2001 17:07:34 -0000
Received: (qmail 25914 invoked by alias); 21 May 2001 17:07:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14420
Received: (qmail 25879 invoked from network); 21 May 2001 17:07:25 -0000
X-VirusChecked: Checked
Sender: kiddleo@cav.logica.co.uk
Message-ID: <3B094B2E.8BA2035@u.genie.co.uk>
Date: Mon, 21 May 2001 18:06:54 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
CC: cooker@linux-mandrake.com
Subject: Re: Mandrake 8.0 - compinit in /etc/zshrc
References: <Pine.LNX.4.33L2.0105200203090.12390-100000@phong.blorf.net> <m31ypi3guy.fsf@giants.mandrakesoft.com> <20010521102920.A14331@dman.com> <m3u22ezpaj.fsf@giants.mandrakesoft.com> <20010521111551.A14676@dman.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Bart Schaefer wrote:

> One possibility might be not to put the code directly into the skel file.
> Put it in, say, /etc/zsh.d/compinit.

This is much more sensible. Trying to modify existing user's .zshrc
files would be fraught with problems and bound to irritate some users.

Clint Adams wrote:

> You could conceivably check from the global startup scripts, or
> from the initial /etc/skel/.z*, whether or not a dotfile upgrade
> is in order.

What you could do, from the global .zlogin, is have something like:
if [[ /etc/skel/.zshrc -nt ~/.zshrc ]]; then
  echo Warning: skeleton .zshrc has changed
  touch ~/.zshrc  # display above message only once
fi

That way, old users would be alerted to the change and could update
their own .zshrc if they wanted.

Maybe we should allow zsh to be given some shell code at compile time
which would then be run at startup along with all the dot files. There'd
need to be a way to disable it (similar to the norcs option) and we'd
need to work out when it would fit in with the order of everything else.
It'd be ideal for compinit and any future zsh features which might be
done in shell code.

Oliver

_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


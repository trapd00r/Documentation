From zsh-users-return-8226-mason-zsh=primenet.com.au@sunsite.dk Wed Nov 17 14:56:54 2004
Return-Path: <zsh-users-return-8226-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5056 invoked from network); 17 Nov 2004 14:56:53 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Nov 2004 14:56:53 -0000
Received: (qmail 6014 invoked from network); 17 Nov 2004 14:56:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Nov 2004 14:56:47 -0000
Received: (qmail 7497 invoked by alias); 17 Nov 2004 14:56:39 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8226
Received: (qmail 7488 invoked from network); 17 Nov 2004 14:56:39 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Nov 2004 14:56:39 -0000
Received: (qmail 4799 invoked from network); 17 Nov 2004 14:56:02 -0000
Received: from unknown (HELO mailsweeperjp.CSR.COM) (202.214.225.228)
  by a.mx.sunsite.dk with SMTP; 17 Nov 2004 14:55:59 -0000
Received: from exchangejp.csr.com (unverified) by mailsweeperjp.CSR.COM
 (Content Technologies SMTPRS 4.3.1) with ESMTP id <T6d55644b7ac0a87901190@mailsweeperjp.CSR.COM> for <zsh-users@sunsite.dk>;
 Thu, 18 Nov 2004 00:01:11 +0900
Received: from exchange03.csr.com ([10.100.137.60]) by exchangejp.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 17 Nov 2004 14:55:45 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 17 Nov 2004 14:55:42 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.12.11/8.12.11) with ESMTP id iAHEtoiq008397
	for <zsh-users@sunsite.dk>; Wed, 17 Nov 2004 14:55:50 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.12.11/8.12.11/Submit) with ESMTP id iAHEtoID008394
	for <zsh-users@sunsite.dk>; Wed, 17 Nov 2004 14:55:50 GMT
Message-Id: <200411171455.iAHEtoID008394@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: Build errors 
In-reply-to: <20041117142122.GA5295@sc> 
References: <200411161357.iAGDvhJ28897@panix3.panix.com> <20041117142122.GA5295@sc>
Date: Wed, 17 Nov 2004 14:55:49 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 17 Nov 2004 14:55:42.0547 (UTC) FILETIME=[8299A230:01C4CCB5]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Stephane Chazelas wrote:
> On Tue, Nov 16, 2004 at 08:57:43AM -0500, kynn@panix.com wrote:
> [...]
> >   gcc -c -I.  -DHAVE_CONFIG_H -DMODULE -Wall -Wmissing-prototypes -O2 -fPIC
>  -o terminfo..o terminfo.c
> >   In file included from terminfo.c:53:
> >   /usr/include/curses.h:452: `underscore' redeclared as different kind of s
> ymbol
> >   ../../Src/init.epro:6: previous declaration of `underscore'
> >   terminfo.c: In function `bin_echoti':
> >   terminfo.c:78: warning: implicit declaration of function `tigetnum'
> >   terminfo.c:83: warning: implicit declaration of function `tigetflag'
> >   terminfo.c:95: warning: implicit declaration of function `tigetstr'
> >   terminfo.c:121: warning: implicit declaration of function `putp'
> >   terminfo.c:123: warning: implicit declaration of function `tparm'
> >   terminfo.c: In function `boot_':
> >   terminfo.c:385: warning: implicit declaration of function `setupterm'
> >   *** Error code 1
> [...]
> 
> You may actually need ncurses for the terminfo module to work.
> 
> But zsh configure may not be accurate enough in its searching of
> supported libraries. It shouldn't have selected "curses" here as
> it has no support for "tigetstr..."

I suspect the library, as opposed to the header, actually does.  The
rule in terminfo.mdd is that the file is only compiled if
tigetflag is found; it doesn't bother checking for all the
tiget... functions since either all or none should be available.  This
suggests it's only the header that's defective, or at least not what the
configuration is assuming.  This changed in 4.2; before that the tests
were a bit more hit and miss.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited. 
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


From zsh-workers-request@math.gatech.edu Fri Jan 16 10:31:47 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 22352 invoked from network); 16 Jan 1998 10:31:45 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 16 Jan 1998 10:31:45 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id FAA15819;
	Fri, 16 Jan 1998 05:14:56 -0500 (EST)
Resent-Date: Fri, 16 Jan 1998 05:14:56 -0500 (EST)
Date: Fri, 16 Jan 1998 10:16:04 GMT
From: Andrew Main <zefram@tao.co.uk>
Message-Id: <199801161016.KAA01966@taos.demon.co.uk>
To: zsh-workers@math.gatech.edu
Subject: PATCH: Re: Bug in zsh 3.1.0 on RedHat 5.0
X-Patch: 267
Resent-Message-ID: <"Pwgl61.0.6t3.VCplq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3715
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

Petter Reinholdtsen wrote:
>On RedHat 5.0 (with glibc), zsh v3.1.0 was unable to find yp_all(), as 
>-lnsl was missing during linking.  This patch fixed my problem.
...
> dnl Some systems (Solaris 2.x) require libnsl (Network Services Library)
> dnl to find getdomainname and yp_all
>+dnl Others (Linux RedHat 5.0) need nsl just to get yp_all

In which case, wouldn't it be better just to change the test from
getdomainname to yp_all?  Someone please test this on Solaris:

 *** configure.in	1998/01/16 00:20:01	1.46
 --- configure.in	1998/01/16 00:52:41	1.47
 ***************
 *** 429,439 ****
     AC_CHECK_LIB(${lib}, tgetent, [LIBS="$LIBS -l$lib"; break])
   done
   
 ! dnl Some systems (Solaris 2.x) require libnsl (Network Services Library)
 ! dnl to find getdomainname and yp_all
 ! AC_CHECK_FUNCS(getdomainname)
 ! if test $ac_cv_func_getdomainname = no; then
 !   AC_CHECK_LIB(nsl, getdomainname)
   fi
   
   dnl I am told that told that unicos reqire these for nis_list
 --- 429,439 ----
     AC_CHECK_LIB(${lib}, tgetent, [LIBS="$LIBS -l$lib"; break])
   done
   
 ! dnl Some systems (Solaris 2.x, Linux Redhat 5.x) require
 ! dnl libnsl (Network Services Library) to find yp_all
 ! AC_CHECK_FUNCS(yp_all)
 ! if test $ac_cv_func_yp_all = no; then
 !   AC_CHECK_LIB(nsl, yp_all)
   fi
   
   dnl I am told that told that unicos reqire these for nis_list

 -zefram

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia
Charset: ascii

iQEVAwUBNL6vqpmk9GeOHh7BAQHR6Af/dxHBG3NiBaJTn59H4ADYfjWLcjB7InnH
/hJkjpumkJU66WZ1bq9bmmHgD0MCS0h5op8I6D0mBRKnkC0xi8a+BdFy4A3VFfjZ
4L0y81EO61kOn7OoHKZbofq896Z1qlQ/kj4m206ppuFND++BywzedIRS3EBXs8A6
DZHVRCyi7hi3mEmqFen3NNP0HeZIkpPmp+jhZYGqAFLNwr+ehzXAIzKd+80YOvT3
ILE3GtTHqrJCRj8v/xXfDhnmPGx5XjQTWJeQW8enmyO67apNrYstJECEntHJSORB
GEK50YWUCGbgIbFx1iSwl8HVm1ukRhVOFxmczBu+iTKU4DQ+P5VTjw==
=DqyH
-----END PGP SIGNATURE-----


From zsh-users-return-13241-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 18 15:36:04 2008
Return-Path: <zsh-users-return-13241-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22622 invoked from network); 18 Sep 2008 15:35:53 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Sep 2008 15:35:53 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 32681 invoked from network); 18 Sep 2008 15:35:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Sep 2008 15:35:39 -0000
Received: (qmail 10670 invoked by alias); 18 Sep 2008 15:35:23 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13241
Received: (qmail 10659 invoked from network); 18 Sep 2008 15:35:22 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 Sep 2008 15:35:22 -0000
Received: from wf-out-1314.google.com (wf-out-1314.google.com [209.85.200.175])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 0D0EB802720D
	for <zsh-users@sunsite.dk>; Thu, 18 Sep 2008 17:35:18 +0200 (CEST)
Received: by wf-out-1314.google.com with SMTP id 29so3940096wff.3
        for <zsh-users@sunsite.dk>; Thu, 18 Sep 2008 08:35:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type:references;
        bh=542AHyT+JUUDQjDEaDDfXuVUCccIn/CY5GyQWTNMoxU=;
        b=uoAokb8BJlDLQw9gCD9vC2Koq1GoW1GozYK3I2LG8CIHIM0EYkHvPNhtw0yWneeh6z
         oZ0bjQHqzXS24cdEYggaFVjj4lBjf2b9jPzAS+oL74ALR2uCrAfe4AS6GiIAAINuWs1C
         awP1QdugYk7FZzshfwd6YtXCGWUYpZIdm2go4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:references;
        b=jL/s70V2IdFv4bGY2k7M1hVF7zcPuxoeol2SG9sqOCibyo4PDhM3ZO+WKf6PUzBPjQ
         nWpoSr/BMC01nnMe6W2L7YfxG6A5J8eKevoYj5ws8kyy6yXJh7zkSkGDs29klKr6Wq34
         NtF1NhAbdCUTdckCnFLPiWInfKbPO7M5MNXao=
Received: by 10.114.205.1 with SMTP id c1mr2974107wag.56.1221752117280;
        Thu, 18 Sep 2008 08:35:17 -0700 (PDT)
Received: by 10.114.159.2 with HTTP; Thu, 18 Sep 2008 08:35:17 -0700 (PDT)
Message-ID: <6cd6de210809180835l4c4ec19cm6b92aa4334c3b73e@mail.gmail.com>
Date: Thu, 18 Sep 2008 11:35:17 -0400
From: "Rocky Bernstein" <rocky.bernstein@gmail.com>
To: "Bart Schaefer" <schaefer@brasslantern.com>
Subject: Re: reading a file into an array. mapfile? (f)?
Cc: "zsh users mailing list" <zsh-users@sunsite.dk>
In-Reply-To: <080918081016.ZM28480@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15455_2557921.1221752117279"
References: <6cd6de210809171953pd956d75gd4b3609ac036fe0@mail.gmail.com>
	 <080917214418.ZM27616@torch.brasslantern.com>
	 <6cd6de210809180303n24e8aac7x29f8cabba1c7a74c@mail.gmail.com>
	 <080918081016.ZM28480@torch.brasslantern.com>
X-Virus-Scanned: ClamAV 0.92.1/8279/Thu Sep 18 14:42:42 2008 on bifrost
X-Virus-Status: Clean

------=_Part_15455_2557921.1221752117279
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Thu, Sep 18, 2008 at 11:10 AM, Bart Schaefer
<schaefer@brasslantern.com>wrote:

> On Sep 18,  6:03am, Rocky Bernstein wrote:
> }
> } I sort of agree with this comment in zshmodules:
> }        It is unfortunate that the mechanism for loading modules
> }        does not yet allow the user to specify the name of the shell
> }        parameter to be given the special behaviour.
> }
> } Here's how it is done in Ruby which is extremely simple: if there is an
> } associative array SCRIPT_LINES__ defined file lines are saved into this
> } array when it reads a file.
>
> I think you and the zsh/mapfile manual are talking about two different
> things here.


Yes, you are correct. Automatically copying program text is what I mean and
it's very useful, and used not just in debuggers but in other things. In
ruby it's used I think in rcov (testing program coverage) for example.


>
>
> What you seem to be asking for (based on what SCRIPT_LINES__ really
> does in Ruby) is to have the zsh script parser stuff the lines it reads
> into a variable as it parses them, so that (for example) "autoload"
> would magically copy the function text into the SCRIPT_LINES__ array.
>
> The excerpt above means that it's not possible when loading zsh/mapfile
> to cause the variable "mapfile" to have a different name.  That has
> nothing to do with script parsing.
>

------=_Part_15455_2557921.1221752117279
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<div dir="ltr"><br><br><div class="gmail_quote">On Thu, Sep 18, 2008 at 11:10 AM, Bart Schaefer <span dir="ltr">&lt;<a href="mailto:schaefer@brasslantern.com">schaefer@brasslantern.com</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
<div class="Ih2E3d">On Sep 18, &nbsp;6:03am, Rocky Bernstein wrote:<br>
}<br>
} I sort of agree with this comment in zshmodules:<br>
} &nbsp; &nbsp; &nbsp; &nbsp;It is unfortunate that the mechanism for loading modules<br>
} &nbsp; &nbsp; &nbsp; &nbsp;does not yet allow the user to specify the name of the shell<br>
} &nbsp; &nbsp; &nbsp; &nbsp;parameter to be given the special behaviour.<br>
}<br>
} Here&#39;s how it is done in Ruby which is extremely simple: if there is an<br>
} associative array SCRIPT_LINES__ defined file lines are saved into this<br>
} array when it reads a file.<br>
<br>
</div>I think you and the zsh/mapfile manual are talking about two different<br>
things here.</blockquote><div><br>Yes, you are correct. Automatically copying program text is what I mean and it&#39;s very useful, and used not just in debuggers but in other things. In ruby it&#39;s used I think in rcov (testing program coverage) for example. <br>
&nbsp;</div><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><br>
<br>
What you seem to be asking for (based on what SCRIPT_LINES__ really<br>
does in Ruby) is to have the zsh script parser stuff the lines it reads<br>
into a variable as it parses them, so that (for example) &quot;autoload&quot;<br>
would magically copy the function text into the SCRIPT_LINES__ array.<br>
<br>
The excerpt above means that it&#39;s not possible when loading zsh/mapfile<br>
to cause the variable &quot;mapfile&quot; to have a different name. &nbsp;That has<br>
nothing to do with script parsing.<br>
</blockquote></div><br></div>

------=_Part_15455_2557921.1221752117279--


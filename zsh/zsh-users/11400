From zsh-users-return-11400-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 15 21:51:27 2007
Return-Path: <zsh-users-return-11400-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18053 invoked from network); 15 Apr 2007 21:51:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Apr 2007 21:51:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 89929 invoked from network); 15 Apr 2007 21:51:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Apr 2007 21:51:18 -0000
Received: (qmail 148 invoked by alias); 15 Apr 2007 21:51:01 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11400
Received: (qmail 130 invoked from network); 15 Apr 2007 21:50:59 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 15 Apr 2007 21:50:59 -0000
Received: (qmail 87854 invoked from network); 15 Apr 2007 21:50:59 -0000
Received: from mtaout03-winn.ispmail.ntl.com (81.103.221.49)
  by a.mx.sunsite.dk with SMTP; 15 Apr 2007 21:50:56 -0000
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout03-winn.ispmail.ntl.com with ESMTP
          id <20070415215113.CXLO4739.mtaout03-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <zsh-users@sunsite.dk>; Sun, 15 Apr 2007 22:51:13 +0100
Received: from pwslaptop.csr.com ([81.107.41.251])
          by aamtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070415215113.NXOG219.aamtaout01-winn.ispmail.ntl.com@pwslaptop.csr.com>
          for <zsh-users@sunsite.dk>; Sun, 15 Apr 2007 22:51:13 +0100
Received: from pwslaptop.csr.com (pwslaptop.csr.com [127.0.0.1])
	by pwslaptop.csr.com (8.13.8/8.13.7) with ESMTP id l3FMGXx0011774;
	Sun, 15 Apr 2007 23:16:34 +0100
Message-Id: <200704152216.l3FMGXx0011774@pwslaptop.csr.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: "Zsh users list" <zsh-users@sunsite.dk>, pws@pwslaptop.csr.com
Subject: Re: Problems with vi-goto-mark and vi-set-mark 
In-Reply-To: Message from fREW <frioux@gmail.com> 
   of "Sun, 15 Apr 2007 15:59:10 CDT." <fb3648c60704151359u6d209925y3f99ead6dc75d2a1@mail.gmail.com> 
Date: Sun, 15 Apr 2007 23:16:33 +0100

fREW wrote:
> Do you have any examples of how one could make zle unit tests?  I
> would gladly do it depending on how much time I end up having this
> summer.

Thanks for the offer.

It should "simply" be a case of taking the code that tests completion
and making a version for general editing tests.  See Test/comptest for
the functions used and the Test/Y* tests for how the functions in
comptest are used.

Although the results should be simpler than comptest, it might not be
very clear what's going on in comptest and hence what needs taking out.
The zpty calls are the key to it; they interact with a subshell in a
pseudoterminal, which where the tests run.  A lot of the rest is
configuration to make the results visible (which will still be needed).

Any basically working system for general zle tests, even without the
tests themselves, would be extremely good to have.

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


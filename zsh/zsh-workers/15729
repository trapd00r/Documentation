From zsh-workers-return-15729-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 31 17:57:15 2001
Return-Path: <zsh-workers-return-15729-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28332 invoked from network); 31 Aug 2001 17:57:14 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 31 Aug 2001 17:57:14 -0000
Received: (qmail 20175 invoked by alias); 31 Aug 2001 17:57:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15729
Received: (qmail 20164 invoked from network); 31 Aug 2001 17:57:01 -0000
X-VirusChecked: Checked
Sender: kiddleo@pag.logica.co.uk
Message-ID: <3B8FCFC4.869C0D51@yahoo.co.uk>
Date: Fri, 31 Aug 2001 18:56:20 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.76 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Brian Boonstra <boonstb@cmg.FCNBD.COM>
CC: Wes Morgan <wesm@slacknet.org>, zsh-workers@sunsite.dk
Subject: Re: Compiling zsh-4.0.2 on Mac OS X
References: <3B5E0BBE.8020100@slacknet.org> <200108311712.MAA23833@wo1203.cmg.FCNBD.COM>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Brian Boonstra wrote:
> 
>   I solved this by running
>           autoconf
> in the top-level source directory.  That gave me a configure script with
> more options, including one for the ldflags, which I then set to be nothing.

I take it there no problems with the clear ldflags then?

>   I suppose this is ultimately a problem with autoconf.

What version of autoconf do you have? I'd be suprised if 2.5x doesn't
handle MacOS X.

Judging by one section of zshconfig.ac, it is probably a zsh problem.
Can you try with this patch. You will need to rerun autoconf (or
Util/preconfig) or manually apply this to configure itself.

Does anyone know if ${enable_zsh_debug} is definitely empty for a no
value as I've assumed here? The -x option may not be right in which case
we could use nothing.

Oliver

Index: zshconfig.ac
===================================================================
RCS file: /cvsroot/zsh/zsh/zshconfig.ac,v
retrieving revision 1.17
diff -u -r1.17 zshconfig.ac
--- zshconfig.ac        2001/07/03 17:34:33     1.17
+++ zshconfig.ac        2001/08/31 17:47:17
@@ -307,6 +307,7 @@
 if test -n "$auto_ldflags"; then
   case "${enable_zsh_debug}$host_os" in
     yesaix*|yeshpux*|yesnetbsd*|yesopenbsd*) ;;  # "ld -g" is not valid
on these systems
+    darwin*) LDFLAGS=-x ;;
     yes*)    LDFLAGS=-g ;;
     *)       LDFLAGS=-s ;;
   esac

_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


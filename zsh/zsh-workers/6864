From zsh-workers-return-6864-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jun 26 20:57:15 1999
Return-Path: <zsh-workers-return-6864-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11508 invoked from network); 26 Jun 1999 20:57:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jun 1999 20:57:14 -0000
Received: (qmail 28041 invoked by alias); 26 Jun 1999 15:25:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6864
Received: (qmail 28031 invoked from network); 26 Jun 1999 15:25:12 -0000
Message-Id: <9906261456.AA28431@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: pws-24
Date: Sat, 26 Jun 1999 16:56:34 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

http://www.ifh.de/~pws/computing/
950658 bytes zsh-3.1.5-pws-24.tar.gz
762279 bytes zsh-3.1.5-pws-24.tar.bz2
    24 bytes zsh-3.1.5-pws-24.tar.bz2.bin -> zsh-3.1.5-pws-24.tar.bz2
434603 bytes zsh-3.1.5-pws-24.doc.tar.gz
304675 bytes zsh-3.1.5-pws-24.doc.tar.bz2
    28 bytes zsh-3.1.5-pws-24.doc.tar.bz2.bin -> zsh-3.1.5-pws-24.doc.tar.bz2

This time, the major visible changes are the complist coloured listing and
menu selection library (see the complist section of zshmodules.1), and that
the completion startup scripts compinit, compdump, compinstall are now
functions, so should be autoloaded with `autoload -U' (compinit autoloads
the other two) and then run directly.  This means compinit can't work out
where the completion files are if there not already in $fpath.  They will
already be in fpath if you do a full installation including the functions,
and compinstall will provide appropriate code in .zshrc.

intro.ms has moved from the main to the doc distribution.

There is nothing major I still think needs doing before releasing 3.1.6,
although various things like the builtin jobs signals saga still probably
need tweaking.  I hope to produce a test release in a couple of weeks (for
which I'll have to find out how to upload it to ftp.zsh.org).

I tried this version on SunOS 4.1.3 for the first time and something very
strange is happening, apparently in glob.c.  If anybody can provide more
details, I'd be glad.

1999-06-25  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: 6857: Completion/Core/compinit,
	  Completion/Core/compinstall, Doc/Zsh/compsys.yo: compinit and
	  compinstall are now functions which unfunction and autoload
	  themselves.  _compdir is used by compinstall to record where
	  it found the completion directories.  compinit is now otherwise
	  stuck with fpath.

	* pws: 6851, 6853: typeset -g doesn't locallize parameters; bug
	  that unset parameters were recreated global instead of at
	  some higher local level; handle PM_AUTOLOAD consistent with other
	  flags.

	* Sven: 6850: Src/init.c: always generate a new pgrp for the
	  shell, since the parent (e.g. xterm) may not have done that
	  and zsh now runs programs in its own pgrp.

	* Sven: 6848: Src/exec.c: don't suspend if the shell is the
	  only thing to suspend (or something like that).

	* Sven: 6841: Src/loop.c: %_ in else branches for PS4

1999-06-24  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: 6834: Src/glob.c, Src/hashtable.c: dyncat() changed always
	  to use heap memory (as it erroneously claimed); hashtable element
	  tablename (used for debugging) freed.

	* Bart: 6830: Src/params.c: don't create the hashtable for an
	  assoc array on assignment unless there is something to put in it.

	* Sven: 6825: Src/Zle_tricky.c: make sure path prefix and suffix
	  are quoted in filename completion; recalculate length of match
	  string.

	* Sven: 6824: Src/exec.c, Src/signals.c: functions got deleted
	  from the process table too early for job control.

	* pws: 6823: Src/exec.c, Src/utils.c:  names and line numbers
	  of functions printed for errors during execution.

	* Sven: 6822: Src/Zle/complist.c, Src/Zle/zle_tricky.c: assorted
	  completion fixes: crash with old completion; too many spaces
	  with menu inserting; too many beeps with LISTBEEP.

	* Sven: 6819: Src/exec.c, Src/jobs.c, Src/signals.c:  Run
	  jobs inside shell constructs in the same process group as the
	  shell itself.

	* Sven: 6817: Src/Zle/comp.h, Src/Zle/complist.c,
	  Src/Zle/zle_tricky.c: Change ZLS_SELECT to SELECTMIN;
	  don't automatically switch on select widget until there are
	  $SELECTMIN choices.

1999-06-23  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: 6816: Doc/Zsh/params.yo, Src/utils.c:  ZBEEP parameter
	  gives string to output instead of beeping.

	* Sven: 6815: Src/Zle/complist.c: switch off menu-select for
	  hidden matches.

	* pws: 6814: Doc/Zsh/mod_zle.yo, Doc/Zsh/options.yo,
	  Doc/Zsh/zle.


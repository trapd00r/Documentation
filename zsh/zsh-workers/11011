From zsh-workers-return-11011-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Apr 28 16:40:19 2000
Return-Path: <zsh-workers-return-11011-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4025 invoked from network); 28 Apr 2000 16:40:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Apr 2000 16:40:17 -0000
Received: (qmail 25407 invoked by alias); 28 Apr 2000 16:40:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11011
Received: (qmail 25394 invoked from network); 28 Apr 2000 16:40:09 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000428163957.ZM24956@candle.brasslantern.com>
Date: Fri, 28 Apr 2000 16:39:56 +0000
In-Reply-To: <200004281539.RAA11660@numa1.igpm.rwth-aachen.de>
Comments: In reply to jarausch@igpm.rwth-aachen.de
        "Re: Make zsh a tiny bit cleverer?" (Apr 28,  5:38pm)
References: <200004281539.RAA11660@numa1.igpm.rwth-aachen.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: jarausch@igpm.rwth-aachen.de
Subject: Re: Make zsh a tiny bit cleverer?
Cc: zsh-workers@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 28,  5:38pm, jarausch@igpm.rwth-aachen.de wrote:
} Subject: Re: Make zsh a tiny bit cleverer?
}
} On 28 Apr, Bart Schaefer wrote:
} > On Apr 28,  3:44pm, jarausch@igpm.rwth-aachen.de wrote:
} > } Subject: Make zsh a tiny bit cleverer?
} > }
} > } ABC
} > } 
} > } zsh doesn't find it (that's OK, it's not yet hashed) and
} > } suggests
} > } correct 'ABCD' to 'ABC'
} > } 
} > } If I say 'no' it finds and executes 'ABCD' but doesn't
} > } remember that there is an 'ABCD', indeed.
} > 
} > This should have been fixed last October, at least in the 3.1.x series.
} 
} What am I missing

You're not, I am.

The patches I mentioned are for a similar problem where there is a non-
executable `ABCD' earlier in the search path than an executable `ABCD',
which was causing the intended `ABCD' never to be found.  The symptom
was the same (zsh would offer to correct `ABCD').

So the real answer is that you need to turn off the HASH_DIRS option.
When HASH_DIRS is on, zsh doesn't re-search for new commands until after
it has already forked, so it can't remember it.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


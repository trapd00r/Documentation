From zsh-users-return-6660-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 07 15:10:30 2003
Return-Path: <zsh-users-return-6660-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9485 invoked from network); 7 Oct 2003 15:10:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 7 Oct 2003 15:10:29 -0000
Received: (qmail 22188 invoked by alias); 7 Oct 2003 15:10:04 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6660
Received: (qmail 22169 invoked from network); 7 Oct 2003 15:10:03 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 7 Oct 2003 15:10:03 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [199.67.51.101] by sunsite.dk (MessageWall 1.0.8) with SMTP; 7 Oct 2003 15:10:3 -0000
Received: (from dan@localhost)
	by dan.emsphone.com (8.12.9/8.12.9) id h97FA0jH014540;
	Tue, 7 Oct 2003 10:10:00 -0500 (CDT)
	(envelope-from dan)
Date: Tue, 7 Oct 2003 10:09:59 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: Anthony Heading <aheading@jpmorgan.com>
Cc: zsh-users@sunsite.dk
Subject: Re: startup delay from compinit
Message-ID: <20031007150959.GG36117@dan.emsphone.com>
References: <20031007105820.GA23911@tkd-fires-02.ja.jpmorgan.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20031007105820.GA23911@tkd-fires-02.ja.jpmorgan.com>
X-OS: FreeBSD 5.1-CURRENT
X-message-flag: Outlook Error
User-Agent: Mutt/1.5.4i

In the last episode (Oct 07), Anthony Heading said:
> I'd like to start using the "new" completion system, but running
> compinit from .zshrc seems to take about two seconds, which is
> frustrating since otherwise a new xterm takes only a few tens of
> milliseconds to be ready to use. (For ref, I'm using a 750Mhz Solaris
> sparcv9 machine).
> 
> I believe I've followed the instructions in zshcompsys, and have
> .zcompdump being created, and so on.  So am I doing something wrong,
> or is this time overhead to be expected?  If so, is there any
> alternative way to load all the completion functions lazily?

Is your home direcory used by different machines running zsh?  compinit
will regenerate the .zcompdump file if it thinks it doesn't match the
current system.

I run this in my startup script instead of plain compinit:

compinit -d $(print -P "${ZDOTDIR:-$HOME}/.zcompdump_%m")

which creates a separate ~/.zcompdump_machinename for each machine I
log into.
 
-- 
	Dan Nelson
	dnelson@allantgroup.com


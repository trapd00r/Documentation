From A.Main@dcs.warwick.ac.uk Sun Jul  7 19:19:03 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id TAA27111 for <mason@werple.mira.net.au>; Sun, 7 Jul 1996 19:19:01 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id FAA23364; Sun, 7 Jul 1996 05:07:42 -0400 (EDT)
Resent-Date: Sun, 7 Jul 1996 05:07:42 -0400 (EDT)
From: Zefram <A.Main@dcs.warwick.ac.uk>
Message-Id: <25445.199607070906@stone.dcs.warwick.ac.uk>
Subject: Re: Remaining zsh3.0-pre2 bugs
To: schaefer@nbn.com
Date: Sun, 7 Jul 1996 10:06:27 +0100 (BST)
Cc: huyle@chop.ugcs.caltech.edu, zsh-workers@math.gatech.edu
In-Reply-To: <960706230814.ZM2227@candle.brasslantern.com> from "Bart Schaefer" at Jul 6, 96 11:08:12 pm
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]7771.89
X-US-Congress: Moronic fuckers
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"Q0Iw6.0.-i5.Pvttn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1550
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 714
Status: OR

>I think this has to do with the very last line of undo() in zle_misc.c:
>
>    cs = ue->cs;
>
>Unless I'm mistaken, this resets the cursor position to where it was
>before the undo.  Vi doesn't act that way.  However, there doesn't
>seem to be any way to tell whether undo() was called from emacs-mode
>"undo" or from vi-mode "vi-undo-change".  Probably the right thing is
>to skip that assignment when called as vi-undo-change, but I'm not
>sure that's quite right either.

That would be worse, I think.  I have plans to improve some of the
remaining vi mode bindings, including this one, but there are more
serious problems than this.  vi cut buffers, for example, basically
don't work at the moment.

-zefram



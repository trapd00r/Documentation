To: zsh-users@math.gatech.edu
Subject: mtools handling
Mime-Version: 1.0
From: Falk Hueffner <falk.hueffner@student.uni-tuebingen.de>
Date: 04 Feb 1999 17:56:19 +0100
Message-Id: <rbk8xym7kc.fsf@fphp16.tphys.physik.uni-tuebingen.de>
Status: RO
X-Mailing-List: <zsh-users@sunsite.auc.dk> 2088

Hi,

a complain I've heard about zsh is that

mcopy a:* .

doesn't work like in bash, because zsh doesn't just give unmatched
globs to the programs (which is a GOOD thing). With this little code,
it works also in zsh, and you get a nifty tab completion, too :)
Perhaps it could be added to the examples section.

	Falk


my-mcopy () {
    mcopy `mtools-glob "$@"`
}

mtools-glob () {
  for i in "$@"; do
    case "$i" in
      [aAbB]:*)
        echo -n "$i "
        ;;
      *)
	echo -n "`eval echo $i` "
	;;
    esac
  done
  echo	      
}
alias mdir='noglob mdir'      # no glob expansion on mdir a:*
alias mdel='noglob mdel'
alias mcopy='noglob my-mcopy'

compctl -f -x 's[a:]' -s '`echo ${$(mdir -X)##*/}`' -- mdel mtype my-mcopy mcd mdeltree mdir mrd mren



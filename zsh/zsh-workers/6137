From zsh-workers-return-6137-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 28 17:44:00 1999
Return-Path: <zsh-workers-return-6137-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6897 invoked from network); 28 Apr 1999 17:43:54 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Apr 1999 17:43:54 -0000
Received: (qmail 17229 invoked by alias); 28 Apr 1999 17:43:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6137
Received: (qmail 17222 invoked from network); 28 Apr 1999 17:43:37 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <990428104328.ZM3683@candle.brasslantern.com>
Date: Wed, 28 Apr 1999 10:43:27 -0700
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@sunsite.auc.dk
Subject: 3.1.5-pws-16: alwayslastprompt doesn't always when completing at M-x
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

This is really strange.

Freshly-compiled -pws-16, plus Sven's several patches from this week; setopt
output included for reference, the meat is beyond it.  Short descript is,
IF the first time you use completion is for zle commands following ESC-x,
alwayslastprompt seems to be ignored.  It kicks in when using completion for
files, and thereafter applies to M-x as well.

At one point while fooling with this I typed control-L and got

	BUG: listmatches called with bogus list

but I haven't been able to make that happen again.  It may result after
attempting a M-x completion that doesn't produce any matches at all.

This is entirely old-style completion, BTW.

--- 8< --- snip --- 8< ---
zagzig<1> setopt
allexport             off
noalwayslastprompt    off
alwaystoend           on
noappendhistory       off
autocd                on
noautolist            off
noautomenu            off
autonamedirs          off
noautoparamkeys       off
noautoparamslash      off
autopushd             off
noautoremoveslash     off
autoresume            on
nobadpattern          off
nobanghist            off
nobareglobqual        off
bashautolist          off
nobeep                off
nobgnice              on
braceccl              off
bsdecho               off
cdablevars            off
chaselinks            off
noclobber             on
completealiases       off
completeinword        on
correct               on
correctall            off
cshjunkiehistory      off
cshjunkieloops        off
cshjunkiequotes       off
cshnullglob           on
noequals              off
errexit               off
noexec                off
extendedglob          off
extendedhistory       off
noflowcontrol         off
nofunctionargzero     off
noglob                off
globalrcsfirst        off
globassign            off
globcomplete          off
globdots              off
globsubst             off
nohashcmds            off
nohashdirs            off
nohashlistall         off
histallowclobber      off
nohistbeep            off
histignoredups        on
histignorespace       off
histnofunctions       off
histnostore           off
histreduceblanks      off
histverify            off
nohup                 on
ignorebraces          off
ignoreeof             off
interactive           on
interactivecomments   off
ksharrays             off
kshautoload           off
kshglob               off
kshoptionprint        on
nolistambiguous       off
nolistbeep            off
nolisttypes           off
localoptions          off
login                 off
longlistjobs          off
magicequalsubst       off
mailwarning           off
markdirs              off
menucomplete          off
monitor               on
nomultios             off
nonomatch             off
nonotify              off
nullglob              off
numericglobsort       off
overstrike            off
pathdirs              on
posixbuiltins         off
printeightbit         off
printexitvalue        off
privileged            off
promptbang            off
nopromptcr            off
nopromptpercent       off
promptsubst           off
pushdignoredups       off
pushdminus            off
pushdsilent           on
pushdtohome           off
rcexpandparam         off
rcquotes              off
norcs                 off
recexact              off
restricted            off
rmstarsilent          off
rmstarwait            off
shfileexpansion       off
shglob                off
shinstdin             on
shoptionletters       off
noshortloops          off
shwordsplit           off
singlecommand         off
singlelinezle         off
sunkeyboardhack       on
nounset               off
verbose               off
xtrace                off
zle                   on
zagzig<2>                                      <-- ESC-x
execute: de_                                   <-- de<TAB>
delete-char            delete-word
delete-char-or-list    describe-key-briefly   
zagzig<2>                                      <-- (new prompt is printed?!?)
execute: de_                                   <-- C-g (execute: is erased)
zagzig<2> ls                                   <-- ls <TAB> (no new prompt)
Doc/                config.cache        configure.dynamic   zsh*
Etc/                config.h            configure.static    zsh-3.1.5*
Makefile            config.log          stamp-h             
Src/                config.status*      stamp-h.in          
zagzig<2> ls                                   <-- ESC-x (still no new prompt)
execute: de_                                   <-- de<TAB> (no new prompt!?!)
delete-char            delete-word
delete-char-or-list    describe-key-briefly            
--- 8< --- snip --- 8< ---

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


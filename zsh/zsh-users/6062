From zsh-users-return-6062-mason-zsh=primenet.com.au@sunsite.dk Thu May 01 17:20:45 2003
Return-Path: <zsh-users-return-6062-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29913 invoked from network); 1 May 2003 17:20:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 1 May 2003 17:20:44 -0000
Received: (qmail 1906 invoked by alias); 1 May 2003 17:20:24 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6062
Received: (qmail 1897 invoked from network); 1 May 2003 17:20:23 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 1 May 2003 17:20:23 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [213.46.243.24] by sunsite.dk (MessageWall 1.0.8) with SMTP; 1 May 2003 17:20:23 -0000
Received: from s.hn.org ([80.111.3.215]) by amsfep13-int.chello.nl
          (InterMail vM.5.01.05.17 201-253-122-126-117-20021021) with SMTP
          id <20030501172022.UVUF6867.amsfep13-int.chello.nl@s.hn.org>
          for <zsh-users@sunsite.dk>; Thu, 1 May 2003 19:20:22 +0200
Received: (qmail 4806 invoked by uid 1000); 1 May 2003 17:20:22 -0000
From: "Haakon Riiser" <haakon.riiser@fys.uio.no>
Date: Thu, 1 May 2003 19:20:22 +0200
To: zsh-users@sunsite.dk
Subject: Scope of local parameters
Message-ID: <20030501172022.GA4179@s.chello.no>
Mail-Followup-To: zsh-users@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.1i

Are there ways to limit the scope of local parameters besides
functions?  Say you want to colorize the prompt, and you use
helper variables for the color escape sequences:

  local RED=...
  local GREEN=...
  local BLUE=...

  PS1=<use RGB variables here>

If I do this in ~/.zshrc, or a file sourced by .zshrc, the
variables declared local do not disappear after sourcing ~/.zshrc.

One way to work around this is to wrap the PS1 initialization in
an auxiliary function, but then you have the same problem with
the scope of the function. :-)  Alternatively, one could

  unset RED GREEN BLUE

after setting PS1, but this doesn't feel quite right.  What if
the parameters RED GREEN BLUE already existed?  There has to be
a better way.

-- 
 Haakon


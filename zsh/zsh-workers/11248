From zsh-workers-return-11248-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 08 09:28:02 2000
Return-Path: <zsh-workers-return-11248-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12286 invoked from network); 8 May 2000 09:28:01 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 May 2000 09:28:01 -0000
Received: (qmail 3031 invoked by alias); 8 May 2000 09:27:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11248
Received: (qmail 2991 invoked from network); 8 May 2000 09:27:40 -0000
Date: Mon, 8 May 2000 11:27:28 +0200 (MET DST)
Message-Id: <200005080927.LAA12781@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Sat, 6 May 2000 15:09:58 +0400
Subject: PATCH: Re: wrong cursor placement with matchers


Andrej Borsenkow wrote:

> bor@itsrm2% vi c.s<TAB>
> bor@itsrm2% vi c.s<CURSOR HERE>
> Completing file
> config.status*  cvs.spec

Well, `wrong' is probably the wrong word, since one *can* disambiguate 
between the matches at that position.

But you want the cursor on the dot, right? And I can agree that it
should be there... (bigger difference between `config' and `cvs' then
between `status' and `spec').


Bye
 Sven

P.S.: Thanks to Peter's NEWs file I saw that wischnow@zsh.org
      works. Cool. When did that happen?

Index: Src/Zle/compmatch.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/compmatch.c,v
retrieving revision 1.10
diff -u -r1.10 compmatch.c
--- Src/Zle/compmatch.c	2000/04/28 12:42:25	1.10
+++ Src/Zle/compmatch.c	2000/05/08 09:26:53
@@ -211,9 +211,9 @@
 cline_setlens(Cline l, int both)
 {
     while (l) {
-	l->max = cline_sublen(l);
+	l->min = cline_sublen(l);
 	if (both)
-	    l->min = l->max;
+	    l->max = l->min;
 	l = l->next;
     }
 }

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


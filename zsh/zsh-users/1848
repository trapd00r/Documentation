From zsh-workers-request@math.gatech.edu Thu Oct 08 19:30:14 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8095 invoked from network); 8 Oct 1998 19:30:12 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 8 Oct 1998 19:30:12 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id PAA20222;
	Thu, 8 Oct 1998 15:12:17 -0400 (EDT)
Resent-Date: Thu, 8 Oct 1998 15:12:10 -0400 (EDT)
Message-Id: <199810081915.OAA00736@kenku.warthog.com>
To: Mircea Damian <dmircea@secu.kappa.ro>
Cc: zsh-users@math.gatech.edu
From: Rob Windsor <windsor@warthog.com>
Reply-To: Rob Windsor <windsor@warthog.com>
Subject: Re: How to trigger the death of zsh(3.0.5) 
X-Files: THE TRUTH IS OUT THERE
In-reply-to: Your message of "Thu, 08 Oct 1998 20:49:53 +0300."
             <19981008204953.A9624@kappa.ro> 
Date: Thu, 08 Oct 1998 14:15:17 -0500
Sender: windsor@warthog.com
Resent-Message-ID: <"VqwVo2.0.Mx4.AwG7s"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1848
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Verily did Mircea Damian write:

> 1)
>  I posted a while ago a message about the "disappearing zsh".
>  I'm still using zsh-3.0.5(the one which comes with slackware 3.5) and I
> found a way to trigger the death of zsh:
>  I'm doing a backward-i-search(Ctrl-r) for "ls"(without quotes) and
>  instead of pressing enter I'm hitting Ctrl-C(which is interrupt key for
>  my terminal) so he prompt for search is disappearing. Then it's enough
>  to type "ls", enter and the shell is dead.

> My machine is linux-2.0.33 on a ix86 architecture(P200) with slackware 3.5.

I can reproduce this bug on Solaris-2.6/sparc, SunOS 4.1.3_U1/sparc, and
NetBSD-1.3.2/i386.

> Here is the /etc/zprofile(which is linked to /etc/zshrc):

[...]

> setopt histignoredups histignorespace nobeep autocd autolist nonomatch append
>history nobgnice correctall histnostore listtypes

I removed my .zshenv (no other zsh files) and went through my configuration
line-by-line (option-by-option) to determine which one was consistently
killing off my shell.  I found:

====
: wst103:~; telnet localhost
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.


SunOS 5.6

login: windsor
Password: 
Last login: Thu Oct  8 13:47:59 from localhost
wst103% setopt prompt_subst
(C-r, ls, C-c)
wst103% ls
Connection closed by foreign host.
====

But I couldn't accurately reproduce the bug with your list of setopts, just
"prompt_subst" (which you don't have listed).

-- Rob
----------------------------------------
Internet: windsor@warthog.com
Life: Rob@Carrollton.Texas.USA.Earth

The weather is here, wish you were beautiful.


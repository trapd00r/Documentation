From zsh-workers-return-5666-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Mar 05 16:00:36 1999
Return-Path: <zsh-workers-return-5666-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21691 invoked from network); 5 Mar 1999 16:00:27 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Mar 1999 16:00:27 -0000
Received: (qmail 3869 invoked by alias); 5 Mar 1999 15:58:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5666
Received: (qmail 3855 invoked from network); 5 Mar 1999 15:58:35 -0000
Date: Fri, 5 Mar 1999 16:57:41 +0100 (MET)
Message-Id: <199903051557.QAA05012@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: small fix for...


Discovered this while trying to make `_configure' work for
me... `inststrlen()' may be called with a NULL string.

Bye
 Sven

diff -u os/Zle/zle_tricky.c Src/Zle/zle_tricky.c
--- os/Zle/zle_tricky.c	Fri Mar  5 14:50:29 1999
+++ Src/Zle/zle_tricky.c	Fri Mar  5 16:52:53 1999
@@ -3903,7 +3903,7 @@
 static void
 inststrlen(char *str, int move, int len)
 {
-    if (!len)
+    if (!len || !str)
 	return;
     if (len == -1)
 	len = strlen(str);

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


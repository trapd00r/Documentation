From zsh-workers-return-16515-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 30 08:46:36 2002
Return-Path: <zsh-workers-return-16515-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7150 invoked from network); 30 Jan 2002 08:46:35 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 30 Jan 2002 08:46:35 -0000
Received: (qmail 28399 invoked by alias); 30 Jan 2002 08:46:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16515
Received: (qmail 28382 invoked from network); 30 Jan 2002 08:46:25 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
To: zsh-workers@sunsite.dk
Subject: PATCH: cd non-existent<TAB>
Message-Id: <20020130084507.BD0BF245D1@wischnow.berkom.de>
Date: Wed, 30 Jan 2002 09:45:07 +0100 (CET)


That completion failed to say that there are no matches (with the
appropriate styles). Caused by yet another case of an array
accidentally containing an empty string.

Bye
  Sven

Index: Completion/Zsh/Command/_cd
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_cd,v
retrieving revision 1.5
diff -u -r1.5 _cd
--- Completion/Zsh/Command/_cd	2001/10/05 11:56:56	1.5
+++ Completion/Zsh/Command/_cd	2002/01/30 08:44:45
@@ -34,6 +34,8 @@
   if [[ $PREFIX != (\~|/|./|../)* ]]; then
     local tmpcdpath alt
 
+    alt=()
+
     tmpcdpath=(${${(@)cdpath:#.}:#$PWD})
 
     (( $#tmpcdpath )) &&

-- 
Sven Wischnowsky                           wischnow@berkom.de


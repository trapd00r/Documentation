From zsh-users-return-14221-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 06 15:17:53 2009
Return-Path: <zsh-users-return-14221-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14099 invoked from network); 6 Jul 2009 15:17:50 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.4 required=5.0 tests=AWL,BAYES_00,SUBJ_RE_NUM
	autolearn=no version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 6 Jul 2009 15:17:50 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 89334 invoked from network); 6 Jul 2009 15:17:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Jul 2009 15:17:27 -0000
Received: (qmail 23754 invoked by alias); 6 Jul 2009 15:16:48 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14221
Received: (qmail 23736 invoked from network); 6 Jul 2009 15:16:47 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 6 Jul 2009 15:16:47 -0000
Received: from smtp.tt-solutions.com (sunset.tt-solutions.com [82.238.156.189])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 6BF508027106
	for <zsh-users@sunsite.dk>; Mon,  6 Jul 2009 17:16:44 +0200 (CEST)
Received: from nightfall ([192.168.17.76])
	by smtp.tt-solutions.com with esmtp (Exim 4.69)
	(envelope-from <vz-zsh@zeitlins.org>)
	id 1MNpvv-0001Be-0t
	for zsh-users@sunsite.dk; Mon, 06 Jul 2009 17:16:43 +0200
Date: Mon, 6 Jul 2009 17:16:42 +0200
From: Vadim Zeitlin <vz-zsh@zeitlins.org>
Subject: Re[2]: Append cancelled commands to history
To: zsh-users@sunsite.dk
MIME-Version: 1.0
Content-Type: MULTIPART/SIGNED; protocol="application/pgp-signature"; micalg=pgp-sha1; BOUNDARY="435429979-8001-1246893403=:3620"
References: <c16a574a0809181450t61a5b5ddq2e80797fde37636e@mail.gmail.com> <20080919162045.GA22435@ruderich.org>
In-Reply-To: <20080919162045.GA22435@ruderich.org>
X-Mailer: Mahogany 0.67.2 'Constance', running under Windows Server 2003 (build 3790, Service Pack 1)
Message-Id: <20090706151644.6BF508027106@bifrost.dotsrc.org>
X-Virus-Scanned: ClamAV 0.94.2/9538/Fri Jul  3 16:27:11 2009 on bifrost
X-Virus-Status: Clean

--435429979-8001-1246893403=:3620
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-Disposition: INLINE

On Fri, 19 Sep 2008 18:20:45 +0200 Simon Ruderich <simon@ruderich.org> wrote:

SR> I'm using the following function which works fine for me, not sure though if
SR> it's the best solution:
SR> 
SR>     TRAPINT() {
SR>         # Store the current buffer in the history.
SR>         zle && print -s $BUFFER
SR> 
SR>         # Return the default exit code so zsh aborts the current command.
SR>         return $1
SR>     }

 Hello,

 I've been using this tip since the day it was posted here and it worked
great: pressing Ctrl-C is much more convenient/easier to remember than
using a separate key combination for "cancel but save in history" that I
used before, thanks Simon! However today I accidentally found out that
pressing Ctrl-C on a line starting with '-' results in

	TRAPINT:1: bad option: -

error message. The fix for this is, of course, obvious but I thought to
post it here just in case anybody else decides to copy this from the list
archives to their .zshrc, so here is the updated function:

	% which TRAPINT
	TRAPINT () {
		zle && print -s -- $BUFFER
		return $1
	}

 Thanks again to Simon for the original tip!
VZ

--435429979-8001-1246893403=:3620
Content-Type: APPLICATION/PGP-SIGNATURE

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (MingW32)

iD8DBQBKUhVaBupB3k9sHoYRAiIyAJ4pZM+gretFCqy3P+nEPi1JIYp9jgCfX46e
uN1/FSGNqePB6x7vpOaxnYY=
=aUPB
-----END PGP SIGNATURE-----

--435429979-8001-1246893403=:3620--


From zsh-users-return-14885-mason-zsh=primenet.com.au@zsh.org Thu Feb 25 14:12:28 2010
Return-Path: <zsh-users-return-14885-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16345 invoked by alias); 25 Feb 2010 14:12:28 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14885
Received: (qmail 5060 invoked from network); 25 Feb 2010 14:12:26 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW,SPF_HELO_PASS autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Thu, 25 Feb 2010 14:12:19 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-users@zsh.org
Subject: Re: tab completion in an alias
Message-ID: <20100225141219.355b6a1c@news01>
In-Reply-To: <20100224052122.GA27211@s70206.gridserver.com>
References: <20100224052122.GA27211@s70206.gridserver.com>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 25 Feb 2010 14:12:19.0040 (UTC) FILETIME=[8A647E00:01CAB624]
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.68.0.154

On Tue, 23 Feb 2010 21:21:36 -0800
John Magolske <listmail@b79.net> wrote:
>     alias d='cd -	'
> 
> So that I could type d, then the enter key, and be presented with the
> directory stack as a menu to scroll down through. Is there some way to
> accomplish this?

The following seemed to work (4.3.10)...


zle-line-init() {
  if [[ -n $ZLE_PUSH_STRING ]]; then
    zle -U "$ZLE_PUSH_STRING"
    unset ZLE_PUSH_STRING
  fi
}
zle -N zle-line-init
alias d="ZLE_PUSH_STRING=\$'cd -\\C-i'"


This causes it to preload the string into the line editor as a string of
characters at the start.  They have to be raw characters to make the tab
active; that's the simplest way I found of doing it.  There are no doubt
entirely different ways of geting a similar effect.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-workers-request@euclid.skiles.gatech.edu  Sun Feb  4 04:10:44 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with ESMTP id EAA23815 for <mason@werple.mira.net.au>; Sun, 4 Feb 1996 04:10:42 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA26011; Sat, 3 Feb 1996 12:01:13 -0500 (EST)
Resent-Date: Sat, 3 Feb 1996 12:01:13 -0500 (EST)
Message-Id: <199602031700.MAA19427@capitalist.princeton.edu>
Content-Type: text/plain
Mime-Version: 1.0 (NeXT Mail 3.3 v118.2)
X-Face: "3j&zX:\4Fv+|EtJ_@0U.lpHU=j7E<FTV\H9$n]}x{[{&7&yclgGB|:L}E=(bJ(aiFCL%lY}
	xwr3bybh'>1K}w]4o"TB(VC9oAxSn%tv,C7w`wVgS}$\q2_s%+aNQ>;1z~G~Wqh8Bui,!P4[
X-Nextstep-Mailer: Mail 3.3 (Enhance X)
From: Carl Edman <cedman@Princeton.EDU>
Date: Sat,  3 Feb 96 12:00:43 -0500
To: zsh-workers@math.gatech.edu
Subject: TCCLEAREOD in zle_refresh.c/refresh()
Cc: Scott Hess <scott@nic.gac.edu>
Resent-Message-ID: <"HJz6S1.0.KM6.OJv4n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/753
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

In beta13 this function contains these lines:

        if (!clearflag)
            if (tccan(TCCLEAREOD))
                tcout(TCCLEAREOD);
            else
                cleareol = 1;   /* set */

The effect is to have every prompt clear to the end of screen.  That  
causes display glitches under several terminal emulators with scroll-back  
buffers.   I replaced the TCCLEAREOD with TCCLEAREOL which fixes that  
problem without any apparent unwelcome side-effects.

But then I'm not an expert on this section of the code, so maybe there is  
a good, non-obvious reason that this has to be TCCLEAREOD ?  Unless there  
is an outcry of complaint, I'll submit a two-line patch in a few days.

	Carl Edman


From zsh-workers-return-27994-mason-zsh=primenet.com.au@zsh.org Thu Jun 03 13:35:16 2010
Return-Path: <zsh-workers-return-27994-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17332 invoked by alias); 3 Jun 2010 13:35:15 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27994
Received: (qmail 24339 invoked from network); 3 Jun 2010 13:35:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Thu, 3 Jun 2010 14:32:20 +0100
From: Peter Stephenson <Peter.Stephenson@csr.com>
To: Martin Buchholz <martinrb@google.com>, zsh-workers@zsh.org
Cc: Joel Ebel <jbebel@google.com>
Subject: Re: zsh ignores the arguments on its first command.
Message-ID: <20100603143220.48ccbf3e@csr.com>
In-Reply-To: <AANLkTilx2bOk5hHYLVly8XCIu4xz4hhtFHpgTaP4otN3@mail.gmail.com>
References: <martinrb@google.com>
	<AANLkTikiCBKGaJcuE9s-vMZvK465tTR6WSFIsy6wo7xL@mail.gmail.com>
	<201006012145.o51LjhGg005724@pws-pc.ntlworld.com>
	<AANLkTikvkgA0bFLLh7VLVtBbUVMdM64-2iQXjAVbHvaA@mail.gmail.com>
	<20100602121901.6ce71329@csr.com>
	<AANLkTimPDymUsBJICkPlnyeFuFLA5Ek80j_aNQH5rXGo@mail.gmail.com>
	<20100603100109.1b090b4e@csr.com>
	<AANLkTilx2bOk5hHYLVly8XCIu4xz4hhtFHpgTaP4otN3@mail.gmail.com>
Organization: Cambridge Silicon Radio
X-Mailer: Claws Mail 3.7.5 (GTK+ 2.18.9; i686-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Jun 2010 13:32:20.0730 (UTC) FILETIME=[315EEDA0:01CB0321]
X-Scanned-By: MailControl A_09_40_00 (www.mailcontrol.com) on 10.71.1.139

On Thu, 3 Jun 2010 06:22:57 -0700
Martin Buchholz <martinrb@google.com> wrote:
> So please change the zsh error to something like
> 
> "Autoloading of module %s failed to define parameter %s"

You're right, it's a specific error for this case, it could be a lot
clearer.

Index: Src/params.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/params.c,v
retrieving revision 1.160
diff -p -u -r1.160 params.c
--- Src/params.c	12 May 2010 10:07:01 -0000	1.160
+++ Src/params.c	3 Jun 2010 13:31:33 -0000
@@ -461,7 +461,8 @@ getparamnode(HashTable ht, const char *n
 	     * stuff to go ahead with the autoload stub with
 	     * no error status we're in for all sorts of mayhem?
 	     */
-	    zerr("unknown parameter: %s", nam);
+	    zerr("autoloading module %s failed to define parameter: %s", mn,
+		 nam);
 	}
     }
     return hn;


-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


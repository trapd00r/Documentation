From zsh-users-return-13054-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 24 11:49:15 2008
Return-Path: <zsh-users-return-13054-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23920 invoked from network); 24 Jul 2008 11:49:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Jul 2008 11:49:13 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 49436 invoked from network); 24 Jul 2008 11:48:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Jul 2008 11:48:58 -0000
Received: (qmail 8833 invoked by alias); 24 Jul 2008 11:48:49 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13054
Received: (qmail 8820 invoked from network); 24 Jul 2008 11:48:49 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 24 Jul 2008 11:48:49 -0000
Received: from hs-out-0708.google.com (hs-out-0708.google.com [64.233.178.248])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 2AAA980561C3
	for <zsh-users@sunsite.dk>; Thu, 24 Jul 2008 13:48:45 +0200 (CEST)
Received: by hs-out-0708.google.com with SMTP id 23so295507hsn.13
        for <zsh-users@sunsite.dk>; Thu, 24 Jul 2008 04:48:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=Ri6T22E44gV7XqQbVxOZlzmQhYNF/NXHT0poaccD75E=;
        b=kFgafPiaC8VzzFxE8gIG3O6A+BXFgmI1VOl/DGecVewOkfx7/Lpx0DySPqy3y17tiS
         EwdObQ+uv0Vf87Bq89FmUph9lkY5QFQ/QV9jT3PSCHCnct4khZmwdBJlbOw/Rm4CL+Tg
         MqRQed7roGw04yX4rq7s2nqpMwA6/OZwY5YMg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=eVg9tDIQcvu3JMDyWq6lMF4k/T35Q21lWnZnvCQBlgq2O3u1qDYf/OvzLarPA+OEPP
         5N4sTX9WW1/b3fTlyLImOs6zCmgtpGyp3pJeSqU/dy9PEVLToj+l0V7JDYCi789pHsfw
         AcnrNoq1iqB5OZEeDR7zIlxvQd/8s0WCyrpgE=
Received: by 10.100.140.15 with SMTP id n15mr312539and.110.1216900123471;
        Thu, 24 Jul 2008 04:48:43 -0700 (PDT)
Received: by 10.100.43.19 with HTTP; Thu, 24 Jul 2008 04:48:43 -0700 (PDT)
Message-ID: <2d460de70807240448v2d77b44dr5b25580e7a39f51b@mail.gmail.com>
Date: Thu, 24 Jul 2008 13:48:43 +0200
From: "Richard Hartmann" <richih.mailinglist@gmail.com>
To: "Zsh users list" <zsh-users@sunsite.dk>, grml@mur.at
Subject: A scheme to manage several ZSH config file collections?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV 0.92.1/7810/Thu Jul 24 12:54:32 2008 on bifrost
X-Virus-Status: Clean

Hi all,

some of you might be aware of grml, a live boot CD which uses ZSH as its
default shell. I suggested integrating several different zshrc files
along with whatever other files they need and offer the user a selection
of said configuration files.

Now, we are wondering if there is a clean and maintainable way to do
this. I have had a few ideas in this direction and would like to discuss
those here. New suggestions are more than welcome as well, of course.
Ideally, the same versions should be usable on the machines of whoever
maintains those files, so that changes can be merged back and forth
easily, which will allow more people to participate.


1) Make ZSH load the RC files from different paths (/etc/zsh/config1 ..)
    Pro: Almost drop-in, minimal work necessary
         Cleanly seperated
         Different ttys might run with different RC files
    Con: Needs modification to fpath etc
         Shells can not be allowed to start prior to rc file selection

2) Use symlinks
    Pro: Fast to set up
    Con: All shells are forced to use the same RC files
         Shells can not be allowed to start prior to rc file selection
         Ugly & hackish

3) Use $ZSHRC_PREFIX or some similar variable
    Pro: Drop-in solution once you change your RC files for the first
           time
         Cleanly seperated
         Different ttys might run with different RC files
    Con: Shells can not be allowed to start prior to rc file selection
         Needs a way for ZSH to be started with a variable set before it
           is invoked

Are there any other options? Pros or Cons I overlooked? Anything else?
The main thing I worry about is to make the shells wait for their RC
files in a robust & fail-safe way?

Personally, I lean towards solution 3, but I am not hell-bent onto using
it.


Thanks,
Richard

PS: Yes, in a second step, this system could be expanded for VIM
etc, as well.


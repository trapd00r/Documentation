From zsh-workers-return-23271-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 12 20:49:22 2007
Return-Path: <zsh-workers-return-23271-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 844 invoked from network); 12 Apr 2007 20:49:19 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Apr 2007 20:49:19 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 43205 invoked from network); 12 Apr 2007 20:49:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Apr 2007 20:49:13 -0000
Received: (qmail 14204 invoked by alias); 12 Apr 2007 20:49:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23271
Received: (qmail 14194 invoked from network); 12 Apr 2007 20:49:08 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Apr 2007 20:49:08 -0000
Received: (qmail 42894 invoked from network); 12 Apr 2007 20:49:08 -0000
Received: from nz-out-0506.google.com (64.233.162.229)
  by a.mx.sunsite.dk with SMTP; 12 Apr 2007 20:49:04 -0000
Received: by nz-out-0506.google.com with SMTP id s1so561926nze
        for <zsh-workers@sunsite.dk>; Thu, 12 Apr 2007 13:49:03 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=MgpoIccHOLcpz6qYFfSgKN3h2EQsO/MOXJT9/leVhEFNkUM4QjAhNS48QIKHzObBc0qxs5BIYKg6rIoTrcm2nLeQQkR9djAjasxFNk1+ruq59AQpLxW8f953r9Ic3JOnVxIWONgdUw/Ef4aH9NrMnQ+JeMtbWwh5zC5cARZRoaM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=gBGwFNCRSiJAa9W+GDorn71ezJr+QLSuNflnt2Pj/PgIbHk+gW2GpQRLXxapsxjZF2+6dT4lplA8tIO8YXONj9jC+/YUECNzpxzBgTtU/Y0dT3k3NeneRzDzvA5nZwIg7yUkj0EUDoIFUabUu2nKx/3O7BHKosmX4OwVCECmPyY=
Received: by 10.115.95.1 with SMTP id x1mr854053wal.1176410942251;
        Thu, 12 Apr 2007 13:49:02 -0700 (PDT)
Received: by 10.114.26.18 with HTTP; Thu, 12 Apr 2007 13:49:02 -0700 (PDT)
Message-ID: <2ddaa6ea0704121349g7d25008dxb7c70ba05b9f85fe@mail.gmail.com>
Date: Thu, 12 Apr 2007 21:49:02 +0100
From: "Pete Hollobon" <pete@hollobon.com>
Sender: hollobon@gmail.com
To: zsh-workers@sunsite.dk
Subject: Completion function for sqsh
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 170e3e0bdf31c4a7

Hi,

This is a completion function for sqsh (http://www.sqsh.org/), a nice
replacement for Sybase isql.

Pete

_sqsh

#compdef sqsh

_sybase_server() {
    local interfaces

    if [[ -n "$opt_args[-I]" ]]; then
        interfaces=${(e)~opt_args[-I]:Q}
    elif [[ -n "$opt_args[-y]" ]]; then
        interfaces=${(e)~opt_args[-y]:Q}/interfaces
    else
        interfaces=$SYBASE/interfaces
    fi

    [[ -f $interfaces ]] && compadd ${${(f)"$(<$interfaces)"}:#[[:space:]#]*}
}

_arguments : \
    '-A[Adjust TDS packet size (512)]:packet size (bytes):(512 1024
1536 2048)' \
    '-B[Turn off file buffering on startup]' \
    '-C[Send sql statment to server]:sql' \
    '-D[Change database context on startup]:database' \
    '-E[Replace default editor (vi)]:editor' \
    '-H[Set the client hostname]:reported hostname' \
    '-I[Alternate interfaces file]:interface file:_files' \
    '-J[Client character set]:charset' \
    '*-L[Set the value of a given variable]:variable=value' \
    '-P[Sybase password (NULL)]:password' \
    '-S[Name of Sybase server (\$DSQUERY)]:_sybase_server' \
    '-U[Name of Sybase user]:username' \
    '-X[Enable client password encryption]' \
    '-a[Max. # of errors before abort]:number' \
    '-b[Suppress banner message on startup]' \
    '*-c[Alias for the ''go'' command]:go alias' \
    '-d[Min. severity level to display]:severity level (0-22)' \
    '-e[Echo batch prior to executing]' \
    '-f[Min. severity level for failure]:failure severity' \
    '-h[Disable headers and footers]' \
    '-i[Read input from file]:_files' \
    '-k[Specify alternate keywords file]:_files' \
    '-l[Set debugging level]' \
    '-m[Set display mode (normal)]:display style:(horiz vert bcp html
meta pretty none)' \
    '-n[Set chained transaction mode]:chained transaction mode:(on off)' \
    '-o[Direct all output to file]:_files' \
    '-p[Display performance stats]' \
    '-r[Specify name of .sqshrc]:_files' \
    '-s[Alternate column separator (\t)]:column separator' \
    '-t[Filter batches through program]:filter program:_files -g "*(*)"' \
    '-v[Display current version and exit]' \
    '-w[Adjust result display width]:number' \
    '-y[Override value of $SYBASE]:_directories' \
    '-z[Alternate display language]:language' \


From zsh-users-return-9490-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 11 16:42:58 2005
Return-Path: <zsh-users-return-9490-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27685 invoked from network); 11 Oct 2005 16:42:55 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Oct 2005 16:42:55 -0000
Received: (qmail 36302 invoked from network); 11 Oct 2005 16:42:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2005 16:42:47 -0000
Received: (qmail 20538 invoked by alias); 11 Oct 2005 16:42:39 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9490
Received: (qmail 20529 invoked from network); 11 Oct 2005 16:42:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Oct 2005 16:42:38 -0000
Received: (qmail 35206 invoked from network); 11 Oct 2005 16:42:38 -0000
Received: from cluster-c.mailcontrol.com (HELO rly22c.srv.mailcontrol.com) (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2005 16:42:37 -0000
Received: from exchange03.csr.com (mailhost1.csr.com [81.105.217.43])
	by rly22c.srv.mailcontrol.com (MailControl) with ESMTP id j9BGgZ9q026410
	for <zsh-users@sunsite.dk>; Tue, 11 Oct 2005 17:42:35 +0100
Received: from csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 11 Oct 2005 17:44:38 +0100
To: zsh-users@sunsite.dk
Subject: Re: Wrong UTF-8-characters in prompt 
In-reply-to: <200510112032.42671.arvidjaar@newmail.ru> 
References: <20051011093327.GB12645@speutel.de> <200510112032.42671.arvidjaar@newmail.ru>
Comments: In-reply-to Andrey Borzenkov <arvidjaar@newmail.ru>
   message dated "Tue, 11 Oct 2005 20:32:38 +0400."
Date: Tue, 11 Oct 2005 17:42:33 +0100
From: Peter Stephenson <pws@csr.com>
Message-ID: <EXCHANGE03qjJny7v35000048b4@exchange03.csr.com>
X-OriginalArrivalTime: 11 Oct 2005 16:44:38.0455 (UTC) FILETIME=[11CC0C70:01C5CE83]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-05-40-00 (www.mailcontrol.com) on 10.67.0.132
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Andrey Borzenkov wrote:
> On Tuesday 11 October 2005 13:33, Stephan Windm=C3=BCller wrote:
> > When I change into a directory which contains UTF-8-characters, the
> > prompt looks garbled:
> >
> > windy@zerus:~$ echo $LANG
> > de_DE.UTF-8
> > windy@zerus:~$ mkdir =C3=84rzte
> > windy@zerus:~$ ls =C3=84rzte -d
> > =C3=84rzte
> > windy@zerus:~$ cd =C3=84rzte
> > windy@zerus:~/\M-C\M-^Drzte$
> >
> > I'm using the CVS-code of 2005/10/04 on Debian Sarge. Is this a bug of
> > zsh or do I have to change the prompt?
> >
> 
> For now use "setopt printeightbit" but it is obviously a bug - zsh should
> not rely on it in multibyte environment.

It doesn't any more as long as the (wide) character is printable, and if
--enable-multibyte is in effect it should show unprintable wide characters
in \u or \U format rather than \M format.  I rather suspect multibyte
support isn't enabled.

pws


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com


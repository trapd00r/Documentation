From zsh-workers-return-26856-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 21 05:12:47 2009
Return-Path: <zsh-workers-return-26856-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10139 invoked from network); 21 Apr 2009 05:12:34 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Apr 2009 05:12:34 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46018 invoked from network); 21 Apr 2009 05:12:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Apr 2009 05:12:18 -0000
Received: (qmail 5870 invoked by alias); 21 Apr 2009 05:12:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26856
Received: (qmail 5851 invoked from network); 21 Apr 2009 05:12:06 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 21 Apr 2009 05:12:06 -0000
Received: from web37302.mail.mud.yahoo.com (web37302.mail.mud.yahoo.com [209.191.90.245])
	by bifrost.dotsrc.org (Postfix) with SMTP id BA61B8028C72
	for <zsh-workers@sunsite.dk>; Tue, 21 Apr 2009 07:10:58 +0200 (CEST)
Received: (qmail 72030 invoked by uid 60001); 21 Apr 2009 05:11:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1240290710; bh=ugHxZT/ld6Z6Br60qOfBhizqwyawWh+UkYF/qi48Uv8=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=j1WAIszmighTdSl0WOs9AMtQYdoAuRe8is0+xv+ETdMKVLNtgsEMlBrPsAJr1ngVDzNEbQYRbeVVJXnj37BomCX3VBzbYa3CU5E+Bb5Ej6EdKKnYDYUalnylpWJNGffEvph65S86p7iHEo11AwMffhFyVlKwAhkfuS2/nfbPw7o=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=x7OGYwPwt8wNQhE1pCuH3bDUIBYKL7TtT9Zvh0QC8ExxAKanFj3BoncQqYk3Mw7UvM1XJf2Todjb5PqSSG8PdbJiwBZM/9/y20STNV21hcvJ70JEqTH6ctl2arBODX9qS32QzCA7MQUEHIgUU3dEkoenn/vN6iY3Ag7SFBveykk=;
Message-ID: <223408.70138.qm@web37302.mail.mud.yahoo.com>
X-YMail-OSG: .nX7cVoVM1mqvh7AGQJBOLnFPfxNyqHz4pP9BGKytek3KCbcUr971TpWKV3bQt632DAIT0koAGIMbpANV794Bytp6BDiCMx6alpRlzuYoQiIcatVV8wyn1lhGGZV7lPXIYFP7cR11K9sOon7ljk9AmTsQBijNZQt8EJaZEk7bBNFHyE56uNg_gvSBH0yctIebgTZ82rYybgaGR59p.dIZ3zvq.j52xs34xKZf5r1o2ik1w87PUP4aK8zGNJ5d.KIDka5QhOnZFhSrl2wsCr3IkudxD9usiosr9wV0vCVF_Ft0ktXSQ4kQg--
Received: from [128.175.185.44] by web37302.mail.mud.yahoo.com via HTTP; Mon, 20 Apr 2009 22:11:50 PDT
X-Mailer: YahooMailRC/1277.35 YahooMailWebService/0.7.289.1
Date: Mon, 20 Apr 2009 22:11:50 -0700 (PDT)
From: Michael Hwang <nomex45@yahoo.com>
Subject: Space after completion disappears
To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.92.1/9262/Tue Apr 21 05:35:24 2009 on bifrost
X-Virus-Status: Clean


When a file is tab completed, and you didn't have to select from a menu, a space is added immediately after the file. However, typing another character that denotes the end of that command--ampersand, semi-colon, vertical pipe--causes the space to be erased. I would expect the semi-colon to have this behavior, but not the ampersand or the pipe. Consider these keystrokes in a directory with a single file 'foobar':

% touch foo<TAB>;
After the tab, the line reads "touch foobar " (note the trailing space). Typing ";" after it removes the space, and you get "touch foobar;", which is desired. However...

% rm foo<TAB>&
I want to background the rm command. After hitting tab, I see "rm foobar " (trailing space again). Pressing "&" deletes the space, and you see "rm foobar&". It would be better if it left the space, showing "rm foobar &". Both "rm foobar&" and "rm foobar &" do exactly the same thing, but the second one is preferred. The pipe is the same:

% cat foo<TAB>| sed ....
Ignore the useless use of cat. After typing the pipe, you get "cat foobar| sed ...." and not "cat foobar | sed ....". The second is preferable because it is neater.

I tried to squash the bug myself, but got hopelessly confused looking through ZLE code. I'm reporting it in the hope that someone else will fix it.

Michael Hwang



      


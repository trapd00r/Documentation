From zsh-workers-return-27995-mason-zsh=primenet.com.au@zsh.org Thu Jun 03 13:47:42 2010
Return-Path: <zsh-workers-return-27995-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27067 invoked by alias); 3 Jun 2010 13:47:42 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27995
Received: (qmail 23282 invoked from network); 3 Jun 2010 13:47:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _netblocks.google.com designates 74.125.121.35 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=google.com; s=beta;
	t=1275572841; bh=VYuOlpuGv6V7Dt4Hw6Ocxux0oV0=;
	h=MIME-Version:In-Reply-To:References:Date:Message-ID:Subject:From:
	 To:Cc:Content-Type:Content-Transfer-Encoding;
	b=i1BAqFgFtEsCCGrB7sERaVkt/i6XLyTYgYoKAMRUbNi/BT7QDWtID+/tSvKoDt4pb
	 qSyhj12aDhsGobPZg5Dxw==
DomainKey-Signature: a=rsa-sha1; s=beta; d=google.com; c=nofws; q=dns;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to:
	cc:content-type:content-transfer-encoding:x-system-of-record;
	b=bwkdWyNBKq8bRDl1Os3bgkHLMpcNsW8xzQSu+k1vWEoLB+xQUR9Hq9QLVry1X9chL
	tDUHiQmyJ8ikCzYfE49TA==
MIME-Version: 1.0
In-Reply-To: <20100603143220.48ccbf3e@csr.com>
References: <martinrb@google.com>
	<AANLkTikiCBKGaJcuE9s-vMZvK465tTR6WSFIsy6wo7xL@mail.gmail.com>
	<201006012145.o51LjhGg005724@pws-pc.ntlworld.com>
	<AANLkTikvkgA0bFLLh7VLVtBbUVMdM64-2iQXjAVbHvaA@mail.gmail.com>
	<20100602121901.6ce71329@csr.com>
	<AANLkTimPDymUsBJICkPlnyeFuFLA5Ek80j_aNQH5rXGo@mail.gmail.com>
	<20100603100109.1b090b4e@csr.com>
	<AANLkTilx2bOk5hHYLVly8XCIu4xz4hhtFHpgTaP4otN3@mail.gmail.com>
	<20100603143220.48ccbf3e@csr.com>
Date: Thu, 3 Jun 2010 06:47:16 -0700
Message-ID: <AANLkTin2YWDsj80ECdryTU6PJ5yYnpI9GrUioQ8bNggl@mail.gmail.com>
Subject: Re: zsh ignores the arguments on its first command.
From: Martin Buchholz <martinrb@google.com>
To: Peter Stephenson <Peter.Stephenson@csr.com>
Cc: zsh-workers@zsh.org, Joel Ebel <jbebel@google.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-System-Of-Record: true

Peter,

Thank you very much!

Martin

On Thu, Jun 3, 2010 at 06:32, Peter Stephenson <Peter.Stephenson@csr.com> w=
rote:
> On Thu, 3 Jun 2010 06:22:57 -0700
> Martin Buchholz <martinrb@google.com> wrote:
>> So please change the zsh error to something like
>>
>> "Autoloading of module %s failed to define parameter %s"
>
> You're right, it's a specific error for this case, it could be a lot
> clearer.
>
> Index: Src/params.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> RCS file: /cvsroot/zsh/zsh/Src/params.c,v
> retrieving revision 1.160
> diff -p -u -r1.160 params.c
> --- Src/params.c =A0 =A0 =A0 =A012 May 2010 10:07:01 -0000 =A0 =A0 =A01.1=
60
> +++ Src/params.c =A0 =A0 =A0 =A03 Jun 2010 13:31:33 -0000
> @@ -461,7 +461,8 @@ getparamnode(HashTable ht, const char *n
> =A0 =A0 =A0 =A0 =A0 =A0 * stuff to go ahead with the autoload stub with
> =A0 =A0 =A0 =A0 =A0 =A0 * no error status we're in for all sorts of mayhe=
m?
> =A0 =A0 =A0 =A0 =A0 =A0 */
> - =A0 =A0 =A0 =A0 =A0 zerr("unknown parameter: %s", nam);
> + =A0 =A0 =A0 =A0 =A0 zerr("autoloading module %s failed to define parame=
ter: %s", mn,
> + =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0nam);
> =A0 =A0 =A0 =A0}
> =A0 =A0 }
> =A0 =A0 return hn;
>
>
> --
> Peter Stephenson <pws@csr.com> =A0 =A0 =A0 =A0 =A0 =A0Software Engineer
> Tel: +44 (0)1223 692070 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 Cambridge Sil=
icon Radio Limited
> Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ=
, UK
>
>
> Member of the CSR plc group of companies. CSR plc registered in England a=
nd Wales, registered number 4187346, registered office Churchill House, Cam=
bridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom
>


From zsh-workers-request@math.gatech.edu Mon Apr 20 19:10:37 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4853 invoked from network); 20 Apr 1998 19:10:36 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (7795@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 20 Apr 1998 19:10:36 -0000
Received: (qmail 4852 invoked from network); 20 Apr 1998 19:10:34 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns2.primenet.com.au with SMTP; 20 Apr 1998 19:10:34 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id OAA16584;
	Mon, 20 Apr 1998 14:54:14 -0400 (EDT)
Resent-Date: Mon, 20 Apr 1998 14:54:14 -0400 (EDT)
Message-Id: <199804201854.UAA10269@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: zsh-3.1.2-zefram4 
In-reply-to: "Andrew Main"'s message of "Thu, 09 Apr 1998 10:25:25 MST."
             <199804090925.KAA19740@diamond.tao.co.uk> 
Date: Mon, 20 Apr 1998 20:54:08 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"_WYLD2.0.034.LdvEr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3848
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

just got back...

Andrew Main wrote:
> Peter's KSH_GLOB patch is included, but I backed out a lot of the changes.
> I'd like to have options affect as little as possible, preferably just one
> thing each: KSH_GLOB in this version *only* affects the interpretation
> of parens preceded by the magic characters (in fact, the option is
> only tested on one line of the source).  Parens *not* preceded by the
> magic characters are unaffected by the option.  Glob qualifies are also
> unaffected: that `-', mandatory with KSH_GLOB and forbidden without,
> was just too nasty to use.

The idea was that with the ksh and zsh models being incompatible
anyway, it was asking for trouble trying to mix them.  If you write
correct ksh scripts it won't be a problem, though, so it's fine by me.

> I also backed out the special handling of `(^...)', which changed
> the semantics of `^' in an extremely non-obvious way.  You can use
> `(^(...))' to invert the whole group.

?? It didn't have any semantics before, it didn't work at all inside
parentheses.  I can't remember what I did now (which is a bad sign),
but what's wrong with the meaning `negate the following' that it needs
the extra parentheses?

> This turned up a very old
> bug in the exclusion handling: `(foo~bar)BAZ' is actually treated as
> `fooBAZ~barBAZ', rather than the exclusion being properly localised.

?????? How could it possibly mean anything else?  What are parentheses
supposed to mean, anyway?  (foo|bar)BAZ is fooBAZ|barBAZ and in the
same way (foo~bar)BAZ is fooBAZ~barBAZ.  Or are you just referring to
the way it's evaluated in practice (which is as you say and could
therefore probably be simplified, but that doesn't make it a bug)?

-- 
Peter Stephenson <pws@ifh.de>       Tel: +39 50 844536
WWW:  http://www.ifh.de/~pws/
Gruppo Teorico, Dipartimento di Fisica
Piazza Torricelli 2, 56100 Pisa, Italy
 


From hzoli@cs.elte.hu Fri Jul 19 11:39:24 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id LAA28362 for <mason@werple.mira.net.au>; Fri, 19 Jul 1996 11:39:22 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id VAA14006; Thu, 18 Jul 1996 21:34:27 -0400 (EDT)
Resent-Date: Thu, 18 Jul 1996 21:34:27 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199607190134.DAA05511@bolyai.cs.elte.hu>
Subject: Re: more dependencies on emulation
To: zsh-workers@math.gatech.edu (Zsh workers list)
Date: Fri, 19 Jul 1996 03:34:02 +0200 (MET DST)
In-Reply-To: <9607181518.ZM14255@candle.brasslantern.com> from Bart Schaefer at "Jul 18, 96 03:18:39 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"YM6PV3.0.nQ3.ZOkxn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1706
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 966
Status: O

Bart Schaefer wrote:
> If zsh were really emulating sh, arrays wouldn't work at all.  So it's a
> bit dubious to force ksh syntax only, given that it affects the indices
> as well as the syntax.

In sh ${foo[1]} is a syntax error so it does not introdueces any
incompatibility.

> I don't have a ksh to try this, but ~{pfalstad,rc} works fine in Bash

% ksh
$ echo ${.sh.version}
Version 12/28/93d
$ echo ~{hzoli,root}
~hzoli ~root

pdksh behaves similarily.

> (that is, the ~ is expanded), even though ~$USER doesn't expand tilde.
> In zsh's ksh emulation mode with this patch applied, ~$USER works, but

Do you mean that it gives the home directory of $USER?  It did not do that
before the patch.

> ~{pfalstad,rc} fails unless IGNORE_BRACES is also unset.  There doesn't

IGNORE_BRACES should probably be not set if zsh is invoked as ksh.  I'll
change that.

There is no standard for brace expansion and probably that's why shells are
differerent here.

Zoltan



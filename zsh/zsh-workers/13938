From zsh-workers-return-13938-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 10 17:13:43 2001
Return-Path: <zsh-workers-return-13938-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11889 invoked from network); 10 Apr 2001 17:13:42 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Apr 2001 17:13:42 -0000
Received: (qmail 26382 invoked by alias); 10 Apr 2001 17:13:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13938
Received: (qmail 26371 invoked from network); 10 Apr 2001 17:13:33 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010410171251.ZM17168@candle.brasslantern.com>
Date: Tue, 10 Apr 2001 17:12:51 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: PATCH: "make show-config"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

This is a patch I've had sitting around for a while.  I won't commit it
unless I get some positive feedback.  It duplicates in Makefile.in some
of the code from near the end of configure.in that reports the complete
configuration.  Sample output of "make show-config" for configure with
options --disable-dynamic --enable-zsh-debug --enable-function-subdirs:

zsh version               : 4.0.1-pre-3
source code location      : ../new
compiler                  : gcc
preprocessor flags        : 
executable compiler flags : -Wall -Wno-implicit -Wmissing-prototypes -ggdb
executable linker flags   : -g  
library flags             : -lnsl -ltermcap -lm  -lc
installation basename     : zsh
binary install path       : /usr/local/bin
man page install path     : /usr/local/man
info install path         : /usr/local/info
library install path      : /usr/local/lib
modules install path      : /usr/local/lib/zsh/4.0.1-pre-3
installed modules         : zsh/main zsh/rlimits zsh/sched zsh/parameter zsh/termcap zsh/terminfo zsh/zutil zsh/compctl zsh/complete zsh/complist zsh/computil zsh/zle zsh/zleparameter
functions install path    : /usr/local/share/zsh/4.0.1-pre-3/functions
installed functions       : Misc/* Prompts/* Completion/comp* Completion/*/*/* Zle/*


Index: Makefile.in
===================================================================
RCS file: /extra/cvsroot/zsh/zsh-4.0/Makefile.in,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 Makefile.in
--- Makefile.in	2001/04/09 20:14:08	1.1.1.1
+++ Makefile.in	2001/04/10 15:14:21
@@ -53,6 +53,33 @@
 META-FAQ: FORCE
 	@cd Doc && $(MAKE) $(MAKEDEFS) ../META-FAQ
 
+show-config:
+	@echo "zsh version               : $(VERSION)"
+	@echo "source code location      : $(sdir)"
+	@echo "compiler                  : $(CC)"
+	@echo "preprocessor flags        : $(CPPFLAGS)"
+	@echo "executable compiler flags : $(CFLAGS)"
+	@if test -n "$(DLCFLAGS)"; then \
+	 echo "module compiler flags     : $(CFLAGS) $(DLCFLAGS)"; fi
+	@echo "executable linker flags   : $(LDFLAGS) $(EXELDFLAGS) $(EXTRA_LDFLAGS)"
+	@if test -n "$(LIBLDFLAGS)$(DLLDFLAGS)"; then \
+	 echo "module linker flags       : $(LDFLAGS) $(LIBLDFLAGS) $(DLLDFLAGS)"; fi
+	@echo "library flags             : $(LIBS)"
+	@echo "installation basename     : $(tzsh)"
+	@echo "binary install path       : $(bindir)"
+	@echo "man page install path     : $(mandir)"
+	@echo "info install path         : $(infodir)"
+	@echo "library install path      : $(libdir)"
+	@echo "modules install path      : $(MODDIR)"
+	@echo "installed modules         :" \
+	`sed -e '/^#/d' -e '/ link=no/d' -e 's/ .*/ /' -e 's/^name=/ /' \
+	  $(dir_top)/config.modules`
+	@echo "functions install path    : $(fndir)"
+	@echo "installed functions       :" \
+	`sed -e '/^#/d' -e '/ functions=./!d' -e '/ link=no/d' \
+	  -e 's/^.* functions=/ /' -e 's% Functions/% %g' \
+	  $(dir_top)/config.modules`
+
 # ========== DEPENDENCIES FOR INSTALLING ==========
 
 # install stripped

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


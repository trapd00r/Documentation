From zsh-users-return-13034-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 15 10:12:13 2008
Return-Path: <zsh-users-return-13034-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4588 invoked from network); 15 Jul 2008 10:12:11 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Jul 2008 10:12:11 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 60886 invoked from network); 15 Jul 2008 10:11:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Jul 2008 10:11:54 -0000
Received: (qmail 5450 invoked by alias); 15 Jul 2008 10:11:45 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13034
Received: (qmail 5436 invoked from network); 15 Jul 2008 10:11:45 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 15 Jul 2008 10:11:45 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id C94AB80561C2
	for <zsh-users@sunsite.dk>; Tue, 15 Jul 2008 12:11:41 +0200 (CEST)
Received: from rly13g.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly13g.srv.mailcontrol.com (MailControl) with ESMTP id m6FABXaL022174
	for <zsh-users@sunsite.dk>; Tue, 15 Jul 2008 11:11:33 +0100
Received: from submission.mailcontrol.com (submission.mailcontrol.com [86.111.216.190])
	by rly13g.srv.mailcontrol.com (MailControl) id m6FAAnS1017465
	for zsh-users@sunsite.dk; Tue, 15 Jul 2008 11:10:49 +0100
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly13g-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id m6FAAltk016923; Tue, 15 Jul 2008 11:10:49 +0100 (BST)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 15 Jul 2008 11:10:46 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m6FAAklU015535;
	Tue, 15 Jul 2008 11:10:46 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m6FAAklm015531;
	Tue, 15 Jul 2008 11:10:46 +0100
Message-Id: <200807151010.m6FAAklm015531@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: "Zsh users list" <zsh-users@sunsite.dk>,
        "Robert Knight" <robertknight@gmail.com>
Subject: Re: history-beginning-local function
In-reply-to: <2d460de70807150246j1a82ab8bh4708a784509ef55b@mail.gmail.com>
References: <1186.1216057340@csr.com> <2d460de70807141148v3d1f18cai9387e81424889566@mail.gmail.com> <2d460de70807150246j1a82ab8bh4708a784509ef55b@mail.gmail.com>
Comments: In-reply-to "Richard Hartmann" <richih.mailinglist@gmail.com>
   message dated "Tue, 15 Jul 2008 11:46:52 +0200."
Date: Tue, 15 Jul 2008 11:10:46 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 15 Jul 2008 10:10:46.0972 (UTC) FILETIME=[0CB9E7C0:01C8E663]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.71.1.123
X-Virus-Scanned: ClamAV 0.92.1/7716/Tue Jul 15 04:34:17 2008 on bifrost
X-Virus-Status: Clean

"Richard Hartmann" wrote:
> On Mon, Jul 14, 2008 at 20:48, Richard Hartmann
> <richih.mailinglist@gmail.com> wrote:
> 
> 
> > PS: Yes, I did read the part about manual seeding of the file. I still like
>  it
> > a lot!
> 
> The part I apparently did not read was 'local directory'. Sorry, for the
> noise, I misinterpreted the purpose of this function.

Actually, it wouldn't be hard to add a session cookie to the context
giving you separate history files for separate sessions---the context
mechanism is flexible enough that this is really quite easy.  I'm
already adding the directory to the end of the context.  The history
file variable could be a list, so you you could specify

  zstyle ":zhist:$SOME_SESSION_COOKIE:*" local-history-file \
    .zsh_local_history ~/.history_$SOME_SESSION_COOKIE

or whatever.  (I've decided something other than :zle: would be more
appropriate.)

There's no reason why the resulting mechanism shouldn't have a "local"
history in a more general sense than I originally intended.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From zsh-workers-request@euclid.skiles.gatech.edu Tue Dec 24 11:33:35 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 6383 invoked from network); 24 Dec 1996 11:33:33 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 24 Dec 1996 11:33:33 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id GAA01932; Tue, 24 Dec 1996 06:34:14 -0500 (EST)
Resent-Date: Tue, 24 Dec 1996 06:34:14 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <23678.199612241135@stone.dcs.warwick.ac.uk>
Subject: zshxmods.h
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Tue, 24 Dec 1996 11:35:17 +0000 (GMT)
X-Patch: 158
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8622.41
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"YV-Xf1.0.5U.r-xlo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2631
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

This patch makes zshxmods.h only be included in init.c, so no other
objects depend on it.  This relies on my recent patches removing such
dependencies, with the Subject: lines "zle interface improvement" and
"printcompctlp".

 -zefram

      *** Src/Makefile.in	1996/12/24 03:27:31	1.21
      --- Src/Makefile.in	1996/12/24 03:30:40
      ***************
      *** 131,137 ****
        system.h zsh.h ztype.h Zle/zle.h
        
        # zsh headers necessary for compilation
      ! HDRS = $(DIST_HDRS) signames.h zshxmods.h @RLIMITS_SRC_H@ ../config.h
        
        # zsh C source included in distribution
        DIST_SRCS = builtin.c compat.c cond.c exec.c glob.c hashtable.c hist.c \
      --- 131,137 ----
        system.h zsh.h ztype.h Zle/zle.h
        
        # zsh headers necessary for compilation
      ! HDRS = $(DIST_HDRS) signames.h @RLIMITS_SRC_H@ ../config.h
        
        # zsh C source included in distribution
        DIST_SRCS = builtin.c compat.c cond.c exec.c glob.c hashtable.c hist.c \
      ***************
      *** 215,221 ****
        
        $(OBJS): $(HDRS)
        
      ! init.o: bltinmods.list zshpaths.h
        
        $(MODULE_DIRS): FORCE
        	@cd $@ && $(MAKE) $(MAKEDEFS) modules
      --- 215,221 ----
        
        $(OBJS): $(HDRS)
        
      ! init.o: bltinmods.list zshpaths.h zshxmods.h
        
        $(MODULE_DIRS): FORCE
        	@cd $@ && $(MAKE) $(MAKEDEFS) modules
      *** Src/init.c	1996/12/24 02:09:53	1.30
      --- Src/init.c	1996/12/24 03:29:42
      ***************
      *** 33,38 ****
      --- 33,39 ----
        #include "zsh.h"
        
        #include "zshpaths.h"
      + #include "zshxmods.h"
        
        int noexitct = 0;
        
      *** Src/zsh.h	1996/12/24 02:09:54	1.36
      --- Src/zsh.h	1996/12/24 03:29:04
      ***************
      *** 38,45 ****
        #include <config.h>
        #include <system.h>
        
      - #include "zshxmods.h"
      - 
        #ifndef IN_ZLE
        # define trashzle()      trashzleptr()
        # define zleread(X,Y)    zlereadptr(X,Y)
      --- 38,43 ----

-----BEGIN PGP SIGNATURE-----
Version: 2.6.2

iQCVAwUBMr9RXXD/+HJTpU/hAQG9/AQAhpgr6Z093yzC2NuwVmBpS4xfhHuD8K84
AONxHommUWZbttraPd40dkykKL89SOfPHtd/A6OaBU3GgXJxtQZzM6uX79F39050
8rKyBKXC5sgAwLoyaH+kbBML5cztvbpNRxoc4O74IzbCUJdfV0/F809OqI/S6JRL
p/qWUJqwCmw=
=xBVE
-----END PGP SIGNATURE-----


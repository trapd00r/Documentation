Date: Tue, 11 Apr 2006 10:49:42 -0700
From: Wayne Davison <wayned@users.sourceforge.net>
To: Pierre Albarede <pa.news@free.fr>
Cc: zsh-workers@sunsite.dk
Subject: Re: report after installing zsh-4.3.2
Message-ID: <20060411174942.GF23613@dot.blorf.net>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="NzB8fVQJ5HfG6fxh"
Status: RO
X-Seq: zsh-workers 22415


--NzB8fVQJ5HfG6fxh
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

On Tue, Apr 11, 2006 at 06:33:21PM +0200, Pierre Albarede wrote:
> Debian install-info 1.10.21.  Copyright (C) 1994,1995
[...]
> cp: /usr/local/info/dir/dir: No such file or directory

I checked this version of install-info, and it doesn't implement the
--dir-file=FOO option correctly.  It treats it as an alias for
--info-dir when the former should require trailing /dir that the
latter does not want.

I've fixed the problem by switching over to using the --info-dir option
with the "/dir" suffix removed.  It would appear that the GNU version
and the Debian version both treat this option properly.

Thanks for pointing out the problem!

..wayne..

--NzB8fVQJ5HfG6fxh
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="info.patch"

--- Doc/Makefile.in	20 Mar 2006 11:06:24 -0000	1.31
+++ Doc/Makefile.in	11 Apr 2006 17:38:38 -0000
@@ -289,7 +289,7 @@ install.info: texi
 	    done \
 	); then \
 	    if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \
-	      install-info --dir-file=$(DESTDIR)$(infodir)/dir \
+	      install-info --info-dir=$(DESTDIR)$(infodir) \
 	        $(DESTDIR)$(infodir)/$(tzsh).info; \
 	    else true; fi; \
 	    rm -rf infodir; \

--NzB8fVQJ5HfG6fxh--


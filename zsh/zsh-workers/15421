From zsh-workers-return-15421-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 19 14:33:30 2001
Return-Path: <zsh-workers-return-15421-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14958 invoked from network); 19 Jul 2001 14:33:29 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jul 2001 14:33:29 -0000
Received: (qmail 26771 invoked by alias); 19 Jul 2001 14:33:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15421
Received: (qmail 26760 invoked from network); 19 Jul 2001 14:33:23 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: =?koi8-r?Q?Ra=DFl_N=DF=D3ez_de_Arenas_Coronado?= <dervishd@jazzfree.com>,
   <zsh-workers@sunsite.dk>
Subject: RE: A couple of problems with version 4.0.2
Date: Thu, 19 Jul 2001 18:33:20 +0400
Message-ID: <001c01c1105f$c20835a0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006
In-Reply-To: <E15NDqg-0004Zm-00@DervishD>
Importance: Normal

>
>     Well, I have a couple of suggestions about zsh since I've had
> some little problems installing it. First of all, the file
> Src/zshpaths.h, which is generated by the makefile, doesn't seem to
> be updated when re-running configure with other directory options.

Currently it depends on Makemod that is actually rebuilt only when some
module gets added/removed (it depends on config.modules).

I guess, it should depend on config.status as well. At least, this provides
obvious workaround.

>     The second problem is that I need to adapt zsh to our filesystem,
> and I need to put the dinamic-loadable modules in the directory
> $(prefix)/lib/zsh instead of $(prefix)/lib/zsh/$(VERSION)/zsh,
                                                            ^^^
the last zsh is part of module name, so installation directory is
$prefix/lib/zsh/$VERSION. I am not sure setting it to $prefix/lib would be a
good choice, because modules names may conflict with another SW (currently
all modules are named as zsh/something but we may get foo/bar sometimes).
So, it is better to keep them under common directory. Versioning allows
several versions to coexist.

Why would oyu need to force particular location?

>     The last is just a suggestion: I want to use zsh instead of ash
> in a special linux bootdisk we have at work, but the maintainer of
> that disk has said to me that the editing keybindings in zsh cannot
> be removed and that they occupy a lot. To my knowledge the edition
> facilities of zsh (command-line edition, I mean) are loaded as a
> module and so it can be removed, aren't they?

Strictly speaking, they are autoloaded if zsh runs interactive. But if
corresponding modules do not exist, zsh will run without. What I do not like
is error message:

bor@itsrm2% zsh -f
zsh: failed to load module: zsh/zle

Maybe, we could make it conditional on zsh name? (name it azsh for simple
zsh :-)

I do not know if it possible to put zsh on a floppy. On my system (not a
ix86 and with debugging):

bor@itsrm2% size =zsh
/tools/bin/zsh: 796300 + 58864 + 2525272 = 3380436

Looks like a bit too much for a floppy. May be, static build without all
modules needs a bit less.

-andrej


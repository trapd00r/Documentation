From zsh-users-return-14403-mason-zsh=primenet.com.au@sunsite.dk Thu Sep 17 23:20:39 2009
Return-Path: <zsh-users-return-14403-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21584 invoked from network); 17 Sep 2009 23:20:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.5 required=5.0 tests=BAYES_00,RCVD_NUMERIC_HELO
	autolearn=no version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 17 Sep 2009 23:20:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 15504 invoked from network); 17 Sep 2009 23:20:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Sep 2009 23:20:09 -0000
Received: (qmail 5894 invoked by alias); 17 Sep 2009 23:19:48 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14403
Received: (qmail 5867 invoked from network); 17 Sep 2009 23:19:47 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 17 Sep 2009 23:19:47 -0000
Received: from lo.gmane.org (lo.gmane.org [80.91.229.12])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 1F80E8026E39
	for <zsh-users@sunsite.dk>; Fri, 18 Sep 2009 01:19:37 +0200 (CEST)
Received: from list by lo.gmane.org with local (Exim 4.50)
	id 1MoQGH-0002Cj-2U
	for zsh-users@sunsite.dk; Fri, 18 Sep 2009 01:19:37 +0200
Received: from 209.59.210.144 ([209.59.210.144])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Fri, 18 Sep 2009 01:19:37 +0200
Received: from ljz by 209.59.210.144 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Fri, 18 Sep 2009 01:19:37 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-users@sunsite.dk
From:  Lloyd Zusman <ljz@asfast.com>
Subject:  Testing if there is data on stdin?
Date:  Thu, 17 Sep 2009 19:19:15 -0400
Organization:  Take a hippopotamus to lunch today.
Lines: 29
Message-ID:  <m2ocp9ma6k.fsf@asfast.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
X-Complaints-To: usenet@ger.gmane.org
X-Gmane-NNTP-Posting-Host: 209.59.210.144
User-Agent: Gnus/5.110011 (No Gnus v0.11) Emacs/23.0.60 (darwin)
Cancel-Lock: sha1:xV2y4p78mahY0ldYbpNFmuNpHnw=
Cache-Post-Path: purity-of-essence.net!unknown@nadie.us
X-Cache: nntpcache 3.0.2 (see http://www.nntpcache.com/)
Sender: news <news@ger.gmane.org>
X-Virus-Scanned: ClamAV 0.94.2/9814/Thu Sep 17 19:17:50 2009 on bifrost
X-Virus-Status: Clean

Is there a way in zsh to test whether there is at least one byte of data
waiting to be read from stdin without actually reading that data?

I know I can do a [[ -t 0 ]] to see whether stdin is attached to a
terminal, but that doesn't tell me if there is any data waiting to
be read.

The reason I want to do this is because I have a zsh script which, under
certain circumstances, needs to get its arguments via stdin instead of
from the command line. I'd like to be able to test within the script
whether there is data waiting on stdin, and if so, to read it and use it
to construct the argument list. If there is no data waiting on stdin,
then I just want to get the arguments from the command line.

Also, there is a slight difference in processing logic if I find data in
stdin, and I need to do a little bit of special initialization _before_
I try to read that data ... but only if that data is on stdin waiting to
be read.

Any suggestions as to how I might do this? I couldn't find anything in
the zsh docs, but I could easily have overlooked something.

Thanks in advance.


-- 
 Lloyd Zusman
 ljz@asfast.com
 God bless you.


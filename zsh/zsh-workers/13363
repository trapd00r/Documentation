From zsh-workers-return-13363-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 16 12:17:05 2001
Return-Path: <zsh-workers-return-13363-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24293 invoked from network); 16 Jan 2001 12:17:03 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jan 2001 12:17:03 -0000
Received: (qmail 24241 invoked by alias); 16 Jan 2001 12:16:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13363
Received: (qmail 24229 invoked from network); 16 Jan 2001 12:16:57 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <zsh-workers@sunsite.auc.dk>
Subject: RE: hash completion bug?
Date: Tue, 16 Jan 2001 15:16:53 +0300
Message-ID: <000a01c07fb6$36699b40$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <lzovgrfaely.fsf@migi.aist-nara.ac.jp>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal

>
> % zsh -f
> % typeset -A foo
> % foo[TAB
> cause segmentation fault.
>

Confirmed with current CVS.

(dbx32) where
$b6, line 396 in "/tools/src/zsh/Src/hashtable.c"
scanhashtable(ht = (nilv), sorted = 0, flags1 = 0, flags2 = 2097152), line 396
in "/tools/src/zsh/Src/hashtable.c"
makecomplistflags(cc = 0xcb765d0, s = "", incmd = 1, compadd = 0), line 3752
in "/tools/src/zsh/Src/Zle/compctl.c"
makecomplistlist(cc = 0xcb765d0, s = "", incmd = 1, compadd = 0), line 2570 in
"/tools/src/zsh/Src/Zle/compctl.c"
makecomplistor(cc = 0xcb765d0, s = "", incmd = 1, compadd = 0, sub = 0), line
2536 in "/tools/src/zsh/Src/Zle/compctl.c"
makecomplistcc(cc = 0xcb765d0, s = "", incmd = 1), line 2513 in
"/tools/src/zsh/Src/Zle/compctl.c"
makecomplistglobal(os = "", incmd = 1, lst = 0, flags = 0), line 2411 in
"/tools/src/zsh/Src/Zle/compctl.c"
ccmakehookfn(dummy = 0xc62eaa4, dat = 0x7ffee6b0), line 1829 in
"/tools/src/zsh/Src/Zle/compctl.c"
runhookdef(h = 0xc62eaa4, d = 0x7ffee6b0), line 1835 in
"/tools/src/zsh/Src/module.c"
$b330, line 975 in "/tools/src/zsh/Src/Zle/compcore.c"
makecomplist(s = "", incmd = 1, lst = 0), line 975 in
"/tools/src/zsh/Src/Zle/compcore.c"
do_completion(dummy = 0xc3457ec, dat = 0x7ffee7f4), line 342 in
"/tools/src/zsh/Src/Zle/compcore.c"
runhookdef(h = 0xc3457ec, d = 0x7ffee7f4), line 1835 in
"/tools/src/zsh/Src/module.c"
docompletion(s = "", lst = 0, incmd = 1), line 1729 in
"/tools/src/zsh/Src/Zle/zle_tricky.c"
docomplete(lst = 0), line 774 in "/tools/src/zsh/Src/Zle/zle_tricky.c"
$b398, line 282 in "/tools/src/zsh/Src/Zle/zle_tricky.c"
expandorcomplete(args = 0xc345734), line 282 in
"/tools/src/zsh/Src/Zle/zle_tricky.c"
$b445, line 668 in "/tools/src/zsh/Src/Zle/zle_main.c"
execzlefunc(func = 0xc3416e0, args = 0xc345734), line 668 in
"/tools/src/zsh/Src/Zle/zle_main.c"
zleread(lp = "%m%# ", rp = (nilv), flags = 3), line 576 in
"/tools/src/zsh/Src/Zle/zle_main.c"
inputline(), line 267 in "/tools/src/zsh/Src/input.c"
ingetc(), line 212 in "/tools/src/zsh/Src/input.c"
ihgetc(), line 236 in "/tools/src/zsh/Src/hist.c"
gettok(), line 628 in "/tools/src/zsh/Src/lex.c"
yylex(), line 344 in "/tools/src/zsh/Src/lex.c"
parse_event(), line 425 in "/tools/src/zsh/Src/parse.c"
.init.loop(toplevel = 1, justonce = 0), line 123 in
"/tools/src/zsh/Src/init.c"
zsh_main(argc = 2, argv = 0x7ffeeddc), line 1198 in
"/tools/src/zsh/Src/init.c"
.main.main(argc = 2, argv = 0x7ffeeddc), line 37 in
"/tools/src/zsh/Src/main.c"
__start() at 0x40a164


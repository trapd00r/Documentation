From zsh-users-return-11886-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 29 01:18:23 2007
Return-Path: <zsh-users-return-11886-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 299 invoked from network); 29 Sep 2007 01:17:49 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.2.3
Received: from ns2.primenet.com.au (HELO primenet.com.au) (203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 29 Sep 2007 01:17:49 -0000
Received: (qmail 3602 invoked from network); 28 Sep 2007 20:46:53 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns2.melb.primenet.com.au with SMTP; 28 Sep 2007 20:46:53 -0000
Received-SPF: none (ns2.melb.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 87637 invoked from network); 28 Sep 2007 20:45:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2007 20:45:47 -0000
Received: (qmail 20230 invoked by alias); 28 Sep 2007 20:45:39 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11886
Received: (qmail 20214 invoked from network); 28 Sep 2007 20:45:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Sep 2007 20:45:38 -0000
Received: (qmail 86300 invoked from network); 28 Sep 2007 20:45:38 -0000
Received: from vanunu.ucsc.edu (128.114.150.22)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2007 20:45:33 -0000
Received: from vanunu.ucsc.edu (localhost [127.0.0.1])
	by vanunu.ucsc.edu (Postfix) with SMTP id 3EE262F7A771;
	Fri, 28 Sep 2007 13:45:00 -0700 (PDT)
Date: Fri, 28 Sep 2007 13:44:59 -0700
From: wgscott@chemistry.ucsc.edu
To: vim.unix@gmail.com
Cc: "Pau Amaro-Seoane" <vim.unix@googlemail.com>,
	zsh-users@sunsite.dk
Subject: Re: nohup dies
Message-Id: <20070928134459.5393d050.wgscott@chemistry.ucsc.edu>
In-Reply-To: <30c383e70709281338x1f2609dcsdc4dd7283d387c1c@mail.gmail.com>
References: <30c383e70709281338x1f2609dcsdc4dd7283d387c1c@mail.gmail.com>
X-Mailer: Sylpheed 2.4.6 (GTK+ 2.6.10; powerpc-apple-darwin8.10.0)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Hi Pau:

I've not run into this problem using any version of zsh, so I can't advise, but in general I find it is much more robust to start a screen session, issue the command, and detatch the screen.

You didn't say what your OS is, but OS X and linux come with screen by default, and I think you can install it on anything zsh would run on.

Bill



On Fri, 28 Sep 2007 22:38:48 +0200
"Pau Amaro-Seoane" <vim.unix@googlemail.com> wrote:

     Hi,
     
     I have been using zsh for a while and I like it a lot. Yet, today I
     ran into a snag...
     
     I use a kind of beowulf cluster to run computer simulations and the
     way I have launched them for years has always been
     
     cat ./input | ~pau/executables/NB4_NoPN > diagnostic&
     
     and then I usually shutdown the laptop or close the terminal.
     
     Two years ago I moved to another institute and this has also a
     cluster. Recently I restarted doing the same kind of simulations and
     somehow I had problems with them all the time
     
     I am in a very bad mood... you cannot imagine how wretched I am; I spent _many_
     days trying to find "bugs" in my code and didn't understand at all why the runs
     died after "some minutes" without any output message...
     
     The problem? nohup dies in zsh 4.3.2
     
     Today I closed the ssh session with exit and then exit again after the
     message and got this:
     
     zsh: you have running jobs.
     tuffi1| exit
     zsh: warning: 1 jobs SIGHUPed
     [1]  + 18591 done       nohup cat ./input |
            18592 hangup     ~pau/executables/NB4_NoPN > diagnostic
     
     When I used the cluster in my former institute everything went fine,
     and there they have zsh 4.2.4
     
     So it seems that "deadly" nohups are inherent to the most recent zsh version...
     a "new feature" of the shell, maybe?
     
     I changed the shell to ksh and the simulations (i.e. nohup) are not
     killed when I quit the session...
     
     What's wrong with zsh 4.2.4?
     
     Cheers,
     
     Pau Amaro Seoane
     


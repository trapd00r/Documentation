From zsh-workers-request@euclid.skiles.gatech.edu Fri Feb 14 00:05:41 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 25031 invoked from network); 14 Feb 1997 00:05:40 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 14 Feb 1997 00:05:40 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id TAA01883; Thu, 13 Feb 1997 19:00:10 -0500 (EST)
Resent-Date: Thu, 13 Feb 1997 18:51:52 -0500 (EST)
Message-Id: <199702132353.PAA24151@bebop.clari.net>
To: schaefer@nbn.com
Cc: zsh-users@math.gatech.edu
Subject: Re: How to make APPENDHISTORY useful? 
In-reply-to: schaefer's message of Thu, 13 Feb 1997 14:29:20 -0800.
	     <970213142920.ZM22919@candle.brasslantern.com> 
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Thu, 13 Feb 1997 15:53:43 -0800
From: Wayne Davison <wayne@clari.net>
Resent-Message-ID: <"J5SA43.0.ZO.Naw0p"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/677
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

"Bart Schaefer" writes:
> but once the file gets full you're back to one of
> the states described above.

Not quite.  Since savehistfile() only appends newly entered lines, the
above only occurs if SAVEHIST new lines were entered since starting the
shell.

One simple solution is to have zsh call savehistfile() every N lines when
APPEND_HISTORY is set.  This would intersperse the lines from multiple
shells nicely, and doesn't require you to exit an old shell before its
history can be used in new shells.  It might be nice if the history file
was not rewritten for every auto-append, allowing the file to grow a
while before going to the extra work of truncating it.

..wayne..


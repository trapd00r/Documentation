From zsh-users-return-4306-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 01 09:05:24 2001
Return-Path: <zsh-users-return-4306-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22941 invoked from network); 1 Oct 2001 09:05:23 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Oct 2001 09:05:23 -0000
Received: (qmail 4860 invoked by alias); 1 Oct 2001 09:04:56 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4306
Received: (qmail 4844 invoked from network); 1 Oct 2001 09:04:55 -0000
Date: Mon, 1 Oct 2001 11:04:54 +0200
From: Phil Pennock <Phil.Pennock@globnix.org>
To: zsh-users@sunsite.dk
Subject: Re: get the number of active jobs to show in the prompt?
Message-ID: <20011001110454.A7643@globnix.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <200110010600.f9160iq10821@bang.houseoflove> <200110010828.SAA20292@bruce.csse.monash.edu.au>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-md5;
	protocol="application/pgp-signature"; boundary="+HP7ph2BbKc20aGI"
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <200110010828.SAA20292@bruce.csse.monash.edu.au>; from debbiep@mail.csse.monash.edu.au on Mon, Oct 01, 2001 at 06:28:04PM +1000
X-Disclaimer: Any views expressed in this message, where not explicitly
	attributed otherwise, are mine and mine alone.  Such views
	do not necessarily coincide with those of any organisation
	or company with which I am or have been affiliated.
X-No-Archive: yes


--+HP7ph2BbKc20aGI
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On 2001-10-01 at 18:28 +1000, Deborah Ariel Pickett wrote:
> Looks like you've already got an answer, but there are better ways to do
> this from zsh 3.1.9 onwards.

Ooh, thanks!  Wonder how I missed this when reading zshmodules(1)?
*sighs*

> Insert "zmodload zsh/parameter" in a suitable zsh startup file (such as
> .zshrc) before trying this.

Yep, works beautifully; I now use:
zmodload zsh/parameter
function precmd { [... all the other bits ...]
	psvar[2]=3D$#jobstates; [[ $psvar[2] -eq 0 ]] && psvar[2]=3D()
}
and then in PS1: %(2v:<+%2v>:-)

Let more linenoise^Wzsh beauty.
--=20
Whoever despises the high wisdom of mathematics nourishes himself on delusi=
on
and will never still the sophistic sciences whose only product is an eternal
uproar -- Leonardo da Vinci

--+HP7ph2BbKc20aGI
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.6 (OpenBSD)

iD8DBQE7uDG2fDS04Uzk9lURAinIAJ9q0MFyKfK+H/Wj6QhhYV+OPVdU0wCfTJN5
MPzSdI8m+ABzZu/KZLKkc9s=
=DLYi
-----END PGP SIGNATURE-----

--+HP7ph2BbKc20aGI--


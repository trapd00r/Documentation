From zsh-workers-return-19049-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 09 06:18:43 2003
Return-Path: <zsh-workers-return-19049-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18489 invoked from network); 9 Sep 2003 06:18:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Sep 2003 06:18:42 -0000
Received: (qmail 23644 invoked by alias); 9 Sep 2003 06:18:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19049
Received: (qmail 23082 invoked from network); 9 Sep 2003 06:16:56 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 9 Sep 2003 06:16:56 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [131.246.137.52] by sunsite.dk (MessageWall 1.0.8) with SMTP; 9 Sep 2003 6:16:56 -0000
Received: from mailgate1.uni-kl.de (mailgate1.uni-kl.de [131.246.120.5])
	by uni-kl.de (8.12.8/8.12.8) with ESMTP id h896GtVS019069
	for <zsh-workers@sunsite.dk>; Tue, 9 Sep 2003 08:16:55 +0200 (MET DST)
Received: from hlrwm.rhrk.uni-kl.de (hlrwm.rhrk.uni-kl.de [131.246.91.18])
	by mailgate1.uni-kl.de (8.12.7/8.12.7) with ESMTP id h896Gtj9010433
	for <zsh-workers@sunsite.dk>; Tue, 9 Sep 2003 08:16:55 +0200
Received: by hlrwm.rhrk.uni-kl.de (Postfix, from userid 1001)
	id 1EE597D9E; Tue,  9 Sep 2003 08:16:55 +0200 (CEST)
Message-ID: <XFMail.20030909081655.backes@rhrk.uni-kl.de>
X-Mailer: XFMail 1.5.4 on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 8bit
MIME-Version: 1.0
Date: Tue, 09 Sep 2003 08:16:55 +0200 (CEST)
X-Face: B^`ajbarE`qo`-u#R^.)e]6sO?X)FpoEm\>*T:H~b&S;U/h$2>my}Otw5$+BDxh}t0TGU?>
 O8Bg0/jQW@P"eyp}2UMkA!lMX2QmrZYW\F,OpP{/s{lA5aG'0LRc*>n"HM@#M~r8Ub9yV"0$^i~hKq
 P-d7Vz;y7FPh{XfvuQA]k&X+CDlg"*Y~{x`}U7Q:;l?U8C,K\-GR~>||pI/R+HBWyaCz1Tx]5
Reply-To: Joachim Backes <backes@rhrk.uni-kl.de>
Organization: University of Kaiserslautern,
 Computer Center [Supercomputing division]
Sender: backes@rhrk.uni-kl.de
From: Joachim Backes <backes@rhrk.uni-kl.de>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: zsh-4.0.7 memory fault in IRIX 6.5

Hi,

having problems with zsh-4.0.7 (and earlier) on IRIX-6.5:

if I have an (very old) /etc/zshenv with the contents

        setopt shwordsplit

then zsh dies directly after start with "memory fault". The reason
seems to be the (invalid ??) contents of /etc/zshenv.

I made a system trace of zsh and got the following (the first lines
are omitted) result:

...


   18mS[  3]                 : ioctl(10, TIOCGSID, 0x7ffb7de0) OK
   18mS[  3]                 : getsid(0) = 8340897
   18mS[  3]                 : ioctl(10, TIOCSPGRP, 8971885) OK
   18mS[  3]                 : sigprocmask(SIG_UNBLOCK, [SIGINT SIGQUIT], [<none>]) OK
   19mS[  3]                 : brk(0x100b8000) OK
   19mS[  3]                 : stat("/etc/zshenv.zwc", 0x7ffb7c50) errno = 2 (No such file or directory)
   19mS[  3]                 : stat("/etc/zshenv", 0x7ffb7ce8) OK
   19mS[  3]                 : open("/etc/zshenv", O_RDONLY|O_NOCTTY, 0) = 3
   19mS[  3]                 : fcntl(3, F_DUPFD, 10) = 11
   19mS[  3]                 : close(3) OK
   19mS[  3]                 : fstat(11, 0x7ffb7d10) OK
   19mS[  3]                 : sigaction(SIGINT, {flags=0 handler=0x1006b0d0 mask=[<none>]}, 0) OK
   19mS[  3]                 : fstat(11, 0x7ffb6b10) OK
   19mS[  3]                 : ioctl(11, __OLD_TCGETA, 0x7ffb6ac0) errno = 25 (Inappropriate I/O control opera
tion)
   19mS[  3]                 : read(11, "setopt shwordsplit\n", 4096) = 19
   20mS[  3]                 : sigprocmask(SIG_BLOCK, [SIGCLD], [<none>]) OK
   20mS[  3]                 : received signal SIGSEGV

An empty /etc/zshenv makes no trouble.

Regards


Joachim Backes

--

Joachim Backes <backes@rhrk.uni-kl.de>
Technical University of Kaiserslautern,
Computer Center, High Performance Computing,
D-67653 Kaiserslautern, PO Box 3049, Germany
--------------------------------------------------
Phone: +49-631-205-2438, FAX: +49-631-205-3056
http://hlrwm.rhrk.uni-kl.de/home/staff/backes.html  


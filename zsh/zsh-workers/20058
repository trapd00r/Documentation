From zsh-workers-return-20058-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 16 14:35:15 2004
Return-Path: <zsh-workers-return-20058-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2682 invoked from network); 16 Jun 2004 14:35:14 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 16 Jun 2004 14:35:14 -0000
Received: (qmail 31774 invoked from network); 16 Jun 2004 14:34:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Jun 2004 14:34:50 -0000
Received: (qmail 3464 invoked by alias); 16 Jun 2004 14:34:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20058
Received: (qmail 3452 invoked from network); 16 Jun 2004 14:34:44 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 16 Jun 2004 14:34:41 -0000
Received: (qmail 31445 invoked from network); 16 Jun 2004 14:34:40 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 16 Jun 2004 14:34:39 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-6.tower-36.messagelabs.com!1087396450!7044865
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 9816 invoked from network); 16 Jun 2004 14:34:10 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-6.tower-36.messagelabs.com with SMTP; 16 Jun 2004 14:34:10 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i5GEYAUI026913
	for <zsh-workers@sunsite.dk>; Wed, 16 Jun 2004 15:34:10 +0100
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id EDFDA7970C6A
	for <zsh-workers@sunsite.dk>; Wed, 16 Jun 2004 16:33:25 +0200 (CEST)
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <Pine.LNX.4.44.0406151254190.29762-100000@toltec.zanshin.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <Pine.LNX.4.44.0406151254190.29762-100000@toltec.zanshin.com>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: PATCH: `try' syntax 
Date: Wed, 16 Jun 2004 16:33:25 +0200
Message-ID: <15239.1087396405@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=BAYES_50 autolearn=no 
	version=2.63
X-Spam-Hits: 0.0

Bart wrote:

> Hmm ... wouldn't
> 
> 	local -a +h reswords dis_reswords
> 
> cover all possible cases?  (Hmm, again; no, it seems it does not, because
> either the values aren't restored and/or assigning to these arrays doesn't
> accomplish enable/disable.  Odd, but oh, well.)

It's not odd if you look briefly at how everything in the parameters
module is implemented. When a value is looked up it gets the
information from the internal structure and returns it. Making local
save and restore these internal structures would be fairly messy.
Ideally zsh would store all internal information directly in parameters
so local would work on them automatically. In the long term that'd be a
better thing to aim at than adding lots of local* options.

> On Tue, 15 Jun 2004, Peter Stephenson wrote:

> > As things stand I'm not sure I'm going to have any free time before
> > 2008, but if I do is this worth trying?  (In other words, is it
> > reasonably agreeable to everyone interested?)

I'm agreeable to it.

Oliver


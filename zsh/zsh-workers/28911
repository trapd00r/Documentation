From zsh-workers-return-28911-mason-zsh=primenet.com.au@zsh.org Fri Mar 18 22:05:43 2011
Return-Path: <zsh-workers-return-28911-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25003 invoked by alias); 18 Mar 2011 22:05:42 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28911
Received: (qmail 18822 invoked from network); 18 Mar 2011 22:05:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at now.ath.cx does not designate permitted sender hosts)
X-SENDER-IP: [83.227.16.166]
X-LISTENER: [smtp.bredband.net]
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AgxAAJdtg01T4xCmPGdsb2JhbACYeYx4CwEBAQE3MsQYhWMEjGM
X-IronPort-AV: E=Sophos;i="4.63,207,1299452400"; 
   d="scan'208";a="379303591"
From: Nikolai Weibull <now@bitwi.se>
To: zsh-workers@zsh.org
Cc: Nikolai Weibull <now@bitwi.se>
Subject: [PATCH 2/4] Only show modified files for git-checkout without tree
Date: Fri, 18 Mar 2011 22:35:10 +0100
Message-Id: <1300484112-9392-3-git-send-email-now@bitwi.se>
X-Mailer: git-send-email 1.7.4.1
In-Reply-To: <1300484112-9392-1-git-send-email-now@bitwi.se>
References: <1300484112-9392-1-git-send-email-now@bitwi.se>

Signed-off-by: Nikolai Weibull <now@bitwi.se>
---
 Completion/Unix/Command/_git |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/Completion/Unix/Command/_git b/Completion/Unix/Command/_git
index 3694d4a..8a590be 100644
--- a/Completion/Unix/Command/_git
+++ b/Completion/Unix/Command/_git
@@ -396,7 +396,7 @@ _git-checkout () {
         # TODO: Allow A...B
         local branch_arg='branches::__git_revisions' \
               tree_ish_arg='tree-ishs::__git_tree_ishs' \
-              file_arg='files::__git_cached_files'
+              file_arg='modified-files::__git_modified_files'
 
         if [[ -n ${opt_args[(I)-b|-B|--orphan]} ]]; then
           tree_ish_arg=
@@ -418,7 +418,7 @@ _git-checkout () {
       elif [[ -n $line[1] ]] && __git_is_treeish $line[1]; then
         __git_ignore_line __git_tree_files ${PREFIX:-.} $line[1] && ret=0
       else
-        __git_ignore_line __git_cached_files && ret=0
+        __git_ignore_line __git_modified_files && ret=0
       fi
       ;;
   esac
-- 
1.7.4.1


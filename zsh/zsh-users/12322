From zsh-users-return-12322-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 12 14:10:47 2007
Return-Path: <zsh-users-return-12322-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22235 invoked from network); 12 Dec 2007 14:10:38 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Dec 2007 14:10:38 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 53246 invoked from network); 12 Dec 2007 14:10:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Dec 2007 14:10:15 -0000
Received: (qmail 22513 invoked by alias); 12 Dec 2007 14:09:59 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12322
Received: (qmail 22497 invoked from network); 12 Dec 2007 14:09:59 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Dec 2007 14:09:59 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id 710A18058F51
	for <zsh-users@sunsite.dk>; Wed, 12 Dec 2007 15:07:20 +0100 (CET)
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [85.115.41.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-users@sunsite.dk>; Wed, 12 Dec 2007 15:07:20 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly10g.srv.mailcontrol.com (MailControl) with ESMTP id lBCE5hRH024518
	for <zsh-users@sunsite.dk>; Wed, 12 Dec 2007 14:09:45 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 12 Dec 2007 14:08:50 +0000
Date: Wed, 12 Dec 2007 14:08:50 +0000
From: Peter Stephenson <pws@csr.com>
To: Zsh users list <zsh-users@sunsite.dk>
Subject: Re: 4.3.4-dev-4 and 4.2.6-dev-2 available
Message-ID: <20071212140850.77d7bfd2@news01>
In-Reply-To: <20071212130703.5e6931dc@news01>
References: <22582.1197372038@csr.com>
	<20071212010837.GZ13079@prunille.vinc17.org>
	<20071212130703.5e6931dc@news01>
Organization: CSR
X-Mailer: Claws Mail 3.1.0 (GTK+ 2.10.14; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Dec 2007 14:08:50.0474 (UTC) FILETIME=[852158A0:01C83CC8]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.71.0.120
X-Virus-Scanned: ClamAV using ClamSMTP

On Wed, 12 Dec 2007 13:07:03 +0000
Peter Stephenson <pws@csr.com> wrote:
> Unfortunately,
>   ( -e ) )
> is parsed by GNU test as -e ")" in parentheses.

Aha, four arguments is a special case whereas five isn't:

4 arguments:
     * If $1 is '!', negate the three-argument test of $2, $3, and $4.
     * [XSI] [Option Start] If $1 is '(' and $4 is ')', perform the
       two-argument test of $2 and $3. [Option End]
     * Otherwise, the results are unspecified.

>4 arguments:
    The results are unspecified.

I don't think we've ever claimed to implement the X/Open System Interfaces
Extension, but if it's taking away uncertainty it's good.  I need to look at
these rules; they shouldn't be too hard to add.

The rule for three arguments is similar: we look explicitly for first and
last argument "(" and ")" and don't need to be clever about parentheses.
Beyond that, I'm not sure which is better, but I'm also not sure I care.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From hzoli@cs.elte.hu Sun Jul 28 07:49:15 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id HAA23348 for <mason@werple.mira.net.au>; Sun, 28 Jul 1996 07:49:13 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA26240; Sat, 27 Jul 1996 17:32:05 -0400 (EDT)
Resent-Date: Sat, 27 Jul 1996 17:32:05 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199607272101.XAA00537@hzoli.ppp.cs.elte.hu>
Subject: Re: options shenanigans in pre4
To: A.Main@dcs.warwick.ac.uk (Zefram)
Date: Sat, 27 Jul 1996 23:01:27 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <18307.199607262253@stone.dcs.warwick.ac.uk> from Zefram at "Jul 26, 96 11:53:55 pm"
X-Mailer: ELM [version 2.4ME+ PL17 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"2rdlV3.0.wP6.Lhe-n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1796
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1714
Status: OR

> >+ preceding the set of five substitutions mentioned above.
> >+ is
> >  .SH FILENAME EXPANSION
> 
> Where did that "is" come from?  It's obviously a typo, and should be
> removed.

I just applied your patch and replaced SH_FILE_SUBST with SH_FILE_EXPN.
Either it was already in the patch or I accidently pressed some keys.

> [Doc/zshoptions.man]
> >! \fBSHIN_STDIN\fP (\-\fBs\fP, ksh: \-\fBs\fP)
> >--- 467,473 ----
> >! \fBSHIN_STDIN\fP (\-\fBs\fP)
> 
> {setopt ramble localoptions
> Hmm, I didn't notice that ksh handled this differently from sh.  Maybe
> we *do* need a third set of option letters, though this seems to be the
> only actual incompatibility.  We might want to implement the ksh option
> at some point too.
> }

I would not like that.  I've just checked pdksh which interprets -s as
SH_IN_STDIN unlike ksh93 which sorts the positional parameters.  POSIX does
not requires -s.  It seems that the majority of the shells interpret -s as
shinstdin.  Perhaps the best is to bring it back even if it increases the
risk of misusing it.

> >+ \fBSH_OPTION_LETTERS\fP

> Virtually identical to a patch I was planning to produce after the pre4
> release.  I was going to call it KSH_OPTION_LETTERS, though, because
> the set of options it selects are emulating ksh, not sh.  The other

I'd rather say pdksh.  Neither bash nor ksh93 know about -X and -l, but
both know all of the other sh options in zsh only they interpret -s in a
different way.  pdksh knows both -X and -l but -s behaves as in bash (and
as in the Solaris 2.4 /bin/sh).  This means that the most precise option
name would be PDKSH_OPTION_LETTERS :-) but the next best match is
SH_OPTION_LETTERS if we restore -s as shinstdin.

Zoltan



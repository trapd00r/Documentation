From zsh-workers-request@euclid.skiles.gatech.edu  Wed Sep 18 22:50:04 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id WAA07120 for <mason@primenet.com.au>; Wed, 18 Sep 1996 22:50:01 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA18904; Wed, 18 Sep 1996 08:28:04 -0400 (EDT)
Resent-Date: Wed, 18 Sep 1996 08:28:04 -0400 (EDT)
Message-Id: <199609181226.OAA05942@hydra.ifh.de>
X-Authentication-Warning: hydra.ifh.de: Host pws@localhost didn't use HELO protocol
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: two new bugs 
In-reply-to: "Peter Stephenson"'s message of "Wed, 18 Sep 1996 11:27:42 MET."
             <199609180927.LAA03839@hydra.ifh.de> 
Date: Wed, 18 Sep 1996 14:26:17 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"7Ymaq2.0.Id4.Jh-Fo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2146
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I wrote:
> 2)
> 
> % fn() { if true; then functions fn | less; fi; }
> % fn
> zsh: 14277 done                    functions fn | 
> zsh: 14278 suspended (tty output)  less

There's a race condition here.  This makes it rather nastily system
dependent exactly how it shows up.  I also sometimes get the
right output, but instead of being piped through less it simply ends
up dumped to the terminal, with a status of 1 returned.  These tests
were on IRIX 5.3; with SunOS 5.5 I can't get it to show up at all.

It also means that it's not as new as I'd thought, just the symptoms
show up differently, so it may well have been in 3.0.1-test1 as
distributed.  However, backing out Zoltan's patch for performance,
archive/latest/2064, did not remove it.

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


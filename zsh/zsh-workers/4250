From zsh-workers-request@math.gatech.edu Fri Jul 24 12:43:25 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20232 invoked from network); 24 Jul 1998 12:43:23 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 24 Jul 1998 12:43:23 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id IAA18220;
	Fri, 24 Jul 1998 08:36:52 -0400 (EDT)
Resent-Date: Fri, 24 Jul 1998 08:36:52 -0400 (EDT)
Message-Id: <9807241232.AA38306@ibmth.df.unipi.it>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: PATCH: signames.c doesn't get remade
Date: Fri, 24 Jul 1998 14:32:12 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"HP6nM.0.dS4.a_7kr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4250
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I noticed that the signal names on one system were coming out wrong,
and eventually worked out that signames.c wasn't remade after a new
configure, so it was using the file from a different system.

The simplest thing to do is probably to have signames.c remade when
config.h changes.  The extra time taken is in any case entirely
minimal.  The make system is so complicated already I'm not going to
try anything much more complicated.

*** Src/zsh.mdd.sign	Tue Jun 17 16:27:58 1997
--- Src/zsh.mdd	Fri Jul 24 14:27:28 1998
***************
*** 12,18 ****
  prototypes.h hashtable.h ztype.h"
  
  :<<\Make
! signames.c: signames.awk @SIGNAL_H@
  	$(AWK) -f $(sdir)/signames.awk @SIGNAL_H@ > $@
  
  sigcount.h: signames.c
--- 12,18 ----
  prototypes.h hashtable.h ztype.h"
  
  :<<\Make
! signames.c: signames.awk ../config.h @SIGNAL_H@
  	$(AWK) -f $(sdir)/signames.awk @SIGNAL_H@ > $@
  
  sigcount.h: signames.c


From zsh-workers-return-25118-mason-zsh=primenet.com.au@sunsite.dk Thu May 29 14:48:21 2008
Return-Path: <zsh-workers-return-25118-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23256 invoked from network); 29 May 2008 14:48:10 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 May 2008 14:48:10 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 2136 invoked from network); 29 May 2008 14:48:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 May 2008 14:48:04 -0000
Received: (qmail 3423 invoked by alias); 29 May 2008 14:47:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25118
Received: (qmail 3407 invoked from network); 29 May 2008 14:47:59 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 29 May 2008 14:47:59 -0000
Received: from equator.ru.net (equator.ru.net [194.58.105.39])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 43C6880589A4
	for <zsh-workers@sunsite.dk>; Thu, 29 May 2008 16:47:51 +0200 (CEST)
Received: from localhost ([127.0.0.1])
	by equator.ru.net with esmtpsa (TLS-1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.63)
	(envelope-from <zsh@sergio.spb.ru>)
	id 1K1jPy-0008Or-RB
	for zsh-workers@sunsite.dk; Thu, 29 May 2008 18:47:50 +0400
Message-ID: <483EC216.7020202@sergio.spb.ru>
Date: Thu, 29 May 2008 18:47:50 +0400
From: sergio <zsh@sergio.spb.ru>
User-Agent: Mozilla-Thunderbird 2.0.0.9 (X11/20080110)
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: segmentation fault in menu-select
References: <48299A33.9070002@sergio.spb.ru> <a0600107fc464392dd78f@kba.biglobe.ne.jp>
In-Reply-To: <a0600107fc464392dd78f@kba.biglobe.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 127.0.0.1
X-SA-Exim-Mail-From: zsh@sergio.spb.ru
X-SA-Exim-Scanned: No (on equator.ru.net); SAEximRunCond expanded to false
X-Virus-Scanned: ClamAV 0.91.2/7283/Thu May 29 12:37:22 2008 on bifrost
X-Virus-Status: Clean

Jun T. wrote:
> Has this post been answered in other place?
No.

> At 5:40 PM +0400 08.5.13, sergio wrote:
>> % cat .zshrc
>> autoload -Uz compinit
>> compinit
>> zmodload zsh/complist
> 
> You must "zmodload zsh/complist" before compinit.

Thank you wery much (:

When I was setting up zsh first time I have turned off auto_menu because
    it makes behavior like in bash.
Then I have knew about menu completion, and have decided to turn it on
after second <tab>. I've forgotten about auto_menu so I wrote simple widget:

zle -N my-tab
bindkey '\t' my-tab
my-tab(){
        if [[ $LASTWIDGET == $WIDGET ]]; then
                zle menu-select
        else
                zle expand-or-complete-prefix
        fi
}

And now I have two ways to do this:
1) my widget
2) zstyle ':completion:*' menu select=0
   with default auto_menu

-- 
sergio


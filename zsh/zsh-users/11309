From zsh-users-return-11309-mason-zsh=primenet.com.au@sunsite.dk Sun Mar 18 06:22:33 2007
Return-Path: <zsh-users-return-11309-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18892 invoked from network); 18 Mar 2007 06:22:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Mar 2007 06:22:30 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18057 invoked from network); 18 Mar 2007 06:22:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Mar 2007 06:22:23 -0000
Received: (qmail 12654 invoked by alias); 18 Mar 2007 06:22:15 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11309
Received: (qmail 12645 invoked from network); 18 Mar 2007 06:22:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Mar 2007 06:22:15 -0000
Received: (qmail 16783 invoked from network); 18 Mar 2007 06:22:15 -0000
Received: from atom.smasher.org (69.55.237.145)
  by a.mx.sunsite.dk with SMTP; 18 Mar 2007 06:22:11 -0000
Received: (qmail 49211 invoked by uid 1000); 18 Mar 2007 06:22:09 -0000
Message-ID: <20070318062209.49210.qmail@smasher.org>
cc: phil@suspicious.org, Matthew Riben <matter@logicamachina.com>,
  Ed Moyle <ed@securitycurve.com>, jono@microshaft.org,
  Truman Boyes <truman@suspicious.org>, cyrus@80d.org
Content-Type: TEXT/PLAIN; charset=US-ASCII
Date: Sun, 18 Mar 2007 02:22:04 -0400 (EDT)
From: Atom Smasher <atom@smasher.org>
MIME-Version: 1.0
OpenPGP: id=0xB88D52E4D9F57808; algo=1 (RSA); size=4096; url=http://atom.smasher.org/pgp.txt
Subject: verbose copy
To: WNC Linux User's Group <wnclug@main.nc.us>,
  Clan of the Stout Monkey <stout@stoutmonkey.org>, zsh-users@sunsite.dk
X-POM: The Moon is Waning Crescent (2% of Full)
X-Hashcash: 1:20:0703180622:wnclug@main.nc.us::K9jXHJkz8lvSwD6p:0000000000000000
	0000000000000000000000003ch4
X-Hashcash: 1:20:0703180622:stout@stoutmonkey.org::pL7hTt2DGEjls3iA:000000000000
	0000000000000000000000007n56
X-Hashcash: 1:20:0703180622:zsh-users@sunsite.dk::1WskAhyfq1svERNb:0000000000000
	0000000000000000000000002UcG
X-Hashcash: 1:20:0703180622:phil@suspicious.org::zUSuWTqrxOeJGvKV:00000000000000
	0000000000000000000000009r4W
X-Hashcash: 1:20:0703180622:matter@logicamachina.com::1G2qaeCquAXgcSmr:000000000
	0000000000000000000000001Xb9
X-Hashcash: 1:20:0703180622:ed@securitycurve.com::PcA7+c1mqgtgVqWX:0000000000000
	0000000000000000000000005Bav
X-Hashcash: 1:20:0703180622:jono@microshaft.org::GJiyMkERU0Ecp6LC:00000000000000
	00000000000000000000000048vm
X-Hashcash: 1:20:0703180622:truman@suspicious.org::oMCpCizT1DctX6wY:000000000000
	0000000000000000000000006818
X-Hashcash: 1:20:0703180622:cyrus@80d.org::Skup2JVFuTkdqmxb:00000000000000000000
	0000000000000000000000003zZD

i've seen this tossed around on a few command line oriented mailing lists, 
but i've never never seen a ~good~ solution for a verbose copy... 
something that will show the status of files *while* being copied.

i wanted to see the progress of a >700MB file being copied to a flash 
drive, and figured it out.

here it... this is a single line alias in my .zshrc file:

alias cpv="rsync -poghb --backup-dir=/tmp/rsync -e /dev/null --progress --"

of course it requires rsync to be installed.

this works in zsh, and should work in all derivatives of the bourne 
shells. some shells (csh and derivatives) may need the syntax changed to 
assign an alias.

i now have a "cpv" command that acts as a verbose copy, and it properly 
handles globs.

the options that i used, tweak as needed...
  -p - preserve permissions
  -o - preserve owner
  -g - preserve group
  -h - output in human-readable format
  --progress - display progress
  -b - instead of just overwriting an existing file, save the original
  --backup-dir=/tmp/rsync - move backup copies to "/tmp/rsync"
  -e /dev/null - only work on local files
  -- - everything after this is an argument, even if it looks like an option


-- 
         ...atom

  ________________________
  http://atom.smasher.org/
  762A 3B98 A3C3 96C9 C6B7 582A B88D 52E4 D9F5 7808
  -------------------------------------------------

 	"Anyone who has the power to make you believe absurdities
 	 has the power to make you commit injustices."
 		-- Voltaire



From zsh-workers-return-24296-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 19 09:57:03 2007
Return-Path: <zsh-workers-return-24296-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16835 invoked from network); 19 Dec 2007 09:56:54 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Dec 2007 09:56:54 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 35990 invoked from network); 19 Dec 2007 09:56:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Dec 2007 09:56:47 -0000
Received: (qmail 12685 invoked by alias); 19 Dec 2007 09:56:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24296
Received: (qmail 12671 invoked from network); 19 Dec 2007 09:56:42 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 19 Dec 2007 09:56:42 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id 655188058F54
	for <zsh-workers@sunsite.dk>; Wed, 19 Dec 2007 10:53:30 +0100 (CET)
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [85.115.41.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-workers@sunsite.dk>; Wed, 19 Dec 2007 10:53:29 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly06g.srv.mailcontrol.com (MailControl) with ESMTP id lBJ9u5K4025390
	for <zsh-workers@sunsite.dk>; Wed, 19 Dec 2007 09:56:31 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Dec 2007 09:55:44 +0000
Date: Wed, 19 Dec 2007 09:55:43 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: Segmentation fault while searching backward
Message-ID: <20071219095543.4c9344ab@news01>
In-Reply-To: <slrnfmgr7m.23b.joerg@alea.gnuu.de>
References: <slrnfmgr7m.23b.joerg@alea.gnuu.de>
Organization: CSR
X-Mailer: Claws Mail 3.1.0 (GTK+ 2.10.14; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-OriginalArrivalTime: 19 Dec 2007 09:55:44.0308 (UTC) FILETIME=[525C8F40:01C84225]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.71.0.116
X-Virus-Scanned: ClamAV using ClamSMTP

On Wed, 19 Dec 2007 00:59:34 +0000 (UTC)
J=C3=B6rg Sommer <joerg@alea.gnuu.de> wrote:
> when I search backward through the history with ^R I get a segmentation
> fault:

Unfortunately we're going to need more detail than that to reproduce it.
The crash is because of a large value passed down to zwcwrite().  We're
likely to need to know what line was on screen before (the contents of
the array pointed to by ol in stack level 1 and its length ollen) and
what it's trying to put on screen (the contents of the array nl and its
length nllen).  Note the arrays will be wide character strings.  If it's
reproducible with these two lines we have a chance of fixing it.

--=20
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


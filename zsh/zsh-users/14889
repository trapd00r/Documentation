From zsh-users-return-14889-mason-zsh=primenet.com.au@zsh.org Fri Feb 26 10:03:27 2010
Return-Path: <zsh-users-return-14889-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2952 invoked by alias); 26 Feb 2010 10:03:27 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14889
Received: (qmail 3391 invoked from network); 26 Feb 2010 10:03:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at redfrontdoor.org does not designate permitted sender hosts)
MIME-Version: 1.0
Date: Fri, 26 Feb 2010 10:03:18 +0000
Message-ID: <5169ff11002260203u132cbe9ayc35123d11ceb57d7@mail.gmail.com>
Subject: Globbing inside conditional expression
From: Ben North <ben@redfrontdoor.org>
To: zsh-users@zsh.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Just come across this behaviour of globbing inside a conditional
expressions:

    % mkdir test
    % cd test
    % echo hello > foo.1
    % echo foo.*
    foo.1
    % [[ -s foo.1 ]] && echo yes || echo no
    yes
    % [[ -s $(echo foo.*) ]] && echo yes || echo no
    yes

    #### The following one does not do what I was expecting:
    % [[ -s foo.* ]] && echo yes || echo no
    no

    % echo $ZSH_VERSION
    4.2.6
    % man zshall

    [...]
    CONDITIONAL EXPRESSIONS
           [...]

           -s file
                  true if file exists and has size greater than zero.

           [...]

           Normal shell expansion is performed on the file, string and
           pattern arguments, but the result of each expansion is
           constrained to be a single word, similar to the effect of
           double quotes.  [...]

(I tried with 4.2.7 and got the same results.)

I was expecting 'normal shell expansion' to include globbing, but am I
misunderstanding this?

Thanks for any suggestions,

Ben.


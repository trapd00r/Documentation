From zsh-workers-return-21895-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 21 03:05:26 2005
Return-Path: <zsh-workers-return-21895-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1138 invoked from network); 21 Oct 2005 03:05:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Oct 2005 03:05:23 -0000
Received: (qmail 43578 invoked from network); 21 Oct 2005 03:05:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Oct 2005 03:05:17 -0000
Received: (qmail 5874 invoked by alias); 21 Oct 2005 03:05:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21895
Received: (qmail 5865 invoked from network); 21 Oct 2005 03:05:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Oct 2005 03:05:13 -0000
Received: (qmail 43288 invoked from network); 21 Oct 2005 03:05:13 -0000
Received: from vms046pub.verizon.net (206.46.252.46)
  by a.mx.sunsite.dk with SMTP; 21 Oct 2005 03:05:12 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms046.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0ION00IQQZ4XGIV0@vms046.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 20 Oct 2005 10:02:58 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j9KF2u5S006348	for
 <zsh-workers@sunsite.dk>; Thu, 20 Oct 2005 08:02:57 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j9KF2uJj006347	for zsh-workers@sunsite.dk; Thu,
 20 Oct 2005 08:02:56 -0700
Date: Thu, 20 Oct 2005 15:02:55 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: PATCH: displaying wide characters
In-reply-to: <EXCHANGE03zfSLZZInL00006f40@exchange03.csr.com>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Message-id: <1051020150255.ZM6346@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <200510192031.j9JKVYk7010115@pwslaptop.csr.com>
	<200510192041.j9JKfTJZ010450@pwslaptop.csr.com>
	<237967ef0510191739t103352a9vad735334a790d8b5@mail.gmail.com>
	<EXCHANGE03zfSLZZInL00006f40@exchange03.csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
 "Re: PATCH: displaying wide characters" (Oct 20, 10:39am)
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

On Oct 20, 10:39am, Peter Stephenson wrote:
}
} I think I may have messed up --disable-multibyte, I'll check that...

Looks like an off-by-one error somewhere.

*** /tmp/zsh.ztst.out.4543      Thu Oct 20 08:00:11 2005
--- /tmp/zsh.ztst.tout.4543     Thu Oct 20 08:00:11 2005
***************
*** 1,2 ****
! start ...d at 10 Not truncated ...
! start truncat... Not truncated ...
--- 1,2 ----
! start ...d at 10 Not truncated ..
! start truncat... Not truncated ..
Test ../../zsh-4.0/Test/D01prompt.ztst failed: output differs from expected as
shown above for:
  print -P 'start %10<...<truncated at 10%<< Not truncated%3< ...<Not shown'
  print -P 'start %10>...>truncated at 10%>> Not truncated%3> ...>Not shown'
Was testing: prompt truncation


From zsh-workers-return-15776-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 10 10:59:17 2001
Return-Path: <zsh-workers-return-15776-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26708 invoked from network); 10 Sep 2001 10:59:16 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Sep 2001 10:59:16 -0000
Received: (qmail 7695 invoked by alias); 10 Sep 2001 10:59:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15776
Received: (qmail 7684 invoked from network); 10 Sep 2001 10:59:09 -0000
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Module dependencies issue still open 
In-reply-to: "Borsenkow Andrej"'s message of "Mon, 10 Sep 2001 10:15:20 +0400."
             <000501c139bf$f83febc0$21c9ca95@mow.siemens.ru> 
Date: Mon, 10 Sep 2001 11:58:42 +0100
Message-ID: <24094.1000119522@csr.com>
From: Peter Stephenson <pws@csr.com>

Borsenkow Andrej wrote:
> What was final decision (if any) on module dependencies problem (when
> one external module depends on another one)? There was some discussion,
> but I do not remember any solution was accepted. 

No, indeed.

I still think we need to use RTLD_LAZY properly on systems that support it,
allowing us to hook in required modules from the appropriate module boot
routine.  This can be done without any change of format or introducing
incompatibilities --- except we may need to be more careful with data
symbols which need to be resolved when the module is loaded, and I haven't
investigated how much of a problem this is is.  It's possible there aren't
any inter-module dependencies of this kind (there are already some hooks
for this kind of thing built into the main module).

For the rest, I'm agnostic between burying something in the .so files (bit
hacky) or adding an extra dependency (.zd?) file (bit messy), which seem to
be the major possibilities.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


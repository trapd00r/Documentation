From zsh-users-return-8349-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 12 00:56:30 2005
Return-Path: <zsh-users-return-8349-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24721 invoked from network); 12 Jan 2005 00:56:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Jan 2005 00:56:29 -0000
Received: (qmail 20901 invoked from network); 12 Jan 2005 00:56:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2005 00:56:23 -0000
Received: (qmail 11593 invoked by alias); 12 Jan 2005 00:55:32 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8349
Received: (qmail 11579 invoked from network); 12 Jan 2005 00:55:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Jan 2005 00:55:31 -0000
Received: (qmail 17895 invoked from network); 12 Jan 2005 00:55:31 -0000
Received: from viefep12-int.chello.at (213.46.255.25)
  by a.mx.sunsite.dk with SMTP; 12 Jan 2005 00:55:28 -0000
Received: from Dingo ([213.47.104.218]) by viefep12-int.chello.at
          (InterMail vM.6.01.03.05 201-2131-111-107-20040910) with ESMTP
          id <20050112005525.WMKI7404.viefep12-int.chello.at@Dingo>
          for <zsh-users@sunsite.dk>; Wed, 12 Jan 2005 01:55:25 +0100
From: Christian Taylor <cht@chello.at>
To: "zsh-users" <zsh-users@sunsite.dk>
Subject: Re: Expansions with glob_complete ignore no_case_glob
Date: Wed, 12 Jan 2005 01:53:42 +0100
User-Agent: KMail/1.7.2
References: <200501082341.04828.cht@chello.at> <200501101044.j0AAikYc003765@news01.csr.com>
In-Reply-To: <200501101044.j0AAikYc003765@news01.csr.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200501120153.42038.cht@chello.at>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=RCVD_IN_SORBS autolearn=no 
	version=2.63
X-Spam-Hits: 1.5

Peter Stephenson wrote:
> Christian Taylor wrote:
> > With glob_complete set, the menu-completion of a glob pattern should
> > contain the same matches that would be inserted if glob_complete was not
> > set (except that a '*' is added at the end of the pattern). However, the
> > menu-completion always globs case-sensitive, even if no_case_glob is se=
t.
>
> Yes, this is deliberate for patterns.  As you've spotted, glob_complete
> doesn't do filename generation.  This means NO_CASE_GLOB doesn't apply:
> [...]
> To control case-sensitivity in completion you need to use the more
> sophisticated "match control" feature:
>
> zstyle ':completion:*' matcher-list '' 'm:{a-zA-Z}=3D{A-Za-z}'

I'm sorry, I forgot to mention that a similar line is already included in=20
my .zshrc:
zstyle ':completion:*' matcher-list 'm:{a-zA-Z=E4=F6=FC=C4=D6=DC}=3D{A-Za-z=
=C4=D6=DC=E4=F6=FC}'
This works fine for all normal completions.

Reading my post again, I realize that I should have been more clear on what=
=20
exactly I observed. The thing that suprised me originally is that for=20
instance wildcards apparently cause the pattern to be completed by a=20
mechanism that both ignores NO_CASE_GLOB and the matcher-list configuration=
=2E=20
Here is an example in an empty directory:

% touch AbCd aBcD abcd
% ls abc(.)<TAB>
AbCd aBcD abcd [listed for completion]

As soon as there are wildcards or "^" in the pattern, it becomes case=20
sensitive:

% ls a?c(.)<TAB>
aBcD abcd [listed for completion, instead of all files]
% ls a^k(.)<TAB>
(same)
% ls a*(.)<TAB>
(same)
% ls a*~*cd(.)<TAB>
[aBcD gets inserted, instead of no match]

If I understand the documentation I've read correctly, the matcher-list=20
configuration does not apply here because it is not used if the command lin=
e=20
contains a glob pattern and the GLOB_COMPLETE option is set. It is also not=
=20
used by the _match function, which I suppose handles this completion. Is=20
there an easy way to do case insensitive completion nonetheless?
I realize that I should just read through the whole documentation on the=20
completion system to get an understanding for it, but I hope you can maybe=
=20
direct me to a specific section again to accomplish this.
Thank you either way!

Christian Taylor


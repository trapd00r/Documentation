From k@anna.in-berlin.de Sat Jul  6 22:01:19 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id WAA11540 for <mason@werple.mira.net.au>; Sat, 6 Jul 1996 22:01:08 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id HAA13953; Sat, 6 Jul 1996 07:53:36 -0400 (EDT)
Resent-Date: Sat, 6 Jul 1996 07:53:36 -0400 (EDT)
Date: Sat, 6 Jul 1996 13:52:20 +0200
Message-Id: <199607061152.NAA20190@anna.in-berlin.de>
From: Andreas Koenig <k@anna.in-berlin.de>
To: zsh-workers@math.gatech.edu
Subject: zsh-3.0-pre2 cores on irix 5.3 (?)
Reply-to: andreas.koenig@franz.ww.tu-berlin.de
Resent-Message-ID: <"sAR1h1.0.xP3.wEbtn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1535
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 4145
Status: OR

As I had to rebuild my whole irix 5.3 from both CDROM and backup
tapes, this may be a due to a misconfiguration of my
machine. Nonetheless, recompiling beta19 works, pre2 results in a
core.

Excerpts from the compilation:


zsh configuration
-----------------
zsh version           : 3.0-pre2
host operating system : irix5.3
source code location  : .
compiler              : gcc
compiler flags        :  -Wall -Wno-implicit -Wmissing-prototypes -DDEBUG -g
binary install path   : /usr/local/bin
man page install path : /usr/local/man
info install path     : /usr/local/info



exec.c: In function `execcmd':
exec.c:1318: warning: format argument is not a pointer (arg 3)
exec.c: In function `execrestore':
exec.c:2590: warning: format argument is not a pointer (arg 3)



init.c: In function `loop':
init.c:131: warning: format argument is not a pointer (arg 3)



lex.c: In function `lexsave':
lex.c:85: warning: format argument is not a pointer (arg 3)
lex.c: In function `gettok':
lex.c:516: warning: format argument is not a pointer (arg 3)
lex.c: In function `gettokstr':
lex.c:994: warning: format argument is not a pointer (arg 3)
lex.c: In function `parsestr':
lex.c:1158: warning: format argument is not a pointer (arg 3)
lex.c: In function `parse_subst_string':
lex.c:1203: warning: format argument is not a pointer (arg 3)



signals.c: In function `unqueue_signals':
signals.c:388: warning: format argument is not a pointer (arg 3)
signals.c: In function `handler':
signals.c:444: warning: format argument is not a pointer (arg 3)
signals.c:467: warning: initialization from incompatible pointer type
signals.c:492: warning: assignment from incompatible pointer type



subst.c: In function `paramsubst':
subst.c:669: warning: format argument is not a pointer (arg 3)



text.c: In function `getredirs':
text.c:485: warning: format argument is not a pointer (arg 3)
text.c:490: warning: format argument is not a pointer (arg 3)



zle_tricky.c: In function `doexpansion':
zle_tricky.c:1192: warning: format argument is not a pointer (arg 3)
zle_tricky.c: In function `doexpandhist':
zle_tricky.c:3817: warning: format argument is not a pointer (arg 3)
zle_tricky.c: In function `getcurcmd':
zle_tricky.c:3901: warning: format argument is not a pointer (arg 3)



k@anna:/usr/sources/shells/zsh-3.0-pre2% Src/zsh
zsh: segmentation fault (core dumped)  Src/zsh
k@anna:/usr/sources/shells/zsh-3.0-pre2% gdb Src/zsh core
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.15.1 (mips-sgi-irix5.3), Copyright 1995 Free Software Foundation, Inc...
Core was generated by `zsh'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/lib/libcurses.so...done.
Reading symbols from /usr/lib/libc.so.1...done.
#0  strlen () at strlen.s:15
strlen.s:15: No such file or directory.
(gdb) bt
#0  strlen () at strlen.s:15
#1  0xfabe3bc in _doprnt () at doprnt.c:1588
#2  0xfac7ffc in fprintf () at fprintf.c:45
#3  0x45db7c in loop (toplevel=0) at init.c:131
#4  0x461258 in source (s=0x1003bcf0 "/usr/people/k/.zlogout") at init.c:780
#5  0x42a170 in bin_dot (name=0x1001b31c ".", argv=0x1001b3b8, 
    ops=0x7fffaa68 "", func=0) at builtin.c:4641
#6  0x410f7c in execbuiltin (args=0x1001b314, bn=0x100015f0) at builtin.c:189
#7  0x43b8dc in execcmd (cmd=0x1001b2f4, input=0, output=0, how=2, last1=2)
    at exec.c:1604
#8  0x43622c in execpline2 (pline=0x1001b36c, how=2, input=0, output=0, 
    last1=0) at exec.c:781
#9  0x43516c in execpline (l=0x1001b358, how=2, last1=0) at exec.c:627
#10 0x4349b8 in execlist (list=0x1001b348, dont_change_job=1, exiting=0)
    at exec.c:508
#11 0x4402ec in doshfunc (list=0x10020418, doshargs=0x0, flags=0, 
    noreturnval=1) at exec.c:2420
#12 0x49f1d0 in preprompt () at utils.c:581
#13 0x45d960 in loop (toplevel=1) at init.c:110
#14 0x45d6e8 in main (argc=1, argv=0x7fffaf14) at init.c:77
Current language:  auto; currently asm
(gdb) 




Hope, that helps,
let me know, if you need additional info,
andreas



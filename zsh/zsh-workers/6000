From zsh-workers-return-6000-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 01 19:44:04 1999
Return-Path: <zsh-workers-return-6000-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16993 invoked from network); 1 Apr 1999 19:44:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Apr 1999 19:44:02 -0000
Received: (qmail 4779 invoked by alias); 1 Apr 1999 19:43:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6000
Received: (qmail 4771 invoked from network); 1 Apr 1999 19:43:51 -0000
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: bar='#pat'; ${foo/$bar/...} problem
Date: Thu, 1 Apr 1999 18:04:41 +0400
Message-ID: <002e01be7c48$968d8860$21c9ca95@mowp.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2314.1300
Importance: Normal

It seems to be impossible to specify `#' (and probably `%') as part of the
replaced pattern:

bor@itsrm2:/tools/src/zsh-3.1.5-pws-14%> zsh -f
itsrm2% foo=(xxya xxyb)
itsrm2% bar=('xx' 'zz')
itsrm2% print ${foo/$bar[1]/$bar[2]}
zzya zzyb
itsrm2% bar=('#xx' 'zz')
itsrm2% print ${foo/$bar[1]/$bar[2]}
xxya xxyb
itsrm2% print ${foo/$~bar[1]/$bar[2]}
xxya xxyb
itsrm2% setopt extendedglob
itsrm2% print ${foo/$bar[1]/$bar[2]}
xxya xxyb
itsrm2% print ${foo/$~bar[1]/$bar[2]}
zsh: bad pattern: #xx
itsrm2% bar=('\#xx' 'zz')
itsrm2% print ${foo/$~bar[1]/$bar[2]}
xxya xxyb
itsrm2% print ${foo/$bar[1]/$bar[2]}
xxya xxyb
itsrm2%

Only the frirst one yields the correct result. But I need exactly the
run-time pattern, that should match only at the beginning ...

cheers

/andrej


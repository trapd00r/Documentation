From zsh-workers-return-6486-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 07 08:22:24 1999
Return-Path: <zsh-workers-return-6486-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24909 invoked from network); 7 Jun 1999 08:22:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Jun 1999 08:22:21 -0000
Received: (qmail 109 invoked by alias); 7 Jun 1999 08:22:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6486
Received: (qmail 95 invoked from network); 7 Jun 1999 08:22:07 -0000
Message-Id: <9906070753.AA23487@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Function installation
Date: Mon, 07 Jun 1999 09:53:34 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

I've written a patch for installing the functions from the source
distribution, but as it involves moving files between directories it's not
very convenient to post and instead I'll leave it for pws-21.

Here's what I've done:

* --enable-fndir=directory allows you to specify a function installation
  directory; default is ${datadir}/zsh-fns, almost certainly
  ${prefix}/share/zsh-fns

* The given directory is compiled as the default value for $fpath/$FPATH

* `make install' or `make install.fns' will install all functions from
  under Completion and Functions into that directory, `make uninstall' or
  `make uninstall.fns' will delete them.

* --disable-fndir or --enable-fndir=no turns off both installation of
  functions and the default $fpath/$FPATH

* Functions now contains two subdirectories, Misc and Zftp, where all the
  functions themselves live (parallels Completion, and allows $dir/* for
  installation so as not to have to list all files in the Makefile).

Any views on overwriting behaviour?

- always overwrite existing installed functions

- never overwrite

- compare each file with the installed version, if it differs move the old
  one to $file.old (unconditionally) and install the new one --- slow but
  safer

- something devilishly clever

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


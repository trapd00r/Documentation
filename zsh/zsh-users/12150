From zsh-users-return-12150-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 30 15:29:42 2007
Return-Path: <zsh-users-return-12150-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16736 invoked from network); 30 Oct 2007 15:29:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Oct 2007 15:29:33 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 14052 invoked from network); 30 Oct 2007 15:29:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Oct 2007 15:29:27 -0000
Received: (qmail 23288 invoked by alias); 30 Oct 2007 15:29:17 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12150
Received: (qmail 23269 invoked from network); 30 Oct 2007 15:29:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 30 Oct 2007 15:29:16 -0000
Received: (qmail 12786 invoked from network); 30 Oct 2007 15:29:16 -0000
Received: from phsmgmx9.partners.org (155.52.251.100)
  by a.mx.sunsite.dk with SMTP; 30 Oct 2007 15:29:10 -0000
X-IronPort-AV: E=Sophos;i="4.21,347,1188792000"; 
   d="scan'208";a="58487843"
Received: from phsxcon3.mgh.harvard.edu (HELO PHSXCON3.partners.org) ([132.183.130.41])
  by phsmgmx9.partners.org with ESMTP; 30 Oct 2007 11:29:08 -0400
Received: from PHSXMB8.partners.org ([170.223.201.59]) by PHSXCON3.partners.org with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Oct 2007 11:29:08 -0400
Received: from W0053328.mgh.harvard.edu.partners.org ([132.183.29.121]) by PHSXMB8.partners.org with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 30 Oct 2007 11:29:07 -0400
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-users@sunsite.dk
Subject: Re: Conditional Bug?
References: <87fxzuou1b.fsf@W0053328.mgh.harvard.edu>
	<200710291503.l9TF3Tt9018661@news01.csr.com>
	<87zly1onr2.fsf@W0053328.mgh.harvard.edu>
	<200710291717.l9THHXC2019811@news01.csr.com>
	<87ejfdodxp.fsf@W0053328.mgh.harvard.edu>
	<071029151545.ZM28177@torch.brasslantern.com>
From: jadamson@partners.org (Joel J. Adamson)
Date: Tue, 30 Oct 2007 11:29:06 -0400
In-Reply-To: <071029151545.ZM28177@torch.brasslantern.com> (Bart Schaefer's message of "Mon\, 29 Oct 2007 15\:15\:45 -0700")
Message-ID: <87ve8o7ha5.fsf@W0053328.mgh.harvard.edu>
User-Agent: Gnus/5.11 (Gnus v5.11) Emacs/23.0.0 (gnu/linux)
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Oct 2007 15:29:07.0945 (UTC) FILETIME=[9CCDD590:01C81B09]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit

Bart Schaefer <schaefer@brasslantern.com> writes:

> On Oct 29,  4:37pm, Joel J. Adamson wrote:
> }
> } Okay, I've done some more experimenting (including setting the
> } variables to arrays and other things) and discovered that a big
> } problem is that when the filenames get through to the tar command,
> } they are quoted, and thus the tilde does not expand.
>
> You're being misled.  The trace will show them quoted so that cut-and-
> paste will work, even if they weren't quoted originally.

I see...

>
> What you need is not to remove quoting, but to enable file
>expansion:
>
>     ${~arrayname}
>

The problem was that I was treating the filenames the same in the
initial assignment (from the command line) and in the function's
internal assignment.  What I needed to do was realize that the first
time it's an array, and the second time it's an expansion of an array:

within the function:
    TOBACKUP=($@)

Before invoking the function:    
    TOBACKUP=("$@")    

Thanks for all your help!    
Joel

-- 
Joel J. Adamson
Biostatistician
Pediatric Psychopharmacology Research Unit
Massachusetts General Hospital
Boston, MA  02114
(617) 643-1432
(303) 880-3109


The information transmitted in this electronic communication is intended only for the person or entity to whom it is addressed and may contain confidential and/or privileged material. Any review, retransmission, dissemination or other use of or taking of any action in reliance upon this information by persons or entities other than the intended recipient is prohibited. If you received this information in error, please contact the Compliance HelpLine at 800-856-1983 and properly dispose of this information.


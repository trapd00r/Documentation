From zsh-workers-return-17314-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 11 09:53:27 2002
Return-Path: <zsh-workers-return-17314-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6183 invoked from network); 11 Jun 2002 09:53:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 11 Jun 2002 09:53:22 -0000
Received: (qmail 17941 invoked by alias); 11 Jun 2002 09:53:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17314
Received: (qmail 17913 invoked from network); 11 Jun 2002 09:53:10 -0000
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Possible zsh bug with unique tied vars in 4.0.4? 
In-reply-to: "Steve Simmons"'s message of "Mon, 10 Jun 2002 13:52:56 EDT."
             <20020610175255.GA10947@ans.net> 
Date: Tue, 11 Jun 2002 10:52:42 +0100
Message-ID: <15870.1023789162@csr.com>
From: Peter Stephenson <pws@csr.com>

Steve Simmons wrote:
> The following sequence of commands shows unexpected performance in
> zsh when using tied variables and unique processing.  In brief, if
> you have tied variables FOO and foo and typeset one of them to unique
> (-U), you can use the other to assign non-unique values to the first.
> This is counter-intuitive at best :-), and I can see no use for this
> feature.  The manual page leads one strongly to believe that a single
> variable is created which simply has two names and two presentations;
> the experiment below shows that clearly there are other differences
> as well.

I think `strongly' is an overstatement since the manual page says the
two parameters `may otherwise be manipulated as normal' and indicates
that only the scalar can be exported.  However, it's certainly not
particularly useful that -U works that way.  It's more useful with some
of the other flags where you might want different padding (-L, -R, -Z)
or you might want to hide the value (-H) for just one of the parameters,
or mark just one of them as readonly (-r), even though these are
probably less used features.  The only really good reason for not
changing this is that it makes a mess of the internals to grope around
for the alternative parameter just in the case where they are tied and
just for certain flags.  I expect the documentation could be made more
explicit, though.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


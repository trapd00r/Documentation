From zsh-workers-return-14890-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 13 09:01:28 2001
Return-Path: <zsh-workers-return-14890-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1301 invoked from network); 13 Jun 2001 09:01:27 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Jun 2001 09:01:27 -0000
Received: (qmail 19604 invoked by alias); 13 Jun 2001 09:00:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14890
Received: (qmail 19579 invoked from network); 13 Jun 2001 09:00:58 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Wed, 13 Jun 2001 10:59:50 +0200 (MET DST)
Message-Id: <200106130859.KAA02286@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: check deleted .zwc files
In-Reply-To: <1010613050310.ZM25108@candle.brasslantern.com>

Bart Schaefer wrote:

> On Jun 10,  7:34am, Clint Adams wrote:
> }
> } Perhaps everyone would be happier if the deleted files were only
> } checked if the function could not be found anywhere else.
> 
> That seems like the most reasonable thing.

Yes, I thought the same.

> It doesn't help with items (3) and (4) on my list, though.  Sven, have
> you any thoughts?

For 3. (zwc rewritten in place): I don't see a solution either, but was
thinking about implementing what you suggested (unlinking the file and
chmod()ing it). Should we just do that?

And for 4.: we could `invalidate' the name of an old entry in the list
for the same filename (setting it to the empty string or something). 
But zwcstat() should find the last entry with the same name that was
added to the list because new entries are added in front of it (or am I
missing something?).


All in all I have to admit that I hadn't thought about doing naughty
things like removing or rewriting shared zwc files while they are being
used (I thought that they would be changed only seldom -- which is still
true, I think -- and I thought that for security reasons users would
create their own zwc files and hence could control when they are in use
or not).


Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


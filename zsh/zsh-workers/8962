From zsh-workers-return-8962-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 09 08:08:26 1999
Return-Path: <zsh-workers-return-8962-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2699 invoked from network); 9 Dec 1999 08:08:25 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Dec 1999 08:08:25 -0000
Received: (qmail 14541 invoked by alias); 9 Dec 1999 08:07:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8962
Received: (qmail 14534 invoked from network); 9 Dec 1999 08:07:53 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: PATCH: 3.1.6-pws-10: Initial testing stuff
References: <E11voZC-0001fu-00.1999-12-08-21-24-08@mail6.svr.pol.co.uk>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 09 Dec 1999 17:07:50 +0900
In-Reply-To: Peter Stephenson's message of "Wed, 08 Dec 1999 21:24:30 +0000"
Message-ID: <rsqvh68a65l.fsf@crane.jaist.ac.jp>
Lines: 42
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In `make check', SunOS 5.7 refuses to remove current working directory.

Z(2):akr@is27e1u11% LANG=C make check 
cd Test ; gmake check
gmake[1]: Entering directory `/space/akr/zsh/zsh-main-trunc/Test'
for f in *.ztst; do \
  ../Src/zsh ztst.zsh $f; \
done
cd.ztst: all tests successful.
rm: Cannot remove any directory in the path of the current working directory
/space/akr/zsh/zsh-main-trunc/Test/cdtst.tmp/real
gmake[1]: Leaving directory `/space/akr/zsh/zsh-main-trunc/Test'
Z(2):akr@is27e1u11% 

Index: Test/ztst.zsh
===================================================================
RCS file: /projects/zsh/zsh/Test/ztst.zsh,v
retrieving revision 1.1.1.1
diff -u -r1.1.1.1 ztst.zsh
--- Test/ztst.zsh	1999/12/07 22:42:20	1.1.1.1
+++ Test/ztst.zsh	1999/12/09 07:38:59
@@ -52,6 +52,7 @@
 ZTST_terr=${TMPPREFIX-:/tmp/zsh}.ztst.terr.$$
 
 ZTST_cleanup() {
+  cd $ZTST_testdir
   rm -rf $ZTST_testdir/dummy.tmp $ZTST_testdir/*.tmp \
          $ZTST_in $ZTST_out $ZTST_err $ZTST_tout $ZTST_terr
 }

In article <E11voZC-0001fu-00.1999-12-08-21-24-08@mail6.svr.pol.co.uk>,
  Peter Stephenson <pws@pwstephenson.fsnet.co.uk> writes:

> After checking it in locally, I realised I didn't know a way of diffing
> that against the version before the check in.  Is it necessary to supply a
> tag every time you commit?

I think there is no easy and perfect way to do it.  But `-D' option
may help you as "cvs diff -D'5 minute ago'".  Always I produce diff
before commit or import, if it is needed, though.
-- 
Tanaka Akira


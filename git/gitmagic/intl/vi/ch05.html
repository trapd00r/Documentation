<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Chương&nbsp;5.&nbsp;Bài Học về Lịch Sử</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="ch04.html" title=
  "Chương&nbsp;4.&nbsp;Thủ Thuật Tạo Nhánh">
  <link rel="next" href="ch06.html" title=
  "Chương&nbsp;6.&nbsp;Đa Người Dùng">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href="index.html">Lời nói
          đầu</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_l%E1%BB%9Di_c%E1%BA%A3m_%C6%A1n">Lời cảm
            ơn!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_gi%E1%BA%A5y_ph%C3%A9p_s%E1%BB%AD_d%E1%BB%A5ng">
            Giấy phép sử dụng</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1. Giới
          thiệu</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_c%C3%B4ng_vi%E1%BB%87c_gi%E1%BB%91ng_nh%C6%B0_tr%C3%B2_ch%C6%A1i">
            Công Việc giống như Trò Chơi</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_qu%E1%BA%A3n_l%C3%BD_m%C3%A3_ngu%E1%BB%93n">
            Quản Lý Mã Nguồn</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_h%E1%BB%87_th%E1%BB%91ng_ph%C3%A2n_t%C3%A1n">
            Hệ Thống Phân Tán</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_quan_ni%E1%BB%87m_c%E1%BB%95_h%E1%BB%A7">Quan
            Niệm Cổ Hủ</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_xung_%C4%91%E1%BB%99t_khi_tr%E1%BB%99n">Xung
            Đột Khi Trộn</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Các Thủ
          Thuật Cơ Bản</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_ghi_l%E1%BA%A1i_tr%E1%BA%A1ng_th%C3%A1i">Ghi
            lại Trạng thái</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_th%C3%AAm_x%C3%B3a_%C4%91%E1%BB%95i_t%C3%AAn">
            Thêm, Xóa, Đổi Tên</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_ch%E1%BB%A9c_n%C4%83ng_undo_redo">Chức Năng
            Undo/Redo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_s%E1%BB%B1_quay_l%E1%BA%A1i">Sự quay
            lại</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%E1%BA%A1o_nh%E1%BA%ADt_k%C3%BD_c%C3%A1c_thay_%C4%91%E1%BB%95i">
            Tạo Nhật Ký các thay đổi</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%E1%BA%A3i_v%E1%BB%81_c%C3%A1c_t%E1%BB%87p_tin">
            Tải về các Tệp tin</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_th%E1%BB%AD_nghi%E1%BB%87m">Thử
            Nghiệm</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_xu%E1%BA%A5t_b%E1%BA%A3n">Xuất
            Bản</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%C3%B4i_%C4%91%C3%A3_l%C3%A0m_%C4%91%C6%B0%E1%BB%A3c_g%C3%AC">
            Tôi Đã Làm Được Gì?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_b%C3%A0i_t%E1%BA%ADp">Bài
            Tập</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Nhân
          Bản</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_%C4%91%E1%BB%93ng_b%E1%BB%99_h%C3%B3a_c%C3%A1c_m%C3%A1y_t%C3%ADnh">
            Đồng bộ hóa Các Máy tính</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_qu%E1%BA%A3n_l%C3%BD_theo_c%C3%A1ch_c%C5%A9">
            Quản lý theo cách Cũ</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_m%C3%A3_ngu%E1%BB%93n_ri%C3%AAng_t%C6%B0">Mã
            nguồn riêng tư</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_kho_thu%E1%BA%A7n">Kho
            thuần</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_ng%C6%B0%E1%BB%A3c_v%E1%BB%9Bi_pull">Push
            ngược với pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_r%E1%BA%BD_nh%C3%A1nh_m%E1%BB%99t_d%E1%BB%B1_%C3%A1n">
            Rẽ Nhánh một Dự Án</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_sao_l%C6%B0u_kh%C3%B4ng_gi%E1%BB%9Bi_h%E1%BA%A1n">
            Sao Lưu Không Giới Hạn</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_l%C3%A0m_nhi%E1%BB%81u_vi%E1%BB%87c_c%C3%B9ng_l%C3%BAc">
            Làm nhiều việc cùng lúc</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_song_h%C3%A0nh_c%C3%B9ng_c%C3%A1c_h%E1%BB%87_th%E1%BB%91ng_scm_kh%C3%A1c">
            Song Hành cùng các hệ thống SCM khác</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_t%E1%BA%A1i_sao_t%C3%B4i_s%E1%BB%AD_d%E1%BB%A5ng_git">
            Tại sao Tôi sử dụng Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Thủ Thuật
          Tạo Nhánh</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_n%C3%BAt_%C4%91i%E1%BB%81u_khi%E1%BB%83n">Nút
            Điều Khiển</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_b%E1%BA%A3n_nh%C3%A1p">Bản
            Nháp</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_s%E1%BB%ADa_nhanh">Sửa
            Nhanh</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_tr%E1%BB%99n">Trộn</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_l%C3%A0m_vi%E1%BB%87c_li%C3%AAn_t%E1%BB%A5c">
            Làm Việc Liên Tục</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_c%E1%BA%A3i_t%E1%BB%95_l%E1%BA%A1i_s%E1%BB%B1_pha_tr%E1%BB%99n">
            Cải Tổ Lại Sự Pha Trộn</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_qu%E1%BA%A3n_l%C3%BD_c%C3%A1c_nh%C3%A1nh">Quản
            Lý Các Nhánh</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_nh%C3%A1nh_t%E1%BA%A1m">Nhánh
            Tạm</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_l%C3%A0m_theo_c%C3%A1ch_c%E1%BB%A7a_m%C3%ACnh">
            Làm Theo Cách Của Mình</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Bài Học về
          Lịch Sử</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_d%E1%BB%ABng_l%E1%BA%A1i_s%E1%BB%ADa_ch%E1%BB%AFa">
            Dừng Lại Sửa Chữa</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_v%C3%A0_sau_%C4%91%C3%B3_l%C3%A0_nhi%E1%BB%81u_l%E1%BA%A7n">
            … Và Sau đó là Nhiều Lần</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_thay_%C4%91%E1%BB%95i_ri%C3%AAng_s%E1%BA%AFp_x%E1%BA%BFp_sau">
            Thay Đổi Riêng Sắp Xếp Sau</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_vi%E1%BA%BFt_l%E1%BA%A1i_l%E1%BB%8Bch_s%E1%BB%AD">
            Viết Lại Lịch Sử</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_t%E1%BB%B1_t%E1%BA%A1o_l%E1%BB%8Bch_s%E1%BB%AD">
            Tự Tạo Lịch Sử</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_v%E1%BB%8B_tr%C3%AD_n%C3%A0o_ph%C3%A1t_sinh_l%E1%BB%97i">
            Vị Trí Nào Phát Sinh Lỗi?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_ai_%C4%91%C3%A3_l%C3%A0m_n%C3%B3_sai">Ai Đã
            Làm Nó Sai?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_kinh_nghi%E1%BB%87m_ri%C3%AAng">Kinh Nghiệm
            Riêng</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Đa Người
          Dùng</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_t%C3%B4i_l%C3%A0_ai">Tôi Là
            Ai?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_th%C3%B4ng_qua_ssh_http">Git Thông Qua
            SSH, HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_th%C3%B4ng_qua_m%E1%BB%8Di_th%E1%BB%A9">
            Git Thông Qua Mọi Thứ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_v%C3%A1_s%E1%BB%B1_th%E1%BB%8Bnh_h%C3%A0nh_to%C3%A0n_c%E1%BA%A7u">
            Vá: Sự Thịnh Hành Toàn Cầu</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_r%E1%BA%A5t_ti%E1%BA%BFc_t%C3%B4i_%C4%91%C3%A3_chuy%E1%BB%83n_%C4%91i">
            Rất tiếc! Tôi đã chuyển đi</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_nh%C3%A1nh_tr%C3%AAn_m%E1%BA%A1ng">Nhánh
            Trên Mạng</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%C4%91a_m%C3%A1y_ch%E1%BB%A7">Đa Máy
            chủ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_s%E1%BB%9F_th%C3%ADch_ri%C3%AAng_c%E1%BB%A7a_t%C3%B4i">
            Sở Thích Riêng Của Tôi</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Trở Thành
          Kiện Tướng</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_ph%C3%A1t_h%C3%A0nh_m%C3%A3_ngu%E1%BB%93n">Phát
            hành Mã Nguồn</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ch%E1%BB%89_commit_nh%E1%BB%AFng_g%C3%AC_thay_%C4%91%E1%BB%95i">
            Chỉ Commit Những Gì Thay Đổi</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_l%E1%BA%A7n_commit_n%C3%A0y_nhi%E1%BB%81u_qu%C3%A1">
            Lần commit này Nhiều Quá!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_m%E1%BB%A5c_l%E1%BB%A5c_v%C3%B9ng_tr%E1%BA%A1ng_th%C3%A1i_c%E1%BB%A7a_git">
            Mục Lục: Vùng trạng thái của Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%C4%91%E1%BB%ABng_qu%C3%AAn_head_c%E1%BB%A7a_m%C3%ACnh">
            Đừng Quên HEAD Của Mình</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_s%C4%83n_t%C3%ACm_head">Săn
            tìm-HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_x%C3%A2y_d%E1%BB%B1ng_tr%C3%AAn_git">Xây
            Dựng trên Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_c%E1%BB%A9_phi%C3%AAu_l%C6%B0u">Cứ Phiêu
            Lưu</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ng%C4%83n_ng%E1%BB%ABa_commit_sai">Ngăn
            Ngừa Commit Sai</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Bí Quyết của
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_t%C3%ADnh_%E1%BA%A9n">Tính
            Ẩn</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_to%C3%A0n_v%E1%BA%B9n_d%E1%BB%AF_li%E1%BB%87u">
            Toàn Vẹn Dữ Liệu</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_th%C3%B4ng_minh">Thông Minh</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_m%E1%BB%A5c_l%E1%BB%A5c">Mục
            Lục</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_ngu%E1%BB%93n_g%E1%BB%91c_c%E1%BB%A7a_git">Nguồn
            Gốc của Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_c%C6%A1_s%E1%BB%9F_d%E1%BB%AF_li%E1%BB%87u">
            Đối tượng Cơ Sở Dữ Liệu</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_blob">Đối
            Tượng Blob</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_tree">Đối
            Tượng Tree</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_l%E1%BA%A7n_commit">Lần
            Commit</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_kh%C3%B3_ph%C3%A2n_bi%E1%BB%87t_%C4%91%C6%B0%E1%BB%A3c_s%E1%BB%B1_th%E1%BA%A7n_k%E1%BB%B3">
            Khó Phân Biệt Được sự Thần Kỳ</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch09.html">9. Phụ lục A:
          Hạn chế của Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch09.html#_%C4%91i%E1%BB%83m_y%E1%BA%BFu_sha1">Điểm
            Yếu SHA1</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_c%C3%A1c_t%E1%BB%87p_tin_kh%C3%B4ng_li%C3%AAn_quan">
            Các Tệp tin Không liên quan</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_ai_s%E1%BB%ADa_v%C3%A0_s%E1%BB%ADa_g%C3%AC">
            Ai Sửa và Sửa gì?</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l%E1%BB%8Bch_s%E1%BB%AD_t%E1%BB%87p_tin">Lịch
            Sử Tệp Tin</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_kh%E1%BB%9Fi_t%E1%BA%A1o_b%E1%BA%A3n_sao">Khởi
            tạo Bản Sao</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_c%C3%A1c_d%E1%BB%B1_%C3%A1n_hay_thay_%C4%91%E1%BB%95i">
            Các Dự Án Hay Thay Đổi</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_b%E1%BB%99_%C4%91%E1%BA%BFm">Bộ
            Đếm</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_v%E1%BB%9Bi_th%C6%B0_m%E1%BB%A5c_r%E1%BB%97ng">
            Với Thư Mục Rỗng</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l%E1%BA%A7n_commit_kh%E1%BB%9Fi_t%E1%BA%A1o">
            Lần Commit Khởi tạo</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_giao_di%E1%BB%87n_l%E1%BA%ADp_l%E1%BB%9D">Giao
            diện Lập lờ</a></span></li>
          </ul>
        </li>

        <li><span class="chapter"><a href="ch10.html">10. Phụ lục
        B: Dịch Bản Hướng Dẫn Này</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title=
  "Chương&nbsp;5.&nbsp;Bài Học về Lịch Sử">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_b%C3%A0i_h%E1%BB%8Dc_v%E1%BB%81_l%E1%BB%8Bch_s%E1%BB%AD">
          </a>Chương&nbsp;5.&nbsp;Bài Học về Lịch Sử</h2>
        </div>
      </div>
    </div>

    <p>Một hệ quả tất yếu của đặc tính phân tán của Git là việc
    lịch sử có thể biên soạn lại một cách dễ dàng. Nhưng nếu bạn
    xáo trộn quá khứ, hãy cẩn thận: chỉ biên soạn lại các phần
    trong lịch sử chỉ khi bạn sở hữu nó một mình. Cũng giống như
    việc các quốc gia tranh cãi không kết thúc xem ai là người tận
    tâm hành động nào là tàn ác, nếu một người khác có một bản sao
    mà lịch sử của nó lại khác với cái của bạn, bạn sẽ gặp rắc rối
    ngay khi cần tương tác với họ.</p>

    <p>Một số nhà phát triển phần mềm quả quyết rằng lịch sử không
    thể thay đổi, tất cả mọi thứ. Một số khác lại cho rằng chỉnh
    sửa lại cấu trúc trước khi phát hành nó ra đại chúng. Git chấp
    nhận cả hai quan điểm. Giống như việc nhân bản, tạo nhánh và
    hòa trộn, viết lại lịch sử đơn giản chỉ là một quyền lực mà Git
    trao cho bạn. Bạn có thể làm thế nếu muốn.</p>

    <div class="section" title="Dừng Lại Sửa Chữa">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_d%E1%BB%ABng_l%E1%BA%A1i_s%E1%BB%ADa_ch%E1%BB%AFa"></a>Dừng
            Lại Sửa Chữa</h2>
          </div>
        </div>
      </div>

      <p>Bạn vừa mới commit, nhưng lại ước mình đã gõ những dòng
      chú thích có nội dung khác phải không? Thế thì hãy chạy:</p>
      <pre class="literallayout">
$ git commit --amend
</pre>

      <p>để thay đổi chú thích cuối cùng. Bạn giật mình vì quên
      thêm các tệp tin vào? Chạy lệnh <span class=
      "strong"><strong>git add</strong></span> để thêm nó vào, và
      sau đó lại chạy lệnh ở trên.</p>

      <p>Bạn muốn thêm vài chỉnh sửa vào lần cuối mình đã commit ư?
      Thế thì cứ sửa chúng đi và sau đó chạy lệnh:</p>
      <pre class="literallayout">
$ git commit --amend -a
</pre>
    </div>

    <div class="section" title="… Và Sau đó là Nhiều Lần">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_8230_v%C3%A0_sau_%C4%91%C3%B3_l%C3%A0_nhi%E1%BB%81u_l%E1%BA%A7n">
            </a>… Và Sau đó là Nhiều Lần</h2>
          </div>
        </div>
      </div>

      <p>Giả sử vấn đề trục trặc ở lần commit cách đây mười lần.
      Sau một buổi làm việc dài, bạn đã tạo ra hàng tá các lần
      commit. Nhưng bạn không hoàn toàn hài lòng với cách mà chúng
      được tổ chức, và một số lần commit cần được soạn lại phần mô
      tả. Thế thì hãy gõ:</p>
      <pre class="literallayout">
$ git rebase -i HEAD~10
</pre>

      <p>và 10 lần commit cuối sẽ xuất hiện trong $EDITOR yêu thích
      của bạn. Dưới đây là một đoạn trích ví dụ:</p>
      <pre class="literallayout">
pick 5c6eb73 Added repo.or.cz link
pick a311a64 Reordered analogies in "Work How You Want"
pick 100834f Added push target to Makefile
</pre>

      <p>Lần commit cũ đứng trước lần mới hơn trong danh sách,
      không giống như kết quả khi chạy lệnh <code class=
      "literal">log</code>. Ở đây, 5c6eb73 là lần commit cũ nhất,
      và 100834f là mới nhất. Thế thì:</p>

      <div class="itemizedlist">
        <ul class="itemizedlist">
          <li class="listitem">Xóa bỏ các lần commit bằng cách xóa
          các dòng tương ứng. Giống như lệnh revert, nhưng không
          ghi biên bản: nó sẽ coi như là lần commit đó chưa từng
          bao giờ tồn tại.</li>

          <li class="listitem">Đặt lại thứ tự các lần commit bằng
          cách thay đổi thứ tự các dòng.</li>

          <li class="listitem">
            <p class="simpara">Thay thế <code class=
            "literal">pick</code> bằng:</p>

            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem"><code class=
                "literal">edit</code> để đánh dấu lần commit đó là
                dành cho việc tu bổ.</li>

                <li class="listitem"><code class=
                "literal">reword</code> để thay đổi phần chú
                giải.</li>

                <li class="listitem"><code class=
                "literal">squash</code> để hòa trộn với lần commit
                trước.</li>

                <li class="listitem"><code class=
                "literal">fixup</code> để hòa trộn với lần commit
                trước và bỏ qua việc ghi lại phần chú giải.</li>
              </ul>
            </div>
          </li>
        </ul>
      </div>

      <p>Ví dụ, chúng ta chẳng hạn thay thế <code class=
      "literal">pick</code> ở dòng thứ hai bằng <code class=
      "literal">squash</code>:</p>
      <pre class="literallayout">
pick 5c6eb73 Added repo.or.cz link
squash a311a64 Reordered analogies in "Work How You Want"
pick 100834f Added push target to Makefile
</pre>

      <p>Sau đó chúng ta ghi lại thay đổi và thoát ra. Git trộn lần
      a311a64 vào 5c6eb73. Vì vậy <span class=
      "strong"><strong>squash</strong></span> trộn với lần kế trước
      nó: có thể nghĩ đây là quá trình “nén dữ liệu”.</p>

      <p>Hơn thế nữa, Git sau đó tổ hợp nhật ký của chúng và hiện
      tại và chỉnh sửa lại. Lệnh <span class=
      "strong"><strong>fixup</strong></span> bỏ qua bước này; việc
      sửa nhật ký đơn giản là bỏ qua.</p>

      <p>Nếu bạn đánh dấu một lần commit bằng <span class=
      "strong"><strong>edit</strong></span>, Git đưa bạn trở lại
      quá khứ, tới lần commit lâu nhất đó. Bạn có thể tu bổ một lần
      commit cũ như đã mô tả ở phần trên, và thậm chí tạo ra các
      lần commit mới ở chỗ này. Một khi bạn đã hài lòng với việc
      “retcon”, hãy chạy <span class="emphasis"><em>cỗ máy thời
      gian</em></span> bằng cách chạy lệnh:</p>
      <pre class="literallayout">
$ git rebase --continue
</pre>

      <p>Git sửa commits cho tới <span class=
      "strong"><strong>edit</strong></span> kế tiếp, hoặc tới hiện
      tại nếu không còn việc gì cần phải làm.</p>

      <p>Bạn còn có thể bãi bỏ việc rebase bằng lệnh:</p>
      <pre class="literallayout">
$ git rebase --abort
</pre>

      <p>Do vậy cứ commit thoải mái và thường xuyên bởi vì bạn có
      thể dọn dẹp cho gọn gàng sau này bằng lệnh rebase.</p>
    </div>

    <div class="section" title="Thay Đổi Riêng Sắp Xếp Sau">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_thay_%C4%91%E1%BB%95i_ri%C3%AAng_s%E1%BA%AFp_x%E1%BA%BFp_sau">
            </a>Thay Đổi Riêng Sắp Xếp Sau</h2>
          </div>
        </div>
      </div>

      <p>Bạn đang làm việc trên một dự án đang hoạt động. Bạn đã
      tạo ra một số lần commit tại máy tính của mình, và sau đó bạn
      đồng bộ hóa với cây chính thức bằng cách hòa trộn. Chu kỳ này
      tự lặp chính nó một số lần trước khi bạn thực sự push tới cây
      trên máy chủ trung tâm.</p>

      <p>Nhưng hiện tại lịch sử bản sao Git trên máy tính của bạn
      là một mớ hỗn độn của những lần thay đổi trên máy tính riêng
      và máy chính thức. Bạn muốn thấy tất cả các thay đôi của
      riêng mình trong một đoạn liên tục không ngắt quãng, và sau
      tất cả các thay đổi từ văn phòng.</p>

      <p>Đây chính là công việc dành cho lệnh <span class=
      "strong"><strong>git rebase</strong></span> đã được miêu tả ở
      trên. Trong nhiều trường hợp bạn có thể sử dụng cờ
      <span class="strong"><strong>--onto</strong></span> và tránh
      xa sự tương tác với các máy tính khác.</p>

      <p>Xem thêm trong <span class="strong"><strong>git help
      rebase</strong></span> để thấy được chi tiết các ví dụ dành
      cho lệnh đáng kinh ngạc này. Bạn có thể chia cắt các lần
      commit. Bạn còn có thể xắp xếp lại các nhánh của một cấu trúc
      cây.</p>

      <p>Hãy cẩn thận: rebase là một lệnh mạnh mẽ. Với những lần
      rebases phức tạp, trước hết hãy tạo ra một bản sao lưu dự
      phòng bằng lệnh <span class="strong"><strong>git
      clone</strong></span>.</p>
    </div>

    <div class="section" title="Viết Lại Lịch Sử">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_vi%E1%BA%BFt_l%E1%BA%A1i_l%E1%BB%8Bch_s%E1%BB%AD"></a>Viết
            Lại Lịch Sử</h2>
          </div>
        </div>
      </div>

      <p>Thỉnh thoảng, bạn muốn việc quản lý mã nguồn giống việc
      người ta sơn vẽ chân dung một con người, tẩy xóa chúng từ
      lịch sử như theo ý của Stalinesque. Ví dụ, giả sử chúng ta có
      ý định phát hành dự án, nhưng lại liên đới đến một tệp tin mà
      nó phải được giữ bí mật vì lý do nào đó. Chẳng hạn như tôi đã
      quên khi ghi lại số thẻ tín dụng vào trong một tệp tin văn
      bản và ngẫu nhiên nó được thêm vào trong dự án. Việc xóa tệp
      tin này là chưa đủ, bởi vì ta có thể đọc nó từ lần commit cũ.
      Chúng ta phải gỡ bỏ tệp tin này từ tất cả các lần đã
      commit:</p>
      <pre class="literallayout">
$ git filter-branch --tree-filter 'rm top/secret/file' HEAD
</pre>

      <p>Xem <span class="strong"><strong>git help
      filter-branch</strong></span>, nội dung của nó sẽ thảo luận
      về ví dụ này và đưa ra một cách thức nhanh hơn. Đại thể, lệnh
      <span class="strong"><strong>filter-branch</strong></span>
      giúp bạn thay đổi cả một chương lớn của lịch sử chỉ chỉ bằng
      một lệnh đơn.</p>

      <p>Sau này, thư mục <code class=
      "literal">.git/refs/original</code> mô tả trạng thái của công
      việc trước khi thực hiện. Kiểm tra lệnh filter-branch đã làm
      những thứ bạn muốn chưa, sau đó xóa thư mục này đi nếu bạn
      muốn chạy lệnh filter-branch lần nữa.</p>

      <p>Cuối cùng, thay thế bản sao của dự án của bạn bằng phiên
      bản bạn đã sửa lại nếu bạn muốn tương thích với chúng sau
      này.</p>
    </div>

    <div class="section" title="Tự Tạo Lịch Sử">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_t%E1%BB%B1_t%E1%BA%A1o_l%E1%BB%8Bch_s%E1%BB%AD"></a>Tự
            Tạo Lịch Sử</h2>
          </div>
        </div>
      </div>

      <p><a name="makinghistory" id="makinghistory"></a>Bạn muốn
      chuyển đổi dự án của mình sang sử dụng Git? Nếu nó được quản
      lý bởi một hệ thống nổi tiếng hơn, thế thì nếu may mắn sẽ có
      người nào đó đã viết sẵn một đoạn kịch bản để xuất toàn bộ
      lịch sử ra thành Git.</p>

      <p>Nếu không, thì nên xem xét đến việc sử dụng lệnh
      <span class="strong"><strong>git fast-import</strong></span>,
      lệnh này đọc văn bản đầu vào ở một định dạng riêng để mà tạo
      ra một lịch sử cho Git từ ban đầu. Thông thường một script sử
      dụng lệnh này là một nhóm lệnh tổ hợp với nhau và chỉ chạy
      một lần, di chuyển một dự án chỉ bằng một lệnh đơn.</p>

      <p>Dưới đây là một ví dụ, dán danh sách theo sau đâu vào một
      tệp tin tạm thời nào đó, chẳng hạn như là <code class=
      "literal">/tmp/history</code>:</p>
      <pre class="screen">
commit refs/heads/master
committer Alice &lt;alice@example.com&gt; Thu, 01 Jan 1970 00:00:00 +0000
data &lt;&lt;EOT
Initial commit.
EOT

M 100644 inline hello.c
data &lt;&lt;EOT
#include &lt;stdio.h&gt;

int main() {
  printf("Hello, world!\n");
  return 0;
}
EOT


commit refs/heads/master
committer Bob &lt;bob@example.com&gt; Tue, 14 Mar 2000 01:59:26 -0800
data &lt;&lt;EOT
Replace printf() with write().
EOT

M 100644 inline hello.c
data &lt;&lt;EOT
#include &lt;unistd.h&gt;

int main() {
  write(1, "Hello, world!\n", 14);
  return 0;
}
EOT
</pre>

      <p>Thế thì tạo một kho Git từ thư mục chứa các tệp tin tạm
      thời này bằng cách gõ:</p>
      <pre class="literallayout">
$ mkdir project; cd project; git init
$ git fast-import --date-format=rfc2822 &lt; /tmp/history
</pre>

      <p>Bạn có thể checkout phiên bản cuối của dự án với:</p>
      <pre class="literallayout">
$ git checkout master .
</pre>

      <p>Lệnh <span class="strong"><strong>git
      fast-export</strong></span> chuyển đổi bất kỳ một kho chứa
      nào thành định dạng phù hợp với lệnh <span class=
      "strong"><strong>git fast-import</strong></span>, và bạn có
      thể nghiên cứu nó để tạo riêng cho mình một chương trình
      xuất, và cũng làm như thế để tạo thành kho chuyên chở ở định
      dạng con người có thể đọc được. Thực vậy, những lệnh này có
      thể gửi một kho chứa ở dạng văn bản thông qua một kênh chỉ
      cho phép văn bản truyền đi.</p>
    </div>

    <div class="section" title="Vị Trí Nào Phát Sinh Lỗi?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_v%E1%BB%8B_tr%C3%AD_n%C3%A0o_ph%C3%A1t_sinh_l%E1%BB%97i">
            </a>Vị Trí Nào Phát Sinh Lỗi?</h2>
          </div>
        </div>
      </div>

      <p>Bạn vừa mới phát hiện ra một đặc tính không hoạt động
      trong chương trình mà bạn chắc chắn là nó đã hoạt động vài
      tháng trước. Tệ quá! Lỗi bắt đầu từ chỗ nào nhỉ? Nếu như chỉ
      có mình bạn kiểm tra cũng như phát triển đặc tính này.</p>

      <p>Lúc này thì đã quá muộn rồi. Tuy nhiên, chỉ cần bạn commit
      thường xuyên, Git có thể xác định vị trí của trục trặc:</p>
      <pre class="literallayout">
$ git bisect start
$ git bisect bad HEAD
$ git bisect good 1b6d
</pre>

      <p>Git checks out một trạng thái nằm giữa chúng. Kiểm tra đặc
      tính kỹ thuật, và nếu nó vẫn hỏng:</p>
      <pre class="literallayout">
$ git bisect bad
</pre>

      <p>Nếu không thì thay "bad" bằng "good". Git sẽ chuyên chở
      bạn qua lại nửa bước giữa hai trạng thái là phiên bản "tốt"
      và "xấu", thu hẹp khả năng lại. Sau khi lặp đi lặp lại một số
      lần, việc tìm kiếm nhị phân này sẽ dẫn bạn đến lần commit mà
      nó làm nguyên nhân dẫn đễ hỏng hóc. Một khi bạn đã hoàn tất
      việc điều tra, trở lại trạng thái nguyên bản của bạn bằng
      cách gõ:</p>
      <pre class="literallayout">
$ git bisect reset
</pre>

      <p>Thay vì thử nghiệm mọi thay đổi một cách thủ công, hãy tự
      động hóa sự tìm kiếm này bằng cách chạy:</p>
      <pre class="literallayout">
$ git bisect run my_script
</pre>

      <p>Git sử dụng giá trị trả về của lệnh đã cho, thông thường
      là từ các đoạn kịch bản, để quyết định là lệnh đã thực hiện
      tốt hay không: lệnh sẽ trả về giá trị 0 khi tốt, 125 khi sự
      thay đổi bị bỏ qua, và bất kỳ giá trị nào khác nằm giữa 1 và
      127 nếu gặp lỗi. Một giá trị âm sẽ bãi bỏ lệnh bisect.</p>

      <p>Bạn có thể làm nhiều hơn thế: trang trợ giúp giảng giải
      cho bạn làm thế nào để hiểu được lệnh bisect làm việc như thế
      nào, xem xét hay xem lại nhật ký lệnh bisect, và loại trừ các
      thay đổi ngớ ngẩn để tăng tốc độ tìm kiếm.</p>
    </div>

    <div class="section" title="Ai Đã Làm Nó Sai?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_ai_%C4%91%C3%A3_l%C3%A0m_n%C3%B3_sai"></a>Ai Đã Làm
            Nó Sai?</h2>
          </div>
        </div>
      </div>

      <p>Giống như các hệ thống quản lý mã nguồn khác, Git cũng có
      lệnh blame:</p>
      <pre class="literallayout">
$ git blame bug.c
</pre>

      <p>lệnh này chú thích tất cả các dòng có trong tệp tin được
      chỉ ra cho thấy ai là người cuối cùng sửa nó, và là khi nào.
      Không giống các hệ thống quản lý mã nguồn khác, hành động này
      hoạt động không cần có mạng, việc đọc chỉ đơn thuần từ ổ đĩa
      của máy tính cá nhân.</p>
    </div>

    <div class="section" title="Kinh Nghiệm Riêng">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_kinh_nghi%E1%BB%87m_ri%C3%AAng"></a>Kinh Nghiệm
            Riêng</h2>
          </div>
        </div>
      </div>

      <p>Trong một hệ thống quản lý mã nguồn tập trung, thay đổi
      lịch sử là một việc làm khó khăn, và chỉ làm được thế nếu đó
      là người quản trị. Việc nhân bản, tạo nhánh và trộn không thể
      thiếu việc truyền thông qua mạng. Cũng như thế với các tác vụ
      cơ bản khác như là duyệt lịch sử, hay là commit một thay đổi.
      Trong một số hệ thống khác, người dùng yêu cầu có kết nối
      mạng chỉ để xem các thay đổi của họ hay mở một tệp tin để
      biên tập.</p>

      <p>Hệ thống tập trung không cho phép làm việc mà không có
      mạng, và đòi hỏi cơ sở hạ tầng mạng máy tính đắt đỏ tốn kém,
      đặc biệt là khi số nhà phát triển phần mềm tăng lên. Điều
      quan trọng, tất cả mọi tác vụ sẽ chậm hơn ở mức độ nào đó,
      thường thường những người sử dụng sẽ lảng tránh việc sử dụng
      các lệnh cao cấp trừ phi nó thực sự cần thiết. Trừ những
      trường hợp đặc biệt là các lệnh cơ bản. Khi những người dùng
      phải chạy các lệnh chạy chậm, hiệu suất bị giảm bởi vì nó làm
      gián đoạn công việc của cả một dây truyền.</p>

      <p>Tôi trực tiếp đã trải qua những hiện tượng đó. Git là hệ
      thống quản lý mã nguồn đầu tiên tôi sử dụng. Tôi nhanh chóng
      làm quen với nó, bị quyến rũ bởi những đặc tính kỹ thuật mà
      nó đã cung cấp. Tôi đơn giản cho rằng các hệ thống khác thì
      cũng tương tự: việc chọn lựa một hệ thống quản lý mã nguồn
      thì cũng chẳng khác việc chọn một trình biên soạn hay một
      trình duyệt web.</p>

      <p>Tôi sẽ sốc nếu như sau này bị bắt buộc sử dụng hệ thống
      quản lý mã nguồn tập trung. Một kết nối Internet chậm chạp
      cũng chẳng phải là vấn đề lớn đối với Git, nhưng nó sẽ làm
      cho các nhà phát triển phần mềm không thể chịu nổi khi nó cần
      sự tin cậy như ổ đĩa nội bộ. Thêm nữa, tôi đã gặp một số mắc
      mớ với một số lệnh, mà chính nó đã ngăn cản tôi làm việc một
      cách trôi chảy.</p>

      <p>Khi tôi phải chạy những lệnh cần nhiều thời gian, việc làm
      ngắt quãng việc suy nghĩ sẽ gây nên thiệt hại rất to lớn.
      Trong khi chờ cho việc truyền thông với máy chủ hoàn tất, tôi
      sẽ phải làm một vài thứ gì đó khác để lấp chỗ trống, chẳng
      hạn như lấy thư điện tử hay viết tài liệu. Sau một khoảng
      thời gian tôi quay trở lại nhiệm vụ chính của mình, lệnh đã
      hoàn tất từ lâu rồi, và tôi phải lãng phí thêm nhiều thời
      gian nữa để nhớ lại xem mình đang làm gì. Con người thường dở
      khi phải thay đổi mạch văn.</p>

      <p>Ở đây còn có một hậu quả rất đáng quan tâm nữa: đoán trước
      được việc tắc nghẽn của mạng máy tính, nhiều cá nhân riêng lẻ
      có thể chiếm dụng nhiều lưu lượng mạng hơn cần thiết trên các
      tác vụ khác nhau để cố gắng giảm thiểu sự chậm trễ có thể xảy
      ra trong tương lai. Hậu quả cuối cùng là sự quá tải quá mức,
      việc vô tình ủng hộ việc tiêu dùng cá nhân như thế làm đốt
      cháy nhiều lưu lượng mạng hơn và sau đó nó làm cho việc tắc
      nghẽn càng lúc càng trở nên tồi tệ hơn.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

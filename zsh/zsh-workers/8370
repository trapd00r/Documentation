From zsh-workers-return-8370-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Oct 22 07:58:39 1999
Return-Path: <zsh-workers-return-8370-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28440 invoked from network); 22 Oct 1999 07:58:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Oct 1999 07:58:38 -0000
Received: (qmail 29417 invoked by alias); 22 Oct 1999 07:58:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8370
Received: (qmail 29409 invoked from network); 22 Oct 1999 07:58:31 -0000
Date: Fri, 22 Oct 1999 16:58:25 +0900 (JST)
Message-Id: <199910220758.QAA09183@kidrd130.kobe.hp.com>
From: Tatsuo Furukawa <tatsuo@kobe.hp.com>
To: zsh-workers@sunsite.auc.dk
Subject: zsh for root


Hello, zsh developers.

I am using HP-UX 10.20.  I want to make "zsh for root".  To do this, I
must make zsh with static link.  But HP-UX's setlocale() depends
/usr/lib/libdld.sl, so I can't.

I think that if zsh doesn't use setlocale(), I can build static linked
zsh.  To do this, I added following to zsh.h:

--- zsh.h.orig  Fri Oct 22 16:36:11 1999
+++ zsh.h       Fri Oct 22 16:36:14 1999
@@ -1414,6 +1414,8 @@
 /* Shared header files */
 /***********************/
 
+#undef LC_ALL
+
 #include "version.h"
 #include "signals.h"
 #include "globals.h"

Finally, I got static linked zsh.

Then, I have a question.  Is my local change is OK?  I am Japanese, so
I set LC_* to ja_JP.SJIS.  But as root, I think that root does'nt have
to set locale.  So, I think this does't cause any problem.

But I know that changing root's shell may cause serious problem.  So I
want to know more information.

-- 
---------------------------------------------------------------
[(hp)]  KID R/D  Engeneering Productivity
        Tatsuo Furukawa ( Dragon )    tatsuo@kobe.hp.com


From zsh-workers-return-21654-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 17 19:17:05 2005
Return-Path: <zsh-workers-return-21654-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 340 invoked from network); 17 Aug 2005 19:17:03 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Aug 2005 19:17:03 -0000
Received: (qmail 30475 invoked from network); 17 Aug 2005 19:16:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2005 19:16:56 -0000
Received: (qmail 18944 invoked by alias); 17 Aug 2005 19:16:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21654
Received: (qmail 18935 invoked from network); 17 Aug 2005 19:16:52 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Aug 2005 19:16:52 -0000
Received: (qmail 30180 invoked from network); 17 Aug 2005 19:16:52 -0000
Received: from dsl3-63-249-88-2.cruzio.com (HELO dot.blorf.net) (63.249.88.2)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2005 19:16:47 -0000
Received: by dot.blorf.net (Postfix, from userid 1000)
	id D34C8A5B; Wed, 17 Aug 2005 12:16:46 -0700 (PDT)
Date: Wed, 17 Aug 2005 12:16:46 -0700
From: Wayne Davison <wayned@users.sourceforge.net>
To: acs@alumni.princeton.edu
Cc: zsh-workers@sunsite.dk
Subject: Re: SunOS build failures for the last 2 days
Message-ID: <20050817191646.GA25280@blorf.net>
References: <20a80721050817080831aad306@mail.gmail.com> <20050817171529.GB21995@blorf.net> <20a8072105081711525ba950a7@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="J2SCkAp4GZ/dPZZf"
Content-Disposition: inline
In-Reply-To: <20a8072105081711525ba950a7@mail.gmail.com>
User-Agent: Mutt/1.5.9i
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4


--J2SCkAp4GZ/dPZZf
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

On Wed, Aug 17, 2005 at 02:52:54PM -0400, Vin Shelton wrote:
> This prints 'No'.

OK.  I also note that the ZLE_UNICODE_SUPPORT define is not defined in
your config.h, which is as it should be for a "No" case.  So, I just
forced multibyte off for my system and I note that those prototypes
are still in the utils.epro file.  Ahh, the #ifdef lines are not
properly marked as needing to be copied into the utils.epro file.
Attached is a patch that I'm about to check in.

..wayne..

--J2SCkAp4GZ/dPZZf
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="ifdef.patch"

--- Src/string.c	15 Aug 2005 17:20:29 -0000	1.6
+++ Src/string.c	17 Aug 2005 19:11:55 -0000
@@ -54,6 +54,7 @@ ztrdup(const char *s)
     return t;
 }
 
+/**/
 #ifdef ZLE_UNICODE_SUPPORT
 /**/
 mod_export wchar_t *
@@ -67,6 +68,7 @@ wcs_ztrdup(const wchar_t *s)
     wcscpy(t, s);
     return t;
 }
+/**/
 #endif /* ZLE_UNICODE_SUPPORT */
 
 
--- Src/utils.c	15 Aug 2005 17:20:29 -0000	1.87
+++ Src/utils.c	17 Aug 2005 19:11:55 -0000
@@ -243,6 +243,7 @@ nicechar(int c)
     return buf;
 }
 
+/**/
 #ifdef ZLE_UNICODE_SUPPORT
 /**/
 mod_export wchar_t *
@@ -280,6 +281,7 @@ wcs_nicechar(wint_t c)
     *s = 0;
     return buf;
 }
+/**/
 #endif /* ZLE_UNICODE_SUPPORT */
 
 
@@ -2493,6 +2495,7 @@ zarrdup(char **s)
     return y;
 }
 
+/**/
 #ifdef ZLE_UNICODE_SUPPORT
 /**/
 mod_export wchar_t **
@@ -2506,6 +2509,7 @@ wcs_zarrdup(wchar_t **s)
 
     return y;
 }
+/**/
 #endif /* ZLE_UNICODE_SUPPORT */
 
 /**/
@@ -3106,6 +3110,7 @@ zputs(char const *s, FILE *stream)
     return 0;
 }
 
+/**/
 #ifdef ZLE_UNICODE_SUPPORT
 /**/
 mod_export int
@@ -3127,6 +3132,7 @@ wcs_zputs(wchar_t const *s, FILE *stream
     }
     return 0;
 }
+/**/
 #endif /* ZLE_UNICODE_SUPPORT */
 
 /* Create a visibly-represented duplicate of a string. */
@@ -3215,6 +3221,7 @@ niceztrlen(char const *s)
     return l;
 }
 
+/**/
 #ifdef ZLE_UNICODE_SUPPORT
 /**/
 mod_export size_t
@@ -3236,6 +3243,7 @@ wcs_nicewidth(wchar_t const *s)
     }
     return l;
 }
+/**/
 #endif /* ZLE_UNICODE_SUPPORT */
 
 /* check for special characters in the string */

--J2SCkAp4GZ/dPZZf--


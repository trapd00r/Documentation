From zsh-workers-return-27399-mason-zsh=primenet.com.au@zsh.org Thu Nov 12 20:52:26 2009
Return-Path: <zsh-workers-return-27399-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1446 invoked by alias); 12 Nov 2009 20:52:26 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27399
Received: (qmail 4932 invoked from network); 12 Nov 2009 20:52:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at benizi.com does not designate permitted sender hosts)
Date: Thu, 12 Nov 2009 15:52:50 -0500 (EST)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Workers <zsh-workers@zsh.org>
Subject: Re: [PATCH] env completion: add missing explanation of --unset
 option, fixes alignment of completed arguments
In-Reply-To: <1258056819-4409-1-git-send-email-ingmar@exherbo.org>
Message-ID: <alpine.LNX.2.01.0911121548300.26715@hp.internal>
References: <alpine.LNX.2.01.0911121446150.26715@hp.internal> <1258056819-4409-1-git-send-email-ingmar@exherbo.org>
User-Agent: Alpine 2.01 (LNX 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-1463810530-1753393148-1258059170=:26715"

---1463810530-1753393148-1258059170=:26715
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Thu, 12 Nov 2009, Ingmar Vanhassel wrote:

> ---
>  Completion/Unix/Command/_env |    2 +-
>  1 files changed, 1 insertions(+), 1 deletions(-)
> 
> I was getting a few patch series ready to send, but I guess I can fire this one
> off already, it probably fixes your issue.
> 
> What I've not figured out, is how to make 'env FOO=bar quux <TAB>' complete
> options to 'quux'. I guess that'll take someone with more experience than me.

Took a hint from _xargs...  Attached patch incorporates:

1. my fix to allow multiple '-u/--unset=' args
2. Ingmar's documentation fix
3. the fix to complete arguments to the command passed to 'env'

Does not include the '(--unset= -u)' Ingmar had prepended to the '-u' 
line.  (I think that would explicitly prevent multiple -u/--unset args.)

Best,
Ben
---1463810530-1753393148-1258059170=:26715
Content-Type: TEXT/PLAIN; charset=US-ASCII; name=zsh-_env-command+multi+doc.patch
Content-Transfer-Encoding: BASE64
Content-ID: <alpine.LNX.2.01.0911121552500.26715@hp.internal>
Content-Description: 
Content-Disposition: attachment; filename=zsh-_env-command+multi+doc.patch

SW5kZXg6IENvbXBsZXRpb24vVW5peC9Db21tYW5kL19lbnYNCj09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0NClJDUyBmaWxlOiAvY3Zzcm9vdC96c2gvenNoL0Nv
bXBsZXRpb24vVW5peC9Db21tYW5kL19lbnYsdg0KcmV0cmlldmluZyByZXZp
c2lvbiAxLjENCmRpZmYgLXUgLXIxLjEgX2Vudg0KLS0tIENvbXBsZXRpb24v
VW5peC9Db21tYW5kL19lbnYJMTMgQXByIDIwMDYgMDI6NDY6NTAgLTAwMDAJ
MS4xDQorKysgQ29tcGxldGlvbi9Vbml4L0NvbW1hbmQvX2VudgkxMiBOb3Yg
MjAwOSAyMDo0NzoyNSAtMDAwMA0KQEAgLTMsOSArMywxMCBAQA0KIGlmIF9w
aWNrX3ZhcmlhbnQgZ251PUZyZWVcIFNvZnQgdW5peCAtLXZlcnNpb247IHRo
ZW4NCiAgIF9hcmd1bWVudHMgXA0KICAgICAnKC0taWdub3JlLWVudmlyb25t
ZW50IC1pKSd7LWksLS1pZ25vcmUtZW52aXJvbm1lbnR9J1tzdGFydCB3aXRo
IGVtcHR5IGVudmlyb25tZW50XScgXA0KLSAgICB7LXUsLS11bnNldD19Jzpl
bnYgdmFyIHRvIHJlbW92ZTpjb21wYWRkICR7KGspcGFyYW1ldGVyc1soUikq
ZXhwb3J0Kl19JyBcDQorICAgICcqJ3stdSwtLXVuc2V0PX0nW3JlbW92ZSB2
YXJpYWJsZSBmcm9tIHRoZSBlbnZpcm9ubWVudF06ZW52IHZhciB0byByZW1v
dmU6Y29tcGFkZCAkeyhrKXBhcmFtZXRlcnNbKFIpKmV4cG9ydCpdfScgXA0K
ICAgICAnLS1oZWxwW2hlbHBdJyBcDQogICAgICctLXZlcnNpb25bdmVyc2lv
bl0nIFwNCisgICAgJygtKTpjb21tYW5kOiBfY29tbWFuZF9uYW1lcyAtZScg
XA0KICAgICAnKjo6YXJndW1lbnRzOiBfbm9ybWFsJw0KIGVsc2UNCiAgIF9w
cmVjb21tYW5kDQo=

---1463810530-1753393148-1258059170=:26715--


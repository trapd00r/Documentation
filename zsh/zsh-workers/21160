From zsh-workers-return-21160-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 23 03:19:27 2005
Return-Path: <zsh-workers-return-21160-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2627 invoked from network); 23 Apr 2005 03:19:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Apr 2005 03:19:26 -0000
Received: (qmail 37849 invoked from network); 23 Apr 2005 03:19:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Apr 2005 03:19:18 -0000
Received: (qmail 23376 invoked by alias); 23 Apr 2005 03:19:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21160
Received: (qmail 23362 invoked from network); 23 Apr 2005 03:19:15 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 23 Apr 2005 03:19:15 -0000
Received: (qmail 37559 invoked from network); 23 Apr 2005 03:19:15 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 23 Apr 2005 03:19:11 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id C7F2770046; Fri, 22 Apr 2005 23:19:07 -0400 (EDT)
Date: Fri, 22 Apr 2005 23:19:07 -0400
From: Clint Adams <clint@zsh.org>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: replacement slowdown
Message-ID: <20050423031907.GA27233@scowler.net>
Mail-Followup-To: Bart Schaefer <schaefer@brasslantern.com>,
	zsh-workers@sunsite.dk
References: <20050422232316.GA27665@scowler.net> <1050423031422.ZM3881@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1050423031422.ZM3881@candle.brasslantern.com>
User-Agent: Mutt/1.5.6+20040907i
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

> +       * 20500: Misc/globtests, Src/glob.c, Src/pattern.c, Src/zsh.h,
> +       Src/Zle/complist.c, Test/D02glob.ztst: Use unmetafied strings
> +       in patterns more;

> Any or all of those could be contributing to slowness in the example you
> gave.  Someone will have to run both versions through a profiler.

Well, I haven't profiled 4.2.1, but in 4.2.5, it's spending all its time
in ztrsub (called 57093 times) in pattryrefs.

> BTW, did you check that both builds used the same compiler optimization
> settings?

Yes.


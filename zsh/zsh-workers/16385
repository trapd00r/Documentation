From zsh-workers-return-16385-mason-zsh=primenet.com.au@sunsite.dk Wed Jan 02 16:09:28 2002
Return-Path: <zsh-workers-return-16385-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16880 invoked from network); 2 Jan 2002 16:09:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 2 Jan 2002 16:09:27 -0000
Received: (qmail 6253 invoked by alias); 2 Jan 2002 16:09:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16385
Received: (qmail 6242 invoked from network); 2 Jan 2002 16:09:17 -0000
X-VirusChecked: Checked
X-Authentication-Warning: iris.logica.co.uk: Host kiddleo@rambo.logica.co.uk [158.234.33.58] claimed to be yahoo.co.uk
Sender: kiddleo@iris.logica.co.uk
Message-ID: <3C33308E.DB275E2@yahoo.co.uk>
Date: Wed, 02 Jan 2002 16:08:46 +0000
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.4.16-686-smp i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
CC: Matt Armstrong <matt+dated+1010258681.d5e28d@lickey.com>
Subject: brace expansion inconsistency
References: <87ellbxkek.fsf@squeaker.lickey.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Matt Armstrong wrote:
> 
> Is there a simple way to turn an array (a b c) into (a "" b "" c "")?
> Then I could assign _p4_cmds in one statement and dump the loop.
> 

I would have thought that _p4_cmds=( {$a,} ) would do the job but
it doesn't. On closer inspection, it seems that {,$a} does expand
in the way I would expect with alternate array elements and empty
strings.

In bash {x,} expands to just 'x'. ksh 93 expands it to two
words - 'x' and an empty word. zsh is different for
{x,} and {,x}. I'd argue that ksh93 is right.

Any thoughts?

And, Matt, for now, you could use this:
  a=( {,$a} )
  typeset -A _p4_cmds
  _p4_cmds=( "${(@)a[2,-1]}" '' )

Oliver

This email has been scanned for all viruses by the MessageLabs SkyScan service. For more information on a pro-active anti-virus service working around the clock, around the globe visit http://www.messagelabs.com/


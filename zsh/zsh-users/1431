From zsh-workers-request@math.gatech.edu Thu Mar 26 18:48:18 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 3403 invoked from network); 26 Mar 1998 18:48:17 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 26 Mar 1998 18:48:17 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id NAA14561;
	Thu, 26 Mar 1998 13:45:19 -0500 (EST)
Resent-Date: Thu, 26 Mar 1998 13:41:28 -0500 (EST)
From: Andrew Main <zefram@tao.co.uk>
Message-Id: <199803261840.SAA16193@taos.demon.co.uk>
Subject: Re: Zsh question (more smileys in the prompt)
To: stucki@math.fu-berlin.de
Date: Thu, 26 Mar 1998 18:40:39 +0000 (GMT)
Cc: zsh-users@math.gatech.edu
In-Reply-To: <Pine.GSO.3.95q.980326123805.4625A-100000@petzval> from "C. v. Stuckrad" at Mar 26, 98 12:58:34 pm
X-Loop: zefram@tao.co.uk
X-Headers: in preparation
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"Nscdo3.0.kX3.N5g6r"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1431
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

C. v. Stuckrad wrote:
>AND I have a problem with LINUX-console color-prompts which 
>on being redrawn by (eg.: ^L at the top of the screen)
>loose a blank and then edit of by one (no idea where this comes from).
>
>Any ideas how %{...ansi-color-sequences...} might differ in length
>between the first time it is done (_typed_) and all the latter times
>when it's _redrawn_ to be edited ?

The only phenomenon I've seen that behaves like that is nothing to
do with escape sequences in the prompt.  In zsh version up to 3.1.2,
if the `correct' length of the prompt changes -- e.g., if you have
the corrent directory in the prompt and then change directory -- then
ZLE can think the prompt has changed length without actually changing
what's on the screen.  Could that be happening here?  (This bug is fixed
in 3.1.2-zefram3.)

If that's not it, could you post your prompt setting please?

-zefram


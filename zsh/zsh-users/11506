From zsh-users-return-11506-mason-zsh=primenet.com.au@sunsite.dk Thu May 24 16:29:41 2007
Return-Path: <zsh-users-return-11506-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18129 invoked from network); 24 May 2007 16:29:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.0 (2007-05-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=no
	version=3.2.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 May 2007 16:29:39 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 79384 invoked from network); 24 May 2007 16:29:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 May 2007 16:29:34 -0000
Received: (qmail 6508 invoked by alias); 24 May 2007 16:29:26 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11506
Received: (qmail 6499 invoked from network); 24 May 2007 16:29:26 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 May 2007 16:29:26 -0000
Received: (qmail 78045 invoked from network); 24 May 2007 16:29:26 -0000
Received: from an-out-0708.google.com (209.85.132.247)
  by a.mx.sunsite.dk with SMTP; 24 May 2007 16:29:23 -0000
Received: by an-out-0708.google.com with SMTP id c14so88110anc
        for <zsh-users@sunsite.dk>; Thu, 24 May 2007 09:29:21 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Btu/16O9j8OHqVzFi4d2w8nB+79ZahN7C1KN+yFu2H8V2E7wTdnM4H7eLqNNwQ2zMJd8dEAaGFAnBYzUg5gTEuE4HuS5BLFDQINkwhgig8bHhF9Y3uzp/EYa5l2RwAv3CqiR3BuIAS8PaSyDewmrOqa3Kh4GeHZafyPi0ZSCnzQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=f/E+lvDt9CLTh/k/+5foeTC8oHCDrDyALTtSBBnxyZJ3NCZBwERPOlPnS8o7JvKrXR4IYvar3OS6sLUjyR2Z/2nzyylsor8JAdF0LaatMTei7z1aeYlp08Ma1zKCmHyyqB+D21tfyAI5pZ3S6Md3J/FL0vdZCfJAHmAV8RjoZf4=
Received: by 10.100.165.9 with SMTP id n9mr1725222ane.1180024160689;
        Thu, 24 May 2007 09:29:20 -0700 (PDT)
Received: by 10.100.167.14 with HTTP; Thu, 24 May 2007 09:29:20 -0700 (PDT)
Message-ID: <fb3648c60705240929i16bb6b3br260bb24b1192cde6@mail.gmail.com>
Date: Thu, 24 May 2007 10:29:20 -0600
From: fREW <frioux@gmail.com>
To: "Mikael Magnusson" <mikachu@gmail.com>
Subject: Re: If then Prompt
Cc: "Zsh users list" <zsh-users@sunsite.dk>
In-Reply-To: <237967ef0705240918w6a923e7fk9e7f28164037715e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <fb3648c60705240913pedbd3afx957b60b804b33d1a@mail.gmail.com>
	 <237967ef0705240918w6a923e7fk9e7f28164037715e@mail.gmail.com>

On 5/24/07, Mikael Magnusson <mikachu@gmail.com> wrote:
> On 24/05/07, fREW <frioux@gmail.com> wrote:
> > Hey all,
> >
> > I was thinking that it would be cool to show the number of jobs if
> > there were more than 0 jobs.  I know you can do this with things like
> > the return value, is there any way to do it with jobs?
>
> Sure,
> PS1=$'%(1j.%j jobs .)'
>
> --
> Mikael Magnusson
>

Awesome!  Thanks!  If anyone cares or wants to see it, here is my
current prompt.


host_color=cyan
history_color=yellow
user_color=green
root_color=red
directory_color=magenta
error_color=red
jobs_color=green

host_prompt="%{$fg_bold[$host_color]%}%m%{$reset_color%}"

jobs_prompt1="%{$fg_bold[$jobs_color]%}(%{$reset_color%}"

jobs_prompt2="%{$fg[$jobs_color]%}%j%{$reset_color%}"

jobs_prompt3="%{$fg_bold[$jobs_color]%})%{$reset_color%}"

jobs_total="%(1j.${jobs_prompt1}${jobs_prompt2}${jobs_prompt3} .)"

history_prompt1="%{$fg_bold[$history_color]%}[%{$reset_color%}"

history_prompt2="%{$fg[$history_color]%}%h%{$reset_color%}"

history_prompt3="%{$fg_bold[$history_color]%}]%{$reset_color%}"

history_total="${history_prompt1}${history_prompt2}${history_prompt3}"

error_prompt1="%{$fg_bold[$error_color]%}<%{$reset_color%}"

error_prompt2="%{$fg[$error_color]%}%?%{$reset_color%}"

error_prompt3="%{$fg_bold[$error_color]%}>%{$reset_color%}"

error_total="%(?..${error_prompt1}${error_prompt2}${error_prompt3} )"

if [[ $TERM == xterm ]]; then
    directory_prompt=""
else
    directory_prompt="%{$fg[$directory_color]%}%~%{$reset_color%} "
fi

if [[ $USER == root ]]; then
    post_prompt="%{$fg_bold[$root_color]%}%#%{$reset_color%}"
else
    post_prompt="%{$fg_bold[$user_color]%}%#%{$reset_color%}"
fi

PS1="${host_prompt} ${jobs_total}${history_total}
${directory_prompt}${error_total}${post_prompt} "


if [[ $TERM == linux ]]; then
else
    precmd () { print -Pn "\e]0;%m: %~\a" }
fi


It doesn't show the username, because it usually doesn't matter to me
what user I am logged into (it's just a user or root) so I don't show
that.  Also the last part which will put the current directory in the
title of an xterm doesn't work if you are in a screen session.

-fREW


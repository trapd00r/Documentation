From zsh-users-return-11058-mason-zsh=primenet.com.au@sunsite.dk Tue Dec 05 23:44:22 2006
Return-Path: <zsh-users-return-11058-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12104 invoked from network); 5 Dec 2006 23:44:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Dec 2006 23:44:16 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 5879 invoked from network); 5 Dec 2006 23:44:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2006 23:44:08 -0000
Received: (qmail 15764 invoked by alias); 5 Dec 2006 23:43:58 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11058
Received: (qmail 15753 invoked from network); 5 Dec 2006 23:43:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Dec 2006 23:43:56 -0000
Received: (qmail 4557 invoked from network); 5 Dec 2006 23:43:56 -0000
Received: from tiger.phpweb.biz (64.246.62.13)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2006 23:43:52 -0000
Received: from 84-73-176-38.dclient.hispeed.ch ([84.73.176.38] helo=wesley.pjcj.net)
	by tiger.phpweb.biz with esmtpa (Exim 4.52)
	id 1Grjwc-0007By-VB
	for zsh-users@sunsite.dk; Tue, 05 Dec 2006 17:43:27 -0600
Received: from pjcj by wesley.pjcj.net with local (Exim 3.36 #1 (Debian))
	id 1Grjwx-0005po-00
	for <zsh-users@sunsite.dk>; Wed, 06 Dec 2006 00:43:47 +0100
Date: Wed, 6 Dec 2006 00:43:47 +0100
From: Paul Johnson <paul@pjcj.net>
To: Zsh Users List <zsh-users@sunsite.dk>
Subject: Re: Scripting situation I cannot wrap my head around
Message-ID: <20061205234347.GG2596@pjcj.net>
References: <d2ecb10b0612042331l70ea16c9ubd8f676a8a0a126e@mail.gmail.com> <20061205154041.GA10583@princo>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20061205154041.GA10583@princo>
User-Agent: Mutt/1.5.13 (2006-08-11)
Sender: Paul Johnson <paul@pjcj.net>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - tiger.phpweb.biz
X-AntiAbuse: Original Domain - sunsite.dk
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - pjcj.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 

On Tue, Dec 05, 2006 at 10:40:41AM -0500, Jean-Rene David wrote:
> * TjL [2006.12.05 07:15]:
> > [...]
> > I am currently writing "verbatims" for a class
> > that I am taking.
> > [...]
> > Here is "normal" dialog:
> > 
> > John: How are you today?
> > Tim: I'm good.
> > George: I'm Ok, how are you
> > John: I'm good too.
> > George: Glad to hear it
> > John: Thanks
> > Tim: Yeah, me too
> > 
> > Here is verbatim style dialog:
> > 
> > John1: How are you today?
> > Tim1: I'm good.
> > George1: I'm Ok, how are you
> > John2: I'm good too.
> > George2: Glad to hear it
> > John3: Thanks
> > Tim2: Yeah, me too
> > 
> > [...] You would need separate counters for each
> > person, and you wouldn't know how many people
> > would be a part of the conversation (no fewer
> > than 2 people, probably no more than 10, usually
> > 2-5).
> 
> The 'separate counters for each person' sounds
> like a hash to me, and was suggested by others.
> 
> However I think a text processing tool would be
> more appropriate than a shell for this kind of
> task:

I was thinking the same thing.

> % perl -ne 'BEGIN { %person=(); } \
>           /^([a-zA-Z]+)(:)(.*)$/ &&  \
>             print "$1" . ++$person{$1} . "$2$3\n";' < dialog.file

perl -pe 's/\w+/$& . ++$person{$&}/e' dialog.file

or maybe you don't really want people to understand what you are doing:

perl -pe 's((?=:))?++${$`}?e' dialog.file

Interesting conversation, by the way.

-- 
Paul Johnson - paul@pjcj.net
http://www.pjcj.net


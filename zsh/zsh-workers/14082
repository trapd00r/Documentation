From zsh-workers-return-14082-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 24 08:51:23 2001
Return-Path: <zsh-workers-return-14082-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1385 invoked from network); 24 Apr 2001 08:51:22 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Apr 2001 08:51:22 -0000
Received: (qmail 19360 invoked by alias); 24 Apr 2001 08:51:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14082
Received: (qmail 19242 invoked from network); 24 Apr 2001 08:50:53 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Zsh hackers list" <zsh-workers@sunsite.dk>
Subject: RE: PATCH: revert Clint's build patches
Date: Tue, 24 Apr 2001 12:50:48 +0400
Message-ID: <004001c0cc9b$a83819e0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
In-Reply-To: <1010424064044.ZM32389@candle.brasslantern.com>
Importance: Normal

>
> On Apr 23, 11:44pm, Andrej Borsenkow wrote:
> }
> } O.K., so here is diff against current CVS that reverts
> } Clint's patches (sorry). I commit it when I have article number.
>
> Unfortunately, I'm now able to compile zsh but not link it:
>

Sorry for that. It did compile here but I have termcap==curses.

> The following patch gets my compile and link going, but of course does
> not enable $terminfo or echoti on my system, and uses the fallback lists
> of capcodes for $termcap.  However, I don't know whether to add
>

Just tested on cygwin and it compiles and runs O.K., termcap is there and
terminfo is missing just as expected. It should be possible to link against
ncurses on cygwin that should give us both - any takers? (Actually, ncurses is
now part of "official" cygwin - whatever it is - so it may make sense to
prefer it).

> AC_SEARCH_LIBS(setupterm, ...)
>
> or
>
> AC_SEARCH_LIBS(tigetstr, ...)
>
> or both.
>

The main problem is that if termcap and terminfo are different, we should not
probably allow both libraries be linked in zsh. And even if we link them to
corr. modules only, there is an issue of tracing TERM changes etc. Let's leave
it for now.

-andrej


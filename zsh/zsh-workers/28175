From zsh-workers-return-28175-mason-zsh=primenet.com.au@zsh.org Fri Aug 20 04:23:20 2010
Return-Path: <zsh-workers-return-28175-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 678 invoked by alias); 20 Aug 2010 04:23:20 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28175
Received: (qmail 23385 invoked from network); 20 Aug 2010 04:23:18 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100819212253.ZM27882@torch.brasslantern.com>
Date: Thu, 19 Aug 2010 21:22:51 -0700
In-reply-to: <20100818210959.2a9d4d25@pws-pc>
Comments: In reply to Peter Stephenson <p.w.stephenson@ntlworld.com>
 "Re: Bug#593426: zsh: Status of background jobs not updated" (Aug 18,  9:09pm)
References: <20100818025148.13456.14691.reportbug@salamander.skynet.lan>
	<20100818182959.GA29785@scru.org>	<20100818210959.2a9d4d25@pws-pc>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@zsh.org
Subject: Re: Bug#593426: zsh: Status of background jobs not updated
Cc: 593426@bugs.debian.org
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Aug 18,  9:09pm, Peter Stephenson wrote:
}
} +	    } else if (sig == SIGCONT) {
} +		Job jn;
} +		Process pn;
} +		if (findproc(pid, &jn, &pn, 0)) {
} +		    if (WIFSTOPPED(pn->status))
} +			pn->status = SP_RUNNING;
} +		}
} +	    }

Hmm, are we really guaranteed that the job has started running again
just because we killed it with SIGCONT?  E.g., if the reason it was
stopped is because it got a TTIN or TTOU, is there a possible race
here because it's just going to immediately stop again?

-- 


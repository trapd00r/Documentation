From zsh-workers-return-5762-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 11 17:28:08 1999
Return-Path: <zsh-workers-return-5762-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23293 invoked from network); 11 Mar 1999 17:28:06 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Mar 1999 17:28:06 -0000
Received: (qmail 3986 invoked by alias); 11 Mar 1999 17:18:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5762
Received: (qmail 3969 invoked from network); 11 Mar 1999 17:18:14 -0000
Message-Id: <9903111702.AA42488@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: completion features
Date: Thu, 11 Mar 1999 18:02:19 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

1.
_path_files won't handle path-expansion after directories in the stack,
e.g. ~1/f/b won't go to ~1/foo/bar (even if that exists).  Sometimes it
tries to quote the ~ on the command line, which doesn't stop it doing
normal completion (even though technically that's now a literal tilde), but
doesn't help it do multipath completion.

2.
Something like ++^D when you have correction set to 2 will allow anything
at all to be completed, assuming there was no exact match.  Sven mentioned
something about this, but it looks particularly funny here.  What are we
going to do? 
  - max no. of corrections is one *less* than length of prefix+suffix?
Maybe workable, since you're unlikely to expect a one word prefix to
be corrected at all, even if logically it should be.  E.g., if I type a^D,
and there aren't any a*'s I probably don't expect every other file in the
directory, even if logically I should, while if I type ab^D, I'm probably
willing to contemplate `bacterium', `acanthus' and `botulinus' if there was
no exact match, but probably not `phrenology'.  I think this is my
preferred solution.  Does this fit into _main_complete OK?  (By the way, is
${#:-$PREFIX$SUFFIX} supposed to work, because it doesn't, although
"${#${:-$PREFIX$SUFFIX}}" does.)
  - first character must match? (partly a feeble echo of the first
solution).
  - one of the characters on the line so far must match?  I think this can
be done with some [...] trickery, but again it seems like a poor relation
to the first solution.
  - assume users, unlike me, are smart enough to cope?
  - set a default correction prompt, so lazy people who can't be bothered to
define one but are still in the habit of making complaints on zsh-workers
(ahem) don't get confused?

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


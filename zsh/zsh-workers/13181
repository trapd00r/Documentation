From zsh-workers-return-13181-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Nov 22 08:55:48 2000
Return-Path: <zsh-workers-return-13181-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21206 invoked from network); 22 Nov 2000 08:55:46 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Nov 2000 08:55:46 -0000
Received: (qmail 18446 invoked by alias); 22 Nov 2000 08:55:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13181
Received: (qmail 18437 invoked from network); 22 Nov 2000 08:55:34 -0000
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: _apt
MIME-Version: 1.0 (generated by REMI 1.14.3 - "Matsudai")
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@m17n.org>
Date: 22 Nov 2000 17:47:59 +0900
Message-ID: <hvo66lgpf40.fsf@coulee.m17n.org>
Lines: 34
User-Agent: T-gnus/6.14.5 (based on Gnus v5.8.7) (revision 03) REMI/1.14.3 (Matsudai) Deisui/1.14.0 (Kikuhime) APEL/10.2 Emacs/20.7 (i386-unknown-openbsd2.7) MULE/4.0 (HANANOEN)

This patch fix following problem.

% apt-get --no-<TAB>
_alternative:68: unknown sort specifier
_alternative:70: command not found: t
% apt-get --no-
option
--no-           --no-act        --no-download   --no-upgrade  

Index: Completion/Debian/_apt
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/_apt,v
retrieving revision 1.8
diff -u -r1.8 _apt
--- Completion/Debian/_apt	2000/06/22 08:42:36	1.8
+++ Completion/Debian/_apt	2000/11/22 08:54:49
@@ -97,13 +97,13 @@
 _describe -o option tmp2 -- tmp3 -S= -- bool_prefix -S ""'
 
   comp_long_prefix=\
-'tmp1="${(j:|:)${(@)${(@M)${(@s:,:)${(@kj:,:)num_options[(R)*~0]}}:#--*}#--}}"
+'{tmp1="${(j:|:)${(@)${(@M)${(@s:,:)${(@kj:,:)num_options[(R)*~0]}}:#--*}#--}}"
 tmp2=($_ra_left${(M)^long_bool:#$~tmp1} $_ra_left${(M)^long_intlevel:#$~tmp1})
 tmp3=($_ra_left${(M)^long_hasarg:#$~tmp1} $_ra_left${(M)^long_configfile:#$~tmp1} $_ra_left${(M)^long_arbitem:#$~tmp1})
 tmp1="${(j:|:)${(@)${(@M)${(@s:,:)${(@kj:,:)num_options[(R)*~0]}}:#-?}#-}}"
 tmp2=("$tmp2[@]" $_ra_left${(M)^short_bool:#$~tmp1} $_ra_left${(M)^short_intlevel:#$~tmp1})
 tmp3=("$tmp3[@]" $_ra_left${(M)^short_hasarg:#$~tmp1} $_ra_left${(M)^short_configfile:#$~tmp1} $_ra_left${(M)^short_arbitem:#$~tmp1})
-_describe -o option tmp2 -- tmp3 -S='
+_describe -o option tmp2 -- tmp3 -S=}'
 
   comp_opt='{{ ! zstyle -T ":completion:${curcontext}:options" prefix-needed || [[ "$PREFIX" = -* ]] }'" && { $comp_short; $comp_long }}"
   comp_short="{$comp_short}"
-- 
Tanaka Akira


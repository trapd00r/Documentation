From A.Main@dcs.warwick.ac.uk Sat Jul 27 09:03:13 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id JAA02966 for <mason@werple.mira.net.au>; Sat, 27 Jul 1996 09:03:10 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id SAA17277; Fri, 26 Jul 1996 18:55:01 -0400 (EDT)
Resent-Date: Fri, 26 Jul 1996 18:55:01 -0400 (EDT)
From: Zefram <A.Main@dcs.warwick.ac.uk>
Message-Id: <18307.199607262253@stone.dcs.warwick.ac.uk>
Subject: options shenanigans in pre4
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Fri, 26 Jul 1996 23:53:55 +0100 (BST)
Cc: hzoli@cs.elte.hu
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]7869.77
X-US-Congress: Moronic fuckers
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"IQHRA3.0.tD4.5pK-n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1783
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1517
Status: OR

I'm not going to provide actual patches for any of the things I point
out as needing fixing here.  They're all very minor issues, and the
patches are trivial.

The pre4 patch says:
[Doc/zshexpn.man]
>+ preceding the set of five substitutions mentioned above.
>+ is
>  .SH FILENAME EXPANSION

Where did that "is" come from?  It's obviously a typo, and should be
removed.

[Doc/zshoptions.man]
>! \fBSHIN_STDIN\fP (\-\fBs\fP, ksh: \-\fBs\fP)
>--- 467,473 ----
>! \fBSHIN_STDIN\fP (\-\fBs\fP)

{setopt ramble localoptions
Hmm, I didn't notice that ksh handled this differently from sh.  Maybe
we *do* need a third set of option letters, though this seems to be the
only actual incompatibility.  We might want to implement the ksh option
at some point too.
}

>+ \fBSH_OPTION_LETTERS\fP
>+ If this option is set the shell tries to interpret single letter options
>+ (which are used with \fBset\fP and \fBsetopt\fP) like \fIksh\fP does.
>+ This also affects the value of the \fB-\fP special parameter.

Virtually identical to a patch I was planning to produce after the pre4
release.  I was going to call it KSH_OPTION_LETTERS, though, because
the set of options it selects are emulating ksh, not sh.  The other
option names that refer to ksh or sh do get the right one, so you might
actually want to change this.

>+ .BR sh / ksh
>+ emulation set:
...
>+ \-\fBs\fP SHIN_STDIN

Should not now be included in this list.

[Src/builtin.c]
>!     emulate(*argv, ops['R']);

Once again we have exactly the same idea.

-zefram



From zsh-workers-return-10492-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 05 07:50:12 2000
Return-Path: <zsh-workers-return-10492-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18653 invoked from network); 5 Apr 2000 07:50:10 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Apr 2000 07:50:09 -0000
Received: (qmail 4762 invoked by alias); 5 Apr 2000 07:49:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10492
Received: (qmail 4755 invoked from network); 5 Apr 2000 07:49:57 -0000
Date: Wed, 5 Apr 2000 09:49:53 +0200 (MET DST)
Message-Id: <200004050749.JAA01547@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Wed, 5 Apr 2000 11:01:14 +0400
Subject: Re: zrecompile and removed functions


Andrej Borsenkow wrote:

> Removed functions are not handled gracefully:
> 
> bor@itsrm2% zrecompile
> re-compiling /home/bor/.zsh.d/std.zwc: failed (missing files)
> 
> This is the result of renaming _try and _loop.

It would be possible to make zrecompile be quiet when it can't find
one of the functions, but I don't like that -- which you can see by
the output above, it's printed explicitly by zrecompile.
The problem with silently ignoring missing files is exactly the
situation you encountered: the files may be renamed, so the zwc file
should really be rebuild anew...

> Is it possible to remove function definitions from wordcode file? In
> this case, something like "synchronise wordcode file with directories"
> comes in mind.

...and that's why I use `zrecompile -p' (a small wrapper function that 
just calls zrecompile -p with the zwc files I want to keep up to
date). With that it's easy to make zwc files always contain things
like `all functions in directory ...'.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


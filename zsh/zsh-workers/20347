From zsh-workers-return-20347-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 10 08:06:07 2004
Return-Path: <zsh-workers-return-20347-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2016 invoked from network); 10 Sep 2004 08:06:06 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Sep 2004 08:06:06 -0000
Received: (qmail 86958 invoked from network); 10 Sep 2004 08:06:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Sep 2004 08:06:00 -0000
Received: (qmail 24684 invoked by alias); 10 Sep 2004 08:05:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20347
Received: (qmail 24665 invoked from network); 10 Sep 2004 08:05:57 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Sep 2004 08:05:57 -0000
Received: (qmail 86508 invoked from network); 10 Sep 2004 08:04:58 -0000
Received: from moonbase.zanshin.com (64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 10 Sep 2004 08:04:56 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.13.1/8.13.1) with ESMTP id i8A84saG031236
	for <zsh-workers@sunsite.dk>; Fri, 10 Sep 2004 01:04:54 -0700
Date: Fri, 10 Sep 2004 01:04:54 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: zsh-workers@sunsite.dk
Subject: Re: Difficulties with _oldlist 
In-Reply-To: <200409081656.i88Gu7dA011749@news01.csr.com>
Message-ID: <Pine.LNX.4.61.0409092124210.9661@toltec.zanshin.com>
References: <Pine.LNX.4.61.0408230821370.5997@toltec.zanshin.com>
 <200409081656.i88Gu7dA011749@news01.csr.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

On Wed, 8 Sep 2004, Peter Stephenson wrote:

> Bart Schaefer wrote:
> > $WIDGET could be replaced by a different variable, say $WIDGETSTYLE for
> > example, which is set corresponding to the second argument of "zle -C".
> 
> This is the internal implementation.  For a "zle -N" widget $WIDGETSTYLE
> gives the name of the function that implements the widget.

Hmm, interesting.  I'd rather put the name of the function in yet another
variable (WIDGETFUNC ?) and have it available for "zle -C" widgets, too.

For "zle -N" widgets, I think WIDGETSTYLE should initially be unset, so it 
can be tested with [[ -z ]] to differentiate completion from "normal" when 
inside a widget function.  (If it's just the function name, there's no way 
of preventing a function having the same name as a builtin widget, thereby
confusing matters.)


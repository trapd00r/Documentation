From zsh-workers-return-27168-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 19 19:16:52 2009
Return-Path: <zsh-workers-return-27168-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10766 invoked from network); 19 Jul 2009 19:16:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 19 Jul 2009 19:16:39 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 59681 invoked from network); 19 Jul 2009 19:16:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Jul 2009 19:16:30 -0000
Received: (qmail 14759 invoked by alias); 19 Jul 2009 19:16:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 27168
Received: (qmail 14738 invoked from network); 19 Jul 2009 19:16:18 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 19 Jul 2009 19:16:18 -0000
Received: from vms173013pub.verizon.net (vms173013pub.verizon.net [206.46.173.13])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 97FDB8027106
	for <zsh-workers@sunsite.dk>; Sun, 19 Jul 2009 21:16:15 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.32])
 by vms173013.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KN100FWXMUNRF24@vms173013.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sun, 19 Jul 2009 14:16:04 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n6JJFv4a003306	for
 <zsh-workers@sunsite.dk>; Sun, 19 Jul 2009 12:15:59 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n6JJFvhr003305	for zsh-workers@sunsite.dk; Sun,
 19 Jul 2009 12:15:57 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090719121557.ZM3304@torch.brasslantern.com>
Date: Sun, 19 Jul 2009 12:15:57 -0700
In-reply-to: <090719110339.ZM3126@torch.brasslantern.com>
Comments: In reply to Bart Schaefer <schaefer@brasslantern.com>
 "Re: zsh 4.3.10 terminates with SIGINT when one types Ctrl-G in emacs under
 Mac OS X" (Jul 19, 11:03am)
References: <schaefer@brasslantern.com>
	<090712193623.ZM14823@torch.brasslantern.com>
	<200907131839.n6DIdO6Z003291@pws-pc.ntlworld.com>
	<20090716162419.GA26179@prunille.vinc17.org>
	<090717222936.ZM8648@torch.brasslantern.com>	<20090718101602.GA5392@xvii>
	<090718111615.ZM10393@torch.brasslantern.com>
	<090719110339.ZM3126@torch.brasslantern.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@sunsite.dk
Subject: Re: zsh 4.3.10 terminates with SIGINT when one types Ctrl-G in emacs
 under Mac OS X
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.94.2/9589/Sun Jul 19 05:14:56 2009 on bifrost
X-Virus-Status: Clean

On Jul 19, 11:03am, Bart Schaefer wrote:
}
} The following small change appears to restore the old behavior for SIGINT.

Unfortunately it does so too well.  It makes "wait" uninterruptible again,
which was the problem in the original thread at zsh-workers/23053.

The only way I can see to fix this is to re-introduce the wait_cmd second
argument to signal_suspend().  PWS?  Any thoughts?

} Hmm, looking at the #ifdef flow and considering that this affects MacOS,
} maybe the change in my patch needs to be in the BSD_SIGNALS section,
} either instead or as well.

I checked config.h on my iMac at work and it does not have BSD_SIGNALS,
so this isn't necessary for that reason, but it still might be a good
idea to have it in both branches.


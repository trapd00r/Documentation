From zsh-workers-request@euclid.skiles.gatech.edu Tue Jul 29 09:19:10 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 3811 invoked from network); 29 Jul 1997 09:19:09 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 29 Jul 1997 09:19:09 -0000
Received: (from list@localhost)
	by euclid.skiles.gatech.edu (8.8.5/8.8.5) id FAA15390;
	Tue, 29 Jul 1997 05:13:41 -0400 (EDT)
Resent-Date: Tue, 29 Jul 1997 05:13:41 -0400 (EDT)
Date: Tue, 29 Jul 1997 11:13:13 +0200 (MET DST)
From: Swen Thuemmler <swen@uni-paderborn.de>
To: zsh-workers@math.gatech.edu
Subject: Problem with zsh 3.1.x and shared libncurses
Message-ID: <Pine.GSO.3.96.970729110020.9963A-100000@kreta.uni-paderborn.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"r4fHN2.0.Pm3.5HRtp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3386
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Hi,

there is a bug in zle, which may cause a segmentation fault if it is
compiled with a shared libncurses.so. The reason is that in curses there
is a function refresh(), which is also in zle_refresh.c. Now the calls to
refresh() in zle.so might be mapped to the function in ncurses.so, which
will lead to a segmentation fault (this is on Solaris 2.5, but I had the
problem on IRIX 6.2, too). I compiled with LD_RUN_PATH=/usr/local/lib,
where the libncurses.so is located (on IRIX: -Wl,-rpath,/usr/local/lib).
After renaming the function to zle_refresh(), all worked well, so I'd
suggest renaming that function to avoid potential name clashes.

Greetings, Swen



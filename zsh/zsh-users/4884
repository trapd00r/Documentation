From zsh-users-return-4884-mason-zsh=primenet.com.au@sunsite.dk Fri Apr 26 09:22:36 2002
Return-Path: <zsh-users-return-4884-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28639 invoked from network); 26 Apr 2002 09:22:35 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 26 Apr 2002 09:22:35 -0000
Received: (qmail 26457 invoked by alias); 26 Apr 2002 09:22:19 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4884
Received: (qmail 26446 invoked from network); 26 Apr 2002 09:22:18 -0000
X-VirusChecked: Checked
Date: Fri, 26 Apr 2002 10:21:49 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: Joshua Symons <vmcore@mysun.com>, zsh-users@sunsite.dk
Subject: Re: Preexec & Printf
Message-ID: <20020426092149.GA21703@logica.com>
References: <254cf203d4.203d4254cf@mysun.com> <Pine.LNX.4.44.0204251839160.7967-100000@ns1.sodaware.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <Pine.LNX.4.44.0204251839160.7967-100000@ns1.sodaware.com>
User-Agent: Mutt/1.3.28i
Sender: Oliver Kiddle <kiddleo@logica.com>

On Thu, Apr 25, 2002 at 06:45:52PM -0700, Bart Schaefer wrote:
> On Thu, 25 Apr 2002, Joshua Symons wrote:
> 
> > I had seen q in the modifier list @
> > http://zsh.sourceforge.net/Doc/Release/zsh_13.html#SEC45
> > I don't see V and z in the modifier list, are they documented?
> 
> Unfortunately that's still the 3.0 -- or perhaps it's 3.1.6 --
> documentation.  You need to read the docs that came with your zsh
> distribution if you want accurate information.

No, it is the 4.0.3 documentation. The reason that V and z are not in
the list of modifiers is that they are parameter expansion flags so
are listed further down in the documentation. #SEC47 or 13.3.1 if
looking on the web page.

As for the original question, I'd have thought it'd be easier to
break up the print statement in preexec to avoid it interpreting
any back-slashes in $1. e.g:
preexec() {
  print -Pn "\e]0;%m:%l - "
  print -rn "${(V)1}"
  print -n "\a"
)

It still needs the V flag for special characters but shouldn't need
any quoting.

Oliver
-- 

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


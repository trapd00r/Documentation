From zsh-workers-return-7763-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 09 22:01:18 1999
Return-Path: <zsh-workers-return-7763-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3851 invoked from network); 9 Sep 1999 22:01:17 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Sep 1999 22:01:17 -0000
Received: (qmail 26210 invoked by alias); 9 Sep 1999 22:01:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7763
Received: (qmail 26203 invoked from network); 9 Sep 1999 22:01:11 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: Silly questions about _arguments & Co (and probably bugs)
References: <199909091427.QAA03152@beta.informatik.hu-berlin.de>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 10 Sep 1999 07:01:09 +0900
In-Reply-To: Sven Wischnowsky's message of "Thu, 9 Sep 1999 16:27:12 +0200 (MET DST)"
Message-ID: <rsqg10nu4m2.fsf@crane.jaist.ac.jp>
Lines: 44
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <199909091427.QAA03152@beta.informatik.hu-berlin.de>,
  Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

> diff -u oldcompletion/Base/_arguments Completion/Base/_arguments
> --- oldcompletion/Base/_arguments	Thu Sep  9 16:12:19 1999
> +++ Completion/Base/_arguments	Thu Sep  9 16:22:33 1999
> @@ -57,6 +57,8 @@
>        # We have to build the long-option cache anew, get the `-i' and
>        # `-s' options.
>  
> +      set -- "${(@)argv[nth+1,-1]}"
> +
>        iopts=()
>        sopts=()
>        while [[ "$1" = -[is]* ]]; do

Hm.

...
+_arguments:60> set -- *strip=NUM*:number:{compadd "$expl[@]" -S0 -r "1-9" - ""} *get=NUM*:get files from RCS etc: *=LINES*:lines: *=PATCHFILE*:patch file:_files *=FILE*:file:_files *=NAME*:name: *=WORD*:quoting style:(literal shell shell-always c escape) *=STYLE*:version control style:(simple numbered existing) *=SUFFIX*:backup file suffix:(.bak) *=DIR*:chdir to:_files -/
...
+_arguments:116> set -- *=FILE*:file:_files *=(DIR|PATH)*:directory:_files -/ *:unknown:
...

So, _arguments forget '*strip=...' ...

Index: Completion/Base/_arguments
===================================================================
RCS file: /projects/zsh/zsh/Completion/Base/_arguments,v
retrieving revision 1.1.1.30
diff -u -F^( -r1.1.1.30 _arguments
--- _arguments	1999/09/09 14:33:42	1.1.1.30
+++ _arguments	1999/09/09 21:54:29
@@ -113,7 +113,7 @@
 
       # Then we walk through the descriptions plus a few builtin ones.
 
-      set -- "${(@)argv[nth+1,-1]}" '*=FILE*:file:_files' \
+      set -- "$@" '*=FILE*:file:_files' \
              '*=(DIR|PATH)*:directory:_files -/' '*:unknown:'
 
       while (( $# )); do
-- 
Tanaka Akira


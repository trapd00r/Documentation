From zsh-users-return-12099-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 24 15:03:25 2007
Return-Path: <zsh-users-return-12099-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25648 invoked from network); 24 Oct 2007 15:03:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Oct 2007 15:03:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 20625 invoked from network); 24 Oct 2007 15:03:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2007 15:03:09 -0000
Received: (qmail 7172 invoked by alias); 24 Oct 2007 15:02:58 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12099
Received: (qmail 7157 invoked from network); 24 Oct 2007 15:02:58 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Oct 2007 15:02:58 -0000
Received: (qmail 19286 invoked from network); 24 Oct 2007 15:02:58 -0000
Received: from smtp.ctxuk.citrix.com (HELO SMTP.EU.CITRIX.COM) (62.200.22.115)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2007 15:02:52 -0000
X-IronPort-AV: E=Sophos;i="4.21,325,1188792000"; 
   d="scan'208";a="11509640"
Received: from lonpexchmx01.citrite.net ([10.30.224.191])
  by LONPIPO01.EU.CITRIX.COM with ESMTP; 24 Oct 2007 11:02:50 -0400
Received: from lonpexch01.citrite.net ([10.30.224.136]) by lonpexchmx01.citrite.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 24 Oct 2007 16:01:52 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Slow compdump on Vista - no .zcompdump created
Date: Wed, 24 Oct 2007 16:01:43 +0100
Message-ID: <DD74FBB8EE28D441903D56487861CD9D2271979B@lonpexch01.citrite.net>
In-Reply-To: <016801c8164c$301c5d70$90551850$@com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Slow compdump on Vista - no .zcompdump created
thread-index: AcgWQWjxaiC/Ru7GTv+tUqmiXiYgJQACohYwAABJ4TA=
References: <DD74FBB8EE28D441903D56487861CD9D22719534@lonpexch01.citrite.net> <016801c8164c$301c5d70$90551850$@com>
From: "John Cooper" <John.Cooper@citrix.com>
To: "Seth Kurtzberg" <seth@cql.com>,
	"Zsh Users" <zsh-users@sunsite.dk>
Cc: "John Cooper" <John.Cooper@citrix.com>
X-OriginalArrivalTime: 24 Oct 2007 15:01:52.0287 (UTC) FILETIME=[CF65BAF0:01C8164E]

It's usable although noticeably sluggish (and I have a 2.8GHz dual-core
machine with 4Gb memory!).
I've just posted to the cygwin mailing list about "ls" being much slower
on Vista compared to XP:
http://cygwin.com/ml/cygwin/2007-10/msg00500.html

I did encounter the fork problem but ran "rebaseall" to fix things up.
Perhaps this rebasing has somehow contributed to the slowdown?

    --- John.

-----Original Message-----
From: Seth Kurtzberg [mailto:seth@cql.com]=20
Sent: 24 October 2007 15:43
To: John Cooper; 'Zsh Users'
Subject: RE: Slow compdump on Vista - no .zcompdump created

Does your question imply that zsh with cygwin is more or less functional
on
vista?  My experience with it, confirmed by many postings around the
'net,
is that the cygwin fork functionality is completely broken on vista and
this
makes zsh essentially unusable on vista.  Has there been a fix for this
problem, or has the situation changed for some other reason?

Thanks in advance,

Seth Kurtzberg
Software Engineer
Specializing in Security, Reliability, and the Hardware/Software
Interface



-----Original Message-----
From: John Cooper [mailto:John.Cooper@citrix.com]=20
Sent: Wednesday, October 24, 2007 9:26 AM
To: Zsh Users
Subject: Slow compdump on Vista - no .zcompdump created

Each time I start cygwin zsh (4.3.2 or 4.3.4) on Vista, compinit takes
around 12 seconds and no .zcompdump file is created:

C:\>zsh -f
$P$Gautoload -U compinit
$P$Gcd
$P$Gdate; compinit; date
Wed Oct 24 13:56:08 GMTDT 2007
Wed Oct 24 13:56:20 GMTDT 2007
$P$Gls .zcompdump
ls: .zcompdump: No such file or directory
$P$G

"compinit -u" and "compinit -C" take about the same time.


With zsh 4.2.6 on WinXP, when I run "compinit" I get prompted:
  Ignore insecure directories and continue [ny]?

(this prompt isn't shown with zsh 4.3.{2,4} on Vista.)

If I type "y" or run "compinit -C" it runs much faster in zsh 4.2.6 on
WinXP (although a .zcompdump file is still not created):

$P$Gdate; compinit -C; date
Wed Oct 24 14:08:16 GMTDT 2007
Wed Oct 24 14:08:17 GMTDT 2007
$P$G

Any ideas on how to speed it up on zsh 4.3.4 on Vista, and why the
.zcompdump file is not being created (`man zshall' states it should be
created by default)?

Thanks,

    --- John.


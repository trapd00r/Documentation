From schaefer@candle.brasslantern.com Fri Jul 26 03:08:59 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id DAA22293 for <mason@werple.mira.net.au>; Fri, 26 Jul 1996 03:08:56 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id NAA24443; Thu, 25 Jul 1996 13:02:23 -0400 (EDT)
Resent-Date: Thu, 25 Jul 1996 13:02:23 -0400 (EDT)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <960725100325.ZM13654@candle.brasslantern.com>
Date: Thu, 25 Jul 1996 10:03:25 -0700
In-Reply-To: Markku.Jarvinen@tpo.fi
        "a bug in zsh?" (Jul 25,  3:49pm)
References: <199607251249.PAA14251@christine.tpo.fi>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.702 02jul96)
To: Markku.Jarvinen@tpo.fi, zsh-workers@math.gatech.edu
Subject: Re: a bug in zsh?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"45kG92.0.rz5.UYwzn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1767
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1293
Status: O

On Jul 25,  3:49pm, Markku.Jarvinen@tpo.fi wrote:
} Subject: a bug in zsh?
}
} BUG: when option chaselinks is set and I run zsh on a host
}      which has automounted homedirectories command 'pwd'
}      does weird things (i.e. changes directory to some random
}      directory that was first mounted using automount).

That's because the automounter is implemented by mounting the directory
somewhere else and then setting up symlinks in the magic automount
directory to point to the actual mount location.  Zsh is doing the
right thing with respect to the symlinks.

} Any suggestions other than turning chaselinks off?

Yeah; turn the automounter off.

There might be something that could be done by checking the results of
stat() on ".." and "." [which zgetcwd() is already doing] and change
the behavior when ".." crosses over to a different logical device.  I'm
not sure what, though.  You'd have to get the original path used by cd
back, and start working *down* until you found the directory at which
the device change took place.

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern

New male in /home/schaefer:
>N  2 Justin William Schaefer  Sat May 11 03:43  53/4040  "Happy Birthday"



From zsh-workers-return-7148-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 14 16:29:15 1999
Return-Path: <zsh-workers-return-7148-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6821 invoked from network); 14 Jul 1999 16:29:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Jul 1999 16:29:13 -0000
Received: (qmail 17996 invoked by alias); 14 Jul 1999 16:28:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7148
Received: (qmail 17986 invoked from network); 14 Jul 1999 16:28:44 -0000
Message-Id: <9907141557.AA29506@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: INSTALL note about User completion functions
Date: Wed, 14 Jul 1999 17:57:49 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Here's a warning for INSTALL about completion functions in the User
subdirectory, which seems to be worrying people.  The compsys manual
already contains a note to the same effect.

If anybody wants to rewrite the entire installation system yet again to
make system-specific completions easier, they are very welcome, but
otherwise, as it is likely to mean yet more administrative difficulties, it
won't happen soon.

The best way to handle multiple versions of a command such as _tar is for
the completion function to decide.  This would certainly be the best way to
handle GNU vs. non-GNU versions of commands, which often exist on the same
system under the same names in different directories.  _long_options could
be modified to run `cmd --help 2>/dev/null' and return failure if that
doesn't work, for example.

Any time that isn't appropriate, such as when versions of commands are
entirely incompatible (infrequent, I hope), or for commands which only
exist on some systems, the best way of dealing with specific functions is
to install the right ones at installation time automatically, based on the
system type, since most administrators aren't going to sort through loads
of functions deciding what to install.  For example, you could get
configure to modify FUNCTIONS_INSTALL to add only specific files in a
System directory, or something.

The best way for any of this to happen is for someone to write what they
want.

Including or not including different function directories in fpath is going
to have to be done by a clued-up administrator, so I don't think make
--enable-function-subdirs the default is necessary.

--- INSTALL.blurb	Wed Jul 14 17:34:14 1999
+++ INSTALL	Wed Jul 14 17:35:42 1999
@@ -246,9 +246,12 @@
   FUNCTIONS_INSTALL='Core/* Base/* Builtins/* User/* Commands/* Zle/*'
 and if the --enable-dynamic option was given, the functions in
 Functions/Zftp, which require the zftp module to be available (see the
-zshzftpsys manual page), will be included as well.  There are also some
-miscellaneous functions with documentation in comments; the complete set
-of functions can be installed with
+zshzftpsys manual page), will be included as well.  Note, however, that
+some of the functions in the User subdirectory are version- and
+system-specific.
+
+There are also some miscellaneous functions with documentation in comments;
+the complete set of functions can be installed with
   FUNCTIONS_INSTALL='Core/* Base/* Builtins/* User/* Commands/* \
   Misc/* Zftp/* Zle/*'
 Note you should set this by hand to include `Zftp/*' if you have zftp

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


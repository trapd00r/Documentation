From zsh-workers-return-18368-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 19 16:13:11 2003
Return-Path: <zsh-workers-return-18368-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4924 invoked from network); 19 Mar 2003 16:13:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Mar 2003 16:13:10 -0000
Received: (qmail 11305 invoked by alias); 19 Mar 2003 16:13:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18368
Received: (qmail 11294 invoked from network); 19 Mar 2003 16:13:04 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 19 Mar 2003 16:13:04 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [4.64.233.231] by sunsite.dk (MessageWall 1.0.8) with SMTP; 19 Mar 2003 16:13:3 -0000
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.11.6/8.11.6) id h2JGD2o01588
	for zsh-workers@sunsite.dk; Wed, 19 Mar 2003 08:13:02 -0800
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1030319161301.ZM1587@candle.brasslantern.com>
Date: Wed, 19 Mar 2003 16:13:01 +0000
In-Reply-To: <3E77F2B5.E50A6FB@cup.hp.com>
Comments: In reply to Manish Ahluwalia <manish@cup.hp.com>
        "zsh - hpux 11i prompt does not work" (Mar 18,  8:31pm)
References: <3E77F2B5.E50A6FB@cup.hp.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Re: zsh - hpux 11i prompt does not work
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 18,  8:31pm, Manish Ahluwalia wrote:
} 
} I use zsh on hpux. I have noticed a problem with zsh and hpux version
} 11i. I have tried zsh versions 3.0.5 and 4.0.4 with the same results.

Both this and the backspace problem are due to the HP-UX curses libraries.
The latest Etc/MACHINES file says this:

          Some of the special keys on the keyboard (backspace, delete)
          have been found to stop functioning.  One suggested fix is
          to alter the way the curses library is linked in the Makefile.
          Replacing `-lcurses' with `-lHcurses -lcurses' in the libraries
          is reported to fix.  An attempt to fix this in configure
          is apparently ineffective; more information would be appreciated
          as the maintainers do not have access to an HP-UX system.

The "apparently ineffective" configure patch (actually for the file
zshconfig.ac) is:

--- branch/zshconfig.ac      Wed Mar 19 07:51:26 2003
+++ current/zshconfig.ac     Sat Mar 15 09:29:15 2003
@@ -556,6 +563,7 @@
 
 dnl Prefer BSD termcap library to SysV curses library, except on certain
 dnl SYSV-derived systems.
+dnl On HPUX, Hcurses is reported to work better than curses.
 AC_ARG_WITH(curses-terminfo,
 [  --with-curses-terminfo     use terminfo support from curses library],
 [if test x$withval = xyes; then
@@ -566,7 +574,7 @@
 fi],
 [case "$host_os" in
   hpux10.*|hpux11.*|solaris*)
-      termcap_curses_order="curses ncurses termcap" ;;
+      termcap_curses_order="Hcurses curses ncurses termcap" ;;
   *)             termcap_curses_order="termcap curses ncurses" ;;
 esac])dnl
 


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


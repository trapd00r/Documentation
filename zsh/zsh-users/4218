From zsh-users-return-4218-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 11 12:16:09 2001
Return-Path: <zsh-users-return-4218-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3754 invoked from network); 11 Sep 2001 12:16:08 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Sep 2001 12:16:08 -0000
Received: (qmail 4232 invoked by alias); 11 Sep 2001 12:15:26 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4218
Received: (qmail 4216 invoked from network); 11 Sep 2001 12:15:24 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: lordzork@lordzork.com, zsh-users@sunsite.dk
Subject: RE: error on TTY read: no such file or directory
Date: Tue, 11 Sep 2001 16:15:14 +0400
Message-ID: <001f01c13abb$6997dca0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
In-reply-to: <20010910200737.A6256@hithaeglir.net>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal


To all - PLEASE, indicate at least

- your Zsh version
- your operating system
- for Linux - distribution, and/or glibc version. Most people tend to
name kernel version but it hardly matters (in most cases).
- anything else you deem approrpiate

 
> this is very strange.
> 
> i login to the host in question as root from a tty device. lala,
regular
> login stuff, zshrc, ps1, etc. then, if i try to type something,
> anything, i get
> 
> zsh: error on TTY read: no such file or directory
> 
> then it logs me out. note that i am not actually typing a full command
> and hitting enter, i get the error after typing only one letter.
> 
> if i connect to the host via ssh or telnet, everything is fine. if i
> login from a tty using a different shell (ie, bash or ash), everything
> is fine. if i login from a tty with another account that uses zsh,
> everything is fine.
> 

I had similar problem under Mandrake cooker with specific version of
util-linux. The way login tried to "free" controlling terminal resulted
in process having *no* controlling terminal. Ash did not care, bash
tried to explicitly reopen stdin, zsh had problems. It looked different,
but may be it is attributed to different zsh version (I do not remember
what version I had at this time).

Please, login on other console and check zsh processes if they have
controlling tty. 


-andrej


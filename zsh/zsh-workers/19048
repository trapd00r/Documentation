From zsh-workers-return-19048-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 09 02:39:25 2003
Return-Path: <zsh-workers-return-19048-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11582 invoked from network); 9 Sep 2003 02:39:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Sep 2003 02:39:24 -0000
Received: (qmail 5700 invoked by alias); 9 Sep 2003 02:39:19 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19048
Received: (qmail 5688 invoked from network); 9 Sep 2003 02:39:19 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 9 Sep 2003 02:39:19 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [144.80.130.20] by sunsite.dk (MessageWall 1.0.8) with SMTP; 9 Sep 2003 2:39:19 -0000
X-IUP-Tag1: emfe2.cc.iup.edu
Received: from [24.53.175.228] (account bclg@iup.edu HELO quaternion)
  by emfe2.iup.edu (CommuniGate Pro SMTP 4.0.6)
  with ESMTP id 12637400; Mon, 08 Sep 2003 22:39:18 -0400
Received: from jason by quaternion with local (Exim 3.36 #1 (Debian))
	id 19wYPS-0002DT-00; Mon, 08 Sep 2003 22:39:14 -0400
Date: Mon, 8 Sep 2003 22:39:14 -0400
To: zsh-workers@sunsite.dk
Subject: possible bug in _arguments
Message-ID: <20030909023914.GC8484@iup.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.4i
From: Jason McCarty <bclg@iup.edu>

Hi,

I'm having a problem completing certain lists of words in a completion I
wrote, which appears to be a bug.

When I use this completion:

#compdef fakecmd
#_arguments ':commands:(a-b a-d-e)' # works as expected
_arguments ':commands:((a-b:foo a-d-e:baz))'
              # insert a-c:bar ^ here and it works as expected

typing "fakecmd a[tab]" completes "a-", but it leaves the cursor on the
hyphen instead of after it. If I use the first form instead, it puts the
cursor after the hyphen, as I would expect. It also works as expected if
I insert another word with a single hyphen, as indicated. I came across
this while writing a completion for tla [1], which has the commands
my-id, my-default-archive, and my-revision-library. Like my example,
typing "tla my[tab]" leaves the cursor on the first hyphen.

Any thoughts on this?

Thanks,

Jason McCarty

[1] http://savannah.gnu.org/projects/gnu-arch


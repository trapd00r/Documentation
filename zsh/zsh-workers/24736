From zsh-workers-return-24736-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 26 15:09:41 2008
Return-Path: <zsh-workers-return-24736-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16390 invoked from network); 26 Mar 2008 15:09:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Mar 2008 15:09:39 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92281 invoked from network); 26 Mar 2008 15:09:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Mar 2008 15:09:34 -0000
Received: (qmail 16527 invoked by alias); 26 Mar 2008 15:09:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24736
Received: (qmail 16508 invoked from network); 26 Mar 2008 15:09:29 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 26 Mar 2008 15:09:29 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id CB2AE8097826
	for <zsh-workers@sunsite.dk>; Wed, 26 Mar 2008 16:09:25 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly10d.srv.mailcontrol.com (MailControl) with ESMTP id m2QF7eca011468
	for <zsh-workers@sunsite.dk>; Wed, 26 Mar 2008 15:09:25 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 26 Mar 2008 15:00:41 +0000
Date: Wed, 26 Mar 2008 15:00:41 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk (Zsh hackers' list)
Subject: Re: * Re: Failing tests on 4.3.5-dev-2 on Solaris 10 w/Sun Studio
 12
Message-ID: <20080326150041.55fac376@news01>
In-Reply-To: <E7EA844B-B77F-486B-B5E6-DB01FB3EE55C@blastwave.org>
References: <15040.1206540114@csr.com>
	<E7EA844B-B77F-486B-B5E6-DB01FB3EE55C@blastwave.org>
Organization: CSR
X-Mailer: Claws Mail 3.3.1 (GTK+ 2.12.5; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 26 Mar 2008 15:00:41.0288 (UTC) FILETIME=[28B1A480:01C88F52]
X-Scanned-By: MailControl A-08-00-04 (www.mailcontrol.com) on 10.68.0.120
X-Virus-Scanned: ClamAV 0.91.2/6396/Wed Mar 26 12:29:12 2008 on bifrost
X-Virus-Status: Clean

On Wed, 26 Mar 2008 15:35:35 +0100
Dagobert Michelsen <dam@blastwave.org> wrote:
> I re-ran the testsuite and again got some errors on Solaris:

Thanks.  This should fix them.  (Moved to zsh-workers.)

> ./A02alias.ztst: starting.
> Test ./A02alias.ztst failed: bad status 1, expected 127 from:
>    \foo foo
> Error output:
> /opt/csw/bin/foo: 2: not found
> Was testing: Not aliasing

Oh, good grief.  I suppose it had to happen.  (I already knew about "bar".)

> ./D07multibyte.ztst: starting.
> Testing multibyte with locale cs_CZ.UTF-8
> *** /tmp/zsh.ztst.out.23453     Wed Mar 26 15:30:16 2008
> --- /tmp/zsh.ztst.tout.23453    Wed Mar 26 15:30:16 2008
> ***************
> *** 4,12 ****
>    ngs20txt
>    ngs100txt
>    ngs200txt
> - ngs100txt
> - ngs10txt
>    ngs1txt
> ! ngs200txt
> ! ngs20txt
>    ngs2txt
> --- 4,12 ----
>    ngs20txt
>    ngs100txt
>    ngs200txt
>    ngs1txt
> ! ngs10txt
> ! ngs100txt
>    ngs2txt
> + ngs20txt
> + ngs200txt
> Test ./D07multibyte.ztst failed: output differs from expected as  
> shown above for:
>    touch ngs1txt ngs2txt ngs10txt ngs20txt ngs100txt ngs200txt
>    setopt numericglobsort
>    print -l ngs*
>    unsetopt numericglobsort
>    print -l ngs*
> Was testing: NUMERIC_GLOB_SORT option in UTF-8 locale

Hmm... we don't really care about the ordering with NUMERIC_GLOB_SORT
turned off, which is what's failing.  In that case it's down to the
system.

Index: Test/A02alias.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/A02alias.ztst,v
retrieving revision 1.4
diff -u -r1.4 A02alias.ztst
--- Test/A02alias.ztst	9 Jul 2001 18:31:25 -0000	1.4
+++ Test/A02alias.ztst	26 Mar 2008 14:56:16 -0000
@@ -14,9 +14,9 @@
 0:Global aliasing
 >echo
 
-  \foo foo
+  \ThisCommandDefinitelyDoesNotExist foo
 127:Not aliasing
-?(eval):1: command not found: foo
+?(eval):1: command not found: ThisCommandDefinitelyDoesNotExist
 
   \bar \bar
 0:Aliasing with a backslash
Index: Test/D07multibyte.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/D07multibyte.ztst,v
retrieving revision 1.24
diff -u -r1.24 D07multibyte.ztst
--- Test/D07multibyte.ztst	3 Mar 2008 16:14:52 -0000	1.24
+++ Test/D07multibyte.ztst	26 Mar 2008 14:56:16 -0000
@@ -363,8 +363,6 @@
   touch ngs1txt ngs2txt ngs10txt ngs20txt ngs100txt ngs200txt
   setopt numericglobsort
   print -l ngs*
-  unsetopt numericglobsort
-  print -l ngs*
 0:NUMERIC_GLOB_SORT option in UTF-8 locale
 >ngs1txt
 >ngs2txt
@@ -372,12 +370,6 @@
 >ngs20txt
 >ngs100txt
 >ngs200txt
->ngs100txt
->ngs10txt
->ngs1txt
->ngs200txt
->ngs20txt
->ngs2txt
 
 # Not strictly multibyte, but gives us a well-defined locale for testing.
   foo=$'X\xc0Y\x07Z\x7fT'

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


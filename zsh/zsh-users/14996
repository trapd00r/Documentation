From zsh-users-return-14996-mason-zsh=primenet.com.au@zsh.org Fri Apr 09 15:03:50 2010
Return-Path: <zsh-users-return-14996-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23425 invoked by alias); 9 Apr 2010 15:03:49 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14996
Received: (qmail 25320 invoked from network); 9 Apr 2010 15:03:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,
	T_TO_NO_BRKTS_FREEMAIL autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.220.224 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:from:to:subject:date
         :user-agent:mime-version:content-type:content-transfer-encoding
         :message-id;
        bh=VxO1rLr2K7Gej2ExbqJTXGSRrJVUbtpp0AqikXVvIjY=;
        b=jZAh8TCgqc54wMAPoJIGmvnRqY6QrUzIryo5YkB6pOyEsQPwZO1Wiv0PEG9z1DAuRH
         0JDAI8tXwyxZ7UXAli7yPfOShXkvYP06Mid47Lh9LTOW1t0e3B7lHPbIbkWu9o0PSIzz
         YUR3c1JK9nv+AY+Ymi0jXA2tC24oe1DjuUPUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:user-agent:mime-version:content-type
         :content-transfer-encoding:message-id;
        b=FT1Uy9iQ59SV09GCYHN6j7PZCIjxGkkTrxIQu6JtHUy7+cnFGl/c0S3BvftuW13HDx
         qYDTxGH5Sa59byIXEbzrj7puyzZwgXNOMmMvZg1aWp40UFUe5tNw7eOaXdjgxMHlVuou
         GZcIRD/OyMNn3Q77zEdguvL75M8XN1xwh2VWw=
From: Khelben Blackstaff <eye.of.the.8eholder@gmail.com>
To: zsh-users@zsh.org
Subject: Weird completion behavior in middle of word
Date: Fri, 9 Apr 2010 18:03:41 +0300
User-Agent: KMail/1.13.2 (Linux/2.6.33; KDE/4.4.2; x86_64; ; )
MIME-Version: 1.0
Content-Type: Text/Plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Message-Id: <201004091803.41532.eye.of.the.8eholder@gmail.com>

Hello.

I have enabled complete_in_word because i use completion in middle of word 
frequently. I noticed a behavior for some time but didn't ask here because
i don't know how to describe it correctly. Nevertheless i will try to.

When i try to complete in the middle of a word, sometimes the whole word
is deleted. It doesn't happen every time though. I have the impression that it
only happens when the pattern contains "../"

For example, consider the following:
% mv ../geo-old/* .

Lets say i want to change "geo-old" to "geo-new" then i will move the cursor
to "o", type "n" and then press tab. The normal behavior is to give me
"geo-newold" which happens correctly if there is no "../". In this case,

% mv ../geo-nold/* .  (cursor is after the n)
if i press tab now the whole "geo-old/*" is erased and i get
% mv .. .

I have also captured it in video, but it is 40K so i don't know if it is
proper to attach it here.

My first guess was that i have something wrong in my configs, but i don't
have many stuff. The zsh version is 4.3.10

The relevant options in my config files are the following:
[zshenv]
setopt complete_in_word
setopt extended_glob
setopt magic_equal_subst
setopt no_nomatch

[zshrc]
zstyle ':completion:*' use-compctl false
zstyle ':completion:*' group-name ''
zstyle ':completion:*' ignored-patterns '_*'
zstyle ':completion:*' completer _complete _prefix _files

Other statements are declarations of variables,aliases,etc.

Thank you for your time.


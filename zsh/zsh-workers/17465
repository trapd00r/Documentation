From zsh-workers-return-17465-mason-zsh=primenet.com.au@sunsite.dk Wed Jul 17 22:24:40 2002
Return-Path: <zsh-workers-return-17465-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15738 invoked from network); 17 Jul 2002 22:24:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Jul 2002 22:24:39 -0000
Received: (qmail 22991 invoked by alias); 17 Jul 2002 22:24:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17465
Received: (qmail 22979 invoked from network); 17 Jul 2002 22:24:32 -0000
Message-ID: <007701c22de0$88721fa0$0601a8c0@vectravl400mt>
From: "Vagn Johansen" <vjo@mail.tele.dk>
To: "Zsh hackers list" <zsh-workers@sunsite.dk>
References: <26766.1026934940@csr.com>
Subject: Re: Problem with /cygdrive and (#i) globbing flag 
Date: Thu, 18 Jul 2002 00:23:10 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 5.50.4133.2400
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400


From: "Peter Stephenson"
> I think you can get away with `mkdir /cygdrive' --- at least it seems to
> work for me.  Now zsh can see it when it looks at the root directory,
> but cygwin still treats the path specially, so reading /cygdrive shows
> all the drives.

This does not seem change anything apart from being able to complete
/cyg<TAB>
to /cygdrive (but not the subdirectories like "zstyle .. fake-files .. "
can).

> Another sure-fire method is to put the (#i) after the bit you don't need
> to compare case-insensitively, i.e. /cygdrive/c/(#i)c*.  This should be
> faster, for reasons which the first paragraph should indicate.

Yep, this works.

The reason I bumped into this problem is because I compiled
my own zsh with implicit '(#i)' in front of all filename generation
occurrences.
By your description of the zsh internals this is a crappy approach.

This is a major nuisance: If I want to do something like

  grep na*/100/src/*.{c,h,cpp}

I really have to use

  grep (#i)na*(#I)/100/(#i)src/*.{c,h,cpp}

> Of course, zsh doesn't *need* to do all that work to get case
> insensitivity under Windows, but it would be hard work convincing it
> internally.
>
I assume you mean that zsh does a lot of work because it thinks the
underlying file
system is case-sensitive.

Vagn Johansen


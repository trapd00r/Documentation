From zsh-workers-request@euclid.skiles.gatech.edu Mon Jun 30 08:30:25 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 26048 invoked from network); 30 Jun 1997 08:30:23 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 30 Jun 1997 08:30:23 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA16815; Mon, 30 Jun 1997 04:09:46 -0400 (EDT)
Resent-Date: Mon, 30 Jun 1997 04:09:46 -0400 (EDT)
Message-Id: <199706300813.KAA20716@sgi.ifh.de>
To: Amol Deshpande <amold@MICROSOFT.com>,
        zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: FAQ, German Umlauts (patch) 
In-reply-to: "Amol Deshpande"'s message of "Fri, 27 Jun 1997 12:06:57 MET."
             <C19803AFAA39CF11AD5700805F70712004D386FF@RED-64-MSG.dns.microsoft.com> 
Date: Mon, 30 Jun 1997 10:13:49 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"H-JBI2.0.g64.9dsjp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3325
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Amol Deshpande wrote:
> Peter,
> Should this also be applicable to 3.0.x ? Also, would printing eight-bit
> characters  be affected by inittyptab ? 
> thanks,

Here's a patch for zsh 3.0.x.  The internal zsh table (set up in
ininittyptab()) isn't used in this case; isprint() is used in order to
give the system a chance of deciding what's printable.

*** Doc/zshoptions.man.p8	Mon Oct 21 21:01:15 1996
--- Doc/zshoptions.man	Mon Jun 30 09:36:36 1997
***************
*** 416,421 ****
--- 416,426 ----
  .BR trap " and"
  .BR unset .
  .TP
+ \fBPRINT_EIGHT_BIT\fP
+ Print eight bit characters literally in completion lists, etc.
+ This option is not necessary if your system correctly returns the
+ printability of eight bit characters (see ctype(3)).
+ .TP
  \fBPRINT_EXIT_VALUE\fP (\-\fB1\fP)
  Print the exit value of programs with non-zero exit status.
  .TP
*** Src/globals.h.p8	Tue Jun  3 07:11:26 1997
--- Src/globals.h	Mon Jun 30 10:04:01 1997
***************
*** 762,767 ****
--- 762,768 ----
      {"overstrike", 		0,    0,    0},
      {"pathdirs", 		'Q',  0,    0},
      {"posixbuiltins",		0,    0,    OPT_EMULATE|OPT_BOURNE},
+     {"printeightbit", 		0,    0,    0},
      {"printexitvalue", 		'1',  0,    0},
      {"privileged", 		'p',  'p',  OPT_SPECIAL},
      {"promptcr", 		x'V', 0,    OPT_ALL},
*** Src/utils.c.p8	Tue Jun  3 07:11:28 1997
--- Src/utils.c	Mon Jun 30 09:39:48 1997
***************
*** 174,179 ****
--- 174,181 ----
      if (isprint(c))
  	goto done;
      if (c & 0x80) {
+ 	if (isset(PRINTEIGHTBIT))
+ 	    goto done;
  	*s++ = '\\';
  	*s++ = 'M';
  	*s++ = '-';
*** Src/zsh.h.p8	Tue Jun  3 07:11:28 1997
--- Src/zsh.h	Mon Jun 30 09:37:01 1997
***************
*** 1124,1129 ****
--- 1124,1130 ----
      OVERSTRIKE,
      PATHDIRS,
      POSIXBUILTINS,
+     PRINTEIGHTBIT,
      PRINTEXITVALUE,
      PRIVILEGED,
      PROMPTCR,

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutsches Elektronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


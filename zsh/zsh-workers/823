From hzoli@cs.elte.hu Thu Mar 14 08:12:51 1996
Received: from euclid.skiles.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.4/8.7.3) with ESMTP id IAA24735 for <mason@werple.mira.net.au>; Thu, 14 Mar 1996 08:12:48 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id PAA26395; Wed, 13 Mar 1996 15:57:50 -0500 (EST)
Resent-Date: Wed, 13 Mar 1996 15:57:50 -0500 (EST)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199603132057.VAA00688@bolyai.cs.elte.hu>
Subject: Re: Parameter Expansion Bug
To: esky@cs.ucla.edu (Eskandar Ensafi)
Date: Wed, 13 Mar 1996 21:57:08 +0100 (MET)
Cc: zsh-workers@math.gatech.edu (zsh-workers)
In-Reply-To: <9603132004.AA08513@marathon.cs.ucla.edu> from "Eskandar Ensafi" at Mar 13, 96 12:04:10 pm
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4 PL25 ME8b+]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"PIcej2.0.LS6.ERpHn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/823
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 744
Status: OR

> The following does not work properly in zsh-2.6-beta12.  Please note that

I cannot reproduce it under beta13-hzoli13.  Note that expansion is quite
buggy in the vanilla version.  I rewrote most of it so I have no idea what
causes this in the old code.

> myhost% foo () { echo "${argv##^-*}" }    # Show only -option arguments.

Probably you wanted "${argv[@]##^-*}" here.  Without [@] array elements are
joined together using $IFS[1] and the result is used with ##.  Alternatively
you can omit the double quotes.

Also use print -r -- instead of echo for testing as echo processes some
options.

> myhost% foo -a -b a f                     # OK. Ouput was -a -b as expected.
> -a -b

No, the expected output is -a -b a f.

Cheers,

Zoltan



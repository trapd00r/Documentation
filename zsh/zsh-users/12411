From zsh-users-return-12411-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 10 09:58:53 2008
Return-Path: <zsh-users-return-12411-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15078 invoked from network); 10 Jan 2008 09:58:44 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jan 2008 09:58:44 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 84843 invoked from network); 10 Jan 2008 09:58:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jan 2008 09:58:32 -0000
Received: (qmail 22858 invoked by alias); 10 Jan 2008 09:58:24 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12411
Received: (qmail 22844 invoked from network); 10 Jan 2008 09:58:23 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 10 Jan 2008 09:58:23 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id E11468058FF2
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 10:58:21 +0100 (CET)
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 10:58:21 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly16d.srv.mailcontrol.com (MailControl) with ESMTP id m0A9vle2027011
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 09:58:20 GMT
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 10 Jan 2008 09:58:02 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.1/8.13.4) with ESMTP id m0A9w2VU015164
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 09:58:02 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.1/8.14.1/Submit) with ESMTP id m0A9w2jj015161
	for <zsh-users@sunsite.dk>; Thu, 10 Jan 2008 09:58:02 GMT
Message-Id: <200801100958.m0A9w2jj015161@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: [ -f glob ]
In-reply-to: <20080110044842.63406.qmail@smasher.org>
References: <20080109091335.49226.qmail@smasher.org> <200801091239.m09CdmR9003125@news01.csr.com> <20080110044842.63406.qmail@smasher.org>
Comments: In-reply-to Atom Smasher <atom@smasher.org>
   message dated "Thu, 10 Jan 2008 17:48:41 +1300."
Date: Thu, 10 Jan 2008 09:58:02 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 10 Jan 2008 09:58:02.0967 (UTC) FILETIME=[4A18BE70:01C8536F]
X-Scanned-By: MailControl A-08-00-01 (www.mailcontrol.com) on 10.68.0.126
X-Virus-Scanned: ClamAV using ClamSMTP

Atom Smasher wrote:
> On Wed, 9 Jan 2008, Peter Stephenson wrote:
> 
> > This is broken: -f expectes exactly one argument and you're giving it an 
> > expression that expands to multiple arguments.
> ================
> 
> but, why would it work on bsd and not work on solaris?

You're into implementation-specific land, from whose Bourne shell no
traveller returns.

Schematically, you've got something like

[ -f file1 file2 file3 ]

(number not that important).  The "-f file1" is a valid test.  At the
file2 I would expect the test implementation simply to give up and
return an error, but there is so much hackery to get round the fact that
keywords in the test aren't syntactically marked and that the default
test is for a non-empty string even, in some cases, if the string looks
like a keyword that I don't think it's worth worrying about, just
noting that "[" and "test" mean trouble.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


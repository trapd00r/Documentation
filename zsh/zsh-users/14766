From zsh-users-return-14766-mason-zsh=primenet.com.au@zsh.org Tue Feb 02 09:27:44 2010
Return-Path: <zsh-users-return-14766-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2204 invoked by alias); 2 Feb 2010 09:27:44 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14766
Received: (qmail 26829 invoked from network); 2 Feb 2010 09:27:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at seiken.de does not designate permitted sender hosts)
From: Joke de Buhr <joke@seiken.de>
Organization: http://www.seiken.de/
To: zsh-users@zsh.org
Subject: Re: Want to replace bash w zsh as system shell on Ubuntu
Date: Tue, 2 Feb 2010 10:07:29 +0100
User-Agent: KMail/1.12.2 (Linux/2.6.31-17-generic; KDE/4.3.2; x86_64; ; )
References: <20100202081546.GA5930@panix.com>
In-Reply-To: <20100202081546.GA5930@panix.com>
MIME-Version: 1.0
Content-Type: multipart/signed;
  boundary="nextPart3036226.NhxTmkU7sK";
  protocol="application/pgp-signature";
  micalg=pgp-sha1
Content-Transfer-Encoding: 7bit
Message-Id: <201002021007.35234.joke@seiken.de>

--nextPart3036226.NhxTmkU7sK
Content-Type: Text/Plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable

Replacing the system shell is not a very good advice. Recent versions of=20
ubuntu use dash (debian almquist shell) not bash as it's default shell.

Dash is a minimalistic posix shell which doesn't provide much builtin=20
commands. It's considered faster than bash. Ubuntu uses dash to speed up th=
e=20
booting process.

Replacing the default system shell (the shell getting started via /bin/sh) =
can=20
be harmful. Some init scripts may stop working. Therefore it's not a good i=
dea=20
to change default system shell. DON'T do it unless you're completely sure a=
ll=20
init scripts will work with zsh.


Running "sudo -s" will start a root session of using the shell specified=20
within the environmental variable SHELL.

To start a root session using zsh run:     SHELL=3Dzsh sudo -s
to start a root session using bash run:    SHELL=3Dsh sudo -s
to start a root session using dash run:    SHELL=3Ddash sudo -s

In most cases it's enough to start a session using your current shell by=20
running "sudo -s" unless you exported a different SHELL in your startup=20
scripts.

If you get the error message "sudo: shell: command not found" it's very lik=
ely=20
you misconfigured your shell. Calling:
  SHELL=3D/bin/non_existent_shell sudo -s
  sudo: shell: command not found
will cause such an error message.

The wisest thing to do is revert all the changes you've made and try running
"sudo -s" while you're in a zsh shell. If you don't get a root session you=
=20
shell you should check if your startup scripts export a different shell via.

Using a fresh ubuntu install you can just start a zsh root session from wit=
hin=20
a zsh user session by running "sudo -s". If you can't you have misconfigure=
d=20
your ubuntu.


On Tuesday 02 February 2010 09:15:47 rj wrote:
> In the couple of months I've been using Ubuntu at home, I've discovered
> I need to use the "sudo" command almost daily for administrative changes
> and systemwide, non-user-specific tasks and so on.
>=20
> I've already set up zsh as my user shell, but the system default shell is
> bash, and whenever I do a "sudo" I'm wrenched out of my familiar customiz=
ed
> zsh environment into a raw, minimally-config'd bash.
>=20
> Accordingly, I'd like to make zsh the system shell as well as having it be
> my user shell.  (I'm the only user on the system.)
>=20
> I already have, in /etc/zsh/, a .zprofile, .zshenv and .zshrc, copied from
> my homedir.  (Obviously some necessary tweaks & changes will have to be
> made in them.)
>=20
> My question is, (a) should those files be: /etc/.zprofile, etc/.zshenv and
> /etc/.zshrc, or is having them in an /etc/zsh/ subdir ok?
>=20
> and (b) (my main question), what exactly is the instruction-command(s) I'd
> use to tell the system to run zsh instead of bash as the system shell, and
> where would I need to put it?
>=20
> also (c), is there any reason I'd need, for this, to put any zsh config
> files in the /root directory?  I had one there briefly and just noticed
> that I still have a .zcompdump file there.  (Perhaps zsh configs are
> necessary there to start a root shell.  I'm a bit fuzzy on this stuff --
> for years I've only used zsh via ssh on other systems, and only as a user=
=2E)
>=20
> I think I want zsh to be the operative shell in all situations (unless th=
at
> would for some reason be imprudent), like on the infrequent occasion when
> I also do a "sudo su -" (i.e., start a root shell).
>=20
> Though just now I saw this:
>=20
> "To start a root shell, but keep the current shell's environment, use:
> sudo -s  (similar to sudo su)"
>=20
> (where "sudo i" give you root's environment configuration.)
>=20
> But "sudo -s", for me, returns "sudo: shell: command not found"
>=20
> Thanks for any clarity on these issues.
>=20

--nextPart3036226.NhxTmkU7sK
Content-Type: application/pgp-signature; name=signature.asc 
Content-Description: This is a digitally signed message part.

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iQIcBAABCgAGBQJLZ+tRAAoJEMcNQWzYfbLs6mIP/249X7s+EiVZ8N8Uom8/haB9
/Xf7Bum6yPsbZXWtwBBhvAYpwmlh/wutOGTp2ZYfMIDmhBRYsS6Z5I6g6YgyUp/U
UldSbsGBK7Tdc/KHPzLtUnDw+ydKgkY+5f5WoCo73aCwsFZ+D9yd9HEDSIT5ep5B
NP+vqvaMKnAkNo04CuPW0bdY+Y+vkielVpv4j70bBDZj/d3x1egx/r+ljMqWEj8q
YGGi2ZG06pD/dV23JGTlpsjgWBtAUX8nsyiVj/7kp3RO5NuKHr/djjZtF7XWdV5/
HGi7vXLthOQGYZA8usSTL4H7ClLE6sB8vBSnv+SVTKZVTrT/Q7bqm29PvYczUcTy
NrNFdl9St1HQhuqNPSf0ReH/M0xfgw5SoXKO/l9d2CBV2hDTk8B2QS/5IJgqDVNy
4U5fx3W1Ge4vlVLuWe7X9HinvZsc1jkBh5AeJvTooLxf7Sco2diEvrkV7qGTkc6F
06lFbYCNu8eoq17O1vWP7NHOxyMo5dltL+fgXEjphi0D1HqAE5rVlxM1I3/mgxmf
FCKcFBiBItmmKD65k5hkh1MDKjXoh9VsN6rIvdDeFr+cUaedr4cJAlEO5JzVLsKI
rh2sBVtrniX7JttOOSzIXA5Nw/16TOvSx1byzCa4m9RtcXB8nUPprR3eea4Ay4ue
wR2xG9NT4IxTqJBUfZdH
=K2xb
-----END PGP SIGNATURE-----

--nextPart3036226.NhxTmkU7sK--


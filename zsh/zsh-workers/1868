From zsh-workers-request@euclid.skiles.gatech.edu  Thu Aug  1 23:00:02 1996
Received: from euclid.skiles.gatech.edu (root@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id WAA00203 for <mason@primenet.com.au>; Thu, 1 Aug 1996 22:59:59 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA06697; Thu, 1 Aug 1996 08:25:13 -0400 (EDT)
Resent-Date: Thu, 1 Aug 1996 08:25:13 -0400 (EDT)
Message-Id: <199608011223.OAA21466@hera.cuci.nl>
From: srb@cuci.nl (Stephen R. van den Berg)
Date: Thu, 1 Aug 1996 14:23:04 +0200
In-Reply-To: Peter Stephenson's message as of 1996 Aug 1 Thu 13:43.
       <199608011143.NAA17587@hydra.ifh.de>
To: Peter Stephenson <pws@ifh.de>,
        zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: Procmail rejects zsh as being "broken"
Resent-Message-ID: <"4gY9P2.0.We1.e8A0o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1868
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Peter Stephenson <pws@ifh.de> wrote:
>It's *not* broken.  See the FAQ.  Zsh has arrays if you want the
>variable to have separate words.  Having it splitting on every single
>space in every single variable is the broken behaviour, inherited from
>the time when arrays didn't exist.

In zsh's eyes, it's a feature, no doubt.  If zsh pretends to be Bourne
shell compatible, it's a bug.

During the installation, I'm trying to determine if the shell that's being
used is at least basically Bourne shell compatible.  The zsh doesn't qualify,
at least not when it exhibits this behaviour by default.

>feel free to speak out).  The default behaviour is different in more
>subtle ways anyway.  The object is to make a usable shell, not one
>with every builtin historical limitation.

I have no problems with that, but if that is the case, the make utility
should *not* be allowed to pass on SHELL=/bin/zsh, because it's not Bourne
shell compatible.

>To more practical matters:  I suggest the test be

>        *zsh*) $RM src/_autotst
>	    setopt shwordsplit
>            $SHELL <<HERE
>            O="echo test"
>            exec 2>$DEVNULL 1>&2
>            \$O && echo test >src/_autotst
>HERE

>(i.e. with the added setopt line) since it's zsh-specific anyway.
>This works in all versions of zsh to implement the sh behaviour.

That's exactly the point.  I can't go in and change *every* shell script
to use "setopt shwordsplit" at the start just to make sure that it
works with a zsh (and generates an error with every other shell).
I intend to check if the default behaviour of the shell is Bourne
shell compatible.  And if the test fails, it isn't.
-- 
Sincerely,                                                          srb@cuci.nl
           Stephen R. van den Berg (AKA BuGless).
Auto repair rates: basic labor $40/hour; if you wait, $60; if you watch, $80;
if you ask questions, $100; if you help, $120; if you laugh, $140.


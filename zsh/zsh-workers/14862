From zsh-workers-return-14862-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 12 15:51:47 2001
Return-Path: <zsh-workers-return-14862-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29668 invoked from network); 12 Jun 2001 15:51:45 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Jun 2001 15:51:45 -0000
Received: (qmail 4924 invoked by alias); 12 Jun 2001 15:51:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14862
Received: (qmail 4910 invoked from network); 12 Jun 2001 15:51:14 -0000
Sender: kiddleo
Message-ID: <3B263A71.38B73754@u.genie.co.uk>
Date: Tue, 12 Jun 2001 16:51:13 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: seg fault from _arguments
References: <200106111142.NAA01861@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

This is using a zsh I compiled yesterday from the development branch:

To reproduce it do:
	mount -ob<tab>

There would need to be a space after the -o for this to complete to
something useful and it works well if a space is there. I just missed it
once.

Sven Wischnowsky wrote:
> 
> > worked. I don't suppose it is only the -S separator (as opposed to -s)
> > that compvalues doesn't like an empty string?
> 
> Yes.  Until now.

Great, thanks.

> Hrm.  I don't like either place for it.  These builtins are so
> specialised that they won't be of any use outside _values and
> _arguments.  Would it be enough if I add some comments in computil.c in
> the bin_* functions?

That would be fine and as good a place as any.

Also, if I replace the top of _values with this:
  local garbage subopts usecc
  zparseopts -D -a garbage C=usecc O:=subopts M: J: V: 1 2 n F: X:
  subopts=( "${(@P)subopts[2]}" )
why does completion after `mount -o block=' not work. I get things like
`%Bblock\ size%b', `-M', `-J', `ws' (i.e compadd options) offered as
completions instead of 512, 1024 and 2048. Note that this is on Linux so
that part of _mount.

Oliver


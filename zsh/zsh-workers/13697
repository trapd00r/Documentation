From zsh-workers-return-13697-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 22 01:56:29 2001
Return-Path: <zsh-workers-return-13697-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15831 invoked from network); 22 Mar 2001 01:56:28 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Mar 2001 01:56:28 -0000
Received: (qmail 5898 invoked by alias); 22 Mar 2001 01:56:19 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13697
Received: (qmail 5887 invoked from network); 22 Mar 2001 01:56:18 -0000
Message-ID: <XFMail.20010321175608.bobort@abacus.dorm.reed.edu>
X-Mailer: XFMail 1.4.4 on Linux
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
In-Reply-To: <1010322010138.ZM19106@candle.brasslantern.com>
Date: Wed, 21 Mar 2001 17:56:08 -0800 (PST)
Reply-To: bobort@bigfoot.com
Sender: bobort@abacus.dorm.reed.edu
From: Ryan Richter <bobort@abacus.dorm.reed.edu>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Subject: Re: zsh bug-hang on startup after exec
Cc: zsh-workers@sunsite.auc.dk


On 22-Mar-2001 Bart Schaefer wrote:
> Why zsh is not becoming the process group leader, I don't know.  Obviously
> bash must be exec'ing it before making *itself* the process group leader,
> but then who *is* the group leader, a?
> 
> Note that
> 
> getpid()                                = 20122
> getpgrp()                               = 20120
> ioctl(10, TIOCGPGRP, [20121])           = 0
> 
> So there are at least three processes involved here ... the process group
> leader is 20120 (whatever that was), but the tty group leader is 20121,
> and neither of those is zsh (20122), so (mypgrp == mypid) is never going
> to be true.

I ran it again by doing 'su myself -c bash', and the process group leader is
su and the tty group leader is strace, which would originally have been bash. 

Did it again with bash just execing zsh and attached strace after zsh started. 
In this case the process group leader is su and the tty group leader is zsh.

> } Anyway, this is a linux 2.2.19 i686 system with glibc 2.1.3, and zsh was
> } compiled with egcs 1.1.2.
> 
> Why does everyone always identify their Linux system by kernel version and
> glibc version?  That's almost never enough information.  The vendor (e.g.
> redhat) and vendor's version number (e.g. 7.1) are almost always much more
> useful.  In this case it'd also be nice to know how you're logging in; is
> it on the text console?  Remote shell?  XDM console?  If the latter, are
> you using vanilla XDM, KDE, Gnome, or something else?

Well, this system started off as redhat 5.1, but it's probably best
approximated by redhat 6.2 at present.  I was logging in via the console and
with su.  I just tried logging in remotely via ssh and it didn't hang.
-- 
Ryan


From zsh-workers-return-26982-mason-zsh=primenet.com.au@sunsite.dk Fri May 22 17:25:21 2009
Return-Path: <zsh-workers-return-26982-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29967 invoked from network); 22 May 2009 17:25:17 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 22 May 2009 17:25:17 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 8956 invoked from network); 22 May 2009 17:25:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 May 2009 17:25:08 -0000
Received: (qmail 7110 invoked by alias); 22 May 2009 17:25:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26982
Received: (qmail 7090 invoked from network); 22 May 2009 17:25:01 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 22 May 2009 17:25:01 -0000
Received: from mail-fx0-f157.google.com (mail-fx0-f157.google.com [209.85.220.157])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 614018027106
	for <zsh-workers@sunsite.dk>; Fri, 22 May 2009 19:24:58 +0200 (CEST)
Received: by fxm1 with SMTP id 1so1743543fxm.45
        for <zsh-workers@sunsite.dk>; Fri, 22 May 2009 10:24:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=SDTM36A0JYLtgSy20JB9BZ3o1BrT8GHHZsviejBP8yU=;
        b=m2Zxa8BGGlBg2UN+8ay/BWZlElDqTtFbmRp6+29FEgtU3bhViNCl4QqJubA7HbSatL
         KLzDdgdTqrIATGnbN59Ce9sT4/g2XjsdRVV/268DJ7H3uF8uS5YGQvN8LAhOCBHe5rPW
         AWSofjawfaAEOuCpLOdu6xV5gMRaUeyjfZKaE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iGrOYCnoXAYLKz8h/ovwsgDjD9GZzltcL0w5kkYaVUVMCSK4xiowFI5MZr/OhnZLj2
         4KtLkwujKFZf4KJP39+/rYHVyRZU9Lq7su1PjnoQnLqra9YSiw4CgtkF00jlGqqLnl1t
         mIVAKMwAwS/T2snkbeDcS9/5XqAMXtK39BtRo=
MIME-Version: 1.0
Received: by 10.204.116.9 with SMTP id k9mr3667688bkq.159.1243013097421; Fri, 
	22 May 2009 10:24:57 -0700 (PDT)
In-Reply-To: <20090522161723.GQ19860@fsst.voodoo.lan>
References: <c006aa4b0905220845i38beb3f3yfa158564a7178708@mail.gmail.com>
	 <20090522161723.GQ19860@fsst.voodoo.lan>
Date: Fri, 22 May 2009 19:24:57 +0200
Message-ID: <c006aa4b0905221024w15d78625j2622855332d0e594@mail.gmail.com>
Subject: Re: PATCH: add support for stgit in VCS_Info
From: Julien Langer <julien.langer@googlemail.com>
To: zsh-workers@sunsite.dk
Content-Type: multipart/mixed; boundary=0016368e2b1d1f7a6d046a838ae4
X-Virus-Scanned: ClamAV 0.94.2/9383/Fri May 22 17:58:11 2009 on bifrost
X-Virus-Status: Clean

--0016368e2b1d1f7a6d046a838ae4
Content-Type: multipart/alternative; boundary=0016368e2b1d1f7a64046a838ae2

--0016368e2b1d1f7a64046a838ae2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

2009/5/22 Frank Terbeck <ft@bewatermyfriend.org>

> Julien Langer <julien.langer@googlemail.com>:
> > This patch adds some support for stgit to VCS_Info. It displays the
> > currently active patch and the number of unapplied patches.
> > The additional info is configured via a new "stgitformat" style and is
> put
> > into the "misc" part of the prompt. I don't know if this is the best
> idea,
> > what do you (Frank?) think?
>
> One thing, the rest of VCS_INFO_get_data_git() uses four spaces for
> indenting and the patch mixes tabs into that.
>
> Also when introducing a new style, a documentation update would be
> nice. :)


Ok, here's the updated patch.

- Julien

--0016368e2b1d1f7a64046a838ae2
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<br><br><div class=3D"gmail_quote">2009/5/22 Frank Terbeck <span dir=3D"ltr=
">&lt;<a href=3D"mailto:ft@bewatermyfriend.org">ft@bewatermyfriend.org</a>&=
gt;</span><br><blockquote class=3D"gmail_quote" style=3D"border-left: 1px s=
olid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Julien Langer &lt;<a href=3D"mailto:julien.langer@googlemail.com">julien.la=
nger@googlemail.com</a>&gt;:<br>
<div><div></div><div class=3D"h5">&gt; This patch adds some support for stg=
it to VCS_Info. It displays the<br>
&gt; currently active patch and the number of unapplied patches.<br>
&gt; The additional info is configured via a new &quot;stgitformat&quot; st=
yle and is put<br>
&gt; into the &quot;misc&quot; part of the prompt. I don&#39;t know if this=
 is the best idea,<br>
&gt; what do you (Frank?) think?<br>
<br>
</div></div>One thing, the rest of VCS_INFO_get_data_git() uses four spaces=
 for<br>
indenting and the patch mixes tabs into that.<br>
<br>
Also when introducing a new style, a documentation update would be<br>
nice. :)</blockquote><div><br>Ok, here&#39;s the updated patch.<br><br>- Ju=
lien<br><br></div></div>

--0016368e2b1d1f7a64046a838ae2--
--0016368e2b1d1f7a6d046a838ae4
Content-Type: text/x-patch; charset=US-ASCII; name="vcs_info_stgit_support.patch"
Content-Disposition: attachment; filename="vcs_info_stgit_support.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_fv15of8g0

YWRkIHN1cHBvcnQgZm9yIHN0Z2l0CgpGcm9tOiBKdWxpZW4gTGFuZ2VyIDxqdWxpZW4ubGFuZ2Vy
QGdtYWlsLmNvbT4KCgotLS0KCiBEb2MvWnNoL2NvbnRyaWIueW8gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIHwgICAyMiArKysrKysrKy0tCiBGdW5jdGlvbnMvVkNTX0luZm8vQmFja2Vu
ZHMvVkNTX0lORk9fZ2V0X2RhdGFfZ2l0IHwgICA0NyArKysrKysrKysrKysrKysrKysrKysKIDIg
ZmlsZXMgY2hhbmdlZCwgNjUgaW5zZXJ0aW9ucygrKSwgNCBkZWxldGlvbnMoLSkKCgpkaWZmIC0t
Z2l0IGEvRG9jL1pzaC9jb250cmliLnlvIGIvRG9jL1pzaC9jb250cmliLnlvCmluZGV4IDYyMGFh
ZWEuLjQxMzFkNjYgMTAwNjQ0Ci0tLSBhL0RvYy9ac2gvY29udHJpYi55bworKysgYi9Eb2MvWnNo
L2NvbnRyaWIueW8KQEAgLTQ4Niw2ICs0ODYsMTMgQEAgd2FudCB2YXIodmNzX2luZm8pIHRvIGNv
bXBsZXRlbHkgdGFrZSBvdmVyIHRoZSBnZW5lcmF0aW9uIG9mIHlvdXIgcHJvbXB0LgogWW91IHdv
dWxkIGRvIHNvbWV0aGluZyBsaWtlIHR0KFBTMT0nJHt2Y3NfaW5mb19tc2dfMF99JykgdG8gYWNj
b21wbGlzaAogdGhhdC4KICkKK2tpbmRleChzdGdpdGZvcm1hdCkKK2l0ZW0odHQoc3RnaXRmb3Jt
YXQpKSgKK1RoZSB0dChnaXQpIGJhY2tlbmQgcmVwbGFjZXMgdmFyKCVtKSBpbiB0aGUgZm9ybWF0
cyBhbmQKK2FjdGlvbmZvcm1hdHMgc3R5bGVzIHdpdGggdHQoc3RnaXQpLXNwZWNpZmljIGluZm9y
bWF0aW9uIGZvcgordHQoc3RnaXQpLWluaXRpYWxpemVkIGJyYW5jaGVzLiBUaGlzIHN0eWxlIGxl
dCdzIHlvdSBtb2RpZnkgaG93IHRoYXQgc3RyaW5nCitzaG91bGQgbG9vayBsaWtlLgorKQoga2lu
ZGV4KG1heC1leHBvcnRzKQogaXRlbSh0dChtYXgtZXhwb3J0cykpKAogRGVmaW5lcyB0aGUgbWF4
aW11bSBudW1iZXIgaWYKQEAgLTYwNSw2ICs2MTIsNyBAQCBzaXRlbSh0dChmb3JtYXRzKSkoIiAo
JXMpLVslYnwlYV0tIikKIHNpdGVtKHR0KGFjdGlvbmZvcm1hdHMpKSgiICglcyktWyViXS0iKQog
c2l0ZW0odHQoYnJhbmNoZm9ybWF0KSkoIiViOiVyIiAoZm9yIGJ6ciwgc3ZuIGFuZCBzdmspKQog
c2l0ZW0odHQobnZjc2Zvcm1hdHMpKSgiIikKK3NpdGVtKHR0KHN0Z2l0Zm9ybWF0KSkoIiAlcCAo
JWMpIikKIHNpdGVtKHR0KG1heC1leHBvcnRzKSkoMikKIHNpdGVtKHR0KGVuYWJsZSkpKEFMTCkK
IHNpdGVtKHR0KGRpc2FibGUpKSgoZW1wdHkgbGlzdCkpCkBAIC02MzgsOSArNjQ2LDEwIEBAIHZh
cihyZXBvWFkpLikKIHNpdGVtKHR0KCVTKSkoc3ViZGlyZWN0b3J5IHdpdGhpbiBhIHJlcG9zaXRv
cnkuIElmIHR0KCRQV0QpIGlzCiB2YXIoL2Zvby9iYXIvcmVwb3NYWS9iZWVyL3Rhc3R5KSwgdHQo
JVMpIGlzIHZhcihiZWVyL3Rhc3R5KS4pCiBzaXRlbSh0dCglbSkpKEEgIm1pc2MiIHJlcGxhY2Vt
ZW50LiBJdCBpcyBhdCB0aGUgZGlzY3JldGlvbiBvZiB0aGUgYmFja2VuZAotdG8gZGVjaWRlIHdo
YXQgdGhpcyByZXBsYWNlbWVudCBleHBhbmRzIHRvLiBJdCBpcyBjdXJyZW50bHkgdXNlZCBvbmx5
IGJ5Ci10aGUgdHQoaGcpIGJhY2tlbmQuIFRoZSBoZyBiYWNrZW5kIHJlcGxhY2VzIHR0KCVtKSB3
aXRoIHRoZSBnbG9iYWwgaGFzaAotdmFsdWUgb2YgdGhlIGN1cnJlbnQgcmV2aXNpb24uKQordG8g
ZGVjaWRlIHdoYXQgdGhpcyByZXBsYWNlbWVudCBleHBhbmRzIHRvLiBJdCBpcyBjdXJyZW50bHkg
dXNlZCBieQordGhlIHR0KGhnKSBhbmQgdHQoZ2l0KSBiYWNrZW5kcy4gVGhlIHR0KGhnKSBiYWNr
ZW5kIHJlcGxhY2VzIHR0KCVtKSB3aXRoIHRoZQorZ2xvYmFsIGhhc2ggdmFsdWUgb2YgdGhlIGN1
cnJlbnQgcmV2aXNpb24gYW5kIHRoZSB0dChnaXQpIGJhY2tlbmQgcmVwbGFjZXMgaXQKK3dpdGgg
dGhlIHN0cmluZyBmcm9tIHRoZSB2YXIoc3RnaXRmb3JtYXQpIHN0eWxlLikKIGVuZHNpdGVtKCkK
IAogSW4gdHQoYnJhbmNoZm9ybWF0KSB0aGVzZSByZXBsYWNlbWVudHMgYXJlIGRvbmU6CkBAIC02
NTAsNiArNjU5LDEzIEBAIHNpdGVtKHR0KCViKSkodGhlIGJyYW5jaCBuYW1lKQogc2l0ZW0odHQo
JXIpKSh0aGUgY3VycmVudCByZXZpc2lvbiBudW1iZXIpCiBlbmRzaXRlbSgpCiAKK0luIHR0KHN0
Z2l0Zm9ybWF0KSB0aGVzZSByZXBsYWNlbWVudHMgYXJlIGRvbmU6CisKK3N0YXJ0c2l0ZW0oKQor
c2l0ZW0odHQoJXApKSh0aGUgbmFtZSBvZiB0aGUgcGF0Y2ggY3VycmVudGx5IG9uIHRvcCBvZiB0
aGUgc3RhY2spCitzaXRlbSh0dCglYykpKHRoZSBudW1iZXIgb2YgdW5hcHBsaWVkIHBhdGNoZXMp
CitlbmRzaXRlbSgpCisKIE5vdCBhbGwgdmNzIGJhY2tlbmRzIGhhdmUgdG8gc3VwcG9ydCBhbGwg
cmVwbGFjZW1lbnRzLiBGb3IgdHQobnZjc2Zvcm1hdHMpCiBubyByZXBsYWNlbWVudHMgYXJlIHBl
cmZvcm1lZCBhdCBhbGwuIEl0IGlzIGp1c3QgYSBzdHJpbmcuCiAKZGlmZiAtLWdpdCBhL0Z1bmN0
aW9ucy9WQ1NfSW5mby9CYWNrZW5kcy9WQ1NfSU5GT19nZXRfZGF0YV9naXQgYi9GdW5jdGlvbnMv
VkNTX0luZm8vQmFja2VuZHMvVkNTX0lORk9fZ2V0X2RhdGFfZ2l0CmluZGV4IGZhYWIyYjguLmE1
MzYxNjUgMTAwNjQ0Ci0tLSBhL0Z1bmN0aW9ucy9WQ1NfSW5mby9CYWNrZW5kcy9WQ1NfSU5GT19n
ZXRfZGF0YV9naXQKKysrIGIvRnVuY3Rpb25zL1ZDU19JbmZvL0JhY2tlbmRzL1ZDU19JTkZPX2dl
dF9kYXRhX2dpdApAQCAtODksNiArODksMzYgQEAgVkNTX0lORk9fZ2l0X2dldGJyYW5jaCAoKSB7
CiAgICAgcmV0dXJuIDAKIH0KIAorVkNTX0lORk9fZ2l0X2dldF9zdGdpdF90b3BfcGF0Y2ggKCkg
eworICAgIGxvY2FsIHBhdGNoZGlyPSQxCisKKyAgICBpZiBbWyAtZCAiJHBhdGNoZGlyIiBdXTsg
dGhlbgorICAgICAgICBsb2NhbCAtYSBwYXRjaGVzCisgICAgICAgIHBhdGNoZXM9KCR7KGYpIiQo
PCAiJHtwYXRjaGRpcn0vYXBwbGllZCIpIn0pCisgICAgICAgIHByaW50ZiAnJXMnICRwYXRjaGVz
Wy0xXQorICAgICAgICByZXR1cm4gMAorICAgIGZpCisKKyAgICByZXR1cm4gMQorfQorCitWQ1Nf
SU5GT19naXRfZ2V0X3N0Z2l0X3VuYXBwbGllZCgpIHsKKyAgICBsb2NhbCBwYXRjaGRpcj0kMQor
CisgICAgaWYgW1sgLWQgIiRwYXRjaGRpciIgXV07IHRoZW4KKyAgICAgICAgbG9jYWwgLWEgcGF0
Y2hlcworICAgICAgICBwYXRjaGVzPSgkeyhmKSIkKDwgIiR7cGF0Y2hkaXJ9L3VuYXBwbGllZCIp
In0pCisgICAgICAgIGlmIFtbIC16ICRwYXRjaGVzW0BdIF1dOyB0aGVuCisgICAgICAgICAgICBw
cmludGYgMAorICAgICAgICBlbHNlCisgICAgICAgICAgICBwcmludGYgJyVkJyAkI3BhdGNoZXMK
KyAgICAgICAgZmkKKyAgICAgICAgcmV0dXJuIDAKKyAgICBmaQorCisgICAgcmV0dXJuIDEKK30K
KwogZ2l0ZGlyPSR7dmNzX2NvbW1bZ2l0ZGlyXX0KIGdpdGJyYW5jaD0iJChWQ1NfSU5GT19naXRf
Z2V0YnJhbmNoICR7Z2l0ZGlyfSkiCiBpZiB6c3R5bGUgLXQgIjp2Y3NfaW5mbzoke3Zjc306JHt1
c2VyY29udGV4dH06JHtycm59IiBnZXQtcmV2aXNpb24gJiYgXApAQCAtMTE3LDUgKzE0NywyMCBA
QCBWQ1NfSU5GT19hZGp1c3QKIGdpdGFjdGlvbj0iJChWQ1NfSU5GT19naXRfZ2V0YWN0aW9uICR7
Z2l0ZGlyfSkiCiBnaXRiYXNlPSR7UFdEJS8keyQoICR7dmNzX2NvbW1bY21kXX0gcmV2LXBhcnNl
IC0tc2hvdy1wcmVmaXggKSUvIyN9fQogcnJuPSR7Z2l0YmFzZTp0fQotVkNTX0lORk9fZm9ybWF0
cyAiJHtnaXRhY3Rpb259IiAiJHtnaXRicmFuY2h9IiAiJHtnaXRiYXNlfSIgIiR7Z2l0c3RhZ2Vk
fSIgIiR7Z2l0dW5zdGFnZWR9IiAiJHtnaXRzaGExfSIgJycKKworbG9jYWwgcGF0Y2hkaXI9JHtn
aXRkaXJ9L3BhdGNoZXMvJHtnaXRicmFuY2h9CitpZiBbWyAtZCAkcGF0Y2hkaXIgXV0gOyB0aGVu
CisgICAgc3RnaXRwYXRjaD0kKFZDU19JTkZPX2dpdF9nZXRfc3RnaXRfdG9wX3BhdGNoICIke3Bh
dGNoZGlyfSIpCisgICAgc3RnaXR1bmFwcGxpZWQ9JChWQ1NfSU5GT19naXRfZ2V0X3N0Z2l0X3Vu
YXBwbGllZCAiJHtwYXRjaGRpcn0iKQorCisgICAgc3RnaXRwYXRjaD0ke3N0Z2l0cGF0Y2g6LSJu
byBwYXRjaCBhcHBsaWVkIn0KKworICAgIHpzdHlsZSAtcyAiOnZjc19pbmZvOiR7dmNzfToke3Vz
ZXJjb250ZXh0fToke3Jybn0iIHN0Z2l0Zm9ybWF0IHN0Z2l0bXNnIHx8IHN0Z2l0bXNnPSIgJXAg
KCVjKSIKKyAgICB6Zm9ybWF0IC1mIHN0Z2l0bXNnICIke3N0Z2l0bXNnfSIgInA6JHtzdGdpdHBh
dGNofSIgImM6JHtzdGdpdHVuYXBwbGllZH0iCisgICAgZ2l0bWlzYz0ke3N0Z2l0bXNnfQorZWxz
ZQorICAgIGdpdG1pc2M9JycKK2ZpCisKK1ZDU19JTkZPX2Zvcm1hdHMgIiR7Z2l0YWN0aW9ufSIg
IiR7Z2l0YnJhbmNofSIgIiR7Z2l0YmFzZX0iICIke2dpdHN0YWdlZH0iICIke2dpdHVuc3RhZ2Vk
fSIgIiR7Z2l0c2hhMX0iICIke2dpdG1pc2N9IgogcmV0dXJuIDAK
--0016368e2b1d1f7a6d046a838ae4--


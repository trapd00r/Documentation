From zsh-workers-return-17591-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 28 17:21:10 2002
Return-Path: <zsh-workers-return-17591-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2056 invoked from network); 28 Aug 2002 17:21:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 28 Aug 2002 17:21:09 -0000
Received: (qmail 2552 invoked by alias); 28 Aug 2002 17:21:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17591
Received: (qmail 2539 invoked from network); 28 Aug 2002 17:21:00 -0000
X-VirusChecked: Checked
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: PATCH: new _losetup
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <12223.1030555199.1@logica.com>
Date: Wed, 28 Aug 2002 18:20:31 +0100
Sender: kiddleo@logica.com
Message-Id: <E17k6Ua-0003BC-00@bimbo.logica.co.uk>

new completion for losetup.

Does anyone mind if I move _valgrind and _modutils to
Completion/Linux/Command?

On the subject of _modutils, shouldn't there be some sort of '*:...'
_arguments spec in it so that it covers the normal case when you just
load a module.

Oliver

Index: Completion/Linux/Command/_losetup
===================================================================
RCS file: Completion/Linux/Command/_losetup
diff -N Completion/Linux/Command/_losetup
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ Completion/Linux/Command/_losetup	28 Aug 2002 16:54:24 -0000
@@ -0,0 +1,14 @@
+#compdef losetup
+
+local cyphers
+cyphers=( /proc/crypto/cipher/*(N:t) )
+cyphers="${cyphers[@]%-*}"
+
+_arguments -S \
+  '(- 2)'{--delete,--detach,-d}'[detach from specified loop device]' \
+  '(-d --delete --detach -e --encryption)'{-e,--encryption}"+[enable encryption]:cypher:( $cyphers )" \
+  '(-d --delete --detach -o --offset)'{-o,--offset}'+[specify data start is offset]:offset (bytes)' \
+  '(-d --delete --detach -p --pass-fd)'{-p,--pass-fd}'+[read passphrase from specified file descriptor]:file descriptor:_file_descriptors' \
+  '(-d --delete --detach -k --keybits)'{-k,--keybits}'+[set the number of bits to use in key]:key size:(64 128 160 192 256)' \
+  '1:device:_files -g loop\*' \
+  '(-d --delete --detach)2:file:_files'

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


From zsh-users-return-11990-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 11 15:52:14 2007
Return-Path: <zsh-users-return-11990-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29110 invoked from network); 11 Oct 2007 15:52:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Oct 2007 15:52:06 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 62543 invoked from network); 11 Oct 2007 15:51:59 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2007 15:51:59 -0000
Received: (qmail 10898 invoked by alias); 11 Oct 2007 15:51:50 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11990
Received: (qmail 10881 invoked from network); 11 Oct 2007 15:51:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Oct 2007 15:51:49 -0000
Received: (qmail 61287 invoked from network); 11 Oct 2007 15:51:49 -0000
Received: from vms048pub.verizon.net (206.46.252.48)
  by a.mx.sunsite.dk with SMTP; 11 Oct 2007 15:51:42 -0000
Received: from torch.brasslantern.com ([71.116.76.59])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JPR002J67RAFVN0@vms048.mailsrvcs.net> for
 zsh-users@sunsite.dk; Thu, 11 Oct 2007 10:45:12 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id l9BFj9hx001333	for
 <zsh-users@sunsite.dk>; Thu, 11 Oct 2007 08:45:10 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id l9BFj83G001332	for zsh-users@sunsite.dk; Thu,
 11 Oct 2007 08:45:08 -0700
Date: Thu, 11 Oct 2007 08:45:08 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: sluggish prompt
In-reply-to: <20071009185552.GA12388@panix.com>
To: zsh-users@sunsite.dk
Message-id: <071011084508.ZM1331@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20071007045049.GA28877@panix.com>
	<20071007053638.14299.qmail@smasher.org>	<20071007061947.GA6554@panix.com>
	<20071007063359.30913.qmail@smasher.org>	<20071007071256.GA14895@panix.com>
	<071007100202.ZM23730@torch.brasslantern.com>
	<20071008014647.GD11176@panix.com>
	<071007205700.ZM24360@torch.brasslantern.com>
	<20071009185552.GA12388@panix.com>
Comments: In reply to Russell Hoover <rj@panix.com>
 "Re: sluggish prompt" (Oct  9,  2:55pm)

On Oct 9,  2:55pm, Russell Hoover wrote:
} Subject: Re: sluggish prompt
}
} On Sun 10/07/07 at 08:57 PM -0700,
} Bart Schaefer <schaefer@brasslantern.com> wrote:
} 
} > [...] I meant "If, when you have set -x in your .zshrc, and you see
} > the list of files in your fpath being printed by the nested for-loops,
} > that output does not appear every time,
} 
} It did appear every time until I replaced the for-loop lines with the
} single line you suggested.

Something odd is happening, then, because your .zshrc should not be
getting re-loaded every time a prompt is printed.  I didn't see any
indication that this would be happening in the files you posted.  Is
there something in any of the corresponding /etc/z* files?
 
} > What we need to know is, on every *subsquent* prompt, as you go
} > through your normal habitual use of zsh on this system, do you see
} > delays before PRECMD is printed or in between PRECMD and the prompt?
} 
} They're between the appearance of "PRECMD" and the appearance of the
} prompt.

That's a clue; it means its something that happens after precmd is run
but before the prompt is output.  That can only be (1) watching for new
users to log in (you have WATCHFMT set, I see), (2) checking for mail
(see previous discussion of MAILCHECK), or (3) a scheduled task from the
"sched" module.


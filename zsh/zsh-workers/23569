From zsh-workers-return-23569-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 19 12:43:43 2007
Return-Path: <zsh-workers-return-23569-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26700 invoked from network); 19 Jun 2007 12:43:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Jun 2007 12:43:41 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 6659 invoked from network); 19 Jun 2007 12:43:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Jun 2007 12:43:32 -0000
Received: (qmail 16838 invoked by alias); 19 Jun 2007 12:43:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23569
Received: (qmail 16828 invoked from network); 19 Jun 2007 12:43:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 19 Jun 2007 12:43:28 -0000
Received: (qmail 6369 invoked from network); 19 Jun 2007 12:43:28 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 19 Jun 2007 12:43:25 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 5D9505C3C6; Tue, 19 Jun 2007 08:43:23 -0400 (EDT)
Date: Tue, 19 Jun 2007 08:43:24 -0400
From: Clint Adams <schizo@debian.org>
To: Joey Hess <joeyh@debian.org>, 429640@bugs.debian.org
Cc: zsh-workers@sunsite.dk
Subject: Re: Bug#429640: missing bts show completion
Message-ID: <20070619124324.GA20320@scowler.net>
Mail-Followup-To: Joey Hess <joeyh@debian.org>, 429640@bugs.debian.org,
	zsh-workers@sunsite.dk
References: <20070619094110.GA11847@kitenet.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20070619094110.GA11847@kitenet.net>
User-Agent: Mutt/1.5.13 (2006-08-11)

On Tue, Jun 19, 2007 at 10:41:10AM +0100, Joey Hess wrote:
> bts show foo<tab>
> should work the same as
> apt-cache show foo<tab>
> 
> There are some other completions possible in bts, but this is the only
> one I find myself missing.

The quick fix is to make show be the same as bugs, since the man page
claims that they are aliases.  This needs to be fixed better though.

Index: Completion/Debian/Command/_bts
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Command/_bts,v
retrieving revision 1.7
diff -u -r1.7 _bts
--- Completion/Debian/Command/_bts	18 May 2006 13:15:12 -0000	1.7
+++ Completion/Debian/Command/_bts	19 Jun 2007 12:41:04 -0000
@@ -30,14 +30,14 @@
 fi
 
 case "$words[1]" in
-  (show|close|unmerge|notforwarded|noowner|reportspam)
+  (close|unmerge|notforwarded|noowner|reportspam)
     if [[ CURRENT -eq 2 ]]; then
       _message -e bugnum 'bug number'
     else
       _wanted sep expl 'separator' compadd -S ' ' , .
     fi
   ;;
-  bugs)
+  (show|bugs)
     if [[ CURRENT -eq 2 ]]; then
       _wanted package expl 'package' _deb_packages avail
       _wanted maintainer expl 'package maintainer' compadd $DEBEMAIL


From zsh-users-return-9816-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 06 14:17:50 2006
Return-Path: <zsh-users-return-9816-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23992 invoked from network); 6 Jan 2006 14:17:49 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Jan 2006 14:17:49 -0000
Received: (qmail 99108 invoked from network); 6 Jan 2006 14:17:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Jan 2006 14:17:42 -0000
Received: (qmail 26019 invoked by alias); 6 Jan 2006 14:17:35 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9816
Received: (qmail 26003 invoked from network); 6 Jan 2006 14:17:34 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Jan 2006 14:17:34 -0000
Received: (qmail 98117 invoked from network); 6 Jan 2006 14:17:34 -0000
Received: from smtp05.web.de (217.72.192.209)
  by a.mx.sunsite.dk with SMTP; 6 Jan 2006 14:17:33 -0000
Received: from [130.83.163.10] (helo=meneldor.esa.informatik.tu-darmstadt.de)
	by smtp05.web.de with esmtp (TLSv1:AES256-SHA:256)
	(WEB.DE 4.105 #340)
	id 1EusPM-0004Un-00
	for zsh-users@sunsite.dk; Fri, 06 Jan 2006 15:17:32 +0100
From: Einar Huginson <huginson@web.de>
To: zsh-users@sunsite.dk
Subject: Annoying misfeature: ZSH completely hides output without newlines!
Date: Fri, 6 Jan 2006 15:15:27 +0100
User-Agent: KMail/1.9
References: <200601060047.k060lU37023709@rly01c.srv.mailcontrol.com> <EXCHANGE03z2NoKMHG000001367@exchange03.csr.com>
In-Reply-To: <EXCHANGE03z2NoKMHG000001367@exchange03.csr.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200601061515.27913.huginson@web.de>
Sender: huginson@web.de
X-Sender: huginson@web.de

I have tried this with ZSH 4.2.5 and 4.2.6, linked against ncurses 5.4 
(specifically the Gentoo ebuild 5.4-r6). Note that PS1='$ ' and I have marked 
the cursor position with _

1. Example: Just echo text without a newline

	$ echo -n foo
	$ _

2. Example: cat a file that has no newline after the last (third!) line

	$ cat bar
	blah1
	blah2
	$ _

Note that the cat command itself works, the data is not lost, just not being  
displayed in ZSH

	$ cat bar | wc -w
	3
	$ _

Compare with the output by bash

	$ echo -n foo
	foo$ _

	$ cat bar
	blah1
	blah2
	blah3$ _

IMHO, this counts as a serious problem, since certain file contents are no 
longer visible, and files appear to be empty even if they aren't. I initially 
thought that my more involved prompt was at fault, but that doesn't seem to 
be the case (PS1='$ '). Or do I need to set a ZSH config option that prevents 
it from clearing the line before outputting the prompt?

Confused,
  Andreas Koch


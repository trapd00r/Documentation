From zsh-workers-return-14155-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 30 08:17:20 2001
Return-Path: <zsh-workers-return-14155-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25315 invoked from network); 30 Apr 2001 08:17:19 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Apr 2001 08:17:19 -0000
Received: (qmail 7724 invoked by alias); 30 Apr 2001 08:17:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14155
Received: (qmail 7709 invoked from network); 30 Apr 2001 08:17:14 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Mon, 30 Apr 2001 10:17:06 +0200 (MET DST)
Message-Id: <200104300817.KAA02260@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: Re: cvs completion does not support partial path completion
In-Reply-To: <1010427175451.ZM27056@candle.brasslantern.com>

Bart Schaefer wrote:

> ...
> 
> It's not that bad ... at this point:
> 
> _cvs_modified_entries () {
>   if _cvs_loadstat; then
>       local expl match linedir realdir pat
>       match=()
>       : ${PREFIX:#(#b)(*/)(*)}
>       linedir="$match[1]"
>       realdir=${(e)~linedir}
> 
> Instead of using ${(e)~linedir) to get the realdir, tack /CVS on the end
> and use _path_files to generate realdir, then lop off the CVS again and
> proceed.
> 
> Of course "use _path_files to generate realdir" means editing _path_files
> to accept the `-A array' option and pass it through to compadd ... and
> fixing all the _cvs functions to handle an array of realdirs rather than
> a single one.

_path_files uses -A itself.  This could get really messy.

So, as a incomplete, but simple solution I'd still favour sticking a
call to _files somewhere.


Bye
  Sven


-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From mason@werple.net.au Thu Mar 28 19:59:56 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id TAA24909 for <mason@werple.mira.net.au>; Thu, 28 Mar 1996 19:59:54 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id DAA19294; Thu, 28 Mar 1996 03:45:02 -0500 (EST)
Resent-Date: Thu, 28 Mar 1996 03:45:02 -0500 (EST)
From: mason@werple.net.au
Message-Id: <199603280843.TAA08035@werple.net.au>
Subject: Re: Still there's a little zle_refresh bug
To: mdb@cdc.noaa.gov (Mark Borges)
Date: Thu, 28 Mar 1996 19:43:37 +1100 (EST)
Cc: zsh-workers@math.gatech.edu (zsh-list), hzoli@cs.elte.hu
In-Reply-To: <vkybom5m27.fsf@suomi.cdc.noaa.gov> from "Mark Borges" at Mar 27, 96 01:16:16 pm
X-Mailer: ELM [version 2.4 PL23]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"sPfjQ2.0.Oj4.D6bMn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/866
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1066
Status: OR

:Geoff posted a second patch (in article #831) for zle_refresh. Was
:that supposed to fix this particular bug (which was posted before the
:2nd patch), or not?
:If it was, I'm still seeing it on my solaris-2.3/2.5 platforms, and will
:invetigate further if it is in fact platform-dependent.
:Just curious.
                                                                         *
original two lines with insert at * % 1234567890123456789012345678901234567890
1234567890

I just worked out the logic of the bug and I'll post a patch for this in a 
few hours.  The problem was on the second line: at the start, the first char
'0' then '\r' got printed due to automargin stuff, then an insert char,
then '0' to fill the blank spot - when the code was originally written
there would not have been the first char '0' written.  There's an obvious hack
in the code here, but for other reasons I don't want to do that, so I'll write
a nice complex, hard-to-understand patch for it instead :-)
-- 
Mason [G.C.W]  mason@werple.mira.net.au    "Hurt...Agony...Pain...LOVE-IT"



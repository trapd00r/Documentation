<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Kapitel 8. Aufgedeckte Geheimnisse</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title=
  "Git Magic = Ben Lynn August 2007">
  <link rel="up" href="index.html" title=
  "Git Magic = Ben Lynn August 2007">
  <link rel="prev" href="ch07.html" title=
  "Kapitel 7. Git für Fortgeschrittene">
  <link rel="next" href="apa.html" title="Anhang A. Git’s Mängel">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Vorwort</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_danke">Danke!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_lizenz">Lizenz</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Einleitung</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_arbeit_ist_spiel">Arbeit ist
            Spiel</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_versionsverwaltung">Versionsverwaltung</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_verteilte_kontrolle">Verteilte
            Kontrolle</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_ein_dummer_aberglaube">Ein dummer
            Aberglaube</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_emphasis_merge_emphasis_konflikte"><span class="emphasis">
            <em>Merge</em></span> Konflikte</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Erste
          Schritte</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_stand_sichern">Stand
            sichern</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_hinzuf_gen_l_schen_umbenennen">Hinzufügen,
            Löschen, Umbenennen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_fortgeschrittenes_r_ckg_ngig_machen_wiederherstellen">
            Fortgeschrittenes Rückgängig
            machen/Wiederherstellen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_r_ckg_ngig_machen">Rückgängig
            machen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_changelog_erstellen">Changelog
            erstellen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_dateien_herunterladen">Dateien
            herunterladen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_das_neueste_vom_neuen">Das Neueste vom
            Neuen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_einfaches_ver_ffentlichen">Einfaches
            Veröffentlichen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_was_habe_ich_getan">Was habe ich
            getan?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_bung">Übung</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Rund ums
          <span class="emphasis"><em>Clonen</em></span></a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_computer_synchronisieren">Computer
            synchronisieren</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_klassische_quellcodeverwaltung">Klassische
            Quellcodeverwaltung</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_geheime_quellen">Geheime
            Quellen</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_nackte_repositories_emphasis"><span class="emphasis">
            <em>Nackte Repositories</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_push_emphasis_oder_emphasis_pull_emphasis">
            <span class="emphasis"><em>Push</em></span> oder
            <span class=
            "emphasis"><em>Pull</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_fork_emphasis_eines_projekts"><span class="emphasis">
            <em>Fork</em></span> eines Projekts</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_ultimative_datensicherung">Ultimative
            Datensicherung</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_multitasking_mit_lichtgeschwindigkeit">Multitasking
            mit Lichtgeschwindigkeit</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_versionsverwaltung_im_untergrund">Versionsverwaltung
            im Untergrund</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_warum_ich_git_benutze">Warum ich Git
            benutze</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. <span class=
          "emphasis"><em>Branch</em></span>-Magie</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_die_chef_taste">Die
            Chef-Taste</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_schmutzarbeit">Schmutzarbeit</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_schnelle_fehlerbehebung">Schnelle
            Fehlerbehebung</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_emphasis_mergen_emphasis"><span class=
            "emphasis"><em>Mergen</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_kontinuierlicher_arbeitsfluss">Kontinuierlicher
            Arbeitsfluss</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_mischmasch_reorganisieren">Mischmasch
            Reorganisieren</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_emphasis_branches_emphasis_verwalten"><span class="emphasis">
            <em>Branches</em></span> verwalten</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_tempor_re_emphasis_branches_emphasis">Temporäre
            <span class=
            "emphasis"><em>Branches</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_arbeite_wie_du_willst">Arbeite wie du
            willst</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5.
          Geschichtsstunde</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_ich_nehme_alles_zur_ck">Ich nehme alles
            zurück</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_und_noch_viel_mehr">… und noch viel
            mehr</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_lokale_nderungen_zum_schlu">Lokale
            Änderungen zum Schluß</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_chronik_umschreiben">Chronik
            umschreiben</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_geschichte_machen">Geschichte
            machen</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_wo_ging_alles_schief">Wo ging alles
            schief?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_wer_ist_verantwortlich">Wer ist
            verantwortlich?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_pers_nliche_erfahrungen">Persönliche
            Erfahrungen</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Multiplayer
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_wer_bin_ich">Wer bin ich?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_ber_ssh_http">Git über SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_ber_alles">Git über
            alles</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_das_globale_zahlungsmittel">Patches:
            Das globale Zahlungsmittel</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_entschuldigung_wir_sind_umgezogen">Entschuldigung,
            wir sind umgezogen.</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_entfernte_emphasis_branches_emphasis">Entfernte
            <span class=
            "emphasis"><em>Branches</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_mehrere_emphasis_remotes_emphasis">Mehrere
            <span class=
            "emphasis"><em>Remotes</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_meine_einstellungen">Meine
            Einstellungen</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Git für
          Fortgeschrittene</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_quellcode_ver_ffentlichen">Quellcode
            veröffentlichen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_emphasis_commite_emphasis_nderungen"><span class="emphasis">
            <em>Commite</em></span> Änderungen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_mein_emphasis_commit_emphasis_ist_zu_gro">Mein
            <span class="emphasis"><em>Commit</em></span> ist zu
            groß!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_der_index_git_8217_s_bereitstellungsraum">Der
            Index: Git’s Bereitstellungsraum</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_verliere_nicht_deinen_kopf">Verliere nicht
            Deinen KOPF</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_kopf_jagd">KOPF-Jagd</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_auf_git_bauen">Auf Git
            bauen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_gewagte_kunstst_cke">Gewagte
            Kunststücke</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_verhindere_schlechte_emphasis_commits_emphasis">
            Verhindere schlechte <span class=
            "emphasis"><em>Commits</em></span></a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Aufgedeckte
          Geheimnisse</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_unsichtbarkeit">Unsichtbarkeit</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integrit_t">Integrität</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelligenz">Intelligenz</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indizierung">Indizierung</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_git_8217_s_wurzeln">Git’s
            Wurzeln</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_die_objektdatenbank">Die
            Objektdatenbank</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_emphasis_trees_emphasis"><span class=
            "emphasis"><em>Trees</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_emphasis_commits_emphasis"><span class=
            "emphasis"><em>Commits</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_von_magie_nicht_zu_unterscheiden">Von Magie
            nicht zu unterscheiden</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Git’s
          Mängel</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_sha1_schw_che">SHA1 Schwäche</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_dateien_ohne_bezug">Dateien ohne
            Bezug</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_wer_macht_was">Wer macht
            was?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_dateihistorie">Dateihistorie</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_der_erster_klon">Der erster
            Klon</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_unbest_ndige_projekte">Unbeständige
            Projekte</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_globaler_z_hler">Globaler
            Zähler</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_leere_unterverzeichnisse">Leere
            Unterverzeichnisse</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initialer_emphasis_commit_emphasis">Initialer
            <span class=
            "emphasis"><em>Commit</em></span></a></span></li>

            <li><span class="section"><a href=
            "apa.html#_eigenarten_der_anwendung">Eigenarten der
            Anwendung</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B. Diese
        Anleitung übersetzen</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Kapitel 8. Aufgedeckte Geheimnisse">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_aufgedeckte_geheimnisse"></a>Kapitel 8. Aufgedeckte
          Geheimnisse</h2>
        </div>
      </div>
    </div>

    <p>Wir werfen einen Blick unter die Motorhaube und erklären,
    wie Git seine Wunder vollbringt. Ich werde nicht ins Detail
    gehen. Für tiefer gehende Erklärungen verweise ich auf das
    <a class="ulink" href=
    "http://www.kernel.org/pub/software/scm/git/docs/user-manual.html"
    target="_top">englischsprachige Benutzerhandbuch</a>.</p>

    <div class="section" title="Unsichtbarkeit">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_unsichtbarkeit"></a>Unsichtbarkeit</h2>
          </div>
        </div>
      </div>

      <p>Wie kann Git so unauffällig sein? Abgesehen von
      gelegentlichen <span class="emphasis"><em>Commits</em></span>
      und <span class="emphasis"><em>Merges</em></span> kannst Du
      arbeiten, als würde die Versionsverwaltung nicht existieren.
      Das heißt, bis Du sie brauchst. Und das ist, wenn Du froh
      bist, dass Git die ganze Zeit über Dich gewacht hat.</p>

      <p>Andere Versionsverwaltungssysteme zwingen Dich ständig
      Dich mit Verwaltungskram und Bürokratie herumzuschlagen.
      Dateien sind können schreibgeschützt sein, bis Du einem
      zentralen Server mitteilst, welche Dateien Du gerne
      bearbeiten möchtest. Die einfachsten Befehle werden bis zum
      Schneckentempo verlangsamt, wenn die Anzahl der Anwender
      steigt. Deine Arbeit kommt zum Stillstand, wenn das Netzwerk
      oder der zentrale Server weg sind.</p>

      <p>Im Gegensatz dazu hält Git seinen Verlauf einfach im
      <code class="literal">.git</code> Verzeichnis von Deinem
      Arbeitsverzeichnis. Das ist Deine eigene Kopie der
      Versionsgeschichte, damit kannst Du so lange offline bleiben,
      bis Du mit anderen kommunizieren willst. Du hast die absolute
      Kontrolle über das Schicksal Deiner Dateien, denn Git kann
      jederzeit einfach einen gesicherten Stand aus <code class=
      "literal">.git</code> wiederherstellen.</p>
    </div>

    <div class="section" title="Integrität">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_integrit_t"></a>Integrität</h2>
          </div>
        </div>
      </div>

      <p>Die meisten Leute verbinden mit Kryptographie die
      Geheimhaltung von Informationen, aber ein genau so wichtiges
      Ziel ist es Informationen zu sichern. Die richtige Anwendung
      von kryptographischen Hash-Funktionen kann einen
      versehentlichen oder bösartigen Datenverlust verhindern.</p>

      <p>Einen SHA1-Hash-Wert kann man sich als eindeutige 160-Bit
      Identitätsnummer für jegliche Zeichenkette vorstellen, welche
      Dir in Deinem ganzen Leben begegnen wird. Sogar mehr als das:
      jegliche Zeichenfolge, die alle Menschen über mehrere
      Generationen verwenden.</p>

      <p>Ein SHA1-Hash-Wert selbst ist eine Zeichenfolge von Bytes.
      Wir können SHA1-Hash-Werte aus Zeichenfolgen generieren, die
      selbst SHA1-Hash-Werte enthalten. Diese einfache Beobachtung
      ist überraschend nützlich: suche nach <span class=
      "emphasis"><em>hash chains</em></span>. Wir werden später
      sehen, wie Git diese nutzt um effizient die Datenintegrität
      zu garantieren.</p>

      <p>Kurz gesagt, Git hält Deine Daten in dem <code class=
      "literal">.git/objects</code> Unterverzeichnis, wo Du
      anstelle von normalen Dateinamen nur Identitätsnummern
      findest. Durch die Verwendung von Identitätsnummern als
      Dateiname, zusammen mit ein paar Sperrdateien und
      Zeitstempeltricks, macht Git aus einem einfachen Dateisystem
      eine effiziente und robuste Datenbank.</p>
    </div>

    <div class="section" title="Intelligenz">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_intelligenz"></a>Intelligenz</h2>
          </div>
        </div>
      </div>

      <p>Woher weiß Git, dass Du eine Datei umbenannt hast, obwohl
      Du es ihm niemals explizit mitgeteilt hast? Sicher, Du hast
      vielleicht <span class="strong"><strong>git
      mv</strong></span> benutzt, aber das ist exakt das selbe wie
      <span class="strong"><strong>git rm</strong></span> gefolgt
      von <span class="strong"><strong>git add</strong></span>.</p>

      <p>Git stöbert Umbenennungen und Kopien zwischen aufeinander
      folgenden Versionen heuristisch auf. Vielmehr kann es sogar
      Codeblöcke erkennen, die zwischen Dateien hin und her kopiert
      oder verschoben wurden! Jedoch kann es nicht alle Fälle
      abdecken, aber es leistet ordentliche Arbeit und diese
      Eigenschaft wird immer besser. Wenn es bei Dir nicht
      funktioniert, versuche Optionen zur aufwendigeren Erkennung
      von Kopien oder erwäge einen Upgrade.</p>
    </div>

    <div class="section" title="Indizierung">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_indizierung"></a>Indizierung</h2>
          </div>
        </div>
      </div>

      <p>Für jede überwachte Datei speichert Git Informationen wie
      deren Größe, ihren Erstellzeitpunkt und den Zeitpunkt der
      letzten Bearbeitung in einer Datei die wir als <span class=
      "emphasis"><em>Index</em></span> kennen. Um zu ermitteln, ob
      eine Datei verändert wurde, vergleicht Git den aktuellen
      Status mit dem im Index gespeicherten. Stimmen diese Daten
      überein, kann Git das Lesen des Dateiinhalts
      überspringen.</p>

      <p>Da das Abfragen des Dateistatus erheblich schneller ist
      als das Lesen der Datei, kann Git, wenn Du nur ein paar
      Dateien verändert hast, seinen Status im Nu
      aktualisieren.</p>

      <p>Wir haben früher festgestellt, dass der Index ein
      Bereitstellungsraum ist. Warum kann ein Haufen von
      Dateistatusinformationen ein Bereitstellungsraum sein? Weil
      die <span class="emphasis"><em>add</em></span> Anweisung
      Dateien in die Git Datenbank befördert und die
      Dateistatusinformationen aktualisiert, während die
      <span class="emphasis"><em>commit</em></span> Anweisung, ohne
      Optionen, einen <span class="emphasis"><em>Commit</em></span>
      nur auf Basis der Dateistatusinformationen erzeugt, weil die
      Dateien ja schon in der Datenbank sind.</p>
    </div>

    <div class="section" title="Git’s Wurzeln">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_git_8217_s_wurzeln"></a>Git’s Wurzeln</h2>
          </div>
        </div>
      </div>

      <p>Dieser <a class="ulink" href=
      "http://lkml.org/lkml/2005/4/6/121" target=
      "_top"><span class="emphasis"><em>Linux Kernel Mailing
      List</em></span> Beitrag</a> beschreibt die Kette von
      Ereignissen, die zu Git geführt haben. Der ganze Beitrag ist
      eine faszinierende archäologische Seite für Git
      Historiker.</p>
    </div>

    <div class="section" title="Die Objektdatenbank">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_die_objektdatenbank"></a>Die Objektdatenbank</h2>
          </div>
        </div>
      </div>

      <p>Jegliche Version Deiner Daten wird in der Objektdatenbank
      gehalten, welche im Unterverzeichnis <code class=
      "literal">.git/objects</code> liegt; Die anderen Orte in
      <code class="literal">.git/</code> enthalten weniger wichtige
      Daten: den Index, <span class=
      "emphasis"><em>Branch</em></span> Namen, Bezeichner
      (<span class="emphasis"><em>tags</em></span>),
      Konfigurationsoptionen, Logdateien, die Position des
      aktuellen <span class="emphasis"><em>HEAD Commit</em></span>
      und so weiter. Die Objektdatenbank ist einfach aber trotzdem
      elegant und sie ist die Quelle von Git’s Macht.</p>

      <p>Jede Datei in <code class="literal">.git/objects</code>
      ist ein <span class="emphasis"><em>Objekt</em></span>. Es
      gibt drei Arten von Objekten die uns betreffen: <span class=
      "emphasis"><em>Blob</em></span>-, <span class=
      "emphasis"><em>Tree</em></span>-, und <span class=
      "emphasis"><em>Commit</em></span>-Objekte.</p>
    </div>

    <div class="section" title="Blobs">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_blobs"></a>Blobs</h2>
          </div>
        </div>
      </div>

      <p>Zuerst ein Zaubertrick. Suche Dir einen Dateinamen aus,
      irgendeinen. In einem leeren Verzeichnis:</p>
      <pre class="literallayout">
$ echo sweet &gt; DEIN_DATEINAME
$ git init
$ git add .
$ find .git/objects -type f
</pre>

      <p>Du wirst folgendes sehen: <code class=
      "literal">.git/objects/aa/823728ea7d592acc69b36875a482cdf3fd5c8d</code>.</p>

      <p>Wie konnte ich das wissen, ohne den Dateiname zu kennen?
      Weil der SHA1-Hash-Wert von:</p>
      <pre class="literallayout">
"blob" SP "6" NUL "sweet" LF
</pre>

      <p>aa823728ea7d592acc69b36875a482cdf3fd5c8d ist. Wobei SP ein
      Leerzeichen ist, NUL ist ein Nullbyte und LF ist ein
      Zeilenumbruch. Das kannst Du kontrollieren, durch die Eingabe
      von:</p>
      <pre class="literallayout">
$ printf "blob 6\000sweet\n" | sha1sum
</pre>

      <p>Git ist <span class="emphasis"><em>assoziativ</em></span>:
      Dateien werden nicht nach Ihren Namen gespeichert, sondern
      eher nach dem SHA1-Hash-Wert der Daten, welche sie enthalten,
      in einer Datei, die wir als <span class=
      "emphasis"><em>Blob</em></span>-Objekt bezeichnen. Wir können
      uns den SHA1-Hash-Wert als eindeutige Identnummer des
      Dateiinhalts vorstellen, was sinngemäß bedeutet, dass die
      Dateien über ihren Inhalt adressiert werden. Das führende
      <code class="literal">blob 6</code> ist lediglich ein
      Vermerk, der sich aus dem Objekttyp und seiner Länge in Bytes
      zusammensetzt; er vereinfacht die interne Verwaltung.</p>

      <p>So konnte ich einfach vorhersagen, was Du sehen wirst. Der
      Dateiname ist irrelevant: nur der Dateiinhalt wird zum
      Erstellen des <span class=
      "emphasis"><em>Blob</em></span>-Objekt verwendet.</p>

      <p>Du wirst Dich fragen, was mit identischen Dateien ist.
      Versuche Kopien Deiner Datei hinzuzufügen, mit beliebigen
      Dateinamen. Der Inhalt von <code class=
      "literal">.git/objects</code> bleibt der selbe, ganz egal
      wieviele Dateien Du hinzufügst. Git speichert den Dateiinhalt
      nur ein einziges Mal.</p>

      <p>Übrigens, die Dateien in <code class=
      "literal">.git/objects</code> sind mit zlib komprimiert, Du
      solltest sie also nicht direkt anschauen. Filtere sie durch
      <a class="ulink" href="http://www.zlib.net/zpipe.c" target=
      "_top">zpipe -d</a>, oder gib ein:</p>
      <pre class="literallayout">
$ git cat-file -p aa823728ea7d592acc69b36875a482cdf3fd5c8d
</pre>

      <p>was Dir das Objekt im Klartext anzeigt.</p>
    </div>

    <div class="section" title="Trees">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_emphasis_trees_emphasis"></a><span class=
            "emphasis"><em>Trees</em></span></h2>
          </div>
        </div>
      </div>

      <p>Aber wo sind die Dateinamen? Sie müssen irgendwo
      gespeichert sein. Git kommt beim <span class=
      "emphasis"><em>Commit</em></span> dazu sich um die Dateinamen
      zu kümmern:</p>
      <pre class="literallayout">
$ git commit  # Schreibe eine Bemerkung.
$ find .git/objects -type f
</pre>

      <p>Du solltest nun drei Objekte sehen. Dieses mal kann ich
      Dir nicht sagen, wie die zwei neuen Dateien heißen, weil es
      zum Teil vom gewählten Dateiname abhängt, den Du ausgesucht
      hast. Fahren wir fort mit der Annahme, Du hast eine Datei
      “rose” genannt. Wenn nicht, kannst Du den Verlauf so
      umschreiben, dass es so aussieht als hättest Du es:</p>
      <pre class="literallayout">
$ git filter-branch --tree-filter 'mv DEIN_DATEINAME rose'
$ find .git/objects -type f
</pre>

      <p>Nun müsstest Du die Datei <code class=
      "literal">.git/objects/05/b217bb859794d08bb9e4f7f04cbda4b207fbe9</code>
      sehen, denn das ist der SHA1-Hash-Wert ihres Inhalts:</p>
      <pre class="literallayout">
"tree" SP "32" NUL "100644 rose" NUL 0xaa823728ea7d592acc69b36875a482cdf3fd5c8d
</pre>

      <p>Prüfe, ob diese Datei tatsächlich dem obigen Inhalt
      entspricht, durch Eingabe von:</p>
      <pre class="literallayout">
$ echo 05b217bb859794d08bb9e4f7f04cbda4b207fbe9 | git cat-file --batch
</pre>

      <p>Mit zpipe, ist es einfach den SHA1-Hash-Wert zu
      prüfen:</p>
      <pre class="literallayout">
$ zpipe -d &lt; .git/objects/05/b217bb859794d08bb9e4f7f04cbda4b207fbe9 | sha1sum
</pre>

      <p>Die SHA1-Hash-Wert Prüfung mit <span class=
      "emphasis"><em>cat-file</em></span> ist etwas kniffliger, da
      dessen Ausgabe mehr als die rohe unkomprimierte Objektdatei
      enthält.</p>

      <p>Diese Datei ist ein <span class=
      "emphasis"><em>Tree</em></span>-Objekt: eine Liste von
      Datensätzen, bestehend aus dem Dateityp, dem Dateinamen und
      einem SHA1-Hash-Wert. In unserem Beispiel ist der Dateityp
      100644, was bedeutet, dass <code class="literal">rose</code>
      eine normale Datei ist und der SHA1-Hash-Wert entspricht dem
      <span class="emphasis"><em>Blob</em></span>-Objekt, welches
      den Inhalt von <code class="literal">rose</code> enthält.
      Andere mögliche Dateitypen sind ausführbare Programmdateien,
      symbolische Links oder Verzeichnisse. Im letzten Fall zeigt
      der SHA1-Hash-Wert auf ein <span class=
      "emphasis"><em>Tree</em></span>-Objekt.</p>

      <p>Wenn Du <span class=
      "emphasis"><em>filter-branch</em></span> aufrufst, bekommst
      Du alte Objekte, welche nicht länger benötigt werden. Obwohl
      sie automatisch über Bord geworfen werden, wenn ihre
      Gnadenfrist abgelaufen ist, wollen wir sie nun löschen, damit
      wir unserem Beispiel besser folgen können.</p>
      <pre class="literallayout">
$ rm -r .git/refs/original
$ git reflog expire --expire=now --all
$ git prune
</pre>

      <p>Für reale Projekte solltest Du solche Anweisungen
      üblicherweise vermeiden, da Du dadurch Datensicherungen
      zerstörst. Wenn Du ein sauberes <span class=
      "emphasis"><em>Repository</em></span> willst, ist es am
      besten, einen neuen Klon anzulegen. Sei auch vorsichtig, wenn
      Du <code class="literal">.git</code> direkt manipulierst:
      was, wenn zeitgleich ein Git Kommando ausgeführt wird oder
      plötzlich der Strom ausfällt? Generell sollten Referenzen mit
      <span class="strong"><strong>git update-ref
      -d</strong></span> gelöscht werden, auch wenn es gewöhnlich
      sicher ist <code class="literal">refs/original</code> von
      Hand zu löschen.</p>
    </div>

    <div class="section" title="Commits">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_emphasis_commits_emphasis"></a><span class=
            "emphasis"><em>Commits</em></span></h2>
          </div>
        </div>
      </div>

      <p>Wir haben nun zwei von drei Objekten erklärt. Das dritte
      ist ein <span class="emphasis"><em>Commit</em></span>-Objekt.
      Sein Inhalt hängt von der <span class=
      "emphasis"><em>Commit</em></span>-Beschreibung ab, wie auch
      vom Zeitpunkt der Erstellung. Damit alles zu unserem Beispiel
      passt, müssen wir ein wenig tricksen:</p>
      <pre class="literallayout">
$ git commit --amend -m Shakespeare  # Ändere die Bemerkung.
$ git filter-branch --env-filter 'export
    GIT_AUTHOR_DATE="Fri 13 Feb 2009 15:31:30 -0800"
    GIT_AUTHOR_NAME="Alice"
    GIT_AUTHOR_EMAIL="alice@example.com"
    GIT_COMMITTER_DATE="Fri, 13 Feb 2009 15:31:30 -0800"
    GIT_COMMITTER_NAME="Bob"
    GIT_COMMITTER_EMAIL="bob@example.com"'  # Manipuliere Zeitstempel und Autor.
$ find .git/objects -type f
</pre>

      <p>Du solltest nun <code class=
      "literal">.git/objects/49/993fe130c4b3bf24857a15d7969c396b7bc187</code>
      finden, was dem SHA1-Hash-Wert seines Inhalts entspricht:</p>
      <pre class="literallayout">
"commit 158" NUL
"tree 05b217bb859794d08bb9e4f7f04cbda4b207fbe9" LF
"author Alice &lt;alice@example.com&gt; 1234567890 -0800" LF
"committer Bob &lt;bob@example.com&gt; 1234567890 -0800" LF
LF
"Shakespeare" LF
</pre>

      <p>Wie vorhin, kannst Du <span class=
      "emphasis"><em>zpipe</em></span> oder <span class=
      "emphasis"><em>cat-file</em></span> benutzen um es für Dich
      zu überprüfen.</p>

      <p>Das ist der erste <span class=
      "emphasis"><em>Commit</em></span> gewesen, deshalb gibt es
      keine Eltern-<span class="emphasis"><em>Commits</em></span>.
      Aber spätere <span class="emphasis"><em>Commits</em></span>
      werden immer mindestens eine Zeile enthalten, die den
      Eltern-<span class="emphasis"><em>Commit</em></span>
      identifiziert.</p>
    </div>

    <div class="section" title="Von Magie nicht zu unterscheiden">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_von_magie_nicht_zu_unterscheiden"></a>Von Magie nicht
            zu unterscheiden</h2>
          </div>
        </div>
      </div>

      <p>Git’s Geheimnisse scheinen zu einfach. Es sieht so aus als
      müsste man nur ein paar Kommandozeilenskripte zusammenmixen,
      einen Schuß C-Code hinzufügen und innerhalb ein paar Stunden
      ist man fertig: eine Mischung von grundlegenden
      Dateisystemoperationen und SHA1-Hash-Berechnungen, garniert
      mit Sperrdateien und Synchronisation für Stabilität.
      Tatsächlich beschreibt dies die früheste Version von Git.
      Nichtsdestotrotz, abgesehen von geschickten Verpackungstricks
      um Speicherplatz zu sparen und geschickten Indizierungstricks
      um Zeit zu sparen, wissen wir nun, wie Git gewandt ein
      Dateisystem in eine Datenbank verwandelt, das perfekt für
      eine Versionsverwaltung geeignet ist.</p>

      <p>Angenommen, wenn irgendeine Datei in der Objektdatenbank
      durch einen Laufwerksfehler zerstört wird, dann wird sein
      SHA1-Hash-Wert nicht mehr mit seinem Inhalt übereinstimmen
      und uns sagen, wo das Problem liegt. Durch Bilden von
      SHA1-Hash-Werten aus den SHA1-Hash-Werten anderer Objekte,
      erreichen wir Integrität auf allen Ebenen. <span class=
      "emphasis"><em>Commits</em></span> sind elementar, das heißt,
      ein <span class="emphasis"><em>Commit</em></span> kann
      niemals nur Teile einer Änderung speichern: wir können den
      SHA1-Hash-Wert eines <span class=
      "emphasis"><em>Commits</em></span> erst dann berechnen und
      speichern, nachdem wir bereits alle relevanten <span class=
      "emphasis"><em>Tree</em></span>-Objekte, <span class=
      "emphasis"><em>Blob</em></span>-Objekte und
      Eltern-<span class="emphasis"><em>Commits</em></span>
      gespeichert haben. Die Objektdatenbank ist immun gegen
      unerwartete Unterbrechungen wie zum Beispiel einen
      Stromausfall.</p>

      <p>Wir können sogar den hinterhältigsten Gegnern widerstehen.
      Stell Dir vor, jemand will den Inhalt einer Datei ändern, die
      in einer älteren Version eines Projekt liegt. Um die
      Objektdatenbank intakt aussehen zu lassen, müssten sie
      außerdem den SHA1-Hash-Wert des korrespondierenden
      <span class="emphasis"><em>Blob</em></span>-Objekt ändern, da
      die Datei nun eine geänderte Zeichenfolge enthält. Das heißt
      auch, dass sie jeden SHA1-Hash-Wert der <span class=
      "emphasis"><em>Tree</em></span>-Objekte ändern müssen, welche
      dieses Objekt referenzieren und demzufolge alle
      SHA1-Hash-Werte der <span class=
      "emphasis"><em>Commit</em></span>-Objekte, welche diese
      <span class="emphasis"><em>Tree</em></span>-Objekte
      beinhalten, zusätzlich zu allen Abkömmlingen dieses
      <span class="emphasis"><em>Commits</em></span>. Das bedeutet
      auch, dass sich der SHA1-Hash-Wert des offiziellen HEAD von
      dem des manipulierten <span class=
      "emphasis"><em>Repository</em></span> unterscheidet. Folgen
      wir dem Pfad der differierenden SHA1-Hash-Werte, finden wir
      die verstümmelte Datei, wie auch den <span class=
      "emphasis"><em>Commit</em></span>, in dem sie erstmals
      auftauchte.</p>

      <p>Kurz gesagt, so lange die 20 Byte, welche den
      SHA1-Hash-Wert des letzen <span class=
      "emphasis"><em>Commit</em></span> repräsentieren sicher sind,
      ist es unmöglich ein Git <span class=
      "emphasis"><em>Repository</em></span> zu fälschen.</p>

      <p>Was ist mit Git’s berühmten Fähigkeiten? <span class=
      "emphasis"><em>Branching</em></span>? <span class=
      "emphasis"><em>Merging</em></span>? <span class=
      "emphasis"><em>Tags</em></span>? Nur Kleinigkeiten. Der
      aktuelle HEAD wird in der Datei <code class=
      "literal">.git/HEAD</code> gehalten, welche den
      SHA1-Hash-Wert eines <span class=
      "emphasis"><em>Commit</em></span>-Objekts enthält. Der
      SHA1-Hash-Wert wird während eines <span class=
      "emphasis"><em>Commit</em></span> aktualisiert, genauso bei
      vielen anderen Anweisungen. <span class=
      "emphasis"><em>Branches</em></span> sind fast das selbe: sie
      sind Dateien in <code class="literal">.git/refs/heads</code>.
      <span class="emphasis"><em>Tags</em></span> ebenso: sie
      stehen in <code class="literal">.git/refs/tags</code> aber
      sie werden durch einen Satz anderer Anweisungen
      aktualisiert.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

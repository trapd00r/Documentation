From zsh-workers-return-21288-mason-zsh=primenet.com.au@sunsite.dk Fri May 27 16:35:31 2005
Return-Path: <zsh-workers-return-21288-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19361 invoked from network); 27 May 2005 16:35:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 May 2005 16:35:30 -0000
Received: (qmail 12875 invoked from network); 27 May 2005 16:35:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 May 2005 16:35:24 -0000
Received: (qmail 12568 invoked by alias); 27 May 2005 16:35:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21288
Received: (qmail 12553 invoked from network); 27 May 2005 16:35:20 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 May 2005 16:35:20 -0000
Received: (qmail 12565 invoked from network); 27 May 2005 16:35:20 -0000
Received: from sdt.univ-brest.fr (194.167.226.209)
  by a.mx.sunsite.dk with SMTP; 27 May 2005 16:35:17 -0000
Received: from [194.167.226.194] (dormeur.univ-brest.fr [194.167.226.194])
          by sdt.univ-brest.fr (8.9.3/jtpda-5.3.1) with ESMTP id SAA13258
          ; Fri, 27 May 2005 18:34:58 +0200 (MEST)
Message-ID: <42974C31.7040508@free.fr>
Date: Fri, 27 May 2005 18:34:57 +0200
From: Christophe Martin <schplurtz@free.fr>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050331)
X-Accept-Language: fr, en
MIME-Version: 1.0
To: Bart Schaefer <schaefer@brasslantern.com>, Clint Adams <schizo@debian.org>,
        310872@bugs.debian.org
CC: zsh-workers@sunsite.dk
Subject: Re: Bug#310872: zsh can't be a ksh replacement (can't trap ERR).
References: <200505261638.SAA09610@sdt.univ-brest.fr>	<20050526191520.GA30061@scowler.net>	<1050527012028.ZM21361@candle.brasslantern.com>	<42971795.8090005@free.fr> <1050527141906.ZM21908@candle.brasslantern.com>
In-Reply-To: <1050527141906.ZM21908@candle.brasslantern.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Bart Schaefer a écrit :
> No, you just have to put the above in /etc/zshenv, which is read by all
> instances of zsh, whether script or interactive.

I wish you were right, this would solve the problem. but according
to zsh man page :
       In sh and ksh compatibility modes
       [snip...]
       The  usual zsh startup/shutdown scripts are not executed.

I just tried to put ": > /tmp/zsh.$$" in /etc/zsh/zshenv and run ksh (the
symlink to zsh)... No file were present in /tmp :-(

> That's not the only incompatibility, by a long shot.  Don't try scripts
> using namerefs or discipline functions, for example.
No doubt. But as I wrote in reply to Clint message, we all have different
idea of what a 'ksh' should be.
I originally sent the report because I *feel* a trap on ERR was such a
basic thing that any ksh should implement it.

I learned life is not that simple, and one OS uses SIGERR just to make life
harder for every one.

Now, unless you have another workaround, it seems there is no
simple way to solve this.

I can only hope Debian maintainers will agree with me, and perhaps some
zsh-workers too ;-)

> } (By the way, what are the platform with OS
> } SIGERR ? And do some ksh run on them ?)
> 
> UNICOS, according to the Zsh FAQ.  I have no idea whether ksh has been
> ported to that.
Thanks for the info.

Going back to real life,
Regards.
-- 
char*p="c+)1+)I1+++(Y1)I1)1)I1)19Y(QII1)1)I1)19Q(K)K+)I1+9I(a)I1)II1))AA(91)I\
1)II1)199(3+)1)K+)19;(";main(_){while(*p){for(_=*p-32>>3;_;--_)putchar(' ');if
(!(_=*p++-32&7))putchar('\n');else while(_--)printf("_/");}}


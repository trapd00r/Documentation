From zsh-workers-return-12933-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Oct 09 15:31:25 2000
Return-Path: <zsh-workers-return-12933-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15855 invoked from network); 9 Oct 2000 15:31:24 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Oct 2000 15:31:24 -0000
Received: (qmail 10777 invoked by alias); 9 Oct 2000 15:31:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12933
Received: (qmail 10770 invoked from network); 9 Oct 2000 15:31:06 -0000
Sender: simond@informix.com
Message-ID: <39E1E744.6E043176@informix.com>
Date: Mon, 09 Oct 2000 16:41:56 +0100
From: Cosmo <cosmo@informix.com>
Organization: Transact Solutions
X-Mailer: Mozilla 4.75 [en] (X11; U; Linux 2.4.0-test8 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.auc.dk
Subject: NCR compiler problems on NCR
Content-Type: text/plain; charset=iso-8859-15
Content-Transfer-Encoding: 7bit


I'm trying to make some use of an old NCR machine but I am having some trouble
compiling Zsh with the native compiler. The configure script works out that there
is a 64 bit type of long long and so zlong is defined as such. However the compiler
does not like the following syntax:

extern long long func1();

func2()
{
    /* This fails */
    int Z1 = (int)func1();
    
    /* This is OK */
    long long Z2 = func1();
}

Giving errors like:

>>>At "b.c", 8: >>>>>>>>   S Y S T E M   E R R O R   1   <<<<<<<<, in 
pop() -- stack is empty!

This is a problem in the zsh src (I'm using 3.1.9) with all the references
to zstrtol() which is of type zlong->long long. 

Trying to compile gcc on this machine is also not going very well so I need
a way to dissable the detection of long long type or some other way to get 
round this problem. It has an old zsh 2.6 which works but needs to be 
replaced.

cc -V gives me: NCR High Performance C Compiler R1.0 (SCDE 2.03.00)

If any one knows how to fix the compiler, fix the zsh src config or build
a working gcc I'd love to know.




Cosmo


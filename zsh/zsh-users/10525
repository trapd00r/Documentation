From zsh-users-return-10525-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 17 04:53:08 2006
Return-Path: <zsh-users-return-10525-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17730 invoked from network); 17 Jul 2006 04:53:05 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Jul 2006 04:53:05 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 79651 invoked from network); 17 Jul 2006 04:52:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Jul 2006 04:52:56 -0000
Received: (qmail 16954 invoked by alias); 17 Jul 2006 04:52:49 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10525
Received: (qmail 16944 invoked from network); 17 Jul 2006 04:52:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Jul 2006 04:52:49 -0000
Received: (qmail 78589 invoked from network); 17 Jul 2006 04:52:49 -0000
Received: from py-out-1112.google.com (64.233.166.178)
  by a.mx.sunsite.dk with SMTP; 17 Jul 2006 04:52:47 -0000
Received: by py-out-1112.google.com with SMTP id w49so1405755pyg
        for <zsh-users@sunsite.dk>; Sun, 16 Jul 2006 21:52:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=WeSS13zz7Jdadt2m4wcdEzNWtWAsEVnJwzbc4EEOfCpTzysa9as9eUTGWX8XSCfDoLAzYaZW6wWWP5W6fjbT9OBpI3p3I/HxXlt+klrK7mu2YP5PauifwiqjfheIktWMen9INLv1HIjczMcfabVk2IXFnFNcDw7AvGJ2zxxdCCo=
Received: by 10.35.107.20 with SMTP id j20mr3466190pym;
        Sun, 16 Jul 2006 21:52:45 -0700 (PDT)
Received: by 10.35.130.3 with HTTP; Sun, 16 Jul 2006 21:52:45 -0700 (PDT)
Message-ID: <96c45c490607162152k4d7d81b8x5d143c7b5c51d585@mail.gmail.com>
Date: Mon, 17 Jul 2006 14:52:45 +1000
From: Sean <schliden@gmail.com>
To: zsh-users@sunsite.dk
Subject: Output not being echo'd in shell scripts.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am having problems running a simple shell script: todo.sh [todotxt.com]

I am running the windows port of zsh (ver 3.0.5) supplied with unixkit-tiny.

The problem is simply that commands that work when entered directly at
the prompt do not seem to work when run in a shell script.

I have tested the script by running each line in the shell and I
believe the problem is related to the echo command.

For instance, the command:

"todo.sh list" should list all items in the todo.txt file but instead
returns this:

--
TODO:  tasks in /unixkit/todo/todo.txt.


If I execute the appropriate commands directly in the shell like this:

echo -e "`sed = "/unixkit/todo/todo.txt" | sed 'N; s/^/  /; s/
*\(.\{2,\}\)\n/\1 /' | sed 's/^ /0/' | sort -k2 | sed
's/\(.*(A).*\)/'$PRI_A'\1'$DEFAULT'/g' | sed
's/\(.*(B).*\)/'$PRI_B'\1'$'/g' | sed 's/\(.*(C).* \)/'$PRI_C'\1'$'/g'
| sed 's/\(.*([A-Z]).*\)/'$PRI_X'\1'$DEFAULT'/g'`"

I get the appropriate result:

01 Compile list of items to sell p:garage_cleanup @home

If I add -x to the shebang, I get the following:
____

+ action=list
+ item=
+ '[' -z '' ']'
++ sed = /unixkit/todo/todo.txt
++ sed 'N; s/^/  /; s/ *\(.\{2,\}\)\n/\1 /'
++ sed 's/^ /0/'
++ sort -k2
++ sed 's/\(.*(A).*\)/\\033[1;33m\1\\033[0m/g'
++ sed 's/\(.*(B).*\)/\\033[0;32m\1/g'
++ sed 's/\(.*(C).* \)/\\033[1;34m\1/g'
++ sed 's/\(.*([A-Z]).*\)/\\033[1;37m\1\\033[0m/g'
+ echo -e ''

+ echo --
--
++ wc -l /unixkit/todo/todo.txt
++ sed 's/^[[:space:]]*\([0-9]*\).*/\1/'
+ NUMTASKS=
+ echo 'TODO:  tasks in /unixkit/todo/todo.txt.'
TODO:  tasks in /unixkit/todo/todo.txt.
+ cleanup
+ '[' -f /unixkit/todo/todo.tmp ']'
+ rm /unixkit/todo/todo.tmp
+ exit 0
____

Anyway, I was hoping that it is somthing simple that I am doing wrong
/ need to configure in the zsh environment.

TIA

Sean


From zsh-workers-return-11747-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 05 08:55:00 2000
Return-Path: <zsh-workers-return-11747-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 737 invoked from network); 5 Jun 2000 08:54:52 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Jun 2000 08:54:52 -0000
Received: (qmail 4082 invoked by alias); 5 Jun 2000 08:54:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11747
Received: (qmail 4069 invoked from network); 5 Jun 2000 08:54:34 -0000
Date: Mon, 5 Jun 2000 10:54:32 +0200 (MET DST)
Message-Id: <200006050854.KAA03756@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Mon, 5 Jun 2000 01:13:23 +0000
Subject: Re: PATCH: complete rpm --{resign,addsign} in local


Bart Schaefer wrote:

> On Jun 4,  5:09pm, Clint Adams wrote:
> } Subject: Re: PATCH: complete rpm --{resign,addsign} in local
> }
> } > Index: Completion/Linux/_rpm
> } 
> } zsh is still completing filenames directly after rpm -qcp or -qpc,
> } with no space, FWIW.
> 
> This is problematic.
> 
> Currently _rpm uses `-p+' as the spec for the -p option.  That means that
> anything that will follow the -p (including package file name) is allowed
> to appear in the same word, or in the next word.
> 
> If we remove the `+', then "rpm -qpc" doesn't match the spec `-p', and so
> completion doesn't enter the `package_file' state -- it instead enters the
> `package_or_file' state (the default spec from the `query' state).
> 
> If there's a clever workaround for this, I don't know it.  (Perhaps this
> is an indication of some lingering bugginess with `_arguments -s'?)

Hrm. So we have to make it complete option arguments in the next
word(s) even if the option string doesn't end in the option, right?

What makes me cringe is the case where we have -xy and both options
have arguments...

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


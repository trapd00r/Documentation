From zsh-users-return-11184-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 10 08:35:42 2007
Return-Path: <zsh-users-return-11184-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11755 invoked from network); 10 Feb 2007 08:35:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Feb 2007 08:35:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 52019 invoked from network); 10 Feb 2007 08:35:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Feb 2007 08:35:29 -0000
Received: (qmail 14479 invoked by alias); 10 Feb 2007 08:35:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11184
Received: (qmail 14469 invoked from network); 10 Feb 2007 08:35:21 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Feb 2007 08:35:21 -0000
Received: (qmail 50975 invoked from network); 10 Feb 2007 08:35:21 -0000
Received: from smtpout0132.sc1.he.tucows.com (HELO n068.sc1.he.tucows.com) (64.97.136.132)
  by a.mx.sunsite.dk with SMTP; 10 Feb 2007 08:35:15 -0000
Received: from sc.homeunix.net (82.26.174.36) by n068.sc1.he.tucows.com (7.2.069.1)
        id 45ABDE1A001F8E0B for zsh-users@sunsite.dk; Sat, 10 Feb 2007 08:35:13 +0000
Received: from chazelas by sc.homeunix.net with local (Exim 3.36 #1 (Debian))
	id 1HFnhP-0001JT-00
	for <zsh-users@sunsite.dk>; Sat, 10 Feb 2007 08:35:11 +0000
Date: Sat, 10 Feb 2007 08:35:11 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: zsh-users@sunsite.dk
Subject: Re: test if a parameter is numeric
Message-ID: <20070210083511.GA4522@sc.homeunix.net>
Mail-Followup-To: zsh-users@sunsite.dk
References: <Xns98D2ADD16C100zzappergmailcom@80.91.229.5> <070209182939.ZM18654@torch.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <070209182939.ZM18654@torch.brasslantern.com>
User-Agent: Mutt/1.5.6i
Sender: Stephane Chazelas <stephane_chazelas@yahoo.fr>

On Fri, Feb 09, 2007 at 06:29:38PM -0800, Bart Schaefer wrote:
> On Feb 9,  5:05pm, zzapper wrote:
> }
> } I just want to test if a parameter is numeric
> } 
> } if [[ "$1" == [0-9] ]]
> 
> Better:
> 
>   if [[ "$1" = <-> ]]
> 
> This is a zsh-ism, so it's not cross-shell portable, but the pattern <->
> matches any string having any number of digits and only digits.

I was under the impression that zzapper was looking for
something to match *one* *decimal* digit though.

For positive decimal numbers, <-> will do (unless you don't want
to consider 09 or numbers greater than your max interger as
valid numbers).

To check for signed integer constants expressed in any notation
recognized by zsh (like 0xa, 8#77, 012 (being 10 or 12 depending
on "octalzeroes")...), it's a bit more tricky.

By the way, are those normal:

$ echo $((40#^))
39

(given that ^ is also an arithmetic operator)?

$ echo $((02#11))
3
$ setopt octalzeroes
$ echo $((02#11))
zsh: bad math expression: operator expected at `#11'
$

-- 
Stéphane


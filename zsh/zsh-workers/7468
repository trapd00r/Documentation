From zsh-workers-return-7468-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Aug 23 16:17:23 1999
Return-Path: <zsh-workers-return-7468-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14673 invoked from network); 23 Aug 1999 16:17:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Aug 1999 16:17:21 -0000
Received: (qmail 16972 invoked by alias); 23 Aug 1999 16:17:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7468
Received: (qmail 16965 invoked from network); 23 Aug 1999 16:17:05 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: completion
References: <199908231346.PAA03326@beta.informatik.hu-berlin.de>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 24 Aug 1999 01:16:59 +0900
In-Reply-To: Sven Wischnowsky's message of "Mon, 23 Aug 1999 15:46:54 +0200 (MET DST)"
Message-ID: <rsqpv0ev5dw.fsf@crane.jaist.ac.jp>
Lines: 109
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <199908231346.PAA03326@beta.informatik.hu-berlin.de>,
  Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

> This tries to implement this.

OK. I wrote _xterm.

It uses '-e:*::program: _normal' as the argument to _arguments and
`xterm -e <TAB>' works well. But `xterm -132 -e <TAB>' does not.

Z(2):akr@is27e1u11% ./Src/zsh -f
is27e1u11% bindkey -e; fpath=($PWD/Completion/*(/)); autoload -U compinit; compinit -D; compdef _tst tst
is27e1u11% compconf group_matches=yes
is27e1u11% compconf message_format='%d'
is27e1u11% compconf description_format='%d'
is27e1u11% xterm -132 -e <TAB>_normal: bad option: -e [26]

file
CVS/            Functions/      Src/            config.guess*   configure.in 
ChangeLog       INSTALL         StartupFiles/   config.h        install-sh*
ChangeLog.3.0   META-FAQ        Util/           config.h.in     mkinstalldirs*
Completion/     Makefile        acconfig.h      config.log      stamp-h 
Config/         Makefile.in     aclocal.m4      config.status*  stamp-h.in 
Doc/            Misc/           aczsh.m4        config.sub*     
Etc/            README          config.cache    configure*      

This is because _arguments does not cut off words correctly, I think.

Index: Completion/User/_xterm
===================================================================
RCS file: _xterm
diff -N _xterm
--- /dev/null	Fri Apr 17 15:56:34 1998
+++ Completion/User/_xterm	Mon Aug 23 15:43:48 1999
@@ -0,0 +1,72 @@
+#compdef xterm
+
+_arguments \
+  '-version' \
+  '-help' \
+  '-132' \
+  '-ah' '+ah' \
+  '-ai' '+ai' \
+  '-aw' '+aw' \
+  '-b:inner border size:' \
+  '-bc' '+bc' \
+  '-bcf:time text cursor is off when blinking (milliseconds):' \
+  '-bcn:time text cursor is on when blinking (milliseconds):' \
+  '-bdc' '+bdc' \
+  '-cb' '+cb' \
+  '-cc:character class:' \
+  '-cm' '+cm' \
+  '-cn' '+cn' \
+  '-cr:text cursor color:_color' \
+  '-cu' '+cu' \
+  '-dc' '+dc' \
+  '-e:*::program: _normal' \
+  '-fb:bold font:' \
+  '-fi:icon font:' \
+  '-hc:background color for highlighted text:_color' \
+  '-hf' '+hf' \
+  '-ie' '+ie' \
+  '-im' '+im' \
+  '-j' '+j' \
+  '-leftbar' \
+  '-ls' '+ls' \
+  '-mb' '+mb' \
+  '-mc:multi-click threshold (milliseconds):' \
+  '-ms:pointer cursor color:_color' \
+  '-nb:margin bell number:' \
+  '-nul' '+nul' \
+  '-pc' '+pc' \
+  '-rightbar' \
+  '-rw' '+rw' \
+  '-s' '+s' \
+  '-samename' '+samename' \
+  '-sb' '+sb' \
+  '-sf' '+sf' \
+  '-si' '+si' \
+  '-sk' '+sk' \
+  '-sl:save lines:' \
+  '-sp' '+sp' \
+  '-t' '+t' \
+  '-ti:terminal ID:(vt52 vt100 vt101 vt102 vt220)' \
+  '-tm:terminal setting:' \
+  '-tn:terminal type:' \
+  '-u8' '+u8' \
+  '-ulc' '+ulc' \
+  '-ut' '+ut' \
+  '-vb' '+vb' \
+  '-wc' '+wc' \
+  '-wf' '+wf' \
+  '-ziconbeep:iconbeep (percent):' \
+  '-C' \
+  '-S-:pseudo-terminal and file descriptor:' \
+  '-bd:border color:_color' \
+  '-bg:background color:_color' \
+  '-bw:border width:' \
+  '-display:display:' \
+  '-fg:foreground color:_color' \
+  '-fn:font:' \
+  '-geometry:geometry:' \
+  '-iconic' \
+  '-name:name:' \
+  '-rv' \
+  '-title:title:' \
+  '-xrm:resource:'
-- 
Tanaka Akira


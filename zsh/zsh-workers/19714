From zsh-workers-return-19714-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 31 16:47:39 2004
Return-Path: <zsh-workers-return-19714-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1198 invoked from network); 31 Mar 2004 16:47:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 31 Mar 2004 16:47:38 -0000
Received: (qmail 6893 invoked by alias); 31 Mar 2004 16:47:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19714
Received: (qmail 6878 invoked from network); 31 Mar 2004 16:47:31 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 31 Mar 2004 16:47:31 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 31 Mar 2004 16:47:30 -0000
Received: (qmail 12109 invoked from network); 31 Mar 2004 16:47:30 -0000
Received: from wbar3.sjo1-4-11-009-147.sjo1.dsl-verizon.net (HELO candle.brasslantern.com) (4.11.9.147)
  by a.mx.sunsite.dk with SMTP; 31 Mar 2004 16:47:27 -0000
Received: (from schaefer@localhost)
	by candle.brasslantern.com (8.11.6/8.11.6) id i2VGlPT29344
	for zsh-workers@sunsite.dk; Wed, 31 Mar 2004 08:47:25 -0800
X-Authentication-Warning: candle.brasslantern.com: schaefer set sender to schaefer@closedmail.com using -f
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1040331164725.ZM29343@candle.brasslantern.com>
Date: Wed, 31 Mar 2004 16:47:25 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Another completion-time screen refresh bug
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: ****
X-Spam-Status: No, hits=4.7 required=6.0 tests=RCVD_IN_DYNABLOCK,
	RCVD_IN_NJABL,RCVD_IN_NJABL_DIALUP,RCVD_IN_SORBS autolearn=no 
	version=2.63
X-Spam-Hits: 4.7

With this style:
zstyle ':completion:*' completer _all_matches _complete _match _approximate

If, in the zsh source tree, I type:

schaefer<528> rm <TAB>

I get the following output, with the cursor on the SECOND line:

schaefer<528> rm  
Completing filrm
Src/                  LICENCE               Doc/                
ChangeLog             CVS/                  Misc/               
Completion/           config.sub*           Functions/          
stamp-h.in            config.guess*         StartupFiles/       
configure*            INSTALL               ChangeLog-3.1       
autom4te-2.53.cache/  Makefile.in           ChangeLog.3.0       
configure.ac          README                mkinstalldirs*      
Util/                 config.h.in           install-sh*         
Test/                 config.h.in\~         aclocal.m4          
Etc/                  aczsh.m4                                  
Config/               META-FAQ                                  
Completing all matches
Src ChangeLog Completion stamp-h.in configure autom4te-2.53.cache configure. ...


Note that the final line there after "Completing all matches" is exactly as
wide as the terminal.  The line editor obviously has missed that the cursor
wrapped to the next line at that point, and didn't emit enough "up" motions.
(There is only one line after "Completing all matches", beware of your mail
program displaying it wrapped.)


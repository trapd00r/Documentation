From zsh-users-return-10845-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 12 12:38:06 2006
Return-Path: <zsh-users-return-10845-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18419 invoked from network); 12 Oct 2006 12:38:02 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.6 (2006-10-03) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.6
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Oct 2006 12:38:02 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 77183 invoked from network); 12 Oct 2006 12:37:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Oct 2006 12:37:56 -0000
Received: (qmail 28173 invoked by alias); 12 Oct 2006 12:37:46 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10845
Received: (qmail 28162 invoked from network); 12 Oct 2006 12:37:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Oct 2006 12:37:44 -0000
Received: (qmail 75900 invoked from network); 12 Oct 2006 12:37:44 -0000
Received: from goliath.siemens.de (192.35.17.28)
  by a.mx.sunsite.dk with SMTP; 12 Oct 2006 12:37:43 -0000
Received: from mail2.siemens.de (localhost [127.0.0.1])
	by goliath.siemens.de (8.12.6/8.12.6) with ESMTP id k9CCbeXF004121;
	Thu, 12 Oct 2006 14:37:40 +0200
Received: from mchp771a.ww002.siemens.net (mchp771a.ww002.siemens.net [139.25.131.189])
	by mail2.siemens.de (8.12.6/8.12.6) with ESMTP id k9CCbdCY026151;
	Thu, 12 Oct 2006 14:37:39 +0200
Received: from MCHP7R6A.ww002.siemens.net ([139.25.131.164]) by mchp771a.ww002.siemens.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 12 Oct 2006 14:37:39 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: logout from interactive subshell
Date: Thu, 12 Oct 2006 14:36:53 +0200
Message-ID: <F7507090F1A72B43A51444325DFBE43101391F32@MCHP7R6A.ww002.siemens.net>
In-Reply-To: <jepscxrcvq.fsf@sykes.suse.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: logout from interactive subshell
thread-index: Acbt8iA92v8vbmkwRpuU3FFmSPnnNQACHCgQ
From: "Com MN PG P E B Consultant 3" <mn-pg-p-e-b-consultant-3.com@siemens.com>
To: "Andreas Schwab" <schwab@suse.de>
Cc: "Vincent Lefevre" <vincent@vinc17.org>,
   "zsh-users Mailinglist" <zsh-users@sunsite.dk>, <bug-bash@gnu.org>
X-OriginalArrivalTime: 12 Oct 2006 12:37:39.0304 (UTC) FILETIME=[34158E80:01C6EDFB]

> > I can't use traps here, because I know only at "exit time", whether
> > I want to logout completely, or just go up one level.
>=20
> $ call_and_exit() { "$@"; if test $? -eq 42; then exit; fi; }
> $ call_and_exit cleartool ...
> $ exit 42

This looks clever. Maybe one should use "exit 42" too in the definition
of call_and_exit
to propagate the exit up, but basically a nice idea. Maybe only
disadvantage that I have
to think before when calling the subshell (either by calling it via
call_and_exit, or
by setting up suitable aliases for cleartool, bash, zsh etc., to do this
automatically)
- I had hoped I cut do this with an intelligent alias which gets me out
of any deep
nesting of subshells without having done any preparation work before.
But your solution
is at least cleaner than the brute-force way of finding the login shell
via ps, and
then killing it.

Will give your idea a thought. Thanks a lot.

Ronald
--=20
Ronald Fischer (phone +49-89-63676431)
mailto:mn-pg-p-e-b-consultant-3.com@siemens.com


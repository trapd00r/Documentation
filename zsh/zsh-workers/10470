From zsh-workers-return-10470-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 04 14:43:17 2000
Return-Path: <zsh-workers-return-10470-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5986 invoked from network); 4 Apr 2000 14:43:16 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Apr 2000 14:43:16 -0000
Received: (qmail 29290 invoked by alias); 4 Apr 2000 14:43:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10470
Received: (qmail 29282 invoked from network); 4 Apr 2000 14:43:08 -0000
Date: Tue, 4 Apr 2000 16:43:05 +0200 (MET DST)
Message-Id: <200004041443.QAA00885@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Tue, 4 Apr 2000 14:37:24 +0000
Subject: Re: PATCH: Re: zrecompile


Bart Schaefer wrote:

> On Apr 4,  4:07pm, Sven Wischnowsky wrote:
> } Subject: PATCH: Re: zrecompile
> }
> } Bart Schaefer wrote:
> } 
> } > } And another thing: the zwc files till use $ZSH_VERSION in the header
> } > } to test for compatibility -- somehow I didn't like to add an additional 
> } > } version number scheme for them, but it would be better, I think (the
> } > } format will certainly change less often than $ZSH_VERSION).
> } > 
> } > Yea, but it'll be much less recognizable in the -t output.  I think the
> } > $ZSH_VERSION test is fine.
> 
> Having thought about it a bit longer now, I have a suggestion: Put *both*
> a .zwc version number *and* $ZSH_VERSION into the header.  When the .zwc
> version doesn't match, display the $ZSH_VERSION string in the error output.
> That completely hides the .zwc version from anyone who would be confused
> by it, while avoiding the need to recompile when the shell is upgraded.

Wouldn't that be rather confusing? I mean: for some reason we have to
change the zwc-version, but the ZSH_VERSION is still the same. The shell
can't load an old zwc file and says: `wrong version (...)' where `...'
is the same as $ZSH_VERSION.

This would only affect people upgrading their shell between releases,
though... hm.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


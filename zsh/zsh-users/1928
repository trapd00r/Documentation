From zsh-workers-request@math.gatech.edu Sat Nov 07 07:33:31 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12657 invoked from network); 7 Nov 1998 07:33:30 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 7 Nov 1998 07:33:30 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id CAA15492;
	Sat, 7 Nov 1998 02:32:20 -0500 (EST)
Resent-Date: Sat, 7 Nov 1998 02:32:14 -0500 (EST)
To: zsh-users@math.gatech.edu
Subject: Curiosity about EMULATE_SH and su
X-URL: http://www.zeppelin.net/obiwan/
X-OS: FreeBSD zeppelin.net 3.0-CURRENT ZEPPELIN#6 Mon Nov 2 16:32:52 i386
Organization: Zeppelin Internet Services
Mime-Version: 1.0 (generated by tm-edit 7.108)
Content-Type: text/plain; charset=US-ASCII
From: Josh Howard <jrh@zeppelin.net>
Date: 06 Nov 1998 23:31:38 -800
Message-ID: <8767csrmat.fsf@zeppelin.net>
Lines: 24
User-Agent: Gnus/5.07004 (Pterodactyl Gnus v0.40) XEmacs/21.2(beta3) (Aglaia)
Resent-Message-ID: <"Qq59c1.0.bn3.-T_Gs"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1928
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I'm a bit curious as to why in options.c, there's only a check for the 
first letter when deciding what sort of emulation we're going  to do.
Wouldn't it make more sense to revert back to the old form and check 
for the entire name?

The current form being:
    else if (ch == 's' || ch == 'b')
        emulation = EMULATE_SH;

The old form being:
    else if(!strcmp(zsh_name, "sh"))
        emulation = EMULATE_SH;

Currently, when I "su" on my machine, I get a ZSH_NAME of "su" and my
shell drops in to sh compatibility mode, this is obviously not
happening with every OS; FreeBSD's su is making some assumptions, but
what would be the harm in the old method? Just a little curious. I
have no problem patching my version of zsh, and even contributing a
patch to the FreeBSD folks, but I figured you might like to hear about 
it.

-- 
Josh Howard (jrh@zeppelin.net) -- http://www.zeppelin.net
"Reality is that which, when you stop believing in it, doesn't go away." 


From zsh-workers-return-18377-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 24 12:57:38 2003
Return-Path: <zsh-workers-return-18377-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5822 invoked from network); 24 Mar 2003 12:57:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 24 Mar 2003 12:57:37 -0000
Received: (qmail 28438 invoked by alias); 24 Mar 2003 12:57:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18377
Received: (qmail 28427 invoked from network); 24 Mar 2003 12:57:30 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 24 Mar 2003 12:57:30 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [217.160.132.27] by sunsite.dk (MessageWall 1.0.8) with SMTP; 24 Mar 2003 12:57:30 -0000
Received: from janus by serva319.de with local (Exim 4.10)
	id 18xRW6-0006AQ-00
	for zsh-workers@sunsite.dk; Mon, 24 Mar 2003 13:57:30 +0100
Date: Mon, 24 Mar 2003 13:57:30 +0100
From: Simon Dassow <janus@area319.de>
To: zsh-workers@sunsite.dk
Subject: custom widget / redraw prompt
Message-ID: <20030324125730.GA23684@nexus>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.1i
Sender: Simon Dassow <janus@serva319.de>
X-SA-Exim-Rcpt-To: zsh-workers@sunsite.dk
X-SA-Exim-Scanned: No; SAEximRunCond expanded to false

Hi all,
i'm currently on a custom widget, which will dis/enable the RPROMPT on
keypress (^P), so i can copy the commandline without the RPROMPT.
What i currently have in my .zshrc is:

switch-rprompt() {
	if [[ -z $RPROMPT ]]; then
		export RPROMPT=$MYRPROMPT
	else
		export RPROMPT=""
	fi
	zle -R
}
zle -N switch-rprompt
bindkey ^P switch-rprompt

but that doesnt works like it should.
Maybe some of you knows whats wrong there, i've already searched the
manpages, but i must be blind or so.

Regards,
Simon


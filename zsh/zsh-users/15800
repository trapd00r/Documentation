From zsh-users-return-15800-mason-zsh=primenet.com.au@zsh.org Mon Feb 14 20:16:54 2011
Return-Path: <zsh-users-return-15800-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19069 invoked by alias); 14 Feb 2011 20:16:54 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15800
Received: (qmail 14487 invoked from network); 14 Feb 2011 20:16:43 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.7 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.161.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=a0InwEFmvelzAt7lSeCDIMNDm9R1fONmzAqi+8xcT4g=;
        b=hcWhPERJUphTnHkFzRXrasiXzE/Qxogd721lQsvbLg7IbeoSDY5vrRrxAm9nwMjyTl
         s+/xrOlauwMh7EreSGpRjxtUa/KTaMeHnnopnoen7OU+MKkkDmp6L4lxKyNjQMJ8EZPX
         /1VueGuuJ9YJwAPU08dbzaqczLcVYZUX8s+So=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=BnMEZ4hxSsbt4hLiYI68bF05EkTnghwOesNn7TDFIXSZ2fA8aNjzSJfBQ4sFR1qO9V
         u8DT/LK9G2ZR/vv1vUeKKnjsk/ZZA5yJYEBucW4nficAALX9LcipfQlH+TpE5sd0SL0C
         0AGloX6BvbNV8nysJkD1VWb2YjY7rh9UXVReg=
MIME-Version: 1.0
In-Reply-To: <AANLkTi=vmDkSaef2r-gaMK=6en=EYyCsWbVppRsPwF5r@mail.gmail.com>
References: <AANLkTi=vmDkSaef2r-gaMK=6en=EYyCsWbVppRsPwF5r@mail.gmail.com>
Date: Mon, 14 Feb 2011 12:16:35 -0800
Message-ID: <AANLkTi=yqfpAuzEZvY_joEE4pg4bvcBsZ7rfGHoEgRpr@mail.gmail.com>
Subject: Re: Commands with passwords as options
From: PJ Weisberg <pjweisberg@gmail.com>
To: Julien Nicoulaud <julien.nicoulaud@gmail.com>
Cc: zsh-users <zsh-users@zsh.org>
Content-Type: text/plain; charset=ISO-8859-1

On 2/1/11, Julien Nicoulaud <julien.nicoulaud@gmail.com> wrote:
> Some commands take passwords as option values, which is not very secure... I
> was wondering if there is some way to handle that, for example through a
> custom completer. Ideally, I here is how it should behave:
>  - When reaching an option which expected value is a password, prompt for it
> and read it from stdin
>  - Do not display it in the buffer (just replace it with "XXXX" for example)
>  - When accepting the buffer, replace the displayed buffer with the real one
>  - Save the displayed buffer in the history rather than the real one
>
> Does anyone have an idea on how to achieve this ?
>
> Regards,
> Julien
>

This strikes me as something that's so insecure that it should LOOK
insecure.  Hiding it in the history file is ok, but if the password is
hidden on the command line the user will assume it's being hidden in
other ways, when that's not actually possible.
-- 

-PJ


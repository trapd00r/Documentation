From zsh-workers-return-9266-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jan 07 22:24:24 2000
Return-Path: <zsh-workers-return-9266-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8730 invoked from network); 7 Jan 2000 22:24:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Jan 2000 22:24:23 -0000
Received: (qmail 19202 invoked by alias); 7 Jan 2000 22:24:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9266
Received: (qmail 19192 invoked from network); 7 Jan 2000 22:24:12 -0000
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: Re: Version-dependent functions install path 
In-reply-to: "Tanaka Akira"'s message of "07 Jan 2000 07:23:18 +0900."
             <rsqembu4z6x.fsf@crane.jaist.ac.jp> 
Date: Fri, 07 Jan 2000 22:26:07 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E126hnm-0000Ph-00.2000-01-07-22-24-11@cmailg2.svr.pol.co.uk>

Tanaka Akira wrote:
> I think DATADIR/zsh/VERSION/functions is better than
> DATADIR/zsh/functions/VERSION because it enables us to collect version
> specific stuff other than functions.  

Actually, this is also just like Emacs.

> Also when a lazy administrater
> install zsh-3.1.7 over zsh-3.1.6, a directory structure stays somewhat
> clean.

I suppose you mean that the zsh-3.1.7 directory isn't buried among lots of
files or irrelevant subdirectories.

> Also, DATADIR/zsh/VERSION/site-functions and
> DATADIR/zsh/site-functions should be exist for site specific
> modifications and add-on packages.  Currently there is no add-on
> packages, though.

I wondered about this, but it's so easy to add in /etc/zshenv that I didn't
add it.  But maybe something will turn up that makes it more obviously useful.

Index: INSTALL
===================================================================
--- INSTALL	2000/01/07 19:42:02	1.3
+++ INSTALL	2000/01/07 19:42:34
@@ -247,7 +247,7 @@
 By default, the shell functions which are installed with `make install' or
 `make install.fns' go into the directory ${datadir}/zsh/functions, which
 unless you have specified --datadir is the same as
-${prefix}/share/zsh/functions/$ZSH_VERSION ($prefix itself defaults to
+${prefix}/share/zsh/$ZSH_VERSION/functions ($prefix itself defaults to
 /usr/local, as described below).  This directory will also be compiled into
 the shell as the default directory for the variable $fpath/$FPATH. You can
 override it with --enable-fndir=directory; --disable-fndir or
Index: configure.in
===================================================================
--- configure.in	2000/01/07 19:42:02	1.12
+++ configure.in	2000/01/07 19:42:24
@@ -214,10 +214,10 @@
 AC_ARG_ENABLE(fndir,
 [  --enable-fndir=DIR         where functions go (default DATADIR/zsh/functions)],
 [if test $enableval = yes; then
-  fndir=${datadir}/${tzsh_name}/functions/${VERSION}
+  fndir=${datadir}/${tzsh_name}/${VERSION}/functions
 else
   fndir="$enableval"
-fi], [fndir=${datadir}/${tzsh_name}/functions/${VERSION}])
+fi], [fndir=${datadir}/${tzsh_name}/${VERSION}/functions])
 
 undefine([function_subdirs])
 AC_ARG_ENABLE(function-subdirs,

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>


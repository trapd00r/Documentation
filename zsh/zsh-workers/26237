From zsh-workers-return-26237-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 02 23:58:52 2009
Return-Path: <zsh-workers-return-26237-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15587 invoked from network); 2 Jan 2009 23:58:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 2 Jan 2009 23:58:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 31682 invoked from network); 2 Jan 2009 23:58:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Jan 2009 23:58:43 -0000
Received: (qmail 18946 invoked by alias); 2 Jan 2009 23:58:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26237
Received: (qmail 18928 invoked from network); 2 Jan 2009 23:58:36 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 2 Jan 2009 23:58:36 -0000
Received: from cork.scru.org (cork.scru.org [209.20.67.2])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 1B82F80308BE
	for <zsh-workers@sunsite.dk>; Sat,  3 Jan 2009 00:58:33 +0100 (CET)
Received: by cork.scru.org (Postfix, from userid 1000)
	id 038F41040AE; Fri,  2 Jan 2009 23:58:31 +0000 (UTC)
Date: Fri, 2 Jan 2009 23:58:31 +0000
From: Clint Adams <schizo@debian.org>
To: agcosta@gis.net, 463507@bugs.debian.org
Cc: Richard Hartmann <richih.mailinglist@gmail.com>, zsh-workers@sunsite.dk
Subject: Re: Bug#463507: Need more info. (zsh: Completion fails with:
	"_main_complete:161: permission denied:")
Message-ID: <20090102235831.GA12986@scru.org>
Mail-Followup-To: agcosta@gis.net, 463507@bugs.debian.org,
	Richard Hartmann <richih.mailinglist@gmail.com>,
	zsh-workers@sunsite.dk
References: <2d460de70812291522pd0bbfe5odaeef95e508b1e29@mail.gmail.com> <20080131221535.c1aa6f7c.agcosta@gis.net> <handler.463507.D463507.123059292812775.notifdone@bugs.debian.org> <20090102152635.052adb13.agcosta@gis.net> <20090102215544.GC8949@scru.org> <20090102180327.885ec1ea.agcosta@gis.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20090102180327.885ec1ea.agcosta@gis.net>
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Scanned: ClamAV 0.92.1/8830/Fri Jan  2 17:01:42 2009 on bifrost
X-Virus-Status: Clean

On Fri, Jan 02, 2009 at 06:03:27PM -0500, A. Costa wrote:
> Restarting as regular 'zsh' the bug comes back... so, assuming there's
> now enough data to answer: is this a 'zsh' bug, or was and is my
> config somehow borked?  If my config is borked, what's the right way to

Well, possibly both.  All we've established thus far is that something
in your config is consistently triggering something unexpected.

Try ls -<Ctrl-X>? (that is, hit whatever's bound to _complete_debug
at the point you would normally trigger the error with TAB) and
send the resulting debug output in /tmp to the bug report.

> make this fix permanent & default?
> 
> BTW: I notice the 'zsh' switch completion seems more thorough than that
> of 'bash'.  'bash' only does a '--' (double hyphen) completion, but
> 'zsh' does single and double hyphens.  The 'fish' shell has completion
> powers comparable to 'zsh'.
> 
> Another observation, maybe different bug.  With the above fix, if I do:
> 
> 	ls --n<TAB>
> 
> 'zsh' auto-completes this as:
> 
> 	ls --n-g
> 
> ...which does not currently seem to be an 'ls' option.  Hitting <TAB> a
> second time auto-completes as:
> 
> 	ls --no-group
> 
> ...which is a proper 'ls' option.  Bug, or maybe some legacy 'ls' option?

I think that's a bug.. it should be offering you --no-group and
--numeric-uid-gid until you disambiguate.


From zsh-workers-return-22489-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 13 14:08:46 2006
Return-Path: <zsh-workers-return-22489-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19785 invoked from network); 13 Jun 2006 14:08:44 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Jun 2006 14:08:44 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 24287 invoked from network); 13 Jun 2006 14:08:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Jun 2006 14:08:38 -0000
Received: (qmail 21599 invoked by alias); 13 Jun 2006 14:08:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22489
Received: (qmail 21589 invoked from network); 13 Jun 2006 14:08:35 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 13 Jun 2006 14:08:35 -0000
Received: (qmail 23996 invoked from network); 13 Jun 2006 14:08:35 -0000
Received: from vms048pub.verizon.net (206.46.252.48)
  by a.mx.sunsite.dk with SMTP; 13 Jun 2006 14:08:32 -0000
Received: from torch.brasslantern.com ([71.116.105.50])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-4.02 (built Sep
 9 2005)) with ESMTPA id <0J0S0035SXY60E25@vms048.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Tue, 13 Jun 2006 09:08:31 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id k5DE8Uea012177	for
 <zsh-workers@sunsite.dk>; Tue, 13 Jun 2006 07:08:30 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id k5DE8THq012176	for zsh-workers@sunsite.dk; Tue,
 13 Jun 2006 07:08:29 -0700
Date: Tue, 13 Jun 2006 07:08:29 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Bug in url-quote-magic?
In-reply-to: <20060612161052.GG27340@beaver.spamt.net>
To: zsh-workers@sunsite.dk
Message-id: <060613070829.ZM12175@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20060612161052.GG27340@beaver.spamt.net>
Comments: In reply to Ulrich Dangel <ml-lists@spamt.net>
 "Bug in url-quote-magic?" (Jun 12,  6:10pm)

On Jun 12,  6:10pm, Ulrich Dangel wrote:
}
} while using url-quote-magic i discoverd a strange behaviour.
} If i enter an url, followed by space, and after that a semicolon, the
} semicolon is escaped.

I can see where this might be unexpected, but I'm not sure your fix is
the right one.  I think it might be preferable to change line 117 so
that the trailing space is preserved, i.e., so that it can tell that
the last word on the line is no longer the one that looks like a URL.

            words=("${(@Q)${(q)=LBUFFER}}") # 117: Not quite right

I haven't worked out how to do this yet and don't have time to this
morning, I'm afraid.


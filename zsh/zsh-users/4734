From zsh-users-return-4734-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 06 08:39:45 2002
Return-Path: <zsh-users-return-4734-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20610 invoked from network); 6 Mar 2002 08:39:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Mar 2002 08:39:44 -0000
Received: (qmail 10974 invoked by alias); 6 Mar 2002 08:39:25 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4734
Received: (qmail 10960 invoked from network); 6 Mar 2002 08:39:25 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15493.54613.934394.25215@wischnow.berkom.de>
Date: Wed, 6 Mar 2002 09:37:41 +0100
To: zsh-users@sunsite.dk
Subject: Re: segfault when overriding complete-word then trying to use tab completion
In-Reply-To: <20020301172505.GA11135@stu163.keble.ox.ac.uk>
References: <20020301001623.GA3551@stu163.keble.ox.ac.uk>
	<1020301092621.ZM18214@candle.brasslantern.com>
	<20020301123241.GA9242@stu163.keble.ox.ac.uk>
	<1020301163650.ZM18718@candle.brasslantern.com>
	<20020301172505.GA11135@stu163.keble.ox.ac.uk>
X-Mailer: VM 6.95 under 21.5 (patch 3) "asparagus" XEmacs Lucid


Ian Lynagh wrote:

> ...
> 
> Can you reproduce it if you also have this in your .zshrc?
> Just running it later doesn't seem sufficient - _main_complete only
> seems to execute if it's in there.

I still can't reproduce it.  What we really need is a recipe to get it
starting with `zsh -f' (I know that you said it doesn't happen with
that, but...).

All in all it's almost certainly a memory allocation problem, which
means that the problem may be anywhere and just surfaces in the
completion code (of course the allocation bug may actually be in the
completion code -- and my fault).

You could try the reporter script from the distribution to dump the
state of your shell and then see if you reproduce it with `zsh -f' and
sources that.  If not, there are still several places where the bug
may be, history, for example.


Bye
  Sven

-- 
Sven Wischnowsky                          wischnow@berkom.de


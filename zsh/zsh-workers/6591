From zsh-workers-return-6591-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 11 11:13:49 1999
Return-Path: <zsh-workers-return-6591-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7423 invoked from network); 11 Jun 1999 11:13:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Jun 1999 11:13:47 -0000
Received: (qmail 20111 invoked by alias); 11 Jun 1999 11:13:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6591
Received: (qmail 19934 invoked from network); 11 Jun 1999 11:12:27 -0000
Message-Id: <199906082121.XAA10714@moolenaar.net>
To: borsenkow.msk@sni.de
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: vim-5.4l: patch to recognize ZSH new completion functions
In-Reply-To: <Pine.SV4.4.10.9906081607270.17600-100000@itsrm2.mow.siemens.ru>
From: Bram Moolenaar <Bram@moolenaar.net>
Date: Tue, 08 Jun 1999 23:21:11 +0200
Sender: Bram@moolenaar.net


Andrej -

> This patch enables vim to correctly recognize ZSH new completion functions
> as ZSH scripts. I hope, they are already in stable enough state to justify
> inclusion in VIM.

Looks OK.  I suppose the strings "#compdef" and "#autoload" would not appear
in a non-zsh file, like "bash"?

It's a bit shorter when combined with the other "if" for zsh:

" Z shell scripts
elseif getline(1) =~ '^#!.*[/\\]zsh\>'
	\ || getline(1) =~ '^#compdef\>'
	\ || getline(1) =~ '^#autoload\>'
  set ft=zsh

I'm using the new line-continuation method here, version 5.4* required.

Thanks for the suggestion!

- Bram

--
hundred-and-one symptoms of being an internet addict:
69. Yahoo welcoms you with your own start page

--/-/---- Bram Moolenaar ---- Bram@moolenaar.net ---- Bram@vim.org ---\-\--
  \ \    www.vim.org/iccf      www.moolenaar.net       www.vim.org    / /


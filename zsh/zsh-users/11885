From zsh-users-return-11885-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 29 01:19:00 2007
Return-Path: <zsh-users-return-11885-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1377 invoked from network); 29 Sep 2007 01:18:31 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,SPF_HELO_PASS
	autolearn=ham version=3.2.3
Received: from ns2.primenet.com.au (HELO primenet.com.au) (@203.24.36.3)
  by ns1.primenet.com.au with (DHE-RSA-AES256-SHA encrypted) SMTP; 29 Sep 2007 01:18:31 -0000
Received: (qmail 14923 invoked from network); 28 Sep 2007 20:39:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns2.melb.primenet.com.au with SMTP; 28 Sep 2007 20:39:16 -0000
Received-SPF: none (ns2.melb.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 83013 invoked from network); 28 Sep 2007 20:39:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2007 20:39:08 -0000
Received: (qmail 13848 invoked by alias); 28 Sep 2007 20:38:59 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11885
Received: (qmail 13828 invoked from network); 28 Sep 2007 20:38:58 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Sep 2007 20:38:58 -0000
Received: (qmail 81815 invoked from network); 28 Sep 2007 20:38:58 -0000
Received: from py-out-1112.google.com (64.233.166.176)
  by a.mx.sunsite.dk with SMTP; 28 Sep 2007 20:38:52 -0000
Received: by py-out-1112.google.com with SMTP id y63so5202578pyg
        for <zsh-users@sunsite.dk>; Fri, 28 Sep 2007 13:38:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=B7CtnBOpbZWfYiojXAUdYoCf0Eez5tDDSuM8XhOYWuw=;
        b=Daa3OGeOFd8Qca+0IFTzsP7jVAjb9NxSR10HDQO71f1IlG0QhVo5KXY5u7Xmo+b2Dg1SoGVZGNWf5zXZTSYVYYlBe3kA/Q1I+aH9n+2TmxBCdni0MbuBJKFNjbFu8e1aOtDxlqdf7vXHna4b1YpUKc9ds+PuXPeMxBze0NYkIKo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=beta;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=hXpwD0uLDlGp681iwm7Ft5kf9RRuJQ7YBApLMWqJhKQFFSlJlQKWq1bX5TaZ6Ps7Nq+61UM0DX9bJ4WC/SRgThfcFWG+77zY1AEoK7fjK7I4RowtsELjs+/Dk26LXlfbyF2pAw2mYxu1eSBmvWMFBDaydnE4S43cxolAbupLQI4=
Received: by 10.65.59.11 with SMTP id m11mr8638155qbk.1191011928490;
        Fri, 28 Sep 2007 13:38:48 -0700 (PDT)
Received: by 10.65.236.14 with HTTP; Fri, 28 Sep 2007 13:38:48 -0700 (PDT)
Message-ID: <30c383e70709281338x1f2609dcsdc4dd7283d387c1c@mail.gmail.com>
Date: Fri, 28 Sep 2007 22:38:48 +0200
From: "Pau Amaro-Seoane" <vim.unix@googlemail.com>
Reply-To: vim.unix@gmail.com
To: zsh-users@sunsite.dk
Subject: nohup dies
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have been using zsh for a while and I like it a lot. Yet, today I
ran into a snag...

I use a kind of beowulf cluster to run computer simulations and the
way I have launched them for years has always been

cat ./input | ~pau/executables/NB4_NoPN > diagnostic&

and then I usually shutdown the laptop or close the terminal.

Two years ago I moved to another institute and this has also a
cluster. Recently I restarted doing the same kind of simulations and
somehow I had problems with them all the time

I am in a very bad mood... you cannot imagine how wretched I am; I spent _many_
days trying to find "bugs" in my code and didn't understand at all why the runs
died after "some minutes" without any output message...

The problem? nohup dies in zsh 4.3.2

Today I closed the ssh session with exit and then exit again after the
message and got this:

zsh: you have running jobs.
tuffi1| exit
zsh: warning: 1 jobs SIGHUPed
[1]  + 18591 done       nohup cat ./input |
       18592 hangup     ~pau/executables/NB4_NoPN > diagnostic

When I used the cluster in my former institute everything went fine,
and there they have zsh 4.2.4

So it seems that "deadly" nohups are inherent to the most recent zsh version...
a "new feature" of the shell, maybe?

I changed the shell to ksh and the simulations (i.e. nohup) are not
killed when I quit the session...

What's wrong with zsh 4.2.4?

Cheers,

Pau Amaro Seoane


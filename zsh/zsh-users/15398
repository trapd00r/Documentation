From zsh-users-return-15398-mason-zsh=primenet.com.au@zsh.org Mon Sep 13 13:25:38 2010
Return-Path: <zsh-users-return-15398-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17702 invoked by alias); 13 Sep 2010 13:25:38 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15398
Received: (qmail 3917 invoked from network); 13 Sep 2010 13:25:36 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.216.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=WMpMNnuDUf7SmAVS2AxuIbl93GZDmxHvT4VAwAT5/9Y=;
        b=wpWV/ZGy8MfPwCfmb4Qlp4IqEUA8GiypzpQGyBZ6O6lcwP7i6DqCMFqzA8O3gDggMT
         VUdBC0ry0DMjw4V2HJuBcckMEsa2Es1MjcohYe+5Rv88pG49lZCd2Dx9O66xFuFGtEJG
         mmqwTm8omvMp2ZASt32fZOMslNykJMmYoLQNA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=aZGJVqGBdVWJ4KMtbfwW+W6DpSn1/ohmmd9kSoZmDyzHBVCORDzG4zmwj6wYytPWWb
         a+Crn/vuSWn2a4+1SbYIwd99ZlHNKy6o7dJBr6dVhVkBAZp4UnGB13MXqR2DqlPReP3w
         YeuKnqrCkgpi05lsaYta1qF47iwWZryqb9UHo=
MIME-Version: 1.0
In-Reply-To: <20100913130345.GA9240@Lancelot>
References: <AANLkTinNJXay4pibEiQmKR4PSRcNiwCJ3w==Scc9rco0@mail.gmail.com> <20100913130345.GA9240@Lancelot>
From: Julien Nicoulaud <julien.nicoulaud@gmail.com>
Date: Mon, 13 Sep 2010 15:25:09 +0200
Message-ID: <AANLkTikq=h-awW+-HAB8-QWdg0dWTuY+uydMu-Ezmt-0@mail.gmail.com>
Subject: Re: Dynamic colored command in zsh
To: Michel <michel.barret@gmail.com>, zsh-users@zsh.org
Content-Type: multipart/alternative; boundary=0016361e7f8eb45cf404902407d1

--0016361e7f8eb45cf404902407d1
Content-Type: text/plain; charset=ISO-8859-1

Wow, that would be great !

Roy, can you give us the options you use ? The "=~" equalities throw errors
for me.

2010/9/13 Roy Zuo <roylzuo@gmail.com>

> Yes, I tried today and made some progress. I can make the color for the
> command
> to change whenever I type a new character or delete one. However my ZLE
> skill is
> quite limited and someone else might be able to make this also work when
> TAB is
> pressed.
>
>    recolor-cmd() {
>        args=(${(z)BUFFER})
>        cmd=$args[1]
>        res=$(builtin type $cmd 2>/dev/null)
>        [ -z $res ]  && return
>        if [ $res =~ 'reserved word' ]; then
>            color="magenta"
>        elif [ $res =~ 'an alias' ]; then
>
>            color="cyan"
>        elif [ $res =~ 'shell builtin' ]; then
>            color="yellow"
>        elif [ $res =~ 'shell function' ]; then
>            color='green'
>        elif [ $res =~ "$cmd is" ]; then
>            color="blue"
>        else
>            color="red"
>        fi
>        region_highlight=("0 ${#cmd} fg=${color},bold")
>    }
>
>    check-cmd-self-insert() { zle .self-insert && recolor-cmd }
>    check-cmd-backward-delete-char() { zle .backward-delete-char &&
> recolor-cmd }
>
>    zle -N self-insert check-cmd-self-insert
>    zle -N backward-delete-char check-cmd-backward-delete-char
>
> Regards,
>
> Roy
>
> On Sun, Sep 12, 2010 at 12:04:08PM +0200, Michel wrote:
> > Hello,
> >
> > Is it possible to have the dynamic colored command in zsh as in fish ?
> >
> > By example : if I type "grep", for each caracter before the "p" the
> > word is colored in red but when I type the last caractere the word is
> > colored in green. The coloring should be appled on parameters, string
> > (between 2 " or '), the color should be different if the word is
> > alias, function or command.
> >
> > Thanks for your answer
> >
> > Nice day
> > _____________________
> > Michel BARRET
> >
>
> --
>  _________________________
> < Murphy was an optimist. >
>  -------------------------
>       \   ,__,
>        \  (oo)____
>           (__)    )\
>              ||--|| *
>

--0016361e7f8eb45cf404902407d1--


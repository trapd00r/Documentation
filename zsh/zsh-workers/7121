From zsh-workers-return-7121-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 14 05:41:59 1999
Return-Path: <zsh-workers-return-7121-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27289 invoked from network); 14 Jul 1999 05:41:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Jul 1999 05:41:56 -0000
Received: (qmail 8828 invoked by alias); 14 Jul 1999 05:41:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7121
Received: (qmail 8821 invoked from network); 14 Jul 1999 05:41:44 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990714054140.ZM15784@candle.brasslantern.com>
Date: Wed, 14 Jul 1999 05:41:40 +0000
In-Reply-To: <990714044734.ZM13955@candle.brasslantern.com>
Comments: In reply to "Bart Schaefer" <schaefer@candle.brasslantern.com>
        "Anybody know what's going on in xsymlinks()?  [utils.c]" (Jul 14,  4:47am)
References: <990714044734.ZM13955@candle.brasslantern.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: Anybody know what's going on in xsymlinks()?  [utils.c]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 14,  4:47am, Bart Schaefer was talking to himself again:
} Subject: Anybody know what's going on in xsymlinks()?  [utils.c]
}
} [...]
} so either this is something that Zefram privately added to 3.1.2 or so, or
} else the 3.0.5 code is an old change that didn't get propagated into 3.1.x.

On closer examination it *appears* that the 3.1.x code may be intended to
fix a memory leak, but really may have introduced a different bug.

In 3.0.x, xsymlinks() is treated as if it returns a boolean, but in fact
it's impossible AFAICT for it ever to return anything but 0.  (That means
that the apparent memory leak really wasn't one, so the fix may not have
been necessary.)

In 3.1.x, xsymlinks() returns 1 whenever it has called itself recursively,
and returns 0 otherwise.

Any clues as to what is and/or should be going on in this function would be
appreciated.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


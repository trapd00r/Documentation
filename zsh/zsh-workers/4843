From zsh-workers-request@math.gatech.edu Fri Dec 18 09:12:51 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16387 invoked from network); 18 Dec 1998 09:12:49 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 18 Dec 1998 09:12:49 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id EAA23983;
	Fri, 18 Dec 1998 04:07:33 -0500 (EST)
Resent-Date: Fri, 18 Dec 1998 04:07:33 -0500 (EST)
Message-Id: <9812180851.AA15853@ibmth.df.unipi.it>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: PATCH: HPUXDYNAMIC again
Date: Fri, 18 Dec 1998 09:51:11 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"vC892.0.gs5.LjXUs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4843
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I left yesterday's autoheader fix half done, the symbol in the
configure tests was still TEST_HPUXDYNAMIC instead of HPUXDYNAMIC.

*** aczsh.m4.hpux3	Wed Dec 16 15:29:44 1998
--- aczsh.m4	Fri Dec 18 09:48:01 1998
***************
*** 56,62 ****
  $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest2.c 1>&5 2>&5 &&
  $DLLD -o conftest2.$DL_EXT $LDFLAGS $DLLDFLAGS conftest2.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 56,62 ----
  $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest2.c 1>&5 2>&5 &&
  $DLLD -o conftest2.$DL_EXT $LDFLAGS $DLLDFLAGS conftest2.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
***************
*** 129,135 ****
  $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest2.c 1>&5 2>&5 &&
  $DLLD -o conftest2.$DL_EXT $LDFLAGS $DLLDFLAGS conftest2.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 129,135 ----
  $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest2.c 1>&5 2>&5 &&
  $DLLD -o conftest2.$DL_EXT $LDFLAGS $DLLDFLAGS conftest2.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
***************
*** 204,210 ****
  $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest2.c 1>&5 2>&5 &&
  $DLLD -o conftest2.$DL_EXT $LDFLAGS $DLLDFLAGS conftest2.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 204,210 ----
  $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest2.c 1>&5 2>&5 &&
  $DLLD -o conftest2.$DL_EXT $LDFLAGS $DLLDFLAGS conftest2.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
***************
*** 274,280 ****
      save_ldflags=$LDFLAGS
      LDFLAGS="$LDFLAGS $EXTRA_LDFLAGS"
      AC_TRY_RUN([
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 274,280 ----
      save_ldflags=$LDFLAGS
      LDFLAGS="$LDFLAGS $EXTRA_LDFLAGS"
      AC_TRY_RUN([
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
***************
*** 347,353 ****
      save_ldflags=$LDFLAGS
      LDFLAGS="$LDFLAGS $EXTRA_LDFLAGS -s"
      AC_TRY_RUN([
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 347,353 ----
      save_ldflags=$LDFLAGS
      LDFLAGS="$LDFLAGS $EXTRA_LDFLAGS -s"
      AC_TRY_RUN([
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
***************
*** 414,420 ****
  if $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest1.c 1>&5 2>&5 &&
  $DLLD -o conftest1.$DL_EXT $LDFLAGS $DLLDFLAGS -s conftest1.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 414,420 ----
  if $CC -c $CFLAGS $CPPFLAGS $DLCFLAGS conftest1.c 1>&5 2>&5 &&
  $DLLD -o conftest1.$DL_EXT $LDFLAGS $DLLDFLAGS -s conftest1.o $LIBS 1>&5 2>&5; then
      AC_TRY_RUN([
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
*** configure.in.hpux3	Thu Dec 17 13:43:40 1998
--- configure.in	Fri Dec 18 09:47:35 1998
***************
*** 1008,1014 ****
      $DLLD -o conftest.$DL_EXT $LDFLAGS $DLLDFLAGS conftest.o 1>&5 2>&5 &&
      AC_TRY_RUN([
  #include <stdio.h>
! #ifdef TEST_HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH
--- 1008,1014 ----
      $DLLD -o conftest.$DL_EXT $LDFLAGS $DLLDFLAGS conftest.o 1>&5 2>&5 &&
      AC_TRY_RUN([
  #include <stdio.h>
! #ifdef HPUXDYNAMIC
  #include <dl.h>
  #define RTLD_LAZY BIND_DEFERRED
  #define RTLD_GLOBAL DYNAMIC_PATH

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


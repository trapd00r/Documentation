From zsh-workers-return-7053-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jul 09 03:45:21 1999
Return-Path: <zsh-workers-return-7053-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12763 invoked from network); 9 Jul 1999 03:45:19 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jul 1999 03:45:19 -0000
Received: (qmail 22129 invoked by alias); 9 Jul 1999 03:45:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7053
Received: (qmail 22122 invoked from network); 9 Jul 1999 03:45:06 -0000
To: zsh-workers@sunsite.auc.dk
Path: mason
From: mason@primenet.com.au (Geoff Wing)
X-Newsgroups: lists.zsh.workers
Subject: Re: 4855 does not work in all cases
Date: 9 Jul 1999 03:44:54 GMT
Organization: PrimeNet Computer Consultants
Lines: 25
Distribution: local
Message-ID: <slrn7oas1l.c6a.mason@coral.primenet.com.au>
References: <000101bec92b$46fe9a20$21c9ca95@mow.siemens.ru> <000601bec934$c4cd3de0$21c9ca95@mow.siemens.ru>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 931491894 12741 203.43.15.2 (9 Jul 1999 03:44:54 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: 9 Jul 1999 03:44:54 GMT
User-Agent: slrn/0.9.5.6 (UNIX)

Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru> typed:
:To test - just try something like
:echo "----(80 characters)\n===" and see if you get extra newline. I believe,
:this is exactly what happens with AIX term. It does not happen with all
:terminals program I'm using here (xterm/dtterm) :-)

For am (automargin) terminals: 
  a non-special character must be output at terminal width. 
For non-am terminals:
  a return sequence must be output at terminal width.
 
In each case, any cursor movement must be done after that as its behaviour
cannot be reliably determined (due to certain unmentioned terminal emulators
and not due to dumbterms which tend to have pretty standard behaviour).
I'm pretty sure zle_refresh.c violates this in some special cases (prompt
things I think) so I guess I better fix those soonish.  Printing outside of
zle_refresh.c I've got no idea about.  Sometimes I get the urge to look at
combining all the normal output, e.g. lists, into a more generic
zle_refresh.c  but don't worry, I've kept those urges in check.

Regards,
-- 
Geoff Wing : <gcw@pobox.com>     Work URL: http://www.primenet.com.au/
Rxvt Stuff : <gcw@rxvt.org>      Ego URL : http://pobox.com/~gcw/
Zsh Stuff  : <gcw@zsh.org>       Phone   : (Australia) 0413 431 874


From zsh-workers-return-25092-mason-zsh=primenet.com.au@sunsite.dk Sat May 24 12:45:04 2008
Return-Path: <zsh-workers-return-25092-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 191 invoked from network); 24 May 2008 12:45:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 May 2008 12:45:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 64868 invoked from network); 24 May 2008 12:44:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 May 2008 12:44:57 -0000
Received: (qmail 29943 invoked by alias); 24 May 2008 12:44:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25092
Received: (qmail 29920 invoked from network); 24 May 2008 12:44:52 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 24 May 2008 12:44:52 -0000
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP id A9C338059114
	for <zsh-workers@sunsite.dk>; Sat, 24 May 2008 14:44:46 +0200 (CEST)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id 0A6C222B3303; Sat, 24 May 2008 14:44:45 +0200 (CEST)
Date: Sat, 24 May 2008 14:44:45 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: Bart Schaefer <schaefer@brasslantern.com>,
	zsh-workers@sunsite.dk, 482346@bugs.debian.org
Subject: Re: Bug#482346: zsh doesn't always wait for its children (->
	zombie)
Message-ID: <20080524124445.GQ7056@prunille.vinc17.org>
Mail-Followup-To: Bart Schaefer <schaefer@brasslantern.com>,
	zsh-workers@sunsite.dk, 482346@bugs.debian.org
References: <20080521235008.GA5600@ay.vinc17.org> <20080521235930.GW7056@prunille.vinc17.org> <20080522233327.GA24953@scru.org> <080523073940.ZM13804@torch.brasslantern.com> <20080523145722.GA12096@scru.org> <20080523224305.GN7056@prunille.vinc17.org> <20080524025556.GA30511@scru.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20080524025556.GA30511@scru.org>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.17-vl-r21552 (2008-04-09)
X-Virus-Scanned: ClamAV 0.91.2/7225/Sat May 24 03:25:25 2008 on bifrost
X-Virus-Status: Clean

severity 482346 important
thanks

On 2008-05-24 02:55:56 +0000, Clint Adams wrote:
> On Sat, May 24, 2008 at 12:43:05AM +0200, Vincent Lefevre wrote:
> > Same problem with zsh-beta 4.3.6-dev-0+20080506-1.
> 
> Just to keep things clear, that has users/12815 applied, and the
> original report did not.

A bit more information:

This is 100% reproducible with both zsh and zsh-beta. This makes
the load average go very high (e.g. up to 26) and ends up by DoS
(the news server complains about the load average and shuts the
connection down). The only solution seems to reboot the machine.
(That's why I've increased the bug severity to important.)

Note: when I kill zsh, the zombie remains there and gets attached
to init. The load average remains very high.

I do not have such a problem when I start vlc from bash and quit
it in the same way.

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


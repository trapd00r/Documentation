From zsh-users-return-3143-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 09 07:24:44 2000
Return-Path: <zsh-users-return-3143-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4353 invoked from network); 9 Jun 2000 07:24:43 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jun 2000 07:24:43 -0000
Received: (qmail 11890 invoked by alias); 9 Jun 2000 07:24:18 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3143
Received: (qmail 11882 invoked from network); 9 Jun 2000 07:24:17 -0000
Date: Fri, 9 Jun 2000 09:24:13 +0200 (MET DST)
Message-Id: <200006090724.JAA13449@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-users@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Thu, 8 Jun 2000 13:07:57 -0700
Subject: Re: wish for a colored completion system


Bart Schaefer wrote:

> On Jun 8,  3:39pm, Fletch wrote:
> > 
> >         If I add '=lemur*=01;32' to ':completion:*' list-colors it
> > works fine (ssh l<C-d> produces three highighted lemur* and plain
> > localhost and lp).  
> 
> Aha!  You have host names and user names listed simultaneously.
> 
> Add this:
> 
> zstyle ':completion:*' group-name ''
> 
> That will make two sub-lists, one of host names and one of user names,
> and then you'll get the colors in the host names.
> 
> I'm not sure why ':completion:*:ssh:*' doesn't work for the combined
> listing; perhaps it's a bug.  Sven?

Hm, yes, the description in the docs make it sound as if it should
work. The problem is that without separate groups there is no way for
the completion code to find out that with

  zstyle ':completion:*:ssh:*:hosts' list-colors '=a*=31'
  zstyle ':completion:*:ssh:*:users' list-colors '=b*=32'

hosts starting with `b' should be coloured with `32'. We would need a
per-match colouring for that and that's too expensive.

And to come back to the question, the completion code only looks up
the style with the tag in the context and it can't find out that the
pattern used in the definition doesn't contain the tag. If we wanted
to solve that, we would have to make _setup get the name of the group
(which may be -default-) as an argument (when called from
_description) and use that name in ZLS_COLORS. But then we would be
back to what I said above.

So, we could (quite easily) change it, but that set-for-one-tag-and-
used-for-others-too made me do it in the way we have it now, I would
be willing to write the change if people say that they prefer it,
though (I have group-name == '', so I don't care much about this).

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


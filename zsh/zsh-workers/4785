From zsh-workers-request@math.gatech.edu Mon Dec 14 20:41:14 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24009 invoked from network); 14 Dec 1998 20:41:12 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 14 Dec 1998 20:41:12 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id PAA16484;
	Mon, 14 Dec 1998 15:40:31 -0500 (EST)
Resent-Date: Mon, 14 Dec 1998 15:40:31 -0500 (EST)
Message-ID: <19981214200703.43780@athenaeum.demon.co.uk>
Date: Mon, 14 Dec 1998 20:07:03 +0000
From: Phil Pennock <phil@athenaeum.demon.co.uk>
To: Zsh Development Workers <zsh-workers@math.gatech.edu>
Subject: PATCH: configure test mod for Linux
Mail-Followup-To: Zsh Development Workers <zsh-workers@math.gatech.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.89.1
Organisation: Organisation?  Here?  No, over there ---->
X-Disclaimer: Any views expressed in this message, where not explicitly
	attributed otherwise, are mine and mine alone.  Such views
	do not necessarily coincide with those of any organisation
	or company with which I am or have been affiliated.
X-Phase-of-Moon: The Moon is Waning Crescent (15% of Full)
Resent-Message-ID: <"h-w_73.0.U14.-UNTs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4785
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On GNU/Linux, according to the FSSTND-LFS (I think now outdated, but
this particular detail is unlikely to have changed), utmp is in /var/run
whilst wtmp is in /var/log.

HAving just noticed configure fail to find wtmp, I checked and saw that
the script looks in /var/run not /var/log.  This patch adds /var/log.  I
haven't removed /var/run just in case something else uses it.  I doubt
that it does any harm to have it there :^) although perhaps the order
should be reversed.

If /var/run is ONLY there for GNU/Linux systems then perhaps it should
be removed for the wtmp locations.  I suspect that someone just added
the same location for both utmp and wtmp tests.

--- configure.old	Fri Dec 11 16:04:29 1998
+++ configure	Mon Dec 14 20:00:29 1998
@@ -4098,7 +4098,7 @@
 if eval "test \"`echo '$''{'zsh_cv_path_wtmp'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
-  for dir in /etc /usr/etc /var/adm /usr/adm /var/run ./conftest; do
+  for dir in /etc /usr/etc /var/adm /usr/adm /var/run /var/log ./conftest; do
   zsh_cv_path_wtmp=${dir}/wtmp
   test -f $zsh_cv_path_wtmp && break
   zsh_cv_path_wtmp=no

-- 
--> Phil Pennock ; GAT d- s+:+ a22 C++(++++) UL++++/I+++/S+++/H+ P++@ L+++
E-@ W(+) N>++ o !K w--- O>+ M V !PS PE Y+ PGP+ t-- 5++ X+ R !tv b++>+++ DI+ D+
G+ e+ h* r y?


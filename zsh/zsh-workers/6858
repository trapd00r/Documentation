From zsh-workers-return-6858-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 25 16:18:30 1999
Return-Path: <zsh-workers-return-6858-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13222 invoked from network); 25 Jun 1999 16:18:28 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Jun 1999 16:18:28 -0000
Received: (qmail 6887 invoked by alias); 25 Jun 1999 16:18:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6858
Received: (qmail 6880 invoked from network); 25 Jun 1999 16:18:19 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990625161757.ZM5127@candle.brasslantern.com>
Date: Fri, 25 Jun 1999 16:17:57 +0000
In-Reply-To: <199906251556.RAA04789@hydra.ifh.de>
Comments: In reply to Peter Stephenson <pws@ifh.de>
        "Re: 3.0.6-pre-5 problem" (Jun 25,  5:56pm)
References: <199906251556.RAA04789@hydra.ifh.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Peter Stephenson <pws@ifh.de>, zsh-workers@sunsite.auc.dk
Subject: Xterm terminal settings (Re: 3.0.6-pre-5 problem)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 25,  5:56pm, Peter Stephenson wrote:
} Subject: Re: 3.0.6-pre-5 problem
}
} By the way, although this is totally unrelated, looking at this I
} discovered that
}   SHELL=/usr/bin/ksh xterm &
} creates an xterm with terminal settings messed up.  Without the & it's OK.

I believe this to be an OS pty-allocation problem rather than a zsh problem.
I've seen it before in contexts unrelated to zsh.  SunOS in particular is a
culprit; what's happening is that the tty driver for the pseudo-tty copies
its settings from the current controlling terminal of the process that opens
the master side.  When the master process (xterm in this case) doesn't have
an associated tty, the pty gets bad values -- on SunOS, it gets the values
for the system console, which are generally nothing like what you want an
xterm to have.

(It just occurred to me that this problem may show up on any system that
uses STREAMS modules instead of BSD-style TTY drivers.)

Anyway, for several releases of X11 now there's been a resource for setting
your xterm TTY values to work around this bug; it's XTerm*ttyModes: and the
value looks like an stty command line (without the command name).

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


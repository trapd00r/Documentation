From zsh-workers-return-27190-mason-zsh=primenet.com.au@sunsite.dk Sat Jul 25 19:00:00 2009
Return-Path: <zsh-workers-return-27190-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11114 invoked from network); 25 Jul 2009 18:59:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 25 Jul 2009 18:59:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 82709 invoked from network); 25 Jul 2009 18:59:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Jul 2009 18:59:37 -0000
Received: (qmail 3558 invoked by alias); 25 Jul 2009 18:59:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 27190
Received: (qmail 3539 invoked from network); 25 Jul 2009 18:59:30 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 25 Jul 2009 18:59:30 -0000
Received: from vms173013pub.verizon.net (vms173013pub.verizon.net [206.46.173.13])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 9A6AE8027106
	for <zsh-workers@sunsite.dk>; Sat, 25 Jul 2009 20:59:20 +0200 (CEST)
Received: from torch.brasslantern.com ([96.238.220.32])
 by vms173013.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KNC007QGQ12NSMD@vms173013.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sat, 25 Jul 2009 13:58:19 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n6PIwCVi023959; Sat,
 25 Jul 2009 11:58:13 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n6PIwB7I023958; Sat, 25 Jul 2009 11:58:11 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090725115811.ZM23957@torch.brasslantern.com>
Date: Sat, 25 Jul 2009 11:58:11 -0700
In-reply-to: <20090722181841.GA30416@cons.org>
Comments: In reply to Martin Cracauer <cracauer@cons.org>
 "Re: zsh 4.3.10 terminates with SIGINT when one types Ctrl-G in emacs under
 Mac OS X" (Jul 22,  2:18pm)
References: <20090722181841.GA30416@cons.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: Martin Cracauer <cracauer@cons.org>, zsh-workers@sunsite.dk
Subject: Re: zsh 4.3.10 terminates with SIGINT when one types Ctrl-G in emacs
 under Mac OS X
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.94.2/9613/Sat Jul 25 02:08:58 2009 on bifrost
X-Virus-Status: Clean

On Jul 22,  2:18pm, Martin Cracauer wrote:
} 
} Hi, a friend pointed me to this discussion and I took it as an
} opportunity to fix some minor issues with my SIGINT page.
} 
} There would be two ways of dealing with this:
} 
} 1) when a child got killed with SIGINT, always abort the script
} 2) do that only when the shell itself also had received a SIGINT while
}    that child was executing in the foreground
} 
} I have actually implemented 2) in FreeBSD's shell and bash also does
} 2).  However, I had skipped over that detail when writing the webpage.
} The have has been corrected.
} 
} (let me know if you want credit on the page)

Credit me if you like, but it's not necessary.

Did you also see Eric Blake's assertion that the shell must not un-ignore
a signal if it "starts life" with the signal ignored?  That's a "trap"
command restriction I'd never discovered before (and one I'm not very
happy about).
 
} On first sight it looks like the Linux kernel changes semantics based
} on whether the terminal is in cooked mode or not.  Possibly in an
} attempt to help a bit with the "what to do on SIGINT in interactive
} programs" mess we are dealing with here.

I suspect it's more subtle than that ... e.g., it may be that on linux,
the SIGINT isn't coming from the terminal driver at all.


From zsh-users-return-2976-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Mar 19 07:08:39 2000
Return-Path: <zsh-users-return-2976-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 824 invoked from network); 19 Mar 2000 07:08:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Mar 2000 07:08:36 -0000
Received: (qmail 8021 invoked by alias); 19 Mar 2000 07:08:12 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2976
Received: (qmail 8009 invoked from network); 19 Mar 2000 07:08:11 -0000
Date: 19 Mar 2000 07:08:08 -0000
Message-Id: <Liam.953449688.206618.31409.221164914@fizz>
Mime-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
From: nirva@ishiboo.com (Danny Dulai)
To: zsh-users@sunsite.auc.dk
Subject: Re: clear to end of display
X-Mailer: Liam [version 0.7]
In-Reply-To: <1000319035053.ZM32550@candle.brasslantern.com>

>If it's always in the upper right, you might try printing it with a
>TRAPALRM() function rather than putting it in the prompt.  Time values
>in the prompt don't get updated until after the next call to precmd(),
>but by setting a TMOUT value you can have it updated almost as often
>as you like (though I wouldn't recommend more often than about every
>10 seconds or it'll interfere with your typing).  I update the time
>in my xterm title bar that way, with a 60-second TMOUT.

That sounded like a good idea until I tried it out. xterms scrolled back
jump down, and often the time is not there because I'm a obsessive clearer
of my screen.

I went back to the prompt method and used the method you describe below=
 and
everything is ok now.

>Try putting a cursor-up cursor-down movement in a %{...%} block at the
>beginning of your prompt.  That should force the prompt to be no higher
>than the second line without needing to hack any zle widgets.  E.g. in
>3.1.6+ with an 80-column xterm:
>
>PS1=3D"%{"$'\e7\e[1A\e[1B\e[1;1H'%E$'\e[1;72H'"%D{%I:%M:%S}"$'\e8'"%}%m%#=
 "

This doesnt work.. if I use this prompt and then type clear, it clears the
date and leaves the machien name followed by a % on the top line..

For some reason, the up/down isnt forcing it to be on line 1 :(=20

I added 2 ups and 2 downs, and it puts it on line 2 tho. dunno.. this is
the behavior i actually want (since my upper right mesg is really 2 rows),
so i don't really care too much.. but if you know why the single isnt
working, let me know :)

--=20
___________________________________________________________________________
Danny Dulai                                           Feet. Pumice. Lotion.
http://www.ishiboo.com/~nirva/                            nirva@ishiboo.com


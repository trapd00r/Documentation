From zsh-workers-return-6072-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 21 23:52:39 1999
Return-Path: <zsh-workers-return-6072-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24265 invoked from network); 21 Apr 1999 23:52:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Apr 1999 23:52:38 -0000
Received: (qmail 24200 invoked by alias); 21 Apr 1999 23:52:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6072
Received: (qmail 24190 invoked from network); 21 Apr 1999 23:52:13 -0000
Message-Id: <199904212352.QAA27713@bebop.clari.net>
To: "Bart Schaefer" <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.auc.dk
In-reply-to: schaefer's message of Wed, 21 Apr 1999 01:15:54 -0700.
	     <990421011554.ZM9242@candle.brasslantern.com> 
Subject: Re: Patch available for 3.0.6-pre-0 
Date: Wed, 21 Apr 1999 16:52:09 -0700
From: Wayne Davison <wayne@clari.net>

"Bart Schaefer" writes:
> I'd appreciate feedback from anyone who grabs it and applies it.

I've compiled it and am checking it out now.  So far so good.

One thing I think would be nice to achieve for the 3.0.6 release is
to remove all the warnings when building zsh with gcc 2.8.1.  To
this end, I have tweaked the source and generated a diff from your
pre-0 release.  The patch is about 22k, so I won't include it here.
Anyone who wants it can grab it via the web:

    http://www.clari.net/~wayne/zsh-3.0.6-pre-0.patch

The changes were simply adding a bunch of braces to various if
blocks, and changing a few character-subscript values into unsigned-
character subscripts.

Some of the added braces were to enclose some one-line macros that
consist of an "if ... else ..."  block.  This makes it look like some
of the ifs have braces that are enclosing only one line.  I suppose
I'd prefer to see these macros get changed from this:

    if (...) {
        cmdpop();
    }

into this:

    if (...)
        CMDPOP

(so that CMDPOP could be written using curly braces), but that was
beyond the scope of my simple patch.

You may also notice that I added a few extra brace sets to some
indented-code blocks that were right near where I was already adding
braces.  I did this because I think that the code reads better when
multi-line blocks of indented code are enclosed in braces (even when
they aren't absolutely required), and because it seemed to me that
this is consistent with the latest coding style (e.g. the while loop
in the new read1char() function).

> * I haven't decided what to do with RCS $Id$ keywords.

I for one would not miss them if they were removed, but I don't
feel strongly about this.

..wayne..


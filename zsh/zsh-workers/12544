From zsh-workers-return-12544-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Aug 05 04:13:43 2000
Return-Path: <zsh-workers-return-12544-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1939 invoked from network); 5 Aug 2000 04:13:41 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Aug 2000 04:13:41 -0000
Received: (qmail 5231 invoked by alias); 5 Aug 2000 04:13:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12544
Received: (qmail 5220 invoked from network); 5 Aug 2000 04:13:29 -0000
Date: Sat, 5 Aug 2000 00:13:22 -0400
From: Clint Adams <schizo@debian.org>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: zrealpath
Message-ID: <20000805001322.A8485@dman.com>
References: <20000804212746.A8137@dman.com> <1000805022455.ZM29144@candle.brasslantern.com> <1000805022858.ZM29168@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.1.2i
In-Reply-To: <1000805022858.ZM29168@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Sat, Aug 05, 2000 at 02:28:58AM +0000

> } This wasn't necessary; it's what utils.c:xsymlink() is for.
> 
> Oh, and xsymlink() needs to call readlink(), which brings us full circle.

We could move xsymlink() and friend to the #else part of zrealpath,
have param.c call that instead, and dynamically allocate buffers according
to zpathmax, which can't ever call zrealpath.

Actually, what I said about checking the last character for a null
is silly; all you need to do is compare the return value of readlink()
with the buffer size.  That's not so messy.


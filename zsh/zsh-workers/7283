From zsh-workers-return-7283-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 26 17:10:33 1999
Return-Path: <zsh-workers-return-7283-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4009 invoked from network); 26 Jul 1999 17:10:30 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Jul 1999 17:10:30 -0000
Received: (qmail 22218 invoked by alias); 26 Jul 1999 17:10:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7283
Received: (qmail 22211 invoked from network); 26 Jul 1999 17:10:11 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: CVS completer (Re: PATCH: Re: Completion/User functions again)
References: <199907211127.NAA02895@beta.informatik.hu-berlin.de>
 <990721155446.ZM6856@candle.brasslantern.com>
 <rsqvhb9ulqj.fsf@crane.jaist.ac.jp> <rsqpv1g2eyy.fsf@crane.jaist.ac.jp>
 <rsq4sirs7hf.fsf@crane.jaist.ac.jp>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 27 Jul 1999 02:10:08 +0900
In-Reply-To: Tanaka Akira's message of "27 Jul 1999 01:26:04 +0900"
Message-ID: <rsq1zdvs5fz.fsf@crane.jaist.ac.jp>
Lines: 547
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <rsq4sirs7hf.fsf@crane.jaist.ac.jp>,
  Tanaka Akira <akr@jaist.ac.jp> writes:

> I also tried to complete only modified files for commit and diff.
> Since this use stat module, it does not works without dynamic loading by default.

I think _cvs* are only for cvs, there is no necessity to make these
autoloadable except _cvs.

diff -Naur Completion/User/_cvs Completion/User/_cvs
--- Completion/User/_cvs	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvs	Mon Jul 26 16:57:05 1999
@@ -1,135 +1,254 @@
 #compdef cvs
 
-setopt localoptions extendedglob
+_cvs () {
+  setopt localoptions extendedglob
 
-typeset -A commands
-commands=(add "ad new"            admin "adm rcs"         annotate ann
-          checkout "co get"       commit "ci com"         diff "di dif"
-          edit ""                 editors ""              export "exp ex"
-          history "hi his"        import "im imp"         init ""
-          log "lo rlog"           login "logon lgn"       logout ""
-          rdiff patch             release "re rel"        remove "rm delete"
-          status "st stat"        rtag "rt rfreeze"       tag "ta freeze"
-          unedit ""               update "up upd"         watch ""
-          watchers "")
-
-local com="${words[(i)(${(j:|:)${(kv)=commands}})]}"
-
-local showlist='compstate[list]=list; compstate[force_list]=yes'
-local showhint="$showlist ; compstate[insert]=''"
-local complete_D="compadd today yesterday week\\ ago month\\ ago"
-local complete_k="compadd kv kvl k o b v"
-local complete_r="_cvsrevisions"
-local complete_m="compadd -UX 'Enter log message' -n ''; $showhint"
-
-if (( com < CURRENT )); then
-  case "$words[$com]" in
-    add|ad|new) # "+k:m:"
-      _complete_opts k: "$complete_k" m: "$complete_m" || _cvsaddp
-      ;;
-    admin|adm|rcs) # "+ib::c:a:A:e:l::u::LUn:N:m:o:s:t::IqxV:k:"
-      _complete_opts i '' b:: '' c: '' a: '' A: '' e: '' l:: '' u:: '' L '' U '' n: '' N: '' m: "$complete_m" o: '' s: '' t:: '' I '' q '' x '' V: '' k: "$complete_k" || _cvstargets
-      ;;
-    annotate|ann) # "+lr:D:fR"
-      _complete_opts l '' r: '' D: '' f '' R '' || _cvstargets
-      ;;
-    checkout|co|get) # "+ANnk:d:flRpQqcsr:D:j:P"
-      _complete_opts A '' N '' n '' k: "$complete_k" d: '' f '' l '' R '' p '' Q '' q '' c '' s '' r: "$complete_r" D: "$complete_D" j: '' P '' || _cvsrepositories
-      ;;
-    commit|ci|com) # "+nlRm:fF:r:"
-      _complete_opts n '' l '' R '' m: "$complete_m" f '' F: '' r: "$complete_r" || _cvstargets_modified
-      ;;
-    diff|di|dif) # "+abcdefhilnpstuw0123456789BHNRC:D:F:I:L:U:V:W:k:r:"
-      _complete_opts a '' b '' c '' d '' e '' f '' h '' i '' l '' n '' p '' s '' t '' u '' w '' 0 '' 1 '' 2 '' 3 '' 4 '' 5 '' 6 '' 7 '' 8 '' 9 '' B '' H '' N '' R '' C: '' D: "$complete_D" F: '' I: '' L: '' U: '' V: '' W: '' k: "$complete_k" r: "$complete_r" || _cvstargets_modified || _cvstargets
-      ;;
-    edit) # "+lRa:"
-      _complete_opts l '' R '' a: '' || _cvstargets
-      ;;
-    editors) # "+lR"
-      _complete_opts l '' R '' || _cvstargets
-      ;;
-    export|exp|ex) # "+ANnk:d:flRpQqcsr:D:j:P"
-      _complete_opts A '' N '' n '' k: "$complete_k" d: '' f '' l '' R '' p '' Q '' q '' c '' s '' r: "$complete_r" D: "$complete_D" j: '' P '' || _cvsrepositories
-      ;;
-    history|hi|his) # "+Tacelow?D:b:f:m:n:p:r:t:u:x:X:z:"
-      _complete_opts T '' a '' c '' e '' l '' o '' w '' \? '' D: "$complete_D" b: '' f: '' m: "$complete_m" n: '' p: '' r: '' t: '' u: '' x: '' X: '' z: '' || _cvstargets
-      ;;
-    import|im|imp) # "+Qqdb:m:I:k:W:"
-      _complete_opts Q '' q '' d '' b: '' m: "$complete_m" I: '' k: "$complete_k" W: '' || case $[CURRENT-com] in
-	1) _cvsrepositories;;
-	2) compadd -UX "Enter vendor tag name" -n '' && eval "$showhint";;
-	3) compadd -UX "Enter release tag name" -n '' && eval "$showhint";;
-	*) compadd -UX "No futher arguments used" -n '' && eval "$showhint";;
-	esac
-      ;;
-    init)
-      break
-      ;;
-    login|logon|lgn|logout)
-      _complete_opts || _files
-      ;;
-    rdiff|patch|pa) # "+V:k:cuftsQqlRD:r:"
-      _complete_opts V: '' k: "$complete_k" c '' u '' f '' t '' s '' Q '' q '' l '' R '' D: "$complete_D" r: "$complete_r" || _cvstargets
-      ;;
-    release|re|rel) # "+Qdq"
-      _complete_opts Q '' d '' q '' || _files -/
-      ;;
-    remove|rm|delete) # "+flR"
-      _complete_opts f '' l '' R '' || _cvsremovep
-      ;;
-    status|st|stat) # "+vlR"
-      _complete_opts v '' l '' R '' || _cvstargets
-      ;;
-    tag|ta|freeze) # "+FQqlRcdr:D:bf"
-      _complete_opts F '' Q '' q '' l '' R '' c '' d '' r: "$complete_r" D: "$complete_D" b '' f '' || _cvstargets
-      ;;
-    unedit) # "+lR"
-      _complete_opts l '' R '' || _cvstargets
-      ;;
-    update|up|upd) # "+ApPflRQqduk:r:D:j:I:W:"
-      _complete_opts A '' p '' P '' f '' l '' R '' Q '' q '' d '' u '' k: "$complete_k" r: "$complete_r" D: "$complete_D" j: '' I: '' W: '' || _cvstargets
-      ;;
-    watch)
-      if (( CURRENT == com + 1 )); then
-        compadd on off add remove
-      else
-        case "$words[com+1]" in
-          on|off) # "+lR"
-            _complete_opts l '' R '' || _cvstargets
-            ;;
-          add|remove) # "+lRa:"
-            _complete_opts l '' R '' a: '' || _cvstargets
-            ;;
-        esac
+  typeset -A commands
+  commands=(add "ad new"            admin "adm rcs"         annotate ann
+	    checkout "co get"       commit "ci com"         diff "di dif"
+	    edit ""                 editors ""              export "exp ex"
+	    history "hi his"        import "im imp"         init ""
+	    log "lo rlog"           login "logon lgn"       logout ""
+	    rdiff patch             release "re rel"        remove "rm delete"
+	    status "st stat"        rtag "rt rfreeze"       tag "ta freeze"
+	    unedit ""               update "up upd"         watch ""
+	    watchers "")
+
+  local com="${words[(i)(${(j:|:)${(kv)=commands}})]}"
+
+  local showlist='compstate[list]=list; compstate[force_list]=yes'
+  local showhint="$showlist ; compstate[insert]=''"
+  local complete_D="compadd today yesterday week\\ ago month\\ ago"
+  local complete_k="compadd kv kvl k o b v"
+  local complete_r="_cvsrevisions"
+  local complete_m="compadd -UX 'Enter log message' -n ''; $showhint"
+
+  if (( com < CURRENT )); then
+    case "$words[$com]" in
+      add|ad|new) # "+k:m:"
+	_complete_opts k: "$complete_k" m: "$complete_m" || _cvsaddp
+	;;
+      admin|adm|rcs) # "+ib::c:a:A:e:l::u::LUn:N:m:o:s:t::IqxV:k:"
+	_complete_opts i '' b:: '' c: '' a: '' A: '' e: '' l:: '' u:: '' L '' U '' n: '' N: '' m: "$complete_m" o: '' s: '' t:: '' I '' q '' x '' V: '' k: "$complete_k" || _cvstargets
+	;;
+      annotate|ann) # "+lr:D:fR"
+	_complete_opts l '' r: '' D: '' f '' R '' || _cvstargets
+	;;
+      checkout|co|get) # "+ANnk:d:flRpQqcsr:D:j:P"
+	_complete_opts A '' N '' n '' k: "$complete_k" d: '' f '' l '' R '' p '' Q '' q '' c '' s '' r: "$complete_r" D: "$complete_D" j: '' P '' || _cvsrepositories
+	;;
+      commit|ci|com) # "+nlRm:fF:r:"
+	_complete_opts n '' l '' R '' m: "$complete_m" f '' F: '' r: "$complete_r" || _cvstargets_modified
+	;;
+      diff|di|dif) # "+abcdefhilnpstuw0123456789BHNRC:D:F:I:L:U:V:W:k:r:"
+	_complete_opts a '' b '' c '' d '' e '' f '' h '' i '' l '' n '' p '' s '' t '' u '' w '' 0 '' 1 '' 2 '' 3 '' 4 '' 5 '' 6 '' 7 '' 8 '' 9 '' B '' H '' N '' R '' C: '' D: "$complete_D" F: '' I: '' L: '' U: '' V: '' W: '' k: "$complete_k" r: "$complete_r" || _cvstargets_modified || _cvstargets
+	;;
+      edit) # "+lRa:"
+	_complete_opts l '' R '' a: '' || _cvstargets
+	;;
+      editors) # "+lR"
+	_complete_opts l '' R '' || _cvstargets
+	;;
+      export|exp|ex) # "+ANnk:d:flRpQqcsr:D:j:P"
+	_complete_opts A '' N '' n '' k: "$complete_k" d: '' f '' l '' R '' p '' Q '' q '' c '' s '' r: "$complete_r" D: "$complete_D" j: '' P '' || _cvsrepositories
+	;;
+      history|hi|his) # "+Tacelow?D:b:f:m:n:p:r:t:u:x:X:z:"
+	_complete_opts T '' a '' c '' e '' l '' o '' w '' \? '' D: "$complete_D" b: '' f: '' m: "$complete_m" n: '' p: '' r: '' t: '' u: '' x: '' X: '' z: '' || _cvstargets
+	;;
+      import|im|imp) # "+Qqdb:m:I:k:W:"
+	_complete_opts Q '' q '' d '' b: '' m: "$complete_m" I: '' k: "$complete_k" W: '' || case $[CURRENT-com] in
+	  1) _cvsrepositories;;
+	  2) compadd -UX "Enter vendor tag name" -n '' && eval "$showhint";;
+	  3) compadd -UX "Enter release tag name" -n '' && eval "$showhint";;
+	  *) compadd -UX "No futher arguments used" -n '' && eval "$showhint";;
+	  esac
+	;;
+      init)
+	break
+	;;
+      login|logon|lgn|logout)
+	_complete_opts || _files
+	;;
+      rdiff|patch|pa) # "+V:k:cuftsQqlRD:r:"
+	_complete_opts V: '' k: "$complete_k" c '' u '' f '' t '' s '' Q '' q '' l '' R '' D: "$complete_D" r: "$complete_r" || _cvstargets
+	;;
+      release|re|rel) # "+Qdq"
+	_complete_opts Q '' d '' q '' || _files -/
+	;;
+      remove|rm|delete) # "+flR"
+	_complete_opts f '' l '' R '' || _cvsremovep
+	;;
+      status|st|stat) # "+vlR"
+	_complete_opts v '' l '' R '' || _cvstargets
+	;;
+      tag|ta|freeze) # "+FQqlRcdr:D:bf"
+	_complete_opts F '' Q '' q '' l '' R '' c '' d '' r: "$complete_r" D: "$complete_D" b '' f '' || _cvstargets
+	;;
+      unedit) # "+lR"
+	_complete_opts l '' R '' || _cvstargets
+	;;
+      update|up|upd) # "+ApPflRQqduk:r:D:j:I:W:"
+	_complete_opts A '' p '' P '' f '' l '' R '' Q '' q '' d '' u '' k: "$complete_k" r: "$complete_r" D: "$complete_D" j: '' I: '' W: '' || _cvstargets
+	;;
+      watch)
+	if (( CURRENT == com + 1 )); then
+	  compadd on off add remove
+	else
+	  case "$words[com+1]" in
+	    on|off) # "+lR"
+	      _complete_opts l '' R '' || _cvstargets
+	      ;;
+	    add|remove) # "+lRa:"
+	      _complete_opts l '' R '' a: '' || _cvstargets
+	      ;;
+	  esac
+	fi
+	;;
+      watchers) # "+lR"
+	_complete_opts l '' R '' || _cvstargets
+	;;
+      *) _files;;
+    esac
+    return
+  fi
+
+  case ${+cvs_roots} in
+    0)
+      cvs_roots=()
+      if [[ -f ~/.cvspass ]]; then
+	cvs_roots=(
+	  $(cut -d ' ' -f 1 ~/.cvspass)
+	)
       fi
       ;;
-    watchers) # "+lR"
-      _complete_opts l '' R '' || _cvstargets
-      ;;
-    *) _files;;
   esac
-  return
-fi
 
-case ${+cvs_roots} in
-  0)
-    cvs_roots=()
-    if [[ -f ~/.cvspass ]]; then
-      cvs_roots=(
-	$(cut -d ' ' -f 1 ~/.cvspass)
-      )
+  _complete_opts \
+    H '' Q '' q '' r '' w '' l '' n '' t '' v '' f '' a '' \
+    b: "compadd /usr/local/bin" \
+    T: "compadd $TMPPREFIX:h $TMPDIR /tmp" \
+    e: "compadd vi" \
+    d: "compadd $cvs_roots || _files -/" \
+    z: "compadd 9'" \
+    s: "_cvs_user_variable" \
+   || 
+  compadd ${(k)commands} ||
+  compadd ${(kv)=commands}
+}
+
+_cvsprefix () {
+  local f
+  qpref=$PREFIX
+  if [[ $qpref != */ ]]; then
+    if [[ $qpref = */* ]]; then
+      qpref=$qpref:h
+    else
+      qpref=
+    fi
+  fi
+  pref=$~qpref
+  if [[ ! -d "$pref" ]]; then
+    qpref=
+    pref=
+  fi
+  [[ -n "$pref" && "$pref" != */ ]] && qpref=$qpref/ pref=$pref/
+}
+
+_cvsentries () {
+  setopt localoptions nullglob unset
+  if [[ -f ${pref}CVS/Entries ]]; then
+      entries=( "${(@)${(@)${(@)${(f@)$(<${pref}CVS/Entries)}:#D}#(D|)/}%%/*}" )
+  fi
+}
+
+_cvsentries_modified () {
+  local LANG=C
+  local OLDTZ="$TZ"; if ! (( $+TZ )); then unset OLDTZ; fi; export TZ=GMT
+
+  local line Entries
+  typeset -A mtime
+
+  if ! zmodload -e stat; then zmodload stat; fi
+  if zmodload -e stat; then
+    if [[ -f "${pref}CVS/Entries" ]]; then
+      Entries="$(<${pref}CVS/Entries)"
+      mtime=( "${(@s:/:)${(j:/:)${(@)${(@)${(@)${(M@)${(f@)Entries}:#/*}#/}%/*/*}/\/*\///}}}" )
+      entries=( "${(@)${(@)${(M@)${(f@)Entries}:#D/*}#D/}%%/*}" )
+      builtin stat -n +mtime -F '%a %b %e %T %Y' "$pref${(@k)^mtime}" |
+      while read line
+      do
+	line=${line#$pref}
+	if [[ x"$mtime[${line%% *}]" == x"${line#* }" ]]; then
+	  #print up-to-date "${line%% *}"
+	else
+	  #print locally-modified "${line%% *}"
+	  entries=($entries "${line%% *}")
+	fi
+      done
     fi
-    ;;
-esac
+  else
+    entries=( "${(@)${(@)${(@)${(f@)Entries}:#D}#(D|)/}%%/*}" )
+  fi
+
+  if (( $+OLDTZ )); then TZ="$OLDTZ"; else unset TZ; fi
+}
+
+_cvstargets () {
+  local qpref pref entries
+  _cvsprefix
+  _cvsentries
+
+  compadd -fP "$qpref" -W "$pref" - $entries
+}
+
+_cvstargets_modified () {
+  local qpref pref entries
+  _cvsprefix
+  _cvsentries_modified
+
+  compadd -fp "$qpref" -W "$pref" - $entries
+}
+
+_cvsrevisions () {
+  compadd - "${(@)${(@)${(@M)${(@f)$(cvs -q status -vl .)}:#	*}##[ 	]##}%%[ 	]*}"
+}
+
+_cvsrepositories () {
+  local root=$CVSROOT
+  [[ -f CVS/Root ]] && root=$(<CVS/Root)
+
+  if [[ $root = :* || ! -d $root ]]; then
+    compadd -UX "Enter repository name" -n '' && { compstate[list]=list; compstate[force_list]=yes; compstate[insert]='' }
+  else
+    compadd - \
+      $root/^CVSROOT(:t) \
+      "${(@)${(@M)${(@f)$(<$root/CVSROOT/modules)}:#[^#]*}%%[ 	]*}"
+  fi
+}
+
+_cvsremovep () {
+  local qpref pref entries
+  _cvsprefix
+  _cvsentries
+  setopt localoptions unset
+  local omit
+  omit=( ${pref}*(D:t) )
+  eval 'compadd -fp "$qpref" -W "$pref" - ${entries:#('${(j:|:)omit}')}' ||
+    compadd -fp "$qpref" -W "$pref" - ${pref}*~${pref}CVS(/:t)
+}
+
+_cvsaddp () {
+  local qpref pref entries
+  _cvsprefix
+  _cvsentries
+  setopt localoptions unset
+  local all omit
+  all=( ${pref}*~${pref}CVS(D:t) )
+  omit=( $entries ${=cvsignore} )
+  [[ -r ~/.cvsignore ]] && omit=( $omit $(<~/.cvsignore) )
+  [[ -r ${pref}.cvsignore ]] && omit=( $omit $(<${pref}.cvsignore) )
+  eval 'compadd -fp "$qpref" -W "$pref" - ${all:#('${(j:|:)omit}')}' ||
+    compadd -fp "$qpref" -W "$pref" - ${pref}*~${pref}CVS(/:t)
+}
 
-_complete_opts \
-  H '' Q '' q '' r '' w '' l '' n '' t '' v '' f '' a '' \
-  b: "compadd /usr/local/bin" \
-  T: "compadd $TMPPREFIX:h $TMPDIR /tmp" \
-  e: "compadd vi" \
-  d: "compadd $cvs_roots || _files -/" \
-  z: "compadd 9'" \
-  s: "_cvs_user_variable" \
- || 
-compadd ${(k)commands} ||
-compadd ${(kv)=commands}
+_cvs "$@"
diff -Naur Completion/User/_cvsaddp Completion/User/_cvsaddp
--- Completion/User/_cvsaddp	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvsaddp	Thu Jan  1 00:00:00 1970
@@ -1,13 +0,0 @@
-#autoload
-
-local qpref pref entries
-_cvsprefix
-_cvsentries
-setopt localoptions unset
-local all omit
-all=( ${pref}*~${pref}CVS(D:t) )
-omit=( $entries ${=cvsignore} )
-[[ -r ~/.cvsignore ]] && omit=( $omit $(<~/.cvsignore) )
-[[ -r ${pref}.cvsignore ]] && omit=( $omit $(<${pref}.cvsignore) )
-eval 'compadd -fp "$qpref" -W "$pref" - ${all:#('${(j:|:)omit}')}' ||
-  compadd -fp "$qpref" -W "$pref" - ${pref}*~${pref}CVS(/:t)
diff -Naur Completion/User/_cvsentries Completion/User/_cvsentries
--- Completion/User/_cvsentries	Mon Jul 26 16:55:47 1999
+++ Completion/User/_cvsentries	Thu Jan  1 00:00:00 1970
@@ -1,7 +0,0 @@
-#autoload
-
-setopt localoptions nullglob unset
-if [[ -f ${pref}CVS/Entries ]]; then
-    entries=( "${(@)${(@)${(@)${(f@)$(<${pref}CVS/Entries)}:#D}#(D|)/}%%/*}" )
-fi
-
diff -Naur Completion/User/_cvsentries_modified Completion/User/_cvsentries_modified
--- Completion/User/_cvsentries_modified	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvsentries_modified	Thu Jan  1 00:00:00 1970
@@ -1,31 +0,0 @@
-#autoload
-
-local LANG=C
-local OLDTZ="$TZ"; if ! (( $+TZ )); then unset OLDTZ; fi; export TZ=GMT
-
-local line Entries
-typeset -A mtime
-
-if ! zmodload -e stat; then zmodload stat; fi
-if zmodload -e stat; then
-  if [[ -f "${pref}CVS/Entries" ]]; then
-    Entries="$(<${pref}CVS/Entries)"
-    mtime=( "${(@s:/:)${(j:/:)${(@)${(@)${(@)${(M@)${(f@)Entries}:#/*}#/}%/*/*}/\/*\///}}}" )
-    entries=( "${(@)${(@)${(M@)${(f@)Entries}:#D/*}#D/}%%/*}" )
-    builtin stat -n +mtime -F '%a %b %e %T %Y' "$pref${(@k)^mtime}" |
-    while read line
-    do
-      line=${line#$pref}
-      if [[ x"$mtime[${line%% *}]" == x"${line#* }" ]]; then
-	#print up-to-date "${line%% *}"
-      else
-	#print locally-modified "${line%% *}"
-	entries=($entries "${line%% *}")
-      fi
-    done
-  fi
-else
-  entries=( "${(@)${(@)${(@)${(f@)Entries}:#D}#(D|)/}%%/*}" )
-fi
-
-if (( $+OLDTZ )); then TZ="$OLDTZ"; else unset TZ; fi
diff -Naur Completion/User/_cvsprefix Completion/User/_cvsprefix
--- Completion/User/_cvsprefix	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvsprefix	Thu Jan  1 00:00:00 1970
@@ -1,18 +0,0 @@
-#autoload
-
-local f
-qpref=$PREFIX
-if [[ $qpref != */ ]]; then
-  if [[ $qpref = */* ]]; then
-    qpref=$qpref:h
-  else
-    qpref=
-  fi
-fi
-pref=$~qpref
-if [[ ! -d "$pref" ]]; then
-  qpref=
-  pref=
-fi
-[[ -n "$pref" && "$pref" != */ ]] && qpref=$qpref/ pref=$pref/
-
diff -Naur Completion/User/_cvsremovep Completion/User/_cvsremovep
--- Completion/User/_cvsremovep	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvsremovep	Thu Jan  1 00:00:00 1970
@@ -1,11 +0,0 @@
-#autoload
-
-local qpref pref entries
-_cvsprefix
-_cvsentries
-setopt localoptions unset
-local omit
-omit=( ${pref}*(D:t) )
-eval 'compadd -fp "$qpref" -W "$pref" - ${entries:#('${(j:|:)omit}')}' ||
-  compadd -fp "$qpref" -W "$pref" - ${pref}*~${pref}CVS(/:t)
-
diff -Naur Completion/User/_cvsrepositories Completion/User/_cvsrepositories
--- Completion/User/_cvsrepositories	Mon Jul 26 16:55:47 1999
+++ Completion/User/_cvsrepositories	Thu Jan  1 00:00:00 1970
@@ -1,12 +0,0 @@
-#autoload
-
-local root=$CVSROOT
-[[ -f CVS/Root ]] && root=$(<CVS/Root)
-
-if [[ $root = :* || ! -d $root ]]; then
-  compadd -UX "Enter repository name" -n '' && { compstate[list]=list; compstate[force_list]=yes; compstate[insert]='' }
-else
-  compadd - \
-    $root/^CVSROOT(:t) \
-    "${(@)${(@M)${(@f)$(<$root/CVSROOT/modules)}:#[^#]*}%%[ 	]*}"
-fi
diff -Naur Completion/User/_cvsrevisions Completion/User/_cvsrevisions
--- Completion/User/_cvsrevisions	Mon Jul 26 16:55:47 1999
+++ Completion/User/_cvsrevisions	Thu Jan  1 00:00:00 1970
@@ -1,3 +0,0 @@
-#autoload
-
-compadd - "${(@)${(@)${(@M)${(@f)$(cvs -q status -vl .)}:#	*}##[ 	]##}%%[ 	]*}"
diff -Naur Completion/User/_cvstargets Completion/User/_cvstargets
--- Completion/User/_cvstargets	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvstargets	Thu Jan  1 00:00:00 1970
@@ -1,7 +0,0 @@
-#autoload
-
-local qpref pref entries
-_cvsprefix
-_cvsentries
-
-compadd -fP "$qpref" -W "$pref" - $entries
diff -Naur Completion/User/_cvstargets_modified Completion/User/_cvstargets_modified
--- Completion/User/_cvstargets_modified	Mon Jul 26 16:55:48 1999
+++ Completion/User/_cvstargets_modified	Thu Jan  1 00:00:00 1970
@@ -1,7 +0,0 @@
-#autoload
-
-local qpref pref entries
-_cvsprefix
-_cvsentries_modified
-
-compadd -fp "$qpref" -W "$pref" - $entries
diff -Naur Completion/User/_cvstest Completion/User/_cvstest
--- Completion/User/_cvstest	Mon Jul 26 16:55:47 1999
+++ Completion/User/_cvstest	Thu Jan  1 00:00:00 1970
@@ -1,3 +0,0 @@
-#compdef cvstest
-
-_cvstargets
-- 
Tanaka Akira


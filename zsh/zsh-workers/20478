From zsh-workers-return-20478-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 13 11:17:30 2004
Return-Path: <zsh-workers-return-20478-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13668 invoked from network); 13 Oct 2004 11:17:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Oct 2004 11:17:29 -0000
Received: (qmail 58008 invoked from network); 13 Oct 2004 11:17:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Oct 2004 11:17:23 -0000
Received: (qmail 8452 invoked by alias); 13 Oct 2004 11:17:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20478
Received: (qmail 8442 invoked from network); 13 Oct 2004 11:17:09 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 13 Oct 2004 11:17:09 -0000
Received: (qmail 57606 invoked from network); 13 Oct 2004 11:17:09 -0000
Received: from smtp1.freeserve.com (HELO mwinf3016.me.freeserve.com) (193.252.22.158)
  by a.mx.sunsite.dk with SMTP; 13 Oct 2004 11:17:07 -0000
Received: by mwinf3016.me.freeserve.com (SMTP Server, from userid 1003)
	id 2CD1B1800094; Wed, 13 Oct 2004 13:17:07 +0200 (CEST)
Received: from wwinf3002 (wwinf3002 [172.22.159.29])
	by mwinf3016.me.freeserve.com (SMTP Server) with ESMTP id 13B0D1800081
	for <zsh-workers@sunsite.dk>; Wed, 13 Oct 2004 13:17:07 +0200 (CEST)
Message-ID: <29047814.1097666227044.JavaMail.www@wwinf3002>
From: pws@pwstephenson.fsnet.co.uk
Reply-To: pws@pwstephenson.fsnet.co.uk
To: zsh-workers@sunsite.dk
Subject: Re: [rr13@mail.inf.tu-dresden.de: Bug#276187: zsh: Ineractive menu
 completion with tab doesnt work.]
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: [217.118.122.15]
Date: Wed, 13 Oct 2004 13:17:07 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.2 required=6.0 tests=NO_REAL_NAME autolearn=no 
	version=2.63
X-Spam-Hits: 0.2

> On a sarge box i discovered the following bug with the new zsh.
> I use interactive menu completion and normaly i scroll through
> the items via tab, but this doesnt work on the new zsh anymore.
> 
> Description: 
> I type an command, like ls, type a space
> and then press tab, to get the filelist.
> A menu appears with the files in this directory and the first entry
> is selected.
> Then normaly, i press tab again and again, to cycle through
> these items. But this doesnt work anymore, the shell puts some weird 
> chars in the prompt, like ^@^@^@ and i cant use tab anymore.

I can see the part of the code which is causing this: modline in the function
domenuselect is inconsistently handled.  At one point it gets assigned just
the combined prefix and suffix from the last completion, but everywhere else it's
assumed it's the whole line.

However, I'm not quite sure what this is supposed to do.  Evidently it's supposed to
something special, not simply  normal menu completion, but I don't really know what.
After fixing or blocking out the problem, it just does normal menucompletion, i.e.
the fact you're in ineractive completion doesn't make a difference.

pws

-- 

Whatever you Wanadoo:
http://www.wanadoo.co.uk/time/

This email has been checked for most known viruses - find out more at: http://www.wanadoo.co.uk/help/id/7098.htm


From zsh-users-return-7859-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 16 06:48:39 2004
Return-Path: <zsh-users-return-7859-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27083 invoked from network); 16 Aug 2004 06:48:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Aug 2004 06:48:38 -0000
Received: (qmail 94486 invoked from network); 16 Aug 2004 06:48:31 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Aug 2004 06:48:31 -0000
Received: (qmail 5740 invoked by alias); 16 Aug 2004 06:47:45 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7859
Received: (qmail 5731 invoked from network); 16 Aug 2004 06:47:44 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 16 Aug 2004 06:47:44 -0000
Received: (qmail 92504 invoked from network); 16 Aug 2004 06:46:28 -0000
Received: from nl-ams-slo-l4-01-pip-7.chellonetwork.com (HELO amsfep16-int.chello.nl) (213.46.243.25)
  by a.mx.sunsite.dk with SMTP; 16 Aug 2004 06:46:24 -0000
Received: from localhost ([213.89.229.53]) by amsfep16-int.chello.nl
          (InterMail vM.6.00.05.02 201-2115-109-103-20031105) with ESMTP
          id <20040816064623.CEHU3867.amsfep16-int.chello.nl@localhost>
          for <zsh-users@sunsite.dk>; Mon, 16 Aug 2004 08:46:23 +0200
Received: from jesper by localhost with local (Exim 4.34)
	id 1BwbFy-0004iw-Sa
	for zsh-users@sunsite.dk; Mon, 16 Aug 2004 08:46:10 +0200
Date: Mon, 16 Aug 2004 08:46:10 +0200
From: Jesper Holmberg <jeho5791@student.uu.se>
To: Zsh-users List <zsh-users@sunsite.dk>
Subject: Re: Problem with complete-all
Message-ID: <20040816064610.GQ1191@localhost>
Mail-Followup-To: Zsh-users List <zsh-users@sunsite.dk>
References: <20040813074526.GM1191@localhost> <14903.1092389588@trentino.logica.co.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <14903.1092389588@trentino.logica.co.uk>
User-Agent: Mutt/1.5.6+20040722i
Sender: Jesper Holmberg <jesper.holmberg.5791@student.uu.se>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-2.4 required=6.0 tests=BAYES_00,FROM_ENDS_IN_NUMS,
	RCVD_IN_SORBS autolearn=no version=2.63
X-Spam-Hits: -2.4

* On Fri Aug 13, Oliver Kiddle wrote:
> It seems we need to fix the example in the manual.
> 
> > zle -C all-matches complete-word _generic
> > bindkey '^Xx' all-matches
> > zstyle ':completion:all-matches:*' old-matches only
> > zstyle ':completion:all-matches::::' completer _all_matches
> 
> Try changing the last style to add _complete after _all_matches:
>   zstyle ':completion:all-matches::::' completer _all_matches _complete
> It needs _complete there to actually generate some matches.

Thank you for your reply, Oliver. It still doesn't work exactly as I'd
expect, though.

This is what I now have in my .zshrc:

zle -C all-matches complete-word _generic
bindkey '^Xx' all-matches
zstyle ':completion:all-matches:*' old-matches only
zstyle ':completion:all-matches::::' completer _all_matches _complete
zstyle ':completion:all-matches:*' insert true
zstyle ':completion:all-matches:*' file-patterns \
    '%p:globbed-files' '*(-/):directories' '*:all-files'


Now, if I for example have added the files "file" and "text", I have to
press '^Xx' twice before the added files are inserted after 'cvs add '.
Pressing it once doesn't have any effect.

If I have added the files "file1" and "file2", pressing '^Xx' once gives
me "file" on the command line, i.e. it completes the unique part, just
like complete-word usually does. Pressing '^Xx' another time gives me both
file-names.

How can I change this so that '^Xx' inserts all the files the first time
it is used?

Jesper


From zsh-workers-request@euclid.skiles.gatech.edu Sun Jan 05 01:00:13 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 17284 invoked from network); 5 Jan 1997 01:00:11 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 5 Jan 1997 01:00:11 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id UAA10730; Sat, 4 Jan 1997 20:06:49 -0500 (EST)
Resent-Date: Sat, 4 Jan 1997 20:06:49 -0500 (EST)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199701050103.CAA01917@hzoli.ppp.cs.elte.hu>
Subject: Re: files module: safe rm
To: hzoli@cs.elte.hu (Zoltan Hidvegi)
Date: Sun, 5 Jan 1997 02:03:14 +0100 (MET)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199701050012.BAA01817@hzoli.ppp.cs.elte.hu> from Zoltan Hidvegi at "Jan 5, 97 01:12:22 am"
X-Mailer: ELM [version 2.4ME+ PL17 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"8zIFi3.0.ad2.ewlpo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2729
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> This patch adds the -s option to rm which will not follow symbolic links.
> It also adds the necessary checks after chdir("..");

I forgot to include the patch to zsh.h, apply this after my previous patch.

Zoltan


*** Src/zsh.h	1997/01/02 16:28:02	3.1.1.9
--- Src/zsh.h	1997/01/03 01:04:48
***************
*** 625,630 ****
--- 625,637 ----
      Redir rd;
  };
  
+ struct dirsav {
+     int dirfd, level;
+     char *dirname;
+     dev_t dev;
+     ino_t ino;
+ };
+ 
  /*******************************/
  /* Definitions for Hash Tables */
  /*******************************/


From zsh-workers-return-14026-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 19 10:44:41 2001
Return-Path: <zsh-workers-return-14026-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10166 invoked from network); 19 Apr 2001 10:44:40 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Apr 2001 10:44:40 -0000
Received: (qmail 650 invoked by alias); 19 Apr 2001 10:44:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14026
Received: (qmail 634 invoked from network); 19 Apr 2001 10:44:28 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010419093411.ZM8881@candle.brasslantern.com>
Date: Thu, 19 Apr 2001 09:34:11 +0000
In-Reply-To: <200104190705.JAA10878@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: PATCH: Assorted parameter stuff" (Apr 19,  9:05am)
References: <200104190705.JAA10878@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: Assorted parameter stuff
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 19,  9:05am, Sven Wischnowsky wrote:
} Subject: Re: PATCH: Assorted parameter stuff
}
} Anyway, about 14008: I only found one problem with a complicated
} subscript in _arguments, line 81, which can be seen by completing after
} `./configure --<TAB>'.  14016 doesn't seem to fix it either and I didn't
} look closely enough to be able to say what exactly the problem is.

Ah ha ha ha.  See the comment on line 79 about (( )) gives a parse error?
Well, parse_subscript() calls dquote_parse(), which is the guts of (( )).

Fortunately, I think I've fixed that (including the parse error in (( )),
though I haven't checked yet).  I encountered a number of other problems
while writing D06subscript.ztst, which I've just finished, and had to fix
several very slippery problems related to interaction of parsestr() with
the (un)tokenization in getindex() and getarg().

} There may be other complicated subscripts in the completion code that
} can serve as good tests

Oh, believe me, there were.  Getting Y01completion.ztst to pass during
"make check" was what got me as far as the original patch in 13992.

However, I'm now up way past my bedtime and can't keep working on this
tonight.  Hopefully I can finish it up sometime tomorrow.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


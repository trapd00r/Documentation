From zsh-workers-return-28031-mason-zsh=primenet.com.au@zsh.org Sun Jun 13 14:39:39 2010
Return-Path: <zsh-workers-return-28031-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4033 invoked by alias); 13 Jun 2010 14:39:39 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28031
Received: (qmail 24344 invoked from network); 13 Jun 2010 14:39:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at alea.gnuu.de designates 83.246.114.63 as permitted sender)
X-DKIM: Sendmail DKIM Filter v2.5.2 uucp.gnuu.de 19A8E48803F
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=gnuu.de; s=banki;
	t=1276438878; i=@alea.gnuu.de; bh=dZe1tixAco84KAZkNWuEfp3sBPlpA34Js
	jcdlFeIAX0=; h=To:From:Subject:Date:Message-ID:Mime-Version:
	 Content-Type:Content-Transfer-Encoding:Sender; b=bf5Cz8i6290C+aHFG
	gn+G2QGhE2wCr9K1S3yKzETMrm4Y2e4fYHfxyPDnEmaS/CNPZwx0SWfK6OalMkMFuUy
	Wa7S9K7l6+IYXhCkzQh9neYJ/LVVkl9lKqyNev/ZgmlkXW8JpQrcShG9UvgOk9lP0zV
	KmgfG9n5kNL0NRKttCes=
To: zsh-workers@zsh.org
Path: not-for-mail
From: =?UTF-8?Q?J=C3=B6rg?= Sommer <joerg@alea.gnuu.de>
Newsgroups: local.mailinglist.zsh
Subject: zsh doesn't load HISTFILE from readonly directory
Date: Sun, 13 Jun 2010 13:17:37 +0000 (UTC)
Lines: 46
Message-ID: <slrni19mjh.hil.joerg@alea.gnuu.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Trace: alea.gnuu.de 1276435057 2743 192.168.0.5 (13 Jun 2010 13:17:37 GMT)
X-Complaints-To: usenet@alea.gnuu.de
User-Agent: slrn/pre1.0.0-18 (Linux)
Sender: news <news@alea.gnuu.de>

Hi,

if the directory, containing the history file, is not writeable, zsh
doesn't load the data and I've not history. I've no problem that zsh
can't save the file, but I would like to have the history from the file.

% ls -ld /tmp/aaa
dr-xr-xr-x 2 joerg users 80 13. Jun 15:00 /tmp/aaa

% ls -l /tmp/aaa/.z*
-r-------- 1 joerg users 93 13. Jun 15:00 /tmp/aaa/.zhistfile
-rw-r--r-- 1 joerg users 26 13. Jun 15:00 /tmp/aaa/.zshrc

<1,5029>(ibook):~% cat /tmp/aaa/.zhistfile
: 1276430398:1;ls
: 1276430403:0;cd /tmp
: 1276430407:0;ls
: 1276430427:0;exec $ZSH_NAME -$-

% cat /tmp/aaa/.zshrc
HISTFILE=$HOME/.zhistfile

With this version, you get the history.

% HOME=/tmp/aaa zsh
ibook% fc -l
    1  ls
    2  cd /tmp
    3  ls
    4  exec $ZSH_NAME -$-
ibook% echo $ZSH_VERSION 
4.3.10

But with this version, the history is empty.

% HOME=/tmp/aaa zsh-beta
ibook% fc -l
    1  fc -l
ibook% echo $ZSH_VERSION 
4.3.10-dev-1-cvs0603

Regards, JÃ¶rg
-- 
Gienger's Law (http://www.bruhaha.de/laws.html):
Die Wichtigkeit eines Newspostings im Usenet ist reziprok zur Anzahl der
enthaltenenen, kumulierten Ausrufungszeichen.


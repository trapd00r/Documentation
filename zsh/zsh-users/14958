From zsh-users-return-14958-mason-zsh=primenet.com.au@zsh.org Mon Mar 22 17:22:43 2010
Return-Path: <zsh-users-return-14958-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6915 invoked by alias); 22 Mar 2010 17:22:42 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14958
Received: (qmail 4901 invoked from network); 22 Mar 2010 17:22:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100322102211.ZM22002@torch.brasslantern.com>
Date: Mon, 22 Mar 2010 10:22:11 -0700
In-reply-to: <4BA799B0.2010902@gmail.com>
Comments: In reply to "Radoulov, Dimitre" <cichomitiko@gmail.com>
 "Brace expansion performance" (Mar 22,  5:24pm)
References: <4BA799B0.2010902@gmail.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Re: Brace expansion performance
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Mar 22,  5:24pm, Radoulov, Dimitre wrote:
} 
} does anybody know why the zsh brace expansion (?) performs so ... 
} differently?

First make sure "zsh -c" isn't reading some expensive init files that
bash/ksh aren't, but:

I'm pretty sure zsh is actually allocating an array of 300000 integers
during expansion of that expression, and probably copying it a few times.

schaefer[633] strace bash -c 'echo $BASH_VERSION;echo $BASH_VERSION;for i in {1..300000}; do :;done' |& wc
    322    1262   17792
schaefer[634] strace Src/zsh -fc 'echo $ZSH_VERSION;for i in {1..300000}; do :;done' |& wc
 901381 5408181 43590584


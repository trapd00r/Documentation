From zsh-workers-request@euclid.skiles.gatech.edu  Mon Aug 12 05:29:17 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id FAA05656 for <mason@primenet.com.au>; Mon, 12 Aug 1996 05:29:15 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id PAA26076; Sun, 11 Aug 1996 15:13:38 -0400 (EDT)
Resent-Date: Sun, 11 Aug 1996 15:13:38 -0400 (EDT)
Date: Sun, 11 Aug 1996 12:20 +0100 (MET)
From: Heiko Schroeder <heiko@pc73121.dialup.rwth-aachen.de>
Subject: Bug-fix for zsh-3.0pre6
To: zsh-workers@math.gatech.edu
Reply-to: heiko@pool.informatik.rwth-aachen.de (Heiko Schroeder)
Message-id: <m0upXdD-0009e0C@local.de>
Content-transfer-encoding: 7BIT
Resent-Message-ID: <"5DM2-1.0.NN6.X3Z3o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1937
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Hi!

There is a small bug in math.c, in the function getcvar. It doesn't
check if the first char in the string is Meta and thus produces wrong
output in this case.

BTW, does it make sence to return a negative value for 8bit characters?
I think not, so I added a cast to unsigned char so that only positive
values are returned.

Changing the return statement to

    return (unsigned char)(*t == Meta ? t[1] ^ 32 : *t);

should fix the bug. (math.c, line 427)

CU
   Heiko

-- 
+----------------------------------------+------------------------------------+
|Email:                                  | Snail-mail:  Heiko Schroeder       |
|                                        |              Lerchenweg 120        |
|  heiko@pool.informatik.rwth-aachen.de  |              52223 Stolberg        |
|                                        |              GERMANY               |
+----------------------------------------+------------------------------------+


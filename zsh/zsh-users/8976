From zsh-users-return-8976-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 07 16:27:38 2005
Return-Path: <zsh-users-return-8976-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25893 invoked from network); 7 Jun 2005 16:27:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Jun 2005 16:27:37 -0000
Received: (qmail 78632 invoked from network); 7 Jun 2005 16:27:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Jun 2005 16:27:30 -0000
Received: (qmail 28144 invoked by alias); 7 Jun 2005 16:27:24 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8976
Received: (qmail 28134 invoked from network); 7 Jun 2005 16:27:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Jun 2005 16:27:23 -0000
Received: (qmail 77622 invoked from network); 7 Jun 2005 16:27:23 -0000
Received: from smtpout.mac.com (17.250.248.89)
  by a.mx.sunsite.dk with SMTP; 7 Jun 2005 16:27:18 -0000
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout02/MantshX 4.0) with ESMTP id j57GRGKx023837
	for <zsh-users@sunsite.dk>; Tue, 7 Jun 2005 09:27:16 -0700 (PDT)
Received: from [24.41.33.25] (user-0c2i88p.cable.earthlink.net [24.41.33.25])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id j57GRFVa029669
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <zsh-users@sunsite.dk>; Tue, 7 Jun 2005 09:27:16 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <200506070926.j579QW1R022316@news01.csr.com>
References: <FFF88236-D978-451E-8149-E994EFAB420F@mac.com> <200506070926.j579QW1R022316@news01.csr.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2BEEA527-E202-4FC2-BF10-EEF108F473DB@mac.com>
Content-Transfer-Encoding: 7bit
From: Chris Wong <chris_wong@mac.com>
Subject: Re: Avoid LDAP hit during completion
Date: Tue, 7 Jun 2005 09:27:13 -0700
To: zsh-users@sunsite.dk
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

I'll try that today.  Unfortunately, it doesn't always freeze up at  
the first completion attempt.  I though it did for the first time,  
but found out otherwise.  It may have to do with the caching  
happening at the DirectoryService on Mac. It seems to always happen  
at the worst possible time such as doing a demo/presentation. :-)

Thanks
Chris

On Jun 7, 2005, at 2:26 AM, Peter Stephenson wrote:

> Chris Wong wrote:
>
>> For some reason, whenever I start a zsh shell, the first completion
>> will trigger many many LDAP lookup.
>>
>> % cd foo<TAB>
>>
>> As soon as I hit TAB, the shell appears as frozen, but at the
>> background, it's hitting the LDAP server of my company network.  This
>> will go one for a couple minutes, at least.  tcpdump and top revealed
>> that mystery to me.
>>
>
> Are you using the new completion system (with compinit)?  The best way
> of tracking this down would be to see what the completion scripts are
> doing.  You can arrange this with
>
> _comp_setup="$_comp_setup
> setopt xtrace"
>
> This produces a huge amount of output so is useless for normal
> completion but you should be able to see where the shell is pausing  
> for
> a long time.
>
> -- 
> Peter Stephenson <pws@csr.com>                  Software Engineer
> CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
> Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223  
> 692070
>
>
> **********************************************************************
> This email and any files transmitted with it are confidential and
> intended solely for the use of the individual or entity to whom they
> are addressed. If you have received this email in error please notify
> the system manager.
>
> **********************************************************************
>
>


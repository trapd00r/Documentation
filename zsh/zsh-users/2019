From zsh-workers-request@math.gatech.edu Thu Jan 14 22:25:07 1999
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7810 invoked from network); 14 Jan 1999 22:25:06 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 14 Jan 1999 22:25:06 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id RAA15715;
	Thu, 14 Jan 1999 17:18:16 -0500 (EST)
Resent-Date: Thu, 14 Jan 1999 17:18:09 -0500 (EST)
Date: Thu, 14 Jan 1999 16:17:05 -0600 (CST)
From: Shawn Leas <sleas@ixion.honeywell.com>
To: Z Shell Users <zsh-users@math.gatech.edu>
Subject: Xterm title changing prompt problem: HELP!
Message-Id: <Pine.GHP.4.05.9901141611470.26309-100000@ixion.honeywell.com>
Mime-Version: 1.0
Content-Type: TEXT/PLAIN; charset=X-UNKNOWN
Resent-Message-ID: <"we7jd1.0.7r3.Sqcds"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/2019
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

This new thing I found is too kewl, but I need a little help.

It sets the Xterm title by echoing:
<ESC>]; put string here^G and then the rest of the prompt.

However, my right prompt is shifted to the left.  I suspect
This is due to zsh keeping track of the length of the left
part of the prompt, then adjusting where to put the right one.

Should I just not have a right prompt? Or is there a way around
this?

PROMPT='];[%l] %n@%m %1v (%h) %t[%l] %n@%m %1v (%h) %t '
RPROMPT=' %~'
function precmd {
  setopt no_ksh_arrays local_options
  case "${${$(uptime)##*"load average: "}%%,*}" in
    0.[0-4]*) psvar[1]='%^)' ;;
    0.[5-9]*) psvar[1]=';^]' ;;
    1.*)      psvar[1]=';^|' ;;
    2.*)      psvar[1]=':^|' ;;
    3.*)      psvar[1]=':^(' ;;
    [45].*)   psvar[1]=':^O' ;;
    [67].*)   psvar[1]='|-P' ;;
    *)        psvar[1]='|-(' ;;
  esac
}

-Shawn
<=========== America Held Hostage ===========>
   Day 2185 for the poor and the middle class. 
   Day 2204 for the rich and the dead.
   737 days remaining in the Raw Deal.
<============================================> 


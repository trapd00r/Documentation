From zsh-users-return-2149-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Feb 14 13:52:00 1999
Return-Path: <zsh-users-return-2149-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5807 invoked from network); 14 Feb 1999 13:51:59 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Feb 1999 13:51:59 -0000
Received: (qmail 15974 invoked by alias); 14 Feb 1999 13:50:49 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2149
Received: (qmail 15967 invoked from network); 14 Feb 1999 13:50:47 -0000
Message-ID: <19990214155043.A22067@niksula.cs.hut.fi>
Date: Sun, 14 Feb 1999 15:50:43 +0200
From: Ville Herva <vherva@niksula.hut.fi>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-users@sunsite.auc.dk,
        =?iso-8859-1?Q?Samuli_K=E4rkk=E4inen?= <Samuli.Karkkainen@netspan.fi>
Subject: Re: Terminal problem with linux-2.0.34
References: <19990214112653.A22618@turing.netspan.fi> <990214051533.ZM26953@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.93.2i
In-Reply-To: <990214051533.ZM26953@candle.brasslantern.com>; from Bart Schaefer on Sun, Feb 14, 1999 at 05:15:33AM -0800

On Sun, Feb 14, 1999 at 05:15:33AM -0800, you [Bart Schaefer] claimed:
> On Feb 14, 11:26am, vherva@turing.netspan.fi wrote:
> } Subject: Terminal problem with linux-2.0.34
> }
> } The flaw in the terminal handling appears as follows: when I type text
> } on the command line, only the first two characters are echoed. The line
> } does show up, if erase a character. Also, the command line is only
> } executed after I press return twice.
> 
> Are you running this under X or on the console?  If X, try the console.

I'm afraid I do not have access to the console as the machine the bug
appears on is a server residing elsewhere.

> Does it affect all the virtual terminals?  Does it affect remote logins?

I can only experiment with remote logins, and this happens under xterm,
rxvt and ssh with TERM=xterm, xterm-color, vt100 or everything I've tried.

> If you run "ps t$TTY:t", do any other processes show up as attached to
> the same terminal?

vherva@turing:/home/vherva>ps exa t$TTY:t
  PID TTY STAT  TIME COMMAND
23594  p7 S    0:00 -zsh HOME=/home/vherva USER=vherva LOGNAME=vherva PATH=/us
23706  p7 R    0:00 ps exa tttyp7 HOME=/home/vherva USER=vherva LOGNAME=vherva

> What happens if you "unsetopt zle" or run zsh as "zsh +Z"?

Everything works as expected, the problem does not appear.

> } I tried updating to 3.0.7 and 3.1.5, and the bug still appeared.
> 
> So that means you've logged out and back in and the problem still occurs?

Yes, this has been going on for about a month now. It happens during every
login session. Also, this it not limited to any machine or terminal
program from which I have logged in the server.

> If running X11, have you completely shut down and restarted the server?

No. This is something I just can't do since it is a production server.

> BTW, where did you get this so-called 3.0.7, and what were you running
> before you upgraded to it?  There's been no release in the 3.0 series
> since 3.0.5.

Sorry, my mistake. Should have been zsh-3.0.5-7.i386.rpm from
rawhide.redhat.com, before which I also tried zsh-3.0.5-6.i386.rpm from
ftp.redhat.com. 3.1.5 was taken directly from the Danish zsh mirror and
compiled locally with gcc 2.7.2.3.

Thanks for the quick response!


--
Ville Herva       Ville.Herva@netspan.fi   +358-50-5164500
Netspan Oy        netspan@netspan.fi       PL 65  FIN-02151 Espoo
PGP key available: http://www.iki.fi/v/pgp.html


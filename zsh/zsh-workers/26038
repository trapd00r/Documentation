From zsh-workers-return-26038-mason-zsh=primenet.com.au@sunsite.dk Thu Nov 13 14:55:54 2008
Return-Path: <zsh-workers-return-26038-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24782 invoked from network); 13 Nov 2008 14:55:51 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Nov 2008 14:55:51 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 14217 invoked from network); 13 Nov 2008 14:55:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Nov 2008 14:55:46 -0000
Received: (qmail 16982 invoked by alias); 13 Nov 2008 14:55:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26038
Received: (qmail 16971 invoked from network); 13 Nov 2008 14:55:41 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 13 Nov 2008 14:55:41 -0000
Received: from mail.o2.co.uk (jabba.london.02.net [82.132.130.169])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 93F3680308BE
	for <zsh-workers@sunsite.dk>; Thu, 13 Nov 2008 15:55:28 +0100 (CET)
Received: from sc.homeunix.net (78.105.216.138) by mail.o2.co.uk (8.0.013.3) (authenticated as stephane.chazelas)
        id 49196F1C005EC9EF for zsh-workers@sunsite.dk; Thu, 13 Nov 2008 14:59:27 +0000
Received: from chazelas by sc.homeunix.net with local (Exim 4.69)
	(envelope-from <stephane_chazelas@yahoo.fr>)
	id 1L0dbT-0002Pg-Ki
	for zsh-workers@sunsite.dk; Thu, 13 Nov 2008 14:55:27 +0000
Date: Thu, 13 Nov 2008 14:55:27 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: f() { ...; } > file
Message-ID: <20081113145527.GC5114@sc.homeunix.net>
Mail-Followup-To: Zsh hackers list <zsh-workers@sunsite.dk>
References: <20081105212036.GA4698@sc.homeunix.net> <20081113144212.GB5114@sc.homeunix.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20081113144212.GB5114@sc.homeunix.net>
User-Agent: Mutt/1.5.16 (2007-09-19)
X-Virus-Scanned: ClamAV 0.92.1/8627/Thu Nov 13 10:42:40 2008 on bifrost
X-Virus-Status: Clean

On Thu, Nov 13, 2008 at 02:42:12PM +0000, Stephane Chazelas wrote:
[...]
> The patch below seems to fix it. It just removes the special
> case of f() { }. I don't why it was there in the first place.
> rev 1.1 of parse.c already had it.
[...]

I had a look at the old releases. It looks like in the beginning
only the:

f() { ... }

syntax was supported (I'm not talking of the function foo {...}
ksh syntax here).

Then, as part of the "short loops" feature (disabled with setopt
noshortloops), support for:

f() any command

was added (but disabled upon setopt noshortloops).

Then later the check for noshortloops was removed, possibly by
someone who realised that "emulate sh" would set noshortloops
and therefore break compatibility with sh which allows f() cmd

Cheers,
Stéphane


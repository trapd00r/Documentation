From zsh-workers-return-24108-mason-zsh=primenet.com.au@sunsite.dk Tue Nov 20 15:59:54 2007
Return-Path: <zsh-workers-return-24108-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4240 invoked from network); 20 Nov 2007 15:59:45 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Nov 2007 15:59:45 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 52320 invoked from network); 20 Nov 2007 15:59:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 15:59:41 -0000
Received: (qmail 20494 invoked by alias); 20 Nov 2007 15:59:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24108
Received: (qmail 20480 invoked from network); 20 Nov 2007 15:59:37 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Nov 2007 15:59:37 -0000
Received: (qmail 51962 invoked from network); 20 Nov 2007 15:59:37 -0000
Received: from cluster-g.mailcontrol.com (85.115.41.190)
  by a.mx.sunsite.dk with SMTP; 20 Nov 2007 15:59:29 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly16g.srv.mailcontrol.com (MailControl) with ESMTP id lAKFxLfD000892
	for <zsh-workers@sunsite.dk>; Tue, 20 Nov 2007 15:59:23 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 20 Nov 2007 15:59:20 +0000
Date: Tue, 20 Nov 2007 15:59:20 +0000
From: Peter Stephenson <pws@csr.com>
To: "Zsh Hackers' List" <zsh-workers@sunsite.dk>
Subject: Re: zsh-4.3.4-dev-2.tar.gz
Message-ID: <20071120155920.759153a1@news01>
In-Reply-To: <20071120154246.30388170@news01>
References: <11649.1195558694@csr.com>
	<4742DC87.5030901@math.technion.ac.il>
	<20071120141442.55f7ac28@news01>
	<4742F733.4030908@math.technion.ac.il>
	<20071120154246.30388170@news01>
Organization: CSR
X-Mailer: Claws Mail 3.0.2 (GTK+ 2.10.14; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Nov 2007 15:59:20.0755 (UTC) FILETIME=[4FFF7030:01C82B8E]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.71.0.126

On Tue, 20 Nov 2007 15:42:46 +0000
Peter Stephenson <pws@csr.com> wrote:
> Aieee.

Gaah.

> +dnl If our terminal library is not ncurses, don't try including
> +dnl any ncurses headers.
> +AH_TEMPLATE([ZSH_IGNORE_NCURSES],
> +[Define to 1 to ignore any ncurses library headers found on the system.])
> +case $LIBS in
> +  ncurses*) ;;
> +  *)
> +  AC_DEFINE(ZSH_IGNORE_NCURSES) ;;
> +esac
> +

Nope.

Index: configure.ac
===================================================================
RCS file: /cvsroot/zsh/zsh/configure.ac,v
retrieving revision 1.80
diff -u -r1.80 configure.ac
--- configure.ac	20 Nov 2007 15:48:51 -0000	1.80
+++ configure.ac	20 Nov 2007 15:58:07 -0000
@@ -720,16 +720,6 @@
 AC_MSG_RESULT(no)
 fi
 
-dnl If our terminal library is not ncurses, don't try including
-dnl any ncurses headers.
-AH_TEMPLATE([ZSH_IGNORE_NCURSES],
-[Define to 1 to ignore any ncurses library headers found on the system.])
-case $LIBS in
-  ncurses*) ;;
-  *)
-  AC_DEFINE(ZSH_IGNORE_NCURSES) ;;
-esac
-
 AC_MSG_CHECKING(if boolcodes is available)
 AC_TRY_LINK([#ifdef TERM_H_NEEDS_CURSES_H
 #include <curses.h>
@@ -768,6 +758,17 @@
 AC_MSG_RESULT($strnames)
 ])
 
+
+dnl If our terminal library is not ncurses, don't try including
+dnl any ncurses headers.
+AH_TEMPLATE([ZSH_IGNORE_NCURSES],
+[Define to 1 to ignore any ncurses library headers found on the system.])
+case $LIBS in
+  -lncurses*) ;;
+  *)
+  AC_DEFINE(ZSH_IGNORE_NCURSES) ;;
+esac
+
 dnl Some systems (Solaris 2.x, Linux Redhat 5.x) require
 dnl libnsl (Network Services Library) to find yp_all
 


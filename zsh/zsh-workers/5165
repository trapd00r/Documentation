Delivered-To: mason-zsh@primenet.com.au
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <990202013046.ZM2584@candle.brasslantern.com>
Date: Tue, 2 Feb 1999 01:30:46 -0800
In-Reply-To: <199902020804.JAA08469@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Bug with associative arrays(?)" (Feb  2,  9:04am)
References: <199902020804.JAA08469@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: Bug with associative arrays(?)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailing-List: <zsh-workers@sunsite.auc.dk> 5165

On Feb 2,  9:04am, Sven Wischnowsky wrote:
} Subject: Bug with associative arrays(?)
}
} Try this:
} 
}   % foo=(a b)
}   % echo $foo
}   a b
}   % foo=bar
}   % echo $foo
}   bar
}   % typeset -A foo
}   % foo[a]=1
}   % foo[b]=2
}   % echo $foo
}   1 2
}   % foo=bar
}   % echo $foo
}   1 2                   # Oops?
}   % echo ${(kv)foo}
}   a 1 b 2               # Yes, really.
} 
} ...or is this the intended behavior? If so, why?

I can't get this to happen to me.  (Cute cut'n'paste trick follows.)

zagzig[66] Src/zsh -f
zagzig% x='  % foo=(a b)
quote>   % echo $foo
quote>   a b
quote>   % foo=bar
quote>   % echo $foo
quote>   bar
quote>   % typeset -A foo
quote>   % foo[a]=1
quote>   % foo[b]=2
quote>   % echo $foo
quote>   1 2
quote>   % foo=bar
quote>   % echo $foo
quote>   1 2                   # Oops?
quote>   % echo ${(kv)foo}
quote>   a 1 b 2               # Yes, really.
quote> '
zagzig% x=("${(@f)x}")
zagzig% print -l ${${(M)x:#??%*}##*%}
 foo=(a b)
 echo $foo
 foo=bar
 echo $foo
 typeset -A foo
 foo[a]=1
 foo[b]=2
 echo $foo
 foo=bar
 echo $foo
 echo ${(kv)foo}
zagzig% eval "$( !! )"
a b
bar
1 2
bar
bar
zagzig% 


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


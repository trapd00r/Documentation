From zsh-workers-return-16533-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 31 15:27:14 2002
Return-Path: <zsh-workers-return-16533-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28950 invoked from network); 31 Jan 2002 15:27:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 31 Jan 2002 15:27:13 -0000
Received: (qmail 14734 invoked by alias); 31 Jan 2002 15:27:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16533
Received: (qmail 14723 invoked from network); 31 Jan 2002 15:27:07 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020131152654.ZM16901@candle.brasslantern.com>
Date: Thu, 31 Jan 2002 15:26:54 +0000
In-Reply-To: <001201c1aa56$cec8cca0$21c9ca95@mow.siemens.ru>
Comments: In reply to Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
        "scp completion - garbled output" (Jan 31,  3:57pm)
References: <001201c1aa56$cec8cca0$21c9ca95@mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>,
        "'Zsh hackers list'" <zsh-workers@sunsite.dk>
Subject: Re: scp completion - garbled output
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jan 31,  3:57pm, Borsenkow Andrej wrote:
} Subject: scp completion - garbled output
}
} bor@cooker% scp -p itsrm2:tmp/bufzsh: no matches found: tmp/buf*
} zsh: no matches found: tmp/buf*
} zsh: no matches found: tmp/buf*

This is coming from _remote_files where it does (in a _wanted call):

    $(ssh -a -x ${words[CURRENT]%:*} echo ${words[CURRENT]#*:}\*)

The message appears repeatedly because this gets tried once by each
function in your completer style.

The right thing appears to be to put 2>/dev/null inside the $(...).
But there will still be a problem if you have to type a password to get
ssh access to the remote host.  It'd be nice if `zle redisplay' or the
equivalent would work from inside a completion widget.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


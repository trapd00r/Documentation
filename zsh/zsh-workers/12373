From zsh-workers-return-12373-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 25 19:27:31 2000
Return-Path: <zsh-workers-return-12373-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4851 invoked from network); 25 Jul 2000 19:27:30 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Jul 2000 19:27:30 -0000
Received: (qmail 5765 invoked by alias); 25 Jul 2000 19:27:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12373
Received: (qmail 5758 invoked from network); 25 Jul 2000 19:27:21 -0000
Date: Tue, 25 Jul 2000 20:27:18 +0100
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: 'insecure directories' warning
Message-ID: <20000725202718.A29313@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
References: <20000725161723.A25056@thelonious.new.ox.ac.uk> <1000725160257.ZM20087@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0.1i
In-Reply-To: <1000725160257.ZM20087@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Tue, Jul 25, 2000 at 04:02:57PM +0000
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

Bart Schaefer (schaefer@candle.brasslantern.com) wrote:
> On Jul 25,  4:17pm, Adam Spiers wrote:
> } Subject: 'insecure directories' warning
> }
> } A month ago, Bart wrote:
> } > The other problem is that when I answer "y" to the question "there are
> } > insecure directories -- proceed?" I expected that to mean that it
> } > would USE those directories, not ignore them.
> } 
> } Nothing seems to have been done about this.
> 
> Yes, it has.  The patch was 12033 (the ChangeLog entry is rather brief).

Ah right.  Sorry 'bout that :-)

> } Also, it would be nice if the user gets told which directories are
> } insecure, otherwise he doesn't stand much of a chance of fixing them.
> 
> Hrm.  Maybe a separate function to check for and report this?  I don't
> know if we want the compinit output to get any more verbose than it is.
> On the other hand, it's only a one-line change, so maybe some of you can
> try this out and see what you think (the output is a couple of screenfuls
> long for me because of RedHat's special groups trick):

I'd say it's better than nothing, but yes, it is a bit too verbose if
the problem affects too many functions.  A separate function would be
good; then it could output stuff like:

/usr/local/share/zsh/3.1.9-dev-3/functions/X contains functions not
owned by you or by root; the first such function is _x_arguments.
Continue anyway [ny]? 

I'd also suggest replacing 'continue' with something which makes it
more obvious what the two choices are.  At the moment if you're
invoking compinit from .zshrc, it sounds a bit like you want to exit
the shell if you hit 'n'.


From zsh-users-return-4280-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 25 15:31:40 2001
Return-Path: <zsh-users-return-4280-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3875 invoked from network); 25 Sep 2001 15:31:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Sep 2001 15:31:39 -0000
Received: (qmail 29606 invoked by alias); 25 Sep 2001 15:31:14 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4280
Received: (qmail 29589 invoked from network); 25 Sep 2001 15:31:10 -0000
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1010925153042.ZM5438@candle.brasslantern.com>
Date: Tue, 25 Sep 2001 15:30:42 +0000
In-Reply-To: <27130.1001423377@csr.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Minor expansion problem" (Sep 25,  2:09pm)
References: <27130.1001423377@csr.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Peter Stephenson <pws@csr.com>, zsh-users@sunsite.dk (Zsh users list)
Subject: Re: Minor expansion problem
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 25,  2:09pm, Peter Stephenson wrote:
}
} Can anyone would explain why I get
} 
} % echo foo and, just to be different, bar >foo
} % echo `cat foo`<TAB>
}      ->foo\ and,\ just\ to\ be\ different,\ bar.
} 
} with the _expand completer (and complete-word bound to TAB)

It's in part because you used backticks.  Expanding $(...) doesn't put
in backslashes, but expanding `...` does.  This appears to be happening
because the ${(e)exp} at _expand line 83 returns one word for `...` but
an array for $(...).

} but what I expect, i.e. no backslashes, with the _expand_word widget?

Hrm, I get backslashes in both cases.  Are you sure you're using the
_expand_word widget (^Xe) and not the builtin expand-word (^X*) ?

} I've stared at my styles but can't see what might be causing it.

The only style that I can see getting involved here is the "glob"
style, in contexts :completion:expand:* and :completion:expand-word:*.
See _expand line 98.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


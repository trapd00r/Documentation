From zsh-workers-return-6400-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 31 23:21:23 1999
Return-Path: <zsh-workers-return-6400-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14950 invoked from network); 31 May 1999 23:21:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 31 May 1999 23:21:22 -0000
Received: (qmail 20578 invoked by alias); 31 May 1999 23:21:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6400
Received: (qmail 20571 invoked from network); 31 May 1999 23:21:08 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990531232104.ZM8980@candle.brasslantern.com>
Date: Mon, 31 May 1999 23:21:03 +0000
In-Reply-To: <199905271110.NAA10649@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: Some possible bugs..." (May 27,  1:10pm)
References: <199905271110.NAA10649@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Better completion in quotes
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 27,  1:10pm, Sven Wischnowsky wrote:
} Subject: Re: Some possible bugs...
}
} > For example, when
} > the effective compctl says to complete file names, treat the entire
} > quoted string as one word and attempt to complete it as a file (this is
} > what bash appears to do); similary for command names or anything else
} > that normally results in a single shell "word"; otherwise, complete the
} > way it's presently done.
} 
} I think [splitting at spaces] wouldn't be enough. One example is the:
} 
}   % zsh -c "ls 'foo b<TAB>
} 
} I mentioned. This should complete to 'foo bar' if there is such a
} possible match.

Ideally, yes, but even knowing whether or not to split again at spaces,
and what context to complete in if not, is more than e.g. bash does.

The problem is that no context at all is causing zsh to make the wrong
assumption about how it should behave in a very common case.

} So we would need a way to `remove one level of
} quotes'. But the quotes may also contain things where we would need
} the whole lexing/parsing if we suddenly decide to work on the parts of 
} the quoted string.

True.  It'd have to re-parse the whole string after one level of quotes
was removed.  That may be overkill.

} > This so-called -1 option could apply to any other flag that followed it,
} 
} If we just let it work on all flags surrounding it, at least the
} parsing would be simple (of course).

That would be fine.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


Delivered-To: mason-zsh@primenet.com.au
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: PATCH: zsh-3.1.5-pws-5: creating info dir entry with install.info
Date: Tue, 26 Jan 1999 16:47:46 +0300
Message-ID: <003c01be4932$74bf5040$21c9ca95@mowp.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2377.0
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.0810.800
Importance: Normal
X-Mailing-List: <zsh-workers@sunsite.auc.dk> 5016

The patch below creates entry for ZSH in info dir file. The item is created
in Utilities section, simply because it is, where bash is placed as well
(shells are to keep together :-) I was tempted to name item "The Ultimate
Shell" ... in any case, current name is simply placeholder.

The patch also updates ztexi.yo to add direntry to zsh.texi.

It works with install-info from the latest texinfo-3.12.

/andrej

--- Doc/Makefile.in.org Tue Nov 10 11:37:49 1998
+++ Doc/Makefile.in     Tue Jan 26 16:26:22 1999
@@ -141,6 +141,11 @@
          else :; \
           fi || exit 1; \
        done
+       if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \
+               install-info --dir-file=$(infodir)/dir $(infodir)/zsh.info;
\
+       else true; fi
+
+

 install.html: zsh_toc.html
        $(sdir_top)/mkinstalldirs $(htmldir)
--- Doc/ztexi.yo.org    Sat Sep 26 21:56:55 1998
+++ Doc/ztexi.yo        Tue Jan 26 16:24:33 1999
@@ -57,6 +57,12 @@
   NOTRANS(@iftex)NL()\
   NOTRANS(@set dsq '{}')NL()\
   NOTRANS(@end iftex)NL()\
+  NOTRANS(@ifinfo)NL()\
+  NOTRANS(@dircategory Utilities)NL()\
+  NOTRANS(@direntry)NL()\
+  NOTRANS(     * ZSH: (zsh).                     The Z Shell Guide.)NL()\
+  NOTRANS(@end direntry)NL()\
+  NOTRANS(@end ifinfo)NL()\
 )

 def(texiifinfo)(1)(\


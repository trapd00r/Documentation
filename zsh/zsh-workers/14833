From zsh-workers-return-14833-mason-zsh=primenet.com.au@sunsite.dk Sun Jun 10 12:11:33 2001
Return-Path: <zsh-workers-return-14833-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29296 invoked from network); 10 Jun 2001 12:11:32 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Jun 2001 12:11:32 -0000
Received: (qmail 12924 invoked by alias); 10 Jun 2001 12:11:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14833
Received: (qmail 12884 invoked from network); 10 Jun 2001 12:11:09 -0000
Date: Sun, 10 Jun 2001 08:10:31 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: hppa problems
Message-ID: <20010610081031.C4640@dman.com>
References: <20010610070719.A4521@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <20010610070719.A4521@dman.com>; from clint@zsh.org on Sun, Jun 10, 2001 at 07:07:19AM -0400


> While attempting to track down a problem on an HP-PA machine,

The problem is that zsh will "freeze" somewhat, but
not entirely, predictably.

Here's the tail of an strace.

rt_sigprocmask(SIG_BLOCK, ~[], ~[HUP KILL STOP], 8) = 0
rt_sigprocmask(SIG_SETMASK, ~[HUP KILL STOP], ~[KILL STOP], 8) = 0
wait4(-1, [WIFEXITED(s) && WEXITSTATUS(s) == 1], WNOHANG|WUNTRACED, NULL) = 6889
times({tms_utime=2, tms_stime=5, tms_cutime=0, tms_cstime=2}) = 29486218
gettimeofday({992173535, 236994}, {360, 0}) = 0
ioctl(10, 0x40245410, {B38400 opost isig icanon echo ...}) = 0
ioctl(10, 0x4004541e, [6889])           = 0
ioctl(10, 0x8004541d, [6887])           = 0
ioctl(10, 0x5413, {ws_row=24, ws_col=80, ws_xpixel=484, ws_ypixel=316}) = 0
wait4(-1, 0x7ff01050, WNOHANG|WUNTRACED, NULL) = -1 ECHILD (No child processes)
rt_sigreturn(0xa)                       = 0
pause(

make check will not get through A01grammar.ztst.  More
specifically, it freezes at the "emulate -R zsh"
in ztst.zsh.

When sourcing someone's .zshrc, it freezes at
[ "`id -u`" -eq "0" ]
or at
eval `dircolors -b`

Any ideas?

Linux paer 2.4.0-pa10 #1 Wed May 30 20:34:57 BST 2001 parisc64 unknown

Other shells don't seem to suffer from this.


From hzoli@cs.elte.hu Tue Jul  9 02:38:49 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id CAA28349 for <mason@werple.mira.net.au>; Tue, 9 Jul 1996 02:38:47 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA09768; Mon, 8 Jul 1996 12:33:16 -0400 (EDT)
Resent-Date: Mon, 8 Jul 1996 12:33:16 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199607081632.SAA07164@bolyai.cs.elte.hu>
Subject: Re: configure on linux
To: guthrie@math.upenn.edu (John Guthrie)
Date: Mon, 8 Jul 1996 18:32:46 +0200 (MET DST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199607081611.MAA16536@hans.math.upenn.edu> from John Guthrie at "Jul 8, 96 12:11:07 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"_vAZH2.0.YO2.CXJun"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1580
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1214
Status: OR

> zsh-3.0-pre2 compiles fine on linux, with a few warnings.  However, for the
> past several releases, configure has always failed to successfully determine
> that lstat is in fact on my system.  Here are the relevant lines from

It seems that you did not read Etc/MACHINES despite the note at the very
beginning of the README.  I quote the relevant part:

Linux:  If you are using an early minor version of libc 5, then a bug
        in the auto-configuration process may cause zsh to think that
        your system doesn't support the lstat function.  If the
        configure process reports that there is no lstat, edit
        config.h and change HAVE_LSTAT to 1.
        libc-5.2.18 or later does not have this problem.

Perhaps you use libc-5.0.9.  It is really time to upgrade now, especially
if you want to use Linux-2.0.  I think it is very unlikely that autoconf
will be fixed so if you do not want to upgrade your libc, manually editing
config.h seems to be the only solution.  As an alternative you may edit
config.cache and change ac_cv_func_lstat='no' to ac_cv_func_lstat='yes'.
Next time when configure finds this cache in the current directory it will
use the information provided there.

Zoltan



From zsh-workers-return-12052-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 23 13:17:07 2000
Return-Path: <zsh-workers-return-12052-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5195 invoked from network); 23 Jun 2000 13:17:06 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Jun 2000 13:17:06 -0000
Received: (qmail 26090 invoked by alias); 23 Jun 2000 13:16:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12052
Received: (qmail 26083 invoked from network); 23 Jun 2000 13:16:48 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: Zsh tests are sometimes using wrong zsh
Date: Fri, 23 Jun 2000 17:16:46 +0400
Message-ID: <000d01bfdd15$47ed77e0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700
Importance: Normal

Tests that are using zpty (notably, completion tests) are using wrong
ZSh binary.

>From Test/comptest:

...
  zpty -r zsh log1 "*<PROMPT>*" ||

    print "first prompt hasn't appeared."
    return 1
...

I.e. the actual zsh in $PATH is started, that is most probably old,
original Zsh (if you do make check before installation). That was
probably the reason for some misterious test failures.

We should either set $builddir/Src as first element in $path or
(better?) pass full new zsh binary path to ztest.zsh.

-andrej

Have a nice DOS!
B >>


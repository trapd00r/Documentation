From zsh-workers-return-22580-mason-zsh=primenet.com.au@sunsite.dk Thu Aug 03 14:30:11 2006
Return-Path: <zsh-workers-return-22580-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28842 invoked from network); 3 Aug 2006 14:30:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Aug 2006 14:30:08 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 71235 invoked from network); 3 Aug 2006 14:30:02 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Aug 2006 14:30:02 -0000
Received: (qmail 21075 invoked by alias); 3 Aug 2006 14:29:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22580
Received: (qmail 21065 invoked from network); 3 Aug 2006 14:29:58 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Aug 2006 14:29:58 -0000
Received: (qmail 70821 invoked from network); 3 Aug 2006 14:29:58 -0000
Received: from zoidberg.org (HELO cthulhu.zoidberg.org) (213.133.99.5)
  by a.mx.sunsite.dk with SMTP; 3 Aug 2006 14:29:56 -0000
Received: from kos-mos (xdsl-87-78-93-63.netcologne.de [::ffff:87.78.93.63])
  (IDENT: unknown, AUTH: PLAIN tobias, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by cthulhu.zoidberg.org with esmtp; Thu, 03 Aug 2006 16:29:55 +0200
  id 070116BA.44D20863.00003383
Date: Thu, 3 Aug 2006 16:29:53 +0200
From: Tobias Gruetzmacher <tobias@portfolio16.de>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: PATCH: completion for the doage comic downloader
Message-ID: <20060803142953.GA6613@portfolio16.de>
Mail-Followup-To: Zsh hackers list <zsh-workers@sunsite.dk>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1; protocol="application/pgp-signature"; boundary="=_cthulhu.zoidberg.org-13187-1154615396-0001-2"
Content-Disposition: inline
User-Agent: Mutt/1.5.12-2006-07-14

This is a MIME-formatted message.  If you see this text it means that your
E-mail software does not support MIME-formatted messages.

--=_cthulhu.zoidberg.org-13187-1154615396-0001-2
Content-Type: multipart/mixed; boundary="huq684BweRXVnRxX"
Content-Disposition: inline


--huq684BweRXVnRxX
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,

this is a completion function for the dosage comic downloader
(http://slipgate.za.net/dosage/) - the main binary is called
"mainline"...

I'm currently using $words[1] to complete the comic names from the
output of the program to make it possible to use dosage without having
the mainline script in your path.

Greetings, Tobi

--=20
GPG-Key 0xE2BEA341 - signed/encrypted mail preferred
My, oh so small, homepage: http://portfolio16.de/
http://www.fli4l.de/ - ISDN- & DSL-Router on one disk!
Registered FLI4L-User #00000003

--huq684BweRXVnRxX
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename=_dosage

#compdef mainline
#
# zsh completion for the dosage webcomic downloader

_mainline () {
  _arguments -C -s \
    '(-h --help)'{-h,--help}'[show help message and exit]' \
    '*'{-v,--verbose}'[verbose output, use multiple times for more verbosity]' \
    '(-q --quiet)'{-q,--quiet}'[suppress all output]' \
    '*'{-c,--catch-up}'[retrieve comics up until the strip that already exists, use twice to retrieve all strips]' \
    '(-b --base-path)'{-b+,--base-path=}'[path for saved comics (default: Comics)]:path:_files -/' \
    '--base-url=[the base URL of your comics directory]:URL:_urls' \
    '(-l --list)'{-l,--list}'[list available comic modules]' \
    '--single-list[list available comic modules in a single list]' \
    '(-V --version)'{-V,--version}'[display the version number]' \
    '(-m --module-help)'{-m,--module-help}'[display help for comic modules]' \
    '(-t --timestamps)'{-t,--timestamps}'[print timestamps for all output]' \
    '(-o --output)'{-o+,--output=}'[output formatting for downloaded comics]:format:((text html rss))' \
    '(-p --progress)'{-p,--progress}'[display progress bar while downloading comics]' \
    "*:comics:_dosage_comics"
}

_dosage_comics () {
  if [[ ${+_dosage_comic_list} -eq 0 ]]; then
    _dosage_comic_list=(${${(f)"$(_call_program dosage-list $words[1] --single-list)"}[2,-2]})
  fi
  _wanted values expl "comics" _multi_parts -i "/" _dosage_comic_list
}

_mainline "$@"

--huq684BweRXVnRxX--

--=_cthulhu.zoidberg.org-13187-1154615396-0001-2
Content-Type: application/pgp-signature; name="signature.asc"
Content-Transfer-Encoding: 7bit
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.3 (GNU/Linux)

iD8DBQFE0ghhGf7YPOK+o0ERArtiAKC3oGDkNKiGMgGxkPm9b280nMmxTACgtY5U
REv97onUBsQ2m2YKtmTi42g=
=1VZ/
-----END PGP SIGNATURE-----

--=_cthulhu.zoidberg.org-13187-1154615396-0001-2--


From zsh-workers-return-13925-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 09 16:09:19 2001
Return-Path: <zsh-workers-return-13925-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14004 invoked from network); 9 Apr 2001 16:09:18 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Apr 2001 16:09:18 -0000
Received: (qmail 3481 invoked by alias); 9 Apr 2001 16:09:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13925
Received: (qmail 3458 invoked from network); 9 Apr 2001 16:09:14 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010409160903.ZM29234@candle.brasslantern.com>
Date: Mon, 9 Apr 2001 16:09:02 +0000
In-Reply-To: <20010409115241.A4549@dman.com>
Comments: In reply to Clint Adams <schizo@debian.org>
        "Re: PATCH: Re: zsh/termcap and zsh/terminfo modules" (Apr  9, 11:52am)
References: <1010405001506.ZM644@candle.brasslantern.com> 
	<001801c0bd94$16f37f80$21c9ca95@mow.siemens.ru> 
	<20010405095812.A18353@dman.com> 
	<1010406183939.ZM14729@candle.brasslantern.com> 
	<20010409091249.A1844@dman.com> 
	<1010409154550.ZM29096@candle.brasslantern.com> 
	<20010409115241.A4549@dman.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: Re: zsh/termcap and zsh/terminfo modules
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 9, 11:52am, Clint Adams wrote:
} 
} What I mean is, have configure determine what libraries are necessary
} for each module, then link that module with the necessary libraries.  If
} the required symbols are unavailable, do not link the module.
} So you wouldn't get a terminfo.so if you didn't have gettistr,
} but terminfo.so would be the only thing linked against ncurses if that's
} the only module that requires it.

Ah.  Yes, that would be superior.

I notice that configure.in does not have an AC_SEARCH_LIBS for tigetstr,
only for tgetent.  That's why the ncurses library is never found on my
system -- the way configure.in is currently organized, tigetstr will be
found only if it is in the same library in which tgetent is found; and
termcap is always searched first except on aix, hpux, and solaris, so for
most systems that have termcap the zsh/terminfo module will be disabled.

Independent of linking modules with their own libraries, what's the right
way to deal with this?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


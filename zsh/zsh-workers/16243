From zsh-workers-return-16243-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 12 19:00:52 2001
Return-Path: <zsh-workers-return-16243-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21340 invoked from network); 12 Nov 2001 19:00:52 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?gQ/2UmcOOfaR918/Sx6XwLwm0yw3uQ36?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 12 Nov 2001 19:00:52 -0000
Received: (qmail 9513 invoked from network); 12 Nov 2001 19:00:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by proxy.melb.primenet.com.au with SMTP; 12 Nov 2001 19:00:50 -0000
Received: (qmail 19302 invoked by alias); 12 Nov 2001 19:00:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16243
Received: (qmail 19285 invoked from network); 12 Nov 2001 19:00:39 -0000
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <1011112185944.ZM19128@candle.brasslantern.com>
Date: Mon, 12 Nov 2001 18:59:44 +0000
In-Reply-To: <3BF014DD.4060508@abinitio.com>
Comments: In reply to Carl Feynman <carlf@abinitio.com>
        "Core dump bug in ZSH version 3.0.7" (Nov 12,  1:28pm)
References: <3BF014DD.4060508@abinitio.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Carl Feynman <carlf@abinitio.com>, zsh-workers@sunsite.dk
Subject: Re: Core dump bug in ZSH version 3.0.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Nov 12,  1:28pm, Carl Feynman wrote:
}
} I cut down the offending python code to the following three lines, all
} of which seem to be required to cause the bug:
} 
} if (len(sys.argv) > 1) :
} mask = (1 << string.atoi(sys.argv[1])) - 1
} key = string.atoi(sys.argv[2])

I can reproduce it with just the last two of those lines.

It doesn't crash 4.0.x/4.1.x, but it does get into a rather strange state,
trying to read a here-document whose start/end string is a single space,
which of course is impossible (so you're trapped in the here-document until
you interrupt somehow).

zagzig% mask = (1 << string.atoi(sys.argv[1])) - 1
zsh: parse error near `)'
zagzig% key = string.atoi(sys.argv[2])
heredoc>  


-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


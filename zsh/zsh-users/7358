From zsh-users-return-7358-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 15 18:57:58 2004
Return-Path: <zsh-users-return-7358-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6679 invoked from network); 15 Apr 2004 18:57:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Apr 2004 18:57:57 -0000
Received: (qmail 22492 invoked by alias); 15 Apr 2004 18:57:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7358
Received: (qmail 22454 invoked from network); 15 Apr 2004 18:57:34 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 15 Apr 2004 18:57:34 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [130.225.247.86] by sunsite.dk (MessageWall 1.0.8) with SMTP; 15 Apr 2004 18:57:33 -0000
Received: (qmail 13776 invoked from network); 15 Apr 2004 18:57:33 -0000
Received: from hydrogen.ucsc.edu (128.114.41.29)
  by a.mx.sunsite.dk with SMTP; 15 Apr 2004 18:57:31 -0000
Received: from [128.114.141.1] (xanana.ucsc.edu [128.114.141.1])
	by hydrogen.ucsc.edu (8.12.11/8.12.11) with ESMTP id i3FIuR3O015468;
	Thu, 15 Apr 2004 11:56:27 -0700 (PDT)
In-Reply-To: <5522.1082043459@trentino.logica.co.uk>
References: <3884.1082025310@csr.com> <5522.1082043459@trentino.logica.co.uk>
Mime-Version: 1.0 (Apple Message framework v613)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C49BA702-8F0E-11D8-9677-000393ABF2F0@chemistry.ucsc.edu>
Content-Transfer-Encoding: 7bit
Cc: Oliver Kiddle <okiddle@yahoo.co.uk>, Peter Stephenson <pws@csr.com>
From: William Scott <wgscott@chemistry.ucsc.edu>
Subject: Re: runtime problem with zsh on an sgi 
Date: Thu, 15 Apr 2004 11:57:39 -0700
To: zsh-users@sunsite.dk
X-Mailer: Apple Mail (2.613)
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Dear Peter, Oliver et al:

Thanks very much.

It turns out in both cases (version 4.1.1, which works, and 4.2, which 
has the problem) I am linking to libcurses.so.


For version 4.1.1 I have this:

% elfdump -Dl /usr/local/bin/zsh

/usr/local/bin/zsh:

                    **** MIPS LIBLIST INFORMATION ****
.liblist :
[INDEX] Timestamp               Checksum        Flags   Name            
Version
[1]     Apr 29 23:44:56 1998    0xd244571a      -----   libsocket.so    
sgi1.0
[2]     Apr 29 21:05:51 1998    0x65b9334f      -----   libdl.so        
sgi1.0
[3]     Aug  2 10:26:13 2002    0x64ff32c8      -----   libcurses.so    
sgi1.0
[4]     Aug  2 10:26:24 2002    0xa74005b5      -----   libm.so sgi1.0
[5]     Apr  4 11:20:43 2002    0xe5db3147      -----   libc.so.1       
sgi1.0
proudhon 3% which zsh
/usr/local/bin/zsh


For version 4.2, I have this:

% elfdump -Dl /usr/bin/zsh

/usr/bin/zsh:

                    **** MIPS LIBLIST INFORMATION ****
.liblist :
[INDEX] Timestamp               Checksum        Flags   Name            
Version
[1]     Apr 29 23:44:56 1998    0xd244571a      -----   libsocket.so    
sgi1.0
[2]     Apr 29 21:05:51 1998    0x65b9334f      -----   libdl.so        
sgi1.0
[3]     Aug  1 11:46:52 2002    0x64ff32c8      -----   libcurses.so    
sgi1.0
[4]     Aug  1 11:47:02 2002    0xa74005b5      -----   libm.so sgi1.0
[5]     Apr  4 11:20:43 2002    0xe5db3147      -----   libc.so.1       
sgi1.0


These are actually on two different machines, but normally both behave 
identically.


Also I noticed the version of zsh 4.2 on my Mac (which works as 
expected) compiles with ncurses.  Would that make a difference?  Should 
I try with termcap (I am not sure if SGI has these).



Thanks very much for your help.

Bill Scott






On Apr 15, 2004, at 8:37 AM, Oliver Kiddle wrote:

> Peter wrote:
>> If you want to investigate (and I may be barking up the wrong tree),
>> look inside the file config.status.  You should find a line containing
>> @LIBS@ which tells what libraries are being linked in (e.g. -lcurses 
>> or
>> -ltermcap).
>
> You might be able to use elfdump to see what libraries are linked in.
> If you've still got the old zsh around, that might be easier. The
> command is something like elfdump -Dl zsh, or maybe -DL. I don't have
> easy access to IRIX anymore so I'm going on memory. You may need to
> check the elfdump manpage.
>
> Oliver
>
>






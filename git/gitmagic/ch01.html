<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Chapter&nbsp;1.&nbsp;Introduction</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="index.html" title="Preface">
  <link rel="next" href="ch02.html" title=
  "Chapter&nbsp;2.&nbsp;Basic Tricks">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Preface</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_thanks">Thanks!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_license">License</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Introduction</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_work_is_play">Work is Play</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_version_control">Version
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_distributed_control">Distributed
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_a_silly_superstition">A Silly
            Superstition</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_merge_conflicts">Merge
            Conflicts</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Basic
          Tricks</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_saving_state">Saving State</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_add_delete_rename">Add, Delete,
            Rename</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_advanced_undo_redo">Advanced
            Undo/Redo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_reverting">Reverting</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_changelog_generation">Changelog
            Generation</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_downloading_files">Downloading
            Files</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_the_bleeding_edge">The Bleeding
            Edge</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_instant_publishing">Instant
            Publishing</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_what_have_i_done">What Have I
            Done?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_exercise">Exercise</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Cloning
          Around</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_sync_computers">Sync
            Computers</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_classic_source_control">Classic Source
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_secret_source">Secret
            Source</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bare_repositories">Bare
            repositories</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_versus_pull">Push versus
            pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_forking_a_project">Forking a
            Project</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_ultimate_backups">Ultimate
            Backups</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_light_speed_multitask">Light-Speed
            Multitask</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_guerilla_version_control">Guerilla Version
            Control</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_why_i_use_git">Why I use
            Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Branch
          Wizardry</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_the_boss_key">The Boss Key</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_dirty_work">Dirty Work</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_quick_fixes">Quick Fixes</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_merging">Merging</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_uninterrupted_workflow">Uninterrupted
            Workflow</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_reorganizing_a_medley">Reorganizing a
            Medley</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_managing_branches">Managing
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_temporary_branches">Temporary
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_work_how_you_want">Work How You
            Want</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Lessons of
          History</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_i_stand_corrected">I Stand
            Corrected</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_and_then_some">… And Then
            Some</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_local_changes_last">Local Changes
            Last</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_rewriting_history">Rewriting
            History</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_making_history">Making
            History</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_where_did_it_all_go_wrong">Where Did It All
            Go Wrong?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_who_made_it_all_go_wrong">Who Made It All
            Go Wrong?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_personal_experience">Personal
            Experience</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Multiplayer
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_who_am_i">Who Am I?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_over_ssh_http">Git Over SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_over_anything">Git Over
            Anything</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_the_global_currency">Patches: The
            Global Currency</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_sorry_we_8217_ve_moved">Sorry, We’ve
            Moved</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_remote_branches">Remote
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_multiple_remotes">Multiple
            Remotes</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_my_preferences">My
            Preferences</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Git
          Grandmastery</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_source_releases">Source
            Releases</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_commit_what_changed">Commit What
            Changed</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_my_commit_is_too_big">My Commit Is Too
            Big!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_the_index_git_8217_s_staging_area">The
            Index: Git’s Staging Area</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_don_8217_t_lose_your_head">Don’t Lose Your
            HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_head_hunting">HEAD-hunting</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_building_on_git">Building On
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_daring_stunts">Daring
            Stunts</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_preventing_bad_commits">Preventing Bad
            Commits</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Secrets
          Revealed</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_invisibility">Invisibility</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integrity">Integrity</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelligence">Intelligence</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indexing">Indexing</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_git_8217_s_origins">Git’s
            Origins</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_the_object_database">The Object
            Database</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_trees">Trees</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_commits">Commits</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indistinguishable_from_magic">Indistinguishable
            From Magic</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Git
          Shortcomings</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_sha1_weaknesses">SHA1
            Weaknesses</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_unrelated_files">Unrelated
            Files</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_who_8217_s_editing_what">Who’s Editing
            What?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_file_history">File History</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initial_clone">Initial Clone</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_volatile_projects">Volatile
            Projects</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_global_counter">Global
            Counter</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_empty_subdirectories">Empty
            Subdirectories</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initial_commit">Initial
            Commit</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_interface_quirks">Interface
            Quirks</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B.
        Translating This Guide</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Chapter&nbsp;1.&nbsp;Introduction">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h2>
        </div>
      </div>
    </div>

    <p>I’ll use an analogy to introduce version control. See
    <a class="ulink" href=
    "http://en.wikipedia.org/wiki/Revision_control" target=
    "_top">the Wikipedia entry on revision control</a> for a saner
    explanation.</p>

    <div class="section" title="Work is Play">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_work_is_play"></a>Work is
            Play</h2>
          </div>
        </div>
      </div>

      <p>I’ve played computer games almost all my life. In
      contrast, I only started using version control systems as an
      adult. I suspect I’m not alone, and comparing the two may
      make these concepts easier to explain and understand.</p>

      <p>Think of editing your code, or document, as playing a
      game. Once you’ve made a lot of progress, you’d like to save.
      To do so, you click on the <span class=
      "emphasis"><em>Save</em></span> button in your trusty
      editor.</p>

      <p>But this will overwrite the old version. It’s like those
      old school games which only had one save slot: sure you could
      save, but you could never go back to an older state. Which
      was a shame, because your previous save might have been right
      at an exceptionally fun part of the game that you’d like to
      revisit one day. Or worse still, your current save is in an
      unwinnable state, and you have to start again.</p>
    </div>

    <div class="section" title="Version Control">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_version_control"></a>Version Control</h2>
          </div>
        </div>
      </div>

      <p>When editing, you can <span class="emphasis"><em>Save
      As…</em></span> a different file, or copy the file somewhere
      first before saving if you want to savour old versions. You
      can compress them too to save space. This is a primitive and
      labour-intensive form of version control. Computer games
      improved on this long ago, many of them providing multiple
      automatically timestamped save slots.</p>

      <p>Let’s make the problem slightly tougher. Say you have a
      bunch of files that go together, such as source code for a
      project, or files for a website. Now if you want to keep an
      old version you have to archive a whole directory. Keeping
      many versions around by hand is inconvenient, and quickly
      becomes expensive.</p>

      <p>With some computer games, a saved game really does consist
      of a directory full of files. These games hide this detail
      from the player and present a convenient interface to manage
      different versions of this directory.</p>

      <p>Version control systems are no different. They all have
      nice interfaces to manage a directory of stuff. You can save
      the state of the directory every so often, and you can load
      any one of the saved states later on. Unlike most computer
      games, they’re usually smart about conserving space.
      Typically, only a few files change from version to version,
      and not by much. Storing the differences instead of entire
      new copies saves room.</p>
    </div>

    <div class="section" title="Distributed Control">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_distributed_control"></a>Distributed Control</h2>
          </div>
        </div>
      </div>

      <p>Now imagine a very difficult computer game. So difficult
      to finish that many experienced gamers all over the world
      decide to team up and share their saved games to try to beat
      it. Speedruns are real-life examples: players specializing in
      different levels of the same game collaborate to produce
      amazing results.</p>

      <p>How would you set up a system so they can get at each
      other’s saves easily? And upload new ones?</p>

      <p>In the old days, every project used centralized version
      control. A server somewhere held all the saved games. Nobody
      else did. Every player kept at most a few saved games on
      their machine. When a player wanted to make progress, they’d
      download the latest save from the main server, play a while,
      save and upload back to the server for everyone else to
      use.</p>

      <p>What if a player wanted to get an older saved game for
      some reason? Maybe the current saved game is in an unwinnable
      state because somebody forgot to pick up an object back in
      level three, and they want to find the latest saved game
      where the game can still be completed. Or maybe they want to
      compare two older saved games to see how much work a
      particular player did.</p>

      <p>There could be many reasons to want to see an older
      revision, but the outcome is the same. They have to ask the
      central server for that old saved game. The more saved games
      they want, the more they need to communicate.</p>

      <p>The new generation of version control systems, of which
      Git is a member, are known as distributed systems, and can be
      thought of as a generalization of centralized systems. When
      players download from the main server they get every saved
      game, not just the latest one. It’s as if they’re mirroring
      the central server.</p>

      <p>This initial cloning operation can be expensive,
      especially if there’s a long history, but it pays off in the
      long run. One immediate benefit is that when an old save is
      desired for any reason, communication with the central server
      is unnecessary.</p>
    </div>

    <div class="section" title="A Silly Superstition">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_a_silly_superstition"></a>A
            Silly Superstition</h2>
          </div>
        </div>
      </div>

      <p>A popular misconception is that distributed systems are
      ill-suited for projects requiring an official central
      repository. Nothing could be further from the truth.
      Photographing someone does not cause their soul to be stolen.
      Similarly, cloning the master repository does not diminish
      its importance.</p>

      <p>A good first approximation is that anything a centralized
      version control system can do, a well-designed distributed
      system can do better. Network resources are simply costlier
      than local resources. While we shall later see there are
      drawbacks to a distributed approach, one is less likely to
      make erroneous comparisons with this rule of thumb.</p>

      <p>A small project may only need a fraction of the features
      offered by such a system, but using systems that scale poorly
      for tiny projects is like using Roman numerals for
      calculations involving small numbers.</p>

      <p>Moreover, your project may grow beyond your original
      expectations. Using Git from the outset is like carrying a
      Swiss army knife even though you mostly use it to open
      bottles. On the day you desperately need a screwdriver you’ll
      be glad you have more than a plain bottle-opener.</p>
    </div>

    <div class="section" title="Merge Conflicts">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_merge_conflicts"></a>Merge
            Conflicts</h2>
          </div>
        </div>
      </div>

      <p>For this topic, our computer game analogy becomes too
      thinly stretched. Instead, let us again consider editing a
      document.</p>

      <p>Suppose Alice inserts a line at the beginning of a file,
      and Bob appends one at the end of his copy. They both upload
      their changes. Most systems will automatically deduce a
      reasonable course of action: accept and merge their changes,
      so both Alice’s and Bob’s edits are applied.</p>

      <p>Now suppose both Alice and Bob have made distinct edits to
      the same line. Then it is impossible to proceed without human
      intervention. The second person to upload is informed of a
      <span class="emphasis"><em>merge conflict</em></span>, and
      must choose one edit over another, or revise the line
      entirely.</p>

      <p>More complex situations can arise. Version control systems
      handle the simpler cases themselves, and leave the difficult
      cases for humans. Usually their behaviour is
      configurable.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

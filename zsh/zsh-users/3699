From zsh-users-return-3699-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 20 08:37:54 2001
Return-Path: <zsh-users-return-3699-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4252 invoked from network); 20 Mar 2001 08:37:53 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Mar 2001 08:37:53 -0000
Received: (qmail 10461 invoked by alias); 20 Mar 2001 08:37:39 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3699
Received: (qmail 10447 invoked from network); 20 Mar 2001 08:37:38 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010320083716.ZM15297@candle.brasslantern.com>
Date: Tue, 20 Mar 2001 08:37:15 +0000
References: <Pine.LNX.4.31.0103191314040.4850-100000@neptune> 
	<20010319141533.D94071@alpha1.net> 
	<20010319213006.B21595@thelonious.new.ox.ac.uk> 
	<874rwpmny9.fsf@mortimer.phone.com> 
	<20010319220411.A22344@thelonious.new.ox.ac.uk> 
	<87r8ztl7lc.fsf@mortimer.phone.com> 
	<20010319230628.A22826@thelonious.new.ox.ac.uk>
	<200103200828.JAA06269@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-users@sunsite.dk
Subject: Re: completion tricks
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 19,  1:46pm, Matt Armstrong wrote:
} Subject: Re: completion tricks
}
} I was using the new completion stuff for a while, but I switched back
} for two reasons:
} 
}  - The learning curve to actually do stuff with the new completion
}    stuff was above my personal threshold.

On the other hand, the new completion system does more in its shipping
configuration than was ever collected from all contributors of compctl
commands.  The amount of stuff that you _need_ to do yourself is less.

}  - My shells started up many times slower with it in place.

On Mar 19, 10:04pm, Adam Spiers wrote:
} Subject: Re: completion tricks
}
} This is a shame, but I can totally sympathise with your viewpoint.  I
} would love to hear some tips from any zsh-workers as to how zsh can be
} optimised with respect to startup time.  (Optimisation w.r.t. memory
} usage is another topic I would like to hear people's thoughts on, but
} it's off-topic here.)

Sven did a couple of optimizations posted in zsh-workers/13589 that
should both increase the speed and cut down the memory usage a lot.  If
you haven't tried again with the latest snapshot, you should.  Or at
least try again when 4.0.1 is released.

} [Note to workers: would it be worth having `make install'
} automatically zcompile the completion system?]

Maybe; the .zcompdump file actually does make a lot of difference.  In
tests I just tried (on a 233MHz Pentium II), "zsh -li" started in 1.05
seconds with a .zcompdump file, as opposed to 2.35s with "compinit -D"
(other garbage in my startup files being equal).  Incidentally, it took
3.64s to start up and write the .zcompdump in the first place.

On Tue Mar 20,  9:28am, Sven Wischnowsky wrote:
} Normal users who have installed the functions in their home
} directories or who can trust their system administrators can call
} compinit with the -C option.  This avoids the security check
} (compaudit) and it avoid parsing the tag lines of the completion files 

compinit -C cut the time from 1.05s to 1.01s.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


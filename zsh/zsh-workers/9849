From zsh-workers-return-9849-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Feb 23 18:53:36 2000
Return-Path: <zsh-workers-return-9849-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2252 invoked from network); 23 Feb 2000 18:53:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Feb 2000 18:53:34 -0000
Received: (qmail 2496 invoked by alias); 23 Feb 2000 18:53:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9849
Received: (qmail 2483 invoked from network); 23 Feb 2000 18:53:19 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: file-patterns problem
Date: Wed, 23 Feb 2000 18:57:16 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E12NguT-0007Bk-00.2000-02-23-18-53-17@cmailg4.svr.pol.co.uk>

I'm sure there are going to be more ramifications of the user guide chapter
on completion (indeed, I've got a file of remarks which I'll need to
reprocess), but here's something that arose because Bart didn't like the
way I'd described file-patterns (thanks to Bart and Sven for some
corrections etc.).  The description now looks like this:

  It was explained above for the tag-order style that when a function
  uses pattern matching to generate file completions, such as all *.ps
  files or all *.gz files, the three tags globbed-files,
  all-files and directories are tried.  When you set something with
  file-patterns, all three tags are automatically activated.  So, for
  example, after

    zstyle ':completion:*:*:foo:*:*' file-patterns '*.yo'

  the command named `foo' will complete files ending in `.yo', as
  well as directories.   For once, you don't have to change the completer to
  do this:  `foo' isn't specially handled, so does default completion,
  and that means completing files, so that file-patterns is active
  anyway.

  You can now set up your tag-order style to include
  globbed-patterns, which represents the `.yo' files, and
  directories and all-files; suppose you want to make the `.yo'
  files and the directories appear at the same time:

    zstyle ':completion:*:*:foo:*:*' tag-order 'directories globbed-files'

Unfortunately this doesn't seem to work --- I don't get the directories,
even if there aren't any .yo files.  I can't see what's going wrong.  I can
add `*(-/)' to the globbed files list, of course, but then they're
naturally regarded as attached to the globbed-files tag.  Maybe I've got
the wrong end of the stick somewhere.


The other issue, with the position of the `predict' in its context, has
just been sorted out.

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>


From zsh-workers-return-15445-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 22 05:08:44 2001
Return-Path: <zsh-workers-return-15445-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23251 invoked from network); 22 Jul 2001 05:08:43 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Jul 2001 05:08:43 -0000
Received: (qmail 22851 invoked by alias); 22 Jul 2001 05:08:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15445
Received: (qmail 22840 invoked from network); 22 Jul 2001 05:08:36 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
Date: Sun, 22 Jul 2001 09:08:25 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Fletch <fletch@phydeaux.org>
cc: <zsh-workers@sunsite.dk>
Subject: Re: Where to add extra libraries for modules
In-Reply-To: <m2y9phybno.fsf@freebie.phydeaux.org>
Message-ID: <Pine.SV4.4.33.0107220901140.13598-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On 21 Jul 2001, Fletch wrote:

>
>
>         The problem is that the mkmakemod.sh script has already spit
> out a rule for `zperl.$(DL_EXT)'.  I realize that I could stick the
> ldopts invocation in DLLDFLAGS and/or LDFLAGS in the configure script,
> but then that'd be including them for every module.
>
>
>         Would it make sense (possibly) to add an `extralibs' paramter
> in the .mdd and then have mkmakemod.sh include that in the rule for
> module.$(DL_EXT)?
>

It would be trivial, but ...

on most systems perl lib is installed into own directory not in standard
libpath. That means that you have to link your program with some variant
of

LD_RUN_PATH=/usr/lib/perl/5.6.0/... $(LD) ... -L$... -lperl ...

Now, the problem is - I do now that it works when linking main program. I
do not know if it works when linking shared object.

Also, we have AIX and Cygwin. Cygwin may be easier because here libperl is
in PATH (I guess, nust check), but I suspect it won't work for AIX at all
(because we need list of symbols exported from libperl.so). Anybody knows
status of perl on AIX?

Note, that there is no prolem with static perl library.

-andrej


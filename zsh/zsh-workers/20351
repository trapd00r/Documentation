From zsh-workers-return-20351-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 11 16:31:42 2004
Return-Path: <zsh-workers-return-20351-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1886 invoked from network); 11 Sep 2004 16:31:41 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Sep 2004 16:31:41 -0000
Received: (qmail 10823 invoked from network); 11 Sep 2004 16:31:35 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2004 16:31:35 -0000
Received: (qmail 11714 invoked by alias); 11 Sep 2004 16:31:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20351
Received: (qmail 11704 invoked from network); 11 Sep 2004 16:31:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Sep 2004 16:31:23 -0000
Received: (qmail 10551 invoked from network); 11 Sep 2004 16:31:23 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 11 Sep 2004 16:31:22 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 6E9717004C; Sat, 11 Sep 2004 12:31:25 -0400 (EDT)
Date: Sat, 11 Sep 2004 12:31:25 -0400
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.dk
Cc: martin f krafft <madduck@debian.org>,
	270608-forwarded@bugs.debian.org
Subject: Re: Bug#270608: zsh: dpkg completion broken
Message-ID: <20040911163125.GA32267@scowler.net>
References: <20040910161256.GA12173@scowler.net> <20040910161910.GA23853@cirrus.madduck.net> <20040910163119.GA12581@scowler.net> <20040910172215.GA27368@cirrus.madduck.net> <20040910185500.GA15086@scowler.net> <20040908085302.GA32363@cirrus.madduck.net> <20040908180727.GB25987@scowler.net> <20040910093933.GC4099@cirrus.madduck.net> <20040910155528.GA11672@scowler.net> <20040911063908.GA29864@cirrus.madduck.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20040911063908.GA29864@cirrus.madduck.net>
User-Agent: Mutt/1.5.6+20040722i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-4.9 required=6.0 tests=BAYES_00 autolearn=no 
	version=2.63
X-Spam-Hits: -4.9

> I found the culprit:
> 
>   fignore="~:#:bk"
> 
> If I take out the '#', it works.
> 
> Still, this seems like a bug to me...

Well, "fignore" is an array, and "FIGNORE" is a scalar, so what you
probably wanted to type is either

FIGNORE="~:#:bk"

or

fignore=(\~ # bk)

though you might want to drop "fignore" altogether and use a
ignored-patterns zstyles instead.

I would guess that the failure to complete directories with the "fignore"
you mentioned has something to do with misinterpretation of "~:#:bk";
maybe the massaging of fignore to _comp_ignore could use more escaping.


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>GstBaseVideoDecoder</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="GStreamer Bad Plugins 0.10 Library Reference Manual">
<link rel="up" href="video.html" title="Base video element classes">
<link rel="prev" href="gst-plugins-bad-libs-GstBaseVideoCodec.html" title="GstBaseVideoCodec">
<link rel="next" href="gst-plugins-bad-libs-GstBaseVideoEncoder.html" title="GstBaseVideoEncoder">
<meta name="generator" content="GTK-Doc V1.18 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="gst-plugins-bad-libs-GstBaseVideoCodec.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="video.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GStreamer Bad Plugins 0.10 Library Reference Manual</th>
<td><a accesskey="n" href="gst-plugins-bad-libs-GstBaseVideoEncoder.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#gst-plugins-bad-libs-GstBaseVideoDecoder.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#gst-plugins-bad-libs-GstBaseVideoDecoder.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry">
<a name="gst-plugins-bad-libs-GstBaseVideoDecoder"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="gst-plugins-bad-libs-GstBaseVideoDecoder.top_of_page"></a>GstBaseVideoDecoder</span></h2>
<p>GstBaseVideoDecoder — Base class for video decoders</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="gst-plugins-bad-libs-GstBaseVideoDecoder.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">#define             <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GST-BASE-VIDEO-DECODER-SINK-NAME:CAPS" title="GST_BASE_VIDEO_DECODER_SINK_NAME">GST_BASE_VIDEO_DECODER_SINK_NAME</a>
#define             <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GST-BASE-VIDEO-DECODER-SRC-NAME:CAPS" title="GST_BASE_VIDEO_DECODER_SRC_NAME">GST_BASE_VIDEO_DECODER_SRC_NAME</a>
#define             <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GST-BASE-VIDEO-DECODER-FLOW-NEED-DATA:CAPS" title="GST_BASE_VIDEO_DECODER_FLOW_NEED_DATA">GST_BASE_VIDEO_DECODER_FLOW_NEED_DATA</a>
#define             <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GST-BASE-VIDEO-DECODER-FLOW-DROPPED:CAPS" title="GST_BASE_VIDEO_DECODER_FLOW_DROPPED">GST_BASE_VIDEO_DECODER_FLOW_DROPPED</a>
#define             <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GST-BASE-AUDIO-DECODER-ERROR:CAPS" title="GST_BASE_AUDIO_DECODER_ERROR()">GST_BASE_AUDIO_DECODER_ERROR</a>        (el,
                                                         w,
                                                         domain,
                                                         code,
                                                         text,
                                                         debug,
                                                         ret)
struct              <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder">GstBaseVideoDecoder</a>;
struct              <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoderClass" title="struct GstBaseVideoDecoderClass">GstBaseVideoDecoderClass</a>;
<span class="returnvalue">void</span>                <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-class-set-capture-pattern" title="gst_base_video_decoder_class_set_capture_pattern ()">gst_base_video_decoder_class_set_capture_pattern</a>
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoderClass" title="struct GstBaseVideoDecoderClass"><span class="type">GstBaseVideoDecoderClass</span></a> *klass</code></em>,
                                                         <em class="parameter"><code><span class="type">guint32</span> mask</code></em>,
                                                         <em class="parameter"><code><span class="type">guint32</span> pattern</code></em>);
<a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="returnvalue">GstVideoFrame</span></a> *     <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-get-frame" title="gst_base_video_decoder_get_frame ()">gst_base_video_decoder_get_frame</a>    (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *coder</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> frame_number</code></em>);
<a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="returnvalue">GstVideoFrame</span></a> *     <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-get-oldest-frame" title="gst_base_video_decoder_get_oldest_frame ()">gst_base_video_decoder_get_oldest_frame</a>
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *coder</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-add-to-frame" title="gst_base_video_decoder_add_to_frame ()">gst_base_video_decoder_add_to_frame</a> (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> n_bytes</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-lost-sync" title="gst_base_video_decoder_lost_sync ()">gst_base_video_decoder_lost_sync</a>    (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);
<a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="returnvalue">GstFlowReturn</span></a>       <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-have-frame" title="gst_base_video_decoder_have_frame ()">gst_base_video_decoder_have_frame</a>   (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-set-sync-point" title="gst_base_video_decoder_set_sync_point ()">gst_base_video_decoder_set_sync_point</a>
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>            <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-set-src-caps" title="gst_base_video_decoder_set_src_caps ()">gst_base_video_decoder_set_src_caps</a> (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);
<a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/gstreamer-GstBuffer.html#GstBuffer"><span class="returnvalue">GstBuffer</span></a> *         <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-alloc-src-buffer" title="gst_base_video_decoder_alloc_src_buffer ()">gst_base_video_decoder_alloc_src_buffer</a>
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);
<a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="returnvalue">GstFlowReturn</span></a>       <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-alloc-src-frame" title="gst_base_video_decoder_alloc_src_frame ()">gst_base_video_decoder_alloc_src_frame</a>
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> *frame</code></em>);
<a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoState" title="struct GstVideoState"><span class="returnvalue">GstVideoState</span></a> *     <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-get-state" title="gst_base_video_decoder_get_state ()">gst_base_video_decoder_get_state</a>    (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);
<a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstClock.html#GstClockTimeDiff"><span class="returnvalue">GstClockTimeDiff</span></a>    <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-get-max-decode-time" title="gst_base_video_decoder_get_max_decode_time ()">gst_base_video_decoder_get_max_decode_time</a>
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> *frame</code></em>);
<a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="returnvalue">GstFlowReturn</span></a>       <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#gst-base-video-decoder-finish-frame" title="gst_base_video_decoder_finish_frame ()">gst_base_video_decoder_finish_frame</a> (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> *frame</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-libs-GstBaseVideoDecoder.description"></a><h2>Description</h2>
<p>
This base class is for video decoders turning encoded data into raw video
frames.
</p>
<p>
GstBaseVideoDecoder and subclass should cooperate as follows.
</p>
<div class="orderedlist"><ol class="orderedlist" type="1">
<li class="listitem"><div class="itemizedlist">
<p class="title"><b>Configuration</b></p>
<ul class="itemizedlist" type="disc">
<li class="listitem"><p>
    Initially, GstBaseVideoDecoder calls <em class="parameter"><code>start</code></em> when the decoder element
    is activated, which allows subclass to perform any global setup.
  </p></li>
<li class="listitem"><p>
    GstBaseVideoDecoder calls <em class="parameter"><code>set_format</code></em> to inform subclass of caps
    describing input video data that it is about to receive, including
    possibly configuration data.
    While unlikely, it might be called more than once, if changing input
    parameters require reconfiguration.
  </p></li>
<li class="listitem"><p>
    GstBaseVideoDecoder calls <em class="parameter"><code>stop</code></em> at end of all processing.
  </p></li>
</ul>
</div></li>
<li class="listitem"><div class="itemizedlist">
<p class="title"><b>Data processing</b></p>
<ul class="itemizedlist" type="disc">
<li class="listitem"><p>
      Base class gathers input data, and optionally allows subclass
      to parse this into subsequently manageable chunks, typically
      corresponding to and referred to as 'frames'.
    </p></li>
<li class="listitem"><p>
      Input frame is provided to subclass' <em class="parameter"><code>handle_frame</code></em>.
    </p></li>
<li class="listitem"><p>
      If codec processing results in decoded data, subclass should call
      <em class="parameter"><code>gst_base_video_decoder_finish_frame</code></em> to have decoded data pushed
      downstream.
    </p></li>
</ul>
</div></li>
<li class="listitem"><div class="itemizedlist">
<p class="title"><b>Shutdown phase</b></p>
<ul class="itemizedlist" type="disc"><li class="listitem"><p>
    GstBaseVideoDecoder class calls <em class="parameter"><code>stop</code></em> to inform the subclass that data
    parsing will be stopped.
  </p></li></ul>
</div></li>
</ol></div>
<p>
</p>
<p>
Subclass is responsible for providing pad template caps for
source and sink pads. The pads need to be named "sink" and "src". It also
needs to set the fixed caps on srcpad, when the format is ensured.  This
is typically when base class calls subclass' <em class="parameter"><code>set_format</code></em> function, though
it might be delayed until calling <em class="parameter"><code>gst_base_video_decoder_finish_frame</code></em>.
</p>
<p>
Subclass is also responsible for providing (presentation) timestamps
(likely based on corresponding input ones).  If that is not applicable
or possible, baseclass provides limited framerate based interpolation.
</p>
<p>
Similarly, the baseclass provides some limited (legacy) seeking support
(upon explicit subclass request), as full-fledged support
should rather be left to upstream demuxer, parser or alike.  This simple
approach caters for seeking and duration reporting using estimated input
bitrates.
</p>
<p>
Baseclass provides some support for reverse playback, in particular
in case incoming data is not packetized or upstream does not provide
fragments on keyframe boundaries.  However, subclass should then be prepared
for the parsing and frame processing stage to occur separately (rather
than otherwise the latter immediately following the former),
and should ensure the parsing stage properly marks keyframes or rely on
upstream to do so properly for incoming data.
</p>
<p>
Things that subclass need to take care of:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>Provide pad templates</p></li>
<li class="listitem"><p>
     Set source pad caps when appropriate
  </p></li>
<li class="listitem"><p>
     Configure some baseclass behaviour parameters.
  </p></li>
<li class="listitem"><p>
     Optionally parse input data, if it is not considered packetized.
     Parse sync is obtained either by providing baseclass with a
     mask and pattern or a custom <em class="parameter"><code>scan_for_sync</code></em>.  When sync is established,
     <em class="parameter"><code>parse_data</code></em> should invoke <em class="parameter"><code>gst_base_video_decoder_add_to_frame</code></em> and
     <em class="parameter"><code>gst_base_video_decoder_have_frame</code></em> as appropriate.
  </p></li>
<li class="listitem"><p>
     Accept data in <em class="parameter"><code>handle_frame</code></em> and provide decoded results to
     <em class="parameter"><code>gst_base_video_decoder_finish_frame</code></em>.
  </p></li>
</ul></div>
<p>
</p>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-libs-GstBaseVideoDecoder.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="GST-BASE-VIDEO-DECODER-SINK-NAME:CAPS"></a><h3>GST_BASE_VIDEO_DECODER_SINK_NAME</h3>
<pre class="programlisting">#define GST_BASE_VIDEO_DECODER_SINK_NAME    "sink"
</pre>
<p>
The name of the templates for the sink pad.
</p>
</div>
<hr>
<div class="refsect2">
<a name="GST-BASE-VIDEO-DECODER-SRC-NAME:CAPS"></a><h3>GST_BASE_VIDEO_DECODER_SRC_NAME</h3>
<pre class="programlisting">#define GST_BASE_VIDEO_DECODER_SRC_NAME     "src"
</pre>
<p>
The name of the templates for the source pad.
</p>
</div>
<hr>
<div class="refsect2">
<a name="GST-BASE-VIDEO-DECODER-FLOW-NEED-DATA:CAPS"></a><h3>GST_BASE_VIDEO_DECODER_FLOW_NEED_DATA</h3>
<pre class="programlisting">#define GST_BASE_VIDEO_DECODER_FLOW_NEED_DATA GST_FLOW_CUSTOM_SUCCESS
</pre>
<p>
Returned while parsing to indicate more data is needed.
</p>
</div>
<hr>
<div class="refsect2">
<a name="GST-BASE-VIDEO-DECODER-FLOW-DROPPED:CAPS"></a><h3>GST_BASE_VIDEO_DECODER_FLOW_DROPPED</h3>
<pre class="programlisting">#define GST_BASE_VIDEO_DECODER_FLOW_DROPPED GST_FLOW_CUSTOM_SUCCESS_1
</pre>
<p>
Returned when the event/buffer should be dropped.
</p>
</div>
<hr>
<div class="refsect2">
<a name="GST-BASE-AUDIO-DECODER-ERROR:CAPS"></a><h3>GST_BASE_AUDIO_DECODER_ERROR()</h3>
<pre class="programlisting">#define             GST_BASE_AUDIO_DECODER_ERROR(el, w, domain, code, text, debug, ret)</pre>
</div>
<hr>
<div class="refsect2">
<a name="GstBaseVideoDecoder"></a><h3>struct GstBaseVideoDecoder</h3>
<pre class="programlisting">struct GstBaseVideoDecoder {
  GstBaseVideoCodec base_video_codec;
};
</pre>
<p>
The opaque <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> data structure.
</p>
</div>
<hr>
<div class="refsect2">
<a name="GstBaseVideoDecoderClass"></a><h3>struct GstBaseVideoDecoderClass</h3>
<pre class="programlisting">struct GstBaseVideoDecoderClass {
  GstBaseVideoCodecClass base_video_codec_class;

  gboolean      (*start)          (GstBaseVideoDecoder *coder);

  gboolean      (*stop)           (GstBaseVideoDecoder *coder);

  int           (*scan_for_sync)  (GstBaseVideoDecoder *decoder, gboolean at_eos,
                                   int offset, int n);

  GstFlowReturn (*parse_data)     (GstBaseVideoDecoder *decoder, gboolean at_eos);

  gboolean      (*set_format)     (GstBaseVideoDecoder *coder, GstVideoState * state);

  gboolean      (*reset)          (GstBaseVideoDecoder *coder);

  GstFlowReturn (*finish)         (GstBaseVideoDecoder *coder);

  GstFlowReturn (*handle_frame)   (GstBaseVideoDecoder *coder, GstVideoFrame *frame);
};
</pre>
<p>
Subclasses can override any of the available virtual methods or not, as
needed. At minimum <em class="parameter"><code>handle_frame</code></em> needs to be overridden, and <em class="parameter"><code>set_format</code></em>
and likely as well.  If non-packetized input is supported or expected,
<em class="parameter"><code>parse</code></em> needs to be overridden as well.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstBaseVideoCodecClass" title="struct GstBaseVideoCodecClass"><span class="type">GstBaseVideoCodecClass</span></a> <em class="structfield"><code><a name="GstBaseVideoDecoderClass.base-video-codec-class"></a>base_video_codec_class</code></em>;</span></p></td>
<td></td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.start"></a>start</code></em> ()</span></p></td>
<td>Optional.
Called when the element starts processing.
Allows opening external resources.</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.stop"></a>stop</code></em> ()</span></p></td>
<td>Optional.
Called when the element stops processing.
Allows closing external resources.</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.scan-for-sync"></a>scan_for_sync</code></em> ()</span></p></td>
<td>Optional.
Allows subclass to obtain sync for subsequent parsing
by custom means (above an beyond scanning for specific
marker and mask).</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.parse-data"></a>parse_data</code></em> ()</span></p></td>
<td>Required for non-packetized input.
Allows chopping incoming data into manageable units (frames)
for subsequent decoding.</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.set-format"></a>set_format</code></em> ()</span></p></td>
<td>Notifies subclass of incoming data format (caps).</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.reset"></a>reset</code></em> ()</span></p></td>
<td>Optional.
Allows subclass (codec) to perform post-seek semantics reset.</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.finish"></a>finish</code></em> ()</span></p></td>
<td>Optional.
Called to request subclass to dispatch any pending remaining
data (e.g. at EOS).</td>
</tr>
<tr>
<td><p><span class="term"><em class="structfield"><code><a name="GstBaseVideoDecoderClass.handle-frame"></a>handle_frame</code></em> ()</span></p></td>
<td>Provides input data frame to subclass.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-class-set-capture-pattern"></a><h3>gst_base_video_decoder_class_set_capture_pattern ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                gst_base_video_decoder_class_set_capture_pattern
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoderClass" title="struct GstBaseVideoDecoderClass"><span class="type">GstBaseVideoDecoderClass</span></a> *klass</code></em>,
                                                         <em class="parameter"><code><span class="type">guint32</span> mask</code></em>,
                                                         <em class="parameter"><code><span class="type">guint32</span> pattern</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-get-frame"></a><h3>gst_base_video_decoder_get_frame ()</h3>
<pre class="programlisting"><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="returnvalue">GstVideoFrame</span></a> *     gst_base_video_decoder_get_frame    (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *coder</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> frame_number</code></em>);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>frame_number</code></em> :</span></p></td>
<td>system_frame_number of a frame</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>pending unfinished <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> identified by <em class="parameter"><code>frame_number</code></em>.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-get-oldest-frame"></a><h3>gst_base_video_decoder_get_oldest_frame ()</h3>
<pre class="programlisting"><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="returnvalue">GstVideoFrame</span></a> *     gst_base_video_decoder_get_oldest_frame
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *coder</code></em>);</pre>
<p>
Sets the mask and pattern that will be scanned for to obtain parse sync.
Note that a non-zero <em class="parameter"><code>mask</code></em> implies that <em class="parameter"><code>scan_for_sync</code></em> will be ignored.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder_class</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoderClass" title="struct GstBaseVideoDecoderClass"><span class="type">GstBaseVideoDecoderClass</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-add-to-frame"></a><h3>gst_base_video_decoder_add_to_frame ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                gst_base_video_decoder_add_to_frame (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> n_bytes</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-lost-sync"></a><h3>gst_base_video_decoder_lost_sync ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                gst_base_video_decoder_lost_sync    (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);</pre>
<p>
Advances out-of-sync input data by 1 byte and marks it accordingly.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-have-frame"></a><h3>gst_base_video_decoder_have_frame ()</h3>
<pre class="programlisting"><a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="returnvalue">GstFlowReturn</span></a>       gst_base_video_decoder_have_frame   (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);</pre>
<p>
Gathers all data collected for currently parsed frame, gathers corresponding
metadata and passes it along for further processing, i.e. <em class="parameter"><code>handle_frame</code></em>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a <a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="type">GstFlowReturn</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-set-sync-point"></a><h3>gst_base_video_decoder_set_sync_point ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                gst_base_video_decoder_set_sync_point
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);</pre>
<p>
Marks current frame as a sync point, i.e. keyframe.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-set-src-caps"></a><h3>gst_base_video_decoder_set_src_caps ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gboolean"><span class="returnvalue">gboolean</span></a>            gst_base_video_decoder_set_src_caps (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);</pre>
<p>
Sets src pad caps according to currently configured <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoState" title="struct GstVideoState"><span class="type">GstVideoState</span></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-alloc-src-buffer"></a><h3>gst_base_video_decoder_alloc_src_buffer ()</h3>
<pre class="programlisting"><a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/gstreamer-GstBuffer.html#GstBuffer"><span class="returnvalue">GstBuffer</span></a> *         gst_base_video_decoder_alloc_src_buffer
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);</pre>
<p>
Helper function that uses gst_pad_alloc_buffer_and_set_caps
to allocate a buffer to hold a video frame for <em class="parameter"><code>base_video_decoder</code></em>'s
current <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoState" title="struct GstVideoState"><span class="type">GstVideoState</span></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>allocated buffer</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-alloc-src-frame"></a><h3>gst_base_video_decoder_alloc_src_frame ()</h3>
<pre class="programlisting"><a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="returnvalue">GstFlowReturn</span></a>       gst_base_video_decoder_alloc_src_frame
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> *frame</code></em>);</pre>
<p>
Helper function that uses gst_pad_alloc_buffer_and_set_caps
to allocate a buffer to hold a video frame for <em class="parameter"><code>base_video_decoder</code></em>'s
current <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoState" title="struct GstVideoState"><span class="type">GstVideoState</span></a>.  Subclass should already have configured video state
and set src pad caps.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>frame</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>result from pad alloc call</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-get-state"></a><h3>gst_base_video_decoder_get_state ()</h3>
<pre class="programlisting"><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoState" title="struct GstVideoState"><span class="returnvalue">GstVideoState</span></a> *     gst_base_video_decoder_get_state    (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>
<a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoState" title="struct GstVideoState"><span class="type">GstVideoState</span></a> describing format of video data.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-get-max-decode-time"></a><h3>gst_base_video_decoder_get_max_decode_time ()</h3>
<pre class="programlisting"><a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstClock.html#GstClockTimeDiff"><span class="returnvalue">GstClockTimeDiff</span></a>    gst_base_video_decoder_get_max_decode_time
                                                        (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> *frame</code></em>);</pre>
<p>
Determines maximum possible decoding time for <em class="parameter"><code>frame</code></em> that will
allow it to decode and arrive in time (as determined by QoS events).
In particular, a negative result means decoding in time is no longer possible
and should therefore occur as soon/skippy as possible.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>frame</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>max decoding time.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="gst-base-video-decoder-finish-frame"></a><h3>gst_base_video_decoder_finish_frame ()</h3>
<pre class="programlisting"><a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer/html/GstPad.html#GstFlowReturn"><span class="returnvalue">GstFlowReturn</span></a>       gst_base_video_decoder_finish_frame (<em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a> *base_video_decoder</code></em>,
                                                         <em class="parameter"><code><a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a> *frame</code></em>);</pre>
<p>
Removes next <em class="parameter"><code>n_bytes</code></em> of input data and adds it to currently parsed frame.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>base_video_decoder</code></em> :</span></p></td>
<td>a <a class="link" href="gst-plugins-bad-libs-GstBaseVideoDecoder.html#GstBaseVideoDecoder" title="struct GstBaseVideoDecoder"><span class="type">GstBaseVideoDecoder</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>n_bytes</code></em> :</span></p></td>
<td>an encoded <a class="link" href="gst-plugins-bad-libs-GstBaseVideoCodec.html#GstVideoFrame" title="struct GstVideoFrame"><span class="type">GstVideoFrame</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="gst-plugins-bad-libs-GstBaseVideoDecoder.see-also"></a><h2>See Also</h2>
<a href="http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gstreamer-libs/html/GstBaseTransform.html"><span class="type">GstBaseTransform</span></a>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.18</div>
</body>
</html>
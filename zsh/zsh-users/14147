From zsh-users-return-14147-mason-zsh=primenet.com.au@sunsite.dk Tue May 19 19:08:09 2009
Return-Path: <zsh-users-return-14147-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19289 invoked from network); 19 May 2009 19:07:54 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 19 May 2009 19:07:54 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 98690 invoked from network); 19 May 2009 18:58:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 May 2009 18:58:54 -0000
Received: (qmail 25686 invoked by alias); 19 May 2009 18:58:19 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14147
Received: (qmail 25662 invoked from network); 19 May 2009 18:58:17 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 19 May 2009 18:58:17 -0000
Received: from mtaout02-winn.ispmail.ntl.com (mtaout02-winn.ispmail.ntl.com [81.103.221.48])
	by bifrost.dotsrc.org (Postfix) with ESMTP id E6FC78027106
	for <zsh-users@sunsite.dk>; Tue, 19 May 2009 20:58:03 +0200 (CEST)
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout02-winn.ispmail.ntl.com
          (InterMail vM.7.08.04.00 201-2186-134-20080326) with ESMTP
          id <20090519185802.JJFJ29481.mtaout02-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <zsh-users@sunsite.dk>; Tue, 19 May 2009 19:58:02 +0100
Received: from pws-pc ([81.107.42.185]) by aamtaout01-winn.ispmail.ntl.com
          (InterMail vG.2.02.00.01 201-2161-120-102-20060912) with ESMTP
          id <20090519185802.JCGJ13254.aamtaout01-winn.ispmail.ntl.com@pws-pc>
          for <zsh-users@sunsite.dk>; Tue, 19 May 2009 19:58:02 +0100
Date: Tue, 19 May 2009 19:57:58 +0100
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-users@sunsite.dk
Subject: Re: Weird Symbols With zsh in urxvt
Message-ID: <20090519195758.303bcb60@pws-pc>
In-Reply-To: <20090518011303.GA29418@proton.bohnomat.de>
References: <20090518011303.GA29418@proton.bohnomat.de>
X-Mailer: Claws Mail 3.7.0 (GTK+ 2.14.7; x86_64-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Cloudmark-Analysis: v=1.0 c=1 a=NLZqzBF-AAAA:8 a=Mao0IXRK2MJcl4k8wTcA:9 a=sHeLEbwNsM8_3V5Paz2IF-nrRA4A:4 a=B-nnpCfjYkIA:10 a=_dQi-Dcv4p4A:10
X-Virus-Scanned: ClamAV 0.94.2/9372/Tue May 19 16:28:03 2009 on bifrost
X-Virus-Status: Clean

On Mon, 18 May 2009 03:13:03 +0200
Thomas Bohn <thomas@bohnomat.de> wrote:
> When I start zsh in urxvt and use the history or tab I get sometimes a 
> line like this:
> 
> thomas@proton ~ % ^[[A^[[A^[[A^[[A
> 
> When I hit enter I see the command I "typed" in and the command is 
> executed.

That's the up arrow being inserted into the buffer instead of (or
possibly in addition to) being interpreted by the shell.  I can't tell
from your description whether history is working, or you get that
instead, and if so what happens when you type a command.  If the order
is this:

- shell starts
- the prompt appears (here?)
- you type up arrow
- (or does the prompt appear here?)
- the ^[[A appear in the command line
- nothing else happens for a bit
- eventually the history moves up the number of lines for which you hit
  up arrow 
- the display is replaced with the appropriate line

then nothing fundamentally is wrong; something's just taking a long time
to start.

If that's not what happens, please describe in at least as much detail
what is happening.  It could be the shell is not switching the terminal
mode at the right point.

If the display doesn't change, i.e. you're really stuck with the ^[[A
until you hit "enter", it sounds like urxvt isn't updating the display.
Does typing ^L (control-L) redisplay it properly?

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


From zsh-users-return-5598-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 19 12:47:45 2002
Return-Path: <zsh-users-return-5598-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7867 invoked from network); 19 Dec 2002 12:47:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Dec 2002 12:47:44 -0000
Received: (qmail 19247 invoked by alias); 19 Dec 2002 12:47:32 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5598
Received: (qmail 19235 invoked from network); 19 Dec 2002 12:47:31 -0000
Date: Thu, 19 Dec 2002 13:47:27 +0100
From: Phil Pennock <Phil.Pennock@globnix.org>
To: Borzenkov Andrey <Andrey.Borzenkov@siemens.com>
Cc: 'Aidan Kehoe' <kehoea@parhasard.net>, zsh-users@sunsite.dk
Subject: Re: Dynamically adding to $mailpath?
Message-ID: <20021219134727.A9941@globnix.org>
Mail-Followup-To: Borzenkov Andrey <Andrey.Borzenkov@siemens.com>,
	'Aidan Kehoe' <kehoea@parhasard.net>, zsh-users@sunsite.dk
References: <15873.44013.976882.301072@gargle.gargle.HOWL> <6134254DE87BD411908B00A0C99B044F03A0B5AC@MOWD019A>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <6134254DE87BD411908B00A0C99B044F03A0B5AC@MOWD019A>; from Andrey.Borzenkov@siemens.com on Thu, Dec 19, 2002 at 02:42:23PM +0300
X-Disclaimer: Any views expressed in this message, where not explicitly
	attributed otherwise, are mine and mine alone.  Such views
	do not necessarily coincide with those of any organisation
	or company with which I am or have been affiliated.

On 2002-12-19 at 14:42 +0300, Borzenkov Andrey wrote:
> mailpath=((${$(echo ~/mail/*.spool(N))//(#m)*/$MATCH?You have new mail in
> ${MATCH:r:t}}))
> 
> should work though. Unfortunately you still need one fork (echo) unless I
> miss some obvious way to treat result of nested globbing as array.

What I myself actually do is use a couple of temporary variables.

	set -A _foo ~/Mail/Lists/*~*.lock(.) # not D -- don't check .meta etc
	set -A _bar ~/Maildir/.*(/)
	mailpath=( ${MAIL}
                ~/Maildir?"New mail in ~/Maildir"
		"${^_bar[@]//(#m).*/$MATCH?New mail in $MATCH}"
		"${^_foo[@]//(#m)*/$MATCH?You have new mail in ${MATCH:t}}" )
	unset _foo _bar

-- 
"We've got a patent on the conquering of a country through the use of force.
 We believe in world peace through extortionate license fees." -- Andy Forster


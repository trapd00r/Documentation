From zsh-workers-return-27796-mason-zsh=primenet.com.au@zsh.org Mon Mar 15 17:48:59 2010
Return-Path: <zsh-workers-return-27796-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25773 invoked by alias); 15 Mar 2010 17:48:59 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27796
Received: (qmail 1610 invoked from network); 15 Mar 2010 17:48:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.219.210 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=ZZvEVH9TVk7IihMfdPVzLzrKjXCqQ79isqCTv/gtTwQ=;
        b=srogLb2yjM4jfrCtn5bvhaeclFIbA3M8TRgy/96NPBmhB6jsa/OEWeWLIBU1jRW1F+
         cDsBqvpr0TIaSCn9JatyyZ6fglc+k/BeuBz8at4Lfe4xT3qaSBvOWAYngt8SbhyPevxG
         Aj8Oyw7SJVbcRpnEY/ZBmVwa6gEMa0eK/0X64=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=mWbDDrvrw4C2gxQUUEZdZT58+RjgXrYuqUEGP+nnMhOp6lURIauASDFInBBx1HF7Nx
         YsUh7fO4DzROPPzlmbPsxgnv6agV0VUKGtixjldA2T59dZpD5qus22drFXRfRzFGL8Or
         y+DVULt7DUDJqM32UaMYD8qGLuPfYSG8vpiC0=
MIME-Version: 1.0
In-Reply-To: <878w9xldox.fsf@gmail.com>
References: <878w9xldox.fsf@gmail.com>
Date: Fri, 12 Mar 2010 17:26:05 +0100
Message-ID: <237967ef1003120826t7fc23c7avd312b4607e88abc@mail.gmail.com>
Subject: Re: Obscure crash on hash -d
From: Mikael Magnusson <mikachu@gmail.com>
To: Christian Neukirchen <chneukirchen@gmail.com>
Cc: zsh-workers@zsh.org
Content-Type: text/plain; charset=UTF-8

On 12 March 2010 17:14, Christian Neukirchen <chneukirchen@gmail.com> wrote:
> Hello,
>
> by accident, I just stumbled over this:
>
> % uname -a
> Linux zorya 2.6.32-ARCH #1 SMP PREEMPT Tue Feb 23 19:43:46 CET 2010 x86_64 Genuine Intel(R) CPU U4100 @ 1.30GHz GenuineIntel GNU/Linux
>
> % echo $ZSH_VERSION $ZSH_PATCHLEVEL
> 4.3.10 1.4705
>
> % hash -d ~=x
> hash: invalid character in directory name: ~
> zsh: segmentation fault  zsh
>
> (gdb) bt
> #0  0x000000000041189b in ?? ()
> #1  0x0000000000416596 in bin_hash ()
> #2  0x000000000042088f in execbuiltin ()
> #3  0x0000000000428b53 in ?? ()
> #4  0x0000000000428ed6 in ?? ()
> #5  0x0000000000429286 in ?? ()
> #6  0x000000000042a577 in execlist ()
> #7  0x000000000042a7e3 in execode ()
> #8  0x000000000043ce48 in loop ()
> #9  0x000000000043dc8e in zsh_main ()
> #10 0x00007ffff73c7b6d in __libc_start_main () from /lib/libc.so.6
> #11 0x000000000040d8a9 in _start ()
>
> (I tried to see if I could define ~~ to mean something.)

This is already fixed in cvs, by 27675.
http://www.zsh.org/mla/workers/2010/msg00127.html

-- 
Mikael Magnusson


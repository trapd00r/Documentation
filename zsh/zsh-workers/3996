From zsh-workers-request@math.gatech.edu Mon May 25 02:25:11 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9187 invoked from network); 25 May 1998 02:25:10 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 25 May 1998 02:25:10 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id WAA25616;
	Sun, 24 May 1998 22:16:11 -0400 (EDT)
Resent-Date: Sun, 24 May 1998 22:16:11 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980524191600.ZM10165@candle.brasslantern.com>
Date: Sun, 24 May 1998 19:16:00 -0700
In-Reply-To: <199805241738.MAA25692@hzoli.home>
Comments: In reply to Zoltan Hidvegi <hzoli@cs.elte.hu>
        "Re: PWD parameter" (May 24, 12:38pm)
References: <199805241738.MAA25692@hzoli.home>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Zoltan Hidvegi <hzoli@cs.elte.hu>, zsh-workers@math.gatech.edu
Subject: Re: PWD parameter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"qe6092.0.BG6.gHDQr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3996
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On May 24, 12:38pm, Zoltan Hidvegi wrote:
} Subject: Re: PWD parameter
}
} Note that PWD can be unset even without my patch after typeset +r PWD.

Hmm, and it doesn't become set again upon "cd".  That, at least, I'd say
is (was) a bug, though I suppose it might be useful in some rare cases.

} And right now you can unset any writable special parameters.

I don't really have a problem with that, in the general case.

} It is always good to reduce the number of special parameters, since they
} are more complicated to handle in various places

I'd definitely agree that we shouldn't be *increasing* the number of special
paramters.  Do the ones that are already there very often need handling that
they don't already get?

} and sometimes special
} parameters behave differently from non-special parameters.

Chuckle.  Well, yes; I imagine that's why they're called "special".

} Looks like you'd like to ignore any changes to PWD, or at least when you
} assign it you'd like to check that the assigned value is correct.

The latter, but I wouldn't go so far in defining "correct" as to require
that `cd $PWD` and `cd ~+` put you in the same place -- just that both
ought to succeed.

This is probably wandering farther into philosophy than it's worth ....

} This is exacly how zsh behaves after typeset +r PWD.

Not quite.  For example, my $HOME is /home/schaefer, but that's really a
symlink to /extra/home/schaefer.  In zsh 3.0.5, if I do

	cd $HOME
	typeset +r PWD
	unset PWD
	PWD=/extra/home/schaefer
	echo $PWD

then what I get back is /home/schaefer.  *That* seems a bit odd.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


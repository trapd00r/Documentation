From zsh-users-return-9775-mason-zsh=primenet.com.au@sunsite.dk Sun Dec 11 14:21:50 2005
Return-Path: <zsh-users-return-9775-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11708 invoked from network); 11 Dec 2005 14:21:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Dec 2005 14:21:48 -0000
Received: (qmail 85189 invoked from network); 11 Dec 2005 14:21:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Dec 2005 14:21:37 -0000
Received: (qmail 5205 invoked by alias); 11 Dec 2005 14:21:31 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9775
Received: (qmail 5195 invoked from network); 11 Dec 2005 14:21:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 11 Dec 2005 14:21:30 -0000
Received: (qmail 84101 invoked from network); 11 Dec 2005 14:21:30 -0000
Received: from mail.interzet.ru (85.249.228.200)
  by a.mx.sunsite.dk with SMTP; 11 Dec 2005 14:21:30 -0000
Received: from rgo.zethost.net ([192.168.156.29])
	by mail.interzet.ru (8.13.5/8.13.5) with SMTP id jBBELTcB015167
	for <zsh-users@sunsite.dk>; Sun, 11 Dec 2005 17:21:29 +0300 (MSK)
Date: Sun, 11 Dec 2005 17:21:35 +0000
From: rgo <rgo@mail.interzet.ru>
To: zsh-users@sunsite.dk
Subject: job control from script
Message-Id: <20051211172135.0f1caefc.rgo@mail.interzet.ru>
X-Mailer: Sylpheed version 2.0.4 (GTK+ 2.6.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit

Hi all. I wrote a little script, but I cannot to learn him to kill all his childs on SIGINT.
#script:
#!/bin/zsh
setopt MONITOR
function TRAPINT () {
    kill %
    return (( $1+128 ))
}
if [[ $1 == "start" ]]; then
    for (( i=0; i<$2; i++ )); do
        $0 dowork
    done
fi
# ... some long time stuff ...

#----end script

Why `kill %' doesn't work? And `kill %NUM'? And how can I fetch job list for use in script?


From zsh-users-return-3644-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 26 06:41:01 2001
Return-Path: <zsh-users-return-3644-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15391 invoked from network); 26 Feb 2001 06:41:00 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Feb 2001 06:41:00 -0000
Received: (qmail 15635 invoked by alias); 26 Feb 2001 06:40:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3644
Received: (qmail 15624 invoked from network); 26 Feb 2001 06:40:33 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010226063859.ZM4506@candle.brasslantern.com>
Date: Mon, 26 Feb 2001 06:38:59 +0000
In-Reply-To: <87elwvvw2f.fsf@lynx.ionific.com>
Comments: In reply to Hannu Koivisto <azure@iki.fi>
        "How to create unnamed temporary arrays?" (Feb 19, 11:52am)
References: <87elwvvw2f.fsf@lynx.ionific.com> 
	<200102190955.KAA10015@beta.informatik.hu-berlin.de> 
	<87snl9teqa.fsf@lynx.ionific.com> 
	<Pine.SV4.4.20.0102202132470.24316-100000@itsrm2.mow.siemens.ru>
In-Reply-To: <200102190955.KAA10015@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: How to create unnamed temporary arrays?" (Feb 19, 10:55am)
In-Reply-To: <87snl9teqa.fsf@lynx.ionific.com>
Comments: In reply to Hannu Koivisto <azure@iki.fi>
        "Re: How to create unnamed temporary arrays?" (Feb 20,  8:02pm)
In-Reply-To: <Pine.SV4.4.20.0102202132470.24316-100000@itsrm2.mow.siemens.ru>
Comments: In reply to Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
        "Re: How to create unnamed temporary arrays?" (Feb 20,  9:38pm)
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-users@sunsite.dk
Subject: Re: How to create unnamed temporary arrays?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Feb 19, 11:52am, Hannu Koivisto wrote:
} Subject: How to create unnamed temporary arrays?
}
} I'm currently using something like this to list the base names of
} files in /usr/local/etc/packages/ directory, each name on its own
} line:
} 
} echo ${(F)$(echo /usr/local/etc/packages/*(.:t:r))}
} 
} This has the obvious problem that it doesn't work if filenames have
} spaces in them.

There was a discussion of exactly this subject on zsh-users in December.
Start with

    http://www.zsh.org/mla/users/2000/msg00728.html

(The canonical way to access that should be
    http://www.zsh.org/cgi-bin/mla/redirect?USERNUMBER=3560
but the redirector doesn't seem to be working right now.)

On Feb 20,  9:38pm, Andrej Borsenkow wrote:
} Subject: Re: How to create unnamed temporary arrays?
}
} The idea I had today (in relation to other things) was to introduce new
} syntax, something like
} 
} ${foo-(bar baz)}
} 
} (note braces).

You mean the parens?

The problem with that is that it's semantically incompatible with syntax
that is parseable by standard sh, in which the parens would not have any
special meaning in that expression.  (Zsh's other overloadings of parens
have been to introduce them where they'd actually cause a syntax error
in sh.)  The above would have to be combined with some other signifier,
such as a new parameter flag, or an option.

The real issue of course is that there's no way to do filename generation
within a parameter expansion without resorting to command substitution.
Even given a syntax for embedding an array construction within the ${...},
you can't accomplish what's being asked for in 3560 and 3630 unless you
can also force a glob.

So the best mechanism for creating an "anonymous array" is probably:

    "${(ps:\0:)$(print -nN ...)}"

where `...' is the glob expression or whatever, which of course can be
optimized depending on what you plan to do with the array.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-16817-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 12 18:17:26 2002
Return-Path: <zsh-workers-return-16817-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5433 invoked from network); 12 Mar 2002 18:17:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 12 Mar 2002 18:17:25 -0000
Received: (qmail 18774 invoked by alias); 12 Mar 2002 18:17:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16817
Received: (qmail 18759 invoked from network); 12 Mar 2002 18:17:17 -0000
Date: Tue, 12 Mar 2002 13:17:13 -0500
From: Clint Adams <clint@zsh.org>
To: Sven Wischnowsky <wischnow@berkom.de>
Cc: zsh-workers@sunsite.dk
Subject: Re: Y test failures (zpty)
Message-ID: <20020312181713.GA14194@dman.com>
References: <20020311053241.GA9027@dman.com> <1020311182942.ZM27214@candle.brasslantern.com> <20020311190231.GA21327@dman.com> <1020311192523.ZM27256@candle.brasslantern.com> <15501.49040.499816.469598@wischnow.berkom.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <15501.49040.499816.469598@wischnow.berkom.de>
User-Agent: Mutt/1.3.27i

> I once had a similar problem on that Digital Unix box.  It turned out
> that for some reason a /dev/ptyXX was free but the corresponding
> /dev/ttyXX was not writable by anyone else than root.  That made
> get_pty() fail, of course.
> 
> Maybe we should change that function to re-try /dev/pty's in that
> case?  Haven't seen that problem anywhere else, though.

I don't know about Digital Unix, but looking at the sources for
OpenSSH, modemu, and rxvt-ml, I see that OSF/1 has something called
openpty().

Also, there is grantpt() and unlockpt(), getpty(), /dev/ptmx, /dev/ptc
(AIX), /dev/ptym/clone, and various sets of static /dev/pty.+ device
nodes.

All three programs mentioned above use build-time decisions, so I am
confused as to how binaries are portable between systems that do and do
not support Unix98 pty's.


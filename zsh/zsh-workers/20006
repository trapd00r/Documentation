From zsh-workers-return-20006-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 02 09:43:50 2004
Return-Path: <zsh-workers-return-20006-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14770 invoked from network); 2 Jun 2004 09:43:48 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 2 Jun 2004 09:43:48 -0000
Received: (qmail 12978 invoked from network); 2 Jun 2004 09:43:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Jun 2004 09:43:38 -0000
Received: (qmail 13529 invoked by alias); 2 Jun 2004 09:43:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20006
Received: (qmail 13506 invoked from network); 2 Jun 2004 09:43:33 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 2 Jun 2004 09:43:30 -0000
Received: (qmail 12785 invoked from network); 2 Jun 2004 09:43:30 -0000
Received: from tantale.fifi.org (root@216.27.190.146)
  by a.mx.sunsite.dk with SMTP; 2 Jun 2004 09:43:27 -0000
Received: from ceramic.fifi.org (mail@ceramic.fifi.org [216.27.190.147])
	by tantale.fifi.org (8.9.3p2/8.9.3/Debian 8.9.3-21) with ESMTP id CAA31651;
	Wed, 2 Jun 2004 02:43:17 -0700
Received: from phil by ceramic.fifi.org with local (Exim 4.22)
	id 1BVSHE-0003C6-JS; Wed, 02 Jun 2004 02:43:16 -0700
To: Peter Stephenson <pws@csr.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: Spring patch clean-up: HAVE_BROKEN_TCSETPGRP and backgrounded ./configure
References: <200406020925.i529Pdm8024057@news01.csr.com>
Mail-Copies-To: nobody
From: Philippe Troin <phil@fifi.org>
Date: 02 Jun 2004 02:43:16 -0700
In-Reply-To: <200406020925.i529Pdm8024057@news01.csr.com>
Message-ID: <877juqmh1n.fsf@ceramic.fifi.org>
Lines: 29
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Philippe Troin <phil@fifi.org>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Peter Stephenson <pws@csr.com> writes:

> Philippe Troin wrote:
> > Shall we consider this for inclusion?
> 
> I haven't actually tried this, but it looks reasonable.

Last time I've tried, it worked, I promise :-)

Things to test:

  ./configure                - should work

  ./configure &              - should work and not hang

  ./configure < /dev/null >& /dev/null
                             - should detect HAVE_BROKEN_TCSETPGRP
                               correctly (used to assume
                               !HAVE_BROKEN_TCSETPGRP if test ! -t 0)

  setsid ./configure         - run without a tty, should complain and
                               request to use --with[out]-tcsetpgrp

  echo ./configure | at now  - same as above

Also, the part that I have not tested: run all the above on a host for
which HAVE_BROKEN_TCSETPGRP is true...  Which arch, I dunno... BeOS maybe?

Phil.


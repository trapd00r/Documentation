From zsh-workers-return-22301-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 25 09:36:32 2006
Return-Path: <zsh-workers-return-22301-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11552 invoked from network); 25 Feb 2006 09:36:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Feb 2006 09:36:30 -0000
Received: (qmail 8952 invoked from network); 25 Feb 2006 09:36:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Feb 2006 09:36:24 -0000
Received: (qmail 11157 invoked by alias); 25 Feb 2006 09:36:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22301
Received: (qmail 11148 invoked from network); 25 Feb 2006 09:36:20 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 Feb 2006 09:36:20 -0000
Received: (qmail 8649 invoked from network); 25 Feb 2006 09:36:20 -0000
Received: from dsl3-63-249-88-2.cruzio.com (HELO dot.blorf.net) (63.249.88.2)
  by a.mx.sunsite.dk with SMTP; 25 Feb 2006 09:36:18 -0000
Received: by dot.blorf.net (Postfix, from userid 1000)
	id AD7F4B17; Sat, 25 Feb 2006 01:36:18 -0800 (PST)
Date: Sat, 25 Feb 2006 01:36:18 -0800
From: Wayne Davison <wayned@users.sourceforge.net>
To: Barton Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: problem with _expand (I think)
Message-ID: <20060225093618.GA8357@dot.blorf.net>
References: <20060224222003.GB29221@dot.blorf.net> <1140828995.123EA699@fb8.dngr.org>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="J/dobhs11T7y2rNN"
Content-Disposition: inline
In-Reply-To: <1140828995.123EA699@fb8.dngr.org>
User-Agent: Mutt/1.5.11+cvs20060126


--J/dobhs11T7y2rNN
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

On Fri, Feb 24, 2006 at 04:56:32PM -0800, Barton Schaefer wrote:
> Perhaps _expand needs to "setopt aliases"?

Probably so.  I managed to tweak _expand to avoid the problem, but I
don't know if my change is the right solution or not.  Patch attached.

..wayne..

--J/dobhs11T7y2rNN
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="alias-tweak.diff"

--- Completion/Base/Completer/_expand	21 Jan 2005 09:33:14 -0000	1.10
+++ Completion/Base/Completer/_expand	25 Feb 2006 08:28:13 -0000
@@ -85,9 +85,11 @@ if [[ "$force" = *s* ]] ||
 ###  the following expression, too.  We don't want that, but I have no
 ###  idea how to fix it.
 
+  setopt aliases
   eval 'exp=( ${${(e)exp//\\[ 	
 ]/ }//(#b)([ 	
 ])/\\$match[1]} )' 2>/dev/null
+  setopt NO_aliases
 else
   exp=( ${exp:s/\\\$/\$} )
 fi

--J/dobhs11T7y2rNN--


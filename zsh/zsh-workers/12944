From zsh-workers-return-12944-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Oct 10 09:49:12 2000
Return-Path: <zsh-workers-return-12944-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25163 invoked from network); 10 Oct 2000 09:49:10 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Oct 2000 09:49:10 -0000
Received: (qmail 25152 invoked by alias); 10 Oct 2000 09:48:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12944
Received: (qmail 25145 invoked from network); 10 Oct 2000 09:48:37 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Cosmo" <cosmo@informix.com>
Cc: <zsh-workers@sunsite.auc.dk>
Subject: RE: NCR compiler problems on NCR
Date: Tue, 10 Oct 2000 13:48:32 +0400
Message-ID: <002f01c0329f$4026fe20$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <39E2E320.DA5DC95D@informix.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400

>
> Andrej Borsenkow wrote:
> >
> > >
> > > I'm trying to make some use of an old NCR machine but I am having
> > > some trouble
> > > compiling Zsh with the native compiler. The configure script works
> > > out that there
> > > is a 64 bit type of long long and so zlong is defined as such.
>
> > Try to run zsh's configure with --disable-lfs. See --help output if I
> > misspelled it. It should prevent Zsh from searching for 64 bit
> type _unless_
> > your system happens to have 64-bit off_t or ino_t.
>
> That works, thanx a lot! Perhaps this should be added to Etc/MACHINES?
>

Better yet is a configure check that compiler can cast long long to int. As
long as you are the only person who can reproduce it - would you mind to write
a patch? Or at least would you take time to check if it works?

The relevant part is zsh_64_BIT_TYPE macro in aczsh.m4. Currently it just
checks that sizeof(long long) == 8; it is trivial to add one more check if it
can cast value to int.

cheers

-andrej


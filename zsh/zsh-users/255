From adamp@sco.COM Fri Jun 21 06:51:10 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id GAA26983 for <mason@werple.mira.net.au>; Fri, 21 Jun 1996 06:51:08 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA17336; Thu, 20 Jun 1996 16:41:17 -0400 (EDT)
Resent-Date: Thu, 20 Jun 1996 16:40:41 -0400 (EDT)
From: "Adam R. Paul" <adamp@sco.COM>
To: zsh-users@math.gatech.edu
Subject: compctl question (zsh-2.6beta20)
X-Mailer: ScoMail 3.0.Ca
MIME-Version: 1.0
Date: Thu, 20 Jun 1996 13:27:27 -0700 (PDT)
Content-Type: text/plain; charset=iso-8859-1
Message-ID:  <9606201327.aa23799@gargoyle.pdev.sco.com>
Resent-Message-ID: <"MDVPb.0.1E4.9TRon"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/255
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1354
Status: O

Hello,

	I'm having a bit of trouble getting a compctl the way I want it for 
cpio - what I have now is:
	
compctl -x 'p[1,1]' -k '(-iamcd -iamcdt -iamcdv -moldc -moldcv -dump )' - \
   'C[-1,(-iamcd|-iamcdt|-iamcdv)]' -g '*(-/)' + -g '*.cpio' -P '-I ' - \
   'c[-1,-dump]' -g '*(-/)' - 'W[1,(-moldc|-moldcv)]' -g '*(-/) -P '-O ' \
   -- cpio gcpio
   
which almost does what I want it to.  The problem is that if I type, eg:

cpio -m<tab> ~/al<tab>/sr<tab>/<tab>

it expands to:

cpio -moldc -O -O -O ~/alad/src/sys/

ie. it is prepending an '-O' for _each_ pathname completion, which is not at 
all what I want.  I can see why this is the case, but can't figure out how to 
prepend exactly one '-O' to the pathnames if the 1st argument is -moldc (also, 
why does this _not_ happen with completions on '-iamcd' ?  Is it because 
the -P binds to the *.cpio rule, not the entire completion?).  Could I instead 
have the '-O' postpended to the '-moldc' completion?

Any suggestions?

BTW, this is zsh 2.6beta20 on SCO OpenServer 5 if it matters (it shouldn't).

Blessed be,
	_Adam

-----
Adam Paul - adamp@sco.com (work), apaul@got.net (home)
SCO Engineering   Any opinions expressed here are necessarily not SCO's

"Be beautiful and I will love you," she said.
"Love me and I will be beautiful," he said.
They argued for days...
	- Somerset Winterbutton



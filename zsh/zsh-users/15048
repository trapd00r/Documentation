From zsh-users-return-15048-mason-zsh=primenet.com.au@zsh.org Wed May 05 11:55:30 2010
Return-Path: <zsh-users-return-15048-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25929 invoked by alias); 5 May 2010 11:55:30 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15048
Received: (qmail 8924 invoked from network); 5 May 2010 11:55:29 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-4.2 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_MED
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at igpm.rwth-aachen.de does not designate permitted sender hosts)
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
Content-type: TEXT/PLAIN; CHARSET=us-ascii
X-IronPort-AV: E=Sophos;i="4.52,333,1270418400";   d="scan'208";a="56313287"
Date: Wed, 05 May 2010 13:25:21 +0200 (CEST)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Reply-to: jarausch@igpm.rwth-aachen.de
Subject: Watcher script - please comment
To: zsh-users@zsh.org
Message-id: <tkrat.d90ba1177c225a6b@igpm.rwth-aachen.de>

Hi,

I'd like to start a "daemon" which notifies me if some file
is no longer accessed (e.g. by rsync from a remote host).

My simple minded solution is

#!/bin/zsh

while /bin/true; do
  if ! fuser -s $1; then break; fi
  sleep 5
done
notifier -1 -e5 -tREADY <<< $1


where the file in question is passed as a parameter.

Is there something builtin into ZSH which is more efficient / elegant.

Many thanks for a hint,
Helmut.

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany


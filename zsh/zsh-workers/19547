From zsh-workers-return-19547-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 06 18:09:37 2004
Return-Path: <zsh-workers-return-19547-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4150 invoked from network); 6 Mar 2004 18:09:36 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Mar 2004 18:09:36 -0000
Received: (qmail 20285 invoked by alias); 6 Mar 2004 18:09:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19547
Received: (qmail 20223 invoked from network); 6 Mar 2004 18:09:29 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 6 Mar 2004 18:09:29 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [193.109.254.211] by sunsite.dk (MessageWall 1.0.8) with SMTP; 6 Mar 2004 18:9:29 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-5.tower-36.messagelabs.com!1078596568!4450442
X-StarScan-Version: 5.2.5; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 23988 invoked from network); 6 Mar 2004 18:09:28 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-5.tower-36.messagelabs.com with SMTP; 6 Mar 2004 18:09:28 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i26I9SCk028501;
	Sat, 6 Mar 2004 18:09:28 GMT
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP
	id 5DE0879721B9; Sat,  6 Mar 2004 19:03:02 +0100 (CET)
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <1040306173839.ZM5329@candle.brasslantern.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <E1AzKUu-0003tz-00@techloaner2.idiomtech.com> <20040306013513.GA25297@scowler.net> <20040306160540.GW19320@pimlott.net> <1040306173839.ZM5329@candle.brasslantern.com>
To: Zsh workers <zsh-workers@sunsite.dk>
Cc: Andrew Pimlott <andrew@pimlott.net>
Subject: Re: Bug#236350: zsh: _prefix completer broken? 
Date: Sat, 06 Mar 2004 19:03:02 +0100
Message-ID: <4419.1078596182@trentino.logica.co.uk>

Bart wrote:
> 
> The add-space style does default to true, and you're seeing exactly what
> you should be seeing.  What you (and possibly the documentation) missed
> is that the add-space style applies only to the _expand and _prefix
> completers, so its default setting makes no difference if you aren't
> using one of those.

I can reproduce:
% zsh -f
% autoload -U compinit; compinit
% setopt completeinword
% zstyle ':completion:*' completer _complete _prefix
% egre<tab>foo
 gives:
% egrepfoo
  with the cursor over the f.

So where's the space?
Now set: zstyle ':completion:*' add-space true
and try again. Is it perhaps just meant to be for _expand that
add-space defaults to true?

> In both 4.2.0-pre-3 and 4.0.7, my completion style looks like this:
> 
> zstyle ':completion:*' completer \
>   _oldlist _expand _complete _match _ignored _approximate _prefix
> 
> However, 4.2.0-pre-3 never gets beyond trying _approximate.  The output

This is the bug I reported in 17846.

For now, I moved _prefix before _approximate.

Oliver


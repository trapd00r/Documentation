From zsh-workers-return-13366-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 16 16:31:34 2001
Return-Path: <zsh-workers-return-13366-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9374 invoked from network); 16 Jan 2001 16:31:33 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jan 2001 16:31:33 -0000
Received: (qmail 22274 invoked by alias); 16 Jan 2001 16:31:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13366
Received: (qmail 22263 invoked from network); 16 Jan 2001 16:31:24 -0000
Sender: kvho@sebb.bel.alcatel.be
Message-ID: <3A64767B.C5E795CC@alcatel.be>
Date: Tue, 16 Jan 2001 17:27:39 +0100
From: koen van hoof <koen.van_hoof@alcatel.be>
Reply-To: koen.van_hoof@alcatel.be
Organization: Alcatel Bell
X-Mailer: Mozilla 4.7 [en] (X11; I; SunOS 5.6 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
CC: Zsh hackers list <zsh-workers@sunsite.auc.dk>, zefram@fysh.org
Subject: Re: TERMCAP problem.
References: <000701c07fb5$7ed79680$21c9ca95@mow.siemens.ru>
Content-Type: multipart/mixed;
 boundary="------------C43907A90E7D28FA8CE84619"

This is a multi-part message in MIME format.
--------------C43907A90E7D28FA8CE84619
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Andrej Borsenkow wrote:

> >
> > TERMCAP=abc is probably not a valid termcap, but should this cause
> > a core dump ?
> >
>
> How do I know? I have not written this tgetent :-)
>
> > What value for TERMCAP should work, besides the name of a termcap file ?
> > Anyhow, if I step through the code in tgetent (termcap.c:415), it only tests
> > whether TERMCAP is set, and whether it does start witch a '/' (in
> > which case it
> > is considered a file).
> >
>
> You refer to some file outside of zsh. No idea. I repeat - crash is inside of
> tgetent; tgetent itself gets valid parameters. What happens thereafter is
> outside of zsh control. O.K., one more possibility - clash between memory
> allocation routines used in Zsh and your version of termcap.
>
> What are zsh compile options? Do you compile with --enable-zsh-mem? What is
> termcap 1.3 - does it come with SunOS? Try to recompile with standard OS
> libraries and see if it helps.
>
> -andrej

I checked previous versions of zsh, and version 3.1.2 did not have the problem.
In this version, all environment variables are first copied.
I checked "ChangeLog" and I found a change for 3.1.2 (hzoli, 3293) that explains
my problem.
Is this change still in in later releases ??

--
==========================================================
Koen Van Hoof    koen.van_hoof@alcatel.be   32 3 451 60 31
==========================================================



--------------C43907A90E7D28FA8CE84619
Content-Type: text/x-vcard; charset=us-ascii;
 name="koen.van_hoof.vcf"
Content-Transfer-Encoding: 7bit
Content-Description: Card for koen van hoof
Content-Disposition: attachment;
 filename="koen.van_hoof.vcf"

begin:vcard 
n:Van Hoof;Koen
x-mozilla-html:TRUE
adr:;;;;;;
version:2.1
email;internet:koen.van_hoof@alcatel.be
x-mozilla-cpt:;0
fn:Koen Van Hoof
end:vcard

--------------C43907A90E7D28FA8CE84619--


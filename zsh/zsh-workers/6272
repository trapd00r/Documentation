From zsh-workers-return-6272-mason-zsh=primenet.com.au@sunsite.auc.dk Wed May 12 12:41:44 1999
Return-Path: <zsh-workers-return-6272-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4245 invoked from network); 12 May 1999 12:41:43 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 May 1999 12:41:43 -0000
Received: (qmail 671 invoked by alias); 12 May 1999 12:41:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6272
Received: (qmail 659 invoked from network); 12 May 1999 12:41:26 -0000
Message-Id: <9905121217.AA21359@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: PATCH: rlim_t = unsigned long
Date: Wed, 12 May 1999 14:17:04 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

I don't know how this got missed out, but I know who I suspect most.

--- Src/Builtins/rlimits.c.rl2	Wed May  5 09:34:36 1999
+++ Src/Builtins/rlimits.c	Wed May 12 13:50:10 1999
@@ -112,9 +112,15 @@
             else
 		printf("%lldkB\n", val / 1024L);
 #  else
+#   ifdef RLIM_T_IS_UNSIGNED
+		printf("%luMB\n", val / (1024L * 1024L));
+            else
+		printf("%lukB\n", val / 1024L);
+#   else
 		printf("%ldMB\n", val / (1024L * 1024L));
             else
 		printf("%ldkB\n", val / 1024L);
+#   endif /* RLIM_T_IS_UNSIGNED */
 #  endif /* RLIM_T_IS_LONG_LONG */
 # endif /* RLIM_T_IS_QUAD_T */
 	}

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


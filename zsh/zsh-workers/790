From zsh-workers-request@euclid.skiles.gatech.edu  Sat Mar  2 06:01:47 1996
Received: from euclid.skiles.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with ESMTP id GAA09720 for <mason@werple.mira.net.au>; Sat, 2 Mar 1996 06:01:42 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id NAA07867; Fri, 1 Mar 1996 13:39:58 -0500 (EST)
Resent-Date: Fri, 1 Mar 1996 13:39:58 -0500 (EST)
X400-Received:  
 by mta bnr.ca in /PRMD=BNR/ADMD=TELECOM.CANADA/C=CA/; Relayed; Fri, 1 Mar 1996 13:26:43 -0500 
X400-Received:  
 by /PRMD=BNR/ADMD=TELECOM.CANADA/C=CA/; Relayed; Fri, 1 Mar 1996 12:57:51 -0500 
X400-Received:  
 by /PRMD=BNR/ADMD=TELECOM.CANADA/C=CA/; Relayed; Fri, 1 Mar 1996 12:57:00 -0500 
Date:  Fri, 1 Mar 1996 12:57:00 -0500 
X400-Originator:  /dd.id=1569151/g=alain/i=a/s=caron/@bnr.ca 
X400-MTS-Identifier:  
 [/PRMD=BNR/ADMD=TELECOM.CANADA/C=CA/;bcars520.b.695:01.02.96.17.57.51] 
X400-Content-Type:  P2-1984 (2) 
Content-Identifier:  zsh core dump 
From: "alain (a.) caron" <alainc@bnr.ca>
Sender: "alain (a.) caron" <alainc@bnr.ca>
Message-ID:  <"2758 Fri Mar  1 13:01:19 1996"@bnr.ca> 
To: zsh-workers@math.gatech.edu
Subject:  zsh core dump 
Resent-Message-ID: <"tgIJD.0.rw1.zHqDn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/790
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

	I experienced a zsh crash when trying to redefine some commands
	such that they display some information when the terminal is a
	xterm.  For example, if a do "vi somefile", then the window title
	is changed to "vi somefile".  Here is how I did it:

# this defines specific function to allow the title bar to be modified when
# the terminal is a xterm.

if [ "$TERM" = "xterm" ]; then
   function xframe()
   {
		echo -n "]2;$*";
	}
	function xicon()
	{
		echo -n "]1;$*";
	}
	function xtitle()
	{
		xframe $*
		xicon $*
	}

	for com in vi view less more ;
	do
		eval "function $com() { xtitle $com \$*; command $com \$*; }"
	done
fi


Basicly, when I type vi, the function vi is invoked which changes the
title of the window and then invoke the vi command.
The problem is that after the vi command is finished, zsh crashes and
dumps a core.  This usually happens not after the first time I invoke
vi but after a few times, usually 5 or so.

I started zsh with the -f option and then sourced the above code to
make sure there were nothing in my .zshrc or .zshenv causing this.

Here is the output of reporter:


# START zsh saveset
# uname:  HP-UX bmtlh242 A.09.05 A 9000/715 2008443271 two-user license

# Aliases.

alias run-help='man'
alias which-command='whence'

# Key bindings.

bindkey -r "^@"
bindkey -r "^A"
bindkey -r "^B"
bindkey -r "^C"
bindkey -r "^D"
bindkey -r "^E"
bindkey -r "^F"
bindkey -r "^G"
bindkey -r "^H"
bindkey -r "^I"
bindkey -r "^J"
bindkey -r "^K"
bindkey -r "^L"
bindkey -r "^M"
bindkey -r "^N"
bindkey -r "^O"
bindkey -r "^P"
bindkey -r "^Q"
bindkey -r "^R"
bindkey -r "^S"
bindkey -r "^T"
bindkey -r "^U"
bindkey -r "^V"
bindkey -r "^W"
bindkey -r "^X"
bindkey -r "^Y"
bindkey -r "^Z"
bindkey -r "\e"
bindkey -r "^_"
bindkey -r "^?"
bindkey -r "^X^B"
bindkey -r "^X^F"
bindkey -r "^X^J"
bindkey -r "^X^K"
bindkey -r "^X^N"
bindkey -r "^X^O"
bindkey -r "^X^U"
bindkey -r "^X^V"
bindkey -r "^X^X"
bindkey -r "^X*"
bindkey -r "^XG"
bindkey -r "^Xg"
bindkey -r "^Xr"
bindkey -r "^Xs"
bindkey -r "^Xu"
bindkey -r "\e^D"
bindkey -r "\e^G"
bindkey -r "\e^H"
bindkey -r "\e^I"
bindkey -r "\e^J"
bindkey -r "\e^L"
bindkey -r "\e^M"
bindkey -r "\e^_"
bindkey -r "\e "
bindkey -r "\e!"
bindkey -r "\e\""
bindkey -r "\e$"
bindkey -r "\e'"
bindkey -r "\e-"
bindkey -r "\e."
bindkey -r "\e0"
bindkey -r "\e1"
bindkey -r "\e2"
bindkey -r "\e3"
bindkey -r "\e4"
bindkey -r "\e5"
bindkey -r "\e6"
bindkey -r "\e7"
bindkey -r "\e8"
bindkey -r "\e9"
bindkey -r "\e<"
bindkey -r "\e>"
bindkey -r "\e?"
bindkey -r "\eA"
bindkey -r "\eB"
bindkey -r "\eC"
bindkey -r "\eD"
bindkey -r "\eF"
bindkey -r "\eG"
bindkey -r "\eH"
bindkey -r "\eL"
bindkey -r "\eN"
bindkey -r "\eP"
bindkey -r "\eQ"
bindkey -r "\eR"
bindkey -r "\eS"
bindkey -r "\eT"
bindkey -r "\eU"
bindkey -r "\eW"
bindkey -r "\e[A"
bindkey -r "\e[B"
bindkey -r "\e[C"
bindkey -r "\e[D"
bindkey -r "\e_"
bindkey -r "\ea"
bindkey -r "\eb"
bindkey -r "\ec"
bindkey -r "\ed"
bindkey -r "\ef"
bindkey -r "\eg"
bindkey -r "\eh"
bindkey -r "\el"
bindkey -r "\en"
bindkey -r "\ep"
bindkey -r "\eq"
bindkey -r "\er"
bindkey -r "\es"
bindkey -r "\et"
bindkey -r "\eu"
bindkey -r "\ew"
bindkey -r "\ex"
bindkey -r "\ey"
bindkey -r "\ez"
bindkey -r "\e|"
bindkey -r "\e^?"

bindkey "^@"	set-mark-command
bindkey "^A"	beginning-of-line
bindkey "^B"	backward-char
bindkey "^C"	undefined-key
bindkey "^D"	delete-char-or-list
bindkey "^E"	end-of-line
bindkey "^F"	forward-char
bindkey "^G"	send-break
bindkey "^H"	backward-delete-char
bindkey "^I"	expand-or-complete
bindkey "^J"	accept-line
bindkey "^K"	kill-line
bindkey "^L"	clear-screen
bindkey "^M"	accept-line
bindkey "^N"	down-line-or-history
bindkey "^O"	accept-line-and-down-history
bindkey "^P"	up-line-or-history
bindkey "^Q"	push-line
bindkey "^R"	history-incremental-search-backward
bindkey "^S"	history-incremental-search-forward
bindkey "^T"	transpose-chars
bindkey "^U"	kill-whole-line
bindkey "^V"	quoted-insert
bindkey "^W"	backward-kill-word
bindkey "^X"	prefix
bindkey "^Y"	yank
bindkey "^Z"	undefined-key
bindkey "\e"	prefix
bindkey "^_"	undo
bindkey "^?"	backward-delete-char
bindkey "^X^B"	vi-match-bracket
bindkey "^X^F"	vi-find-next-char
bindkey "^X^J"	vi-join
bindkey "^X^K"	kill-buffer
bindkey "^X^N"	infer-next-history
bindkey "^X^O"	overwrite-mode
bindkey "^X^U"	undo
bindkey "^X^V"	vi-cmd-mode
bindkey "^X^X"	exchange-point-and-mark
bindkey "^X*"	expand-word
bindkey "^XG"	list-expand
bindkey "^Xg"	list-expand
bindkey "^Xr"	history-incremental-search-backward
bindkey "^Xs"	history-incremental-search-forward
bindkey "^Xu"	undo
bindkey "\e^D"	list-choices
bindkey "\e^G"	send-break
bindkey "\e^H"	backward-kill-word
bindkey "\e^I"	self-insert-unmeta
bindkey "\e^J"	self-insert-unmeta
bindkey "\e^L"	clear-screen
bindkey "\e^M"	self-insert-unmeta
bindkey "\e^_"	copy-prev-word
bindkey "\e "	expand-history
bindkey "\e!"	expand-history
bindkey "\e\""	quote-region
bindkey "\e$"	spell-word
bindkey "\e'"	quote-line
bindkey "\e-"	neg-argument
bindkey "\e."	insert-last-word
bindkey "\e0"	digit-argument
bindkey "\e1"	digit-argument
bindkey "\e2"	digit-argument
bindkey "\e3"	digit-argument
bindkey "\e4"	digit-argument
bindkey "\e5"	digit-argument
bindkey "\e6"	digit-argument
bindkey "\e7"	digit-argument
bindkey "\e8"	digit-argument
bindkey "\e9"	digit-argument
bindkey "\e<"	beginning-of-buffer-or-history
bindkey "\e>"	end-of-buffer-or-history
bindkey "\e?"	which-command
bindkey "\eA"	accept-and-hold
bindkey "\eB"	backward-word
bindkey "\eC"	capitalize-word
bindkey "\eD"	kill-word
bindkey "\eF"	forward-word
bindkey "\eG"	get-line
bindkey "\eH"	run-help
bindkey "\eL"	down-case-word
bindkey "\eN"	history-search-forward
bindkey "\eP"	history-search-backward
bindkey "\eQ"	push-line
bindkey "\eR"	toggle-literal-history
bindkey "\eS"	spell-word
bindkey "\eT"	transpose-words
bindkey "\eU"	up-case-word
bindkey "\eW"	copy-region-as-kill
bindkey "\e[A"	up-line-or-history
bindkey "\e[B"	down-line-or-history
bindkey "\e[C"	forward-char
bindkey "\e[D"	backward-char
bindkey "\e_"	insert-last-word
bindkey "\ea"	accept-and-hold
bindkey "\eb"	backward-word
bindkey "\ec"	capitalize-word
bindkey "\ed"	kill-word
bindkey "\ef"	forward-word
bindkey "\eg"	get-line
bindkey "\eh"	run-help
bindkey "\el"	down-case-word
bindkey "\en"	history-search-forward
bindkey "\ep"	history-search-backward
bindkey "\eq"	push-line
bindkey "\er"	toggle-literal-history
bindkey "\es"	spell-word
bindkey "\et"	transpose-words
bindkey "\eu"	up-case-word
bindkey "\ew"	copy-region-as-kill
bindkey "\ex"	execute-named-cmd
bindkey "\ey"	yank-pop
bindkey "\ez"	execute-last-named-cmd
bindkey "\e|"	vi-goto-column
bindkey "\e^?"	backward-kill-word

# Completions.

compctl -b  bindkey
compctl -c  builtin
compctl -v  export
compctl -o  setopt
compctl -v  typeset
compctl -v  unset
compctl -o  unsetopt
compctl -v  vared
compctl -c  which

# Undefined functions.


# Defined functions.


# Limits.

limit filesize        3m
limit datasize        78m
limit stacksize       8m
limit descriptors     512

# Non-array variables.

TERMCAP=''
TERM='xterm'
ARGC="0"
BAUD="0"
CDPATH=""
COCOS_DIR="/bnr/users/148/2/alainc/Mail"
COCOS_MTA="UCMTB4"
COLUMNS="80"
CVSROOT="/bnr/projects/dcr/cvs"
DIRSTACKSIZE="-1"
DISPLAY="bmtlh242:0.0"
DISPLAYCLASS="HP-R4-K1"
DISPLAYTYPE="local"
EDITOR="gnuemacs"
EGID="1500"
ERRNO="9"
EUID="25476"
FCEDIT="vi"
FIGNORE=""
FM_PROGNAME="builder"
FPATH="/bnr/users/148/2/alainc/lib/zsh.func"
GID="1500"
GS_LIB="/bnr/tools/6U/ghostscript"
HELPDIR="/bnr/users/148/2/alainc/lib/zsh.help"
HISTCHARS="!^#"
HISTSIZE="30"
HOME="/bnr/users/148/2/alainc"
HOST="bmtlh242"
HOSTTYPE="hp9000s700"
KEYBD="hp-k1"
KEYTIMEOUT="40"
LANG="french.iso88591"
LC_COLLATE="french.iso88591"
LC_CTYPE="french.iso88591"
LESSCHARSET="latin1"
LESSOPEN="|lesspipe.sh %s"
LINENO="294"
LINES="24"
LISTMAX="100"
LITHISTSIZE="5"
LOGCHECK="60"
LOGNAME="alainc"
LPDEST="lp10"
LPUNAME="alainc 6U43 Alain Caron"
MAIL="/usr/mail/alainc"
MAILCHECK="60"
MAILPATH=""
MANPATH="/usr/man:/bnr/man:/usr/contrib/man:/bnr/contrib/man:/bnr/users/148/2/alainc/man:/bnr/tools/6U/man:/bnr/3rdparty/emacs/man:/bnr/3rdparty/cvs/man:/bnr/projects/dcr/man:/usr/pde/perl/man"
NNTPSERVER="mtlnews0"
NULLCMD="cat"
OLDPWD="/bnr/users/148/2/alainc"
OPTARG=""
OPTIND="1"
PAGER="less"
PATH="/bnr/3rdparty/cvs/bin:/bin:/usr/vue/bin:/usr/bin/X11:/usr/bin:/bnr/bin:/bnr/tools/bin:/bnr/3rdparty/builder/bin:/usr/contrib/bin:/bnr/users/148/2/alainc/bin:/bnr/3rdparty/pure/purify-3.0-hpux:/usr/contrib/bin/X11:/bnr/tools/6U/bin:/bnr/tools/news/bin:/usr/pde/perl/bin/hppa:/bnr/projects/dcr/tools:/bnr/projects/dcr/bin:/bnr/3rdparty/emacs/bin:/bnr/contrib/bin/hppa"
PERIOD="0"
PHONELOC="MTL"
POSTEDIT=""
PPID="18118"
PROMPT="%m%# "
PROMPT2="> "
PROMPT3="?# "
PROMPT4="+ "
PS1="%m%# "
PS2="> "
PS3="?# "
PS4="+ "
PSVAR=""
PWD="/bnr/users/148/2/alainc"
RANDOM="8161"
RCSBIN="/bnr/3rdparty/cvs/bin"
READNULLCMD="more"
REPORTTIME="-1"
RPROMPT=""
RPS1=""
SAVEHIST="0"
SECONDS="3"
SHELL="/bnr/users/148/2/alainc/bin/zsh"
SHLVL="4"
SPROMPT="zsh: correct \`%R\' to \`%r\' [nyae]? "
TIMEFMT="%E real  %U user  %S system  %P %J"
TMOUT="0"
TMPPREFIX="/tmp/zsh"
TTY=""
TZ="EST5EDT"
UID="25476"
USER="alainc"
USERNAME="alainc"
VERSION="zsh 2.5.03"
VISUAL="gnuemacs"
WATCH=""
WATCHFMT="%n has %a %l from %m."
WINDOWID="71303182"
WINGZ="/bnr/3rdparty/Wingz"
WORDCHARS="*?_-.[]~=/&;!#$%^(){}<>"
Xstate="vue"
each="__hp9000s800"
ipsw_empno="1569151"
ipsw_node="bmtlh47"
status="1"
str="HP-UX bmtlh242 A.09.05 A 9000/715 2008443271 two-user license"
prompt='test%'

# Array variables.

argv=()
cdpath=()
fignore=()
fpath=(/bnr/users/148/2/alainc/lib/zsh.func)
mailpath=()
manpath=(/usr/man /bnr/man /usr/contrib/man /bnr/contrib/man /bnr/users/148/2/alainc/man /bnr/tools/6U/man /bnr/3rdparty/emacs/man /bnr/3rdparty/cvs/man /bnr/projects/dcr/man /usr/pde/perl/man)
path=(/bnr/3rdparty/cvs/bin /bin /usr/vue/bin /usr/bin/X11 /usr/bin /bnr/bin /bnr/tools/bin /bnr/3rdparty/builder/bin /usr/contrib/bin /bnr/users/148/2/alainc/bin /bnr/3rdparty/pure/purify-3.0-hpux /usr/contrib/bin/X11 /bnr/tools/6U/bin /bnr/tools/news/bin /usr/pde/perl/bin/hppa /bnr/projects/dcr/tools /bnr/projects/dcr/bin /bnr/3rdparty/emacs/bin /bnr/contrib/bin/hppa)
psvar=()
signals=(EXIT HUP INT QUIT ILL TRAP IOT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM USR1 USR2 CLD PWR VTALRM PROF IO WINCH STOP TSTP CONT TTIN TTOU ZERR DEBUG)
watch=()

# Exported variables.

export TERMCAP
export TERM
export COCOS_DIR=/bnr/users/148/2/alainc/Mail
export COCOS_MTA=UCMTB4
export COLUMNS=80
export CVSROOT=/bnr/projects/dcr/cvs
export DISPLAY=bmtlh242:0.0
export DISPLAYCLASS=HP-R4-K1
export DISPLAYTYPE=local
export EDITOR=gnuemacs
export FM_PROGNAME=builder
export FPATH=/bnr/users/148/2/alainc/lib/zsh.func
export GS_LIB=/bnr/tools/6U/ghostscript
export HELPDIR=/bnr/users/148/2/alainc/lib/zsh.help
export HOME=/bnr/users/148/2/alainc
export HOST=bmtlh242
export HOSTTYPE=hp9000s700
export KEYBD=hp-k1
export LANG=french.iso88591
export LC_COLLATE=french.iso88591
export LC_CTYPE=french.iso88591
export LESSCHARSET=latin1
export LESSOPEN=|lesspipe.sh %s
export LINES=24
export LOGNAME=alainc
export LPDEST=lp10
export LPUNAME=alainc 6U43 Alain Caron
export MAIL=/usr/mail/alainc
export MANPATH=/usr/man:/bnr/man:/usr/contrib/man:/bnr/contrib/man:/bnr/users/148/2/alainc/man:/bnr/tools/6U/man:/bnr/3rdparty/emacs/man:/bnr/3rdparty/cvs/man:/bnr/projects/dcr/man:/usr/pde/perl/man
export NNTPSERVER=mtlnews0
export PAGER=less
export PATH=/bnr/3rdparty/cvs/bin:/bin:/usr/vue/bin:/usr/bin/X11:/usr/bin:/bnr/bin:/bnr/tools/bin:/bnr/3rdparty/builder/bin:/usr/contrib/bin:/bnr/users/148/2/alainc/bin:/bnr/3rdparty/pure/purify-3.0-hpux:/usr/contrib/bin/X11:/bnr/tools/6U/bin:/bnr/tools/news/bin:/usr/pde/perl/bin/hppa:/bnr/projects/dcr/tools:/bnr/projects/dcr/bin:/bnr/3rdparty/emacs/bin:/bnr/contrib/bin/hppa
export PHONELOC=MTL
export PWD=/bnr/users/148/2/alainc
export RCSBIN=/bnr/3rdparty/cvs/bin
export SHELL=/bnr/users/148/2/alainc/bin/zsh
export SHLVL=4
export TERM=xterm
export TZ=EST5EDT
export USER=alainc
export VISUAL=gnuemacs
export WINDOWID=71303182
export WINGZ=/bnr/3rdparty/Wingz
export Xstate=vue
export ipsw_empno=1569151
export ipsw_node=bmtlh47

# Setopt.

setopt bgnice
setopt hashcmds
setopt hashdirs
setopt hashlistall
setopt notify

# END zsh saveset


From zsh-workers-return-16020-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 12 09:22:35 2001
Return-Path: <zsh-workers-return-16020-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7480 invoked from network); 12 Oct 2001 09:22:31 -0000
Received: from unknown (HELO sunsite.dk) (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 12 Oct 2001 09:22:31 -0000
Received: (qmail 25417 invoked by alias); 12 Oct 2001 09:22:03 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16020
Received: (qmail 25349 invoked from network); 12 Oct 2001 09:21:55 -0000
From: martin.ebourne@arcordia.com
Subject: Re: Very odd behaviour with zsh, maybe corruption bug
To: Bart Schaefer <schaefer@brasslantern.com>, zsh-workers@sunsite.dk
Date: Fri, 12 Oct 2001 10:19:58 +0100
Message-ID: <OF5918B3C1.F08C7DD9-ON80256AE3.003294DC@uk.jpmorgan.com>
X-MIMETrack: Serialize by Router on LON-ARCMTA-01/ARCORDIA(Release 5.0.3 (Intl)|21 March
 2000) at 10/12/2001 10:20:00 AM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii




   On Oct 11,  6:08pm, martin.ebourne@arcordia.com wrote:
   } However, using this version I've got a guaranteed sequence which
   } triggers it (maybe also on the last version, but I don't know). I

   That does in fact reproduce it on my machine as well.  You didn't Cc
   your
   message to zsh-workers -- you might want to send the above instructions
   there so somebody else can have a crack at it too.

Actually I've found a much shorter sequence too. As before execute
bizzarre.sh, but afterwards all you need is to press down, up, down and
you'll get this trace:

% ./zsh -f
gdd-odybin2% . ~/bizzarre.sh
gdd-odybin2% +_down_fn:4> [[ accept-line ==  ]]
+_down_fn:9> [[  == *
* ]]
+_down_fn:14> _searching=new-down
+_down_fn:15> zle .history-beginning-search-forward
+_down_fn:4> [[ new-up == new-up ]]
+_down_fn:9> [[ . ~/bizzarre.sh        == *
* ]]
+_down_fn:14> _searching=new-down
+_down_fn:15> zle .history-beginning-search-forward

No need to enter any other lines. Taking a guess, it would seem that the
critical bit that breaks it is the first down, where it tries to
history-beginning-search-forward, but fails with a beep. No guesses as to
why though!

Cheers,

Martin.



From zsh-workers-return-6551-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jun 09 10:42:49 1999
Return-Path: <zsh-workers-return-6551-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3093 invoked from network); 9 Jun 1999 10:42:48 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jun 1999 10:42:48 -0000
Received: (qmail 836 invoked by alias); 9 Jun 1999 10:42:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6551
Received: (qmail 828 invoked from network); 9 Jun 1999 10:42:35 -0000
Date: Wed, 9 Jun 1999 12:42:34 +0200 (MET DST)
Message-Id: <199906091042.MAA20675@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Wed, 9 Jun 1999 14:25:13 +0400
Subject: Re: PATCH: avoid history was: RE: Oliver Kiddle: compctl -l broken and function installation


Andrej Borsenkow wrote:

> zle_tricky.c  4933: [error]:   CFE1165 too few arguments in function call
>       strinbeg();

I fogot the diff for zle_tricky.c in patch 6542.

Bye
 Sven

P.S.: Sven, wake up.

diff -u os/Zle/zle_tricky.c Src/Zle/zle_tricky.c
--- os/Zle/zle_tricky.c	Wed Jun  9 10:31:15 1999
+++ Src/Zle/zle_tricky.c	Wed Jun  9 10:32:02 1999
@@ -1231,8 +1231,7 @@
 	clwpos = -1;
 	lexsave();
 	inpush(dupstrspace((char *) linptr), 0, NULL);
-	strinbeg();
-	stophist = 2;
+	strinbeg(0);
 	i = tt0 = cp = rd = ins = oins = linarr = parct = ia = 0;
 
 	/* This loop is possibly the wrong way to do this.  It goes through *
@@ -4930,8 +4929,7 @@
     inpush(dupstrspace(tmp), 0, NULL);
     line = (unsigned char *) tmp;
     ll = tl - 1;
-    strinbeg();
-    stophist = 2;
+    strinbeg(0);
     noaliases = 1;
     do {
 	ctxtlex();
@@ -6341,7 +6339,7 @@
 	tmpbuf = (char *)zhalloc(strlen(cc->str) + 5);
 	sprintf(tmpbuf, "foo %s", cc->str); /* KLUDGE! */
 	inpush(tmpbuf, 0, NULL);
-	strinbeg();
+	strinbeg(0);
 	noaliases = 1;
 	do {
 	    ctxtlex();
@@ -8099,14 +8097,13 @@
 	lexsave();
 	/* We push ol as it will remain unchanged */
 	inpush((char *) ol, 0, NULL);
-	strinbeg();
+	strinbeg(1);
 	noaliases = 1;
 	noerrs = 1;
 	exlast = inbufct;
 	do {
 	    ctxtlex();
 	} while (tok != ENDINPUT && tok != LEXERR);
-	stophist = 2;
 	while (!lexstop)
 	    hgetc();
 	/* We have to save errflags because it's reset in lexrestore. Since  *
@@ -8178,7 +8175,7 @@
 	metafy_line();
 	inpush(dupstrspace((char *) line), 0, NULL);
 	unmetafy_line();
-	strinbeg();
+	strinbeg(1);
 	pushheap();
 	do {
 	    curlincmd = incmdpos;


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


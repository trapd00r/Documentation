From zsh-workers-return-20468-mason-zsh=primenet.com.au@sunsite.dk Sat Oct 09 15:17:45 2004
Return-Path: <zsh-workers-return-20468-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12636 invoked from network); 9 Oct 2004 15:17:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Oct 2004 15:17:44 -0000
Received: (qmail 97109 invoked from network); 9 Oct 2004 15:17:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Oct 2004 15:17:37 -0000
Received: (qmail 9223 invoked by alias); 9 Oct 2004 15:17:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20468
Received: (qmail 9207 invoked from network); 9 Oct 2004 15:17:34 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Oct 2004 15:17:34 -0000
Received: (qmail 96840 invoked from network); 9 Oct 2004 15:17:33 -0000
Received: from smtpout.mac.com (17.250.248.83)
  by a.mx.sunsite.dk with SMTP; 9 Oct 2004 15:17:32 -0000
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (8.12.6/MantshX 2.0) with ESMTP id i99FHT9X012507
	for <zsh-workers@sunsite.dk>; Sat, 9 Oct 2004 08:17:29 -0700 (PDT)
Received: from [192.168.1.2] (adsl-209-30-92-88.dsl.rcsntx.swbell.net [209.30.92.88])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id i99FHRLC001950
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NO)
	for <zsh-workers@sunsite.dk>; Sat, 9 Oct 2004 08:17:28 -0700 (PDT)
Mime-Version: 1.0 (Apple Message framework v619)
To: zsh-workers@sunsite.dk
Message-Id: <546D60C2-1A06-11D9-B624-000A95A6C222@mac.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-916246687
From: Jordan Breeding <jordan.breeding@mac.com>
Subject: prompt and prompt_cr option
Date: Sat, 9 Oct 2004 10:17:27 -0500
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=BAYES_44,RCVD_IN_SORBS 
	autolearn=no version=2.63
X-Spam-Hits: 1.5


--Apple-Mail-1-916246687
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed

Hello,

I have run into the problem several times of having lines of output in 
the shell that don't have a newline and having the prompt overwrite 
them.  I did find the `setopt nopromptcr` solution but I also like 
having multiline editing always work correctly.  I thought that I would 
try and solve both problems with the following:

setopt nopromptcr
prompt='%(1l,\n,)%! %n@%m %0~ > '

but that didn't seem to do the trick.  Is there a way to force zsh to 
check to see if the last character that was printed was a newline and 
if it wasn't to just print one before it issues the carriage return?

Jordan
--Apple-Mail-1-916246687
Content-Transfer-Encoding: 7bit
Content-Type: text/enriched;
	charset=US-ASCII

<fontfamily><param>Courier</param><bigger>Hello,


I have run into the problem several times of having lines of output in
the shell that don't have a newline and having the prompt overwrite
them.  I did find the `setopt nopromptcr` solution but I also like
having multiline editing always work correctly.  I thought that I
would try and solve both problems with the following:


setopt nopromptcr

prompt='%(1l,\n,)%! %n@%m %0~ > '


but that didn't seem to do the trick.  Is there a way to force zsh to
check to see if the last character that was printed was a newline and
if it wasn't to just print one before it issues the carriage return?


Jordan</bigger></fontfamily>
--Apple-Mail-1-916246687--


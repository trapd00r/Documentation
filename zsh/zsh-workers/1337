From kaefer@aglaia.snafu.DE Wed Jun 12 22:57:09 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id WAA20090 for <mason@werple.mira.net.au>; Wed, 12 Jun 1996 22:57:06 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA29322; Wed, 12 Jun 1996 08:39:03 -0400 (EDT)
Resent-Date: Wed, 12 Jun 1996 08:39:03 -0400 (EDT)
Message-Id: <m0uTpCh-00009AC@aglaia.snafu.DE>
Subject: ${(Oi)foo} broken
To: zsh-workers@math.gatech.edu
Date: Wed, 12 Jun 1996 14:39:18 +0200 (MET DST)
From: Thorsten Meinecke <kaefer@aglaia.snafu.DE>
Organization: none. Location: Berlin, Germany
X-Mailer: ELM [version 2.4 PL23]
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
Resent-Message-ID: <"4acJq.0.4A7.cfhln"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1337
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 673
Status: O

(Still in 2.6b20.  Did nobody notice it since zsh-2.4-something-beta? :)

  % foo=(a B c); echo ${(Oi)foo}
  c a B

That should be "c B a".  Manual says, sort case-independently
in descending order.  Because the sort flags are coded as an
integer running from 0 to 4, bitwise OR won't work with 'em.

Regards,
--Thorsten


*** subst.c	1996/06/07 14:52:49	2.27
--- subst.c	1996/06/12 13:28:14
***************
*** 849,856 ****
  	    s++;
  	}
      }
!     if (sortit && casind)
! 	sortit |= (casind << 1);
  
      if (!premul)
  	premul = " ";
--- 849,856 ----
  	    s++;
  	}
      }
!     if (sortit)
! 	sortit += (casind << 1);
  
      if (!premul)
  	premul = " ";



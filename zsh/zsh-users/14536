From zsh-users-return-14536-mason-zsh=primenet.com.au@zsh.org Mon Nov 09 05:18:02 2009
Return-Path: <zsh-users-return-14536-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15604 invoked by alias); 9 Nov 2009 05:18:02 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14536
Received: (qmail 7902 invoked from network); 9 Nov 2009 05:17:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=0.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at miranda.org does not designate permitted sender hosts)
Date: Mon, 9 Nov 2009 00:11:17 -0500 (EST)
From: Andy <andy@miranda.org>
Reply-To: Andy Sisson <andy@miranda.org>
To: zsh-users@zsh.org
Subject: tweaking insert-last-word behavior
Message-ID: <Pine.LNX.4.64.0911082355440.1618@miranda.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed

Hi -

Is there some way to induce selective amnesia in 'insert-last-word'?

Specifically, I get a lot of use out of aliases like
   alias -g M='| more'

However, if my previous command was
   % grep bar foo.txt M
and I'm now breathlessly typing out my next clever interrogation of 
foo.txt, the letter "M" is never, of course, what I actually mean to 
insert when I hit 'ESC-.'

I suspect that many shell users make this mistake at least occasionally 
when a pager is invoked at the end of a command - regardless of whether 
it's aliased.

Ideally I'd love to hear that there's an undocumented 'alias' flag that 
means "invisible to insert-last-word". I presume that'd be a lousy general 
solution to the issue, however.

I assume I could remap it so it compares !$ against a list of strings like 
'M' and alternately inserts word n-1. Beyond that feeling rather kludgy, 
I'm not quite sure how to do that; it wasn't obvious to me, for instance, 
how one references the word at !(n-1) with zsh.

Maybe I'm thinking about the problem in the wrong way. Is there an easy 
solution?

Thanks,

Andy


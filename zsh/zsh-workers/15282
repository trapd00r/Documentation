From zsh-workers-return-15282-mason-zsh=primenet.com.au@sunsite.dk Fri Jul 06 10:33:20 2001
Return-Path: <zsh-workers-return-15282-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23583 invoked from network); 6 Jul 2001 10:33:16 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jul 2001 10:33:16 -0000
Received: (qmail 11372 invoked by alias); 6 Jul 2001 10:32:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15282
Received: (qmail 11345 invoked from network); 6 Jul 2001 10:32:01 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <zsh-workers@sunsite.dk>
Subject: RE: Preserve initial // in path name completion
Date: Fri, 6 Jul 2001 14:32:52 +0400
Message-ID: <004f01c10607$02c00180$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <200107060924.LAA12231@beta.informatik.hu-berlin.de>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2479.0006


>
> Currently not.  Seems like we never came aroud to implementing it, but
> it can be made quite simply, see the patch below.  It adds a style
> `preserve-prefix' which can be given a pattern and _path_files will then
> blindly keep any prefix matched by that pattern unchanged.
>

To my immense surprise even with preserve-prefix unset (but with your patch
and suitably set fake-files) and squeeze-slashes it happily completed inside
UNC paths, even respecting all matchers. Looks, like fake-files win?

> Would that be enough?

I do not quite understand but may be it even is not needed? Anyway, the only
problem. I have \\itsrm2\root$. I defined

zstyle ':completion:*' fake-files //:itsrm2 //itsrm2:root\$
zstyle ':completion:*' squeeze-slashes true

Then

(tty1)% l //i/r/t/s/zTAB
(tty1)% l //itsrm2/root\$/tools/share/z
Completing files
share/  src/
(tty1)% l //itsrm2/root\$/tools/src/zTAB
No matches for: `files' or `file'

I *do* have /tools/src/zsh:

(tty1)% l //i/r/t/s/z/s/mTAB
(tty1)% l //itsrm2/root\$/tools/src/zsh/s/m
Completing files
zsh/        zsh-4.0.x/

This obviously happens only with root$; any other share I've tried works.

-andrej


From zsh-workers-return-13314-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Dec 27 04:31:42 2000
Return-Path: <zsh-workers-return-13314-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28449 invoked from network); 27 Dec 2000 04:31:41 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Dec 2000 04:31:41 -0000
Received: (qmail 4931 invoked by alias); 27 Dec 2000 04:31:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13314
Received: (qmail 4924 invoked from network); 27 Dec 2000 04:31:31 -0000
Date: Tue, 26 Dec 2000 23:31:25 -0500
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: better killall completion
Message-ID: <20001226233125.A31760@dman.com>
References: <20001226161905.A29400@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <20001226161905.A29400@dman.com>; from schizo@debian.org on Tue, Dec 26, 2000 at 04:19:05PM -0500

This removes login shells.  Perhaps it should just strip off the leading
hyphen instead.

Index: Completion/User/_killall
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/_killall,v
retrieving revision 1.4
diff -u -r1.4 _killall
--- Completion/User/_killall	2000/12/26 21:22:49	1.4
+++ Completion/User/_killall	2000/12/27 04:21:46
@@ -3,7 +3,7 @@
 if [[ "$OSTYPE" = linux* ]]; then
   _alternative \
       'signals:: _signals -p' \
-      'processes:process:{ compadd "$expl[@]" ${${${(f)"$(_call processes-names ps ${${EUID/(#s)0(#e)/xa}//[0-9]#/} ho cmd 2> /dev/null)"//[][]/}:#(ps|COMMAND)}%%\ *} }'
+      'processes:process:{ compadd "$expl[@]" ${${${(f)"$(_call processes-names ps ${${EUID/(#s)0(#e)/xa}//[0-9]#/} ho cmd 2> /dev/null)"//[][]/}:#(ps|COMMAND|-*)}%%\ *} }'
 else
   _signals -p
 fi


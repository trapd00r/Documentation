From zsh-workers-return-11600-mason-zsh=primenet.com.au@sunsite.auc.dk Fri May 26 14:25:37 2000
Return-Path: <zsh-workers-return-11600-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1891 invoked from network); 26 May 2000 14:25:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 May 2000 14:25:26 -0000
Received: (qmail 7888 invoked by alias); 26 May 2000 14:24:59 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11600
Received: (qmail 7881 invoked from network); 26 May 2000 14:24:58 -0000
Date: Fri, 26 May 2000 15:24:25 +0100
From: Peter Stephenson <pws@cambridgesiliconradio.com>
Subject: PATCH: (very) bad syntax error checking
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FV6007MP80O0S@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

It's rather late in the day to come across problems like this.


% cat test.zsh
if true; # then missing
  print hello
fi

print This line should not be executed.
% zsh -f ./test.zsh
./test.zsh:3: parse error near `fi'
This line should not be executed.


Yuk.  This is the way people accidentally delete all the files on their
disks, etc.  I can't believe this has always been there --- I suspect it
must be part of the parsing changes that we've somehow all missed.  I won't
be releasing anything until this gets fixed.  If it's a lot of code to fix
(I would guess it's just an errflag test or two) I'll hold off for another
week.

-- 
Peter Stephenson <pws@cambridgesiliconradio.com>
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


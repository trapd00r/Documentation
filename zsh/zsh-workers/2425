From zsh-workers-request@euclid.skiles.gatech.edu  Mon Nov 18 10:42:53 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id KAA17738 for <mason@primenet.com.au>; Mon, 18 Nov 1996 10:42:51 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id SAA02215; Sun, 17 Nov 1996 18:36:34 -0500 (EST)
Resent-Date: Sun, 17 Nov 1996 18:36:34 -0500 (EST)
X-Address: Department of Mathematics, Stockholm University 
	      S-106 91  Stockholm
	      SWEDEN
X-Phone: int+46 8 162000
X-Fax:   int+46 8 6126717
X-Url:   http://www.matematik.su.se
Date: Mon, 18 Nov 1996 00:36:59 +0100 (MET)
Message-Id: <199611172336.AAA10312@jocosus.matematik.su.se>
From: Torsten Ekedahl <teke@matematik.su.se>
To: zsh-workers@math.gatech.edu
Subject: OSF compile problem
Mime-Version: 1.0 (generated by tm-edit 7.89)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"ttX7D2.0.XY.26wZo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2425
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

There is a problem with compiling zsh-3.0.1 on an OSF machine:

sophie[1]uname -a
OSF1 sophie.matematik.su.se V3.2 148 alpha

The problem is with yp_all in zle_tricky.c:

sophie[1]grep -n yp_all zle_tricky.c 
1552:   yp_all(domain, PASSWD_MAP, &cb);

For some reason yp_all is declared 

yp_all(char *,char *,struct ypall_callback)

in the rpcsvc/ypclnt.h file whereas zsh assumes that the third
argument is a pointer to the struct. As cc by default is run with the
flag -std1 this bombs:

cc -std1 -c -I.. -I. -I.  -DHAVE_CONFIG_H -O zle_tricky.c
/usr/lib/cmplrs/cc/cfe: Error: zle_tricky.c, line 1552: Type for this
argument member is incompatible with function prototype description
(3.3.16.1)
        yp_all(domain, "passwd.byname" , &cb);

probably for a good reason, such as standard conformance. Removing the
-std1 flag solves the problem (at least for some sense of "solves").


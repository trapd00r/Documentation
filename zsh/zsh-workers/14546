From zsh-workers-return-14546-mason-zsh=primenet.com.au@sunsite.dk Tue May 29 19:47:13 2001
Return-Path: <zsh-workers-return-14546-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1454 invoked from network); 29 May 2001 19:47:12 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 May 2001 19:47:12 -0000
Received: (qmail 6072 invoked by alias); 29 May 2001 18:05:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14546
Received: (qmail 5955 invoked from network); 29 May 2001 18:05:25 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
Message-ID: <3B13E52D.5050308@mow.siemens.ru>
Date: Tue, 29 May 2001 22:06:37 +0400
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
User-Agent: Mozilla/5.0 (X11; U; Linux 2.4.4-6mdk i686; en-US; rv:0.9) Gecko/20010521
X-Accept-Language: en
MIME-Version: 1.0
To: Bart Schaefer <schaefer@candle.brasslantern.com>,
   ZSH Workers Mailing List <zsh-workers@sunsite.dk>
Subject: Re: termcap bug on Linux
References: <3B10FCA4.2000009@mow.siemens.ru> <1010528222527.ZM7246@candle.brasslantern.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Bart Schaefer wrote:

> On May 27,  5:09pm, Andrej Borsenkow wrote:
> } Subject: termcap bug on Linux
> }
> } Mandrake cooker (currently glibc-2.2.3, termcap-11.0.1-4mdk) compiled 
> } with termcap, no ncurses.  tgetflag() returns 0 for both unset and 
> } nonexsiting flags, which means that $termcap[cap] returns "no" for 
> } almost everything except numeric capabilities.
> 
> Does the following patch help?  This duplicates code from echotc() into
> gettermcap() -- so the two should at least now agree with each other,
> which they might not have before, even if they're both wrong.
> 


Yes.


> Does something similar need to go into scantermcap() ?
>


I guess, no. In scantermcap() we know type of each capability.

-andrej 



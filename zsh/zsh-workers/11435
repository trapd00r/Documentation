From zsh-workers-return-11435-mason-zsh=primenet.com.au@sunsite.auc.dk Wed May 17 10:24:34 2000
Return-Path: <zsh-workers-return-11435-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 844 invoked from network); 17 May 2000 10:24:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 May 2000 10:24:33 -0000
Received: (qmail 22715 invoked by alias); 17 May 2000 10:24:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11435
Received: (qmail 22708 invoked from network); 17 May 2000 10:24:20 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000517102344.ZM13477@candle.brasslantern.com>
Date: Wed, 17 May 2000 10:23:43 +0000
In-Reply-To: <200005170652.IAA27427@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: Completion tests fail with patches to 11415" (May 17,  8:52am)
References: <200005170652.IAA27427@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: Completion tests fail with patches to 11415
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 17,  8:52am, Sven Wischnowsky wrote:
}
} } Bart Schaefer wrote:
} 
} > ! line: {tst -x }{}
} > --- 1,2 ----
} > ! line: {tst -}{}
} 
} That's caused by 11406. Humm.
} 
} What are we supposed to do now. With respect to the patch, this
} behaviour is correct (and quite reasonable, I think). Should we only
} update the test? Should we make _arguments not try default-option
} completion only when it tried a *non-empty* action?
} 
} I think I prefer the former.

Updating the test is fine with me.  Is the test right after it (which
previously was expected to produce identical output) also correct with
respect to the intended post-11406 behavior?

Index: Test/53completion.ztst
===================================================================
@@ -121,7 +121,8 @@
  code='compdef _tst tst; _tst () { _arguments "-x" ":arg:" }'
  comptest -c "$code" $'tst -\t'
 0:_arguments
->line: {tst -x }{}
+>line: {tst -}{}
+>MESSAGE:{arg}
 
  code='compdef _tst tst; _tst () { _arguments "-x:arg:" }'
  comptest -c "$code" $'tst -x\t'

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-10840-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 19 15:12:42 2000
Return-Path: <zsh-workers-return-10840-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6450 invoked from network); 19 Apr 2000 15:12:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Apr 2000 15:12:36 -0000
Received: (qmail 14604 invoked by alias); 19 Apr 2000 15:12:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10840
Received: (qmail 14597 invoked from network); 19 Apr 2000 15:12:29 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Sven Wischnowsky" <wischnow@informatik.hu-berlin.de>,
   <zsh-workers@sunsite.auc.dk>
Subject: RE: [3.1.6-dev-22/CVS] Anyone with HP-UX 11.00 and dynamic loading ?
Date: Wed, 19 Apr 2000 19:12:18 +0400
Message-ID: <000601bfaa11$a75e8a20$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-reply-to: <200004191503.RAA23621@beta.informatik.hu-berlin.de>
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.2919.6700
Importance: Normal


>
> Dunno, shouldn't complist be taking the termcap stuff from the
> libtermcap.a that is linked into the core? Like all other modules.
>

Unforunately, all other modules are linked against $LIBS as well. The
problem is, there is fair number of systems out there that do not have
dynamic version of this or that library. Damn, even libc is splitted in
static and dynamic part on our system! So, even if zsh executable is
linked against all librraies, it won't link in all needed symbols -
because zsh executable itself does not use them. For this reason all
modules are linked against all libraries - that may or may not work with
statis/dynamic mix. It surprisingly works on one system here - but fails
on other.

One solution _may_be_ - link zsh executable with all libraries, force
linker to import the whole static library(ies) and export all symbols
for dynamic loading. Of course, this mean, the size of /bin/zsh will
slightly increase ... and even this may fail in case libraries should
come in defined order (as is the case here, damn it again).

-andrej


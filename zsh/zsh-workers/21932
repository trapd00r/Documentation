From zsh-workers-return-21932-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 24 19:31:58 2005
Return-Path: <zsh-workers-return-21932-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 493 invoked from network); 24 Oct 2005 19:31:55 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Oct 2005 19:31:55 -0000
Received: (qmail 55192 invoked from network); 24 Oct 2005 19:31:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2005 19:31:44 -0000
Received: (qmail 27011 invoked by alias); 24 Oct 2005 19:31:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21932
Received: (qmail 27001 invoked from network); 24 Oct 2005 19:31:40 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Oct 2005 19:31:40 -0000
Received: (qmail 54869 invoked from network); 24 Oct 2005 19:31:40 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2005 19:31:39 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 8B04F34048; Mon, 24 Oct 2005 15:31:37 -0400 (EDT)
Date: Mon, 24 Oct 2005 15:31:37 -0400
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.dk
Cc: "R.Ramkumar" <ramk@cse.iitm.ernet.in>, 335481-forwarded@bugs.debian.org
Subject: [ramk@cse.iitm.ernet.in: Bug#335481: zsh: zsh/sched waits for next return to prompt even with NOTIFY set]
Message-ID: <20051024193137.GA10982@scowler.net>
Mail-Followup-To: zsh-workers@sunsite.dk,
	"R.Ramkumar" <ramk@cse.iitm.ernet.in>,
	335481-forwarded@bugs.debian.org
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.9i
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

----- Forwarded message from "R.Ramkumar" <ramk@cse.iitm.ernet.in> -----

The sched builting provided by the zsh/sched module seems to execute
a scheduled command only when an enter is pressed after the time
specified has elapsed/arrived, much like how mail notification
occurs. This makes the command useless when the user wants to
schedule and leave the shell idle, and start using it only after the
time for which the command is scheduled. I don't know if this is a
bug or it is the intended behaviour. If it is intended, I could
suggest a few alternatives that would add this feature.

1. Execute as soon as the time arrives (maybe in the background),
   much like how job exit notification works with the NOTIFY option
   works. May be sched can reuse this option or have an option of
   its own. Or even better, perhaps one can indicate the desired
   behaviour on a per-item basis, by a flag, when adding an item.

2. (Less desirable) Have a flag to sched/another builtin which
   synchronously waits for the specified sched item/next N sched
   items/sched items within a certain time frame.

sched is great especially when it is an overkill to use something
like atd. Intuitively, I could guess without seeing the source that
perhaps the existing behaviour exists because it is much neater to
add a postcmd hook than to maybe register a sigalarm. Even if this
is the case, I feel these changes will greatly increase the
functionality of the builtin.

Regards,
Ramkumar.

----- End forwarded message -----


From zsh-workers-return-24483-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 29 17:34:00 2008
Return-Path: <zsh-workers-return-24483-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4275 invoked from network); 29 Jan 2008 17:33:57 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Jan 2008 17:33:57 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 93908 invoked from network); 29 Jan 2008 17:33:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Jan 2008 17:33:53 -0000
Received: (qmail 29508 invoked by alias); 29 Jan 2008 17:33:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24483
Received: (qmail 29495 invoked from network); 29 Jan 2008 17:33:48 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 29 Jan 2008 17:33:48 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [217.69.20.190])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 2741A80190F6
	for <zsh-workers@sunsite.dk>; Tue, 29 Jan 2008 18:33:44 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly39d.srv.mailcontrol.com (MailControl) with ESMTP id m0THXeTV007001
	for <zsh-workers@sunsite.dk>; Tue, 29 Jan 2008 17:33:42 GMT
Received: from news01 ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 29 Jan 2008 17:33:38 +0000
Date: Tue, 29 Jan 2008 17:33:38 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: 4.3.4-dev-8
Message-ID: <20080129173338.63a2bf40@news01>
In-Reply-To: <080129091218.ZM12931@torch.brasslantern.com>
References: <32478.1201607012@csr.com>
	<080129091218.ZM12931@torch.brasslantern.com>
Organization: CSR
X-Mailer: Claws Mail 3.2.0 (GTK+ 2.10.14; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 29 Jan 2008 17:33:38.0189 (UTC) FILETIME=[1501DBD0:01C8629D]
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.68.0.149
X-Virus-Scanned: ClamAV 0.91.2/5599/Tue Jan 29 17:27:10 2008 on bifrost
X-Virus-Status: Clean

On Tue, 29 Jan 2008 09:12:18 -0800
Bart Schaefer <schaefer@brasslantern.com> wrote:
> The section numbers in chapter 13 (Prompt Expansion) are wrong, they
> start with 13.0.1, 13.0.2, etc., rather than 13.1, 13.2.

This appears to be sort of deliberate, because the chapter would have just
one section (as the manual does, but chapters appear to be irrelevant to it)
but we can fudge the issue by generating proper sectioning.  This
divides the manual up a bit more but I don't think that's a problem.

> The heading of 18.5.1
> is "Special Widget" from the days when zle-line-init was the only one,
> but it should probably be plural now.

I've changed this, but if anyone wants the nodes and sections of the entire
document realigned any time soon they'll have to volunteer for it.

Index: Doc/Zsh/prompt.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/prompt.yo,v
retrieving revision 1.8
diff -u -r1.8 prompt.yo
--- Doc/Zsh/prompt.yo	1 Apr 2005 12:04:23 -0000	1.8
+++ Doc/Zsh/prompt.yo	29 Jan 2008 17:30:00 -0000
@@ -1,8 +1,6 @@
 texinode(Prompt Expansion)(Expansion)(Conditional Expressions)(Top)
 chapter(Prompt Expansion)
-ifzman(\
-sect(Prompt Expansion)
-)\
+sect(Expansion of Prompt Sequences)
 cindex(prompt expansion)
 cindex(expansion, prompt)
 Prompt sequences undergo a special form of expansion.  This type of expansion
@@ -31,9 +29,13 @@
 pindex(PROMPT_PERCENT, use of)
 If the tt(PROMPT_PERCENT) option is set, certain escape sequences that
 start with `tt(%)' are expanded.
-Some escapes take an optional integer argument, which
+Many escapes are followed by a single character, although some of these
+take an optional integer argument that
 should appear between the `tt(%)' and the next character of the
-sequence.  The following escape sequences are recognized:
+sequence.  More complicated escape sequences are available to provide
+conditional expansion.
+
+sect(Simple Prompt Escapes)
 
 subsect(Special characters)
 startitem()
@@ -188,7 +190,7 @@
 )
 enditem()
 
-subsect(Conditional substrings)
+sect(Conditional Substrings in Prompts)
 startitem()
 item(tt(%v))(
 vindex(psvar, use of)
Index: Doc/Zsh/zle.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/zle.yo,v
retrieving revision 1.57
diff -u -r1.57 zle.yo
--- Doc/Zsh/zle.yo	10 Nov 2007 14:30:23 -0000	1.57
+++ Doc/Zsh/zle.yo	29 Jan 2008 17:30:01 -0000
@@ -784,7 +784,7 @@
 )
 enditem()
 
-subsect(Special Widget)
+subsect(Special Widgets)
 
 There are a few user-defined widgets which are special to the shell.
 If they do not exist, no special action is taken.  The environment


-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


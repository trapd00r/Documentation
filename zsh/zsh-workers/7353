From zsh-workers-return-7353-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Aug 04 07:36:54 1999
Return-Path: <zsh-workers-return-7353-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27372 invoked from network); 4 Aug 1999 07:36:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Aug 1999 07:36:51 -0000
Received: (qmail 2411 invoked by alias); 4 Aug 1999 07:36:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7353
Received: (qmail 2404 invoked from network); 4 Aug 1999 07:36:20 -0000
Date: Wed, 4 Aug 1999 09:36:14 +0200 (MET DST)
Message-Id: <199908040736.JAA14881@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Mon, 2 Aug 1999 12:58:55 +0200 (MET
	DST)
Subject: Re: Completion problems.


I wrote:

> The problem was that cond_str() always returned an
> untokenized string. The patch gives a new argument to it which may be
> non-zero to get the tokenized form.

I forgot to include the diff for Modules/example.c. Sorry.

Bye
 Sven

diff -u os/Modules/example.c Src/Modules/example.c
--- os/Modules/example.c	Tue Aug  3 08:57:51 1999
+++ Src/Modules/example.c	Tue Aug  3 08:58:21 1999
@@ -80,7 +80,7 @@
 static int
 cond_p_len(char **a, int id)
 {
-    char *s1 = cond_str(a, 0);
+    char *s1 = cond_str(a, 0, 0);
 
     if (a[1]) {
 	zlong v = cond_val(a, 1);
@@ -95,7 +95,7 @@
 static int
 cond_i_ex(char **a, int id)
 {
-    char *s1 = cond_str(a, 0), *s2 = cond_str(a, 1);
+    char *s1 = cond_str(a, 0, 0), *s2 = cond_str(a, 1, 0);
 
     return !strcmp("example", dyncat(s1, s2));
 }

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


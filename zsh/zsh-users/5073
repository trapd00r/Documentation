From zsh-users-return-5073-mason-zsh=primenet.com.au@sunsite.dk Fri Jun 21 15:04:23 2002
Return-Path: <zsh-users-return-5073-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1216 invoked from network); 21 Jun 2002 15:04:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 21 Jun 2002 15:04:21 -0000
Received: (qmail 14970 invoked by alias); 21 Jun 2002 15:04:06 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5073
Received: (qmail 14959 invoked from network); 21 Jun 2002 15:04:05 -0000
Date: Fri, 21 Jun 2002 08:04:00 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: schaefer@ns1.sodaware.com
To: Vagn Johansen <v@johansen.mail.dk>
cc: zsh-users@sunsite.dk
Subject: Re: compinit problems with Cygwin and Win2000
In-Reply-To: <20020621113726.VHNO1315.fepE.post.tele.dk@fepP1.im.tele.dk>
Message-ID: <Pine.LNX.4.44.0206210752020.7265-100000@ns1.sodaware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 21 Jun 2002, Vagn Johansen wrote:

> It was caused by the comparison in:
>
> _d_als=($(whence -wm '_*' | sort |
> while read -rA _d_line; do
>   [[ ${_d_line[2]} = function ]] && print -r - ${_d_line[1]%:}
> done))
>
> ${_d_line[2]} contains "function^M" and not "function"
> as expected.

Try removing the '| sort' from that expression and see if the line endings
are still funny.

Although I'm interested in the result you get, I'd also suggest that you
replace that entire expression with

_d_als=($(typeset +fm _\*))

which ought to be a whole lot faster anyway.


From zsh-workers-return-25512-mason-zsh=primenet.com.au@sunsite.dk Sat Aug 23 04:16:01 2008
Return-Path: <zsh-workers-return-25512-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10936 invoked from network); 23 Aug 2008 04:15:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Aug 2008 04:15:58 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 34303 invoked from network); 23 Aug 2008 04:15:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Aug 2008 04:15:47 -0000
Received: (qmail 13263 invoked by alias); 23 Aug 2008 04:15:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25512
Received: (qmail 13245 invoked from network); 23 Aug 2008 04:15:37 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 23 Aug 2008 04:15:37 -0000
Received: from wa-out-1112.google.com (wa-out-1112.google.com [209.85.146.178])
	by bifrost.dotsrc.org (Postfix) with ESMTP id DF7B8801E2B4
	for <zsh-workers@sunsite.dk>; Sat, 23 Aug 2008 06:15:32 +0200 (CEST)
Received: by wa-out-1112.google.com with SMTP id v27so341349wah.21
        for <zsh-workers@sunsite.dk>; Fri, 22 Aug 2008 21:15:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=tBOqQAYHl4kQmGKZhcelOB5UTWVLWa7ArqSglaclAE0=;
        b=oC9NEU//m5v1icVFa1jTkfVTZC44AV5HGfS4h8SYZ8iSjqmMs6+jKKeUo8Kmn3AhZ5
         SfZ/kU+EzrxiJNVn8EGERPP6wsXCFdZMgSSQjenxW/Dgjd/jj9Awsn18PfXgV8uHJgkB
         ly//OqIdglGpqnBVynpejvpq3X/qMv6kDgoI4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=cdinN/0JKeKb2nwjjS70zdfZAUmAoQRb1qeRoQRTdcLGnZtuSHq8lNmnTglXn/mtR7
         CJqonEMBofnWZniakx3plCyuoaap4ze1huomyMWQgDuIKYpBpRpnobvRWPqedWWGMRmE
         munKnjhtcxnswkNmiXGlGFovLpH+CejjKbeWc=
Received: by 10.115.48.12 with SMTP id a12mr1792572wak.38.1219464931408;
        Fri, 22 Aug 2008 21:15:31 -0700 (PDT)
Received: by 10.114.159.2 with HTTP; Fri, 22 Aug 2008 21:15:31 -0700 (PDT)
Message-ID: <6cd6de210808222115x56de11bdv957bb8cc21358789@mail.gmail.com>
Date: Sat, 23 Aug 2008 00:15:31 -0400
From: "Rocky Bernstein" <rocky.bernstein@gmail.com>
To: "Zsh hackers list" <zsh-workers@sunsite.dk>
Subject: skipping assignment and function statements; Interactive comments
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV 0.92.1/8076/Sat Aug 23 00:15:54 2008 on bifrost
X-Virus-Status: Clean

I just added a skip command to zshdb (and committed to github), but it
seems that assignment statements and function definitions are not
really skipped.

Consider this example which is slightly modified from the regession
test that was put in when it was implimented:

  setopt localtraps localoptions debugbeforecmd
  trap '(( LINENO == 4 )) && setopt errexit' DEBUG
  x=three
  x=four  # Statement is supposed to be skipped
  print $LINENO five
  print x is $x

The output I get is:

  5 five
  x is four

And if the statement were a function definition, e.g.
  x() { return 4; }
I think x would get defined as a funciton

- - -
In tracking something else down I read this in zshoptions under
INTERACTIVE_COMMENTS:

   "Allow comments even in interactive shells".

I find this phrasing a little weird as it It seems to imply that one
never would want to write a comments, but sometimes one has to break
down and do it in an interactive shell. :-)

Perhaps the word "even" should be removed.


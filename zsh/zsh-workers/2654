From zsh-workers-request@euclid.skiles.gatech.edu Sat Dec 28 00:43:28 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 20627 invoked from network); 28 Dec 1996 00:43:26 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 28 Dec 1996 00:43:26 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id TAA01701; Fri, 27 Dec 1996 19:32:04 -0500 (EST)
Resent-Date: Fri, 27 Dec 1996 19:32:04 -0500 (EST)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199612272342.AAA01830@hzoli.ppp.cs.elte.hu>
Subject: Re: zle interface improvement
To: zefram@dcs.warwick.ac.uk (Zefram)
Date: Sat, 28 Dec 1996 00:42:43 +0100 (MET)
Cc: wayne@clari.net, zsh-workers@math.gatech.edu
In-Reply-To: <6637.199612271118@stone.dcs.warwick.ac.uk> from Zefram at "Dec 27, 96 11:18:55 am"
X-Mailer: ELM [version 2.4ME+ PL17 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"ExRvz2.0.RQ.2g6no"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2654
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> Wayne Davison wrote:
> >One miniscule optimization would be to allow non-module code to call
> >zle directly if zle is known to be a non-module.

That would really be comletely unnoticable and would only decrease zsh's
size by a few bytes.

> only recompiling init.c each time.  (Remember, gdb can't debug
> modules.)

Of course it can, at least on elf systems.  If you see

warning: Unable to find dynamic linker breakpoint function.
warning: GDB will be unable to debug shared library initializers
warning: and track explicitly loaded dynamic code.

that's probably because you use Linux and the binary ld.so.1.8.5
distribution.  With ld.so.1.8.2 it was possible and there were no such
warning.  I'm told that recompiling ld.so.1.8.5 with -g, or just simply not
stripping it would help here (I did not played with that).

And if you attach a runnig zsh which already loaded a module to gdb, you
can debug the loaded module.  Of course as gdb says you'll be unable to
debug the module initialisation process (i.e. the boot_... function).

Zoltan


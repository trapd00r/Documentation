From zsh-users-return-8501-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 15 12:52:27 2005
Return-Path: <zsh-users-return-8501-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14892 invoked from network); 15 Feb 2005 12:52:27 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Feb 2005 12:52:27 -0000
Received: (qmail 91193 invoked from network); 15 Feb 2005 12:52:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Feb 2005 12:52:19 -0000
Received: (qmail 22378 invoked by alias); 15 Feb 2005 12:52:02 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8501
Received: (qmail 22363 invoked from network); 15 Feb 2005 12:52:01 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 15 Feb 2005 12:52:01 -0000
Received: (qmail 89984 invoked from network); 15 Feb 2005 12:51:58 -0000
Received: from vinc17.net4.nerim.net (HELO ay.vinc17.org) (62.212.121.106)
  by a.mx.sunsite.dk with SMTP; 15 Feb 2005 12:51:46 -0000
Received: from lefevre by ay.vinc17.org with local (Exim 4.34)
	id 1D12B6-0001st-Ve; Tue, 15 Feb 2005 13:51:44 +0100
Date: Tue, 15 Feb 2005 13:51:44 +0100
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-users@sunsite.dk
Subject: zsh on Opteron (Linux) and limit
Message-ID: <20050215125144.GI19378@ay.vinc17.org>
Mail-Followup-To: zsh-users@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.7-vl-20050209i
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.5

I've compiled zsh 4.2.4 on Opteron, but the "limit" builtin doesn't
work. When called without any argument, it outputs nothing, and a 0
exit status.

zsh configuration:

zsh configuration
-----------------
zsh version               : 4.2.4
host operating system     : x86_64-unknown-linux-gnu
source code location      : .
compiler                  : gcc
preprocessor flags        : 
executable compiler flags :  -Wall -Wmissing-prototypes -O2
module compiler flags     :  -Wall -Wmissing-prototypes -O2 -fPIC
executable linker flags   :   -s -rdynamic
module linker flags       :   -s -shared
library flags             : -ldl -lnsl -lcurses -lm  -lc
installation basename     : zsh
binary install path       : /users/spaces/logiciels/zsh-patched/x86_64/bin
man page install path     : /users/spaces/logiciels/zsh-patched/man
info install path         : /users/spaces/logiciels/zsh-patched/info
functions install path    : /users/spaces/logiciels/zsh-patched/share/zsh/4.2.4/functions
See config.modules for installed modules and functions.

"strace -f -o strace.out ~soft/zsh-patched/x86_64/bin/zsh -c limit"
outputs:

[...]
25357 open("/users/spaces/logiciels/zsh-patched/x86_64/lib/zsh/4.2.4/zsh/rlimits.so", O_RDONLY) = 3
25357 read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\0\f\0\0"..., 640) = 640
25357 fstat(3, {st_mode=S_IFREG|0755, st_size=12408, ...}) = 0
25357 mmap(NULL, 1058952, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x2a97f74000
25357 mprotect(0x2a97f77000, 1046664, PROT_NONE) = 0
25357 mmap(0x2a98076000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x2a98076000
25357 close(3)                          = 0
25357 rt_sigprocmask(SIG_BLOCK, [CHLD], [CHLD], 8) = 0
25357 rt_sigprocmask(SIG_UNBLOCK, [CHLD], [CHLD], 8) = 0
25357 exit_group(0, 0, 0x3bfa12c8c0, 0x1, 0x3c <unfinished ... exit status 0>

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / SPACES project at LORIA


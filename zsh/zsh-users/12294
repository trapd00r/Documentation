From zsh-users-return-12294-mason-zsh=primenet.com.au@sunsite.dk Wed Dec 05 14:17:25 2007
Return-Path: <zsh-users-return-12294-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16466 invoked from network); 5 Dec 2007 14:17:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Dec 2007 14:17:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 34021 invoked from network); 5 Dec 2007 14:17:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2007 14:17:07 -0000
Received: (qmail 23815 invoked by alias); 5 Dec 2007 14:16:52 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12294
Received: (qmail 23801 invoked from network); 5 Dec 2007 14:16:51 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Dec 2007 14:16:51 -0000
Received: (qmail 32614 invoked from network); 5 Dec 2007 14:16:51 -0000
Received: from 0x60.org (62.75.156.113)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2007 14:16:46 -0000
Received: by 0x60.org (Postfix, from userid 65001)
	id 24D7BA460040; Wed,  5 Dec 2007 15:16:44 +0100 (CET)
Date: Wed, 5 Dec 2007 15:16:44 +0100
To: zsh-users@sunsite.dk
Subject: Strange bug with tiling wm, urxvt and zsh
Message-ID: <20071205141643.GA19714@codernet.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
From: nico@codernet.org (Nico R. Wohlgemuth)

Hi there.

I have a problem with zsh, rxvt-unicode and dwm (a tiling window manager).
I'm using zsh-4.3.4 together with rxvt-unicode-8.7 in dwm-4.7.
My .zshrc can be found at http://nico.codernet.org/pub/configs/zshrc

Everytime I open a window it gets resized to fit the screen (which is
the job of a tiling wm). Now, If I open a terminal window, dwm resizes it
directly to fit the screen - after that the first prompt I get is
'unusable'. Completion does not work (it works but I just does not get
displayed). I am able to write and exec but not to delete, complete etc.
You can see this at http://nico.codernet.org/pub/zshbug/. Also if I
press return, the written line gets echoed and then the command is
execed.

In floating mode (wm does not resize windows) the problem does
not exist. The problem is the resizing. I think there is no or some
miss-information between the terminal and the shell. I don't know if its
a problem of zsh or urxvt or maybe both togehter.
I only expire this behaviour with zsh and urxvt; urxvt and bash or
xterm and zsh are working fine. This isn't very critical but really
really annoying.


I have tested a bit around and someone from #zsh gave me a dirty hack to
bypass this behaviour: "sleep 0.1 && kill -SIGWINCH $$" at the end of the
.zshrc - which works but is very dirty and only a termporaly solution for
this.

Where is the problem and is there a way to get rid of this stupid bug?


From zsh-workers-request@euclid.skiles.gatech.edu Sun Feb 23 21:48:04 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 9987 invoked from network); 23 Feb 1997 21:48:02 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 23 Feb 1997 21:48:02 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA23695; Sun, 23 Feb 1997 16:43:37 -0500 (EST)
Resent-Date: Sun, 23 Feb 1997 16:29:36 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <2828.199702232131@stone.dcs.warwick.ac.uk>
Subject: Re: completion and .files
To: nborisov@calum.csclub.uwaterloo.ca (Nikita Borisov)
Date: Sun, 23 Feb 1997 21:31:34 +0000 (GMT)
Cc: zsh-users@math.gatech.edu
In-Reply-To: <199702231934.OAA07067@calum.csclub.uwaterloo.ca> from "Nikita Borisov" at Feb 23, 97 02:34:35 pm
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8929.48
X-Phase: The Moon is Waning Gibbous (99% of Full)
X-US-Congress: Moronic fuckers
X-Personality: INTJ
Content-Type: text
Resent-Message-ID: <"z76NR1.0.Lf5._QB4p"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/707
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Nikita Borisov wrote:
>Attempt #2:
>compctl -g '*(-/x)' -x 'S[.]' -g '.*(-/x)' -- cd 
>
>This fixes the original problem, but "cd ~/.foo<TAB>" fails once again.

How about

compctl -g '*(-/x)' + -g '*(D-/x)' cd

i.e., try normal globbing first, and if that fails, try again allowing
dot files.

>What I'm basically looking for is to get at all the files that zsh would
>have listed had I not used a compctl rule, and filter out any that are
>not directories.

I'd like to implement the ability to do this directly.  I'd like some
way for completion functions to reinvoke the compctl mechanism to
provide it with an array of completions using a normal compctl recipe,
so it could implement more extravagant conditional completions and do
tweaks that a plain compctl can't.  Is this a good idea?

-zefram


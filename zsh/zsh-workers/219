From zsh-workers-request@math.gatech.edu  Mon Jul 17 20:55:27 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id UAA00176 for <mason@werple.mira.net.au>; Mon, 17 Jul 1995 20:55:23 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA02405
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Mon, 17 Jul 1995 06:54:15 -0400
Received: by math (5.x/SMI-SVR4)
	id AA11670; Mon, 17 Jul 1995 06:50:37 -0400
Resent-Date: Mon, 17 Jul 1995 12:51:24 +0200 (MET DST)
Old-Return-Path: <stucki@leibniz.math.fu-berlin.de>
Message-Id: <m0sXnll-000sM7C@leibniz.math.fu-berlin.de>
From: stucki@math.fu-berlin.de (Chr. von Stuckrad)
Subject: zsh 'running wild' after connection loss...
To: zsh-workers@math.gatech.edu
Date: Mon, 17 Jul 1995 12:51:24 +0200 (MET DST)
X-Testheader: Written by C. v. Stuckrad, FB. Mathematik, EDV
X-Testheader: FU-Berlin, Dahlem, Arnimallee 2-6, 14195 Berlin, GERMANY
X-Mailer: ELM [version 2.4 PL22]
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
Resent-Message-Id: <"hrFSx.0.Gs2.y1a2m"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/219
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Hi!

May be this is an old FAQ-Problem, but I never could find out...

If I work via telnet/rlogin/(tcp/ip)
	and have set 'ignoreeof'
	and the connection is lost
	(and mostly while the 'zsh' is waiting for a running program),
THEN the 'ZSH' loops forever
	in 'read(0)' getting nothing from it's 'tty'.

The real problem is the waste of CPU-Time. The 'zsh' uses
100% of the CPU-time (for nothing :-) and the users complain.

Is there a patch for this problem, or does somebody have something
like one of the following (in order of preference :-) :
	a) a check for 'closed tty' after 'waiting for a child' ?
	b) a timeout (loop only for <adjustable> minutes)
	c) a loopcount (give up after <adjustable> times reading nothing)
	d) a slowdown (to retry slowly after reading 'nothing) ?

In the moment we use 'zsh-2.5.0c' on Sunos 4.1.3 and Solaris 2.4.

Thanks for bothering with this,
		Sincerely your's   Stucki
  **v**   ----v-----------------------------------------------------------
    S    *    |   Christoph von Stuckrad      | <stucki@math.fu-berlin.de> \
    t   /  *  |   Dahlem                      | ...!unido!fub!leibniz!stucki|
    u /     * |   Fachbereich Mathematik, EDV | Tel:+49 30 838-754{9|8}     |
<stucki>- - C |   Freie Universitaet Berlin   | Fax:+49 30 838-5913         |
    k \     * |   Arnimallee 2-6              | IRC: /nick stucki           |
    r   \  *  | D-14195 Berlin                | PGP: not yet certified :-(  |
    a    *    |   Germany                     |      ask for key by mail   /
  **d**   ----^-----------------------------------------------------------


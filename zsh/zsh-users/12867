From zsh-users-return-12867-mason-zsh=primenet.com.au@sunsite.dk Tue May 27 08:30:35 2008
Return-Path: <zsh-users-return-12867-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12348 invoked from network); 27 May 2008 08:30:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 May 2008 08:30:24 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 5205 invoked from network); 27 May 2008 08:30:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 May 2008 08:30:07 -0000
Received: (qmail 17438 invoked by alias); 27 May 2008 08:29:54 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12867
Received: (qmail 17423 invoked from network); 27 May 2008 08:29:53 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 27 May 2008 08:29:53 -0000
Received: from biskalar.biskalar.de (sesamstrafe.de [213.133.108.195])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 7E1DC80589A4
	for <zsh-users@sunsite.dk>; Tue, 27 May 2008 10:29:50 +0200 (CEST)
Received: from [192.124.26.250] (helo=ranga.kyb.local)
	by biskalar.biskalar.de with esmtpsa (TLS-1.0:RSA_AES_128_CBC_SHA:16)
	(Exim 4.50)
	id 1K0uZ0-0002RP-Rz
	for zsh-users@sunsite.dk; Tue, 27 May 2008 10:29:46 +0200
Message-Id: <716EA334-6EED-416F-98B1-78EFE3EFA1BA@biskalar.de>
From: Sebastian Stark <seb-zsh@biskalar.de>
To: zsh-users@sunsite.dk
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v919.2)
Subject: /non/existant/path(:h)
Date: Tue, 27 May 2008 10:29:46 +0200
X-Mailer: Apple Mail (2.919.2)
X-Virus-Scanned: ClamAV 0.91.2/7251/Tue May 27 00:45:09 2008 on bifrost
X-Virus-Status: Clean


In zshexpn(1) it says:

   Modifiers
       After the optional word designator, you can add a sequence of  
one or more of the following
       modifiers, each preceded by a `:'.  These modifiers also work  
on the  result  of  filename
       generation and parameter expansion, except where noted.

       h      Remove a trailing pathname component, leaving the head.   
This works like `dirname'.

I say this is not exactly true since if you expand:

  $myvar(:h)

when myvar contains a path that does not exist it will expand to the  
empty string if nullglob is set or, if nullglob is unset, it will lead  
to an error. This is not very close to a replacement of dirname(1),  
like suggested by the manpage.

It could be that I missed something, as always. But I think the  
manpage should be more clear about that. On the other hand it would be  
nice if :h indeed worked as a replacement for dirname. Not sure if  
this can be achieved without too much hassle.


Sebastian


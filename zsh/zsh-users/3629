From zsh-users-return-3629-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 19 09:20:36 2001
Return-Path: <zsh-users-return-3629-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4276 invoked from network); 19 Feb 2001 09:20:36 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Feb 2001 09:20:36 -0000
Received: (qmail 15541 invoked by alias); 19 Feb 2001 09:20:20 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3629
Received: (qmail 15530 invoked from network); 19 Feb 2001 09:20:19 -0000
Date: Mon, 19 Feb 2001 10:20:17 +0100 (MET)
Message-Id: <200102190920.KAA08092@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-users@sunsite.auc.dk
In-reply-to: Wayne Davison's message of Fri, 16 Feb 2001 10:23:38 -0800 (PST)
Subject: Re: "rehash" each time a new program is installed?


Wayne Davison wrote:

> On Thu, 15 Feb 2001, Bart Schaefer wrote:
> > On Feb 15,  6:57pm, Louis-David Mitterrand wrote:
> > } Oh, and a last one ;) Is it possible to "fignore" a file except when
> > } it's the only completion candidate (considering the typed string e.g.)?
> > 
> > That should happen already:
> 
> There's a problem with this in the new completion system (which I
> complained about quite a while ago).  Fignore works with the old
> completion code, but the new system will never complete a file name
> in the fignore list.  An example of doing both:
> 
>     % zsh -f
>     % fignore=( .bak )
>     % touch test1 test1.bak
>     % ls test1.<TAB>
> 
> This results in the expected test1.bak.  Now continue:
> 
>     % autoload -U compinit
>     % compinit
>     % zstyle ':completion:*' completer _expand _complete
>     % bindkey '\t' complete-word
>     % ls test1.<TAB>
> 
> It just beeps at you.  Using a wildcard will cause _expand to list the
> file, but _complete totally ignores it.  Is there an option that I'm
> missing?  I've tried using:
> 
>     % zstyle ':completion:*:all-files' ignored-patterns \*.bak
> 
> (instead of fignore) with the same results.

(Err, deja vu.  Didn't I answer a similar question last week?)

Anyway... you didn't include the _ignored completer in your list.
With that it will work.

If you don't set the completer style, the default will be used and
that is (_complete _ignored).


Thomas Koehler wrote:

> ...
> 
> % zsh -f
> picard% fignore=3D( .bak )
> picard% touch test1 test1.bak
> picard% autoload -U compinit
> picard% compinit
> picard% ls test1.<TAB>
>   -> leads to
>   picard% ls test1.bak
> 
> Ah, here's the problem: complete-word! expand-or-complete works fine!
> Why is this the case?

For me it works with both bindings. Old version?

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


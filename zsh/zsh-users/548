From zsh-workers-request@euclid.skiles.gatech.edu Thu Dec 12 09:38:26 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 289 invoked from network); 12 Dec 1996 09:38:24 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 12 Dec 1996 09:38:24 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA00726; Thu, 12 Dec 1996 04:28:33 -0500 (EST)
Resent-Date: Thu, 12 Dec 1996 04:10:43 -0500 (EST)
Message-Id: <199612120910.KAA14585@hydra.ifh.de>
To: David Chamont <chamont@polhp3.in2p3.fr>, zsh-users@math.gatech.edu
Subject: Re: newgrp 
In-reply-to: "David Chamont"'s message of "Wed, 11 Dec 1996 19:29:57 MET."
             <32AEFDA5.583@polhp3.in2p3.fr> 
Date: Thu, 12 Dec 1996 10:10:30 +0100
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"rIzQM3.0.19.Jmyho"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/548
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

David Chamont wrote:
> Hi,
> 
> I am working in a cluster of HP Unix workstations.
> We make a big use of Unix groups, and the lack of the
> newgrp command is a real obstacle.
> 
> The FAQ trick does not work (alias newgrp="exec newgrp"),
> perhaps because I put zsh as my login shell.

I don't quite understand the problem.  Are you saying you need the new
shell to be a login shell if the old one was?  You could try something
like this:

newgrp () {
  local args;
  [[ -o login ]] && args=-
  exec =newgrp $args $*
}

If that's what you want I'll change the FAQ.

(Just in case it helps:  if you have changed $SHELL, it looks like
newgrp won't honour it, it will go back to the passwd entry.)

Bonne chance.
-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


From zsh-users-return-3624-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 16 08:06:34 2001
Return-Path: <zsh-users-return-3624-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1070 invoked from network); 16 Feb 2001 08:06:32 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Feb 2001 08:06:32 -0000
Received: (qmail 17202 invoked by alias); 16 Feb 2001 08:06:19 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3624
Received: (qmail 17190 invoked from network); 16 Feb 2001 08:06:19 -0000
Date: Fri, 16 Feb 2001 09:06:11 +0100 (MET)
Message-Id: <200102160806.JAA31948@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-users@sunsite.auc.dk
CC: Louis-David Mitterrand <cunctator@apartia.ch>
In-reply-to: "Bart Schaefer"'s message of Thu, 15 Feb 2001 19:31:09 +0000
Subject: Re: "rehash" each time a new program is installed?


Bart Schaefer wrote:

> ...
>
> } Oh, and a last one ;) Is it possible to "fignore" a file except when
> } it's the only completion candidate (considering the typed string e.g.)?
> 
> That should happen already:
> 
> fignore <S> <Z> (FIGNORE <S>)
>      An array (colon separated list) containing the suffixes of files
>      to be ignored during filename completion.  However, if the
>      completion generates only files which would match if this variable
>      would be ignored, than these files are completed anyway.

The fact that it doesn't work out of the box might mean that he's
using the new completion system. In that case he needs to use the
_ignored completer, as in:

  zstyle ':completion:*' completer _complete _ignored


And if he's using the new completion system, this:

> } Also, how could I have zsh not list "CVS" directories when completing
> } paths? I tried fignore but it doesn't work.
> 
> I don't immediately recall any way to ignore intermediate directories in
> a path.  It's probably possible using styles in 3.1.6 and later, but the
> only way for 3.0.8 would be to write a "compctl -K" function and attach
> it to the specific commands for which you don't want to see CVS.

can be solved, too. One only needs to not set $fignore, but instead
use the ignored-patterns style, like so:

  zstyle ':completion:*:complete:*:(all-|)files' \
      '?*~' '?*.(o|log|aux|...)' '(|*/)CVS'
                 ^^^^^^^^^^^^^
                    whatever suffixes one wants to have ignored

And finally: the _ignored completer can also be customized, see the
manual/info or Peter's guide (from www.zsh.org).

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


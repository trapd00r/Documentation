From huyle@chop.ugcs.caltech.edu Sun Jul  7 09:06:06 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id JAA18493 for <mason@werple.mira.net.au>; Sun, 7 Jul 1996 09:06:03 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id TAA19818; Sat, 6 Jul 1996 19:00:20 -0400 (EDT)
Resent-Date: Sat, 6 Jul 1996 19:00:20 -0400 (EDT)
Message-Id: <199607062259.PAA11588@envy.ugcs.caltech.edu>
To: zsh-workers@math.gatech.edu
Subject: Remaining zsh3.0-pre2 bugs
X-Mailer: MH 6.8.3
X-URL: http://www.ugcs.caltech.edu/~huyle
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <9379.836693965.1@chop.ugcs.caltech.edu>
Date: Sat, 06 Jul 1996 15:59:25 -0700
From: Huy Le <huyle@chop.ugcs.caltech.edu>
Resent-Message-ID: <"nHF5K1.0.ar4.-_ktn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1545
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 2853
Status: OR

Here are some bugs that I've reported but still remain in the latest
version of zsh.
The apply for both HP-UX 9.01 and IRIX 5.3

------------------------------------------------------------------------------
1. History bug:
The magic-space binding seems to mess up the history of
a line with a quoted argument that spawns two lines.
Note that in the following examples the number of spaces
and the placement of the single-quote matter.

pride% exec ./zsh -f
pride% echo 'a
> b c'
a
b c
pride% history
    1  echo 'a\nb c'
    2  history
pride% echo 'a
> b' c
a
b c
pride% history
    1  echo 'a\nb c'
    2  history
    3  echo 'a\nb' c
    4  history
pride% exec ./zsh -f
pride% bindkey ' ' magic-space
pride% echo 'a
> b c'
a
b c
pride% history
    1  bindkey ' ' magic-space
    2  history
pride% echo 'a
> b' c
a
b c
pride% history
    1  bindkey ' ' magic-space
    2  history
    3   c
    4  history

------------------------------------------------------------------------------
2. tty bug
When running either of the two sequences:
  while echo crap >/dev/null; do done
  while true; do echo crap >/dev/null; done
and interrupting them with <CTRL>-C, my output gets lost from then on.
This is an intermittent problem on HP-UX--keep doing it and eventually
it'll happen. On IRIX, the bug has happened to me every time.

pride% while echo crap >/dev/null; do done
pride% echo yes
pride% exec >/dev/tty
pride% echo yes
yes
pride%

------------------------------------------------------------------------------
3. tty bug #2
When tty output of "less" or "more" is suspended because it's in the
background, after "fg"ing my tty settings are reset to default.
This problem is hard because on HP-UX it is intermittent; happens more
regularly on IRIX.  Also, enough output must be generated (hence ls /bin)
so that you can quit out of "less" in the middle of the output.
As a semi-test that this is a zsh bug, I ran the same sequences of
commands under tcsh, and didn't get the bug.

acro% exec ./zsh -f
acro% stty eof '^D'
acro% stty -a
speed 38400 baud; line = 1;
intr = ^C; quit = ^@; erase = DEL; kill = ^U; eof = ^D; eol = ^@; old-swtch = ^Z; susp = ^@
    [other stty output snipped]
acro% /bin/ls /bin |less &
[1] 18444 18445
acro%
[1]  + suspended (tty output)  /bin/ls /bin | less
acro% fg
[1]  + continued  /bin/ls /bin | less
4d
4d60
CC
DCC
NCC
OCC
X11
[
acroread
alpq
apropos
ar
as
at
autopush
awk
banner
basename
batch
bc
bdiff
bfs
cal
[less pauses after one page-full; I hit 'q']
acro% stty -a
speed 38400 baud; line = 1;
intr = ^C; quit = ^@; erase = DEL; kill = ^U; eof = ^A; eol = ^@; old-swtch = ^@; susp = ^@
[other stty output snipped]

------------------------------------------------------------------------------
4. vi-compatibility ZLE bug
In vi-mode, when hitting <u> for undo, the cursor does not end up
where it would in vi.



From zsh-workers-return-8725-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Nov 22 15:15:58 1999
Return-Path: <zsh-workers-return-8725-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25504 invoked from network); 22 Nov 1999 15:15:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Nov 1999 15:15:56 -0000
Received: (qmail 29215 invoked by alias); 22 Nov 1999 15:15:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8725
Received: (qmail 29178 invoked from network); 22 Nov 1999 15:15:27 -0000
Message-ID: <38395DEA.49626DCA@u.genie.co.uk>
Date: Mon, 22 Nov 1999 15:14:50 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.7 [en] (Win95; U)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: AIX .export files
References: <199911220936.KAA04982@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:

> Yes, I guess. I thought that it would automatically use those
> moddeps'ed in complete.mdd.
> 
> Could you try?

That solved the trouble with complist.so - thanks.

Compiling pws-9, I again got unresolved symbols - presumably due to
changes since bart-8. This time it was for compctl.so which, it seems
also depends on zle. The same problem then for computil.so (which only
uses incompfunc from zle.so).

I've fixed the .export files, this time taking more care to put
symbols in the right .export file though I may have made mistakes. I
also checked for cases of a symbol appearing in more than one .export
file which revealed that compctl.export should be deleted I hope my
patch to .distfiles is the correct way to indicate this.

Oliver

--- Src/zsh.export.bak	Fri Nov 19 17:51:39 1999
+++ Src/zsh.export	Mon Nov 22 15:07:03 1999
@@ -89,6 +89,7 @@
 freearray
 freeheap
 freelinklist
+freepatprog
 freestr
 freestruct
 getaparam
@@ -106,6 +107,7 @@
 getsparam
 getstrvalue
 gettempname
+getvalue
 global_heapalloc
 global_permalloc
 globlist
@@ -227,10 +229,13 @@
 runshfunc
 scancountparams
 scanhashtable
+sepjoin
 setaparam
+setarrvalue
 sethparam
 setlimits
 setsparam
+setstrvalue
 settrap
 settyinfo
 sfcontext
@@ -260,7 +265,6 @@
 strvargetfn
 strvarsetfn
 switch_heaps
-SHTTY
 tclen
 tcstr
 termflags
--- Src/Zle/compctl.mdd.bak	Mon Nov 22 13:34:14 1999
+++ Src/Zle/compctl.mdd	Mon Nov 22 13:34:26 1999
@@ -1,4 +1,4 @@
-moddeps="complete"
+moddeps="complete zle"
 
 autobins="compctl"
 
--- Src/Zle/complete.export.bak	Mon Nov 22 12:32:55 1999
+++ Src/Zle/complete.export	Mon Nov 22 12:41:58 1999
@@ -19,6 +19,7 @@
 compprefix
 compqiprefix
 compqisuffix
+compqstack
 compquote
 compsuffix
 compwords
@@ -58,6 +59,7 @@
 minfo
 mnum
 mstack
+multiquote
 nmatches
 onlyexpl
 parse_cmatcher
@@ -68,5 +70,6 @@
 ripre
 set_gmatcher
 set_list_array
+tildequote
 update_bmatchers
 ztat
--- Src/Zle/computil.mdd.bak	Mon Nov 22 14:23:44 1999
+++ Src/Zle/computil.mdd	Mon Nov 22 14:23:57 1999
@@ -1,4 +1,4 @@
-moddeps="complete"
+moddeps="complete zle"
 
 objects="computil.o"
 
--- Src/Zle/zle.export.bak	Fri Nov 19 17:51:39 1999
+++ Src/Zle/zle.export	Mon Nov 22 12:39:34 1999
@@ -16,6 +16,7 @@
 clwnum
 clwords
 clwpos
+clwsize
 cmdstr
 compfunc
 compwidget
--- Src/Zle/.distfiles.bak	Mon Nov 22 13:19:48 1999
+++ Src/Zle/.distfiles	Mon Nov 22 15:03:02 1999
@@ -2,7 +2,7 @@
     .cvsignore .distfiles .exrc
     comp.h complete.mdd complete.c complete.export
     compcore.c compmatch.c compresult.c
-    compctl.mdd compctl.c compctl.h compctl.export
+    compctl.mdd compctl.c compctl.h
     complist.mdd complist.c
     computil.mdd computil.c
     deltochar.mdd deltochar.c


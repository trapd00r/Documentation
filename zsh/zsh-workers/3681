From zsh-workers-request@math.gatech.edu Mon Jan 12 11:48:41 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 26920 invoked from network); 12 Jan 1998 11:48:38 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 12 Jan 1998 11:48:38 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id GAA16017;
	Mon, 12 Jan 1998 06:25:47 -0500 (EST)
Resent-Date: Mon, 12 Jan 1998 06:25:47 -0500 (EST)
Date: Mon, 12 Jan 1998 11:27:05 GMT
From: Andrew Main <zefram@tao.co.uk>
Message-Id: <199801121127.LAA02981@diamond.tao.co.uk>
To: zsh-workers@math.gatech.edu
Subject: zsh-3.1.2-zefram3
Resent-Message-ID: <"FhfTV2.0.Cw3.wsVkq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3681
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

I've put together an unofficial release, version 3.1.2-zefram3.  I'm not
up to doing a full release like Zoltan's -- his scripts in the top-level
Makefile don't suit my setup -- so, as was previously my custom with
unofficial releases, the only generated files in the tar are the
autoconf ones.  You'd better have yodl.

Sizes:

117257 zsh-3.1.2-3.1.2-zefram3.diff.gz
669945 zsh-3.1.2-zefram3.tar.gz

MD5 checksums:

03be8fa383b7137f6c91963dbb00b541  zsh-3.1.2-3.1.2-zefram3.diff.gz
028b7c4e6fb9d9866e5ab44f23d0454d  zsh-3.1.2-zefram3.tar.gz

As I'm on a relatively slow link here, that isn't intended to support
an ftp server, someone else will have to host this release.  Offers of
ftp space would be appreciated.  Until these files are ftpable, I am
prepared to send copies to developers by email.

A complete list of patches considered for this release is included below.
I'd particularly like to discuss the recent ZLE-related feature patches:

y  3492 pws      compctl -/ for directory completion like -f
	I like this a lot.  I've really missed this capability in the
	past, and the way it is done here is impressively neat.  I also
	updated the compctl-examples script to use -/ where appropriate,
	which was quite a lot of places.

y  3498 pws      compctl -W to complete under a directory
	I suspect that this could be mostly achieved by -K functions.
	However, it doesn't seem to be possible to precisely duplicate
	the directory behaviour (-/), and this is reasonably neat.

N  3503 wischnow lots of nifty completion options
	This I did not include.  AUTO_GLOB_COMPLETE really has very
	little to do with GLOB_COMPLETE -- all it does is complete from
	the beginning of the word as well as the end.  This is the sort
	of thing that multicomp is for.  COMPLETE_FOLD_CASE I would
	have used had it been separate from the rest of the patch; it
	does something useful that can't easily be done in user space.
	The other compctl options (-. and -:) I do not like.  They seem
	to require an awful lot of code for something that, again,
	should really be part of a completion function.

N  3554 ajrh     allow vared to succeed on EOF
	This can be done by temporarily rebinding ^D to accept-line, or
	to a user-defined widget that conditionally calls accept-line.
	(See Functions/zed for an example of how to temporarily change
	bindings.)  Also, while I agree that vared -c is not much
	use, removing the option entirely will cause problems with
	some scripts.  Changing the default EOF behavior would cause
	similar problems.  While I would like the whole area of EOF
	handling in ZLE to be re-examined, this patch does not do a
	proper job of that.

N  3581 pws      keyboard macros for ZLE
	The functionality is good, but this should be done by *calling*
	the input function, not by modifying it.  Once input is done
	via widgets, this will be implementable in user space.

y  3636 pws      compctl -y and -Y
	compctl -y is good.  It does something that's been on my wish list
	for a long time.  Considering the way variables and functions
	can both be specified with -y, maybe this should be extended to
	-K for consistency.  compctl -Y is pretty useful and neat, but
	I include it with a reservation: perhaps it would be better to
	have the explanation *always* be expanded.  It wouldn't affect
	any scripts, and we could use $_ instead of that icky %n thing.


Patch list:

y  2999 zefram   RM_STAR_WAIT
y  3004 zefram   emulate sh's default prompt
y  3050 zefram   HIST_NO_FUNCTIONS
y  3052 zefram   NO_PROMPT_PERCENT
N  3196 pws      stty settings and background jobs [superseded by 3297]
y  3239 zefram   prompt formatting
y  3240 zefram   always build rlimits module
y  3241 zefram   have static struct builtin objects in modules
y  3242 zefram   makepro.awk handles all types of declaration
y  3243 zefram   move global object declarations into source files
y  3244 zefram   move documentation for bindkey et al into zshmodules(1)
y  3246 hzoli    filter out garbage when importing environment variables
y  3247 hzoli    AUTO_PARAM_KEYS bugfix
y  3249 pws      end-of-pattern markers in globbing
y  3250 zefram   paramsubst() fix for `set "$@"'
y  3251 pws      removed memory leak in disown
y  3252 zefram   automatic Makefile and header generation for module building
N  3253 suzuki   stty settings and background jobs [superseded by 3297]
N  3257 suzuki   stty settings and background jobs [superseded by 3297]
N  3258 hzoli    stty settings and background jobs [superseded by 3297]
y  3260 gcw      crash bug fix in ZLE refresh code
N  3261 pws      3.0 version of patch 3249 [3.0]
N  3263 suzuki   stty settings and background jobs [superseded by 3297]
N  3264 hzoli    stty settings and background jobs [superseded by 3297]
y  3285 pws      in `*(-M)' the (-) should affect interpretation of (M)
y  3293 hzoli    keep original environment around when initialising environment
y  3297 hzoli    stty settings and background jobs
y  3301 pws      fixing a couple of memory leaks
y  3302 suzuki   set STAT_NOSTTY if a job is ever backgrounded
y  3308 pws      avoid unwanted space addition in menu completion
y  3318 pws      PRINT_EIGHT_BIT
y  3353 zefram   ZLE suffix mechanism rewrite
y  3360 pws      Prefer -lcurses to -ltermcap on HP-UX 10.*
y  3368 hzoli    restrict use of leaf optimisation in recursive globs
y  3369 kunihiro rlimits.awk handles GNU-style <resourcebits.h>
N  3380 hzoli    RC_EXPAND_PARAM general weirdness fix [superseded by 3403]
N  3381 hzoli    `wrong character in hungetc()' fix [superseded by 3383]
y  3383 hzoli    `wrong character in hungetc()' fix, fixed
y  3403 hzoli    RC_EXPAND_PARAM, braces, and other widgets, consistentified
y  3417 pws      documentation for 3403 (markup not quite right)
N  3418 pws      print explanation iff there *are* matches [superseded by 3423]
y  3423 hzoli    print explanation iff there are !=1 matches
y  3424 pws      documentation for 3423
y  3438 pws      completion in braces (clashes with 3353)
N  3441 harres   zgetcwd() fix for automounted directories [redundant]
N  3446 pws      makepro.sed fix for HP-UX [redundant with 3242]
N  3456 hzoli    3.0.4: avoid double scan in zgetcwd() [3.0.4]
N  3478 mrb      zrealloc() performs the same checks as zalloc() [in 3522]
y  3484 schaefer c2z updates
y  3492 pws      compctl -/ for directory completion like -f
y  3493 pws      typo fix in documentation of 3492
y  3495 pws      compctl display fix for 3492
N  3496 pws      duplicate of 3495 [duplicate]
y  3498 pws      compctl -W to complete under a directory
y  3502 pws      typo fixes in new compctl options
N  3503 wischnow lots of nifty completion options [can be done in user space]
N  3507 wischnow #if 0 removal for 3503 [not using 3503]
y  3511 schaefer ZLE refresh bugfix
y  3513 pws      fix for globbing [[ fofo == (fo#)# ]], etc.
y  3514 pws      more glob fixes based on 3513
y  3515 pws      yet more glob closure fixes
y  3522 hzoli    3478; rlimits.awk portability; some parameter fiddling
y  3525 pws      cunning performance improvement for glob closures
y  3526 pws      $(r)
y  3531 pws      history suppression improvement
N  3547 pws      RC_EXPAND_PARAM fix for empty arrays [superseded by 3548]
y  3548 hzoli    better RC_EXPAND_PARAM fix for empty arrays
y  3549 pws      better documentation of history expansion modifiers
N  3554 ajrh     allow vared to succeed on EOF [can be done with widgets]
N  3558 wischnow fix for duplicating struct autofn [done a better way]
N  3565 wischnow fixes to 3503 [not using 3503]
N  3581 pws      keyboard macros for ZLE [should be done more cleanly]
N  3582 pws      fixes to 3581 [not using 3581]
N  3586 AIF      go interactive if sourcing a tty [awkward behaviour]
N  3590 pws      getopts fix [causes other buggy behaviour]
y  3598 pws      New version of helpfiles script
N  3621 pws      compctl -Y to display non-default list [superseded by 3636]
y  3625 eggink   ZLE startup shuffle to avoid problems with vared and subshells
N  3626 pws      compctl -Y with scalars [superseded by 3636]
y  3636 pws      compctl -y and -Y
N  3638 schizo   import $HISTCHARS [undesirable behaviour]
N  3644 wischnow duplicate of patch 3558 [duplicate]
N  3649 schaefer 3.0.5: do not adjust window size in zsh -c [3.0.5]
y u1068 pws      preexec shell function

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3ia
Charset: ascii

iQEVAwUBNLkoLZmk9GeOHh7BAQFInQf9FDsiKIqNsuGsevrgkHxNwYoDItqcubtO
3cAgO4BNt89bOTTEoBP/1PSYHQdSxr1HPuNwhgljHLerAKp3yvEU10LKTQU/JhCu
fwiqzdACIGLbzuFCfba9rUBpyBqjSgMJ3gHBBh6EsjwLEFD2PIk1SSsK4InkE0Ll
ieSTDOqNNKIioi6X+r4GBBwPxBXRCTC5tH0ZLcPZBjdD4Ra5Uz2tJKrsieGI8vah
Z7UOKQUkM0lf3puejUkGy5Ib8Q/kEFtuh2g5HFRaIT3yFwDtiAGyyoFo8frByPGX
u4ntlc7xcrEotPLrUwSrEcGkS1ru5zaqM5G/Hj3rDhI2zkkVMzFSgQ==
=TzVC
-----END PGP SIGNATURE-----


From zsh-workers-return-22680-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 08 17:54:00 2006
Return-Path: <zsh-workers-return-22680-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22877 invoked from network); 8 Sep 2006 17:53:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO,UNPARSEABLE_RELAY autolearn=ham version=3.1.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Sep 2006 17:53:58 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 77091 invoked from network); 8 Sep 2006 17:53:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Sep 2006 17:53:49 -0000
Received: (qmail 25859 invoked by alias); 8 Sep 2006 17:53:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22680
Received: (qmail 25850 invoked from network); 8 Sep 2006 17:53:47 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Sep 2006 17:53:47 -0000
Received: (qmail 76850 invoked from network); 8 Sep 2006 17:53:46 -0000
Received: from dan.emsphone.com (199.67.51.101)
  by a.mx.sunsite.dk with SMTP; 8 Sep 2006 17:53:44 -0000
Received: (from dan@localhost)
	by dan.emsphone.com (8.13.6/8.13.6) id k88HrKko038073;
	Fri, 8 Sep 2006 12:53:20 -0500 (CDT)
	(envelope-from dan)
Date: Fri, 8 Sep 2006 12:53:20 -0500
From: Dan Nelson <dnelson@allantgroup.com>
To: "arno." <arno.@no-log.org>
Cc: zsh-workers@sunsite.dk
Subject: Re: bug in zsh/system : `syserror ENOENT` doesn't work
Message-ID: <20060908175320.GC30620@dan.emsphone.com>
References: <20060908170142.GA32049@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20060908170142.GA32049@localhost.localdomain>
X-OS: FreeBSD 6.1-STABLE
X-message-flag: Outlook Error
User-Agent: Mutt/1.5.13 (2006-08-11)

In the last episode (Sep 08), arno. said:
> In module, zsh/system, some symbolic names are not recognized, but are 
> recognized otherwise by my system (Debian testing)
> 
> ? zmodload zsh/system                                                                                              
> ? syserror ENOENT
> ? echo $?                                                                                           
> 2                                             
> 
> So, I have to refer to them with their number
> 
> ? syserror E2   
> No such file or directory
> ? syserror 2   
> No such file or directory
> 
> errnos are defined on my system in /usr/include/asm-generic/errno.h
> and that file contains the line :
> #include <asm-generic/errno-base.h>

Actually errnos are defined in /usr/include/errno.h . Linux happens to
#include a maze of twisty headers, each defining some errors along the
way.  The zsh configure script looks like it starts at errno.h and
tries find the included header with the most defines in it.  Maybe it
should just build a list of candidate files and pass them all to
errnames1.

-- 
	Dan Nelson
	dnelson@allantgroup.com


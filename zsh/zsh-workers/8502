From zsh-workers-return-8502-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Nov 03 04:52:51 1999
Return-Path: <zsh-workers-return-8502-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17135 invoked from network); 3 Nov 1999 04:52:50 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Nov 1999 04:52:50 -0000
Received: (qmail 330 invoked by alias); 3 Nov 1999 04:52:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8502
Received: (qmail 323 invoked from network); 3 Nov 1999 04:52:44 -0000
Message-ID: <19991103050333.26981.rocketmail@web1304.mail.yahoo.com>
Date: Tue, 2 Nov 1999 21:03:33 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Problem with zmodload & compinit
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I started pulling zsh from Tanaka's CVS repository, and was seeing a few
undefined functions due to the separation of all the completion code.
So I started compiling without dynamic loading support, to find these
problems at link time rather than run time.

Once I got a good build, I found that the compinit function fails
because it calls "zmodload -i parameter".  Zsh reports "bad option:-i".
In builtin.c, there is an #ifdef that controls what command line options
are valid for zmodload depending on whether or not dynamic loading is
enabled.

What is the proper solution to this problem?

Should compinit (and any other functions) be changed to check if it
is in a dynamic loading situation before calling zmodload?  Or should
zmodload be modified to ignore "-i" (and other flags) in non-dyanmic
loading situations?

-FR


__________________________________________________
Do You Yahoo!?
Bid and sell for free at http://auctions.yahoo.com


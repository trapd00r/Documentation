From zsh-workers-return-19946-mason-zsh=primenet.com.au@sunsite.dk Fri May 14 07:39:54 2004
Return-Path: <zsh-workers-return-19946-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2614 invoked from network); 14 May 2004 07:39:53 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 14 May 2004 07:39:53 -0000
Received: (qmail 21026 invoked from network); 14 May 2004 07:39:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 14 May 2004 07:39:39 -0000
Received: (qmail 17309 invoked by alias); 14 May 2004 07:39:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19946
Received: (qmail 5016 invoked from network); 14 May 2004 02:57:47 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 14 May 2004 02:57:44 -0000
Received: (qmail 32373 invoked from network); 14 May 2004 02:57:44 -0000
Received: from mx5.informatik.uni-tuebingen.de (134.2.12.32)
  by a.mx.sunsite.dk with SMTP; 14 May 2004 02:57:42 -0000
Received: from localhost (loopback [127.0.0.1])
	by mx5.informatik.uni-tuebingen.de (Postfix) with ESMTP
	id 0C73C120; Fri, 14 May 2004 04:57:15 +0200 (MST)
Received: from mx5.informatik.uni-tuebingen.de ([127.0.0.1])
 by localhost (mx5 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 14750-02; Fri, 14 May 2004 04:57:13 +0200 (DFT)
Received: from dual (semeai.Informatik.Uni-Tuebingen.De [134.2.15.66])
	by mx5.informatik.uni-tuebingen.de (Postfix) with ESMTP
	id 33028113; Fri, 14 May 2004 04:57:12 +0200 (MST)
Received: from mrvn by dual with local (Exim 3.36 #1 (Debian))
	id 1BOSrn-00061x-00; Fri, 14 May 2004 04:56:07 +0200
To: "Christian T. Steigies" <cts@debian.org>
Cc: Clint Adams <schizo@debian.org>, zsh-workers@sunsite.dk,
	troup@debian.org, sbuild@packages.debian.org, Q@ping.be,
	m68k-build@nocrew.org
Subject: Re: zsh (4.2.0-10)
References: <20040513074011.GA31678@skeeve>
	<20040513132408.GA32597@scowler.net>
	<20040513133541.GA24070@auric.debian.org>
	<20040513140213.GA26274@auric.debian.org>
	<20040513141237.GA525@scowler.net>
	<20040513144300.GA26771@auric.debian.org>
	<20040513160604.GA1922@scowler.net> <20040513192544.GA11594@skeeve>
From: Goswin von Brederlow <brederlo@informatik.uni-tuebingen.de>
Date: Fri, 14 May 2004 04:56:02 +0200
In-Reply-To: <20040513192544.GA11594@skeeve> (Christian T. Steigies's
 message of "Thu, 13 May 2004 21:25:44 +0200")
Message-ID: <87pt97ogxp.fsf@mrvn.homelinux.org>
User-Agent: Gnus/5.1006 (Gnus v5.10.6) XEmacs/21.4 (Security Through
 Obscurity, linux)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Goswin von Brederlow <brederlo@informatik.uni-tuebingen.de>
X-Virus-Scanned: by amavisd-new (McAfee AntiVirus) at informatik.uni-tuebingen.de
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

"Christian T. Steigies" <cts@debian.org> writes:

> On Thu, May 13, 2004 at 12:06:04PM -0400, Clint Adams wrote:
>> > Oups... I tried it locally, ran top in one shell, SIGSTOP (and also STOP)
>> > stop the process like ctrl-z. With SIGCONT or CONT it somehow starts again,
>> > but not for very long. Is this really supposed to work?
>> 
>> As I recall, if you kill the right process with a SIGTERM or something,
>> then send SIGCONT to the remaining processes, it will proceed to the
>> other tests and complete the build successfully.
>> 
>> > Yes. I was wondering, too. The previous build worked out fine, it was built
>> > on a different box. I also had zsh-beta a couple of times and zsh_4.2.0-7 on
>> > my mac without problems, so maybe its something fancy with the Amiga? I got
>> > an ICE while building gcc-snapshot on the Amiga where a mac crashed only
>> > much later. Should I try to build it on another box? Currently we have some
>> > CPU cycles to kill on m68k, I'll just try t build it on my mac.
>> 
>> I find it curious that only sbuild exposes this problem, and now that
>> it's manifesting on multiple architectures, I have even less of an idea
>> of what the problem could be.
>> 
>> I wonder if a simple perl script which merely did the same signal handling as
>> sbuild and ran zsh's make check would give the same result.
>
> I don't think it's sbuild's fault, after all it only installes/deinstalls
> packages and then calls dpkg-buildpackage.
> But the interesting thing is, it now built fine on my mac. The significant
> differences between those machines are, the amiga has an 68060 processor,
> while the mac has an 68040. The amiga runs linux-2.4.26, while the mac runs
> linux-2.2.26.
>
> Either I had too many cosmic rays from work in my pocket, or we have a
> problem hiding in 060 or linux-2.4 support on m68k. Does somebody want to
> build gcc-snapshot on anon 060 machine?

See BTS. With kernel 2.2.10 on my Amiga 68060 it fails with a normal
error real early. No ICE or any.

> Or maybe I am completely wrong, an easy test would be if somebody tried to
> build zsh on another 060 machine to see if it hangs during the tests too.
>
> Christian

Zsh build fine on Amiga: debuild -B -us -uc -m"Goswin von Brederlow <brederlo@informatik.uni-tuebingen.de>"

A4000T 68040@50MHz 96Mb ram
Linux a4000 2.2.10 #1 Mon Nov 27 20:50:14 CET 2000 m68k GNU/Linux

sid chroot with proc mounted and small /dev

mrvn@a4000:~% ls /mnt/chroot/sid/dev
MAKEDEV@  dsp1      loop4   midi1       port   ram14  ram9       smpte3
agpgart   dsp2      loop5   midi2       ptmx   ram15  random     sndstat
audio     dsp3      loop6   midi3       pts/   ram16  rmidi0     tty
audio1    full      loop7   mixer       ram@   ram2   rmidi1     tty0
audio2    initctl|  mem     mixer1      ram0   ram3   rmidi2     urandom
audio3    kmem      midi0   mixer2      ram1   ram4   rmidi3     zero
audioctl  loop0     midi00  mixer3      ram10  ram5   sequencer
console   loop1     midi01  mpu401data  ram11  ram6   smpte0
core@     loop2     midi02  mpu401stat  ram12  ram7   smpte1
dsp       loop3     midi03  null        ram13  ram8   smpte2

mrvn@a4000:~% gcc --version
gcc (GCC) 3.3.3 (Debian 20040429)

mrvn@a4000:~% ld --version
GNU ld version 2.14.90.0.7 20031029 Debian GNU/Linux

mrvn@a4000:~% as --version 
GNU assembler 2.14.90.0.7 20031029 Debian GNU/Linux

mrvn@a4000:~/zsh% cat *changes
Format: 1.7
Date: Wed, 12 May 2004 09:22:36 -0400
Source: zsh
Binary: zsh zsh-static zsh-doc
Architecture: m68k
Version: 4.2.0-10
Distribution: unstable
Urgency: medium
Maintainer: Goswin von Brederlow <brederlo@informatik.uni-tuebingen.de>
Changed-By: Clint Adams <schizo@debian.org>
Description:
 zsh        - A shell with lots of features
 zsh-static - A shell with lots of features (static link)
Changes:
 zsh (4.2.0-10) unstable; urgency=medium
 . 
   * ZW#19921: fix for ZW#19920.
   * ZW#19877: fix for ZW#19869.
   * ZW#19878: fix for ZW#19877.
   * ZW#19893: fix the potential for an infinite loop in history locking.
Files:
 14ad54d8f01446c4b5bea411cb059591 1922336 shells optional zsh_4.2.0-10_m68k.deb
 21f97d44023fee096daa0652418bc191 552574 shells optional zsh-static_4.2.0-10_m68k.deb



Now we need someone with 2.4 + 040 and amiga + 2.4 to test.

MfG
        Goswin


From zsh-users-return-5057-mason-zsh=primenet.com.au@sunsite.dk Sat Jun 15 21:29:51 2002
Return-Path: <zsh-users-return-5057-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7706 invoked from network); 15 Jun 2002 21:29:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Jun 2002 21:29:50 -0000
Received: (qmail 12353 invoked by alias); 15 Jun 2002 21:29:27 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5057
Received: (qmail 12336 invoked from network); 15 Jun 2002 21:29:26 -0000
From: Eric Gillespie <epg@pretzelnet.org>
To: Mario Lang <mlang@delysid.org>
Cc: zsh-users@sunsite.auc.dk
Subject: Re: {(t)...} usage 
In-Reply-To: Message from Mario Lang <mlang@delysid.org> 
   of "Fri, 14 Jun 2002 17:06:37 +0200." <87it4l7vcy.fsf@lexx.delysid.org> 
References: <87it4l7vcy.fsf@lexx.delysid.org> 
User-Agent: nmh/1.0.4+dev (i386-unknown-netbsdelf1.5.2)
Date: Sat, 15 Jun 2002 16:29:18 -0500
Sender: epg@romulus.pretzelnet.org
Message-Id: <20020615212919.29113A2C8@romulus.pretzelnet.org>

Mario Lang <mlang@delysid.org> writes:

> Can anyone give me an example on how to do this?

Here's how i do host completion based purely on ssh known_hosts
files.  This strips newlines and comments.

my_hosts=(${(M)${${${${(f)"$(<~/.ssh/known_hosts2)"}:#[0-9]*}%%\ *}%%,*}:#^\#})
etc_file=/etc/ssh/ssh_known_hosts2
if [[ -f $etc_file ]]; then
    etc_hosts=(${(M)${${${${(f)"$(<$etc_file)"}:#[0-9]*}%%\ *}%%,*}:#^\#})
fi
zstyle ':completion:*:*:(ping|nc|s(sh|cp)):*' hosts $etc_hosts $my_hosts

--  
Eric Gillespie <*> epg@pretzelnet.org

Conformity is a sin.


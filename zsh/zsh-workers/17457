From zsh-workers-return-17457-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 15 20:57:38 2002
Return-Path: <zsh-workers-return-17457-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17968 invoked from network); 15 Jul 2002 20:57:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Jul 2002 20:57:37 -0000
Received: (qmail 22524 invoked by alias); 15 Jul 2002 20:57:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17457
Received: (qmail 22512 invoked from network); 15 Jul 2002 20:57:29 -0000
Date: Mon, 15 Jul 2002 16:57:20 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Cc: 152795-forwarded@bugs.debian.org
Subject: _cvs malfunction
Message-ID: <20020715205720.GA11288@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.28i
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

Files with RCS kflags in CVS/Entries will not be excluded from
completion for 'cvs add'.

This seems to fix it, but since it seems to have been purposeful, I am
not committing.  Can someone explain what's supposed to be going on
here?

Index: Completion/Unix/Command/_cvs
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_cvs,v
retrieving revision 1.15
diff -u -r1.15 _cvs
--- Completion/Unix/Command/_cvs	26 May 2002 19:22:43 -0000	1.15
+++ Completion/Unix/Command/_cvs	15 Jul 2002 20:53:11 -0000
@@ -963,7 +963,7 @@
   realdir=${(e)~linedir}
   [[ -f "$realdir"CVS/Entries ]] && {
     omitpats=(
-      ${${${${(M)${${(f)"$(<"$realdir"CVS/Entries)"}:#/*/-*}:#(D|)/*}#(D|)/}%%/*}//(#m)[][*?()<|^~#\\]/\\$MATCH}
+      ${${${${(M)${(f)"$(<"$realdir"CVS/Entries)"}:#(D|)/*}#(D|)/}%%/*}//(#m)[][*?()<|^~#\\]/\\$MATCH}
       $_cvs_ignore_default
       ${=cvsignore}
     )


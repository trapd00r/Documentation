From zsh-workers-return-20779-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 03 10:41:46 2005
Return-Path: <zsh-workers-return-20779-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11682 invoked from network); 3 Feb 2005 10:41:40 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Feb 2005 10:41:40 -0000
Received: (qmail 99173 invoked from network); 3 Feb 2005 10:41:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Feb 2005 10:41:21 -0000
Received: (qmail 16554 invoked by alias); 3 Feb 2005 10:41:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20779
Received: (qmail 16540 invoked from network); 3 Feb 2005 10:41:17 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Feb 2005 10:41:17 -0000
Received: (qmail 98671 invoked from network); 3 Feb 2005 10:40:38 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 3 Feb 2005 10:40:33 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6ee43601b30a6c8d01958@MAILSWEEPER01.csr.com>;
 Thu, 3 Feb 2005 10:39:07 +0000
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 3 Feb 2005 10:40:35 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j13AeUmp024394;
	Thu, 3 Feb 2005 10:40:31 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j13AeUIk024391;
	Thu, 3 Feb 2005 10:40:30 GMT
Message-Id: <200502031040.j13AeUIk024391@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Cc: 293364-forwarded@bugs.debian.org
Subject: Re: [arnova@xs4all.nl: Bug#293364: Bug in ZSH (zshell) using Debian-testing (Sarge)] 
In-reply-to: <20050202193816.GA14402@scowler.net> 
References: <20050202193816.GA14402@scowler.net>
Date: Thu, 03 Feb 2005 10:40:29 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 03 Feb 2005 10:40:35.0805 (UTC) FILETIME=[CB4AA8D0:01C509DC]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.4

Clint Adams wrote:
>  When I exit a zshell (for example when exiting from su) zshell segfaults 
>  when:
>  - /usr/share/zsh/functions/TRAPEXIT exists and is executable
>  - And the function is loaded (for example from /etc/zsh/zshrc with 
>  "autoload ${^/usr/share/zsh/functions}/*(.xN:t)" )
> 
>  I am using Debian GNU/Linux 3.2 (testing/sarge)

I remember not being satisfied with the results of the first round of
fixing autoloaded traps, so I'm not surprises something still needs
fixing.  It was quite low priority, since it's not the natural way to
use a trap, anything to do with traps is complicated, and anything to do
with autoloaded traps doubly so, so I left it.  I'll try and look it
over the next few days.

If we'd never had function-style traps in the first place this wouldn't
have happened...

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


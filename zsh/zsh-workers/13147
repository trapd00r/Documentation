From zsh-workers-return-13147-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Nov 08 19:18:07 2000
Return-Path: <zsh-workers-return-13147-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 566 invoked from network); 8 Nov 2000 19:18:07 -0000
Received: from ns2.primenet.com.au (HELO mail2.primenet.com.au) (?Bf+f4jGXbXBojht46RA6w/LEBfi8iEHg?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 8 Nov 2000 19:18:07 -0000
Received: (qmail 6282 invoked from network); 8 Nov 2000 19:11:24 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns2.primenet.com.au with SMTP; 8 Nov 2000 19:11:24 -0000
Received: (qmail 6910 invoked by alias); 8 Nov 2000 19:10:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13147
Received: (qmail 6903 invoked from network); 8 Nov 2000 19:10:06 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <zsh-workers@sunsite.auc.dk>
Subject: Bug in cygwin with select and master pty
Date: Wed, 8 Nov 2000 22:10:02 +0300
Message-ID: <001e01c049b7$7f159ea0$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
In-Reply-To: <1001108155814.ZM14060@candle.brasslantern.com>

>
> } About select - so far there seems to be no known problems under cygwin
> } (that does not mean, there are no problems).
>
> OK, if there are no known problems with select, then the test on line
> 1376 can change from `ret <= 0' to `ret < 0' -- and in that case it's
> possible that we could split read_poll() into two cases, HAVE_SELECT v.
> all the other code that's there.  I won't do that for now, though.
>

Life is fun. 5 minutes later I discovered a bug that made blocking multiline
reads (with or without pattern) hang at the end of the first line. I sent sort
of a patch to cygwin list, but I am not sure if it really does the right thing
(it fixed the bug I've seen, O.K. The question is whether it introduced
another bugs :-)

Anyway, fiddling with currently released versions of cygwin is pretty useless
wrt to zpty (all of them are buggy in some way). Unfortunately (to us) zsh
seems to be the only program that has these problems. With all implications.

The pgrp problem still remains.

-andrej


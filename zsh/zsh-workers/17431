From zsh-workers-return-17431-mason-zsh=primenet.com.au@sunsite.dk Fri Jul 05 10:39:44 2002
Return-Path: <zsh-workers-return-17431-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14721 invoked from network); 5 Jul 2002 10:39:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 5 Jul 2002 10:39:42 -0000
Received: (qmail 23716 invoked by alias); 5 Jul 2002 10:39:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17431
Received: (qmail 23703 invoked from network); 5 Jul 2002 10:39:36 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Clint Adams'" <clint@zsh.org>
Cc: "'Zsh hackers list'" <zsh-workers@sunsite.dk>
Subject: RE: PATCH: zsh/pcre module building
Date: Fri, 5 Jul 2002 14:39:25 +0400
Message-ID: <6134254DE87BD411908B00A0C99B044F03A0B338@mowd019a.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.3416
In-Reply-To: <20020704170748.GA30187@dman.com>
x-mimeole: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal


> 
> > - I hoped to create implementation that would share configure cache
and
> > make is possible to list help from every module's configure script
using
> > top-level configure --help and pass parameters to every module's
> > configure script using top-level configure. Using stock autoconf it
is
> 
> Any progress on this?  Are you using AC_CONFIG_SUBDIRS?

Hmm ... I thought I have sent follow-up but may be I just intended to.

Unfortunately so far I could not think out any alternative
implementation that is more simple than we currently have that makes the
rewrite rather pointless.

AC_CONFIG_SUBDIRS is not suitable (and probably will never be suitable).
It is meant for mostly independent packages with minimal information
passed between them. What is more important, there is no way to pass
information back, i.e. subpackage cannot modify main package
configuration. In our case it means, that if a module decides it has to
be built statically it has no way to notify main zsh about it.

There are some possibilities using libtool + libltdl. The main point is,
libtool, to some extent, allows you to link both static libraries,
shared libraries and DSO objects without changing Makefile, depending on
how objects have been built. It does not have full functionality that we
possibly need but it is possible to patch libtool of course.

Sorry that there was not much progress.

-andrej


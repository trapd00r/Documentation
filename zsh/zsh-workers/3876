From zsh-workers-request@math.gatech.edu Mon Apr 27 09:30:55 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16161 invoked from network); 27 Apr 1998 09:30:53 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 27 Apr 1998 09:30:53 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id FAA11181;
	Mon, 27 Apr 1998 05:26:39 -0400 (EDT)
Resent-Date: Mon, 27 Apr 1998 05:26:39 -0400 (EDT)
Date: Mon, 27 Apr 1998 10:26:43 +0100
From: Andrew Main <zefram@tao.co.uk>
Message-Id: <199804270926.KAA25069@diamond.tao.co.uk>
To: zsh-workers@math.gatech.edu
Subject: PATCH: another glob fix
X-Patch: 275
Resent-Message-ID: <"RXarg.0.ek2.Ez4Hr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3876
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

*This* is why matchpat() was adding an extra layer of parens.  Don't use
3.1.2-zefram4 to run configure scripts.

 *** Src/glob.c	1998/04/26 15:56:37	1.47
 --- Src/glob.c	1998/04/26 19:29:04
 ***************
 *** 706,717 ****
   	    c3 = parsecompsw(gflag);
   	    if (!c3)
   		return NULL;
 ! 	} else {
 ! 	    /* mark if end of pattern or path component */
 ! 	    if (!*pptr || *pptr == '/')
 ! 		c2->stat |= C_LAST;
   	    c3 = NULL;
 ! 	}
   	c2->str = dupstring("");
   	c2->left = c1;
   	c2->right = c3;
 --- 706,716 ----
   	    c3 = parsecompsw(gflag);
   	    if (!c3)
   		return NULL;
 ! 	} else
   	    c3 = NULL;
 ! 	/* mark if end of pattern or path component */
 ! 	if (!*pptr || *pptr == '/')
 ! 	    c1->stat |= c2->stat = C_LAST;
   	c2->str = dupstring("");
   	c2->left = c1;
   	c2->right = c3;

-----BEGIN PGP SIGNATURE-----
Version: PGPfreeware 5.0i for non-commercial use
Charset: ascii

iQEVAwUBNUOMRpmk9GeOHh7BAQGq6gf/fTv0pycEa8VmTeo6c2SmAVfGIl8szUtO
Nb6yPaP1pnL41jhozZo/9hywC3nz/xYpJq3YJ8EuRd4aCmfC8jUgntsQg5bHH0pE
eNKb8mHxeRFN1z3alYGmOI7Jg61niRWxfXIVLaq1mSWpdmmjlzaWZFrzgnaNRG9S
qr4dwPEU8i6mH3OR6FXeQ32Z68lnThaDkUH0ewRFelGqgcdX70fg4yACANr8OwuO
1d1eJx99qaCVo1KstuhN+snWf/LnCvydEM31d4EznWlyK1E51gnBqqQ45R8YmpAJ
kfXYU4OQwv/WVWsokzA8uun8AE/VpZaLVm2CA4KxW8JUvKbMNmo0qA==
=/uy8
-----END PGP SIGNATURE-----


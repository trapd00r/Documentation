From zsh-users-return-14741-mason-zsh=primenet.com.au@zsh.org Sat Jan 23 23:53:11 2010
Return-Path: <zsh-users-return-14741-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15858 invoked by alias); 23 Jan 2010 23:53:11 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14741
Received: (qmail 206 invoked from network); 23 Jan 2010 23:53:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100123155239.ZM27228@torch.brasslantern.com>
Date: Sat, 23 Jan 2010 15:52:39 -0800
In-reply-to: <4B597061.10701@mycircuit.org>
Comments: In reply to Peter <vmail@mycircuit.org>
 "Re: what is the effect of a percentage sign (%) as last character on	the
 command line" (Jan 22, 10:31am)
References: <4B582F3C.2010709@mycircuit.org>
	<100121080540.ZM21444@torch.brasslantern.com>	<4B58AB3A.7050300@mycircuit.org>
	<2d3b879b1001211336m5b78982au96f267ea472af43d@mail.gmail.com>
	<4B58D35D.1050208@mycircuit.org>	<100121182713.ZM21821@torch.brasslantern.com>
	<4B597061.10701@mycircuit.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: Peter <vmail@mycircuit.org>
Subject: Re: what is the effect of a percentage sign (%) as last character on
	the command line
Cc: zsh-users@zsh.org
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Jan 22, 10:31am, Peter wrote:
}
} I had  in .zshrc
} 
} case $TERM in
}      (xterm*|rxvt|mrxvt)
}      print -Pn "\e]0;%n@%m: $1\a"
}      ;;
}    esac

I presume you had that somewhere interesting like inside your precmd
or preexec function?  Just having it "in .zshrc" wouldn't affect any
command except possibly the very first one.

} I take it as an exercise for 2010 to understand why the first version 
} causes the erroneous behavior (;-

Most likely there's an incomplete terminal control sequence being output
which causes the terminal to consume your input (or cover up the output).
Having the "% " in there somehow "finishes" that terminal control and
thus allows the I/O to pass normally through the shell.

You might be able to see more precisely what happened by running zsh
under "script" and then looking at the resulting typescript file.

SYNOPSIS
     script [-a] [-c COMMAND] [-f] [-q] [-t] [file]

DESCRIPTION
     Script makes a typescript of everything printed on your terminal


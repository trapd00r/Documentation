From leibniz!stucki@leibniz.math.fu-berlin.de Sat Mar 23 09:13:30 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id JAA03539 for <mason@werple.mira.net.au>; Sat, 23 Mar 1996 09:13:27 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA17298; Fri, 22 Mar 1996 16:53:19 -0500 (EST)
Resent-Date: Fri, 22 Mar 1996 16:53:19 -0500 (EST)
From: leibniz!stucki@leibniz.math.fu-berlin.de
Message-Id: <m0u0Eko-00080xC@leibniz.math.fu-berlin.de>
Subject: Re: zsh hangs on IRIX 5.2 / me to: (SunOS4.1.3 + Solaris 2.4)
To: braemer@doc.physi.uni-heidelberg.de (Achim Braemer)
Date: Fri, 22 Mar 1996 22:50:31 +0100 (MET)
In-Reply-To: <9603222113.AA06879@doc.physi.uni-heidelberg.de> from "Achim Braemer" at Mar 22, 96 10:13:54 pm
X-TestHeader: Written by C. v. Stuckrad, FB. Mathematik, EDV
X-TestHeader: FU-Berlin, Dahlem, Arnimallee 2-6, 14195 Berlin, GERMANY
X-Mailer: ELM [version 2.4 PL25 ME8b]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: stucki@math.gatech.edu
Resent-Message-ID: <"k4Wcy1.0.CE4.E5oKn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/850
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 2497
Status: OR


I see the same behavior as he does in two other Systems:

Quoting Achim Braemer :
> 
> I am experiencing strange zsh behavior on IRIX 5.2 with zsh
> 2.6-beta13. It has been there a long time, I don't know exactly how
> long.
At least the last two years, I complained about this shortly after
we installed our first zsh.

> When a user logs in to the local the system using rlogin (with zsh as
> login shell, of course), and for some reason the session crashes
> (typically because the remote process is being killed because of idle
> time) then the local zsh process hangs and consumes 99% CPU time.
exactly the same here, except it's not necessary to have zsh for
login-shell (see below).

> This does not happen with sh, ksh or csh as login shell, but I am still
> not quite sure whether it's really zsh's fault or rather an IRIX bug.
It IS some zsh-bug, but it's a strange one ...

> Any help would be greatly appreciated, because the problem occurs quite
> often on my system blocking useful work!
It even kills a whole machine overnight, by blocking all usable CPU cycles
and this way crowding a machine with cron-jobs 'til it 'breaks'.


Well, we traced/debugged a bit and found out:
- it does NOT happen if you 'unset ignoreeof'
  ( so zsh is 'simply' ignoring an eof-condition FOREVER )

- if you hit TEN  '^D' (eof) on the keyboard zsh goes away
  ( even with ignoreeof set , so THERE is a maximum )

- a zsh which idles (waits for the keyboard/tty) goes away
  when the Window/Modem-Connection dies

- BUT a zsh WAITING FOR A PROCESS TO COMPLETE,
  RUNS FOREVER READING 'nothing' FROM STDIN
  IF THE SUBPROCESS VANISHES AND
  ZSH WAKES UP ON A 'DEAD' TTY.

May be this helps ?

We too (at math.fu-berlin.de) would GREATLY APPRECIATE ANYTHING which
allows to safely set ignoreeof !

Stucki

   **v**   ----v-----------------------------------------------------------
    S    *    |   Christoph von Stuckrad      | <stucki@math.fu-berlin.de> \
    t   /  *  |   Dahlem                      | ...!unido!fub!leibniz!stucki|
    u /     * |   Fachbereich Mathematik, EDV | Tel:+49 30 838-754{9|8}     |
<stucki>- - C |   Freie Universitaet Berlin   | Fax:+49 30 838-5913         |
    k \     * |   Arnimallee 2-6              | IRC: /nick stucki           |
    r   \  *  | D-14195 Berlin                | PGP: not yet certified :-(  |
    a    *    |   Germany                     |      ask for key by mail   /
  **d**   ----^-----------------------------------------------------------



From zsh-workers-return-18032-mason-zsh=primenet.com.au@sunsite.dk Sat Dec 28 04:37:47 2002
Return-Path: <zsh-workers-return-18032-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22159 invoked from network); 28 Dec 2002 04:37:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 28 Dec 2002 04:37:46 -0000
Received: (qmail 11974 invoked by alias); 28 Dec 2002 04:37:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18032
Received: (qmail 11952 invoked from network); 28 Dec 2002 04:37:37 -0000
From: Carlos Carvalho <carlos@fisica.ufpr.br>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-Id: <15885.10892.679601.764518@fisica.ufpr.br>
Date: Sat, 28 Dec 2002 02:37:32 -0200
To: zsh-workers@sunsite.dk
Subject: 4.0.6 bug: out of memory with ulimit
X-Mailer: VM 7.07 under Emacs 19.34.1

Hi people,

Season's greetings to you all.

Time for a report after 9 years away from zsh development...
It's nice to see that many people of that time are still around :-)

I've stumbled on what I consider a bug in 4.0.6: if I use this command
in /etc/zshenv

  ulimit -HS -d 1048576 -v 1048576

I get "/etc/zsh/zshrc:-1: fatal error: out of memory" when I start the
executable. This doesn't happen with 4.0.4. I tried 4.0.6 with the
original distribution and with Debian's patches. The Debian binary,
which uses dynamic loading, also chokes. The problem goes away if I
remove the -v 1048576 portion of the line.

This is the config I used:

./configure --prefix=/usr --bindir=/bin --mandir=/usr/share/man --infodir=/usr/share/info --enable-maildir-support --enable-max-jobtable-size=256 --enable-function-subdirs --enable-site-fndir=/usr/local/share/zsh/site-functions --with-curses-terminfo --enable-etcdir=/etc/zsh --disable-dynamic

Independently of my .zshenv and other init files, I find it strange
that the program doesn't run because the memory limitation is not at
all stringent.

If there's something else useful to inform please tell me.


From zsh-workers-return-15353-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 10 08:14:37 2001
Return-Path: <zsh-workers-return-15353-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18877 invoked from network); 10 Jul 2001 08:14:30 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Jul 2001 08:14:30 -0000
Received: (qmail 27967 invoked by alias); 10 Jul 2001 08:13:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15353
Received: (qmail 27955 invoked from network); 10 Jul 2001 08:13:57 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010710081054.ZM28108@candle.brasslantern.com>
Date: Tue, 10 Jul 2001 08:10:54 +0000
In-Reply-To: <Pine.SV4.4.33.0107100922120.22525-100000@itsrm2.mow.siemens.ru>
Comments: In reply to Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
        "Re: zsh 4.x bug in completion?" (Jul 10,  9:24am)
References: <Pine.SV4.4.33.0107100922120.22525-100000@itsrm2.mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: zsh 4.x bug in completion?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I get very strange behavior from 4.0.2.

With

zstyle ':completion:*' completer _complete _prefix  

I get:

schaefer<503> <Ctrl-P>
schaefer<503> echo foo<Ctrl-A>
schaefer<503> sud<TAB>echo foo
schaefer<503> sudoecho  foo
                       ^
		       cursor here

That is, it inserts `sudo' with no trailing space, but then moves to
the end of the word `echo' and adds a space *there*.  That is almost
certainly wrong?

I get exactly the same thing from 4.1.0-dev-2.

If I then add

zstyle ':completion:*' add-space yes

I get `sudo echo  foo', that is, it has added a space both after `sudo'
and after `echo'.

And, by the way, with TAB bound to expand-or-complete-prefix, I can in
fact reproduce the original complaint.  Auto-removing the space may make
sense when completing in the middle of a file path, but it doesn't when
completing in command position.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


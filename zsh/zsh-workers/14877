From zsh-workers-return-14877-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 13 05:03:28 2001
Return-Path: <zsh-workers-return-14877-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15276 invoked from network); 13 Jun 2001 05:03:24 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Jun 2001 05:03:24 -0000
Received: (qmail 1258 invoked by alias); 13 Jun 2001 05:02:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14877
Received: (qmail 1231 invoked from network); 13 Jun 2001 05:02:37 -0000
X-Authentication-Warning: candle.brasslantern.com: schaefer set sender to lantern@shell10.ba.best.com using -f
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010613050029.ZM25098@candle.brasslantern.com>
Date: Wed, 13 Jun 2001 05:00:29 +0000
In-Reply-To: <Tc0a88d01541a07696f@mailsweeper01.cambridgesiliconradio.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Re: HP-UX 11.00 tgetenv dilemma" (Jun 12,  5:04pm)
References: <Tc0a88d01541a07696f@mailsweeper01.cambridgesiliconradio.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Peter Stephenson <pws@csr.com>, zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: HP-UX 11.00 tgetenv dilemma
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 12,  5:04pm, Peter Stephenson wrote:
}
} "Bart Schaefer" wrote:
} > 
} > The remaining problem is that KSH_TYPESET should be set by `emulate bash',
} > which it is not because `emulate bash' is equivalent to `emulate sh'.
} 
} ...and we don't want to set it for that because it's apparently correct for
} the POSIX shell.

Does the POSIX shell even permit parm=value arguments to `export' and
`typeset'?  Maybe we're worrying about an impossibility.  We've rarely
hesitated to allow forward-compatible-only extensions (i.e., in the
emulated shell the extension would cause an actual syntax error) to
remain in effect even during `emulate -R', as we're mainly concerned
that scripts written *without* such extensions will work properly.

} Should we introduce a separate emulation for bash? It's getting
} horribly complicated and we've never been that concerned about bash
} compatilibity for non-POSIX features.

Hrm.  Either we should actually make it work, or we should document that
bash is not fully emulated (the way we document that csh is not fully
emulated).  Or both, as there are probably other bash-isms that we don't
emulate, though we have a whole lot of OPT_ALIAS things for bash.  Or
else remove `emulate bash' again and have only (|c|k|z)sh.

Doesn't seem like it's all that complicated to add another flag, though.

} By the way, bash also seems to have the equivalent of MAGIC_EQUAL_SUBST

Hrm, again.  I suppose we could special-case those two options in the
emulate() function when the argument is `bash', although their default
values would then appear reversed in the output from `setopt'.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


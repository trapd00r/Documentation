From hzoli@cs.elte.hu Tue Jun 11 20:12:10 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id UAA14076 for <mason@werple.mira.net.au>; Tue, 11 Jun 1996 20:12:07 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id FAA09811; Tue, 11 Jun 1996 05:50:56 -0400 (EDT)
Resent-Date: Tue, 11 Jun 1996 05:50:22 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199606110946.LAA10279@bolyai.cs.elte.hu>
Subject: Re: bugs
To: vlefevre@ens-lyon.fr
Date: Tue, 11 Jun 1996 11:46:39 +0200 (MET DST)
Cc: zsh-users@math.gatech.edu, vlefevre@lip.ens-lyon.fr
In-Reply-To: <199606110016.CAA29355@woodstock.ens-lyon.fr> from Vincent Lefevre at "Jun 11, 96 02:16:33 am"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL16 (25)]
MIME-Version: 1.0
Content-Type: application/pgp; format=text; x-action=sign
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"_N7o_1.0.vO2.T5Kln"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/251
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1198
Status: OR

-----BEGIN PGP SIGNED MESSAGE-----

> Now here's another bug:
> 
> I type:
> echo $ZSH_
> then I type TAB 3 times. Here's what I get:
> 
> Allo? echo $ZSH_
> ZSH_NAME     ZSH_VERSION
> Allo? echo $ZSH_NAMEBUG: permanent allocation in parsestr
> BUG: permanent allocation in prefork                                        VERSION

Here is the fix.

Zoltan

 *** Src/zle_tricky.c	1996/06/10 20:10:57	2.48
 --- Src/zle_tricky.c	1996/06/11 09:35:17
 ***************
 *** 775,780 ****
 --- 775,781 ----
   	return;
       }
       /* Otherwise go to the next match in the array... */
 +     heapalloc();
       if (!*++menucur)
   	menucur = amatches;
       complexpect = menuce;
 ***************
 *** 782,787 ****
 --- 783,789 ----
       metafy_line();
       do_single(*menucur);
       unmetafy_line();
 +     permalloc();
   }
   
   /* 1 if x added to complete in a blank between words */

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3i
Charset: noconv

iQCVAwUBMb1AewupSCiLN749AQEb2wQAouJ8NV7zDh5zo8ehxpI+RNfTVW7AHKVy
zVdqx74/+pj8ostRUFafLkilLt+3mcG6r+YcoNuHBimaz3SUcmM/GWKUy+AXMRQY
ui22t+hRr1jWCLU+d3uJnqiX4ZNJ1zAyq9YB9gJYvLOSmZET6usG+L0ojytI4FBQ
4unFJpGaQDA=
=TanD
-----END PGP SIGNATURE-----



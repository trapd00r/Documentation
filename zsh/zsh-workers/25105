From zsh-workers-return-25105-mason-zsh=primenet.com.au@sunsite.dk Sun May 25 21:37:38 2008
Return-Path: <zsh-workers-return-25105-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8145 invoked from network); 25 May 2008 21:37:36 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 May 2008 21:37:36 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 67568 invoked from network); 25 May 2008 21:37:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 May 2008 21:37:29 -0000
Received: (qmail 11819 invoked by alias); 25 May 2008 21:37:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25105
Received: (qmail 11804 invoked from network); 25 May 2008 21:37:25 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 25 May 2008 21:37:25 -0000
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 71CEE80589A4
	for <zsh-workers@sunsite.dk>; Sun, 25 May 2008 23:37:20 +0200 (CEST)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id B2E7322BD8B0; Sun, 25 May 2008 23:37:19 +0200 (CEST)
Date: Sun, 25 May 2008 23:37:19 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk, 482346@bugs.debian.org
Subject: Re: Bug#482346: zsh doesn't always wait for its children (->
	zombie)
Message-ID: <20080525213719.GV7056@prunille.vinc17.org>
Mail-Followup-To: zsh-workers@sunsite.dk, 482346@bugs.debian.org
References: <20080521235930.GW7056@prunille.vinc17.org> <20080522233327.GA24953@scru.org> <080523073940.ZM13804@torch.brasslantern.com> <20080523145722.GA12096@scru.org> <20080523224305.GN7056@prunille.vinc17.org> <20080524025556.GA30511@scru.org> <20080524124445.GQ7056@prunille.vinc17.org> <20080524234002.GA35143@redoubt.spodhuis.org> <20080525004101.GT7056@prunille.vinc17.org> <20080525012321.GA7438@redoubt.spodhuis.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20080525012321.GA7438@redoubt.spodhuis.org>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.17-vl-r21552 (2008-04-09)
X-Virus-Scanned: ClamAV 0.91.2/7238/Sun May 25 22:37:51 2008 on bifrost
X-Virus-Status: Clean

On 2008-05-24 18:23:21 -0700, Phil Pennock wrote:
> Then I'd be inclined to start looking into hardware issues, since
> _something's_ probably getting stuck in disk IO; I'll suspect that
> before kernel bugs, but it might also be worth seeing if there are other
> problems with threaded programs on powerpc, if init really can't reap
> something that has already become a zombie.

I've looked at /var/log/kern.log and there's something each time
I interrupted vlc, e.g.

May 24 14:33:36 ay kernel: Unable to handle kernel paging request for data at address 0x481e7000
May 24 14:33:36 ay kernel: Faulting instruction address: 0xc00131e8
May 24 14:33:36 ay kernel: Oops: Kernel access of bad area, sig: 11 [#1]
May 24 14:33:36 ay kernel: PowerMac
May 24 14:33:36 ay kernel: Modules linked in: snd_powermac snd_pcm_oss snd_mixer_oss snd_pcm snd_timer snd snd_page_alloc soundcore xt_multiport iptable_filter ip_tables x_tables ipv6 ide_cd cdrom sungem sungem_phy firewire_ohci firewire_core crc_itu_t yenta_socket rsrc_nonstatic pcmcia_core uninorth_agp agpgart sd_mod scsi_mod dm_snapshot dm_mirror dm_mod ext3 jbd mbcache ide_disk evdev i2c_powermac windfarm_core
May 24 14:33:36 ay kernel: NIP: c00131e8 LR: c0017780 CTR: 00000080
May 24 14:33:36 ay kernel: REGS: c2769b60 TRAP: 0300   Not tainted  (2.6.24-1-powerpc)
May 24 14:33:36 ay kernel: MSR: 00009032 <EE,ME,IR,DR>  CR: 24004422  XER: 00000000
May 24 14:33:36 ay kernel: DAR: 481e7000, DSISR: 40000000
May 24 14:33:36 ay kernel: TASK = c2d7ca80[21850] 'vlc' THREAD: c2768000
May 24 14:33:36 ay kernel: GPR00: c3356060 c2769c10 c2d7ca80 481e7000 00000080 0c57a181 481e7000 00000000 
May 24 14:33:36 ay kernel: GPR08: 0c57a181 c3356060 00000000 c03fe000 44004422 1001a728 bfffffff cf3d2140 
May 24 14:33:36 ay kernel: GPR16: 0000000d c3356060 00000030 00000000 c2769ccc c272e480 c3356060 00000001 
May 24 14:33:36 ay kernel: GPR24: 00000000 481e7000 0000079c c245e860 c245e860 0c57a181 481e7000 c0588f40 
May 24 14:33:36 ay kernel: NIP [c00131e8] __flush_dcache_icache+0x14/0x40
May 24 14:33:36 ay kernel: LR [c0017780] update_mmu_cache+0x84/0x108
May 24 14:33:36 ay kernel: Call Trace:
May 24 14:33:36 ay kernel: [c2769c10] [481e7000] 0x481e7000 (unreliable)
May 24 14:33:36 ay kernel: [c2769c30] [c0085888] handle_mm_fault+0xc70/0xd70
May 24 14:33:36 ay kernel: [c2769c70] [c0085d48] get_user_pages+0x3c0/0x4d0
May 24 14:33:36 ay kernel: [c2769cc0] [c00d008c] elf_core_dump+0xa28/0xce4
May 24 14:33:36 ay kernel: [c2769d60] [c009fe28] do_coredump+0x664/0x6cc
May 24 14:33:36 ay kernel: [c2769e50] [c003df64] get_signal_to_deliver+0x390/0x3c0
May 24 14:33:36 ay kernel: [c2769e80] [c00096ac] do_signal+0x50/0x268
May 24 14:33:36 ay kernel: [c2769f40] [c0013ef4] do_user_signal+0x7c/0xcc
May 24 14:33:36 ay kernel: --- Exception: c00 at 0xfbcce5c
May 24 14:33:36 ay kernel:     LR = 0xfbceaf4
May 24 14:33:36 ay kernel: Instruction dump:
May 24 14:33:36 ay kernel: 4d820020 7c8903a6 7c001bac 38630020 4200fff8 7c0004ac 4e800020 60000000 
May 24 14:33:36 ay kernel: 54630026 38800080 7c8903a6 7c661b78 <7c00186c> 38630020 4200fff8 7c0004ac 
May 24 14:33:36 ay kernel: ---[ end trace 6343c960c4d55920 ]---
May 24 14:33:36 ay kernel: note: vlc[21850] exited with preempt_count 1

> > Here's vmstat output:
> 
> First line of vmstat is average since system boot, you need to do
> something like "vmstat 1", ignore the first line, and look at what's
> happening at the current time.

procs -----------memory---------- ---swap-- -----io---- -system-- ----cpu----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa
 2  0 120044  17616  54288 124632    4    4    33    44   32  261  8  1 87  4
 0  0 120044  17616  54288 124632    0    0     0     0   24  299  0  0 100  0
 0  0 120044  17616  54288 124632    0    0     0     0   25  303  0  0 100  0
 0  0 120044  17616  54288 124632    0    0     0     0   24  298  0  0 100  0
 0  0 120044  17616  54288 124632    0    0     0     0   24  290  0  0 100  0
 0  0 120044  17376  54288 124632    0    0     0     0   23  300 73  7 20  0
 0  0 120044  17436  54296 124632    0    0     0    32   27  297  0  0 99  1
 1  0 120044  17376  54296 124604    0    0     0     0   24  298 11  0 89  0
 0  0 120044  17616  54296 124632    0    0     0     0   23  299 51  2 47  0
 0  0 120044  17616  54296 124632    0    0     0     0   24  292  0  0 100  0
 0  0 120044  17556  54300 124632    0    0     0   340   65  365  0  0 80 20

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


From zsh-workers-return-18369-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 20 02:30:49 2003
Return-Path: <zsh-workers-return-18369-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10869 invoked from network); 20 Mar 2003 02:30:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 20 Mar 2003 02:30:49 -0000
Received: (qmail 19378 invoked by alias); 20 Mar 2003 02:30:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18369
Received: (qmail 19369 invoked from network); 20 Mar 2003 02:30:41 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 20 Mar 2003 02:30:41 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [203.109.249.141] by sunsite.dk (MessageWall 1.0.8) with SMTP; 20 Mar 2003 2:30:40 -0000
Received: from p119-tnt9.syd.ihug.com.au (localhost.localdomain) [203.173.151.119] 
	by grunt21.ihug.com.au with esmtp (Exim 3.35 #1 (Debian))
	id 18vppF-00042f-00; Thu, 20 Mar 2003 13:30:37 +1100
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (8.12.5/8.12.5) with ESMTP id h2K2aYF6011265
	for <zsh-workers@sunsite.dk>; Thu, 20 Mar 2003 13:36:35 +1100
Received: (from doug@localhost)
	by localhost.localdomain (8.12.5/8.12.5/Submit) id h2K2aXV8011263
	for zsh-workers@sunsite.dk; Thu, 20 Mar 2003 13:36:33 +1100
X-Authentication-Warning: localhost.localdomain: doug set sender to djkea2@mugca.its.monash.edu.au using -f
Date: Thu, 20 Mar 2003 13:36:32 +1100
From: Doug Kearns <djkea2@mugca.its.monash.edu.au>
To: zsh-workers@sunsite.dk
Subject: PATCH: update HTML Tidy completion
Message-ID: <20030320023632.GC920@localhost.localdomain>
Mail-Followup-To: zsh-workers@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4i

Tidy Classic has now officially been replaced by TidyLib.
Here's a small update for the tidy completion function.

Regards,
Doug

Index: Completion/Unix/Command/_tidy
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_tidy,v
retrieving revision 1.1
diff -u -r1.1 _tidy
--- Completion/Unix/Command/_tidy	30 Jan 2003 15:07:34 -0000	1.1
+++ Completion/Unix/Command/_tidy	20 Mar 2003 02:20:36 -0000
@@ -1,51 +1,53 @@
 #compdef tidy
 
-# HTML Tidy for Linux/x86 (release date: 1st December 2002; built on Jan 30 2003, at 20:01:07)
+# HTML Tidy for Linux/x86 released on 1st March 2003
 
-local access autobool boolean doctype encoding
+local -a access autobool boolean doctype encoding
 
 access=( 1 2 3 )
 boolean=( yes no )
 autobool=( auto $boolean )
 doctype=( auto omit strict loose transitional )
-encoding=( ascii latin1 raw utf8 iso2022 mac utf16le utf16be utf16 win1252 big5 shiftjis )
+encoding=( ascii latin1 raw utf8 iso2022 mac utf16le utf16be utf16 win1252 ibm858 big5 shiftjis )
 
 _arguments \
-  '-'{indent,i}'[indent element content]' \
-  '-'{omit,o}'[omit optional end tags]' \
+  '(-indent -i)'{-indent,-i}'[indent element content]' \
   '-wrap[wrap text at the specified <column> (default is 68)]:column:' \
-  '-'{upper,u}'[force tags to upper case (default is lower case)]' \
-  '-'{clean,c}'[replace FONT, NOBR and CENTER tags by CSS]' \
-  '-'{bare,b}'[strip out smart quotes and em dashes, etc.]' \
-  '-'{numeric,n}'[output numeric rather than named entities]' \
-  '-'{errors,e}'[only show errors]' \
-  '-'{quiet,q}'[suppress nonessential output]' \
+  '(-upper -u)'{-upper,-u}'[force tags to upper case (default is lower case)]' \
+  '(-clean -c)'{-clean,-c}'[replace FONT, NOBR and CENTER tags by CSS]' \
+  '(-bare -b)'{-bare,-b}'[strip out smart quotes and em dashes, etc.]' \
+  '(-numeric -n)'{-numeric,-n}'[output numeric rather than named entities]' \
+  '(-errors -e)'{-errors,-e}'[only show errors]' \
+  '(-quiet -q)'{-quiet,-q}'[suppress nonessential output]' \
+  '-omit[omit optional end tags]' \
   '-xml[specify the input is well formed XML]' \
-  '(-asxml -asxhtml -ashtml)-'{asxml,asxhtml}'[convert HTML to well formed XHTML]' \
+  '(-asxml -asxhtml -ashtml)'{-asxml,-asxhtml}'[convert HTML to well formed XHTML]' \
   '(-asxml -asxhtml)-ashtml[force XHTML to well formed HTML]' \
-  '-slides[burst into slides on H2 elements]' \
-  '-access[do additional accessibility checks (<level> = 1, 2, 3)]:level:(${access[@]})' \
+  '-access[do additional accessibility checks (<level> = 1, 2, 3)]:priority level:(${access[@]})' \
   '-raw[output values above 127 without conversion to entities]' \
-  '(       -latin -iso2022 -utf8 -mac -win1252 -utf16le -utf16be -utf16 -shiftjis -big5)-ascii[use US-ASCII for output, ISO-8859-1 for input]' \
-  '(-ascii        -iso2022 -utf8 -mac -win1252 -utf16le -utf16be -utf16 -shiftjis -big5)-latin1[use ISO-8859-1 for both input and output]' \
-  '(-ascii -latin          -utf8 -mac -win1252 -utf16le -utf16be -utf16 -shiftjis -big5)-iso2022[use ISO-2022 for both input and output]' \
-  '(-ascii -latin -iso2022       -mac -win1252 -utf16le -utf16be -utf16 -shiftjis -big5)-utf8[use UTF-8 for both input and output]' \
-  '(-ascii -latin -iso2022 -utf8      -win1252 -utf16le -utf16be -utf16 -shiftjis -big5)-mac[use MacRoman for input, US-ASCII for output]' \
-  '(-ascii -latin -iso2022 -utf8 -mac          -utf16le -utf16be -utf16 -shiftjis -big5)-win1252[use Windows-1252 for input, US-ASCII for output]' \
-  '(-ascii -latin -iso2022 -utf8 -mac -win1252          -utf16be -utf16 -shiftjis -big5)-utf16le[use UTF-16LE for both input and output]' \
-  '(-ascii -latin -iso2022 -utf8 -mac -win1252 -utf16le          -utf16 -shiftjis -big5)-utf16be[use UTF-16BE for both input and output]' \
-  '(-ascii -latin -iso2022 -utf8 -mac -win1252 -utf16le -utf16be        -shiftjis -big5)-utf16[use UTF-16 for both input and output]' \
-  '(-ascii -latin -iso2022 -utf8 -mac -win1252 -utf16le -utf16be -utf16           -big5)-shiftjis[use Shift_JIS for both input and output]' \
-  '(-ascii -latin -iso2022 -utf8 -mac -win1252 -utf16le -utf16be -utf16 -shiftjis      )-big5[use Big5 for both input and output]' \
+  '(       -latin0 -latin1 -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-ascii[use US-ASCII for output, ISO-8859-1 for input]' \
+  '(-ascii         -latin1 -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-latin0[use US-ASCII for output, ISO-8859-1 for input]' \
+  '(-ascii -latin0         -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-latin1[use ISO-8859-1 for both input and output]' \
+  '(-ascii -latin0 -latin1          -utf8 -mac -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-iso2022[use ISO-2022 for both input and output]' \
+  '(-ascii -latin0 -latin1 -iso2022       -mac -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-utf8[use UTF-8 for both input and output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8      -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-mac[use MacRoman for input, US-ASCII for output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac          -ibm858 -utf16le -utf16be -utf16 -shiftjis -big5)-win1252[use Windows-1252 for input, US-ASCII for output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac -win1252         -utf16le -utf16be -utf16 -shiftjis -big5)-ibm858[use IBM-858 (CP850+Euro) for input, US-ASCII for output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac -win1252 -ibm858          -utf16be -utf16 -shiftjis -big5)-utf16le[use UTF-16LE for both input and output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le          -utf16 -shiftjis -big5)-utf16be[use UTF-16BE for both input and output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le -utf16be        -shiftjis -big5)-utf16[use UTF-16 for both input and output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le -utf16be -utf16           -big5)-shiftjis[use Shift_JIS for both input and output]' \
+  '(-ascii -latin0 -latin1 -iso2022 -utf8 -mac -win1252 -ibm858 -utf16le -utf16be -utf16 -shiftjis      )-big5[use Big5 for both input and output]' \
+  '(-out -o)'{-out,-o}'[specify the output markup file]:output file:_files' \
   '-config[set configuration options from the specified <file>]:configuration file:_files' \
   '-f[write errors to the specified <file>]:error file:_files' \
-  '-'{modify,m}'[modify the original input files]' \
-  '(- *)-'{version,v}'[show the version of Tidy]' \
-  '(- *)-'{help,h,\?}'[list the command line options]' \
+  '(-modify -m)'{-modify,-m}'[modify the original input files]' \
+  '(- *)'{-version,-v}'[show the version of Tidy]' \
+  '(- *)'{-help,-h,-\?}'[list the command line options]' \
   '(- *)-help-config[list all configuration options]' \
   '(- *)-show-config[list the current configuration settings]' \
-  '--indent-spaces:integer:' \
-  '--wrap:integer:' \
+  '--indent-spaces:number of spaces:' \
+  '--wrap:column:' \
   '--wrap-attributes:boolean:(${boolean[@]})' \
   '--wrap-script-literals:boolean:(${boolean[@]})' \
   '--wrap-sections:boolean:(${boolean[@]})' \
@@ -53,7 +55,7 @@
   '--wrap-jste:boolean:(${boolean[@]})' \
   '--wrap-php:boolean:(${boolean[@]})' \
   '--literal-attributes:boolean:(${boolean[@]})' \
-  '--tab-size:integer:' \
+  '--tab-size:tab size:' \
   '--markup:boolean:(${boolean[@]})' \
   '--quiet:boolean:(${boolean[@]})' \
   '--tidy-mark:boolean:(${boolean[@]})' \
@@ -79,7 +81,7 @@
   '--drop-proprietary-attribute:boolean:(${boolean[@]})' \
   '--enclose-text:boolean:(${boolean[@]})' \
   '--enclose-block-text:boolean:(${boolean[@]})' \
-  '--alt-text:string:' \
+  '--alt-text:alternate text:' \
   '--add-xml-space:boolean:(${boolean[@]})' \
   '--fix-bad-comments:boolean:(${boolean[@]})' \
   '--split:boolean:(${boolean[@]})' \
@@ -92,8 +94,9 @@
   '--keep-time:boolean:(${boolean[@]})' \
   '--show-warnings:boolean:(${boolean[@]})' \
   '--error-file:error file:_files' \
+  '--output-file:output file:_files' \
   '--show-body-only:boolean:(${boolean[@]})' \
-  '--slide-style:file:_files' \
+  '--slide-style:style sheet file:_files' \
   '--new-inline-tags:tag names:' \
   '--new-blocklevel-tags:tag names:' \
   '--new-empty-tags:tag names:' \
@@ -109,7 +112,7 @@
   '--hide-comments:boolean:(${boolean[@]})' \
   '--indent-cdata:boolean:(${boolean[@]})' \
   '--force-output:boolean:(${boolean[@]})' \
-  '--show-errors:integer:' \
+  '--show-errors:maximum number of errors:' \
   '--ascii-chars:boolean:(${boolean[@]})' \
   '--join-classes:boolean:(${boolean[@]})' \
   '--join-styles:boolean:(${boolean[@]})' \
@@ -117,7 +120,9 @@
   '--repeated-attributes:value:(keep-first keep-last)' \
   '--output-bom:boolean:(${autobool[@]})' \
   '--replace-color:boolean:(${boolean[@]})' \
-  '--css-prefix:string:' \
-  '--accessibility-check:integer:(${access[@]})' \
-  '*:file:_files'
+  '--css-prefix:CSS class name:' \
+  '--accessibility-check:priority level:(${access[@]})' \
+  '--newline:newline character:(LF CRLF CR)' \
+  '*:file:_files' && return
 
+return 1


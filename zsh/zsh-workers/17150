From zsh-workers-return-17150-mason-zsh=primenet.com.au@sunsite.dk Tue May 14 09:48:56 2002
Return-Path: <zsh-workers-return-17150-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9030 invoked from network); 14 May 2002 09:48:55 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 May 2002 09:48:55 -0000
Received: (qmail 19809 invoked by alias); 14 May 2002 09:48:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17150
Received: (qmail 19797 invoked from network); 14 May 2002 09:48:46 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Date: Tue, 14 May 2002 13:48:40 +0400 (MSD)
X-X-Sender: bor@itsrm2.mow.siemens.ru
Subject: Re: PATCH: more selection
In-Reply-To: <21560.1021303981@csr.com>
Message-ID: <Pine.SV4.4.44.0205141343240.14721-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 13 May 2002, Peter Stephenson wrote:

> This patch is more advanced warning of future pain than anything else,
> in case anyone wants to scream at the very idea.
>
> The following patch adds an fd-watching facility to zle.  You tell zle
> (via zle -F) to select on an fd and give it a function handler.  When data
> is available for reading on that handle (only reading, at the moment),
> the handler will be called, and zle will sail on without returning.
> This allows you to handle input from other sources while the shell is
> inactive waiting for terminal input.  It's all handled synchronously
> within zle, so it should be free of the hazards of asynchronous input.
>

Is it posible to extend it to set timeouts while waiting for input? This
could be used to update prompts as example (often asked question - how to
get time in prompt).

My only concern is that if there is any chance handler will block you can
just as well kill your shell - there is no way to give shell input
anymore.

-andrej


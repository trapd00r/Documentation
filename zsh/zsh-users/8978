From zsh-users-return-8978-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 07 23:03:44 2005
Return-Path: <zsh-users-return-8978-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1856 invoked from network); 7 Jun 2005 23:03:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 7 Jun 2005 23:03:44 -0000
Received: (qmail 75628 invoked from network); 7 Jun 2005 23:03:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 7 Jun 2005 23:03:37 -0000
Received: (qmail 14574 invoked by alias); 7 Jun 2005 23:03:29 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8978
Received: (qmail 14558 invoked from network); 7 Jun 2005 23:03:29 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 7 Jun 2005 23:03:29 -0000
Received: (qmail 74558 invoked from network); 7 Jun 2005 23:03:29 -0000
Received: from smtp2.poczta.interia.pl (HELO smtp.poczta.interia.pl) (213.25.80.232)
  by a.mx.sunsite.dk with SMTP; 7 Jun 2005 23:03:24 -0000
Received: by smtp.poczta.interia.pl (INTERIA.PL, from userid 502)
	id B3EE3373187; Wed,  8 Jun 2005 01:03:23 +0200 (CEST)
Received: from poczta.interia.pl (mi01.poczta.interia.pl [10.217.12.1])
	by smtp.poczta.interia.pl (INTERIA.PL) with ESMTP id 58271373103
	for <zsh-users@sunsite.dk>; Wed,  8 Jun 2005 01:03:23 +0200 (CEST)
Received: by poczta.interia.pl (INTERIA.PL, from userid 502)
	id 5270726F7D0; Wed,  8 Jun 2005 01:03:22 +0200 (CEST)
Received: from localhost.localdomain (ajm186.internetdsl.tpnet.pl [83.16.246.186])
	by poczta.interia.pl (INTERIA.PL) with ESMTP id 1417F26F7C9
	for <zsh-users@sunsite.dk>; Wed,  8 Jun 2005 01:03:22 +0200 (CEST)
Received: from Mutt by mutt-smtp-wrapper.pl 1.2  (www.zdo.com/articles/mutt-smtp-wrapper.shtml)
Date: Wed, 8 Jun 2005 01:03:22 +0200
From: Mariusz Gniazdowski <cellsan@interia.pl>
To: zsh-users@sunsite.dk
Subject: Using libmysqlclient from module
Message-ID: <20050607230322.GA2419@mordor.lan>
Reply-To: Mariusz Gniazdowski <cellsan@interia.pl>
Mail-Followup-To: zsh-users@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: inline
User-Agent: Mutt/1.5.8i
X-EMID: 75c286cc
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Hi.
I wrote module that is linked to libmysqlclient and tries to open
connection. The code:

static MYSQL db;

/**/
static int
sql_connect(char *nam, char **args, Options ops, UNUSED(int func))
{
	if(!mysql_connect(&db, "localhost", "username", "password")){
		printf("Connection failed: %s\n",mysql_error(&db));
		return 1;
	}
	printf("Connected\n");
	return 0;
}

Following error occurs when running this builtin:

$ sql_connect
Connection failed: Lost connection to MySQL server during query

-- 
Regards
Mariusz Gniazdowski

----------------------------------------------------------------------
Startuj z INTERIA.PL! >>> http://link.interia.pl/f186c 


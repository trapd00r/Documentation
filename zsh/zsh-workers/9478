From zsh-workers-return-9478-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Jan 30 18:09:42 2000
Return-Path: <zsh-workers-return-9478-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4626 invoked from network); 30 Jan 2000 18:09:42 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Jan 2000 18:09:42 -0000
Received: (qmail 10993 invoked by alias); 30 Jan 2000 18:09:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9478
Received: (qmail 10967 invoked from network); 30 Jan 2000 18:09:36 -0000
To: zsh-workers@sunsite.auc.dk
Subject: LISTMAX and menu select
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 31 Jan 2000 03:09:33 +0900
Message-ID: <rsq66wb1leq.fsf@crane.jaist.ac.jp>
Lines: 35
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

zsh dumps core as follows.

Z(2):akr@is27e1u11% Src/zsh -f
is27e1u11% bindkey -e; autoload -U compinit; compinit -D
is27e1u11% zstyle ':completion*:default' menu select=1
is27e1u11% LISTMAX=2
is27e1u11% ls M<TAB>
zsh: do you wish to see all 4 possibilities? n
is27e1u11% ls M<TAB>
zsh: do you wish to see all 4 possibilities? n
is27e1u11% ls META-FAQzsh: segmentation fault (core dumped)  Src/zsh -f

(gdb) where
#0  0xfefb5bc0 in domenuselect (dummy=0xff03695c, dat=0xffbeec38) at complist.c:898
#1  0x6d234 in runhookdef (h=0xff03695c, d=0xffbeec38) at module.c:1607
#2  0xff00bfbc in after_complete (dummy=0xff0ae504, dat=0xffbeedbc) at compcore.c:482
#3  0x6d2d8 in runhookdef (h=0xff0ae504, d=0xffbeedbc) at module.c:1613
#4  0xff088ac4 in docomplete (lst=0) at zle_tricky.c:751
#5  0xff086624 in expandorcomplete (args=0xff0ae458) at zle_tricky.c:260
#6  0xff0860d8 in completecall (args=0xff0ae458) at zle_tricky.c:165
#7  0xff076fc8 in execzlefunc (func=0xff0ac3b4, args=0xff0ae458) at zle_main.c:645
#8  0xff076aa4 in zleread (lp=0xd5c68 "%m%# ", rp=0x0, flags=3) at zle_main.c:564
#9  0x53ab4 in inputline () at input.c:265
#10 0x53880 in ingetc () at input.c:210
#11 0x490fc in ihgetc () at hist.c:242
#12 0x5ba70 in gettok () at lex.c:560
#13 0x5adcc in yylex () at lex.c:313
#14 0x7a020 in parse_event () at parse.c:292
#15 0x4fcf0 in loop (toplevel=1, justonce=0) at init.c:115
#16 0x1b2a8 in main (argc=2, argv=0xffbef474) at ./main.c:89
(gdb) 

This is reproduced on Debian GNU/Linux as well as Solaris 7.
-- 
Tanaka Akira


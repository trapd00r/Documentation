From zsh-users-return-7675-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 11 04:22:20 2004
Return-Path: <zsh-users-return-7675-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13514 invoked from network); 11 Jul 2004 04:22:19 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 11 Jul 2004 04:22:19 -0000
Received: (qmail 16977 invoked from network); 11 Jul 2004 04:24:31 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Jul 2004 04:24:31 -0000
Received: (qmail 10943 invoked by alias); 11 Jul 2004 04:21:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7675
Received: (qmail 10933 invoked from network); 11 Jul 2004 04:21:37 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.85)
  by sunsite.dk with SMTP; 11 Jul 2004 04:21:37 -0000
Received: (qmail 16019 invoked from network); 11 Jul 2004 04:24:01 -0000
Received: from mail.bluffton.edu (205.133.211.10)
  by a.mx.sunsite.dk with SMTP; 11 Jul 2004 04:23:48 -0000
Received: from localhost ([10.4.1.177]) by mail.bluffton.edu with Microsoft SMTPSVC(5.0.2195.6713);
	 Sun, 11 Jul 2004 00:20:56 -0400
Date: Sun, 11 Jul 2004 00:20:54 -0400
From: Nathan Sommer <sommena@cs.earlham.edu>
To: zsh-users@sunsite.dk
Subject: Re: terminal resizing and prompt problem
Message-Id: <20040711002054.3d469d20@localhost>
In-Reply-To: <Pine.LNX.4.60.0407101848380.24945@toltec.zanshin.com>
References: <20040710172553.168f14b9@localhost>
	<Pine.LNX.4.60.0407101848380.24945@toltec.zanshin.com>
X-Mailer: Sylpheed version 0.9.11claws (GTK+ 1.2.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 11 Jul 2004 04:20:56.0565 (UTC) FILETIME=[764C3A50:01C466FE]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Sat, 10 Jul 2004 20:41:40 -0700 (PDT)
Bart Schaefer <schaefer@brasslantern.com> wrote:

> On Sat, 10 Jul 2004, Nathan Sommer wrote:
> 
> > For each character height I resize vertically, or each character width I 
> > resize horizontally, the top line of my prompt is repeated.
> [...]
> > This is terribly annoying, since it means I can't resize my terminal to 
> > see more output, since any additional visibility I would have gained is 
> > taken up by the additional lines of my prompt.
> 
> Precisely how are you resizing the terminal?
> 
> Zsh reprints the prompt each time it gets a SIGWINCH signal.  Normally,
> e.g. when dragging the window borders with the mouse, there would be only
> a one such signal delivered at the time the mouse was released.
> 
> It sounds as though you -- or your window manager -- is performing e.g. 
> six resizes of one line each rather than one resize of six lines, causing 
> zsh to receive a stream of SIGWINCH signals.  This is not a bug in zsh.

It looks like the problem is due to the way fvwm (my window manager of choice)
does opaque resizing.  It is doing exactly what you say, six resizes of one
line each.  I happen to enjoy opaque resizing quite a bit, but maybe I'll turn
it off for my xterms.  That's kind of an annoying work-around though, and I'll
still get an extra line every time I resize.  I just may end up doing more
resizing with opaque resize off as well, since I'm not exactly sure what I'm
going to be seeing when I release the mouse button, and this will contribute
more annoying lines.  

Am I correct in concluding from your reply that it is impossible to have a
multi-line zsh prompt and not get any extra lines after resizing a terminal?


Thanks,
Nate

-- 
sommena@cs.earlham.edu
http://cs.earlham.edu/~sommena


From zsh-workers-return-27984-mason-zsh=primenet.com.au@zsh.org Tue Jun 01 21:34:33 2010
Return-Path: <zsh-workers-return-27984-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23233 invoked by alias); 1 Jun 2010 21:34:33 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27984
Received: (qmail 22615 invoked from network); 1 Jun 2010 21:34:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _netblocks.google.com designates 74.125.121.35 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=google.com; s=beta;
	t=1275427451; bh=2TiE0RhvMWrkGiyyyO2IsIF9U78=;
	h=MIME-Version:Date:Message-ID:Subject:From:To:Cc:Content-Type;
	b=KpOh1LGzu16HnITxXmGWNxE/vVlT0jZKf1JFH1w+5/y2ZRC1jq4Mn2qRGaWBv7t93
	 ur9vp3tuLoyHryl/hG92w==
DomainKey-Signature: a=rsa-sha1; s=beta; d=google.com; c=nofws; q=dns;
	h=mime-version:date:message-id:subject:from:to:cc:
	content-type:x-system-of-record;
	b=TM5mAW6ZbSk+E2dXKb/PQqpa+nj8N7P0ncnGQtX+Yf/+FdaOPdNeRX+vG3juEb9Sj
	O5Mfvxd+k6HWVALuQfa0g==
MIME-Version: 1.0
Date: Tue, 1 Jun 2010 14:23:59 -0700
Message-ID: <AANLkTikM2LyZfA_brCgsTpAK5LAeP1YAH9vi6zJvLoVv@mail.gmail.com>
Subject: zsh/terminfo parameter "terminfo" cannot be queried using 
	${+terminfo}
From: Martin Buchholz <martinrb@google.com>
To: Peter Stephenson <pws@csr.com>, zsh-workers@zsh.org
Cc: Joel Ebel <jbebel@google.com>
Content-Type: text/plain; charset=ISO-8859-1
X-System-Of-Record: true

Hi zsh module "feature" maintainers,

This is a bug report.

It seems that the expression ${+terminfo} does not
resolve to either 0 or 1 as expected.


$ for m in HARDY LUCID; do echo ---; ssh $m /bin/zsh -i -c 'pwd;
lsb_release -cs; echo ZSH_VERSION=${ZSH_VERSION}; echo ${+terminfo}';
done
---
/home/martinrb
hardy
ZSH_VERSION=4.3.4
0
---
/etc/zsh/zshrc:10: unknown parameter: terminfo
/home/martinrb
lucid
ZSH_VERSION=4.3.10
zsh:1: unknown parameter: terminfo


(Aside: The message
/etc/zsh/zshrc:10: unknown parameter: terminfo
comes from the default zshrc config file on Ubuntu
(and probably also debian) which you guys should
examine.  That prompted this investigation and bug report)

I'm suspicious this is due to some interaction with the
"features feature" introduced into module loading in
zsh 4.3.6.  Perhaps the features system does not
expect an autoloaded variable to be unset after autoloading?

Thanks,

Martin


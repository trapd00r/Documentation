From zsh-workers-return-16359-mason-zsh=primenet.com.au@sunsite.dk Mon Dec 17 18:33:18 2001
Return-Path: <zsh-workers-return-16359-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22569 invoked from network); 17 Dec 2001 18:33:18 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Dec 2001 18:33:18 -0000
Received: (qmail 25134 invoked by alias); 17 Dec 2001 18:33:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16359
Received: (qmail 25121 invoked from network); 17 Dec 2001 18:33:10 -0000
Message-Id: <5.1.0.14.2.20011217132433.08fb4670@marble.sentex.ca>
X-Sender: damian@marble.sentex.ca
X-Mailer: QUALCOMM Windows Eudora Version 5.1
Date: Mon, 17 Dec 2001 13:35:09 -0500
To: zsh-workers@sunsite.dk
From: Damian Gerow <damian@sentex.net>
Subject: Floating Point Exception
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed

---
Background

I'm trying to figure out why one of our development boxes isn't playing 
very nicely (i.e. the kernel keeps on oops'ing), and I think it's the 
disk.  I downloaded and installed bonnie++1.02a, and when doing some 
largish IO tests, zsh keeps on complaining of a floating point exception.

---
Error

Here's the actual output:

[damian]@[slag5a]:[~]% cd /var/data/bonnie
[damian]@[slag5a]:[bonnie]% /usr/local/sbin/bonnie++ -d . -n 50 -s 4096 -x 
3 -b
name,file_size,putc,putc_cpu,put_block,put_block_cpu,rewrite,rewrite_cpu,getc,getc_cpu,get_block,get_block_cpu,seeks,seeks_cpu,num_files,seq_create,seq_create_cpu,seq_stat,seq_stat_cpu,seq_del,seq_del_cpu,ran_create,ran_create_cpu,ran_stat,ran_stat_cpu,ran_del,ran_del_cpu
Writing with putc()...zsh: floating point 
exception  /usr/local/sbin/bonnie++ -d . -n 50 -s 4096 -x 3 -b
[damian]@[slag5a]:[bonnie]%

Note that if I lessen the number and size of the files, I don't get the 
exception:

[damian]@[slag5a]:[~]% /usr/local/sbin/bonnie++ -d ~/bonnie/ -s 300 -r 40 
-x 5
name,file_size,putc,putc_cpu,put_block,put_block_cpu,rewrite,rewrite_cpu,getc,getc_cpu,get_block,get_block_cpu,seeks,seeks_cpu,num_files,seq_create,seq_create_cpu,seq_stat,seq_stat_cpu,seq_del,seq_del_cpu,ran_create,ran_create_cpu,ran_stat,ran_stat_cpu,ran_del,ran_del_cpu
Writing with putc()...


done
Writing intelligently...done
Rewriting...done

<snip>

slag5a.sentex.ca,300M,19884,98,42292,12,18198,7,12250,94,394042,97,1582.6,3,16,2309,93,+++++,+++,2554,2,2109,96,+++++,+++,3807,94
[damian]@[slag5a]:[~]%

If I try the first commandline under a different shell, it seems to work 
(it hasn't actually finished the whole run through yet, but it has gotten 
past the putc() test).

---
Specifics

Kernel: 2.4.13, no patches
Memory: 512MB
Processor: AMD Athlon
HD Controller: 3Ware Escalade 600 series

---

Not sure if I'm posting this to the wrong place, but it only pops up in zsh 
(neither tcsh nor bash show this problem).  I'd offer to go through and 
debug where it's happening, but I'm not much of a debugger.


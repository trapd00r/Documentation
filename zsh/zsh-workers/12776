From zsh-workers-return-12776-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Sep 08 06:05:23 2000
Return-Path: <zsh-workers-return-12776-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6122 invoked from network); 8 Sep 2000 06:05:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Sep 2000 06:05:22 -0000
Received: (qmail 26117 invoked by alias); 8 Sep 2000 06:05:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12776
Received: (qmail 26110 invoked from network); 8 Sep 2000 06:05:04 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Bart Schaefer" <schaefer@candle.brasslantern.com>,
   "Will Day" <willday@rom.oit.gatech.edu>,
   "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: RE: PATCH: test for network libraries (for test only)/problems with name resolution
Date: Fri, 8 Sep 2000 10:05:01 +0400
Message-ID: <000001c0195a$b9945130$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <1000908041404.ZM31745@candle.brasslantern.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400


Yes, I was almost sure gethostbyname2 would be a problem. As I wrote before it
means, Solaris 7 headers or libraries are broken. O.K. it means, patch had not
fixed the bug anyway, so I was right to remove it.

>
>
> On Sep 7,  6:16pm, Will Day wrote:
> } Subject: Re: PATCH: test for network libraries (for test only)/problems wi
> }
> } I dunno. If I remove the "static" from the zftp.c declaration, it
> } should work fine, but I'm not sure what problems that might introduce.
>
> It'll just mean you can't look up names for IPv6 hosts, I think.
>

IPv6 is the keyword. We need the gethostbyname2/getipnodebyname, inet_pton etc
*only* if we want to do IPv6. Conversely, we cannot do IPv6 without these
functions (well, actually, RFC for gethostbyname2 - forgot the number -
states, that implementation of gethostbyname may return IPv6 addresses, but it
looks too obscure. And it is is obsolete by getipnodebyname anyway). That was
what I  was about to do - remove all local (re-)definitions of resolver
functions and make better guess about SUPORT_IPV6, i.e. do not use IPv6
functions unless we are doing IPv6 and do not do IPv6 unless we have all
prerequisites. That should also solve my problem (with incorrect use of
gethostbyname2). Unfortunately, I do not have any IPv6 implementation here to
test it. Is there some system that supports IPv6 without proper resolver
support?Zefram, you added IPv6 support IIRC?

Does Solaris 7 support IPv6?

-andrej


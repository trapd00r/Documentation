From schaefer@zagzig.brasslantern.com  Tue Mar 12 14:24:14 1996
Received: from ncd.com (firewall-user@welch.ncd.com [192.43.160.250]) by euclid.skiles.gatech.edu (8.7.3/8.7.3) with SMTP id OAA10993 for <zsh-workers@math.gatech.edu>; Tue, 12 Mar 1996 14:24:07 -0500 (EST)
Received: by ncd.com; id LAA17127; Tue, 12 Mar 1996 11:43:18 -0800
Received: from bartppp.z-code.com(192.82.56.211) by welch.ncd.com via smap (g3.0.1)
	id xma017113; Tue, 12 Mar 96 11:43:03 -0800
Received: (from schaefer@localhost) by zagzig.brasslantern.com (8.6.12/8.6.12) id LAA02605; Tue, 12 Mar 1996 11:24:26 -0800
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <9603121124.ZM2604@candle.brasslantern.com>
Date: Tue, 12 Mar 1996 11:24:25 -0800
In-Reply-To: Zoltan Hidvegi <hzoli@cs.elte.hu>
        "Buffered stderr on Linux" (Mar 12,  8:03pm)
References: <199603121903.UAA10007@bolyai.cs.elte.hu>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (3.2.1 24feb96 Caldera)
To: Zoltan Hidvegi <hzoli@cs.elte.hu>,
        zsh-workers@math.gatech.edu (zsh-workers)
Subject: Re: Buffered stderr on Linux
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 12,  8:03pm, Zoltan Hidvegi wrote:
} Subject: Buffered stderr on Linux
}
} Now I wander why is it
} necessary to use malloc to allocate these buffers.  Is there anything
} against using static char[BUFSIZ] buffers?

Stdio will call free() on the buffer at fclose().  That means you should
always pass malloc'd buffers, and never call free() yourself on a buffer
that's been passed to any of the setbuf() variants!

-- 
Bart Schaefer
http://www.well.com/user/barts


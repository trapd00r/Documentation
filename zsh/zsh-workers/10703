From zsh-workers-return-10703-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Apr 12 14:57:55 2000
Return-Path: <zsh-workers-return-10703-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 614 invoked from network); 12 Apr 2000 14:57:54 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 Apr 2000 14:57:54 -0000
Received: (qmail 7837 invoked by alias); 12 Apr 2000 14:57:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10703
Received: (qmail 7823 invoked from network); 12 Apr 2000 14:57:35 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000412145714.ZM12313@candle.brasslantern.com>
Date: Wed, 12 Apr 2000 14:57:14 +0000
In-Reply-To: <E12fMjj-0001Op-00@crucigera.fysh.org>
Comments: In reply to Zefram <zefram@fysh.org>
        "Re: 3.1.6-dev-22" (Apr 12,  1:59pm)
References: <E12fMjj-0001Op-00@crucigera.fysh.org>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Zefram <zefram@fysh.org>
Subject: Re: 3.1.6-dev-22
Cc: Zsh hackers list <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 12,  1:59pm, Zefram wrote:
} Subject: Re: 3.1.6-dev-22
}
} Bart Schaefer wrote:
} >> If you don't see a problem with changing the way zshpaths.h is made (and I
} >> presume you tried it out) then I certainly don't.
} >
} >Zefram?  I believe it's your test I'm proposing to delete ... or maybe it's
} >Zoltan's ...
} 
} It's really a policy decision: when should zshpaths.h be rebuilt.
} I've previously expressed my point of view on that -- that zshpaths.h
} should always be made consistent with the parameter values effective in
} the make in progress

That's a slightly different issue.  I'm proposing to have zshpaths.h built
*more* often, not less ... the test I want to remove *prevents* zshpaths.h
from being rebuilt in some circumstances.

Here's the (not committed to SourceForge) diff for reference:

--- zsh-forge/common/Src/zsh.mdd	Fri Jan 14 11:15:00 2000
+++ zsh-3.1.6/Src/zsh.mdd	Sat Apr  8 16:12:55 2000
@@ -49,13 +49,8 @@
 	    >>zshpaths.h.tmp; \
 	  fi; \
 	fi
-	@if cmp -s zshpaths.h zshpaths.h.tmp; then \
-	    rm -f zshpaths.h.tmp; \
-	    echo "\`zshpaths.h' is up to date." ; \
-	else \
-	    mv -f zshpaths.h.tmp zshpaths.h; \
-	    echo "Updated \`zshpaths.h'." ; \
-	fi
+	@mv -f zshpaths.h.tmp zshpaths.h; \
+	echo "Updated \`zshpaths.h'."
 
 bltinmods.list: modules.stamp modules-bltin xmods.conf mkbltnmlst.sh
 	srcdir='$(sdir)' MODBINS='modules-bltin' \

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


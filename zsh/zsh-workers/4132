From zsh-workers-request@math.gatech.edu Fri Jun 19 18:21:51 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4904 invoked from network); 19 Jun 1998 18:21:50 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 19 Jun 1998 18:21:50 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id OAA03923;
	Fri, 19 Jun 1998 14:14:00 -0400 (EDT)
Resent-Date: Fri, 19 Jun 1998 14:14:00 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980619111459.ZM9964@candle.brasslantern.com>
Date: Fri, 19 Jun 1998 11:14:59 -0700
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: zsh-workers@math.gatech.edu
Subject: REC_EXACT and AUTO_MENU, and compctl -U too
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"Au1ZP2.0.Az.dfgYr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4132
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

One thing that's annoyed me for a very long time is the interaction of
recexact with automenu.  Suppose I have both options set.

zsh% /usr/li

The possible completions at this point are /usr/lib and /usr/libexec.  I
press TAB (which is bound to expand-or-complete).

zsh% /usr/lib

This is not a completion; it's the unique prefix of a menu completion, or
it would be in most circumstances.  With recexact, though, when I press
TAB again expecting to menucomplete to libexec, I instead get /usr/lib/
and now I can only complete within that directory.

What I'd like is to have recexact behavior when I type the entire prefix
and automenu behavior when zsh supplies the prefix.

While I'm on the subject of mildly stupid completion behavior, automenu
in conjunction with compctl -U could do with a bit of work.  It'd be a
lot more useful if menu completion kicked in immediately when compctl -U
returns multiple matches and automenu is set.  Otherwise you lose both
the set of completions and the nonunique suffix as soon as the first TAB
is pressed.

I haven't dug around in the code for either of these yet; any conflicting
opinions on whether this is worthwhile?  Any remarks on how difficult they
are to pull off?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


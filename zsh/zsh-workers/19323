From zsh-workers-return-19323-mason-zsh=primenet.com.au@sunsite.dk Fri Dec 19 01:00:33 2003
Return-Path: <zsh-workers-return-19323-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19524 invoked from network); 19 Dec 2003 01:00:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Dec 2003 01:00:30 -0000
Received: (qmail 18813 invoked by alias); 19 Dec 2003 01:00:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19323
Received: (qmail 18744 invoked from network); 19 Dec 2003 01:00:16 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 19 Dec 2003 01:00:16 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.130.93] by sunsite.dk (MessageWall 1.0.8) with SMTP; 19 Dec 2003 1:0:16 -0000
Message-ID: <20031219010013.7064.qmail@web10401.mail.yahoo.com>
Received: from [64.169.59.195] by web10401.mail.yahoo.com via HTTP; Thu, 18 Dec 2003 17:00:13 PST
Date: Thu, 18 Dec 2003 17:00:13 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Memory leaks found by valgrind and zsh tests
To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Here are leaks found via valgrind and running zsh against our tests.  For
some reason the completion tests hung, but the other tests seemed to mostly
work.    Latest version from CVS. 

-FR.

 28 bytes in 4 blocks are definitely lost in loss record 2 of 13
    at  malloc (vg_replace_malloc.c:153)
    by  zalloc (mem.c:490)
    by  ztrdup (string.c:52)
    by  bin_typeset (builtin.c:2258)
    by  execbuiltin (builtin.c:440)
    by  execcmd (exec.c:2414)
    by  execpline2 (exec.c:1276)
    by  execpline (exec.c:1066)
    by  execlist (exec.c:872)
    by  execode (exec.c:773)

 7 bytes in 1 blocks are definitely lost in loss record 1 of 13
    at  malloc (vg_replace_malloc.c:153)
    by  zalloc (mem.c:490)
    by  ztrdup (string.c:52)
    by  addvars (exec.c:1627)
    by  execsimple (exec.c:799)
    by  execlist (exec.c:852)
    by  execode (exec.c:773)
    by  bin_eval (builtin.c:4158)
    by  execbuiltin (builtin.c:440)
    by  execcmd (exec.c:2414)

 1157 bytes in 28 blocks are definitely lost in loss record 11 of 13
    at malloc (vg_replace_malloc.c:153)
    by 0x40269EFE: (within /lib/libtermcap.so.2.0.8)
    by 0x4026AE47: tgetstr (in /lib/libtermcap.so.2.0.8)
    by  init_term (init.c:561)
    by  promptexpand (prompt.c:162)
    by  paramsubst (subst.c:2316)
    by  stringsubst (subst.c:137)
    by  prefork (subst.c:74)
    by  execcmd (exec.c:1865)
    by  execpline2 (exec.c:1276)

 5 bytes in 1 blocks are definitely lost in loss record 1 of 13
    at  malloc (vg_replace_malloc.c:153)
    by  zalloc (mem.c:490)
    by  ztrdup (string.c:52)
    by  addvars (exec.c:1627)
    by  execsimple (exec.c:799)
    by  execlist (exec.c:852)
    by  execode (exec.c:773)
    by  bin_eval (builtin.c:4158)
    by  execbuiltin (builtin.c:440)
    by  execcmd (exec.c:2414)

 2434 bytes in 1 blocks are possibly lost in loss record 12 of 14
    at  malloc (vg_replace_malloc.c:153)
    by  zalloc (mem.c:490)
    by  mkenvstr (params.c:3412)
    by  addenv (params.c:3375)
    by  restore_params (exec.c:2590)
    by  execcmd (exec.c:2443)
    by  execpline2 (exec.c:1276)
    by  execpline (exec.c:1066)
    by  execlist (exec.c:872)
    by  execode (exec.c:773)

 24 bytes in 6 blocks are definitely lost in loss record 1 of 13
    at  malloc (vg_replace_malloc.c:153)
    by  zalloc (mem.c:490)
    by  mkarray (utils.c:2191)
    by  arrvarsetfn (params.c:2580)
    by  stdunsetfn (params.c:2308)
    by  unsetparam_pm (params.c:2230)
    by  unsetparam (params.c:2210)
    by  deleteparamdef (module.c:1929)
    by  deleteparamdefs (module.c:1938)
    by 0x41C3A74A: cleanup_ (example.c:219)

 68 bytes in 1 blocks are definitely lost in loss record 2 of 14
    at  malloc (vg_replace_malloc.c:153)
    by  zshcalloc (mem.c:508)
    by  newhashtable (hashtable.c:99)
    by 0x41C8D016: ???
    by 0x41C8D6AA: ???
    by  dyn_boot_module (module.c:625)
    by  boot_module (module.c:678)
    by  load_module (module.c:784)
    by  require_module (module.c:889)
    by  bin_zmodload_load (module.c:1615)



__________________________________
Do you Yahoo!?
New Yahoo! Photos - easier uploading and sharing.
http://photos.yahoo.com/


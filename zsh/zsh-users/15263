From zsh-users-return-15263-mason-zsh=primenet.com.au@zsh.org Thu Aug 12 09:31:38 2010
Return-Path: <zsh-users-return-15263-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2409 invoked by alias); 12 Aug 2010 09:31:38 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15263
Received: (qmail 5388 invoked from network); 12 Aug 2010 09:31:35 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Thu, 12 Aug 2010 10:31:26 +0100
From: Peter Stephenson <Peter.Stephenson@csr.com>
To: "zsh-users" <zsh-users@zsh.org>
Subject: Re: Completion and double quotes
Message-ID: <20100812103126.64aa5bce@csr.com>
In-Reply-To: <201008112130.10895.joke@seiken.de>
References: <201008112130.10895.joke@seiken.de>
Organization: Cambridge Silicon Radio
X-Mailer: Claws Mail 3.7.6 (GTK+ 2.18.9; i686-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 12 Aug 2010 09:31:26.0740 (UTC) FILETIME=[23099540:01CB3A01]
X-Scanned-By: MailControl A_09_40_00 (www.mailcontrol.com) on 10.68.0.125

On Wed, 11 Aug 2010 21:30:08 +0200
Joke de Buhr <joke@seiken.de> wrote:
> Currently my completion is somehow configured to transform double
> quoted paths to backslash escaped paths.
> 
> Example:
>   ls /path/to/"file with"<TAB> -> /path/to/file\ with\ spaces
> 
> I would like the completion not to touch the quotation.

It's not configurable, but you can put the double quote right at the start
of the filename and it probably does what you want.

The code for handling quoting in completion is utterly impenetrable.  It's
actually at it's worst when you're in a nested expression, for example inside:

  su -c 'ls /path/to/"file with"<TAB>

which is quite liable to crash the shell (I didn't dare try).  Even so,
it's bad enough even in the "simple" case that I don't think it's ever
going to be able to second guess intentions to the sort of level you want.
Of course, as always, if someone has a few dozen of hours of spare time and
wants to make it their life's work to improve, that's fine.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


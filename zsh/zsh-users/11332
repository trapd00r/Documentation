From zsh-users-return-11332-mason-zsh=primenet.com.au@sunsite.dk Sun Mar 25 09:44:30 2007
Return-Path: <zsh-users-return-11332-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17297 invoked from network); 25 Mar 2007 09:44:28 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Mar 2007 09:44:28 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 76061 invoked from network); 25 Mar 2007 09:44:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Mar 2007 09:44:22 -0000
Received: (qmail 16334 invoked by alias); 25 Mar 2007 09:44:13 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11332
Received: (qmail 16325 invoked from network); 25 Mar 2007 09:44:12 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 Mar 2007 09:44:12 -0000
Received: (qmail 74833 invoked from network); 25 Mar 2007 09:44:12 -0000
Received: from atom.smasher.org (69.55.237.145)
  by a.mx.sunsite.dk with SMTP; 25 Mar 2007 09:44:09 -0000
Received: (qmail 62595 invoked by uid 1000); 25 Mar 2007 09:44:07 -0000
Message-ID: <20070325094407.62594.qmail@smasher.org>
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
Date: Sun, 25 Mar 2007 05:44:10 -0400 (EDT)
From: Atom Smasher <atom@smasher.org>
MIME-Version: 1.0
OpenPGP: id=0xB88D52E4D9F57808; algo=1 (RSA); size=4096; url=http://atom.smasher.org/pgp.txt
Subject: command substitution with control chars?
To: zsh-users@sunsite.dk
X-POM: The Moon is Waxing Crescent (47% of Full)
X-Hashcash: 1:20:0703250944:zsh-users@sunsite.dk::id0mmYFqXYqdRZ3j:0000000000000
	0000000000000000000000004oM3

i'm trying to have part of a dynamic prompt that displays in different 
colors depending on system parameters.

the output of the script starts with some control characters to set the 
text colors, then outputs some colored text from a script, then outputs 
^[[0m to return to normal colors.

if i run the script in precmd() it ~almost~ works 100%... except that the 
end of the prompt may be hosed by tab-expansion or command line editing 
(since the control characters aren't properly counted in the width of the 
prompt). also, this is limited to only having the output of the script at 
the beginning of the line, although for now that is where i want it.

i suspect the better way to do this would be command substitution in the 
prompt, but the control chars seem to really be making a mess out of that. 
any suggestions?

thanks...


-- 
         ...atom

  ________________________
  http://atom.smasher.org/
  762A 3B98 A3C3 96C9 C6B7 582A B88D 52E4 D9F5 7808
  -------------------------------------------------

 	"You don't get everything you want. A dictatorship would
 	 be a lot easier."
 		-- George "dubya" Bush, describing what it's like
 		to be governor of Texas. (Governing Magazine 7/98)

 	"If this were a dictatorship, it would be a heck of a lot
 	 easier, just so long as I'm the dictator."
 		-- George "dubya" Bush
 		 http://www.cnn.com/TRANSCRIPTS/0012/18/nd.01.html
 		18 Dec 2000 CNN.com

 	"A dictatorship would be a heck of a lot easier, there's
 	 no question about it."
 		George "dubya" Bush, 27 Jul 2001 Associated Press



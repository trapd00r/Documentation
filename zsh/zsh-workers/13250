From zsh-workers-return-13250-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Dec 13 03:04:07 2000
Return-Path: <zsh-workers-return-13250-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17823 invoked from network); 13 Dec 2000 03:04:05 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Dec 2000 03:04:05 -0000
Received: (qmail 12707 invoked by alias); 13 Dec 2000 03:04:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13250
Received: (qmail 12700 invoked from network); 13 Dec 2000 03:03:59 -0000
Date: Tue, 12 Dec 2000 22:03:56 -0500
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: _dict
Message-ID: <20001212220356.A8293@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i

Here's completion for dict.  What's missing are completions for
-s and -d (which can be based on the results of -S and -D respectively)

Index: Completion/User/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/.distfiles,v
retrieving revision 1.12
diff -u -r1.12 .distfiles
--- Completion/User/.distfiles	2000/08/01 12:32:27	1.12
+++ Completion/User/.distfiles	2000/12/13 02:49:30
@@ -1,7 +1,7 @@
 DISTFILES_SRC='
     .distfiles
     _a2ps _archie _arp _bison _bzip2 _chown _compress
-    _configure _cvs _dd _diff _diff_options _dir_list _dirs
+    _configure _cvs _dd _dict _diff _diff_options _dir_list _dirs
     _domains _dvi _enscript
     _find _finger _fakeroot _flex _gcc _gdb  _getconf _gprof _groups
     _gs _gv _gzip _hosts _imagemagick _ispell
Index: Completion/User/_dict
===================================================================
RCS file: _dict
diff -N _dict
--- /dev/null	Tue May  5 13:32:27 1998
+++ _dict	Tue Dec 12 18:49:30 2000
@@ -0,0 +1,66 @@
+#compdef dict
+
+local expl dictresults dictwords j dict
+
+_dictwords() {
+
+[[ -z $words[CURRENT] ]] && return 1
+
+dictresults=(${${(f)${"$(dict -m $words[CURRENT])":gs/    
+  / /}}:#[0-9]*matches found})
+
+for j in ${dictresults}
+do
+dict=${j%%:*}
+dictwords=(${(z)j#*:})
+
+_wanted $dict expl "words from $dict" \
+  compadd -M 'm:{a-zA-Z}={A-Za-z} r:|=*' -a "$@" - dictwords
+done
+}
+
+_arguments \
+	'(--host)-h[host]:dict server:_hosts' \
+	'(-h)--host:dict server:_hosts' \
+	'(--port)-p[port]:service:' \
+	'(-p)--port:service:' \
+	'(--database)-d[database]:db name:' \
+	'(-d)--database:db name:' \
+	'(--match)-m[match]' \
+	'(-m)--match' \
+	'(--strategy)-s[strategy]:strategy:' \
+	'(-s)--strategy:strategy:' \
+	'(--nocorrect)-C[nocorrect]' \
+	'(-C)--nocorrect' \
+	'(--config)-c[config]:config file:_files' \
+	'(-c)--config:config file:_files' \
+	'(--dbs)-D[list dbs]' \
+	'(-D)--dbs' \
+	'(--strats)-S[strats]' \
+	'(-S)--strats' \
+	'(--serverhelp)-H[server help]' \
+	'(-H)--serverhelp' \
+	'(--info)-i[db info]:db name:' \
+	'(-i)--info:db name:' \
+	'(--noauth)-a[disable authentication]' \
+	'(-a)--noauth' \
+	'(--user)-u[user]:user name:' \
+	'(-u)--user:user name:' \
+	'(--key)-k[key]:shared secret:' \
+	'(-k)--key:shared secret:' \
+	'(--version)-V[display version]' \
+	'(-V)--version' \
+	'(--license)-L[display license]' \
+	'(-L)--license' \
+	'--help' \
+	'(--verbose)-v[be verbose]' \
+	'(-v)--verbose' \
+	'(--raw)-r[be very verbose]' \
+	'(-r)--raw' \
+	'(--pager)-P[pager]:program:_command_names -e' \
+	'(-P)--pager:_command_names -e:' \
+	'--html' \
+	'--pipesize:buffer size:' \
+	'--client:client text:' \
+	'--debug:debug flag:(verbose raw scan parse pipe serial time)' \
+	':word:_dictwords'


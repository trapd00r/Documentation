From zsh-workers-return-22183-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 02 12:41:20 2006
Return-Path: <zsh-workers-return-22183-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19506 invoked from network); 2 Feb 2006 12:41:17 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.1 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO,HTML_30_40,HTML_MESSAGE,HTML_TITLE_EMPTY 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 2 Feb 2006 12:41:17 -0000
Received: (qmail 1871 invoked from network); 2 Feb 2006 12:41:11 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Feb 2006 12:41:11 -0000
Received: (qmail 19913 invoked by alias); 2 Feb 2006 12:41:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22183
Received: (qmail 19899 invoked from network); 2 Feb 2006 12:41:07 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 2 Feb 2006 12:41:07 -0000
Received: (qmail 1549 invoked from network); 2 Feb 2006 12:41:07 -0000
Received: from mailgw3.technion.ac.il (132.68.238.35)
  by a.mx.sunsite.dk with SMTP; 2 Feb 2006 12:41:04 -0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw3.technion.ac.il (Postfix) with ESMTP id 60F2D37A7F4
	for <zsh-workers@sunsite.dk>; Thu,  2 Feb 2006 14:41:01 +0200 (IST)
Received: from mailgw3.technion.ac.il ([127.0.0.1])
 by localhost (mailgw3 [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 20730-01-54 for <zsh-workers@sunsite.dk>;
 Thu,  2 Feb 2006 14:41:01 +0200 (IST)
Received: from leeor.math.technion.ac.il (leeor.math.technion.ac.il [132.68.115.2])
	by mailgw3.technion.ac.il (Postfix) with ESMTP id F08CC37A833
	for <zsh-workers@sunsite.dk>; Thu,  2 Feb 2006 14:41:00 +0200 (IST)
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by leeor.math.technion.ac.il (8.12.11/8.12.11) with ESMTP id k12Cexb1012082;
	Thu, 2 Feb 2006 14:41:00 +0200 (IST)
Message-ID: <43E1FDDC.3020306@math.technion.ac.il>
Disposition-Notification-To: "Zvi Har'El" <rl@math.technion.ac.il>
Date: Thu, 02 Feb 2006 14:41:00 +0200
From: "Zvi Har'El" <rl@math.technion.ac.il>
Organization: Technion--Israel Institute of Technology
User-Agent: Thunderbird 1.5 (X11/20051201)
MIME-Version: 1.0
To: Jean Chalard <jean.chalard@gmail.com>
CC: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: [4.3 CVS] funny output with multibyte
References: <19c433eb0602020108k51d5a9abscece73c96079bec5@mail.gmail.com> <fb6be96e0602020133v7552893cybacb3393685147c6@mail.gmail.com>
In-Reply-To: <fb6be96e0602020133v7552893cybacb3393685147c6@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020503030601050109050101"
X-Virus-Scanned: by amavisd-new at technion.ac.il

This is a multi-part message in MIME format.
--------------020503030601050109050101
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

The explanation explains everything, except the percent sign. BTW, In my 
case, I see a reverse-video percent sign printed. What does it mean?

Jean Chalard wrote, On 02/02/2006 11:33 AM:

>>   3. When the function returns, the screen turns into :>> pc31 ~ $ sleep 10> azerty%> pc31 ~ $ azerty>> Please note that the percent sign (%) is followed by spaces up to the> end of the line, and that there is no newline after that.>> While it's not a major problem, I found that amazing. Bug or feature?
>>     
> I think you are experiencing the effects of the new PROMPT_SPACESoption, which is the new solution to the NO_PROMPT_CR debate that hasbeen around for quite a time.IIRC, by default zsh now print spaces that fill the terminal width andthen prints a CR. If nothing had been printed before, the last spaceis on the last column but the cursor is still on the same line so theCR makes it return at the beginning of the line so that you won't seean empty line. If something had been printed on the line before, thenthe cursor is going to be on the next line, so that your prompt won'tbe printed over previous data that was not followed by a NL.
> This ought to end the debate about PROMPT_CR :)
> --J"Toi, je te trouve pas la même tête que sur la page précédente" -- Wakamiya
>   

-- 
Dr. Zvi Har'El      mailto:rl@math.technion.ac.il    Department of Mathematics
tel:+972-54-4227607 icq:179294841    Technion - Israel Institute of Technology
fax:+972-4-8293388  http://www.math.technion.ac.il/~rl/    Haifa 32000, ISRAEL
"If you can't say somethin' nice, don't say nothin' at all." -- Thumper (1942)


--------------020503030601050109050101
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 8bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html;charset=UTF-8" http-equiv="Content-Type">
  <title></title>
</head>
<body dir="ltr" bgcolor="#ffffff" text="#000000">
<p style="margin-bottom: 0cm; margin-top: 0pt;">The explanation
explains everything, except the percent sign. BTW, In my case, I see a
reverse-video percent sign printed. What does it mean?<br>
<br>
Jean Chalard wrote, On 02/02/2006 11:33 AM:<br>
</p>
<blockquote
 cite="midfb6be96e0602020133v7552893cybacb3393685147c6@mail.gmail.com"
 type="cite">
  <blockquote type="cite">
    <pre wrap="">  3. When the function returns, the screen turns into :&gt;&gt; pc31 ~ $ sleep 10&gt; azerty%&gt; pc31 ~ $ azerty&gt;&gt; Please note that the percent sign (%) is followed by spaces up to the&gt; end of the line, and that there is no newline after that.&gt;&gt; While it's not a major problem, I found that amazing. Bug or feature?
    </pre>
  </blockquote>
  <pre wrap=""><!---->I think you are experiencing the effects of the new PROMPT_SPACESoption, which is the new solution to the NO_PROMPT_CR debate that hasbeen around for quite a time.IIRC, by default zsh now print spaces that fill the terminal width andthen prints a CR. If nothing had been printed before, the last spaceis on the last column but the cursor is still on the same line so theCR makes it return at the beginning of the line so that you won't seean empty line. If something had been printed on the line before, thenthe cursor is going to be on the next line, so that your prompt won'tbe printed over previous data that was not followed by a NL.
This ought to end the debate about PROMPT_CR :)
--J"Toi, je te trouve pas la même tête que sur la page précédente" -- Wakamiya
  </pre>
</blockquote>
<br>
<pre class="moz-signature" cols="79">-- 
Dr. Zvi Har'El      <a class="moz-txt-link-freetext" href="mailto:rl@math.technion.ac.il">mailto:rl@math.technion.ac.il</a>    Department of Mathematics
tel:+972-54-4227607 icq:179294841    Technion - Israel Institute of Technology
fax:+972-4-8293388  <a class="moz-txt-link-freetext" href="http://www.math.technion.ac.il/~rl/">http://www.math.technion.ac.il/~rl/</a>    Haifa 32000, ISRAEL
"If you can't say somethin' nice, don't say nothin' at all." -- Thumper (1942)
</pre>
</body>
</html>

--------------020503030601050109050101--


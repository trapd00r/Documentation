From jdl@clinicom.com Fri Jun  7 17:31:38 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id RAA03603 for <mason@werple.mira.net.au>; Fri, 7 Jun 1996 17:31:34 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id DAA04564; Fri, 7 Jun 1996 03:10:46 -0400 (EDT)
Resent-Date: Fri, 7 Jun 1996 03:10:46 -0400 (EDT)
From: "J.D. Laub" <jdl@clinicom.com>
Message-Id: <199606070713.BAA162236@clinicom.com>
Subject: fc bug when histNoStore
To: zsh-workers@math.gatech.edu
Date: Fri, 7 Jun 1996 01:13:47 -0600 (MDT)
Organization: The Psychiatric Ward of Terrors
X-Mailer: ELM [version 2.4 PL24 PGP3 *ALPHA*]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"diu5E3.0.E71.sNzjn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1286
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 10199
Status: OR

I'm not a zsh list subscriber, so please email me directly if you need
more info.  Thanks for your time.

Here's a bug in the fc builtin.  Running "fc -l -1 -1" works fine
unless I setopt histNoStore, at which time the command yields what
should be output with "fc -l -2 -2".

Script started on Fri Jun  7 00:58:29 1996
$ pwd
/home5/jdl/zsh/zsh-2.6-beta19
$ ./Src/zsh -f
chimay% . ./Util/reporter
# START zsh saveset
# uname:  HP-UX chimay A.09.04 E 9000/887 1962770231 8-user license

# Aliases.

alias run-help=man
alias which-command=whence

# Key bindings.

bindkey -r "^@"
bindkey -r "^A"
bindkey -r "^B"
bindkey -r "^C"
bindkey -r "^D"
bindkey -r "^E"
bindkey -r "^F"
bindkey -r "^G"
bindkey -r "^H"
bindkey -r "^I"
bindkey -r "^J"
bindkey -r "^K"
bindkey -r "^L"
bindkey -r "^M"
bindkey -r "^N"
bindkey -r "^O"
bindkey -r "^P"
bindkey -r "^Q"
bindkey -r "^R"
bindkey -r "^S"
bindkey -r "^T"
bindkey -r "^U"
bindkey -r "^V"
bindkey -r "^W"
bindkey -r "^X"
bindkey -r "^Y"
bindkey -r "^Z"
bindkey -r "\e"
bindkey -r "^_"
bindkey -r "^?"
bindkey -r "^X^B"
bindkey -r "^X^F"
bindkey -r "^X^J"
bindkey -r "^X^K"
bindkey -r "^X^N"
bindkey -r "^X^O"
bindkey -r "^X^U"
bindkey -r "^X^V"
bindkey -r "^X^X"
bindkey -r "^X*"
bindkey -r "^XG"
bindkey -r "^Xg"
bindkey -r "^Xr"
bindkey -r "^Xs"
bindkey -r "^Xu"
bindkey -r "\e^D"
bindkey -r "\e^G"
bindkey -r "\e^H"
bindkey -r "\e^I"
bindkey -r "\e^J"
bindkey -r "\e^L"
bindkey -r "\e^M"
bindkey -r "\e^_"
bindkey -r "\e "
bindkey -r "\e!"
bindkey -r "\e\\""
bindkey -r "\e$"
bindkey -r "\e'"
bindkey -r "\e-"
bindkey -r "\e."
bindkey -r "\e0"
bindkey -r "\e1"
bindkey -r "\e2"
bindkey -r "\e3"
bindkey -r "\e4"
bindkey -r "\e5"
bindkey -r "\e6"
bindkey -r "\e7"
bindkey -r "\e8"
bindkey -r "\e9"
bindkey -r "\e<"
bindkey -r "\e>"
bindkey -r "\e?"
bindkey -r "\eA"
bindkey -r "\eB"
bindkey -r "\eC"
bindkey -r "\eD"
bindkey -r "\eF"
bindkey -r "\eG"
bindkey -r "\eH"
bindkey -r "\eL"
bindkey -r "\eN"
bindkey -r "\eP"
bindkey -r "\eQ"
bindkey -r "\eS"
bindkey -r "\eT"
bindkey -r "\eU"
bindkey -r "\eW"
bindkey -r "\e[A"
bindkey -r "\e[B"
bindkey -r "\e[C"
bindkey -r "\e[D"
bindkey -r "\e_"
bindkey -r "\ea"
bindkey -r "\eb"
bindkey -r "\ec"
bindkey -r "\ed"
bindkey -r "\ef"
bindkey -r "\eg"
bindkey -r "\eh"
bindkey -r "\el"
bindkey -r "\en"
bindkey -r "\ep"
bindkey -r "\eq"
bindkey -r "\es"
bindkey -r "\et"
bindkey -r "\eu"
bindkey -r "\ew"
bindkey -r "\ex"
bindkey -r "\ey"
bindkey -r "\ez"
bindkey -r "\e|"
bindkey -r "\e^?"

bindkey "^@"    set-mark-command
bindkey "^A"    beginning-of-line
bindkey "^B"    backward-char
bindkey "^C"    undefined-key
bindkey "^D"    delete-char-or-list
bindkey "^E"    end-of-line
bindkey "^F"    forward-char
bindkey "^G"    send-break
bindkey "^H"    backward-delete-char
bindkey "^I"    expand-or-complete
bindkey "^J"    accept-line
bindkey "^K"    kill-line
bindkey "^L"    clear-screen
bindkey "^M"    accept-line
bindkey "^N"    down-line-or-history
bindkey "^O"    accept-line-and-down-history
bindkey "^P"    up-line-or-history
bindkey "^Q"    push-line
bindkey "^R"    history-incremental-search-backward
bindkey "^S"    history-incremental-search-forward
bindkey "^T"    transpose-chars
bindkey "^U"    kill-whole-line
bindkey "^V"    quoted-insert
bindkey "^W"    backward-kill-word
bindkey "^X"    prefix
bindkey "^Y"    yank
bindkey "^Z"    undefined-key
bindkey "\e"    prefix
bindkey "^_"    undo
bindkey "^?"    backward-delete-char
bindkey "^X^B"  vi-match-bracket
bindkey "^X^F"  vi-find-next-char
bindkey "^X^J"  vi-join
bindkey "^X^K"  kill-buffer
bindkey "^X^N"  infer-next-history
bindkey "^X^O"  overwrite-mode
bindkey "^X^U"  undo
bindkey "^X^V"  vi-cmd-mode
bindkey "^X^X"  exchange-point-and-mark
bindkey "^X*"   expand-word
bindkey "^XG"   list-expand
bindkey "^Xg"   list-expand
bindkey "^Xr"   history-incremental-search-backward
bindkey "^Xs"   history-incremental-search-forward
bindkey "^Xu"   undo
bindkey "\e^D"  list-choices
bindkey "\e^G"  send-break
bindkey "\e^H"  backward-kill-word
bindkey "\e^I"  self-insert-unmeta
bindkey "\e^J"  self-insert-unmeta
bindkey "\e^L"  clear-screen
bindkey "\e^M"  self-insert-unmeta
bindkey "\e^_"  copy-prev-word
bindkey "\e "   expand-history
bindkey "\e!"   expand-history
bindkey "\e\\"" quote-region
bindkey "\e$"   spell-word
bindkey "\e'"   quote-line
bindkey "\e-"   neg-argument
bindkey "\e."   insert-last-word
bindkey "\e0"   digit-argument
bindkey "\e1"   digit-argument
bindkey "\e2"   digit-argument
bindkey "\e3"   digit-argument
bindkey "\e4"   digit-argument
bindkey "\e5"   digit-argument
bindkey "\e6"   digit-argument
bindkey "\e7"   digit-argument
bindkey "\e8"   digit-argument
bindkey "\e9"   digit-argument
bindkey "\e<"   beginning-of-buffer-or-history
bindkey "\e>"   end-of-buffer-or-history
bindkey "\e?"   which-command
bindkey "\eA"   accept-and-hold
bindkey "\eB"   backward-word
bindkey "\eC"   capitalize-word
bindkey "\eD"   kill-word
bindkey "\eF"   forward-word
bindkey "\eG"   get-line
bindkey "\eH"   run-help
bindkey "\eL"   down-case-word
bindkey "\eN"   history-search-forward
bindkey "\eP"   history-search-backward
bindkey "\eQ"   push-line
bindkey "\eS"   spell-word
bindkey "\eT"   transpose-words
bindkey "\eU"   up-case-word
bindkey "\eW"   copy-region-as-kill
bindkey "\e[A"  up-line-or-history
bindkey "\e[B"  down-line-or-history
bindkey "\e[C"  forward-char
bindkey "\e[D"  backward-char
bindkey "\e_"   insert-last-word
bindkey "\ea"   accept-and-hold
bindkey "\eb"   backward-word
bindkey "\ec"   capitalize-word
bindkey "\ed"   kill-word
bindkey "\ef"   forward-word
bindkey "\eg"   get-line
bindkey "\eh"   run-help
bindkey "\el"   down-case-word
bindkey "\en"   history-search-forward
bindkey "\ep"   history-search-backward
bindkey "\eq"   push-line
bindkey "\es"   spell-word
bindkey "\et"   transpose-words
bindkey "\eu"   up-case-word
bindkey "\ew"   copy-region-as-kill
bindkey "\ex"   execute-named-cmd
bindkey "\ey"   yank-pop
bindkey "\ez"   execute-last-named-cmd
bindkey "\e|"   vi-goto-column
bindkey "\e^?"  backward-kill-word

# Completions.

compctl -b bindkey
compctl -c builtin
compctl -v export
compctl -o setopt
compctl -v typeset
compctl -v unset
compctl -o unsetopt
compctl -v vared
compctl -c which
compctl -C -c
compctl -D -f
compctl -T

# Undefined functions.


# Defined functions.


# Limits.

limit filesize        3MB
limit datasize        64MB
limit stacksize       8MB
limit descriptors     2048

# Non-array variables.

TERMCAP=''
TERM='vt100'
\'!\'="0"
\'#\'="0"
\'$\'="18993"
\'?\'="1"
ANNEX_REL="6.2"
ANNEX_RELEASE="6"
ARGC="0"
AWK="awk"
BAUD="19200"
CCSITE="chimay"
CDPATH="\'\'"
COLUMNS="80"
CPP="/lib/cpp"
DIRSTACKSIZE="-1"
EGID="206"
ERRNO="0"
EUID="4033"
FCEDIT="vi"
FIGNORE="\'\'"
FPATH="\'\'"
GID="206"
HISTSIZE="30"
HOME="/home5/jdl"
HOST="chimay"
HOSTTYPE="hpux9.04"
KEYTIMEOUT="40"
LANG="\'\'"
LINENO="329"
LINES="24"
LISTMAX="100"
LOGCHECK="60"
LOGNAME="jdl"
MACHINE="hp9000"
MACHTYPE="hppa1.1"
MAIL="/usr/mail/jdl"
MAILCHECK="60"
MAILPATH="\'\'"
MANPATH="/usr/local/man:/usr/man:/usr/contrib/man:/usr/lib/hpnp/man"
NODE_NAME="chimay"
NULLCMD="cat"
OLDPWD="/home5/jdl/zsh/zsh-2.6-beta19"
OPS="HPUX"
OPS_PATH="/bin/posix:/bin:/usr/bin:/usr/contrib/bin"
OPS_RELEASE="9"
OPTARG="\'\'"
OPTIND="1"
OSTYPE="hpux9.04"
PATH="/usr/local/bin:/bin/posix:/bin:/usr/bin:/usr/contrib/bin"
PERIOD="0"
POSTEDIT="\'\'"
PPID="17932"
PROMPT="\'%m%# \'"
PROMPT2="\'> \'"
PROMPT3="\'?# \'"
PROMPT4="\'+ \'"
PS1="\'%m%# \'"
PS2="\'> \'"
PS3="\'?# \'"
PS4="\'+ \'"
PSVAR="\'\'"
PWD="/home5/jdl/zsh/zsh-2.6-beta19"
RANDOM="21754"
READNULLCMD="more"
RELS="\'4.1.5 5.1.5 5.1.6 6.1.1\'"
REPORTTIME="-1"
RPROMPT="\'\'"
RPS1="\'\'"
SAVEHIST="0"
SECONDS="13"
SHELL="/bin/ksh"
SHLVL="1"
SPROMPT="\'zsh: correct \'\\'\'%R\'\\'\' to \'\\'\'%r\'\\'\' [nyae]? \'"
TIMEFMT="\'%J  %U user %S system %P cpu %*E total\'"
TMOUT="0"
TMPPREFIX="/tmp/zsh"
TTY="/dev/ttyp8"
TTYIDLE="-1"
TZ="MST7MDT"
UID="4033"
USERNAME="jdl"
VENDOR="hp"
WATCH="\'\'"
WATCHFMT="\'%n has %a %l from %m.\'"
WORDCHARS="\'*?_-.[]~=/&;!#$%^(){}<>\'"
ZSH_NAME="zsh"
ZSH_VERSION="2.6-beta19"
each="\'__unix"
histchars="\'!^#\'"
reporter_OSVersion="HP-UX_A.09.04"
reporter_junkiequotes="no"
status="1"
str="\'HP-UX chimay A.09.04 E 9000/887 1962770231 8-user license\'"
prompt='test%'

# Array variables.

argv=()
'*'=()
cdpath=()
fignore=()
fpath=()
mailpath=()
manpath=(/usr/local/man /usr/man /usr/contrib/man/usr/lib/hpnp/man)
path=(/usr/local/bin /bin/posix /bin /usr/bin/usr/contrib/bin )
psvar=()
signals=(EXIT HUP INT QUIT ILL TRAP ABRT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM USR1 USR2 CHLD PWR VTALRM PROF IO WINCH STOP TSTP CONT TTIN TTOU URG LOST RESERVE DIL ZERRDEBUG )
watch=()

# Exported variables.

export TERMCAP
export TERM
export ANNEX_REL=6.2
export ANNEX_RELEASE=6
export CCSITE=chimay
export HOME=/home5/jdl
export LOGNAME=jdl
export MACHINE=hp9000
export MAIL=/usr/mail/jdl
export MANPATH=/usr/local/man:/usr/man:/usr/contrib/man:/usr/lib/hpnp/man
export NODE_NAME=chimay
export OPS=HPUX
export OPS_PATH=/bin/posix:/bin:/usr/bin:/usr/contrib/bin
export OPS_RELEASE=9
export PATH=/usr/local/bin:/bin/posix:/bin:/usr/bin:/usr/contrib/bin
export PWD=/home5/jdl/zsh/zsh-2.6-beta19
export RELS='4.1.5 5.1.5 5.1.6 6.1.1'
export SHELL=/bin/ksh
export SHLVL=1
export TERM=vt100
export TZ=MST7MDT

# Setopt.

setopt bgnice
setopt hashcmds
setopt hashdirs
setopt hashlistall
setopt norcs
setopt notify

# END zsh saveset
chimay% echo one two
one two
chimay% echo three four
three four
chimay% fc -l -1 -1
    3  echo three four
chimay% fc -l
    1  . ./Util/reporter
    2  echo one two
    3  echo three four
    4  fc -l -1 -1
    5  fc -l
chimay% setopt histNoStore
chimay% echo five six
five six
chimay% echo seven eight
seven eight
chimay% fc -l -1 -1
    7  echo five six
chimay% fc -l
    1  . ./Util/reporter
    2  echo one two
    3  echo three four
    4  fc -l -1 -1
    5  fc -l
    6  setopt histNoStore
    7  echo five six
    8  echo seven eight
chimay% exit
$ exit

script done on Fri Jun  7 01:00:46 1996
-- 
J.D. Laub (Laubster) HBOC/CliniCom|"I think you're very, very, very, very, very,
jdl@clinicom.com     Boulder,CO   |very, very, very, very, ..." - Flying Lizards



From zsh-workers-return-23988-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 18 19:54:23 2007
Return-Path: <zsh-workers-return-23988-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22569 invoked from network); 18 Oct 2007 19:54:14 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Oct 2007 19:54:14 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 94390 invoked from network); 18 Oct 2007 19:54:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Oct 2007 19:54:08 -0000
Received: (qmail 13955 invoked by alias); 18 Oct 2007 19:54:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23988
Received: (qmail 13932 invoked from network); 18 Oct 2007 19:54:05 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 18 Oct 2007 19:54:05 -0000
Received: (qmail 94050 invoked from network); 18 Oct 2007 19:54:05 -0000
Received: from rn-out-0910.google.com (HELO rn-out-0102.google.com) (64.233.170.184)
  by a.mx.sunsite.dk with SMTP; 18 Oct 2007 19:53:59 -0000
Received: by rn-out-0102.google.com with SMTP id e24so177145rng
        for <zsh-workers@sunsite.dk>; Thu, 18 Oct 2007 12:53:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=nhctQXywl6AUSABvWVHHL+2P9o4/gd/5nyUoDNPOjMk=;
        b=dw3y2+DVhTgg5DKhQjRbn2B2y0YTlBL+b5u7mcN+XcfPybjaP7xdOBEtVfUs/hvXBFH+al/C9o9OO+vgE4Qt/rDgXlI8erDOAISz/1p9kVDb06BsYRvdMzhOKoTvFyz8uCe+uCvjTU+TwRJ3ibb5wSIo96LqEqkl6Qg53kQXAKs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=WLzNl96O5R0Giw88PUX36VaujuDB89t7GUYLHeXu3ZJ9TFOD9EAk9sJQypeYd87jwWU9grJIXoHD+F//AHpiKfkpVY2B3ShQxZPgDsH9bzSnnQBPofm/FU73GMuD6NOlp7iICom63R9MrfLYOhDLZPra/GmbTErUgoDf3orXR4s=
Received: by 10.143.160.1 with SMTP id m1mr434654wfo.1192737237151;
        Thu, 18 Oct 2007 12:53:57 -0700 (PDT)
Received: by 10.142.86.21 with HTTP; Thu, 18 Oct 2007 12:53:56 -0700 (PDT)
Message-ID: <237967ef0710181253g63fb7406n790b9ddba6a4c260@mail.gmail.com>
Date: Thu, 18 Oct 2007 21:53:57 +0200
From: "Mikael Magnusson" <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: Re: git-svn completion issue (patch)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 16/10/2007, Mikael Magnusson <mikachu@gmail.com> wrote:
> % git-svn <tab>
> ---- no match for: `command'
>
> I opened up _git to have a look, it seems it checks if $state is
> command, then declares an array $commands, which it then goes ahead
> and never uses for anything. I don't know exactly what incantation of
> _arguments or similar needs to be done here so no patch this time.

I think I figured it out, it at least seems to work correctly.

http://git.mikachu.ath.cx/?p=zsh-cvs.git;a=commitdiff_plain;h=gitsvn

--- a/Completion/Unix/Command/_git
+++ b/Completion/Unix/Command/_git
@@ -2345,6 +2345,7 @@ _git-svn () {
         'set-tree:commit given commit or tree to SVN repository'
         'show-ignore:output corresponding .gitignore file of svn:ignore'
         'commit-diff:commit diff of two tree-ishs')
+        _describe -t commands command commands && ret=0
       ;;
     (options)
       declare -a arguments


-- 
Mikael Magnusson


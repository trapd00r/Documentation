From zsh-workers-request@math.gatech.edu Mon Jun 01 16:37:56 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19353 invoked from network); 1 Jun 1998 16:37:54 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 1 Jun 1998 16:37:54 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id MAA05558;
	Mon, 1 Jun 1998 12:31:14 -0400 (EDT)
Resent-Date: Mon, 1 Jun 1998 12:31:14 -0400 (EDT)
Message-Id: <199806011631.MAA26625@luomat.peak.org>
Content-Type: text/plain
MIME-Version: 1.0
In-Reply-To: <199806011628.RAA14459@taos.demon.co.uk>
From: Timothy J Luoma <luomat+Lists/Zsh/workers@luomat.peak.org>
Date: Mon,  1 Jun 98 12:31:43 -0400
To: Zefram <zefram@tao.co.uk>
Subject: Re: can't build 3.1.4 under NeXTStep (LONG)
cc: zsh-workers@math.gatech.edu
References: <199806011628.RAA14459@taos.demon.co.uk>
Resent-Message-ID: <"atx-j3.0.nM1.ITjSr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4021
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

	Author:        Zefram <zefram@tao.co.uk>
	Original-Date: Mon, 1 Jun 1998 17:28:36 +0100 (BST)
	Message-ID:    <199806011628.RAA14459@taos.demon.co.uk>

> >library flags             : -ltermcap
>
> Odd that this doesn't include -lc.

I'll take your word for that, as I don't know what it means :-)


> >$ make
> >Make: Makefile: Must be a separator on line 37.  Stop.
> >zsh: 24884 exit 1     make
> >$
> >
> >
> >Line 37 is merely:
> >
> >all: config.h
>
> Could you post the whole Makefile, please?

Sure.... I'll even post the configure.output

./configure --host=i386-next-nextstep3
creating cache ./config.cache
configuring for zsh 3.1.4
checking host system type... i386-next-nextstep3
checking for gcc... no
checking for cc... cc
checking whether the C compiler (cc  ) works... yes
checking whether the C compiler (cc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether cc accepts -g... yes
checking how to run the C preprocessor... cc -E
checking whether cc needs -traditional... no
checking for working const... yes
checking for cc option to accept ANSI C...
checking whether to use prototypes... yes
checking for working alloca.h... no
checking for alloca... yes
checking if the compiler supports union initialisation... yes
checking if signed to unsigned casting is broken... no
checking if the compiler supports variable-lenth arrays... yes
checking whether make sets ${MAKE}... yes
checking for a BSD compatible install... /usr/local/gnu/bin/ginstall -c
checking for mawk... no
checking for gawk... gawk
checking for yodl... no
checking for dirent.h that defines DIR... no
checking for sys/ndir.h that defines DIR... no
checking for sys/dir.h that defines DIR... yes
checking for opendir in -lx... no
checking for ANSI C header files... yes
checking whether time.h and sys/time.h may both be included... yes
checking whether stat file-mode macros are broken... no
checking for sys/wait.h that is POSIX.1 compatible... no
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/select.h... no
checking for termcap.h... no
checking for termio.h... no
checking for termios.h... yes
checking for sys/param.h... yes
checking for sys/filio.h... no
checking for string.h... yes
checking for memory.h... yes
checking for limits.h... yes
checking for fcntl.h... yes
checking for libc.h... yes
checking for sys/utsname.h... yes
checking for sys/resource.h... yes
checking for locale.h... yes
checking for errno.h... yes
checking for stdlib.h... yes
checking for unistd.h... yes
checking for sys/capability.h... no
checking for utmp.h... yes
checking for utmpx.h... no
checking for sys/types.h... yes
checking POSIX termios... no
checking TIOCGWINSZ in sys/ioctl.h... yes
checking for sys/ptem.h... no
checking for printf in -lc... no
checking for tgetent in -ltermcap... yes
checking for yp_all... yes
checking for cap_init in -lcap... no
checking if an include file defines ospeed... no
checking if you must define ospeed... no
checking if tgetent accepts NULL... no
checking return type of signal handlers... void
checking for pid_t... no
checking for off_t... yes
checking for mode_t... no
checking for uid_t in sys/types.h... yes
checking for size_t... yes
checking for sigset_t... no
checking for struct timezone... yes
checking for struct utmp... yes
checking for struct utmpx... no
checking ut_host in struct utmp... yes
checking ut_host in struct utmpx... no
checking whether getpgrp takes no argument... no
checking for working strcoll... no
checking for memcpy... yes
checking for memmove... yes
checking for strftime... yes
checking for waitpid... no
checking for select... yes
checking for tcsetpgrp... no
checking for tcgetattr... no
checking for strstr... yes
checking for lstat... yes
checking for getlogin... yes
checking for setpgid... no
checking for gettimeofday... yes
checking for gethostname... yes
checking for mkfifo... no
checking for wait3... yes
checking for difftime... yes
checking for sigblock... yes
checking for sigsetmask... yes
checking for sigrelse... no
checking for sighold... no
checking for killpg... yes
checking for sigaction... no
checking for getrlimit... yes
checking for sigprocmask... no
checking for setuid... yes
checking for seteuid... yes
checking for setreuid... yes
checking for setresuid... no
checking for setsid... no
checking for strerror... yes
checking for nis_list... no
checking for initgroups... yes
checking for fchdir... no
checking for cap_init... no
checking for readlink... yes
checking what style of signals to use... BSD_SIGNALS
checking where signal.h is located... /usr/include/bsd/sys/signal.h
checking where the RLIMIT macros are located... /usr/include/bsd/sys/resource.h
checking if rlim_t is quad_t... no
checking if the rlim_t is unsigned... no
checking for rlim_t... no
checking for /dev/fd filesystem... no
checking for RFS superroot directory... no
checking for NIS... no
checking for NIS+... no
checking for utmp file... /etc/utmp
checking for wtmp file... /usr/adm/wtmp

checking for utmpx file... no
checking for wtmpx file... no
checking if typeahead needs FIONREAD... no
checking for brk() prototype in <unistd.h>... no
checking for sbrk() prototype in <unistd.h>... no

checking for ioctl prototype in <sys/ioctl.h>... no
checking if named FIFOs work... yes
checking if echo in /bin/sh interprets escape sequences... yes
updating cache ./config.cache

creating ./config.status
creating Makefile
creating Doc/Makefile

creating Etc/Makefile
creating Src/Makefile
creating config.h

zsh configuration

-----------------
zsh version               : 3.1.4
host operating system     : i386-next-nextstep3
source code location      : .

compiler                  : cc
executable compiler flags :  -Wall -Wno-implicit -Wmissing-prototypes -O2
executable linker flags   :   -s
library flags             : -ltermcap

binary install path       : /usr/local/bin
man page install path     : /usr/local/man
info install path         : /usr/local/info


HERE'S the Makefile, with the disclaimer comments omitted for space:


subdir = .
dir_top = .
SUBDIRS = Doc Etc Src

@@defs.mk@@

# ========== DEPENDENCIES FOR BUILDING ==========

# default target
all: config.h
	@for subdir in Src Doc; do \
	  (cd $$subdir && $(MAKE) $(MAKEDEFS) $@) || exit 1; \
	done; \

check test:
	@echo zsh test suite not available yet

# prepare module configuration
prep:
	@cd Src && $(MAKE) $(MAKEDEFS) $@

META-FAQ: FORCE
	@cd Doc && $(MAKE) $(MAKEDEFS) ../META-FAQ

# ========== DEPENDENCIES FOR INSTALLING ==========

# install/uninstall everything
install: install.bin install.modules install.man install.info
uninstall: uninstall.bin uninstall.modules uninstall.man uninstall.info

# install/uninstall just the binary
install.bin uninstall.bin:
	@cd Src && $(MAKE) $(MAKEDEFS) $@

# install/uninstall just the modules
install.modules uninstall.modules:
	@cd Src && $(MAKE) $(MAKEDEFS) $@

# install/uninstall just the man pages
install.man uninstall.man:
	@cd Doc && $(MAKE) $(MAKEDEFS) $@

# install/uninstall just the info pages
install.info uninstall.info:
	@cd Doc && $(MAKE) $(MAKEDEFS) $@

# ========== DEPENDENCIES FOR CLEANUP ==========

@@clean.mk@@

distclean-here:
	rm -f Makefile config.h config.status config.log config.cache stamp-h

realclean-here:
	cd $(sdir) && rm -f config.h.in stamp-h.in configure

# ========== DEPENDENCIES FOR MAINTENANCE ==========

@@config.mk@@

config: config.h

config.status: configure Src/version.h
	./config.status --recheck

configure: configure.in aclocal.m4 aczsh.m4
	cd $(sdir) && autoconf

config.h: stamp-h
stamp-h: config.h.in config.status
	cd $(dir_top) && \
	  CONFIG_FILES= CONFIG_HEADERS=$(subdir)/config.h ./config.status

config.h.in: stamp-h.in
stamp-h.in: configure.in acconfig.h aclocal.m4 aczsh.m4
	cd $(sdir) && autoheader
	echo > $@

# ========== DEPENDENCIES FOR DISTRIBUTION ==========

DISTNAME = zsh-$(VERSION)

targz-src: $(DISTNAME).tar.gz
$(DISTNAME).tar.gz: FORCE
	@$(sdir_top)/Util/mkdisttree.sh $(DISTNAME) $(sdir_top) $(dir_top) SRC \
	    $(MAKE) $(MAKEDEFS)
	tar cf - $(DISTNAME) | gzip -9 > $@
	rm -rf $(DISTNAME)

targz-doc: $(DISTNAME)-doc.tar.gz
$(DISTNAME)-doc.tar.gz: FORCE
	@$(sdir_top)/Util/mkdisttree.sh $(DISTNAME) $(sdir_top) $(dir_top) DOC \
	    $(MAKE) $(MAKEDEFS)
	tar cf - $(DISTNAME) | gzip -9 > $@
	rm -rf $(DISTNAME)

FORCE:







From zsh-workers-return-22242-mason-zsh=primenet.com.au@sunsite.dk Sun Feb 12 15:07:07 2006
Return-Path: <zsh-workers-return-22242-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14992 invoked from network); 12 Feb 2006 15:07:04 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Feb 2006 15:07:04 -0000
Received: (qmail 19596 invoked from network); 12 Feb 2006 15:06:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Feb 2006 15:06:57 -0000
Received: (qmail 17475 invoked by alias); 12 Feb 2006 15:06:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22242
Received: (qmail 16975 invoked from network); 12 Feb 2006 15:05:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Feb 2006 15:05:13 -0000
Received: (qmail 16129 invoked from network); 12 Feb 2006 15:05:13 -0000
Received: from mail.host.bg (87.120.40.5)
  by a.mx.sunsite.dk with SMTP; 12 Feb 2006 15:05:11 -0000
Received: from [85.130.36.12] (85-130-36-12.1699525.ddns.cablebg.net [85.130.36.12])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.host.bg (Postfix) with ESMTP id F049B161FE0;
	Sun, 12 Feb 2006 17:05:07 +0200 (EET)
Message-ID: <43EF4EAA.6040507@roumenpetrov.info>
Date: Sun, 12 Feb 2006 17:05:14 +0200
From: Roumen Petrov <bugtrack@roumenpetrov.info>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.12) Gecko/20050920
X-Accept-Language: bg, ru, de-de, de, en-us, en
MIME-Version: 1.0
To: DervishD <zsh@dervishd.net>
CC:  bug-libtool@gnu.org, Zsh Workers <zsh-workers@sunsite.dk>
Subject: Re: Word splitting with zsh fix
References: <20060211122226.GD13513@DervishD>
In-Reply-To: <20060211122226.GD13513@DervishD>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi Raúl,

I would like to know if option SH_WORD_SPLIT is set problem is solved too ?

Test case:
===============================
#!/bin/zsh

VAR="v1 v2"

for V in ${VAR}; do
  echo V1=$V
done

setopt SH_WORD_SPLIT
for V in ${VAR}; do
  echo V2=$V
done
===============================
When SH_WORD_SPLIT is set zsh work as bash, ksh, ash etc.


DervishD wrote:
>     Hi all :)
> 
>     I've spotted a problem with libtool that has to do with the word
> splitting that Zsh does in the expression '${1+"$@"}' (which, in
> turn, is a workaround to fix the "$@" expansion problem when the
> variable is empty in old shells). GNU autoconf has already corrected
> this problem, and I'm using a similar fix for libtool. The patch is
> gzipped and attached to this message.
> 
>     Looking at the SUS (POSIX) standard, I'm not sure if field
> splitting should be performed in the above expression or not, so I
> don't know if the correct behaviour is what Bash does or what Zsh
> does. Anyway, I'm not here looking for a culprit but for a solution.
> I will be glad to discuss the issue, anyway, just for curiosity's
> sake ;)
> 
>     I've tested the patch against "littlecms" sources, because that's
> the package where the problem was spotted by David Gómez Espinosa
> <david@pleyades.net>. The patch was suggested by Andrey Borzenkov
> <arvidjaar@newmail.ru>.
> 
>     Thanks in advance and happy hacking :)
> 
>     Raúl Núñez de Arenas Coronado
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Bug-libtool mailing list
> Bug-libtool@gnu.org
> http://lists.gnu.org/mailman/listinfo/bug-libtool



From zsh-users-return-5889-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 07 14:11:41 2003
Return-Path: <zsh-users-return-5889-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28909 invoked from network); 7 Feb 2003 14:11:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 7 Feb 2003 14:11:40 -0000
Received: (qmail 26727 invoked by alias); 7 Feb 2003 14:11:16 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5889
Received: (qmail 26719 invoked from network); 7 Feb 2003 14:11:16 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 7 Feb 2003 14:11:16 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.173.101] by sunsite.dk (MessageWall 1.0.8) with SMTP; 7 Feb 2003 14:11:15 -0000
Message-ID: <20030207141117.30993.qmail@web12303.mail.yahoo.com>
Received: from [207.245.16.18] by web12303.mail.yahoo.com via HTTP; Fri, 07 Feb 2003 09:11:17 EST
Date: Fri, 7 Feb 2003 09:11:17 -0500 (EST)
From: Le Wang <lewang@yahoo.com>
Subject: Re: Execute a command after each directory change
To: "Jörg" Ziefle <ziefle@ifd.mavt.ethz.ch>,
  Zsh users list <zsh-users@sunsite.dk>
In-Reply-To: <20030207133627.GA21183@ifd.mavt.ethz.ch>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

 --- Jörg Ziefle <ziefle@ifd.mavt.ethz.ch> wrote: > Hello,
> 
> I would like to execute a command (i.e. ls) whenever the CWD changes.
> Of course it could be done by redefining ls, popd and pushd.  But there
> is probably a more elegant solution which accounts for a general
> directory change.

I have in my zshrc:

chpwd() {
  local result path
  [[ -t 1 ]] || return
  case $TERM in
  sun-cmd)
    print -Pn "\e]l%~\e\\"
    ;;
  *xterm*|rxvt*|(dt|k|E)term)
    path=$(print -Pn "%~");
    if [ $LE_CYGWIN ]; then
      cygpath-m $path
      path=$result
    fi
    print -Pn "\e]2;${path}@${HOST}\a"
    ;;
  esac
}

hth.

--
Le

______________________________________________________________________ 
Post your free ad now! http://personals.yahoo.ca


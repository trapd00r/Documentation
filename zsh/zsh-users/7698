From zsh-users-return-7698-mason-zsh=primenet.com.au@sunsite.dk Fri Jul 16 02:21:47 2004
Return-Path: <zsh-users-return-7698-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18449 invoked from network); 16 Jul 2004 02:21:46 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 16 Jul 2004 02:21:46 -0000
Received: (qmail 28946 invoked from network); 16 Jul 2004 02:21:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 16 Jul 2004 02:21:39 -0000
Received: (qmail 14829 invoked by alias); 16 Jul 2004 02:21:33 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7698
Received: (qmail 14815 invoked from network); 16 Jul 2004 02:21:32 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 16 Jul 2004 02:21:32 -0000
Received: (qmail 27546 invoked from network); 16 Jul 2004 02:20:37 -0000
Received: from unknown (HELO moonbase.zanshin.com) (167.160.213.139)
  by a.mx.sunsite.dk with SMTP; 16 Jul 2004 02:20:36 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.12.11/8.12.11) with ESMTP id i6G2KYRi031237
	for <zsh-users@sunsite.dk>; Thu, 15 Jul 2004 19:20:34 -0700
Date: Thu, 15 Jul 2004 19:20:34 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-users@sunsite.dk
To: zsh-users@sunsite.dk
Subject: Re: Coloring completions
In-Reply-To: <20040715163643.GA10866@DervishD>
Message-ID: <Pine.LNX.4.60.0407151913120.3246@toltec.zanshin.com>
References: <20040714112143.GA6811@DervishD> <Pine.LNX.4.60.0407142019180.28477@toltec.zanshin.com>
 <20040715105054.GC10481@DervishD> <Pine.LNX.4.60.0407150813040.28477@toltec.zanshin.com>
 <20040715163643.GA10866@DervishD>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Thu, 15 Jul 2004, DervishD wrote:

> > When markdirs is set, the expansion of the glob appends a trailing 
> > slash to the file name, and thus the coloring code no longer 
> > recognizes it
> 
>     Why it doesn't happen with executable names (which has an asterisk 
> added) or other kind of files? I mean, why 'listtypes' doesn't have the 
> same effect?

I think it'll become obvious if you re-read the documentation for each of
those setopts:

-----
MARK_DIRS (-8, ksh: -X)
     Append a trailing `/' to all directory names resulting from
     filename generation (globbing).

LIST_TYPES (-X) <D>
     When listing files that are possible completions, show the type of
     each file with a trailing identifying mark.
-----

Specifically, when you write "compadd -f *" the effect of MARK_DIRS is 
seen on the input (arguments) to compadd, but the effect of LIST_TYPES is 
seen on the output (the completion listing).  So the color matching can 
already be done _before_ LIST_TYPES is applied, but it necessarily must be 
done _after_ MARK_DIRS.


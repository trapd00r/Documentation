From zsh-workers-return-6407-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 01 05:30:47 1999
Return-Path: <zsh-workers-return-6407-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17916 invoked from network); 1 Jun 1999 05:30:46 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Jun 1999 05:30:46 -0000
Received: (qmail 27471 invoked by alias); 1 Jun 1999 05:30:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6407
Received: (qmail 27464 invoked from network); 1 Jun 1999 05:30:37 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990601053024.ZM9773@candle.brasslantern.com>
Date: Tue, 1 Jun 1999 05:30:24 +0000
In-Reply-To: <199906010412.AAA01283@ocalhost>
Comments: In reply to Timothy J Luoma <tjlists@bigfoot.com>
        "weird bus errors with zsh-3.1.5-pws-20 ?" (Jun  1, 12:12am)
References: <199906010412.AAA01283@ocalhost>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Timothy J Luoma <tjlists@bigfoot.com>, zsh-workers@sunsite.auc.dk
Subject: Re: weird bus errors with zsh-3.1.5-pws-20 ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 1, 12:12am, Timothy J Luoma wrote:
} Subject: weird bus errors with zsh-3.1.5-pws-20 ?
}
} zsh pws20 was giving me a bus error
} 
} Now I can't figure out why it stopped.

In another message you talked about intermittent problems with "cd .".
Are you sure your OS and filesystem are in good shape?

} Starting program: /usr/bin/zsh-3.1.5-pws-20
} [ioctl TIOCSPGRP failed in terminal_inferior: Invalid argument]

Hrm.  This could be related to the newly-added tty process group stuff in
exec.c and jobs.c; try running "zsh -x" ("run -x" in GDB) so you can see
whether zsh is processing any of your startup scripts at the time of the
crash.  (Assuming it starts crashing again.)  I'd like to find out soon
whether that's it, as I'm about to put that pgrp stuff into 3.0.6.

However, this looks more like the operating system is having trouble with
the pseudo-terminal (pty) on which you're running zsh.  There's no such
call as "terminal_inferior" anywhere in zsh, but ptys are organized as a
"master" device and a "slave" or inferior device.

But I don't know why either of those cases would produce this:

} Program generated(1): Memory access exception on address 0x1 (protection failure).

} If I try to 'strip zsh' it doesn't seem to have an effect -- should it?

All 'strip zsh' does is rip out the debugging symbols, which makes GDB
pretty useless.  You should only strip binaries if you need to conserve
the space occupied by the symbol table or are desperate to have it start
up a fraction of a second faster, and never do so if you expect to need
to diagnose a crash.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


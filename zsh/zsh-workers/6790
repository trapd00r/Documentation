From zsh-workers-return-6790-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 22 17:08:06 1999
Return-Path: <zsh-workers-return-6790-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29667 invoked from network); 22 Jun 1999 17:08:03 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Jun 1999 17:08:03 -0000
Received: (qmail 13118 invoked by alias); 22 Jun 1999 17:07:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6790
Received: (qmail 13111 invoked from network); 22 Jun 1999 17:07:46 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990622170654.ZM30321@candle.brasslantern.com>
Date: Tue, 22 Jun 1999 17:06:54 +0000
In-Reply-To: <199906220825.KAA23802@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "PATCH: collist v2.0" (Jun 22, 10:25am)
References: <199906220825.KAA23802@beta.informatik.hu-berlin.de> 
	<9906220851.AA23188@ibmth.df.unipi.it>
In-Reply-To: <9906220851.AA23188@ibmth.df.unipi.it>
Comments: In reply to Peter Stephenson <pws@ibmth.df.unipi.it>
        "Re: PATCH: collist v2.0" (Jun 22, 10:51am)
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: collist v2.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 22, 10:25am, Sven Wischnowsky wrote:
} Subject: PATCH: collist v2.0
}
} - Keys used:
}   - accept-line and send-break will leave selection. There is visual
}     feedback because then there is no highlighted match any more.

This is probably what was confusing me -- I tried accept-line but the
hightlight was still in the listing so I didn't realize I'd escaped.

}   [...] Could someone who actually uses coulured lists
}   please check if the default values are correct? (They look very bad.)

I agree that they're pretty icky.  Here's what I get (no LS_COLORS set,
ZLS_COLORS set but empty):

	ls --color	Zsh
	----------	----------
	blue		green		directories
	green		magenta		executables
	cyan		cyan		symlinks
	magenta		goldenrod?	sockets
	yellow		reverse-blue	devices

I get this even if I move /etc/DIR_COLORS out of the way.

} - If you read the manual or the collist.c file you'll notice that I've 
}   changed `collist' to `complist'

I changed collistmatches() to complistmatches() as well.

(Aren't you glad that I didn't let you use the name "complist" before?)

} > Finally, I wanted to mention that I got it into a state where the highlight
} > was not visible -- I could only tell where I was because the word on the
} > command line kept changing as I pressed the arrow keys.  Eventually I think
} > I crossed back over the word that had been offered as the initial choice
} > (which was in the middle of the list somewhere -- I think it restarted an
} > old menu completion after I thought I'd broken out) and then the hightlight
} > came back.
} 
} Maybe part of this is: when you start a normal menu completion and then
} invoke menu-select and then leave it again, you are in menu completion 
} again. That's intentional. Otherwise I haven't seen such a behavior,
} could you try with the patch?

No, I never started a normal menu-completion.  As best I recall, I started
a menu-select, left it somehow without selecting anything (possibly by ^G)
and then immediately attempted the same menu-select again.

I just rebuilt with all the latest patches, and now I can't get menu-select
to start.  I did 
    bindkey \\t menu-select
and confirmed with bindkey -L that tab was indeed re-bound, but when I try
    zsh% ls <TAB>
it simply starts normal menu completion.  Oh, I see -- menu-select depends
on ZLS_COLORS being set!  That seems odd.

Anyway, at the moment I can't manage to repeat the highlighting problem.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


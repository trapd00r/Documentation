From zsh-workers-return-14736-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 06 09:39:24 2001
Return-Path: <zsh-workers-return-14736-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5119 invoked from network); 6 Jun 2001 09:39:22 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jun 2001 09:39:22 -0000
Received: (qmail 9622 invoked by alias); 6 Jun 2001 09:39:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14736
Received: (qmail 9598 invoked from network); 6 Jun 2001 09:39:01 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Wed, 6 Jun 2001 11:37:59 +0200 (MET DST)
Message-Id: <200106060937.LAA23687@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: PATCH: Re: _man igores global matchers
In-Reply-To: <1010601154604.ZM20062@candle.brasslantern.com>

Bart Schaefer wrote:

> On Jun 1,  4:20pm, Sven Wischnowsky wrote:
> } Subject: Re: _man igores global matchers
> }
> } Bart Schaefer wrote:
> } 
> } > Except that it doesn't appear to reference the global $_matcher anywhere?
> } 
> } It's added automatically in _description, called from _wanted.
> 
> Aha.  I'd forgotten about that.
> 
> That does mean that ANY command called via _wanted, _requested, et al.
> must be able to accept some subset of the compadd arguments, correct?
> 
> That perhaps should be documented.

Somehow I thought it were -- and it is, but only very indirectly, at the
description of _all_labels.  Hope this makes it clearer.  I'm not sure
if we should list the options that may be stored in expl.  On one hand,
it might be helpful, but if that set of options changes sometime, we
might forget to update the lists in the docs...

Bye
  Sven

Index: Doc/Zsh/compsys.yo
===================================================================
RCS file: /cvsroot/zsh/zsh/Doc/Zsh/compsys.yo,v
retrieving revision 1.127
diff -u -r1.127 compsys.yo
--- Doc/Zsh/compsys.yo	2001/05/31 11:58:40	1.127
+++ Doc/Zsh/compsys.yo	2001/06/06 09:36:38
@@ -3834,6 +3834,9 @@
   ...
   (( ret )) || break
 done)
+
+Note that this means that the var(command) has to accept the options
+that have to be passed down to tt(compadd).
 )
 findex(_retrieve_cache)
 item(tt(_retrieve_cache) var(cache_identifier))(
@@ -4036,6 +4039,9 @@
 the var(command).  This is because tt(_wanted) also implements the loop
 over the tags, not just the one for the labels; conversely, it should not
 be called in the middle of a tt(_tags) loop.
+
+Note that, as for tt(_requested), the var(command) has to accept the options
+that have to be passed down to tt(compadd).
 
 Like tt(_tags) this function supports the tt(-C) option to give a
 different name for the argument context field.

-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-13537-mason-zsh=primenet.com.au@sunsite.dk Fri Dec 05 17:51:13 2008
Return-Path: <zsh-users-return-13537-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8341 invoked from network); 5 Dec 2008 17:51:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Dec 2008 17:51:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 46161 invoked from network); 5 Dec 2008 17:50:48 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Dec 2008 17:50:48 -0000
Received: (qmail 28481 invoked by alias); 5 Dec 2008 17:50:32 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13537
Received: (qmail 28468 invoked from network); 5 Dec 2008 17:50:31 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 5 Dec 2008 17:50:31 -0000
Received: from ey-out-2122.google.com (ey-out-2122.google.com [74.125.78.25])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 8BC8280308BE
	for <zsh-users@sunsite.dk>; Fri,  5 Dec 2008 18:50:18 +0100 (CET)
Received: by ey-out-2122.google.com with SMTP id 25so49300eya.3
        for <zsh-users@sunsite.dk>; Fri, 05 Dec 2008 09:50:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:received:date:from:to:subject
         :message-id:mime-version:content-type:content-disposition:user-agent;
        bh=PgSV7pjmO6Xr80rmJpkEs6a8LEbgvzaJsapMs//TeeQ=;
        b=wvQphp0hT64t8dYWPP0vq3AXvrgj05ojk4BRtPO9PnCjHoay6z1ZqGsrQ9FublqBII
         x4GjoOOcRyDiXrCb9yfSIl41aJKEdoJebJ4s/pvZ4N+i/ysOHQN7vbZODuy6BNL9kcU9
         2yIT2zW3UW6xtys4Cq+zbwbHr47oIkwjErgFw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:mime-version:content-type
         :content-disposition:user-agent;
        b=ZQlyI1iH3xIPKCE1StWjUAYiDWDQw0IXKS0hUhX2Xbw2PNOBMwlCPgS19ssR1kid8q
         12ZrVx4SjfEb7BwRWwWMFK89lCOipZnrqhr5zleCFfb+N6sSjo9X2G/mIBLxUFbCiUlv
         +yjS1hjxp+D9UhFvMPgxD5fAi0eZ/mUbbskuA=
Received: by 10.86.61.13 with SMTP id j13mr827580fga.23.1228499417912;
        Fri, 05 Dec 2008 09:50:17 -0800 (PST)
Received: from wicklow.lan (stc92-3-82-245-249-89.fbx.proxad.net [82.245.249.89])
        by mx.google.com with ESMTPS id e11sm8915525fga.26.2008.12.05.09.50.16
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 05 Dec 2008 09:50:17 -0800 (PST)
Received: by wicklow.lan (Postfix, from userid 1002)
	id B4CF3F18A0; Fri,  5 Dec 2008 18:50:14 +0100 (CET)
Date: Fri, 5 Dec 2008 18:50:14 +0100
From: Baptiste Daroussin <baptiste.daroussin@gmail.com>
To: zsh-users@sunsite.dk
Subject: The come back of url encode
Message-ID: <20081205175014.GD16305@wicklow.lan>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Scanned: ClamAV 0.92.1/8728/Fri Dec  5 16:44:27 2008 on bifrost
X-Virus-Status: Clean

Hi,
a long time ago, Bart Schaefer sent this

http://www.zsh.org/mla/users//2005/msg01328.html

I find a bug in this with some special characters so here is a fix for those
interested in : 
${(j::)input/(#b)([^A-Za-z0-9_.!~*\'\(\)-])/%${(l:2::0:)$(([##16]#match))}}

We need padding the resulting hexadecimal code to match the RFC, because the tab
code (\t) return %9 which is wrong instead of %09.

I though it could be interesting to post that.

regards 
---
Bapt


From zsh-workers-return-19550-mason-zsh=primenet.com.au@sunsite.dk Sun Mar 07 14:29:31 2004
Return-Path: <zsh-workers-return-19550-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27073 invoked from network); 7 Mar 2004 14:29:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 7 Mar 2004 14:29:30 -0000
Received: (qmail 21218 invoked by alias); 7 Mar 2004 14:29:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19550
Received: (qmail 21175 invoked from network); 7 Mar 2004 14:29:23 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 7 Mar 2004 14:29:23 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [195.34.32.101] by sunsite.dk (MessageWall 1.0.8) with SMTP; 7 Mar 2004 14:29:23 -0000
Received: from [62.118.250.235] (HELO master.altlinux.ru)
  by umail.ru (CommuniGate Pro SMTP 4.1.8)
  with ESMTP id 212286459 for zsh-workers@sunsite.dk; Sun, 07 Mar 2004 17:29:22 +0300
Received: from solemn.turbinal.org (localhost.localdomain [127.0.0.1])
	by master.altlinux.ru (Postfix) with ESMTP id 495D9E31C4
	for <zsh-workers@sunsite.dk>; Sun,  7 Mar 2004 17:29:21 +0300 (MSK)
Received: by solemn.turbinal.org (Postfix, from userid 500)
	id 2333410D75; Sun,  7 Mar 2004 17:28:24 +0300 (MSK)
Date: Sun, 7 Mar 2004 17:28:24 +0300
From: Alexey Tourbin <at@altlinux.ru>
To: zsh-workers@sunsite.dk
Subject: Re: redo of 16845
Message-ID: <20040307142823.GB4270@solemn.turbinal.org>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20040229192231.1D0558646@pwstephenson.fsnet.co.uk> <3506.1078137062@trentino.logica.co.uk>
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="rJwd6BRFiFCcLxzm"
Content-Disposition: inline
In-Reply-To: <3506.1078137062@trentino.logica.co.uk>


--rJwd6BRFiFCcLxzm
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Mon, Mar 01, 2004 at 11:31:02AM +0100, Oliver Kiddle wrote:
> Should we perhaps pull the pcre module from 4.2.0 then? Though having
> zsh linked against a library in /usr won't affect most users, it'll be
> bad for anyone who is affected.

Right.  JFYI: I build zsh-4.2.0-pre-2 RPM package like this:

%build
# Explicitely disable libnsl/NIS support.
export ac_cv_search_yp_all=3Dno zsh_cv_sys_nis=3Dno zsh_cv_sys_nis_plus=3Dno

# YODL is not required, pre-generated man pages are shipped.
export YODL=3Dfalse

%configure \
	--enable-etcdir=3D%_sysconfdir \
	--enable-fndir=3D%_datadir/%name/functions \
	--enable-site-fndir=3D/usr/local/%name/site-functions \
	--enable-function-subdirs \
	--enable-maildir-support \
	--with-curses-terminfo \
	--enable-pcre \
	%{?_enable_debug: --enable-zsh-{,mem-,hash-}debug }

# Eliminate pcre deps for a while.
LIBS=3D`%__perl -ne 'print if s/^LIBS *=3D// && s/-lpcre//' Makefile`
[ -n "$LIBS" ]

# SMP-incompatible.
%make MODDIR=3D%_libdir LIBS=3D"$LIBS"

# Restore pcre deps.
cd Src/Modules/
%__rm -fv pcre.so
%make MODDIR=3D%_libdir
cd ../..

# XXX `make test' is always successful.
%make test


--=20
Alexey Tourbin
ALT Linux Team

--rJwd6BRFiFCcLxzm
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFASzGHfBKgtDjnu0YRAoupAKDKSKuxiqZ5a+sH8B/HHORC9PqBaACffjw1
Z1xrPrsXUp9Zz6iS0cIYz6E=
=PfXh
-----END PGP SIGNATURE-----

--rJwd6BRFiFCcLxzm--


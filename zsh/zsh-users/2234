From zsh-users-return-2234-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 25 09:20:26 1999
Return-Path: <zsh-users-return-2234-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4749 invoked from network); 25 Mar 1999 09:20:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Mar 1999 09:20:23 -0000
Received: (qmail 10791 invoked by alias); 25 Mar 1999 09:19:06 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2234
Received: (qmail 10784 invoked from network); 25 Mar 1999 09:19:05 -0000
Message-Id: <9903250903.AA30753@ibmth.df.unipi.it>
To: zsh-users@sunsite.auc.dk
Subject: Re: zsh startup files 
In-Reply-To: "Stefan Monnier"'s message of "24 Mar 1999 17:48:55 NFT."
             <5l90cmijvs.fsf@tequila.cs.yale.edu> 
Date: Thu, 25 Mar 1999 10:03:04 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Stefan Monnier wrote:
> Am I the only one that keeps getting annoyed by the sequence in which startup
> files are read ?

No, it's a problem.  But getting it right is not that simple.
Compatibility is a major consideration, and every time something
significant like this changes, a great number of people are extremely
irritated; furthermore, sometimes it's useful for the user to get in
pre-emptively in ~/.zshenv before the remaining system files (no, I don't
want to explain).

One possibility is that we could allow an option to be set either on the
command line or in /etc/zshenv, so that all system files are run first.
Unfortunately I don't see a way of allowing a user to make a login shell
work this way, but if it's a question of how the system files are handled
maybe it's OK to leave it to the sysadmin.

How about the option name GLOBAL_RCS_FIRST and the letter -b (for begin, we
don't have many spare letters)?  It should be an easy patch for zsh 3.1.

To summarise: Invoking zsh -b, or calling `setopt GLOBAL_RCS_FIRST' in
/etc/zshenv, would force the order of scripts to be
  /etc/zshenv /etc/zprofile /etc/zshrc /etc/zlogin
  ~/.zshenv ~/.zprofile ~/.zshrc ~/.zlogin
As with the NO_RCS option, setting or unsetting the option at any later
point would have no effect.  The sysadmin could force all the global
scripts to be used before the user does anything.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


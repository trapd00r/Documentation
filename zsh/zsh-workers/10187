From zsh-workers-return-10187-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Mar 21 16:02:23 2000
Return-Path: <zsh-workers-return-10187-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8439 invoked from network); 21 Mar 2000 16:02:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Mar 2000 16:02:22 -0000
Received: (qmail 25568 invoked by alias); 21 Mar 2000 16:02:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10187
Received: (qmail 25537 invoked from network); 21 Mar 2000 16:02:08 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000321160152.ZM7622@candle.brasslantern.com>
Date: Tue, 21 Mar 2000 16:01:52 +0000
In-Reply-To: <200003211000.LAA11512@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: ignored-patterns giving correction a go" (Mar 21, 11:00am)
References: <200003211000.LAA11512@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>,
        zsh-workers@sunsite.auc.dk
Subject: Re: ignored-patterns giving correction a go
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 21, 11:00am, Sven Wischnowsky wrote:
} Subject: Re: ignored-patterns giving correction a go
}
} Bart Schaefer wrote:
} 
} > }   zstyle ... tag-order foo=files bar=files
} > }   zstyle '...:foo' file-patterns '*.ps'
} > 
} > Presumably the '...' part in both of those lines is, in many cases,
} > going to be the same.  And then you need to repeat it _again_ to give
} > the patterns for `bar'.
} 
} Just occured to me: people don't need to repeat the patterns, of
} course, as long as they use their own little naming convention for the 
} tags they invent:
} 
}   zstyle ... tag-order --foo=files --bar=files
}   zstyle '*-foo' ignored-patterns '*.ps'

But people arent' going to invent their own tags all that often, are they?
Tags right now are pretty much predetermined by the completion functions
that use them, e.g. the way _files uses globbed-files.  Hmm ... is that
changed by what you're working on now?

} > I find myself wishing for some way to merge
} > them, maybe something like
} > 
} >     zstyle ... tag-order foo=files bar=files \
} > 	    + foo file-patterns '*.ps' \
} > 	    + bar file-patterns '*.pdf'
} > 
} > That specific example would make the word `+' magic, which might not be
} > a good idea ... but we're running out of metacharacters that don't need
} > to be annoyingly quoted.

Speaking of "just occured to me":

    function zstyle() {
	case "$1" in
	-*) builtin zstyle "$@";;
	*)  setopt localoptions noksharrays
	    integer i
	    local style="$1"
	    1=''
	    for ((i=2; $#; ++i))
	    do
		if [[ $i -gt $# || "$argv[i]" == '+' ]]
		then
		    builtin zstyle "$style${(@)argv[1,i-1]}"
		    shift "i > $# ? $# : i"  # Stupid shift error on i > $#
		    i=1
		fi
	    done;;
	esac
    }

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


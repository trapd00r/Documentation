From zsh-workers-return-14145-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 28 06:05:29 2001
Return-Path: <zsh-workers-return-14145-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8210 invoked from network); 28 Apr 2001 06:05:28 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Apr 2001 06:05:28 -0000
Received: (qmail 10072 invoked by alias); 28 Apr 2001 06:05:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14145
Received: (qmail 10048 invoked from network); 28 Apr 2001 06:05:23 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010428060505.ZM29936@candle.brasslantern.com>
Date: Sat, 28 Apr 2001 06:05:04 +0000
In-Reply-To: <Tc0a88d01532d9494fe@mailsweeper01.cambridgesiliconradio.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Re: order of processing in brace expansion" (Apr 27,  7:09pm)
References: <Tc0a88d01532d9494fe@mailsweeper01.cambridgesiliconradio.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Peter Stephenson <pws@csr.com>, zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: order of processing in brace expansion
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 27,  7:09pm, Peter Stephenson wrote:
} Subject: Re: order of processing in brace expansion
}
} I would expect what you expect: the expression is interpreted the same as
} a{b,c}d.  Unfortunately it isn't.  The reason seems to be that the comma
} doesn't get turned back into a token.  If we want to fix this, the
} following patch will do it.

The only issue, I think, is that comma is not a token unless it is inside
braces, and we don't know at time of expanding $~foo that the surrounding
expression is eligible for brace expansion.  A tokenized comma does still
match an "ordinary" comma during file globbing, but does that mean that it
always matches an ordinary comma?

If tokenizing when it's not necessary doesn't hurt anything, then I think
we should fix the bug.  ("make check" does pass with the patch applied.)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


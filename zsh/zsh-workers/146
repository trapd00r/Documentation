From zsh-workers-request@math.gatech.edu  Wed Jul  5 16:27:09 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id QAA24340 for <mason@werple.mira.net.au>; Wed, 5 Jul 1995 16:27:06 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA17494
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Wed, 5 Jul 1995 02:24:19 -0400
Received: by math (5.x/SMI-SVR4)
	id AA19896; Wed, 5 Jul 1995 02:20:55 -0400
Resent-Date: Tue, 4 Jul 1995 23:21:14 -0700 (PDT)
Old-Return-Path: <wayne@tenor.clarinet.com>
Subject: Re: A little cleanup
To: Zefram <A.Main@dcs.warwick.ac.uk>
Date: Tue, 4 Jul 1995 23:21:14 -0700 (PDT)
From: Wayne Davison <wayne@tenor.clarinet.com>
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <9530.199507030441@stone.dcs.warwick.ac.uk> from "Zefram" at Jul 3, 95 05:41:00 am
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id:  <9507042321.aa23272@tenor.clarinet.com>
Resent-Message-Id: <"tRWYZ2.0.os4.6zY-l"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/146
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> It seems that ZLE_NAMEDBUFFER isn't actually used anywhere.  This minor
> cleanup doesn't seem to break anything...

And actually fixed the bug I reported when yanking things (where
zsh keeps using the same kill buffer after a yank as it was using
before).  With this cleaned up, my patch to zle_utils.c (that has
not yet been included as of beta 10) is no longer needed.  The
change was on line 113:

    else if (!(lastcmd & ZLE_KILL)) {

changed to:

    else if ((lastcmd & ZLE_KILL) != ZLE_KILL) {

It was required because ZLE_NAMEDBUFFER had ZLE_KILL in it, but
with the cleanup only kill commands now have ZLE_KILL set -- a
good thing.

..wayne..


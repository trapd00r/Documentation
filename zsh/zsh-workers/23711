From zsh-workers-return-23711-mason-zsh=primenet.com.au@sunsite.dk Fri Jul 27 20:49:44 2007
Return-Path: <zsh-workers-return-23711-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11504 invoked from network); 27 Jul 2007 20:49:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 Jul 2007 20:49:41 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 54299 invoked from network); 27 Jul 2007 20:49:36 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 Jul 2007 20:49:36 -0000
Received: (qmail 7192 invoked by alias); 27 Jul 2007 20:49:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23711
Received: (qmail 7183 invoked from network); 27 Jul 2007 20:49:33 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 Jul 2007 20:49:33 -0000
Received: (qmail 54065 invoked from network); 27 Jul 2007 20:49:33 -0000
Received: from vinc17.pck.nerim.net (HELO prunille.vinc17.org) (213.41.242.187)
  by a.mx.sunsite.dk with SMTP; 27 Jul 2007 20:49:30 -0000
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id 5C6AE1759BC0; Fri, 27 Jul 2007 22:49:29 +0200 (CEST)
Date: Fri, 27 Jul 2007 22:49:29 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: 434879@bugs.debian.org, zsh-workers@sunsite.dk
Subject: Re: Bug#434879: zsh: Incorrect completion after "dvips -Ppdf "
Message-ID: <20070727204929.GL6654@prunille.vinc17.org>
Mail-Followup-To: 434879@bugs.debian.org, zsh-workers@sunsite.dk
References: <20070727133050.GA7151@vin.lip.ens-lyon.fr> <20070727151602.GA1059@scowler.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20070727151602.GA1059@scowler.net>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.16-vl-r18246 (2007-07-10)

On 2007-07-27 11:16:02 -0400, Clint Adams wrote:
> On Fri, Jul 27, 2007 at 03:30:50PM +0200, Vincent Lefevre wrote:
> > If I type "dvips -P pdf " then [Tab], the completion works as expected.
> > But if I type "dvips -Ppdf " then [Tab], zsh wants to complete on the
> > printer name.
> 
> Is it impossible to string option letters together with dvips?

I don't understand your question. If you mean grouping options in a
single argument, this doesn't seem to be possible. But dvips behaves
strangely:

vin% dvips -w
dvips: ! Invalid option `-w'. Try --help for more information.
vin% dvips -j
This is dvips(k) 5.96.1 Copyright 2007 Radical Eye Software (www.radicaleye.com)
Missing DVI file argument (or -f).
Try --help for more information.
vin% dvips -jw
This is dvips(k) 5.96.1 Copyright 2007 Radical Eye Software (www.radicaleye.com)
Missing DVI file argument (or -f).
Try --help for more information.
vin% dvips -wj
dvips: ! Invalid option `-wj'. Try --help for more information.

I'd say that when an option doesn't take data, the trailing characters
of the argument are simply ignored.

BTW, there are other problems with the completion code. For instance,

  dvips -j [Tab]

gives:

  dvips -j -

then completes options. "dvips -j [Tab]" should complete dvi files.

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


From zsh-workers-return-9933-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Feb 29 15:10:21 2000
Return-Path: <zsh-workers-return-9933-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10332 invoked from network); 29 Feb 2000 15:10:19 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Feb 2000 15:10:19 -0000
Received: (qmail 20095 invoked by alias); 29 Feb 2000 15:10:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9933
Received: (qmail 20084 invoked from network); 29 Feb 2000 15:10:13 -0000
To: zsh-workers@sunsite.auc.dk
Subject: dirstack=(/) dumps core
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 01 Mar 2000 00:10:02 +0900
Message-ID: <rsqk8jo6o51.fsf@crane.jaist.ac.jp>
Lines: 24
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

I heard that assignment to dirstack may cause core dump.  I can get
core on linux.

Z:akr@thorax% unlimit coredumpsize 
Z:akr@thorax% zsh -f
thorax% dirstack=(/)
zsh: segmentation fault (core dumped)  zsh -f
Z:akr@thorax% 

(gdb) where
#0  0x400de9cc in free () from /lib/libc.so.6
#1  0x400de97d in free () from /lib/libc.so.6
#2  0x80a3abd in freearray (s=0x80d6954) at utils.c:1958
#3  0x401e24f3 in dirssetfn (pm=0x80d7550, x=0x80d6954) at parameter.c:977
#4  0x8089022 in setarrvalue (v=0xbffff948, val=0x80d6950) at params.c:1583
#5  0x80897bd in setaparam (s=0x400146d4 "", val=0x80d6950) at params.c:1782
#6  0x805fcd0 in addvars (state=0xbffffa3c, pc=0x400146b8, export=0) at exec.c:1531
#7  0x805daac in execsimple (state=0xbffffa3c) at exec.c:741
#8  0x805dc2d in execlist (state=0xbffffa3c, dont_change_job=0, exiting=0) at exec.c:792
#9  0x805da3b in execode (p=0x40014690, dont_change_job=0, exiting=0) at exec.c:721
#10 0x807192a in loop (toplevel=1, justonce=0) at init.c:144
#11 0x8051371 in main (argc=2, argv=0xbffffb04) at ./main.c:86
-- 
Tanaka Akira


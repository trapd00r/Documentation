From kazda@VNET.IBM.COM Wed Apr 24 01:59:38 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id BAA11559 for <mason@werple.mira.net.au>; Wed, 24 Apr 1996 01:59:36 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id LAA08505; Tue, 23 Apr 1996 11:35:46 -0400 (EDT)
Resent-Date: Tue, 23 Apr 1996 11:35:46 -0400 (EDT)
Date: Tue, 23 Apr 1996 11:35:01 -0400
From: <kazda@VNET.IBM.COM> (Mike Kazda)
Message-Id: <9604231535.AA27344@rumor.fishkill.ibm.com>
To: Jos Backus <jos@oce.nl>
Cc: zsh-workers@math.gatech.edu
Subject: Re: zsh-2.6-beta14 on AIX with login shell problem
In-Reply-To: <199604230717.JAA18016@st1-jos.oce.nl>
References: <9604221714.AA18650@rumor.fishkill.ibm.com>
        <199604230717.JAA18016@st1-jos.oce.nl>
Resent-Message-ID: <"W899A1.0.p42.IZFVn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/946
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 991
Status: OR

>>>>> "Jos" == Jos Backus <jos@oce.nl> writes:

    Jos> Fyi, as of beta14 configure still finds '-ltermcap' instead
    Jos> of '-lcurses' on AIX. You can try relinking with curses and
    Jos> see if that helps...

Aha!  That did it!  It seems that when zsh uses -lcurses it works
correctly.  Maybe the 'configure.in' file should be changed to prefer
SysV curses library over the BSD termcap library.  Hint,
hint.. Richard how do you feel about making this change?

Here's the patch for making zsh check for curses before termcap:

--- configure.in.orig   Mon Apr 15 01:32:58 1996
+++ configure.in        Tue Apr 23 11:28:34 1996
@@ -217,8 +217,8 @@
 dnl -------------------
 dnl CHECK FOR LIBRARIES
 dnl -------------------
-dnl Prefer BSD termcap library to SysV curses library.
-for lib in termcap curses ncurses; do
+dnl Prefer SysV curses library to BSD termcap library.
+for lib in curses ncurses termcap; do
   AC_CHECK_LIB($lib, tgetent, [LIBS="$LIBS -l$lib"; break])
 done

Mike



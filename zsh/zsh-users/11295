From zsh-users-return-11295-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 12 04:37:04 2007
Return-Path: <zsh-users-return-11295-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27901 invoked from network); 12 Mar 2007 04:36:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Mar 2007 04:36:59 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 98472 invoked from network); 12 Mar 2007 04:36:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Mar 2007 04:36:53 -0000
Received: (qmail 10207 invoked by alias); 12 Mar 2007 04:36:45 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11295
Received: (qmail 10198 invoked from network); 12 Mar 2007 04:36:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 12 Mar 2007 04:36:44 -0000
Received: (qmail 97258 invoked from network); 12 Mar 2007 04:36:44 -0000
Received: from vms040pub.verizon.net (206.46.252.40)
  by a.mx.sunsite.dk with SMTP; 12 Mar 2007 04:36:38 -0000
Received: from torch.brasslantern.com ([71.116.117.231])
 by vms040.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0JER006STWT0EESB@vms040.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sun, 11 Mar 2007 23:36:37 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id l2C4aZFV021044	for
 <zsh-users@sunsite.dk>; Sun, 11 Mar 2007 21:36:35 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id l2C4aYuI021043	for zsh-users@sunsite.dk; Sun,
 11 Mar 2007 21:36:34 -0700
Date: Sun, 11 Mar 2007 21:36:34 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: watch for users
In-reply-to: <96AAB9D6-48A9-4F23-B3F7-E3373151AEEF@michaelworobcuk.de>
To: zsh-users@sunsite.dk
Message-id: <070311213634.ZM21042@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <96AAB9D6-48A9-4F23-B3F7-E3373151AEEF@michaelworobcuk.de>
Comments: In reply to Michael Worobcuk <mail@michaelworobcuk.de>
 "watch for users" (Mar 11, 11:03pm)

On Mar 11, 11:03pm, Michael Worobcuk wrote:
}
} Right know I have to press <ENTER> before a new user is reported. I  
} would like the zsh to print the log by itself.

Checking for logins/logouts is one of the things that zsh does as
part of preparing to accept a new command from the terminal.  There's
no way to cause it to happen at a different event.

The closest you could come would be to execute the "log" command from
an alarm trap, but that shows anyone/everyone who might be identified
by the "watch" setting, not just those who have logged in/out since the
last check.

One could argue that the "log" command could take an option to limit
its output to just the recent changes, and it'd be quite easy to add
such an option, but that won't help you until the next zsh release ...


From zsh-workers-return-19375-mason-zsh=primenet.com.au@sunsite.dk Thu Jan 15 14:00:57 2004
Return-Path: <zsh-workers-return-19375-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29735 invoked from network); 15 Jan 2004 14:00:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 15 Jan 2004 14:00:54 -0000
Received: (qmail 17607 invoked by alias); 15 Jan 2004 14:00:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19375
Received: (qmail 17574 invoked from network); 15 Jan 2004 14:00:38 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 15 Jan 2004 14:00:38 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [129.199.96.32] by sunsite.dk (MessageWall 1.0.8) with SMTP; 15 Jan 2004 14:0:36 -0000
Received: from clipper.ens.fr (clipper-gw.ens.fr [129.199.1.22])
          by nef.ens.fr (8.12.10/1.01.28121999) with ESMTP id i0FE0ZaW096243
          for <zsh-workers@sunsite.dk>; Thu, 15 Jan 2004 15:00:35 +0100 (CET)
Received: from (rineau@localhost) by clipper.ens.fr (8.12.3/jb-1.1)
Date: Thu, 15 Jan 2004 15:00:35 +0100
From: Laurent Rineau <rineau@clipper.ens.fr>
To: zsh-workers@sunsite.dk
Subject: _email_adresses, if MH is not installed.
Message-ID: <20040115140035.GA9546@clipper.ens.fr>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.5.1i

If MH is not installed on the system, I get the following error :

rineau@clipper ~ $ mutt rineau<TAB>(eval):1: command not found: ali
@

The reason is that the external program 'ali' is not installed and
_email_adresses does not test if MH is used.

What about the following patch ?

--- /usr/local/util/packages/zsh-4.1.1/functions_source/functions/_email_addresses      Sat Jul  5 15:08:05 2003
+++ .zsh_funcs/_email_addresses Thu Jan 15 14:57:57 2004
@@ -119,7 +119,7 @@
   fi
 
   # get list of all plugins except any with missing config files
-  files=( mutt ~/.muttrc mush ~/.mushrc mail ${MAILRC:-~/.mailrc} pine ~/.addressbook )
+  files=( MH ~/.mh_profile mutt ~/.muttrc mush ~/.mushrc mail ${MAILRC:-~/.mailrc} pine ~/.addressbook )
   plugins=( 
     ${${(k)functions[(I)_email-*]#*-}:#(${(kj.|.)~files})}
     $files(Ne:'REPLY=( ${(k)files[(r)$REPLY]} ):')


From zsh-users-return-13310-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 08 03:12:14 2008
Return-Path: <zsh-users-return-13310-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3262 invoked from network); 8 Oct 2008 03:12:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Oct 2008 03:12:03 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 16740 invoked from network); 8 Oct 2008 03:11:41 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2008 03:11:41 -0000
Received: (qmail 8318 invoked by alias); 8 Oct 2008 03:11:13 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13310
Received: (qmail 8303 invoked from network); 8 Oct 2008 03:11:12 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 8 Oct 2008 03:11:12 -0000
Received: from ey-out-2122.google.com (ey-out-2122.google.com [74.125.78.24])
	by bifrost.dotsrc.org (Postfix) with ESMTP id D74A580308BD
	for <zsh-users@sunsite.dk>; Wed,  8 Oct 2008 05:10:58 +0200 (CEST)
Received: by ey-out-2122.google.com with SMTP id 25so1175038eya.3
        for <zsh-users@sunsite.dk>; Tue, 07 Oct 2008 20:10:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=+OEpcyJjtRy8bVMEcZE/WVf30Vpc7pejDm7p7ZiHVSU=;
        b=txfvj6GrGB+1OHzc622f6VRj0SngKIjB7wwVfPnuda+YIh70tx/buUMANUEf9uKfSq
         9AVmtvQgaQrJcta9b39kNcJJEtB6kagbVPMZtlddvAkoJAZfDyGiIFpan4iydpRSCL66
         lejBdBRBz+xQODKL9OybQj/dlhQiLb9++9f0c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=osbZQsheIWS199RwGz5kxft37Gzxzyeee/UStpeMMt0V0qiNyeOmMwALlinmRAZ9sq
         KZcR33pCcP3crQYzr7PTc1dm3E8XoJ9Pr8rG2I2cuvYCZ76t7EHz9rtYOIPCRSg3a0j3
         kwuJ0hDmoH8ifBlpEC1s5koTB3HlquKbDbMGQ=
Received: by 10.103.223.9 with SMTP id a9mr4056366mur.87.1223435458360;
        Tue, 07 Oct 2008 20:10:58 -0700 (PDT)
Received: by 10.103.185.7 with HTTP; Tue, 7 Oct 2008 20:10:58 -0700 (PDT)
Message-ID: <17393e3e0810072010x23f66940sc1f5c3d8ac25a06@mail.gmail.com>
Date: Tue, 7 Oct 2008 23:10:58 -0400
From: "Matt Wozniski" <godlygeek@gmail.com>
To: zsh-users@sunsite.dk
Subject: user-sensitive kill completion in conjunction with sudo
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV 0.92.1/8392/Wed Oct  8 04:13:32 2008 on bifrost
X-Virus-Status: Clean

I must admit that the zsh completion system is something I've never
taken time to understand as well as I should.  I'm wondering if I can
get kill to complete only processes that I can send a signal to in the
current context, so

% kill ^D

shows all processes launched by me, and

% sudo kill ^D

shows all process.  It would be even better if

% sudo -u someone kill ^D

showed processes launched by 'someone'.  Currently, I use

zstyle ':completion:*:*:kill:*' command 'ps -u$USER -o pid,%cpu,tty,cputime,cmd'

Is there some easy (or even difficult) way to modify this to handle
the user 'kill' will be executed as?

~Matt


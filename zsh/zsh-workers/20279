From zsh-workers-return-20279-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 22 22:39:56 2004
Return-Path: <zsh-workers-return-20279-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2521 invoked from network); 22 Aug 2004 22:39:55 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Aug 2004 22:39:55 -0000
Received: (qmail 34129 invoked from network); 22 Aug 2004 22:39:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Aug 2004 22:39:47 -0000
Received: (qmail 17962 invoked by alias); 22 Aug 2004 22:39:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20279
Received: (qmail 17952 invoked from network); 22 Aug 2004 22:39:35 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 22 Aug 2004 22:39:35 -0000
Received: (qmail 33339 invoked from network); 22 Aug 2004 22:37:36 -0000
Received: from unknown (HELO moonbase.zanshin.com) (167.160.213.139)
  by a.mx.sunsite.dk with SMTP; 22 Aug 2004 22:37:35 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.12.11/8.12.11) with ESMTP id i7MMbXde005469
	for <zsh-workers@sunsite.dk>; Sun, 22 Aug 2004 15:37:33 -0700
Date: Sun, 22 Aug 2004 15:37:33 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: zsh-workers@sunsite.dk
Subject: ZLE and compsys miscellaneous
Message-ID: <Pine.LNX.4.61.0408172027580.842@toltec.zanshin.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

I just noticed that down-line-or-history and up-line-or-history don't 
behave as I expected when given a negative NUMERIC.  They go up or down 
lines within the buffer as expected, but if there is no room to move in
the buffer they use the absolute value of NUMERIC for the history motion.

------

When you use #compdef -k or -K in a widget function file, the widget name 
used is always given an underscore prefix.  Remind me why?  This makes it 
a little confusing to set new styles for that widget context.  In any case 
that behavior should be documented.

------

I'd like to suggest a new #keyword introducer to be recognized by compinit
(or maybe it should just be a new option to #compdef, but I'll write about
it as a new keyword here).  The keyword is "generic", which means that the
function defined in the file is a completer for use with the _generic 
widget function.

For example, the _insert_kept function I posted in the "tip of the day"
thread could be a file that looks like:

    #generic complete-word \C-xE
    (( $#kept )) || return 1
    local action
    zstyle -s :completion:$curcontext insert-kept action
    if [[ -n $action ]]
    then compstate[insert]=$action
    fi
    compadd -a kept

And the #generic line would cause compinit to autoload the function and 
execute:

    zle -C _insert_kept complete-word _generic
    zstyle ':completion:_insert_kept:*' completer _insert_kept
    bindkey '\C-xE' _insert_kept

I anticipate that Oliver is going to object to having a zstyle set like 
that, but if that's the only way _generic can be passed a completer, I 
don't see much choice in the matter.


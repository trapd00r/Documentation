From zsh-workers-request@math.gatech.edu Sun Dec 14 23:20:34 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 21588 invoked from network); 14 Dec 1997 23:20:32 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 14 Dec 1997 23:20:32 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id SAA09171;
	Sun, 14 Dec 1997 18:03:50 -0500 (EST)
Resent-Date: Sun, 14 Dec 1997 18:02:28 -0500 (EST)
To: Andrew Main <zefram@tao.co.uk>
Cc: sweth@astaroth.nit.gwu.edu, zsh-users@math.gatech.edu
Subject: completion hacking
References: <199712122059.UAA22463@taos.demon.co.uk> <82yb1qxoe1.fsf@beldandy.infovav.se>
X-Face: $$CzX_6%|HNr.oB"KTJp(4s)x@#{7`R#=qth)@YQVIW3G_vqiReP):T3il:o9H[)hjgs%QU
 z!Gx^:NL=B(KNK[Y7{`T*hok`uv`}ArWqZ\wF&KHgVYr+d\>oGI?I\60y?,j*xB@gkYk_)YU0]6"S`
 nEjNqCC
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
From: Mirar <mirar@infovav.se>
Date: 15 Dec 1997 00:03:26 +0100
In-Reply-To: Mirar's message of "12 Dec 1997 22:06:14 +0100"
Message-ID: <827m974jep.fsf_-_@beldandy.infovav.se>
Lines: 16
X-Mailer: Gnus v5.4.66/Emacs 19.34
Resent-Message-ID: <"86NPu1.0.WE2.3M6bq"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1202
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Could this be written in a better way?

cvsignore="*~ *# .#* *.o *.a CVS . .."

cvsaddp() {
    setopt localoptions nullglob
    [[ -e CVS/Entries ]] && reply=(`(sed -ne 's:^/\([^/]*\)/.*$:E\1:p' -e 's:^/\([^/]*\)/-.*$:E\1:p' <CVS/Entries; ( ls -a1 | sed 's:^\(.*\)$:D\1:g' ); (ls -ad1 $(echo "$cvsignore"; cat .cvsignore 2>/dev/null  ) 2>/dev/null | sed 's:^\(.*\)$:I\1:g' ) ) | sort +0.1 | uniq --skip-chars=1 -u | sed -ne 's/^[^I]\(.*\)$/\1/p'`)
}

The goal (which is reached) is to get a list of all possible things
that could be sent to "cvs add".

__________________________________________________________________________
Idonex AB               Telefon      Telefax      nalle
Skolgatan 10		013-376814   013-376801   0708-376867
582 34 Linköping        mirar@idonex.se           http://www.idonex.se/


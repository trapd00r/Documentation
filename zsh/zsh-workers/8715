From zsh-workers-return-8715-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Nov 22 09:39:04 1999
Return-Path: <zsh-workers-return-8715-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21174 invoked from network); 22 Nov 1999 09:39:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Nov 1999 09:39:02 -0000
Received: (qmail 1308 invoked by alias); 22 Nov 1999 09:38:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8715
Received: (qmail 1301 invoked from network); 22 Nov 1999 09:38:52 -0000
Date: Mon, 22 Nov 1999 10:36:21 +0100 (MET)
Message-Id: <199911220936.KAA04982@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Oliver Kiddle's message of Fri, 19 Nov 1999 16:58:06 +0000
Subject: Re: PATCH: AIX .export files


Oliver Kiddle wrote:

> ...
> 
> Sven wrote:
> 
> > > I've also attached a patch to the .export files for compiling on AIX.
> >
> > I've looked through them and moved some of symbols around and removed
> > some duplicates. The patch also moves `printfmt()' to `zle_tricky.c',
> > it's still used there, sorry for thi
> 
> I applied your patch and got unresolved symbols when building
> complist.so. These symbols turned out to be all listed in zle.export. I
> altered the Src/Zle/Makefile so that the EXPIMP_complist = line included
> a reference to import zle.export. Zsh then compiled without any further
> problems. Obviously the Makefile is auto-generated so a patch to it
> isn't the proper fix. I don't understand the whole make setup so I'm not
> sure what is - adding zle to complist.mdd's moddeps might be?

Yes, I guess. I thought that it would automatically use those
moddeps'ed in complete.mdd.

Could you try?

Bye
 Sven

diff -u oldsrc/Zle/complist.mdd Src/Zle/complist.mdd
--- oldsrc/Zle/complist.mdd	Mon Nov 22 10:21:03 1999
+++ Src/Zle/complist.mdd	Mon Nov 22 10:21:17 1999
@@ -1,3 +1,3 @@
-moddeps="complete"
+moddeps="complete zle"
 
 objects="complist.o"

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


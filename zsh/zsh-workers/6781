From zsh-workers-return-6781-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 22 10:35:32 1999
Return-Path: <zsh-workers-return-6781-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21688 invoked from network); 22 Jun 1999 10:35:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Jun 1999 10:35:31 -0000
Received: (qmail 14264 invoked by alias); 22 Jun 1999 10:35:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6781
Received: (qmail 14257 invoked from network); 22 Jun 1999 10:35:20 -0000
Date: Tue, 22 Jun 1999 12:35:18 +0200 (MET DST)
Message-Id: <199906221035.MAA24589@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Tue, 22 Jun 1999 10:51:43 +0200
Subject: Re: PATCH: collist v2.0


Peter Stephenson wrote:

> It's hard to know what to do.  You don't expect to be able to set an option
> only when a module is loaded, so I don't think we can have module-dependent
> options.  But zle related options are in the main shell even if zle isn't
> loaded.  Maybe we just have to make it an option (menuselect, obviously)
> anyway and make a bigger effort to load complist when necessary, so you
> would get an error from completion the first time if it's not available.

We can make modules autoloadable on options -- triggered by
(|un)setopt. But then there is still the problem with local options
and all that...


> - some new options will list all modules or builtin modules.  This is
>   probably better but the problem is that with a non-dynamically-linked
>   shell you always get no output from running `zmodload' on its own which
>   is a little Zen-like.  Maybe it should return status 1 in that case as a
>   test for dynamic loading, but status 0 when the list includes builtin
>   modules.

I'd vote for using the exit status and even let these list-options
accept optional arguments. With arguments they just check if the
modules named are loaded (or can be loaded?).

> And I still think the zle command needs the ability to list builtin
> widgets, too.

Definitely, yes -- see 6775.

> One other thing:  I'm still a bit worried about the way undo works, where
> the first time nothing happens if there isn't a suffix to undo.  It's fine
> if there is a suffix which you can undo separately, but I'd be tempted to
> make it skip over that if it does nothing.  That would make it harder if
> you used undo in programming, however, but I don't think people do.

Maybe an option to undo saying if you want to skip `invisible' undos
or not?

> I've done this and I'll try and get pws-$((N+1)) out at the end of the
> week, particularly since I'm busy next week.  There were some other minor
> changes:  a tt(no) in the manual was missing a close parenthesis, some
> dependencies for mod_complist.yo needed adding in the Makefile, a nodref
> referred to `The complist module' instead of `The complist Module'.  These
> are appended below, but it assmues the name changes.

Oh, yes. I forgot to test-make the docs, sorry.

And thanks!

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-17573-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 23 10:20:32 2002
Return-Path: <zsh-workers-return-17573-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18089 invoked from network); 23 Aug 2002 10:20:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 23 Aug 2002 10:20:32 -0000
Received: (qmail 15627 invoked by alias); 23 Aug 2002 10:20:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17573
Received: (qmail 15615 invoked from network); 23 Aug 2002 10:20:25 -0000
X-VirusChecked: Checked
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: Zsh workers <zsh-workers@sunsite.dk>
Subject: PATCH: complete -s in _read
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <7934.1030097965.1@logica.com>
Date: Fri, 23 Aug 2002 11:19:37 +0100
Sender: kiddleo@logica.com
Message-Id: <E17iBXV-000241-00@bimbo.logica.co.uk>

change to _read for the new -s option in 17544.

Index: Completion/Zsh/Command/_read
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_read,v
retrieving revision 1.1
diff -u -r1.1 _read
--- Completion/Zsh/Command/_read	2 Apr 2001 11:29:39 -0000	1.1
+++ Completion/Zsh/Command/_read	23 Aug 2002 10:17:40 -0000
@@ -1,18 +1,19 @@
 #compdef read
 
-local pflag expl line curcontext="$curcontext"
+local pflag
 
 # -p flag only relevant if we have a coprocess
 (:>&p) 2>/dev/null &&
-  pflag='(-q -u -z)-p[input is read from the coprocess]'
+  pflag='(-q -s -u -z)-p[input is read from the coprocess]'
 
-_arguments -C -s -A "-*" -S \
+_arguments -s -A "-*" -S \
   '-r[raw mode]' \
-  '(-p -k -u -z)-q[read y or n character from terminal]' \
+  '(-p -k -s -u -z)-q[read y or n character from terminal]' \
   '(-q)-k[specify number of characters to read]:number of characters' \
-  '(-q -u -p)-z[read entry from editor buffer stack]' \
+  '(-q -s -u -p)-z[read entry from editor buffer stack]' \
   '(-E)-e[input read is echoed and not assigned]' \
   '(-e)-E[input read is echoed]' \
+  '(-q -z -p)-s[suppress terminal echoing]' \
   '-A[first name is taken as an array]' \
   '(-q -z -p)-u+[specify file-descriptor to read from]:file-descriptor:_file_descriptors' \
   $pflag '1:varprompt:_vars -qS\?' '*:vars:_vars'

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


From zsh-workers-return-13270-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 14 12:42:03 2000
Return-Path: <zsh-workers-return-13270-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12724 invoked from network); 14 Dec 2000 12:42:01 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Dec 2000 12:42:01 -0000
Received: (qmail 8120 invoked by alias); 14 Dec 2000 12:41:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13270
Received: (qmail 8113 invoked from network); 14 Dec 2000 12:41:52 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: RE: Patch posted to SourceForge for zsh on cygwin
Date: Thu, 14 Dec 2000 15:41:45 +0300
Message-ID: <000801c065cb$37db0180$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
In-Reply-To: <1001213160119.ZM11908@candle.brasslantern.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400


I think it should be discussed here.

The patch checks for $HOME being single slash when processing startup files to
avoid creating `//.zshrc' name that is interpreted as UNC name.

I have no objection to this in principle (but see below), but Bart already
mentioned the basic problem - you cannot catch all places where string is used
as file name. Just consider possible $HOME usage in any script/startup file; I
have may lines like

if [[ -f $HOME/foo/bar ]]; then ...

all of them have the same problem. `~' expansion has the same problem as well.

Patch checks for _WIN32, so I assume it was for 3.0.x native build. For 3.1.x
we have only Cygwin version - and people on Cygwin list explicitly warn
against setting HOME to `/'. ssh e.g. has the same problem that is frequent
cause of errors.

So, I ask - should we commit this patch that does not actually solve the
problems or just warn users against setting HOME to `/'?

-andrej

> -----Original Message-----
> From: Bart Schaefer [mailto:schaefer@candle.brasslantern.com]
> Sent: Wednesday, December 13, 2000 7:01 PM
> To: Andrej Borsenkow
> Subject: Patch posted to SourceForge for zsh on cygwin
>
>
> Would you please take a look at
>
> http://sourceforge.net/patch/?func=detailpatch&patch_id=102258&group_id=4068
>
> and commit it if it seems appropriate?
>
> --
> Bart Schaefer                                 Brass Lantern Enterprises
> http://www.well.com/user/barts              http://www.brasslantern.com
>
> Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net
>
>


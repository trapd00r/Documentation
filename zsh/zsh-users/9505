From zsh-users-return-9505-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 17 09:27:14 2005
Return-Path: <zsh-users-return-9505-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24738 invoked from network); 17 Oct 2005 09:27:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Oct 2005 09:27:10 -0000
Received: (qmail 92502 invoked from network); 17 Oct 2005 09:27:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Oct 2005 09:27:03 -0000
Received: (qmail 9411 invoked by alias); 17 Oct 2005 09:26:51 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9505
Received: (qmail 9400 invoked from network); 17 Oct 2005 09:26:50 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Oct 2005 09:26:50 -0000
Received: (qmail 90962 invoked from network); 17 Oct 2005 09:26:50 -0000
Received: from cluster-c.mailcontrol.com (HELO rly24c.srv.mailcontrol.com) (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 17 Oct 2005 09:26:49 -0000
Received: from exchange03.csr.com (mailhost1.csr.com [81.105.217.43])
	by rly24c.srv.mailcontrol.com (MailControl) with ESMTP id j9H9QjX1023308
	for <zsh-users@sunsite.dk>; Mon, 17 Oct 2005 10:26:45 +0100
Received: from csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 17 Oct 2005 10:28:53 +0100
To: zsh-users@sunsite.dk
Subject: Re: Is this possible with zsh? 
In-reply-to: <20051016.070625.41172876.Meino.Cramer@gmx.de> 
References: <20051016.070625.41172876.Meino.Cramer@gmx.de>
Comments: In-reply-to Meino Christian Cramer <Meino.Cramer@gmx.de>
   message dated "Sun, 16 Oct 2005 07:06:25 +0200."
Date: Mon, 17 Oct 2005 10:26:50 +0100
From: Peter Stephenson <pws@csr.com>
Message-ID: <EXCHANGE03mXnbI13a80000643d@exchange03.csr.com>
X-OriginalArrivalTime: 17 Oct 2005 09:28:53.0881 (UTC) FILETIME=[30E52690:01C5D2FD]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-05-40-00 (www.mailcontrol.com) on 10.67.0.134
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Meino Christian Cramer wrote:
>  Is it possible to "shell-program" or configure any neat trick (you
>  see, I am missing the right words here...) that "something" will be
>  executed, when the last of the non-login-shells, which are running
>  under my uid, is sclosed ?

You can get arbitrary code to run when a shell exits with:

my-exit-fn() {
  # stuff
}
trap my-exit-fn EXIT

but you still need to work out when the last shell is being closed.
The obvious tricks, other than doing it in the X files rather than the
shell, are to use ps to check processes or to have shells register
and unregister.  The first alternative is likely to be more solid.
You could, for example, check if the parent process was a terminal emulator.

pws


This message has been scanned for viruses by BlackSpider MailControl - www.blackspider.com


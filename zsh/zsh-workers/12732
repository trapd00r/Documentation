From zsh-workers-return-12732-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Sep 04 07:15:57 2000
Return-Path: <zsh-workers-return-12732-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1610 invoked from network); 4 Sep 2000 07:15:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Sep 2000 07:15:56 -0000
Received: (qmail 26407 invoked by alias); 4 Sep 2000 07:15:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12732
Received: (qmail 26399 invoked from network); 4 Sep 2000 07:15:48 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000904071447.ZM2843@candle.brasslantern.com>
Date: Mon, 4 Sep 2000 07:14:47 +0000
In-Reply-To: <000901c0163e$40bc2770$21c9ca95@mow.siemens.ru>
Comments: In reply to "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
        "Bug in 1272 (sorry, Zefram) RE: compaudit:104: unknown file attribute" (Sep  4, 11:03am)
References: <000901c0163e$40bc2770$21c9ca95@mow.siemens.ru>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>,
        "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: PATCH: Re: Bug in 12722 (sorry, Zefram) RE: compaudit:104: unknown file attribute
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii


--- zsh-forge/current/Src/params.c	Sat Sep  2 14:12:20 2000
+++ Src/params.c	Mon Sep  4 00:11:57 2000
@@ -3049,8 +3049,10 @@
 	    sprintf(s, "0x");
 	else if (isset(CBASES) && base == 8 && isset(OCTALZEROES))
 	    sprintf(s, "0");
-	else
+	else if (base != 10)
 	    sprintf(s, "%d#", base);
+	else
+	    *s = 0;
 	s += strlen(s);
     } else
 	base = -base;

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


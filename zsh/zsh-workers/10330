From zsh-workers-return-10330-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 30 10:57:17 2000
Return-Path: <zsh-workers-return-10330-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2010 invoked from network); 30 Mar 2000 10:57:15 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Mar 2000 10:57:15 -0000
Received: (qmail 22609 invoked by alias); 30 Mar 2000 10:57:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10330
Received: (qmail 22596 invoked from network); 30 Mar 2000 10:57:01 -0000
Date: Thu, 30 Mar 2000 12:56:53 +0200 (MET DST)
Message-Id: <200003301056.MAA29226@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Wed, 29 Mar 2000 17:40:34 +0000
Subject: Re: PATCH: was: Re: endianness of wordcode


Bart Schaefer wrote:

> On Mar 29, 11:14am, Sven Wischnowsky wrote:
> } Subject: Re: PATCH: was: Re: endianness of wordcode
> }
> } So, this adds the -a option to zcompile which is needed to make
> } functions that are currently only marked for autoloading to be written 
> } into the zwc file. If it is not given and there is at least one name
> } of such a function given, zcompile will return an error (and not write 
> } the zwc file).
> 
> This is still a bit odd, because it means you have to check yourself
> whether a function is defined or undefined before you know what result
> "zcompile -a -c ..." is going to produce.  I'd rather that you simply
> CAN'T compile both defined and undefined functions in the same pass.

Hm. Consider someone who has all his functions autoloaded (i.e. none
defined in .zshrc or other init files) and doesn't use kshautoload.
With the current state he can do `zcompile -ca all-funcs' to write them
all into one file. If we disallow compiling both already-loaded and
not-yet-loaded functions `in the same pass', it is impossible to do
that if at least one of the functions happens to be loaded already.

At least until we add a helper function that allows merging wordcode
files, like the one you suggested a while ago.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


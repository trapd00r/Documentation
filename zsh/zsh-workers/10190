From zsh-workers-return-10190-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Mar 21 17:25:14 2000
Return-Path: <zsh-workers-return-10190-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9029 invoked from network); 21 Mar 2000 17:25:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Mar 2000 17:25:13 -0000
Received: (qmail 15766 invoked by alias); 21 Mar 2000 17:25:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10190
Received: (qmail 15736 invoked from network); 21 Mar 2000 17:25:01 -0000
Message-Id: <200003211724.LAA23263@wo1203.cmg.FCNBD.COM>
Content-Type: text/plain
MIME-Version: 1.0 (NeXT Mail 4.2mach_patches v148.2)
In-Reply-To: <E12XE8f-00047I-00@crucigera.fysh.org>
X-Nextstep-Mailer: Mail 4.2mach_patches (Enhance 2.0b5)
From: Brian Boonstra <boonstb@cmg.FCNBD.COM>
Date: Tue, 21 Mar 2000 11:24:56 -0600
To: Zefram <zefram@fysh.org>
Subject: Re: For the MACHINES file:  OpenStep/NeXTStep 4.2 and
	zsh-3.1.6-dev-19
cc: zsh-workers@sunsite.auc.dk
References: <E12XE8f-00047I-00@crucigera.fysh.org>

Zefram wrote:
> >Apple/NeXT-supplied cc (version 2.7.2.1)
>
> Is this actually a gcc?  (gcc 2.7.2.1 is a relatively recent version.)
> In what way does it fail?

	Well, yes and no.  NeXT modified gcc with some Objective C goodies  
and shipped it with their development environment.  I always assumed they  
maintained approximate version number compatibility, but I don't know for  
sure.

	The failure is a memory problem of some kind.  Issue a command, like  
"ls", and you get the output and then a hang.
	
	I spent a fair bit of time (with Bart's help) trying to diagnose it  
with 3.1.6-bart7, but I'm no expert and I ultimately got nowhere -- you can  
read about it in the mailing list archives from Oct 17-25.  It was made  
especially hard by the fact that turning on the memory debugging killed the  
compile completely.
	
	One interesting question I can't answer is whether Apple OS X  
machines (which are closely related) will successfully compile 3.1.6.


> >Apple/NeXT-supplied awk (version unknown)
>
> This is interesting.  Again, in what way does it fail?  The awk scripts
> we use are intended to be as widely portable as possible.


I too was surprised they did not work, but I did not try debugging them.   
Here is what happens (after a successful ./configure):

...
creating Src/Zle/Makefile
awk -f ./signames1.awk /usr/include/bsd/sys/signal.h >sigtmp.c
cc -E -traditional-cpp sigtmp.c >sigtmp.out
awk -f ./signames2.awk sigtmp.out > signames.c
rm -f sigtmp.c sigtmp.out
grep 'define.*SIGCOUNT' signames.c > sigcount.h
Updated `zsh.mdh'.
echo 'timestamp for zsh.mdh against zsh.mdd' > zsh.mdhs
awk -f ../Src/makepro.awk builtin.c Src > builtin.syms
awk: syntax error near line 15
awk: illegal statement near line 15
...
<Lots more syntax errors deleted>
...
awk: bailing out near line 107
awk: newline in regular expression near line 107
*** Exit 2
*** `builtin.syms' removed
Stop.





		Best Regards,
		
			Brian


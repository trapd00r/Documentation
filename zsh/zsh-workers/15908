From zsh-workers-return-15908-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 30 06:25:40 2001
Return-Path: <zsh-workers-return-15908-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16398 invoked from network); 30 Sep 2001 06:25:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Sep 2001 06:25:39 -0000
Received: (qmail 27008 invoked by alias); 30 Sep 2001 06:25:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15908
Received: (qmail 26994 invoked from network); 30 Sep 2001 06:25:34 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: lordzork@lordzork.com
Cc: zsh-workers@sunsite.dk
Message-ID: <3BB6BAD4.5080201@mow.siemens.ru>
Date: Sun, 30 Sep 2001 10:25:24 +0400
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:0.9.4) Gecko/20010914
X-Accept-Language: en-us
MIME-Version: 1.0
Subject: Re: error on TTY read: no such file or directory
References: <20010929034953.E16561@hithaeglir.net> <3BB62E93.10802@mow.siemens.ru> <20010929170811.G16561@hithaeglir.net> <3BB63D16.5040709@mow.siemens.ru> <20010929173848.H16561@hithaeglir.net> <3BB64378.8060505@mow.siemens.ru> <20010929181100.I16561@hithaeglir.net> <1010929223918.ZM20169@candle.brasslantern.com> <20010929202423.K16561@hithaeglir.net> <1010930012412.ZM20346@candle.brasslantern.com> <20010929213405.L16561@hithaeglir.net>
Content-Type: text/plain; charset=KOI8-R; format=flowed
Content-Transfer-Encoding: 7bit

lordzork@lordzork.com wrote:

> In the gothic chambers of the underworld on Sat 29 Sep 2001 at 21:24 -0400,
> Bart Schaefer muttered darkly:
> 
> 
>>It's a system call (that's why it shows up in strace output).
>>
>>As a workaround you can try changing
>>
>>	    if (r == 1)
>>		break;
>>
>>to
>>
>>	    if (r > 0)
>>		break;
>>
>>at line 407 of Src/Zle/zle_main.c; but if the wrong number of bytes may
>>be returned by read(), all sorts of other things are going to break (not
>>just in zsh), so you shouldn't leave it at that.  You may have to take
>>this up on a linux kernel list.
>>
>>
> 
> i don't see how it can be the kernel, though. i've tried three different
> kernel versions (2.4.7, 2.4.9, 2.4.10) and the problem remains with all
> of them. furthermore, i've got virtually the exact setup duplicated on
> two other boxes, with the same kernel versions. zsh works fine on both
> boxes.
> 


What about glibc versions? Are they the same on all systems?


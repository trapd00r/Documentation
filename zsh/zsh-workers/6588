From zsh-workers-return-6588-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 11 08:19:53 1999
Return-Path: <zsh-workers-return-6588-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6137 invoked from network); 11 Jun 1999 08:19:52 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Jun 1999 08:19:52 -0000
Received: (qmail 5089 invoked by alias); 11 Jun 1999 08:19:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6588
Received: (qmail 5082 invoked from network); 11 Jun 1999 08:19:05 -0000
Date: Fri, 11 Jun 1999 10:18:07 +0200 (MET DST)
Message-Id: <199906110818.KAA26161@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Fri, 11 Jun 1999 09:03:22 +0200
	(MET DST)
Subject: Re: More intellegent suffix removing?


I wrote:

> -    suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] =
> -	suffixlen[';'] = suffixlen['|'] = suffixlen['&'] = 
> -	suffixlen['<'] = suffixlen['>'] = n;
> +    suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] = 
> +	suffixlen[';'] = suffixlen['&'] = n;

Damn, damn, damn. That was wrong, wasn't it? A `a|b' is recognized as
a glob pattern only if it is in parentheses, without them this it's a
pipe. And we can't complete `(foo<TAB>' anyway.


Bye
 Sven

diff -u os/Zle/zle_misc.c Src/Zle/zle_misc.c
--- os/Zle/zle_misc.c	Fri Jun 11 10:12:14 1999
+++ Src/Zle/zle_misc.c	Fri Jun 11 10:15:28 1999
@@ -789,7 +789,7 @@
 makesuffix(int n)
 {
     suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] = 
-	suffixlen[';'] = suffixlen['&'] = n;
+	suffixlen[';'] = suffixlen['&'] = suffixlen['|'] = n;
 }
 
 /* Set up suffix for parameter names: the last n characters are a suffix *
diff -u od/Zsh/options.yo Doc/Zsh/options.yo
--- od/Zsh/options.yo	Fri Jun 11 10:13:28 1999
+++ Doc/Zsh/options.yo	Fri Jun 11 10:16:09 1999
@@ -120,7 +120,7 @@
 item(tt(AUTO_REMOVE_SLASH))(
 When the last character resulting from a completion is a slash and the next
 character typed is a word delimiter, a slash, or a character that ends 
-a command (a semicolon or an ampersand), remove the slash.
+a command (such as a semicolon or an ampersand), remove the slash.
 )
 pindex(AUTO_RESUME)
 cindex(jobs, resuming automatically)

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-request@euclid.skiles.gatech.edu  Thu Aug 29 18:48:35 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id SAA00463 for <mason@primenet.com.au>; Thu, 29 Aug 1996 18:48:33 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA19927; Thu, 29 Aug 1996 04:44:05 -0400 (EDT)
Resent-Date: Thu, 29 Aug 1996 04:44:05 -0400 (EDT)
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <960829014454.ZM12823@candle.brasslantern.com>
Date: Thu, 29 Aug 1996 01:44:54 -0700
In-Reply-To: guckes@math.fu-berlin.de (Sven Guckes)
        "zsh 3.0.0 - ^D does not exit shell" (Aug 26, 12:53am)
References: <m0uuo3Z-000029C@banach.math.fu-berlin.de>
Reply-To: schaefer@nbn.com
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: guckes@math.fu-berlin.de (Sven Guckes), zsh-workers@math.gatech.edu
Subject: Re: zsh 3.0.0 - ^D does not exit shell
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"Kd3uH1.0.Ht4.KXL9o"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2093
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Aug 26, 12:53am, Sven Guckes wrote:
} Subject: zsh 3.0.0 - ^D does not exit shell
}
} I noticed that the zsh does not exit when I press ^D.
} 
} It does not happen always, eg right after starting the zsh it does work.
} I could not find a situation where it will always happen.

The most likely cause is that you are running another program, such as a
text editor, which intends to temporarily reset the TTY characterstics
and accidentally clobbers the EOF character in the process.

This is an extremely easy mistake for programmers to make, because the
termio and termios implementations on many systems overload an array
in the terminal-driver structure such that the EOF character position
doubles as the is-input-timeout-active boolean; so EOF frequently ends
up being set to 1 (control-A) or 0 (control-space or control-@).  Zsh
itself had this bug at one time (but hasn't since 2.4.something).

The workaround is to use the zsh `ttyctl -f' builtin to cause zsh to
forcibly reset your terminal driver whenever it prompts for input.
This prevents such external programs from permanently messing up your
tty settings.

-- 
Bart Schaefer                             Brass Lantern Enterprises
http://www.well.com/user/barts            http://www.nbn.com/people/lantern

New male in /home/schaefer:
>N  2 Justin William Schaefer  Sat May 11 03:43  53/4040  "Happy Birthday"


From zsh-workers-return-10469-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 04 14:37:45 2000
Return-Path: <zsh-workers-return-10469-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5936 invoked from network); 4 Apr 2000 14:37:44 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Apr 2000 14:37:44 -0000
Received: (qmail 26887 invoked by alias); 4 Apr 2000 14:37:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10469
Received: (qmail 26867 invoked from network); 4 Apr 2000 14:37:35 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000404143725.ZM20360@candle.brasslantern.com>
Date: Tue, 4 Apr 2000 14:37:24 +0000
In-Reply-To: <200004041407.QAA14710@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "PATCH: Re: zrecompile" (Apr  4,  4:07pm)
References: <200004041407.QAA14710@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Re: zrecompile
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 4,  4:07pm, Sven Wischnowsky wrote:
} Subject: PATCH: Re: zrecompile
}
} Bart Schaefer wrote:
} 
} > } And another thing: the zwc files till use $ZSH_VERSION in the header
} > } to test for compatibility -- somehow I didn't like to add an additional 
} > } version number scheme for them, but it would be better, I think (the
} > } format will certainly change less often than $ZSH_VERSION).
} > 
} > Yea, but it'll be much less recognizable in the -t output.  I think the
} > $ZSH_VERSION test is fine.

Having thought about it a bit longer now, I have a suggestion: Put *both*
a .zwc version number *and* $ZSH_VERSION into the header.  When the .zwc
version doesn't match, display the $ZSH_VERSION string in the error output.
That completely hides the .zwc version from anyone who would be confused
by it, while avoiding the need to recompile when the shell is upgraded.

I know, I know, I should have thought of this sooner ...

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


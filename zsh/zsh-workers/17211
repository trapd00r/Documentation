From zsh-workers-return-17211-mason-zsh=primenet.com.au@sunsite.dk Thu May 23 06:18:38 2002
Return-Path: <zsh-workers-return-17211-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7791 invoked from network); 23 May 2002 06:18:37 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 23 May 2002 06:18:37 -0000
Received: (qmail 15392 invoked by alias); 23 May 2002 06:18:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17211
Received: (qmail 15381 invoked from network); 23 May 2002 06:18:28 -0000
Date: Thu, 23 May 2002 02:18:18 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: [mdz@debian.org: Bug#147853: zsh: CVS completion should respect $CVSIGNORE]
Message-ID: <20020523061818.GA17828@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.28i
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

----- Forwarded message from Matt Zimmerman <mdz@debian.org> -----

>From the CVS docs "Ignoring files via cvsignore":

   * The list is initialized to include certain file name patterns:
[...]
   * The per-repository list in `$CVSROOT/CVSROOT/cvsignore' is
     appended to the list, if that file exists.

   * The per-user list in `.cvsignore' in your home directory is
     appended to the list, if it exists.

   * Any entries in the environment variable `$CVSIGNORE' is appended
     to the list.

   * Any `-I' options given to CVS is appended.

   * As CVS traverses through your directories, the contents of any
     `.cvsignore' will be appended to the list.  The patterns found in
     `.cvsignore' are only valid for the directory that contains them,
     not for any sub-directories.

--- /tmp/_cvs.old       Thu May 23 00:14:38 2002
+++ /usr/share/zsh/4.0.4/functions/Completion/Unix/_cvs Thu May 23 00:14:41 2002
@@ -964,6 +964,7 @@
       ${=cvsignore}
     )
     [[ -r ~/.cvsignore ]] && omitpats=($omitpats $(<~/.cvsignore))
+    omitpats=($omitpats $CVSIGNORE)
     [[ -r ${realdir}.cvsignore ]] && omitpats=($omitpats $(<${realdir}.cvsignore))
 
     _path_files -g "*~(*/|)(${(j:|:)~omitpats})(D.)"


----- End forwarded message -----


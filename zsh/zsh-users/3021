From zsh-users-return-3021-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 13 11:58:33 2000
Return-Path: <zsh-users-return-3021-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7913 invoked from network); 13 Apr 2000 11:58:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Apr 2000 11:58:31 -0000
Received: (qmail 17015 invoked by alias); 13 Apr 2000 11:57:50 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3021
Received: (qmail 17004 invoked from network); 13 Apr 2000 11:57:49 -0000
Message-ID: <38F5B637.5D5BE0F1@u.genie.co.uk>
Date: Thu, 13 Apr 2000 12:57:43 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.72 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-users@sunsite.auc.dk
Subject: Intercepting commands before they're run
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I've just been experimenting with the MH mail system to see if it will
do what I hope. In mush I can just type a message number to see a
message so I tried to think of a way to persuade zsh to do this.

The best I can do is:

preexec() {
  [[ $1 = <-> ]] && show $1
}

This works but zsh still tries to run the command so I always get
something like:
zsh: command not found: 3

Is there a way round this? If not, maybe we should let preexec return an
exit code to say the command should not be run - there may be other
uses. There might also be uses for preexec to be able to make changes to
the command-line before it is run.

Oliver Kiddle


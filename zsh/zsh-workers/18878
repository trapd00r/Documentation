From zsh-workers-return-18878-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 21 14:14:19 2003
Return-Path: <zsh-workers-return-18878-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3774 invoked from network); 21 Jul 2003 14:14:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 21 Jul 2003 14:14:17 -0000
Received: (qmail 7635 invoked by alias); 21 Jul 2003 14:13:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18878
Received: (qmail 15925 invoked from network); 21 Jul 2003 13:31:51 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 21 Jul 2003 13:31:51 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [213.165.64.20] by sunsite.dk (MessageWall 1.0.8) with SMTP; 21 Jul 2003 13:31:51 -0000
Received: (qmail 1239 invoked by uid 65534); 21 Jul 2003 13:31:50 -0000
Received: from pD9E355AC.dip.t-dialin.net (EHLO debian) (217.227.85.172)
  by mail.gmx.net (mp013) with SMTP; 21 Jul 2003 15:31:50 +0200
Received: from denis by debian with local (Exim 3.35 #1 (Debian))
	id 19ealZ-0000Ho-00
	for <zsh-workers@sunsite.dk>; Mon, 21 Jul 2003 15:31:49 +0200
Date: Mon, 21 Jul 2003 15:31:49 +0200
From: Maurice <mauricex@gmx.net>
To: zsh-workers@sunsite.dk
Subject: (bug) segfault with menu-select
Message-ID: <20030721133149.GA949@debian>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.28i

Hi,

I didn't find this in the archives, so I thought you might be
interested.

I can reproduce this bug on my debian-woody machine, using zsh
version 4.0.4 from the woody-package.

<TAB> is expand-or-complete and ^G is bound to menu-select:

  $ cd<TAB><BACKSPACE>^G
  zsh: segmentation fault (core dumped)  zsh

The output of gdb core:

  Program terminated with signal 11, Segmentation fault
  [...]
  (gdb) where
  #0  0x40223a72 in printfmt () from /usr/lib/zsh/4.0.4/zsh/zle.so
  #1  0x40246788 in calclist () from /usr/lib/zsh/4.0.4/zsh/complete.so
  #2  0x4028bf4b in _init () from /usr/lib/zsh/4.0.4/zsh/complist.so
  #3  0x0807e681 in runhookdef ()
  #4  0x40248792 in list_matches () from /usr/lib/zsh/4.0.4/zsh/complete.so
  #5  0x0807e681 in runhookdef ()
  #6  0x4021d8d4 in zrefresh () from /usr/lib/zsh/4.0.4/zsh/zle.so
  #7  0x4028cd57 in _init () from /usr/lib/zsh/4.0.4/zsh/complist.so
  #8  0x4028e627 in _init () from /usr/lib/zsh/4.0.4/zsh/complist.so
  #9  0x4021775a in execzlefunc () from /usr/lib/zsh/4.0.4/zsh/zle.so
  #10 0x40217321 in zleread () from /usr/lib/zsh/4.0.4/zsh/zle.so
  #11 0x080707b5 in ingetc ()
  #12 0x080706e5 in ingetc ()
  #13 0x08069f70 in iaddtoline ()
  #14 0x08074cd7 in gettok ()
  #15 0x08074715 in yylex ()
  #16 0x080857a1 in parse_event ()
  #17 0x0806e212 in loop ()
  #18 0x0807044c in zsh_main ()
  #19 0x080514d4 in main ()
  #20 0x400b414f in __libc_start_main () from /lib/libc.so.6


As I'm not subscribed to the list, please reply or cc to me
directly, if you want.



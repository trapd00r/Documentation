From zsh-workers-return-6496-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 07 11:41:24 1999
Return-Path: <zsh-workers-return-6496-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8400 invoked from network); 7 Jun 1999 11:41:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 7 Jun 1999 11:41:22 -0000
Received: (qmail 19094 invoked by alias); 7 Jun 1999 11:41:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6496
Received: (qmail 19087 invoked from network); 7 Jun 1999 11:41:12 -0000
Date: Mon, 7 Jun 1999 13:41:09 +0200 (MET DST)
Message-Id: <199906071141.NAA06881@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Mon, 7 Jun 1999 15:21:46 +0400
Subject: Re: More intellegent suffix removing?


Andrej Borsenkow wrote:

> Consider:
> 
> bor@itsrm2:~%> l /S<TAB>
> bor@itsrm2:~%> l /SInus/      now I press ``;''
> bor@itsrm2:~%> l /SInus/;
> 
> note, that ``/'' is not removed, but in this case `;' can not be a part of
> current word (but \; or ';' or ";" can). Is it possible (does it make
> sense?) do make suffix removing follow Zsh grammar more closely?

The patch would be the thing below (are there any other characters
where this would be the right thing?). It looks a bit ugly when this
happens after typing a `<' or `>', though.

Bye
 Sven

diff -u os/Zle/zle_misc.c Src/Zle/zle_misc.c
--- os/Zle/zle_misc.c	Mon Jun  7 13:00:07 1999
+++ Src/Zle/zle_misc.c	Mon Jun  7 13:37:55 1999
@@ -787,7 +787,9 @@
 void
 makesuffix(int n)
 {
-    suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] = n;
+    suffixlen[256] = suffixlen[' '] = suffixlen['\t'] = suffixlen['\n'] =
+	suffixlen[';'] = suffixlen['|'] = suffixlen['&'] = 
+	suffixlen['<'] = suffixlen['>'] = n;
 }
 
 /* Set up suffix for parameter names: the last n characters are a suffix *

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


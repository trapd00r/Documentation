From zsh-users-return-14308-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 17 15:02:51 2009
Return-Path: <zsh-users-return-14308-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 331 invoked from network); 17 Aug 2009 15:02:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_WEB autolearn=no version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 17 Aug 2009 15:02:47 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 67225 invoked from network); 17 Aug 2009 15:02:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2009 15:02:28 -0000
Received: (qmail 7394 invoked by alias); 17 Aug 2009 15:02:01 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14308
Received: (qmail 7362 invoked from network); 17 Aug 2009 15:02:00 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 17 Aug 2009 15:02:00 -0000
Received: from biskalar.biskalar.de (sesamstrafe.de [213.133.108.195])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id E1AC08030815
	for <zsh-users@sunsite.dk>; Mon, 17 Aug 2009 17:01:55 +0200 (CEST)
Received: from [192.124.26.250] (helo=ranga.kyb.local)
	by biskalar.biskalar.de with esmtpsa (TLS-1.0:RSA_AES_128_CBC_SHA:16)
	(Exim 4.50)
	id 1Md3ic-0000II-43
	for zsh-users@sunsite.dk; Mon, 17 Aug 2009 17:01:54 +0200
Message-Id: <5B26F0E9-7F32-48D5-A078-3CAC8949DF7D@biskalar.de>
From: Sebastian Stark <seb-zsh@biskalar.de>
To: zsh-users@sunsite.dk
In-Reply-To: <20090815173829.28e91a97@pws-pc>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: loving zsh, crashing zsh...
Date: Mon, 17 Aug 2009 17:01:54 +0200
References: <f950edef0908130340s3ede9ec3hfdfe5626574a7485@mail.gmail.com> <f950edef0908130341k4824035do93d37a77801ff429@mail.gmail.com> <20090815173829.28e91a97@pws-pc>
X-Mailer: Apple Mail (2.936)
X-Virus-Scanned: ClamAV 0.94.2/9704/Mon Aug 17 03:54:29 2009 on bifrost
X-Virus-Status: Clean


On 15.08.2009, at 18:38, Peter Stephenson wrote:
> Index: Src/Zle/zle_tricky.c
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_tricky.c,v
> retrieving revision 1.99
> diff -u -r1.99 zle_tricky.c
> --- Src/Zle/zle_tricky.c	20 Feb 2009 21:49:58 -0000	1.99
> +++ Src/Zle/zle_tricky.c	15 Aug 2009 16:25:16 -0000
> @@ -1211,7 +1211,15 @@
> 	    (ins =3D=3D 2 && i =3D=3D 2) || (ins =3D=3D 3 && i =3D=3D 3) =
||
> 	    tok =3D=3D BAR    || tok =3D=3D AMPER     ||
> 	    tok =3D=3D BARAMP || tok =3D=3D AMPERBANG ||
> -	    ((tok =3D=3D DBAR || tok =3D=3D DAMPER) && !incond)) {
> +	    ((tok =3D=3D DBAR || tok =3D=3D DAMPER) && !incond) ||
> +	    /*
> +	     * Special case: we might reach a new command (incmdpos set)
> +	     * if we've already found the string we're completing (tt =
set)
> +	     * without hitting one of the above if we're using one of
> +	     * the special zsh forms of delimiting for conditions and
> +	     * loops that I really loathe having to support.

Is it the "alternate forms for complex commands" you are refering to =20
here?

In the manual it says:

       "Many of zsh=E2=80=99s complex commands have alternate forms.  =
These =20
particular versions of complex commands should  be  con=E2=80=90
       sidered  deprecated  and  may  be  removed  in the future.  The =20=

versions in the previous section should be preferred
       instead."

When will they finally go away or be disabled by default? I once =20
converted all my scripts and functions to use these alternate forms, =20
because I thought it would be good. Later I read this paragraph in the =20=

manual and realized it is not good to change the well established =20
shell syntax in such a massive way. I then reverted all the changes I =20=

made to my stuff. (As a side effect non-zsh users are now able to =20
understand my scripts.)


Sebastian=


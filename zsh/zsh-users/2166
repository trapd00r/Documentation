From zsh-users-return-2166-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Feb 18 01:05:24 1999
Return-Path: <zsh-users-return-2166-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12430 invoked from network); 18 Feb 1999 01:05:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Feb 1999 01:05:23 -0000
Received: (qmail 23489 invoked by alias); 18 Feb 1999 01:04:14 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2166
Received: (qmail 23477 invoked from network); 18 Feb 1999 01:04:13 -0000
Message-Id: <199902180048.AAA01239@Indigo.thoth.u-net.com>
From: opk@thoth.u-net.com (Oliver Kiddle)
Date: Thu, 18 Feb 1999 00:48:52 +0000
X-Mailer: Mail User's Shell (7.2.6 beta(3) 11/17/96)
To: Zsh Users List <zsh-users@sunsite.auc.dk>
Subject: long pipelines and coprocesses

In a shell script I'm writing, I've got an enormous pipe of commands and
I've used the following construct as one of the commands in the pipe:

( ( [ "$dogrep" ] && grep "$1" ) || cat - ) | \

Does anyone know of a more efficient way of doing this (i.e. without the
cat -) other than having an outer if statement and repeating the whole
pipeline of commands.

What do I have to do to get coprocesses working in zsh scripts. They
aren't the best documented feature.

I have the following test script:

-----
while read file; do
  rm $file
done |&

:>testfile
ls
print -p testfile
ls
-----

It seems to work fine in ksh but in zsh it just hangs. I've tried it on
both AIX and IRIX.

Thanks

Oliver Kiddle


From zsh-workers-return-11718-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 02 05:24:21 2000
Return-Path: <zsh-workers-return-11718-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16107 invoked from network); 2 Jun 2000 05:24:20 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Jun 2000 05:24:20 -0000
Received: (qmail 20043 invoked by alias); 2 Jun 2000 05:24:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11718
Received: (qmail 20034 invoked from network); 2 Jun 2000 05:24:08 -0000
Message-ID: <20000602052405.23684.qmail@web1303.mail.yahoo.com>
Date: Thu, 1 Jun 2000 22:24:05 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: PATCH: fix for memory leak in module.c
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-1804289383-959923445=:23607"

--0-1804289383-959923445=:23607
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Here's another memory leak fix, this time for module.c

-FR


__________________________________________________
Do You Yahoo!?
Yahoo! Photos -- now, 100 FREE prints!
http://photos.yahoo.com
--0-1804289383-959923445=:23607
Content-Type: text/plain; name="patch6.txt"
Content-Description: patch6.txt
Content-Disposition: inline; filename="patch6.txt"

Index: Src/module.c
===================================================================
--- zsh/Src/omodule.c	Sun Apr 30 10:58:36 2000
+++ zsh/Src/module.c	Thu Jun  1 19:57:37 2000
@@ -1776,7 +1776,7 @@
     if ((pm = (Param) gethashnode2(paramtab, nam)))
 	unsetparam_pm(pm, 0, 1);
 
-    pm = setsparam(ztrdup(nam), ztrdup(module));
+    pm = setsparam(nam, ztrdup(module));
 
     pm->flags |= PM_AUTOLOAD;
 }

--0-1804289383-959923445=:23607--


From zsh-users-return-14699-mason-zsh=primenet.com.au@zsh.org Sun Jan 03 09:11:01 2010
Return-Path: <zsh-users-return-14699-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21419 invoked by alias); 3 Jan 2010 09:11:01 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14699
Received: (qmail 17397 invoked from network); 3 Jan 2010 09:10:50 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=0.6 required=5.0 tests=BAYES_00,FH_DATE_PAST_20XX
	autolearn=no version=3.2.5
Received-SPF: softfail (ns1.primenet.com.au: transitioning SPF record at b79.net does not designate 72.47.247.168 as permitted sender)
Date: Sun, 3 Jan 2010 01:09:47 -0800
From: John Magolske <listmail@b79.net>
To: zsh-users@zsh.org
Subject: Re: Git info in right prompt
Message-ID: <20100103090946.GA12624@mail.b79.net>
References: <20100102094112.GA7659@mail.b79.net> <87iqbk1448.wl%djcb@djcbsoftware.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <87iqbk1448.wl%djcb@djcbsoftware.nl>
User-Agent: Mutt/1.5.19 (2009-01-05)
X-Authenticated-User: 70206 listmail@b79.net

* Dirk-Jan C. Binnema <djcb.bulk@gmail.com> [100102 15:52]:
> >>>>> "John" == John Magolske <listmail@b79.net> writes:
> John> I'd like to display the current git branch in the right prompt,
> John> ...
> John> ... and I can't seem to make any "display git branch" thing work
> 
> Below is my setup for my prompts; it's a bit *more* than what you ask
> for, but it is hopefully helpful.

Thanks, 'tis more than what I need at the moment, but it'll be handy
to refer to over time for sure. Here's what I've settled on for now:

  autoload -Uz vcs_info
  precmd () {
      psvar=()
      vcs_info
      [[ -n $vcs_info_msg_0_ ]] && psvar[1]="$vcs_info_msg_0_"
  }
  
  export PROMPT="%B%F{green} %~%(1v.%b%F{yellow}%1v%f.) %B%F{yellow}%# %b%F{white}"

However, for some reason the git info will appear in my prompt only
if I do something like `mv /etc/zsh/zshrc /etc/zsh/zshrc-1`
Seems something in the zshrc that came with the Grml distro I'm
using is preventing the display of git info (or maybe I'm just doing
something wrong). I tried reading through and commenting out various
sections of that zshrc to figure out what might be causing this
interaction to no avail. Any ideas?

John


-- 
John Magolske
http://B79.net/contact


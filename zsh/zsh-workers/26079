From zsh-workers-return-26079-mason-zsh=primenet.com.au@sunsite.dk Fri Nov 21 05:13:30 2008
Return-Path: <zsh-workers-return-26079-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28698 invoked from network); 21 Nov 2008 05:13:23 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Nov 2008 05:13:23 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92256 invoked from network); 21 Nov 2008 05:13:12 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Nov 2008 05:13:12 -0000
Received: (qmail 24602 invoked by alias); 21 Nov 2008 05:13:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26079
Received: (qmail 24593 invoked from network); 21 Nov 2008 05:13:07 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 21 Nov 2008 05:13:07 -0000
Received: from vms173001pub.verizon.net (vms173001pub.verizon.net [206.46.173.1])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 3D3D380525B4
	for <zsh-workers@sunsite.dk>; Fri, 21 Nov 2008 06:13:04 +0100 (CET)
Received: from torch.brasslantern.com ([96.238.220.215])
 by vms173001.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0KAO00H9V3TAPCX3@vms173001.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 20 Nov 2008 23:12:47 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id mAL5CjEg030108	for
 <zsh-workers@sunsite.dk>; Thu, 20 Nov 2008 21:12:45 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id mAL5Ci9l030107	for zsh-workers@sunsite.dk; Thu,
 20 Nov 2008 21:12:44 -0800
Date: Thu, 20 Nov 2008 21:12:44 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: D03 test hang on cygwin with latest sources
In-reply-to: <20a807210811202008o34865319qe1840896992ac48d@mail.gmail.com>
To: zsh-workers@sunsite.dk
Message-id: <081120211244.ZM30106@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20a807210811202008o34865319qe1840896992ac48d@mail.gmail.com>
Comments: In reply to "Vin Shelton" <acs@alumni.princeton.edu>
 "D03 test hang on cygwin with latest sources" (Nov 20, 11:08pm)
X-Virus-Scanned: ClamAV 0.92.1/8656/Thu Nov 20 23:12:54 2008 on bifrost
X-Virus-Status: Clean

On Nov 20, 11:08pm, Vin Shelton wrote:
}
} Peter -
} 
} It looks like something bad happened with your process redirection
} changes.  After building from the latest CVS sources, I ran the
} testsuite and got a hang in D03.  A ZTST_verbose=2 trace follows.
} 
} The last time I built the shell on this platform, 2008-10-12, this
} test passed.

I'm not sure historical success means anything here, because there
previously was no test of >(...) except in the context of > >(...).

The pre-existing test for > >(...) has the somewhat cryptic comment

# slightly desperate hack to force >(...) to be synchronous

I note there's no similar synchronicity hack in the new test, and the
debug output is not sufficient to determine whether the shell is in
fact hung, or whether it's in an infinite loop running

  while [[ ! -e outputfield2.txt || ! -s outputfield2.txt ]]; do :; done


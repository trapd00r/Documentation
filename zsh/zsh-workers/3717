From zsh-workers-request@math.gatech.edu Fri Jan 16 11:33:52 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 22896 invoked from network); 16 Jan 1998 11:33:50 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 16 Jan 1998 11:33:50 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id GAA16863;
	Fri, 16 Jan 1998 06:19:14 -0500 (EST)
Resent-Date: Fri, 16 Jan 1998 06:19:14 -0500 (EST)
Date: Fri, 16 Jan 1998 14:21:07 +0300 (MSK)
From: Andrej Borsenkow <borsenkow.msk@sni.de>
X-Sender: bor@itsrm1
Reply-To: borsenkow.msk@sni.de
To: Andrew Main <zefram@tao.co.uk>
cc: zsh-workers@math.gatech.edu
Subject: Re: PATCH: $(LIBZSH) installation
In-Reply-To: <199801161016.KAA01960@taos.demon.co.uk>
Message-ID: <Pine.SV4.3.95.980116141251.16351D-100000@itsrm1>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"PNo5Z3.0.Q74.n8qlq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3717
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Fri, 16 Jan 1998, Andrew Main wrote:

> 
> The linking with $(LIBZSH) is the way Andrej suggested, but also
> using an extra -R option to tell the dynamic linker where $(LIBZSH)
> will be installed.  (Are there any platforms that use libzsh but don't
> support -R?)
> 

Yep. SVR4 (at least this particular flavor I have). Actually, if you just
link against $(LIBZSH) $(LIBS), zsh will look for *this partucular name*
(be it libzsh-$VERSION).so or for that matter libzsh.so.$(VERSION)), so
you can just drop it in the standard place (it won't conflict with old
version anyway).

Standard way to fo it on SVR4 is to set LD_RUN_PATH:

LD_RUN_PATH=$(libdir)/zsh $(LD) ...

cf. Perl :-) 


> The filename used for the library is changed to libzsh-$(VERSION).so,
> from libzsh.so.$(VERSION).

See above. It looks, like it actually doesn't matter (*.so needed only for
-l flag).

> 
> libzsh is installed and uninstalled with (un)install.bin.  There is no
> need to separate it from installation of the actual binary, as each
> is useless without the other.

Hmmm ... When building a new (test) version I won't like to overrided my
(login and so far favorite) shell. I would really prefer to install mods
and lib (to avoid fiddling with LD_LIBRARY_PATH/module_path) and just
start new shell from build dir.

-------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 252 01 05
SNI ITS Moscow			Tel:   +7 (095) 252 13 88

NERV:  borsenkow.msk		E-Mail: borsenkow.msk@sni.de
-------------------------------------------------------------------------



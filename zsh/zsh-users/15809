From zsh-users-return-15809-mason-zsh=primenet.com.au@zsh.org Wed Feb 16 17:02:05 2011
Return-Path: <zsh-users-return-15809-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29234 invoked by alias); 16 Feb 2011 17:02:04 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15809
Received: (qmail 10379 invoked from network); 16 Feb 2011 17:02:02 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <110216090123.ZM799@torch.brasslantern.com>
Date: Wed, 16 Feb 2011 09:01:21 -0800
In-reply-to: <ijgd67$djk$1@dough.gmane.org>
Comments: In reply to Thorsten Kampe <thorsten@thorstenkampe.de>
 "Re: Key bindings not working under screen" (Feb 16, 12:41pm)
References: <ijdm27$upa$1@dough.gmane.org>
	<110215074453.ZM31765@torch.brasslantern.com>	<ijeif5$5vt$2@dough.gmane.org>
	<110215195121.ZM32256@torch.brasslantern.com>	<ijgd67$djk$1@dough.gmane.org>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Re: Key bindings not working under screen
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Feb 16, 12:41pm, Thorsten Kampe wrote:
} Subject: Re: Key bindings not working under screen
}
} > # at the top of .zshrc
} > exec 2> /tmp/zshrc$$
} > setopt xtrace
} 
} It reaches the end ("setopt noxtrace") in both cases (screen call in 
} .zlogin and without) and the generated log files in $TMP (zshrcnnnn) are 
} exactly the same...

Then it's time to look for something in /etc/zlogin or ~/.zlogin that
may be causing it (assuming screen starts zsh as a login shell).  If
that's not the problem the only thing I could suggest is to create a
verbose shell function wrapper for bindkey, something like

    zmodload -i zsh/parameter
    bindkey() {
      print -u2 -- "$functrace[@]": bindkey "$@"
      builtin bindkey "$@"
    }

and install that very early, perhaps in ~/.zshenv.

-- 


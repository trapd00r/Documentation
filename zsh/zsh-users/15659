From zsh-users-return-15659-mason-zsh=primenet.com.au@zsh.org Mon Dec 20 14:59:27 2010
Return-Path: <zsh-users-return-15659-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10030 invoked by alias); 20 Dec 2010 14:59:27 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15659
Received: (qmail 27877 invoked from network); 20 Dec 2010 14:59:26 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Mon, 20 Dec 2010 14:59:18 +0000
From: Peter Stephenson <Peter.Stephenson@csr.com>
To: <zsh-users@zsh.org>
Subject: Re: exit status problem
Message-ID: <20101220145918.6dd9ff24@pwslap01u.europe.root.pri>
In-Reply-To: <20101220113433.GA15894@prunille.vinc17.org>
References: <20101203152438.GL1727@prunille.vinc17.org>
	<20101220113433.GA15894@prunille.vinc17.org>
Organization: Cambridge Silicon Radio
X-Mailer: Claws Mail 3.7.6 (GTK+ 2.20.1; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Dec 2010 14:59:18.0717 (UTC) FILETIME=[7A268ED0:01CBA056]
X-Scanned-By: MailControl A_10_80_00 (www.mailcontrol.com) on 10.71.0.124

On Mon, 20 Dec 2010 12:34:33 +0100
Vincent Lefevre <vincent@vinc17.net> wrote:
> zsh 4.3.10-test-3 still has this problem, which can be summarized
> as:
> 
> 1. Execute "zsh -f".
> 2. Type RPS1="%*" and [Enter] (to have the time in the prompt).
> 3. Resize the window.
> -> If the width has changed, the right part of the prompt is
>    redisplayed at the correct place, but in any case, the time
>    displayed in the prompt is not updated, even though zsh has
>    updated it internally. This can be seen with:
> 4. Type [Enter].
> -> The time in the current prompt is updated to the time when the
>    window has been resized. This shows that the time in the prompt
>    was updated internally, but the effect couldn't be seen on the
>    terminal.
>    A new prompt is also output as expected.

Hmmm.... I've done exactly that and the time *is* updated at 3.

Obviously that doesn't mean there isn't a problem somewhere, but I'm
going to assume this will rumble on beyond 4.3.11.

Could be terminal specific in some way, but I got this both with urxvt
and xterm.  More likely system-specific and an fflush() is still
missing.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-users-return-4257-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 18 23:18:35 2001
Return-Path: <zsh-users-return-4257-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7029 invoked from network); 18 Sep 2001 23:18:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Sep 2001 23:18:34 -0000
Received: (qmail 232 invoked by alias); 18 Sep 2001 23:18:11 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4257
Received: (qmail 219 invoked from network); 18 Sep 2001 23:18:09 -0000
From: Bart Schaefer <schaefer@brasslantern.com>
Message-Id: <010918161708.ZM8169@candle.brasslantern.com>
Date: Tue, 18 Sep 2001 16:17:08 -0700
In-Reply-To: <20010919005025.A18079@greux.loria.fr>
Comments: In reply to Vincent Lefevre <vincent@vinc17.org>
        "Re: can't find termcap info" (Sep 19, 12:50am)
References: <20010918142514.A16873@greux.loria.fr> 
	<20010918053813.C13299@hq.newdream.net> 
	<20010918145958.A17178@greux.loria.fr> 
	<20010918062537.G13299@hq.newdream.net> 
	<20010918165111.B17411@greux.loria.fr> 
	<20010918155339.20305.qmail@web12504.mail.yahoo.com> 
	<20010918181329.A17722@greux.loria.fr> 
	<010918121941.ZM8023@candle.brasslantern.com> 
	<4abc1a97d3vincent@vinc17.org> 
	<010918151018.ZM8119@candle.brasslantern.com> 
	<20010919005025.A18079@greux.loria.fr>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Vincent Lefevre <vincent@vinc17.org>, zsh-users@sunsite.dk
Subject: Re: can't find termcap info
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 19, 12:50am, Vincent Lefevre wrote:
> 
> (gdb) backtrace
> #0  chunk_alloc (ar_ptr=0x2abf1d60, nb=24) at malloc.c:2814
> #1  0x2ab5c5ce in __libc_malloc (bytes=16) at malloc.c:2696
> #2  0x2aae1f09 in _init () from /lib/libtermcap.so.2
> #3  0x2aae2328 in _init () from /lib/libtermcap.so.2
> #4  0x2aae2b3b in _init () from /lib/libtermcap.so.2
> #5  0x2aae2bc8 in tgetent () from /lib/libtermcap.so.2

As I feared, it's crashing in the termcap library itself; there's nothing
we can directly do about this.

> > If $HOME/.termcap isn't too huge, include that too.
> 
> It's too huge: 748544 KB.
> 
> I generated it with "tic -C -T terminfo.src"

Hrm.  I'd be a bit suspicious of this; it's entirely possible that there
are termcap strings that the ncurses tgetent would accept but which the
(older) libtermcap tgetent would choke on.

Try either (a) copy /etc/termcap and append your nettle def'n to that,
or (b) edit down your ~/.termcap to contain just the rxvt and nettle
def'ns (and any that rxvt may depend on).

Either that, or you're going to have to "configure --with-curses-terminfo"
and rebuild zsh.


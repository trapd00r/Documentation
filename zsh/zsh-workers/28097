From zsh-workers-return-28097-mason-zsh=primenet.com.au@zsh.org Fri Jul 23 05:40:10 2010
Return-Path: <zsh-workers-return-28097-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27968 invoked by alias); 23 Jul 2010 05:40:10 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28097
Received: (qmail 13145 invoked from network); 23 Jul 2010 05:40:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Workers <zsh-workers@zsh.org>
Cc: "Benjamin R. Haskell" <zsh@benizi.com>
Subject: [PATCH] Let _screen complete sessions for -dRR and -DRR
Date: Fri, 23 Jul 2010 01:40:02 -0400
Message-Id: <1279863602-19639-1-git-send-email-zsh@benizi.com>
X-Mailer: git-send-email 1.7.1

GNU Screen allows two 'R's after a -d (detach) or -D (detach and logout)
as '-dRR' or '-DRR' to mean reattach and create if necessary, picking
the first if multiple options apply.  Current completion only allowed
one 'R' (which doesn't have the 'and pick the first').  This patch
combines the various ':->any-session' handlers into a single expansion,
adding -dRR and -DRR in the process.
---
 Completion/Unix/Command/_screen |    7 +------
 1 files changed, 1 insertions(+), 6 deletions(-)

diff --git a/Completion/Unix/Command/_screen b/Completion/Unix/Command/_screen
index 67c453a..448b82c 100644
--- a/Completion/Unix/Command/_screen
+++ b/Completion/Unix/Command/_screen
@@ -75,11 +75,7 @@ _arguments -C \
   '-p[preselect the named window]:window number or name:((\=\:windowlist -\:blank\ window \:window\ number))' \
   '-q[quiet startup, exit with non-zero return code if unsuccessful]' \
   '-r[reattach to a detached screen process]: :->detached-sessions' \
-  '-Dr: :->any-sessions' \
-  '-dr: :->any-sessions' \
   '-R[reattach if possible, otherwise start a new session]: :->detached-sessions' \
-  '-DR: :->any-sessions' \
-  '-dR: :->any-sessions' \
   '-s[shell to execute rather than $SHELL]:shell name: _command_names -e' \
   '-S[name this session <pid>.sockname instead of <pid>.<tty>.<host>]:session name' \
   "-t[set title (window's name)]:title" \
@@ -88,8 +84,7 @@ _arguments -C \
   '(-)-v[print screen version]' \
   '(-)-wipe[do nothing, clean up SockDir]' \
   '-x[attach to a not detached screen (multi display mode)]: :->attached-sessions' \
-  '-Dx: :->any-sessions' \
-  '-dx: :->any-sessions' \
+  '-'{d,D}{r,R,RR,x}': :->any-sessions' \
   '-X[execute command as a screen command in the specified session]:screencmd:(${scr_cmds[@]})' \
   '*::arguments: _normal'
 
-- 
1.7.1


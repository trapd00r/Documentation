From huyle@dogbert.ugcs.caltech.edu Sun May 12 06:00:35 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id GAA21411 for <mason@werple.mira.net.au>; Sun, 12 May 1996 06:00:33 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id PAA01512; Sat, 11 May 1996 15:47:13 -0400 (EDT)
Resent-Date: Sat, 11 May 1996 15:47:13 -0400 (EDT)
Message-Id: <199605111946.MAA25867@envy.ugcs.caltech.edu>
To: zsh-workers@math.gatech.edu
cc: jkelley@dogbert.ugcs.caltech.edu
Subject: BUG: zsh 2.6-beta13: magic-space & history
X-URL: http://www.ugcs.caltech.edu/~huyle
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <28228.831844002.1@dogbert.ugcs.caltech.edu>
Date: Sat, 11 May 1996 12:46:43 -0700
From: Huy Le <huyle@dogbert.ugcs.caltech.edu>
Resent-Message-ID: <"TJq2U2.0.VN.0xEbn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1052
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 604
Status: O

On:
  IRIX 5.3 IP22 mips
  SunOS 5.5 Generic sun4m sparc SUNW,SPARCstation-LX
  HP-UX A.09.01 A 9000/715 two-user license

The magic-space binding seems to mess up the history of
a line with a quoted argument that spawns two lines and then
another argument. All that goes into the history is a space
and the second argument.
  - Huy

dogbert% exec zsh -f
dogbert% echo 'a
> b' c
a
b c
dogbert% history
    1  echo 'a\nb' c
    2  history
dogbert% exec zsh -f
dogbert% bindkey    ' '  magic-space
dogbert% echo 'a
> b' c
a
b c
dogbert% history
    1  bindkey    ' '  magic-space
    2   c
    3  history



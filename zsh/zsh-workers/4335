From zsh-workers-request@math.gatech.edu Wed Aug 19 19:24:23 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22242 invoked from network); 19 Aug 1998 19:24:22 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 19 Aug 1998 19:24:22 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id PAA11394;
	Wed, 19 Aug 1998 15:11:31 -0400 (EDT)
Resent-Date: Wed, 19 Aug 1998 15:11:31 -0400 (EDT)
Sender: dfavor@austin.ibm.com
Message-Id: <35DB23FF.C836E62@austin.ibm.com>
Date: Wed, 19 Aug 1998 14:14:08 -0500
From: "David R. Favor" <dfavor@austin.ibm.com>
X-Mailer: Mozilla 4.06 [en] (X11; I; AIX 4.3)
Mime-Version: 1.0
To: Zsh List <zsh-workers@math.gatech.edu>
Subject: zsh 3.1.4 - AIX 4.3.1 build with --enable-dynamic fails
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"dmltx1.0.zn2.YDosr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4335
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Here's the command sequence:

   configure --enable-dynamic

      zsh configuration
      -----------------
      zsh version               : 3.1.4
      host operating system     : powerpc-ibm-aix4.3.1.0
      source code location      : .
      compiler                  : nice xlc
      executable compiler flags : -qmaxmem=8192 -ma -O2 -I/usr/local/include
      module compiler flags     : -qmaxmem=8192 -ma -O2 -I/usr/local/include 
      executable linker flags   : -L/usr/local/lib -L/lib  
      module linker flags       : -L/usr/local/lib -L/lib  
      library flags             : -ldl -lcurses -lc 
      binary install path       : /usr/local/bin
      man page install path     : /usr/local/man
      info install path         : /usr/local/info

   make

      make[3]: Entering directory `/data/rpm/BUILD/zsh-3.1.4/Src/Zle'
      nice xlc -c -I.  -DHAVE_CONFIG_H -qmaxmem=8192 -ma -O2
-I/usr/local/include
         -o comp1.o comp1.c "../../Src/system.h", line 63.2: 1506-224 (W)
Incorrect
         #pragma ignored.
      echo '' comp1.o | sed 's" " Zle/"g' >> ../../Src/stamp-modobjs.tmp
      make[3]: Leaving directory `/data/rpm/BUILD/zsh-3.1.4/Src/Zle'
      make[2]: Leaving directory `/data/rpm/BUILD/zsh-3.1.4/Src'
      Updated `stamp-modobjs'.
      rm -f libzsh-3.1.4.so
      ld -L/usr/local/lib -L/lib   -o libzsh-3.1.4.so  `cat stamp-modobjs`
      ld: 0711-327 WARNING: Entry point not found: __start
      ld: 0711-244 ERROR: No csects or exported symbols have been saved.
      make[1]: *** [libzsh-3.1.4.so] Error 8
      make[1]: Leaving directory `/data/rpm/BUILD/zsh-3.1.4/Src'
      make: *** [all] Error 1

Doing an *nm -A `cat stamp-modobjs` | egrep start* gives:

   exec.o:   .startparamscope     U          -
   params.o: .startparamscope     T       7156
   params.o: startparamscope      D      22428      12
   params.o: startparamscope      d      21764       4

So there is actually no __start symbol.

Suggestions?


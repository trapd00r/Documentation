From zsh-workers-return-16289-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 26 07:32:35 2001
Return-Path: <zsh-workers-return-16289-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5636 invoked from network); 26 Nov 2001 07:32:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 26 Nov 2001 07:32:34 -0000
Received: (qmail 20659 invoked by alias); 26 Nov 2001 07:32:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16289
Received: (qmail 20648 invoked from network); 26 Nov 2001 07:32:14 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Gary Oberbrunner'" <garyo@genarts.com>
Cc: zsh-workers@sunsite.dk
Subject: RE: Zsh 4.0.4 and Emacs 21.1 in Windows XP
Date: Mon, 26 Nov 2001 10:32:06 +0300
Message-ID: <000f01c1764c$73678240$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
In-Reply-To: <3BFEBDDD.1000100@genarts.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000

> 
> I'm sorry to say that my previous fix, setting CYGWIN to "nobinmode"
> before invoking zsh, doesn't actually work.  My initial test was not a
> proper test at all.  It doesn't seem that setting or not setting
CYGWIN
> makes any difference.  Also, I have the same problem with 'bash' as
zsh,
> so I guess it's not a zsh problem at all.
> 
> I never had this problem before; maybe it's something new in emacs
21.1,
> or maybe I'm not building/installing cygwin properly.  Oh well, thanks
> for the help.
> 


I cannot reproduce it. I downloaded precompiled binary for emacs-21 off
GNU archives, I have more or less current CVS version of zsh (it dhould
not matter wrt the above problem) and I have current Cygwin
installation. All I did was set ESHELL to d:\cygwin\bin\zsh.exe and
start it in Emacs with M-x shell (that pretty much everything I can do
in emacs; even that took 15 minutes to find out :-)

I have no problems running any command at all; like

MW1G17C% print $options[zle]
off
MW1G17C% print $CYGWIN

MW1G17C% pwd
/cygdrive/c
MW1G17C% cd
MW1G17C% pwd
/cygdrive/c
MW1G17C% echo $HOME
/cygdrive/c


Sorry, but you probably are better off asking this on Cygwin list,
especially as the problem is not limited to zsh.

BTW my emacs sets TERM to emacs which slightly contradicts with FAQ:

d:\cygwin\bin\zsh.exeMW1G17C% echo $TERM
emacs

also HOME is weird (I have different one; may be emacs overwrites it)
and none of rc files are run. Check if you have some unusual setting in
your rc files; try with zsh -f; try with the current Cygwin version.
Finally, why do not you use precompiled binaries for emacs?

-andrej 


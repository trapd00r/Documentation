From zsh-workers-return-6516-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 08 08:30:48 1999
Return-Path: <zsh-workers-return-6516-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12684 invoked from network); 8 Jun 1999 08:30:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jun 1999 08:30:45 -0000
Received: (qmail 13524 invoked by alias); 8 Jun 1999 08:30:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6516
Received: (qmail 13517 invoked from network); 8 Jun 1999 08:30:31 -0000
Message-Id: <9906080801.AA15323@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: pws-21
Date: Tue, 08 Jun 1999 10:01:58 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

http://www.ifh.de/~pws/computing/
-rw-r--r--   1 pws  quadrics  251548 Jun  8 10:14 zsh-3.1.5-pws-21.doc.tar.bz2
-rw-r--r--   1 pws  quadrics  370239 Jun  8 10:14 zsh-3.1.5-pws-21.doc.tar.gz
-rw-r--r--   1 pws  quadrics  768134 Jun  8 10:14 zsh-3.1.5-pws-21.tar.bz2
-rw-r--r--   1 pws  quadrics  949770 Jun  8 10:14 zsh-3.1.5-pws-21.tar.gz

You will notice that the patchlist.txt has been absorbed into ChangeLog to
try and make an honest shell out of it.

The unposted --enable-fndir/install.fns change has the modifications
described in 6503 (FUNCTIONS_INSTALL).  However, it does not yet have
checks for overwriting existing functions on installation.  Maybe someone
will beat me to it (hope springs eternal).

I have not incorporated Tanaka Akira's latest patch on COLUMNS/LINES, I'll
wait to see what the reaction to Bart's comments is.  I'm unlikely to
meddle in this one myself.

There are various other bits of pending business I need to reply to,
at some point, but nothing urgent in the patch way.

Note that the list of changes is now in Stallmanesque backwards format.

1999-06-08  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* 3.1.5-pws-21 made available

	* Sven: 6515: Src/Zle/zle_tricky.c: fix memory problems with 6492

	* Wayne: 6510: Completion/Core/compinit: another nounset problem

1999-06-07  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* pws: configure.in, Config/defs.mk.in, Functions/Makefile.in,
	  Completion/Makefile.in, rearrangement of Functions
	  subdirectories:  --enable-fndir allows function installation,
	  defaults to ${datadir}/zsh/functions; is compiled into $fpath;
	  FUNCTIONS_INSTALL can specify functions to install e.g.
	  'Core/* Base/* Builtins/* Zftp/*'.

	* pws: 6509: Src/Zle/zle_tricky.c: comp_setunset -> comp_setunsetptr

	* pws: 6506: Completion/Core/compinit, Doc/Zsh/compsys.yo: if
	  completion dumpfile is not writeable, use
	  ${ZDOTDIR:-$HOME}/.zcompdump

	* Sven: 6502: Doc/Zsh/options.yo: document 6496

	* Sven: 6496: Src/Zle/zle_misc.c (makesuffix): more characters
	  that can't be part of a filename

	* Sven: 6493: Completion/Core/_approximate,
	  Completion/Core/_expand: %e wasn't being replaced properly in
	  correction prompts

	* Sven: 6492: Src/Zle/comp.h, Src/Zle/comp1.c, Src/Zle/compctl.c,
	  Src/Zle/zle_main.c, Src/Zle/zle_tricky.c, Doc/Zsh/compctl.yo,
	  Doc/Zsh/compsys.yo, Doc/Zsh/compwid.yo,
	  Completion/Base/_brace_parameter:  Completion inside quotes
	  now acts as if the file name is the entire quoted string;
	  `compctl -h' takes a command line from inside a quoted string;
	  the compctl tests q[s], q[d], q[b] are true if we are in single,
	  double, back quotes; compset -q tests quotes and splits the word,
	  affecting $PREFIX, $SUFFIX and setting $IQPREFIX, $IQSUFFIX for
	  the bits which will now be ignored.

	* pws: 6490: Completion/Core/compinit: nounset workaround

	* Bart: 6485: Src/loop.c: only show one screenful at a time
	  in select, as LINES doc implies it should do

	* Sven: 6484: Src/Zle/zle_main.c, Src/Zle/zle_tricky.c: close
	  fd 0 during zle widgets and completion and redup back afterwards
	  (removed unnecessary zclose()'s)
	
	* Wayne: 6481: Doc/Zsh/builtins.yo, Doc/Zsh/options.yo,
	  Src/hist.c:  improved new history documentation and comments

	* Wayne: 6480: Src/hist.c: Ignore some lines in remhist() to
	  workaround crashes attempting to add already removed lines

	* Tanaka Akira: 6478: Completion/User/_make: complete files
	  as fallback (but use _files instead of compgen -f)

1999-06-06  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* Naoki Wakamatsu <naoki-w@ht-net21.ne.jp>: 6477: configure.in:
	  undefine etcdir, not zshenv

1999-06-05  Peter Stephenson  <pws@ibmth.difi.unipi.it>

	* Merge ChangeLog entry from patchlist.txt in 3.1.5-pws-20
	  These are briefer than normal ChangeLog entries, but upgrading
	  all of them is too much work.

	* pws: 6473: Src/Modules/mapfile.c: munmap() after writing file

	* Bart: 6472: doc for 6458

	* pws: 6470: options.yo doc for globalrcs

	* Sven: 6468: -first- context example; allow $compcontext for
	  direct context in _complete; other stuff

	* pws: 6464: fix problem with 6433; disallow nested parameter
	  substitution without braces

	* Sven: 6458: allow seconds in globbing qualifier time comparisons

	* Zefram: off-list: metafaq updates

	* pws: 6437: rearrange quotes in expn.yo, zftpsys.yo, minor
	  corrections

	* pws: 6433: allow quotes around names of parameters in braces

	* pws: 6431: su saga again: new documentation

	* Bart: 4127: su saga: 6299 and 6313 backed off; this alters
	  ZSH_NAME using zgetenv("SHELL").  It can be turned into an
	  --enable if anyone complains.

	* Wayne: 6430: history tweaks: more careful ignoring history with
	  foreign lines, changed name incappendhistory

	* pws: 6424: reduce excess quoting in info files

	* pws: 6421: _mh should use $words instead of $argv

	* pws: 6416: document ${(f)"$(foo)"} change and nesting of quotes
	  in braces

	* Sven: 6414: completing parameters with extra quotes, don't
	  complete local parameters

	* Sven: 6411: fix display bug on terminals which can do
	  TCMULTRIGHT (gap left when clearing list).

	* pws: 6410: RCS option can now take affect at any point during
	  initialisation, new GLOBAL_RCS applies to /etc/z* files.

	* Bart: 6404: singleton arrays treated as scalars locally (as
	  before), but correct array/scalar status is passed to enclosing
	  substitutions.

	* Bart: 6395: uninstall info files over 9, too

	* Sven: 6212 (previously missed): an extra clear list

	* Andrej: 6392: install info files higher than 9

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-workers-return-8669-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Nov 18 15:43:46 1999
Return-Path: <zsh-workers-return-8669-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19455 invoked from network); 18 Nov 1999 15:43:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Nov 1999 15:43:45 -0000
Received: (qmail 15099 invoked by alias); 18 Nov 1999 15:43:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8669
Received: (qmail 15092 invoked from network); 18 Nov 1999 15:43:26 -0000
Date: Thu, 18 Nov 1999 15:43:22 +0000
From: Adam Spiers <adam@thelonious.new.ox.ac.uk>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: prompt theme system improvements
Message-ID: <19991118154322.A23934@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
References: <19991118145330.A22718@thelonious.new.ox.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre3i
In-Reply-To: <19991118145330.A22718@thelonious.new.ox.ac.uk>
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.12 i686

Adam Spiers, on thelonious (adam@thelonious.new.ox.ac.uk) wrote:
> OK, finally here's a patch to the prompt system which vastly improves
> it.

I forgot Misc/bash2zshprompt.  Doh.

Index: Misc/bash2zshprompt
===================================================================
RCS file: /projects/zsh/zsh/Misc/bash2zshprompt,v
retrieving revision 1.1.1.3
diff -u -r1.1.1.3 bash2zshprompt
--- Misc/bash2zshprompt	1999/10/15 13:07:14	1.1.1.3
+++ Misc/bash2zshprompt	1999/11/18 15:42:04
@@ -10,7 +10,7 @@
 my @colours = qw/grey red green yellow blue magenta cyan white/;
 
 my @codes = ();
-my %bold;
+my %boldp;
 my $out = '';
 
 print "# Converted to zsh prompt theme by bash2zshprompt, written by <adam\@spiers.net>\n";
@@ -80,21 +80,22 @@
               ($p[1] eq '4') ? 'bg' :
               '???');
 
-  $bold{$fgbg} ||= '';
+  $boldp{$fgbg} ||= '';
 
   if ($p[0] =~ /^0?0$/) {
-    $bold{$fgbg} = '';
+    $boldp{$fgbg} = '';
     return '$reset_color';
   }
   
   if ($p[0] =~ /^0?1$/) {
-    $bold{$fgbg} = 'bold_';
+    $boldp{$fgbg} = 'bold_';
     return '$bold_color';
   }
 
   return '$' .
-         "${fgbg}_$bold{$fgbg}" .
-         $colours[$p[2]];
+         "${fgbg}$boldp{$fgbg}\[" .
+         $colours[$p[2]] .
+         ']';
 }
 
 sub split_codes {


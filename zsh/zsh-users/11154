From zsh-users-return-11154-mason-zsh=primenet.com.au@sunsite.dk Sun Jan 28 21:57:23 2007
Return-Path: <zsh-users-return-11154-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25022 invoked from network); 28 Jan 2007 21:57:16 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Jan 2007 21:57:16 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 77625 invoked from network); 28 Jan 2007 21:57:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Jan 2007 21:57:09 -0000
Received: (qmail 17551 invoked by alias); 28 Jan 2007 21:57:02 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11154
Received: (qmail 17541 invoked from network); 28 Jan 2007 21:57:01 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 28 Jan 2007 21:57:01 -0000
Received: (qmail 76522 invoked from network); 28 Jan 2007 21:57:01 -0000
Received: from mtaout01-winn.ispmail.ntl.com (81.103.221.47)
  by a.mx.sunsite.dk with SMTP; 28 Jan 2007 21:56:54 -0000
Received: from aamtaout01-winn.ispmail.ntl.com ([81.103.221.35])
          by mtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070128215653.HDTF9447.mtaout01-winn.ispmail.ntl.com@aamtaout01-winn.ispmail.ntl.com>
          for <zsh-users@sunsite.dk>; Sun, 28 Jan 2007 21:56:53 +0000
Received: from pwslaptop.csr.com ([82.6.97.4])
          by aamtaout01-winn.ispmail.ntl.com with ESMTP
          id <20070128215653.PYIY219.aamtaout01-winn.ispmail.ntl.com@pwslaptop.csr.com>
          for <zsh-users@sunsite.dk>; Sun, 28 Jan 2007 21:56:53 +0000
Received: from pwslaptop.csr.com (pwslaptop.csr.com [127.0.0.1])
	by pwslaptop.csr.com (8.13.8/8.13.7) with ESMTP id l0SLveDn003073
	for <zsh-users@sunsite.dk>; Sun, 28 Jan 2007 21:57:42 GMT
Message-Id: <200701282157.l0SLveDn003073@pwslaptop.csr.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-users@sunsite.dk
Subject: Re: zsh handling of non-standard if-evaluations 
In-Reply-To: Message from Daniel Qarras <dqarras@yahoo.com> 
   of "Sun, 28 Jan 2007 11:00:17 PST." <184104.7951.qm@web36811.mail.mud.yahoo.com> 
Date: Sun, 28 Jan 2007 21:57:40 +0000

Daniel Qarras wrote:
> --- Bart Schaefer <schaefer@brasslantern.com> wrote:
> > schaefer[501] [ "$VAR" == "VAL" ]; echo $?
> > zsh: = not found
> > schaefer[502] setopt no_equals
> > schaefer[503] [ "$VAR" == "VAL" ]; echo $?
> > 1
> 
> Correct.

Note that "setopt nonomatch" is enough to get this to work; that allows
you to carry on using =-expansion (that's why I didn't find the problem
to begin with).  It even works if you have a programme called = in your
path.

(That seems a little strange, actually.  Either you'd expect == to find
a programme called =, or you'd expect == to be a normal argument without
any pattern match failure.  It seems that you need to quote the second
argument: =\= does find = in the path.  That strikes me as a bug.)

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


From zsh-workers-request@euclid.skiles.gatech.edu Thu Jul 03 05:25:58 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 332 invoked from network); 3 Jul 1997 05:25:57 -0000
Received: from ns2.primenet.com.au (HELO dns.primenet.com.au) (203.24.36.40)
  by ns1.primenet.com.au with SMTP; 3 Jul 1997 05:25:57 -0000
Received: (qmail 447 invoked from network); 3 Jul 1997 05:18:29 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns2.primenet.com.au with SMTP; 3 Jul 1997 05:18:28 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id AAA21211; Thu, 3 Jul 1997 00:45:05 -0400 (EDT)
Resent-Date: Thu, 3 Jul 1997 00:45:05 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@frontiernet.net>
Message-Id: <199707030448.AAA05163@hzoli.home>
Subject: Re: German Umlauts still don't work
In-Reply-To: <970702210103.ZM12716@candle.brasslantern.com> from Bart Schaefer at "Jul 2, 97 09:01:03 pm"
To: schaefer@candle.brasslantern.com (Bart Schaefer)
Date: Thu, 3 Jul 1997 00:48:21 -0400 (EDT)
Cc: uli@tallowcross.uni-frankfurt.de, zsh-workers@math.gatech.edu
X-Mailer: ELM [version 2.4ME+ PL31 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"VlPWg2.0.JB5.Gvokp"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3342
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> } Peter Stephenson suggested to patch utils.c which is the only  
> } source file in zsh making use of isprint(c) which delivers incorrect  
> } results for NEXTSTEP.
[...]
> } Does anyone have an idea where to look?

Yes.

> With some grepping, I can't find any output of file names that doesn't
> pass through the right functions, except fprintdir() which seems to always
> output the raw string (so it can't be accidentally \M-ifying it).

Actually, many functions use icntrl(), especially zle_refresh.c.  I
wanted to mention this right after Peter posted his patch, but I just
wanted to post the right fix with this answer.  Sorry.  I think that this
whole chechking stuff should be done with typtab, and typtab should be
modified according to the localle and the printeightbit option.  And
isprint should only be used to set up typtab.  Probably we can set up
typtab so that we can assume that isprint() is equivalent to !ictrl().

Zoltan


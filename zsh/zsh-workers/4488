From zsh-workers-request@math.gatech.edu Mon Nov 02 09:20:37 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22886 invoked from network); 2 Nov 1998 09:20:36 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 2 Nov 1998 09:20:36 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id EAA09303;
	Mon, 2 Nov 1998 04:12:25 -0500 (EST)
Resent-Date: Mon, 2 Nov 1998 04:12:25 -0500 (EST)
Date: Mon, 2 Nov 1998 10:10:21 +0100 (MET)
Message-Id: <199811020910.KAA22028@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@math.gatech.edu
In-reply-to: Peter Stephenson's message of Sat, 31 Oct 1998 16:18:35 +0100
Subject: Re:  PATCH: Re: Strange behaviour of zsh-3.1.5 on IRIX 6.2
Resent-Message-ID: <"AM5YU3.0.FH2.vTNFs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4488
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Peter Stephenson wrote:

> ... [ a patch that changes refresh() to zrefresh() ]
> 

Could it be that you missed two calls to refresh() in zle_misc.c?

Bye
 Sven

*** Src/Zle/zle_misc.c.old	Mon Nov  2 10:07:55 1998
--- Src/Zle/zle_misc.c	Mon Nov  2 10:08:18 1998
***************
*** 621,627 ****
      for (;;) {
  	*ptr = '_';
  	statusll = l + len + 1;
! 	refresh();
  	if (!(cmd = getkeycmd()) || cmd == Th(z_sendbreak)) {
  	    statusline = NULL;
  	    selectkeymap(okeymap, 1);
--- 621,627 ----
      for (;;) {
  	*ptr = '_';
  	statusll = l + len + 1;
! 	zrefresh();
  	if (!(cmd = getkeycmd()) || cmd == Th(z_sendbreak)) {
  	    statusline = NULL;
  	    selectkeymap(okeymap, 1);
***************
*** 633,639 ****
  	    redisplay();
  	} else if(cmd == Th(z_viquotedinsert)) {
  	    *ptr = '^';
! 	    refresh();
  	    c = getkey(0);
  	    if(c == EOF || !c || len == NAMLEN)
  		feep();
--- 633,639 ----
  	    redisplay();
  	} else if(cmd == Th(z_viquotedinsert)) {
  	    *ptr = '^';
! 	    zrefresh();
  	    c = getkey(0);
  	    if(c == EOF || !c || len == NAMLEN)
  		feep();


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


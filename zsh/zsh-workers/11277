From zsh-workers-return-11277-mason-zsh=primenet.com.au@sunsite.auc.dk Tue May 09 11:54:03 2000
Return-Path: <zsh-workers-return-11277-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16003 invoked from network); 9 May 2000 11:54:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 May 2000 11:54:02 -0000
Received: (qmail 29692 invoked by alias); 9 May 2000 11:53:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11277
Received: (qmail 29662 invoked from network); 9 May 2000 11:53:31 -0000
Date: Tue, 9 May 2000 13:53:29 +0200 (MET DST)
Message-Id: <200005091153.NAA22307@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Tanaka Akira's message of 09 May 2000 20:44:59 +0900
Subject: PATCH: Re: zfanon and nslookup


Tanaka Akira wrote:

> I found that the function nslookup may causes trouble with zfanon.
> 
> Z:akr@coulee% Src/zsh -f
> coulee% autoload -U nslookup zfinit
> coulee% zfinit
> coulee% zfanon ftp.zsh.org
> > 
> 
> Hm.  This prompt is for nslookup.

Oops. But apart from this: maybe zfanon should use `command
nslookup'. Dunno.

Bye
 Sven

Index: Functions/Misc/nslookup
===================================================================
RCS file: /cvsroot/zsh/zsh/Functions/Misc/nslookup,v
retrieving revision 1.3
diff -u -r1.3 nslookup
--- Functions/Misc/nslookup	2000/05/05 11:10:47	1.3
+++ Functions/Misc/nslookup	2000/05/09 11:52:24
@@ -1,6 +1,11 @@
 # Simple wrapper function for `nslookup'. With completion if you are using
 # the function based completion system.
 
+if [[ $argv[(I)-] -eq 0 && $argv[(I)[^-]*] -ne 0 ]]; then
+  command nslookup "$@"
+  return
+fi
+
 setopt localoptions localtraps completealiases
 
 local tmp line compcontext=nslookup curcontext='nslookup:::' pmpt
@@ -19,7 +24,7 @@
     [[ -z "$pager" ]] && pager="${opager:-more}"
 (( $#pmpt )) || pmpt=(-p '> ')
 
-zpty nslookup nslookup
+zpty nslookup nslookup "$@"
 
 zpty -r nslookup line '*
 > '

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-15915-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 30 20:20:04 2001
Return-Path: <zsh-workers-return-15915-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4200 invoked from network); 30 Sep 2001 20:20:03 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Sep 2001 20:20:03 -0000
Received: (qmail 10918 invoked by alias); 30 Sep 2001 20:19:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15915
Received: (qmail 10902 invoked from network); 30 Sep 2001 20:19:55 -0000
Date: Sun, 30 Sep 2001 16:19:39 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _bts
Message-ID: <20010930161939.A18653@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i

This is completion for Joey Hess's bts script.

Index: Completion/Debian/Command/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Command/.distfiles,v
retrieving revision 1.3
diff -u -r1.3 .distfiles
--- Completion/Debian/Command/.distfiles	2001/05/28 19:23:02	1.3
+++ Completion/Debian/Command/.distfiles	2001/09/30 20:14:22
@@ -1,5 +1,5 @@
 DISTFILES_SRC='
 .distfiles
-_apt          _bug          _dpkg         _dpkg_source  _dupload
+_apt	_bts	_bug	_dpkg         _dpkg_source  _dupload
 _update-alternatives
 '
Index: Completion/Debian/Command/_bts
===================================================================
RCS file: _bts
diff -N _bts
--- /dev/null	Thu May 24 22:33:05 2001
+++ _bts	Sun Sep 30 13:14:22 2001
@@ -0,0 +1,116 @@
+#compdef bts
+local expl
+
+compset -N '[,.]' || compset -n 2
+
+if [[ CURRENT -eq 1 ]];
+then
+ _wanted cmd expl 'bts command' \
+ compadd show bugs close reopen retitle reassign merge unmerge tag \
+         severity forwarded notforwarded help
+else
+ case "$words[1]" in
+ 	show|close|unmerge|notforwarded)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 else
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	bugs)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted package expl 'package' _deb_packages avail
+	  _wanted maintainer expl 'package maintainer' compadd $DEBEMAIL
+	 fi
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	;;
+	reopen)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 elif [[ CURRENT -eq 3 ]];
+	 then
+	  _wanted submitter expl 'new submitter' compadd $DEBEMAIL
+	 else
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	retitle)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 elif [[ CURRENT -eq 3 ]];
+	 then
+	  _wanted submitter expl 'new title' compadd
+	 else
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	reassign)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 elif [[ CURRENT -eq 3 ]];
+	 then
+	  _wanted submitter expl 'new package' _deb_packages avail
+	 else
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	merge)
+	 _wanted bugnum expl 'bug number' compadd
+	 if [[ CURRENT -gt 2 ]];
+	 then
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	tag)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 elif [[ CURRENT -eq 3 ]];
+	 then
+	  _wanted operator expl 'operator' compadd - '+' '-' '='
+	 elif [[ CURRENT -eq 4 ]];
+	 then
+	  _wanted tag expl 'tag' \
+	  compadd patch wontfix moreinfo unreproducible fixed \
+	          security potato woody sid
+	 else
+	  _wanted tag expl 'tag' \
+	  compadd patch wontfix moreinfo unreproducible fixed \
+	          security potato woody sid
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	severity)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 elif [[ CURRENT -eq 3 ]];
+	 then
+	  _wanted severity expl 'severity' \
+	  compadd wishlist minor normal serious important critical grave
+	 else
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	forwarded)
+	 if [[ CURRENT -eq 2 ]];
+	 then
+	  _wanted bugnum expl 'bug number' compadd
+	 elif [[ CURRENT -eq 3 ]];
+	 then
+	  _wanted upstream expl 'upstream email' compadd
+	 else
+	  _wanted sep expl 'separator' compadd -S ' ' , .
+	 fi
+	;;
+	help)
+	;&
+	*) _wanted sep expl 'separator' compadd -S ' ' , .
+	;;
+ esac
+fi


From zsh-users-return-14804-mason-zsh=primenet.com.au@zsh.org Sun Feb 07 02:58:35 2010
Return-Path: <zsh-users-return-14804-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10890 invoked by alias); 7 Feb 2010 02:58:35 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14804
Received: (qmail 3011 invoked from network); 7 Feb 2010 02:58:23 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100206185803.ZM16054@torch.brasslantern.com>
Date: Sat, 06 Feb 2010 18:58:03 -0800
In-reply-to: <787bbe1c1002060409i7363148au8e8c8fc56dc8c63@mail.gmail.com>
Comments: In reply to Slawek Zak <slawek.zak@gmail.com>
 "Re: Backgroun job return code" (Feb  6,  1:09pm)
References: <787bbe1c1002050410k6355e368hb6255bc33754dddf@mail.gmail.com>
	<1265408376-sup-2466@nixos>
	<787bbe1c1002060409i7363148au8e8c8fc56dc8c63@mail.gmail.com>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users <zsh-users@zsh.org>
Subject: Re: Backgroun job return code
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

On Feb 6,  1:09pm, Slawek Zak wrote:
}
} Threading is really not necessary to get this. One idea would be
} calling the TRAPEXIT function for *all* jobs, not only the foreground

No, TRAPEXIT refers to the exit of the shell itself, or of a shell
function, not of a job (not even the foreground job).

What you really want is for TRAPCHLD to have access to the exit status
(and possibly other job data) of the child that caused it to be called.


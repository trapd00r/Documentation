From zsh-workers-return-14221-mason-zsh=primenet.com.au@sunsite.dk Fri May 04 16:22:36 2001
Return-Path: <zsh-workers-return-14221-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4645 invoked from network); 4 May 2001 16:22:35 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 May 2001 16:22:35 -0000
Received: (qmail 18479 invoked by alias); 4 May 2001 16:22:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14221
Received: (qmail 18454 invoked from network); 4 May 2001 16:22:26 -0000
X-VirusChecked: Checked
Sender: kiddleo@cav.logica.co.uk
Message-ID: <3AF2D6E4.7FCCFD98@u.genie.co.uk>
Date: Fri, 04 May 2001 17:20:52 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.76 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: problem with _arguments exclusion lists
References: <200104261435.QAA05286@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:
> 
> > [[ -n $PREFIX$SUFFIX && "$PREFIX$SUFFIX" != $~1 ]] && return 1
> 
> If we do that, no options will be completed after, e.g. `pine -c' (with
> your patch), because then the action returned zero.

You're right. I got mixed up. I still don't like that last line in
_guard though. I think that maybe when _guard returns 0, matching
options should still be offered so a -c3nf option could be matched and
options would be offered after pine -c without that last line in _guard.
The important original point was really what happens when _guard returns
1 and that is now right.

Apart from the minor point above, I am now happy that this all works so
thanks Sven. Sorry for being slow about replying to this last e-mail

> I admit that I never thought about using this in a normal-argument spec
> (non-option-argument).  Isn't that already covered enough by the normal
> behaviour of _arguments?  I.e., using some other action for that
> argument that displays the message and handles the colon (I don't know
> how this argument has to look like...).

It can't really be handled by anything else unless there is a specific
maximum to X display numbers allowing us to add all possibilities.
_guard is actually particularly valuable in the non-option argument case
because before the recent changes options would not complete. The
problem really is that the _guard patterns have to match fully, not
partially: _vnc can be fixed by using the pattern (|:[0-9]#) which I'll
commit later if _guard stays as it is.

Oliver


_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


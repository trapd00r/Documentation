From zsh-workers-return-15606-mason-zsh=primenet.com.au@sunsite.dk Wed Aug 08 17:23:41 2001
Return-Path: <zsh-workers-return-15606-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16930 invoked from network); 8 Aug 2001 17:23:40 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Aug 2001 17:23:40 -0000
Received: (qmail 24046 invoked by alias); 8 Aug 2001 17:23:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15606
Received: (qmail 24034 invoked from network); 8 Aug 2001 17:23:33 -0000
Sender: kiddleo
Message-ID: <3B717595.3294D6EC@u.genie.co.uk>
Date: Wed, 08 Aug 2001 18:23:33 +0100
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.76 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: new and updated completions
References: <200108080719.JAA04358@beta.informatik.hu-berlin.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven Wischnowsky wrote:
> 
> Yes, here is the patch.  It adds the -w option to _values which means
> that it will look at all words on the line.

Cheers.

> >  I'm not sure whether
> > there shouldn't be exclusions between bs and ibs/obs for dd but as the
> > exclusions don't work here, I didn't worry.
> 
> You can now start to worry ;-)

There are inconsistencies between different variants of UNIX as to how a
mixture of bs and ibs/obs is handled. It doesn't make a great deal of
sense to mix them and it is generally good to cut down the number of
completions so I've put the exclusions in. I've also added exclusions
for the conversion types.

Oliver

Index: Completion/Unix/Command/_dd
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_dd,v
retrieving revision 1.4
diff -u -r1.4 _dd
--- Completion/Unix/Command/_dd 2001/08/08 07:20:57     1.4
+++ Completion/Unix/Command/_dd 2001/08/08 17:19:31
@@ -1,16 +1,17 @@
 #compdef dd
 
-local opts
-
 _values -w 'option' \
   'if[specify input file]:input file:_tilde_files' \
   'of[specify output file]:output file:_tilde_files' \
-  'ibs[input block size]:block size (bytes)' \
-  'obs[output block size]:block size (bytes)' \
-  'bs[block size]:block size (bytes)' \
+  '(bs)ibs[input block size]:block size (bytes)' \
+  '(bs)obs[output block size]:block size (bytes)' \
+  '(ibs obs)bs[block size]:block size (bytes)' \
   'cbs[conversion buffer size]:buffer size (bytes)' \
   'skip[input blocks initially skipped]:blocks' \
   'seek[output blocks initially skipped]:blocks' \
   'files[specify number of input files to copy and concatenate]:number of files' \
   'count[number of input blocks to copy]:blocks' \
-  'conv[specify conversions to apply]:conversion:_values -s , "conversion" ascii ebcdic ibm block unblock lcase ucase swab noerror sync'
+  'conv[specify conversions to apply]:conversion:_values -s , conversion
+    "(ebcdic ibm)ascii" "(ascii ibm)ebcdic" "(ascii ebcdic)ibm"
+    "(unblock)block" "(block)unblock"
+    "(ucase)lcase" "(lcase)ucase" swab noerror sync'


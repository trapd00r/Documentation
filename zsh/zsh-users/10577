From zsh-users-return-10577-mason-zsh=primenet.com.au@sunsite.dk Thu Aug 03 16:22:16 2006
Return-Path: <zsh-users-return-10577-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14166 invoked from network); 3 Aug 2006 16:22:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Aug 2006 16:22:12 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 14468 invoked from network); 3 Aug 2006 16:22:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Aug 2006 16:22:05 -0000
Received: (qmail 10439 invoked by alias); 3 Aug 2006 16:21:56 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10577
Received: (qmail 10429 invoked from network); 3 Aug 2006 16:21:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Aug 2006 16:21:56 -0000
Received: (qmail 13305 invoked from network); 3 Aug 2006 16:21:56 -0000
Received: from cluster-d.mailcontrol.com (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 3 Aug 2006 16:21:55 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly32d.srv.mailcontrol.com (MailControl) with ESMTP id k73GK1ew012889
	for <zsh-users@sunsite.dk>; Thu, 3 Aug 2006 17:21:51 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 3 Aug 2006 17:16:18 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.4/8.13.4) with ESMTP id k73GGIRB028009
	for <zsh-users@sunsite.dk>; Thu, 3 Aug 2006 17:16:18 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.4/8.13.4/Submit) with ESMTP id k73GGIcT028006
	for <zsh-users@sunsite.dk>; Thu, 3 Aug 2006 17:16:18 +0100
Message-Id: <200608031616.k73GGIcT028006@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: Turn off completion of users 
In-reply-to: <20060803155512.GC1118@roadrunner.aventurien.local> 
References: <20060803155512.GC1118@roadrunner.aventurien.local>
Comments: In-reply-to Ulrich Spoerlein <uspoerlein@gmail.com>
   message dated "Thu, 03 Aug 2006 17:55:12 +0200."
Date: Thu, 03 Aug 2006 17:16:18 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 03 Aug 2006 16:16:18.0761 (UTC) FILETIME=[26F95390:01C6B718]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-04-01 (www.mailcontrol.com) on 10.68.0.142

Ulrich Spoerlein wrote:
> There is a user 'proxy' on my system, when I now try to 'cd' into a
> directory, let's call it 'profiles' the file/dir completion will offer
> me 'proxy' as an alternative.

This is because of the option "cdablevars".  This makes it possible for
"cd user" to behave the same as "cd ~user"; it works for user
directories and named directories (i.e. where ~var behaves like $var)
alike, since those deliberately have the same behaviour.  If you're not
using that, you can "unsetopt cdablevars".

If you want to keep the option but disable completion of relevant
directories, you will need to tweak the code:  find the _cd completer in
your $fpath,

print $^fpath/_cd(N)

and edit it or copy and edited version earlier in the $fpath.  The bit
you want to get rid of is around line 47, the line beginning alt=:

    if [[ -o cdablevars && -n "$PREFIX" && "$PREFIX" != <-> ]]; then
      if [[ "$PREFIX" != */* ]]; then
        alt=( "$alt[@]" 'named-directories: : _tilde' )
      else

Simply commenting out that single line should probably be enough.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


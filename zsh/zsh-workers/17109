From zsh-workers-return-17109-mason-zsh=primenet.com.au@sunsite.dk Thu May 09 15:05:58 2002
Return-Path: <zsh-workers-return-17109-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23654 invoked from network); 9 May 2002 15:05:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 May 2002 15:05:57 -0000
Received: (qmail 3893 invoked by alias); 9 May 2002 15:05:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17109
Received: (qmail 3881 invoked from network); 9 May 2002 15:05:49 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: travis@jedi.net
Cc: zsh-workers@sunsite.dk
Subject: Re: Compile errors for zsh 4.0.4 on Aix  4.3.3
In-Reply-To: <20020509090819.A10978@yoda.jedi.net>
References: <20020509090819.A10978@yoda.jedi.net>
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Mailer: Ximian Evolution 1.0.3-1mdk 
Date: 09 May 2002 19:05:35 +0400
Message-Id: <1020956741.26762.12.camel@localhost.localdomain>
Mime-Version: 1.0


=F7 =FE=D4=D7, 09.05.2002, =D7 18:08, travis@jedi.net =
=CE=C1=D0=C9=D3=C1=CC:
> The Etc/MACHINES file said you want more info on this error.
> Here it is.  I have attached two of the relevant files.
> Please let me know if you need more.
>=20
> make[3]: Entering directory =
`/home/travis/aixbin/zsh-4.0.4/Src/Modules'
> cc -qlanglvl=3Dansi -c -I.  -DHAVE_CONFIG_H -O  -o parameter.o =
parameter.c
> echo '' parameter.o | sed 's" " Modules/"g' >> =
../../Src/stamp-modobjs.tmp
> cc -qlanglvl=3Dansi -c -I.  -DHAVE_CONFIG_H -O  -o termcap.o =
termcap.c
> "termcap.c", line 71.13: 1506-334 (S) Identifier boolcodes has =
already been defined on line 1342 of "/usr/include/term.h".
>

Thank you for feedback but unfortunately it is not the info that helps.
It appears exactly the problem as mentioned in Etc/MACHINES - when
configure tests for boolcodes & Co it does not find them  (because they
are missing in library or at least not exported) so it decides to use
local versions. And this clashes with declaration in term.h. What was
meant was some hint how to detect this condition.

Proper way to fix it would be

- use something like _zsh_boolcodes internally
- check for both declaration and availablility
- on well-behaving systems simply do #define _zsh_boolcodes boolcodes
- on bad systems leave _zsh_boolcodes as local definition.

Unfortunately (proper) test for declaration is missing in autoconf 2.13
and honestly speaking I am reluctant to backport it from autoconf 2.5x.
If anybody feels like doing it - he is welcome.

And I know that current 4.0 maintainer is reluctant to forget 2.13
compatibility :-)

-andrej

_PLEASE_ next time when you send 1000+ lines to list at least compress
them. Much better is first ask if this is really needed.


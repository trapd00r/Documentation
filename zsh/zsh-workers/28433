From zsh-workers-return-28433-mason-zsh=primenet.com.au@zsh.org Tue Nov 23 11:09:05 2010
Return-Path: <zsh-workers-return-28433-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2943 invoked by alias); 23 Nov 2010 11:09:05 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28433
Received: (qmail 24614 invoked from network); 23 Nov 2010 11:09:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Tue, 23 Nov 2010 11:08:54 +0000
From: Peter Stephenson <Peter.Stephenson@csr.com>
To: zsh-workers@zsh.org
Subject: Re: zsh froze under Mac OS X
Message-ID: <20101123110854.45b62645@pwslap01u.europe.root.pri>
In-Reply-To: <101122073902.ZM13038@torch.brasslantern.com>
References: <20101122144943.GA1727@prunille.vinc17.org>
	<101122073902.ZM13038@torch.brasslantern.com>
Organization: Cambridge Silicon Radio
X-Mailer: Claws Mail 3.7.6 (GTK+ 2.20.1; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 23 Nov 2010 11:08:54.0564 (UTC) FILETIME=[D128F640:01CB8AFE]
X-Scanned-By: MailControl A_10_80_00 (www.mailcontrol.com) on 10.71.0.127

On Mon, 22 Nov 2010 07:39:00 -0800
Bart Schaefer <schaefer@brasslantern.com> wrote:
> On Nov 22,  3:49pm, Vincent Lefevre wrote:
> }
> } Call graph:
> }             993 zexit
> }               993 sourcehome
> }                 993 source
> }                   993 loop
> 
> This indicates that it's reading your .zlogout file.  Anything there
> that could account for the behavior?

Obviously we need to see what it's executing to get further.  The
information in the static points in input.c, inbuf and inbufptr, ought
to have been revealing.  Could there be .zwc files involved?

Strange things can happen if the file the shell is executing changes
under it, but the implication here is it started looking at the logout
file and immediately ran into problems, which sounds different.

> This ...
> 
> }                                     2 exalias
> }                                       1 exalias
> }                                       1 gethashnode
> }                                         1 gethashnode
> 
> ... makes me suspect you've got a recursively-expanding alias
> involved, but that's much less certain than that it's .zlogout
> related.

I don't know exactly what the numbers mean, but they're probably
something like the number of times this was called.  This suggests to me
it's only got here once, so it's unlikely to be a key part of the
problem.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-workers-return-6013-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Apr 13 10:39:48 1999
Return-Path: <zsh-workers-return-6013-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5818 invoked from network); 13 Apr 1999 10:39:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Apr 1999 10:39:47 -0000
Received: (qmail 6962 invoked by alias); 13 Apr 1999 10:39:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6013
Received: (qmail 6955 invoked from network); 13 Apr 1999 10:39:28 -0000
Date: Tue, 13 Apr 1999 12:39:26 +0200 (MET DST)
Message-Id: <199904131039.MAA04703@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Tue, 13 Apr 1999 13:56:57 +0400
Subject: RE: PATCH: matching in the new completion system


Andrej Borsenkow wrote:

> bor@itsrm2:/tools/src/zsh-3.1.5-pws-14%> ./configure --pre=/to<TAB>
> bor@itsrm2:/tools/src/zsh-3.1.5-pws-14%> ./configure /tools/

Yup, forgot to propagate `I{PRE,SUF}FIX'.

Bye
 Sven

diff -u oc/Core/_path_files Completion/Core/_path_files
--- oc/Core/_path_files	Mon Apr 12 11:09:16 1999
+++ Completion/Core/_path_files	Tue Apr 13 12:34:15 1999
@@ -276,13 +276,13 @@
 	  compadd -Uf -p "$linepath$testpath" -s "/${tmp3#*/}" \
 	          -W "$prepath$realpath$testpath" "$ignore[@]" \
 		  "$addpfx[@]" "$addsfx[@]" "$remsfx[@]" \
-		  "$group[@]" "$expl[@]" \
+		  "$group[@]" "$expl[@]" -i "$IPREFIX" -I "$ISUFFIX" \
 		  - "${(@)tmp1%%/*}"
 	else
 	  compadd -Uf -p "$linepath$testpath" \
 	          -W "$prepath$realpath$testpath" "$ignore[@]" \
 		   "$addpfx[@]" "$addsfx[@]" "$remsfx[@]" \
-		   "$group[@]" "$expl[@]" \
+		   "$group[@]" "$expl[@]" -i "$IPREFIX" -I "$ISUFFIX" \
 		   - "$tmp1[@]"
 	fi
       else
@@ -291,7 +291,7 @@
 	    compadd -Uf -p "$linepath$testpath" -s "/${i#*/}" \
 		    -W "$prepath$realpath$testpath" "$ignore[@]" \
 		    "$addpfx[@]" "$addsfx[@]" "$remsfx[@]" \
-		    "$group[@]" "$expl[@]" \
+		    "$group[@]" "$expl[@]" -i "$IPREFIX" -I "$ISUFFIX" \
 		    - "${i%%/*}"
 	  done
         else
@@ -299,7 +299,7 @@
 	    compadd -Uf -p "$linepath$testpath" \
 		    -W "$prepath$realpath$testpath" "$ignore[@]" \
 		    "$addpfx[@]" "$addsfx[@]" "$remsfx[@]" \
-		    "$group[@]" "$expl[@]" \
+		    "$group[@]" "$expl[@]" -i "$IPREFIX" -I "$ISUFFIX" \
 		    - "$i"
 	  done
         fi
@@ -329,7 +329,7 @@
     compadd -Uf -p "$linepath$testpath" \
 	    -W "$prepath$realpath$testpath" "$ignore[@]" \
 	    "$addpfx[@]" "$addsfx[@]" "$remsfx[@]" \
-	    "$group[@]" "$expl[@]" \
+	    "$group[@]" "$expl[@]" -i "$IPREFIX" -I "$ISUFFIX" \
 	    - "$tmp1[@]"
   fi
 done

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


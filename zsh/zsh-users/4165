From zsh-users-return-4165-mason-zsh=primenet.com.au@sunsite.dk Thu Aug 23 09:49:52 2001
Return-Path: <zsh-users-return-4165-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18752 invoked from network); 23 Aug 2001 09:49:51 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Aug 2001 09:49:51 -0000
Received: (qmail 3121 invoked by alias); 23 Aug 2001 09:49:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4165
Received: (qmail 3110 invoked from network); 23 Aug 2001 09:49:21 -0000
X-VirusChecked: Checked
Sender: kiddleo@pag.logica.co.uk
Message-ID: <3B84D18C.19BA712@yahoo.co.uk>
Date: Thu, 23 Aug 2001 10:49:00 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.76 [en] (X11; U; SunOS 5.7 sun4u)
X-Accept-Language: en
MIME-Version: 1.0
To: Keijiro Ehara <popo@sfc.wide.ad.jp>
CC: zsh-users@sunsite.dk
Subject: Re: How to complete backquote, etc. using compsys?
References: <20010821204255.64C6417403@puel.sfc.wide.ad.jp>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Keijiro Ehara wrote:

> I was using compctl before but now i decided to use compsys.
> When i use a little modified zsh-4.0.2/StartupFiles/zshrc as ~/.zshrc,
> my zsh won't complete backquote and etc. like below.
> 
> pote% kill -HUP `cat /var/run/in[TAB]
> pote% kill -HUP `cat /var/run/inetd.pid
> 
> With compctl, i got
> pote% kill -HUP `cat /var/run/inetd.pid`
> and, i expect it.
> 
> Is it just because i omit some option?

No, you didn't miss an option. The new completion system just doesn't
complete the backquote.
Incidentally, you could also write your above command as:
  kill -HUP $(</var/run/inetd.pid)

Again, here it won't complete the closing bracket I'm afraid. $( ... )
is like backquotes but has some advantages and with the initial <, it
works like you used the cat command.

Suffix handling is the next area where changes are likely to take place
with the new completion system. This will probably take the form of
moving more of the context handling to shell code and allowing it to
handle more syntax constructs. At the moment, I don't think the shell
code can tell if it is in $( .. ) and we can't complete things like
history modifiers and glob qualifiers. You could probably actually
modify shell code (probably _main_complete) to complete the backquote
though.

Oliver

_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


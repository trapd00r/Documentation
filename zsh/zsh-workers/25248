From zsh-workers-return-25248-mason-zsh=primenet.com.au@sunsite.dk Thu Jun 26 15:07:15 2008
Return-Path: <zsh-workers-return-25248-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17433 invoked from network); 26 Jun 2008 15:07:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Jun 2008 15:07:03 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 5574 invoked from network); 26 Jun 2008 15:06:59 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Jun 2008 15:06:59 -0000
Received: (qmail 12879 invoked by alias); 26 Jun 2008 15:06:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25248
Received: (qmail 12868 invoked from network); 26 Jun 2008 15:06:55 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 26 Jun 2008 15:06:55 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 8634D80524FA
	for <zsh-workers@sunsite.dk>; Thu, 26 Jun 2008 17:06:51 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly12g.srv.mailcontrol.com (MailControl) with ESMTP id m5QF6YiI002376
	for <zsh-workers@sunsite.dk>; Thu, 26 Jun 2008 16:06:42 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 26 Jun 2008 16:06:35 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m5QF6apa019143
	for <zsh-workers@sunsite.dk>; Thu, 26 Jun 2008 16:06:36 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m5QF6aCd019139
	for <zsh-workers@sunsite.dk>; Thu, 26 Jun 2008 16:06:36 +0100
Message-Id: <200806261506.m5QF6aCd019139@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: anonymous functions (no documentation yet)
In-reply-to: <9646.1214491732@thecus>
References: <18441.1214488302@csr.com> <9646.1214491732@thecus>
Comments: In-reply-to Oliver Kiddle <okiddle@yahoo.co.uk>
   message dated "Thu, 26 Jun 2008 16:48:52 +0200."
Date: Thu, 26 Jun 2008 16:06:36 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 26 Jun 2008 15:06:35.0866 (UTC) FILETIME=[3A0AF3A0:01C8D79E]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.71.0.122
X-Virus-Scanned: ClamAV 0.92.1/7570/Thu Jun 26 16:16:49 2008 on bifrost
X-Virus-Status: Clean

Oliver Kiddle wrote:
> Peter wrote:
> > Note this does not affect cases like
> > 
> >   $emptyvariable() { ... }
> 
> Out of interest, how does it affect:
>   ""() { ... }

That also turns into an empty argument list that is ignored.  I would
have to check why since my first guess was it would produce an invalid
empty function name.

> I partly ask because in the same way that
>   f g() { ... }
> defines two functions,
>   f ''() { ... }
> 
> might have the effect of defining a function f and running it
> immediately. And then you might write: f '' ''() { ... } and so on.

That ought to be a relatively straightforward addition, I think, subject
to the query above.

> What effect does all this have on the positional parameters?

Positional parameters from the surrounding area would be hidden and the
local parameter list empty.  I could easily copy them in so that they
could be used and modified without affecting the calling environment.

> Given that this feature will be seen as similar to plain { ... },
> people might find it confusing that redirections don't work. I know
> that you already know this but in other shells, redirections on function
> definitions are allowed and form part of the function.

Actually redirections work OK... the reason they don't work as they do
in other shells is because they do work on the definition, so it behaves
very much like { ... } in this respect.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


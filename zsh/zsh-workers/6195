From zsh-workers-return-6195-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 03 09:55:28 1999
Return-Path: <zsh-workers-return-6195-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29906 invoked from network); 3 May 1999 09:55:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 May 1999 09:55:26 -0000
Received: (qmail 16013 invoked by alias); 3 May 1999 09:33:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6195
Received: (qmail 16006 invoked from network); 3 May 1999 09:33:54 -0000
Date: Mon, 3 May 1999 11:33:52 +0200 (MET DST)
Message-Id: <199905030933.LAA29158@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: Command examples


This adds `_expand_word' which just uses `_main_complete' and the
`_expand' completer.

It also changes `_correct_word' to prefer config keys starting with
`correctword_' over those with `correct_', because I'm still trying
`correct_insert' but don't want that with `correct_word'.

Btw `_correct_word' and `_correct_filename' use the same key, is this
intentional?

Bye
 Sven

diff -u ooc/Commands/_correct_word Completion/Commands/_correct_word
--- ooc/Commands/_correct_word	Mon May  3 11:07:38 1999
+++ Completion/Commands/_correct_word	Mon May  3 11:29:07 1999
@@ -3,10 +3,23 @@
 # Simple completion front-end implementing spelling correction.
 # The maximum number of errors is set quite high, and
 # the numeric prefix can be used to specify a different value.
+#
+# If configurations keys with the prefix `correctword_' are
+# given they override those starting with `correct_'.
 
 local oca="$compconfig[correct_accept]"
-compconfig[correct_accept]=6n
+local oco="$compconfig[correct_original]"
+local ocp="$compconfig[correct_prompt]"
+local oci="$compconfig[correct_insert]"
+
+compconfig[correct_accept]="${compconfig[correctword_accept]-6n}"
+compconfig[correct_original]="${compconfig[correctword_original]-$oco}"
+compconfig[correct_prompt]="${compconfig[correctword_prompt]-$ocp}"
+compconfig[correct_insert]="${compconfig[correctword_insert]}"
 
 _main_complete _correct
 
-compconfig[correct_accept]=$oca
+compconfig[correct_accept]="$oca"
+compconfig[correct_original]="$oco"
+compconfig[correct_prompt]="$ocp"
+compconfig[correct_insert]="$oci"
diff -u ooc/Commands/_expand_word Completion/Commands/_expand_word
--- ooc/Commands/_expand_word	Mon May  3 11:28:06 1999
+++ Completion/Commands/_expand_word	Mon May  3 11:30:02 1999
@@ -0,0 +1,26 @@
+#compdef -k complete-word \C-xe
+
+# Simple completion front-end implementing expansion.
+#
+# If configurations keys with the prefix `expandword_' are
+# given they override those starting with `expand_'.
+
+local oes="$compconfig[expand_substitute]"
+local oeg="$compconfig[expand_glob]"
+local oem="$compconfig[expand_menu]"
+local oeo="$compconfig[expand_original]"
+local oep="$compconfig[expand_prompt]"
+
+compconfig[expand_substitute]="${compconfig[expandword_substitute]}"
+compconfig[expand_glob]="${compconfig[expandword_glob]-$oeg}"
+compconfig[expand_menu]="${compconfig[expandword_menu]-$oem}"
+compconfig[expand_original]="${compconfig[expandword_original]-$oeo}"
+compconfig[expand_prompt]="${compconfig[expandword_prompt]-$oep}"
+
+_main_complete _expand
+
+compconfig[expand_substitute]="$oes"
+compconfig[expand_glob]="$oeg"
+compconfig[expand_menu]="$oem"
+compconfig[expand_original]="$oeo"
+compconfig[expand_prompt]="$oep"

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


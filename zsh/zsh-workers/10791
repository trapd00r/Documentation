From zsh-workers-return-10791-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Apr 17 11:15:09 2000
Return-Path: <zsh-workers-return-10791-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6290 invoked from network); 17 Apr 2000 11:15:08 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Apr 2000 11:15:08 -0000
Received: (qmail 17110 invoked by alias); 17 Apr 2000 11:15:01 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10791
Received: (qmail 17049 invoked from network); 17 Apr 2000 11:14:57 -0000
To: zsh-workers@sunsite.auc.dk
Path: mason
From: mason@primenet.com.au (Geoff Wing)
X-Newsgroups: lists.zsh.workers
Subject: Re: Patching (was: Re: PATCH: AIX dep.&doc fix; development guidelines)
Date: 17 Apr 2000 11:14:48 GMT
Organization: PrimeNet Computer Consultants
Lines: 51
Distribution: local
Message-ID: <slrn8flsh7.5ip.mason@coral.primenet.com.au>
References: Peter Stephenson's message of Fri, 07 Apr 2000 21:04:54 +0100 <200004100726.JAA26191@beta.informatik.hu-berlin.de>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 955970088 6249 203.43.15.2 (17 Apr 2000 11:14:48 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: 17 Apr 2000 11:14:48 GMT
User-Agent: slrn/0.9.6.2 (NetBSD)

Sven Wischnowsky <wischnow@informatik.hu-berlin.de> typed:
:I've had an idea at the weekend, but don't know if this is possible
:with a (remote) CVS server, so I'll have to ask some questions...
:
:Using `loginfo', it should be possible to make the CVS server give out 
:numbers for the patches, err... for the commits. If the program
:executed from loginfo prints something, will that be displayed on the
:terminal where one does the commit?

With :pserver: it will.  I presume it also will with ssh.

:With a local repository this seems 
:to work. If it works with remote CVS, too, we probably could make the
:loginfo-program get the number and print, at the end of the
:commit-output (or somewhere in-between), something like `Commit number xxx'.

Yes, though if you want a sequence then you'll need to have it do its
own locking on whatever file (presumably kept in CVSROOT/) contains
the number.

:Next question: could loginfo (or some of the other automatically
:executed things) append that number to the log-message given to the
:commit? So that we also have the number in the messages stored in the
:repository.

Not within the normal CVS pathway.  The only CVSROOT/* file which can
modify the checkin is cvswrappers (unless you have one of the others
spawn some program which does it own hacking - very dangerous) and
cvswrappers modifies the _file_ not the log message.  And hope nobody
makes drastic changes with ``cvs admin -m....'' independent of the
ChangeLog; probably not a problem (though IIRC in one or more versions
of cvs you could damage your file/s using that - or maybe that was
``cvs admin -o'' and we hope that nobody is going to use that).

:And finally, if all the above works, the CVS server has the
:log-message from the user, the patch number and it knows the changed
:files, so: could it change ChangeLog automatically?

I can't think of any elegant way to do so (on the remote CVS server)
since you have no properly safe work space (except maybe /{,usr/,var/}tmp).
You could have ChangeLog centrally managed off-site, e.g. have loginfo
mail in some special format to, say, orbital/shell1 and reconstructed
there into something which can be automagically prepended to ChangeLog.
If someone gets really, really sick of updating ChangeLog they can look
into that :-)

Regards,
-- 
Geoff Wing : <gcw@pobox.com>     Work URL: http://www.primenet.com.au/
Rxvt Stuff : <gcw@rxvt.org>      Ego URL : http://pobox.com/~gcw/
Zsh Stuff  : <gcw@zsh.org>       Phone   : (Australia) 0413 431 874


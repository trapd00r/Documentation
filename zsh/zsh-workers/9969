From zsh-workers-return-9969-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 02 17:52:59 2000
Return-Path: <zsh-workers-return-9969-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21555 invoked from network); 2 Mar 2000 17:52:58 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Mar 2000 17:52:58 -0000
Received: (qmail 3749 invoked by alias); 2 Mar 2000 17:52:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9969
Received: (qmail 3721 invoked from network); 2 Mar 2000 17:52:49 -0000
Subject: Re: PATCH: wordcode files
In-Reply-To: <1000302164323.ZM15688@candle.brasslantern.com> from Bart Schaefer
 at "Mar 2, 2000 04:43:23 pm"
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Date: Thu, 2 Mar 2000 17:52:44 +0000 (GMT)
CC: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>, 
 zsh-workers@sunsite.auc.dk
X-Mailer: ELM [version 2.4ME+ PL66 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id: <E12QZmG-0005xo-00@crucigera.fysh.org>
From: Zefram <zefram@fysh.org>

Bart Schaefer wrote:
>How does that help with the situation where I have a directory named
>"foo" and a file named "foo.zwc" both within the same parent directory?

One logical way to handle this (if .../foo is in $fpath) is that the
digest file is treated as a cache of the directory in the same way that
individual wordcode files cache individual text files.  So if autoloading
`bar' from that $fpath entry, zsh would date-compare (a) .../foo/bar (text
file), (b) .../foo/bar.zwc (individual wordcode), and (c) .../foo.zwc
(entry for `bar' in digest file), and use the newest of the three.

I'm not necessarily recommending this, it's just something to think about.

-zefram


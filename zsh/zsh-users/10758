From zsh-users-return-10758-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 25 11:03:56 2006
Return-Path: <zsh-users-return-10758-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3812 invoked from network); 25 Sep 2006 11:03:54 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Sep 2006 11:03:54 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 28050 invoked from network); 25 Sep 2006 11:03:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Sep 2006 11:03:43 -0000
Received: (qmail 26621 invoked by alias); 25 Sep 2006 11:03:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10758
Received: (qmail 13815 invoked from network); 25 Sep 2006 09:53:08 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 Sep 2006 09:53:08 -0000
Received: (qmail 50071 invoked from network); 25 Sep 2006 09:53:07 -0000
Received: from barclay.textdrive.com (207.7.108.37)
  by a.mx.sunsite.dk with SMTP; 25 Sep 2006 09:53:06 -0000
Received: from localhost (phoenix.flamingpenguin.net [82.152.56.25])
	by barclay.textdrive.com (Postfix) with ESMTP id F39E74B158
	for <zsh-users@sunsite.dk>; Mon, 25 Sep 2006 09:53:37 +0000 (GMT)
Date: Mon, 25 Sep 2006 10:53:47 +0100
From: Nick Stenning <nick@whiteink.com>
To: zsh-users@sunsite.dk
Subject: Functions, sourcing and compinit: function definition file not found.
Message-ID: <20060925095347.GD2643@phoenix.flamingpenguin.net>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="T7mxYSe680VjQnyC"
Content-Disposition: inline
X-Operating-System: FreeBSD/6.2-PRERELEASE (i386)
X-Crypto: gpg (GnuPG) 1.4.5 http://www.gnupg.org
X-GPG-Key: http://static.whiteink.com/gpg/nick_public_key.txt
X-GPG-Fingerprint: 67B9 A728 3F84 6086 5A79  D4F1 72D9 A10F 320D 3DEA
User-Agent: mutt-ng/devel-r804 (FreeBSD)


--T7mxYSe680VjQnyC
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi all,

I'm having a bit of a weird problem here that I hope you can help me
with. I've got a fairly simple function called "reload" which looks like
this:
  =20
	if [[ "$#*" -eq 0 ]]; then
		source ${zdotdir}/.zshenv
		source ${zdotdir}/.zshrc
	else
		local fn
		for fn in "$@"; do
			unfunction $fn
			autoload -U $fn
		done
	fi

The second half works just fine: calling "reload some_function" works as
expected, but the first half throws a funny error:

   /home/borior/.zshrc:106: compinit: function definition file not found

Now line 106 looks a bit like this:

    102  zshrc_load_status "completions"
    103
    104  # Load completions
    105  autoload -U compinit
    106  compinit -u

The really odd part of this story comes when I tell you that=20
"source ${zdotdir}/.zshrc" works absolutely fine from the shell. No
error from compinit whatsoever.

This is zsh 4.3.2 (i386-portbld-freebsd6.1), but IIRC it's replicable on
other systems and versions of zsh.

Any ideas would be much appreciated (especially if you could CC to me
directly, as I'm not subscribed to the ML).

Regards,
Nick


--T7mxYSe680VjQnyC
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (FreeBSD)

iD8DBQFFF6crctmhDzINPeoRAkWjAJ93ZVDikYixlDXvUObppGTQMT5nrgCgxyJk
7K0B3XNEh13E1Pjq/hkXra8=
=hT0M
-----END PGP SIGNATURE-----

--T7mxYSe680VjQnyC--


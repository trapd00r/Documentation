From zsh-workers-return-20494-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 17 04:41:32 2004
Return-Path: <zsh-workers-return-20494-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24616 invoked from network); 17 Oct 2004 04:41:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Oct 2004 04:41:31 -0000
Received: (qmail 56220 invoked from network); 17 Oct 2004 04:41:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Oct 2004 04:41:25 -0000
Received: (qmail 3776 invoked by alias); 17 Oct 2004 04:41:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20494
Received: (qmail 3760 invoked from network); 17 Oct 2004 04:41:09 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Oct 2004 04:41:09 -0000
Received: (qmail 55854 invoked from network); 17 Oct 2004 04:40:10 -0000
Received: from moonbase.zanshin.com (64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 17 Oct 2004 04:40:09 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.13.1/8.13.1) with ESMTP id i9H4e75k031405
	for <zsh-workers@sunsite.dk>; Sat, 16 Oct 2004 21:40:07 -0700
Date: Sat, 16 Oct 2004 21:40:07 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-workers@sunsite.dk
To: zsh-workers@sunsite.dk
Subject: Non-controversial patch?
Message-ID: <Pine.LNX.4.61.0410161605440.8058@toltec.zanshin.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

I'd like to change _generic so that any positional parameters are passed 
on through to _main_complete.  This would be transparent to anyone who is 
already using _generic.

Among other things, this allows one to do

  zle -C call-completer complete-word _generic

and then e.g.

  foo() { zle call-completer _foo }
  zle -N foo

which I think is marginally more comprehensible than

  zle -C foo complete-word _generic
  zstyle ':completion:foo:*' completer _foo

but perhaps that's just me.

The real reason I want it is so that I can prefix certain other function 
definitions with

  #compdef -k complete-word ^Xx
  if [[ -z "$curcontext" ]]; then
     _generic $0
     return
  fi

and thereby cause assorted zstyles to be applied uniformly.  Yes, I could 
call _main_complete directly there, but the initial $curcontext assigned 
by _generic is still convenient.

(I wonder if _bash_completions might rather call _generic as well, to 
allow different zstyles for bash v. zsh completions?)


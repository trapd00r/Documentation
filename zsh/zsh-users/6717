From zsh-users-return-6717-mason-zsh=primenet.com.au@sunsite.dk Sat Oct 18 16:36:51 2003
Return-Path: <zsh-users-return-6717-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 88 invoked from network); 18 Oct 2003 16:36:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Oct 2003 16:36:51 -0000
Received: (qmail 20298 invoked by alias); 18 Oct 2003 16:36:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6717
Received: (qmail 20247 invoked from network); 18 Oct 2003 16:36:37 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 18 Oct 2003 16:36:37 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.193.203.32] by sunsite.dk (MessageWall 1.0.8) with SMTP; 18 Oct 2003 16:36:36 -0000
Received: from DervishD.pleyades.net (212.Red-80-35-44.pooles.rima-tde.net [80.35.44.212])
	by madrid10.amenworld.com (8.10.2/8.10.2) with ESMTP id h9IGaUY06230
	for <zsh-users@sunsite.dk>; Sat, 18 Oct 2003 18:36:32 +0200
Received: from raul@pleyades.net by DervishD.pleyades.net with local (Exim MTA 2.05)
	  id <1AAtm4-0004od-00>; Sat, 18 Oct 2003 18:17:52 +0200
Date: Sat, 18 Oct 2003 18:17:52 +0200
From: DervishD <raul@pleyades.net>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Can this be done with compctl?
Message-ID: <20031018161752.GB17781@DervishD>
Mail-Followup-To: Zsh Users <zsh-users@sunsite.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
User-Agent: Mutt/1.4i
Organization: Pleyades
User-Agent: Mutt/1.4i <http://www.mutt.org>

    Hi all :))

    I wanted to simulate the bash behaviour of completing command
names if you hit TAB on an empty prompt, and my first try was using
compsys (I'll use compsys for naming the new completion system). I
don't use the provided set of functions (_main_complete based), so I
do something like:

    completer () {
        compadd -a commands -k functions builtins aliases galiases
    }
    zle -C complete expand-or-complete completer
    bindkey "^O" complete

    This is just a test for showing more or less what I want:
obviously a better and more ellaborated solution should be written,
but this is not the point. The question is that I would like to do
something similar with compctl. I've tried, with no success, things
like:

    compctl -T -x 'p[0]' -c - --
    compctl -T -x 'm[0]' -c - --

    or similar commands using empty command names instead of '-T'
(which, BTW, should not be used for that...). It seems that compctl
don't even try to complete if there is not a word in the prompt :??

    Anyone can help?

    Although as I told in the past, default completion (no compsys,
no compctl) fulfills 98% of my needs, and compctl will do for a
couple of commands I want specially completed, I must confess that
compsys is more comfortable for defining some completions, even
without _arguments or things like that.

    Thanks a lot in advance.

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736
http://www.pleyades.net & http://raul.pleyades.net/


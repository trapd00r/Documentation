From zsh-workers-return-22931-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 31 01:38:45 2006
Return-Path: <zsh-workers-return-22931-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26866 invoked from network); 31 Oct 2006 01:38:40 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 31 Oct 2006 01:38:40 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 88458 invoked from network); 31 Oct 2006 01:38:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 31 Oct 2006 01:38:34 -0000
Received: (qmail 4224 invoked by alias); 31 Oct 2006 01:38:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22931
Received: (qmail 4214 invoked from network); 31 Oct 2006 01:38:30 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 31 Oct 2006 01:38:30 -0000
Received: (qmail 88180 invoked from network); 31 Oct 2006 01:38:30 -0000
Received: from nf-out-0910.google.com (64.233.182.188)
  by a.mx.sunsite.dk with SMTP; 31 Oct 2006 01:38:29 -0000
Received: by nf-out-0910.google.com with SMTP id y38so100869nfb
        for <zsh-workers@sunsite.dk>; Mon, 30 Oct 2006 17:38:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=JCPeiO/iTg5Jf8xMW+9CPlOf13AkxG87oCdMfkEa/i958MCh0QEaGXYeNe7IyB8Ra1V79vc9SKmxg4BqFPPyiQsP+2MCvZ8t+QAyqq8Uyhwgd7sFg9YZh49co4qHI/MK3MPrF/qnUoMpMQflWiBTHb6J1fNYd7dzfKLTAxugZJY=
Received: by 10.78.136.9 with SMTP id j9mr5929921hud;
        Mon, 30 Oct 2006 17:38:28 -0800 (PST)
Received: by 10.78.193.14 with HTTP; Mon, 30 Oct 2006 17:38:28 -0800 (PST)
Message-ID: <237967ef0610301738x32c5336fmb46087f6978f1509@mail.gmail.com>
Date: Tue, 31 Oct 2006 02:38:28 +0100
From: "Mikael Magnusson" <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: More crashes in menu complete
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Here are two backtraces, i just did kill <tab> and pressed and
released shift a couple of times, doing complete-word and
reverse-menu-complete and got these two backtraces, the first sort of
sucks because i didn't have debug symbols when it crashed, but i
recompiled with and got at least the source line.

Program terminated with signal 11, Segmentation fault.
#0  0xa7aa6fc5 in singledraw () at complist.c:1787
1787	    g = mgtab[ml1 * columns + mc1];
(gdb) bt
#0  0xa7aa6fc5 in singledraw () at complist.c:1787
#1  0xa7aaa599 in complistmatches (dummy=0xa7ae1850, dat=0x68636170)
at complist.c:333
#2  0xa7adfb07 in list_matches (dummy=0xa7b16fa0, dummy2=0x0) at
compresult.c:2252
#3  0xa7aff5fb in zrefresh () at zle_refresh.c:913
#4  0xa7aac32d in domenuselect (dummy=0xa7ae1814, dat=0xaf994950) at
complist.c:2424
#5  0x080a6c02 in runhookdef (h=0xa7ae1814, d=0xaf994950) at module.c:1868
#6  0xa7acb3b0 in after_complete (dummy=0xa7b16fdc, dat=0x68636170) at
compcore.c:514
#7  0xa7b06d00 in docomplete (lst=0) at zle_tricky.c:854
#8  0xa7b08e2f in completeword (args=0x68636170) at zle_tricky.c:219
#9  0xa7b03079 in completecall (args=0x35393b) at zle_tricky.c:205
#10 0xa7af6575 in execzlefunc (func=0xa7b143b8, args=0xa7b1729c,
set_bindk=0) at zle_main.c:1251
#11 0xa7af6900 in zlecore () at zle_main.c:1007
#12 0xa7af73ec in zleread (lp=0x81042b0, rp=0x8104be8,
flags=1751343472, context=1751343472)
    at zle_main.c:1166
#13 0x0808be04 in inputline () at input.c:277
#14 0x0808c43a in ingetc () at input.c:536
#15 0x08082931 in quietgethist (ev=1751343472) at hist.c:931
#16 0x00000000 in ?? ()


Program terminated with signal 11, Segmentation fault.
#0  0xa7a0bff5 in singledraw () at complist.c:1788
1788	    clprintm(g, mtab[ml1 * columns + mc1], mcc1, ml1, lc1,
(gdb) bt
#0  0xa7a0bff5 in singledraw () at complist.c:1788
#1  0xa7a0f5c9 in complistmatches (dummy=0xa7a46870, dat=0x68636170)
at complist.c:1909
#2  0xa7a44b37 in list_matches (dummy=0xa7a7c000, dummy2=0x0) at
compresult.c:2253
#3  0xa7a6462b in zrefresh () at zle_refresh.c:919
#4  0xa7a1135d in domenuselect (dummy=0xa7a46834, dat=0xaf909fd0) at
complist.c:2395
#5  0x080a6c22 in runhookdef (h=0xa7a46834, d=0xaf909fd0) at module.c:1876
#6  0xa7a303e0 in after_complete (dummy=0xa7a7c03c, dat=0x68636170) at
compcore.c:515
#7  0xa7a6bd30 in docomplete (lst=0) at zle_tricky.c:859
#8  0xa7a6de5f in completeword (args=0x68636170) at zle_tricky.c:232
#9  0xa7a680a9 in completecall (args=0x20302e30) at zle_tricky.c:208
#10 0xa7a5b5a5 in execzlefunc (func=0xa7a79418, args=0xa7a7c2fc,
set_bindk=0) at zle_main.c:1253
#11 0xa7a5b930 in zlecore () at zle_main.c:1019
#12 0xa7a5c41c in zleread (lp=0x81042d0, rp=0x8104c08,
flags=1751343472, context=1751343472)
    at zle_main.c:1173
#13 0x0808be24 in inputline () at input.c:278
#14 0x0808c45a in ingetc () at input.c:214
#15 0x08082951 in ihgetc () at hist.c:240
#16 0x08097cf6 in gettok () at lex.c:628
#17 0x080998c6 in yylex () at lex.c:344
#18 0x080bbb1a in parse_event () at parse.c:451
#19 0x08088c9a in loop (toplevel=1, justonce=0) at init.c:128
#20 0x0808b9d8 in zsh_main (argc=1, argv=0xaf90aa64) at init.c:1334
#21 0x08052dde in main (argc=1751343472, argv=0x68636170) at ./main.c:93


-- 
Mikael Magnusson


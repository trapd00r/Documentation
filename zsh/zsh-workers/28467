From zsh-workers-return-28467-mason-zsh=primenet.com.au@zsh.org Thu Dec 02 00:50:31 2010
Return-Path: <zsh-workers-return-28467-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13385 invoked by alias); 2 Dec 2010 00:50:31 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28467
Received: (qmail 7527 invoked from network); 2 Dec 2010 00:50:29 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at schrab.com designates 208.78.100.134 as permitted sender)
Date: Wed, 1 Dec 2010 19:44:29 -0500
From: Aaron Schrab <aaron@schrab.com>
To: zsh-workers@zsh.org
Subject: Re: _git: Add completion for help subcommand
Message-ID: <20101202004429.GQ4479@pug.qqx.org>
Mail-Followup-To: zsh-workers@zsh.org
References: <1282393263-16767-1-git-send-email-aaron@schrab.com>
 <AANLkTimOcmpFpTrrVMsuvjCR8puCnhoRVsmduci=SP8d@mail.gmail.com>
 <20100827002003.GA8399@pug.qqx.org>
 <AANLkTikK9VE0ToESknTwOVdWT+d-JqNhkveDY1bSf8Ym@mail.gmail.com>
 <20100827231832.GA29397@pug.qqx.org>
 <AANLkTi=njjskXGJFzOTWRzBmU1Gd+gRUALBaGmZ9JHoE@mail.gmail.com>
 <20100828005150.GB29397@pug.qqx.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Disposition: inline
In-Reply-To: <20100828005150.GB29397@pug.qqx.org>
User-Agent: Mutt/1.5.20 (2010-08-04)

At 20:51 -0400 27 Aug 2010, I wrote:
>Revised, and hopefully final, version below.

It doesn't look like this has been committed to the repository yet.  Is 
there some further objection to it, or has it simply been overlooked?

 From e87683251e5c5c5737a118031582ee4500bac4ee Mon Sep 17 00:00:00 2001
From: Aaron Schrab <aaron@schrab.com>
Date: Thu, 19 Aug 2010 19:11:06 -0400
Subject: [PATCH] _git: Add completion for help subcommand

---
  Completion/Unix/Command/_git |   14 ++++++++++++++
  1 files changed, 14 insertions(+), 0 deletions(-)

diff --git a/Completion/Unix/Command/_git b/Completion/Unix/Command/_git
index c394e08..570d08f 100644
--- a/Completion/Unix/Command/_git
+++ b/Completion/Unix/Command/_git
@@ -190,6 +190,7 @@ _git_commands () {
      'fetch:download objects and a head from another repository'
      'gc:cleanup unnecessary files and optimize the local repository'
      'grep:print lines matching a pattern'
+    'help:display help information about git subcommands'
      'init:create empty git object database'
      'log:show commit logs'
      'merge:grand unified merge driver'
@@ -490,6 +491,19 @@ _git-hash-object () {
      '(--stdin):file:_files' && ret=0
  }
+(( $+functions[_git-help] )) ||
+_git-help () {
+  _arguments -S \
+    ':command:_git_commands' \
+    - '(all)' \
+    '(:)'{--all,-a}'[List all available commands]' \
+    - '(format)' \
+    {--man,-m}'[Display help in man page format]' \
+    {--info,-i}'[Display help in info format]' \
+    {--web,-w}'[Display help in web browser]' \
+    && ret=0
+}
+
  (( $+functions[_git-index-pack] )) ||
  _git-index-pack () {
    local -a stdin_arguments
-- 
1.7.0.4


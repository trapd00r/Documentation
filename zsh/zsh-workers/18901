From zsh-workers-return-18901-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 24 10:31:11 2003
Return-Path: <zsh-workers-return-18901-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22677 invoked from network); 24 Jul 2003 10:31:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 24 Jul 2003 10:31:10 -0000
Received: (qmail 10445 invoked by alias); 24 Jul 2003 10:31:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18901
Received: (qmail 10435 invoked from network); 24 Jul 2003 10:31:05 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 24 Jul 2003 10:31:05 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.147.91.148] by sunsite.dk (MessageWall 1.0.8) with SMTP; 24 Jul 2003 10:31:3 -0000
Received: by baptport.math-info.univ-paris4.fr (Postfix, from userid 1000)
	id 3C34328F20; Thu, 24 Jul 2003 12:30:17 +0200 (CEST)
Subject: ogg vorbis completion function
From: baptiste daroussin <daroussi@ece.fr>
To: zsh-workers@sunsite.dk
Content-Type: multipart/mixed; boundary="=-P25JXCHkkAUb1Mek0Ksr"
Message-Id: <1059042616.14971.1.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.0 
Date: 24 Jul 2003 12:30:16 +0200


--=-P25JXCHkkAUb1Mek0Ksr
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi,

I've improved the code for _vorbis I've sent yesterday, using _ogg123
from Nikolai Weibull.

-- 
baptiste daroussin <daroussi@ece.fr>

--=-P25JXCHkkAUb1Mek0Ksr
Content-Disposition: attachment; filename=_vorbis
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; name=_vorbis; charset=ANSI_X3.4-1968

#compdef oggenc ogg123 ogginfo oggdec=20

_advanced_option() {
    _values "options name" \
        'bitrate_average_window[set  the  managed bitrate window to NN seco=
nds.]:number:'\
        'lowpass_frequency[set the lowpass frequency to NN kHz.]:number:'
}
_vorbis (){
    local expl
    case $service in
    oggenc)
        _arguments -C -s \
    {'(--help)-h','(-h)--help'}'[show help]'\
    {'(--raw)-r','(-r)--raw'}'[assume input data is raw little-endian audio=
 data with no header information.]'\
    {'(--raw-bits=3D)-B','(-B)--raw-bits=3D'}'[sets raw mode input sample s=
ize in bits.]:sample size:(8 16)'\
    {'(--raw-chan=3D)-C','(-C)--raw-chan=3D'}'[sets raw mode input number o=
f channels.]:number of channels:'\
    {'(--raw-rate=3D)-R','(-R)--raw-rate=3D'}'[sets raw mode input samplera=
te.]:samplerate:(44100 48000)'\
    '--raw-endianness[sets raw mode endianness]:endianness:(( 0\:big\ endia=
n 1\:little\ endian ))'\
    {'(--quiet)-Q','(-Q)--quiet'}'[quiet mode.]'\
    {'(--bitrate=3D)-b','(-b)--bitrate=3D'}'[sets encoding to the bitrate c=
losest to n (in kb/s).]:bitrate in kb/s:'\
    {'(--min-bitrate=3D)-m','(-m)--min-bitrate=3D'}'[sets minimum bitrate t=
o n (in kb/s).]:bitrate in kb/s:'\
    {'(--max-bitrate=3D)-M','(-M)--max-bitrate=3D'}'[sets maximum bitrate t=
o n (in kb/s).]:bitrate in kb/s:'\
    '--managed[turn  off  the  normal  VBR encoding]'\
    {'(--quality=3D)-q','(-q)--quality=3D'}'[sets encoding quality.]:qualit=
y:(0 1 2 3 4 5 6 7 8 9 10)'\
    '--resample[resample input to the given sample rate (in Hz) before enco=
ding.]:sample rate:'\
    '--downmix[downmix input from stereo to mono.]'\
    '--advanced-encode-option[sets  an  advanced  option.]:option name:_adv=
anced_option'\
    {'(--serial)-s','(-s)--serial'}'[forces a specific serial number in the=
 output  stream.]'\
    {'(--output-file=3D)-o','(-o)--output-file=3D'}'[write the Ogg Vorbis s=
tream to output_file]:files:->oggfiles'\
    {'(--pattern=3D)-n','(-n)--pattern=3D'}'[produce filenames as this stri=
ng]:string:'\
    {'*-c','*--comment'}'[add the string comment as an extra comment.]:comm=
ent:'\
    {'*-a','*--artist'}'[set the artist comment field in the comments to ar=
tist.]:artist:'\
    {'*-G','*--genre'}'[set the genre comment field in the comments to genr=
e.]:genre:'\
    {'*-d','*--date'}'[sets the date comment field to the given value.]:dat=
e:'\
    {'*-N','*--tracknum'}'[sets the track number comment field to the given=
 value.]:track number:'\
    {'*-t','*--title'}'[set the track title comment field to title.]:title:=
'\
    {'*-l','*--album'}'[set the album comment field to album.]'\
    '*:files:->wavfiles' && return 0
        ;;
    ogg123)
        _arguments -C -s \
        {'(-h)--help','(--help)-h'}'[show help]'\
        {'(--version)-V','(-V)--version'}'[display version information.]'\
        {'(-d)--device','(--device)-d'}'[output device.]:device:((null\:"di=
scards all data" oss\:"Open Sound System" sun\:"Sun Audio" alsa\:"Advanced =
Linux Sound Architecture" irix\:"IRIX audio" arts\:"aRts Sound Daemon" esd\=
:"Enlightened Sound Daemon" au\:"Sun audio file" raw\:"Raw sample" wav\:"WA=
V file"))' \
        {'(--files=3D)-f','(-f)--files=3D'}'[output filename for a previous=
ly specified file device.]:output filename:_files'\
        {'(--skip)-k','(-k)--skip'}'[skip the first '\''n'\'' seconds.]:sec=
onds:'\
        {'(--buffer)-b','(-b)--buffer'}'[size of input buffer.]:kilobytes:'=
\
        {'(--prebuffer)-p','(-p)--prebuffer'}'[prebuffer percentage.]:perce=
nt:'\
        {'(--quiet -q)*-v','(--quiet -q)*--verbose'}'[increase verbosity.]'=
\
        {'(--verbose -v --quiet)-q','(-q --verbose -v)--quiet'}'[quiet mode=
.]'\
        {'(--nth)-x','(-x)--nth'}'[block decode intervall.]:number:'\
        {'(--ntimes)-y','(-y)--ntimes'}'[block repeat count.]:number:'\
        {'(--shuffle)-z','(-z)--shuffle'}'[shuffle play.]'\
        {'(--delay=3D)-l','(-l)--delay=3D'}'[set delay in millisecond.]:mil=
liseconds:'\
        {'(--playlist)-@','(-@)--playlist'}'[Play all of  the  files from a=
 playlist.]:playlist:_files'\
        '--audio-buffer[size of output audio buffer.]:kilobytes:'\
        {'*-o','*--device-option=3D'}'[assign device option values]:devopts=
:->devopts'\
        '*:files:->oggfiles' && return 0
        ;;
    ogginfo)
        _arguments -C -s \
        '-h[show a help and usage message]'\
        '*-q[quiet  mode.]'\
        '-v[verbose mode.]'\
        '*:files:->oggfiles' && return 0
        ;;
    oggdec)
        _arguments -C -s \
        {'(--quiet)-q','(-q)--quiet'}'[quiet mode.]'\
        {'(--help)-h','(-h)--help'}'[print help message.]'\
        {'(--version)-v','(-v)--version'}'[display version information.]'\
        {'(--bits=3D)-b','(-b)--bits=3D'}'[bits per sample.]:bits per sampl=
e:(8 16)'\
        {'(--endian=3D)-e','(-e)--endian'}'[set endianness for 16-bit outpu=
t.]:endianness:(( 0\:\(default\)\ is\ little-endian\ \(Intel\ byte\ order\)=
. 1\:is\ big-endian\ \(sane\ byte\ order\). ))'\
        {'(--raw=3D)-R','(-R)--raw=3D'}'[output  in  raw format.]'\
        {'(--output=3D)-o','(-o)--output=3D'}'[write output to specified fi=
lename.]:output filename:_files'\
	    {'(--sign=3D)-s','(-s)--sign=3D'}'[set signedness for output.]:signedn=
ess:(( 0\:unsigned 1\:signed\ \(default\) ))'\
        '*:files:->oggfiles' && return 0
        ;;
    esac

    case $state in
    oggfiles)
    _description files expl 'ogg vorbis files'
    _files "$expl[@]" -g '*.ogg'
    ;;
    wavfiles)
    _description files expl 'wav files'
    _files "$expl[@]" -g '*.wav'
    ;;
    devopts)
    _setup devopts
    _tags devopts
    _description devopts expl 'device options'
    compadd "$expl[@]" -S : - dsp dev card buf_size host byteorder
    ;;
    esac
}

_vorbis "$@"

--=-P25JXCHkkAUb1Mek0Ksr--


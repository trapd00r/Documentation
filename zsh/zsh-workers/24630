From zsh-workers-return-24630-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 29 09:53:36 2008
Return-Path: <zsh-workers-return-24630-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15905 invoked from network); 29 Feb 2008 09:53:33 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Feb 2008 09:53:33 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 96940 invoked from network); 29 Feb 2008 09:53:26 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Feb 2008 09:53:26 -0000
Received: (qmail 9280 invoked by alias); 29 Feb 2008 09:53:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24630
Received: (qmail 9263 invoked from network); 29 Feb 2008 09:53:22 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 29 Feb 2008 09:53:22 -0000
Received: from n36.bullet.mail.ukl.yahoo.com (n36.bullet.mail.ukl.yahoo.com [87.248.110.169])
	by bifrost.dotsrc.org (Postfix) with SMTP id 97CE98026E0B
	for <zsh-workers@sunsite.dk>; Fri, 29 Feb 2008 10:53:12 +0100 (CET)
Received: from [217.146.182.178] by n36.bullet.mail.ukl.yahoo.com with NNFMP; 29 Feb 2008 09:53:11 -0000
Received: from [87.248.111.146] by t4.bullet.ukl.yahoo.com with NNFMP; 29 Feb 2008 09:53:11 -0000
Received: from [127.0.0.1] by omp203.mail.ukl.yahoo.com with NNFMP; 29 Feb 2008 09:53:11 -0000
X-Yahoo-Newman-Id: 692621.35683.bm@omp203.mail.ukl.yahoo.com
Received: (qmail 37937 invoked from network); 29 Feb 2008 09:53:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Received:In-reply-to:From:References:To:Subject:Date:Message-ID;
  b=K9QH8yJfe8eIrB8wMKZqsVEm50RFHhVsn60AieaEDh1F6c1WgItqT25hhleQPv9zqoHpCEGga3xziCZTMuopSOaPAI1bCQZs5s6r+tOoQpD930QE/Phfyph8ODt1ysQ9LfL2CO/T9Vn7WXXgOKFc8nFW7VCP2cqrZNrXskvMjCU=  ;
Received: from unknown (HELO thecus) (okiddle@89.60.213.225 with plain)
  by smtp103.mail.ukl.yahoo.com with SMTP; 29 Feb 2008 09:53:11 -0000
X-YMail-OSG: NtEnl8AVM1nxxOjzTlQpbSS_sXYMXiFMnRFuz00qx6I7nz15x4V3p29HD80suSbkd5LRKkLmdXgVKM_V6zbXIhoJXSR2M7NbqTp0BOe3s8f2DRIw
X-Yahoo-Newman-Property: ymail-3
Received: from opk (helo=thecus)
	by thecus with local-esmtp (Exim 4.63)
	(envelope-from <okiddle@yahoo.co.uk>)
	id 1JV1vg-0007MM-Sb
	for zsh-workers@sunsite.dk; Fri, 29 Feb 2008 10:53:24 +0100
In-reply-to: <200802271129.m1RBTVIC003639@news01.csr.com> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <8AABEECB-A9A6-43EA-BED2-4BE376CBE349@blastwave.org> <20080226141459.76dc362c@news01> <BD1EA7D6-C784-4ED9-9558-5B655CBC5096@blastwave.org> <20080226145741.6e74fc22@news01> <656429B3-438B-4ECF-85C4-04E38D837D1A@blastwave.org> <200802261610.m1QGAwJ3008939@news01.csr.com> <18951.1204047420@thecus> <200802271129.m1RBTVIC003639@news01.csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: * Re: Failed tests of zsh 4.3.5 in Solaris 10 w/Sun Studio 12 CC
Date: Fri, 29 Feb 2008 10:53:24 +0100
Message-ID: <28293.1204278804@thecus>
X-Virus-Scanned: ClamAV 0.91.2/6040/Fri Feb 29 09:45:31 2008 on bifrost
X-Virus-Status: Clean

Peter wrote:
> The following is the best I've got:  it tests for _libiconv_version
> (which should be an external variable and hence tell us whether we're
> actually linking against libiconv, whatever the header is) in configure

I'd have thought the AC_CHECK_DECL for _libiconv_version as used already
earlier in configure.ac is a sufficient test. If you try to compile zsh
with the iconv header file not matching what it links against, you get
bigger problems and it doesn't compile at all. In fact, there is
_LIBICONV_VERSION which is a #define so you could #ifdef that.

Oliver


From zsh-workers-return-10405-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Apr 03 10:02:56 2000
Return-Path: <zsh-workers-return-10405-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22191 invoked from network); 3 Apr 2000 10:02:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Apr 2000 10:02:55 -0000
Received: (qmail 16267 invoked by alias); 3 Apr 2000 10:02:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10405
Received: (qmail 16222 invoked from network); 3 Apr 2000 10:02:27 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000403100115.ZM18748@candle.brasslantern.com>
Date: Mon, 3 Apr 2000 10:01:15 +0000
In-Reply-To: <200004030839.KAA13283@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: zrecompile" (Apr  3, 10:39am)
References: <200004030839.KAA13283@beta.informatik.hu-berlin.de> 
	<200004030945.LAA31042@beta.informatik.hu-berlin.de>
In-Reply-To: <200004030945.LAA31042@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: zrecompile" (Apr  3, 11:45am)
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: zrecompile
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 3, 10:39am, Sven Wischnowsky wrote:
} Subject: Re: zrecompile
}
} And another thing: the zwc files till use $ZSH_VERSION in the header
} to test for compatibility -- somehow I didn't like to add an additional 
} version number scheme for them, but it would be better, I think (the
} format will certainly change less often than $ZSH_VERSION).

Yea, but it'll be much less recognizable in the -t output.  I think the
$ZSH_VERSION test is fine.

On the other hand, that should be put in some immutable part of the file
header so that *any* version of zsh can be guaranteed to be able to read
it back -- to rephrase, we set the requirement NOW that changes to the
format of the header must only come *after* the version string (or some
equivalent requirement), so that it's always possible to display the
version mismatch (or at least know that was the reason for the error).

On Apr 3, 11:45am, Sven Wischnowsky wrote:
}
} zrecompile probably makes a whole lot more sense when used with the -p 
} option, because then it also catches new functions in directories.
} 
} Maybe we should make that the default and the automatic zwc file
} searching only be done when given some option.

My instinct is to say that it's OK the way it is; but I haven't used it
very much, so ...

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


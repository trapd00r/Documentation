From zsh-workers-return-16663-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 18 01:55:35 2002
Return-Path: <zsh-workers-return-16663-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23997 invoked from network); 18 Feb 2002 01:55:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 18 Feb 2002 01:55:34 -0000
Received: (qmail 21507 invoked by alias); 18 Feb 2002 01:55:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16663
Received: (qmail 21493 invoked from network); 18 Feb 2002 01:55:26 -0000
Date: Sun, 17 Feb 2002 20:55:23 -0500
From: Clint Adams <schizo@debian.org>
To: Zsh-workers <zsh-workers@sunsite.dk>
Cc: Joey Hess <joeyh@debian.org>, 134474-forwarded@bugs.debian.org
Subject: Re: Bug#134474: zsh misbehaves if LINES=2
Message-ID: <20020218015523.GA23456@dman.com>
References: <E16cYRl-00039Y-00@silk.kitenet.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <E16cYRl-00039Y-00@silk.kitenet.net>
User-Agent: Mutt/1.3.27i

> As you probably know, my zsh prompt sets the xterm title. Well, this
> seems to not work in an xterm that is sized to 80x2. Updates to the
> title, which should happen every time the prompt is displayed, do not.
> Also weird is that, for root, I underline the username in the prompt,
> and this too does not happen in such a small xterm.
> 
> If I export LINES=10 in such a small xterm though, all the prompt stuff
> right away starts to work the same way it does in a larger xterm. Of
> course, this is liable to break other stuff..
> 
> My guess is that zsh is doing some kind of trimming of the prompt it
> displays if the terminal seems to be too small to contain the whole
> thing, or something like that.

Yes, it considers the terminal to be short if it's under 3 lines long;
what I don't understand is why it's eliding everything within %{ %}.
(If you get rid of these delimeters, which you almost certainly don't
want to do, it will set the xterm title as expected).


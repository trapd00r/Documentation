From mikhail@klm.com Tue Jun 11 06:21:20 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id GAA24506 for <mason@werple.mira.net.au>; Tue, 11 Jun 1996 06:21:19 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA01326; Mon, 10 Jun 1996 16:11:23 -0400 (EDT)
Resent-Date: Mon, 10 Jun 1996 16:11:23 -0400 (EDT)
From: mikhail@klm.com (Mikhail Kuperblum)
Message-Id: <9606101610.ZM9613@klm.com>
Date: Mon, 10 Jun 1996 16:10:50 -0400
In-Reply-To: Zoltan Hidvegi <hzoli@cs.elte.hu>
        "Re: Ongoing problem with PATH variable since v2.6-beta17" (Jun 10,  9:18pm)
References: <199606101918.VAA07207@bolyai.cs.elte.hu>
X-Mailer: Z-Mail (3.2.1 10apr95)
To: Zoltan Hidvegi <hzoli@cs.elte.hu>
Subject: Re: Ongoing problem with PATH variable since v2.6-beta17
Cc: mikhail@klm.com, zsh-workers@math.gatech.edu
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"jwKOz1.0.eK.h58ln"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1325
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 2442
Status: OR

[Note: this is an encore, my previous message got cut off in the middle.
Sorry! BTW, to answer your question, I do not have /etc/zshenv]

Thanks for replying. Unfortunately, it's not that easy. The first
thing I did when I discovered this problem was getting all my init
files out of the way. It doesn't help!

[/] echo $PATH
/usr/progressive/bin:/etc:/usr/local/bin:/bin:/usr/bin:/tcb/bin:/usr/bin/X11:/us
r/lib/uucp/:/u/wp/shbin:/u/wp/wpbin:/u/dlc:/u/local/sound/bin:/usr/vsifax/bin:/u
sr/merge/dosroot/ubin
[/] zsh -f
klm# echo $PATH
/usr/progressive/bin /etc /usr/local/bin /bin /usr/bin /tcb/bin /usr/bin/X11 /us
r/lib/uucp/ /u/wp/shbin /u/wp/wpbin /u/dlc /u/local/sound/bin /usr/vsifax/bin /u
sr/merge/dosroot/ubin

But things get even more weird!

[/] PATH=
[/] echo $PATH
 .
[/] /usr/local/bin/zsh -f
klm# echo $PATH
/usr/progressive/bin /etc /usr/local/bin /bin /usr/bin /tcb/bin /usr/bin/X11 /us
r/lib/uucp/ /u/wp/shbin /u/wp/wpbin /u/dlc /u/local/sound/bin /usr/vsifax/bin /u
sr/merge/dosroot/ubin

Let me repeat that this behavior begun with v2.6-beta17. All previous
versions still work fine.

On Mon, Jun 10 ( 9:18pm), Zoltan Hidvegi wrote:

> Does this happen when you invoke zsh with the -f option (I'm quite sure it
> doesn'n).  In that case, try to locate the piece of code which causes this
> in your stratup files.  First locate the startup script that causes the
> problem.  This can be done by invoking zsh -f, than sourcing the various
> startup files with the source builtin (the name of the startup files and
> the order of sourcing is described in the zsh manual page).
> 
> If you located the offending script, edit it (eg. start emace in a separate
> window), and stick in a return statement somewhere near the middle of the
> file.  Then start zsh -f, and source it.  If the bug is still there try to
> move the return statement towards the beginning of the file untill the bug
> disappears, otherwise move return toward the end until the bug appears.
> Locate the line which causes the problem, and try to execute is alone.
> 
> Conclusion: try to invoke zsh with the -f option and reproduce the bug with
> the smallest possible number of the commands.  If any assumption is made
> about the environment (eg. that some files or directories exist or not
> exist) you should describe it.  Note that /etc/zshenv is always executed so
> it's best if the bug can be reproduced with /etc/zshenv removed.

-- 
mikhail



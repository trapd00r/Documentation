From zsh-workers-return-28352-mason-zsh=primenet.com.au@zsh.org Fri Oct 15 16:15:42 2010
Return-Path: <zsh-workers-return-28352-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17367 invoked by alias); 15 Oct 2010 16:15:42 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28352
Received: (qmail 7167 invoked from network); 15 Oct 2010 16:15:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at sysmic.org designates 88.191.45.54 as permitted sender)
From: =?iso-8859-1?q?J=E9r=F4me_Pouiller?= <jezz@sysmic.org>
Organization: Sysmic
To: zsh-workers@zsh.org
Subject: run-help and run-help-*
Date: Fri, 15 Oct 2010 18:05:55 +0200
User-Agent: KMail/1.13.5 (Linux/2.6.32-24-generic; KDE/4.5.1; x86_64; ; )
MIME-Version: 1.0
Content-Type: Multipart/Mixed;
  boundary="Boundary-00=_kvHuMA70B1WIOE8"
Message-Id: <201010151805.56279.jezz@sysmic.org>

--Boundary-00=_kvHuMA70B1WIOE8
Content-Type: Text/Plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Dear Zsh Workers

I noticed if:
  1. I use run-help module
  2. I use run-help-git functions (also work all run-help-* functions)
  3. I launch "run-help git"

then run-help function loop with error:
   run-help:shift:102: shift count must be <=3D $#

Patch in attachment fix this issue.

=2D-=20
J=E9r=F4me Pouiller (Jezz)

--Boundary-00=_kvHuMA70B1WIOE8
Content-Type: text/x-patch;
  charset="UTF-8";
  name="run-help-fix.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="run-help-fix.patch"

--- /usr/share/zsh/functions/Misc/run-help.orig	2010-04-19 04:26:23.000000000 +0200
+++ /usr/share/zsh/functions/Misc/run-help	2010-10-15 17:54:53.249384368 +0200
@@ -97,7 +97,7 @@
 		builtin print -z "$cmd_args"
 		cmd_args=( ${(z)cmd_args} )
 		# Discard environment assignments, etc.
-		while [[ $cmd_args[1] != $1 ]]
+		while [[ $cmd_args[1] != $1 && $# -gt 1 ]]
 		do
 		    shift cmd_args
 		done

--Boundary-00=_kvHuMA70B1WIOE8--


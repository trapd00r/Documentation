<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Chương&nbsp;7.&nbsp;Trở Thành Kiện Tướng</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magic">
  <link rel="up" href="index.html" title="Git Magic">
  <link rel="prev" href="ch06.html" title=
  "Chương&nbsp;6.&nbsp;Đa Người Dùng">
  <link rel="next" href="ch08.html" title=
  "Chương&nbsp;8.&nbsp;Bí Quyết của Git">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href="index.html">Lời nói
          đầu</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_l%E1%BB%9Di_c%E1%BA%A3m_%C6%A1n">Lời cảm
            ơn!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_gi%E1%BA%A5y_ph%C3%A9p_s%E1%BB%AD_d%E1%BB%A5ng">
            Giấy phép sử dụng</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1. Giới
          thiệu</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_c%C3%B4ng_vi%E1%BB%87c_gi%E1%BB%91ng_nh%C6%B0_tr%C3%B2_ch%C6%A1i">
            Công Việc giống như Trò Chơi</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_qu%E1%BA%A3n_l%C3%BD_m%C3%A3_ngu%E1%BB%93n">
            Quản Lý Mã Nguồn</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_h%E1%BB%87_th%E1%BB%91ng_ph%C3%A2n_t%C3%A1n">
            Hệ Thống Phân Tán</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_quan_ni%E1%BB%87m_c%E1%BB%95_h%E1%BB%A7">Quan
            Niệm Cổ Hủ</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_xung_%C4%91%E1%BB%99t_khi_tr%E1%BB%99n">Xung
            Đột Khi Trộn</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Các Thủ
          Thuật Cơ Bản</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_ghi_l%E1%BA%A1i_tr%E1%BA%A1ng_th%C3%A1i">Ghi
            lại Trạng thái</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_th%C3%AAm_x%C3%B3a_%C4%91%E1%BB%95i_t%C3%AAn">
            Thêm, Xóa, Đổi Tên</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_ch%E1%BB%A9c_n%C4%83ng_undo_redo">Chức Năng
            Undo/Redo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_s%E1%BB%B1_quay_l%E1%BA%A1i">Sự quay
            lại</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%E1%BA%A1o_nh%E1%BA%ADt_k%C3%BD_c%C3%A1c_thay_%C4%91%E1%BB%95i">
            Tạo Nhật Ký các thay đổi</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%E1%BA%A3i_v%E1%BB%81_c%C3%A1c_t%E1%BB%87p_tin">
            Tải về các Tệp tin</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_th%E1%BB%AD_nghi%E1%BB%87m">Thử
            Nghiệm</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_xu%E1%BA%A5t_b%E1%BA%A3n">Xuất
            Bản</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%C3%B4i_%C4%91%C3%A3_l%C3%A0m_%C4%91%C6%B0%E1%BB%A3c_g%C3%AC">
            Tôi Đã Làm Được Gì?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_b%C3%A0i_t%E1%BA%ADp">Bài
            Tập</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Nhân
          Bản</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_%C4%91%E1%BB%93ng_b%E1%BB%99_h%C3%B3a_c%C3%A1c_m%C3%A1y_t%C3%ADnh">
            Đồng bộ hóa Các Máy tính</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_qu%E1%BA%A3n_l%C3%BD_theo_c%C3%A1ch_c%C5%A9">
            Quản lý theo cách Cũ</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_m%C3%A3_ngu%E1%BB%93n_ri%C3%AAng_t%C6%B0">Mã
            nguồn riêng tư</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_kho_thu%E1%BA%A7n">Kho
            thuần</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_ng%C6%B0%E1%BB%A3c_v%E1%BB%9Bi_pull">Push
            ngược với pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_r%E1%BA%BD_nh%C3%A1nh_m%E1%BB%99t_d%E1%BB%B1_%C3%A1n">
            Rẽ Nhánh một Dự Án</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_sao_l%C6%B0u_kh%C3%B4ng_gi%E1%BB%9Bi_h%E1%BA%A1n">
            Sao Lưu Không Giới Hạn</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_l%C3%A0m_nhi%E1%BB%81u_vi%E1%BB%87c_c%C3%B9ng_l%C3%BAc">
            Làm nhiều việc cùng lúc</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_song_h%C3%A0nh_c%C3%B9ng_c%C3%A1c_h%E1%BB%87_th%E1%BB%91ng_scm_kh%C3%A1c">
            Song Hành cùng các hệ thống SCM khác</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_t%E1%BA%A1i_sao_t%C3%B4i_s%E1%BB%AD_d%E1%BB%A5ng_git">
            Tại sao Tôi sử dụng Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Thủ Thuật
          Tạo Nhánh</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_n%C3%BAt_%C4%91i%E1%BB%81u_khi%E1%BB%83n">Nút
            Điều Khiển</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_b%E1%BA%A3n_nh%C3%A1p">Bản
            Nháp</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_s%E1%BB%ADa_nhanh">Sửa
            Nhanh</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_tr%E1%BB%99n">Trộn</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_l%C3%A0m_vi%E1%BB%87c_li%C3%AAn_t%E1%BB%A5c">
            Làm Việc Liên Tục</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_c%E1%BA%A3i_t%E1%BB%95_l%E1%BA%A1i_s%E1%BB%B1_pha_tr%E1%BB%99n">
            Cải Tổ Lại Sự Pha Trộn</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_qu%E1%BA%A3n_l%C3%BD_c%C3%A1c_nh%C3%A1nh">Quản
            Lý Các Nhánh</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_nh%C3%A1nh_t%E1%BA%A1m">Nhánh
            Tạm</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_l%C3%A0m_theo_c%C3%A1ch_c%E1%BB%A7a_m%C3%ACnh">
            Làm Theo Cách Của Mình</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Bài Học về
          Lịch Sử</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_d%E1%BB%ABng_l%E1%BA%A1i_s%E1%BB%ADa_ch%E1%BB%AFa">
            Dừng Lại Sửa Chữa</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_v%C3%A0_sau_%C4%91%C3%B3_l%C3%A0_nhi%E1%BB%81u_l%E1%BA%A7n">
            … Và Sau đó là Nhiều Lần</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_thay_%C4%91%E1%BB%95i_ri%C3%AAng_s%E1%BA%AFp_x%E1%BA%BFp_sau">
            Thay Đổi Riêng Sắp Xếp Sau</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_vi%E1%BA%BFt_l%E1%BA%A1i_l%E1%BB%8Bch_s%E1%BB%AD">
            Viết Lại Lịch Sử</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_t%E1%BB%B1_t%E1%BA%A1o_l%E1%BB%8Bch_s%E1%BB%AD">
            Tự Tạo Lịch Sử</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_v%E1%BB%8B_tr%C3%AD_n%C3%A0o_ph%C3%A1t_sinh_l%E1%BB%97i">
            Vị Trí Nào Phát Sinh Lỗi?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_ai_%C4%91%C3%A3_l%C3%A0m_n%C3%B3_sai">Ai Đã
            Làm Nó Sai?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_kinh_nghi%E1%BB%87m_ri%C3%AAng">Kinh Nghiệm
            Riêng</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Đa Người
          Dùng</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_t%C3%B4i_l%C3%A0_ai">Tôi Là
            Ai?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_th%C3%B4ng_qua_ssh_http">Git Thông Qua
            SSH, HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_th%C3%B4ng_qua_m%E1%BB%8Di_th%E1%BB%A9">
            Git Thông Qua Mọi Thứ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_v%C3%A1_s%E1%BB%B1_th%E1%BB%8Bnh_h%C3%A0nh_to%C3%A0n_c%E1%BA%A7u">
            Vá: Sự Thịnh Hành Toàn Cầu</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_r%E1%BA%A5t_ti%E1%BA%BFc_t%C3%B4i_%C4%91%C3%A3_chuy%E1%BB%83n_%C4%91i">
            Rất tiếc! Tôi đã chuyển đi</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_nh%C3%A1nh_tr%C3%AAn_m%E1%BA%A1ng">Nhánh
            Trên Mạng</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%C4%91a_m%C3%A1y_ch%E1%BB%A7">Đa Máy
            chủ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_s%E1%BB%9F_th%C3%ADch_ri%C3%AAng_c%E1%BB%A7a_t%C3%B4i">
            Sở Thích Riêng Của Tôi</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Trở Thành
          Kiện Tướng</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_ph%C3%A1t_h%C3%A0nh_m%C3%A3_ngu%E1%BB%93n">Phát
            hành Mã Nguồn</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ch%E1%BB%89_commit_nh%E1%BB%AFng_g%C3%AC_thay_%C4%91%E1%BB%95i">
            Chỉ Commit Những Gì Thay Đổi</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_l%E1%BA%A7n_commit_n%C3%A0y_nhi%E1%BB%81u_qu%C3%A1">
            Lần commit này Nhiều Quá!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_m%E1%BB%A5c_l%E1%BB%A5c_v%C3%B9ng_tr%E1%BA%A1ng_th%C3%A1i_c%E1%BB%A7a_git">
            Mục Lục: Vùng trạng thái của Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%C4%91%E1%BB%ABng_qu%C3%AAn_head_c%E1%BB%A7a_m%C3%ACnh">
            Đừng Quên HEAD Của Mình</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_s%C4%83n_t%C3%ACm_head">Săn
            tìm-HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_x%C3%A2y_d%E1%BB%B1ng_tr%C3%AAn_git">Xây
            Dựng trên Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_c%E1%BB%A9_phi%C3%AAu_l%C6%B0u">Cứ Phiêu
            Lưu</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ng%C4%83n_ng%E1%BB%ABa_commit_sai">Ngăn
            Ngừa Commit Sai</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Bí Quyết của
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_t%C3%ADnh_%E1%BA%A9n">Tính
            Ẩn</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_to%C3%A0n_v%E1%BA%B9n_d%E1%BB%AF_li%E1%BB%87u">
            Toàn Vẹn Dữ Liệu</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_th%C3%B4ng_minh">Thông Minh</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_m%E1%BB%A5c_l%E1%BB%A5c">Mục
            Lục</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_ngu%E1%BB%93n_g%E1%BB%91c_c%E1%BB%A7a_git">Nguồn
            Gốc của Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_c%C6%A1_s%E1%BB%9F_d%E1%BB%AF_li%E1%BB%87u">
            Đối tượng Cơ Sở Dữ Liệu</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_blob">Đối
            Tượng Blob</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C4%91%E1%BB%91i_t%C6%B0%E1%BB%A3ng_tree">Đối
            Tượng Tree</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_l%E1%BA%A7n_commit">Lần
            Commit</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_kh%C3%B3_ph%C3%A2n_bi%E1%BB%87t_%C4%91%C6%B0%E1%BB%A3c_s%E1%BB%B1_th%E1%BA%A7n_k%E1%BB%B3">
            Khó Phân Biệt Được sự Thần Kỳ</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch09.html">9. Phụ lục A:
          Hạn chế của Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch09.html#_%C4%91i%E1%BB%83m_y%E1%BA%BFu_sha1">Điểm
            Yếu SHA1</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_c%C3%A1c_t%E1%BB%87p_tin_kh%C3%B4ng_li%C3%AAn_quan">
            Các Tệp tin Không liên quan</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_ai_s%E1%BB%ADa_v%C3%A0_s%E1%BB%ADa_g%C3%AC">
            Ai Sửa và Sửa gì?</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l%E1%BB%8Bch_s%E1%BB%AD_t%E1%BB%87p_tin">Lịch
            Sử Tệp Tin</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_kh%E1%BB%9Fi_t%E1%BA%A1o_b%E1%BA%A3n_sao">Khởi
            tạo Bản Sao</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_c%C3%A1c_d%E1%BB%B1_%C3%A1n_hay_thay_%C4%91%E1%BB%95i">
            Các Dự Án Hay Thay Đổi</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_b%E1%BB%99_%C4%91%E1%BA%BFm">Bộ
            Đếm</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_v%E1%BB%9Bi_th%C6%B0_m%E1%BB%A5c_r%E1%BB%97ng">
            Với Thư Mục Rỗng</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l%E1%BA%A7n_commit_kh%E1%BB%9Fi_t%E1%BA%A1o">
            Lần Commit Khởi tạo</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_giao_di%E1%BB%87n_l%E1%BA%ADp_l%E1%BB%9D">Giao
            diện Lập lờ</a></span></li>
          </ul>
        </li>

        <li><span class="chapter"><a href="ch10.html">10. Phụ lục
        B: Dịch Bản Hướng Dẫn Này</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title=
  "Chương&nbsp;7.&nbsp;Trở Thành Kiện Tướng">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_tr%E1%BB%9F_th%C3%A0nh_ki%E1%BB%87n_t%C6%B0%E1%BB%9Bng">
          </a>Chương&nbsp;7.&nbsp;Trở Thành Kiện Tướng</h2>
        </div>
      </div>
    </div>

    <p>Bây giờ, bạn có thể thông qua lệnh <span class=
    "strong"><strong>git help</strong></span> để bật trang trợ giúp
    lên và có thể hiểu gần như tất cả mọi thứ. Tuy nhiên, việc xác
    định chính xác lệnh cần sử dụng để giải quyết các vấn đề thực
    tế đặt ra có lẽ chẳng dễ dàng gì. Có thể tôi có thể giúp bạn
    tiết kiệm được thời gian: bên dưới là một vài cách giải quyết
    các vấn đề thực tế đặt ra mà tôi đã từng sử dụng trong quá
    khứ.</p>

    <div class="section" title="Phát hành Mã Nguồn">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_ph%C3%A1t_h%C3%A0nh_m%C3%A3_ngu%E1%BB%93n"></a>Phát
            hành Mã Nguồn</h2>
          </div>
        </div>
      </div>

      <p>Với dự án của tôi, Git giữ theo dõi chính xác các tệp tin
      tôi muốn lưu trữ và phát hành tới người dùng. Để tạo gói
      tarball cho mã nguồn, tôi chạy:</p>
      <pre class="literallayout">
$ git archive --format=tar --prefix=proj-1.2.3/ HEAD
</pre>
    </div>

    <div class="section" title="Chỉ Commit Những Gì Thay Đổi">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_ch%E1%BB%89_commit_nh%E1%BB%AFng_g%C3%AC_thay_%C4%91%E1%BB%95i">
            </a>Chỉ Commit Những Gì Thay Đổi</h2>
          </div>
        </div>
      </div>

      <p>Việc phải thông báo với Git khi bạn thêm, xóa hay đổi tên
      các tệp tin là việc rầy rà với các dự án nào đó. Thay vào đó,
      bạn có thể gõ:</p>
      <pre class="literallayout">
$ git add .
$ git add -u
</pre>

      <p>Git sẽ xem tất cả các tệp tin trong thư mục hiện tại và
      làm công việc mà nó phải làm. Thay vì chạy lệnh add thứ hai,
      hãy chạy <code class="literal">git commit -a</code> nếu bạn
      cũng có ý định commit vào lúc này. Xem <span class=
      "strong"><strong>git help ignore</strong></span> để biết làm
      cách nào để chỉ ra các tệp tin bỏ qua.</p>

      <p>Bạn có thể thi hành những điều trên chỉ cần một dòng
      lệnh:</p>
      <pre class="literallayout">
$ git ls-files -d -m -o -z | xargs -0 git update-index --add --remove
</pre>

      <p>Tùy chọn <span class="strong"><strong>-z</strong></span>
      và <span class="strong"><strong>-0</strong></span> dùng để
      ngăn ngừa sai hỏng không mong muốn từ những tệp tin có chứa
      các ký tự đặc biệt. Bởi vì lệnh này bổ xung những tệp tin đã
      bị bỏ qua, bạn có thể muốn sử dụng tùy chọn <code class=
      "literal">-x</code> hay <code class="literal">-X</code>.</p>
    </div>

    <div class="section" title="Lần commit này Nhiều Quá!">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_l%E1%BA%A7n_commit_n%C3%A0y_nhi%E1%BB%81u_qu%C3%A1"></a>Lần
            commit này Nhiều Quá!</h2>
          </div>
        </div>
      </div>

      <p>Bạn quên việc commit quá lâu? Bạn quá mải mê với việc viết
      mã nguồn mà quên đi việc quản lý nó? Bạn muốn những thay đổi
      liên quan đến nhau phải được commit riêng từng lần và nối
      tiếp nhau, bởi vì đây là phong cách của bạn?</p>

      <p>Đừng lo lắng. Chạy:</p>
      <pre class="literallayout">
$ git add -p
</pre>

      <p>Với mỗi lần thay đổi mà bạn tạo ra, Git sẽ hiện cho bạn
      biết từng đoạn mã đã bị thay đổi, và hỏi nó có phải là một bộ
      phận của lần commit tiếp theo. Trả lời là "y" hay "n". Bạn có
      các sự lựa chọn khác, như là hoãn lại; gõ "?" để biết thêm
      chi tiết.</p>

      <p>Khi nào bạn thỏa mãn thì gõ</p>
      <pre class="literallayout">
$ git commit
</pre>

      <p>để commit chính xác các thay đổi mà bạn đã chọn lựa (các
      thay đổi về <span class="emphasis"><em>staged</em></span>).
      Hãy chắc chắn là bạn đã không dùng tùy chọn <span class=
      "strong"><strong>-a</strong></span>, nếu không thì Git sẽ
      commit tất cả.</p>

      <p>Nhưng bạn lại có những tài liệu đã được chỉnh sửa đặt tại
      nhiều chỗ khác nhau? Việc duyệt từng cái một sẽ làm bạn nản
      lòng. Trong trường hợp này, sử dụng lệnh <span class=
      "strong"><strong>git add -i</strong></span>, với giao diện
      không ít rắc rối hơn, nhưng uyển chuyển hơn. Chỉ cần gõ vài
      cái, bạn có thể đưa vào hay gỡ bỏ nhiều tệp tin vào một trạng
      thái cùng một lúc, hay xem xét và chọn các thay đổi chỉ trong
      các tệp tin riêng biệt. Có một sự lựa chọn khác, chạy lệnh
      <span class="strong"><strong>git commit
      --interactive</strong></span> mà nó sẽ tự động commit sau khi
      bạn làm xong.</p>
    </div>

    <div class="section" title="Mục Lục: Vùng trạng thái của Git">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_m%E1%BB%A5c_l%E1%BB%A5c_v%C3%B9ng_tr%E1%BA%A1ng_th%C3%A1i_c%E1%BB%A7a_git">
            </a>Mục Lục: Vùng trạng thái của Git</h2>
          </div>
        </div>
      </div>

      <p>Chúng ta trốn tránh chưa muốn nói đến một thứ nổi tiếng
      của Git đó là <span class="emphasis"><em>index</em></span>
      (mục lục), nhưng chúng ta phải đối mặt với nó để mà giảng
      giải những điều ở trên. Chỉ mục là vùng trạng thái tạm thời.
      Git ít khi di chuyển dữ liệu qua lại một cách trực tiếp giữa
      dự án của bạn và lịch sử của nó. Đúng hơn là Git đầu tiên ghi
      dữ liệu vào mục lục, và sau đó sao chép dữ liệu trong chỉ mục
      vào chỗ cần ghi cuối.</p>

      <p>Ví dụ, lệnh <span class="strong"><strong>commit
      -a</strong></span> thực sự bao gồm hai quá trình. Bước thứ
      nhất là đặt toàn bộ dữ liệu hiện tại của mọi tệp tin cần theo
      dõi vào bảng mục lục. Bước thứ hai là ghi vào bảng mục lục.
      Việc commit không sử dụng tùy chọn <span class=
      "strong"><strong>-a</strong></span> chỉ thi hành bước thứ
      hai, và nó chỉ có ý nghĩa sau khi chạy lệnh mà lệnh này bằng
      cách này hay cách khác thay đổi bảng chỉ mục, như là lệnh
      <span class="strong"><strong>git add</strong></span> chẳng
      hạn.</p>

      <p>Thường thường chúng ta bỏ qua mục lục và lấy cớ là chúng
      ta đang đọc trực tiếp và ghi thẳng vào trong lịch sử. Vì lý
      do này, chúng ta muốn việc điều khiển chính xác, như vậy
      chúng ta chỉnh sửa mục lục bằng cách thủ công. Chúng ta đặt
      một dữ liệu hiện hành của một số, không phải tất cả, các thay
      đổi của chúng ta vào bảng mục lục, và sau đó ghi những cái
      này vào lịch sử.</p>
    </div>

    <div class="section" title="Đừng Quên HEAD Của Mình">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%C4%91%E1%BB%ABng_qu%C3%AAn_head_c%E1%BB%A7a_m%C3%ACnh">
            </a>Đừng Quên HEAD Của Mình</h2>
          </div>
        </div>
      </div>

      <p>Thẻ HEAD giống như một con trỏ, nó trỏ đến lần commit cuối
      cùng, tự động di chuyển theo mỗi lần commit mới. Một số lệnh
      của Git giúp bạn di chuyển nó. Ví dụ như:</p>
      <pre class="literallayout">
$ git reset HEAD~3
</pre>

      <p>sẽ chuyển HEAD lên vị trí lần commit cách đây ba lần. Thế
      thì tất cả các lệnh Git thi hành như khi bạn ở vị trí commit
      này, trong khi các tệp tin của bạn vẫn nằm ở hiện tại. Xem
      thêm phần trợ giúp cho một số ứng dụng.</p>

      <p>Nhưng ta lại muốn quay trở lại phần sau này? Lần commit cũ
      không biết gì về phần sau này cả.</p>

      <p>Nếu bạn có giá trị băm SHA1 của HEAD gốc thì:</p>
      <pre class="literallayout">
$ git reset 1b6d
</pre>

      <p>Nhưng giả sử bạn không có được nó? Đừng lo: với những lệnh
      như thế, Git ghi lại HEAD gốc với thẻ có tên là ORIG_HEAD, và
      bạn có thể trở về ngon lành và an toàn với lệnh:</p>
      <pre class="literallayout">
$ git reset ORIG_HEAD
</pre>
    </div>

    <div class="section" title="Săn tìm-HEAD">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_s%C4%83n_t%C3%ACm_head"></a>Săn tìm-HEAD</h2>
          </div>
        </div>
      </div>

      <p>Có thể ORIG_HEAD là chưa đủ. Có lẽ bạn vừa nhận thấy mình
      vừa tạo ra một sai sót có quy mô lớn và bạn cần phải quay lại
      một lần commit cách đây lâu lắm rồi trong một nhánh mà bạn đã
      quên rồi vì nó đã quá lâu.</p>

      <p>Theo mặc định, Git giữ một lần commit ít nhất là hai tuần
      lễ, ngay cả khi bạn đã ra lệnh cho Git phá hủy nhánh chứa nó.
      Sự khó khăn là ở chỗ làm thế nào để tìm được giá trị băm
      thích hợp. Bạn có thể tìm kiếm tất cả các giá trị băm trong
      <code class="literal">.git/objects</code> và sử dụng phương
      pháp thử sai tất cả các giá trị để có được thứ mình muốn.
      Nhưng còn có cách dễ dàng hơn.</p>

      <p>Git ghi lại mọi giá trị băm của mọi lần commit trong máy
      tính tại thư mục <code class="literal">.git/logs</code>. Thư
      mục con <code class="literal">refs</code> chứa lịch sử của
      tất cả các hoạt động trên tất cả cách nhánh, trong khi tệp
      tin <code class="literal">HEAD</code> giữ tất cả các giá trị
      băm mà nó từng có được. Phần sau có thể được sử dụng để tìm
      kiếm giá trị băm của các lần commits trên các nhánh cái mà đã
      bị cắt đi một cách tình cờ.</p>

      <p>Lệnh reflog cung cấp cho chúng ta một giao diện thân thiện
      dành cho các tệp tin log. Bạn có thể thử bằng lệnh:</p>
      <pre class="literallayout">
$ git reflog
</pre>

      <p>Thay vì phải cắt và dán giá trị băm từ reflog, hãy
      thử:</p>
      <pre class="literallayout">
$ git checkout "@{10 minutes ago}"
</pre>

      <p>Hay checkout lần thứ 5 kể từ lần commit cuối viếng thăm
      thông qua lệnh:</p>
      <pre class="literallayout">
$ git checkout "@{5}"
</pre>

      <p>Xem chương “Specifying Revisions” từ lệnh <span class=
      "strong"><strong>git help rev-parse</strong></span> để biết
      thêm chi tiết.</p>

      <p>Bạn muốn cấu hình thời gian gia hạn lâu hơn việc xóa bỏ
      những lần commit. Ví dụ:</p>
      <pre class="literallayout">
$ git config gc.pruneexpire "30 days"
</pre>

      <p>có nghĩa là việc xóa một lần commit sẽ chỉ thực sự xảy ra
      khi 30 ngày đã qua và lệnh <span class="strong"><strong>git
      gc</strong></span> được triệu gọi.</p>

      <p>Bạn cũng có thể không cho phép chạy lệnh <span class=
      "strong"><strong>git gc</strong></span> một cách tự động:</p>
      <pre class="literallayout">
$ git config gc.auto 0
</pre>

      <p>trong trường hợp này những lần commit sẽ chỉ bị xóa bỏ khi
      bạn chạy lệnh <span class="strong"><strong>git
      gc</strong></span>.</p>
    </div>

    <div class="section" title="Xây Dựng trên Git">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_x%C3%A2y_d%E1%BB%B1ng_tr%C3%AAn_git"></a>Xây Dựng
            trên Git</h2>
          </div>
        </div>
      </div>

      <p>Tuân thủ theo phong thái UNIX, Git được thiết kế cho phép
      nó dễ dàng được sử dụng như là một thành phần bên dưới của
      các chương trình khác, như là cho giao diện đồ họa GUI và
      giao diện Web để thay thế cho giao diện dòng lệnh, công cụ
      quản lý các miếng vá, các công cụ nhập và chuyển đổi, và
      những thứ tương tự như thế. Trên thực tế, một số lệnh Git bản
      chất nó cũng là các kịch bản đứng trên vai của những người
      khổng lồ, chính là hệ điều hành. Chỉ cần sửa đổi một chút,
      bạn có thể bắt Git làm việc phù hợp với sở thích của
      mình.</p>

      <p>Một mẹo nhỏ là sử dụng một tính năng dựng sẵn trong Git là
      gán bí danh cho các lệnh để nó trở nên ngắn gọn hơn sử dụng
      lệnh:</p>
      <pre class="literallayout">
$ git config --global alias.co checkout  #gán bí danh cho lệnh checkout là co
$ git config --global --get-regexp alias  # hiển thị bí danh hiện hành
alias.co checkout
$ git co foo                              # có kết quả giống như chạy lệnh 'git checkout foo'
</pre>

      <p>Một thứ khác là hiển thị nhánh hiện hành lên màn hình hay
      thanh tiêu đề của cửa sổ. Gọi lệnh</p>
      <pre class="literallayout">
$ git symbolic-ref HEAD
</pre>

      <p>sẽ hiển thị tên của nhánh hiện hành. Trong thực tiễn, bạn
      thích hợp nhất muốn gỡ bỏ "refs/heads/" và tránh các lỗi:</p>
      <pre class="literallayout">
$ git symbolic-ref HEAD 2&gt; /dev/null | cut -b 12-
</pre>

      <p>Thư mục con <code class="literal">contrib</code> là một
      kho báu được tìm thấy trong số các công cụ được xây dựng dành
      cho Git. Đúng lúc, một số trong số chúng có thể được xúc tiến
      thành lệnh chính thức. Trên hệ thống Debian và Ubuntu, thư
      mục này ở tại <code class=
      "literal">/usr/share/doc/git-core/contrib</code>.</p>

      <p>Một thư mục phổ biến khác là <code class=
      "literal">workdir/git-new-workdir</code>. Thông qua các liên
      kết tài tình, đoạn kịch bản này tạo ra một thư mục làm việc
      mới trong khi phần lịch sử thì chia sẻ với kho chứa nguyên
      gốc:</p>
      <pre class="literallayout">
$ git-new-workdir an/existing/repo new/directory
</pre>

      <p>Thư mục mới và các tệp tin trong nó có thể được coi như
      một bản sao, ngoại trừ phần lịch sử được chia sẻ dùng chung,
      hai cây được tự động đồng bộ hóa. Ở đây không cần có sự trộn,
      push, hay pull.</p>
    </div>

    <div class="section" title="Cứ Phiêu Lưu">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_c%E1%BB%A9_phi%C3%AAu_l%C6%B0u"></a>Cứ Phiêu Lưu</h2>
          </div>
        </div>
      </div>

      <p>Ngày nay, người sử dụng Git rất khó phá hủy dữ liệu. Nhưng
      nếu như bạn biết mình đang làm gì, bạn có thể vượt qua sự bảo
      vệ dành cho các lệnh thông thường đó.</p>

      <p><span class="strong"><strong>Checkout</strong></span>:
      Không commit các thay đổi là nguyên nhân của việc checkout
      gặp lỗi. Để phá hủy sự thay đổi của mình, và dẫu sao cũng
      checkout commit đã cho, sử dụng cờ bắt buộc (force):</p>
      <pre class="literallayout">
$ git checkout -f HEAD^
</pre>

      <p>Mặt khác, nếu bạn chỉ định rõ một đường dẫn chi tiết cho
      lệnh, thế thì ở đây không có sự kiểm tra an toàn nào cả.
      Đường dẫn được áp dụng sẽ bị âm thầm ghi đè lên. Hãy cẩn thận
      nếu bạn sử dụng lệnh checkout theo cách này.</p>

      <p><span class="strong"><strong>Reset</strong></span>: Lệnh
      reset cũng xảy ra lỗi khi không commit các thay đổi. Để bắt
      buộc nó, chạy:</p>
      <pre class="literallayout">
$ git reset --hard 1b6d
</pre>

      <p><span class="strong"><strong>Branch</strong></span>: Việc
      xóa các nhánh cũng gặp lỗi nếu đó là nguyên nhân khiến các
      thay đổi bị mất. Để ép buộc việc này, hãy gõ:</p>
      <pre class="literallayout">
$ git branch -D dead_branch  #thay vì sử dụng tùy chọn -d
</pre>

      <p>Cũng tương tự như thế, việc cố gắng ghi đè lên một nhánh
      bằng cách di chuyển nhánh khác đến nó cũng gây ra lỗi. Để ép
      buộc sự di chuyển nhánh, gõ:</p>
      <pre class="literallayout">
$ git branch -M source target  # thay vì sử dụng tùy chọn -m
</pre>

      <p>Không giống như checkout và reset, hai lệnh trên trì hoãn
      việc phá hủy dữ liệu. Các thay đổi vẫn còn lưu giữ trong thư
      mục con .git, và có thể lấy lại được bằng cách lấy giá trị
      băm <code class="literal">.git/logs</code> thích hợp (xem
      phần "Săn tìm - HEAD" ở phía trên). Theo mặc định, chúng sẽ
      giữ ít nhất là hai tuần lễ.</p>

      <p><span class="strong"><strong>Clean</strong></span>: Một số
      lệnh Git từ chối thi hành bởi vì chúng lo lắng về việc làm
      như thế làm mất dấu hoàn toàn các tệp tin. Nếu bạn chắc chắn
      về tất cả các tệp tin và thư mục không cần Git theo dõi nữa
      và muốn phá hủy chúng đi, thế thì xóa chúng triệt để với
      lệnh:</p>
      <pre class="literallayout">
$ git clean -f -d
</pre>

      <p>Sau này, lệnh rầy rà đó sẽ hoạt động!</p>
    </div>

    <div class="section" title="Ngăn Ngừa Commit Sai">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_ng%C4%83n_ng%E1%BB%ABa_commit_sai"></a>Ngăn Ngừa
            Commit Sai</h2>
          </div>
        </div>
      </div>

      <p>Có một số lỗi ngớ ngẩn đã xảy ra với tôi. Điều tồi tệ nhất
      là để sót các tệp tin bởi vì quên lệnh <span class=
      "strong"><strong>git add</strong></span>. Ít tệ hại hơn là
      các ký tự khoảng trắng và những xung đột không cần phải trộn:
      mặc dù cũng chẳng tệ hại lắm, tôi mong rằng những điều này sẽ
      không xảy ra với mọi người.</p>

      <p>Tôi đã tránh được các lỗi ngu ngốc đó bằng cách sử dụng
      một <span class="emphasis"><em>hook</em></span> để nó cảnh
      báo người dùng khi có những vấn đề:</p>
      <pre class="literallayout">
$ cd .git/hooks
$ cp pre-commit.sample pre-commit  # Với phiên bản Git cũ cần chạy lệnh: chmod +x pre-commit
</pre>

      <p>Ngày nay Git sẽ không commit nếu khi nó trộn nó chỉ tìm
      thấy những khoảng trắng vô ích hay những xung đột không cần
      giải trộn.</p>

      <p>Với bản hướng dẫn này, tôi cuối cùng đã thêm vào dòng đầu
      của hook <span class=
      "strong"><strong>pre-commit</strong></span> để đề phòng khi
      ta lơ đãng:</p>
      <pre class="literallayout">
if git ls-files -o | grep '\.txt$'; then
  echo FAIL! Untracked .txt files.
  exit 1
fi
</pre>

      <p>Nhiều hoạt động của Git hỗ trợ hook; hãy xem <span class=
      "strong"><strong>git help hooks</strong></span>. Chúng tôi đã
      kích hoạt một hook mẫu là <span class=
      "strong"><strong>post-update</strong></span> trước khi nói
      đến Git thông qua HTTP. Cái này chạy mỗi khi head di chuyển.
      Đoạn script ví dụ post-update cập nhật các tệp tin Git cần
      cho việc truyền thông thông qua Git-agnostic chuyên chở bằng
      giao thức giống như là HTTP.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

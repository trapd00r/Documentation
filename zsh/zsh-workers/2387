From zsh-workers-request@euclid.skiles.gatech.edu  Thu Nov 14 00:11:33 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id AAA03732 for <mason@primenet.com.au>; Thu, 14 Nov 1996 00:11:32 +1100 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA27385; Wed, 13 Nov 1996 08:00:43 -0500 (EST)
Resent-Date: Wed, 13 Nov 1996 08:00:43 -0500 (EST)
From: Geoff Wing <gwing@primenet.com.au>
Message-Id: <199611131257.XAA03613@coral.primenet.com.au>
Subject: zle_refresh bug fix
To: zsh-workers@math.gatech.edu (zsh-workers)
Date: Wed, 13 Nov 1996 23:57:34 +1100 (EST)
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"VBCES2.0.ph6.wPSYo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2387
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Heyla,
  this has been causing some people problems.  Maybe I better remember how
  to count.

*** zle_refresh.c.~4~	Wed Nov 13 23:50:34 1996
--- zle_refresh.c	Wed Nov 13 23:52:34 1996
***************
*** 836,842 ****
  	    zwrite(lpptbuf + i, lpptlen - i, 1, shout);
  	else if (tccan(TCRIGHT) && (tclen[TCRIGHT] * ct <= lpptlen))
  	    /* it is cheaper to send TCRIGHT than reprint the whole prompt */
! 	    for ( ; ct--; )
  		tcout(TCRIGHT);
          else {
  	    if (i != 0)
--- 836,842 ----
  	    zwrite(lpptbuf + i, lpptlen - i, 1, shout);
  	else if (tccan(TCRIGHT) && (tclen[TCRIGHT] * ct <= lpptlen))
  	    /* it is cheaper to send TCRIGHT than reprint the whole prompt */
! 	    for (ct = pptw - i; ct--; )
  		tcout(TCRIGHT);
          else {
  	    if (i != 0)

-- 
Geoff Wing [gwing@primenet.com.au]   Technical Manager
  Phone    : +61-3-9818 2977	     PrimeNet - Internet Consultancy
  Facsimile: +61-3-9819 3788	     Web : <URL:http://www.primenet.com.au/>
  Mobile   : 0412 162 441


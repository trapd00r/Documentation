From zsh-workers-return-27528-mason-zsh=primenet.com.au@zsh.org Wed Dec 16 18:53:34 2009
Return-Path: <zsh-workers-return-27528-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23431 invoked by alias); 16 Dec 2009 18:53:34 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27528
Received: (qmail 26865 invoked from network); 16 Dec 2009 18:53:22 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.160.41 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:received:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to
         :content-type;
        bh=SKYBsBzei6cCf4h01TsOAl7ym3OfeIXyH/XPn3XT8Ls=;
        b=Lt4Uny+nM03QBoPEV6fFExZOMpJDZWPNZJ2pFjl12ovpqliZ9wB3hHldSgQ/ZERPl5
         AbQDHe08P6pvFkwMjmsATBwTVaf/MigqO73LIOE+Ky643fai0DqTOLuWaJUOnufh0tFs
         cw+kDsuAadk0GX7wDoe0eQ+emgor13a2gKUFU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=t3Sr4iAY9z6CPMXEsqTsq1s6LP7ewGyhd+HavpTncSouO7nrWm5cyL4oJLioceGmod
         3ACUUvmeULaYS8Mo8a4u6bhXmAiANt1BpZm+v6a5kFQVzWvF+gevLSgWv2UGPPpbzYPO
         0qxP0x22wLNd4NFlcbJuPUHZu5I4hj3dG7EQY=
MIME-Version: 1.0
Sender: 4wayned@gmail.com
In-Reply-To: <20090315005826.GC18440@blorf.net>
References: <20090315005826.GC18440@blorf.net>
Date: Wed, 16 Dec 2009 10:53:18 -0800
X-Google-Sender-Auth: f9f2340e48089787
Message-ID: <733654e30912161053v3eeddb8n2fed6f31fe7f8599@mail.gmail.com>
Subject: Re: Improving some return-value checking
From: Wayne Davison <wayned@users.sourceforge.net>
To: zsh-workers@zsh.org
Content-Type: multipart/alternative; boundary=00032555564a132742047add056d

--00032555564a132742047add056d
Content-Type: text/plain; charset=UTF-8

On Sat, Mar 14, 2009 at 4:58 PM, Wayne Davison <wayned@users.sourceforge.net
> wrote:

> The second is specific to checking the return value of pipe() [...]
> I haven't yet patched the various read()/write()/fwrite() calls
> that are not checking their return values
>

I finally got back to this, and checked in some cleanup for both the pipe()
calls and the read()/write() calls that were causing compiler warnings.
 This gets rid of all the "ignoring return value" compiler warnings, and
should make some of the read/write calls slightly safer (since they now
handle EINTR).  There is one remaining FIXME (in exec.c) where I didn't
error-handle an mpipe() call.  Since it wasn't error-handled before, it will
be fine for now, but we may want to figure out how to do an error exit from
that point.

..wayne..

--00032555564a132742047add056d--


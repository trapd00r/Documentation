From zsh-users-return-9821-mason-zsh=primenet.com.au@sunsite.dk Fri Jan 06 21:54:27 2006
Return-Path: <zsh-users-return-9821-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1102 invoked from network); 6 Jan 2006 21:54:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Jan 2006 21:54:25 -0000
Received: (qmail 69604 invoked from network); 6 Jan 2006 21:54:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Jan 2006 21:54:17 -0000
Received: (qmail 20607 invoked by alias); 6 Jan 2006 21:54:10 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9821
Received: (qmail 20596 invoked from network); 6 Jan 2006 21:54:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Jan 2006 21:54:10 -0000
Received: (qmail 68647 invoked from network); 6 Jan 2006 21:54:10 -0000
Received: from ns9.hostinglmi.net (213.194.149.146)
  by a.mx.sunsite.dk with SMTP; 6 Jan 2006 21:54:08 -0000
Received: from 212.red-80-35-44.staticip.rima-tde.net ([80.35.44.212]:33694 helo=localhost)
	by ns9.hostinglmi.net with esmtpa (Exim 4.52)
	id 1EuzXD-0008Eo-9r
	for zsh-users@sunsite.dk; Fri, 06 Jan 2006 22:54:07 +0100
Date: Fri, 6 Jan 2006 22:54:55 +0100
From: DervishD <zsh@dervishd.net>
To: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: Why EXIT traps aren't run inside other traps?
Message-ID: <20060106215455.GA16081@DervishD>
Mail-Followup-To: Zsh Users <zsh-users@sunsite.dk>
References: <20060105221109.GA7754@DervishD> <20060106130143.GG3585@prunille.vinc17.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20060106130143.GG3585@prunille.vinc17.org>
User-Agent: Mutt/1.4.2.1i
Organization: DervishD
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ns9.hostinglmi.net
X-AntiAbuse: Original Domain - sunsite.dk
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - dervishd.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 

    Hi Vincent :)

 * Vincent Lefevre <vincent@vinc17.org> dixit:
> On 2006-01-05 23:11:09 +0100, DervishD wrote:
> >     Bash runs EXIT traps within any other trap, and GNU autoconf
> > seems to depend on this. I know that SUS (POSIX) doesn't say anything
> > about this, but...
> 
> This is a bug in bash, and the GNU autoconf shouldn't depend on
> bash bugs (BTW it will have problems with the traditional sh,
> which behave like zsh).

    I didn't know if that was a bash bug (that's why I was asking),
and I think exactly the same: autoconf shouldn't depend on bash bugs.
It has done in the past, but they aren't the only ones. Many
supposedly portable shell scripts out there doesn't asume "Bourne" or
"POSIX" or "SUS": they claim that, but they assume Bash...

    Unfortunately, this is a very annoying bug in bash, then. If I
write my traps so the cleanup is done in every trap, under Bash it
will be done twice, one in the corresponding trap and another in the
EXIT trap. Of course I've written the code to behave properly if this
happens.

    Thanks for the information :))

    Raúl Núñez de Arenas Coronado

-- 
Linux Registered User 88736 | http://www.dervishd.net
http://www.pleyades.net & http://www.gotesdelluna.net
It's my PC and I'll cry if I want to...


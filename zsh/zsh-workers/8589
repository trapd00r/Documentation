From zsh-workers-return-8589-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Nov 08 10:49:01 1999
Return-Path: <zsh-workers-return-8589-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6324 invoked from network); 8 Nov 1999 10:49:00 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Nov 1999 10:49:00 -0000
Received: (qmail 10452 invoked by alias); 8 Nov 1999 10:48:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8589
Received: (qmail 10437 invoked from network); 8 Nov 1999 10:48:50 -0000
Date: Mon, 8 Nov 1999 11:48:43 +0100 (MET)
Message-Id: <199911081048.LAA18853@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Mon, 8 Nov 1999 11:20:31 +0100
	(MET)
Subject: Re: PATCH: nested quotes


I wrote:

>   The
>   second change is that in cases like `./zsh -c ls\ <TAB>' no space is 
>   added any more.

Oops. This was also done if there wasn't any quoting at all.

Bye
 Sven

--- oldsrc/Zle/compcore.c	Mon Nov  8 11:23:31 1999
+++ Src/Zle/compcore.c	Mon Nov  8 11:35:35 1999
@@ -2053,7 +2053,7 @@
     cm->pre = pre;
     cm->suf = suf;
     cm->flags = flags;
-    if (*compqstack == '\\' ||
+    if ((*compqstack == '\\' && compqstack[1]) ||
 	(autoq && *compqstack && compqstack[1] == '\\'))
 	cm->flags |= CMF_NOSPACE;
     if (nbrbeg) {

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


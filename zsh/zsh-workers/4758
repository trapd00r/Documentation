From zsh-workers-request@math.gatech.edu Sat Dec 12 08:14:53 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14462 invoked from network); 12 Dec 1998 08:14:52 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 12 Dec 1998 08:14:52 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id DAA29505;
	Sat, 12 Dec 1998 03:08:40 -0500 (EST)
Resent-Date: Sat, 12 Dec 1998 03:08:40 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <981212000735.ZM23940@candle.brasslantern.com>
Date: Sat, 12 Dec 1998 00:07:35 -0800
In-Reply-To: <19981210210002.41623@athenaeum.demon.co.uk>
Comments: In reply to Phil Pennock <phil@athenaeum.demon.co.uk>
        "BUG: long prompts tangle ZLE" (Dec 10,  9:00pm)
References: <19981210210002.41623@athenaeum.demon.co.uk>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Zsh Development Workers <zsh-workers@math.gatech.edu>
Subject: Re: BUG: long prompts tangle ZLE
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"1nWTA2.0.vC7.7IYSs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4758
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Dec 10,  9:00pm, Phil Pennock wrote:
} Subject: BUG: long prompts tangle ZLE
}
} If the prompt length is 80 characters (on an 80-char width term) then
}  (a) the last character is not printed, or at least overwritten with a
}      space;
}  (b) more seriously, typing a command does not scroll the line up, but
}      instead overwrites the start of the line.

I can confirm this; in fact, it's weirder than Phil says -- if the prompt
exactly fills the width of the screen, then the last character is not
printed and the first character typed goes at the far right of the screen;
the second character typed causes the first character to be re-echoed at
the left edge (on top of the first character of the prompt) and then the
second character appears next to it.

A ctrl-L clears all this up until the next prompt is printed.

None of this happens in 3.0.5.  Geoff, did we lose some zle_refresh code
in the transition?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


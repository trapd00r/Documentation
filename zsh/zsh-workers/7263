From zsh-workers-return-7263-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jul 23 10:56:04 1999
Return-Path: <zsh-workers-return-7263-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14284 invoked from network); 23 Jul 1999 10:56:03 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Jul 1999 10:56:03 -0000
Received: (qmail 23083 invoked by alias); 23 Jul 1999 10:55:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7263
Received: (qmail 23076 invoked from network); 23 Jul 1999 10:55:56 -0000
Date: Fri, 23 Jul 1999 12:55:22 +0200 (MET DST)
Message-Id: <199907231055.MAA05078@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
CC: jeremie_petit@geocities.com
In-reply-to: Jeremie Petit's message of Fri, 23 Jul 1999 12:34:29 +0200
Subject: Re: One big and one little problem with ZSH-3.1.5-pws-25


Jeremie Petit wrote:

> Hello,
> 
>   I have two problems to report about ZSH-3.1.5-pws-25 compiled
> on Digital Unix 4.0D, with the native C compiler:
> 
>   Big Problem:
>   ============
> 
>   One thing that worked with -pwd-20 and no more with -pwd-25
> (I don't know in which version the problem happened), is that
> when I do loops where I call ls for example, at a moment I get
> a "job table full" error message. An example as:

Yes, we had a bit of trouble with the execution code lately
(sigh). This has already been fixed, though, try the latest version
available at ftp.zsh.org/testing/zsh-3.1.6-test-1.tar.gz (there is
also a patch file for test-2).

>   I've configured my prompt to use colors:
> 
>   PROMPT="%{[38;5;47;1m%}[%m]%{[38;5;225m%}%~%{[m%}:
> %{[38;5;210;1m%}"
> 
>   (Escape codes may not be visible here, but they work!)
>   I've compiled last xterm-112 with 256 colors support.
> 
>   When I write my command after the prompt, It's of the good color, but
> when
> I try to complete with "TAB", the texts becomes as the default (not bold
> &
> white for me)
> 
>   If I use a %B at the end, even when completing, the command (not the 
> completion list, I don't care about it) on the command line is bold, so
> it behaves correctly.
> 
>   Any idea why this doesn't work (FYI, I removed the RPROMPT for this
> test 
> purpose)

Hm, one problem might be that the refresh code doesn't know about the
stuff in the %{...%} and thus gets confused because the prompt itself
is not re-displayed after printing a completion list. Personally I
only use a highlighted prompt with the turn-off-stuff in POSTEDIT and
normal %B stuff in the prompt, which, of course, works fine.

Dunno if we should change the code to print the stuff inside %{... %}
pairs after a list has been displayed.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


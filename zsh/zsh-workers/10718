From zsh-workers-return-10718-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 13 00:26:34 2000
Return-Path: <zsh-workers-return-10718-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22259 invoked from network); 13 Apr 2000 00:26:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Apr 2000 00:26:33 -0000
Received: (qmail 11178 invoked by alias); 13 Apr 2000 00:26:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10718
Received: (qmail 11162 invoked from network); 13 Apr 2000 00:26:25 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <000412172613.ZM12744@candle.brasslantern.com>
Date: Wed, 12 Apr 2000 17:26:13 -0700
In-Reply-To: <E12fUAM-0001Ef-00.2000-04-12-21-55-14@cmailg1.svr.pol.co.uk>
Comments: In reply to Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
        "Re: List of unresolved issues" (Apr 12,  9:55pm)
References: <E12fUAM-0001Ef-00.2000-04-12-21-55-14@cmailg1.svr.pol.co.uk>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>,
        zsh-workers@sunsite.auc.dk
Subject: Re: List of unresolved issues
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Apr 12,  9:55pm, Peter Stephenson wrote:
> 
> I looked at the discussion we had earlier about typeset -x in functions
> (accidentally, by going to the top of the folder and starting to reply to
> things 3000 messages ago... just as well I realised) and frankly it doesn't
> increase my enthusiasm for doing anything about it.  It's all due to the
> confusion of `typeset' and `local' in ksh.  With the documented fact that
> `export' is equivalent to `typeset -gx', zsh is even now the only shell to
> handle this in a consistent way.

Are we both talking about the same things here?

There's already been a patch that makes `typeset -x' == `typeset -gx'.

The only remaining question (I think) is whether a variable that is already
a local can be put into the environment, and if so, whether such a variable
can be automatically removed from the environment again when the scope ends.

E.g.:

	local foo
	export foo	# in zsh this is a no-op;
			# in ksh it creates an environment string that is
			# removed from the environment at function exit

This doesn't have anything to do with confusion of `typeset' and `local';
it has to do with `export' NOT being confused with `typeset'.

How does that make zsh more consistent?


From zsh-workers-return-26633-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 28 19:13:39 2009
Return-Path: <zsh-workers-return-26633-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12776 invoked from network); 28 Feb 2009 19:13:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Feb 2009 19:13:27 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 85289 invoked from network); 28 Feb 2009 19:13:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Feb 2009 19:13:23 -0000
Received: (qmail 2108 invoked by alias); 28 Feb 2009 19:13:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26633
Received: (qmail 2098 invoked from network); 28 Feb 2009 19:13:19 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 28 Feb 2009 19:13:19 -0000
Received: from randymail-a12.g.dreamhost.com (caiajhbdcahe.dreamhost.com [208.97.132.74])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 341438058F83
	for <zsh-workers@sunsite.dk>; Sat, 28 Feb 2009 20:13:15 +0100 (CET)
Received: from blorf.net (dsl-74-220-65-6.cruzio.com [74.220.65.6])
	by randymail-a12.g.dreamhost.com (Postfix) with ESMTP id 30F6CA706C;
	Sat, 28 Feb 2009 11:13:13 -0800 (PST)
Date: Sat, 28 Feb 2009 11:13:11 -0800
From: Wayne Davison <wayned@users.sourceforge.net>
To: derf@sievert.tabularazor.org
Cc: zsh-workers@sunsite.dk
Subject: Re: [contrib] fish-like directory in prompt
Message-ID: <20090228191311.GA447@blorf.net>
References: <20090228115730.GA60598@sievert.tabularazor.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20090228115730.GA60598@sievert.tabularazor.org>
User-Agent: Mutt/1.5.15+20070412 (2007-04-11)
X-Virus-Scanned: ClamAV 0.92.1/9057/Sat Feb 28 14:56:20 2009 on bifrost
X-Virus-Status: Clean

On Sat, Feb 28, 2009 at 12:57:30PM +0100, derf@sievert.tabularazor.org wrote:
> it can also produce "tab-safe" paths, so if you take the path, paste
> it into a shell and press tab, it will safely expand to your current
> working directory.

Nice!  I encountered one issue if the path uses a symlink as a directory
component:  either the full symlink name is always included (if the
symlink is the only matching item with the starting letter), or not
enough path is output (if some other directory starts with the same
letter as the symlink).  The solution is to turn on symlink-following
for the glob:

- 			expn=($(echo ${part}*(/)))
+ 			expn=($(echo ${part}*(-/)))

..wayne..


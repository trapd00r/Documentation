From zsh-users-return-14612-mason-zsh=primenet.com.au@zsh.org Wed Nov 25 17:49:13 2009
Return-Path: <zsh-users-return-14612-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17537 invoked by alias); 25 Nov 2009 17:49:13 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14612
Received: (qmail 21210 invoked from network); 25 Nov 2009 17:49:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00,PLING_QUERY,
	RCVD_IN_DNSWL_LOW autolearn=no version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <200911251748.nAPHmrCX010198@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: Zsh list <zsh-users@zsh.org>
Subject: Re: should $! give the pid of subshell?
In-reply-to: <19213.26295.345572.732238@gargle.gargle.HOWL>
References: <19213.26295.345572.732238@gargle.gargle.HOWL>
Comments: In-reply-to Greg Klanderman <gak@klanderman.net>
   message dated "Wed, 25 Nov 2009 12:17:43 -0500."
Date: Wed, 25 Nov 2009 17:48:52 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 25 Nov 2009 17:48:54.0485 (UTC) FILETIME=[8E470850:01CA6DF7]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-03 (www.mailcontrol.com) on 10.68.0.161

Greg Klanderman wrote:
> If I do
> 
> % ( cd directory && command ) &
> % echo $!
> 
> should I get the pid of 'command' or of the subshell?

The latter, but actually they're the same here.  zsh "exec"s the final
command since it notices the subshell isn't needed any more so there's
no point in forking.  All you're guaranteed is that the stuff in ( ) is
executed as part of a subshell, you're not guaranteed the shell forks
again to run "command".

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-workers-return-22928-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 30 17:16:45 2006
Return-Path: <zsh-workers-return-22928-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24186 invoked from network); 30 Oct 2006 17:16:37 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Oct 2006 17:16:37 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 53427 invoked from network); 30 Oct 2006 17:16:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Oct 2006 17:16:28 -0000
Received: (qmail 8737 invoked by alias); 30 Oct 2006 17:16:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22928
Received: (qmail 8728 invoked from network); 30 Oct 2006 17:16:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 30 Oct 2006 17:16:23 -0000
Received: (qmail 53061 invoked from network); 30 Oct 2006 17:16:23 -0000
Received: from cluster-c.mailcontrol.com (168.143.177.190)
  by a.mx.sunsite.dk with SMTP; 30 Oct 2006 17:16:19 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly23c.srv.mailcontrol.com (MailControl) with ESMTP id k9UHFvme019438
	for <zsh-workers@sunsite.dk>; Mon, 30 Oct 2006 17:16:06 GMT
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 30 Oct 2006 17:16:04 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.7/8.13.4) with ESMTP id k9RGFpBW016053
	for <zsh-workers@sunsite.dk>; Fri, 27 Oct 2006 17:15:51 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.7/8.13.7/Submit) with ESMTP id k9RGFo0D016050
	for <zsh-workers@sunsite.dk>; Fri, 27 Oct 2006 17:15:50 +0100
Message-Id: <200610271615.k9RGFo0D016050@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Bug with multios, substitutions and functions
Date: Fri, 27 Oct 2006 17:15:50 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 30 Oct 2006 17:16:04.0741 (UTC) FILETIME=[14BC7350:01C6FC47]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-06-65 (www.mailcontrol.com) on 10.67.0.133

There's a complicated form of multio which causes the shell to hang:

% echo This is the file >file
% fn() { cat; }
% fn <$(echo file file)
This is the file
This is the file

I didn't even know that was supposed to work until I accidentally
tried it out.  Most similar forms do seem to work work.

In this case, the shell hangs.  For some reason the multio process,
althought it's finished, isn't marked as finished in the shell's process
list.

No idea of the underlying problem, but as usual I suspect the hacks for
current shell pipelines in exec.c.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


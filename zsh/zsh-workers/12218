From zsh-workers-return-12218-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jul 11 16:22:40 2000
Return-Path: <zsh-workers-return-12218-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4610 invoked from network); 11 Jul 2000 16:22:39 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 Jul 2000 16:22:39 -0000
Received: (qmail 12053 invoked by alias); 11 Jul 2000 16:22:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12218
Received: (qmail 12045 invoked from network); 11 Jul 2000 16:22:19 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000711162211.ZM8544@candle.brasslantern.com>
Date: Tue, 11 Jul 2000 16:22:11 +0000
In-Reply-To: <0FXJ000SN7PCTG@la-la.cambridgesiliconradio.com>
Comments: In reply to Peter Stephenson <pws@cambridgesiliconradio.com>
        "Line number monstrosity" (Jul 11, 12:53pm)
References: <0FXJ000SN7PCTG@la-la.cambridgesiliconradio.com> 
	<20000711094019.A17002@scowler.net> 
	<200007111354.PAA20014@beta.informatik.hu-berlin.de> 
	<20000711105759.A17410@scowler.net>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: Line number monstrosity
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jul 11, 12:53pm, Peter Stephenson wrote:
}
} % autoload flubba
} % flubba
} flubba:104: flubba: function definition file not found
} 
} The only problem is the `flubba:104:' at the start of the error message.
} It's not in the function yet, so shouldn't print that.

It should be possible to fix that by temporarily decrementing locallevel
in loadautofn().  The question is whether to decrement it just for that
particular error message, or for the entire duration of that C function
(including errors such as "function not defined by file").

On a related note, I'm a little puzzled by this behavior:

zagzig% cat < nonexistent         
zagzig% echo < nonexistent
zsh: no such file or directory: nonexistent
zagzig% cat < nonexistent 
zagzig% 

Why is there no error message for the bad redirection when the command is
not a builtin?

On Jul 11,  9:40am, Clint Adams wrote:
}
} In a vaguely similar vein, the 14 in
} cat:14: no such file or directory: nonexistent
} isn't particularly useful.

Why not?  You don't get line numbers for commands issued from the PS1
prompt, so you must be referring to something in a function or script;
and it's possible to have more than one "cat" in the same script, and to
need to know which of those failed.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-7249-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jul 21 17:02:46 1999
Return-Path: <zsh-workers-return-7249-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29917 invoked from network); 21 Jul 1999 17:02:44 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Jul 1999 17:02:44 -0000
Received: (qmail 20128 invoked by alias); 21 Jul 1999 17:02:30 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7249
Received: (qmail 20121 invoked from network); 21 Jul 1999 17:02:29 -0000
To: zsh-workers@sunsite.auc.dk
Subject: Re: core dump with completion.
References: <rsqogh62e8x.fsf@crane.jaist.ac.jp>
 <990721161435.ZM6916@candle.brasslantern.com>
MIME-Version: 1.0 (generated by AKEMI 1.13.2 - =?ISO-2022-JP?B?Ig==?=
 =?ISO-2022-JP?B?GyRCQTA0Y0s8GyhCIg==?=)
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@jaist.ac.jp>
Date: 22 Jul 1999 02:02:24 +0900
In-Reply-To: "Bart Schaefer"'s message of "Wed, 21 Jul 1999 16:14:35 +0000"
Message-ID: <rsqlnca2axr.fsf@crane.jaist.ac.jp>
Lines: 42
User-Agent: Chao-gnus/6.12.5 AKEMI/1.13.2 (=?ISO-2022-JP?B?GyRCQTAbKEI=?=
 =?ISO-2022-JP?B?GyRCNGNLPBsoQg==?=) FLAM-DOODLE/1.12.6
 (=?ISO-2022-JP?B?GyRCM3cbKEI=?= 10R4.0/5.0) Emacs/20.4
 (sparc-sun-solaris2.6) MULE/4.0 (HANANOEN)

In article <990721161435.ZM6916@candle.brasslantern.com>,
  "Bart Schaefer" <schaefer@candle.brasslantern.com> writes:

> I can't reproduce this; at least, not in a 3.1.5 static-build tree replacing
> "bin/zsh -f" with "Src/zsh -f".  Maybe it's a dynamic linkage thing.

I retried zsh-3.1.6-test-2 with patches upto 7243 and --disable-dynamic.
But it is reproduced.

In article <9907211549.AA13416@ibmth.df.unipi.it>,
  Peter Stephenson <pws@ibmth.df.unipi.it> writes:

> Something's happening in _first.  This is a no-op by default, so if you have
> something different it might help to see it.  If not then... er.

_first is not modified. And share/zsh/functions/* are not modified at
all.

#0  0xff136bf8 in strlen ()
(gdb) up
#1  0x6df68 in dupstring (s=0x1 <Address 0x1 out of bounds>) at mem.c:494
494         t = (char *)ncalloc(strlen((char *)s) + 1);
(gdb) up
#2  0x98424 in arrdup (s=0x1a754c) at utils.c:2234
2234        while ((*x++ = dupstring(*s++)));
(gdb) up
#3  0xabf40 in comp_wrapper (list=0x0, w=0x0, name=0x17c770 "_first")
    at compctl.c:2412
2412                owords = arrdup(compwords);
(gdb) print compwords[0]
$1 = 0x162c80 "sh"
(gdb) print compwords[1]
$2 = 0x1a7c10 ""
(gdb) print compwords[2]
$3 = 0x1 <Address 0x1 out of bounds>
(gdb) print compwords[3]
$4 = 0x0
(gdb) 

Hm...
-- 
Tanaka Akira


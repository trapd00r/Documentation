From zsh-workers-return-11891-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Jun 14 09:48:35 2000
Return-Path: <zsh-workers-return-11891-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4932 invoked from network); 14 Jun 2000 09:48:34 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Jun 2000 09:48:34 -0000
Received: (qmail 20350 invoked by alias); 14 Jun 2000 09:48:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11891
Received: (qmail 20342 invoked from network); 14 Jun 2000 09:48:21 -0000
Date: Tue, 13 Jun 2000 23:37:31 -0400
From: Clint Adams <schizo@debian.org>
To: zsh-workers@sunsite.auc.dk
Subject: more tok==0 problems?
Message-ID: <20000613233731.B25355@scowler.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0.1i

Disclaimer: I have no idea why anyone would want to do this.

zsh% zsh -f
zsh/2% time time
zsh/2% time time
zsh: 30346 segmentation fault  zsh -f

Compiled with debugging:

Starting program: /tmp/zsh-3.1.9/Src/zsh -f
% time time
unknown word code in gettext2()
unknown word code in gettext2()
unknown word code in gettext2()
% time time
unknown word code in gettext2()
unknown word code in gettext2()
unknown word code in gettext2()
% time time ls

Program received signal SIGSEGV, Segmentation fault.
0x80933f4 in ecgetstr (s=0xbffff8b8, dup=0, tok=0x0) at parse.c:2051
2051        wordcode c = *s->pc++;
(gdb) where
#0  0x80933f4 in ecgetstr (s=0xbffff8b8, dup=0, tok=0x0) at parse.c:2051
#1  0x80a3f33 in taddlist (state=0xbffff8b8, num=16773519) at text.c:86
#2  0x80a4ac3 in gettext2 (state=0xbffff8b8) at text.c:442
#3  0x80a40ed in getjobtext (prog=0x400145e8, c=0x40014614) at text.c:160
#4  0x805f6e0 in execpline2 (state=0xbffffa10, pcode=195, how=18, input=0, 
    output=0, last1=0) at exec.c:1175
#5  0x805eca9 in execpline (state=0xbffffa10, slcode=9218, how=18, last1=0)
    at exec.c:976
#6  0x805e689 in execlist (state=0xbffffa10, dont_change_job=0, exiting=0)
    at exec.c:821
#7  0x805e386 in execode (p=0x400145e8, dont_change_job=0, exiting=0)
    at exec.c:727
#8  0x80739f5 in loop (toplevel=1, justonce=0) at init.c:150
#9  0x80517b2 in main (argc=2, argv=0xbffffb04) at ./main.c:86


From zsh-workers-request@math.gatech.edu Wed Jan 20 15:55:19 1999
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6301 invoked from network); 20 Jan 1999 15:55:16 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 20 Jan 1999 15:55:16 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id KAA25943;
	Wed, 20 Jan 1999 10:50:21 -0500 (EST)
Resent-Date: Wed, 20 Jan 1999 10:50:21 -0500 (EST)
Message-Id: <9901201534.AA26168@ibmth.df.unipi.it>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: PATCH: 3.1.5-pws-4: compilation warnings
Date: Wed, 20 Jan 1999 16:34:12 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"nrG4L1.0.IL6.ziVfs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4931
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

This very dull patch suppresses a lot of compilation warnings from gcc
including the new ones from gcc 2.8.  I've tried it on OSes with both
char signed and unsigned to track down warnings about char subscripts.
One of the dangling `else' branches in hist.c actually appeared to be
a bug, with the logic not agreeing with the indentation.

The principle thing it doesn't do is tackle `might be used
uninitialized' warnings in the completion code.  There are also (with
gcc 2.8) still `might be clobbered by longjmp' warnings in zftp.c,
because I don't understand why they're appearing as the variables
aren't accessed after a longjmp.  With debugging turned on, you still
get the warnings that ANSI forbids variable length arrays, which is
due to gcc -pedantic recognising GNU extensions but complaining.

I expect to produce a pws-5 version soon.  I was hoping to include
Sven's new completion commands in this.  However, there are problems
with dynamical loading, since the compctl library now expects to
access code in the zle library, which on a lot of systems doesn't
work.  There's too much code to shift to the comp1 library, so it will
probably require a few extra hooks in comp1 along the lines of
printcompctlptr.  I don't know if I'll be able to look at that soon
enough.

begin 644 brace.dif.gz
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
#/```
`
end

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


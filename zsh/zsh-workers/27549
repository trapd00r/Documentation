From zsh-workers-return-27549-mason-zsh=primenet.com.au@zsh.org Fri Jan 01 16:53:02 2010
Return-Path: <zsh-workers-return-27549-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23086 invoked by alias); 1 Jan 2010 16:53:02 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27549
Received: (qmail 21407 invoked from network); 1 Jan 2010 16:52:51 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-0.3 required=5.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED,FH_DATE_PAST_20XX autolearn=no version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.219.220 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=ieFWjg4GxPmZDgTLA+aiO+YrdGyhgkoJXPTTZPZF1N4=;
        b=fXCNMS8VKIEW0OSQNlUqtMbZumX/Qoxc7vmdDeC4KRzGIf6iBBOxZDam9rVOtFaaGA
         r6l20tGufADxemTy9J2f+LhUPURkvXv9n6vSaKPomX2Hfnk5BpDHj65cz/ehIE8Ikeh5
         2x/MXR6iMux7g0CecRCHV7C5I7TuZy1bqfCaA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=Pm7fAa9YRUa7yii3eqIlB38BRFen+NcCMBobvFkvbWSQt9Oiw2ef94PXsOnKeXmijj
         ads1HH1ZLcoy24uALbfnvSB1rwF51Y/w/krdWk/JVSTecvXvDMhz3q77UFjaOzZut7ji
         Vrsvg/FYE0k7SYc7p138SUZiSB7KgCnCLYnLw=
MIME-Version: 1.0
In-Reply-To: <1262363710-8573-2-git-send-email-michael.a.hwang@gmail.com>
References: <1262363710-8573-1-git-send-email-michael.a.hwang@gmail.com>
	 <1262363710-8573-2-git-send-email-michael.a.hwang@gmail.com>
Date: Fri, 1 Jan 2010 11:46:39 -0500
Message-ID: <22a0ef081001010846m27f9a69chb11993875ccf5219@mail.gmail.com>
Subject: Re: [PATCH] Fixed k, v flags for P expansion flag with unquoted 
	reference.
From: Michael Hwang <michael.a.hwang@gmail.com>
To: zsh-workers@zsh.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry. I sent this with git send-email, and for some reason it didn't
send the accompanying message. I guess it also didn't want to reply to
my other thread.

I made a mistake in the previous update I made to my P flag patch.
This remedies that problem. Again, the changes can be pulled from the
pflag branch of my GitHub repo (git://github.com/Nomexous/zsh.git).

Michael Hwang

On Fri, Jan 1, 2010 at 11:35 AM, Michael Hwang
<michael.a.hwang@gmail.com> wrote:
> ---
> =A0Src/subst.c | =A0 =A02 +-
> =A01 files changed, 1 insertions(+), 1 deletions(-)
>
> diff --git a/Src/subst.c b/Src/subst.c
> index 730fcd2..4579812 100644
> --- a/Src/subst.c
> +++ b/Src/subst.c
> @@ -2030,7 +2030,7 @@ paramsubst(LinkList l, LinkNode n, char **str, int =
qt, int ssub)
>
> =A0 =A0 =A0 =A0 =A0 =A0if ((v && !v->isarr) || (!v && !isarr)) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0/* Reference is not an array. Just retriev=
e value. */
> - =A0 =A0 =A0 =A0 =A0 =A0 =A0 v =3D fetchvalue(&vbuf, &val, 0, 0);
> + =A0 =A0 =A0 =A0 =A0 =A0 =A0 v =3D fetchvalue(&vbuf, &val, 0, hkeys | hv=
als);
> =A0 =A0 =A0 =A0 =A0 =A0} else if (v && v->isarr) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0/* Reference is an array, stored in v. Con=
vert to val/aval. */
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0isarr =3D v->isarr;
> --
> 1.6.2.5
>
>


From zsh-users-return-3571-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Dec 17 23:06:54 2000
Return-Path: <zsh-users-return-3571-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16294 invoked from network); 17 Dec 2000 23:06:51 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Dec 2000 23:06:51 -0000
Received: (qmail 20516 invoked by alias); 17 Dec 2000 23:06:26 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3571
Received: (qmail 20509 invoked from network); 17 Dec 2000 23:06:25 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1001217230604.ZM19411@candle.brasslantern.com>
Date: Sun, 17 Dec 2000 23:06:04 +0000
In-Reply-To: <20001217214911.B13302@gmx.de>
Comments: In reply to Dominik Vogt <dominik.vogt@gmx.de>
        "permanent commands in history?" (Dec 17,  9:49pm)
References: <20001217214911.B13302@gmx.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: dominik.vogt@gmx.de, zsh-users@sunsite.auc.dk
Subject: Re: permanent commands in history?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Dec 17,  9:49pm, Dominik Vogt wrote:
} Subject: permanent commands in history?
}
} There are some command lines that I use frequently [...]
} Most of the time these are in my command line history and
} accessing them is easy [...]
} However, once in a while these are removed from the history file
} (1000 lines).  Is is possible to make certain command lines
} permanent in the history file so that I never have to retype them?

Not exactly, but you can make it appear that way.

Put the commands in a file somewhere, say, ~/.zhistalways or whatever.
Then in ~/.zshrc, use the command

	fc -R ~/.zhistalways

This assumes that ((HISTSIZE > SAVEHIST)), because otherwise the history
read from $HISTFILE will cause those commands to fall off again.

Or you could use

	< ~/.zhistalways >> $HISTFILE

instead, to assure that those commands are always the most recent ones.

Either way, I'd recommend setting either the HIST_EXPIRE_DUPS_FIRST or the
HIST_IGNORE_ALL_DUPS options (assuming you're using 3.1.9).

Or you can take a different approach, and avoid using the history at all,
and instead use the completion system (again assuming 3.1.9).  I have a
file named "_cmdselect" in my $fpath:

    #compdef -k menu-select ^X:
    local -a commands
    commands=(${(f)"$(cat)"}) <<\EOF
     (list of commonly-repeated commands goes here, one per line)
    EOF
    compadd -Q "$commands[@]"

When I run "compinit", it finds that file, autoloads it, and binds it to
the key sequence control-X colon.  When I want to use one of my frequent
commands, I type a prefix and then C-x : and the completion system does
the rest; if I didn't make the prefix unique, I get a menu from which to
choose.  (If you don't like the menuing behavior, change `menu-select' to
`complete-word' or `menu-complete' in the above.)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-27752-mason-zsh=primenet.com.au@zsh.org Tue Feb 23 09:49:04 2010
Return-Path: <zsh-workers-return-27752-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23917 invoked by alias); 23 Feb 2010 09:49:04 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27752
Received: (qmail 26654 invoked from network); 23 Feb 2010 09:48:53 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,DKIM_SIGNED,
	DKIM_VERIFIED autolearn=ham version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 74.125.78.146 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=U8gjnt7m2pYdVlTcQ4kJBnP4g0PYA+SBldFUsP7Ub7k=;
        b=XYY6YRNVHqgsMiOztOGcovvN3OE/HXPZjRNhlNHcxY+q+sLxFSEXGv1ABBosof84K8
         4lpmliF50L9vPFsm8Kn+LP9/rMn/clQmiJ6sNmx6nkvKWV1UG3FHZ++cUd7Spwr9YtFO
         BeZRSiLZQW8burprAJRFoxNSRNS92/V8W8viE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=fma0jV//zfc4rLr3aLT9unB33ao+6zfaurGFR4B6TuJIS2vfibryVoMBwuAPc5oVHS
         Cww2dTcGZsLB+QwD+vEH5OsBIJrMbf1tjW84Pn1f54ENldrUt2fdWvRsC1pE7Nozj7uw
         AuDRpl7NSAQfzl+HuRAYSibemiAnFJa29Ciec=
MIME-Version: 1.0
In-Reply-To: <100222184752.ZM26580@torch.brasslantern.com>
References: <2d460de71002220942y27ad63acxa3df7a9838ace0b8@mail.gmail.com>
	 <100222184752.ZM26580@torch.brasslantern.com>
Date: Tue, 23 Feb 2010 10:41:32 +0100
Message-ID: <2d460de71002230141v3bfb9673gdc35c391cea3f81@mail.gmail.com>
Subject: Re: Proposed feature: Selectively avoid adding to history (with code)
From: Richard Hartmann <richih.mailinglist@gmail.com>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-workers@zsh.org
Content-Type: text/plain; charset=UTF-8

On Tue, Feb 23, 2010 at 03:47, Bart Schaefer <schaefer@brasslantern.com> wrote:

> It'd be more useful if I could retroactively delete the last several
> commands from my history, because I never remember to turn this sort
> of thing on before I start testing. :-)

There is something on the mailing list about that. I used to use it, but
don't need to any more, as I have become better at opening new
shells for testing & doing HISTFILE=''.


> I'm not sure what you mean by "should be a _function"?

A built-in function that can be overriden.


> HIST_DISABLE or would probably be a better name.  Won't one of the side-
> effects be that you can't find those commands in the interactive history
> either?

I wanted to express that the effect is temporary and normal operation can
be resumed with the press of a button, so to speak. Also, that everything
before or after will still be stored.


>  I'd like stuff to remain in the interactive history but somehow
> be tagged so they're never written to $HISTFILE, which brings me to ...

Sounds useful but potentially confusing.


> A tagging effect probably does need to be controlled by an option, as
> the alternative is a builtin you can only call from zshaddhistory() or
> some such; but I think for what you've got here, your approach is fine.

If the topic of tagging comes up, there is other stuff that could be put
into the enhanced history. For example, PWD comes to mind.


Richard


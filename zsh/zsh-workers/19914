From zsh-workers-return-19914-mason-zsh=primenet.com.au@sunsite.dk Tue May 11 12:18:25 2004
Return-Path: <zsh-workers-return-19914-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11585 invoked from network); 11 May 2004 12:18:24 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 11 May 2004 12:18:24 -0000
Received: (qmail 5794 invoked from network); 11 May 2004 12:18:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 May 2004 12:18:04 -0000
Received: (qmail 20817 invoked by alias); 11 May 2004 12:18:00 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19914
Received: (qmail 20807 invoked from network); 11 May 2004 12:18:00 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 11 May 2004 12:17:57 -0000
Received: (qmail 5401 invoked from network); 11 May 2004 12:17:56 -0000
Received: from finlandia.infodrom.north.de (postfix@217.89.86.34)
  by a.mx.sunsite.dk with SMTP; 11 May 2004 12:17:54 -0000
Received: by finlandia.infodrom.north.de (Postfix, from userid 2006)
	id 4D4E410072; Tue, 11 May 2004 14:17:50 +0200 (CEST)
Date: Tue, 11 May 2004 14:17:50 +0200
From: Matthias Kopfermann <matthi@infodrom.north.de>
To: zsh-workers@sunsite.dk
Subject: zcalc bug
Message-ID: <20040511121749.GA17723@finlandia.infodrom.north.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
X-Operating-System: Debian GNU/Linux
User-Agent: Mutt/1.5.6i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0


I found another confusing bug the following way when i used zcalc:
This is with a huge history-file of over 40000 entries which may be
very well related to the bug.

I called zcalc that way: (locale is enabled in zsh!)
`LANG=en_US LC_ALL=en_US zcalc'.

First, the result of the multiplication (2.8*16.0 =>44,8) had a `,' in it
which i didn't understand as i thought there would be a point in the output
when using `LC_ALL=en_US'.

I got the expected _point_ only with LC_ALL=C.

Second, after I returned to zsh my history-number-prompt had a total
wrong number with about 81000 entries in it, as it seemed looking at
the history-number-prompt.
My right prompt was not the way it was before, too. This happens when
there are lots and lots of entries in the path-part of the prompt which
then "confuses" my cvs-zsh.

my PS1 prompt is:

PS1=^O%{^[[34m%}_________%{^[[0m%}_________%{^[[34m%}_________%{^[[0m%}_________%{^[[34m%}_________%{^[[34m%}_________%{^[[0m%}_________
[%{^[[01m%}%{^[[32m%}%~%{^[[0m%}] %{^[[01m%}%{^[[0m%}TTY:%{^[[32m%}%l%{^[[0m%}__hist:%h%{^[[0m%}__%D{%d.%m.%y} %{^[[0m%}%{^[[01m%}%{^[[1m^[[41m%} %?
%{^[[01m%}%{^[[33m%}%v%{^[[0m%}%#%B %{^[[0m%}

my RPS1 is %T %{^[[1;34m%}`ipa`%{^[[m%}
where ipa shows my ip-address.


	Matthias


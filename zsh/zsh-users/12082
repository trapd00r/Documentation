From zsh-users-return-12082-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 23 11:13:20 2007
Return-Path: <zsh-users-return-12082-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18677 invoked from network); 23 Oct 2007 11:13:11 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Oct 2007 11:13:11 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 45290 invoked from network); 23 Oct 2007 11:13:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Oct 2007 11:13:04 -0000
Received: (qmail 29366 invoked by alias); 23 Oct 2007 11:12:55 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12082
Received: (qmail 29344 invoked from network); 23 Oct 2007 11:12:54 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 23 Oct 2007 11:12:54 -0000
Received: (qmail 44052 invoked from network); 23 Oct 2007 11:12:54 -0000
Received: from smtp.ctxuk.citrix.com (HELO SMTP.EU.CITRIX.COM) (62.200.22.115)
  by a.mx.sunsite.dk with SMTP; 23 Oct 2007 11:12:48 -0000
X-IronPort-AV: E=Sophos;i="4.21,317,1188792000"; 
   d="scan'208";a="11484463"
Received: from lonpexchmx01.citrite.net ([10.30.224.191])
  by LONPIPO01.EU.CITRIX.COM with ESMTP; 23 Oct 2007 07:12:47 -0400
Received: from lonpexch01.citrite.net ([10.30.224.136]) by lonpexchmx01.citrite.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 23 Oct 2007 12:11:48 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Completion problems on cygwin when nocaseglob is set
Date: Tue, 23 Oct 2007 12:11:39 +0100
Message-ID: <DD74FBB8EE28D441903D56487861CD9D225F6432@lonpexch01.citrite.net>
In-Reply-To: <20071023101151.3757a369@news01>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Completion problems on cygwin when nocaseglob is set
thread-index: AcgVVMYQmYyVrea0QUWmw+kU59sI2QADN+Zg
References: <DD74FBB8EE28D441903D56487861CD9D223A0DF0@lonpexch01.citrite.net><20a807210710200509t43730713oa909fce4e0a57940@mail.gmail.com><DD74FBB8EE28D441903D56487861CD9D223A0DF8@lonpexch01.citrite.net><20071022103452.6c0580c6@news01><DD74FBB8EE28D441903D56487861CD9D224E86E7@lonpexch01.citrite.net><20071022123128.2db6000c@news01><DD74FBB8EE28D441903D56487861CD9D224E8A05@lonpexch01.citrite.net> <20071023101151.3757a369@news01>
From: "John Cooper" <John.Cooper@citrix.com>
To: "Peter Stephenson" <pws@csr.com>,
	"Zsh Users" <zsh-users@sunsite.dk>
Cc: "John Cooper" <John.Cooper@citrix.com>
X-OriginalArrivalTime: 23 Oct 2007 11:11:48.0451 (UTC) FILETIME=[8141C330:01C81565]

Setting the fake-files zstyle doesn't help.

"print /*" does not include "/c" after I "mount -c /" (I don't know
whether it should?).=20
If I "mount -c /cygdrive" then "print /*" includes "/cygdrive" (and
completion works), and "print /cygdrive/*" lists all my mounted drives.
If I "mount -c /m" then "print /*" includes "/m" (and completion works).

It's only when I "mount -c /" that the problem occurs.

However, with zsh 4.2.6 (and an earlier version of cygwin) on WinXP,
"print /*" also does not include "/c", but completion works here.

    --- John.


-----Original Message-----
From: Peter Stephenson [mailto:pws@csr.com]=20
Sent: 23 October 2007 10:12
To: Zsh Users
Subject: Re: Completion problems on cygwin when nocaseglob is set

On Mon, 22 Oct 2007 14:13:38 +0100
"John Cooper" <John.Cooper@citrix.com> wrote:
> I've attached the output from ^x? in the failing case.

I think the problem is somewhere in the utility compfiles.  Given a path
/
and a PREFIX c it should come up with a list of files at least including
"c", but it doesn't.  compfiles is incredibly obscure, but somewhere in
there it's doing globbing.

Does "print /*"  show everything you would expect?

Does setting
  zstyle ':completion:*' fake-files '/:c'
work around the problem?

--=20
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From zsh-workers-return-9628-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Feb 09 01:51:17 2000
Return-Path: <zsh-workers-return-9628-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5657 invoked from network); 9 Feb 2000 01:51:15 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Feb 2000 01:51:15 -0000
Received: (qmail 22001 invoked by alias); 9 Feb 2000 01:51:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9628
Received: (qmail 21993 invoked from network); 9 Feb 2000 01:51:08 -0000
Message-ID: <14496.51208.319493.828639@phl.itasoftware.com>
Date: Tue, 8 Feb 2000 20:51:04 -0500 (EST)
From: greg@klanderman.net (Greg Klanderman)
To: zsh-workers@sunsite.auc.dk (Zsh list)
Subject: bug in vared with command history
Reply-To: greg@klanderman.net
X-Mailer: VM 6.62 under 21.0 "Pyrenean" XEmacs Lucid (beta62)
Mime-Version: 1.0 (generated by tm-edit 7.108)
Content-Type: text/plain; charset=US-ASCII


(I sent this a few weeks ago and about a week later got a bounce
saying it was undeliverable so I am trying it again.  Please copy me
in any replies.)



In zsh 3.1.5,

% foo=bar
% fc -R <(echo one ; echo two) ; vared -h -p "> " foo

The inital contents is "bar".
Hit up-arrow once and you have "one", not "two".
Once the command completes, you can see that "two" has 
made it into the history.

I assume it is preventing you from getting at the last
command because that's usually the one you're executing.
But I'd like to be able to do something like:

    while cmd="" && vared -h -p "> " cmd ; do
      # process $cmd
      fc -R <(echo "$cmd")
    done

which works great except that I can never get to the very 
last command in the history.

thanks,
Greg


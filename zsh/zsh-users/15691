From zsh-users-return-15691-mason-zsh=primenet.com.au@zsh.org Thu Jan 06 23:36:12 2011
Return-Path: <zsh-users-return-15691-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22280 invoked by alias); 6 Jan 2011 23:36:11 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15691
Received: (qmail 15297 invoked from network); 6 Jan 2011 23:36:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW
	autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at bounce.antispameurope.com designates 83.246.65.54 as permitted sender)
KRecCount: 1
X-Originating-IP: [217.85.32.18]
X-KInfo: !spam auth
Date: Fri, 7 Jan 2011 00:27:13 +0100
From: Andy Spiegl <zsh.Andy@spiegl.de>
To: zsh-users@zsh.org
Subject: filename completion with umlauts (again)
Message-ID: <20110106232712.GA11387@spiegl.de>
Mail-Followup-To: zsh-users@zsh.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-PGP-GPG-Keys: mail -s "send pgp" auto@spiegl.de
X-Fingerprint: Key-ID C2CB30F0: 9051 50B9 13B0 57B9 10FD  48AC 4FA1 209B
 C2CB 30F0
X-Accepted-File-Formats: ASCII PDF OpenOffice - NO proprietory Microsoft
 files, please
X-how-to-quote: http://quoting.is-easy.de/
X-how-to-ask-questions: http://www.catb.org/~esr/faqs/smart-questions.html
X-stupid-disclaimers: http://goldmark.org/jeff/stupid-disclaimers/
User-Agent: Mutt/1.5.20 (2009-06-14)

Hi, back in 2003 (zsh 4.0.4) there was a completion bug with filenames
that have German umlauts in them.

 Date: Mon, 20 Jan 2003 10:29:23 -0500
 From: Andy Spiegl <zsh.Andy@spiegl.de>
 To: ZSH User List <zsh-users@sunsite.dk>
 Subject: How to do filename completion with umlauts?

It was fixed in 4.0.6 but somehow came back now.  I can't tell exactly
when but probably when I switched from latin1 to utf-8 (LANG=de_DE.UTF-8).

Here is the full description:

 $ zstyle ":completion:*" matcher-list '' 'm:{A-ZÄÖÜa-zäöü}={a-zäöüA-ZÄÖÜ}'
 $ touch foo füü
 $ ls fO<TAB>
 $ ls foo
but
 $ ls fÜ<TAB>
just beeps.

Ctrl-x h instead of TAB shows:
tags in context :completion::complete:ls::
    argument-rest options  (_arguments _ls (eval))
tags in context :completion::complete:ls:argument-rest:
    all-files  (_files _arguments _ls (eval))

Back in 2003, Oliver Kiddle asked me to try this:
> Can you try just using a simple function like this:
> _foo () {
> compadd -M 'm:{A-Zöäüa-zÖÄÜ}={a-zÖÄÜA-Zöäü}' - Ö123 Ä123 A567 Ü987
> }
> compdef _foo foo
> foo ä<tab>
I tried the same thing today but "foo ä<tab>" just beeps instead of
giving me "foo Ä123".


My locale settings are:
$ locale
LANG=de_DE.UTF-8
LC_CTYPE="de_DE.UTF-8"
LC_NUMERIC="de_DE.UTF-8"
LC_TIME="de_DE.UTF-8"
LC_COLLATE="de_DE.UTF-8"
LC_MONETARY="de_DE.UTF-8"
LC_MESSAGES="de_DE.UTF-8"
LC_PAPER="de_DE.UTF-8"
LC_NAME="de_DE.UTF-8"
LC_ADDRESS="de_DE.UTF-8"
LC_TELEPHONE="de_DE.UTF-8"
LC_MEASUREMENT="de_DE.UTF-8"
LC_IDENTIFICATION="de_DE.UTF-8"
LC_ALL=


Thanks for any hint,
 Andy.


-- 
 Why do we put suits in a garment bag and put garments in a suitcase?


From zsh-workers-request@math.gatech.edu Wed Aug 19 01:25:59 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10467 invoked from network); 19 Aug 1998 01:25:58 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 19 Aug 1998 01:25:58 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id VAA23439;
	Tue, 18 Aug 1998 21:20:00 -0400 (EDT)
Resent-Date: Tue, 18 Aug 1998 21:19:35 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980818182145.ZM7707@candle.brasslantern.com>
Date: Tue, 18 Aug 1998 18:21:45 -0700
In-Reply-To: <86ww85x609.fsf@animearchive.org>
Comments: In reply to David Hedbor <david@hedbor.org>
        "Re: zsh - new user with questions" (Aug 18,  3:46pm)
References: <199808181628.SAA21807@hydra.ifh.de> 
	<86ww85x609.fsf@animearchive.org>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: David Hedbor <david@hedbor.org>,
        zsh-users@math.gatech.edu (Zsh users list)
Subject: Re: zsh - new user with questions
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"zxXv_3.0.Jj5.cWYsr"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1734
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Aug 18,  3:46pm, David Hedbor wrote:
> Subject: Re: zsh - new user with questions
> Peter Stephenson <pws@ifh.de> writes:
> 
> bash-2.01$ ls /usr/loc/bi
>                       ^        
> bash-2.01$ ls /usr/local/bi
>                         ^
> With zsh:
> 
> ls /usr/loc/bi           => beep
>            ^
> ls /usr/loc/bin          => /usr/local/bin/
>            ^                          ^
> So problem one is that local is not expanded if the path segment after 
> it doesn't exist.

Try the following:

unsetopt completeinword
bindkey \^I expand-or-complete-prefix

Those settings will produce the effect you describe.  However, you may find
other differences from bash; I don't think there's any combinations of zsh
completion settings that exactly duplicate it.

You might also try setting up Functions/multicomp for extensive embedded
directory name completion.

> ls /usr/loc/bin/         => /usr/local/bin//
>            ^                          ^
> The second problem is that zsh adds a "/" at the end 
> of the path - always. I'd prefer if it didn't add one at all or at
> least just one (the infinite number of added slashes is clearly a
> bug).

I don't see that behavior, but I'm running a much-patched zsh.  What version
are you using?

> The third problem is something that often bites me hard:
> 
> bash: ls /usr/lobin	=> /usr/local/bin
> 		^	       		
> bash: ls /usr/lobin	=> beep
> 		^	       		
> Ie zsh can't complete the path if the cursor is not on a slash.

The expand-or-complete-prefix binding will take care of that, too.


From zsh-workers-return-21053-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 22 20:00:32 2005
Return-Path: <zsh-workers-return-21053-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11377 invoked from network); 22 Mar 2005 20:00:31 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Mar 2005 20:00:31 -0000
Received: (qmail 57231 invoked from network); 22 Mar 2005 20:00:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Mar 2005 20:00:25 -0000
Received: (qmail 11753 invoked by alias); 22 Mar 2005 20:00:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21053
Received: (qmail 11737 invoked from network); 22 Mar 2005 20:00:21 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Mar 2005 20:00:21 -0000
Received: (qmail 57035 invoked from network); 22 Mar 2005 20:00:21 -0000
Received: from morda.newmail.ru (HELO flock1.newmail.ru) (212.48.140.150)
  by a.mx.sunsite.dk with SMTP; 22 Mar 2005 20:00:17 -0000
Received: (qmail 3750 invoked from network); 22 Mar 2005 19:42:50 -0000
Received: from unknown (HELO ?10.0.0.1?) (arvidjaar@newmail.ru@83.237.61.202)
  by smtpd.newmail.ru with SMTP; 22 Mar 2005 19:42:50 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-workers@sunsite.dk
Subject: [PATCH] _kfmclient openProfile
Date: Tue, 22 Mar 2005 23:00:03 +0300
User-Agent: KMail/1.7.2
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503222300.10583.arvidjaar@newmail.ru>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

It tries more intelligen way to find Konqueror profiles.

- -andrey

Index: Completion/X/Command/_kfmclient
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_kfmclient,v
retrieving revision 1.4
diff -u -p -r1.4 _kfmclient
- --- Completion/X/Command/_kfmclient     5 Mar 2005 10:31:21 -0000       1.4
+++ Completion/X/Command/_kfmclient     22 Mar 2005 19:58:21 -0000
@@ -73,8 +73,9 @@ case $line[1] in
     _webbrowser
     return
   elif [[ $state = firstarg ]]; then
+    local appdata=${$(kde-config --path data 
2> /dev/null):-~/.kde/share/apps/}
     _wanted profile expl 'Konqueror profile' \
- -      compadd -- ~/.kde/share/apps/konqueror/profiles/*(:t)
+      compadd -- ${(s/:/)^${appdata}}konqueror/profiles/*(:t)
     return
   fi
   ;;
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQFCQHlKR6LMutpd94wRAprFAKDIl2ksER9vMW566mOTYjhinMfgdQCeJVHG
qEBnqSs5lv/s6mkHPV20VyI=
=0IFf
-----END PGP SIGNATURE-----


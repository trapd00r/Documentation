From zsh-workers-return-26128-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 11 17:48:02 2008
Return-Path: <zsh-workers-return-26128-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8002 invoked from network); 11 Dec 2008 17:47:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 11 Dec 2008 17:47:59 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 94378 invoked from network); 11 Dec 2008 17:47:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 11 Dec 2008 17:47:54 -0000
Received: (qmail 9215 invoked by alias); 11 Dec 2008 17:47:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26128
Received: (qmail 9197 invoked from network); 11 Dec 2008 17:47:49 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 11 Dec 2008 17:47:49 -0000
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 154BC80524C5
	for <zsh-workers@sunsite.dk>; Thu, 11 Dec 2008 18:47:45 +0100 (CET)
Received: from torch.brasslantern.com ([96.238.220.215])
 by vms173005.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0KBQ004ZD3J9TD20@vms173005.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 11 Dec 2008 11:35:43 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id mBBHZVI0021668	for
 <zsh-workers@sunsite.dk>; Thu, 11 Dec 2008 09:35:32 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id mBBHZVo9021667	for zsh-workers@sunsite.dk; Thu,
 11 Dec 2008 09:35:31 -0800
Date: Thu, 11 Dec 2008 09:35:31 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Quick way to lock up your shell
To: zsh-workers@sunsite.dk
Message-id: <081211093531.ZM21666@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.92.1/8746/Thu Dec 11 05:14:26 2008 on bifrost
X-Virus-Status: Clean

schaefer<501> FOO==(cat)

The shell is now hung forever waiting for a "cat" that will never exit,
because cat's standard input is neither closed nor connected to anything
(expect to the parent zsh, which isn't writing to it).

This happens at least as far back as 4.2.0, so it's not a new problem.

Similar things can happen with <<(cat) except in that case the shell is
not locked up, it has a background job of whose status it loses track.
I haven't figured out exactly how to reproduce that one, but once it
gets that way even killing the job externally will leave zsh believing
that the job is still active (so e.g. "wait" hangs until interrupted).


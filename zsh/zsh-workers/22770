From zsh-workers-return-22770-mason-zsh=primenet.com.au@sunsite.dk Tue Sep 26 17:07:34 2006
Return-Path: <zsh-workers-return-22770-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13199 invoked from network); 26 Sep 2006 17:07:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.5 (2006-08-29) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Sep 2006 17:07:30 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 26868 invoked from network); 26 Sep 2006 17:07:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Sep 2006 17:07:24 -0000
Received: (qmail 14204 invoked by alias); 26 Sep 2006 17:07:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22770
Received: (qmail 14195 invoked from network); 26 Sep 2006 17:07:20 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 26 Sep 2006 17:07:20 -0000
Received: (qmail 26552 invoked from network); 26 Sep 2006 17:07:20 -0000
Received: from cluster-d.mailcontrol.com (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 26 Sep 2006 17:07:18 -0000
Received: from rly16d.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly16d.srv.mailcontrol.com (MailControl) with ESMTP id k8QH7EUT031198
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <zsh-workers@sunsite.dk>; Tue, 26 Sep 2006 18:07:14 +0100
Received: from submission.mailcontrol.com (submission.mailcontrol.com [212.158.48.250])
	by rly16d.srv.mailcontrol.com (MailControl) id k8QH187S016206
	for zsh-workers@sunsite.dk; Tue, 26 Sep 2006 18:01:08 +0100
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly16d-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id k8QH0KEF014390; Tue, 26 Sep 2006 18:01:08 +0100 (BST)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Sep 2006 18:00:40 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.7/8.13.4) with ESMTP id k8QH0eOx001794;
	Tue, 26 Sep 2006 18:00:40 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.7/8.13.7/Submit) with ESMTP id k8QH0eVd001791;
	Tue, 26 Sep 2006 18:00:40 +0100
Message-Id: <200609261700.k8QH0eVd001791@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: "Larry P. Schrof" <larry@schrof.net>,
        zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: (Revisited): zsh + less == hard hang of tty. 
In-reply-to: <20060926142946.GA1608@lucien.blight.com> 
References: <20060926142946.GA1608@lucien.blight.com>
Comments: In-reply-to "Larry P. Schrof" <larry@schrof.net>
   message dated "Tue, 26 Sep 2006 09:29:46 -0500."
Date: Tue, 26 Sep 2006 18:00:39 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 26 Sep 2006 17:00:40.0809 (UTC) FILETIME=[4BFC1D90:01C6E18D]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-07-04-02 (www.mailcontrol.com) on 10.68.1.126

"Larry P. Schrof" wrote:
> When in zsh, if I do: less <some_file>, the terminal HARD HANGS.

It sounds like this is reproducible in your case.  Since this doesn't
seem to be a general problem, we need to find out what's different.

Does the same happen with

  zsh -c 'less <file>'

or, if not, with

  zsh -ic 'less <file>'

(which has interactive handling turned on)?  If so, the last few entries
you get with "strace" in front of the appropriate one might be
interesting.  You might get a huge amount of output in the second case
owing to initialisation files.

Otherwise, use gdb to attach to the hung process in question.  This is
most useful if zsh was compiled with debugging (configure
--enable-zsh-debug does that).

% gdb zsh
(gdb) attach 14183
(gdb) bt

However, it might actually be hung in less and zsh is simply waiting for
that to finish.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php


From zsh-workers-return-16572-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 06 06:36:26 2002
Return-Path: <zsh-workers-return-16572-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13336 invoked from network); 6 Feb 2002 06:36:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 Feb 2002 06:36:25 -0000
Received: (qmail 803 invoked by alias); 6 Feb 2002 06:36:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16572
Received: (qmail 787 invoked from network); 6 Feb 2002 06:36:15 -0000
Message-ID: <20020206063613.11652.qmail@web10407.mail.yahoo.com>
Date: Tue, 5 Feb 2002 22:36:13 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: BUG: compdescribe/computils.c causing seg fault
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

There is a bug in compdescribe.  One place that it is tickled is on line 109 in
_describe. I encountered this bug will trying to complete args to the configure
command as "./configure --<TAB>"

This bug causes a seg. fault.  The problem happens in the computils.c file.

616       int dlen = columns - cd_state.gpre - cd_state.slen;

At line 616, the computed value of dlen is negative which causes problems. 
It's not clear to me why this should always be a positive number.  The value of
cd_state.gpre is set at line 316, and is just a sum.  There is nothing that
limits the value.  I was seeing cd_state.gpre have a value of 360+ (this was
the sum of 24 values from wids[]), while columns was 80.

This took a little time to track down.  One thing that would have been useful
in this case, would be some sort of check on values used for VARARR and alloc
particularly with the memory debugging flags set.

-FR.


__________________________________________________
Do You Yahoo!?
Send FREE Valentine eCards with Yahoo! Greetings!
http://greetings.yahoo.com


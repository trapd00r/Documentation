From zsh-workers-request@math.gatech.edu Mon Jun 01 12:20:18 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8623 invoked from network); 1 Jun 1998 12:20:17 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 1 Jun 1998 12:20:17 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id IAA28941;
	Mon, 1 Jun 1998 08:13:05 -0400 (EDT)
Resent-Date: Mon, 1 Jun 1998 08:13:05 -0400 (EDT)
Message-Id: <19980601081357.58829@actor.cs.vt.edu>
Date: Mon, 1 Jun 1998 08:13:57 -0400
From: Andy Wick <awick@actor.cs.vt.edu>
To: zsh-workers@math.gatech.edu
Subject: up-line-or-search
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.89
Resent-Message-ID: <"4biqs.0.847.HhfSr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4013
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I guess I am the only one who uses up-line-or-search, since it
is still broken in 3.1.4.  I did a little bit of debugging, but
since I have no clue what is going on, I am really not much help.
If you comment out line 376 of Zle/zle_hist.c
    iblank(s[histmpos] == Meta ? s[histmpos+1]^32 : s[histmpos]) &&
up-line-or-search will kind of work, which is better then not
working.  What it still does with that line commented out is forget
the orginal string typed in, and uses the last string found each
time you hit up arrow.

Example:
(Previous Commands)
%lss -d
%ls -l
%lss
%ls

Now if I do 
   l<uparrow>
it finds "ls" if I hit up arrow again it finds "lss", one more
up arrow skips the "ls -l" and finds the "lss -d".

I'll buy someone a pizza if they just fix this for me, I really
want to upgrade to 3.1.x, but can't without my favorite feature.

Thanks,
Andy
-- 
awick@vt.edu                                    Andy Wick
awick@purple.org                              Virginia Tech


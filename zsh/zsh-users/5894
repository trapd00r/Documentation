From zsh-users-return-5894-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 07 21:33:47 2003
Return-Path: <zsh-users-return-5894-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3837 invoked from network); 7 Feb 2003 21:33:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 7 Feb 2003 21:33:46 -0000
Received: (qmail 397 invoked by alias); 7 Feb 2003 21:33:00 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5894
Received: (qmail 381 invoked from network); 7 Feb 2003 21:33:00 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 7 Feb 2003 21:33:00 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [198.74.20.150] by sunsite.dk (MessageWall 1.0.8) with SMTP; 7 Feb 2003 21:32:59 -0000
Received: from amis.norwest.com by sinclair-rm2.norwest.com
          via smtpd (for sunsite.dk [130.225.247.90]) with SMTP; 7 Feb 2003 21:33:02 UT
Received: from whitestar.norwest.com (unixm7.wellsfargo.com [10.88.15.244])
	by amis.norwest.com (8.12.4/8.12.4) with SMTP id h17LNT1g015859
	for <zsh-users@sunsite.dk>; Fri, 7 Feb 2003 15:23:29 -0600 (CST)
Received: from unixm7.wellsfargo.com by whitestar.norwest.com
          via smtpd (for amis.norwest.com [198.74.20.150]) with SMTP; 7 Feb 2003 21:33:01 UT
Received: from xcgi-cacah-01.wellsfargo.com (localhost [127.0.0.1])
	by unixm7.wellsfargo.com (8.9.3/8.9.3) with ESMTP id PAA28073
	for <zsh-users@sunsite.dk>; Fri, 7 Feb 2003 15:33:00 -0600 (CST)
From: Eric.D.Friedman@WellsFargo.COM
Received: by xcgi-cacah-01.wellsfargo.com with Internet Mail Service (5.5.2653.19)
	id <CP9JX8DL>; Fri, 7 Feb 2003 13:32:59 -0800
Message-ID: <8F6C90BF40FFD211948B0001FA7E51661288DF8F@xcem-casfo-13.wellsfargo.com>
To: zsh-users@sunsite.dk
Subject: completing a single clearcase command
Date: Fri, 7 Feb 2003 13:32:56 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="ISO-8859-1"

I know that various folks have tried to tackle completion for rational
clearcase, with some success.  I have a very specific completion task I'd
like to get working (as opposed to tackling the whole beast), and would
appreciate some pointers as to how to proceed.

Note that I'm using the "new" completion system.

Like CVS, clearcase has a 2-level command system.  The first command is
always "cleartool" (usually aliased to "ct").  The second is the real
operation you want to do.  So, for example, "ct ls" does a cleartool
equivalent of ls.

The subcommand I'm interested in getting completion on is "setview," which
has the following usage:

Usage: setview [-login] [-exec command-invocation] view-tag

The view-tag argument will be a name pulled from the list of available
views.  A list of these can be gotten (1 entry per line) by running
"cleartool lsview -short"

So, what I'd like to do is be able to type:

ct setview -l<TAB>  # complete optional switch
--> ct setview -login eric<TAB> # complete view-tag, using list from ct
lsview -short
  --> ct setview -login ericf_some_view_tag_from_ct_lsview_short_list<RET>

But, I'd like to still be able to get file completion and so forth on other
clearcase subcommands, so it's important that that not be disabled in the
process.

Any pointers/snippets would be very much appreciated.

Eric


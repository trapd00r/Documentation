From zsh-workers-return-10170-mason-zsh=primenet.com.au@sunsite.auc.dk Sun Mar 19 20:59:33 2000
Return-Path: <zsh-workers-return-10170-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14619 invoked from network); 19 Mar 2000 20:59:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Mar 2000 20:59:31 -0000
Received: (qmail 27242 invoked by alias); 19 Mar 2000 20:59:18 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10170
Received: (qmail 27226 invoked from network); 19 Mar 2000 20:59:17 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000319205911.ZM17745@candle.brasslantern.com>
Date: Sun, 19 Mar 2000 20:59:11 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Infinite loop (?) in "typeset"
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

It seems to be trying to print out the body of the _normal function from
the $functions assoc, but I'm not quite sure.  It repeatedly executes

228         while (1) {
229             if (stack) {
230                 if (!(s = tstack))
232                 if (s->pop) {
237                 code = s->code;
238                 stack = 0;
239             } else {
243             switch (wc_code(code)) {
697                 stack = 1;
698                 break;

(gdb) where
#0  0x80a0bc4 in gettext2 (state=0xbfffefac) at ../../zsh-3.1.6/Src/text.c:229
#1  0x80a0a8a in getpermtext (prog=0x80e9ff8, c=0x80d52c8)
    at ../../zsh-3.1.6/Src/text.c:125
#2  0x40147a7a in scanfunctions (ht=0x80dda38, 
    func=0x808bb34 <printparamnode>, flags=8, dis=0)
    at ../../../zsh-3.1.6/Src/Modules/parameter.c:516
#3  0x40147aff in scanpmfunctions (ht=0x80dda38, 
    func=0x808bb34 <printparamnode>, flags=8)
    at ../../../zsh-3.1.6/Src/Modules/parameter.c:532
#4  0x806a770 in scanhashtable (ht=0x80dda38, sorted=0, flags1=0, 
    flags2=1048576, scanfunc=0x808bb34 <printparamnode>, scanflags=8)
    at ../../zsh-3.1.6/Src/hashtable.c:367
#5  0x808bf86 in printparamnode (hn=0x80c81a0, printflags=2)
    at ../../zsh-3.1.6/Src/params.c:3116
#6  0x806a8b0 in scanhashtable (ht=0x80c7438, sorted=1, flags1=0, flags2=0, 
    scanfunc=0x808bb34 <printparamnode>, scanflags=2)
    at ../../zsh-3.1.6/Src/hashtable.c:388
#7  0x80547b3 in bin_typeset (name=0x400e4980 "typeset", argv=0xbffff48c, 
    ops=0xbffff4ec "", func=0) at ../../zsh-3.1.6/Src/builtin.c:1853
#8  0x805165d in execbuiltin (args=0x400e4968, bn=0x80b1328)
    at ../../zsh-3.1.6/Src/builtin.c:368
#9  0x806140a in execcmd (state=0xbffff7a0, input=0, output=0, how=18, last1=2)
    at ../../zsh-3.1.6/Src/exec.c:2253
#10 0x805e20b in execpline2 (state=0xbffff7a0, pcode=8771, how=18, input=0, 
    output=0, last1=0) at ../../zsh-3.1.6/Src/exec.c:1179
#11 0x805d79b in execpline (state=0xbffff7a0, slcode=3074, how=18, last1=0)
    at ../../zsh-3.1.6/Src/exec.c:972
#12 0x805d199 in execlist (state=0xbffff7a0, dont_change_job=0, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:819
#13 0x805ce9b in execode (p=0x400e4928, dont_change_job=0, exiting=0)
    at ../../zsh-3.1.6/Src/exec.c:725
#14 0x807037a in loop (toplevel=1, justonce=0)
    at ../../zsh-3.1.6/Src/init.c:150
#15 0x8050c50 in main (argc=2, argv=0xbffff81c)
    at ../../zsh-3.1.6/Src/main.c:86

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Волшебство Git - Глава 5. Уроки истории</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Волшебство Git">
  <link rel="up" href="index.html" title="Волшебство Git">
  <link rel="prev" href="ch04.html" title=
  "Глава 4. Чудеса ветвления">
  <link rel="next" href="ch06.html" title=
  "Глава 6. Многопользовательский Git">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Волшебство Git</b></li>
        <li><span class="preface"><a href="index.html">От редактора
        перевода</a></span></li>

        <li>
          <span class="preface"><a href=
          "pr02.html">Предисловие</a></span>

          <ul>
            <li><span class="section"><a href=
            "pr02.html#_%D0%B1%D0%BB%D0%B0%D0%B3%D0%BE%D0%B4%D0%B0%D1%80%D0%BD%D0%BE%D1%81%D1%82%D0%B8">
            Благодарности</a></span></li>

            <li><span class="section"><a href=
            "pr02.html#_%D0%BB%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F">
            Лицензия</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Введение</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%8D%D1%82%D0%BE_%D0%B8%D0%B3%D1%80%D0%B0">
            Работа - это игра</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F%D0%BC%D0%B8">
            Управление версиями</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_%D1%80%D0%B0%D1%81%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B5_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5">
            Распределенное управление</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_%D0%B3%D0%BB%D1%83%D0%BF%D1%8B%D0%B5_%D0%BF%D1%80%D0%B5%D0%B4%D1%80%D0%B0%D1%81%D1%81%D1%83%D0%B4%D0%BA%D0%B8">
            Глупые предрассудки</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_%D0%BA%D0%BE%D0%BD%D1%84%D0%BB%D0%B8%D0%BA%D1%82%D1%8B_%D0%BF%D1%80%D0%B8_%D1%81%D0%BB%D0%B8%D1%8F%D0%BD%D0%B8%D0%B8">
            Конфликты при слиянии</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Базовые
          операции</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F">
            Сохранение состояния</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%B5%D1%80%D0%B5%D0%B8%D0%BC%D0%B5%D0%BD%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
            Добавление, удаление, переименование</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D1%80%D0%B0%D1%81%D1%88%D0%B8%D1%80%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BE%D1%82%D0%BC%D0%B5%D0%BD%D0%B0_%D0%B2%D0%BE%D0%B7%D0%B2%D1%80%D0%B0%D1%82">
            Расширенные отмена/возврат</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D0%BE%D1%82%D0%BA%D0%B0%D1%82%D1%8B">Откаты</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%B0_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9">
            Создание списка изменений</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D1%81%D0%BA%D0%B0%D1%87%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2">
            Скачивание файлов</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D0%B4%D0%B5%D1%80%D0%B6%D0%B0_%D1%80%D1%83%D0%BA%D1%83_%D0%BD%D0%B0_%D0%BF%D1%83%D0%BB%D1%8C%D1%81%D0%B5">
            Держа руку на пульсе</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D0%B1%D0%B5%D0%B7%D0%BE%D1%82%D0%BB%D0%B0%D0%B3%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F">
            Безотлагательная публикация</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D1%87%D1%82%D0%BE_%D1%8F_%D1%81%D0%B4%D0%B5%D0%BB%D0%B0%D0%BB">
            Что я сделал?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_%D1%83%D0%BF%D1%80%D0%B0%D0%B6%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5">
            Упражнение</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Все о
          клонировании</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_%D1%81%D0%B8%D0%BD%D1%85%D1%80%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F_%D0%BA%D0%BE%D0%BC%D0%BF%D1%8C%D1%8E%D1%82%D0%B5%D1%80%D0%BE%D0%B2">
            Синхронизация компьютеров</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B8%D1%81%D1%85%D0%BE%D0%B4%D0%BD%D1%8B%D0%BC_%D0%BA%D0%BE%D0%B4%D0%BE%D0%BC">
            Классическое управление исходным кодом</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D0%B3%D0%BE%D0%BB%D1%8B%D0%B5_bare_%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89%D0%B0">
            Голые (bare) хранилища</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_%D0%B8%D0%BB%D0%B8_pull">Push или
            pull?</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5_%D1%84%D0%BE%D1%80%D0%BA%D0%B0_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0">
            Создание форка проекта</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D0%BC%D0%B0%D0%BA%D1%81%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%B1%D1%8D%D0%BA%D0%B0%D0%BF%D1%8B">
            Максимальные бэкапы</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C_%D1%81%D0%BE_%D1%81%D0%BA%D0%BE%D1%80%D0%BE%D1%81%D1%82%D1%8C%D1%8E_%D1%81%D0%B2%D0%B5%D1%82%D0%B0">
            Многозадачность со скоростью света</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D0%BF%D0%B0%D1%80%D1%82%D0%B8%D0%B7%D0%B0%D0%BD%D1%81%D0%BA%D0%BE%D0%B5_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D1%8F%D0%BC%D0%B8">
            Партизанское управление версиями</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_%D0%BF%D0%BE%D1%87%D0%B5%D0%BC%D1%83_%D1%8F_%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D1%8E_git">
            Почему я использую Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Чудеса
          ветвления</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_%D0%BA%D0%BD%D0%BE%D0%BF%D0%BA%D0%B0_%D0%B1%D0%BE%D1%81%D1%81%D0%B0">
            Кнопка босса</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D0%B3%D1%80%D1%8F%D0%B7%D0%BD%D0%B0%D1%8F_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0">
            Грязная работа</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D0%B1%D1%8B%D1%81%D1%82%D1%80%D1%8B%D0%B5_%D0%B8%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F">
            Быстрые исправления</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D1%81%D0%BB%D0%B8%D1%8F%D0%BD%D0%B8%D1%8F">
            Слияния</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D0%BD%D0%B5%D0%BF%D1%80%D0%B5%D1%80%D1%8B%D0%B2%D0%BD%D1%8B%D0%B9_%D1%80%D0%B0%D0%B1%D0%BE%D1%87%D0%B8%D0%B9_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81">
            Непрерывный рабочий процесс</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC_%D1%81%D0%BE%D1%81%D1%82%D0%B0%D0%B2_%D1%81%D0%BC%D0%B5%D1%81%D0%B8">
            Изменяем состав смеси</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%B2%D0%B5%D1%82%D0%BA%D0%B0%D0%BC%D0%B8">
            Управление Ветками</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%B2%D0%B5%D1%82%D0%BA%D0%B8">
            Временные Ветки</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B9%D1%82%D0%B5_%D0%BA%D0%B0%D0%BA_%D0%B2%D0%B0%D0%BC_%D0%BD%D1%80%D0%B0%D0%B2%D0%B8%D1%82%D1%81%D1%8F">
            Работайте как вам нравится</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Уроки
          истории</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B0%D1%8F%D1%81%D1%8C_%D0%BA%D0%BE%D1%80%D1%80%D0%B5%D0%BA%D1%82%D0%BD%D1%8B%D0%BC">
            Оставаясь корректным</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D0%B8_%D0%BA%D0%BE%D0%B5_%D1%87%D1%82%D0%BE_%D0%B5%D1%89%D0%B5">
            …И кое-что еще</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D1%8F%D1%8E%D1%82%D1%81%D1%8F">
            Локальные изменения сохраняются</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D0%BF%D0%B5%D1%80%D0%B5%D0%BF%D0%B8%D1%81%D1%8B%D0%B2%D0%B0%D1%8F_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8E">
            Переписывая историю</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%8F_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8E">
            Создавая Историю</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0_%D0%B6%D0%B5_%D0%B2%D1%81%D0%B5_%D0%BF%D0%BE%D1%88%D0%BB%D0%BE_%D0%BD%D0%B5_%D1%82%D0%B0%D0%BA">
            Когда же все пошло не так?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D0%B8%D0%B7_%D0%B7%D0%B0_%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B2%D1%81%D0%B5_%D0%BF%D0%BE%D1%88%D0%BB%D0%BE_%D0%BD%D0%B5_%D1%82%D0%B0%D0%BA">
            Из-за кого все пошло не так?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D0%B9_%D0%BE%D0%BF%D1%8B%D1%82">
            Личный опыт</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6.
          Многопользовательский Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_%D0%BA%D1%82%D0%BE_%D1%8F">Кто
            я?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_ssh_http">
            Git через SSH, HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D1%87%D1%82%D0%BE_%D1%83%D0%B3%D0%BE%D0%B4%D0%BD%D0%BE">
            Git через что угодно</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%D0%BF%D0%B0%D1%82%D1%87%D0%B8_%D0%BE%D0%B1%D1%89%D0%B5%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5">
            Патчи: общее применение</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%D0%BF%D1%80%D0%B8%D0%BD%D0%BE%D1%81%D0%B8%D0%BC_%D0%B8%D0%B7%D0%B2%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_%D0%BC%D1%8B_%D0%BF%D0%B5%D1%80%D0%B5%D0%B5%D1%85%D0%B0%D0%BB%D0%B8">
            Приносим извинения, мы переехали</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5_%D0%B2%D0%B5%D1%82%D0%BA%D0%B8">
            Удаленные ветки</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%D0%BD%D0%B5%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE_%D1%83%D0%B4%D0%B0%D0%BB%D0%B5%D0%BD%D0%BD%D1%8B%D1%85_%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D0%BB%D0%B8%D1%89">
            Несколько удаленных хранилищ</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_%D0%BC%D0%BE%D0%B8_%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8">
            Мои Настройки</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7.
          Гроссмейстерство Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_%D1%80%D0%B5%D0%BB%D0%B8%D0%B7%D1%8B_%D0%B8%D1%81%D1%85%D0%BE%D0%B4%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2">
            Релизы исходников</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9">
            Коммит изменений</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D0%BC%D0%BE%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82_%D1%81%D0%BB%D0%B8%D1%88%D0%BA%D0%BE%D0%BC_%D0%B2%D0%B5%D0%BB%D0%B8%D0%BA">
            Мой коммит слишком велик</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81_%D0%B1%D1%83%D1%84%D0%B5%D1%80%D0%BD%D0%B0%D1%8F_%D0%B7%D0%BE%D0%BD%D0%B0_git">
            Индекс — буферная зона Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D0%BD%D0%B5_%D1%82%D0%B5%D1%80%D1%8F%D0%B9_%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D1%8B">
            Не теряй «головы»</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D0%BE%D1%85%D0%BE%D1%82%D0%B0_%D0%B7%D0%B0_%D0%B3%D0%BE%D0%BB%D0%BE%D0%B2%D0%B0%D0%BC%D0%B8">
            Охота за «головами»</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_git_%D0%BA%D0%B0%D0%BA_%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%B0">
            Git как основа</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D1%80%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%82%D1%80%D1%8E%D0%BA%D0%B8">
            Рискованные трюки</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_%D0%BF%D1%80%D0%B5%D0%B4%D0%BE%D1%82%D0%B2%D1%80%D0%B0%D1%89%D0%B0%D0%B5%D0%BC_%D0%BF%D0%BB%D0%BE%D1%85%D0%B8%D0%B5_%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D1%8B">
            Предотвращаем плохие коммиты</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Раскрываем
          тайны</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_%D0%BD%D0%B5%D0%B2%D0%B8%D0%B4%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C">
            Невидимость</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D1%86%D0%B5%D0%BB%D0%BE%D1%81%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C">
            Целостность</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%B8%D0%BD%D1%82%D0%B5%D0%BB%D0%BB%D0%B5%D0%BA%D1%82">
            Интеллект</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%B8%D0%BD%D0%B4%D0%B5%D0%BA%D1%81%D0%B0%D1%86%D0%B8%D1%8F">
            Индексация</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%BF%D1%80%D0%BE%D0%B8%D1%81%D1%85%D0%BE%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_git">
            Происхождение Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%B1%D0%B0%D0%B7%D0%B0_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85_%D0%BE%D0%B1%D1%8A%D0%B5%D0%BA%D1%82%D0%BE%D0%B2">
            База данных объектов</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%B1%D0%BB%D0%BE%D0%B1%D1%8B">Блобы</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D1%8C%D1%8F">
            Деревья</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82%D1%8B">
            Коммиты</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%D0%BD%D0%B5%D0%BE%D1%82%D0%BB%D0%B8%D1%87%D0%B8%D0%BC%D0%BE_%D0%BE%D1%82_%D0%B2%D0%BE%D0%BB%D1%88%D0%B5%D0%B1%D1%81%D1%82%D0%B2%D0%B0">
            Неотличимо от волшебства</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Недостатки
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_%D1%81%D0%BB%D0%B0%D0%B1%D0%BE%D1%81%D1%82%D0%B8_sha1">
            Слабости SHA1</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%BD%D0%B5%D1%81%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D1%84%D0%B0%D0%B9%D0%BB%D1%8B">
            Несвязанные файлы</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%BA%D1%82%D0%BE_%D0%B8_%D1%87%D1%82%D0%BE_%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BB">
            Кто и что редактировал ?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8F_%D1%84%D0%B0%D0%B9%D0%BB%D0%B0">
            История файла</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D0%BA%D0%BB%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">
            Начальное Клонирование</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D1%87%D0%B8%D0%B2%D1%8B%D0%B5_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B">
            Изменчивые Проекты</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%B3%D0%BB%D0%BE%D0%B1%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D1%81%D1%87%D0%B5%D1%82%D1%87%D0%B8%D0%BA">
            Глобальный счетчик</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%BF%D1%83%D1%81%D1%82%D1%8B%D0%B5_%D0%BF%D0%BE%D0%B4%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%B8">
            Пустые подкаталоги</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%BF%D0%B5%D1%80%D0%B2%D0%BE%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%BA%D0%BE%D0%BC%D0%BC%D0%B8%D1%82">
            Первоначальный коммит</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_%D0%BF%D1%80%D0%B8%D1%87%D1%83%D0%B4%D1%8B_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0">
            Причуды интерфейса</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B. Перевод
        этого руководства</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Глава 5. Уроки истории">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_%D1%83%D1%80%D0%BE%D0%BA%D0%B8_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D0%B8">
          </a>Глава 5. Уроки истории</h2>
        </div>
      </div>
    </div>

    <p>Вследствие распределенной природы Git, историю изменений
    можно легко редактировать. Однако, если вы вмешиваетесь в
    прошлое, будьте осторожны: изменяйте только ту часть истории,
    которой владеете вы и только вы. Иначе, как народы вечно
    выясняют, кто же именно совершил и какие бесчинства, так и у
    вас будут проблемы с примирением при попытке совместить разные
    деревья истории.</p>

    <p>Некоторые разработчики убеждены, что история должна быть
    неизменна со всеми огрехами и прочим. Другие считают, что
    деревья нужно делать презентабельными перед выпуском их в
    публичный доступ. Git учитывает оба мнения. Переписывание
    истории, как и клонирование, ветвление и слияние, — лишь еще
    одна возможность, которую дает вам Git. Разумное ее
    использование зависит только от вас.</p>

    <div class="section" title="Оставаясь корректным">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%BE%D1%81%D1%82%D0%B0%D0%B2%D0%B0%D1%8F%D1%81%D1%8C_%D0%BA%D0%BE%D1%80%D1%80%D0%B5%D0%BA%D1%82%D0%BD%D1%8B%D0%BC">
            </a>Оставаясь корректным</h2>
          </div>
        </div>
      </div>

      <p>Только что сделали коммит и поняли, что должны были ввести
      другое описание? Запустите</p>
      <pre class="literallayout">
$ git commit --amend
</pre>

      <p>чтобы изменить последнее описание. Осознали, что забыли
      добавить файл? Запустите <span class="strong"><strong>git
      add</strong></span>, чтобы это сделать, затем выполните
      вышеуказанную команду.</p>

      <p>Захотелось добавить еще немного изменений в последний
      коммит? Так сделайте их и запустите</p>
      <pre class="literallayout">
$ git commit --amend -a
</pre>
    </div>

    <div class="section" title="…И кое-что еще">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%B8_%D0%BA%D0%BE%D0%B5_%D1%87%D1%82%D0%BE_%D0%B5%D1%89%D0%B5">
            </a>…И кое-что еще</h2>
          </div>
        </div>
      </div>

      <p>Давайте представим, что предыдущая проблема на самом деле
      в десять раз хуже. После длительной работы вы сделали ряд
      коммитов; но вы не очень-то довольны тем, как они
      организованы, и кое-какие описания коммитов надо бы слегка
      переформулировать. Тогда запустите</p>
      <pre class="literallayout">
$ git rebase -i HEAD~10
</pre>

      <p>и последние десять коммитов появятся в вашем любимом
      редакторе (задается переменной окружения $EDITOR).
      Например:</p>
      <pre class="literallayout">
pick 5c6eb73 Добавил ссылку repo.or.cz
pick a311a64 Переставил аналогии в «Работай как хочешь»
pick 100834f Добавил цель для push в Makefile
</pre>

      <p>Теперь вы можете:</p>

      <div class="itemizedlist">
        <ul class="itemizedlist">
          <li class="listitem">Убирать коммиты, удаляя строки.</li>

          <li class="listitem">Менять порядок коммитов, переставляя
          строки.</li>

          <li class="listitem">
            <p class="simpara">Заменять «pick» на:</p>

            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem">«edit» для внесения правок в
                коммиты;</li>

                <li class="listitem">«reword» для изменения
                описания в журнале;</li>

                <li class="listitem">«squash» для слияния коммита с
                предыдущим;</li>

                <li class="listitem">«fixup», чтобы слить коммит с
                предыдущим, отбросив его описание.</li>
              </ul>
            </div>
          </li>
        </ul>
      </div>

      <p>Сохраните файл и закройте редактор. Если вы отметили
      коммит для исправлений, запустите</p>
      <pre class="literallayout">
$ git commit --amend
</pre>

      <p>Если нет, запустите</p>
      <pre class="literallayout">
$ git rebase --continue
</pre>

      <p>Одним словом, делайте коммиты как можно раньше и как можно
      чаще — вы всегда сможете навести порядок при помощи
      rebase.</p>
    </div>

    <div class="section" title="Локальные изменения сохраняются">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5_%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F_%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D1%8F%D1%8E%D1%82%D1%81%D1%8F">
            </a>Локальные изменения сохраняются</h2>
          </div>
        </div>
      </div>

      <p>Предположим, вы работаете над активным проектом. За
      какое-то время вы делаете несколько коммитов, затем
      синхронизируетесь с официальным деревом через слияние. Цикл
      повторяется несколько раз, пока вы не будете готовы влить
      изменения в центральное дерево.</p>

      <p>Однако теперь история изменений в локальном клоне Git
      представляет собой кашу из ваших и официальных изменений. Вам
      бы хотелось видеть все свои изменения непрерывной линией, а
      затем — все официальные изменения.</p>

      <p>Это работа для команды <span class="strong"><strong>git
      rebase</strong></span>, описанной выше. Зачастую, имеет смысл
      использовать флаг <span class=
      "strong"><strong>--onto</strong></span> и убрать
      переплетения.</p>

      <p>Также смотрите <span class="strong"><strong>git help
      rebase</strong></span> для получения подробных примеров
      использования этой замечательной команды. Вы можете
      расщеплять коммиты. Вы можете даже переупорядочивать
      ветки.</p>
    </div>

    <div class="section" title="Переписывая историю">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%BF%D0%B5%D1%80%D0%B5%D0%BF%D0%B8%D1%81%D1%8B%D0%B2%D0%B0%D1%8F_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8E">
            </a>Переписывая историю</h2>
          </div>
        </div>
      </div>

      <p>Время от времени вам может понадобиться в системе
      управления версиями аналог «замазывания» людей на официальных
      фотографиях, как бы стирающего их из истории в духе
      сталинизма. Например, предположим, что мы уже собираемся
      выпустить релиз проекта, но он содержит файл, который не
      должен стать достоянием общественности по каким-то причинам.
      Возможно, я сохранил номер своей кредитки в текстовый файл и
      случайно добавил его в проект. Удалить файл недостаточно: он
      может быть доступен из старых коммитов. Нам надо удалить файл
      из всех ревизий:</p>
      <pre class="literallayout">
$ git filter-branch --tree-filter 'rm совершенно/секретный/файл' HEAD
</pre>

      <p>Смотрите <span class="strong"><strong>git help
      filter-branch</strong></span>, где обсуждается этот пример и
      предлагается более быстрый способ решения. Вообще,
      <span class="strong"><strong>filter-branch</strong></span>
      позволяет изменять существенные части истории при помощи
      одной-единственной команды.</p>

      <p>После этой команды каталог <code class=
      "literal">.git/refs/original</code> будет описывать
      состояние, которое было до ее вызова. Убедитесь, что команда
      filter-branch сделала то, что вы хотели, и если хотите опять
      использовать эту команду, удалите этот каталог.</p>

      <p>И, наконец, замените клоны вашего проекта исправленной
      версией, если собираетесь в дальнейшем с ними
      взаимодействовать.</p>
    </div>

    <div class="section" title="Создавая Историю">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%B2%D0%B0%D1%8F_%D0%B8%D1%81%D1%82%D0%BE%D1%80%D0%B8%D1%8E">
            </a>Создавая Историю</h2>
          </div>
        </div>
      </div>

      <p><a name="makinghistory" id="makinghistory"></a>Хотите
      перевести проект под управление Git? Если сейчас он находится
      под управлением какой-либо из хорошо известных систем
      управления версиями, то вполне вероятно, что кто-нибудь уже
      написал необходимые скрипты для экспорта всей истории проекта
      в Git.</p>

      <p>Если нет, то смотрите в сторону команды <span class=
      "strong"><strong>git fast-import</strong></span>, которая
      считывает текстовый ввод в специальном формате для создания
      истории Git с нуля. Обычно скрипт, использующий эту команду,
      бывает слеплен наспех для единичного запуска, переносящего
      весь проект за один раз.</p>

      <p>В качестве примера вставьте такие строки во временный
      файл, вроде <span class=
      "emphasis"><em>/tmp/history</em></span>:</p>
      <pre class="screen">
commit refs/heads/master
committer Alice &lt;alice@example.com&gt; Thu, 01 Jan 1970 00:00:00 +0000
data &lt;&lt;EOT
Начальный коммит.
EOT

M 100644 inline hello.c
data &lt;&lt;EOT
#include &lt;stdio.h&gt;

int main() {
  printf("Hello, world!\n");
  return 0;
}
EOT

commit refs/heads/master
committer Bob &lt;bob@example.com&gt; Tue, 14 Mar 2000 01:59:26 -0800
data &lt;&lt;EOT
Заменен printf() на write()
EOT

M 100644 inline hello.c
data &lt;&lt;EOT
#include &lt;unistd.h&gt;

int main() {
  write(1, "Hello, world!\n", 14);
  return 0;
}
EOT
</pre>

      <p>Затем создайте хранилище Git из этого временного файла при
      помощи команд:</p>

      <p>$ mkdir project; cd project; git init $ git fast-import
      --date-format=rfc2822 &lt; /tmp/history</p>

      <p>Вы можете извлечь последнюю версию проекта с помощью</p>
      <pre class="literallayout">
$ git checkout master .
</pre>

      <p>Команда <span class="strong"><strong>git
      fast-export</strong></span> преобразует любое хранилище в
      формат, понятныый команде <span class="strong"><strong>git
      fast-import</strong></span>. Ее вывод можно использовать как
      образец для написания скриптов преобразования, или для
      переноса хранилищ в понятном человеку формате. Конечно, с
      помощью этих команд можно пересылать хранилища текстовых
      файлов через каналы передачи текста.</p>
    </div>

    <div class="section" title="Когда же все пошло не так?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%BA%D0%BE%D0%B3%D0%B4%D0%B0_%D0%B6%D0%B5_%D0%B2%D1%81%D0%B5_%D0%BF%D0%BE%D1%88%D0%BB%D0%BE_%D0%BD%D0%B5_%D1%82%D0%B0%D0%BA">
            </a>Когда же все пошло не так?</h2>
          </div>
        </div>
      </div>

      <p>Вы только что обнаружили, что кое-какой функционал вашей
      программы не работает, но вы совершенно отчетливо помните,
      что он работал всего несколько месяцев назад. Ох… Откуда же
      взялась ошибка? Вы же это проверяли сразу как
      разработали.</p>

      <p>В любом случае, уже слишком поздно. Однако, если вы
      фиксировали свои изменения достаточно часто, то Git сможет
      точно указать проблему:</p>
      <pre class="literallayout">
$ git bisect start
$ git bisect bad HEAD
$ git bisect good 1b6d
</pre>

      <p>Git извлечет состояние ровно посередине. Проверьте
      работает ли то, что сломалось, и если все еще нет,</p>
      <pre class="literallayout">
$ git bisect bad
</pre>

      <p>Если же работает, то замените «bad» на «good». Git снова
      переместит вас в состояние посередине между «хорошей» и
      «плохой» ревизиями, сужая круг поиска. После нескольких
      итераций, этот двоичный поиск приведет вас к тому коммиту, на
      котором возникла проблема. После окончания расследования,
      вернитесь в исходное состояние командой</p>
      <pre class="literallayout">
$ git bisect reset
</pre>

      <p>Вместо ручного тестирования каждого изменения
      автоматизируйте поиск, запустив</p>
      <pre class="literallayout">
$ git bisect run my_script
</pre>

      <p>По возвращаемому значению заданной команды, обычно
      одноразового скрипта, Git будет отличать хорошее состояние от
      плохого. Скрипт должен вернуть 0, если нынешний коммит
      хороший; 125, если его надо пропустить; и любое другое число
      от 1 до 127, если он плохой. Отрицательное возвращаемое
      значение прерывает команду bisect.</p>

      <p>Вы можете сделать многим больше: страница помощи поясняет,
      как визуализировать bisect, проанализировать или
      воспроизвести ее журнал, или исключить заведомо хорошие
      изменения для ускорения поиска.</p>
    </div>

    <div class="section" title="Из-за кого все пошло не так?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%B8%D0%B7_%D0%B7%D0%B0_%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B2%D1%81%D0%B5_%D0%BF%D0%BE%D1%88%D0%BB%D0%BE_%D0%BD%D0%B5_%D1%82%D0%B0%D0%BA">
            </a>Из-за кого все пошло не так?</h2>
          </div>
        </div>
      </div>

      <p>Как и во многих других системах управления версиями, в Git
      есть команда blame (ответственность, прим. пер.):</p>
      <pre class="literallayout">
$ git blame bug.c
</pre>

      <p>Она снабжает каждую строку выбранного файла примечаниями,
      раскрывающими, кто и когда последним ее редактировал. В
      отличие же от многих других систем управления версиями, эта
      операция происходит без соединения с сетью, выбирая данные с
      локального диска.</p>
    </div>

    <div class="section" title="Личный опыт">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D0%B9_%D0%BE%D0%BF%D1%8B%D1%82">
            </a>Личный опыт</h2>
          </div>
        </div>
      </div>

      <p>В централизованных системах управления версиями изменения
      истории — достаточно сложная операция, и доступна она лишь
      администраторам. Клонирование, ветвление и слияние невозможны
      без взаимодействия по сети. Так же обстоят дела и с базовыми
      операциями, такими как просмотр истории или фиксация
      изменений. В некоторых системах сетевое соединение требуется
      даже для просмотра собственных изменений, или открытия файла
      для редактирования.</p>

      <p>Централизованные системы исключают возможность работы без
      сети и требуют более дорогой сетевой инфраструктуры, особенно
      с увеличением количества разработчиков. Что важнее, все
      операции происходят медленнее, обычно до такой степени, что
      пользователи избегают пользоваться «продвинутыми» командами
      без крайней необходимости. В радикальных случаях это касается
      даже большинства базовых команд. Когда пользователи вынуждены
      запускать медленные команды, производительность страдает
      из-за прерываний рабочего процесса.</p>

      <p>Я испытал этот феномен на себе. Git был моей первой
      системой управления версиями. Я быстро привык к нему и стал
      относится к его возможностям как к должному. Я предполагал,
      что и другие системы похожи на него: выбор системы управления
      версиями не должен отличаться от выбора текстового редактора
      или браузера.</p>

      <p>Когда немного позже я был вынужден использовать
      централизованную систему управления версиями, я был
      шокирован. Ненадежное интернет-соединение не имеет большого
      значения при использовании Git, но делает разработку
      невыносимой, когда от него требуют надежности как у жесткого
      диска. Вдобавок я обнаружил, что стал избегать некоторых
      команд из-за задержек в их выполнении, что помешало мне
      следовать предпочтительному рабочему процессу.</p>

      <p>Когда мне было нужно запустить медленную команду,
      нарушение хода моих мыслей оказывало несоизмеримый ущерб
      разработке. Ожидая окончания связи с сервером, я вынужден был
      заниматься чем-то другим, чтобы скоротать время; например,
      проверкой почты или написанием документации. К тому времени,
      как я возвращался к первоначальной задаче, выполнение команды
      было давно закончено, но мне приходилось тратить уйму
      времени, чтоб вспомнить, что именно я делал. Люди не очень
      приспособлены для переключения между задачами.</p>

      <p>Кроме того, есть интересный эффект «трагедии общественных
      ресурсов»: предвидя будущую перегруженность сети, некоторые
      люди в попытке предотвратить грядущие задержки начинают
      использовать более широкие каналы, чем им реально требуется
      для текущих задач. Суммарная активность увеличивает загрузку
      сети, поощряя людей задействовать всё более высокоскоростные
      каналы для предотвращения еще больших задержек.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

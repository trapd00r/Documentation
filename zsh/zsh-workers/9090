From zsh-workers-return-9090-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Dec 16 19:04:54 1999
Return-Path: <zsh-workers-return-9090-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9902 invoked from network); 16 Dec 1999 19:04:54 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?U4+jNiNYjQxuWk2u88IZeZfRLxIH3jZ8?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 16 Dec 1999 19:04:54 -0000
Received: (qmail 1865 invoked from network); 16 Dec 1999 19:04:51 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns2.primenet.com.au with SMTP; 16 Dec 1999 19:04:51 -0000
Received: (qmail 14928 invoked by alias); 16 Dec 1999 19:04:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9090
Received: (qmail 14920 invoked from network); 16 Dec 1999 19:04:43 -0000
X-Authentication-Warning: godzilla.phydeaux.org: fletch set sender to fletch@phydeaux.org using -f
Sender: fletch@phydeaux.org
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: zsh and memory
References: <199912161039.LAA13865@beta.informatik.hu-berlin.de>
From: Mike Fletcher <fletch@phydeaux.org>
Organization: Very Little
Date: 16 Dec 1999 06:16:25 -0500
In-Reply-To: Sven Wischnowsky's message of "Thu, 16 Dec 1999 11:39:48 +0100 (MET)"
Message-ID: <m2iu1zuody.fsf@godzilla.phydeaux.org>
Lines: 35
User-Agent: Gnus/5.0802 (Gnus v5.8.2) XEmacs/20.4 (Emerald)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

>>>>> "Sven" == Sven Wischnowsky <wischnow@informatik.hu-berlin.de> writes:

    Sven> I wrote:

    >> I'm really tempted to allocate heaps using mmap() (anonymous)
    >> to get them out of the way of the zalloc() allocator. I small
    >> test showed that with this I only get 39KB of free memory after
    >> the completion test, which is really not too bad. I don't have
    >> a patch for that yet, though.

    Sven> ... and now I don't think I'll ever write one: neither
    Sven> Solaris nor Linux seem to have MAP_ANONYMOUS. Sniff.

        My copy seems to, at least according to mmap(2):

[...]
       The  above three flags are described in POSIX.1b (formerly
       POSIX.4).  Linux also knows about MAP_DENYWRITE,  MAP_EXE-
       CUTABLE and MAP_ANON(YMOUS).
[...]

        There's also Ralf Engelschall's mm library that hides shared
memory allocations in a platform independent way:

http://www.engelschall.com/sw/mm/

        But that's more for handling shared segments between multiple
processes.  Of course there was that talk of making all zsh processes
share the same zcompdump . . . :).

-- 
Fletch                | "If you find my answers frightening,       __`'/|
fletch@phydeaux.org   |  Vincent, you should cease askin'          \ o.O'
678 443-6239(w)       |  scary questions." -- Jules                =(___)=
                      |                                               U


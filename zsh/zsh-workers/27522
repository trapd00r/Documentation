From zsh-workers-return-27522-mason-zsh=primenet.com.au@zsh.org Wed Dec 16 10:57:38 2009
Return-Path: <zsh-workers-return-27522-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3893 invoked by alias); 16 Dec 2009 10:57:38 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27522
Received: (qmail 17500 invoked from network); 16 Dec 2009 10:57:35 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Wed, 16 Dec 2009 10:57:25 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@zsh.org
Subject: Re: [PATCH] run-help: ugly workaround for run-help-$X with alias
 for $X
Message-ID: <20091216105725.010c00d9@news01>
In-Reply-To: <091214075055.ZM8191@torch.brasslantern.com>
References: <20091214114004.GA31015@alea.gnuu.de>
	<200912141342.nBEDg23i004301@news01.csr.com>
	<091214075055.ZM8191@torch.brasslantern.com>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 16 Dec 2009 10:57:26.0085 (UTC) FILETIME=[8D84E750:01CA7E3E]
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.71.0.140

On Mon, 14 Dec 2009 07:50:55 -0800
Bart Schaefer <schaefer@brasslantern.com> wrote:
> That unset is probably there because older versions of zsh had some
> bugs in the implementation of "var=value command ..." particularly in
> the case where "command" is a function or builtin.  This stemmed from
> zsh's efforts to avoid forking when no external program was involved.

Actually, it's here (from the diff -u)...

+		unset run_help_orig_cmd
 		eval "run-help-$1:t ${(qq@)cmd_args[2,-1]}"

... so maybe I've missed the point:  it may have been to prevent
$run_help_orig_cmd being seen by run-help-<something>.  However, that seems
unlikely since (i) there's no reason they'd be confused by it (ii) they
might even find it useful.

I'll (finally) commit what's there at the moment and see what happens.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


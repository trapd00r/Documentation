From zsh-workers-return-22347-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 15 03:07:54 2006
Return-Path: <zsh-workers-return-22347-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23516 invoked from network); 15 Mar 2006 03:07:52 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO,HTML_30_40,HTML_MESSAGE autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Mar 2006 03:07:52 -0000
Received: (qmail 36688 invoked from network); 15 Mar 2006 03:07:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Mar 2006 03:07:46 -0000
Received: (qmail 1512 invoked by alias); 15 Mar 2006 03:07:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22347
Received: (qmail 1503 invoked from network); 15 Mar 2006 03:07:43 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 15 Mar 2006 03:07:43 -0000
Received: (qmail 36401 invoked from network); 15 Mar 2006 03:07:43 -0000
Received: from k063.ims-firmen.de (213.174.51.118)
  by a.mx.sunsite.dk with SMTP; 15 Mar 2006 03:07:42 -0000
Received: from ah.darktech.org (p54A2F8F6.dip.t-dialin.net [84.162.248.246])
	by k063.ims-firmen.de (Postfix) with ESMTP
	id 17997180003; Wed, 15 Mar 2006 04:07:40 +0100 (CET)
Received: from [192.168.76.3] (account gf [192.168.76.3] verified)
  by ah.darktech.org (CommuniGate Pro SMTP 5.0.1)
  with ESMTPA id 1380070; Wed, 15 Mar 2006 04:07:40 +0100
Message-ID: <441784FB.6070109@ah-online.com>
Date: Wed, 15 Mar 2006 04:07:39 +0100
From: "g.fischer@ah-online.com" <g.fischer@ah-online.com>
User-Agent: no way
MIME-Version: 1.0
To: Wayne Davison <wayned@users.sourceforge.net>
Cc: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: zsh 4.3.2 bug
References: <441370CD.5090208@ah-online.com> <20060313104235.599f10a1.pws@csr.com> <441753CD.4ACAF943@ah-online.com> <20060314235629.GA25908@dot.blorf.net>
In-Reply-To: <20060314235629.GA25908@dot.blorf.net>
Content-Type: multipart/alternative;
 boundary="------------000302000408020802060000"

This is a multi-part message in MIME format.
--------------000302000408020802060000
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Wayne Davison wrote:
> On Wed, Mar 15, 2006 at 12:37:49AM +0100, goetz fischer wrote:
>   
>> okay so i'll give 4.3.1 a try.
>>     
>
> I doubt that will make a difference.
according to the first answer i got somebody made an almost 4.3.2 
version compile so i thought 4.3.1 might be a good bet.
>   What you need to figure out is why
> the building of the signames.c file failed.  The make rules are this
> (taken from Makemod.in):
>
>  signames.c: signames1.awk signames2.awk ../config.h @SIGNAL_H@
>         $(AWK) -f $(sdir)/signames1.awk @SIGNAL_H@ >sigtmp.c
>         $(CPP) sigtmp.c >sigtmp.out
>         $(AWK) -f $(sdir)/signames2.awk sigtmp.out > $@
>         rm -f sigtmp.c sigtmp.out
>
>  sigcount.h: signames.c
>         grep 'define.*SIGCOUNT' signames.c > $@
>
> My generated Makemod file has "/usr/include/bits/signum.h" in place of
> the @SIGNAL_H@ value.  Those awk and cpp commands should generate a file
> named signames.c that should have a define for SIGCOUNT in it, e.g.:
>
> #define SIGCOUNT        31
>
> It should also define an array named sigs[], e.g.:
>
> char *sigs[SIGCOUNT+4] = {
>         "EXIT",
>         "HUP",
>         "INT",
> 	[...]
>
> Perhaps your awk didn't work right?  Or perhaps the SIGNAL_H file wasn't
> chosen correctly?
>
> Once the signames.c file gets built right, then the sigcount.h file
> should end up with two lines in it.  Mine is this:
>
> #define SIGCOUNT        31
> #define sigmsg(sig) ((sig) <= SIGCOUNT ? sig_msg[sig] : "unknown signal")
>
> At that point, the build errors you cited should go away.
>   
okay, thanks so far.
i'll try to find the respective header.
> ..wayne..
>   

-- 
ah-consulting.net
Götz Fischer
Senior Consultant
Phone: +49(0)7225/98 98 79
Fax:   +49(0)7225/28 64
eMail: g.fischer@ah-consulting.net
http://www.ah-consulting.net
http://www.ah-webhosting.com


--------------000302000408020802060000
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
</head>
<body bgcolor="#ffffff" text="#000000">
Wayne Davison wrote:
<blockquote cite="mid20060314235629.GA25908@dot.blorf.net" type="cite">
  <pre wrap="">On Wed, Mar 15, 2006 at 12:37:49AM +0100, goetz fischer wrote:
  </pre>
  <blockquote type="cite">
    <pre wrap="">okay so i'll give 4.3.1 a try.
    </pre>
  </blockquote>
  <pre wrap=""><!---->
I doubt that will make a difference.</pre>
</blockquote>
according to the first answer i got somebody made an almost 4.3.2
version compile so i thought 4.3.1 might be a good bet.<br>
<blockquote cite="mid20060314235629.GA25908@dot.blorf.net" type="cite">
  <pre wrap="">  What you need to figure out is why
the building of the signames.c file failed.  The make rules are this
(taken from Makemod.in):

 signames.c: signames1.awk signames2.awk ../config.h @SIGNAL_H@
        $(AWK) -f $(sdir)/signames1.awk @SIGNAL_H@ &gt;sigtmp.c
        $(CPP) sigtmp.c &gt;sigtmp.out
        $(AWK) -f $(sdir)/signames2.awk sigtmp.out &gt; $@
        rm -f sigtmp.c sigtmp.out

 sigcount.h: signames.c
        grep 'define.*SIGCOUNT' signames.c &gt; $@

My generated Makemod file has "/usr/include/bits/signum.h" in place of
the @SIGNAL_H@ value.  Those awk and cpp commands should generate a file
named signames.c that should have a define for SIGCOUNT in it, e.g.:

#define SIGCOUNT        31

It should also define an array named sigs[], e.g.:

char *sigs[SIGCOUNT+4] = {
        "EXIT",
        "HUP",
        "INT",
	[...]

Perhaps your awk didn't work right?  Or perhaps the SIGNAL_H file wasn't
chosen correctly?

Once the signames.c file gets built right, then the sigcount.h file
should end up with two lines in it.  Mine is this:

#define SIGCOUNT        31
#define sigmsg(sig) ((sig) &lt;= SIGCOUNT ? sig_msg[sig] : "unknown signal")

At that point, the build errors you cited should go away.
  </pre>
</blockquote>
okay, thanks so far.<br>
i'll try to find the respective header.<br>
<blockquote cite="mid20060314235629.GA25908@dot.blorf.net" type="cite">
  <pre wrap="">
..wayne..
  </pre>
</blockquote>
<br>
<pre class="moz-signature" cols="72">-- 
ah-consulting.net
G&ouml;tz Fischer
Senior Consultant
Phone: +49(0)7225/98 98 79
Fax:   +49(0)7225/28 64
eMail: <a class="moz-txt-link-abbreviated" href="mailto:g.fischer@ah-consulting.net">g.fischer@ah-consulting.net</a>
<a class="moz-txt-link-freetext" href="http://www.ah-consulting.net">http://www.ah-consulting.net</a>
<a class="moz-txt-link-freetext" href="http://www.ah-webhosting.com">http://www.ah-webhosting.com</a>
</pre>
</body>
</html>

--------------000302000408020802060000--


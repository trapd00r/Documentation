From zsh-workers-return-11912-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jun 15 08:13:06 2000
Return-Path: <zsh-workers-return-11912-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18143 invoked from network); 15 Jun 2000 08:13:05 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Jun 2000 08:13:05 -0000
Received: (qmail 12679 invoked by alias); 15 Jun 2000 08:12:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11912
Received: (qmail 12672 invoked from network); 15 Jun 2000 08:12:54 -0000
Date: Thu, 15 Jun 2000 10:12:47 +0200 (MET DST)
Message-Id: <200006150812.KAA04155@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Wed, 14 Jun 2000 16:17:37 +0000
Subject: Re: Wordcode functions with empty bodies


Bart Schaefer wrote:

> ...
> 
> This has fixed the "prompt bart" crash, though I still don't quite follow
> why putting a `:' command in the function body (instead of using an empty
> function) prevented the crash before.

Purely accidental. It freed the eprog, then allocated some more memory 
(sometimes for another eprog(!)) and later copied the freed eprog. If
the thing allocated into the freed eprog was something looking
(almost) like a valid eprog, it worked. With something in the body of
the function this (sometimes) happened, sometimes not. While debugging 
this, I had cases where it allocated something sensible into the freed 
eprog, sometimes not, both with and without something in the function
body.


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


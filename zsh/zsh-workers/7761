From zsh-workers-return-7761-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 09 17:01:33 1999
Return-Path: <zsh-workers-return-7761-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1385 invoked from network); 9 Sep 1999 17:01:31 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Sep 1999 17:01:31 -0000
Received: (qmail 27897 invoked by alias); 9 Sep 1999 17:01:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7761
Received: (qmail 27886 invoked from network); 9 Sep 1999 17:01:19 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990909170043.ZM15649@candle.brasslantern.com>
Date: Thu, 9 Sep 1999 17:00:43 +0000
In-Reply-To: <m2zoyx48yq.fsf@godzilla.phydeaux.org>
Comments: In reply to Mike Fletcher <fletch@phydeaux.org>
        "Re: zsh exhausting swap" (Sep  8,  1:19pm)
References: <19990909012536.A30438@mega.net.au> 
	<m2zoyx48yq.fsf@godzilla.phydeaux.org>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Brad Forschinger <bradf@mega.net.au>, Mike Fletcher <fletch@phydeaux.org>
Subject: Re: zsh exhausting swap
Cc: zsh-workers@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 8,  1:19pm, Mike Fletcher wrote:
} Subject: Re: zsh exhausting swap
}
} >>>>> "Brad" == Brad Forschinger <bradf@mega.net.au> writes:
} 
}     Brad> hit alt-' about ten times i guess, keep going until output
}     Brad> stops and swapping starts :-)
} 
} Program received signal SIGSEGV, Segmentation fault.
} #0  0x400938a7 in memcpy (dstpp=0x0, srcpp=0x43cb1018, len=21523344)
}     at ../sysdeps/generic/memcpy.c:55
} #1  0x4013f7cb in quoteline ()

I think this is going to have to go down as user silliness.

Why, in practice, would you ever need to hold down alt-' ?  I don't think
I've ever pressed it more than twice on the same command line.

What's happening is that, at each press of alt-', the line editor must
approximately triple the size of the internal editor buffer in order to
accommodate the new quoting characters (mostly closing and reopening
some existing quote pairs plus backslashing the characters thereby left
outside).  As you can imagine, this consumes rather a lot of memory in
rather a short time; the buffer is 59000 times larger by the end of the
tenth keypress.

The crash eventually occurs when a buffer as large as zsh needs cannot
be allocated.

However, I don't understand what you expect zsh to do differently.

(Also, the mailing list address is now zsh-workers@sunsite.auc.dk, not
@math.gatech.edu.  It is unknown for how long gatech will continue to
forward the messages.)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


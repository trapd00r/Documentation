From zsh-workers-return-19859-mason-zsh=primenet.com.au@sunsite.dk Sat May 01 01:45:44 2004
Return-Path: <zsh-workers-return-19859-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1309 invoked from network); 1 May 2004 01:45:43 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by ns1.primenet.com.au with SMTP; 1 May 2004 01:45:43 -0000
Received: (qmail 21800 invoked from network); 1 May 2004 01:45:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 May 2004 01:45:34 -0000
Received: (qmail 5390 invoked by alias); 1 May 2004 01:45:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19859
Received: (qmail 5361 invoked from network); 1 May 2004 01:45:32 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 1 May 2004 01:45:29 -0000
Received: (qmail 21647 invoked from network); 1 May 2004 01:45:29 -0000
Received: from lakermmtao02.cox.net (68.230.240.37)
  by a.mx.sunsite.dk with SMTP; 1 May 2004 01:45:26 -0000
Received: from quark.hightek.org ([68.12.75.33]) by lakermmtao02.cox.net
          (InterMail vM.6.01.03.02 201-2131-111-104-20040324) with ESMTP
          id <20040501014458.KVNF21610.lakermmtao02.cox.net@quark.hightek.org>
          for <zsh-workers@sunsite.dk>; Fri, 30 Apr 2004 21:44:58 -0400
Received: by quark.hightek.org (Postfix, from userid 501)
	id 30AAB12408; Fri, 30 Apr 2004 20:45:30 -0500 (CDT)
Date: Fri, 30 Apr 2004 20:45:30 -0500
From: Vincent Stemen <zsh@hightek.org>
To: Zsh hackers list <zsh-workers@sunsite.dk>
Subject: Re: PATCH: (3) Re: FreeBSD compatability feature request
Message-ID: <20040501014530.GA27895@quark.hightek.org>
References: <20040422085956.GA69814@quark.hightek.org> <20040430212625.7C6B48551@pwstephenson.fsnet.co.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20040430212625.7C6B48551@pwstephenson.fsnet.co.uk>
User-Agent: Mutt/1.4.1i
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=6.0 tests=RCVD_IN_SORBS autolearn=no 
	version=2.63
X-Spam-Hits: 1.5

On Fri, Apr 30, 2004 at 10:26:24PM +0100, Peter Stephenson wrote:
> Patch to apply on top of previous goes to attempt to handle TRAPS_ASYNC
> the way I think is intended.  It's basically an `if' with a
> sigemptyset() inside it, hope no one was expecting anything sophisticated.
> 
> It doesn't fix the behaviour I noted, that without the option any child
> exiting, not just the one the shell is currently expecting, causes traps
> to be run.  Probably that's not a big issue; I should really check the
> wording of POSIX.
> 
> So I think that's it... Vincent?

Hi Peter.

I applied the patch and, unfortunately, it did not seem to change the
behavior at all under FreeBSD.  It still waits for the child to exit
before processing the signal in the parent even though "set -T" is
used.  Does your patch work under Linux using the two small test
scripts, sigtrap, and sigblock, that I posted the other day?

Vincent

-- 
Vincent Stemen
Avoid the VeriSign/Network Solutions domain registration trap!
Read how Network Solutions (NSI) was involved in stealing our domain name.
http://www.InetAddresses.net


From zsh-users-return-3063-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 15 07:49:49 2000
Return-Path: <zsh-users-return-3063-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14672 invoked from network); 15 May 2000 07:49:48 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 May 2000 07:49:48 -0000
Received: (qmail 26853 invoked by alias); 15 May 2000 07:48:47 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3063
Received: (qmail 26811 invoked from network); 15 May 2000 07:48:45 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000515062157.ZM14966@candle.brasslantern.com>
Date: Mon, 15 May 2000 06:21:57 +0000
In-Reply-To: <20000513124926.A416@grok.localnet>
Comments: In reply to Steve Reid <sreid@sea-to-sky.net>
        "Re: confused by history" (May 13, 12:49pm)
References: <20000512205850.A8610@fruitcom.com> 
	<20000513124926.A416@grok.localnet>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Steve Reid <sreid@sea-to-sky.net>
Subject: Re: confused by history
Cc: zsh users <zsh-users@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 13, 12:49pm, Steve Reid wrote:
} Subject: Re: confused by history
}
} I've found that when I boot my computer in the morning and start my X
} session with a few xterms, occasionally all of my zsh'es have an empty
} history. I'm don't know what's causing it but presumably it has
} something to do with the zsh'es all getting killed at shutdown.
} 
} I also get files with names like ".history.1234" congregating

The 1234 in those file names is a process ID.  Those are the lock files
zsh 3.1.6 (or thereabouts) creates to prevent multiple processes writing
to the history at the same time.  They get unlinked when writing the
history is finished.

If you're seeing those files pile up, then you're killing off your shells
with some kind of signal before they have a chance to finish shutting
down.  It sounds like you may actually be running "shutdown" after your
X server exits and then powering off the computer?  If so, you probably
want to put in a bit of a delay so that the processes have more time to
finish up before they get killed.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


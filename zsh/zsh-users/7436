From zsh-users-return-7436-mason-zsh=primenet.com.au@sunsite.dk Mon May 03 06:57:37 2004
Return-Path: <zsh-users-return-7436-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3523 invoked from network); 3 May 2004 06:57:36 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by ns1.primenet.com.au with SMTP; 3 May 2004 06:57:36 -0000
Received: (qmail 28438 invoked from network); 3 May 2004 06:56:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 May 2004 06:56:51 -0000
Received: (qmail 18116 invoked by alias); 3 May 2004 06:56:42 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7436
Received: (qmail 18099 invoked from network); 3 May 2004 06:56:42 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 3 May 2004 06:56:39 -0000
Received: (qmail 27772 invoked from network); 3 May 2004 06:56:38 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 3 May 2004 06:56:35 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-4.tower-36.messagelabs.com!1083567367!5900877
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 12919 invoked from network); 3 May 2004 06:56:07 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-4.tower-36.messagelabs.com with SMTP; 3 May 2004 06:56:07 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i436u7Ob028615;
	Mon, 3 May 2004 07:56:07 +0100
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP
	id D95A8797A9CF; Mon,  3 May 2004 08:55:22 +0200 (CEST)
Cc: zsh-users@sunsite.dk
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <9D0A9896-9C9A-11D8-B220-000D93AD26C8@peak.org> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <opr7bvrajhb19zj4@localhost> <20040501233214.GD10166@dan.emsphone.com> <9D0A9896-9C9A-11D8-B220-000D93AD26C8@peak.org>
To: Timothy Luoma <luomat@peak.org>
Subject: Re: zsh prompt not updating until first 'chdir' 
Date: Mon, 03 May 2004 08:55:22 +0200
Message-ID: <3605.1083567322@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

Timothy Luoma wrote:
> 
> > in your .zshrc directly, setopt prompt_subst, and forget about
> > resetting it every time you cd?
> 
> PROMPT="
> ---------------------------------%t/%T ---------------------------------
> %S[OLDPWD: $dirstack[1]]
>       [PWD: %~]%s
> $SHORT_HOST> "
> 
> works great EXCEPT that OLDPWD doesn't get updated

Use single quotes instead of double quotes (and don't forget the
prompt_subst option). With double quotes, the variables are expanded
straightaway which is why they don't update.

Oliver


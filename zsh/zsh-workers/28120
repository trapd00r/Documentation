From zsh-workers-return-28120-mason-zsh=primenet.com.au@zsh.org Tue Aug 03 09:58:32 2010
Return-Path: <zsh-workers-return-28120-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25801 invoked by alias); 3 Aug 2010 09:58:32 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28120
Received: (qmail 19518 invoked from network); 3 Aug 2010 09:58:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Tue, 3 Aug 2010 10:58:23 +0100
From: Peter Stephenson <Peter.Stephenson@csr.com>
To: zsh-workers@zsh.org
Subject: Re: PATCH: Add $OVERSTRIKE in zle widgets
Message-ID: <20100803105823.1232a42b@csr.com>
In-Reply-To: <87ocdkf2u1.fsf@ft.bewatermyfriend.org>
References: <1280797053-22520-1-git-send-email-ft@bewatermyfriend.org>
	<20100803095219.24142dd6@csr.com>
	<87ocdkf2u1.fsf@ft.bewatermyfriend.org>
Organization: Cambridge Silicon Radio
X-Mailer: Claws Mail 3.7.6 (GTK+ 2.18.9; i686-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Aug 2010 09:58:24.0186 (UTC) FILETIME=[696481A0:01CB32F2]
X-Scanned-By: MailControl A_09_40_00 (www.mailcontrol.com) on 10.71.0.127

On Tue, 03 Aug 2010 11:44:06 +0200
Frank Terbeck <ft@bewatermyfriend.org> wrote:
> How would you organise that information? In a string, where multiple
> characters would signify different states? Like ZLE_STATE='mo' meaning
> overwrite mode and a mini-buffer is active.

That's the kind of thing I had in mind, but strings are cheap nowadays, and
[[ ... ]] tests natural in the shell, so you might just it make it verbose
and contain "insert", "overwrite", "minibuffer insert", "minibuffer
overwrite", and test '[[ $ZLE_STATE = *overwrite* ]]', which is completely
unambiguous while the speed penalty is unnoticeable.  Use of this idiom
makes it easy to upgrade the variable in a backward compatible way and
without variable namespace pollution.

I think the "minibuffer", such as it is, is tied to the "statusline"
variable. Some of the code associated with that is a bit grungy (yes, I
know, you're astonished), but mostly I think that's down to how the
minibuffer is generated rather than whether or how it's displayed.

Similarly, there's also "listshown" which relates to whether completion
lists are being displayed, which is somehow related to "showinglist".
Code associated with that is, er, completion code.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-workers-return-28035-mason-zsh=primenet.com.au@zsh.org Sun Jun 13 23:54:26 2010
Return-Path: <zsh-workers-return-28035-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14930 invoked by alias); 13 Jun 2010 23:54:26 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28035
Received: (qmail 16792 invoked from network); 13 Jun 2010 23:54:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.214.43 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type;
        bh=zjJdAWXnDWbD2U/6solVm2eEdC8igwxlK6DWBwh9mY4=;
        b=Et0E9p43J/2nrAeAniTjjOg4LRaGvy0FBGLmrAcUOyQmUM05pJoFsXqw60CZVbDanl
         diw0rAP2u7K9qUNO9/U/HWiASsCLkS1D8jBweWl4eNYImyWJ9NPbNMkjEzJ3PBZ6DzPZ
         x/I9GLFo93+6gc/fV+dAeLO7ETW0rpd/CNIR0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=RKECRiTXa8RPiWJAIBaWlXjMXwjk4kxeUtYGarxzRQEchtWEtr26KmFkKy4zac2CoT
         pP4ncQQVOX1pLO60KGo5QPaDPhzGDH/dyJfNKj4FLpAK8FxCXCo3lMMp7FcjNkXl2ttT
         rj8YfQ729c+lvzQqyA4NdeqIFDWo4i3MsSc8g=
MIME-Version: 1.0
In-Reply-To: <4C1567F9.6050406@sergio.spb.ru>
References: <4B44DD08.7040700@sergio.spb.ru>
	<20100107213326.582fb96c@pws-pc>
	<4B466A0F.9080109@sergio.spb.ru>
	<20100108092847.4aefd31d@news01>
	<4C1567F9.6050406@sergio.spb.ru>
Date: Mon, 14 Jun 2010 01:54:09 +0200
Message-ID: <AANLkTikkB-747sL6TVo5BW0UwmlkqhBGp_tWSa3fh9hx@mail.gmail.com>
Subject: Re: PATCH: zcalc prompt fix
From: Mikael Magnusson <mikachu@gmail.com>
To: sergio <mailbox@sergio.spb.ru>
Cc: zsh-workers@zsh.org
Content-Type: text/plain; charset=UTF-8

That's not very surprising considering 4.3.10 was released before the fix.
If you want debian to backport fixes, maybe you should talk to them?

On 14 June 2010 01:21, sergio <mailbox@sergio.spb.ru> wrote:
> Hello.
>
> This bug still presents in 4.3.10-13 in debian.
>
>> There are problems when using color in ZCALCPROMPT.
>> This is simple fix.
>>
>> --- /usr/share/zsh/functions/Misc/zcalc 2009-12-28 06:57:20.000000000 >
>> +0300
>> +++ zcalc       2010-01-06 14:55:15.000000000 +0300
>> @@ -152,7 +152,7 @@
>>  done
>>
>>  psvar[1]=$num
>> -while vared -cehp "${(%)ZCALCPROMPT}" line; do
>> +while vared -cehp "${ZCALCPROMPT}" line; do
>>    [[ -z $line ]] && break
>>    # special cases
>>    # Set default base if `[#16]' or `[##16]' etc. on its own.
>
> On 01/08/2010 12:28 PM, Peter Stephenson wrote:
>>
>> On Fri, 08 Jan 2010 02:11:11 +0300
>> sergio<mailbox@sergio.spb.ru>  wrote:
>>>
>>> -p for vared indicates, that the string will be taken as the prompt, and
>>> it doesn't need the prompt expansion flag (%).
>>
>> Ah, right, vared -p obeys the PROMPTPERCENT option so we don't need the
>> (%) in any case.
>
> --
> sergio.
>



-- 
Mikael Magnusson


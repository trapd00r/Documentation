From zsh-workers-return-13975-mason-zsh=primenet.com.au@sunsite.dk Fri Apr 13 08:00:19 2001
Return-Path: <zsh-workers-return-13975-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11543 invoked from network); 13 Apr 2001 08:00:18 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Apr 2001 08:00:18 -0000
Received: (qmail 8222 invoked by alias); 13 Apr 2001 08:00:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13975
Received: (qmail 8211 invoked from network); 13 Apr 2001 08:00:17 -0000
Date: Fri, 13 Apr 2001 01:00:10 -0700 (PDT)
From: Wayne Davison <wayned@users.sourceforge.net>
To: <zsh-workers@sunsite.dk>
Subject: Re: PATCH: Re: Build Failures on SunOS-4.1 and 5.5
In-Reply-To: <1010413035101.ZM981@candle.brasslantern.com>
Message-ID: <Pine.LNX.4.30.0104130058290.8432-100000@phong.blorf.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 13 Apr 2001, Bart Schaefer wrote:
> The solution wouldn't happen to be the same as the one for __sco that's
> already in Src/system.h, would it?

As you supposed, no.  Just about the only thing that Solaris does in
the termios.h file is to include sys/termios.h, so this this seems to
be very unlike the __sco solution.

> [offsetof is] not in the 3.0 sources, but it's been in the 3.1
> sources for as long as I've been keeping track of them

I see the definition in system.h, but where does it get used?  I
grepped every file in every dir of the CVS checkout, and no other file
contains those characters.  I just removed the definition, and nothing
in the build failed.

> Here's another shot at a complete patch (including what was in 13968):

This appears to work fine on both my Solaris 2.6 (x86) and Linux
Mandrake 7.2 (x86) systems.  You might want to just remove all mention
of "offsetof", however (if we  remove it from the system.h file).

..wayne..


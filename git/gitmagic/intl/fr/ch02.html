<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Chapitre&nbsp;2.&nbsp;Astuces de base</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title="Git Magique">
  <link rel="up" href="index.html" title="Git Magique">
  <link rel="prev" href="ch01.html" title=
  "Chapitre&nbsp;1.&nbsp;Introduction">
  <link rel="next" href="ch03.html" title=
  "Chapitre&nbsp;3.&nbsp;Clonons gaiement">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Préface</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_merci">Merci&nbsp;!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_licence">Licence</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Introduction</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_le_travail_comme_un_jeu">Le travail comme
            un jeu</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_gestion_de_versions">Gestion de
            versions</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_gestion_distribu%C3%A9e">Gestion
            distribuée</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_une_superstition_idiote">Une superstition
            idiote</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_conflits_fusionnels">Conflits
            fusionnels</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Astuces de
          base</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_enregistrer_l_%C3%A9tat_courant">Enregistrer
            l'état courant</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_ajouter_supprimer_renommer">Ajouter,
            supprimer, renommer</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_annuler_reprendre_avanc%C3%A9">Annuler/Reprendre
            avancé</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_reprise_revert">Reprise
            (revert)</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_g%C3%A9n%C3%A9ration_du_journal_des_modifications_changelog">
            Génération du journal des modifications
            (changelog)</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_t%C3%A9l%C3%A9charger_des_fichiers">Télécharger
            des fichiers</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_le_dernier_cri">Le dernier
            cri</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_publication_instantan%C3%A9e">Publication
            instantanée</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_qu_8217_ai_je_fait">Qu’ai-je
            fait&nbsp;?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_exercice">Exercice</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Clonons
          gaiement</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_synchronisation_entre_machines">Synchronisation
            entre machines</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_gestion_classique_des_sources">Gestion
            classique des sources</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_d%C3%A9p%C3%B4ts_nus">Dépôts
            nus</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_envoi_vs_rapatriement_push_vs_pull">Envoi
            vs rapatriement (push vs pull)</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_forker_un_projet">Forker un
            projet</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_syst%C3%A8me_ultime_de_sauvegarde">Système
            ultime de sauvegarde</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_le_multi_t%C3%A2che_%C3%A0_la_vitesse_de_la_lumi%C3%A8re">
            Le multi-tâche à la vitesse de la
            lumière</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_gu%C3%A9rilla_de_la_gestion_de_versions">Guérilla
            de la gestion de versions</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_pourquoi_j_8217_utilise_git">Pourquoi
            j’utilise Git</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. La
          sorcellerie des branches</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_la_touche_du_chef">La touche du
            chef</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_travail_temporaire">Travail
            temporaire</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_corrections_rapides">Corrections
            rapides</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_fusionner">Fusionner</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_workflow_sans_interruption">Workflow sans
            interruption</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_r%C3%A9organiser_le_foutoir">Réorganiser le
            foutoir</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_gestion_des_branches">Gestion des
            branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_les_branches_temporaires">Les branches
            temporaires</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_travailler_comme_il_vous_chante">Travailler
            comme il vous chante</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Les leçons
          de l’histoire</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_je_me_corrige_8230">Je me
            corrige…</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_et_bien_plus">… et bien
            plus</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_les_changements_locaux_en_dernier">Les
            changements locaux en dernier</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_r%C3%A9%C3%A9criture_de_l_8217_histoire">Réécriture
            de l’histoire</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_faire_l_8217_histoire">Faire
            l’histoire</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_qu_8217_est_ce_qui_a_tout_cass%C3%A9">Qu’est-ce
            qui a tout cassé&nbsp;?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_qui_a_tout_cass%C3%A9">Qui a tout
            cassé&nbsp;?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_exp%C3%A9rience_personnelle">Expérience
            personnelle</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Git
          multijoueur</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_qui_suis_je">Qui
            suis-je&nbsp;?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_via_ssh_et_http">Git via SSH et
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_via_n_8217_importe_quoi">Git via
            n’importe quoi</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_les_patches_la_monnaie_d_%C3%A9change_globale">
            Les patches&nbsp;: la monnaie d'échange
            globale</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_le_num%C3%A9ro_de_votre_correspondant_a_chang%C3%A9">
            Le numéro de votre correspondant a
            changé</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_les_branches_distantes">Les branches
            distantes</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_d%C3%A9p%C3%B4ts_distants_multiples">Dépôts
            distants multiples</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_mes_pr%C3%A9f%C3%A9rences">Mes
            préférences</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. La maîtrise
          de Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_publication_de_sources">Publication de
            sources</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_g%C3%A9rer_le_changement">Gérer le
            changement</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_mon_commit_est_trop_gros">Mon commit est
            trop gros&nbsp;!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_l_8217_index_l_8217_aire_d_8217_assemblage">
            L’index&nbsp;: l’aire d’assemblage</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_ne_perdez_pas_la_t%C3%AAte">Ne perdez pas
            la tête</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_chasseur_de_t%C3%AAte">Chasseur de
            tête</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_construire_au_dessus_de_git">Construire
            au-dessus de Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_audacieuses_acrobaties">Audacieuses
            acrobaties</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_se_pr%C3%A9munir_des_commits_erron%C3%A9s">Se
            prémunir des commits erronés</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Les secrets
          révélés</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_l_8217_invisibilit%C3%A9">L’invisibilité</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_l_8217_int%C3%A9grit%C3%A9">L’intégrité</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_l_8217_intelligence">L’intelligence</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_l_8217_indexation">L’indexation</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_les_origines_de_git">Les origines de
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_la_base_d_8217_objets">La base
            d’objets</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_les_blobs">Les blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_les_arbres_literal_trees_literal">Les
            arbres (<code class=
            "literal">trees</code>)</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_les_commits">Les commits</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indiscernable_de_la_magie">Indiscernable de
            la magie</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch09.html">9. Appendix A:
          Les lacunes de Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch09.html#_les_faiblesses_de_sha1">Les faiblesses de
            SHA1</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_des_fichiers_sans_relation">Des fichiers
            sans relation</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_qui_modifie_quoi">Qui modifie
            quoi&nbsp;?</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_l_8217_historique_d_8217_un_fichier">L’historique
            d’un fichier</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_le_clone_initial">Le clone
            initial</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_les_projets_versatiles">Les projets
            versatiles</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_compteur_global">Compteur
            global</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_les_dossiers_vides">Les dossiers
            vides</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_le_premier_commit">Le premier
            commit</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_bizarreries_de_l_8217_interface">Bizarreries
            de l’interface</a></span></li>
          </ul>
        </li>

        <li><span class="chapter"><a href="ch10.html">10. Appendix
        B: Traduire ce guide</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title=
  "Chapitre&nbsp;2.&nbsp;Astuces de base">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_astuces_de_base"></a>Chapitre&nbsp;2.&nbsp;Astuces de
          base</h2>
        </div>
      </div>
    </div>

    <p>Plutôt que de plonger dans l’océan des commandes Git,
    utilisez ces commandes élémentaires pour commencer en vous
    trempant les pieds. Malgré leur simplicité, chacune d’elles est
    utile. En effet, lors de mon premier mois d’utilisation de Git,
    je ne me suis jamais aventuré au-delà de ce qui est exposé dans
    ce chapitre.</p>

    <div class="section" title="Enregistrer l'état courant">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_enregistrer_l_%C3%A9tat_courant"></a>Enregistrer
            l'état courant</h2>
          </div>
        </div>
      </div>

      <p>Vous êtes sur le point d’effectuer une opération
      drastique&nbsp;? Avant de le faire, réalisez une capture de
      tous les fichiers du dossier courant&nbsp;:</p>
      <pre class="literallayout">
$ git init
$ git add .
$ git commit -m "Ma première sauvegarde"
</pre>

      <p>Si jamais votre opération tourne mal, vous pouvez
      retrouver votre version initiale, immaculée&nbsp;:</p>
      <pre class="literallayout">
$ git reset --hard
</pre>

      <p>Pour enregistrer un nouvel état&nbsp;:</p>
      <pre class="literallayout">
$ git commit -a -m "Une autre sauvegarde"
</pre>
    </div>

    <div class="section" title="Ajouter, supprimer, renommer">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_ajouter_supprimer_renommer"></a>Ajouter, supprimer,
            renommer</h2>
          </div>
        </div>
      </div>

      <p>Les commandes ci-dessus ne font que garder traces des
      fichiers qui étaient présents lorsque vous avez executé
      <span class="strong"><strong>git add</strong></span> pour la
      première fois. Si vous ajoutez de nouveaux fichiers ou
      sous-dossiers, il faut le signaler à Git&nbsp;:</p>
      <pre class="literallayout">
$ git add readme.txt Documentation
</pre>

      <p>De même, si vous voulez que Git oublie certains
      fichiers&nbsp;:</p>
      <pre class="literallayout">
$ git rm kludge.h obsolete.c
$ git rm -r incriminating/evidence/
</pre>

      <p>Git supprime les fichiers pour vous si vous ne l’avez pas
      encore fait.</p>

      <p>Renommer un fichier revient à supprimer l’ancien nom et
      ajouter le nouveau. Il y a également le raccourci
      <span class="strong"><strong>git mv</strong></span> qui a la
      même syntaxe que la commande mv. Par exemple&nbsp;:</p>
      <pre class="literallayout">
$ git mv bug.c feature.c
</pre>
    </div>

    <div class="section" title="Annuler/Reprendre avancé">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_annuler_reprendre_avanc%C3%A9"></a>Annuler/Reprendre
            avancé</h2>
          </div>
        </div>
      </div>

      <p>Parfois vous voulez seulement revenir en arrière et
      oublier les modifications effectuées depuis un certain temps
      parce qu’elles sont toutes fausses. Dans ce cas&nbsp;:</p>
      <pre class="literallayout">
$ git log
</pre>

      <p>vous montre une liste des commits récents, accompagnés de
      leur empreinte SHA1&nbsp;:</p>
      <pre class="screen">
commit 766f9881690d240ba334153047649b8b8f11c664
Author: Bob &lt;bob@example.com&gt;
Date: Tue Mar 14 01:59:26 2000 -0800

    Remplacement de prinf() par write()

commit 82f5ea346a2e651544956a8653c0f58dc151275c
Author: Alice &lt;alice@example.com&gt;
Date:   Thu Jan 1 00:00:00 1970 +0000

    Commit initial
</pre>

      <p>Les premiers caractères de l’empreinte sont suffisants
      pour spécifier un commit&nbsp;; ou alors, copiez et collez
      l’empreinte en entier. Saisissez&nbsp;:</p>
      <pre class="literallayout">
$ git reset --hard 766f
</pre>

      <p>pour restaurer l'état correspondant au commit donné et
      supprimer de manière permanente tous les commits plus récents
      de l’enregistrement.</p>

      <p>Parfois vous ne voulez faire qu’un bref saut dans un état
      précédent. Dans ce cas, saisissez&nbsp;:</p>
      <pre class="literallayout">
$ git checkout 82f5
</pre>

      <p>Ceci vous ramène en arrière dans le temps, tout en
      conservant les commits récents. Toutefois, comme pour le
      voyage temporel de la science-fiction, si vous faites des
      modifications suivies d’un commit, vous entrerez dans une
      réalité parallèle puisque vos actions sont différentes de ce
      qu’elles étaient la première fois.</p>

      <p>Cette réalité parallèle est appelée une <span class=
      "emphasis"><em>branche</em></span> (<span class=
      "emphasis"><em>branch</em></span>), et <a class="link" href=
      "ch04.html#branch">nous en dirons plus après</a>. Pour le
      moment rappelez-vous simplement que&nbsp;:</p>
      <pre class="literallayout">
$ git checkout master
</pre>

      <p>vous ramènera dans le présent. De plus, pour éviter que
      Git se plaigne, réalisez toujours un commit ou un reset de
      vos modifications avant de faire un checkout.</p>

      <p>Pour reprendre l’analogie du jeu vidéo&nbsp;:</p>

      <div class="itemizedlist">
        <ul class="itemizedlist">
          <li class="listitem"><span class=
          "strong"><strong><code class="literal">git reset
          --hard</code></strong></span> : recharge une ancienne
          sauvegarde et supprime toutes les sauvegardes plus
          récentes.</li>

          <li class="listitem"><span class=
          "strong"><strong><code class="literal">git
          checkout</code></strong></span> : recharge une ancienne
          partie, mais si vous jouez avec, l'état de la partie va
          différer des enregistrement suivants que vous aviez
          réalisés la première fois. Chaque nouvelle sauvegarde
          sera sur une branche séparée représentant la réalité
          parallèle dans laquelle vous êtes entré. <a class="link"
          href="ch04.html#branch">On s’en occupe plus
          loin</a>.</li>
        </ul>
      </div>

      <p>Vous pouvez choisir de ne restaurer que certains fichiers
      et sous-dossiers en les nommant à la suite de la
      commande&nbsp;:</p>
      <pre class="literallayout">
$ git checkout 82f5 un.fichier un-autre.fichier
</pre>

      <p>Faites attention car cette forme de <span class=
      "strong"><strong>checkout</strong></span> peut écraser vos
      fichiers sans avertissement. Pour éviter les accidents,
      faites un commit avant toute commande checkout, surtout quand
      vous débutez avec Git. En général, quand vous n'êtes pas sûr
      des conséquences d’une opération, et pas seulement des
      commandes Git, faites d’abord un <span class=
      "strong"><strong>git commit -a</strong></span>.</p>

      <p>Vous n’aimez pas copier et coller les empreintes&nbsp;?
      Alors utilisez&nbsp;:</p>
      <pre class="literallayout">
$ git checkout :/"Ma première s"
</pre>

      <p>pour arriver sur le commit qui commence avec ce message.
      Vous pouvez aussi demander la cinquième sauvegarde en
      arrière&nbsp;:</p>
      <pre class="literallayout">
$ git checkout master~5
</pre>
    </div>

    <div class="section" title="Reprise (revert)">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_reprise_revert"></a>Reprise
            (revert)</h2>
          </div>
        </div>
      </div>

      <p>Dans une cour de justice, certains évènements peuvent être
      effacés du procès verbal. De même vous pouvez sélectionner
      des commits spécifiques à défaire&nbsp;:</p>
      <pre class="literallayout">
$ git commit -a
$ git revert 1b6d
</pre>

      <p>défera le dernier commit ayant cette empreinte. La reprise
      est enregistrée comme un nouveau commit, ce que vous pourrez
      constater en lançant un <span class="strong"><strong>git
      log</strong></span>.</p>
    </div>

    <div class="section" title=
    "Génération du journal des modifications (changelog)">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_g%C3%A9n%C3%A9ration_du_journal_des_modifications_changelog">
            </a>Génération du journal des modifications
            (changelog)</h2>
          </div>
        </div>
      </div>

      <p>Certains projets demandent un <a class="ulink" href=
      "http://en.wikipedia.org/wiki/Changelog" target=
      "_top">changelog</a>. Créez-le en tapant&nbsp;:</p>
      <pre class="literallayout">
$ git log &gt; ChangeLog
</pre>
    </div>

    <div class="section" title="Télécharger des fichiers">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_t%C3%A9l%C3%A9charger_des_fichiers"></a>Télécharger
            des fichiers</h2>
          </div>
        </div>
      </div>

      <p>Faites une copie d’un projet géré par Git en
      saisissant&nbsp;:</p>
      <pre class="literallayout">
$ git clone git://serveur/chemin/vers/les/fichiers
</pre>

      <p>Par exemple, pour récupérer les fichiers utilisés pour
      créer ce site&nbsp;:</p>
      <pre class="literallayout">
$ git clone git://git.or.cz/gitmagic.git
</pre>

      <p>Nous aurons beaucoup à dire sur la commande <span class=
      "strong"><strong>clone</strong></span> d’ici peu.</p>
    </div>

    <div class="section" title="Le dernier cri">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_le_dernier_cri"></a>Le
            dernier cri</h2>
          </div>
        </div>
      </div>

      <p>Si vous avez déjà téléchargé une copie d’un projet en
      utilisant <span class="strong"><strong>git
      clone</strong></span>, vous pouvez la mettre à jour vers la
      dernière version avec&nbsp;:</p>
      <pre class="literallayout">
$ git pull
</pre>
    </div>

    <div class="section" title="Publication instantanée">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_publication_instantan%C3%A9e"></a>Publication
            instantanée</h2>
          </div>
        </div>
      </div>

      <p>Imaginez que vous avez écrit un script que vous voudriez
      partager avec d’autres. Vous pourriez leur dire de le
      télécharger de votre ordinateur, mais s’ils le font au moment
      où vous êtes en train d’améliorer le script ou d’y effectuer
      des modifications expérimentales, ils peuvent se retrouver
      dans la panade. Bien sûr, c’est pour cela qu’on a créé la
      publication de versions successives. Les développeurs peuvent
      travailler sur un projet fréquemment, mais ils ne rendent le
      code disponible quand lorsqu’ils le trouvent présentable.</p>

      <p>Pour faire ça avec Git, dans le dossier qui contient votre
      script&nbsp;:</p>
      <pre class="literallayout">
$ git init
$ git add .
$ git commit -m "Première publication"
</pre>

      <p>Ensuite vous pouvez dire à vos utilisateurs de
      lancer&nbsp;:</p>
      <pre class="literallayout">
$ git clone votre.ordinateur:/chemin/vers/le/script
</pre>

      <p>pour télécharger votre script. En considérant qu’ils ont
      accès à votre ordinateur via ssh. Sinon, lancez <span class=
      "strong"><strong>git daemon</strong></span> et dites plutôt à
      vos utilisateurs de lancer&nbsp;:</p>
      <pre class="literallayout">
$ git clone git://votre.ordinateur/chemin/vers/le/script
</pre>

      <p>À partir de maintenant, chaque fois que votre script est
      prêt à être publié, exécutez&nbsp;:</p>
      <pre class="literallayout">
$ git commit -a -m "Nouvelle version"
</pre>

      <p>et vos utilisateurs peuvent mettre à jour leur version en
      allant dans leur dossier contenant votre script et en
      saisissant&nbsp;:</p>
      <pre class="literallayout">
$ git pull
</pre>

      <p>Vos utilisateurs ne se retrouveront jamais avec une
      version de votre script que vous ne vouliez pas leur
      montrer.</p>
    </div>

    <div class="section" title="Qu’ai-je fait&nbsp;?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_qu_8217_ai_je_fait"></a>Qu’ai-je fait&nbsp;?</h2>
          </div>
        </div>
      </div>

      <p>Retrouvez les modifications faites depuis le dernier
      commit avec&nbsp;:</p>
      <pre class="literallayout">
$ git diff
</pre>

      <p>Ou depuis hier&nbsp;:</p>
      <pre class="literallayout">
$ git diff "@{yesterday}"
</pre>

      <p>Ou entre une version spécifique et la version deux commits
      en arrière&nbsp;:</p>
      <pre class="literallayout">
$ git diff 1b6d "master~2"
</pre>

      <p>Dans chacun de ces cas, la sortie est un <span class=
      "strong"><strong>patch</strong></span> (rustine) qui peut
      être appliqué en utilisant <span class="strong"><strong>git
      apply</strong></span>. Vous pouvez aussi essayer&nbsp;:</p>
      <pre class="literallayout">
$ git whatchanged --since="2 weeks ago"
</pre>

      <p>Souvent je parcours plutôt l’historique avec <a class=
      "ulink" href="http://sourceforge.net/projects/qgit" target=
      "_top">qgit</a>, pour sa pimpante interface photogénique, ou
      <a class="ulink" href="http://jonas.nitro.dk/tig/" target=
      "_top">tig</a>, une interface en mode texte qui fonctionne
      même sur les connexions lentes. Autrement, installez un
      serveur web, lancez <span class="strong"><strong>git
      instaweb</strong></span> et dégainez n’importe quel
      navigateur internet.</p>
    </div>

    <div class="section" title="Exercice">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_exercice"></a>Exercice</h2>
          </div>
        </div>
      </div>

      <p>Soit A, B, C, D quatre commits successifs où B est
      identique à A à l’exception de quelques fichiers qui ont été
      supprimés. Nous voudrions remettre les fichiers en D. Comment
      faire&nbsp;?</p>

      <p>Il y a au moins trois solutions. En considérant que nous
      sommes à D&nbsp;:</p>

      <div class="orderedlist">
        <ol class="orderedlist" type="1">
          <li class="listitem">
            <p class="simpara">La différence entre A et B sont les
            fichiers supprimés. Nous pouvons créer un patch
            représentant cette différence et l’appliquer&nbsp;:</p>
            <pre class="literallayout">
$ git diff B A | git apply
</pre>
          </li>

          <li class="listitem">
            <p class="simpara">Vu que nous avions enregistré les
            fichiers en A, nous pouvons les reprendre&nbsp;:</p>
            <pre class="literallayout">
$ git checkout A foo.c bar.h
</pre>
          </li>

          <li class="listitem">
            <p class="simpara">Nous pouvons aussi voir le chemin de
            A à B comme une modification à défaire&nbsp;:</p>
            <pre class="literallayout">
$ git revert B
</pre>
          </li>
        </ol>
      </div>

      <p>Quel est le meilleur choix&nbsp;? Celui que vous préférez.
      C’est facile d’obtenir ce que vous voulez avec Git, et
      souvent il y a plein de manières de le faire.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

From zsh-workers-return-13080-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Oct 25 07:49:17 2000
Return-Path: <zsh-workers-return-13080-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2613 invoked from network); 25 Oct 2000 07:49:16 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Oct 2000 07:49:16 -0000
Received: (qmail 20657 invoked by alias); 25 Oct 2000 07:49:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13080
Received: (qmail 20649 invoked from network); 25 Oct 2000 07:49:09 -0000
To: zsh-workers@sunsite.auc.dk
Path: mason
From: mason@primenet.com.au (Geoff Wing)
X-Newsgroups: lists.zsh.workers
Subject: Re: bug with completion (after 15 oct?)
Date: 25 Oct 2000 07:49:03 GMT
Organization: PrimeNet Computer Consultants
Lines: 36
Distribution: local
Message-ID: <slrn8vd43f.24b.mason@coral.primenet.com.au>
References: mason@primenet.com.au's message of 24 Oct 2000 14:33:47 GMT <200010250714.JAA23634@beta.informatik.hu-berlin.de>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 972460143 2599 203.43.15.2 (25 Oct 2000 07:49:03 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: 25 Oct 2000 07:49:03 GMT
User-Agent: slrn/0.9.6.3 (NetBSD)

Sven Wischnowsky <wischnow@informatik.hu-berlin.de> typed:
:Geoff Wing wrote:
:Does that mean that amatches is garbled at that point?

No, amatches had some information.  From memory, had some
sort of valid information so did ->next ,  ->next->next was NULL.

This is what I'm currently down to: this is stuff ripped out of my zshrc
though maybe slightly rearranged (the extra stuff in there is because
some is shared with 3.0.x startup) - but I can reproduce it with this
on the second or third go - if the second succeeds it'll also put my
cursor one line too high.

% zsh.new -f
% PROMPT=
_compdir=/usr/local/share/zsh/${ZSH_VERSION}/functions
[[ -z $fpath[(r)$_compdir] ]] && fpath=($fpath $_compdir)
autoload -U compinit
compinit
autoloadflag=-U
zstyle '*' completer _complete _correct _approximate
[[ -n "$fpath" ]] && for dir in $fpath; do [[ -d $dir ]] && autoload $autoloadflag $dir/*~*/_*(N.:t); done
zstyle ':completion:*' format '--> completing %d'
zstyle ':completion:*' menu select=1
setopt menu_complete
unsetopt always_last_prompt

# then do
ls ba<TAB><CTRL-U>ls ba<TAB><CTRL-U>ls ba<TAB>
# core dump

Regards,
-- 
Geoff Wing : <gcw@pobox.com>
Rxvt Stuff : <gcw@rxvt.org>
Zsh Stuff  : <gcw@zsh.org>


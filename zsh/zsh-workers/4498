From zsh-workers-request@math.gatech.edu Mon Nov 02 11:52:20 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24029 invoked from network); 2 Nov 1998 11:52:18 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 2 Nov 1998 11:52:18 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id GAA13443;
	Mon, 2 Nov 1998 06:45:20 -0500 (EST)
Resent-Date: Mon, 2 Nov 1998 06:45:20 -0500 (EST)
Date: Mon, 2 Nov 1998 12:43:21 +0100 (MET)
Message-Id: <199811021143.MAA22063@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@math.gatech.edu
In-reply-to: "Bart Schaefer"'s message of Mon, 2 Nov 1998 01:29:27 -0800
Subject: Re:  BUG: Extended completion with alternative completion
Resent-Message-ID: <"NAQQO2.0.xH3.GjPFs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4498
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Bart Schaefer wrote:

> ...
> 
> There are two problems: (1) in get_ccompctl(), when we chose to return
> the n[] completion, we lose track of the alternative (which hangs off
> the xor pointer in the head of the linked list of -x patterns); (2) we're
> prematurely returning an error in makecomplist(), so even if we still had
> the handle to the xor, we'd never follow it.
> 
> In short, alternative completion only works with extended completion when
> none of the extended patterns match, which doesn't seem right to me.
> 
> It's not hard to fix (2), but I'm leery of messing with (1) when there are
> a lot of other pending completion patches to be folded in to 3.1.6.  Sven,
> are you out there?
> 

Well, (1) is taken care of in the modifications of the completion code 
that are soon to appear.

And I have to admit that I don't really understand your other
problem. If you want cdmatch to be called even if the cursor is before 
the '/', you should use `C[0,*/*]', the manual says that with `n[i,s]' 
anything up to the i'th occurrence of s is not part of the completion
string, so the cursor isn't in a place where something can be
completed. Also I don't have any trouble with your second
compctl-version (trouble in the sense of SEGV or something like that).

So, could you please tell me what you wanted to have completed after
the `cd S/M'? (I guess you want `cd Src/Modules' but that would also
require a change in cdmatch.) Maybe I will then understand which fix
you are suggesting for (2).


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-10163-mason-zsh=primenet.com.au@sunsite.dk Fri Apr 21 23:10:26 2006
Return-Path: <zsh-users-return-10163-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21210 invoked from network); 21 Apr 2006 23:10:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Apr 2006 23:10:25 -0000
Received: (qmail 45164 invoked from network); 21 Apr 2006 23:10:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Apr 2006 23:10:15 -0000
Received: (qmail 25223 invoked by alias); 21 Apr 2006 23:10:05 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10163
Received: (qmail 25212 invoked from network); 21 Apr 2006 23:10:04 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Apr 2006 23:10:04 -0000
Received: (qmail 43833 invoked from network); 21 Apr 2006 23:10:04 -0000
Received: from wproxy.gmail.com (64.233.184.236)
  by a.mx.sunsite.dk with SMTP; 21 Apr 2006 23:10:03 -0000
Received: by wproxy.gmail.com with SMTP id i34so489132wra
        for <zsh-users@sunsite.dk>; Fri, 21 Apr 2006 16:10:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=KwwWafwao0bthxo4d9tAU+18DGsePefUoonGiOTG6f7KbLS3whyODUkttAfoqYuYHN9mAdhijVYPNsMirr2LmK2Klp1Gd4E9TdLIvPvl3fWu9oCPg7W8COm/t3Oj4+YZsEWedD+es0D7eKtjCKIQwBqUtj9lhq5jfg0dxN6gqDo=
Received: by 10.65.192.12 with SMTP id u12mr1406886qbp;
        Fri, 21 Apr 2006 16:10:01 -0700 (PDT)
Received: by 10.64.142.16 with HTTP; Fri, 21 Apr 2006 16:10:01 -0700 (PDT)
Message-ID: <dbfc82860604211610x70a12466j7eb5bb6758e85c0d@mail.gmail.com>
Date: Sat, 22 Apr 2006 01:10:01 +0200
From: "Nikolai Weibull" <now@bitwi.se>
Sender: nikolai.weibull@gmail.com
To: "Zsh Users" <zsh-users@sunsite.dk>
Subject: Problem with motion commands defined using match-word-by-style used with vi-delete
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

When a motion command defined using match-word-by-style, e.g.,
forward-word-match or backward-word-match, is used together with
vi-delete, they won't use the style assigned to the  command in
question.  The reason is that the $curcontext is set to zle:vi-delete,
not, for example, zle:forward-word-match.

It seems that this issue can be quite hard to fix, considering how
vi-delete is currently implemented.  But perhaps there's an easy
solution that I was unable to spot.

Until then I'm going to use my own vi-delete that uses
matach-word-by-style internally instead of whatever it uses by
default.  This allows me to define the rather useful text-object
motion-commands that Vim has, e.g., "daw" to delete a word.

  n.o.w.


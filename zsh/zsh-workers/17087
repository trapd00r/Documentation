From zsh-workers-return-17087-mason-zsh=primenet.com.au@sunsite.dk Wed May 08 08:49:27 2002
Return-Path: <zsh-workers-return-17087-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21436 invoked from network); 8 May 2002 08:49:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 8 May 2002 08:49:27 -0000
Received: (qmail 9319 invoked by alias); 8 May 2002 08:49:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17087
Received: (qmail 9305 invoked from network); 8 May 2002 08:49:15 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Sven Wischnowsky'" <wischnow@berkom.de>, zsh-workers@sunsite.dk
Subject: RE: completion in quotes - " vs ' - no suffix added
Date: Wed, 8 May 2002 12:49:06 +0400
Message-ID: <6134254DE87BD411908B00A0C99B044F02E89A73@mowd019a.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.3416
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <15576.54689.459113.686818@wischnow.berkom.de>
Importance: Normal

> 
> No, it doesn't: there's nothing wrong, as far as I can see. Always
> remember, what `compset -q' is intended for, namely things like:
> 
>   zsh -c 'echo do<TAB>
> 

Sure. And command can contain anything including file names with spaces
in them, special characters and whatever.

> Try it and you'll see that it does the right thing. At least it does
> for me.
> 

It does not for me. It is the same ` vs " thing:

bor@itsrm2% zsh -c "cd ./a\\ b
Completing directory
a\\ b      c\\ d      uudecode/

but

bor@itsrm2% zsh -c 'cd ./a\ b/
Completing directory
a\ b/      c\ d/      uudecode/


> What Andrej probably wants is splitting the current string with a
> combination of `compset -[PS]' and the ${(z)...} parameter flag. I'd
> like to know how that command is then able to find the different
> sub-words in the quoted string if things like spaces are not quoted a
> second time.
> 
> Or am I missing something?
> 

I do not know. What I actually need is completion of file list in
quotes. This list cannot contain spaces (because mondoarchive cannot
handle them anyway) and wihout spaces compset -q does exactly the right
thing to me. Still as long as I have stumbled onto something that looks
like a bug  ... :-)

-andrej


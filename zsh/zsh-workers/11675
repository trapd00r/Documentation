From zsh-workers-return-11675-mason-zsh=primenet.com.au@sunsite.auc.dk Wed May 31 05:14:07 2000
Return-Path: <zsh-workers-return-11675-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8327 invoked from network); 31 May 2000 05:14:05 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 31 May 2000 05:14:05 -0000
Received: (qmail 716 invoked by alias); 31 May 2000 05:13:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11675
Received: (qmail 709 invoked from network); 31 May 2000 05:13:46 -0000
Date: Tue, 30 May 2000 22:13:43 -0700 (PDT)
From: Wayne Davison <wayne@clari.net>
To: Zsh Workers <zsh-workers@sunsite.auc.dk>
Subject: PATCH: stop "make test" from sometimes failing
Message-ID: <Pine.GSO.4.21.0005302200050.10370-100000@house.clari.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I noticed that "make test" could sometimes fail in the 07cond.ztst
file if the creation of the unmodified file happened in the same
second as the "cat" of its (empty) contents.  To work around this,
I just added a "sleep 1" to the file, and now it always succeeds.

..wayne..

---8<------8<------8<------8<---cut here--->8------>8------>8------>8---
Index: Test/07cond.ztst
@@ -99,6 +99,7 @@
 
 # can't be bothered with -S
 
+  sleep 1
   cat unmodified
   touch newnewnew
   [[ -N newnewnew && ! -N unmodified ]]
---8<------8<------8<------8<---cut here--->8------>8------>8------>8---


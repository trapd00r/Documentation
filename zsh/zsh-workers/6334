From zsh-workers-return-6334-mason-zsh=primenet.com.au@sunsite.auc.dk Sun May 23 13:58:12 1999
Return-Path: <zsh-workers-return-6334-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27755 invoked from network); 23 May 1999 13:58:11 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 May 1999 13:58:10 -0000
Received: (qmail 23535 invoked by alias); 23 May 1999 13:58:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6334
Received: (qmail 23527 invoked from network); 23 May 1999 13:58:03 -0000
Message-Id: <9905231330.AA16507@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: globbing error persists 
In-Reply-To: "Timothy J Luoma"'s message of "Sat, 22 May 1999 21:37:19 DFT."
             <199905230137.VAA22008@ocalhost> 
Date: Sun, 23 May 1999 15:30:01 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Timothy J Luoma wrote:
> same as I've reported before still occurs w/ 3.1.5-pws-19

The problem is presumably somewhere in the while loop which currently
starts at line 476 in glob.c.  fn is successively set to all the files in
the current directory in turn, or should be.  Either the zreaddir() is
returning the right files, or it isn't.  If it is, there may be a problem
with stat() further on.  If it isn't it's hard to see what to do.  But
until we know more information about what's actually happening on this
particular system, there's nothing we can do.

Something else to try, though I didn't get an answer to the last lot: do
you have MARKDIRS set?  If so, unset it and see if it now works.  That
would certainly incriminate stat(), since now it doesn't try to stat() the
file, so try `ls -ld /drives/swapdisk' and see what that gives, and if you
have dynamic loading, `zmodload stat; stat -rs /drives/swapdisk' and see
what that gives.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


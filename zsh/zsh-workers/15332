From zsh-workers-return-15332-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 09 17:30:36 2001
Return-Path: <zsh-workers-return-15332-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 917 invoked from network); 9 Jul 2001 17:30:34 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jul 2001 17:30:34 -0000
Received: (qmail 16892 invoked by alias); 9 Jul 2001 17:30:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15332
Received: (qmail 16866 invoked from network); 9 Jul 2001 17:30:27 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
Date: Mon, 9 Jul 2001 21:30:20 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Michael Schaap <cygwin@mscha.com>
cc: <cygwin@cygwin.com>, ZSH Workers Mailing List <zsh-workers@sunsite.dk>
Subject: RE: Zsh observations
In-Reply-To: <5.1.0.14.2.20010709113106.025be7e8@imap.local.mscha.com>
Message-ID: <Pine.SV4.4.33.0107092120020.12110-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Mon, 9 Jul 2001, Michael Schaap wrote:

>
>          % ls -l
>          total 264
>          drwxrwxrwx   32 Administ None         4096 Jun 18 10:36 contrib
>          drwxrwxrwx   57 Administ None         8192 Jun  3 19:25 latest
>          -rwxrwxrwx    1 Administ None       239616 Jul  6 18:16 setup.exe
>          -rw-rw-rw-    1 Administ None        17970 Jul  8 16:53 setup.ini
>
> But remember, I've run
>          % zstyle ':completion::complete:-command-:*' ignored-patterns
> '*.(#i)(exe|dll)'
> on your advice.
> This works fine when running things from the $PATH, after applying your
> patch, but not this way.
>

If you posted the above in your first mail it would no take seven messages
to two lists to find the truth :-) Always try vanilla zsh first (zsh -f;
autoload -U compinit; compinit). If the problem goes away - try to find
what settings are causing the problem. Not that I always do it myself
:-)))

As Bart said, you need _ignored completer. This makes sure that if only
matches from ignored set are found they are suggested as possible matches:

{tty0}:/tmp/tst> ll
total 2
-rwxr-xr-x    1 user     544             1 Jul  9 17:19 foo.exe*
-rw-r--r--    1 user     544             1 Jul  9 17:19 foo.ini
{tty0}:/tmp/tst> zstyle -L
zstyle ':completion:*' matcher-list 'r:|[.,_-]=* r:|=*'
zstyle ':completion::complete:-command-:*' ignored-patterns '*.(#i)exe'
zstyle ':completion:*' completer _complete _ignored
{tty0}:/tmp/tst> ./foTAB
{tty0}:/tmp/tst> ./foo.exe


> I guess I'll just stop ignoring exes.  ("Doctor, it hurts when I do this.")
>

I guess, we really should hash just foo for foo.exe and stop messing with
ignored patterns.

-andrej


From zsh-workers-return-21934-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 25 22:17:51 2005
Return-Path: <zsh-workers-return-21934-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20757 invoked from network); 25 Oct 2005 22:17:46 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Oct 2005 22:17:46 -0000
Received: (qmail 38868 invoked from network); 25 Oct 2005 22:17:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Oct 2005 22:17:39 -0000
Received: (qmail 19537 invoked by alias); 25 Oct 2005 22:17:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21934
Received: (qmail 19527 invoked from network); 25 Oct 2005 22:17:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 25 Oct 2005 22:17:36 -0000
Received: (qmail 38563 invoked from network); 25 Oct 2005 22:17:36 -0000
Received: from mta07-winn.ispmail.ntl.com (81.103.221.47)
  by a.mx.sunsite.dk with SMTP; 25 Oct 2005 22:17:34 -0000
Received: from aamta11-winn.ispmail.ntl.com ([81.103.221.35])
          by mta07-winn.ispmail.ntl.com with ESMTP
          id <20051025221733.QZSE21883.mta07-winn.ispmail.ntl.com@aamta11-winn.ispmail.ntl.com>
          for <zsh-workers@sunsite.dk>; Tue, 25 Oct 2005 23:17:33 +0100
Received: from pwslaptop.csr.com ([81.105.238.64])
          by aamta11-winn.ispmail.ntl.com with SMTP
          id <20051025221733.IRIV8786.aamta11-winn.ispmail.ntl.com@pwslaptop.csr.com>
          for <zsh-workers@sunsite.dk>; Tue, 25 Oct 2005 23:17:33 +0100
Date: Tue, 25 Oct 2005 23:17:28 +0100
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: Zsh Hackers' List <zsh-workers@sunsite.dk>
Subject: Re: [ramk@cse.iitm.ernet.in: Bug#335481: zsh: zsh/sched waits for
 next return to prompt even with NOTIFY set]
Message-Id: <20051025231728.5093e582.p.w.stephenson@ntlworld.com>
In-Reply-To: <20051024193137.GA10982@scowler.net>
References: <20051024193137.GA10982@scowler.net>
X-Mailer: Sylpheed version 0.9.12 (GTK+ 1.2.10; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.4

On Mon, 24 Oct 2005 15:31:37 -0400
Clint Adams <schizo@debian.org> wrote:
> The sched builting provided by the zsh/sched module seems to execute
> a scheduled command only when an enter is pressed after the time
> specified has elapsed/arrived, much like how mail notification
> occurs. This makes the command useless when the user wants to
> schedule and leave the shell idle, and start using it only after the
> time for which the command is scheduled. I don't know if this is a
> bug or it is the intended behaviour. If it is intended, I could
> suggest a few alternatives that would add this feature.

It's the intended behaviour, not so much because it's useful that way as
because it's the only thing that can be done without an additional
process (or thread, but the shell isn't multithreaded in the usual sense).

> 1. Execute as soon as the time arrives (maybe in the background),
>    much like how job exit notification works with the NOTIFY option
>    works. May be sched can reuse this option or have an option of
>    its own. Or even better, perhaps one can indicate the desired
>    behaviour on a per-item basis, by a flag, when adding an item.

This would require some use of SIGALRM.  This can be done with a shell
function, for example.  The display features that the notify option uses
are available with the zle command.  That would be a worthwhile addition
to the distribution and probably more flexible than a builtin.

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com> Web page still at
http://www.pwstephenson.fsnet.co.uk/


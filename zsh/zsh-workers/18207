From zsh-workers-return-18207-mason-zsh=primenet.com.au@sunsite.dk Sun Feb 09 01:07:16 2003
Return-Path: <zsh-workers-return-18207-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17426 invoked from network); 9 Feb 2003 01:07:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Feb 2003 01:07:15 -0000
Received: (qmail 26559 invoked by alias); 9 Feb 2003 01:07:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18207
Received: (qmail 26552 invoked from network); 9 Feb 2003 01:07:03 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 9 Feb 2003 01:07:03 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [206.137.16.31] by sunsite.dk (MessageWall 1.0.8) with SMTP; 9 Feb 2003 1:7:2 -0000
Received: from crystal.dman.com (clint@localhost [127.0.0.1])
	by crystal.dman.com (8.12.6/8.12.6/Horus) with ESMTP id h19171fR010517
	for <zsh-workers@sunsite.dk>; Sat, 8 Feb 2003 20:07:01 -0500
Received: (from clint@localhost)
	by crystal.dman.com (8.12.6/8.12.6/Debian-7) id h1916tSU010515
	for zsh-workers@sunsite.dk; Sat, 8 Feb 2003 20:06:55 -0500
X-Authentication-Warning: crystal.dman.com: clint set sender to clint@zsh.org using -f
Date: Sat, 8 Feb 2003 20:06:55 -0500
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: maxfilelocks in ulimit output
Message-ID: <20030209010655.GA10509@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-milter (http://amavis.org/)

Index: Src/Builtins/rlimits.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Builtins/rlimits.c,v
retrieving revision 1.7
diff -u -r1.7 rlimits.c
--- Src/Builtins/rlimits.c	27 Aug 2002 21:10:34 -0000	1.7
+++ Src/Builtins/rlimits.c	9 Feb 2003 01:05:39 -0000
@@ -257,6 +257,12 @@
 	    printf("threads per process        ");
 	break;
 # endif /* RLIMIT_PTHREAD */
+# ifdef RLIMIT_LOCKS
+    case RLIMIT_LOCKS:
+	if (head)
+	    printf("file locks                 ");
+	break;
+# endif /* RLIMIT_LOCKS */
     }
     /* display the limit */
     if (limit == RLIM_INFINITY)


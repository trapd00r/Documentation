From zsh-workers-return-22038-mason-zsh=primenet.com.au@sunsite.dk Sun Nov 27 08:22:17 2005
Return-Path: <zsh-workers-return-22038-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4386 invoked from network); 27 Nov 2005 08:22:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 Nov 2005 08:22:13 -0000
Received: (qmail 26073 invoked from network); 27 Nov 2005 08:22:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 Nov 2005 08:22:04 -0000
Received: (qmail 7858 invoked by alias); 27 Nov 2005 08:22:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22038
Received: (qmail 7843 invoked from network); 27 Nov 2005 08:22:01 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 Nov 2005 08:22:01 -0000
Received: (qmail 25795 invoked from network); 27 Nov 2005 08:22:01 -0000
Received: from flock1.newmail.ru (212.48.140.157)
  by a.mx.sunsite.dk with SMTP; 27 Nov 2005 08:21:59 -0000
Received: (qmail 10471 invoked from network); 27 Nov 2005 08:05:18 -0000
Received: from unknown (HELO cooker.home.net) (arvidjaar@newmail.ru@83.237.106.161)
  by smtpd.newmail.ru with SMTP; 27 Nov 2005 08:05:18 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-workers@sunsite.dk,
 seth@cql.com
Subject: Re: = completion
Date: Sun, 27 Nov 2005 11:21:53 +0300
User-Agent: KMail/1.9
References: <1133032949.29478.4.camel@localhost.localdomain>
In-Reply-To: <1133032949.29478.4.camel@localhost.localdomain>
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200511271121.55108.arvidjaar@newmail.ru>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Saturday 26 November 2005 22:22, Seth Kurtzberg wrote:
>
> In each of the following, however, tab completion does not work (that
> is, no completion occurs):
>
>     export abc=/whatever:$abc   (obviously I attempt tab completion
> before adding the :$abc)
>

Works fine and with COMPLETE_IN_WORD set also in the middle of string

>     dd if=./whatever
>

Of course works too.

Which zsh version and completion style do you use? I am not sure if compctl 
does what you want (I have not used it for years) but new compsys does. If 
you have zsh 4.2.x, try

autoload -U compinit; compinit

to initialize completion system.

> The latter is an example of using arg=/some/path which occurs for
> various commands, so dd is just an example and the question is not in
> any way specific to dd.
>

It is. Completion is context-sensitive. It knows that export expects 
(path-)assignment; that for dd if= has path as argument; but it has no way to 
know this for arbitrary command "foo". While it is possible to fallback to 
something like dd does, I am now sure it is good idea; you probably need it 
only for several commands and it is likely zsh already includes suitable 
completion for them.

> I do have the options related to equals completion enabled.
>

Which suggests you are using compctl.

> I also tried this on a new install of linux

This satement is meaningless :) Which distribution, which version? Some of 
them may use compsys by default some not. Anyway, just try compinit as above 
and if it works, try compinstall that will help you to setup new completion 
system.

BTW zsh-users would be more appropriate for such questions.

- -andrey
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFDiWyiR6LMutpd94wRAkHWAJ9eBvoUlJre1se/GdN0hJ5aw7wSrwCgsIgb
rK26xHma2Fcr9v1cxi5dPak=
=NVS1
-----END PGP SIGNATURE-----


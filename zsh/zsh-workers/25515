From zsh-workers-return-25515-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 24 16:05:34 2008
Return-Path: <zsh-workers-return-25515-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10849 invoked from network); 24 Aug 2008 16:05:32 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Aug 2008 16:05:32 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 17314 invoked from network); 24 Aug 2008 16:05:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Aug 2008 16:05:21 -0000
Received: (qmail 14928 invoked by alias); 24 Aug 2008 16:05:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25515
Received: (qmail 14910 invoked from network); 24 Aug 2008 16:05:10 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 24 Aug 2008 16:05:10 -0000
Received: from py-out-1112.google.com (py-out-1112.google.com [64.233.166.178])
	by bifrost.dotsrc.org (Postfix) with ESMTP id ED54C8030846
	for <zsh-workers@sunsite.dk>; Sun, 24 Aug 2008 18:05:05 +0200 (CEST)
Received: by py-out-1112.google.com with SMTP id u77so801504pyb.23
        for <zsh-workers@sunsite.dk>; Sun, 24 Aug 2008 09:05:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=lNt8wqDhdARRlagxcew3ax512CBOY2YVhkzEXICbtAc=;
        b=tkAYYyNTR3G9GrdWAQGkDF6Ok0OzUcPMsMQsqMBtBjg067NQsvoYogWMFNjptTTyTr
         1cc4fEF+KZNWsJtXZl499d42HIF8AcXsFaJ03J31DzK1JgaTEKEOGwVsBYd4quuoRYGZ
         SZZaUD9d0KTTx0guoKo2zR2aABRfGNEqbIe8Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=gkoEdftflgjHTjiCh3LbMu9n8Zm/mxDvPUd4UkLg26SquuKruUqhzsNhSSWLWKAfMa
         letGA0E/8mTCmFwP8wHsuaPAycUHDg3wA9nlvipjsnbCfPggkKFidVbgK5qY+7nn3bo/
         Xag+UecMzvfHV1d1AcWMWIh+l2eX+NU3efk7o=
Received: by 10.115.108.1 with SMTP id k1mr2654971wam.109.1219593904122;
        Sun, 24 Aug 2008 09:05:04 -0700 (PDT)
Received: by 10.114.159.2 with HTTP; Sun, 24 Aug 2008 09:05:04 -0700 (PDT)
Message-ID: <6cd6de210808240905s40c8c86ch4766b711e87ffde5@mail.gmail.com>
Date: Sun, 24 Aug 2008 12:05:04 -0400
From: "Rocky Bernstein" <rocky.bernstein@gmail.com>
To: "Zsh hackers list" <zsh-workers@sunsite.dk>
Subject: Weird error message when using bash or ksh form of array initialization
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV 0.92.1/8081/Sun Aug 24 15:41:12 2008 on bifrost
X-Virus-Status: Clean

When I run this (erroneous?) program:

  typeset -a fd=()
  typeset -a sources
  typeset -i xx

I get a weird error message:

  typeset:3: maximum nested function level reached

Note that neither of these give an error:

  typeset -a fd=()
  typeset -a sources

or

  typeset -a fd
  typeset -a sources
  typeset -i xx

or

  typeset -a fd
  fd=()
  typeset -a sources
  typeset -i xx

Somehow fd= is treated as a function which is indicated out by adding
a request to print out fd=:

 typeset -a fd=()
 typeset -a sources
 typeset -i xx
 declare -f fd=

Which reports:
  typeset:3: maximum nested function level reached
  'fd=' () {
 	typeset -a sources
  }

Can someone explain what's going on?

Since both bash and ksh allow an array initialization via the form
used above, it increases the chance of getting this weird error
message.

Thanks.


From zsh-workers-return-23773-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 17 20:11:34 2007
Return-Path: <zsh-workers-return-23773-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29155 invoked from network); 17 Aug 2007 20:11:30 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Aug 2007 20:11:30 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 30978 invoked from network); 17 Aug 2007 20:11:23 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2007 20:11:23 -0000
Received: (qmail 16374 invoked by alias); 17 Aug 2007 20:11:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23773
Received: (qmail 11934 invoked from network); 17 Aug 2007 19:29:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Aug 2007 19:29:38 -0000
Received: (qmail 1051 invoked from network); 17 Aug 2007 19:29:38 -0000
Received: from web50101.mail.re2.yahoo.com (206.190.38.29)
  by a.mx.sunsite.dk with SMTP; 17 Aug 2007 19:29:32 -0000
Received: (qmail 68419 invoked by uid 60001); 17 Aug 2007 19:29:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=5E35K4nwDupiP76iqoy2f+jVU/4rx3DQXA/X3Sjmpg1lCmz/L/41UFgCamsJTAdZjnTcSgfcKRxRGVKmkdnQ19Ex6uD+OU6m5QrCgrC/Zxmvb6NDOcb5hBuIH5O+Ja1zy42HDZaU2XSqMpPDoi0NjBYtX1HMTZWlubkP2qN4Kyo=;
X-YMail-OSG: IwWOeT0VM1mP2F3bsNbqNeJNDDyM61KHryrsGFaY
Received: from [67.155.108.2] by web50101.mail.re2.yahoo.com via HTTP; Fri, 17 Aug 2007 12:29:27 PDT
Date: Fri, 17 Aug 2007 12:29:27 -0700 (PDT)
From: Nex Magik <nexmagik@yahoo.com>
Subject: inconsistent behavior observed with export VAR=VAL versus VAR=VAL zsh 4.2.6
To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-527060699-1187378967=:66027"
Content-Transfer-Encoding: 8bit
Message-ID: <432520.66027.qm@web50101.mail.re2.yahoo.com>

--0-527060699-1187378967=:66027
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Content-Id: 
Content-Disposition: inline

This is a strange issue, it has a workaround, but its still strange.

The very short way to see it is to try to append an expression
with spaces in it to a variable.

Please take a look at the first text attachment for the demonstration
of this issue. The second file contains my settings.

in short, the bug is shown after doing env -i PATH=$PATH zsh -f

Please email me directly.

Thank you.
-jason kim



       
____________________________________________________________________________________
Need a vacation? Get great deals
to amazing places on Yahoo! Travel.
http://travel.yahoo.com/
--0-527060699-1187378967=:66027
Content-Type: text/plain; name="zshbug.txt"
Content-Description: 1533334279-zshbug.txt
Content-Disposition: inline; filename="zshbug.txt"

stimpy% Y="foo bar"
stimpy% echo $Y
foo bar
stimpy% Z=$(/bin/echo $Y)
stimpy% echo $Z                
foo bar
stimpy% Z=$(/bin/echo $Y):$PATH
stimpy% echo $Z
foo bar:/tmp/opt/spi/RapiDev_99a-RC1/tools/bin:/opt/gcc-3.2.3/bin:/opt/python-2.4.4/bin:/usr/local/bin:/bin:/usr/bin:/home/jkim/bin/exec/i686-Linux2:/home/jkim/bin/shell:/home/jkim/bin/shell/LOGIN/i686-Linux2
stimpy% export Z=$(/bin/echo $Y):$PATH
export: not an identifier: bar:/tmp/opt/spi/RapiDev_99a-RC1/tools/bin:/opt/gcc-3.2.3/bin:/opt/python-2.4.4/bin:/usr/local/bin:/bin:/usr/bin:/home/jkim/bin/exec/i686-Linux2:/home/jkim/bin/shell:/home/jkim/bin/shell/LOGIN/i686-Linux2
stimpy

--0-527060699-1187378967=:66027
Content-Type: text/plain; name="zshbug-settings.txt"
Content-Description: 1301483756-zshbug-settings.txt
Content-Disposition: inline; filename="zshbug-settings.txt"

stimpy:i686-Linux2:/tmp/opt/spi/RapiDev_99a-RC1/demo/fir>env -i PATH=$PATH zsh -f
stimpy% 
stimpy% 
stimpy% set
'!'=0
'#'=0
'$'=21495
'*'=()
-=569XZfims
0=zsh
'?'=0
@=()
ARGC=0
BAUD=38400
CDPATH=''
COLUMNS=204
CPUTYPE=i686
EGID=29000
ERRNO=2
EUID=29098
FCEDIT=vi
FIGNORE=''
FPATH=/usr/local/share/zsh/site-functions:/usr/local/share/zsh/4.2.6/functions
GID=29000
HISTCHARS='!^#'
HISTCMD=1
HISTSIZE=30
HOME=/home/jkim
HOST=stimpy.spi.local
IFS=' 
'
KEYTIMEOUT=40
LINENO=3
LINES=71
LISTMAX=100
LOGCHECK=60
LOGNAME=jkim
MACHTYPE=i686
MAILCHECK=60
MAILPATH=''
MANPATH=''
MODULE_PATH=/usr/local/lib/zsh/4.2.6
NULLCMD=cat
OLDPWD=/tmp/opt/spi/RapiDev_99a-RC1/demo/fir
OPTARG=''
OPTIND=1
OSTYPE=linux-gnu
PATH=/tmp/opt/spi/RapiDev_99a-RC1/tools/bin:/opt/gcc-3.2.3/bin:/opt/python-2.4.4/bin:/usr/local/bin:/bin:/usr/bin:/home/jkim/bin/exec/i686-Linux2:/home/jkim/bin/shell:/home/jkim/bin/shell/LOGIN/i686-Linux2
POSTEDIT=''
PPID=3009
PROMPT='%m%# '
PROMPT2='%_> '
PROMPT3='?# '
PROMPT4='+%N:%i> '
PS1='%m%# '
PS2='%_> '
PS3='?# '
PS4='+%N:%i> '
PSVAR=''
PWD=/tmp/opt/spi/RapiDev_99a-RC1/demo/fir
RANDOM=28135
READNULLCMD=more
RPROMPT=''
RPROMPT2=''
RPS1=''
RPS2=''
SAVEHIST=0
SECONDS=4
SHLVL=1
SPROMPT='zsh: correct '\''%R'\'' to '\''%r'\'' [nyae]? '
TERM=''
TIMEFMT='%J  %U user %S system %P cpu %*E total'
TMPPREFIX=/tmp/zsh
TRY_BLOCK_ERROR=-1
TTY=/dev/pts/3
TTYIDLE=0
UID=29098
USERNAME=jkim
VENDOR=pc
WATCH=''
WATCHFMT='%n has %a %l from %m.'
WORDCHARS='*?_-.[]~=/&;!#$%^(){}<>'
ZSH_NAME=zsh
ZSH_VERSION=4.2.6
_=set
aliases
argv=()
builtins
cdpath=()
commands
dirstack
dis_aliases
dis_builtins
dis_functions
dis_galiases
dis_reswords
fignore=()
fpath=(/usr/local/share/zsh/site-functions /usr/local/share/zsh/4.2.6/functions)
funcstack
functions
galiases
histchars='!^#'
history
historywords
jobdirs
jobstates
jobtexts
keymaps
mailpath=()
manpath=()
module_path=(/usr/local/lib/zsh/4.2.6)
modules
nameddirs
options
parameters
path=(/tmp/opt/spi/RapiDev_99a-RC1/tools/bin /opt/gcc-3.2.3/bin /opt/python-2.4.4/bin /usr/local/bin /bin /usr/bin /home/jkim/bin/exec/i686-Linux2 /home/jkim/bin/shell /home/jkim/bin/shell/LOGIN/i686-Linux2)
pipestatus=()
prompt='%m%# '
psvar=()
reswords
signals=(EXIT HUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS ZERR DEBUG)
status=0
termcap
terminfo
userdirs
watch=()
widgets
stimpy% setopts
zsh: command not found: setopts
stimpy% setopts 
interactive
monitor
norcs
shinstdin
zle
stimpy% setopt
interactive
monitor
norcs
shinstdin
zle
stimpy%   
stimpy% stty erase  
stty: missing argument to `erase'
Try `stty --help' for more information.
stimpy% stty erase ^?
stimpy% 
stimpy% 
stimpy% stty =-a   
stimpy% 
stimpy% export TERM=xterm
stimpy%   
stimpy% 
stimpy% ls -l
total 544
-r--r--r--  1 jkim eng   1968 Aug 15 19:30 README
-r-xr-xr-x  1 jkim eng    901 Aug 15 19:30 build.sh
-r-xr-xr-x  1 jkim eng    720 Aug 15 19:30 build_beta.sh
-r--r--r--  1 jkim eng   2388 Aug 15 19:30 fir.h
-rwxr-xr-x  1 jkim eng 410346 Aug 17 10:32 fir.host
-r--r--r--  1 jkim eng  12980 Aug 15 19:30 fir.sc
-r--r--r--  1 jkim eng   7166 Aug 15 19:30 fir_64bp.sc
-r--r--r--  1 jkim eng   7037 Aug 15 19:30 fir_64br.sc
-r--r--r--  1 jkim eng  14929 Aug 15 19:30 fir_64ip.sc
-r--r--r--  1 jkim eng  14788 Aug 15 19:30 fir_64ir.sc
-r--r--r--  1 jkim eng   2934 Aug 15 19:30 fir_8bp.sc
-r--r--r--  1 jkim eng   2775 Aug 15 19:30 fir_8br.sc
-r--r--r--  1 jkim eng   5047 Aug 15 19:30 fir_8ip.sc
-r--r--r--  1 jkim eng   4887 Aug 15 19:30 fir_8ir.sc
-r--r--r--  1 jkim eng   4094 Aug 15 19:30 fir_8mp.sc
-r--r--r--  1 jkim eng   3760 Aug 15 19:30 fir_8mr.sc
-r--r--r--  1 jkim eng   6336 Aug 15 19:30 fir_fns.h
-r--r--r--  1 jkim eng   1764 Aug 15 19:30 fir_ref.c
-r-xr-xr-x  1 jkim eng    407 Aug 15 19:30 perf.sh
-r-xr-xr-x  1 jkim eng    465 Aug 15 19:30 test.sh
drwxr-xr-x  2 jkim eng   4096 Aug 17 10:32 tmp
stimpy% 
stimpy% 
stimpy% 
stimpy% 
stimpy:i686-Linux2:/tmp/opt/spi/RapiDev_99a-RC1/demo/fir>env -i PATH=$PATH zsh -f
stimpy% export TERM=z   
stimpy% export TERM=xterm
stimpy% 
stimpy% set  
'!'=0
'#'=0
'$'=21687
'*'=()
-=569XZfims
0=zsh
'?'=0
@=()
ARGC=0
BAUD=38400
CDPATH=''
COLUMNS=204
CPUTYPE=i686
EGID=29000
ERRNO=0
EUID=29098
FCEDIT=vi
FIGNORE=''
FPATH=/usr/local/share/zsh/site-functions:/usr/local/share/zsh/4.2.6/functions
GID=29000
HISTCHARS='!^#'
HISTCMD=2
HISTSIZE=30
HOME=/home/jkim
HOST=stimpy.spi.local
IFS=' 
'
KEYTIMEOUT=40
LINENO=3
LINES=71
LISTMAX=100
LOGCHECK=60
LOGNAME=jkim
MACHTYPE=i686
MAILCHECK=60
MAILPATH=''
MANPATH=''
MODULE_PATH=/usr/local/lib/zsh/4.2.6
NULLCMD=cat
OLDPWD=/tmp/opt/spi/RapiDev_99a-RC1/demo/fir
OPTARG=''
OPTIND=1
OSTYPE=linux-gnu
PATH=/tmp/opt/spi/RapiDev_99a-RC1/tools/bin:/opt/gcc-3.2.3/bin:/opt/python-2.4.4/bin:/usr/local/bin:/bin:/usr/bin:/home/jkim/bin/exec/i686-Linux2:/home/jkim/bin/shell:/home/jkim/bin/shell/LOGIN/i686-Linux2
POSTEDIT=''
PPID=3009
PROMPT='%m%# '
PROMPT2='%_> '
PROMPT3='?# '
PROMPT4='+%N:%i> '
PS1='%m%# '
PS2='%_> '
PS3='?# '
PS4='+%N:%i> '
PSVAR=''
PWD=/tmp/opt/spi/RapiDev_99a-RC1/demo/fir
RANDOM=26402
READNULLCMD=more
RPROMPT=''
RPROMPT2=''
RPS1=''
RPS2=''
SAVEHIST=0
SECONDS=15
SHLVL=1
SPROMPT='zsh: correct '\''%R'\'' to '\''%r'\'' [nyae]? '
TERM=xterm
TIMEFMT='%J  %U user %S system %P cpu %*E total'
TMPPREFIX=/tmp/zsh
TRY_BLOCK_ERROR=-1
TTY=/dev/pts/3
TTYIDLE=0
UID=29098
USERNAME=jkim
VENDOR=pc
WATCH=''
WATCHFMT='%n has %a %l from %m.'
WORDCHARS='*?_-.[]~=/&;!#$%^(){}<>'
ZSH_NAME=zsh
ZSH_VERSION=4.2.6
_=set
aliases
argv=()
builtins
cdpath=()
commands
dirstack
dis_aliases
dis_builtins
dis_functions
dis_galiases
dis_reswords
fignore=()
fpath=(/usr/local/share/zsh/site-functions /usr/local/share/zsh/4.2.6/functions)
funcstack
functions
galiases
histchars='!^#'
history
historywords
jobdirs
jobstates
jobtexts
keymaps
mailpath=()
manpath=()
module_path=(/usr/local/lib/zsh/4.2.6)
modules
nameddirs
options
parameters
path=(/tmp/opt/spi/RapiDev_99a-RC1/tools/bin /opt/gcc-3.2.3/bin /opt/python-2.4.4/bin /usr/local/bin /bin /usr/bin /home/jkim/bin/exec/i686-Linux2 /home/jkim/bin/shell /home/jkim/bin/shell/LOGIN/i686-Linux2)
pipestatus=(0)
prompt='%m%# '
psvar=()
reswords
signals=(EXIT HUP INT QUIT ILL TRAP ABRT BUS FPE KILL USR1 SEGV USR2 PIPE ALRM TERM STKFLT CHLD CONT STOP TSTP TTIN TTOU URG XCPU XFSZ VTALRM PROF WINCH POLL PWR SYS ZERR DEBUG)
status=0
termcap
terminfo
userdirs
watch=()
widgets
stimpy% setopt
interactive
monitor
norcs
shinstdin
zle

--0-527060699-1187378967=:66027--


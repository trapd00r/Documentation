From zsh-workers-return-5881-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 22 15:34:35 1999
Return-Path: <zsh-workers-return-5881-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6090 invoked from network); 22 Mar 1999 15:34:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 22 Mar 1999 15:34:33 -0000
Received: (qmail 20237 invoked by alias); 22 Mar 1999 15:33:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5881
Received: (qmail 20227 invoked from network); 22 Mar 1999 15:33:51 -0000
Date: Mon, 22 Mar 1999 16:33:43 +0100 (MET)
Message-Id: <199903221533.QAA18066@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: dumping


You may have noticed that startup after my last patches didn't get
faster... I forgot to change the uses of compconfig[dumpfile] after I
changed the key.

Sorry.

Bye
 Sven

diff -u oc/Core/compdump Completion/Core/compdump
--- oc/Core/compdump	Mon Mar 22 14:54:41 1999
+++ Completion/Core/compdump	Mon Mar 22 16:31:10 1999
@@ -15,7 +15,7 @@
 # Print the number of files used for completion. This is used in compinit
 # to see if auto-dump should re-dump the dump-file.
 
-_d_file=${compconfig[dump_file]-${0:h}/compinit.dump}
+_d_file=${compconfig[dumpfile]-${0:h}/compinit.dump}
 
 typeset -U _d_files
 _d_files=( ${^~fpath}/_*~*~(N:t) )
diff -u oc/Core/compinit Completion/Core/compinit
--- oc/Core/compinit	Mon Mar 22 14:54:41 1999
+++ Completion/Core/compinit	Mon Mar 22 16:31:02 1999
@@ -247,10 +247,10 @@
 
 # If we have a dump file, load it.
 
-if [[ -f "$compconfig[dump_file]" ]]; then
-  read -rA _i_line < "$compconfig[dump_file]"
+if [[ -f "$compconfig[dumpfile]" ]]; then
+  read -rA _i_line < "$compconfig[dumpfile]"
   if [[ _i_autodump -eq 1 && $_i_line[2] -eq $#_i_files ]]; then
-    builtin . "$compconfig[dump_file]"
+    builtin . "$compconfig[dumpfile]"
     _i_done=yes
   fi
   unset _i_line

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-6142-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 29 00:02:10 1999
Return-Path: <zsh-workers-return-6142-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11945 invoked from network); 29 Apr 1999 00:02:04 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Apr 1999 00:02:04 -0000
Received: (qmail 20189 invoked by alias); 29 Apr 1999 00:01:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6142
Received: (qmail 20182 invoked from network); 29 Apr 1999 00:01:41 -0000
Date: Wed, 28 Apr 1999 17:01:35 -0700 (PDT)
From: David Benson <daveb@ffem.org>
X-Sender: daveb@luca.hivemind.idealab.com
To: zsh-workers@sunsite.auc.dk
Subject: zsh and long running linux boxen
Message-ID: <Pine.LNX.4.10.9904281655160.24747-100000@luca.hivemind.idealab.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

This isn't a bug in zsh but it is a bug in the linux
kernel that only manifested itself in zsh for us.

The bug is:  on linux boxes that have been up
2^31/100 seconds, the select(2) system call trounces the
struct timeval that is the fifth argument.  This messes
up zsh's terminal handling.  (The bug in linux occurs when
the jiffies global variable runs into the sign bit) This is
about 248 days.

Yes, the bug _does_ go back away after another 248 days.

The symptoms are slightly different in different versions of
zsh.  In one, you must press enter twice to have your command run.
In the other, only one consecutive backspace shows up. The others
are tracked but not displayed.

- Dave Benson


From zsh-workers-return-13762-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 26 07:52:31 2001
Return-Path: <zsh-workers-return-13762-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21494 invoked from network); 26 Mar 2001 07:52:30 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 26 Mar 2001 07:52:30 -0000
Received: (qmail 11896 invoked by alias); 26 Mar 2001 07:52:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13762
Received: (qmail 11884 invoked from network); 26 Mar 2001 07:52:22 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer goliath.siemens.de)
Date: Mon, 26 Mar 2001 11:52:17 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
cc: <zsh-workers@sunsite.dk>
Subject: Re: Setting MONITOR after startup
In-Reply-To: <1010325235757.ZM11718@candle.brasslantern.com>
Message-ID: <Pine.SV4.4.33.0103261149430.13167-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


Actually this is very similar to what happens under Cygwin ("not an owner"
or like this trying to set tty pgrp). This happens only for zpty.

Just in case it may be useful to compare two cases. I am off for this week
so hardly have any chance to do it.

-andrej

On Sun, 25 Mar 2001, Bart Schaefer wrote:

> While fooling with Ryan Richter's infinite-loop-bug, I happened to try
> running `zsh +m':
>
> zagzig% setopt
> interactive
> norcs
> shinstdin
> zle
> zagzig% setopt monitor
> zsh: can't set tty pgrp: operation not permitted
> zagzig% setopt monitor
> zagzig% sleep 10 &
> [1] 11706
> zagzig% jobs
> [1]  + running    sleep 10
> zagzig%
> [1]  + done       sleep 10
> zagzig%
>
> Why did "setopt monitor" fail the first time, but not the second time?
>
> Also, I can't reproduce it now with "zsh -f +m" but at one point the entire
> shell got stopped with a SIGTTOU.  This led me to notice that there's a lot
> of signal handling that's only done when `jobbing' is true when the shell
> first starts up; maybe some of that should be independent of `jobbing', or
> maybe it all needs to get done again somewhere else if the state of MONITOR
> changes?
>
> No patch yet ...
>
>

-- 
------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 737 2747
Siemens ICP ITS Moscow		Tel:   +7 (095) 737 2723

E-Mail: Andrej.Borsenkow@mow.siemens.ru
-------------------------------------------------------------------------


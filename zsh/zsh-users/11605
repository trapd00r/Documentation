From zsh-users-return-11605-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 10 19:14:38 2007
Return-Path: <zsh-users-return-11605-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28108 invoked from network); 10 Jul 2007 19:14:35 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00,WHOIS_NETSOLPR
	autolearn=ham version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 10 Jul 2007 19:14:35 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 8209 invoked from network); 10 Jul 2007 19:14:29 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2007 19:14:29 -0000
Received: (qmail 13931 invoked by alias); 10 Jul 2007 19:14:21 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11605
Received: (qmail 13921 invoked from network); 10 Jul 2007 19:14:20 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 10 Jul 2007 19:14:20 -0000
Received: (qmail 6921 invoked from network); 10 Jul 2007 19:14:20 -0000
Received: from phsmgmx7.partners.org (155.52.251.57)
  by a.mx.sunsite.dk with SMTP; 10 Jul 2007 19:14:16 -0000
Received: from phsmgmx7.partners.org (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id 40165DD4055;
	Tue, 10 Jul 2007 15:14:15 -0400 (EDT)
Received: from PHSXCON1.partners.org (phsxcon1.mgh.harvard.edu [132.183.130.40])
	by phsmgmx7.partners.org (Postfix) with ESMTP id 158DBDD4053;
	Tue, 10 Jul 2007 15:14:13 -0400 (EDT)
Received: from PHSXMB8.partners.org ([170.223.201.59]) by PHSXCON1.partners.org with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 10 Jul 2007 15:14:00 -0400
Received: from W0053328.mgh.harvard.edu.partners.org ([132.183.29.121]) by PHSXMB8.partners.org with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 10 Jul 2007 15:14:00 -0400
To: Peter Stephenson <pws@csr.com>
Cc: zsh-users@sunsite.dk
Subject: Re: Help on filename generation
References: <87r6nggnrv.fsf@W0053328.mgh.harvard.edu>
	<200707101753.l6AHrIjL025548@news01.csr.com>
	<200707101810.l6AIAkNr025726@news01.csr.com>
From: jadamson@partners.org (Joel J. Adamson)
Date: Tue, 10 Jul 2007 15:13:22 -0400
In-Reply-To: <200707101810.l6AIAkNr025726@news01.csr.com> (Peter Stephenson's message of "Tue\, 10 Jul 2007 19\:10\:46 +0100")
Message-ID: <87bqekgjhp.fsf@W0053328.mgh.harvard.edu>
User-Agent: Gnus/5.11 (Gnus v5.11) Emacs/22.1 (gnu/linux)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-OriginalArrivalTime: 10 Jul 2007 19:14:00.0605 (UTC) FILETIME=[78CA5CD0:01C7C326]

Peter Stephenson <pws@csr.com> writes:

> Peter Stephenson wrote:
>> Joel J. Adamson wrote:
>> > function doit() {
>> >    for file in $1/*(generic)*~*(~)
>> >    print $file
>> >    exit
>> > }
>> > 
>> > Currently I get "doit:1: unknown file attribute."   When I enter this
>> > globbing pattern at the interactive prompt, I get the files I want.
>> 
>> The pattern should be:
>> 
>>  $1/*generic*~*\~
>
> I've also just looked at the rest of the function and noticed:

Oh, since you seem eager to help, that's not the function -- this is
the function:
----------------------------------------
function doit() {
   for file in $1/*(generic)*
       # no backup files $1/data/*(generic)*~*(~)
       do
       filename=${file##$1}
       newfilename=${filename/\/generic/$title}
       cp $file ./$newfilename
       ci -u -zLT $newfilename	
       chgrp biostat ./$newfilename	# how do I make this the default behavior?
     done

     if [[ -a ${title}Makefile ]]; then
  	mv ./(generic|$title)Makefile ./Makefile
     else
  	print No Makefile found
     fi

     if [[ -a $1/data/wilens.bib ]]; then
 	ln -s $1/data/wilens.bib
     fi
    
     exit 0
 }

----------------------------------------

You'll notice that (a) I changed the second line so that I could
actually get my work done and (b) other areas need work.  Particularly
the ci puts me into the RCS logging prompt; I would rather just not
enter a message.  Is there an option for ci that will just check in
the file, without asking me for a description?  In general, how do I
answer an interactive prompt within a shell function (i.e.,
non-interactively)?

Thanks,
Joel


-- 
Joel J. Adamson
Biostatistician
Pediatric Psychopharmacology Research Unit
Massachusetts General Hospital
Boston, MA  02114
(617) 643-1432
(303) 880-3109

*Getting unexpected output from Word?
http://www.youtube.com/watch?v=9sZtriK9rKQ&NR=1

*Try LaTeX: it's free, easy and professional
http://www.edafe.org/latex/
http://en.wikipedia.org/wiki/LaTeX
http://nitens.org/taraborelli/latex





The information transmitted in this electronic communication is intended only for the person or entity to whom it is addressed and may contain confidential and/or privileged material. Any review, retransmission, dissemination or other use of or taking of any action in reliance upon this information by persons or entities other than the intended recipient is prohibited. If you received this information in error, please contact the Compliance HelpLine at 800-856-1983 and properly dispose of this information.


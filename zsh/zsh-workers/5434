From zsh-workers-return-5434-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Feb 20 11:03:17 1999
Return-Path: <zsh-workers-return-5434-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14234 invoked from network); 20 Feb 1999 11:03:16 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 20 Feb 1999 11:03:16 -0000
Received: (qmail 4607 invoked by alias); 20 Feb 1999 10:54:16 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5434
Received: (qmail 4584 invoked from network); 20 Feb 1999 10:54:14 -0000
Date: Fri, 19 Feb 1999 15:59:33 -0800
Resent-From: Bart Schaefer <schaefer@tiny.zanshin.com>
Message-Id: <199902192359.PAA00764@tiny.zanshin.com>
Resent-Message-ID: <14029.64229.434232.67759@c-bart.amazon.com>
Resent-Date: Fri, 19 Feb 1999 15:59:33 -0800 (PST)
Resent-To: zsh-workers@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
From: Bart Schaefer <schaefer@tiny.zanshin.com>
Reply-To: Bart Schaefer <schaefer@brasslantern.com>
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: 3.1.5-pws-8: setting duplicate elements of assoc array
In-Reply-To: <199902190858.JAA09439@beta.informatik.hu-berlin.de>
References: <199902190858.JAA09439@beta.informatik.hu-berlin.de>
X-Authentication-Warning: c-bart.amazon.com: schaefer set sender to schaefer@tiny.zanshin.com using -f
X-Mailer: VM 6.65a under Emacs 20.3.5.1

Sven Wischnowsky writes:
 > 
 > I forgot to tokenize the '{' and '}'. This makes me think that the
 > ctokenize() function should be joined with tokenize() even more,
 > giving tokenize() an extra argument. But I'm reluctant to change every 
 > call to tokenize()...

So don't.  The argument would be the same for almost every existing
instance of tokenize(), right?  Do it this way (no 3.1.5 source code
handy, pardon the psuedo-code):

static void
full_tokenize(char *s, int extra_arg)	/* choose more appropriate name */
{
   /* combined guts of tokenize() and ctokenize() here */
}

/**/
void
tokenize(char *s)
{
   full_tokenize(s, something);
}

/**/
void
ctokenize(char *s)
{
   full_tokenize(s, otherthing);
}

Then change only the calls that actually need the new argument, to
call the new full_tokenize() function.


From zsh-workers-return-19589-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 10 07:46:18 2004
Return-Path: <zsh-workers-return-19589-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4596 invoked from network); 10 Mar 2004 07:46:17 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 10 Mar 2004 07:46:17 -0000
Received: (qmail 22726 invoked by alias); 10 Mar 2004 07:46:12 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19589
Received: (qmail 22713 invoked from network); 10 Mar 2004 07:46:11 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 10 Mar 2004 07:46:11 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.130.98] by sunsite.dk (MessageWall 1.0.8) with SMTP; 10 Mar 2004 7:46:11 -0000
Message-ID: <20040310074609.94301.qmail@web10406.mail.yahoo.com>
Received: from [67.126.116.29] by web10406.mail.yahoo.com via HTTP; Tue, 09 Mar 2004 23:46:09 PST
Date: Tue, 9 Mar 2004 23:46:09 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: memory leaks report
To: zw <zsh-workers@sunsite.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Here are the latest memory leaks found by valgrind from around March 6th.
Most were all found before, but I didn't provide much context....  So here's
a little more.  If there is a a simple way to force the tests to execute a
separate shell per testcase, it would make it easier to link up the leaks to
the test case.


Test B02typeset:
28 bytes in 4 blocks are definitely lost in loss record 1 of 11
   at  malloc (vg_replace_malloc.c:153)
   by  zalloc (mem.c:490)
   by  ztrdup (string.c:52)
   by  bin_typeset (builtin.c:2264)


Test E01options:
Valgrind reports an error summary after every zsh subprocess exits.  Running
the
E01options test, there are 42 error summaries.  This leak is first reported in
the 32nd error summary.  It looks like there are 48 tests.
493 bytes in 1 blocks are definitely lost in loss record 16 of 21
   at  malloc (vg_replace_malloc.c:153)
   by  zalloc (mem.c:490)
   by  mkenvstr (params.c:3423)
   by  addenv (params.c:3386)
   by  restore_params (exec.c:2590)

V01zmodload.ztst:
This is a new leak:
4 bytes in 1 blocks are definitely lost in loss record 1 of 19
   at  malloc (vg_replace_malloc.c:153)
   by  zalloc (mem.c:490)
   by  ztrdup (string.c:52)
   by  add_automathfunc (module.c:2118)
   by  bin_zmodload_math (module.c:1397)
   by  bin_zmodload (module.c:1005)

This is an old leak
68 bytes in 1 blocks are definitely lost in loss record 8 of 19
   at  malloc (vg_replace_malloc.c:153)
   by  zshcalloc (mem.c:508)
   by  newhashtable (hashtable.c:99)
   by  ???
   by  ???
   by  dyn_boot_module (module.c:625)
   by  boot_module (module.c:677)
   by  load_module (module.c:784)
   by  require_module (module.c:889)
   by  bin_zmodload_load (module.c:1615)


-FR.

__________________________________
Do you Yahoo!?
Yahoo! Search - Find what you’re looking for faster
http://search.yahoo.com


From zsh-workers-request@euclid.skiles.gatech.edu Sat Jan 11 02:56:04 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 1718 invoked from network); 11 Jan 1997 02:56:02 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 11 Jan 1997 02:56:02 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id WAA25602; Fri, 10 Jan 1997 22:03:18 -0500 (EST)
Resent-Date: Fri, 10 Jan 1997 22:03:18 -0500 (EST)
Message-Id: <199701110304.WAA05421@lorien.princeton.edu>
From: duvall@dhduvall.student.Princeton.EDU (Danek Duvall)
Date: Fri, 10 Jan 1997 22:04:37 -0500
X-Mailer: Mail User's Shell (7.2.5 10/14/92)
To: zsh-workers@math.gatech.edu (Zsh development list)
Subject: Breakage with compctl?
Resent-Message-ID: <"doCDI3.0.zF6.rBmro"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2775
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

This problem occurs on both zsh 3.0.2 (on Linux) and zsh 3.1.0 (on Solaris).

Run zsh -f and source a file containing the following:

    friends=( duvall )

    _machines=( lorien.princeton.edu cassius.mts.jhu.edu )

    function _get_hosts {
      typeset -l _user
      reply=()
      read -l
      _user=($=REPLY)
      reply=($_machines)
    }

    compctl -q -k friends -S @ -x 'n[0,@]' -K _get_hosts -- finger talk ytalk

Now type:

    % finger duvall@lo<TAB>

Which expands to

    % finger duvall@lorien.princeton.edu _

Now erase back to the @:

    % finger duvall@_

and expand:

    % <lots of garbage>

After this, it seems zsh is pretty screwed up.  I've managed to get both
bus errors and segmentation faults.  Sometimes it happens when hitting
control-C, sometimes it doesn't happen for a while.

Anyway, I can regularly reproduce this.  Anyone else seen this?  I can
recompile and get a stack trace if that would be of any help.

Thanks,
Danek

- -- 
Danek Duvall <duvall@lorien.princeton.edu>      PGP keyID: 1024/280CEFB5
Computer Science, Princeton University      F-print: 55 FD E0 AE 19 1C 7D DA
http://lorien.princeton.edu/~duvall/                 E5 D0 56 B2 48 5F A7 A9

-----BEGIN PGP SIGNATURE-----
Version: 2.6.2

iQCUAwUBMtcDPXusfJIoDO+1AQHNYQP2Lf9H6clakJHJO2C/Jgs6+pVmxMxDkqav
9w9gzlPt6sdzDL5vhbP0a4rQ4/eHjevqDH/PSvS4b7ZxBvNJ2OOMw/gtDFt0YLsu
SKewuvQeKIWPdaAqNZepxxHZn0huYDwyV4h3WwkOm6EEO/SLdqs2UuaK2JIhLKPb
W/ma/5tnoQ==
=PifX
-----END PGP SIGNATURE-----


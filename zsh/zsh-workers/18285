From zsh-workers-return-18285-mason-zsh=primenet.com.au@sunsite.dk Tue Feb 25 01:29:38 2003
Return-Path: <zsh-workers-return-18285-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12043 invoked from network); 25 Feb 2003 01:29:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Feb 2003 01:29:38 -0000
Received: (qmail 8495 invoked by alias); 25 Feb 2003 01:29:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18285
Received: (qmail 8487 invoked from network); 25 Feb 2003 01:29:31 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 25 Feb 2003 01:29:31 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.27.190.146] by sunsite.dk (MessageWall 1.0.8) with SMTP; 25 Feb 2003 1:29:30 -0000
Received: from ceramic.fifi.org (mail@ceramic.fifi.org [216.27.190.147])
	by tantale.fifi.org (8.9.3/8.9.3/Debian 8.9.3-21) with ESMTP id RAA02820;
	Mon, 24 Feb 2003 17:29:21 -0800
Received: from phil by ceramic.fifi.org with local (Exim 3.35 #1 (Debian))
	id 18nTuK-00046g-00; Mon, 24 Feb 2003 17:29:20 -0800
To: Peter Whaite <peta@cortexmachina.com>
Cc: zsh-workers@sunsite.dk
Subject: Re: Cant fg a suspended su (4.1.0-dev-7)
References: <200302211807.h1LI74n23531@aragorn.cortexmachina.com>
From: Philippe Troin <phil@fifi.org>
Date: 24 Feb 2003 17:29:20 -0800
In-Reply-To: <200302211807.h1LI74n23531@aragorn.cortexmachina.com>
Message-ID: <87fzqd172n.fsf@ceramic.fifi.org>
Lines: 43
User-Agent: Gnus/5.09 (Gnus v5.9.0) Emacs/21.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: Philippe Troin <phil@fifi.org>

Peter Whaite <peta@cortexmachina.com> writes:

> I've noticed that I cannot resume a suspened su session lately (It
> happened in 4.1.0-dev-6 as well). 
> 
>        aragorn% /bin/su peta
>        Password: 
>        aragorn% echo $ZSH_VERSION
>        4.1.0-dev-7
>        aragorn% suspend
>        zsh: suspended (signal)  /bin/su peta
>        aragorn% fg %1
>        [1]  + continued  /bin/su peta
>        zsh: suspended (signal)  /bin/su peta
> 
> There is approximately a 1 second pause between the contined and the
> suspended messages.  
> 
> Any idea why the su command re-suspends after the continue?

I could not reproduce the problem on 4.1.0-dev-7, nor on CVS...

A few questions for Peter:

 - Which su are you using? GNU su, the shadow utilities's version of
   su or something else?

   GNU su will give you the version with `su --version'

   shadow su's version can be obtained with: 
     strings /bin/su | grep '\$Package'

 - Can you send us the output of 'ps xajf' ran from within the su
   shell... You might want to trim it. I'm interested in the PGID of
   the the su'ed zsh and its parent... For me it looks like this:

    PPID   PID  PGID   SID TTY      TPGID STAT   UID   TIME COMMAND
   26785 15644 15644 26785 pts/0    15770 S     1000   0:00  \_ ../inst
   15644 15753 15753 26785 pts/0    15770 S     1002   0:00      \_ zsh
   15753 15770 15770 26785 pts/0    15770 R     1002   0:00          \_ ps

Thanks,
Phil.


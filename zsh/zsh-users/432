From zsh-workers-request@euclid.skiles.gatech.edu  Wed Oct  9 21:44:22 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id VAA18788 for <mason@primenet.com.au>; Wed, 9 Oct 1996 21:44:20 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id HAA12532; Wed, 9 Oct 1996 07:34:57 -0400 (EDT)
Resent-Date: Wed, 9 Oct 1996 07:29:41 -0400 (EDT)
Message-Id: <199610091129.NAA26517@hydra.ifh.de>
X-Authentication-Warning: hydra.ifh.de: Host pws@localhost didn't use HELO protocol
To: zsh-users@math.gatech.edu (Zsh users list)
Subject: Re: alias -x? 
In-reply-to: "Julio Garcia"'s message of "Mon, 30 Sep 1996 16:35:33 MET."
             <9609302235.AA12341@mddjg.fc.hp.com> 
Date: Wed, 09 Oct 1996 13:29:14 +0200
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"2RjMQ3.0.R23.bouMo"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/432
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

(This is a rather late reply, but I've finally found fifteen
redefinable minutes).

Julio Garcia wrote:
> Our environment requires that I "dot" some scripts that
> export aliases (as in ksh alias -x).
> 
>   If I had to, where could I change the zsh source that I have to make
>   it ignore the -x flag?

The same problem happens with tracked aliases (-t).  I produced a
patch some time ago to make zsh ignore a few ksh options, including
`set -o emacs' etc., which is, as noted, very useful when running ksh
initialisation scripts.  However, it didn't make it.

You have to alter the appropriate line in the builtins table in
hashtable.h, adding "tx" to the options "Lgmr".  Next, decide what you
are going to do when these are set (ignore the x, presumably, but with
t it's harder:  the easiest thing is to ignore the whole statement,
but a better solution would probably be to treat this 'alias -t' the
same as hash) and add the code to bin_alias() in builtin.c.  As you
will see, ops['t'] and ops['x'] tell you whether these have been set.

If there was any chance of including this in the distributions I would
have a go myself.  (Maybe Zefram could handle code to deal with
options like `emacs', `nolog', `vi', `viraw' and `trackall' quite
easily with the rewritten option code.)

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


From zsh-workers-return-23184-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 24 02:04:55 2007
Return-Path: <zsh-workers-return-23184-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8231 invoked from network); 24 Feb 2007 02:04:48 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Feb 2007 02:04:48 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 63679 invoked from network); 24 Feb 2007 02:04:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Feb 2007 02:04:39 -0000
Received: (qmail 6460 invoked by alias); 24 Feb 2007 02:04:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23184
Received: (qmail 6451 invoked from network); 24 Feb 2007 02:04:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Feb 2007 02:04:36 -0000
Received: (qmail 63375 invoked from network); 24 Feb 2007 02:04:36 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 24 Feb 2007 02:04:30 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 451575C06B; Fri, 23 Feb 2007 21:04:27 -0500 (EST)
Date: Fri, 23 Feb 2007 21:04:27 -0500
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _qemu
Message-ID: <20070224020427.GA3466@scowler.net>
Mail-Followup-To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)

-soundhw, -net, -serial, -parallel, -monitor, and probably others
could use some work.

Index: Completion/Unix/Command/_qemu
===================================================================
RCS file: Completion/Unix/Command/_qemu
diff -N Completion/Unix/Command/_qemu
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ Completion/Unix/Command/_qemu	24 Feb 2007 02:02:23 -0000
@@ -0,0 +1,46 @@
+#compdef qemu
+
+local _qemu_machines
+
+_qemu_machines=(${${${(f)"$(qemu -M \?)"}[2,-1]}%% *})
+
+_arguments \
+  '-'{fda,fdb,hda,hdb,hdc,hdd,cdrom}':disk image:_files' \
+  '-M[target machine]:machine:('"${_qemu_machines:-none}"')' \
+  '-boot:boot device:(a c d)' \
+  '-snapshot[write to temporary files instead of disk image files]' \
+  '-no-fd-bootchk[disable boot sig checking for floppies in Bochs BIOS]' \
+  '-m[virtual RAM size]:megs:' \
+  '-m[simulate SMP system]:number of CPUs:' \
+  '-nographic[disable graphical output]' \
+  '-vnc[listen on VNC display]:display:' \
+  '-k[use keyboard layout]:keyboard layout language:(ar de-ch es fo fr-ca hu ja mk no pt-br sv da en-gb et fr fr-ch is lt nl pl ru th de en-us fi fr-be hr it lv nl-be pt sl tr)' \
+  '-audio-help[show audio subsystem help]' \
+  '-soundhw[enable audio and selected sound hardware]:cards to enable:(all)' \
+  '-localtime[set rtc to local time]' \
+  '-full-screen[start in full screen]' \
+  '-pidfile:pidfile:_files' \
+  '-win2k-hack' \
+  '-usb[enable USB driver]' \
+  '-usbdevice:usb device:' \
+  '-net:net config:(none)' \
+  '-tftp:prefix:' \
+  '-smb:dir:_files -/' \
+  '-redir:port redir config:' \
+  '-kernel:kernel image:_files' \
+  '-append:kernel cmd line:' \
+  '-initrd:initrd:_files' \
+  '-serial:dev:(vc stdio pty null /dev/ttyS0 /dev/partport0)' \
+  '-parallel:dev:(vc stdio pty null /dev/ttyS0 /dev/partport0)' \
+  '-monitor:dev:(vc stdio pty null /dev/ttyS0 /dev/partport0)' \
+  '-s[wait gdb connection to port 1234]' \
+  '-p[change gdb connection port]:port:_ports' \
+  '-S[do not start CPU at startup]' \
+  '-d[output log in /tmp/qemu.log]' \
+  '-hdachs:hd0 geometry:' \
+  '-std-vga[simulate standard VGA]' \
+  '-no-acpi[disable ACPI]' \
+  '-loadvm[start right away with a saved state]:file:_files' \
+  '-g[set initial graphic mode]:graphic mode:' \
+  ':disk image:_files'
+


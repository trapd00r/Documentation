From zsh-workers-return-6253-mason-zsh=primenet.com.au@sunsite.auc.dk Tue May 11 02:40:49 1999
Return-Path: <zsh-workers-return-6253-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8967 invoked from network); 11 May 1999 02:40:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 11 May 1999 02:40:47 -0000
Received: (qmail 20128 invoked by alias); 11 May 1999 02:40:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6253
Received: (qmail 20121 invoked from network); 11 May 1999 02:40:20 -0000
Message-Id: <199905110240.WAA18115@ocalhost>
Content-Type: text/plain
MIME-Version: 1.0
X-Image-URL: http://www.peak.org/~luomat/luomat@peak.org.tiff
In-Reply-To: <990504100735.ZM28408@candle.brasslantern.com>
From: Timothy J Luoma <tjlists@bigfoot.com>
Date: Mon, 10 May 1999 22:40:11 -0400
To: zsh-workers@sunsite.auc.dk
Subject: success (mostly) pws 17 under NeXTStep 3.3
References: <199904231059.MAA32358@beta.informatik.hu-berlin.de> 
	<199904240311.XAA00619@ocalhost> 
	<990423234917.ZM30140@candle.brasslantern.com> 
	<199904241324.JAA23300@ocalhost> 
	<990424092703.ZM32177@candle.brasslantern.com> 
	<199904302157.RAA26524@ocalhost>
	<990504100735.ZM28408@candle.brasslantern.com>


Using regular NeXT 3.3 'cc' and 'make'

	configure ok
	
	make dies with '.pro' errors

(see http://www.peak.org/~luomat/misc/zsh/zsh-failed.log.gz if you want to  
see all output)
	

Then I had a thought: "try gnumake"

That seemed to work (GNU Make version 3.74)!!

(it failed at the end, after making 'zsh' -- I think because I don't have  
the 'yodl' program -- shouldn't it recognize that and not try and build the  
documentation?)


1) it fixed the $lapps thing (ie I get a / at the end with I do 'cd $la[tab]'

2) it fixed the $PROMPT problem (no more blank space at the end of $PROMPT)



However

It still did not fix the completion problem where directories are being ignored:

#  /bin/ls -F /
LocalApps/              etc/
LocalLibrary/           lib/
Net/                    lost+found/
NextAdmin/              mach@
NextApps/               mach_kernel
NextDeveloper/          mach_kernel.OS42
NextLibrary/            mach_kernel.nonY2K
Users/                  private/
bin/                    tmp/
dev/                    unlabeled/
drives/                 usr/

# /bin/ls -F /U[tab]
# /bin/ls -F /U[cursor still here]

(ALL of the other files in / complete successfully)

BUT maybe there is a clue!

# df /Users
Filesystem            Size  Used  Avail  Capacity Mounted on
/dev/sd1b             994M  437M   457M     49%   /Users

You will notice that /Users is not on / but is a separate partition

Notice that this problem ALSO occurs with /drives/IBM3 which is ALSO a  
mounted directory:

# /bin/ls -F /drives/
IBM3/   win95/

# /bin/ls -F /drives/I[tab]
# /bin/ls -F /drives/I[cursor here]

(note: /drives/win95 is a vmount'd drive)

Now unfortunately this theory dies for /usr/local and /usr/local/Archive  
which are also not on the same partition as / but I still think it is a clue  
of some sort:

Here's my 'df' output:

Filesystem            Size  Used  Avail  Capacity Mounted on
/dev/rsd0h            984M  866M   118M     88%   /drives/win95
/dev/sd2a             392M  128M   225M     36%   /private/swapdisk
/dev/sd1b             994M  437M   457M     49%   /Users
/dev/sd3b             1.3G  840M   359M     70%   /usr/local/Archive
/dev/sd1a             994M  701M   194M     78%   /
/dev/sd3a             1.3G  835M   364M     70%   /usr/local
/dev/sd3c             1.3G   32M   1.1G      3%   /drives/IBM3

And here's something still more interesting.

After I printed that 'df' I then did this:

# mount -t 4.3 /dev/sd0a /drives/kickdisk

and then look what happens now:

# /bin/ls -F /drives/[tab]
# /bin/ls -F /drives/kickdisk/

I don't claim to understand this, but that's all the information I can give  
you.  Here's the final 'df' output:

Filesystem            Size  Used  Avail  Capacity Mounted on
/dev/rsd0h            984M  866M   118M     88%   /drives/win95
/dev/sd0a             6.6M  241K   6.0M      4%   /drives/kickdisk
/dev/sd1a             994M  701M   194M     78%   /
/dev/sd1b             994M  437M   457M     49%   /Users
/dev/sd2a             392M  128M   225M     36%   /private/swapdisk
/dev/sd3a             1.3G  835M   364M     70%   /usr/local
/dev/sd3b             1.3G  840M   359M     70%   /usr/local/Archive
/dev/sd3c             1.3G   32M   1.1G      3%   /drives/IBM3


Any clues appreciated

TjL





From zsh-workers-return-12202-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jul 08 15:28:27 2000
Return-Path: <zsh-workers-return-12202-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14620 invoked from network); 8 Jul 2000 15:28:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jul 2000 15:28:26 -0000
Received: (qmail 25981 invoked by alias); 8 Jul 2000 15:28:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12202
Received: (qmail 25974 invoked from network); 8 Jul 2000 15:28:10 -0000
Date: Sat, 8 Jul 2000 16:49:20 +0200
From: =?iso-8859-1?Q?Thomas_K=F6hler?= <jean-luc@picard.franken.de>
To: zsh-workers@sunsite.auc.dk
Subject: _killall on linux
Message-ID: <20000708164920.A19816@picard.franken.de>
Mail-Followup-To: =?iso-8859-1?Q?Thomas_K=F6hler?= <jean-luc@picard.franken.de>,
	zsh-workers@sunsite.auc.dk
Mime-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="EeQfGwPcQSOJBaQU"
Content-Disposition: inline
User-Agent: Mutt/1.2i
X-Operating-System: Linux picard.franken.de 2.2.14
X-Editor: VIM - Vi IMproved 5.7a BETA http://www.vim.org/
X-IRC: tirc-1.2; Nick: jeanluc
X-URL: http://jeanluc-picard.de/


--EeQfGwPcQSOJBaQU
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,
I'm using zsh-3.1.9 and the new completion system.
Now, the problem is: _killall won't complete all process names. This is
not a big deal for "normal" users, but root may have to kill other
user's processes, too. May I suggest something like this (completing
_all_ process names for super users)


------- _killall -------
#compdef killall

if [[ "$OSTYPE" =3D linux* ]]; then
  _alternative \
      'signals:: _signals -p' \
      'processes:process:{ compadd "$expl[@]" ${$(_call processes-names ps =
$( [[ "$UID" =3D 0 ]] && print -n xa ) ho comm 2> /dev/null):#(ps|COMMAND)}=
 }'
else
  _signals -p
fi=20
------- _killall -------

CU,
Thomas

--=20
 Thomas K=F6hler Email:   jean-luc@picard.franken.de     | LCARS - Linux
     <><        WWW:     http://jeanluc-picard.de      | for Computers
                IRC:             jeanluc               | on All Real
               PGP public key available from Homepage! | Starships

--EeQfGwPcQSOJBaQU
Content-Type: application/pgp-signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.0.1 (GNU/Linux)
Comment: For info see http://www.gnupg.org

iD8DBQE5Zz9vTEYXWMJlHuYRAluxAJ9shNXV1k7WyTZKX20qfEYewSa7WwCgla4S
b6dkkxcBw9kn30kCQoHrkmg=
=mCP9
-----END PGP SIGNATURE-----

--EeQfGwPcQSOJBaQU--


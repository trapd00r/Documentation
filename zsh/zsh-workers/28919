From zsh-workers-return-28919-mason-zsh=primenet.com.au@zsh.org Sat Mar 19 08:25:27 2011
Return-Path: <zsh-workers-return-28919-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13245 invoked by alias); 19 Mar 2011 08:25:26 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28919
Received: (qmail 2475 invoked from network); 19 Mar 2011 08:25:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at bewatermyfriend.org does not designate permitted sender hosts)
From: Frank Terbeck <ft@bewatermyfriend.org>
To: "Benjamin R. Haskell" <zsh@benizi.com>
Cc: Nikolai Weibull <now@bitwi.se>,  zsh-workers@zsh.org
Subject: Re: [PATCH 3/4] Fix git-branch -[dD] -r completion
In-Reply-To: <alpine.LNX.2.01.1103182244390.22141@hp> (Benjamin R. Haskell's
	message of "Fri, 18 Mar 2011 22:55:40 -0400 (EDT)")
References: <1300484112-9392-1-git-send-email-now@bitwi.se>
	<1300484112-9392-4-git-send-email-now@bitwi.se>
	<87y64cgj4r.fsf@ft.bewatermyfriend.org>
	<alpine.LNX.2.01.1103182244390.22141@hp>
User-Agent: Gnus/5.13 (Gnus v5.13) Emacs/23.2 (gnu/linux)
Date: Sat, 19 Mar 2011 09:21:45 +0100
Message-ID: <87pqpnh65i.fsf@ft.bewatermyfriend.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Df-Sender: 430444

Benjamin R. Haskell wrote:
> On Fri, 18 Mar 2011, Frank Terbeck wrote:
>
>> Hm, with this patch, this:
>>
>> % git branch -d -r <tab>
>>
>> works. But this:
>>
>> % git -r -d <tab>
>>
>> doesn't.
>
> Without 'branch'?

Sorry typo. It doesn't work *with* branch.

>> I suppose, that's not intentional?
>
> With the 'branch' there, both:
>
> (i) git branch -d -r <tab>
> and
> (ii) git branch -r -d <tab>
>
> seem to behave identically whether or not this patch is applied.  With
> or without the patch (i) seems fine AFAICT.  But (ii) doesn't seem to
> complete branches, even though I think it should.

They don't for me.

% git branch -d -r <tab>
- remote branch name -
origin/debian           origin/upstream       
origin/HEAD             origin/upstream-import
origin/master           zsh.git/master

And:

% git branch -r -d <tab>

results in

% git branch -r -d -

If I tab again, I get:

% git branch -r -d -<tab>
- option -
--abbrev         -- set minimum SHA1 display-length                                                                                                                 
--color          -- turn on branch coloring                                                                                                                         
--no-abbrev      -- do not abbreviate sha1s                                                                                                                         
--no-color       -- turn off branch coloring                                                                                                                        
-r               -- delete remote-tracking branches                                                                                                                 
--verbose    -v  -- show SHA1 and commit subject line for each head

Regards, Frank

-- 
In protocol design, perfection has been reached not when there is
nothing left to add, but when there is nothing left to take away.
                                                  -- RFC 1925


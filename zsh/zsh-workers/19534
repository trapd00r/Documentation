From zsh-workers-return-19534-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 04 12:02:03 2004
Return-Path: <zsh-workers-return-19534-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8754 invoked from network); 4 Mar 2004 12:02:00 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Mar 2004 12:02:00 -0000
Received: (qmail 6006 invoked by alias); 4 Mar 2004 12:01:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19534
Received: (qmail 5996 invoked from network); 4 Mar 2004 12:01:33 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 4 Mar 2004 12:01:33 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [62.189.58.19] by sunsite.dk (MessageWall 1.0.8) with SMTP; 4 Mar 2004 12:1:32 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i24C1Wv17069
	for <zsh-workers@sunsite.dk>; Thu, 4 Mar 2004 12:01:32 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6822286b28c0a88d01588@MAILSWEEPER01.csr.com>;
 Thu, 4 Mar 2004 12:01:13 +0000
Received: from csr.com ([192.168.144.127]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 4 Mar 2004 12:03:12 +0000
To: Ibraheem Umaru-Mohammed <umarumohammed@btinternet.com>,
   zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: 4.2.0-pre-2 
In-reply-to: "Ibraheem Umaru-Mohammed"'s message of "Wed, 03 Mar 2004 19:15:40 GMT."
             <20040303191540.GA20717@rabox> 
Date: Thu, 04 Mar 2004 12:01:32 +0000
Message-ID: <4376.1078401692@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 04 Mar 2004 12:03:12.0657 (UTC) FILETIME=[AB024010:01C401E0]

Ibraheem Umaru-Mohammed wrote:
> however, removing "cap" from config.modules, and running 'make prep' then

Yes, this is utils.c which is part of the core shell...

> 	/usr/vac/bin/cc -qlanglvl=ansi -c -I.  -DHAVE_CONFIG_H -O  -o utils.o u
> tils.c
> "utils.c", line 3896.15: 1506-277 (S) Syntax error: possible missing ';' or '
> ,'?
> "utils.c", line 3896.9: 1506-045 (S) Undeclared identifier cap_t.
> "utils.c", line 3897.12: 1506-045 (S) Undeclared identifier caps.
> "utils.c", line 3900.30: 1506-275 (S) Unexpected text val encountered.
> "utils.c", line 3900.13: 1506-045 (S) Undeclared identifier cap_flag_value_t.
> "utils.c", line 3901.25: 1506-275 (S) Unexpected text n encountered.
> "utils.c", line 3901.13: 1506-045 (S) Undeclared identifier cap_value_t.
> "utils.c", line 3902.17: 1506-045 (S) Undeclared identifier n.
> "utils.c", line 3902.63: 1506-045 (S) Undeclared identifier val.
> "utils.c", line 3902.47: 1506-045 (S) Undeclared identifier CAP_EFFECTIVE.
> make: The error code from the last command is 1.

HAVE_CAP_GET_PROC is defined, but the shell isn't including appropriate
headers, or has a completely different system for capabilities.

Could you please try:
1. Undefining HAVE_CAP_GET_PROC in config.h.

2. Grepping the system headers for cap_t or cap_get_proc.  Presumably
it's there somewhere.  In that case searching for the right header
during configuration should fix it.

Unless we can satisfactorily resolve 2. the only way forward will be
to introduce an --enable-cap flag.  I have no way of testing this
code at all.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


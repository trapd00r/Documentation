From zsh-workers-request@math.gatech.edu Fri Nov 06 13:50:23 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4402 invoked from network); 6 Nov 1998 13:50:21 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 6 Nov 1998 13:50:21 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id IAA20585;
	Fri, 6 Nov 1998 08:38:22 -0500 (EST)
Resent-Date: Fri, 6 Nov 1998 08:38:22 -0500 (EST)
Date: Fri, 6 Nov 1998 14:36:25 +0100 (MET)
Message-Id: <199811061336.OAA05917@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@math.gatech.edu
In-reply-to: Peter Stephenson's message of Fri, 06 Nov 1998 14:02:32 +0100
Subject: Re: fixsuffix() again
Resent-Message-ID: <"-4Azt1.0.a15.EllGs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4580
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Peter Stephenson wrote:

> 
> Sven Wischnowsky wrote:
> > > So you mean with that one call to fixsuffix() in docompletion() we can
> > > get rid of all the other calls to fixsuffix() scattered about in other
> > > places?  If so, then by golly I vote for putting that one back and
> > > nuking the others.
> > 
> > The one in deletecharorlist() will still be need since it is in the
> > branch where completion is noct called. So it would make two instead
> > of three calls in zle_tricky.c. The patch below does this, but note
> > that there is one ugliness:
> 
> I've found a more serious problem with this.
> 
> % export ZMLIB=$PWD               # some people probably have this set anyway
> % setopt noautomenu menucomplete noautolist
> % echo $Z<TAB>            -> $ZMLIST/
>          <TAB>            -> $ZSH_NAME
>          <TAB>            -> $ZSH_VERSION
>          <RET>            -> $ZSH_VERSIO
> 
> It seems to lose memory of the fact that the slash has already gone.

Ok, then there is another reason not to move the fixsuffix()
there (the problem Peter reported can be fixed by the fixsuffix() in
do_single()).


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-users-return-8098-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 24 04:10:50 2004
Return-Path: <zsh-users-return-8098-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16716 invoked from network); 24 Oct 2004 04:10:49 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 24 Oct 2004 04:10:49 -0000
Received: (qmail 11971 invoked from network); 24 Oct 2004 04:10:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2004 04:10:43 -0000
Received: (qmail 24556 invoked by alias); 24 Oct 2004 04:10:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8098
Received: (qmail 24540 invoked from network); 24 Oct 2004 04:10:35 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 24 Oct 2004 04:10:35 -0000
Received: (qmail 10796 invoked from network); 24 Oct 2004 04:09:55 -0000
Received: from moonbase.zanshin.com (64.84.47.139)
  by a.mx.sunsite.dk with SMTP; 24 Oct 2004 04:09:54 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.13.1/8.13.1) with ESMTP id i9O49mfw014764;
	Sat, 23 Oct 2004 21:09:50 -0700
Date: Sat, 23 Oct 2004 21:09:48 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-users@sunsite.dk
To: "s. keeling" <keeling@spots.ab.ca>
cc: zsh-users <zsh-users@sunsite.dk>
Subject: Re: Porting an alias from bash to zsh fails.
In-Reply-To: <20041023231442.GA24632@infidel.spots.ab.ca>
Message-ID: <Pine.LNX.4.61.0410232057370.23496@toltec.zanshin.com>
References: <20041023215252.GA24164@infidel.spots.ab.ca> <m3mzyd6pzp.fsf@asfast.com>
 <20041023231442.GA24632@infidel.spots.ab.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On Sat, 23 Oct 2004, s. keeling wrote:

> Hi list.  I'm new to zsh so this could well be pretty simple.  I've been 
> wondering why the following works in bash, but fails miserably in zsh.

It's almost certainly because the default setting of the NO_MATCH option
is reversed in the two shells.  In bash, by default, when a glob doesn't
match anything, the pattern is left unexpanded, but in zsh by default it
generates the "no matches" error.

> What am I missing here?

>    RXVTNEWSFONT='-*-neep alt-medium-*-normal-*-*-100-75-75-c-*-iso8859-1'
> 
>    alias dfn="rxvt +sb -fn $RXVTNEWSFONT -geometry 128x51+69+42 \
>       -e nice /usr/bin/slrn -f /home/keeling/.jnewsrc-dfn \
>       -h news.individual.net"

This one would have worked for you if only you'd put the entire thing in
single quotes instead of double quotes.  There's no reason to expand the
variable at the time the alias is defined; let it be expanded (and thus
not globbed) at the time the alias is _used_.  This has the added benefit
that you can change the value of the variable to change the font used by
the alias, without having to redefine the alias again.

On Sat, 23 Oct 2004, s. keeling wrote:

> Incoming from Lloyd Zusman:
> >    alias dfn="rxvt +sb -fn '$RXVTNEWSFONT' -geometry 128x51+69+42 \
> >       -e nice /usr/bin/slrn -f /home/keeling/.jnewsrc-dfn \
> >       -h news.individual.net"
> > [snip]
> > 
> > This works because the single quotes are treated as normal (non-quoting)
> .....................^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> > characters when inside of double quotes; therefore, the RXVTNEWSFONT
> ..^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
> That was a surprise to me.  Thanks.  Your excellent explanation has
> solved it for me.  Much appreciated.

Lloyd's suggestion works in this case, but it would fail in the event that
the value of the variable contained any single-quote characters.  A better
solution would be to swap the single and double quotes:

alias dfn='rxvt +sb -fn "$RXVTNEWSFONT" -geometry 128x51+69+42 ...'


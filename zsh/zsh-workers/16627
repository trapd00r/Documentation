From zsh-workers-return-16627-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 13 23:58:29 2002
Return-Path: <zsh-workers-return-16627-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6481 invoked from network); 13 Feb 2002 23:58:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 13 Feb 2002 23:58:28 -0000
Received: (qmail 12346 invoked by alias); 13 Feb 2002 23:58:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16627
Received: (qmail 12334 invoked from network); 13 Feb 2002 23:58:20 -0000
Date: Wed, 13 Feb 2002 23:58:17 +0000 (GMT)
From: Bart Schaefer <schaefer@brasslantern.com>
Sender: lantern@brasslantern.com
To: Ken Moorley <kmoorley@cms.aust.com>
cc: zsh-workers@sunsite.dk
Subject: RE: Help with compile problem
In-Reply-To: <006601c1b4de$b19a3fa0$450000c0@cms.aust.com>
Message-ID: <Pine.BSF.4.40.0202132315320.10405-100000@brasslantern.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII
Content-ID: <Pine.BSF.4.40.0202132315322.10405@brasslantern.com>

On Thu, 14 Feb 2002, Ken Moorley wrote:

> I was able to compile zsh 4.0.4 using gcc 2.9.5.2, is there any thing unique
> about 3.0.3 that would cause the problem
[...]
> I have attached the configure and make output text for both versions which
> might give some one a clue.

Diffing the make output, there are lines like this in the 3.1.9 build:

-gawk -f ../Src/makepro.awk builtin.c Src > builtin.syms
-(echo '/* Generated automatically */'; sed -n '/^E/{s/^E//;p;}' < builtin.syms) \
-       > builtin.epro
-(echo '/* Generated automatically */'; sed -n '/^L/{s/^L//;p;}' < builtin.syms) \
-       > `echo builtin.epro | sed 's/\.epro$/.pro/'`

Those lines are missing in the 4.0.4 build, and the build fails because
the files generated by those commands are not present.

Unfortunately, I have no idea why changing compilers would affect the make
dependencies, or otherwise cause make to fail to execute those commands.
What happens if you explicitly give the command

	cd Src; make builtin.syms

??


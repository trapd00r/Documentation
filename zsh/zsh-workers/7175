From zsh-workers-return-7175-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jul 16 14:07:42 1999
Return-Path: <zsh-workers-return-7175-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1152 invoked from network); 16 Jul 1999 14:07:40 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jul 1999 14:07:40 -0000
Received: (qmail 1170 invoked by alias); 16 Jul 1999 14:07:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7175
Received: (qmail 1163 invoked from network); 16 Jul 1999 14:07:30 -0000
Message-Id: <9907161336.AA14838@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: history curiosities
Date: Fri, 16 Jul 1999 15:36:26 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

I'm getting rather confused with history.  The options I have set are given
at the end; I think what's really doing it is HISTIGNOREALLDUPS.  I have
HISTFILE, HISTSIZE and SAVEHIST set, though presumably the values aren't
that significant.

First, if I do `history' I get a listing without the last `history' in the
listing.  Yet when I do `!!', it's that `history' which is re-executed.
(Note I don't have histnostore set.)

I also have h as an alias for `history -fD'.  After
  echo one
  echo two
  echo three
  h
I get what I said above; the h is not listed.  Now when I do `history', the
`h' is listed but the `history' isn't, i.e. the last two entries shown
are `echo three' and `h'.  Now if I do `h' again, the `h' disappears and
`history' shows up.

Worse: I now set HISTNOSTORE in addition to the others, type `h', then
`!!'.  I get the message `no such event'.  After some more attempts with
those two commands, the whole thing goes haywire.  Repeating !! makes the
`h' listing show earlier and earlier parts of the list (seems to step back
4 every time).  After another command, typing `h' gives a `no such event'
message.  Sometimes the shell exits, but I haven't worked out how to
reproduce that.

I hope Wayne's out there somewhere...

noappendhistory       off
nobanghist            off
cshjunkiehistory      off
extendedhistory       on
histallowclobber      off
nohistbeep            off
histexpiredupsfirst   off
histfindnodups        off
histignorealldups     on
histignoredups        on
histignorespace       on
histnofunctions       off
histnostore           off
histreduceblanks      off
histsavenodups        off
histverify            on
incappendhistory      on
sharehistory          off

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


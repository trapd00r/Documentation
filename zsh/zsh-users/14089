From zsh-users-return-14089-mason-zsh=primenet.com.au@sunsite.dk Tue May 05 16:37:44 2009
Return-Path: <zsh-users-return-14089-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1822 invoked from network); 5 May 2009 16:37:41 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 May 2009 16:37:41 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 32421 invoked from network); 5 May 2009 16:37:24 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 May 2009 16:37:24 -0000
Received: (qmail 28839 invoked by alias); 5 May 2009 16:37:03 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14089
Received: (qmail 28805 invoked from network); 5 May 2009 16:37:02 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 5 May 2009 16:37:02 -0000
Received: from mail-ew0-f162.google.com (mail-ew0-f162.google.com [209.85.219.162])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 17E8582D4B6B
	for <zsh-users@sunsite.dk>; Tue,  5 May 2009 18:35:59 +0200 (CEST)
Received: by ewy6 with SMTP id 6so4610169ewy.45
        for <zsh-users@sunsite.dk>; Tue, 05 May 2009 09:36:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=hGc+ZWwTbnSyWmodaGHvZ0FaLCjV7B+PniD6WPYRgrk=;
        b=L1mqa/TVb4bgjKeMKXCcW5LwbH+QHK8qSVG1vy5JSa4cLvItlVLlj2CDwylkM6JFXO
         ZWYng1u3ovJq1H0nW2Rcon6g/yGjZYKCo7kYNSa9o5kvJw2rhjEWsXuT2xxtEcuZNmgs
         pLa+YN8CLd7BTyB8qAtDuu1+KNYWD3tlGkjbI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=g6BO+qMLZ/4bH/Ox4F1Xb/RIHT/uoO2IWy5iHeVdds+L8gZUGtMlzmFhfffXuY74Q1
         BRIo8CPUxCXOYT1n0ukd45uyYFyAeerb+MwTeda6UyGrsrSIzXWqsWS2OyVKgCww+K0I
         zJJV7RLOfPIHjZWeXCmnmVTeIayJ25KABXAh8=
MIME-Version: 1.0
Received: by 10.211.166.2 with SMTP id t2mr4777817ebo.81.1241541409706; Tue, 
	05 May 2009 09:36:49 -0700 (PDT)
Date: Tue, 5 May 2009 19:36:49 +0300
Message-ID: <94de1b620905050936g442490e4t3da42ac3946cb29@mail.gmail.com>
Subject: Set difference between sets of files
From: Itai Fiat <itai.fiat@gmail.com>
To: zsh-users@sunsite.dk
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/9328/Tue May  5 14:49:32 2009 on bifrost
X-Virus-Status: Clean

Hi all,

I'm pretty new to Zsh. I have a question:

I would like to compute the set difference between two sets of files - that is,
obtain a list of files found in one set and not in the other.

For instance, say I have two directories - master/ and backup/ - containing
(mostly) identical files. I would like to remove from backup/ all files which
have been removed from master/. I would like to achieve this by doing something
like this:

    cd master/
    MASTER_FILES=(**/*(.))
    cd ../backup
    BACKUP_FILES=(**/*(.))
    TO_REMOVE=<set difference between BACKUP_FILES and MASTER_FILES>
    rm -f $TO_REMOVE

I know that this can be done by writing both sets to temporary files, sorting
them, and using the standard Unix command "comm", but is there an elegant way
to do this from within Zsh?

Sincerely yours,

Itai

--
All nationalists have the power of not seeing resemblances between
similar sets of facts.
- George Orwell, "Notes on Nationalism"


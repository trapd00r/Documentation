From zsh-workers-request@math.gatech.edu  Sat Jul 15 13:58:16 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id NAA27338 for <mason@werple.mira.net.au>; Sat, 15 Jul 1995 13:58:14 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA07852
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Fri, 14 Jul 1995 23:59:36 -0400
Received: by math (5.x/SMI-SVR4)
	id AA15105; Fri, 14 Jul 1995 23:56:04 -0400
Resent-Date: Fri, 14 Jul 1995 23:54:59 -0400
Old-Return-Path: <coleman@math.gatech.edu>
Message-Id: <9507150355.AA08946@redwood.skiles.gatech.edu>
X-Mailer: exmh version 1.5.3 12/28/94
To: zsh-workers@math.gatech.edu
Subject: Re: about beta11
In-Reply-To: Your message of "Sat, 15 Jul 1995 03:19:33 BST."
             <515.199507150249@stone.dcs.warwick.ac.uk> 
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Date: Fri, 14 Jul 1995 23:54:59 -0400
From: Richard Coleman <coleman@math.gatech.edu>
Resent-Message-Id: <"6Yx4U.0.th3.Inp1m"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/208
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> -zefram
> 
> P.S.  Can we expect an beta11-test release any time soon, Richard?
> 

I've been working on some ambitious changes for beta11.  As usual, it
is taking longer than I expected.  I was hoping to have a test
release available this week, but now I'm not sure.  I'll be leaving
for vacation (just one week) at the end of next week (Jun 22).

One of the things I'm doing for beta11 is splitting the hash table
cmdnamtab into three separate tables for shell functions, builtins,
and external commands.  This fixes some of the weird command name
space problems that would have been difficult to fix any other way.
This required lots of changes to builtin.c and exec.c (actually just
execcmd).  I've already fixed everything in builtin.c (which lead to
much cleaner code in many of the builtins).  What is taking so long
is the changes to exec.c since it is quite complicated and has very
little in the way of comments.

One of the benefits of this change is that is allows much more
precise control of the various hash tables.  There are a few
changes to various builtins to deal with this.

1) enable/disable by default will only work on builtin functions
2) enable -f, disable -f will enable/disable shell functions
3) enable -r, disable -r will enable/disable reserved words
4) unhash by default will only unhash external commands.
5) unhash -f will remove shell functions.  unfunction is now
   just an alias for unhash -f.
6) unhash -a will remove aliases.  unalias is now just an
   alias for unhash -a.

Zefram, were you the one that wrote the code for named directories?
Is there anything preventing us from using a hash table for this
rather than a linked list (which is what it currently uses)?  This
way we could reuse all the new hashtable code.  For instance, then
unhash -d could be used to remove entries from the named directories
table.

rc


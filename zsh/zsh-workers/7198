From zsh-workers-return-7198-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 19 13:58:29 1999
Return-Path: <zsh-workers-return-7198-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9311 invoked from network); 19 Jul 1999 13:58:24 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jul 1999 13:58:24 -0000
Received: (qmail 5147 invoked by alias); 19 Jul 1999 13:58:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7198
Received: (qmail 5140 invoked from network); 19 Jul 1999 13:58:14 -0000
Date: Mon, 19 Jul 1999 15:58:11 +0200 (MET DST)
Message-Id: <199907191358.PAA06517@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Sven Wischnowsky's message of Mon, 12 Jul 1999 12:39:15 +0200
	(MET DST)
Subject: Re: PATCH: completions for su and implicit fg/bg


I wrote:

> I wrote:
> 
> > This allows `compset -q' on unquoted words -- almost. There is a
> > problem when the match contains characters that have to be quoted. In
> > such cases the match should be quoted twice (`a b' should be inserted
> > as `a\\\ b'), but currently the completion code is far from being
> > prepared for such double-quoting and I'm seeing to much places where
> > changes are needed for a quick patch.
> 
> I've been thinking some more about this... This can get pretty ugly
> when we have multiple calls to `compset -q' for the same word. In such 
> cases we would have to keep track of the number of calls (the nesting
> level) and then quote the words put into the command line n times. Of
> course the results may become almost unreadable and it would require
> changes in several parts of the code.

I've now spent several days trying to get this right -- and am now
really fed up. My last solution almost worked but still had problems
with, e.g. zsh -c 'zsh -c "zsh -c echo\ <TAB>. Mainly due to the
somewhat weird backslash-in-quotes behavior. Also, I only had this for 
inserting unambiguous matches (do_single()), and the stuff for
unambiguous prefixes is even harder.

So, I *will* some day try to fix this, but I don't think I'll be able
to do this this week and next week I'll be away.

I'll have to find a completely different way for this...

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


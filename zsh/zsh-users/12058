From zsh-users-return-12058-mason-zsh=primenet.com.au@sunsite.dk Sat Oct 20 02:00:51 2007
Return-Path: <zsh-users-return-12058-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4894 invoked from network); 20 Oct 2007 02:00:43 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Oct 2007 02:00:43 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 85855 invoked from network); 20 Oct 2007 02:00:38 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Oct 2007 02:00:38 -0000
Received: (qmail 27217 invoked by alias); 20 Oct 2007 02:00:30 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12058
Received: (qmail 27191 invoked from network); 20 Oct 2007 02:00:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 20 Oct 2007 02:00:28 -0000
Received: (qmail 84585 invoked from network); 20 Oct 2007 02:00:28 -0000
Received: from vinc17.pck.nerim.net (HELO prunille.vinc17.org) (213.41.242.187)
  by a.mx.sunsite.dk with SMTP; 20 Oct 2007 02:00:23 -0000
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id 8A6DE1A324C5; Sat, 20 Oct 2007 04:00:22 +0200 (CEST)
Date: Sat, 20 Oct 2007 04:00:22 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-users@sunsite.dk
Subject: Re: [[ -x =command ]]
Message-ID: <20071020020022.GQ1777@prunille.vinc17.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <20071016210548.26560.qmail@smasher.org> <20071016211319.GA2910@fsst.voodoo.lan> <20071016214100.62242.qmail@smasher.org> <20071017094414.GA5383@sc.homeunix.net> <20071017113432.GA13054@mastermind> <20071017125242.GB5383@sc.homeunix.net> <2d460de70710170617g2730fe81u197bd0bc2073cab8@mail.gmail.com> <20071017145021.GC13054@mastermind> <20071017152921.GA2641@fsst.voodoo.lan>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20071017152921.GA2641@fsst.voodoo.lan>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.16-vl-r18739 (2007-10-11)

On 2007-10-17 17:29:21 +0200, Frank Terbeck wrote:
> This will break for old things like opensolaris' /bin/sh.
> If you leave the 'command' bit out, it'll work:
> 
>     which most >/dev/null && { PAGER=most; export PAGER; }
> 
> Yeah, an alias or a function called 'which' would break that. But it's
> more portable than the 'command' approach.

"which" is a broken csh script under Solaris, because it reads the
user's .cshrc, with all the side effects you can imagine...

Moreover, the command may exist but not work (this happens with
dynamically linked executables under NFS, if some library isn't
locally installed on some machines). So, the best solution is to
try the command with some option like --version.

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


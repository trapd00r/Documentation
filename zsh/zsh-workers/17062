From zsh-workers-return-17062-mason-zsh=primenet.com.au@sunsite.dk Thu May 02 10:21:40 2002
Return-Path: <zsh-workers-return-17062-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2878 invoked from network); 2 May 2002 10:21:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 2 May 2002 10:21:39 -0000
Received: (qmail 18265 invoked by alias); 2 May 2002 10:21:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17062
Received: (qmail 18254 invoked from network); 2 May 2002 10:21:26 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: Peter Stephenson <pws@csr.com>
Cc: Zsh hackers list <zsh-workers@sunsite.dk>,
   "John H. Robinson, IV"
	 <jhriv@ucsd.edu>
Subject: Re: zsh 4.0.4 on Solaris 2.6, shared (dynamic) library issues
In-Reply-To: <24495.1020333270@csr.com>
References: <24495.1020333270@csr.com>
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable
X-Mailer: Ximian Evolution 1.0.3-1mdk 
Date: 02 May 2002 14:21:07 +0400
Message-Id: <1020334873.3771.1.camel@localhost.localdomain>
Mime-Version: 1.0

=F7 =FE=D4=D7, 02.05.2002, =D7 13:54, Peter Stephenson =
=CE=C1=D0=C9=D3=C1=CC:
> "John H. Robinson, IV" wrote:
> > eventually, i found the problem in the configure script: it thinks =
that
> > the proper flag for shared libraries is a -G, however, for my =
version of
> > gcc
> >=20
> > [jhriv@chao:~]% gcc --version
> > 2.95.2
> >=20
> >     the proper flag is -shared.
>=20
> Odd, because we have gcc 2.95.2 on this Solaris 2.6 system (OS is =
given
> by gcc as sparc-sun-solaris2.6) and it accepts -G and produces shared
> libraries without any extra effort.  Have a look in the specs file,
> whose location is given by gcc -v.  I have some hieroglyphics after
> `*link:' which include `%{G:-G}', which I think means `accept the =
option
> -G during the linker phase and passes it down to the linker itself as
> -G'.
>=20

Actually proper fix would have been to check if we use GNU ld (or GNU =
C)
as linker and adjust flags accordingly. This has been mentioned a while
back. But I am not sure how to do it in clean way.

-andrej


From zsh-workers-request@math.gatech.edu Tue Apr 28 14:15:25 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6134 invoked from network); 28 Apr 1998 14:15:23 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 28 Apr 1998 14:15:23 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id KAA19464;
	Tue, 28 Apr 1998 10:08:01 -0400 (EDT)
Resent-Date: Tue, 28 Apr 1998 10:08:01 -0400 (EDT)
From: Andrew Main <zefram@tao.co.uk>
Message-Id: <199804281408.PAA32237@taos.demon.co.uk>
Subject: Re: up-line-or-search still 'fixed'!
To: aheading@jpmorgan.com (Anthony Heading)
Date: Tue, 28 Apr 1998 15:08:04 +0100 (BST)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <19980428143325.59341@gmp-fores1.uk.jpmorgan.com> from "Anthony Heading" at Apr 28, 98 02:33:25 pm
X-Loop: zefram@tao.co.uk
X-Phase: The Moon is Waxing Crescent (7% of Full)
X-Stardate: [-30]1072.94
X-US-Congress: moronic fuckers
X-Headers: OTT
X-Mouse: +++ ????? +++  Out Of Cheese Error.  Redo From Start.
X-Parrot: no, it's only resting.
X-Personality: INTJ
X-email-is-not-HTML: <blink> <font face="wingdings">
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"IgKWk1.0.3m4.1BUHr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3885
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Anthony Heading wrote:
>ZLE_HISTSEARCH has been excised, and histpos is no longer a static variable,
>so there's no record of how far through a word the search should be keyed from.

Yes.  That's why I'm unwilling to go back to the old behaviour.
The behaviour of up-line-or-search used to depend on whether the
immediately preceding editing command was also up-line-or-search.
The model I'm trying to move ZLE to has the effects of each editing
command as independent as possible of other commands, so that eventually
most of them can be separated into modules or even implemented purely
as shell functions.  Each of the ZLE_* flags violates this principle to
some extent, so I'm trying to remove them as far as possible (which will
not be completely).

I've been considering other ways of recording the bits of state that the
ZLE_* flags and various static variables contain.  I'd like everything to
be user-accessible, for widgets.  In a future version it will definitely
be possible to implement the old up-line-or-search, if one really wants
to.  But for the moment it just doesn't fit into the ZLE architecture.

How would people feel about making up-line-or-search do a
history-beginning-search-backwards?  This would be a lot closer to the
old behaviour, differing only in the resulting cursor position.

-zefram


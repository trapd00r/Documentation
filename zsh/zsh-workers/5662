From zsh-workers-return-5662-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Mar 05 13:30:03 1999
Return-Path: <zsh-workers-return-5662-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18320 invoked from network); 5 Mar 1999 13:30:01 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Mar 1999 13:30:01 -0000
Received: (qmail 22858 invoked by alias); 5 Mar 1999 13:29:40 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5662
Received: (qmail 22851 invoked from network); 5 Mar 1999 13:29:39 -0000
Date: Fri, 5 Mar 1999 14:28:50 +0100 (MET)
Message-Id: <199903051328.OAA04300@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: param keys


We should tell the completion code about the new `/' which now has to
come directly after a parameter name in `${...'.

Bye
 Sven

diff -u os/Zle/zle_misc.c Src/Zle/zle_misc.c
--- os/Zle/zle_misc.c	Fri Mar  5 14:23:32 1999
+++ Src/Zle/zle_misc.c	Fri Mar  5 14:24:30 1999
@@ -794,7 +794,7 @@
     if(br) {
 	suffixlen['#'] = suffixlen['%'] = suffixlen['?'] = n;
 	suffixlen['-'] = suffixlen['+'] = suffixlen['='] = n;
-	/*{*/ suffixlen['}'] = n;
+	/*{*/ suffixlen['}'] = suffixlen['/'] = n;
     }
 }
 
diff -u oc/Base/_brace_parameter Completion/Base/_brace_parameter
--- oc/Base/_brace_parameter	Mon Mar  1 13:12:28 1999
+++ Completion/Base/_brace_parameter	Fri Mar  5 14:25:21 1999
@@ -2,4 +2,4 @@
 
 # Simple but without spiffy suffix handling: compgen -v -S '} '
 
-compadd -S '} ' -r '-:?#%+=['  - "${(@)${${${(f)$(typeset)}%%\=*}##* }:gs/'//}"
+compadd -S '} ' -r '-:?#%+=[/'  - "${(@)${${${(f)$(typeset)}%%\=*}##* }:gs/'//}"

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


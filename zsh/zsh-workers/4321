From zsh-workers-request@math.gatech.edu Tue Aug 18 21:46:13 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7732 invoked from network); 18 Aug 1998 21:46:12 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 18 Aug 1998 21:46:12 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id RAA19934;
	Tue, 18 Aug 1998 17:39:55 -0400 (EDT)
Resent-Date: Tue, 18 Aug 1998 17:39:55 -0400 (EDT)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <980818144158.ZM6993@candle.brasslantern.com>
Date: Tue, 18 Aug 1998 14:41:58 -0700
In-Reply-To: <m2r9yecfv6.fsf@altair.xemacs.org>
Comments: In reply to SL Baur <steve@xemacs.org>
        "zsh 3.0/3.1 bug, zsh 3.1.4 regression" (Aug 18, 11:19am)
References: <m2r9yecfv6.fsf@altair.xemacs.org>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: SL Baur <steve@xemacs.org>
Subject: Re: zsh 3.0/3.1 bug, zsh 3.1.4 regression
Cc: info-cvs@gnu.org, zsh-workers@math.gatech.edu
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"ZTOm31.0.Pt4.hIVsr"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4321
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Aug 18, 11:19am, SL Baur wrote:
> Subject: zsh 3.0/3.1 bug, zsh 3.1.4 regression
> 
> The following problem, which exists in zsh 3.0.4 and 3.1.3 and 3.1.4
> causes the cvs-1.10 regression tests to fail when /bin/sh is symlinked 
> to zsh.  [this is from test `devcom3-5'.]
> 
> $ cat <<EOF
> Enew    line    here
> G@#$^!@#=&
> EOF
> Enew    line    here
> G@#0@#=&

$^! is $! with the RC_EXPAND_PARAM option turned on.  Try this:

$ sleep 10 &
$ cat <<EOF
Enew    line    here
G@#$^!@#=&
EOF
Enew    line    here
G@#24108@#=&
   ^^^^^
   Note process ID here

It might be possible for zsh to special-case use of the ^ modifier, but
really the cvs test should be using a quoted here-document, like so:

cat <<'EOF'
Enew    line    here
G@#$^!@#=&
EOF

This should work correctly in bash, ksh, and sh, as well as zsh.


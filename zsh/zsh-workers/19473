From zsh-workers-return-19473-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 27 00:32:31 2004
Return-Path: <zsh-workers-return-19473-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15844 invoked from network); 27 Feb 2004 00:32:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 27 Feb 2004 00:32:30 -0000
Received: (qmail 12168 invoked by alias); 27 Feb 2004 00:32:19 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19473
Received: (qmail 12107 invoked from network); 27 Feb 2004 00:32:18 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 27 Feb 2004 00:32:18 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [203.24.36.2] by sunsite.dk (MessageWall 1.0.8) with SMTP; 27 Feb 2004 0:32:17 -0000
Received: (qmail 28971 invoked by uid 8); 27 Feb 2004 00:32:15 -0000
To: zsh-workers@sunsite.dk
Path: not-for-mail
From: Geoff Wing <mason@primenet.com.au>
X-Newsgroups:  lists.zsh.workers
Subject:  Re: [bug] completion makes input jump up one line
Date: Fri, 27 Feb 2004 00:32:15 +0000 (UTC)
Organization: PrimeNet Computer Consultants
Lines: 13
Message-ID:  <slrnc3t40f.si0.mason@g.primenet.com.au>
References:  <Pine.LNX.4.58.0402140150450.30356@localhost>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: sparkles.primenet.com.au
X-Trace: coral.primenet.com.au 1077841935 26675 203.43.15.10 (27 Feb 2004 00:32:15 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: Fri, 27 Feb 2004 00:32:15 +0000 (UTC)
User-Agent: slrn/0.9.8.0 (NetBSD)

Mikael Magnusson <mangosoft@comhem.se> typed:
: under 4.1, if i tabcomplete, and one of the matches in the list is a=20
: multiple of $COLUMNS, ie, if the last letter of the match is in the=20
: rightmost column, the whole thing jumps up one line. i confirmed it with=20
: caphuso on #zsh, it happens in 4.1, but not 4.0

I can reproduce this with:
 % zsh -f
 % setopt alwayslastprompt

I'm guessing the calculation in calclist() needs correction.

Geoff


From zsh-workers-return-26585-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 19 21:46:08 2009
Return-Path: <zsh-workers-return-26585-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8205 invoked from network); 19 Feb 2009 21:46:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Feb 2009 21:46:03 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 10876 invoked from network); 19 Feb 2009 21:45:52 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Feb 2009 21:45:52 -0000
Received: (qmail 21997 invoked by alias); 19 Feb 2009 21:45:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26585
Received: (qmail 18866 invoked from network); 19 Feb 2009 21:39:04 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 19 Feb 2009 21:39:04 -0000
Received: from fg-out-1718.google.com (fg-out-1718.google.com [72.14.220.154])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 0BF5E80271F0
	for <zsh-workers@sunsite.dk>; Thu, 19 Feb 2009 22:38:49 +0100 (CET)
Received: by fg-out-1718.google.com with SMTP id l26so1101385fgb.37
        for <zsh-workers@sunsite.dk>; Thu, 19 Feb 2009 13:38:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:content-type
         :date:message-id:mime-version:x-mailer;
        bh=+0AXGVG3vi3jac2gT87G/6YpxaeWZKL/Lb0ExS9w88U=;
        b=QS1t/myh0a/YapVUSwIIiFN8CBtoOcy5CPbR3NdKRtAEnE0GPXFAcXbG/XgQSCTbe7
         39c6HmLcek2LIHjp7Iaa7QGa6ubRfhdnREGbv1EpsCYtFeFNUI9DxQhKp31UmAFyCiOC
         HijMd6IFJY66WkSJYcow2d2MvxRqY3zOGQQGw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer;
        b=IPlJucNk4tjioQSkXOt6Qh/vgiByjW7YZXrh/tqEtChT4ZRBvecN0BUs9mB/NoCmAX
         5vST/664g4zcsv7yjOZV8395wTAPPklOysUxfC9yLm8Ks5Id4+auqBMMmY4Y6hXQaN35
         iJ5zkp7+Gsb9H8wAGhA/LOCt8yHCuz7ackWZM=
Received: by 10.86.51.2 with SMTP id y2mr646672fgy.2.1235079528790;
        Thu, 19 Feb 2009 13:38:48 -0800 (PST)
Received: from ?172.16.1.11? (ppp-203-234.21-151.libero.it [151.21.234.203])
        by mx.google.com with ESMTPS id 3sm434271fge.52.2009.02.19.13.38.48
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 19 Feb 2009 13:38:48 -0800 (PST)
Subject: flex symbols being exported
From: "Diego E. 'Flameeyes'" =?ISO-8859-1?Q?Petten=F2?= <flameeyes@gmail.com>
To: zsh-workers@sunsite.dk
Content-Type: multipart/signed; micalg="pgp-sha1"; protocol="application/pgp-signature"; boundary="=-C3OoRd2WN6oGvHQ7O6ir"
Date: Thu, 19 Feb 2009 22:40:02 +0100
Message-Id: <1235079602.9046.3.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.24.4 
X-Virus-Scanned: ClamAV 0.92.1/9015/Thu Feb 19 19:30:06 2009 on bifrost
X-Virus-Status: Clean


--=-C3OoRd2WN6oGvHQ7O6ir
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Hello,

I'm a Gentoo Linux developer, and since last year I'm working on rooting
away problems with linking collision between software. In particular,
right now I'm working toward reducing issues with exported flex/yacc
symbols for parsers [1].

Zsh seems to be exporting quite a bit of symbols; while most of the
interface is used by the plugins, there seems to be also the parser's
symbols being exported:

yamato ~ # nm -D /bin/zsh | grep yy
08088310 T yylex
080e05f0 B yytext

I guess this comes from flex, at any rate the yylex symbol is widely
defined (50 times on my tinderbox results) and it should probably not be
avoided.

You should either hide the symbols (either via proper ELF visibility or
through linker scripts) or rename them asking for a prefixed version of
them.

HTH,

[1]
http://blog.flameeyes.eu/2008/02/09/flex-and-linking-conflicts-or-a-possibl=
e-reason-why-php-and-recode-are-so-crashy

--=20
Diego "Flameeyes" Petten=C3=B2
http://blog.flameeyes.eu/


--=-C3OoRd2WN6oGvHQ7O6ir
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.10 (GNU/Linux)

iEYEABECAAYFAkmd0bIACgkQe2h1+2mHVWOlrQCg3L9Bj7FXvBAtFZYcrRSU2DIb
T20An1JEU+M6SuWCgN9a+/ZMEtElYlfh
=J6Px
-----END PGP SIGNATURE-----

--=-C3OoRd2WN6oGvHQ7O6ir--


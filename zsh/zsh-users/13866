From zsh-users-return-13866-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 18 16:20:29 2009
Return-Path: <zsh-users-return-13866-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29308 invoked from network); 18 Feb 2009 16:20:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Feb 2009 16:20:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 28016 invoked from network); 18 Feb 2009 16:20:12 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Feb 2009 16:20:12 -0000
Received: (qmail 4088 invoked by alias); 18 Feb 2009 16:19:54 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13866
Received: (qmail 4078 invoked from network); 18 Feb 2009 16:19:54 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 Feb 2009 16:19:54 -0000
Received: from yx-out-2324.google.com (yx-out-2324.google.com [74.125.44.28])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 2CAE880271F0
	for <zsh-users@sunsite.dk>; Wed, 18 Feb 2009 17:19:50 +0100 (CET)
Received: by yx-out-2324.google.com with SMTP id 8so1244184yxm.81
        for <zsh-users@sunsite.dk>; Wed, 18 Feb 2009 08:19:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:date:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=mSR/hHP36uGm/Sish14zLyX30ik/cWPGzkQUtrREEI4=;
        b=NsfkfpjjTGTwslqrX9oNJNF5WxS0UnnbOdscHIrKqnTc0ue9uUOUYfX9dDOePO0k3J
         vpsw306S9g/UuFEvEM7BiVu/6XwSPMGSddEfIGksoAXOlsTR8X+1o4qs/RXb1ad5RgBg
         tTdI5IvPfwT1652Oh5pmMVHOeRmDUVTCVm4g8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=Q8SAolZjiUaaOPqLZB0Eu3LTrT+6cmPuwXHtZRCprGR/XE4Akz6ujBUOv1RVNJXC8d
         cjYQvBqVwxFhkcPypfU+fimd32aJHeIQIzUgsYC11c0twzqwZ3LsB4W2Y2zK3kJKEi37
         IPZl0NeDGng/RJPkRQE5COb1dL+dlc2iXOeoI=
MIME-Version: 1.0
Received: by 10.220.97.75 with SMTP id k11mr107831vcn.39.1234973987405; Wed, 
	18 Feb 2009 08:19:47 -0800 (PST)
Date: Wed, 18 Feb 2009 11:19:47 -0500
Message-ID: <b2e43f8f0902180819x4955a281r6ae8700e4dbcc5a6@mail.gmail.com>
Subject: Preventing a single command from being saved in history
From: Allan Caffee <allan.caffee@gmail.com>
To: zsh-users@sunsite.dk
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92.1/9002/Wed Feb 18 12:16:50 2009 on bifrost
X-Virus-Status: Clean

Is there a way to prevent an arbitrary command line from being stored in
the shell history (for any longer than one command)?  A use of this for
example might be if I were to set a password into the environment or
pass some sensitive information to a program on the command line.

If this functionality does not currently exist how difficult would it be
to provide a precommand modifier?  I know the internals for this kind of
manipulation are already in place for options like HistNoStore and
HistNoFunctions. I've only glanced over the source code but it seems
like all that would be needed is to have should_ignore_line return 1 if
the precommand modifier is in effect.

        Regards,
        Allan

P.S. Yes. I'm well aware of how insecure putting sensitive information
into the environment or on a command line is. Consider your obligation
to warn me hereby fulfilled. :P


From zsh-workers-return-16177-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 26 13:32:16 2001
Return-Path: <zsh-workers-return-16177-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13197 invoked from network); 26 Oct 2001 13:32:15 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?LOAXYzoWDv0Li9oTORk8T7++CMSJjUem?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 26 Oct 2001 13:32:15 -0000
Received: (qmail 5287 invoked from network); 26 Oct 2001 13:32:14 -0000
Received: from sunsite.dk (130.225.247.90)
  by proxy.melb.primenet.com.au with SMTP; 26 Oct 2001 13:32:14 -0000
Received: (qmail 1924 invoked by alias); 26 Oct 2001 13:32:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16177
Received: (qmail 1911 invoked from network); 26 Oct 2001 13:32:01 -0000
X-VirusChecked: Checked
Sender: kiddleo@cav.logica.co.uk
Message-ID: <3BD965A9.49E51450@yahoo.co.uk>
Date: Fri, 26 Oct 2001 14:31:21 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.77 [en] (X11; U; Linux 2.2.15 i686)
X-Accept-Language: en
MIME-Version: 1.0
To: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
CC: zsh-workers@sunsite.dk
Subject: Re: PATCH: complete value of $TZ
References: <003801c15e1f$aaa54700$21c9ca95@mow.siemens.ru>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Borsenkow Andrej wrote:
> 
> > -if (( ! $+_zoneinfo_dirs )); then
> > -  _zoneinfo_dirs=( /usr/{share,lib,share/lib}/zoneinfo*(/) )
> > -fi
> 
> add /usr/lib/locale/TZ plese

Okay. That was an existing part of _zdump so I didn't question it.

Is the patch below right or is it something slightly different? If not,
please just commit whatever you think is right.

Cheers

Oliver

Index: Completion/Unix/Type/_time_zone
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Type/_time_zone,v
retrieving revision 1.1
diff -u -r1.1 _time_zone
--- Completion/Unix/Type/_time_zone     2001/10/26 13:05:46     1.1
+++ Completion/Unix/Type/_time_zone     2001/10/26 13:26:09
@@ -3,7 +3,7 @@
 local expl
 
 if (( ! $+_zoneinfo_dirs )); then
-  _zoneinfo_dirs=( /usr/{share,lib,share/lib}/zoneinfo*(/) )
+  _zoneinfo_dirs=( /usr/{share,lib,share/lib}/{zoneinfo*,locale/TZ}(/)
)
 fi
 
 _wanted timezone expl 'time zone' _files -W _zoneinfo_dirs

_____________________________________________________________________
This message has been checked for all known viruses by the 
MessageLabs Virus Scanning Service. For further information visit
http://www.messagelabs.com/stats.asp


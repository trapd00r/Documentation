From zsh-workers-return-26134-mason-zsh=primenet.com.au@sunsite.dk Fri Dec 12 20:54:55 2008
Return-Path: <zsh-workers-return-26134-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7715 invoked from network); 12 Dec 2008 20:54:52 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Dec 2008 20:54:52 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 60058 invoked from network); 12 Dec 2008 09:48:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Dec 2008 09:48:09 -0000
Received: (qmail 27681 invoked by alias); 12 Dec 2008 09:48:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26134
Received: (qmail 27661 invoked from network); 12 Dec 2008 09:48:03 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Dec 2008 09:48:03 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 57D5F80524C3
	for <zsh-workers@sunsite.dk>; Fri, 12 Dec 2008 10:47:59 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly22g.srv.mailcontrol.com (MailControl) with ESMTP id mBC9lvY7019711
	for <zsh-workers@sunsite.dk>; Fri, 12 Dec 2008 09:47:57 GMT
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 12 Dec 2008 09:47:57 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id mBC9lpsq015446
	for <zsh-workers@sunsite.dk>; Fri, 12 Dec 2008 09:47:51 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id mBC9lplo015442
	for <zsh-workers@sunsite.dk>; Fri, 12 Dec 2008 09:47:51 GMT
Message-Id: <200812120947.mBC9lplo015442@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: "Zsh hackers list" <zsh-workers@sunsite.dk>
Subject: Re: exec {_Dbg_new_fd}<>&-
In-reply-to: <6cd6de210812111709l43863baatc4eb728035b8f1f1@mail.gmail.com>
References: <6cd6de210812111709l43863baatc4eb728035b8f1f1@mail.gmail.com>
Comments: In-reply-to "Rocky Bernstein" <rocky.bernstein@gmail.com>
   message dated "Thu, 11 Dec 2008 20:09:50 -0500."
Date: Fri, 12 Dec 2008 09:47:51 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 12 Dec 2008 09:47:57.0109 (UTC) FILETIME=[B62FE650:01C95C3E]
X-Scanned-By: MailControl A_08_51_00 (www.mailcontrol.com) on 10.71.0.132
X-Virus-Scanned: ClamAV 0.92.1/8748/Fri Dec 12 06:15:42 2008 on bifrost
X-Virus-Status: Clean

"Rocky Bernstein" wrote:
> exec {_Dbg_fd}<>$TTY
>   exec {_Dbg_fd}<&-
>   exec {_Dbg_fd}>&-
> 
> bug.zsh:3: file descriptor 12 out of range, not closed. And ksh
> doesn't seem to complain.
> I gather that closing _Dbg_fd for input also closes it for output.
> 
> Is this the expected or okay?

Certainly expected by me: "close" means completely close the file
descriptor.  I think the only alternative (that would allow you to leave
it open for one of reading or writing after opening it for both) would
be to close it and reopen it, which is a larger side effect than I would
expect.  I'm happy to hear alternative interpretations, of course.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From zsh-workers-return-8110-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 30 14:43:45 1999
Return-Path: <zsh-workers-return-8110-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3604 invoked from network); 30 Sep 1999 14:43:44 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 30 Sep 1999 14:43:44 -0000
Received: (qmail 7078 invoked by alias); 30 Sep 1999 14:43:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8110
Received: (qmail 7071 invoked from network); 30 Sep 1999 14:43:34 -0000
Message-Id: <9909301408.AA16679@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: "sh" job control 
In-Reply-To: "Clint Adams"'s message of "Thu, 30 Sep 1999 10:24:17 DFT."
             <19990930102417.A12538@dman.com> 
Date: Thu, 30 Sep 1999 16:08:02 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Clint Adams wrote:
> Most other shells seem to default to exiting right away when told to
> exit while there are jobs in the job table.  zsh provided no way for
> silence (other than disowning all jobs or setopt nomonitor)
> 
> The following patch introduces an option "shjobcontrol" (bad name?)
> which skips the checkjobs() call.

It's probably because zsh doesn't set nohup by default. As it's set
by default in sh mode, this seems a reasonable combination.  Here's some
documentation.  Maybe the name could be improved but it's hard to think of
anything short.

--- Doc/Zsh/options.yo~	Wed Sep 22 14:59:48 1999
+++ Doc/Zsh/options.yo	Thu Sep 30 16:04:18 1999
@@ -1003,6 +1003,14 @@
 tt(INTERACTIVE) option is explicitly set on the command line.
 The value of this option cannot be changed anywhere other than the command line.
 )
+pindex(SH_JOB_CONTROL)
+cindex(exiting, checking jobs when)
+cindex(logging out, checking jobs when)
+item(tt(SH_JOB_CONTROL) <C> <K> <S>)(
+Don't report the status of background and suspended jobs when exiting a
+shell with job control.  This is best used in combination with tt(NO_HUP),
+else such jobs will be killed automatically.
+)
 pindex(SINGLE_LINE_ZLE)
 cindex(editor, single line mode)
 item(tt(SINGLE_LINE_ZLE) (tt(-M)) <K>)(


-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


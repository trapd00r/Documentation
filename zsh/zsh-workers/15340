From zsh-workers-return-15340-mason-zsh=primenet.com.au@sunsite.dk Mon Jul 09 18:33:25 2001
Return-Path: <zsh-workers-return-15340-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12697 invoked from network); 9 Jul 2001 18:33:22 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jul 2001 18:33:22 -0000
Received: (qmail 4442 invoked by alias); 9 Jul 2001 18:33:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15340
Received: (qmail 4405 invoked from network); 9 Jul 2001 18:33:08 -0000
Date: Mon, 9 Jul 2001 20:33:06 +0200
From: Stefan `Sec` Zehl <sec@42.org>
To: zsh-workers@sunsite.dk
Subject: zsh 4.x bug in completion?
Message-ID: <20010709203306.A24119@matrix.42.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0i
I-love-doing-this: really
X-Modeline: vim:set ts=8 sw=4 smarttab tw=72 si noic notitle:
Accept-Languages: de, en
X-URL: http://sec.42.org/

Hi,

I'm a long-time user of zsh, and like it very much. I noticed there was
a new release, and thought I should upgrade because some of the
minor shortcomings of the 3.0.x-series might have been fixed. So I
upgraded from zsh3.0.x to zsh4.0.2 and noticed that it behaves
completely different. While I detest changing so much of the integral
behaviour, most of this was configurable, so i could restore the old
behaviour, and regain my sanity.

One thing, though, looks like a bug to me, at least I found no way to
turn it off.

To verify it, I used plain setup except a different binding for tab:

| nuyen:~>zsh -f
| nuyen% echo $ZSH_VERSION 
| 4.0.2
| nuyen% bindkey ^i expand-or-complete-prefix

Now we enter a command. 

| nuyen% echo test
| test

Lets assume this fails due to lacking permissions. I want to prepend
"sudo " to this command (sudo runs its arguments as root)

So i go to the beginning of the line, and add "sud"-<TAB>. The line now
looks like this:

| nuyen% sudo echo test 

With the cursor beeing on the "e" of echo.
Now hit enter.

| nuyen% sudoecho test 
| zsh: command not found: sudoecho

zsh removes the space. I have no idea who had that brilliant idea.

I found no option to turn this off. The closest ones, auto_param_keys
and auto_remove_slash seem to have no effect on that.

Please help,
    Sec
-- 
(Learn Lisp.  (Really.  (I'm serious.  (Trust me. (It rocks all over.)))))
-- Matt Curtin <cmcurtin@interhack.net> on freebsd-chat


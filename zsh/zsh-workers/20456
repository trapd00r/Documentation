From zsh-workers-return-20456-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 05 15:16:55 2004
Return-Path: <zsh-workers-return-20456-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21279 invoked from network); 5 Oct 2004 15:16:54 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Oct 2004 15:16:54 -0000
Received: (qmail 87282 invoked from network); 5 Oct 2004 15:16:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Oct 2004 15:16:46 -0000
Received: (qmail 24964 invoked by alias); 5 Oct 2004 15:16:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20456
Received: (qmail 24950 invoked from network); 5 Oct 2004 15:16:32 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Oct 2004 15:16:32 -0000
Received: (qmail 86535 invoked from network); 5 Oct 2004 15:15:47 -0000
Received: from greux.loria.fr (152.81.2.43)
  by a.mx.sunsite.dk with SMTP; 5 Oct 2004 15:15:46 -0000
Received: from lefevre by greux.loria.fr with local (Exim 4.34)
	id 1CEr2W-0001tl-KK; Tue, 05 Oct 2004 17:15:44 +0200
Date: Tue, 5 Oct 2004 17:15:44 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk
Subject: zsh can't compile (includes old <curses.h>)
Message-ID: <20041005151544.GG7881@greux.loria.fr>
Mail-Followup-To: Vincent Lefevre <vincent@vinc17.org>,
	zsh-workers@sunsite.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.6i
Sender: Vincent Lefevre <vincent@vinc17.org>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

Hi,

I get the following error when compiling zsh 4.2.1:

[...]
gcc -c -I. -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -DMODULE -Wall -Wmissing-prototypes -O2 -fPIC -o terminfo..o terminfo.c
In file included from /usr/include/curses.h:77,
                 from terminfo.c:53:
/users/spaces/lefevre/i586-linux/include/ncurses/unctrl.h:57: parse error before "unctrl"
make[3]: *** [terminfo..o] Error 1
make[3]: Leaving directory `/users/spaces/lefevre/software/zsh-4.2.1/Src/Modules'
make[2]: *** [modules] Error 1
make[2]: Leaving directory `/users/spaces/lefevre/software/zsh-4.2.1/Src'
make[1]: *** [modules] Error 2
make[1]: Leaving directory `/users/spaces/lefevre/software/zsh-4.2.1/Src'
make: *** [all] Error 1

with C_INCLUDE_PATH=/users/spaces/lefevre/i586-linux/include:/users/spaces/lefevre/i586-linux/include:/users/spaces/lefevre/include:/users/spaces/logiciels/mpfr-2.0.2/linux/include:/users/spaces/logiciels/gmp/linux/include:/users/spaces/logiciels/mathlib/linux/../include

I suppose that Src/Modules/terminfo.c should include <ncurses/curses.h>
instead of <curses.h> when it can be found.

Regards,

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / SPACES project at LORIA


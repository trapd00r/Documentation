From zsh-workers-return-12352-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 24 10:39:34 2000
Return-Path: <zsh-workers-return-12352-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18240 invoked from network); 24 Jul 2000 10:39:32 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Jul 2000 10:39:32 -0000
Received: (qmail 26346 invoked by alias); 24 Jul 2000 10:39:14 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12352
Received: (qmail 26338 invoked from network); 24 Jul 2000 10:39:14 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Zsh hackers list" <zsh-workers@sunsite.auc.dk>
Subject: Environ handling broken on Cygwin RE: Cygwin: environ problem
Date: Mon, 24 Jul 2000 14:39:08 +0400
Message-ID: <000c01bff55b$6575ef00$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
In-reply-to: <000001bff547$2e7fe500$21c9ca95@mow.siemens.ru>


>
> There is unfortunately one more problem.

And one more. Cygwin maintains "shadow" Win32 environment, that deals
with Unix<->Win32 name conversion. Now I understand, why calling gvim
(win32 version) out of Zsh never worked - it never got correct filename.

That means, that irrespectively of dynamic loading current environment
handling is broken on Cygwin and needs rewrite.

As I understand, the sole requirement of current code is to be able to
unset environment variable. Cygwin provides unsetenv() function. So, we
could retain current code on Unix and use native Cygwin function there.

Any suggestions before I start hacking? :-)

-andrej


From zsh-workers-return-11992-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 19 14:49:03 2000
Return-Path: <zsh-workers-return-11992-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11839 invoked from network); 19 Jun 2000 14:49:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jun 2000 14:49:02 -0000
Received: (qmail 11869 invoked by alias); 19 Jun 2000 14:48:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11992
Received: (qmail 11858 invoked from network); 19 Jun 2000 14:48:48 -0000
Date: Mon, 19 Jun 2000 16:48:42 +0200 (MET DST)
Message-Id: <200006191448.QAA00008@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Mon, 19 Jun 2000 14:56:58 +0400
Subject: PATCH: RE: undo does not work in menu-selection


Andrej Borsenkow wrote:

> > Err? What should it undo? And keep in mind that undo has this
> > possibility to go up and resume completing in menu-selection.
> >
> > Hm, or make it leave selection when at the `top-level'?
> 
> This looks natural. And it is really confusing, when undo just does
> nothing at all.
> 
> > But you have noticed how ^G behaves in menu-selection, yes?
> >
> 
> Ehem ... sorry, yes. Still, it is better when a widget (undo in this
> case) has consistent behaviour. In this case, action is to start
> menu-selection - so "undone" action is to leave menu-selection?

I could convince myself... or does anyone object?


Bye
 Sven

Index: Src/Zle/complist.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/complist.c,v
retrieving revision 1.27
diff -u -r1.27 complist.c
--- Src/Zle/complist.c	2000/06/14 06:54:45	1.27
+++ Src/Zle/complist.c	2000/06/19 14:48:08
@@ -1852,7 +1852,7 @@
 	    int l;
 
 	    if (!u)
-		goto getk;
+		break;
 
 	    cs = 0;
 	    foredel(ll);

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-14716-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 05 05:19:07 2001
Return-Path: <zsh-workers-return-14716-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22521 invoked from network); 5 Jun 2001 05:19:07 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Jun 2001 05:19:07 -0000
Received: (qmail 13370 invoked by alias); 5 Jun 2001 05:18:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14716
Received: (qmail 13359 invoked from network); 5 Jun 2001 05:18:50 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: "Geoff Wing" <gcw@zsh.org>, "a normal guy" <ee_in_co@yahoo.com>
Cc: "Zsh Hackers" <zsh-workers@sunsite.auc.dk>
Subject: RE: Export problem
Date: Tue, 5 Jun 2001 09:18:54 +0400
Message-ID: <000201c0ed7f$03b70750$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <20010605044212.A15617@primenet.com.au>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4522.1200

>
> a normal guy wrote about Export problem:
> :I think this is a bug.  Under HP-UX, the following line reports
> :an error:
> :% export RUN_DATE=`date +%Y%m%e%H%M.%S`
> :zsh: not an identifier: 41211.52
>
> Or maybe you want:
> % export RUN_DATE="`date +%Y%m%e%H%M.%S`"
>
> so that the space provided by %e doesn't cause word splitting.
>

This is a bug. No field splitting should be done in parameter assignment
context. Look is SUS for more detail; in short:

- Word expansions:
. Tilde Expansion . Parameter Expansion . Command Substitution . Arithmetic
Expansion . Field Splitting . Pathname Expansion . Quote Removal

- command line porcessing rules:

1. The words that are recognised as variable assignments or redirections
according to Shell Grammar Rules are saved for processing in steps 3 and 4.

2. The words that are not variable assignments or redirections will be
expanded. If any fields remain following their expansion, the first field
will be considered the command name and remaining fields will be the
arguments for the command.

3. Redirections will be performed as described in Redirection .

4. Each variable assignment will be expanded for tilde expansion, parameter
expansion, command substitution, arithmetic expansion and quote removal
prior to assigning the value.

Please note paragraph 4. It explicitly omits Field Splitting from expansions
done for parameter assignments and redirections.

-andrej



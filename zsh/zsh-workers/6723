From zsh-workers-return-6723-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Jun 19 07:21:40 1999
Return-Path: <zsh-workers-return-6723-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18563 invoked from network); 19 Jun 1999 07:21:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jun 1999 07:21:38 -0000
Received: (qmail 20119 invoked by alias); 19 Jun 1999 07:21:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6723
Received: (qmail 20099 invoked from network); 19 Jun 1999 07:21:19 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990619064924.ZM12246@candle.brasslantern.com>
Date: Sat, 19 Jun 1999 06:49:24 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Patch available for 3.0.6-pre-5
MIME-Version: 1.0
MIME-Version: 1.0
MIME-Version: 1.0
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I've made up another pre-patch for 3.0.6, which carries the version number
3.0.6-pre-5.  The set is now:
        ftp://ftp.brasslantern.com/pub/zsh/zsh-3.0.5-3.0.6-pre-0.diff
        ftp://ftp.brasslantern.com/pub/zsh/zsh-3.0.6-pre-0-pre-1.diff
        ftp://ftp.brasslantern.com/pub/zsh/zsh-3.0.6-pre-1-pre-2.diff
        ftp://ftp.brasslantern.com/pub/zsh/zsh-3.0.6-pre-2-pre-3.diff
        ftp://ftp.brasslantern.com/pub/zsh/zsh-3.0.6-pre-3-pre-4.diff
        ftp://ftp.brasslantern.com/pub/zsh/zsh-3.0.6-pre-4-pre-5.diff

Remember that after applying patches to 3.0.5, you must "touch stamp-h.in"
before running configure to prevent make from attempting to rerun autoconf
and autoheader.

Checksums on the latest diff:

(BSD)  61167   137
(SYSV) 60127 273 zsh-3.0.6-pre-4-pre-5.diff

The big change here is the 64-bit and large file support (thanks, Peter).
If you have a system where this is useful, please check this if you can.

This is the last "pre" release.  I plan to make a test release through
the official FTP site before the end of the month; if all goes well with
that, the final release will be in mid-July.

Remarks about this patch:

* After much consideration, taking into account the commentary elicited on
  the zsh-users list, I have decided that Greg Badros's ZLS_COLORS patches
  will have to wait for Peter to include them in 3.1.x.  Sorry, Greg; it
  did seem that there's enough support for it to be worth getting a GPL
  exemption from the FSF, but I'm swayed by the argument that fewer new
  features is better in the case of 3.0, so I've tried to pick up only bug
  fixes (including compatibility ones) since -pre-4.

* For the same reasons, I did not adapt Sven's PS4-promptpercent patch,
  though I waffled a lot about it.

* This patch is a unified diff (previously I've been doing context diffs)
  because it's 40% smaller that way.  It's still the largest patch in the
  set so far ....

* There are two primary reasons the patch is so big:
  1. 64-bit support makes many small changes in lots of files.
  2. I upgraded to autoconf 2.13, which exaggerates the configure diff.

* I haven't updated the META-FAQ, but will before the final release.  I'm
  also expecting Sven to fix the bug I reported in 6722.  Otherwise I do
  not plan on making any more changes before the test release, and of
  course only bugfixes after.

* Have I forgotten anything?

Here are the new ChangeLog entries since -pre-4:

+1999-06-19 05:16  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/exec.c: Permit shell constructs such as loops to be
+        suspended; Sven, 6707.
+
+1999-06-19 05:11  Bart Schaefer <schaefer@zsh.org>
+
+	* Doc/zsh.texi, Doc/zshbuiltins.man, Src/builtin.c, Src/exec.c,
+	Src/init.c, Src/input.c, Src/parse.c, Src/zsh.h: Adapt Sven's and
+        PWS's patches for correct LINENO computation from 6693, 6705.
+
+1999-06-19 04:28  Bart Schaefer <schaefer@zsh.org>
+
+	* configure: Rerun autoconf for more 64-bit changes.
+
+	* Src/init.c: Issue an error for shell options with embedded
+        spaces; PWS, 6658.
+
+1999-06-16 08:38  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/zsh.h: Alternate formulation of zulong as introduced in
+        pws-22.
+
+1999-06-16 08:26  Bart Schaefer <schaefer@zsh.org>
+
+	* configure.in: Further 64-bit fixes covering 6570 and 6639,
+        adapted to 3.0.6 by PWS.
+
+1999-06-16 07:22  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/jobs.c: Relocate the extern decl for list_pipe, as we need it
+        in wider scope now.
+
+1999-06-16 07:13  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/jobs.c: Fix interrupt and reaping of builtin loop at the end
+        of a pipe when in a non-MONITOR-ing shell; Sven, zsh-users/2388.
+
+	* config.h.in, configure: Rerun autoheader and autoconf following
+	64-bit changes.
+
+1999-06-16 06:59  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/exec.c: Strip trailing whitespace when performing "#!"
+        execute-emulation; 6652.
+
+	* Src/hist.c: Fix crash when using shortcut history substitution
+        (^foo^bar) with an empty history list; 6651.
+
+1999-06-16 05:57  Bart Schaefer <schaefer@zsh.org>
+
+	* INSTALL, acconfig.h, aclocal.m4, configure.in, Src/builtin.c,
+	Src/math.c, Src/mem.c, Src/params.c, Src/subst.c, Src/utils.c,
+	Src/zsh.h: More patches from PWS for 64-bit support, in 6552, 6563,
+        6570, 6571, and 6626.
+
+1999-06-16 05:28  Bart Schaefer <schaefer@zsh.org>
+
+	* Doc/zsh.texi: Add an index entry for subscripts, as PWS did in
+        6563.
+
+1999-06-15 16:58  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/subst.c: Handle -0 as a dirstack element; Tanaka Akira, 6641.
+
+1999-06-15 04:44  Bart Schaefer <schaefer@zsh.org>
+
+	* Doc/zsh.texi, Doc/zshmisc.man, Src/lex.c: Adapt PWS's patch for
+        ksh function definition syntax, from 6618.
+
+1999-06-15 04:14  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/utils.c: Rework SIGWINCH and LINES/COLUMNS handling once
+        again; zsh-workers/6617.
+
+1999-06-13 19:13  Bart Schaefer <schaefer@zsh.org>
+
+	* Doc/zsh.texi: Fix one typo and change coordinator to PWS.
+
+1999-06-08 06:18  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/hashtable.c: Fix loss of newline in new code to output 64-bit
+        integer.
+
+1999-06-08 05:58  Bart Schaefer <schaefer@zsh.org>
+
+	* INSTALL, acconfig.h, aclocal.m4, config.h.in, configure,
+	configure.in, Src/builtin.c, Src/exec.c, Src/glob.c, Src/globals.h,
+	Src/hashtable.c, Src/init.c, Src/input.c, Src/math.c, Src/mem.c,
+	Src/params.c, Src/subst.c, Src/system.h, Src/utils.c, Src/zsh.h:
+	Handling for 64-bit integers on 32-bit systems where the compiler
+        supports them, including large file support; PWS, 6449.
+
+1999-06-07 03:14  Bart Schaefer <schaefer@zsh.org>
+
+	* configure.in: Fix for configure typo; Naoki Wakamatsu, 6477.
+
+1999-06-06 05:02  Bart Schaefer <schaefer@zsh.org>
+
+	* Doc/zsh.texi: Add missing description for `compctl -s'.
+
+1999-06-06 04:33  Bart Schaefer <schaefer@zsh.org>
+
+	* Src/hist.c: Ignore whitespace in history searches; from Wayne
+        Davison, 6476.
+

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-12353-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jul 24 10:57:58 2000
Return-Path: <zsh-workers-return-12353-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18406 invoked from network); 24 Jul 2000 10:57:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Jul 2000 10:57:56 -0000
Received: (qmail 28110 invoked by alias); 24 Jul 2000 10:57:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12353
Received: (qmail 28099 invoked from network); 24 Jul 2000 10:57:40 -0000
Date: Mon, 24 Jul 2000 11:57:08 +0100
From: Peter Stephenson <pws@cambridgesiliconradio.com>
Subject: Re: Environ handling broken on Cygwin RE: Cygwin: environ problem
In-reply-to: "Your message of Mon, 24 Jul 2000 14:39:08 +0400."
 <000c01bff55b$6575ef00$21c9ca95@mow.siemens.ru>
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Message-id: <0FY7004QY7R77K@la-la.cambridgesiliconradio.com>
Content-transfer-encoding: 7BIT

Andrej wrote:
> As I understand, the sole requirement of current code is to be able to
> unset environment variable. Cygwin provides unsetenv() function. So, we
> could retain current code on Unix and use native Cygwin function there.
> 
> Any suggestions before I start hacking? :-)

Feel free.  Obviously the best solution would be the minimal changes to use
putenv, getenv and unsetenv where zsh digs around directly in environ with
#ifdef __CYGWIN__.  If this works, we can start adding configure checks to
see if we can do it elsewhere, since anything that reduces the number of
assumptions about the system is good.  However, `if this works' may not be
a particularly well-defined test.

Let me know if you want sourceforge developer stuff adding.

-- 
Peter Stephenson <pws@cambridgesiliconradio.com>
Cambridge Silicon Radio, Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


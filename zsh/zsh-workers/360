From zsh-workers-request@math.gatech.edu  Wed Sep  6 06:41:17 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id GAA03205 for <mason@werple.mira.net.au>; Wed, 6 Sep 1995 06:41:14 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA14763
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Tue, 5 Sep 1995 16:36:12 -0400
Received: by math (5.x/SMI-SVR4)
	id AA27159; Tue, 5 Sep 1995 15:41:19 -0400
Resent-Date: Tue, 5 Sep 1995 19:36:35 +0200 (MET DST)
Old-Return-Path: <hzoli@cs.elte.hu>
From: Zoltan Hidvegi  <hzoli@cs.elte.hu>
Message-Id: <199509051736.TAA08833@bolyai.cs.elte.hu>
Subject: Re: SEGV on here-documents
To: P.Stephenson@swansea.ac.uk
Date: Tue, 5 Sep 1995 19:36:35 +0200 (MET DST)
In-Reply-To: <7102.9509051512@pyro.swan.ac.uk> from "P.Stephenson@swansea.ac.uk" at Sep 5, 95 04:12:35 pm
X-Mailer: ELM [version 2.4 PL24]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Sender: hzoli@cs.elte.hu
Resent-Message-Id: <"X5vkQ2.0.He6.VVAJm"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/360
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Peter Stephenson wrote:
> hzoli@cs.elte.hu wrote:
> > If a here-document contains a line longer than 255 characters, it causes SEGV
> > (not on all OS, eg. on Solaris it only produces a wrong output, but it causes
> > SEGV on elf-linux).  I had no time to trace the bug but it may be related to
> > Peters input patches (in which case it is not reproducible with vanilla
> > beta10).
> 
> Seems to works OK on 2.6-beta10 with my input patches for up to 365
> characters on OSF/1, but I'd like to hear more.

On OSF/1 it works for me as well.  It seems that the bad thing happens
somewhere in gethere() in exec.c.  Unfortunately I really have no time to
debug it now, I have to sysadm a large Unix network with 7 different OS and
I'll also continue my studies in the University and give some lectures
and that's a bit too much.

I looked at my rcs and I see that Peter's input patch changes only one line,
hgets() to ingets() so the problem is probably not in input.c.

Zoltan


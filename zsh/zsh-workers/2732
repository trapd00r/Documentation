From zsh-workers-request@euclid.skiles.gatech.edu Sun Jan 05 23:02:25 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 22752 invoked from network); 5 Jan 1997 23:02:18 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 5 Jan 1997 23:02:18 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id SAA17400; Sun, 5 Jan 1997 18:06:17 -0500 (EST)
Resent-Date: Sun, 5 Jan 1997 18:06:17 -0500 (EST)
Message-Id: <199701052301.IAA20108@isl.rdc.toshiba.co.jp>
To: zsh-workers@math.gatech.edu
Subject: Fail to build zsh-3.1.0 on Solaris 2.x with bundled make
X-Mailer: Mew version 1.54 on Emacs 19.28.1, Mule 2.3
Mime-Version: 1.0
Content-Type: Text/Plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Fri, 27 Dec 1996 09:55:29 +0900
From: "KIMURA Yasuhiro / =?ISO-2022-JP?B?GyRCTFpCPDkvOUAbKEI=?= " <yasu@isl.rdc.toshiba.co.jp>
Resent-Message-ID: <"7mLpV3.0.mF4.eF3qo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2732
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Hello Maintainers.

I failed to make zsh-3.1.0 on Solaris 2.x. This may be a problem of
autoconf or OS-buldled make command itself, but I report it
anyway. Since I'm not a subscriber, please ask directly to me if you
have any question.

Version of zsh
==============

3.1.0

Description of problem
======================

Make of zsh-3.1.0 fails on Solaris 2.x when

1. Using OS-bundled make command(i.e /usr/ccs/bin/make).

2. configuring with --enable-dynamic option.

If GNU make is used instead, make successfully finishes.

Environment
===========

This problem happens on following environment.

Japanese Solaris 2.3 for SPARC

Log of 'configure' and 'make'
=============================

Following is a complete log of

% which make; ./configure --enable-dynamic ; make

----------------------------------------------------------------------
/usr/ccs/bin/make
creating cache ./config.cache
configuring for zsh 3.1.0
checking host system type... sparc-sun-solaris2.3
checking for gcc... gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... yes
checking whether gcc accepts -g... yes
checking how to run the C preprocessor... gcc -E
checking whether gcc needs -traditional... no
checking for working const... yes
checking for gcc option to accept ANSI C... 
checking for function prototypes... yes
checking size of long... 4
checking if signed to unsigned casting is broken... no
checking if the compiler supports variable-lenth arrays... yes
checking whether make sets ${MAKE}... yes
checking for a BSD compatible install... /usr/local/gnu/bin/install -c
checking for mawk... no
checking for gawk... no
checking for nawk... nawk
checking for dirent.h that defines DIR... yes
checking for opendir in -ldir... no
checking for ANSI C header files... yes
checking whether time.h and sys/time.h may both be included... yes
checking whether stat file-mode macros are broken... no
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/select.h... yes
checking for termcap.h... no
checking for termio.h... yes
checking for termios.h... yes
checking for sys/param.h... yes
checking for sys/filio.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for limits.h... yes
checking for fcntl.h... yes
checking for libc.h... no
checking for sys/utsname.h... yes
checking for sys/resource.h... yes
checking for locale.h... yes
checking for errno.h... yes
checking for stdlib.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for conflicts in sys/time.h and sys/select.h... no
checking ut_host in struct utmp... no
checking ut_host in struct utmpx... yes
checking POSIX termios... yes
checking TIOCGWINSZ in termios.h... yes
checking for sys/ptem.h... yes
checking for tgetent in -ltermcap... yes
checking for getdomainname... no
checking for getdomainname in -lnsl... yes
checking for dlopen in -ldl... yes
checking if an include file defines ospeed... no
checking if you must define ospeed... yes
checking if tgetent accepts NULL... yes
checking return type of signal handlers... void
checking for pid_t... yes
checking for off_t... yes
checking for mode_t... yes
checking for uid_t in sys/types.h... yes
checking for size_t... yes
checking for sigset_t... yes
checking for struct timezone... yes
checking whether getpgrp takes no argument... yes
checking for strftime... yes
checking for waitpid... yes
checking for select... yes
checking for tcsetpgrp... yes
checking for tcgetattr... yes
checking for strstr... yes
checking for lstat... yes
checking for getlogin... yes
checking for setpgid... yes
checking for gettimeofday... yes
checking for gethostname... yes
checking for mkfifo... yes
checking for wait3... no
checking for difftime... yes
checking for sigblock... no
checking for sigsetmask... no
checking for sigrelse... yes
checking for sighold... yes
checking for killpg... no
checking for sigaction... yes
checking for getrlimit... yes
checking for sigprocmask... yes
checking for setuid... yes
checking for seteuid... yes
checking for setreuid... no
checking for setresuid... no
checking for strerror... yes
checking for nis_list... yes
checking for initgroups... yes
checking for dlopen... yes
checking for dlerror... yes
checking for dlsym... yes
checking for dlclose... yes
checking for working strcoll... yes
checking what style of signals to use... POSIX_SIGNALS
checking where signal.h is located... /usr/include/sys/signal.h
checking where the RLIMIT macros are located... /usr/include/sys/resource.h
checking for /dev/fd filesystem... yes
checking for RFS superroot directory... no
checking for NIS... yes
checking for NIS+... no
checking where utmp is located... /etc/utmp
checking where wtmp is located... /etc/wtmp
checking if typeahead needs FIONREAD... no
checking for brk() prototype in <unistd.h>... yes
checking for sbrk() prototype in <unistd.h>... yes
checking for ioctl prototype in <sys/ioctl.h>... no
checking if named FIFOs work... yes
checking if echo in /bin/sh interprets escape sequences... yes
checking if your system use ELF binaries... yes
checking if your dlsym() needs a leading underscore... no
updating cache ./config.cache
creating ./config.status
creating Makefile
creating Src/Makefile
creating Src/Zle/Makefile
creating Src/Modules/Makefile
creating Doc/Makefile
creating Etc/Makefile
creating Misc/Makefile
creating Util/Makefile
creating Functions/Makefile
creating StartupFiles/Makefile
creating config.h

zsh configuration
-----------------
zsh version           : 3.1.0
host operating system : solaris2.3
source code location  : .
compiler              : gcc
compiler flags        :  -Wall -Wno-implicit -Wmissing-prototypes -O2
binary install path   : /usr/local/bin
man page install path : /usr/local/man
info install path     : /usr/local/info

cd Src && make CC='gcc' CPPFLAGS='' DEFS='-DHAVE_CONFIG_H'  CFLAGS='-Wall -Wno-implicit -Wmissing-prototypes -O2' LDFLAGS='' LIBS='-ldl -lnsl  -ltermcap'  prefix='/usr/local' exec_prefix='/usr/local' bindir='/usr/local/bin'  libdir='/usr/local/lib' infodir='/usr/local/info' mandir='/usr/local/man' manext='1'
sed -n -f ./makepro.sed builtin.c > builtin.pro
sed -n -f ./makepro.sed compat.c > compat.pro
sed -n -f ./makepro.sed cond.c > cond.pro
sed -n -f ./makepro.sed exec.c > exec.pro
sed -n -f ./makepro.sed glob.c > glob.pro
sed -n -f ./makepro.sed hashtable.c > hashtable.pro
sed -n -f ./makepro.sed hist.c > hist.pro
sed -n -f ./makepro.sed init.c > init.pro
sed -n -f ./makepro.sed input.c > input.pro
sed -n -f ./makepro.sed jobs.c > jobs.pro
sed -n -f ./makepro.sed lex.c > lex.pro
sed -n -f ./makepro.sed linklist.c > linklist.pro
sed -n -f ./makepro.sed loop.c > loop.pro
sed -n -f ./makepro.sed main.c > main.pro
sed -n -f ./makepro.sed math.c > math.pro
sed -n -f ./makepro.sed mem.c > mem.pro
sed -n -f ./makepro.sed module.c > module.pro
sed -n -f ./makepro.sed params.c > params.pro
sed -n -f ./makepro.sed parse.c > parse.pro
sed -n -f ./makepro.sed prompt.c > prompt.pro
sed -n -f ./makepro.sed signals.c > signals.pro
sed -n -f ./makepro.sed subst.c > subst.pro
sed -n -f ./makepro.sed text.c > text.pro
sed -n -f ./makepro.sed utils.c > utils.pro
sed -n -f ./makepro.sed watch.c > watch.pro
nawk -f ./signames.awk /usr/include/sys/signal.h > signames.h
nawk -f ./rlimits.awk /usr/include/sys/resource.h > rlimits.h
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o builtin.o builtin.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o compat.o compat.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o cond.o cond.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o exec.o exec.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o glob.o glob.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o hashtable.o hashtable.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o hist.o hist.c
( for mod in `cat ./modules-bltin`; do \
    echo "DOMOD(boot_$mod)"; \
done ) > bltinmods.list
Updated `zshpaths.h'.
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o init.o init.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o input.o input.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o jobs.o jobs.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o lex.o lex.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o linklist.o linklist.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o loop.o loop.c
loop.c: In function `execfor':
loop.c:41: warning: `val' might be used uninitialized in this function
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o math.o math.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o mem.o mem.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o module.o module.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o params.o params.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o parse.o parse.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o prompt.o prompt.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o signals.o signals.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o subst.o subst.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o text.o text.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o utils.o utils.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o watch.o watch.c
gcc -c -I.. -I. -I. -IModules -IZle -I./Zle  -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2  -o main.o main.c
gcc   -o zsh builtin.o compat.o cond.o exec.o glob.o hashtable.o  hist.o init.o input.o jobs.o lex.o linklist.o loop.o math.o mem.o  module.o params.o parse.o prompt.o signals.o subst.o text.o  utils.o watch.o  main.o -ldl -lnsl  -ltermcap
sed -n -f ./../makepro.sed example.c > example.pro
make: Fatal error: Don't know how to make target `example.so'
Current working directory /tmp/zsh-3.1.0/Src/Modules
*** Error code 1
make: Fatal error: Command failed for target `Modules'
Current working directory /tmp/zsh-3.1.0/Src
*** Error code 1
make: Fatal error: Command failed for target `Src'
----------------------------------------------------------------------

---
KIMURA Yasuhiro // yasu@isl.rdc.toshiba.co.jp
Reserch Lab. III    Communication and Information System Labs.
Research and Developement Center    TOSHIBA CORPORATION


From zsh-workers-return-18248-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 17 09:44:30 2003
Return-Path: <zsh-workers-return-18248-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3026 invoked from network); 17 Feb 2003 09:44:30 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Feb 2003 09:44:30 -0000
Received: (qmail 16839 invoked by alias); 17 Feb 2003 09:44:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18248
Received: (qmail 16827 invoked from network); 17 Feb 2003 09:44:21 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 17 Feb 2003 09:44:21 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.130.93] by sunsite.dk (MessageWall 1.0.8) with SMTP; 17 Feb 2003 9:44:20 -0000
Message-ID: <20030217094422.14794.qmail@web10401.mail.yahoo.com>
Received: from [209.86.249.92] by web10401.mail.yahoo.com via HTTP; Mon, 17 Feb 2003 01:44:22 PST
Date: Mon, 17 Feb 2003 01:44:22 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Memory leaks found by valgrind (try2)
To: Felix Rosencrantz <f_rosencrantz@yahoo.com>, zsh-workers@sunsite.dk
In-Reply-To: <20030208180325.69634.qmail@web10402.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

I ran valgrind with a version of zsh from around Feb 10th.
Below are the memory leaks.  The shell ran for a few days, and I gave it more
usage.

(This one is new.)
1026 bytes in 1 blocks are possibly lost in loss record 10 of 14
   at 0x40166069: realloc (vg_clientfuncs.c:273)
   by 0x81104DE: sizeline (zle_utils.c:70)
   by 0x8110506: spaceinline (zle_utils.c:81)
   by 0x810196B: doinsert (zle_misc.c:49)
   by 0x8101A87: selfinsert (zle_misc.c:71)
   by 0x80FFEA3: execzlefunc (zle_main.c:862)

This one I believe is a repeat.
324 bytes in 5 blocks are definitely lost in loss record 7 of 14
   at 0x40165A60: malloc (vg_clientfuncs.c:100)
   by 0x808617D: zalloc (mem.c:490)
   by 0x80E2312: calclist (compresult.c:1590)
   by 0x80E8940: complistmatches (complist.c:1607)
   by 0x808A5E6: runhookdef (module.c:1865)
   by 0x80E3F1B: list_matches (compresult.c:2167)

(I think this is more a termcap bug, but I get it often enough, that I thought
I would send it.)
2130 bytes in 50 blocks are definitely lost in loss record 12 of 14
   at 0x40165A60: malloc (vg_clientfuncs.c:100)
   by 0x40238EFE: (within /lib/libtermcap.so.2.0.8)
   by 0x4023988B: (within /lib/libtermcap.so.2.0.8)
   by 0x40239A13: (within /lib/libtermcap.so.2.0.8)
   by 0x40239AA6: tgetent (in /lib/libtermcap.so.2.0.8)
   by 0x80749C8: init_term (init.c:557)


-FR.

__________________________________________________
Do you Yahoo!?
Yahoo! Shopping - Send Flowers for Valentine's Day
http://shopping.yahoo.com


From zsh-workers-return-26999-mason-zsh=primenet.com.au@sunsite.dk Wed May 27 16:10:42 2009
Return-Path: <zsh-workers-return-26999-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19558 invoked from network); 27 May 2009 16:10:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 27 May 2009 16:10:39 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 41420 invoked from network); 27 May 2009 16:01:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 May 2009 16:01:31 -0000
Received: (qmail 14542 invoked by alias); 27 May 2009 16:01:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26999
Received: (qmail 14528 invoked from network); 27 May 2009 16:01:22 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 27 May 2009 16:01:22 -0000
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by bifrost.dotsrc.org (Postfix) with ESMTP id DE5388027106
	for <zsh-workers@sunsite.dk>; Wed, 27 May 2009 18:01:08 +0200 (CEST)
Received: from torch.brasslantern.com ([96.249.201.13])
 by vms173005.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KKB00KJQ86N0P70@vms173005.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Wed, 27 May 2009 10:54:28 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n4RFsM32018050	for
 <zsh-workers@sunsite.dk>; Wed, 27 May 2009 08:54:22 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n4RFsLEg018049	for zsh-workers@sunsite.dk; Wed,
 27 May 2009 08:54:21 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090527085421.ZM18048@torch.brasslantern.com>
Date: Wed, 27 May 2009 08:54:21 -0700
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@sunsite.dk
Subject: Here-docs and $(...)
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.94.2/9397/Wed May 27 16:48:50 2009 on bifrost
X-Virus-Status: Clean

Discussion on the austin-group (POSIX) list indicates that this:

echo $(
cat <<\)
hello
)
)

Should be parsed as a here-document up through the second close paren, so
that the third close-paren matches the open paren to end the substitution.

Zsh gets this wrong, ending the command substitution at the second close.
There's probably no easy fix for this, as the here-document parser is not
invoked during scanning of the command substitution.


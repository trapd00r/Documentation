From stephens@math.ruu.nl Fri Jun 21 00:16:56 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id AAA19355 for <mason@werple.mira.net.au>; Fri, 21 Jun 1996 00:16:54 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id KAA09052; Thu, 20 Jun 1996 10:04:48 -0400 (EDT)
Resent-Date: Thu, 20 Jun 1996 10:04:48 -0400 (EDT)
Date: Thu, 20 Jun 1996 16:03:06 +0200
Message-ID: <199606201403.QAA10679@bommel.math.ruu.nl>
From: Bruce Stephens <stephens@math.ruu.nl>
To: Zoltan Hidvegi <hzoli@cs.elte.hu>
CC: zsh-workers@math.gatech.edu
In-reply-to: Zoltan Hidvegi's message of Thu, 20 Jun 1996 15:06:21 +0200 (MET
	DST)
Subject: Re: Bug in beta21
References: <199606201306.PAA14427@bolyai.cs.elte.hu>
Resent-Message-ID: <"7lvOi3.0.MD2._fLon"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1380
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1481
Status: OR

>>>>> "Zoltan" == Zoltan Hidvegi <hzoli@cs.elte.hu> writes:

>> This was also in beta20.  (It's these darned bug checks that were
>> added, I never get these messages in beta19!)

> But these bugs were there anyway.  Each time you see this a
> potential memory leak may occur.

I know.  It's my British dry humour.

> I cannot reproduce it.  You may have some compctl's which may cause
> that.  Please try to reproduce it starting with zsh -f, with a
> minimal set of options.

Of course, I should have done that in the first place.  It appears
that it's not the options, but something I have in my .zshrc file to
set the titlebar of xterms.  It's something I don't like all that much
anyway (it's annoying when I'm using the scrollbar and every five
seconds zsh thwarts me because I have whatever xterm option it is
(scrollttyoutput?) set).

Here's the offending fragment:

if [[ "$TERM" = xterm || "$TERM" = aixterm ]]
then
        typeset -l titlebartime
	set-titlebar() {
		titlebartime=$(print -Pn "%D{%r}")
		print -Pn "\E]0;%~@%m   $titlebartime, %D{%A %d %B %Y}\C-g"
        }
	trap set-titlebar ALRM
	TMOUT=5
fi

I get the bug with zsh -f, and after typing in the above.  It's a bit
intermittent, but not difficult to reproduce.

-- 
Bruce Stephens			| email: B.Stephens@math.ruu.nl
Utrecht University              | telephone: +31 30 2534630
Department of Mathematics       | telefax:   +31 30 2518394
P.O. Box 80010, 3508 TA Utrecht |
The Netherlands                 |



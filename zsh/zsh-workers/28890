From zsh-workers-return-28890-mason-zsh=primenet.com.au@zsh.org Mon Mar 14 06:38:41 2011
Return-Path: <zsh-workers-return-28890-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15268 invoked by alias); 14 Mar 2011 06:38:41 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28890
Received: (qmail 501 invoked from network); 14 Mar 2011 06:38:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.7 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,
	T_TO_NO_BRKTS_FREEMAIL autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.214.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=jmkSicuyjh0Zv7gjW88Ek1EZ+2QYD39VkXotd3aQZQQ=;
        b=ZD2MksWXMGoAq8qOUbt9CSuyKWmp5C+qHAY/RjHCvz9SvPXJ4o7kqt8j9QMYmpX5HD
         88PluasBKvvyQEefQLcKdyUGetMq8xR2oIx6Kj432yxlttUkA1FZaNWtkjPxLJYWC2UR
         ZAbyxH0HwoIzgEJvGOtrMthAXd2o3NIABPNCE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=XQXI2MXtzZ8JEo9JcnimplT/YDg4ISh8nXLeUdy3L1eE/F/LcdUqZz7mFKDWE82e7M
         HXSBEypsBfxBEpIgyV2v+y9/9it+HrYp4VpxpOiKvOWP7ZbuRFM28yNz6XQzKjXUSeNK
         GcV6i8F34Z/1RwsPCG2VIiMQW8bl8Kz8oL+Hw=
MIME-Version: 1.0
Date: Sun, 13 Mar 2011 23:38:34 -0700
Message-ID: <AANLkTi=Evf1nLVkKF9pr0t_hdzuTXJNi0nA6bcD9KBdT@mail.gmail.com>
Subject: PATCH: git --pretty completion, and (new) completion for npm
From: =?ISO-8859-1?Q?Johan_Sundstr=F6m?= <oyasumi@gmail.com>
To: zsh-workers@zsh.org
Content-Type: multipart/mixed; boundary=0016e646a28e904857049e6b8fcd

--0016e646a28e904857049e6b8fcd
Content-Type: multipart/alternative; boundary=0016e646a28e90484c049e6b8fcb

--0016e646a28e90484c049e6b8fcb
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I just realized I have been using zsh for about fifteen years, and that the
sane(r) completion system of zsh 3.1 has been around for more than ten. Bot=
h
together must have saved me months of work and typing on aggregate, by
now. Time for some celebration! :-)

I took to adding documented completion for to the git completer for syntax
that is impossible to remember and hard to find in the man page; git log
--pretty (and whichever other commands support --pretty / --format) now
covers the whole lot except %w, which seemed like it would need a whole
little state machine in itself.

Also, a Completion/Unix/Command/_npm (the node package manager) completer
that delegates entirely to npm's built-in support.

Cheers!

--=20
 / Johan Sundstr=F6m, http://ecmanaut.blogspot.com/

--0016e646a28e90484c049e6b8fcb
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div>I just realized I have been using zsh for about fifteen years, and tha=
t the sane(r) completion system of zsh 3.1 has been around for more than te=
n.=A0Both together must have saved me months of work and typing on aggregat=
e, by now.=A0Time for some celebration! :-)</div>
<div><br></div><div>I took to adding documented completion for to the=A0git=
 completer for syntax that is impossible to remember and hard to find in th=
e man page; git log --pretty (and whichever other commands support --pretty=
 / --format) now covers the whole lot except %w, which seemed like it would=
 need a whole little state machine in itself.</div>
<div><br></div>Also, a Completion/Unix/Command/_npm (the node package manag=
er) completer that delegates entirely to npm&#39;s built-in support.<br cle=
ar=3D"all"><br><div>Cheers!</div><div><br>-- <br>=A0/ Johan Sundstr=F6m, <a=
 href=3D"http://ecmanaut.blogspot.com/">http://ecmanaut.blogspot.com/</a><b=
r>

</div>

--0016e646a28e90484c049e6b8fcb--
--0016e646a28e904857049e6b8fcd
Content-Type: application/octet-stream; name="_git-pretty.patch"
Content-Disposition: attachment; filename="_git-pretty.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_gl90phyf0

RnJvbSA1MGZlMzJhYTRjZGZmYWQwMDU0YTZiOGNiMDU4YjFkMmU1MzYxZDJiIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiA9P1VURi04P3E/Sm9oYW49MjBTdW5kc3RyPUMzPUI2bT89IDxv
eWFzdW1pQGdtYWlsLmNvbT4KRGF0ZTogU3VuLCAxMyBNYXIgMjAxMSAxMzoxMDowMyAtMDcwMApT
dWJqZWN0OiBbUEFUQ0ggMS8yXSBtYWtlIGdpdCAtLXByZXR0eSBjb21wbGV0aW9uIGxpc3QgZ2l0
IGNvbmZpZyBwcmV0dHkuTkFNRSBkZWZzLCBhbmQgYWxsIGZpZWxkcyBidXQgJXcKCi0tLQogQ29t
cGxldGlvbi9Vbml4L0NvbW1hbmQvX2dpdCB8ICAgODUgKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKystLS0tCiAxIGZpbGVzIGNoYW5nZWQsIDc3IGluc2VydGlvbnMoKyksIDgg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvQ29tcGxldGlvbi9Vbml4L0NvbW1hbmQvX2dpdCBi
L0NvbXBsZXRpb24vVW5peC9Db21tYW5kL19naXQKaW5kZXggYmYyMmEzYy4uY2ExZGQ1ZCAxMDA2
NDQKLS0tIGEvQ29tcGxldGlvbi9Vbml4L0NvbW1hbmQvX2dpdAorKysgYi9Db21wbGV0aW9uL1Vu
aXgvQ29tbWFuZC9fZ2l0CkBAIC01NTQzLDIzICs1NTQzLDkyIEBAIF9fZ2l0X3NldHVwX2RpZmZf
b3B0aW9ucyAoKSB7CiAgICAgJy0tb3V0cHV0W3VuZG9jdW1lbnRlZF06dW5kb2N1bWVudGVkJykK
IH0KIAorKCggJCtmdW5jdGlvbnNbX19naXRfc2V0dXBfcHJldHR5X2FsaWFzZXNdICkpIHx8Citf
X2dpdF9zZXR1cF9wcmV0dHlfYWxpYXNlcyAoKSB7CisgIGxvY2FsIHNwZWMgbmFtZSBwZm10IElG
Uz0kJ1xuJworICBsb2NhbCAtYSBhbGlhc2VzCisgIGFsaWFzZXM9KCkKKyAgZm9yIHNwZWMgaW4g
JChnaXQgY29uZmlnIC0tZ2V0LXJlZ2V4cCAnXnByZXR0eVwuJyAyPi9kZXYvbnVsbCk7IGRvCisg
ICAgbmFtZT0iJHske3NwZWMjcHJldHR5Ln0vICovfSIKKyAgICBwZm10PSIke3NwZWMjcHJldHR5
LiRuYW1lIH0iCisgICAgcGZtdD0iJChzZWQgJ3NfXChbXTpbIl1cKV9cXFwxX2cnIDw8PCIkcGZt
dCIpIiAjIGVzY2FwZXMgXSwgOiwgWywgYW5kICIKKyAgICBhbGlhc2VzKz0oJHtuYW1lfSdcOiJn
aXQgY29uZmlnIGFsaWFzIGZvclw6ICcke3BmbXR9JyInKQorICBkb25lCisgIHByZXR0eV9hbGlh
c2VzPSIkeyhwajpcbjopYWxpYXNlc30iCit9CisKKygoICQrZnVuY3Rpb25zW19fZ2l0X3NldHVw
X3ByZXR0eV9vcHRpb25zXSApKSB8fAorX19naXRfc2V0dXBfcHJldHR5X29wdGlvbnMgKCkgewor
ICBsb2NhbCBtYWluIGZtdHMKKyAgbWFpbj0nb25lbGluZVw6ImNvbW1pdC1pZHMgYW5kIHN1Ympl
Y3Qgb2YgbWVzc2FnZXMiCisgICAgICAgIHNob3J0XDoiZmV3IGhlYWRlcnMgYW5kIG9ubHkgc3Vi
amVjdCBvZiBtZXNzYWdlcyIKKyAgICAgICAgbWVkaXVtXDoibW9zdCBwYXJ0cyBvZiBtZXNzYWdl
cyIKKyAgICAgICAgZnVsbFw6ImFsbCBwYXJ0cyBvZiBjb21taXQgbWVzc2FnZXMiCisgICAgICAg
IGZ1bGxlclw6Imxpa2UgZnVsbCBhbmQgaW5jbHVkZXMgZGF0ZXMiCisgICAgICAgIGVtYWlsXDoi
dXNlIGVtYWlsIGhlYWRlcnMgbGlrZSBGcm9tIGFuZCBTdWJqZWN0IgorICAgICAgICByYXdcOiJ0
aGUgcmF3IGNvbW1pdHMiCisgICAgICAgIGZvcm1hdFw6InNwZWNpZnkgb3duIGZvcm1hdCIKKyAg
ICAgICAgJworICBfX2dpdF9zZXR1cF9wcmV0dHlfYWxpYXNlcworICBmbXRzPScKKyAgICAlSFw6
ImNvbW1pdCBoYXNoIgorICAgICVoXDoiYWJicmV2aWF0ZWQgY29tbWl0IGhhc2giCisgICAgJVRc
OiJ0cmVlIGhhc2giCisgICAgJXRcOiJhYmJyZXZpYXRlZCB0cmVlIGhhc2giCisgICAgJVBcOiJw
YXJlbnQgaGFzaGVzIgorICAgICVwXDoiYWJicmV2aWF0ZWQgcGFyZW50IGhhc2hlcyIKKyAgICAl
YW5cOiJhdXRob3IgbmFtZSIKKyAgICAlYU5cOiJhdXRob3IgbmFtZSAocmVzcGVjdGluZyAubWFp
bG1hcCkiCisgICAgJWFlXDoiYXV0aG9yIGVtYWlsIgorICAgICVhRVw6ImF1dGhvciBlbWFpbCAo
cmVzcGVjdGluZyAubWFpbG1hcCkiCisgICAgJWFkXDoiYXV0aG9yIGRhdGUgKGZvcm1hdCByZXNw
ZWN0cyAtLWRhdGU9IG9wdGlvbikiCisgICAgJWFEXDoiYXV0aG9yIGRhdGUsIFJGQzI4MjIgc3R5
bGUiCisgICAgJWFyXDoiYXV0aG9yIGRhdGUsIHJlbGF0aXZlIgorICAgICVhdFw6ImF1dGhvciBk
YXRlLCBVTklYIHRpbWVzdGFtcCIKKyAgICAlYWlcOiJhdXRob3IgZGF0ZSwgSVNPIDg2MDEgZm9y
bWF0IgorICAgICVjblw6ImNvbW1pdHRlciBuYW1lIgorICAgICVjTlw6ImNvbW1pdHRlciBuYW1l
IChyZXNwZWN0aW5nIC5tYWlsbWFwKSIKKyAgICAlY2VcOiJjb21taXR0ZXIgZW1haWwiCisgICAg
JWNFXDoiY29tbWl0dGVyIGVtYWlsIChyZXNwZWN0aW5nIC5tYWlsbWFwKSIKKyAgICAlY2RcOiJj
b21taXR0ZXIgZGF0ZSIKKyAgICAlY0RcOiJjb21taXR0ZXIgZGF0ZSwgUkZDMjgyMiBzdHlsZSIK
KyAgICAlY3JcOiJjb21taXR0ZXIgZGF0ZSwgcmVsYXRpdmUiCisgICAgJWN0XDoiY29tbWl0dGVy
IGRhdGUsIFVOSVggdGltZXN0YW1wIgorICAgICVjaVw6ImNvbW1pdHRlciBkYXRlLCBJU08gODYw
MSBmb3JtYXQiCisgICAgJWRcOiJyZWYgbmFtZXMsIGxpa2UgdGhlIC0tZGVjb3JhdGUgb3B0aW9u
IG9mIGdpdC1sb2coMSkiCisgICAgJWVcOiJlbmNvZGluZyIKKyAgICAlc1w6InN1YmplY3QiCisg
ICAgJWZcOiJzYW5pdGl6ZWQgc3ViamVjdCBsaW5lLCBzdWl0YWJsZSBmb3IgYSBmaWxlbmFtZSIK
KyAgICAlYlw6ImJvZHkiCisgICAgJUJcOiJyYXcgYm9keSAodW53cmFwcGVkIHN1YmplY3QgYW5k
IGJvZHkpIgorICAgICVOXDoiY29tbWl0IG5vdGVzIgorICAgICVnRFw6InJlZmxvZyBzZWxlY3Rv
ciwgZS5nLiwgcmVmcy9zdGFzaEB7MX0iCisgICAgJWdkXDoic2hvcnRlbmVkIHJlZmxvZyBzZWxl
Y3RvciwgZS5nLiwgc3Rhc2hAezF9IgorICAgICVnc1w6InJlZmxvZyBzdWJqZWN0IgorICAgICVD
cmVkXDoic3dpdGNoIGNvbG9yIHRvIHJlZCIKKyAgICAlQ2dyZWVuXDoic3dpdGNoIGNvbG9yIHRv
IGdyZWVuIgorICAgICVDYmx1ZVw6InN3aXRjaCBjb2xvciB0byBibHVlIgorICAgICVDcmVzZXRc
OiJyZXNldCBjb2xvciIKKyAgICAlQyguLi4pXDoiY29sb3Igc3BlY2lmaWNhdGlvbiwgYXMgZGVz
Y3JpYmVkIGluIGNvbG9yLmJyYW5jaC4qIGNvbmZpZyBvcHRpb24iCisgICAgJW1cOiJsZWZ0LCBy
aWdodCBvciBib3VuZGFyeSBtYXJrIgorICAgICVuXDoibmV3bGluZSIKKyAgICAlJVw6ImEgcmF3
ICUiCisgICAgJXgwMFw6InByaW50IGEgYnl0ZSBmcm9tIGEgaGV4IGNvZGUiJworICBwcmV0dHlf
b3B0aW9ucz0nW3ByZXR0eSBwcmludCBjb21taXQgbWVzc2FnZXNdOjpmb3JtYXQ6KCgnJHttYWlu
fSR7cHJldHR5X2FsaWFzZXN9JHtmbXRzfScpKScKK30KKworCiAoKCAkK2Z1bmN0aW9uc1tfX2dp
dF9zZXR1cF9yZXZpc2lvbl9vcHRpb25zXSApKSB8fAogX19naXRfc2V0dXBfcmV2aXNpb25fb3B0
aW9ucyAoKSB7CiAgIGxvY2FsIC1hIGRpZmZfb3B0aW9ucwogICBfX2dpdF9zZXR1cF9kaWZmX29w
dGlvbnMKKyAgX19naXRfc2V0dXBfcHJldHR5X29wdGlvbnMKIAogICByZXZpc2lvbl9vcHRpb25z
PSgKICAgICAkZGlmZl9vcHRpb25zCiAgICAgIyBUT0RPOiBmb3JtYXQgcHJldHR5IHByaW50IGZv
cm1hdCBpcyBhIGxvdCBtb3JlIGFkdmFuY2VkIHRoYW4gdGhpcy4KICAgICAjIFRPRE86IFlvdSBj
YW7igJl0IGFjdHVhbGx5IHNwZWNpZnkgLS1mb3JtYXQgd2l0aG91dCBhIGZvcm1hdC4KLSAgICAn
KC12IC0taGVhZGVyKSd7LS1wcmV0dHk9LSwtLWZvcm1hdD0tfSdbcHJldHR5IHByaW50IGNvbW1p
dCBtZXNzYWdlc106OmZvcm1hdDooKG9uZWxpbmVcOiJjb21taXQtaWRzIGFuZCBzdWJqZWN0IG9m
IG1lc3NhZ2VzIgotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvcnRcOiJmZXcgaGVhZGVy
cyBhbmQgb25seSBzdWJqZWN0IG9mIG1lc3NhZ2VzIgotICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgbWVkaXVtXDoibW9zdCBwYXJ0cyBvZiBtZXNzYWdlcyIKLSAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGZ1bGxcOiJhbGwgcGFydHMgb2YgY29tbWl0IG1lc3NhZ2VzIgotICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgZnVsbGVyXDoibGlrZSBmdWxsIGFuZCBpbmNsdWRlcyBkYXRlcyIKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsXDoidXNlIGVtYWlsIGhlYWRlcnMgbGlrZSBG
cm9tIGFuZCBTdWJqZWN0IgotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3XDoidGhlIHJh
dyBjb21taXRzIgotICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0XDoic3BlY2lmeSBv
d24gZm9ybWF0IikpJworICAgICcoLXYgLS1oZWFkZXIpJ3stLXByZXR0eT0tLC0tZm9ybWF0PS19
JHtwcmV0dHlfb3B0aW9uc30KICAgICAnLS1hYmJyZXYtY29tbWl0W3Nob3cgb25seSBwYXJ0aWFs
IHByZWZpeGVzIG9mIGNvbW1pdCBvYmplY3QgbmFtZXNdJwogICAgICctLW9uZWxpbmVbc2hvcnRo
YW5kIGZvciAtLXByZXR0eT1vbmVsaW5lIC0tYWJicmV2LWNvbW1pdF0nCiAgICAgJy0tZW5jb2Rp
bmc9LVtvdXRwdXQgbG9nIG1lc3NhZ2VzIGluIGdpdmVuIGVuY29kaW5nXTo6IDpfX2dpdF9lbmNv
ZGluZ3MnCi0tIAoxLjcuNC4xCgo=
--0016e646a28e904857049e6b8fcd
Content-Type: application/octet-stream; name=_npm
Content-Disposition: attachment; filename=_npm
Content-Transfer-Encoding: base64
X-Attachment-Id: f_gl90pnsi1

I2NvbXBkZWYgbnBtCgojIE5vZGUgUGFja2FnZSBNYW5hZ2VyIDAuMy4xNSBjb21wbGV0aW9uLCBs
ZXR0aW5nIG5wbSBkbyBhbGwgdGhlIGNvbXBsZXRpb24gd29yawoKX25wbSgpIHsKICBjb21wYWRk
IC0tICQoX25wbV9jb21wbGV0ZSAkd29yZHMpCn0KCiMgV2Ugd2FudCB0byBzaG93IGFsbCBlcnJv
cnMgb2YgYW55IHN1YnN0YW5jZSwgYnV0IG5ldmVyIHRoZSAibnBtIChub3QgKW9rIiBvbmUuCiMg
KEFsc28gZG9lc24ndCBjb25zaWRlciAiRVJSISBubyBtYXRjaCBmb3VuZCIgd29ydGggYnJlYWtp
bmcgdGhlIHRlcm1pbmFsIGZvci4pCl9ucG1fY29tcGxldGUoKSB7CiAgbG9jYWwgYXNrX25wbQog
IGFza19ucG09KG5wbSBjb21wbGV0aW9uIC0tY29sb3IgZmFsc2UgLS1sb2dsZXZlbCBlcnJvciAt
LSAkQCkKICB7IF9jYWxsX3Byb2dyYW0gbnBtICRhc2tfbnBtIDI+JjEgPiYzIFwKICB8IGVncmVw
IC12ICdeKG5wbSAobm90IHwpb2t8RVJSISBubyBtYXRjaCBmb3VuZCkkJyA+JjI7IFwKICB9IDM+
JjEKfQoKX25wbSAiJEAiCg==
--0016e646a28e904857049e6b8fcd--


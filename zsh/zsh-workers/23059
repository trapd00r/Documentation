From zsh-workers-return-23059-mason-zsh=primenet.com.au@sunsite.dk Sun Dec 17 14:58:56 2006
Return-Path: <zsh-workers-return-23059-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23258 invoked from network); 17 Dec 2006 14:58:54 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO 
	autolearn=ham version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Dec 2006 14:58:54 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 31017 invoked from network); 17 Dec 2006 14:58:48 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Dec 2006 14:58:48 -0000
Received: (qmail 27254 invoked by alias); 17 Dec 2006 14:58:45 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23059
Received: (qmail 27245 invoked from network); 17 Dec 2006 14:58:45 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Dec 2006 14:58:45 -0000
Received: (qmail 30795 invoked from network); 17 Dec 2006 14:58:45 -0000
Received: from smtp3-g19.free.fr (212.27.42.29)
  by a.mx.sunsite.dk with SMTP; 17 Dec 2006 14:58:42 -0000
Received: from localhost (evr91-1-82-227-12-160.fbx.proxad.net [82.227.12.160])
	by smtp3-g19.free.fr (Postfix) with ESMTP id 4844349F95
	for <zsh-workers@sunsite.dk>; Sun, 17 Dec 2006 15:58:42 +0100 (CET)
Date: Sun, 17 Dec 2006 15:58:41 +0100
From: "arno." <arno.@no-log.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _apt-file
Message-ID: <20061217145841.GA558@localhost.localdomain>
Mail-Followup-To: zsh-workers@sunsite.dk
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="EeQfGwPcQSOJBaQU"
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)


--EeQfGwPcQSOJBaQU
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hi,
Here a completion script suggestion for apt-file, a command used on=20
Debian.


diff -Nur zsh/Completion/Debian/Command/_apt-file zsh~/Completion/Debian/Co=
mmand/_apt-file
--- zsh/Completion/Debian/Command/_apt-file	1970-01-01 01:00:00.000000000 +=
0100
+++ zsh~/Completion/Debian/Command/_apt-file	2006-12-17 15:55:56.000000000 =
+0100
@@ -0,0 +1,55 @@
+#compdef apt-file
+
+_apt-file() {
+  local -a arguments
+  local state line cmds=20
+  arguments=3D(
+    '(--cache -c)'{--cache,-c}'[cache directory]:directory:_directories'
+    '(-v --verbose)'{-v,--verbose}'[verbose]'
+     '(--cdrom-mount -d)'{--cdrom-mount,-d}'[cdrom mount point]:directory:=
_directories'
+     '(--ignore-case -i)'{--ignore-case,-i}'[ignore case]'
+     '(--regexp -r)'{--regexp,-r}'[regular expression]'
+     '(-V --version)'{-V,--version}'[version]'
+     '(-a --architecture)'{-a,--architecture}'[architecture]:architecture:=
(alpha arm hppa hurd-i386 i386 ia64 m68k mips mipsel powerpc s390 sparc)'
+    '(-s --sources-list)'{-s,--sources-list}'[source.list file]:file:_file=
s'
+    '(-l --package-only)'{-l,--package-only}'[only display package name]'
+    '(-F --fixed-string)'{-F,--fixed-string}'[do not expand search pattern=
]'
+    '(-y --dummy)'{-y,--dummy}'[run in dummy mode]'
+    '(-h --help)'{-h,--help}'[display help screen]'
+    '1: :->cmds'
+    '*: :->args'
+  )
+    _arguments -S $arguments
+
+    case $state in
+      cmds)
+        cmds=3D(
+            'update:Resynchronize package contents'
+            'search:Search in which package file is included'
+            'list:List contents of a package'
+            'show:Alias for list'
+            'purge:remove all Contents-<ARCH>.gz files in cache directory'
+        )
+        _describe -t commands 'apt-list command' cmds && ret=3D0
+      ;;
+      args)
+        case $line[1] in
+            search)
+                _message "pattern"
+            ;;
+            list|show)
+               _deb_packages avail=20
+            ;;
+            update|purge)
+                # do nothing
+            ;;
+            *)
+                _message "command $line[1] not available"
+            ;;
+        esac
+      ;;
+    esac
+
+}
+
+_apt-file "$@"

--EeQfGwPcQSOJBaQU
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFFhVshiH9aBScBsrMRAoC5AJkBzuk87jaxFsS6ZnClFt69mBSNDQCgg6j0
ivsM03urfRgUpfDS315I+64=
=FOW+
-----END PGP SIGNATURE-----

--EeQfGwPcQSOJBaQU--


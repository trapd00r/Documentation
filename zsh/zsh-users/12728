From zsh-users-return-12728-mason-zsh=primenet.com.au@sunsite.dk Tue Mar 25 21:37:32 2008
Return-Path: <zsh-users-return-12728-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21838 invoked from network); 25 Mar 2008 21:37:20 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Mar 2008 21:37:20 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 92928 invoked from network); 25 Mar 2008 21:37:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Mar 2008 21:37:07 -0000
Received: (qmail 15123 invoked by alias); 25 Mar 2008 21:36:57 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12728
Received: (qmail 15106 invoked from network); 25 Mar 2008 21:36:56 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 25 Mar 2008 21:36:56 -0000
Received: from mail.o2.co.uk (vader.london.02.net [82.132.130.150])
	by bifrost.dotsrc.org (Postfix) with ESMTP id C9DEB8097826
	for <zsh-users@sunsite.dk>; Tue, 25 Mar 2008 22:36:52 +0100 (CET)
Received: from sc.homeunix.net (78.105.216.138) by mail.o2.co.uk (8.0.013.3) (authenticated as stephane.chazelas)
        id 47D1B7E7045A59A4; Tue, 25 Mar 2008 21:36:49 +0000
Received: from chazelas by sc.homeunix.net with local (Exim 4.69)
	(envelope-from <stephane_chazelas@yahoo.fr>)
	id 1JeGp6-0001cs-Ue; Tue, 25 Mar 2008 21:36:49 +0000
Date: Tue, 25 Mar 2008 21:36:48 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: Bart Schaefer <schaefer@brasslantern.com>
Cc: zsh-users@sunsite.dk
Subject: Re: how to get verbatim output in command substitution
Message-ID: <20080325213648.GA4898@sc.homeunix.net>
Mail-Followup-To: Bart Schaefer <schaefer@brasslantern.com>,
	zsh-users@sunsite.dk
References: <5fb1c7f40803250743u24479110v42bc00de2c2b22c9@mail.gmail.com> <20080325150126.GA4865@sc.homeunix.net> <080325100656.ZM9387@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <080325100656.ZM9387@torch.brasslantern.com>
User-Agent: Mutt/1.5.16 (2007-09-19)
X-Virus-Scanned: ClamAV 0.91.2/6392/Tue Mar 25 13:44:02 2008 on bifrost
X-Virus-Status: Clean

On Tue, Mar 25, 2008 at 10:06:56AM -0700, Bart Schaefer wrote:
> On Mar 25,  3:01pm, Stephane Chazelas wrote:
> }
> } in list contexts, command substitution is split according to the
> } $IFS special parameter.
> 
> That's not quite correct.  Zsh doesn't really have a concept of
> "list context" the way (say) Perl does.  For practical purposes it
> has what might be called "assignment context", and everything else.
> 
> If scalar assignment syntax is used, then splitting is not done and
> the resulting variable becomes scalar (even if previously declared
> as an array); otherwise splitting is done (subject to the rules of
> parameter expansion and globbing as controlled by various options).

Well, what I call "list context" (I agree it's not an official
zsh term, I kind of made it up) is anywhere expecting several
words. That can be for i in <here>, var=(<here>), cmd <here>...

Non-list contexts are for instance scalar=<here>, case <here>
in, ${var#<here>}, "<here>", $((<here>)) and so on. In those,
there's no word splitting, as of course it wouldn't make sense.

So instead of "list context", you may call it "anywhere where it
would make sense to split" if you prefer, but you get the idea...

> That's separate from the behavior of trimming trailing whitespace
> from $(...).

Yes. Though it's not whitespace, it's only NL characters (all
the NL characters even though it would have made more sense to
remove only the last one, but that's Bourne's mistake, not
zsh's)

-- 
Stéphane


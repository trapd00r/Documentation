From zsh-users-return-4744-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 09 07:13:23 2002
Return-Path: <zsh-users-return-4744-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18402 invoked from network); 9 Mar 2002 07:13:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Mar 2002 07:13:22 -0000
Received: (qmail 7199 invoked by alias); 9 Mar 2002 07:13:11 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4744
Received: (qmail 7188 invoked from network); 9 Mar 2002 07:13:10 -0000
Date: Fri, 8 Mar 2002 23:23:34 -0800
From: John Beppu <beppu@ax9.org>
To: Juhapekka Tolvanen <juhtolv@st.jyu.fi>
Cc: zsh-users@sunsite.dk, Sven Guckes <guckes@math.fu-berlin.de>,
	jw@cs.fau.de, ric@giccs.georgetown.edu
Subject: Re: Titlebar-handling with zsh and screen
Message-ID: <20020308232334.B13971@Ax9.org>
References: <20020309051250.A30021@verso.st.jyu.fi>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20020309051250.A30021@verso.st.jyu.fi>
User-Agent: Mutt/1.3.22i

[  date  ] 2002/03/09 | Saturday | 05:12 AM
[ author ] Juhapekka Tolvanen <juhtolv@st.jyu.fi> 

> So, please download my shellconfigs and check out files dot.zshrc and
> dot.screenrc and try to find bugs or other errors. They seem to work for
> me, but I am not very sure, why on earth they work.
 
To make it work with: 

    Terminal.app    (Mac OS X)
    Terminal.app    (NeXTstep)
    Stuart.app      (NeXTstep)

add the following to the case statement in your dot.zshrc 

- - - - 8< - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
vt100)
  if (( $+TERM_PROGRAM && $+TERM_PROGRAM_VERSION )) ||  # Terminal.app
     (( $+STUART ))                                     # Stuart.app
  then
      precmd()
      {
        writetitle
        print -Pn "\e]0;${TITLETEXT}\a"
      }

      preexec()
      {
        writeexectitle $1
        print -Pn '\e]0;'"${EXECTEXT1}"
        print -rn "${EXECTEXT2}"
        print -Pn '\a'
      }
  fi
;;
- - - - 8< - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -



Mac OS X and NeXTstep users will also need to add the following line
to dot.screenrc.

    termcapinfo vt100 'hs:ts=\E]0;:fs007:ds=\E]0;'

This termcapinfo line is probably wrong for everyone else, though.



PS: The NeXTstep stuff is hypothetical, because I don't have
    screen installed on my NeXT slab, and it only has an
    old zsh from 1994.

        [[ $VERSION = 2.5.02 ]]   # to be exact

    It doesn't know about %y (for putting the tty info in the
    title bar) and the preexec() function means nothing to it.

    (I tried to compile zsh-4.0.4 a while ago, but it didn't get
    very far using gcc 2.5.8....  However, it was a pleasant
    surprise when vim-6 compiled and worked.)


-- 
package wuv'apqvjgt;($_=join('',(*PgtnHcemgt))) # print map "beppu\@$_\n", qw(
=~ s/([HaP])(?!e)/ \U>$1/g;s/^.|:| (?=A)|>//g;y # cpan.org  lbox.org  binq.org
/c-z/a-u/;print"J$_\n";#$^%$^X@.^ <!-- japh --> # oss.lineo.com codepoet.org);


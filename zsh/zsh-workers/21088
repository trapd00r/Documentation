From zsh-workers-return-21088-mason-zsh=primenet.com.au@sunsite.dk Sun Apr 03 13:54:39 2005
Return-Path: <zsh-workers-return-21088-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25744 invoked from network); 3 Apr 2005 13:54:38 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Apr 2005 13:54:38 -0000
Received: (qmail 58466 invoked from network); 3 Apr 2005 13:54:31 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Apr 2005 13:54:31 -0000
Received: (qmail 19402 invoked by alias); 3 Apr 2005 13:54:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21088
Received: (qmail 19392 invoked from network); 3 Apr 2005 13:54:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 3 Apr 2005 13:54:28 -0000
Received: (qmail 58195 invoked from network); 3 Apr 2005 13:54:28 -0000
Received: from morda.newmail.ru (HELO flock1.newmail.ru) (212.48.140.150)
  by a.mx.sunsite.dk with SMTP; 3 Apr 2005 13:54:21 -0000
Received: (qmail 17512 invoked from network); 3 Apr 2005 13:35:52 -0000
Received: from unknown (HELO ?10.0.0.1?) (arvidjaar@newmail.ru@83.237.106.140)
  by smtpd.newmail.ru with SMTP; 3 Apr 2005 13:35:52 -0000
From: Andrey Borzenkov <arvidjaar@newmail.ru>
To: zsh-workers@sunsite.dk
Subject: Re: zsh-4_2-patches
Date: Sun, 3 Apr 2005 17:54:19 +0400
User-Agent: KMail/1.7.2
References: <200504011051.j31ApiMa016381@news01.csr.com> <200504031554.45226.arvidjaar@newmail.ru>
In-Reply-To: <200504031554.45226.arvidjaar@newmail.ru>
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200504031754.19932.arvidjaar@newmail.ru>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On Sunday 03 April 2005 15:54, Andrey Borzenkov wrote:
> On Friday 01 April 2005 14:51, Peter Stephenson wrote:
> > I've ported the following changes to the 4.2 code line.  This is really
> > just bug fixes, including documentation improvements; I haven't
> > considered porting any enhancements.  We may be ready to make another
> > release there.  If you have any further suggestions, please let me know
> > by about this time on Monday.
>
> Zsh in current Mandrake (4.2.4) crashes when completing rsync. I can
> currently reproduce it by using the following (_rsync is from current CVS):
>
> {pts/3}% zsh -f
> localhost% autoload -U compinit; compinit
> localhost% bindkey '^I' complete-word
> localhost% zmodload zsh/complist
> localhost% bindkey -M menuselect / accept-and-infer-next-history
> localhost% setopt nolistambiguous
> localhost% zstyle ':completion:*' menu select=0
> localhost% zstyle ':completion:*:rsync:*' hosts ftp.uio.no ftp.sunet.se
>
> Now start completion by using e.g.
>
> rsync rsync://ftp.ioTAB
>
> and continue pressing "/" (you need to select some from list) until you get
> to rsync://ftp.uio.no/fedora-linux-core/updates/1/i386 and display list of
> files.
>
> Pressing cursor UP at this point crashes zsh.
>

it also crashes in current CVS

#0  0xb7c7bb78 in singledraw () at /home/bor/src/zsh/Src/Zle/complist.c:1564
#1  0xb7c7c68d in complistmatches (dummy=0xb7cc0ab0, dat=0xbfffea80)
    at /home/bor/src/zsh/Src/Zle/complist.c:1677
#2  0x080939c3 in runhookdef (h=0xb7cc0ab0, d=0xbfffea80)
    at /home/bor/src/zsh/Src/module.c:1865
#3  0xb7cbe3f3 in list_matches (dummy=0xb7cf2e40, dummy2=0x0)
    at /home/bor/src/zsh/Src/Zle/compresult.c:2173
#4  0x080939c3 in runhookdef (h=0xb7cf2e40, d=0x0)
    at /home/bor/src/zsh/Src/module.c:1865
#5  0xb7cdcd7c in zrefresh () at /home/bor/src/zsh/Src/Zle/zle_refresh.c:740
#6  0xb7c7db6d in domenuselect (dummy=0xb7cc0a74, dat=0xbfffee70)
    at /home/bor/src/zsh/Src/Zle/complist.c:2134
#7  0x08093963 in runhookdef (h=0xb7cc0a74, d=0xbfffee70)
    at /home/bor/src/zsh/Src/module.c:1859
#8  0xb7caa7e4 in after_complete (dummy=0xb7cf2e7c, dat=0xbfffef08)
    at /home/bor/src/zsh/Src/Zle/compcore.c:496
#9  0x080939c3 in runhookdef (h=0xb7cf2e7c, d=0xbfffef08)
    at /home/bor/src/zsh/Src/module.c:1865
#10 0xb7ce1af5 in docomplete (lst=0)
    at /home/bor/src/zsh/Src/Zle/zle_tricky.c:835
#11 0xb7ce0367 in completeword (args=0xb7cf30bc)
    at /home/bor/src/zsh/Src/Zle/zle_tricky.c:208
#12 0xb7ce0251 in completecall (args=0xb7cf30bc)
    at /home/bor/src/zsh/Src/Zle/zle_tricky.c:184
#13 0xb7cd4134 in execzlefunc (func=0xb7cf0fd0, args=0xb7cf30bc)
    at /home/bor/src/zsh/Src/Zle/zle_main.c:1053
#14 0xb7cd37b1 in zlecore () at /home/bor/src/zsh/Src/Zle/zle_main.c:828
#15 0xb7cd3e0e in zleread (lp=0x80dfe80, rp=0x0, flags=3, context=0)
    at /home/bor/src/zsh/Src/Zle/zle_main.c:982
#16 0x0807f241 in inputline () at /home/bor/src/zsh/Src/input.c:278
#17 0x0807f0f8 in ingetc () at /home/bor/src/zsh/Src/input.c:214
#18 0x0807642a in ihgetc () at /home/bor/src/zsh/Src/hist.c:240
#19 0x08086345 in gettok () at /home/bor/src/zsh/Src/lex.c:627
#20 0x08085bff in yylex () at /home/bor/src/zsh/Src/lex.c:343
#21 0x0809e152 in parse_event () at /home/bor/src/zsh/Src/parse.c:449
#22 0x0807c312 in loop (toplevel=1, justonce=0)
    at /home/bor/src/zsh/Src/init.c:128
#23 0x0807ed51 in zsh_main (argc=2, argv=0xbffff374)
    at /home/bor/src/zsh/Src/init.c:1284
#24 0x08052696 in main (argc=2, argv=0xbffff374)
    at /home/bor/src/zsh/Src/main.c:93

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQFCT/WLR6LMutpd94wRAuAeAJ9xvE2j1i665xC+mjziGi28HEckXQCcCao4
h1eaZZFNs/mdY1i2rr2M7ls=
=cJ64
-----END PGP SIGNATURE-----


From zsh-workers-request@math.gatech.edu Wed Jan 28 10:44:45 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 7905 invoked from network); 28 Jan 1998 10:44:44 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 28 Jan 1998 10:44:44 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id FAA22793;
	Wed, 28 Jan 1998 05:19:16 -0500 (EST)
Resent-Date: Wed, 28 Jan 1998 05:19:16 -0500 (EST)
Date: Wed, 28 Jan 1998 13:21:34 +0300 (MSK)
From: Andrej Borsenkow <borsenkow.msk@sni.de>
X-Sender: bor@itsrm1
Reply-To: borsenkow.msk@sni.de
To: Zsh workers mailing list <zsh-workers@math.gatech.edu>
Subject: PATCH: zsh-3.1.2-zefram3+: LD_RUN_PATH for libzsh.so
Message-ID: <Pine.SV4.3.95.980128131643.1327B-100000@itsrm1>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"Vbwnp1.0.4a5.ZOmpq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3739
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

So far nobody objected to using LD_RUN_PATH with libzsh.so. As libzsh.so
seems to be needed only on SVR4 anyway, I provide this patch (it is on top
of Zefram patch 3714). 

-------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 252 01 05
SNI ITS Moscow			Tel:   +7 (095) 252 13 88

NERV:  borsenkow.msk		E-Mail: borsenkow.msk@sni.de
-------------------------------------------------------------------------
--- zsh-3.1.2-zefram3+/Src/Makefile.in.org	Fri Jan 16 16:20:50 1998
+++ zsh-3.1.2-zefram3+/Src/Makefile.in	Wed Jan 28 13:15:45 1998
@@ -104,12 +104,12 @@
 LIBZSH = libzsh-$(VERSION).so
 NIBZSH =
 
-LFLAGS = -R$(libdir)/zsh
-NFLAGS =
+LDRUNPATH = LD_RUN_PATH=$(libdir)/zsh
+NDRUNPATH =
 
 zsh: $(@L@IBZSH) $(@L@STMP) $(MAIN_OBJS)
 	rm -f $@
-	$(LINK) $(@L@FLAGS) $(MAIN_OBJS) $(@L@LIST) $(@L@IBZSH) $(LIBS)
+	$(@L@DRUNPATH) $(LINK) $(MAIN_OBJS) $(@L@LIST) $(@L@IBZSH) $(LIBS)
 
 $(LIBZSH): $(LIBOBJS) $(NSTMP)
 	rm -f $@




From zsh-users-return-9251-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 05 17:50:37 2005
Return-Path: <zsh-users-return-9251-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14568 invoked from network); 5 Aug 2005 17:50:34 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Aug 2005 17:50:34 -0000
Received: (qmail 6172 invoked from network); 5 Aug 2005 17:50:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Aug 2005 17:50:28 -0000
Received: (qmail 24953 invoked by alias); 5 Aug 2005 17:50:22 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9251
Received: (qmail 24943 invoked from network); 5 Aug 2005 17:50:21 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Aug 2005 17:50:21 -0000
Received: (qmail 5163 invoked from network); 5 Aug 2005 17:50:21 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 5 Aug 2005 17:50:16 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T7294617afb0a6c8d012e8@MAILSWEEPER01.csr.com> for <zsh-users@sunsite.dk>;
 Fri, 5 Aug 2005 18:48:08 +0100
Received: from csr.com ([10.102.144.127]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 5 Aug 2005 18:49:50 +0100
To: zsh-users@sunsite.dk
Subject: Re: complete paths after non-space 
In-reply-to: <7c737f3005080510222d6ecc4d@mail.gmail.com> 
References: <7c737f3005080216113bd158da@mail.gmail.com> <200508031854.j73IsdnN006237@news01.csr.com> <7c737f3005080313407fc2cdfa@mail.gmail.com> <6249.1123141858@csr.com> <7c737f3005080413226cb67cd4@mail.gmail.com> <7374.1123234276@csr.com> <7c737f3005080510222d6ecc4d@mail.gmail.com>
Comments: In-reply-to Deliverable Mail <deliverable@gmail.com>
   message dated "Fri, 05 Aug 2005 10:22:44 -0700."
Date: Fri, 05 Aug 2005 18:50:15 +0100
Message-ID: <4662.1123264215@csr.com>
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 05 Aug 2005 17:49:50.0643 (UTC) FILETIME=[13F75030:01C599E6]
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4

Deliverable Mail wrote:
> Got 4.2.5, setopt magicequalsubst, pathname completion works after =3D,
> but not after : in a PATH.  Is there another option governing colons?

I don't think so.  It works for me anywhere the shell finds
  [anything]=[anything]:[stuff]

Run C-x ?, go up a line and look at the debug output
file.  It should contain a (rather arbitrarily extracted) bit like:

+_dispatch:62> [[ '' != '(all|*patterns*)' ]]
+_dispatch:63> str=-value-,PATH,-default-
+_dispatch:64> [[ -n -value-,PATH,-default- ]]
+_dispatch:65> service=-value-,PATH,-default- 
+_dispatch:66> i=_dir_list
+_dispatch:67> _compskip=default 
+_dispatch:68> eval _dir_list
+(eval):1> _dir_list
+_dir_list:10> local 'sep=:' dosuf suf
+_dir_list:12> [[ '' == '-(s*|S)' ]]
+_dir_list:20> compset -P '*:'
+_dir_list:21> compset -S ':*'
+_dir_list:21> suf=: 
+_dir_list:23> [[ -n '' ]]
+_dir_list:26> suf=( ) 
+_dir_list:29> _directories -r ': /\t\t\-'

The compset's are the key to stripping off the parts of the colon path
that aren't wanted.

If it's never getting into _dir_list, see what's happening when
it enters _value (that handles completion for values of parameters
or anything that looks like one).  It should be getting there if
magic_equal_subst is having its effect.


pws


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


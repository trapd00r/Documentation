From zsh-users-return-5390-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 25 23:45:14 2002
Return-Path: <zsh-users-return-5390-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22538 invoked from network); 25 Sep 2002 23:45:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Sep 2002 23:45:13 -0000
Received: (qmail 20921 invoked by alias); 25 Sep 2002 23:44:46 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5390
Received: (qmail 20905 invoked from network); 25 Sep 2002 23:44:40 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020925234333.ZM6021@candle.brasslantern.com>
Date: Wed, 25 Sep 2002 23:43:33 +0000
In-Reply-To: <20020925103319.GC30361@freepuppy.bellavista.cz>
Comments: In reply to Roman Neuhauser <neuhauser@bellavista.cz>
        "history expansion" (Sep 25, 12:33pm)
References: <20020925103319.GC30361@freepuppy.bellavista.cz>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Roman Neuhauser <neuhauser@bellavista.cz>,
   zsh users <zsh-users@sunsite.dk>
Subject: Re: history expansion
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 25, 12:33pm, Roman Neuhauser wrote:
} Subject: history expansion
}
} is there a setopt (or another way) that would allow me to do stuff like
} this:
} 
}     % !!:s/!!3/!-2:s,foo,bar,/
} 
} without the need to use variables?

So what you want to do is, take the entire line from two commands earlier,
do a foo -> bar replacement in that, and then use that as the replacement
for the third argument of the immediately preceding command?

I'd type C-p C-a M-f M-f M-f M-d !-2:s,foo,bar, and hit enter.

There isn't any option or other setting that allows history expansions to
be nested in that way.  The best you can do is to expand each reference as
you go along, by using magic-space or a completion binding; e.g. the above
could be obtained by typing something like

	!!3/!-2:s,foo,bar/<TAB><C-a>!!:s/<RET>

(Replace control-a with escape shift-i for vi mode.  Hmm, I guess that one
might require csh_junkie_history, too.)

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


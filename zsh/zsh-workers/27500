From zsh-workers-return-27500-mason-zsh=primenet.com.au@zsh.org Fri Dec 11 18:42:11 2009
Return-Path: <zsh-workers-return-27500-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26119 invoked by alias); 11 Dec 2009 18:42:11 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27500
Received: (qmail 15508 invoked from network); 11 Dec 2009 18:42:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (proxy.melb.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <200912111841.nBBIfJDp007685@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: Joel Bernstein <joel@fysh.org>, zsh-workers@zsh.org
Subject: Re: segfault due to chpwd_function
In-reply-to: <0742D8B8-F67E-48F7-BCCC-3F578A78D4B7@fysh.org>
References: <0742D8B8-F67E-48F7-BCCC-3F578A78D4B7@fysh.org>
Comments: In-reply-to Joel Bernstein <joel@fysh.org>
   message dated "Fri, 11 Dec 2009 17:36:47 +0000."
Date: Fri, 11 Dec 2009 18:41:18 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 11 Dec 2009 18:41:22.0157 (UTC) FILETIME=[890BA9D0:01CA7A91]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.71.1.134

Joel Bernstein wrote:
> I found a scenario leading to a segfault caused by a chpwd_function.

Your function run with the current zsh development version gives me
(when I change directory):

prompt_chpwd:2: command not found: zgit_isgit

and an error message from the prompt system.

Are you able to post a self-contained function that shows the problem,
with no external depenencies?

Thanks

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


From zsh-workers-return-8495-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Nov 02 15:11:40 1999
Return-Path: <zsh-workers-return-8495-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2413 invoked from network); 2 Nov 1999 15:11:39 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 Nov 1999 15:11:39 -0000
Received: (qmail 5222 invoked by alias); 2 Nov 1999 15:11:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8495
Received: (qmail 5214 invoked from network); 2 Nov 1999 15:11:31 -0000
Date: Tue, 2 Nov 1999 16:11:30 +0100 (MET)
Message-Id: <199911021511.QAA31790@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Tanaka Akira's message of 02 Nov 1999 23:20:46 +0900
Subject: Re: PATCH: _value


Tanaka Akira wrote:

> ...
>
> is27e1u11% A='Doc/z<TAB>
> ->
> is27e1u11% A='Docz 
> 
> and
> 
> is27e1u11% A='Doc/<TAB>
> ->
> is27e1u11% A='Doc
> 
> and
> 
> is27e1u11% LDFLAGS=-LDoc/<TAB>
> ->
> is27e1u11% LDFLAGS=-LDoc
> 
> These slashes shouldn't be removed...

Yep. Wrong cline tested... Disgusting.

Bye
 Sven

diff -u oldsrc/Zle/compcore.c Src/Zle/compcore.c
--- oldsrc/Zle/compcore.c	Tue Nov  2 14:52:25 1999
+++ Src/Zle/compcore.c	Tue Nov  2 16:08:58 1999
@@ -1887,7 +1887,7 @@
 		p = bld_parts(ppre, ppl, ppl, &lp);
 
 	    if (lp->prefix && !(line->flags & (CLF_SUF | CLF_MID)) &&
-		!p->llen && !p->wlen && !p->olen) {
+		!lp->llen && !lp->wlen && !lp->olen) {
 		Cline lpp;
 
 		for (lpp = lp->prefix; lpp->next; lpp = lpp->next);
@@ -1952,7 +1952,7 @@
 	    for (p = lp = cp_cline(pline, 1); lp->next; lp = lp->next);
 
 	if (lp->prefix && !(line->flags & (CLF_SUF | CLF_MID)) &&
-	    !p->llen && !p->wlen && !p->olen) {
+	    !lp->llen && !lp->wlen && !lp->olen) {
 	    Cline lpp;
 
 	    for (lpp = lp->prefix; lpp->next; lpp = lpp->next);

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-5579-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Mar 01 13:40:38 1999
Return-Path: <zsh-workers-return-5579-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 26933 invoked from network); 1 Mar 1999 13:40:37 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 1 Mar 1999 13:40:37 -0000
Received: (qmail 29463 invoked by alias); 1 Mar 1999 13:40:10 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5579
Received: (qmail 29456 invoked from network); 1 Mar 1999 13:40:08 -0000
Date: Mon, 1 Mar 1999 14:39:23 +0100 (MET)
Message-Id: <199903011339.OAA15258@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Mon, 1 Mar 1999 16:24:51 +0300
Subject: RE: PATCH: Re: pws-10 RE: zsh-3.1.5-pws-9: _path_files  and symbolic links


Andrej Borsenkow wrote:

> Should it not be tested in _path_files? What if I want to use other array
> rather than cdpath in other function? It is really hard to always remember
> to test it before using.

I thought about it, too, but decided against it because:

- cdpath is special: if empty or unset, `.' is used
- in other cases you will have no tests, if the array containing the
  dirs is empty you probably won't want the files in `.'; I use `-W'
  only for `cd', so I'm not sure what people would like to have here
  (producing no matches due to an empty `-W'-array looked like a good
  hint that something went wrong); I could be convinced otherwise,
  though (the only other place where `-W' is currently used is `_mh'
  which I don't use (since I don't use `mh'), so I have to ask: would
  the automatic-use-current-dir behavior be correct there?)

> And, BTW, is it not a typo in _path_files:
> 
>   liniepath=''
> 
> I'd expect it to be linepath (not that it helps much).

Yes, thanks.

Bye
 Sven

diff -u oc/Core/_path_files Completion/Core/_path_files
--- oc/Core/_path_files	Mon Mar  1 13:13:16 1999
+++ Completion/Core/_path_files	Mon Mar  1 14:31:07 1999
@@ -150,7 +150,7 @@
   # If the string does not start with a `~' we don't remove a prefix from the
   # string.
 
-  liniepath=''
+  linepath=''
   realpath=''
 
   if [[ "$str[1]" = / ]]; then

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


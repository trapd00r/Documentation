From zsh-workers-return-14253-mason-zsh=primenet.com.au@sunsite.dk Tue May 08 09:37:40 2001
Return-Path: <zsh-workers-return-14253-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15124 invoked from network); 8 May 2001 09:37:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 May 2001 09:37:39 -0000
Received: (qmail 24603 invoked by alias); 8 May 2001 09:37:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14253
Received: (qmail 24590 invoked from network); 8 May 2001 09:37:31 -0000
Message-ID: <Tc0a88d01536464c3f9@mailsweeper01.cambridgesiliconradio.com>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Termcap saga again
Date: Tue, 08 May 2001 10:36:59 +0100
From: Peter Stephenson <pws@csr.com>

SunOS 5.8 is giving me

../../../Src/Modules/termcap.c: In function `scantermcap':
../../../Src/Modules/termcap.c:327: `boolcodes' undeclared (first use in this function)
../../../Src/Modules/termcap.c:327: (Each undeclared identifier is reported only once
../../../Src/Modules/termcap.c:327: for each function it appears in.)
../../../Src/Modules/termcap.c:336: `numcodes' undeclared (first use in this function)
../../../Src/Modules/termcap.c:345: `strcodes' undeclared (first use in this function)

It seems HAVE_CURSES_H isn't getting defined --- it's generating warnings
about redefined macros, is this enough to stop configure recognising it?
There's no error message:
  /usr/include/widec.h:38: warning: `getwc' redefined
  /usr/include/iso/wchar_iso.h:337: warning: this is the location of the previous definition
  /usr/include/widec.h:39: warning: `putwc' redefined
  /usr/include/iso/wchar_iso.h:340: warning: this is the location of the previous definition
  /usr/include/widec.h:40: warning: `getwchar' redefined
  /usr/include/iso/wchar_iso.h:338: warning: this is the location of the previous definition
  /usr/include/widec.h:41: warning: `putwchar' redefined
  /usr/include/iso/wchar_iso.h:341: warning: this is the location of the previous definition

However, TERM_H_NEEDS_CURSES_H is getting defined.  This should be enough
to allow us to set HAVE_CURSES_H.  I tried doing that in termcap.h and
terminfo.h and it's compiling (haven't dared try it) but I'm now getting

../../../Src/Modules/termcap.c: In function `bin_echotc':
../../../Src/Modules/termcap.c:136: warning: passing arg 3 of `tputs' from
incompatible pointer type
../../../Src/Modules/termcap.c:139: warning: passing arg 1 of `tputs' makes
pointer from integer without a cast
../../../Src/Modules/termcap.c:139: warning: passing arg 3 of `tputs' from
incompatible pointer type

which I find a bit alarming.  However, the arg 3 messages are because I
have `int (*)(char)' as that argument's type whereas we're using `int
(*)(int)', while the arg 1 message appears because tgoto is only defined if
__STDC__ isn't.  So this doesn't seem really to be our fault

Doesn't make we wildly enthusiastic about terminal handling systems in
general, frankly.

The inet_* stuff is a bit weird, here, too, but it's still compiling.  I
haven't got time to look at this in any detail at the moment.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Unit 300, Science Park, Milton Road,
Cambridge, CB4 0XL, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


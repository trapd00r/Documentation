From zsh-workers-return-14599-mason-zsh=primenet.com.au@sunsite.dk Thu May 31 07:15:48 2001
Return-Path: <zsh-workers-return-14599-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2225 invoked from network); 31 May 2001 07:15:47 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 31 May 2001 07:15:47 -0000
Received: (qmail 20739 invoked by alias); 31 May 2001 07:15:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14599
Received: (qmail 20727 invoked from network); 31 May 2001 07:15:39 -0000
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Date: Thu, 31 May 2001 09:14:42 +0200 (MET DST)
Message-Id: <200105310714.JAA10225@beta.informatik.hu-berlin.de>
To: zsh-workers@sunsite.dk
Subject: PATCH: matchers in _multi_parts

I wonder why we didn't see before that _multi_parts didn't always use
the match specs it got.

Bye
  Sven

Index: Completion/Base/Utility/_multi_parts
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Base/Utility/_multi_parts,v
retrieving revision 1.3
diff -u -r1.3 _multi_parts
--- Completion/Base/Utility/_multi_parts	2001/05/29 17:54:08	1.3
+++ Completion/Base/Utility/_multi_parts	2001/05/31 07:15:16
@@ -91,10 +91,10 @@
   else
     # No exact match, see how many strings match what's on the line.
 
-    builtin compadd -O tmp1 - "${(@)${(@)matches%%${sep}*}:#}"
+    builtin compadd -O tmp1 -M "r:|${sep}=* r:|=* $matcher" - "${(@)${(@)matches%%${sep}*}:#}"
 
     [[ $#tmp1 -eq 0 && -n "$_comp_correct" ]] &&
-      compadd -O tmp1 - "${(@)${(@)matches%%${sep}*}:#}"
+      compadd -O tmp1 -M "r:|${sep}=* r:|=* $matcher" - "${(@)${(@)matches%%${sep}*}:#}"
 
     if [[ $#tmp1 -eq 1 ]]; then
 

-- 
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


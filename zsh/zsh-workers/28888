From zsh-workers-return-28888-mason-zsh=primenet.com.au@zsh.org Fri Mar 11 19:46:01 2011
Return-Path: <zsh-workers-return-28888-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6888 invoked by alias); 11 Mar 2011 19:46:01 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28888
Received: (qmail 8210 invoked from network); 11 Mar 2011 19:45:59 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-6.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_HI,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at spf-1.redhat.com designates 209.132.183.28 as permitted sender)
Message-ID: <4D7A72E8.5070909@redhat.com>
Date: Fri, 11 Mar 2011 12:07:20 -0700
From: Eric Blake <eblake@redhat.com>
Organization: Red Hat
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.13) Gecko/20101209 Fedora/3.1.7-0.35.b3pre.fc14 Lightning/1.0b3pre Mnenhy/0.8.3 Thunderbird/3.1.7
MIME-Version: 1.0
To: zsh-workers@zsh.org
Subject: bug in ${##} expansion
X-Enigmail-Version: 1.1.2
OpenPGP: url=http://people.redhat.com/eblake/eblake.gpg
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="------------enig7499193CCD8457686E6DA557"
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25

--------------enig7499193CCD8457686E6DA557
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

POSIX requires ${#parameter} to expand to the length of parameter as a
string.  It also requires that ${parameter#word} substitution have a
word (that is, ${parameter#} with a missing word is a zsh extension).

Therefore, this should output 2, not 11:

zsh -c 'set 1 2 3 4 5 6 7 8 9 10 11; echo ${##}'

--=20
Eric Blake   eblake@redhat.com    +1-801-349-2682
Libvirt virtualization library http://libvirt.org


--------------enig7499193CCD8457686E6DA557
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Public key at http://people.redhat.com/eblake/eblake.gpg
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBCAAGBQJNenLoAAoJEKeha0olJ0NqxfQIAJLPUNHxX5Gf8OEkP8BsK3kh
FUJOwGF9Yfmkr9AEKi8sBWWSX1o7y+flPbTcOqLEpIcQJtTGoQUFUqppcBoeGkOC
4h5BJl6xHBpEpjmItu2YYFSD3xjhB6OwnHfOq1DQkf2y+7Gmpm4rmMnAq9Wec6FI
t3kn4QJjgs7VHYUqm3uTHM20zT1OgUATSC+m5ULIpXw1GPRRgxmnDgcrr1L88P/6
3sut9utNvmdQAPuDq+tn33fu05kOAF6jw99EeS8Fve4rOem1fUVioWzvTFW6HRYz
TJym9nLFutJ6CZdOVtH/WeUOWCdTpwsspKROUi9mK0ZiI2nsX9w28Zw1f+kOSdQ=
=8B1O
-----END PGP SIGNATURE-----

--------------enig7499193CCD8457686E6DA557--


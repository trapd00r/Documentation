From zsh-workers-return-18454-mason-zsh=primenet.com.au@sunsite.dk Sat Apr 19 16:39:59 2003
Return-Path: <zsh-workers-return-18454-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12130 invoked from network); 19 Apr 2003 16:39:58 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 19 Apr 2003 16:39:58 -0000
Received: (qmail 14814 invoked by alias); 19 Apr 2003 16:39:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18454
Received: (qmail 14807 invoked from network); 19 Apr 2003 16:39:50 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 19 Apr 2003 16:39:50 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [80.218.50.185] by sunsite.dk (MessageWall 1.0.8) with SMTP; 19 Apr 2003 16:39:48 -0000
Received: from localhost (osiris [127.0.0.1])
	by chains.ch (Postfix) with ESMTP id C3F581DCAB
	for <zsh-workers@sunsite.dk>; Sat, 19 Apr 2003 18:39:58 +0200 (CEST)
Received: by chains.ch (Postfix, from userid 1000)
	id B87B81DCA7; Sat, 19 Apr 2003 18:39:56 +0200 (CEST)
Date: Sat, 19 Apr 2003 18:39:56 +0200
From: Istvan Sebestyen <istvan@chains.ch>
To: zsh-workers@sunsite.dk
Subject: Completion for `sub-options'
Message-ID: <20030419163956.GA25361@chains.ch>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-2
Content-Disposition: inline
User-Agent: Mutt/1.3.27i
X-Scanned-By: AMaViS 0.3.12

Hello there!

I began to write a zsh completion for a little httpd. I saw then, that it isn't as easy as i thought, because the program hasn't regular options, it has `sub-options', too. The example would be:

zsh%  program --errordoc 404=/var/www/foobar.html

First it should make the completion for the error code, what is trivial to make (401, 404, etc...). The second thing, it should put a `=' after the error-code completion and then look for  _files -g '*.(html|htm|php|etc...)'. 

I looked into several completions of programs that have such options, too (i.e. like mount), but i couldn't make it work.  If someone can give me an easy solution for this problem, I would be very thankful.

Thanks,
Istvan Sebestyen


From zsh-workers-return-28030-mason-zsh=primenet.com.au@zsh.org Sun Jun 13 14:39:38 2010
Return-Path: <zsh-workers-return-28030-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22325 invoked by alias); 13 Jun 2010 14:39:38 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28030
Received: (qmail 27526 invoked from network); 13 Jun 2010 14:39:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at alea.gnuu.de designates 83.246.114.63 as permitted sender)
X-DKIM: Sendmail DKIM Filter v2.5.2 uucp.gnuu.de D937D48803A
DKIM-Signature: v=1; a=rsa-sha256; c=simple/simple; d=gnuu.de; s=banki;
	t=1276438877; i=@alea.gnuu.de; bh=KS2j6w238eZVmh5942UxGz9I5nmWPvtvP
	FjT3UKeIp0=; h=To:From:Subject:Date:Message-ID:Mime-Version:
	 Content-Type:Content-Transfer-Encoding:Sender; b=gLOD7zSMqummkVKxg
	g1ut56d4/DCId8HaM33tZCBBvL+odCRBM9Xlq7hHYiK9Ofyaqzig0WZHh6wkrqGOgND
	a/o9DkVLjQ7CdTRb9ZsZ+Z+MZPXk24X8BBU6MW2t/+C5FFUFkK2RJDZb5ZBEcUK4NED
	iLq74oDLtZa84OAdKT6o=
To: zsh-workers@zsh.org
Path: not-for-mail
From: =?UTF-8?Q?J=C3=B6rg?= Sommer <joerg@alea.gnuu.de>
Newsgroups: local.mailinglist.zsh
Subject: [bug] zcompile failes to compile
Date: Sun, 13 Jun 2010 12:36:26 +0000 (UTC)
Lines: 39
Message-ID: <slrni19k6a.hil.joerg@alea.gnuu.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Trace: alea.gnuu.de 1276432586 2732 192.168.0.5 (13 Jun 2010 12:36:26 GMT)
X-Complaints-To: usenet@alea.gnuu.de
User-Agent: slrn/pre1.0.0-18 (Linux)
Sender: news <news@alea.gnuu.de>

Hi,

% cat /tmp/test.sh
#  -*- mode: sh -*-

echo $ZSH_VERSION

# with this line zcompile works
# alias ag=true
# but with this line zcompile fails
alias ag='LC_ALL=C true'

if false
then
    agd()
    {
        true
    }
else
    alias agd=ag
fi

zcompile $0

% zsh -f /tmp/test.sh
4.3.10

% zsh-beta -f /tmp/test.sh
4.3.10-dev-1-cvs0603
/tmp/test.sh:12: parse error near `()'
/tmp/test.sh:zcompile:20: can't read file: /tmp/test.sh

Removing the LC_ALL=C from the alias ag or running zcompile at the
beginnig of the file works, but not the file above.

Bye, JÃ¶rg
-- 
Angenehme Worte sind nie wahr,
wahre Worte sind nie angenehm.


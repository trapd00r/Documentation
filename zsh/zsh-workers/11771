From zsh-workers-return-11771-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 06 09:56:46 2000
Return-Path: <zsh-workers-return-11771-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1498 invoked from network); 6 Jun 2000 09:56:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jun 2000 09:56:45 -0000
Received: (qmail 17602 invoked by alias); 6 Jun 2000 09:56:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11771
Received: (qmail 17591 invoked from network); 6 Jun 2000 09:56:30 -0000
Date: Tue, 6 Jun 2000 11:56:06 +0200 (MET DST)
Message-Id: <200006060956.LAA08540@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Mon, 5 Jun 2000 15:03:04 +0000
Subject: Re: PATCH: complete rpm --{resign,addsign} in local


Bart Schaefer wrote:

> ...
> 
> I don't think it's incumbent upon _arguments to handle this without help;
> that's exactly what the state machine is for.  It just has to be possible
> to tell _arguments that other option letters are allowed in the string of
> options even after one that has a following argument, so that it can go
> to the right next state.

Yep. Good.

> This could be done by something like `_arguments -s+ ...' if it's too
> awful to come up with still more OPTSPEC syntax (which I'm beginning to
> believe that it is).

I'll have a look...

> ...
> 
> Of course the compadd in _rpm needs a `-S ""' added to it.  Which reminds
> me ... I tried changing that compadd to be:
> 
> 	_alternative ... 'prefixes:URL prefix:compadd \ ftp://'
> 
> to try to force a leading space onto the command line, but what got put
> on the command line *included* the backslash.  What's up with that?  It
> works to put a backslashed space in the pattern for '_files -g ...'.

_path_files does it's own quoting. With compadd you get the usual
normalised quoted form. You can use -P ' ' or -i ' ' to prepend the
unquoted space, but of course, you'll then get one space per
completion attempt because following completions can't know that the
space came from a previous completion.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


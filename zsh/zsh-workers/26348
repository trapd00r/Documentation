From zsh-workers-return-26348-mason-zsh=primenet.com.au@sunsite.dk Sat Jan 17 18:24:10 2009
Return-Path: <zsh-workers-return-26348-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25892 invoked from network); 17 Jan 2009 18:24:07 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Jan 2009 18:24:07 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 42976 invoked from network); 17 Jan 2009 18:24:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Jan 2009 18:24:03 -0000
Received: (qmail 21456 invoked by alias); 17 Jan 2009 18:23:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26348
Received: (qmail 21443 invoked from network); 17 Jan 2009 18:23:57 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 17 Jan 2009 18:23:57 -0000
Received: from QMTA09.westchester.pa.mail.comcast.net (qmta09.westchester.pa.mail.comcast.net [76.96.62.96])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 92BEF8028ACA
	for <zsh-workers@sunsite.dk>; Sat, 17 Jan 2009 19:23:54 +0100 (CET)
Received: from OMTA02.westchester.pa.mail.comcast.net ([76.96.62.19])
	by QMTA09.westchester.pa.mail.comcast.net with comcast
	id 4cJC1b00A0QuhwU59iPvmQ; Sat, 17 Jan 2009 18:23:55 +0000
Received: from smtp.klanderman.net ([98.217.254.247])
	by OMTA02.westchester.pa.mail.comcast.net with comcast
	id 4iPu1b00L5M2Np63NiPvH6; Sat, 17 Jan 2009 18:23:55 +0000
Received: from lwm.klanderman.net (unknown [192.168.100.50])
	by smtp.klanderman.net (Postfix) with ESMTP id 8E419B30148
	for <zsh-workers@sunsite.dk>; Sat, 17 Jan 2009 13:23:53 -0500 (EST)
Received: by lwm.klanderman.net (Postfix, from userid 500)
	id 65A7C9FC5E5; Sat, 17 Jan 2009 13:23:53 -0500 (EST)
From: Greg Klanderman <gak@klanderman.net>
To: zsh-workers@sunsite.dk
Subject: Re: changing bindings in isearch mode?
Reply-To: gak@klanderman.net
Date: Sat, 17 Jan 2009 13:23:53 -0500
In-Reply-To: <20090117175659.1a37c70f@pws-pc> (Peter Stephenson's message of "Sat, 17 Jan 2009 17:56:59 +0000")
Message-ID: <m3priln64m.fsf@klanderman.net>
User-Agent: Gnus/5.1007 (Gnus v5.10.7) XEmacs/21.4.17 (linux)
References: <18801.32959.693653.15539@gargle.gargle.HOWL>
	<20090117175659.1a37c70f@pws-pc>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.92.1/8873/Sat Jan 17 04:33:31 2009 on bifrost
X-Virus-Status: Clean


>>>>> Peter Stephenson <p.w.stephenson@ntlworld.com> writes:

> Absolutely, but it's a very tricky change to push the behaviour into
> functions.  Translation:  it's not clear anyone knows how to do this and
> it's very clear no one has the time to find out.

I don't think you need (or even want) to push the behavior into
functions; the menu-select widget already uses the "menuselect"
keymap.  It looks like it's just casing on the commands that are
bound, not executing them necessarily, and this seems to also be how
the isearch code is written, using tests of the form

        cmd == Th(z_****)

Just glancing over the code, it would appear not too hard to create a
keymap for isearch, add an isearch-exit widget, and add a case for it
in doisearch.  Does that seem like a reasonable solution?

thanks,
Greg


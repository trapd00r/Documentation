From zsh-workers-return-14460-mason-zsh=primenet.com.au@sunsite.dk Wed May 23 16:43:41 2001
Return-Path: <zsh-workers-return-14460-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24968 invoked from network); 23 May 2001 16:43:40 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 May 2001 16:43:40 -0000
Received: (qmail 7621 invoked by alias); 23 May 2001 16:43:32 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14460
Received: (qmail 7608 invoked from network); 23 May 2001 16:43:31 -0000
Date: Wed, 23 May 2001 12:42:11 -0400
From: Clint Adams <clint@zsh.org>
To: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
Cc: zsh-workers@sunsite.dk, Paul Ackersviller <paulda@alumni.uwo.ca>
Subject: Re: 64-bit sparc instructions
Message-ID: <20010523124211.A26945@dman.com>
References: <1010523044128.ZM23100@candle.brasslantern.com> <Pine.SV4.4.33.0105231332520.3756-100000@itsrm2.mow.siemens.ru>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
In-Reply-To: <Pine.SV4.4.33.0105231332520.3756-100000@itsrm2.mow.siemens.ru>; from Andrej.Borsenkow@mow.siemens.ru on Wed, May 23, 2001 at 01:38:23PM +0400

> So, if the above change really helped, it was just because zsh was
> actually compiled in 32-bit mode :-) We simply need better detection if
> LFS really works. Could you provide testcase suitable for putting in
> configure?

Incidentally, I have the same problems with --disable-lfs.

I'd be more inclined to blame this on the compiler, but trying
64-bit compilation on an UltraSPARC III running Debian and
gcc version 3.0 20010426 (Debian prerelease), and statically-linking:

cd Test ; make check
make[1]: Entering directory `/tmp/obj/Test'
if test -n "gcc-3.0 -mcpu=ultrasparc -m64"; then \
  cd .. && \
  make MODDIR=`pwd`/Test/Modules install.modules > /dev/null; \
fi
for f in ../../zsh-4.0.1-pre-5/Test/*.ztst; do \
  ../Src/zsh +Z -f ../../zsh-4.0.1-pre-5/Test/ztst.zsh $f; \
done
../../zsh-4.0.1-pre-5/Test/A01grammar.ztst: starting.
This test hangs the shell when it fails...
../../zsh-4.0.1-pre-5/Test/A01grammar.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/A02alias.ztst: starting.
../../zsh-4.0.1-pre-5/Test/A02alias.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/A03quoting.ztst: starting.
../../zsh-4.0.1-pre-5/Test/A03quoting.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/A04redirect.ztst: starting.
../../zsh-4.0.1-pre-5/Test/A04redirect.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/A05execution.ztst: starting.
../../zsh-4.0.1-pre-5/Test/A05execution.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/B01cd.ztst: starting.
../../zsh-4.0.1-pre-5/Test/B01cd.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/C01arith.ztst: starting.
../../zsh-4.0.1-pre-5/Test/C01arith.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/C02cond.ztst: starting.
../../zsh-4.0.1-pre-5/Test/C02cond.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/C03traps.ztst: starting.
This test takes at least three seconds...
This test, too, takes at least three seconds...
../../zsh-4.0.1-pre-5/Test/C03traps.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/C04funcdef.ztst: starting.
../../zsh-4.0.1-pre-5/Test/C04funcdef.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/D01prompt.ztst: starting.
../../zsh-4.0.1-pre-5/Test/D01prompt.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/D02glob.ztst: starting.
*** /tmp/zsh.ztst.out.10870	Wed May 23 16:32:13 2001
--- /tmp/zsh.ztst.tout.10870	Wed May 23 16:32:13 2001
***************
*** 101,107 ****
  1:  [[ BAR = (bar|(#i)foo) ]]
  0:  [[ FOO = (bar|(#i)foo) ]]
  0:  [[ Modules = (#i)*m* ]]
! 0:  [[ fooGRUD = (#i)(bar|(#I)foo|(#i)rod)grud ]]
  1:  [[ FOOGRUD = (#i)(bar|(#I)foo|(#i)rod)grud ]]
  0:  [[ readme = (#i)readme~README|readme ]]
  0:  [[ readme = (#i)readme~README|readme~README ]]
--- 101,108 ----
  1:  [[ BAR = (bar|(#i)foo) ]]
  0:  [[ FOO = (bar|(#i)foo) ]]
  0:  [[ Modules = (#i)*m* ]]
! 1:  [[ fooGRUD = (#i)(bar|(#I)foo|(#i)rod)grud ]]
! Test failed:  [[ fooGRUD = (#i)(bar|(#I)foo|(#i)rod)grud ]]
  1:  [[ FOOGRUD = (#i)(bar|(#I)foo|(#i)rod)grud ]]
  0:  [[ readme = (#i)readme~README|readme ]]
  0:  [[ readme = (#i)readme~README|readme~README ]]
***************
*** 151,154 ****
  1:  [[ path/testy = *((#s)|/)test((#e)|/)* ]]
  1:  [[ path/testy/ohyes = *((#s)|/)test((#e)|/)* ]]
  1:  [[ path/atest/ohyes = *((#s)|/)test((#e)|/)* ]]
! 0 tests failed.
--- 152,155 ----
  1:  [[ path/testy = *((#s)|/)test((#e)|/)* ]]
  1:  [[ path/testy/ohyes = *((#s)|/)test((#e)|/)* ]]
  1:  [[ path/atest/ohyes = *((#s)|/)test((#e)|/)* ]]
! 1 tests failed.
Test ../../zsh-4.0.1-pre-5/Test/D02glob.ztst failed: output differs from expected as shown above for:
  globtest globtests
Was testing: zsh globbing
../../zsh-4.0.1-pre-5/Test/D02glob.ztst: test failed.
../../zsh-4.0.1-pre-5/Test/D03procsubst.ztst: starting.
../../zsh-4.0.1-pre-5/Test/D03procsubst.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/D04parameter.ztst: starting.
../../zsh-4.0.1-pre-5/Test/D04parameter.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/D05array.ztst: starting.
../../zsh-4.0.1-pre-5/Test/D05array.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/D06subscript.ztst: starting.
../../zsh-4.0.1-pre-5/Test/D06subscript.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/E01options.ztst: starting.
../../zsh-4.0.1-pre-5/Test/E01options.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/E02xtrace.ztst: starting.
../../zsh-4.0.1-pre-5/Test/E02xtrace.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/V01zmodload.ztst: starting.
Warning: zsh/example not linked: not checking autoloading
../../zsh-4.0.1-pre-5/Test/V01zmodload.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/V02zregexparse.ztst: starting.
../../zsh-4.0.1-pre-5/Test/V02zregexparse.ztst: all tests successful.
../../zsh-4.0.1-pre-5/Test/Y01completion.ztst: starting.
Test ../../zsh-4.0.1-pre-5/Test/Y01completion.ztst failed: non-zero status from preparation code:
  comptestinit -z $ZTST_testdir/../Src/zsh
../../zsh-4.0.1-pre-5/Test/Y01completion.ztst: test failed.
../../zsh-4.0.1-pre-5/Test/Y02compmatch.ztst: starting.
Test ../../zsh-4.0.1-pre-5/Test/Y02compmatch.ztst failed: non-zero status from preparation code:
  comptestinit -z $ZTST_testdir/../Src/zsh
../../zsh-4.0.1-pre-5/Test/Y02compmatch.ztst: test failed.
../../zsh-4.0.1-pre-5/Test/Y03arguments.ztst: starting.
Test ../../zsh-4.0.1-pre-5/Test/Y03arguments.ztst failed: bad status 1, expected 0 from:
 tst_arguments ':desc1:(arg1)'
 comptest $'tst \t\C-wa\t\C-war\t\C-warg\t\C-warg1\t\C-wr\t\C-wx\t \ty \t'
Error output:
comptesteval:4: command not found: zpty
comptesteval:5: command not found: zpty
comptest:2: command not found: zpty
comptest:3: command not found: zpty
Was testing: one non-option argument
../../zsh-4.0.1-pre-5/Test/Y03arguments.ztst: test failed.
rm -rf Modules .zcompdump
make[1]: Leaving directory `/tmp/obj/Test'


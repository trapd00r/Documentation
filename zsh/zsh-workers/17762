From zsh-workers-return-17762-mason-zsh=primenet.com.au@sunsite.dk Fri Oct 04 16:08:52 2002
Return-Path: <zsh-workers-return-17762-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4967 invoked from network); 4 Oct 2002 16:08:51 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Oct 2002 16:08:51 -0000
Received: (qmail 11362 invoked by alias); 4 Oct 2002 16:08:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17762
Received: (qmail 11350 invoked from network); 4 Oct 2002 16:08:34 -0000
Date: Fri, 4 Oct 2002 18:08:29 +0200
From: Frank v Waveren <fvw@var.cx>
To: zsh-workers@sunsite.dk
Subject: [PATCH] Allow gid 0 in compaudit
Message-ID: <1033747042SCQ.fvw@jareth.var.cx>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="7JfCtLOvnd9MIVvH"
Content-Disposition: inline
User-Agent: Mutt/1.3.28i


--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Attached is a patch to have compaudit (called by compaudit) not
complain about directories owned by wheel, is there any chance of
having it applied? I can't think of any systems where gid 0 can't be
trusted...

I'd appreciate it if someone could give it a quick check, I'm pretty
sure it's right but the syntax is still slightly disorienting to me.
(it just adds the not group 0 check after the f:g+w:)

-- 
Frank v Waveren                                      Fingerprint: 0EDB 8787
fvw@[var.cx|stack.nl|dse.nl|chello.nl] ICQ#10074100     09B9 6EF5 6425 B855
Public key: hkp://wwwkeys.pgp.net/fvw@var.cx            7179 3036 E136 B85D

--7JfCtLOvnd9MIVvH
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="zsh-4.0.6-compaudit-wheel.diff"

diff -urN zsh-4.0.6/Completion/compaudit zsh-fvw/Completion/compaudit
--- zsh-4.0.6/Completion/compaudit	Fri Aug  9 15:30:07 2002
+++ zsh-fvw/Completion/compaudit	Fri Oct  4 18:04:50 2002
@@ -102,11 +102,11 @@
 #   (including zwc files)
 
 if [[ $GROUP == $LOGNAME && ( -z $GROUPMEM || $GROUPMEM == $LOGNAME ) ]]; then
-  _i_wdirs=( ${^fpath}(Nf:g+w:^g:${GROUP}:,f:o+w:,^u0u${EUID})
-             ${^fpath}/..(Nf:g+w:^g:${GROUP}:,f:o+w:,^u0u${EUID}) )
+  _i_wdirs=( ${^fpath}(Nf:g+w:^g:${GROUP}:g0,f:o+w:,^u0u${EUID})
+             ${^fpath}/..(Nf:g+w:^g:${GROUP}:g0,f:o+w:,^u0u${EUID}) )
 else
-  _i_wdirs=( ${^fpath}(Nf:g+w:,f:o+w:,^u0u${EUID})
-             ${^fpath}/..(Nf:g+w:,f:o+w:,^u0u${EUID}) )
+  _i_wdirs=( ${^fpath}(Nf:g+w:^g0,f:o+w:,^u0u${EUID})
+             ${^fpath}/..(Nf:g+w:^g0,f:o+w:,^u0u${EUID}) )
 fi
 
 if [[ -f /etc/debian_version ]]

--7JfCtLOvnd9MIVvH--


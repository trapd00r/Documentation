From zsh-workers-request@math.gatech.edu  Tue Dec  5 04:38:41 1995
Received: from math.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with SMTP id EAA16689 for <mason@werple.mira.net.au>; Tue, 5 Dec 1995 04:38:37 +1100 (EST)
Received: by math.gatech.edu (5.x/SMI-SVR4)
	id AA14588; Mon, 4 Dec 1995 12:15:33 -0500
Resent-Date: Mon, 04 Dec 1995 18:12:27 +0100
Old-Return-Path: <pws@hydra.ifh.de>
Message-Id: <9512041712.AA23824@hydra.ifh.de>
To: Matt Chidambaram <mc@prismtech.co.uk>
Cc: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: Re: problems with $WATCH / $WATCHFMT 
In-Reply-To: "mc@prismtech.co.uk"'s message of "Mon, 04 Dec 1995 15:01:00 MET."
             <Pine.OSF.3.91.951204143311.561C-100000@alpha3.prismtech.co.uk> 
Date: Mon, 04 Dec 1995 18:12:27 +0100
From: Peter Stephenson <pws@hydra.ifh.de>
Resent-Message-Id: <"gcyWk2.0.sZ3.qoomm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/670
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

mc@prismtech.co.uk wrote:
> in those xterms that i dont work in very often - nothing happens until i 
> press return every so often (ie every couple of hours); in these xterms - 
> when i get the very similar login/out information as the other xterms - 
> its great - except for the fact that the login/out times are effectively 
> (plus/minus a minute) the time of day when i pressed return in that 
> xterm/shell on that machine.

A problem is that after someone's logged out, they're not in utmp any
more, so the real logout time is impossible to get.  The login time
should be OK, however ---- assuming the user is still logged on ---
otherwise it's a bug.

> is there any way of getting these login/out pieces of information to 
> auto-interrupt my shell - without me having to press return before it 
> displays the information? - say by setting an environemnt variable.

That's hard:  you'd actually have to get the shell itself to wake up
and check every now and then.  You might be best doing it some other
way, like a script running in the background.

> after reading the FAQ and doing as it says about copying ypclnt.h and 
> altering the yp_all() signature's third parameter; i still get errors 
> concerning the zle_tricky.c call to yp_all();
> 
> i eventually altered the call from within zle_tricky.c ....
> from:
>     yp_all(domain, PASSWD_MAP, &cb);
> to:
>     yp_all(domain, PASSWD_MAP, cb);

That won't do:  it definitely has to be &cb.  The problems will start
when you try completing user names.  It sounds like your problem is
with including the right version of ypclnt.h.  Maybe I didn't put all
the instructions in the FAQ.  At worst, change the #include for
ypclnt.h to 
#include "my_ypclnt.h"
where my_ypclnt.h is the local modified copy of the header with the
corrected prototype.

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


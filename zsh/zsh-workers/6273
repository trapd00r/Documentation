From zsh-workers-return-6273-mason-zsh=primenet.com.au@sunsite.auc.dk Wed May 12 15:37:23 1999
Return-Path: <zsh-workers-return-6273-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7940 invoked from network); 12 May 1999 15:37:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 12 May 1999 15:37:22 -0000
Received: (qmail 14242 invoked by alias); 12 May 1999 15:37:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6273
Received: (qmail 14231 invoked from network); 12 May 1999 15:36:59 -0000
Message-Id: <199905121536.AAA05484@pop1.ngy.3web.ne.jp>
From: Tatsuo Furukawa <frkwtto@osk3.3web.ne.jp>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: suppress warning on HP-UX (zsh-3.1.5-pws-18)
Mime-Version: 1.0 (generated by tm-edit 7.52)
Content-Type: text/plain; charset=US-ASCII
Date: Thu, 13 May 1999 00:38:54 +0900
X-Dispatcher: impost version 0.99i (Apr. 6, 1997)
Lines: 45


Hi, zsh developers.  I made a patch for zsh-3.1.5-pws-18.


In HP-UX, compiler generates many warnings.  Such as:

cc -Aa -D_HPUX_SOURCE -c -I.  -DHAVE_CONFIG_H -O  -o signals.o signals.c
cpp: "stdsyms.h", line 10: warning 2001: Redefinition of macro _INCLUDE_POSIX_SOURCE.
cpp: "stdsyms.h", line 12: warning 2001: Redefinition of macro _INCLUDE_XOPEN_SOURCE.
cpp: "stdsyms.h", line 14: warning 2001: Redefinition of macro _INCLUDE_HPUX_SOURCE.
cc -Aa -D_HPUX_SOURCE -c -I.  -DHAVE_CONFIG_H -O  -o signames.o signames.c
cpp: "stdsyms.h", line 10: warning 2001: Redefinition of macro _INCLUDE_POSIX_SOURCE.
cpp: "stdsyms.h", line 12: warning 2001: Redefinition of macro _INCLUDE_XOPEN_SOURCE.
cpp: "stdsyms.h", line 14: warning 2001: Redefinition of macro _INCLUDE_HPUX_SOURCE.
cc -Aa -D_HPUX_SOURCE -c -I.  -DHAVE_CONFIG_H -O  -o subst.o subst.c
cpp: "stdsyms.h", line 10: warning 2001: Redefinition of macro _INCLUDE_POSIX_SOURCE.
cpp: "stdsyms.h", line 12: warning 2001: Redefinition of macro _INCLUDE_XOPEN_SOURCE.

These macros are defined in HP-UX automatically if _HPUX_SOURCE macro
is defined. (Please refer /usr/include/sys/stdsyms.h)

And zsh defines _HPUX_SOURCE macro.  So these macro doesn't have to
define at zsh side.

Here is the patch:

diff -ur zsh-3.1.5-pws-18.orig/Src/system.h zsh-3.1.5-pws-18/Src/system.h
--- zsh-3.1.5-pws-18.orig/Src/system.h  Mon Mar  1 18:46:51 1999
+++ zsh-3.1.5-pws-18/Src/system.h       Wed May 12 12:08:50 1999
@@ -27,12 +27,6 @@
  *
  */

-#ifdef __hpux
-# define _INCLUDE_POSIX_SOURCE 1
-# define _INCLUDE_XOPEN_SOURCE 1
-# define _INCLUDE_HPUX_SOURCE 1
-#endif
-
 #ifdef sinix
 # define _XPG_IV 1
 #endif

-- 
Tatsuo Furukawa  (frkwtto@osk3.3web.ne.jp)


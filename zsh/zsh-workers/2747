From zsh-workers-request@euclid.skiles.gatech.edu Wed Jan 08 13:56:32 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 14823 invoked from network); 8 Jan 1997 13:56:30 -0000
Received: from euclid.skiles.gatech.edu (root@130.207.146.50)
  by coral.primenet.com.au with SMTP; 8 Jan 1997 13:56:30 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id HAA20618; Wed, 8 Jan 1997 07:43:34 -0500 (EST)
Resent-Date: Wed, 8 Jan 1997 07:43:34 -0500 (EST)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199701081243.NAA03849@bolyai.cs.elte.hu>
Subject: Re: patch for RLIM size in configure.in
In-Reply-To: <19970108041829.13748.qmail@primenet.com.au> from "gwing@primenet.com.au" at "Jan 8, 97 03:18:29 pm"
To: gwing@primenet.com.au
Date: Wed, 8 Jan 1997 13:43:10 +0100 (MET)
Cc: zsh-workers@math.gatech.edu
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL27 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"2PPmv2.0.525.sPvqo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2747
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

gwing@primenet.com.au wrote:
> Heyla,
> my system (NetBSD) needs this patch to correctly determine the size of
> RLIM_T . You need to run autoconf after applying to regenerate "configure"

A better patch included below.  Use this instead of Geoff's.

Zoltan


*** configure.in	1997/01/06 20:41:03	3.1.1.6
--- configure.in	1997/01/08 12:34:05
***************
*** 555,560 ****
--- 555,563 ----
  AC_CACHE_CHECK(if rlim_t is quad_t,
  zsh_cv_rlim_t_is_quad_t,
  [AC_TRY_RUN([
+ #ifdef HAVE_SYS_TIME_H
+ #include <sys/time.h>
+ #endif
  #include <sys/resource.h>
  main(){struct rlimit r;exit(sizeof(r.rlim_cur) <= sizeof(long));}],
  zsh_cv_rlim_t_is_quad_t=yes,
***************
*** 565,571 ****
  else
    AC_CACHE_CHECK(if the rlim_t is unsigned,
    zsh_cv_type_rlim_t_is_unsigned,
!   [AC_TRY_RUN([#include <sys/resource.h>
    main(){struct rlimit r;r.rlim_cur=-1;exit(r.rlim_cur<0);}],
    zsh_cv_type_rlim_t_is_unsigned=yes,
    zsh_cv_type_rlim_t_is_unsigned=no,
--- 568,578 ----
  else
    AC_CACHE_CHECK(if the rlim_t is unsigned,
    zsh_cv_type_rlim_t_is_unsigned,
!   [AC_TRY_RUN([
! #ifdef HAVE_SYS_TIME_H
! #include <sys/time.h>
! #endif
! #include <sys/resource.h>
    main(){struct rlimit r;r.rlim_cur=-1;exit(r.rlim_cur<0);}],
    zsh_cv_type_rlim_t_is_unsigned=yes,
    zsh_cv_type_rlim_t_is_unsigned=no,


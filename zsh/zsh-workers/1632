From mason@werple.net.au Sat Jul 13 02:44:14 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id CAA20201 for <mason@werple.mira.net.au>; Sat, 13 Jul 1996 02:44:12 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA15221; Fri, 12 Jul 1996 12:39:05 -0400 (EDT)
Resent-Date: Fri, 12 Jul 1996 12:39:05 -0400 (EDT)
From: Geoff Wing <mason@werple.net.au>
Message-Id: <199607121638.QAA20104@werple.net.au>
Subject: Found Bug, also Zle display bug with LONG expansions
To: zsh-workers@math.gatech.edu (zsh-list)
Date: Sat, 13 Jul 1996 02:38:14 +1000 (EST)
In-Reply-To: <960712080348.ZM14569@candle.brasslantern.com> from "Bart Schaefer" at Jul 12, 96 08:03:44 am
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"fUg762.0.hj3.e-dvn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1632
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1880
Status: O

:On Jul 12,  9:39pm, Geoff Wing wrote:
:} I used to have it so automargin didn't matter but it didn't work on about
:} one out of hundreds of terminal types (some type of xterm, SGI I think(?)).
:Yeah, I can imagine xwsh having problems with this.
:} And it simplified the code by an enormous amount.  However, you can now
:} use COLUMNS to fake/force column width (what a bonus :-)
:"Now"?  If I set COLUMNS to less than the actual width of the window,
:it behaves the same way it did when I turned off automargin.  (I suppose
:it would work if I both narrowed columns and changed the termcap to
:claim automargin was off ....)  Or does "now" mean after you send a
:patch?

Well, it used to work.  (That was quite a while ago)


Back to LONG LINE stuff:
The reason it leaves lines at the top is because of the way it does half
screen scrolls - I'm changing this to be dependant on your BAUD: if you
have a slow link, then you stay with half screen scrolls; if your BAUD
is higher then you get single line scrolls - looks much nicer.

You'll get >.... if there is text before the start of the screen.
You'll get <.... if there is text after the end of the screen (new)

BUGS:
 1. the first bug must be my fault since it's a refresh bug - I will be 
     looking into it (only noticed it checking this other Long line stuff)

 2. when I do "echo **/*<TAB>" (producing lots and lots of args)
    then <RETURN>  I get a core-dump (clean 3.0-pre2) (dies on strlen()
    in taddstr).  If other people can't reproduce I can send more info.

#2  0x48ab8 in taddlist (l=0x8f5a4) at text.c:506
#3  0x487d8 in getsimptext (cmd=0x8f584) at text.c:442
#4  0x47f15 in gettext2 (n=0x8f584) at text.c:203
#5  0x47bbf in getjobtext (n=0x8f584) at text.c:134

(gdb) print *n
$2 = {next = 0x0, last = 0x0, dat = 0x0}

-- 
Mason [G.C.W]  mason@werple.mira.net.au    "Hurt...Agony...Pain...LOVE-IT"



From zsh-workers-return-28574-mason-zsh=primenet.com.au@zsh.org Thu Jan 06 06:02:05 2011
Return-Path: <zsh-workers-return-28574-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17524 invoked by alias); 6 Jan 2011 06:02:05 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28574
Received: (qmail 14449 invoked from network); 6 Jan 2011 06:02:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Workers <zsh-workers@zsh.org>
Cc:  <zsh@benizi.com>
Subject: [PATCH] Completion/Unix/Commands/_ri: missed format change
Date: Thu,  6 Jan 2011 01:01:42 -0500
Message-Id: <1294293702-11969-1-git-send-email-zsh@benizi.com>
X-Mailer: git-send-email 1.7.3.1
In-Reply-To: <1293748882-3197-1-git-send-email-raorn@altlinux.org>
References: <1293748882-3197-1-git-send-email-raorn@altlinux.org>

Comment from workers/28557 said:
"plain" formatter was removed, use "bs" formatter [...]

But the "Newer Style Ruby 1.9.2 RI" section was still using '-f plain'
(so, not completing anything for me).
---
 Completion/Unix/Command/_ri |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/Completion/Unix/Command/_ri b/Completion/Unix/Command/_ri
index 7474374..feb10ec 100644
--- a/Completion/Unix/Command/_ri
+++ b/Completion/Unix/Command/_ri
@@ -32,7 +32,7 @@ if [[ "$state" = ri-name ]]; then
     ri_ext=yaml
   elif "ruby${words[1]#ri}" -rrdoc/ri -rrdoc/ri/store -e 1 >/dev/null 2>&1; then
     # Newer-style Ruby 1.9.2 RI
-    ri_dirs=( ${(f)"$(_call_program ri-names "$words[1]" ${(kv)opt_args[(I)-d|--doc-dir|--((no-|)(system|site|gems|home)|standard-docs)]} --list-doc-dirs -f plain -T)"} )
+    ri_dirs=( ${(f)"$(_call_program ri-names "$words[1]" ${(kv)opt_args[(I)-d|--doc-dir|--((no-|)(system|site|gems|home)|standard-docs)]} --list-doc-dirs -f bs -T)"} )
     ri_ext=ri
   else
     # New-style Ruby 1.9+ RI
-- 
1.7.3.1


From zsh-workers-return-27660-mason-zsh=primenet.com.au@zsh.org Thu Feb 04 14:22:42 2010
Return-Path: <zsh-workers-return-27660-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23901 invoked by alias); 4 Feb 2010 14:22:42 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27660
Received: (qmail 18256 invoked from network); 4 Feb 2010 14:22:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW,SPF_HELO_PASS autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Message-Id: <201002041422.o14EMH33011623@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh workers <zsh-workers@zsh.org>
Subject: Re: Quoting problems with _zip (unzip) completer
In-reply-to: <alpine.LNX.2.01.1002040835330.2729@hp.internal>
References: <237967ef0908031315u72fa3661i17ff7f0107b85b9c@mail.gmail.com> <200908040850.n748oxlc011862@news01.csr.com> <20090817215819.796e9416@pws-pc> <237967ef1002021716l101c98b7obc758fb200a117e8@mail.gmail.com> <20100203220958.26bc25fe@pws-pc> <20100204113745.0a9a8234@news01> <alpine.LNX.2.01.1002040835330.2729@hp.internal>
Comments: In-reply-to "Benjamin R. Haskell" <zsh@benizi.com>
   message dated "Thu, 04 Feb 2010 09:15:46 -0500."
Date: Thu, 04 Feb 2010 14:22:16 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 04 Feb 2010 14:22:18.0278 (UTC) FILETIME=[74E43460:01CAA5A5]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-22-10 (www.mailcontrol.com) on 10.68.0.155

"Benjamin R. Haskell" wrote:
> Yes.  That works for me for the Zsh pattern problem.  Still exploring 
> the zipinfo problem.

Good; I didn't look at the latter, it sounded less like it needed low
level hackery.

There's definitely room in the market for someone to write a zsh
completion function how-to, even on top of the documentation, the
existing functions, and From Bash to Z-Shell.  The use of quoted
strings direct from the command line vs. unquoted strings directly
representing file names could do with some description.

> > Index: Completion/Unix/Command/_zip
> > +      if [[ $zipfile !=  $_zip_cache_list ]]; then
> > +        _zip_cache_name="$zipfile"
> 
> Shouldn't the first line there be $_zip_cache_list be $_zip_cache_name?  
> (The problem was there before your patch [line 119 prepatch, 128 post])  
> Otherwise I don't think it'll ever cache the list.

Yes, I'll tweak that in case this change ever gets submitted.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


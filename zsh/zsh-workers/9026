From zsh-workers-return-9026-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Dec 13 21:30:27 1999
Return-Path: <zsh-workers-return-9026-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1453 invoked from network); 13 Dec 1999 21:30:26 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Dec 1999 21:30:26 -0000
Received: (qmail 7216 invoked by alias); 13 Dec 1999 21:30:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9026
Received: (qmail 7209 invoked from network); 13 Dec 1999 21:30:15 -0000
To: zsh-workers <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: Add jobdirs association to parameter module 
In-reply-to: "Felix Rosencrantz"'s message of "Sun, 12 Dec 1999 21:55:10 PST."
             <19991213055510.1992.qmail@web1306.mail.yahoo.com> 
Date: Mon, 13 Dec 1999 21:31:10 +0000
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <E11xd2r-0008N9-00.1999-12-13-21-30-13@cmailg2.svr.pol.co.uk>

Felix Rosencrantz wrote:
> This proposed patch adds a new association to the parameter module
> called jobdirs.  This provides an association with job numbers and the
> directories in which the jobs were started.
> @@ -1889,8 +1969,7 @@
>             if (def->hsetfn)
>                 def->pm->sets.hfn = def->hsetfn;
>         } else {
> -           if (!(def->pm = createparam(def->name, def->flags | PM_HIDE |
> -                                       PM_REMOVABLE)))
> +           if (!(def->pm = createparam(def->name, def->flags | PM_HIDE)))
>                 return 1;
>             def->pm->sets.afn = def->setfn;
>             def->pm->gets.afn = def->getfn;

What is this chunk for?  It's going to mean the parameters are permanently
stuck in the parameter table, even if the module is unloaded, and if the
module is reloaded the parameters won't be.  Sven just fixed this a week or
so ago.

It's a shame we didn't have more specific names for parameters, since the
parameter module is quiet heavily used in completion, so there is quite a
lot of name space pollution.  They stop being special if made local, but
it's still a problem.  The ksh mechanism ${.param.jobdirs} would be
excellent for this.

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>


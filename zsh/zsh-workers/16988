From zsh-workers-return-16988-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 16 07:46:57 2002
Return-Path: <zsh-workers-return-16988-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7571 invoked from network); 16 Apr 2002 07:46:56 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Apr 2002 07:46:56 -0000
Received: (qmail 29927 invoked by alias); 16 Apr 2002 07:46:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16988
Received: (qmail 29916 invoked from network); 16 Apr 2002 07:46:46 -0000
From: Sven Wischnowsky <wischnow@berkom.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <15547.54953.493292.443243@wischnow.berkom.de>
Date: Tue, 16 Apr 2002 09:45:45 +0200
To: zsh-workers@sunsite.dk
Subject: PATCH: _message -e
X-Mailer: VM 6.95 under 21.5 (patch 3) "asparagus" XEmacs Lucid


Here is a patch I prepared some time ago to make more calls to
_message use th -e option so that matches can be faked there.

I was also thinking about making calls to _arguments use `:' before
the specs, but there just too many uses. Uff.


Bye
  Sven

Index: Completion/Base/Utility/_store_cache
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Base/Utility/_store_cache,v
retrieving revision 1.1
diff -u -r1.1 _store_cache
--- Completion/Base/Utility/_store_cache	2 Apr 2001 11:11:36 -0000	1.1
+++ Completion/Base/Utility/_store_cache	16 Apr 2002 07:44:27 -0000
@@ -15,7 +15,7 @@
     else
       mkdir -p "$_cache_dir"
       if [[ ! -d "$_cache_dir" ]]; then
-        _message "Couldn't create cache-dir $_cache_dir"
+        _message "couldn't create cache-dir $_cache_dir"
         return 1
       fi
     fi
Index: Completion/Debian/Type/_deb_packages
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Type/_deb_packages,v
retrieving revision 1.2
diff -u -r1.2 _deb_packages
--- Completion/Debian/Type/_deb_packages	14 Dec 2001 18:03:58 -0000	1.2
+++ Completion/Debian/Type/_deb_packages	16 Apr 2002 07:44:27 -0000
@@ -47,7 +47,7 @@
   fi
 
   [[ "$command" = (installed|uninstalled|avail) ]] || {
-    _message "_deb_packages:unknown command: $command"
+    _message "unknown command: $command"
     return
   }
 
Index: Completion/Redhat/Command/_rpm
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Redhat/Command/_rpm,v
retrieving revision 1.5
diff -u -r1.5 _rpm
--- Completion/Redhat/Command/_rpm	27 Aug 2001 19:33:15 -0000	1.5
+++ Completion/Redhat/Command/_rpm	16 Apr 2002 07:44:27 -0000
@@ -237,11 +237,11 @@
             compadd -M 'm:{a-z}={A-Z}' -S '\}' - \
                     "${(@)${(@f)$(_call_program tags rpm --querytags 2> /dev/null)}#RPMTAG_}" && ret=0
       else
-        _message 'RPM format'
+        _message -e formats 'RPM format'
       fi
       ;;
     capability)
-      _message 'RPM capability'
+      _message -e capabilities 'RPM capability'
       ;;
     relocate)
       if compset -P '*='; then
Index: Completion/Unix/Command/_cvs
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_cvs,v
retrieving revision 1.11
diff -u -r1.11 _cvs
--- Completion/Unix/Command/_cvs	17 Mar 2002 05:15:35 -0000	1.11
+++ Completion/Unix/Command/_cvs	16 Apr 2002 07:44:27 -0000
@@ -115,7 +115,7 @@
 (( $+functions[_cvs_admin_t] )) ||
 _cvs_admin_t () {
   if compset -P -; then
-    _message 'descriptive text'
+    _message -e descriptions 'descriptive text'
   else
     _files "$@"
   fi
@@ -644,7 +644,7 @@
   if compset -P '*='; then
     _default
   else
-    _message "variable=value"
+    _message -e variables "variable"
   fi
 }
 
@@ -679,7 +679,7 @@
 
 (( $+functions[_cvs_m] )) ||
 _cvs_m () {
-  _message "log message"
+  _message -e messages "log message"
 }
 
 (( $+functions[_cvs_modules] )) ||
@@ -717,7 +717,7 @@
       _wanted modules expl 'module name' \
         compadd -a _cvs_top_modules_cache_mods
     else
-      _message 'module name'
+      _message -e modules 'module name'
     fi
   fi
 }
@@ -741,7 +741,7 @@
       _wanted modules expl 'module name' \
         compadd -qS/ -a _cvs_sub_modules_cache_mods
     else
-      _message 'module name'
+      _message -e modules 'module name'
     fi
   fi
 }
@@ -793,7 +793,7 @@
   if (( $#vendor_branch )); then
     _wanted values expl 'vendor branch' compadd -a vendor_branch
   else
-    _message 'vendor branch'
+    _message -e branches 'vendor branch'
   fi
 }
 
@@ -854,7 +854,7 @@
   if (( $#_cvs_revisions_cache )); then
     _wanted values expl revision compadd -a _cvs_revisions_cache
   else
-    _message revision
+    _message -e revisions revision
   fi
 }
 
Index: Completion/Unix/Command/_gs
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_gs,v
retrieving revision 1.1
diff -u -r1.1 _gs
--- Completion/Unix/Command/_gs	2 Apr 2001 11:52:36 -0000	1.1
+++ Completion/Unix/Command/_gs	16 Apr 2002 07:44:27 -0000
@@ -4,7 +4,7 @@
   if [[ CURRENT -eq 1 ]]; then
     _pspdf
   else
-    _message 'userdict ARGUMENTS'
+    _message -e arguments 'userdict ARGUMENTS'
     return 1
   fi
 else
@@ -23,7 +23,7 @@
   case "$state" in
   dname)
     if [[ "$PREFIX" = *\=* ]]; then
-      _message 'systemdict definition value'
+      _message -e definition-values 'systemdict definition value'
     else
       _wanted names expl 'systemdict definition name' \
           compadd -M 'm:{a-z}={A-Z}' - \
@@ -43,7 +43,7 @@
         _files "$expl[@]" && ret=0
         ;;
       *)
-        _message 'systemdict value'
+        _message -e values 'systemdict value'
         return 1
       esac
     else
Index: Completion/Unix/Command/_java
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_java,v
retrieving revision 1.5
diff -u -r1.5 _java
--- Completion/Unix/Command/_java	16 Jan 2002 16:29:52 -0000	1.5
+++ Completion/Unix/Command/_java	16 Apr 2002 07:44:27 -0000
@@ -499,7 +499,7 @@
   if compset -P '*='; then
     _default
   else
-    _message 'property name'
+    _message -e property-names 'property name'
   fi
   ;;
 
Index: Completion/Unix/Command/_look
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_look,v
retrieving revision 1.1
diff -u -r1.1 _look
--- Completion/Unix/Command/_look	2 Apr 2001 11:55:25 -0000	1.1
+++ Completion/Unix/Command/_look	16 Apr 2002 07:44:27 -0000
@@ -15,7 +15,7 @@
   if [[ -n "$PREFIX" ]]; then
     _wanted values expl 'word prefix' compadd - $(_call_program values $words[1] $PREFIX)
   else
-    _message 'word prefix'
+    _message -e prefixes 'word prefix'
   fi
   ;;
 esac
Index: Completion/Unix/Command/_mysql_utils
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_mysql_utils,v
retrieving revision 1.2
diff -u -r1.2 _mysql_utils
--- Completion/Unix/Command/_mysql_utils	22 Oct 2001 14:03:18 -0000	1.2
+++ Completion/Unix/Command/_mysql_utils	16 Apr 2002 07:44:27 -0000
@@ -214,10 +214,10 @@
         _wanted mysqldbs expl "MySQL databases" _mysql_databases
       ;;
       (kill)
-        _message 'thread ids'
+        _message -e ids 'thread ids'
       ;;
       (password)
-        _message 'new password'
+        _message -e passwords 'new password'
       ;;
     esac
   fi
Index: Completion/Unix/Command/_nslookup
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_nslookup,v
retrieving revision 1.1
diff -u -r1.1 _nslookup
--- Completion/Unix/Command/_nslookup	2 Apr 2001 11:58:49 -0000	1.1
+++ Completion/Unix/Command/_nslookup	16 Apr 2002 07:44:27 -0000
@@ -94,7 +94,7 @@
     return 1
     ;;
   finger)
-    _message 'finger name'
+    _message -e names 'finger name'
     return 1
     ;;
   ls)
Index: Completion/Unix/Command/_pbm
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_pbm,v
retrieving revision 1.4
diff -u -r1.4 _pbm
--- Completion/Unix/Command/_pbm	25 Feb 2002 09:09:36 -0000	1.4
+++ Completion/Unix/Command/_pbm	16 Apr 2002 07:44:27 -0000
@@ -69,7 +69,7 @@
 
 pbmclean)
   if [[ "$PREFIX" = -* ]]; then
-    _message 'maximum number of identical neighbours'
+    _message -e neighbours 'maximum number of identical neighbours'
   else
     _pbm
   fi
@@ -344,12 +344,12 @@
 
 pnmgamma)
   if [[ CURRENT -eq 2 ]]; then
-    _message 'gamma value or red gamma value'
+    _message -e gamma-values 'gamma value or red gamma value'
   elif [[ CURRENT -eq 3 ]]; then
     _pbm && ret=0
-    _message 'green gamma value'
+    _message -e gamma-values 'green gamma value'
   elif [[ CURRENT -eq 4 ]]; then
-    _message 'blue gamma value'
+    _message -e gamma-values 'blue gamma value'
   elif [[ CURRENT -eq 5 ]]; then
     _pbm && ret=0
   fi
@@ -592,7 +592,7 @@
     else
       _wanted options expl option compadd - -map && ret=0
     fi
-    _message 'number of colors'
+    _message -e numbers 'number of colors'
   
     return ret
   elif [[ CURRENT -eq 3 && "$words[2]" = -map ]]; then
Index: Completion/Unix/Command/_perl
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_perl,v
retrieving revision 1.4
diff -u -r1.4 _perl
--- Completion/Unix/Command/_perl	4 Feb 2002 06:25:36 -0000	1.4
+++ Completion/Unix/Command/_perl	16 Apr 2002 07:44:27 -0000
@@ -39,7 +39,7 @@
   compset -P '-'
 
   if compset -P '*='; then
-    _message 'module arguments, comma separated'
+    _message -e module-arguments 'module arguments, comma separated'
   else
     _perl_modules -S= -q
   fi
Index: Completion/Unix/Command/_rsync
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_rsync,v
retrieving revision 1.3
diff -u -r1.3 _rsync
--- Completion/Unix/Command/_rsync	17 Mar 2002 19:00:29 -0000	1.3
+++ Completion/Unix/Command/_rsync	16 Apr 2002 07:44:27 -0000
@@ -48,7 +48,7 @@
     _wanted files expl 'remote files and directories' \
       compadd -S/ -d remdispd ${${(M)remfiles:#*/}/\\/(#e)/}
   else
-    _message 'remote files'
+    _message -e remote-files 'remote files'
   fi
 
 elif [[ -prefix 1 *@ ]]; then
Index: Completion/Unix/Command/_samba
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_samba,v
retrieving revision 1.2
diff -u -r1.2 _samba
--- Completion/Unix/Command/_samba	19 Dec 2001 15:10:40 -0000	1.2
+++ Completion/Unix/Command/_samba	16 Apr 2002 07:44:27 -0000
@@ -19,8 +19,8 @@
 	  profile)
 	    _wanted parameter expl 'parameter' compadd on off flush count
 	  ;;
-	  debug) _message 'debug level' ;;
-	  ping) _message 'number of ping messages' ;;
+	  debug) _message -e levels 'debug level' ;;
+	  ping) _message -e numbers 'number of ping messages' ;;
 	esac
       ;;
       *)
Index: Completion/Unix/Command/_ssh
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_ssh,v
retrieving revision 1.13
diff -u -r1.13 _ssh
--- Completion/Unix/Command/_ssh	4 Apr 2002 14:59:54 -0000	1.13
+++ Completion/Unix/Command/_ssh	16 Apr 2002 07:44:27 -0000
@@ -23,7 +23,7 @@
       (( ret )) || return 0
     done
   else
-    _message 'remote file'
+    _message -e remote-files 'remote file'
   fi
 }
 
@@ -229,12 +229,12 @@
     forward)
       if compset -P 1 '*:'; then
         if compset -P '*:'; then
-          _message 'port number'
+          _message -e port-numbers 'port number'
         else
 	  _wanted hosts expl host _ssh_hosts -qS:
         fi
       else
-        _message 'listen-port number'
+        _message -e port-numbers 'listen-port number'
       fi
       return
       ;;
Index: Completion/Unix/Command/_tiff
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_tiff,v
retrieving revision 1.1
diff -u -r1.1 _tiff
--- Completion/Unix/Command/_tiff	2 Apr 2001 12:04:24 -0000	1.1
+++ Completion/Unix/Command/_tiff	16 Apr 2002 07:44:28 -0000
@@ -185,7 +185,7 @@
 	'fill[byte-align EOL codes]' && ret=0
       ;;
     jpeg)
-      _message 'compression quality (0-100), or `r'"'"' (output RGB)'
+      _message -e values 'compression quality (0-100), or `r'"'"' (output RGB)'
       ret=0
       ;;
     lzw|zip)
Index: Completion/Unix/Command/_whois
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_whois,v
retrieving revision 1.1
diff -u -r1.1 _whois
--- Completion/Unix/Command/_whois	2 Apr 2001 12:06:01 -0000	1.1
+++ Completion/Unix/Command/_whois	16 Apr 2002 07:44:28 -0000
@@ -137,7 +137,7 @@
     if (( $+functions[_whois:$host] )); then
       "_whois:$host" "$expl[@]"
     else
-      _message "identifier"
+      _message -e identifiers "identifier"
     fi
     ;;
   esac
@@ -164,7 +164,7 @@
     if (( $+functions[_whois:$host] )); then
       "_whois:$host" "$expl[@]"
     else
-      _message "identifier"
+      _message -e identifiers "identifier"
     fi
     ;;
   esac
@@ -183,7 +183,7 @@
     if (( $+functions[_whois:$host] )); then
       "_whois:$host" "$@"
     else
-      _message "identifier"
+      _message -e identifiers "identifier"
     fi
   fi
 }
@@ -206,7 +206,7 @@
 
     _wanted strings expl string compadd HELP DOMAIN HOST
   else
-    _message 'string'
+    _message -e strings 'string'
   fi
 }
 
@@ -217,7 +217,7 @@
 
     _wanted strings expl string compadd HELP DOM NET HOST PERSON CONN COM
   else
-    _message 'string'
+    _message -e strings 'string'
   fi
 }
 
Index: Completion/Unix/Command/_yp
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_yp,v
retrieving revision 1.2
diff -u -r1.2 _yp
--- Completion/Unix/Command/_yp	15 Nov 2001 18:42:33 -0000	1.2
+++ Completion/Unix/Command/_yp	16 Apr 2002 07:44:28 -0000
@@ -78,12 +78,12 @@
     ':map name:->map' && ret=0
   ;;
 domainname)
-  _message 'new domain name'
+  _message -e new-domains 'new domain name'
   return 1
   ;;
 esac
 
-[[ "$state" = keymap ]] && _message 'key'
+[[ "$state" = keymap ]] && _message -e keys 'key'
 
 if [[ "$state" = map* ]]; then
   local expl
@@ -107,7 +107,7 @@
   if compset -P '*,'; then
     _wanted hosts expl server _hosts -qS, && ret=0
   else
-    _message 'domain name'
+    _message -e domains 'domain name'
   fi
 fi
 
Index: Completion/Unix/Type/_perl_modules
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Type/_perl_modules,v
retrieving revision 1.1
diff -u -r1.1 _perl_modules
--- Completion/Unix/Type/_perl_modules	2 Apr 2001 11:40:31 -0000	1.1
+++ Completion/Unix/Type/_perl_modules	16 Apr 2002 07:44:28 -0000
@@ -56,7 +56,7 @@
       else
         # If perl isn't there, one wonders why the user's trying to
         # complete Perl modules.  Maybe her $path is wrong?
-        _message "Didn't find perl on \$PATH; guessing @INC ..."
+        _message "didn't find perl on \$PATH; guessing @INC ..."
 
         inc=( /usr/lib/perl5{,/{site_perl/,}<5->.([0-9]##)}(N) 
               ${(s.:.)PERL5LIB} )
Index: Completion/Unix/Type/_urls
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Type/_urls,v
retrieving revision 1.3
diff -u -r1.3 _urls
--- Completion/Unix/Type/_urls	12 Dec 2001 11:34:18 -0000	1.3
+++ Completion/Unix/Type/_urls	16 Apr 2002 07:44:28 -0000
@@ -137,7 +137,7 @@
 fi
 host="$match[1]"
 
-[[ $match[2] = ':' ]] && ! compset -P '<->/' && _message 'port number' && return 0
+[[ $match[2] = ':' ]] && ! compset -P '<->/' && _message -e ports 'port number' && return 0
 
 # Complete part after hostname
 
Index: Completion/X/Command/_x_utils
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_x_utils,v
retrieving revision 1.2
diff -u -r1.2 _x_utils
--- Completion/X/Command/_x_utils	2 Jan 2002 14:45:22 -0000	1.2
+++ Completion/X/Command/_x_utils	16 Apr 2002 07:44:28 -0000
@@ -88,9 +88,9 @@
 
       case "$type" in
       inet) _hosts && ret=0;;
-      dnet) _message 'DECnet host';;
-      nis)  _message 'Secure RPC network name';;
-      krb)  _message 'Kerberos V5 principal';;
+      dnet) _message -e decnet-hosts 'DECnet host';;
+      nis)  _message -e network-names 'Secure RPC network name';;
+      krb)  _message -e principals 'Kerberos V5 principal';;
       esac
     else
       _alternative \
Index: Completion/X/Command/_xauth
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_xauth,v
retrieving revision 1.1
diff -u -r1.1 _xauth
--- Completion/X/Command/_xauth	2 Apr 2001 12:14:41 -0000	1.1
+++ Completion/X/Command/_xauth	16 Apr 2002 07:44:28 -0000
@@ -37,9 +37,9 @@
 	  state=protocolname
 	else
 	  case "$words[CURRENT-1]" in
-	  timeout) _message 'timeout(seconds)';;
-	  group) _message 'group-id';;
-	  data) _message 'hexdata';;
+	  timeout) _message -e values 'timeout (seconds)';;
+	  group) _message -e ids 'group-id';;
+	  data) _message -e values 'hexdata';;
 	  *) 
 	    _wanted options expl 'xauth generate options' \
 	      compadd trusted untrusted timeout group data && ret=0
Index: Completion/X/Command/_xmodmap
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_xmodmap,v
retrieving revision 1.1
diff -u -r1.1 _xmodmap
--- Completion/X/Command/_xmodmap	2 Apr 2001 12:15:31 -0000	1.1
+++ Completion/X/Command/_xmodmap	16 Apr 2002 07:44:28 -0000
@@ -27,7 +27,7 @@
 	PREFIX=''
 	compadd -S ' ' '=' && ret=0
       else
-        _message 'key code or `any'"'"
+        _message -e keys 'key code or `any'"'"
       fi
       ;;
     keysym*)
Index: Completion/X/Command/_xwit
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Command/_xwit,v
retrieving revision 1.1
diff -u -r1.1 _xwit
--- Completion/X/Command/_xwit	2 Apr 2001 12:16:51 -0000	1.1
+++ Completion/X/Command/_xwit	16 Apr 2002 07:44:28 -0000
@@ -70,9 +70,9 @@
      "/$word/" ':option-iconmove-y:y:' \
   \| "/-id$nul/" "$guard" "/$word/" ':option-id:window id:_x_window' \
   \| "/-(no|)keyrepeat$nul/" "$guard" \
-      \( "/[0-9]##$nul/" ':option-keyrepeat-keycode:keycode:{[[ -prefix [0-9]# ]] && _message keycode}' \
+      \( "/[0-9]##$nul/" ':option-keyrepeat-keycode:keycode:{[[ -prefix [0-9]# ]] && _message -e keycodes keycode}' \
 	\( "/-$nul/" "/[0-9]##$nul/" \
-	   ':option-keyrepeat-last-keycode:last keycode:{[[ -prefix [0-9]# ]] && _message "last keycode"}' \| \) \) \# \
+	   ':option-keyrepeat-last-keycode:last keycode:{[[ -prefix [0-9]# ]] && _message -e keycodes "last keycode"}' \| \) \) \# \
   \| "/-names$nul/" "$guard" \
      "/$word/" ':option-names:window name:_x_window -n' \# \
   \| "/[]/" ':options:option:_xwit_compopts' \
Index: Completion/X/Type/_x_borderwidth
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_borderwidth,v
retrieving revision 1.1
diff -u -r1.1 _x_borderwidth
--- Completion/X/Type/_x_borderwidth	2 Apr 2001 12:08:21 -0000	1.1
+++ Completion/X/Type/_x_borderwidth	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'border width'
+  _message -e values 'border width'
 fi
Index: Completion/X/Type/_x_geometry
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_geometry,v
retrieving revision 1.1
diff -u -r1.1 _x_geometry
--- Completion/X/Type/_x_geometry	2 Apr 2001 12:10:14 -0000	1.1
+++ Completion/X/Type/_x_geometry	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'geometry'
+  _message -e geometries 'geometry'
 fi
Index: Completion/X/Type/_x_locale
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_locale,v
retrieving revision 1.1
diff -u -r1.1 _x_locale
--- Completion/X/Type/_x_locale	2 Apr 2001 12:10:45 -0000	1.1
+++ Completion/X/Type/_x_locale	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'locale'
+  _message -e locales 'locale'
 fi
Index: Completion/X/Type/_x_name
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_name,v
retrieving revision 1.1
diff -u -r1.1 _x_name
--- Completion/X/Type/_x_name	2 Apr 2001 12:11:28 -0000	1.1
+++ Completion/X/Type/_x_name	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'name'
+  _message -e names 'name'
 fi
Index: Completion/X/Type/_x_resource
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_resource,v
retrieving revision 1.1
diff -u -r1.1 _x_resource
--- Completion/X/Type/_x_resource	2 Apr 2001 12:11:45 -0000	1.1
+++ Completion/X/Type/_x_resource	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'resource'
+  _message -e resources 'resource'
 fi
Index: Completion/X/Type/_x_selection_timeout
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_selection_timeout,v
retrieving revision 1.1
diff -u -r1.1 _x_selection_timeout
--- Completion/X/Type/_x_selection_timeout	2 Apr 2001 12:12:01 -0000	1.1
+++ Completion/X/Type/_x_selection_timeout	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'selection timeout'
+  _message -e values 'selection timeout'
 fi
Index: Completion/X/Type/_x_title
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_x_title,v
retrieving revision 1.1
diff -u -r1.1 _x_title
--- Completion/X/Type/_x_title	2 Apr 2001 12:12:17 -0000	1.1
+++ Completion/X/Type/_x_title	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 if (( x )); then
   _message -r "$argv[x + 1]"
 else
-  _message 'title'
+  _message -e titles 'title'
 fi
Index: Completion/X/Type/_xt_session_id
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/X/Type/_xt_session_id,v
retrieving revision 1.1
diff -u -r1.1 _xt_session_id
--- Completion/X/Type/_xt_session_id	2 Apr 2001 12:12:52 -0000	1.1
+++ Completion/X/Type/_xt_session_id	16 Apr 2002 07:44:28 -0000
@@ -1,3 +1,3 @@
 #autoload
 
-_message 'session ID'
+_message -e ids 'session ID'
Index: Completion/Zsh/Command/_compdef
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_compdef,v
retrieving revision 1.4
diff -u -r1.4 _compdef
--- Completion/Zsh/Command/_compdef	27 Mar 2002 16:10:11 -0000	1.4
+++ Completion/Zsh/Command/_compdef	16 Apr 2002 07:44:28 -0000
@@ -36,7 +36,7 @@
 
 if [[ $state = multi ]]; then
   case $(( CURRENT % 3 )) in
-  0) _message key
+  0) _message -e keys key
      return 1;;
   1) state=cfun;;
   2) state=style;;
Index: Completion/Zsh/Command/_limit
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_limit,v
retrieving revision 1.1
diff -u -r1.1 _limit
--- Completion/Zsh/Command/_limit	1 Nov 2001 15:41:40 -0000	1.1
+++ Completion/Zsh/Command/_limit	16 Apr 2002 07:44:28 -0000
@@ -5,5 +5,5 @@
 elif [[ $PREFIX = u* ]]; then
     compadd unlimited
 else
-    _message "number and scaling factor"
+    _message -e values "number and scaling factor"
 fi
Index: Completion/Zsh/Command/_sched
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_sched,v
retrieving revision 1.1
diff -u -r1.1 _sched
--- Completion/Zsh/Command/_sched	2 Apr 2001 11:30:01 -0000	1.1
+++ Completion/Zsh/Command/_sched	16 Apr 2002 07:44:28 -0000
@@ -14,7 +14,7 @@
                            compadd "$disp[@]" - {1..$#lines}
     return
   else
-    _message 'time specification'
+    _message -e times 'time specification'
     return 1
   fi
 fi
Index: Completion/Zsh/Command/_zstyle
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Command/_zstyle,v
retrieving revision 1.8
diff -u -r1.8 _zstyle
--- Completion/Zsh/Command/_zstyle	15 Mar 2002 16:26:09 -0000	1.8
+++ Completion/Zsh/Command/_zstyle	16 Apr 2002 07:44:28 -0000
@@ -197,7 +197,7 @@
       ;;
 
     argument)
-      _message argument
+      _message -e arguments argument
       ;;
     
     bool) 
@@ -290,9 +290,9 @@
 
     tag-order)
       if compset -P '*:*:'; then
-        _message description
+        _message -e descriptions description
       elif compset -P '*:'; then
-        _message 'tag alias'
+        _message -e aliases 'tag alias'
       else
         suf=()
         compset -S ':*' || suf=( -qS: )
@@ -302,11 +302,11 @@
 
     filepat)
       if compset -P '*:*:'; then
-        _message description
+        _message -e descriptions description
       elif compset -P '*:'; then
-        _message tag
+        _message -e tags tag
       else
-        _message 'glob patterns'
+        _message -e patterns 'glob patterns'
       fi
       ;;
 
@@ -341,7 +341,7 @@
       ;;
 
     fake-files)
-      _message 'prefix and names'
+      _message -e fakes 'prefix and names'
       ;;
 
     fake-params)
@@ -375,11 +375,11 @@
       ;;
 
     preserve-prefix)
-      _message 'pattern matching prefix to keep'
+      _message -e prefixes 'pattern matching prefix to keep'
       ;;
 
     separator)
-      _message 'separator string'
+      _message -e separators 'separator string'
       ;;
 
     urgh) 
Index: Completion/Zsh/Context/_subscript
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Zsh/Context/_subscript,v
retrieving revision 1.10
diff -u -r1.10 _subscript
--- Completion/Zsh/Context/_subscript	13 Mar 2002 09:28:05 -0000	1.10
+++ Completion/Zsh/Context/_subscript	16 Apr 2002 07:44:28 -0000
@@ -22,7 +22,7 @@
     local f=$match[1] d=$match[2] e=$match[2] v=$match[3]
     [[ $f = s && ${(Pt)${compstate[parameter]}} != scalar* ]] && return 1
     if [[ -z $d ]]; then
-      _message 'delimiter'
+      _message -e delimiters 'delimiter'
       return
     else
       case $d in

-- 
Sven Wischnowsky                          wischnow@berkom.de


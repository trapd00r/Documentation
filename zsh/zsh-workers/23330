From zsh-workers-return-23330-mason-zsh=primenet.com.au@sunsite.dk Thu Apr 26 09:31:17 2007
Return-Path: <zsh-workers-return-23330-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28321 invoked from network); 26 Apr 2007 09:31:15 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.8 (2007-02-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,FORGED_RCVD_HELO
	autolearn=ham version=3.1.8
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Apr 2007 09:31:15 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 9140 invoked from network); 26 Apr 2007 09:31:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Apr 2007 09:31:09 -0000
Received: (qmail 18838 invoked by alias); 26 Apr 2007 09:31:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23330
Received: (qmail 18829 invoked from network); 26 Apr 2007 09:31:06 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 26 Apr 2007 09:31:06 -0000
Received: (qmail 8844 invoked from network); 26 Apr 2007 09:31:06 -0000
Received: from cluster-d.mailcontrol.com (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 26 Apr 2007 09:31:03 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly42d.srv.mailcontrol.com (MailControl) with ESMTP id l3Q9V2vX026589
	for <zsh-workers@sunsite.dk>; Thu, 26 Apr 2007 10:31:02 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 26 Apr 2007 10:31:02 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.8/8.13.4) with ESMTP id l3Q9V2LF014592
	for <zsh-workers@sunsite.dk>; Thu, 26 Apr 2007 10:31:02 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.8/8.13.8/Submit) with ESMTP id l3Q9V2Ak014589
	for <zsh-workers@sunsite.dk>; Thu, 26 Apr 2007 10:31:02 +0100
Message-Id: <200704260931.l3Q9V2Ak014589@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: =~ regex match 
In-reply-to: <20070426041938.GA44533@redoubt.spodhuis.org> 
References: <20070426041938.GA44533@redoubt.spodhuis.org>
Comments: In-reply-to Phil Pennock <zsh-workers+phil.pennock@spodhuis.org>
   message dated "Wed, 25 Apr 2007 21:19:38 -0700."
Date: Thu, 26 Apr 2007 10:31:02 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 26 Apr 2007 09:31:02.0296 (UTC) FILETIME=[9B1CB980:01C787E5]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.68.0.152

Phil Pennock wrote:
> My mental processes push me towards regexps perhaps more than is
> healthy.  zsh/pcre's -pcre-match conditional operator is firmly in my
> toolkit.
> 
> Earlier today I discovered that bash has a =~ operator for doing
> extended regexp comparisons.  I became envious, so I did something about
> it.  Which didn't involve giving up all the conveniences of zsh which
> have spoiled me.
> 
> The below patch makes =~ an operator which silently auto-loads zsh/pcre
> and uses -pcre-match from there.  This is not bash-compatible in that:
> 
>  1: it's PCRE -- far more to my liking :^)
>  2: if the regexp pattern is bad, it returns false/1 not false/2.

I thought about =~ and it seemed to me that since it would be largely
there for bash compatibility it would be better to do it with the system
regexp library, which would be more compatible and wouldn't depend on
optional packages.  It shouldn't be too hard to do.  We probably
wouldn't support BASH_REMATCH, however.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


To access the latest news from CSR copy this link into a web browser:  http://www.csr.com/email_sig.php

To get further information regarding CSR, please visit our Investor Relations page at http://ir.csr.com/csr/about/overview


From zsh-workers-return-7313-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Jul 29 08:35:08 1999
Return-Path: <zsh-workers-return-7313-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19567 invoked from network); 29 Jul 1999 08:35:07 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 Jul 1999 08:35:07 -0000
Received: (qmail 8953 invoked by alias); 29 Jul 1999 08:34:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7313
Received: (qmail 8945 invoked from network); 29 Jul 1999 08:34:49 -0000
Message-Id: <9907290803.AA24496@ibmth.df.unipi.it>
To: Felix Rosencrantz <f_rosencrantz@yahoo.com>,
        zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: PATCH: Completion/matching control problem 
In-Reply-To: "Felix Rosencrantz"'s message of "Wed, 28 Jul 1999 10:47:17 DFT."
             <19990728174717.22028.rocketmail@web1305.mail.yahoo.com> 
Date: Thu, 29 Jul 1999 10:03:35 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Felix Rosencrantz wrote:
> The problem seems to occur when match_str is called with test=1 and abort_mat
> ch
> is called, the globals matchparts&matchsubs end up pointing to free'd clines,
> which causes problems for code that attempts to append clines to the list.

This fix looks right.

> I another problem is if you type:
> 	ls a<TAB>
> you get:
> 	ls Abcdefghi
> which doesn't seem correct, but I figure someone who understands the code
> might be able to fix this one.

I suppose it's getting confused with the different possible punctuation
characters after Abc, but since it won't complete further, what it's doing
must be wrong --- it should presumably stop at that point or use menu
completion.  Unfortunately this won't get fixed until Sven reappears, and
since 3.1.6 is going to appear in the next few days, I've just stuck a
message in Etc/BUGS.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-workers-request@euclid.skiles.gatech.edu Mon Dec 30 18:04:23 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 644 invoked from network); 30 Dec 1996 18:04:20 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 30 Dec 1996 18:04:20 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id NAA24273; Mon, 30 Dec 1996 13:06:32 -0500 (EST)
Resent-Date: Mon, 30 Dec 1996 12:55:24 -0500 (EST)
From: cskerr@delenn.jccbi.gov
Message-ID: <19961230180113.10841.qmail@delenn.jccbi.gov>
Subject: zsh dumps core on startup on osf1
To: zsh-users@math.gatech.edu
Date: Mon, 30 Dec 1996 12:01:13 -0600 (CST)
X-Mailer: ELM [version 2.4 PL25]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"KbtSG1.0.Uv5.B80oo"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/570
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Hi all,

I'm using a Alpha that's running OSF1 V3.2 214.  When I try to build zsh-3.1.0,
I get a couple of problems.

First, here's the configuration that configure comes up with:

zsh configuration
-----------------
zsh version           : 3.1.0
host operating system : osf3.2
source code location  : .
compiler              : gcc
compiler flags        : -ggdb3 -O
binary install path   : /usr/local/bin
man page install path : /usr/local/man
info install path     : /usr/local/info

The first problem is pretty small.  The Makefile can't build zsh.info from
zsh.texi:

Making info file `zsh.info' from `./zsh.texi'.
./zsh.texi:6810: Unknown command `br'.
./zsh.texi:6810: Misplaced `{'.
./zsh.texi:6810: Misplaced `}'.
Info documentation cannot be compiled without makeinfo.
You can find precompiled info files in zsh-doc.tar.gz.        


The second problem is that zsh-3.1.0 dumps core each time I try to run it,
which is a little worse. :)  Here's a backtrace of the core dump:

make[1]: Entering directory `/tmpdisk/usrtmp/install/zsh-3.1.0/Util'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/tmpdisk/usrtmp/install/zsh-3.1.0/Util'
(11:52)(cskerr delenn)(/usr/tmp/install/zsh-3.1.0): Src/zsh
Loading .zshrc...Unaligned access pid=10793 <zsh> va=1400287c4 pc=12005ff80 ra=12005ff00 type=ldq
zsh: segmentation fault (core dumped)  Src/zsh
(11:52)(cskerr delenn)(/usr/tmp/install/zsh-3.1.0): gdb Src/zsh core
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.16 (alpha-dec-osf3.2), Copyright 1996 Free Software Foundation, Inc...
Core was generated by `zsh'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/shlib/libc.so...done.
#0  dupstruct2 (a=0x40028e1000000000) at utils.c:2043
2043        type = *oints;
(gdb) bt
#0  dupstruct2 (a=0x40028e1000000000) at utils.c:2043
#1  0x12005ffd4 in dupstruct2 (a=0x40028e1000000000) at utils.c:2058
#2  0x12005ffd4 in dupstruct2 (a=0x40028e1000000000) at utils.c:2058                                     
#3  0x12005f758 in dupstruct (a=0x40028e1000000000) at utils.c:1740
#4  0x1200285a0 in execfuncdef (cmd=0x140028428) at exec.c:2406
#5  0x120026038 in execcmd (cmd=0x140028428, input=0, output=0, how=2, last1=2)
    at exec.c:1620
#6  0x1200235e4 in execpline2 (pline=0x140028fd0, how=2, input=0, output=0,
    last1=0) at exec.c:801
#7  0x120022d90 in execpline (l=0x140028408, how=2, last1=0) at exec.c:647
#8  0x12002291c in execlist (list=0x140028fe8, dont_change_job=0, exiting=32)
    at exec.c:527
#9  0x1200381f4 in loop (toplevel=0) at init.c:70
#10 0x12003a2e8 in source (s=0x140012500 "\001") at init.c:747
#11 0x12003a4a8 in sourcehome (s=0x140008c50 ".zshrc") at init.c:784
#12 0x120039fcc in run_init_scripts () at init.c:678
#13 0x12008a158 in main (argc=0, argv=0x11ffff6a8) at main.c:74
(gdb) quit
(11:52)(cskerr delenn)(/usr/tmp/install/zsh-3.1.0):

Charles
cskerr@delenn.jccbi.gov


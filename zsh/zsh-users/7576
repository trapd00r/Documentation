From zsh-users-return-7576-mason-zsh=primenet.com.au@sunsite.dk Mon Jun 21 09:34:56 2004
Return-Path: <zsh-users-return-7576-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15145 invoked from network); 21 Jun 2004 09:34:55 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by ns1.primenet.com.au with SMTP; 21 Jun 2004 09:34:55 -0000
Received: (qmail 5462 invoked from network); 21 Jun 2004 09:34:25 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Jun 2004 09:34:25 -0000
Received: (qmail 10822 invoked by alias); 21 Jun 2004 09:34:05 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7576
Received: (qmail 10812 invoked from network); 21 Jun 2004 09:34:05 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 21 Jun 2004 09:34:02 -0000
Received: (qmail 4633 invoked from network); 21 Jun 2004 09:34:01 -0000
Received: from lhuumrelay3.lnd.ops.eu.uu.net (62.189.58.19)
  by a.mx.sunsite.dk with SMTP; 21 Jun 2004 09:34:00 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i5L9XXv21674
	for <zsh-users@sunsite.dk>; Mon, 21 Jun 2004 09:33:33 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6a532cc110c0a88d015c0@MAILSWEEPER01.csr.com> for <zsh-users@sunsite.dk>;
 Mon, 21 Jun 2004 10:32:55 +0100
Received: from news01.csr.com ([192.168.143.38]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 21 Jun 2004 10:36:55 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.12.11/8.12.11) with ESMTP id i5L9XaQC003034
	for <zsh-users@sunsite.dk>; Mon, 21 Jun 2004 10:33:36 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.12.11/8.12.11/Submit) with ESMTP id i5L9XaKc003031
	for <zsh-users@sunsite.dk>; Mon, 21 Jun 2004 10:33:36 +0100
Message-Id: <200406210933.i5L9XaKc003031@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: Extracting Informations from strings 
In-reply-to: "Stefan =?iso-8859-1?Q?Reich=F6r?="'s message of "Mon, 21 Jun 2004 09:02:44 +0200."
             <w4dzn6xmm0b.fsf@nanni.riic.uni-linz.ac.at> 
Date: Mon, 21 Jun 2004 10:33:36 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 21 Jun 2004 09:36:55.0380 (UTC) FILETIME=[4A5ED140:01C45773]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: **
X-Spam-Status: No, hits=2.1 required=6.0 tests=BAYES_90 autolearn=no 
	version=2.63
X-Spam-Hits: 2.1

Stefan =?iso-8859-1?Q?Reich=F6r?= wrote:
> Hi!
> 
> I want to parse the output from acpi:
>   Battery 1: charging, 95%, charging at zero rate - will never fully charge.
> 
> I want to extract the "95%" from the output above.
> 
> How can I achieve this from within zsh?

Within zsh, you need something like (assuming the output is in $string):

setopt extendedglob
local match mbegin mend
if [[ $string = (#b)"Battery "*" charging, "(<->)"%"* ]]; then
  print "Charge is ${match[1]}%"
fi

It's up to you how closely you want to match the output, I've matched a
lot of it with *'s.

This works from zsh 4.0.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


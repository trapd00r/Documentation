From zsh-users-return-3527-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Nov 25 05:46:23 2000
Return-Path: <zsh-users-return-3527-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15764 invoked from network); 25 Nov 2000 05:46:21 -0000
Received: from sunsite.dk (HELO sunsite.auc.dk) (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Nov 2000 05:46:21 -0000
Received: (qmail 6948 invoked by alias); 25 Nov 2000 05:46:04 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3527
Received: (qmail 6940 invoked from network); 25 Nov 2000 05:46:03 -0000
From: "Calum Selkirk" <cselkirk@sophix.uklinux.net>
Date: Sat, 25 Nov 2000 05:43:06 +0000
To: zsh-users@sunsite.auc.dk
Subject: _tar -*Cf*?
Message-ID: <20001125054306.E5448@sophix.uklinux.net>
Mail-Followup-To: zsh-users@sunsite.auc.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i
X-Operating-System: Linux 2.2.18p17-b1-s19-tm on ppc

hi zshers ..

i'd been having problems using the -C switch with _tar .. i'd usually
use it in the context of:

tar zxvf file.tar.gz -C /path/to/unpack 

however this would call _tar_archive and complete /path on the archives
directory structure. Looking at _tar i see:

elif [[ ( CURRENT -gt 2 && "$words[CURRENT-1]" = -*Cf*) ||
        ( CURRENT -eq 3 && "$words[2]" = *Cf* ) ]]; then

  # a directory for -C
  
     _files -/ 

I'm pretty new to zsh so forgive my ignorance, but shouldn't this be -C
rather than -Cf to get commpletion on the --directory to change to?  

Changing it to -C does indeed produce the completion i'd expected and
_tar_archive seems to work as i'd expect with this change. I guess i'm
looking for a sanity check .. is this a typo/error or is this likely to
break something?

calum


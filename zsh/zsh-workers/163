From zsh-workers-request@math.gatech.edu  Fri Jul  7 04:34:37 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.mira.net.au (8.6.12/8.6.9) with SMTP id EAA03623 for <mason@werple.mira.net.au>; Fri, 7 Jul 1995 04:34:35 +1000
Received: from math (math.skiles.gatech.edu) by gatech.edu with SMTP id AA12627
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Thu, 6 Jul 1995 14:35:30 -0400
Received: by math (5.x/SMI-SVR4)
	id AA09600; Thu, 6 Jul 1995 14:32:32 -0400
Resent-Date: Thu, 6 Jul 1995 14:36:47 +0500
Old-Return-Path: <cjh@ebt.com>
From: Chris Hillery <cjh@ebt.com>
Date: Thu, 6 Jul 1995 14:36:47 +0500
Message-Id: <9507061836.AA03638@spot.EBT.COM>
To: zsh-workers@math.gatech.edu
Subject: Expansion bug?
Comments: Hyperbole mail buttons accepted, v3.15.
Resent-Message-Id: <"cWvGN1.0.wL2._m2_l"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/163
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


I don't recall seeing this mentioned before, although I've kind of
been skimming the list for some time.

In zsh2.6-beta1, I had the following statement:

  set -A cdpath $ROOT/{$PROJ,${(j:,:)PROJ_LIST}}/src

The part between braces expanded to a comma-separated list of $PROJ
and then the elements of the array $PROJ_LIST (which I turned into a
comma-separated list with the (j:,:) ).

This expanded via brace-expansion into a collection of paths like so:

 /root/project/src /root/a_proj/src /root/b_proj/src    etc.

However, when I upgraded to zsh2.6-beta10 recently, this broke. (I
hadn't upgraded between those two versions, so I'm not sure at exactly
which patch it went away.) Now it seems as though what's between the
braces gets turned into a two-element comma-separated list (even
though the second element DOES have commas in it). So I get:

 /root/project/src /root/a_proj,b_proj/src

I'm guessing that somewhere along the line the order of expansion got
inverted, so that the ${(j:,:)PROJ_LIST} doesn't get expanded until
after brace-expansion. But this does seem wrong to me - nested things
should be evaluated from the inside out.

-- 
Ceej
aka Chris Hillery
cjh@ebt.com


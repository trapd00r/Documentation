From zsh-workers-return-8105-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Sep 30 02:12:02 1999
Return-Path: <zsh-workers-return-8105-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1510 invoked from network); 30 Sep 1999 02:11:39 -0000
Received: from mail2.primenet.com.au (HELO primenet.com.au) (?qltLHIDLx3a7EqG5GLPEehuLcCpW5ILF?@203.24.36.6)
  by ns1.primenet.com.au with SMTP; 30 Sep 1999 02:11:39 -0000
Received: (qmail 13922 invoked from network); 29 Sep 1999 22:02:23 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by mail2.primenet.com.au with SMTP; 29 Sep 1999 22:02:23 -0000
Received: (qmail 2927 invoked by alias); 29 Sep 1999 22:00:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8105
Received: (qmail 2912 invoked from network); 29 Sep 1999 22:00:57 -0000
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Wed, 29 Sep 1999 18:00:55 -0400 (EDT)
From: Kevin Sullivan <kevins@mediaone.net>
To: zsh-workers@sunsite.auc.dk
Subject: _rpm crashes zsh
X-Mailer: VM 6.43 under 20.4 "Emerald" XEmacs  Lucid
Message-ID: <14322.35438.33373.229253@kevins>


I was very happy when I saw the _rpm completion widget show up in the
recent distributions. However, I am having a problem with it. One of
the ways that I use rpm is to get information about a specific rpm I
have in the current directory with:

rpm -qip <rpm name> 

But instead of looking for local packages it simply crashes. I have
included a gdb traceback of the problem. 

(kevins@kevins)(zsh:3)% gdb ./zsh
GNU gdb 4.18
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-mandrake-linux"...
(gdb) r -l
Starting program: /usr/local/src/zsh-3.1.6-pws-6/Src/./zsh -l
(kevins@kevins)(zsh:1)% rpm -qip
Program received signal SIGSEGV, Segmentation fault.
0x400bb9fc in chunk_alloc () from /lib/libc.so.6
(gdb) bt
#0  0x400bb9fc in chunk_alloc () from /lib/libc.so.6
#1  0x401555e0 in __DTOR_END__ () from /lib/libc.so.6
Cannot access memory at address 0x28.
(gdb) 

I am using Mandrake 6.0 Linux and a straight non-patched version of
zsh-3.1.6-pws-6. If there is any more information I can provide let
me know. 

  -Kevin Sullivan


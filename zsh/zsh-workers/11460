From zsh-workers-return-11460-mason-zsh=primenet.com.au@sunsite.auc.dk Thu May 18 11:04:02 2000
Return-Path: <zsh-workers-return-11460-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21494 invoked from network); 18 May 2000 11:04:00 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 May 2000 11:04:00 -0000
Received: (qmail 25555 invoked by alias); 18 May 2000 11:03:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11460
Received: (qmail 25547 invoked from network); 18 May 2000 11:03:32 -0000
Date: Thu, 18 May 2000 13:02:22 +0200 (MET DST)
Message-Id: <200005181102.NAA04256@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Oliver Kiddle's message of Thu, 18 May 2000 10:45:15 +0100
Subject: PATCH: Re: _netscape


Oliver Kiddle wrote:

> ...
> 
> Where things go wrong is when I don't use a quote:
> 
> netscape -remote open<tab> completes '\(', subsequent tabs insert more, I would
>     expect to see openFile and openURL listed
> netscape -remote openU<tab> works - completes to openURL\(
> netscape -remote openURL\(<tab> also works - it completes URLs.
> 
> The first of these is where it isn't workling. The thing which is missing is that I never get the list of matches, just the inserted brackets.

So why do we use `-s', then.

This'll do? 

Bye
 Sven

Index: Completion/User/_netscape
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/_netscape,v
retrieving revision 1.4
diff -u -r1.4 _netscape
--- Completion/User/_netscape	2000/04/11 07:57:57	1.4
+++ Completion/User/_netscape	2000/05/18 11:02:38
@@ -56,15 +56,9 @@
       fi
     ;;
     *)
-      if [[ -z "$QIPREFIX" ]]; then
-	_wanted commands expl 'remote commands' \
-  	    compadd -s'(' -S '' -M 'm:{a-zA-Z}={A-Za-z}' - \
-                    $remote_commands && ret=0
-      else
-	_wanted commands expl 'remote commands' \
-            compadd -qS '(' -M 'm:{a-zA-Z}={A-Za-z}' - \
-                    $remote_commands && ret=0
-      fi
+      _wanted commands expl 'remote commands' \
+  	  compadd -qS "${${QIPREFIX:+(}:-\(}" -M 'm:{a-zA-Z}={A-Za-z}' - \
+                  $remote_commands && ret=0
     ;;
   esac
 fi

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-20382-mason-zsh=primenet.com.au@sunsite.dk Sun Sep 19 07:45:28 2004
Return-Path: <zsh-workers-return-20382-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1744 invoked from network); 19 Sep 2004 07:45:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Sep 2004 07:45:27 -0000
Received: (qmail 55521 invoked from network); 19 Sep 2004 07:45:21 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Sep 2004 07:45:21 -0000
Received: (qmail 20565 invoked by alias); 19 Sep 2004 07:45:19 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20382
Received: (qmail 20551 invoked from network); 19 Sep 2004 07:45:19 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 19 Sep 2004 07:45:19 -0000
Received: (qmail 55291 invoked from network); 19 Sep 2004 07:45:19 -0000
Received: from cpc3-broo1-6-0-cust112.renf.cable.ntl.com (HELO home.ducasi.org) (80.6.103.112)
  by a.mx.sunsite.dk with SMTP; 19 Sep 2004 07:45:17 -0000
Received: from [127.0.0.1] (localhost [127.0.0.1])
	by home.ducasi.org (Postfix) with ESMTP id B126037B175
	for <zsh-workers@sunsite.dk>; Sun, 19 Sep 2004 08:45:15 +0100 (BST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <Pine.LNX.4.61.0409181943300.6971@toltec.zanshin.com>
References: <200409131118.i8DBIM5B005245@news01.csr.com> <Pine.LNX.4.61.0409181943300.6971@toltec.zanshin.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D8064C1C-0A0F-11D9-A0DD-0003931123E4@cis.strath.ac.uk>
Content-Transfer-Encoding: 7bit
From: Duncan Sinclair <Duncan.Sinclair@cis.strath.ac.uk>
Subject: Re: PATCH: exit after 10 EOF's
Date: Sun, 19 Sep 2004 08:45:14 +0100
To: zsh-workers@sunsite.dk
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: ****
X-Spam-Status: No, hits=4.1 required=6.0 tests=RCVD_IN_DYNABLOCK,
	RCVD_IN_SORBS autolearn=no version=2.63
X-Spam-Hits: 4.1

Hi Guys,

My own feelings are that this...

> However, because no one ever intended for 10 consecutive EOF 
> _characters_
> to be treated as a real EOF -- rather, they intended 10 consecutive 
> zero-
> byte reads to be treated as _not_ an EOF character, and nobody ever 
> typed
> 10 EOF characters on purpose -- zsh does _not_ have to play dumb and 
> exit
> on 10 EOF characters.

... while it may have been historically true, isn't any more.  I quite 
often have to use a shared account where the shell is set to tcsh, and 
ignoreeof is turned on.  It annoys me greatly, but as it is a shared 
account I have limited power to change things.  I have held down 
control-D on purpose and watched a whole stream of warnings scroll up 
the screen rather than give in and type "exit" or "logout" - tcsh 
eventually gets the message and exits.

This is why I feel that Peter's patch isn't a bad thing.  As for 
default vs configured behaviour wrt widgets and such, I'd agree that if 
you've set ignoreeof and you've got a special binding on <whatever EOF 
is set to>, then you probably want to be able to hit it 10 times in a 
row without the shell exiting.

But in the absence of any special binding I don't see what's wrong with 
giving in and exiting after <some number> of the standard ignoreeof 
warnings have been printed.

I believe that tcsh (30 warnings?), bash (10) and ksh (10) all do this, 
and they all have the same ability to detect an EOF character 
separately from an EOF condition.

Cheers,


Duncan.



From zsh-users-return-3923-mason-zsh=primenet.com.au@sunsite.dk Fri Jun 08 07:59:28 2001
Return-Path: <zsh-users-return-3923-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19899 invoked from network); 8 Jun 2001 07:59:28 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 8 Jun 2001 07:59:28 -0000
Received: (qmail 6390 invoked by alias); 8 Jun 2001 07:59:02 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3923
Received: (qmail 6374 invoked from network); 8 Jun 2001 07:59:01 -0000
Date: Fri, 8 Jun 2001 10:59:12 +0300 (EET DST)
From: Timo Aaltonen <tjaalton@cc.hut.fi>
X-Sender: tjaalton@nexus6.hut.fi
To: zsh-users@sunsite.dk
Subject: RE: AIX-problem: the main module won't link statically
In-Reply-To: <001401c0eff0$23452f20$21c9ca95@mow.siemens.ru>
Message-ID: <Pine.LNX.4.10.10106081055400.23818-100000@nexus6.hut.fi>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Fri, 8 Jun 2001, Andrej Borsenkow wrote:

> >
> >   I tried to compile zsh-4.0.1 w. AIX-4.3 (cc version 5), but the main
> > library (/module?) libzsh-4.0.1.so doesn't get in the binary, and when I
> > try to run it:
> >
> > Could not load program ./zsh:
> >         Dependent module libzsh-4.0.1.so could not be loaded.
> > Could not load module libzsh-4.0.1.so.
> > Error was: No such file or directory
> >
> 
> Have you installed it? Or, better, have you installed it in the same
> location as specified when configuring ($prefix/lib/zsh)?

I've tried it both installed, and just by running "make check"..

> > ..and the binary size is only ~1,5kb (and the library is in ~/lib/zsh,
> > size ~690kb)
> >
> 
> That's correct. Have you configured it with ``configure --prefix=$HOME'' ?
> If you just run configure without any arguments zsh expects library in
> /usr/local/lib/zsh.

Well, I compiled it for linux and Tru64-UNIX (I used the same
config.modules for all architectures), and they didn't produce that
library (it was linked statically, as configured..).

And yes, I did run configure with the prefix-stuff.

> > It seems that the linker doesn't function properly:
> >
> > ld  -s -G -bexpall -lc -o libzsh-4.0.1.so  `cat stamp-modobjs`
> > -ldl -lcurses -lm  -lc
> > ld: 0711-327 WARNING: Entry point not found: __start
> > ld: 0711-224 WARNING: Duplicate symbol: .getproc
> > ld: 0711-224 WARNING: Duplicate symbol: .glob
> > ld: 0711-224 WARNING: Duplicate symbol: glob
> > ld: 0711-224 WARNING: Duplicate symbol: getproc
> > ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more
> > information.
> >
> 
> I do not know AIX to decide if these warnings are harmful/harmless.

Me neither.. maybe I should poke the guy here who does =)


_______________/Timo Aaltonen <http://www.hut.fi/~tjaalton>
GSM +358-40-5549 618


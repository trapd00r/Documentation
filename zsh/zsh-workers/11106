From zsh-workers-return-11106-mason-zsh=primenet.com.au@sunsite.auc.dk Wed May 03 11:21:35 2000
Return-Path: <zsh-workers-return-11106-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19345 invoked from network); 3 May 2000 11:21:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 May 2000 11:21:33 -0000
Received: (qmail 19033 invoked by alias); 3 May 2000 11:21:21 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11106
Received: (qmail 18980 invoked from network); 3 May 2000 11:21:18 -0000
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: _mount didn't complete devices.
MIME-Version: 1.0 (generated by SEMI 1.13.7 - "Awazu")
Content-Type: text/plain; charset=US-ASCII
From: Tanaka Akira <akr@m17n.org>
Date: 03 May 2000 20:22:24 +0900
Message-ID: <hvok8hbri8f.fsf@serein.m17n.org>
Lines: 31
User-Agent: T-gnus/6.14.1 (based on Gnus v5.8.3) (revision 16) SEMI/1.13.7 (Awazu) FLIM/1.13.2 (Kasanui) Emacs/20.6 (i686-pc-linux-gnu) MULE/4.0 (HANANOEN)

Z(4):akr@serein% Src/zsh -f
serein% bindkey -e; autoload -U compinit; compinit -D
serein% zstyle ':completion*' group-name ''
serein% zstyle ':completion*:descriptions' format %d
serein% mount 
device
/dev/\*
mount point
CVS/           Config/        Etc/           Misc/          StartupFiles/  Util/          
Completion/    Doc/           Functions/     Src/           Test/          

Hm. /dev/\* is not globbed.

Index: Completion/User/_mount
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/User/_mount,v
retrieving revision 1.4
diff -u -r1.4 _mount
--- Completion/User/_mount	2000/05/02 08:23:31	1.4
+++ Completion/User/_mount	2000/05/03 11:18:56
@@ -554,7 +554,7 @@
     _message "no device or directory with option \`-a'"
   else
     _alternative \
-        'devices:device:compadd /dev/\*' \
+        'devices:device:{compadd "$expl[@]" /dev/*}' \
 	'directories:mount point:_files -/' && ret=0
   fi
   ;;
-- 
Tanaka Akira


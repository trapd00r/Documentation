From zsh-workers-request@euclid.skiles.gatech.edu Mon Feb 24 20:01:49 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 14590 invoked from network); 24 Feb 1997 20:01:44 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 24 Feb 1997 20:01:44 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id OAA10402; Mon, 24 Feb 1997 14:54:46 -0500 (EST)
Resent-Date: Mon, 24 Feb 1997 14:42:34 -0500 (EST)
Date: Mon, 24 Feb 1997 09:33:09 -0700
From: John Harres <Harres@UWyo.Edu>
Subject: grouping in patterns in extended compctl
To: zsh-users@math.gatech.edu
Message-id: <199702241633.JAA02090@horseman.uwyo.edu>
MIME-version: 1.0
X-Mailer: exmh version 2.0gamma 1/27/96
Content-type: multipart/signed; boundary="==_Exmh_415440927087P";
 micalg=pgp-md5; protocol="application/pgp-signature"
Content-transfer-encoding: 7bit
X-Url: http://horseman.uwyo.edu/~harres
X-Authentication-warning: horseman.uwyo.edu: localhost [127.0.0.1] didn't use
 HELO protocol
X-MTS: smtp
Resent-Message-ID: <"wGiDs3.0.oO2.byU4p"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/709
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

--==_Exmh_415440927087P
Content-Type: text/plain; charset=us-ascii

I'm trying to build completion control for a rather complicated command, and
have run into a snag trying to override the default precedence in the pattern
specification for extended completion (what a sentence!).

Here's what I have so far:

dbobj=(cycle cyclev device file finss gidmap history host job license location m
ediatype osref pool poolacl rack saveacl saveset slot uidmap volacl volalias vol
ume wo woparam xgid xuid)
volparams=(volid volname ansil side flipid nxtid gid uid hostid purdate cerdate
cleandate cleancnt initdate accdate mountcnt expdate length capacity slotid onda
te nxtlocid offdate cyclevid devid casel barcode mode protection brand density n
ote locid mediatypes poolid volstate statedate cycleid cyclename cycv_seq device
 flipansil flipvolname host location mediatype nxtansil nxtlocation nxtvolname p
ool prvansil prvid prvvolname rackname rackid slotname)

compctl -k '(add delete modify query)' \
   -x 'c[-1,add][-1,delete][-1,modify][-1,query]' -k dbobj - \
   'c[-2,add][-2,delete][-2,modify][-2,query] c[-1,volume] s[-] , s[-m_]' -k volparams -- sc

Unfortunately, what need to do with the second pattern set is say:

if two words ago was one of 'add delete modify, or query', and one word ago
was 'volume' and the current word starts with - or -m_, then match with any
of the volparams array.  Unfortunately, the default precedence appears to and
the c[-1,volume] and s[-] before the or'ing of s[-] , s[-m_].  Suggestions?

Also, any suggestions on cleaning this up in general would be appreciated.
This could end up being one of the longest compctl's ever built!  Which brings
up another question:  what's the max length of one of these?

John
-- 
John Harres <harres@uwyo.edu>        http://horseman.uwyo.edu/~harres
<A HREF="http://www.uwyo.edu">University of Wyoming</A> 
Finger harres@horseman.uwyo.edu for PGP public key.
Key fingerprint =  FC B4 72 D6 37 A7 A1 73  BE 8B F3 E2 99 68 BF 5A 



--==_Exmh_415440927087P
Content-Type: application/pgp-signature

-----BEGIN PGP MESSAGE-----
Version: 2.6.2

iQB1AwUBMxHCxAxlFYvtP/ENAQHJOwMAmUPwqXYVGGlKqrRgCAjAfeSyOpZ7oJ8a
wOk8oYb+ZZu+K+ots4QUwxSlzzTD82MDcns5sIHT4E668T+fCIl5R+PaFtl49pIj
IiZmby+dE+LsFQsNzp1ag1DPb1+QF9y8
=xGcx
-----END PGP MESSAGE-----

--==_Exmh_415440927087P--


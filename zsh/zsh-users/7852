From zsh-users-return-7852-mason-zsh=primenet.com.au@sunsite.dk Sun Aug 15 18:40:57 2004
Return-Path: <zsh-users-return-7852-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16920 invoked from network); 15 Aug 2004 18:40:56 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Aug 2004 18:40:56 -0000
Received: (qmail 33254 invoked from network); 15 Aug 2004 18:40:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Aug 2004 18:40:50 -0000
Received: (qmail 581 invoked by alias); 15 Aug 2004 18:40:08 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7852
Received: (qmail 571 invoked from network); 15 Aug 2004 18:40:08 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by 130.225.247.90 with SMTP; 15 Aug 2004 18:40:08 -0000
Received: (qmail 30740 invoked from network); 15 Aug 2004 18:38:09 -0000
Received: from unknown (HELO moonbase.zanshin.com) (167.160.213.139)
  by a.mx.sunsite.dk with SMTP; 15 Aug 2004 18:38:07 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [64.84.47.166])
	by moonbase.zanshin.com (8.12.11/8.12.11) with ESMTP id i7FIc5P7004706
	for <zsh-users@sunsite.dk>; Sun, 15 Aug 2004 11:38:05 -0700
Date: Sun, 15 Aug 2004 11:38:05 -0700 (PDT)
From: Bart Schaefer <schaefer@brasslantern.com>
Reply-To: zsh-users@sunsite.dk
To: zsh-users@sunsite.dk
Subject: Re: Resolved: Sourcing .zshrc from .zprofile causes problems
In-Reply-To: <20040815045845.GA16836@blorf.net>
Message-ID: <Pine.LNX.4.61.0408151126400.935@toltec.zanshin.com>
References: <7E0A2482-ECC4-11D8-A541-000A95D2C79E@kalama.no-ip.org>
 <Pine.LNX.4.61.0408122151280.15905@toltec.zanshin.com>
 <F692BDE6-EE06-11D8-BE5C-000A95D2C79E@kalama.no-ip.org>
 <20040814182036.GS7509@ay.vinc17.org> <20040815045845.GA16836@blorf.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.9 required=6.0 tests=BAYES_30 autolearn=no 
	version=2.63
X-Spam-Hits: -0.9

On Sat, 14 Aug 2004, Wayne Davison wrote:

> The only thing I have in my .zshenv script is this:
> 
> if [[ $SHLVL == 1 && ! -o LOGIN ]]; then
>     source ~/.zprofile
> fi
> 
> I used to set things like the PATH in the .zshenv file until it caused
> me problems using gdb:  gdb runs the executable using $SHELL, and that
> caused some of my debug environment settings to get overridden (ouch).

I still set PATH in $ZDOTDIR/.zshenv (which I source from ~/.zshenv in
case ZDOTDIR isn't yet set) but I adopted this convention:

	if [[ -z $ZSH_ENVPATH ]]
	then
	  # ... various adjustments to $path including typeset -U) ...
	  export ZSH_ENVPATH=$PATH
	fi

This has the advantage of letting me check later whether something else 
has changed the path, and even force it back to its original state with 
PATH=$ZSH_ENVPATH.


From zsh-workers-return-24219-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 13 04:14:30 2007
Return-Path: <zsh-workers-return-24219-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14657 invoked from network); 13 Dec 2007 04:14:21 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Dec 2007 04:14:21 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 6047 invoked from network); 13 Dec 2007 04:14:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Dec 2007 04:14:13 -0000
Received: (qmail 14858 invoked by alias); 13 Dec 2007 04:14:09 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24219
Received: (qmail 14843 invoked from network); 13 Dec 2007 04:14:09 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 13 Dec 2007 04:14:09 -0000
Received: from virusfilter.dotsrc.org (bifrost [127.0.0.1])
	by spamfilter.dotsrc.org (Postfix) with ESMTP id A164E8058F54
	for <zsh-workers@sunsite.dk>; Thu, 13 Dec 2007 05:11:27 +0100 (CET)
Received: from vms048pub.verizon.net (vms048pub.verizon.net [206.46.252.48])
	by bifrost.dotsrc.org (Postfix) with ESMTP
	for <zsh-workers@sunsite.dk>; Thu, 13 Dec 2007 05:11:26 +0100 (CET)
Received: from torch.brasslantern.com ([71.121.18.67])
 by vms048.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JSY009OXZQTQEQ9@vms048.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Wed, 12 Dec 2007 22:13:42 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id lBD4De3L030781	for
 <zsh-workers@sunsite.dk>; Wed, 12 Dec 2007 20:13:41 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id lBD4DdgG030780	for zsh-workers@sunsite.dk; Wed,
 12 Dec 2007 20:13:39 -0800
Date: Wed, 12 Dec 2007 20:13:39 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: shebang consistency
In-reply-to: <20071212233135.GA458@scowler.net>
To: zsh-workers@sunsite.dk
Message-id: <071212201339.ZM30779@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20071212233135.GA458@scowler.net>
Comments: In reply to Clint Adams <clint@zsh.org>        "shebang consistency"
 (Dec 12,  6:31pm)
X-Virus-Scanned: ClamAV using ClamSMTP

On Dec 12,  6:31pm, Clint Adams wrote:
}
} Could we standardize on a single line so as to shorten the regex
} in my s/// ?

Well ...

#!/bin/env zsh  does not permit the possibility of adding the -f option,
so it's out.

Any other string needs to be edited to insert the local path to the
zsh binary, so for files that really are scripts it doesn't matter
what we start with, it'll be wrong as often as right.

I presume your s/// is doing what I'd otherwise suggest, which is that
"make install" fix up the #! line(s) when copying the files into place.
At that point it should be able to determine what the correct install
path for the binary would be.

(Why doesn't s:^#!.*[^ /]zsh:#!/bin/zsh: do the trick?  How much shorter
do you need to get?)

I guess I'd suggest standardizing on "#!/bin/zsh" plus options.

} Functions/Calendar/calendar_add:#!/bin/env zsh
} Functions/Example/cat:#! /usr/local/bin/zsh -f
} Functions/Example/zless:#!/usr/bin/zsh -f
} Functions/Misc/zkbd:#! /bin/zsh -f
} Functions/Misc/zcalc:#!/usr/local/bin/zsh -i
} Functions/Misc/checkmail:#! /usr/local/bin/zsh
} Functions/Misc/run-help:#!/usr/local/bin/zsh

Most of the files in Functions/ are not intended to be run as scripts
in any case, so the only reason for the #! line is so that clever
editors like vim and emacs can activate the correct syntax mode ...


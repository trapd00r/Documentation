From zsh-workers-request@math.gatech.edu Thu Dec 10 23:42:26 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7940 invoked from network); 10 Dec 1998 23:42:09 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (7795@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 10 Dec 1998 23:42:09 -0000
Received: (qmail 11768 invoked from network); 10 Dec 1998 09:46:44 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns2.primenet.com.au with SMTP; 10 Dec 1998 09:46:44 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id EAA18350;
	Thu, 10 Dec 1998 04:38:52 -0500 (EST)
Resent-Date: Thu, 10 Dec 1998 04:38:52 -0500 (EST)
Message-Id: <9812100922.AA18305@ibmth.df.unipi.it>
To: zsh-workers@math.gatech.edu
Subject: Re: PATCH: wrapper functions in modules 
In-Reply-To: "Sven Wischnowsky"'s message of "Thu, 10 Dec 1998 10:22:18 NFT."
             <199812100922.KAA03277@beta.informatik.hu-berlin.de> 
Date: Thu, 10 Dec 1998 10:22:17 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"Toi4j2.0.fU4.iQvRs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4741
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Sven Wischnowsky wrote:
> Alternatively I could change the code so that a module cannot be
> unloaded if it has defined `after'-functions and there are currently
> shell functions being executed.

Would it be possible for zmodload in such circumstances to mark the
function for unloading after the wrapper has been called, and then do
so?

> I think we could even change the code so that unloading a module
> automatically removes builtins, conditions, and wrapper functions
> defined by it...

It's probably OK leaving that explicitly in the cleanup function until
it gets too unwieldy there.

> And another question: why is the variable containing the paths to
> module-directories named `module_path'? Comparing this with `fpath' I
> would have expected `mpath' (and `MPATH') or something like that.

And someone pointed out MODULE_PATH is a bit generic for a
shell-specific variable, you never know what something else is going
to do with the environment variable.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


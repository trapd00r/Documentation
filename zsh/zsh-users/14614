From zsh-users-return-14614-mason-zsh=primenet.com.au@zsh.org Fri Nov 27 14:06:41 2009
Return-Path: <zsh-users-return-14614-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20776 invoked by alias); 27 Nov 2009 14:06:41 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14614
Received: (qmail 10594 invoked from network); 27 Nov 2009 14:06:38 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_DNSWL_LOW autolearn=ham version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Fri, 27 Nov 2009 14:06:28 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-users@zsh.org
Subject: Re: Handling Command Not Found
Message-ID: <20091127140628.3e09f791@news01>
In-Reply-To: <ad024e3c0911262212n732a18ebt2a66a3ad77331402@mail.gmail.com>
References: <ad024e3c0911262212n732a18ebt2a66a3ad77331402@mail.gmail.com>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 27 Nov 2009 14:06:29.0255 (UTC) FILETIME=[D0BA0970:01CA6F6A]
X-Scanned-By: MailControl A-09-22-03 (www.mailcontrol.com) on 10.71.0.134

On Fri, 27 Nov 2009 00:12:04 -0600
Adam Walters <ajwalters@gmail.com> wrote:
> I was wondering if zsh had a way to handle command not found by running a
> function?  Ideally, I would like to pipe the input of a command not into a
> ruby script.  Is there any way to accomplish this in zsh?

You can define a command_not_found_handler function in recent versions
of the shell (4.3.something-or-other).  See the zshmisc manual page
under COMMAND EXECUTION.

For example,

command_not_found_handler() {
  if [[ $1 = foo ]]; then
    print "I handled foo"
    return 0
  else
    return 127
   fi
}

% foo
I handled foo
% print $?
0
% zsh: command not found: not_foo
% print $?
127

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


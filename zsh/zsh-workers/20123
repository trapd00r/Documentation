From zsh-workers-return-20123-mason-zsh=primenet.com.au@sunsite.dk Fri Jul 02 09:37:48 2004
Return-Path: <zsh-workers-return-20123-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29252 invoked from network); 2 Jul 2004 09:37:47 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 2 Jul 2004 09:37:47 -0000
Received: (qmail 2926 invoked from network); 2 Jul 2004 10:50:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 2 Jul 2004 10:50:09 -0000
Received: (qmail 15552 invoked by alias); 2 Jul 2004 09:37:33 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20123
Received: (qmail 15543 invoked from network); 2 Jul 2004 09:37:33 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.85)
  by sunsite.dk with SMTP; 2 Jul 2004 09:37:33 -0000
Received: (qmail 2755 invoked from network); 2 Jul 2004 10:50:04 -0000
Received: from lhuumrelay3.lnd.ops.eu.uu.net (62.189.58.19)
  by a.mx.sunsite.dk with SMTP; 2 Jul 2004 10:49:50 -0000
Received: from MAILSWEEPER01.csr.com (mailhost1.csr.com [62.189.183.235])
	by lhuumrelay3.lnd.ops.eu.uu.net (8.11.0/8.11.0) with ESMTP id i629arv19933
	for <zsh-workers@sunsite.dk>; Fri, 2 Jul 2004 09:36:53 GMT
Received: from EXCHANGE02.csr.com (unverified [192.168.137.45]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T6a8bd5b6b7c0a88d012f4@MAILSWEEPER01.csr.com>;
 Fri, 2 Jul 2004 10:36:12 +0100
Received: from news01.csr.com ([192.168.143.38]) by EXCHANGE02.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 2 Jul 2004 10:37:36 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.12.11/8.12.11) with ESMTP id i629aokg017103;
	Fri, 2 Jul 2004 10:36:50 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.12.11/8.12.11/Submit) with ESMTP id i629amMT017100;
	Fri, 2 Jul 2004 10:36:50 +0100
Message-Id: <200407020936.i629amMT017100@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: ss@aaoepp.aao.GOV.AU, zsh-workers@sunsite.dk
Subject: Re: 4.2.0: failed to load module 
In-reply-to: "Scott Smedley"'s message of "Fri, 02 Jul 2004 11:52:32 +1000."
             <20040702015232.GA2111@aaopcnss.aao.gov.au> 
Date: Fri, 02 Jul 2004 10:36:48 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 02 Jul 2004 09:37:36.0918 (UTC) FILETIME=[35AC4360:01C46018]
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=BAYES_50 autolearn=no 
	version=2.63
X-Spam-Hits: 0.0

Scott Smedley wrote:
> On all 3 systems "make test" indicated:
> 
> ./A06assign.ztst: starting.
> Test ./A06assign.ztst failed: bad status 1, expected 0 from:
>  typeset -A hash
>  hash=(one 1)
>  h+=string
>  [[ $h[@] == string ]]
> Was testing: add scalar to association
> ./A06assign.ztst: test failed.

This is weird because (i) the test doesn't actually make a lot of sense
as written (ii) it should just happen to work anyway; we haven't had, so
far as I remember, any other reports of this failure.  So I'm not really
sure what this indicates.

(In fact, you can't add a single scalar to an association, so I think
it's trying to test the fact that instead the shell resets the array to
a scalar and gives it the value after the +=.  Whether this is better
than printing an error and refusing to do the operation I'm not entirely
convinced.  Anyway, if that's what it's trying to do the test should
look like:

typeset -A hash
hash=(one 1)
hash+=string
[[ $hash[@] = string ]]

But that should have the same effect as using the previously undefined
variable h.)

> Nevertheless, everything is working ok on my RH9 system & 1 of my RH7.2
> systems. On the other RH7.2 system however, I am getting the following
> error message:
> 
> /etc/profile:10: failed to load module: zsh/rlimits
> /etc/zshrc:27: failed to load module: zsh/zle
> /etc/zshrc:bindkey:27: autoload failed
> 
> & then a whole bunch of consequential errors.

That's the sort of message you get if the modules aren't installed
properly or aren't visible.  By default they would be in
  /usr/local/lib/zsh/4.2.0/zsh/rlimits.so
  /usr/local/lib/zsh/4.2.0/zsh/zle.so
and so on, depending where you installed zsh.  Make sure those files are
readable on that system.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

This footnote also confirms that this email message has been swept by
MIMEsweeper for the presence of computer viruses.

www.mimesweeper.com
**********************************************************************


From zsh-workers-return-21136-mason-zsh=primenet.com.au@sunsite.dk Wed Apr 13 09:42:18 2005
Return-Path: <zsh-workers-return-21136-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28096 invoked from network); 13 Apr 2005 09:42:16 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Apr 2005 09:42:16 -0000
Received: (qmail 54551 invoked from network); 13 Apr 2005 09:42:08 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Apr 2005 09:42:08 -0000
Received: (qmail 9402 invoked by alias); 13 Apr 2005 09:42:05 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21136
Received: (qmail 9393 invoked from network); 13 Apr 2005 09:42:04 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 13 Apr 2005 09:42:04 -0000
Received: (qmail 54290 invoked from network); 13 Apr 2005 09:42:04 -0000
Received: from mailhost1.csr.com (HELO MAILSWEEPER01.csr.com) (81.105.217.43)
  by a.mx.sunsite.dk with SMTP; 13 Apr 2005 09:41:59 -0000
Received: from exchange03.csr.com (unverified [10.100.137.60]) by MAILSWEEPER01.csr.com
 (Content Technologies SMTPRS 4.3.12) with ESMTP id <T70478de84b0a6c8d017f4@MAILSWEEPER01.csr.com> for <zsh-workers@sunsite.dk>;
 Wed, 13 Apr 2005 10:40:19 +0100
Received: from news01.csr.com ([10.103.143.38]) by exchange03.csr.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 13 Apr 2005 10:44:57 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.13.1/8.12.11) with ESMTP id j3D9fuoa020211
	for <zsh-workers@sunsite.dk>; Wed, 13 Apr 2005 10:41:57 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.13.1/8.13.1/Submit) with ESMTP id j3D9fuYL020208
	for <zsh-workers@sunsite.dk>; Wed, 13 Apr 2005 10:41:56 +0100
Message-Id: <200504130941.j3D9fuYL020208@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: PATCH: traps test
Date: Wed, 13 Apr 2005 10:41:56 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 13 Apr 2005 09:44:57.0112 (UTC) FILETIME=[73C74980:01C5400D]
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

This is a trivial fix to stop the test suite leaving a file TRAPEXIT in
the Test directory.

Index: Test/C03traps.ztst
===================================================================
RCS file: /cvsroot/zsh/zsh/Test/C03traps.ztst,v
retrieving revision 1.5
diff -u -r1.5 C03traps.ztst
--- Test/C03traps.ztst	6 Feb 2005 20:36:45 -0000	1.5
+++ Test/C03traps.ztst	13 Apr 2005 09:40:25 -0000
@@ -59,8 +59,8 @@
 
 # $ZTST_exe is relative to the parent directory.
 # We ought to fix this in ztst.zsh...
-  cd ..
-  $ZTST_exe -fc 'TRAPEXIT() { print Exited.; }'
+  (cd ..
+  $ZTST_exe -fc 'TRAPEXIT() { print Exited.; }')
 0:EXIT traps on a script
 >Exited.
 

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


**********************************************************************
This email and any files transmitted with it are confidential and
intended solely for the use of the individual or entity to whom they
are addressed. If you have received this email in error please notify
the system manager.

**********************************************************************


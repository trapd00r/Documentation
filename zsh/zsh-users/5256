From zsh-users-return-5256-mason-zsh=primenet.com.au@sunsite.dk Fri Aug 16 09:51:55 2002
Return-Path: <zsh-users-return-5256-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2333 invoked from network); 16 Aug 2002 09:51:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Aug 2002 09:51:53 -0000
Received: (qmail 926 invoked by alias); 16 Aug 2002 09:51:34 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 5256
Received: (qmail 912 invoked from network); 16 Aug 2002 09:51:32 -0000
X-VirusChecked: Checked
cc: Zsh users list <zsh-users@sunsite.dk>
In-reply-to: <3D5C00EE.E31D18A1@progress.com>
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <20942.1028803921@csr.com> <3D5C00EE.E31D18A1@progress.com>
To: Bill Burton <billb@progress.com>
Subject: _ant (was Re: zsh 4.0.5/4.1.0 release soon?)
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-ID: <3104.1029491104.1@logica.com>
Date: Fri, 16 Aug 2002 10:51:01 +0100
Sender: kiddleo@logica.com
Message-Id: <E17fdkz-00019j-00@bimbo.logica.co.uk>

On 15 Aug, Bill Burton wrote:
> 
> Don't know this is worth waiting for, but I've written support for the
> Jakarta Ant build tool (http://jakarta.apache.org/ant/) using the new

> I should be able to update my existing implementation for the Ant 1.5
> options and submit it early next week.

Felix mentioned that I submitted such a function last week and it does
include the ant 1.5 options. However I don't really know a lot about
ant so it is likely that my function doesn't do the best thing in all
cases and there may well be some aspects of yours that it will be
useful to take. So I suggest that you don't worry about the ant 1.5
options and that we try to take the best from each of our functions.

> If anyone has any suggestions or examples that would be helpful in
> implementing caching, that would be appreciated.  The simple approach I
> was considering was to save the path and timestamp of the build file along
> with the targets and their associated descriptions as variables in
> memory.  If either the path to the build file changed or the timestamp of

Caching is certainly an option. We should be able associate caches with
the appropriate build.xml file though datestamping them would be tricky
unless we load the stat module.

As Felix mentioned, I used sed to get the targets quickly. I don't have
many build.xml files to have tested that on so if anyone could see if it
breaks on any of theirs, that would be useful. It would be easy to
contrive a build.xml to break it but I'd be interested to know if there 
are many other there that break it without trying.

One option would be to use the call-command style (currently only used
for make) to decide between the slow but correct ant solution and the
quick but potentially wrong sed solution.

Also, I've just realised that I forgot to remove the code for completing
the value of $ANT_ARGS from _ant before committing it on the 4.0 branch
so that'll need cleaning up.

Oliver

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


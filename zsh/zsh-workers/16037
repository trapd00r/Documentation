From zsh-workers-return-16037-mason-zsh=primenet.com.au@sunsite.dk Sun Oct 14 19:04:43 2001
Return-Path: <zsh-workers-return-16037-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1745 invoked from network); 14 Oct 2001 19:04:18 -0000
Received: from unknown (HELO sunsite.dk) (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 14 Oct 2001 19:04:18 -0000
Received: (qmail 13367 invoked by alias); 14 Oct 2001 19:03:20 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16037
Received: (qmail 13351 invoked from network); 14 Oct 2001 19:03:18 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: differences between the two branches 
In-reply-to: "Bart Schaefer"'s message of "Sat, 13 Oct 2001 07:39:37 -0000."
             <1011013073937.ZM368@candle.brasslantern.com> 
Date: Sat, 14 Oct 2000 20:02:48 +0100
From: Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Message-Id: <20001014190253.4AC4E14283@pwstephenson.fsnet.co.uk>

Bart Schaefer wrote:
> } Hmm, a bit of perl could probably help here.

Thanks.  I've just been looking through this, except for a few which
went way before 4.0.2 which I haven't bothered to look at again (some in
the list below still predate 4.0.2).  This obviously dupliates Oliver's
selection to a certain extent, but I'm a sucker for a perl script.

Here's a list of things which could go, if it's not too much work, and
those that probably shouldn't.

I will not be moving other people's patches to 4.0 myself, now or ever,
because I'm too lazy and too disorganised.  So decide based on the
following, or otherwise.  For the same reason, there's a middle category
between `could go' and `probably shouldn't go' called `my brain hurts'
(you have to imagine the knotted handkerchief, tank top and ape-like
posture).  Some of the ones in the last category are simply there
because they're new and would actually be entirely harmless to tranfer.


Could go if not too much work
============================

> -	* unposted: Completion/compinstall: spotted by Bart: assignments
> -	when finding $fpath if not set in current shell were completely
> -	garbled.

That's me.  That should go across, but I'll have to do it by hand.

> only in current/ChangeLog: 16xxx
> only in branch/ChangeLog: 16018

Oliver: I think these are probably the same, so it's probably gone in
anyway. It fixes compilation for Darwin, which would certainly
be a good idea.

> only in current/ChangeLog: 15812

Bart: doc changes for parameters.  Might make sense to copy these over.
 
> only in current/ChangeLog: 15739
> only in current/ChangeLog: 15740

Clint: compaudit, probably OK, maybe even necessary on Debian.
 
> only in current/ChangeLog: 15721

Me: LICENCE: Oliver pointed this out and it's now in.

> only in current/ChangeLog: 15713

Wayne: _rpm: probably OK.

> only in current/ChangeLog: 15702

Bart: Doc improvements, probably could go across.

> only in current/ChangeLog: 15676

Bart: minor test tweaks.  Might be a good idea since they remove some
unnecessary failures.

> only in current/ChangeLog: 15653

Sven: Restore traditional insert-tab behaviour.  This was certainly a
bug in that it disagreed with the doc, so probably ought to be in 4.0.
 
> only in current/ChangeLog: 15638

Sven: correction with matchers.  Definitely a bug, so if this is in 4.0
should go across.

> only in current/ChangeLog: 15596

Wayne: silence compiler, fine if applicable.

> only in current/ChangeLog: 15583

Me: installfns.sh installed CVS stuff, may need to go across.

> only in current/ChangeLog: 15508

Me: _cvs tags didn't work with one command, should go across if not
already there.

> only in current/ChangeLog: 15488

Bart: doc tweaks, probably reasonable to apply these.
 
> only in current/ChangeLog: 15375

Bart: explain setopt CORRECT, could probably go across.
 
> only in current/ChangeLog: 15354

Bart: Doc indexing, useful but I don't know how hard this is to transfer.
 
> only in current/ChangeLog: 15279

Me: expand an expansion description, probably OK to push back.
 
> only in current/ChangeLog: 15181

Andrej: kpic -> KPIC; I thought this *was* for 4.0.2?

> only in current/ChangeLog: 15180

Andrej: fix AIX configuration, should almost certainly go across if it's
been tested (does sourceforge have AIX?)

> only in current/ChangeLog: 15099

Andrej: test suite handles `unimplemented', be nice to have this in 4.0
but may well need some work.

> only in current/ChangeLog: 15057

Bart: PRINT_EXIT_VALUE: didn't work, so probably this ought to go back.
 
> only in current/ChangeLog: 15023, 15027
> only in current/ChangeLog: 15038

Bart: fix POSIX `for', looks OK to copy.
Andrej: test POSIX for syntax, depends on fix.

My brain hurts just thinking about it
=====================================

> only in current/ChangeLog: 16002

Sven: Fix expand style with prefix:  probably OK, but I don't know if
it's relevant or easy to port.

> only in current/ChangeLog: 15949
> only in current/ChangeLog: 15994

Me: list-suffixes and other stuff in compinstall.  I may simply copy the
whole of compinstall across (see above).

> only in current/ChangeLog: 15944

Sven: `suffix' in expand style always respected.  Arguably a bug fix,
but arguably not.
 
> only in current/ChangeLog: 15836
> only in current/ChangeLog: 15806
> only in current/ChangeLog: 15809

Wayne: `r' problem reported by Bart.  Dunno if this was in 4.0.

> only in current/ChangeLog: 15650
> only in current/ChangeLog: 15669

Sven: approximation and ~ problems.  Dunno, it's too hard to work out
the consequences.

> only in current/ChangeLog: 15615

Sven: complicated matcher thing it would take me half an hour to
understand.
 
> only in current/ChangeLog: 15584

Sven: zwc problem, dunno if this is relevant.

> only in current/ChangeLog: 15498

Me: Consequent on moving zle builtins to zshzle.  Must check if that was
already in 4.0.

> only in current/ChangeLog: 15198

Bart: _tilde return value, OK if applicable, but may well not be.
 
> only in current/ChangeLog: 15094

Clint: his prompt theme, dunno.

> only in current/ChangeLog: 15060

Bart: A02alias: can't keep track of whether this applies or not.
 
> only in current/ChangeLog: 15050, 15054

Bart: POSIX exit statuses.  Change of behaviour, so not sure.

Probably shouldn't go
=====================

> only in current/ChangeLog: users/4157 (plus workers/15674)

Bart: upgrade to _man, probably too much out of sync with 4.0 by now.
15674 looks like a bug fix in any case.

> only in current/ChangeLog: unposted; based on 14679 (me) and 14693 (Bart)

Andrej: autoconf 2.50 fixes.  Not necessary; for consistency, we're
sticking with the the old version for 4.0.


> +2001-09-21  Andrew Main (Zefram)  <zefram@zsh.org>
> +
> +	* Doc/Zsh/contrib.yo, Functions/Misc/tetris: Tetris game for ZLE.
> +

Not necessary.

> only in current/ChangeLog: 15608
> only in current/ChangeLog: Bart: 15106, small changes in 15152
> only in current/ChangeLog: 15945

Bart: improves _cd.  Sven: improve _cd.
I can't actually work out what the combined effect is, but there are
almost certainly too many _cd, _tilde etc. changes.


> only in current/ChangeLog: Back out 15266

Me: That didn't go in anyway.

> only in current/ChangeLog: 16006

Clint: _mailboxes.  New style, so doesn't need to be transferred.  I'd
prefer all new behaviour like that, unless strictly necessary for
compatibility, to appear in upgrades rather than bug fixes.

> only in current/ChangeLog: 16005

Clint: mount: there's a lot of this, let's not get into this on 4.0, it
may still be dragging on.

> only in current/ChangeLog: 16000

Clint: new _debchange, not necessary but harmless.

> only in current/ChangeLog: 15995

Sven: show directories with globbed files by default.  I don't think we
should change this in mid-4.0.

> only in current/ChangeLog: 15991

Sven: file completion display.  I'm not worried about this, myself.
 
> only in current/ChangeLog: 15987

Oliver: tcp.c, irrelevant.

> only in current/ChangeLog: 15980

Me: zcalc, irrelevant.
 
> only in branch/ChangeLog: 15974
> only in current/ChangeLog: 15931
> only in current/ChangeLog: 15917
> only in current/ChangeLog: 15844

Me: 15974 only on branch because it documents the TRAPEXIT bug which is
fixed in 4.1 by 15844, 15917, 15931, but not necessarily stable, so I'll
leave this.
 
> only in current/ChangeLog: 15973

Oliver: printf: irrelevant

> only in current/ChangeLog: 15964

Andrej: tcp.c, irrelevant.

> only in current/ChangeLog: 15946

Sven: compresult.c, don't think this is an issue for 4.0

 
> only in current/ChangeLog: 15919

Clint: tcp.c, irrelevant.

> only in current/ChangeLog: 15895

Bart: zftp has changed too much.

> only in current/ChangeLog: 15886

Clint: tcp.c, irrelevant.
 
> only in current/ChangeLog: 15851, 15948

Oliver: printf, irrelevant.

> only in current/ChangeLog: 15762
> only in current/ChangeLog: 15763
> only in current/ChangeLog: 15766
> only in current/ChangeLog: 15768
> only in current/ChangeLog: 15770
> only in current/ChangeLog: 15772
> only in current/ChangeLog: 15779
> only in current/ChangeLog: 15780
> only in current/ChangeLog: 15783

Clint: tcp.c, irrelevant.
 
> only in current/ChangeLog: 15765

Clint: [[:ascii:]], not necessary.
 
> only in current/ChangeLog: 15734

Zefram: zle user key maps, overdue but too late now for 4.0.
 
> only in current/ChangeLog: 15722

Me: _sh, not necessary.

> only in current/ChangeLog: 15720

Bart/me: zmv: not necessary.

> only in current/ChangeLog: 15708

Bart: quoted parameter parsing, probably best left alone for 4.0.

> only in current/ChangeLog: 15647

Me: zcalc, irrelevant.
 
> only in current/ChangeLog: 15606

Oliver: update _dd, depends on new -w argument to _values.
 
> only in current/ChangeLog: 15597

Sven: _values -w, new option so probably not necessary.

> only in current/ChangeLog: 15586
> only in current/ChangeLog: 15590

Me, Oliver: aliases in = context.  Not changed in 4.0.
 
> only in current/ChangeLog: 15588

Sven: _values stuff which gives me a headache.

> only in current/ChangeLog: 15585

Me: bash functions, not necessary.

> only in current/ChangeLog: 15549

Sven: Y03arguments.ztst resulting from other change only
 
> only in current/ChangeLog: 15526

Sven: complicated _arguments stuff.

> only in current/ChangeLog: 15511

Me: zcalc, irrelevant.

> only in current/ChangeLog: 15489
> only in current/ChangeLog: 15509

Sven, Bart: _describe technicality.

> only in current/ChangeLog: 15507

Me: zcalc, irrelevant.
 
> only in current/ChangeLog: 15477
> only in current/ChangeLog: 15482
> only in current/ChangeLog: 15484
> only in current/ChangeLog: 15485

Sven: long/short options thing.  Not necessary to backport this.
 
> only in current/ChangeLog: 15472

Bart: remove doc for change which never happened even on 4.1.
 
> only in current/ChangeLog: 15468

Sven: improve _ssh, probably not necessary.
 
> only in current/ChangeLog: 15432

Me: another bash function, not necessary.

> only in current/ChangeLog: 15389
> only in current/ChangeLog: 15407
> only in current/ChangeLog: 15409
> only in current/ChangeLog: 15415

Sven: long/short options complexity (15409 was a core dump), only 4.1.

> only in current/ChangeLog: 15327
> only in current/ChangeLog: 15329
> only in current/ChangeLog: 15334

Me: line numbering, thing we should steer clear of putting this into 4.0.
 
> only in current/ChangeLog: 15305

Bart: xtrace in zle funcs, probably unnecessary.
 
> only in current/ChangeLog: 15291, 15292
> only in current/ChangeLog: 15304

Me/Bart: fix `scalar=foo; (( scalar = 0 ))', too complicated to try to
backport.
 
> only in current/ChangeLog: 15288

Me: bash functions, not necessary.

> only in current/ChangeLog: 15278 (Sven), 15390

Sven: New file completion stuff, not necessary.

> only in current/ChangeLog: 15271

Bart: pcre, not necessary.
 
> only in current/ChangeLog: 15266

Me: wrong anyway.
 
> only in current/ChangeLog: 15265

Me: new `for' syntax, not necessary.
 
> only in current/ChangeLog: 15211
> only in current/ChangeLog: 15234
> only in current/ChangeLog: 15242
> only in current/ChangeLog: 15250

Clint: pcre, not necessary.
 
> only in current/ChangeLog: 15228

Clint: AC_CHECK_LIB -> AC_SEARCH_LIBS.  Best to leave this, I should
think.
 
> only in current/ChangeLog: 15169

Oliver/Me: I said explicitly I wouldn't put this in 4.0

> only in current/ChangeLog: 15123

Sven: _cd and _tilde, I'm sick of this, either we leave well alone or
copy the current versions straight back to 4.0.
 
> only in current/ChangeLog: 15087
> only in current/ChangeLog: 15115

Sven: handle disowning stopped jobs, new feature, probably leave out
though I don't think it's really a problem.
 
> only in current/ChangeLog: 15056

Bart: magic space change, deliberately left out, I believe.

> only in current/ChangeLog: 15030

Me: definitely non-POSIX for, not to go in.

> only in current/ChangeLog: 15029

Sven: _man improvements, probably too complicated.

> only in current/ChangeLog: 14952

Sven: zwc stuff, probably best left out.
 
> only in current/ChangeLog: 14939

Me: was complete crap.

> only in current/ChangeLog: 14931

Andrej: zftp, prresumably tcp.c-dependent.

> only in current/ChangeLog: 14915
> only in current/ChangeLog: 14929

Me: can't de-readonlify a special; make positional parameter arrays (but
not their elements) readonly.  Not to be put into 4.0.

-- 
Peter Stephenson <pws@pwstephenson.fsnet.co.uk>
Work: pws@csr.com
Web: http://www.pwstephenson.fsnet.co.uk


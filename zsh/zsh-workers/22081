From zsh-workers-return-22081-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 15 04:35:12 2005
Return-Path: <zsh-workers-return-22081-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13671 invoked from network); 15 Dec 2005 04:35:10 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Dec 2005 04:35:10 -0000
Received: (qmail 78236 invoked from network); 15 Dec 2005 04:35:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Dec 2005 04:35:04 -0000
Received: (qmail 16119 invoked by alias); 15 Dec 2005 04:34:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22081
Received: (qmail 16110 invoked from network); 15 Dec 2005 04:34:57 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 15 Dec 2005 04:34:57 -0000
Received: (qmail 77421 invoked from network); 15 Dec 2005 04:34:57 -0000
Received: from vms044pub.verizon.net (206.46.252.44)
  by a.mx.sunsite.dk with SMTP; 15 Dec 2005 04:34:56 -0000
Received: from candle.brasslantern.com ([71.116.81.225])
 by vms044.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-4.02 (built Sep  9 2005))
 with ESMTPA id <0IRI00FG7VE62LQ4@vms044.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Wed, 14 Dec 2005 22:34:55 -0600 (CST)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id jBF4YrYZ003908;
 Wed, 14 Dec 2005 20:34:53 -0800
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id jBF4Yr2h003907; Wed, 14 Dec 2005 20:34:53 -0800
Date: Thu, 15 Dec 2005 04:34:52 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Globbing feature suggestion
In-reply-to: <871x0ge5ge.fsf@shazam.localnet>
To: Jonathan Hankins <jonathan-hankins@mindspring.com>
Cc: zsh-workers@sunsite.dk
Message-id: <1051215043452.ZM3906@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <87irtt4uno.fsf@shazam.localnet>
	<1051213041649.ZM21953@candle.brasslantern.com>
	<871x0ge5ge.fsf@shazam.localnet>
Comments: In reply to Jonathan Hankins <jonathan-hankins@mindspring.com>
 "Re: Globbing feature suggestion" (Dec 13,  9:13pm)

[zsh-workers copied]

On Dec 13,  9:13pm, Jonathan Hankins wrote:
}
} >  -nogroup is the glob qualifier
} >  (e['stat -s -A reply +gid $REPLY;
} > reply=(${${(M)reply:#<->}/<->/$REPLY})'])
} 
} This doesn't work for me -- stat -s returns '???' when there is no
} pw/grent for the the u/gid.

Urk.  Sorry about that; I don't actually *have* any files with unknown
uid/gid on my system, but I had assumed "stat" would return the numeric
ID in the absence of a name, the way "ls -l" does.

In fact I think it's pretty darn useless to return '???' for all unknown
IDs, as if they were equivalent.  Would anyone seriously object if that
were changed?

} It works if I change it to:
} 
}   -nogroup is the glob qualifier
}   (e['stat -s -A reply +gid $REPLY;
}   reply=(${${(M)reply:#???}/???/$REPLY})'])

As that's written, ??? is a pattern matching any three characters, so if
you have any 3-letter usernames on your system, that would improperly
include them.  You need \?\?\? instead.


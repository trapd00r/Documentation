From zsh-workers-request@math.gatech.edu Fri Jan 22 14:56:54 1999
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29683 invoked from network); 22 Jan 1999 14:56:52 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 22 Jan 1999 14:56:52 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id JAA23124;
	Fri, 22 Jan 1999 09:51:33 -0500 (EST)
Resent-Date: Fri, 22 Jan 1999 09:51:33 -0500 (EST)
Date: Fri, 22 Jan 1999 15:50:11 +0100 (MET)
Message-Id: <199901221450.PAA28628@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@math.gatech.edu
In-reply-to: Sven Wischnowsky's message of Fri, 22 Jan 1999 14:15:26 +0100
	(MET)
Subject: Re: experimental new style completion
Resent-Message-ID: <"jXU8r1.0.Ff5.r19gs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4950
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


I wrote:

> ...
>
> Most importantly it contains a
> function showing the use of `compadd': with this function it is easy
> to get partial-path completion for almost anything (including what was 
> previously `-g' patterns).
>
> ...

I forgot to handle fignore inside this function.

Bye
 Sven

*** Src/example.old	Fri Jan 22 15:47:54 1999
--- Src/example	Fri Jan 22 15:48:18 1999
***************
*** 238,243 ****
--- 238,244 ----
        s=( "${(@)s:gs.**.*.}" )
        for i in $a; do
          b=( $~i/(#l)$~s )
+         eval b\=\( \$\{b:/\*\(${(j:|:)fignore}\)\} \)
          [[ $#b -ne 0 ]] && c=( $c $i )
        done
        if [[ $#c -eq 0 ]] then
***************
*** 245,250 ****
--- 246,252 ----
        elif [[ $#c -ne 1 ]] then
          a="$epre$pa"
          c=( $~c/(#l)$~s )
+         eval c\=\( \$\{c:/\*\(${(j:|:)fignore}\)\} \)
  	c=( ${c#$a} )
          for i in $c; do
            compadd -p "$pre$pa" -W "$a" -s "/${i#*/}" -f "${i%%/*}"
***************
*** 261,266 ****
--- 263,269 ----
    s=( $str$@ )
    s=( "${(@)s:gs.**.*.}" )
    b=( $~a(#l)$~s )
+   eval b\=\( \$\{b:/\*\(${(j:|:)fignore}\)\} \)
    compadd -p "$pre$pa" -W "$epre$pa" -f ${b#$a}
  }
  

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


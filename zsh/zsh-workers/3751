From zsh-workers-request@math.gatech.edu Thu Jan 29 14:10:39 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 24832 invoked from network); 29 Jan 1998 14:10:35 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 29 Jan 1998 14:10:35 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id IAA21931;
	Thu, 29 Jan 1998 08:39:17 -0500 (EST)
Resent-Date: Thu, 29 Jan 1998 08:39:17 -0500 (EST)
Sender: tandr@ptc.com
Message-Id: <34D0866C.BB50C0F4@ptc.com>
Date: Thu, 29 Jan 1998 15:38:52 +0200
From: Andrei Tcherepanov <tandr@ptc.com>
Organization: Parametric Technology Corp. (Israel)
X-Mailer: Mozilla 4.04j2 [en] (X11; I; SunOS 5.5.1 sun4m)
Mime-Version: 1.0
To: Andrew Main <zefram@tao.co.uk>
Cc: zsh-workers@math.gatech.edu
Subject: Re: shared libs in zsh-3.1.2-zefram3
References: <199801291328.NAA16599@taos.demon.co.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"hr5YP2.0.cM5.4Q8qq"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/3751
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Andrew Main wrote:
> 
> Andrei Tcherepanov wrote:
> >after applying patch to scripts I did
> >CC='cc -native -Qn -s' ./configure --enable-dynamic
> >gmake
> >
> >It does not build ANY *.so files !!! e.g. it make all modules
> >static.
> 
> This suggests that the configure tests failed to create working shared
> libraries.  (I'm rather suspicious about putting "-s" into $CC -- it go
> in $LDFLAGS, and it is there by default -- but I don't think that should
> make any difference on Solaris.)  What did configure output?
> 
> -zefram

so I did run configure one more

the output is

: 135 hey; rm config.cache 
: 136 hey; CC='cc -native -Qn' ./configure --enable-dynamic 
creating cache ./config.cache
configuring for zsh 3.1.2-zefram3
checking host system type... sparc-sun-solaris2.5.1
checking for gcc... cc -native -Qn
checking whether the C compiler (cc -native -Qn  ) works... yes
checking whether the C compiler (cc -native -Qn  ) is a cross-compiler... no
checking whether we are using GNU C... no
checking how to run the C preprocessor... cc -native -Qn -E
checking for working const... yes
checking for cc -native -Qn option to accept ANSI C... 
checking whether to use prototypes... yes
checking size of long... 4
checking for working alloca.h... yes
checking for alloca... yes
checking if the compiler supports union initialisation... yes
checking if signed to unsigned casting is broken... no
checking if the compiler supports variable-lenth arrays... no
checking whether make sets ${MAKE}... yes
checking for a BSD compatible install... ./install-sh -c
checking for mawk... no
checking for gawk... gawk
checking for yodl... no
checking for dirent.h that defines DIR... yes
checking for opendir in -ldir... no
checking for ANSI C header files... yes
checking whether time.h and sys/time.h may both be included... yes
checking whether stat file-mode macros are broken... no
checking for sys/wait.h that is POSIX.1 compatible... yes
checking for sys/time.h... yes
checking for sys/times.h... yes
checking for sys/select.h... yes
checking for termcap.h... no
checking for termio.h... yes
checking for termios.h... yes
checking for sys/param.h... yes
checking for sys/filio.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for limits.h... yes
checking for fcntl.h... yes
checking for libc.h... no
checking for sys/utsname.h... yes
checking for sys/resource.h... yes
checking for locale.h... yes
checking for errno.h... yes
checking for stdlib.h... yes
checking for unistd.h... yes
checking for sys/capability.h... no
checking for dlfcn.h... yes
checking for conflicts in sys/time.h and sys/select.h... no
checking ut_host in struct utmp... no
checking ut_host in struct utmpx... yes
checking POSIX termios... yes
checking TIOCGWINSZ in termios.h... yes
checking for sys/ptem.h... yes
checking for tgetent in -ltermcap... yes
checking for getdomainname... no
checking for getdomainname in -lnsl... yes
checking for dlopen in -ldl... yes
checking for cap_init in -lcap... no
checking if an include file defines ospeed... no
checking if you must define ospeed... yes
checking if tgetent accepts NULL... yes
checking return type of signal handlers... void
checking for pid_t... yes
checking for off_t... yes
checking for mode_t... yes
checking for uid_t in sys/types.h... yes
checking for size_t... yes
checking for sigset_t... yes
checking for struct timezone... yes
checking whether getpgrp takes no argument... yes
checking for working strcoll... yes
checking for memcpy... yes
checking for memmove... yes
checking for strftime... yes
checking for waitpid... yes
checking for select... yes
checking for tcsetpgrp... yes
checking for tcgetattr... yes
checking for strstr... yes
checking for lstat... yes
checking for getlogin... yes
checking for setpgid... yes
checking for gettimeofday... yes
checking for gethostname... yes
checking for mkfifo... yes
checking for wait3... yes
checking for difftime... yes
checking for sigblock... no
checking for sigsetmask... no
checking for sigrelse... yes
checking for sighold... yes
checking for killpg... yes
checking for sigaction... yes
checking for getrlimit... yes
checking for sigprocmask... yes
checking for setuid... yes
checking for seteuid... yes
checking for setreuid... yes
checking for setresuid... no
checking for setsid... yes
checking for strerror... yes
checking for nis_list... yes
checking for initgroups... yes
checking for fchdir... yes
checking for cap_init... no
checking for dlopen... yes
checking for dlerror... yes
checking for dlsym... yes
checking for dlclose... yes
checking what style of signals to use... POSIX_SIGNALS
checking where signal.h is located... /usr/include/sys/signal.h
checking where the RLIMIT macros are located... /usr/include/sys/resource.h
checking if rlim_t is quad_t... no
checking if the rlim_t is unsigned... yes
checking for rlim_t... yes
checking for /dev/fd filesystem... /dev/fd
checking for RFS superroot directory... no
checking for NIS... no
checking for NIS+... no
checking where utmp is located... /etc/utmp
checking where wtmp is located... /etc/wtmp
checking if typeahead needs FIONREAD... no
checking for brk() prototype in <unistd.h>... yes
checking for sbrk() prototype in <unistd.h>... yes
checking for ioctl prototype in <sys/ioctl.h>... no
checking if named FIFOs work... yes
checking if echo in /bin/sh interprets escape sequences... yes
checking if your system use ELF binaries... yes
checking if your dlsym() needs a leading underscore... no
checking if name clashes in shared objects are OK... yes
checking for working RTLD_GLOBAL... yes
checking whether symbols in the executable are available... yes
checking whether executables can be stripped... yes
checking whether libraries can be stripped... yes
updating cache ./config.cache
creating ./config.status
creating Makefile
creating Src/Makefile
creating Doc/Makefile
creating Etc/Makefile
creating Misc/Makefile
creating Util/Makefile
creating Functions/Makefile
creating StartupFiles/Makefile
creating config.h
config.h is unchanged
 
zsh configuration
-----------------
zsh version             : 3.1.2-zefram3
host operating system   : solaris2.5.1
source code location    : .
compiler                : cc -native -Qn
compiler flags          :  -O
executable linker flags :   -s 
module linker flags     :   -s -G
binary install path     : /usr/local/bin
man page install path   : /usr/local/man
info install path       : /usr/local/info


I did not found any occurrence of PIC flag anywhere in config.log
(but may be it cannot be found in it -- just info),
so it may be does not check it.



-- 
Thanks,
  Andrei ( tandr@ptc.com )


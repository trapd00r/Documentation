From zsh-workers-return-17900-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 04 15:34:20 2002
Return-Path: <zsh-workers-return-17900-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15909 invoked from network); 4 Nov 2002 15:34:19 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Nov 2002 15:34:19 -0000
Received: (qmail 7505 invoked by alias); 4 Nov 2002 15:33:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17900
Received: (qmail 7399 invoked from network); 4 Nov 2002 15:33:05 -0000
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Bug+patch: zsh fails to set itself as process group leader when running interactively
References: <87fzuuaq5h.fsf@ceramic.fifi.org>
From: Peter Stephenson <pws@csr.com>
In-Reply-To: <87fzuuaq5h.fsf@ceramic.fifi.org>
Date: Mon, 04 Nov 2002 14:02:23 +0000
Message-ID: <27866.1036418543@csr.com>
Sender: pws@csr.com

Philippe Troin <phil@fifi.org> writes:
> Found in 4.0.6 (and earlier).
> 
> If zsh is spawned interactively from another program, it fails to
> establish itself as a process group leader, leading to deliveries of
> terminal-related signals to both zsh and its parent. Generally the
> parent dies, leaving two shells reading from the same terminal.
>
> Terminal I/O is pretty tricky, so I hope I did not screw up anything :-)

I'm not really competent to look at terminal process group handling.  I am
committing this on the main trunk and if it seems to work we can put it on
4.0, too.  I suspect it's a good deal better than the old code.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 692070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


From zsh-workers-return-5720-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Mar 09 19:36:57 1999
Return-Path: <zsh-workers-return-5720-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24869 invoked from network); 9 Mar 1999 19:36:55 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Mar 1999 19:36:55 -0000
Received: (qmail 25869 invoked by alias); 9 Mar 1999 19:15:54 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5720
Received: (qmail 25861 invoked from network); 9 Mar 1999 19:15:51 -0000
From: DEW16@daimlerchrysler.com
X-Lotus-FromDomain: CHRYSLER
To: zsh-workers@math.gatech.edu
Message-ID: <0525672F.0069A984.00@lngodd02.notes.chrysler.com>
Date: Tue, 9 Mar 1999 14:17:15 -0500
Subject: Signal-handling problem
Mime-Version: 1.0
Content-type: text/plain; charset=us-ascii
Content-Disposition: inline

Okay, so I *LOVE*  zsh, but I seem to have a small problem.  For some reason, it
doesn't know how to handle signals.  For example, if I type:

dave(4):[~]% kill -l
ZERR

it only shows "ZERR".  If I do the same thing in bash, I get:

dave(173):[~]% kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL
 5) SIGTRAP      6) SIGABRT      7) SIGEMT       8) SIGFPE
 9) SIGKILL     10) SIGBUS      11) SIGSEGV     12) SIGSYS
13) SIGPIPE     14) SIGALRM     15) SIGTERM     16) SIGUSR1
17) SIGUSR2     18) SIGCHLD     19) SIGPWR      20) SIGWINCH
21) SIGURG      22) SIGIO       23) SIGSTOP     24) SIGTSTP
25) SIGCONT     26) SIGTTIN     27) SIGTTOU     28) SIGVTALRM
29) SIGPROF     30) SIGXCPU     31) SIGXFSZ

All signals seem to kill my zsh and dump a core.  Here's some gdb output from
one of them (caused by trying to suspend a job with CTRL-Z):

dave(3):[~]% gdb zsh core
GNU gdb 4.17
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "mips-sgi-irix6.4"...
Core was generated by `zsh'.
Program terminated with signal 10, Bus error.
Reading symbols from /usr/lib32/libcurses.so...done.
Reading symbols from /usr/lib32/libc.so.1...done.
#0  0x10057390 in dupstruct ()
(gdb) backtrace
#0  0x10057390 in dupstruct ()
#1  0x1004be04 in dotrapargs ()
#2  0x1004bf3c in dotrap ()
#3  0x1004b680 in handler ()
#4  <signal handler called>
#5  0xfa3cab8 in ksigprocmask () at crypt.c:105
(gdb)

Any ideas how I can fix this?  (I compiled 'out-of-the-box', with no changes to
the configure script.)  I really hope it's possible, because I *really* like
this shell!  My platform is an SGI Onyx2 running IRIX 6.4...

TIA,

Dave Wolfe
gForce Techologies
c/o DaimlerChrysler



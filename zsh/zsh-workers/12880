From zsh-workers-return-12880-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Oct 04 11:29:03 2000
Return-Path: <zsh-workers-return-12880-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20030 invoked from network); 4 Oct 2000 11:29:02 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Oct 2000 11:29:02 -0000
Received: (qmail 23724 invoked by alias); 4 Oct 2000 11:28:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12880
Received: (qmail 23716 invoked from network); 4 Oct 2000 11:28:52 -0000
Date: Wed, 4 Oct 2000 13:28:46 +0200 (MET DST)
Message-Id: <200010041128.NAA09491@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Andrej Borsenkow"'s message of Wed, 20 Sep 2000 15:08:32 +0400
Subject: Re: PATCH: _insert_all_matches bindable command


Andrej Borsenkow wrote:

> ... [ _insert_all_matches widget ]
> 
> Some comments:
> 
> ...
> 
> - I could not find a way to supress suffix addition. It is weird as it is
> added only to the last match anyway. Sven?

As I said in the mail I just sent, the insert-all-completions is
(still) a bit hackish, mostly I wasn't that sure about it myself and
because we got no reactions when it was added.

That suffix-on-the-last-match behaviour comes from the way it is
implemented, which is basically what a completion with accept-and-m-c
for all matches does. I didn't treat suffixes specially because 1) that
would have required extra code (not much), 2) I wasn't sure what would 
be preferred and 3) due to the auto-remove behaviour of all well-behaved
suffixes this didn't look like a big problem.

I could be convinced to change it: what do others think/prefer?

> - it does not work inside of menu selection, because it accepts selected match
> and clears list even before calling any widget. It does work in menu
> completion. Sven will have the final word, but, may be, menu selection should
> not accept the match and clear list at least for completion widgets. Also,
> there is subtle difference between menu completion and menu selection - menu
> selection adds space where menu completion does not. E.g.:

Bart already explained this. The special casing of completion widgets
you suggest... Hm. This /seems/ to make sense, except for the
then-difference between standard completion widgets (that have their
usual meaning in menu selection and don't leave at all) and
user-implemented widgets (where `user-implemented' would mean `added
without notification by compinit' for most users).

I wished there were a way to tell menu-selection which widget should
leave the match inserted and which shouldn't. But I can't think of a
clean way to do that.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-8261-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Oct 14 17:15:43 1999
Return-Path: <zsh-workers-return-8261-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6876 invoked from network); 14 Oct 1999 17:15:42 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Oct 1999 17:15:42 -0000
Received: (qmail 15923 invoked by alias); 14 Oct 1999 17:15:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8261
Received: (qmail 15916 invoked from network); 14 Oct 1999 17:15:36 -0000
Subject: Re: setopt localoptions noautoremoveslash
In-Reply-To: <rsqbta1lvic.fsf@crane.jaist.ac.jp> from Tanaka Akira at "Oct 15, 1999  2: 9:15 am"
To: akr@jaist.ac.jp (Tanaka Akira)
Date: Thu, 14 Oct 1999 18:15:34 +0100 (BST)
Cc: zsh-workers@sunsite.auc.dk
X-Mailer: ELM [version 2.4ME+ PL48 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Message-Id: <E11boTW-0002tB-00@crucigera.fysh.org>
From: Zefram <zefram@fysh.org>

Tanaka Akira wrote:
>Why is `setopt localoptions noautoremoveslash' not effective?

AUTO_REMOVE_SLASH takes effect at a completely different stage of
processing from when the completion list is being generated.  The option
was changed locally within your completion widget, making no difference,
and then the original setting took effect as normal when the completion
was inserted.

>I noticed this with _urls. In URL context, trailing slash should not
>autoremoved.

The removable suffix ought to be completely under user control, set on a
per-match basis.  (Some of the built-in completions, such as completion
after $, already give different removable suffixes for different matches.)
AUTO_REMOVE_SLASH is only intended to apply to normal directory completion.

-zefram


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>e-memory</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="Evolution-Data-Server Manual: Utilities (libedataserver)">
<link rel="up" href="ch01.html" title="Evolution-Data-Server Manual: Utilities (libedataserver)">
<link rel="prev" href="EListIterator.html" title="EListIterator">
<link rel="next" href="libedataserver-EOperationPool.html" title="EOperationPool">
<meta name="generator" content="GTK-Doc V1.18 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="EListIterator.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Evolution-Data-Server Manual: Utilities (libedataserver)</th>
<td><a accesskey="n" href="libedataserver-EOperationPool.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#libedataserver-e-memory.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#libedataserver-e-memory.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry">
<a name="libedataserver-e-memory"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libedataserver-e-memory.top_of_page"></a>e-memory</span></h2>
<p>e-memory</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="libedataserver-e-memory.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">                    <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk">EMemChunk</a>;
<a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="returnvalue">EMemChunk</span></a> *         <a class="link" href="libedataserver-e-memory.html#e-memchunk-new" title="e_memchunk_new ()">e_memchunk_new</a>                      (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> atomcount</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> atomsize</code></em>);
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="returnvalue">gpointer</span></a>            <a class="link" href="libedataserver-e-memory.html#e-memchunk-alloc" title="e_memchunk_alloc ()">e_memchunk_alloc</a>                    (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);
<a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="returnvalue">gpointer</span></a>            <a class="link" href="libedataserver-e-memory.html#e-memchunk-alloc0" title="e_memchunk_alloc0 ()">e_memchunk_alloc0</a>                   (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libedataserver-e-memory.html#e-memchunk-free" title="e_memchunk_free ()">e_memchunk_free</a>                     (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a> mem</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libedataserver-e-memory.html#e-memchunk-empty" title="e_memchunk_empty ()">e_memchunk_empty</a>                    (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libedataserver-e-memory.html#e-memchunk-clean" title="e_memchunk_clean ()">e_memchunk_clean</a>                    (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libedataserver-e-memory.html#e-memchunk-destroy" title="e_memchunk_destroy ()">e_memchunk_destroy</a>                  (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="libedataserver-e-memory.description"></a><h2>Description</h2>
</div>
<div class="refsect1">
<a name="libedataserver-e-memory.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="EMemChunk"></a><h3>EMemChunk</h3>
<pre class="programlisting">typedef struct _EMemChunk EMemChunk;</pre>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-new"></a><h3>e_memchunk_new ()</h3>
<pre class="programlisting"><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="returnvalue">EMemChunk</span></a> *         e_memchunk_new                      (<em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> atomcount</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gint"><span class="type">gint</span></a> atomsize</code></em>);</pre>
<p>
Create a new <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> header.  Memchunks are an efficient way to
allocate and deallocate identical sized blocks of memory quickly, and
space efficiently.
</p>
<p>
e_memchunks are effectively the same as gmemchunks, only faster (much),
and they use less memory overhead for housekeeping.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>atomcount</code></em> :</span></p></td>
<td>the number of atoms stored in a single malloc'd block of memory</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>atomsize</code></em> :</span></p></td>
<td>the size of each allocation</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a new <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-alloc"></a><h3>e_memchunk_alloc ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="returnvalue">gpointer</span></a>            e_memchunk_alloc                    (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);</pre>
<p>
Allocate a new atom size block of memory from an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>.
Free the returned atom with <a class="link" href="libedataserver-e-memory.html#e-memchunk-free" title="e_memchunk_free ()"><code class="function">e_memchunk_free()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>memchunk</code></em> :</span></p></td>
<td>an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>an allocated block of memory</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-alloc0"></a><h3>e_memchunk_alloc0 ()</h3>
<pre class="programlisting"><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="returnvalue">gpointer</span></a>            e_memchunk_alloc0                   (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);</pre>
<p>
Allocate a new atom size block of memory from an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>,
and fill the memory with zeros.  Free the returned atom with
<a class="link" href="libedataserver-e-memory.html#e-memchunk-free" title="e_memchunk_free ()"><code class="function">e_memchunk_free()</code></a>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>memchunk</code></em> :</span></p></td>
<td>an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>an allocated block of memory</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-free"></a><h3>e_memchunk_free ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                e_memchunk_free                     (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>,
                                                         <em class="parameter"><code><a href="http://library.gnome.org/devel/glib/unstable/glib-Basic-Types.html#gpointer"><span class="type">gpointer</span></a> mem</code></em>);</pre>
<p>
Free a single atom back to the free pool of atoms in the given
memchunk.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>memchunk</code></em> :</span></p></td>
<td>an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>mem</code></em> :</span></p></td>
<td>address of atom to free</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-empty"></a><h3>e_memchunk_empty ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                e_memchunk_empty                    (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);</pre>
<p>
Clean out the memchunk buffers.  Marks all allocated memory as free blocks,
but does not give it back to the system.  Can be used if the memchunk
is to be used repeatedly.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>memchunk</code></em> :</span></p></td>
<td>an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-clean"></a><h3>e_memchunk_clean ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                e_memchunk_clean                    (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);</pre>
<p>
Scan all empty blocks and check for blocks which can be free'd
back to the system.
</p>
<p>
This routine may take a while to run if there are many allocated
memory blocks (if the total number of allocations is many times
greater than atomcount).
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>memchunk</code></em> :</span></p></td>
<td>an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="e-memchunk-destroy"></a><h3>e_memchunk_destroy ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                e_memchunk_destroy                  (<em class="parameter"><code><a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a> *memchunk</code></em>);</pre>
<p>
Free the memchunk header, and all associated memory.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>memchunk</code></em> :</span></p></td>
<td>an <a class="link" href="libedataserver-e-memory.html#EMemChunk" title="EMemChunk"><span class="type">EMemChunk</span></a>
</td>
</tr></tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.18</div>
</body>
</html>
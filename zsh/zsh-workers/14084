From zsh-workers-return-14084-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 24 19:19:26 2001
Return-Path: <zsh-workers-return-14084-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16456 invoked from network); 24 Apr 2001 19:19:25 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Apr 2001 19:19:25 -0000
Received: (qmail 17961 invoked by alias); 24 Apr 2001 19:19:17 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14084
Received: (qmail 17947 invoked from network); 24 Apr 2001 19:19:16 -0000
Date: Tue, 24 Apr 2001 12:18:48 -0700 (PDT)
From: Wayne Davison <wayned@users.sourceforge.net>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
Cc: Zsh Workers <zsh-workers@sunsite.auc.dk>
Subject: Re: Another keep-prefix problem
In-Reply-To: <1010424165026.ZM5732@candle.brasslantern.com>
Message-ID: <Pine.LNX.4.30.0104241130360.3333-100000@phong.blorf.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

In reading through the man page some more, it looks like in this case
I should be complaining about the "suffix" style:  that it requires
the word to start with a $ or a ~ for this rule to kick in.

The old expander does not require this.  I.e. it treats this as a
completion request (use expand-or-complete without _expand in your
completer setting):

  % ls -l /net/machine$path/foo<TAB>

This does not expand anything.  I think that it will cause less
confusion if the new expander would work like the old one does in
this regard.

However, I have the same complaint about keep-prefix when using
wildcards:

  % ls -l /net/machine$path/foo*<TAB>

I'd like to see $path left unexpanded.  In other words, I want keep-
prefix to preserve the prefix no matter where the $ expression is in
the prefix.

> Maybe you want to look at the `subst-globs-only' and/or `substitute'
> styles, if you haven't already done so.

I suppose using subst-globs-only might be a fairly good way to go
(along with changing ^Xe to something that would actually expand
variables -- using "expand-word" seems to work fine).  However, using
this setting does still "fail" my glob-expansion test above (i.e. it
does not leave the $path unexpanded when expanding wildcards).

Using "substitute false" appears to break wildcards with variables
completely, so that doesn't appear to be useful to me.

..wayne..


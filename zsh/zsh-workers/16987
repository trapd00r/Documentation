From zsh-workers-return-16987-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 16 06:11:47 2002
Return-Path: <zsh-workers-return-16987-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6189 invoked from network); 16 Apr 2002 06:11:46 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Apr 2002 06:11:46 -0000
Received: (qmail 15902 invoked by alias); 16 Apr 2002 06:11:36 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16987
Received: (qmail 15891 invoked from network); 16 Apr 2002 06:11:34 -0000
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Zsh hackers list'" <zsh-workers@sunsite.dk>
Subject: RE: _values does not quote inserted matches
Date: Tue, 16 Apr 2002 10:11:26 +0400
Message-ID: <002301c1e50d$8bbe13b0$1fc1f2a3@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.3416
In-Reply-To: <1020413232614.ZM7461@candle.brasslantern.com>
x-mimeole: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal

> On Apr 14, 12:38am, Borsenkow Andrej wrote:
> } Subject: _values does not quote inserted matches
> }
> } note, that match inserted into command line is not quoted that makes
it
> } impossible to complete more than one value.
> 
> The problem is this stuff at lines 54-58 of _values:
> 
>       if [[ ${#noargs}+${#args}+${#opts} -ne 1 ]] && compvalues -s
sep; then
>         sep=( "-qQS" "$sep" )
>       else
>         sep=()
>       fi
> 
> I don't know why the Q is included on line 55?  It seems to all work
OK if
> I take it out.
> 

I'd like to here Sven's comment on it. Sven, are we expected to pass
fully quoted strings to _values (in this case, where is it documented?)
or is _value expected to behave just like most other completion
functions, quoting inserted strings automatically?

-andrej


From zsh-workers-request@euclid.skiles.gatech.edu  Sat Oct 26 06:11:29 1996
Return-Path: zsh-workers-request@euclid.skiles.gatech.edu
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.6/8.7.3) with ESMTP id GAA26775 for <mason@primenet.com.au>; Sat, 26 Oct 1996 06:11:27 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id QAA03037; Fri, 25 Oct 1996 16:10:32 -0400 (EDT)
Resent-Date: Fri, 25 Oct 1996 16:10:32 -0400 (EDT)
Date: Fri, 25 Oct 1996 16:10:20 -0400 (EDT)
From: Keith Bostic <bostic@bsdi.com>
Message-Id: <199610252010.QAA04874@mongoose.bostic.com>
To: hzoli@cs.elte.hu
Subject: Re: bug fix for zsh 3.0.0
Cc: zsh-workers@math.gatech.edu
Resent-Message-ID: <"TdwHL3.0.Kl.twHSo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2282
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> Keith Bostic wrote:
>> Some termcap databases (e.g., the one distributed with ncurses) have
>> entries larger than 1K.  When combined with termcap library code that
>> doesn't limit the length of the copied record to 1K (e.g., old 4BSD
>> implementations) it can drop core.
>
> That can only happen if a single capability string is bigger thatn 1024
> bytes.  Did you really see a coredump from that part of the code or you
> just see it as a theoretical bug?

Single capability strings in some termcap databases are bigger
than 1K.  I really saw a coredump in a previous version of zsh.
The fix for that version was:

	--- ./src/zsh.h 1995/12/07 21:40:24     1.1
	+++ ./src/zsh.h 1996/10/23 16:18:58
	@@ -1855,7 +1855,7 @@
 
	 /* the termcap buffer */
 
	-EXTERN char termbuf[1024];
	+EXTERN char termbuf[4096];
 
	 /* $TERM */

--keith


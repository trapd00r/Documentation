From zsh-workers-return-16778-mason-zsh=primenet.com.au@sunsite.dk Thu Mar 07 13:35:27 2002
Return-Path: <zsh-workers-return-16778-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8928 invoked from network); 7 Mar 2002 13:35:26 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 7 Mar 2002 13:35:26 -0000
Received: (qmail 2214 invoked by alias); 7 Mar 2002 13:29:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16778
Received: (qmail 2199 invoked from network); 7 Mar 2002 13:29:49 -0000
Date: Thu, 7 Mar 2002 08:23:32 -0500
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _irssi
Message-ID: <20020307132332.GA21162@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.27i

This comes from Istvan Sebestyen <stevee@alphanet.ch>.
I've prefixed all the functions with _irssi to avoid namespace
conflicts.

Index: Completion/Unix/Command/.distfiles
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/.distfiles,v
retrieving revision 1.19
diff -u -r1.19 .distfiles
--- Completion/Unix/Command/.distfiles	14 Feb 2002 17:56:54 -0000	1.19
+++ Completion/Unix/Command/.distfiles	7 Mar 2002 13:19:20 -0000
@@ -16,5 +16,5 @@
 _diff         _gs           _make         _psutils      _tin	_apm  _mail
 _last         _loadkeys     _modutils     _ruby         _sysctl _links _samba
 _user_admin   _rsync        _arping	  _spamassassin _mtools       _ifconfig
-_fsh          _chkconfig    _cdcd
+_fsh          _chkconfig    _cdcd         _irssi
 '
Index: Completion/Unix/Command/_irssi
===================================================================
RCS file: Completion/Unix/Command/_irssi
diff -N Completion/Unix/Command/_irssi
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ Completion/Unix/Command/_irssi	7 Mar 2002 13:19:20 -0000
@@ -0,0 +1,45 @@
+#compdef irssi
+
+typeset -A opt_args
+
+local expl
+
+_irssi_servers() {
+		local a
+		a=($(grep "\(^[{ 	]*address\)\|\([{ 	]address\)[ 	]*=" ~/.irssi/config | sed -e "s,^.*address *= *\"\([^\"]\+\).*,\1 ,g"))
+		compadd -x 'use "--help" to get descriptions' $a[@]
+		}
+
+_irssi_ports() {
+		local a
+		a=($(grep "\(^[{ 	]*port\)\|\([{ 	]port\)[ 	]*=" ~/.irssi/config | sed -e "s,^.*port *= *\"\([^\"]\+\).*,\1,g"))
+		compadd -x 'use "--help" to get descriptions' $a[@]
+		}
+
+_irssi_nick() {
+		local a
+		a=($(grep "\(^[{ 	]*nick\)\|\([{ 	]nick\)\|\([{ 	]alternate_nick\)\|\(^[{ 	]*alternate_nick\)[ 	]*=" ~/.irssi/config | sed -e "s,^.*nick *= *\"\([^\"]\+\).*,\1,g"))
+		compadd -x 'use "--help" to get descriptions' $a[@]
+		}
+
+_arguments -C -s \
+	"--config=[config file]:config:_files" \
+	"--home=[home dir location]:home:_dir_list" \
+	"-c[connect to servers]:irc servers: _irssi_servers" \
+	"--connect=[connect to servers]:irc servers: _irssi_servers" \
+	'-w[password]' \
+	'--password=[password]' \
+	"-p[specify a port]:port: _irssi_ports" \
+	"--port=[specify a port]:port: _irssi_ports" \
+	'-![disable autoconnect]' \
+	'--noconnect[disable autoconnect]' \
+	"-n[set nick name]:nick: _irssi_nick" \
+	"--nick=[set nick name]:nick: _irssi_nick" \
+	'-h[hostname]' \
+	'--hostname=[hostname]' \
+	'-v[version]' \
+	'--version[version]' \
+	'-?[help message]' \
+	'--help[help message]' \
+	'--usage[display usage]' \
+


From zsh-users-return-9836-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 17 22:59:22 2006
Return-Path: <zsh-users-return-9836-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9866 invoked from network); 17 Jan 2006 22:59:17 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 17 Jan 2006 22:59:17 -0000
Received: (qmail 41691 invoked from network); 17 Jan 2006 22:59:10 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 17 Jan 2006 22:59:10 -0000
Received: (qmail 17461 invoked by alias); 17 Jan 2006 22:59:01 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9836
Received: (qmail 17452 invoked from network); 17 Jan 2006 22:59:00 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 17 Jan 2006 22:59:00 -0000
Received: (qmail 40636 invoked from network); 17 Jan 2006 22:59:00 -0000
Received: from unknown (HELO pepper.fruitcom.com) (82.201.6.100)
  by a.mx.sunsite.dk with SMTP; 17 Jan 2006 22:59:00 -0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by pepper.fruitcom.com (Postfix) with ESMTP id 257F446B8C;
	Wed, 18 Jan 2006 00:11:38 +0100 (CET)
Received: from pepper.fruitcom.com ([127.0.0.1])
	by localhost (pepper [127.0.0.1]) (amavisd-new, port 10024) with LMTP
	id 14926-04; Wed, 18 Jan 2006 00:11:30 +0100 (CET)
Received: by pepper.fruitcom.com (Postfix, from userid 1000)
	id 5B48C46B8D; Wed, 18 Jan 2006 00:11:30 +0100 (CET)
Date: Wed, 18 Jan 2006 00:11:30 +0100
From: Eric Smith <es@fruitcom.com>
To: zsh-users@sunsite.dk
Subject: Adding nocorrect to a preexec function
Message-ID: <20060117231130.GA14934@fruitcom.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.6+20040907i
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at example.com

I use the following function (which is probably more complex that
required) and wish to add nocorrect to it.  How would I do that
as in all the obvious (to me) places it does not seem to work.

function preexec {
local cmd
local application
cmd=(${(Q)${(z)3}})
    eval "function ${(q)cmd[1]} {
        unsetopt noglob
        cost ${(q)cmd[1]}" '$* 
        unfunction' "${(q)cmd[1]}
    }"
setopt noglob
}

Thanks
-- 
Eric Smith


From zsh-workers-return-6385-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 31 13:33:16 1999
Return-Path: <zsh-workers-return-6385-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8554 invoked from network); 31 May 1999 13:33:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 31 May 1999 13:33:13 -0000
Received: (qmail 29934 invoked by alias); 31 May 1999 13:32:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6385
Received: (qmail 29927 invoked from network); 31 May 1999 13:32:55 -0000
Message-Id: <9905311305.AA35829@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: forwarded bug report 
In-Reply-To: "Sven Wischnowsky"'s message of "Mon, 31 May 1999 15:12:11 DFT."
             <199905311312.PAA18094@beta.informatik.hu-berlin.de> 
Date: Mon, 31 May 1999 15:05:15 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> Markus F.X.J. Oberhumer wrote:
> >   compctl -s "\$(cat [tT]his-file-does-not-exist)" foo
> 
> When expanding the -s-string, we explicitly switch NULL_GLOB on so
> that `compctl -s "*.c \$(< foo)"' works without producing an error if
> there is no `*.c'.
> Of course, this makes it fail in cases like the one above... (where
> the cat tries to start reading and never finishes).
> 
> Does anyone have an idea how we could make this safe?

I though of playing around with CSH_NULL_GLOB like options, but couldn't
get that to work reasonably.  One possibility is to timeout $(...)'s when
they occur inside zle.  However, I think the real bug here is that for some
reason it takes two ^C's to stop it.  Fixing that would just leave the user
with the reponsibility of testing difficult cases (and adding /dev/null on
the end if necessary).

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From hzoli@cs.elte.hu Wed Apr 10 19:07:32 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3) with ESMTP id TAA12049 for <mason@werple.mira.net.au>; Wed, 10 Apr 1996 19:07:30 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id EAA04460; Wed, 10 Apr 1996 04:47:44 -0400 (EDT)
Resent-Date: Wed, 10 Apr 1996 04:47:44 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199604100847.KAA03301@bolyai.cs.elte.hu>
Subject: Re: Weird completion bug in hzoli13
To: acs@world.std.com
Date: Wed, 10 Apr 1996 10:10:49 +0200 (MET DST)
In-Reply-To: <9604100148.AA22422@spacely.afive> from Vinnie Shelton at "Apr 9, 96 09:48:05 pm"
Organization: Dept. of Comp. Sci., Eotvos University, Budapest, Hungary
Phone: (36 1)2669833 ext: 2667, home phone: (36 1) 2752368
X-Mailer: ELM [version 2.4ME+ PL15 (25)]
MIME-Version: 1.0
Content-Type: application/pgp; format=text; x-action=sign
Content-Transfer-Encoding: 7bit
Sender: hzoli@cs.elte.hu
Resent-Message-ID: <"ikG9F2.0.Z51.lMtQn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/902
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1600
Status: O

-----BEGIN PGP SIGNED MESSAGE-----

> If I have a file which starts with a numeric prefix, like "152.html",
> if I then try to do filename completion on that file after an input
> redirection, like so:
> 
> 	cat <152"TAB"
> 
> the shell hangs.  This is on an unpatched (maybe 1 or two small
> patches) hzoli13.  Standard beta13 does not show this behavior.
> This happens on my SVR4.2 box at home, as well as the SunOS4.1.3U1
> box at work.  It even happens when I start the shell with "-f".
> 
> Can anyone else reproduce this?

Here is a fix for that.

Bye,

Zoltan

 *** Src/lex.c	1996/03/04 01:59:56	1.17
 --- Src/lex.c	1996/04/10 08:05:42
 ***************
 *** 507,522 ****
   		}
   	    }
   	    if (nc == '>' && !lexstop) {
 - 		lexstop = 0;
   		hungetc(nc);
   		while (n--)
   		    hungetc(*--tbp);
   		zfree(tbuf, tbs);
   		break;
   	    }
 ! 	    lexstop = 0;
 ! 	    if (nc)
   		hungetc(nc);
   	    while (n--)
   		hungetc(*--tbp);
   	    zfree(tbuf, tbs);
 --- 507,521 ----
   		}
   	    }
   	    if (nc == '>' && !lexstop) {
   		hungetc(nc);
   		while (n--)
   		    hungetc(*--tbp);
   		zfree(tbuf, tbs);
   		break;
   	    }
 ! 	    if (nc && !lexstop)
   		hungetc(nc);
 + 	    lexstop = 0;
   	    while (n--)
   		hungetc(*--tbp);
   	    zfree(tbuf, tbs);

-----BEGIN PGP SIGNATURE-----
Version: 2.6.3i
Charset: noconv

iQCVAwUBMWttCAupSCiLN749AQF0bAQAnRcu/W1sAnQ7HPvGDfJ+wfv7lrwLKPYI
V7RPkGJz/G17CBE6lkqYXmRg+G43p1IDQWo/W/G7g099cU4GjVRzGLRSS5UrLWYi
lVupREbXHeMKm71MygEu7vRQHeDyYtKO6X98QTx/+lD+E+IVRHlhZMBNHpzlliRi
C4ZkYZuNXEs=
=PD+7
-----END PGP SIGNATURE-----



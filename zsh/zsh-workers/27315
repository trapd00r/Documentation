From zsh-workers-return-27315-mason-zsh=primenet.com.au@zsh.org Sat Oct 24 04:38:01 2009
Return-Path: <zsh-workers-return-27315-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4095 invoked by alias); 24 Oct 2009 04:38:01 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers@zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 27315
Received: (qmail 23639 invoked from network); 24 Oct 2009 04:37:49 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: none (ns1.primenet.com.au: domain at zsh.org does not designate permitted sender hosts)
Date: Sat, 24 Oct 2009 04:37:45 +0000
From: Clint Adams <clint@zsh.org>
To: zsh-workers@zsh.org
Subject: Re: PATCH: _mpc search types
Message-ID: <20091024043745.GA24387@scru.org>
References: <20091024041456.GA24140@scru.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20091024041456.GA24140@scru.org>
User-Agent: Mutt/1.5.18 (2008-05-17)

On Sat, Oct 24, 2009 at 04:14:56AM +0000, Clint Adams wrote:
> It looks like _mpc needs a bit more modernization beyond this.

This adds missing ones and reorders the commands according to
the mpc 0.17 man page.  Notably this misses the findadd command
added in mpc 0.18.

Index: Completion/Unix/Command/_mpc
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_mpc,v
retrieving revision 1.6
diff -u -r1.6 _mpc
--- Completion/Unix/Command/_mpc	24 Oct 2009 04:17:40 -0000	1.6
+++ Completion/Unix/Command/_mpc	24 Oct 2009 04:32:01 -0000
@@ -26,36 +26,43 @@
 
   mpc_cmds=(
     add:"add a song to the current playlist"
+    clear:"clear the current playlist"
     crop:"remove all songs except for the currently playing song"
+    current:"show the currently playing song"
+    crossfade:"set and display crossfade settings"
     del:"remove a song from the current playlist"
-    play:"start playing"
-    next:"play the next song in the current playlist"
-    prev:"play the previous song in the current playlist"
-    pause:"pause the currently playing song"
-    toggle:"toggles Play/Pause, plays if stopped"
-    stop:"stop the currently playing playlists"
-    seek:"seek to the position specified in percent"
-    clear:"clear the current playlist"
-    outputs:"show the current outputs"
-    enable:"enable a output"
     disable:"disable a output"
-    shuffle:"shuffle the current playlist"
-    move:"move song in playlist"
-    playlist:"print the current playlist"
+    enable:"enable a output"
+    idle:"wait until an event occurs"
+    idleloop:"loop waiting for events"
     listall:"list all songs in the music directory"
+    load:"load file as a playlist"
     ls:"list the contents of specified directory"
     lsplaylists:"list currently available playlists"
-    load:"load file as a playlist"
-    save:"save a playlist to file"
-    rm:"remove a playlist"
-    volume:"set volume"
-    repeat:"toggle repeat mode, or specify state"
+    move:"move song in playlist"
+    next:"play the next song in the current playlist"
+    outputs:"show the current outputs"
+    pause:"pause the currently playing song"
+    play:"start playing"
+    playlist:"print the current playlist"
+    prev:"play the previous song in the current playlist"
     random:"toggle random mode, or specify state"
+    repeat:"toggle repeat mode, or specify state"
+    single:"toggle single mode, or specify state"
+    consume:"toggle consume mode, or specify state"
+    rm:"remove a playlist"
+    save:"save a playlist to file"
     search:"search for a song"
-    crossfade:"set and display crossfade settings"
-    update:"scan music directory for updates"
+    find:"search for a song, exact match"
+    list:"list all tags of given type"
+    seek:"seek to the position specified in percent"
+    shuffle:"shuffle the current playlist"
     stats:"display statistics about MPD"
+    stop:"stop the currently playing playlists"
+    toggle:"toggles Play/Pause, plays if stopped"
+    update:"scan music directory for updates"
     version:"report version of MPD"
+    volume:"set volume"
     status:"display MPD status"
   )
 
@@ -234,6 +241,14 @@
   _mpc_helper_bool
 }
 
+_mpc_single() {
+  _mpc_helper_bool
+}
+
+_mpc_consume() {
+  _mpc_helper_bool
+}
+
 _mpc_search() {
   local list expl
   list=(album artist title track name genre date composer performer comment disc filename any)
@@ -245,6 +260,14 @@
   fi
 }
 
+_mpc_find() {
+  _mpc_search "$@"
+}
+
+_mpc_list() {
+  _mpc_search "$@"
+}
+
 _mpc_update() {
   _mpc_helper_files
 }


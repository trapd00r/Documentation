From zsh-workers-return-12336-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jul 21 07:31:46 2000
Return-Path: <zsh-workers-return-12336-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8061 invoked from network); 21 Jul 2000 07:31:45 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 21 Jul 2000 07:31:45 -0000
Received: (qmail 3118 invoked by alias); 21 Jul 2000 07:31:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12336
Received: (qmail 3111 invoked from network); 21 Jul 2000 07:31:36 -0000
Date: Fri, 21 Jul 2000 09:31:34 +0200 (MET DST)
Message-Id: <200007210731.JAA12819@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Zefram's message of Thu, 20 Jul 2000 22:46:21 +0100 (BST)
Subject: Re: zsh bloat?


Zefram wrote:

> ...
> 
> So that's 342kB of main binary, 655kB of loadable modules, and 933kB of
> shell functions. 

Hey, not fair ;-) Some of the modules do things not comparable to
anything bash can do.

On my machine zsh is still smaller than a 2.01.1(1) bash, even though
I linked most modules into it (at least everything needed for zle and
completion).

> (Wow, I didn't realise we had so many functions -- the
> current tarballs are now more than twice the size of the 3.1.5 tarball.)

In memory, functions can be smaller than their definition files. Let's 
see. Compiling all the functions in Functions/[PZ]* and all the
completion functions gives me a .zwc file with 1385664 bytes. That
contains two versions (for either endianess), so if you use all
functions you need 692832 bytes plus some padding and the function
structs. But the former can be taken from a shared mapped zwc file, so 
it isn't that bad, I think.

However, at least one intention I had with this new completion system
was to make the main shell smaller. And I think we will make even more
progress in that direction (zle, probably moving more of the basic
completion code from C to shell code, etc).

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


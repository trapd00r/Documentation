From zsh-workers-return-17613-mason-zsh=primenet.com.au@sunsite.dk Wed Sep 04 07:36:49 2002
Return-Path: <zsh-workers-return-17613-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24767 invoked from network); 4 Sep 2002 07:36:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 4 Sep 2002 07:36:49 -0000
Received: (qmail 21106 invoked by alias); 4 Sep 2002 07:36:39 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17613
Received: (qmail 21080 invoked from network); 4 Sep 2002 07:36:37 -0000
From: <pws@pwstephenson.fsnet.co.uk>
To: zsh-workers@sunsite.dk
Subject: [Fwd: [problem] HP-UX tgetent()]
Date: Tue, 3 Sep 2002 19:56:33 +0000
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
Message-Id: <20020903195633.YVGL23487.fep08-svc.ttyl.com@localhost>

OK, here goes with freeserve's web interface from work...
Sorry, the `>'s were added automatically.

> 
> From: WATANABE Tetsuya <tetsu@jpn.hp.com>
> Date: Tue 03/Sep/2002 06:28 GMT
> To: coordinator@zsh.org
> Subject: [problem] HP-UX tgetent()
> 
> Hi
> 
> HP-UX's tgetent() is return 0 or -1
> 
> ------------------------------
>  tgetent(3X)                                                     tgetent(3X)
>                                ENHANCED CURSES
> 
>  NAME
>       tgetent, tgetflag, tgetnum, tgetstr, tgoto - termcap database
>       emulation (TO BE WITHDRAWN)
> 
>  SYNOPSIS
>       #include <term.h>
> 
>       int tgetent(char *bp, const char *name);
> 
>  RETURN VALUE
>       Upon successful completion, functions that return an integer will
>       return 0K (0).  Otherwise, they return ERR (-1).
> 
>       Functions that return pointers will return a null pointer on error.
> ------------------------------
> 
> please this PATCH
> 
> ------------------------------
> --- init.c.org	Fri Aug  9 22:30:22 2002
> +++ init.c	Tue Sep  3 15:14:39 2002
> @@ -537,8 +537,12 @@
>      /* If possible, we let tgetent allocate its own termcap buffer */
>      if (tgetent(NULL, term) != 1) {
>  #else
> +#ifdef __hpux
> +    if (tgetent(termbuf, term) == -1) {
> +#else
>      if (tgetent(termbuf, term) != 1) {
>  #endif
> +#endif
>  
>  	if (isset(INTERACTIVE))
>  	    zerr("can't find terminal definition for %s", term, 0);
> ------------------------------
> 
> thanks!
> 
> -- 
> WATANABE Tetsuya
>  e-mail: Tetsuya.WATANABE@hp.com
>          tetsu@jpn.hp.com
> 
> 

_______________________________________________________________________
Freeserve AnyTime, only £13.99 per month with one month's FREE trial!
For more information visit http://www.freeserve.com/time/ or call free on 0800 970 8890



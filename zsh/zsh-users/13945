From zsh-users-return-13945-mason-zsh=primenet.com.au@sunsite.dk Fri Mar 20 06:04:34 2009
Return-Path: <zsh-users-return-13945-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7695 invoked from network); 20 Mar 2009 06:04:31 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 20 Mar 2009 06:04:31 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 22115 invoked from network); 20 Mar 2009 06:04:15 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 20 Mar 2009 06:04:15 -0000
Received: (qmail 17369 invoked by alias); 20 Mar 2009 06:03:56 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 13945
Received: (qmail 17359 invoked from network); 20 Mar 2009 06:03:55 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 20 Mar 2009 06:03:55 -0000
Received: from mail-qy0-f119.google.com (mail-qy0-f119.google.com [209.85.221.119])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 3CB2C82CF027
	for <zsh-users@sunsite.dk>; Fri, 20 Mar 2009 07:03:51 +0100 (CET)
Received: by qyk17 with SMTP id 17so1183681qyk.9
        for <zsh-users@sunsite.dk>; Thu, 19 Mar 2009 23:03:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :received:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=7KY6KV6t9yqO5lPdJ9gOb8A8lhumahIwnvlUCCin/uk=;
        b=f9LjeN8gK+U2NSENVNR+MY6YaiXka9QY4RyrJb8sTsYn0Ksvg1U6X9MYZuVO2nTbKG
         8ihk8RF7E56/DU0CzgcDjtohn8EFtb8x+l3Xb5JfvDgGbtksNao/NCEg+ykLN7kiTE7c
         0S1g2nqJ3dH7FJI6WpM7hIVUfvrkrkRXE5eKc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=fRL2J6d13iTHt31gFqRq/H9t6HE52gNW4ddrCYrd2fXF6o1nmJO0wU+AXchaNaS5M+
         MxXiajAKD6eocuA2LHwkchVJzA0MhsxLhH3ebBAi1PZInWT8xiQkfyyJbsZfMHBLLSVA
         bEXxKIuY1t5KMjCekDyvvJuwSD2p03ZQSmZME=
MIME-Version: 1.0
In-Reply-To: <20090320024835.GA64103@redoubt.spodhuis.org>
References: <d2ecb10b0903191838y68e1dfbbsa80289a52256eb2a@mail.gmail.com> 
	<20090320024835.GA64103@redoubt.spodhuis.org>
Date: Fri, 20 Mar 2009 02:03:27 -0400
Received: by 10.229.110.13 with SMTP id l13mr1962751qcp.4.1237529022499; Thu, 
	19 Mar 2009 23:03:42 -0700 (PDT)
Message-ID: <d2ecb10b0903192303h1f9b0487g335cd5335f708ff@mail.gmail.com>
Subject: Re: up-arrow no longer works right
From: TjL <luomat@gmail.com>
To: TjL <luomat@gmail.com>, Zsh Users List <zsh-users@sunsite.dk>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Scanned: ClamAV 0.92.1/9143/Fri Mar 20 04:40:02 2009 on bifrost
X-Virus-Status: Clean

On Thu, Mar 19, 2009 at 10:48 PM, Phil Pennock
<zsh-workers+phil.pennock@spodhuis.org> wrote:
> On 2009-03-19 at 21:38 -0400, TjL wrote:
>> The oddity is that sometimes (usually after exiting from ssh and/or
>> screen) zsh seems to "forget" that, and pressing the up-arrow will
>> just go back through my history line by line, ignoring what I have
>> already typed.
>>
>> Usually at that point I just exit the shell and open a new one, but
>> I'd really like to be able to kick-start my existing session if
>> possible (especially when I've ssh'd somewhere).
>>
>> Any ideas what might cause this and (more importantly) what I can do to =
fix it?
>
> Perhaps the cursor keys have been put into application mode and your
> terminal type isn't supporting them in that mode?

I don't know what that means :-/

>
> When things are working, if you run:
> =A0print -n '\e[?1h'
> do they stop working?

yes

> If you run "bindkey", you'll see two batches for the two sets of cursor
> keys; for me:
> "^[OA" up-line-or-history
> "^[OB" down-line-or-history
> "^[OC" forward-char
> "^[OD" backward-char
> [...]
> "^[[A" up-line-or-history
> "^[[B" down-line-or-history
> "^[[C" forward-char
> "^[[D" backward-char
>
> If those two sets ^[O<foo> and ^[[<foo> differ then this might explain
> it. =A0So, (1) bind both sets the same and (2) see if "stty sane" helps.

'stty sane' did not fix it


> And: =A0print -n '\e[?1l'

that fixes it

TjL


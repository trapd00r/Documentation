From zsh-workers-return-28758-mason-zsh=primenet.com.au@zsh.org Tue Feb 15 08:40:26 2011
Return-Path: <zsh-workers-return-28758-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25792 invoked by alias); 15 Feb 2011 08:40:26 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28758
Received: (qmail 23589 invoked from network); 15 Feb 2011 08:40:24 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at bewatermyfriend.org does not designate permitted sender hosts)
From: Frank Terbeck <ft@bewatermyfriend.org>
To: zsh-workers@zsh.org
Subject: PATCH: Harden `colors' function for certain options
Date: Tue, 15 Feb 2011 09:30:14 +0100
Message-Id: <1297758614-1407-1-git-send-email-ft@bewatermyfriend.org>
X-Mailer: git-send-email 1.7.4.rc1.7.g2cf08
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Df-Sender: 430444

A user reported, that he had an issue loading the colors function to the
debian bts¹. Turns out this was because he was setting the `ksh_arrays'
option before running the function.

This should fix the issue.

¹ <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=613162>
---
 Functions/Misc/colors |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/Functions/Misc/colors b/Functions/Misc/colors
index bef93c8..027ca9a 100644
--- a/Functions/Misc/colors
+++ b/Functions/Misc/colors
@@ -1,6 +1,8 @@
 # Put standard ANSI color codes in shell parameters for easy use.
 # Note that some terminals do not support all combinations.
 
+emulate -L zsh
+
 typeset -Ag color colour
 
 color=(
-- 
1.7.4.rc1.7.g2cf08


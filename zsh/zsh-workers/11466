From zsh-workers-return-11466-mason-zsh=primenet.com.au@sunsite.auc.dk Fri May 19 08:30:50 2000
Return-Path: <zsh-workers-return-11466-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9994 invoked from network); 19 May 2000 08:30:49 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 May 2000 08:30:49 -0000
Received: (qmail 11388 invoked by alias); 19 May 2000 08:30:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11466
Received: (qmail 11381 invoked from network); 19 May 2000 08:30:43 -0000
Date: Fri, 19 May 2000 10:30:04 +0200 (MET DST)
Message-Id: <200005190830.KAA06571@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: small unambiguous string fix


This sometimes inserted an anchor even though there were missing
characters before it. Using the wrong cline-field.

Bye
 Sven

Index: Src/Zle/compresult.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/compresult.c,v
retrieving revision 1.14
diff -u -r1.14 compresult.c
--- Src/Zle/compresult.c	2000/05/12 11:52:30	1.14
+++ Src/Zle/compresult.c	2000/05/19 08:29:14
@@ -105,7 +105,7 @@
 		ls = 1;
 
 		for (p = e; p; p = p->next)
-		    len += p->max;
+		    len += p->min;
 
 		if (len > ((minmlen << 1) / 3))
 		    goto end;

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


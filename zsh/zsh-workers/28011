From zsh-workers-return-28011-mason-zsh=primenet.com.au@zsh.org Wed Jun 09 10:08:39 2010
Return-Path: <zsh-workers-return-28011-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11598 invoked by alias); 9 Jun 2010 10:08:39 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28011
Received: (qmail 29795 invoked from network); 9 Jun 2010 10:08:36 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at vinc17.net does not designate permitted sender hosts)
Date: Wed, 9 Jun 2010 12:08:31 +0200
From: Vincent Lefevre <vincent@vinc17.net>
To: zsh-workers@zsh.org
Subject: Re: Bug in zsh builtin pwd when option CHASE_LINKS is set
Message-ID: <20100609100831.GC1499@prunille.vinc17.org>
Mail-Followup-To: zsh-workers@zsh.org
References: <20040924074842.GJ2973@ay.vinc17.org>
 <20100607131339.GA21964@prunille.vinc17.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20100607131339.GA21964@prunille.vinc17.org>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.20-6084-vl-r35499 (2010-05-18)

On 2010-06-07 15:13:39 +0200, Vincent Lefevre wrote:
> I have the same problem with zsh 4.3.10 when I cd a directory
> with the following permissions: drwxrwxr-x. /bin/pwd and $PWD
> give the correct directory, but the pwd built-in gives ".".

FYI, the problem was not due to the permissions, but I've just noticed
that the parent directory was not readable (it just has the execution
bit for the group).

I can reproduce the bug on other machines, where I haven't applied
the patch:

xvii% setopt CHASE_LINKS
xvii% mkdir -p dir1/dir2
xvii% chmod 100 dir1
xvii% cd dir1/dir2
xvii% /bin/pwd
/home/vinc17/dir1/dir2
xvii% pwd
.
xvii% 

-- 
Vincent Lefèvre <vincent@vinc17.net> - Web: <http://www.vinc17.net/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.net/blog/>
Work: CR INRIA - computer arithmetic / Arénaire project (LIP, ENS-Lyon)


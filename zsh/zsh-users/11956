From zsh-users-return-11956-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 08 03:42:55 2007
Return-Path: <zsh-users-return-11956-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9071 invoked from network); 8 Oct 2007 03:42:46 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-102.9 required=5.0 tests=AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 8 Oct 2007 03:42:46 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 78316 invoked from network); 8 Oct 2007 03:42:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2007 03:42:40 -0000
Received: (qmail 9369 invoked by alias); 8 Oct 2007 03:42:33 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11956
Received: (qmail 9354 invoked from network); 8 Oct 2007 03:42:32 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 8 Oct 2007 03:42:32 -0000
Received: (qmail 77116 invoked from network); 8 Oct 2007 03:42:32 -0000
Received: from g.primenet.com.au (203.24.36.10)
  by a.mx.sunsite.dk with SMTP; 8 Oct 2007 03:42:26 -0000
Received: (qmail 1157 invoked by uid 100); 8 Oct 2007 03:42:23 -0000
Date: Mon, 8 Oct 2007 13:42:23 +1000
From: Geoff Wing <gcw@pobox.com>
To: zsh-users@sunsite.dk
Subject: Re: PROMPT escape sequences
Message-ID: <20071008034223.GA789@primenet.com.au>
References: <20071008012219.GA595@primenet.com.au> <071007201252.ZM24223@torch.brasslantern.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <071007201252.ZM24223@torch.brasslantern.com>
Organization: PrimeNet Computer Consultancy
User-Agent: Mutt/1.5.16 (2007-06-09)

On Monday 2007-10-08 13:13 +1000, Bart Schaefer output:
:On Oct 8, 11:22am, Geoff Wing wrote:
:} On Monday 2007-10-08 10:40 +1000, Bart Schaefer output:
:} :It "works" for %S because of a quirk in the way some terminals (xterm
:} :included) implement "standout mode", not because of anything zsh does
:} :differently.
:} Well, actually, it should be handling these correctly. For bold,
:} standout and underline.
:Hm.  If I do, in my xterm,
:% PS1='verylongstring%#%S '
:then the entire prompt, including the "verylongstring%", appears in
:reverse video.  Are you saying that it's ZLE that's spreading the
:standout mode to the left as well as to the right, and not just a
:quirk of xterm?

I haven't yet been able to have this occur. "verylongstring%" always stays
in normal (non-standout) attribute with rxvt and a quick test in xterm (215)
This was with the prompt near the right side and with it longer than column
width (i.e. wrapped onto next line).  Tried with both RPS1 set and unset,
w/ POSTEDIT unset; also from "zsh -f"

:To get what I'd expect, it's necessary to explicitly put in %s at
:the beginning of the prompt.
:% PS1='%sverylongstring%#%S '

:Further, if I type something at that prompt and then backspace over
:it, the reverse video gets left behind where the erased characters
:used to be.

Ah, well, I'd expect that.  I don't think it's necessarily a "wrong"
behaviour.

Regards,
Geoff


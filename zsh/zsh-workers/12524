From zsh-workers-return-12524-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Aug 04 07:43:38 2000
Return-Path: <zsh-workers-return-12524-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20559 invoked from network); 4 Aug 2000 07:43:37 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Aug 2000 07:43:37 -0000
Received: (qmail 28056 invoked by alias); 4 Aug 2000 07:43:24 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12524
Received: (qmail 28041 invoked from network); 4 Aug 2000 07:43:18 -0000
Date: Fri, 4 Aug 2000 09:42:47 +0200 (MET DST)
Message-Id: <200008040742.JAA25771@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: "Bart Schaefer"'s message of Fri, 4 Aug 2000 07:38:38 +0000
Subject: Re: PATCH: Re: completion problem with filename including # (and pathmax stuff)


Bart Schaefer wrote:

> On Aug 4,  7:16am, Bart Schaefer wrote:
> } Subject: Re: PATCH: Re: completion problem with filename including # (and 
> }
> } One, we could pitch out the path length test and simply let domkdir()
> } fail -- and perhaps test the value of errno to decide whether to break
> } or continue as a result.
> 
> Sorry, that doesn't work if the goal is that no directories in the path
> get created if the whole path can't be created.  So that leaves us to
> dig around for a max path length.
> 
> I suspect the True64 pathconf() is actually broken in this respect, Sven.

It probably depends on how one defines `broken'. It *is*
documented. From the manual:


  For pathconf(), the path parameter points to the pathname of a file or
  directory.  Read, write, or execute permission of the	named file is not
  required, but	all directories	in the path leading to the file	must be
  searchable.

  ...

  If name is an	invalid	value, both pathconf() and fpathconf() return -1 and
  errno	is set to indicate the error.


And if mkdir calls pathconf on the name it should create...

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


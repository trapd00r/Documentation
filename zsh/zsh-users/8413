From zsh-users-return-8413-mason-zsh=primenet.com.au@sunsite.dk Sat Jan 22 04:12:46 2005
Return-Path: <zsh-users-return-8413-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16843 invoked from network); 22 Jan 2005 04:12:45 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Jan 2005 04:12:45 -0000
Received: (qmail 42760 invoked from network); 22 Jan 2005 04:12:39 -0000
Received: from unknown (HELO sunsite.dk) (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Jan 2005 04:12:39 -0000
Received: (qmail 24049 invoked by alias); 22 Jan 2005 01:26:59 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8413
Received: (qmail 24034 invoked from network); 22 Jan 2005 01:26:58 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Jan 2005 01:26:58 -0000
Received: (qmail 87324 invoked from network); 22 Jan 2005 01:26:58 -0000
Received: from ip-66-80-62-153.dsl.sca.megapath.net (HELO ripple.fruitbat.org) (66.80.62.153)
  by a.mx.sunsite.dk with SMTP; 22 Jan 2005 01:26:53 -0000
Received: (from daemon@localhost)
	by ripple.fruitbat.org (8.10.2/8.8.8/PAC-1.3) id j0M1QGi23848;
	Fri, 21 Jan 2005 17:26:16 -0800
Received: from ming.fruitbat.org(192.168.1.2) by ripple.fruitbat.org via smap (V2.1/2.1+anti-relay+anti-spam)
	id xma023844; Fri, 21 Jan 05 17:25:45 -0800
Received: from ming.fruitbat.org (IDENT:202@ming.fruitbat.org [192.168.1.2])
	by ming.fruitbat.org (8.12.10/8.10.2/PAC-1.6) with ESMTP id j0M1Pip0023957;
	Fri, 21 Jan 2005 17:25:44 -0800
Date: Fri, 21 Jan 2005 17:25:43 -0800 (PST)
From: "Peter A. Castro" <doctor@fruitbat.org>
To: Andrew Markebo <andrew.markebo@comhem.se>
cc: zsh-users@sunsite.dk, cygwin@cygwin.com
Subject: Re: Sharing zsh history in cygwin.
In-Reply-To: <m3fz0wgvbn.fsf@flognat.dyndns.org>
Message-ID: <Pine.LNX.4.58.0501211709000.16726@ming.fruitbat.org>
References: <m3fz0wgvbn.fsf@flognat.dyndns.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

On Thu, 20 Jan 2005, Andrew Markebo wrote:

> Anyone managed to share command line history between running zsh's in
> latest cygwin's?

Works for me on Cygwin and Linux (Slackware).

> In old times I have done it, unfortunetaly bad tracking when I lost
> it. (Cywgin & zsh 4.2) (think it works with Linux-compiled zsh,
> doublechecking)
>
> Mainly my sharing is decided by:
> # History
> ###################################
> # IncAppendHistory for sharing between shells.. NOW..
> setopt HISTIGNOREDUPS HISTIGNORESPACE EXTENDED_HISTORY
> setopt INC_APPEND_HISTORY SHARE_HISTORY
> HISTSIZE=300
> SAVEHIST=300
> HISTFILE=~/.history
>
> The last line, HISTFILE, freezes the cygwin-distributed zsh
> (4.2.0) just after reading the config-files. Removing just that line
> creates a bunch of .history-XXX files.

Hm... I get only a single ~/.history file.

> On cygwin I configured (by setting "named FIFOs to work" to false) and
> compiled zsh 4.2.3, but it doesn't seem to share the history.

4.2.3s' configure is broken (on Cygwin) right now, so unless you know
what you're doing, I'd wait on it.

> Anyone who have been messing with the history as I do?

This works for me without any problems, using 4.2.0 in Cygwin.  I've
opened three shells and can see/use the commands entered from any of the
three shells by any of the three shells.  I suspect it's something
environmental.  More detail about your system is in order.  The output
from 'cygcheck -s' might be enlightening.

BTW, I just pushed 4.2.1-1 out.  You can give it a try, but I kinda doubt
that'll solve your problems.  On the other hand, it does have the new
/etc/zprofile in it.

BTW, it appears cygwin-announce isn't working...at least I haven't seen
any "[ANNOUNCE]" notices lately.

I'll be pushing out 4.2.3 once I get patches for configure worked out.
Still, I think your problem is something else.  Please submit 'cygcheck -s'
output.

>        /Andy

-- 
Peter A. Castro <doctor@fruitbat.org> or <Peter.Castro@oracle.com>
	"Cats are just autistic Dogs" -- Dr. Tony Attwood


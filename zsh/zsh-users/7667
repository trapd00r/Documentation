From zsh-users-return-7667-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 08 02:38:51 2004
Return-Path: <zsh-users-return-7667-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4048 invoked from network); 8 Jul 2004 02:38:50 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.85)
  by ns1.primenet.com.au with SMTP; 8 Jul 2004 02:38:50 -0000
Received: (qmail 17368 invoked from network); 8 Jul 2004 02:39:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 8 Jul 2004 02:39:06 -0000
Received: (qmail 10222 invoked by alias); 8 Jul 2004 02:38:13 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 7667
Received: (qmail 10212 invoked from network); 8 Jul 2004 02:38:13 -0000
Received: from odin.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.85)
  by sunsite.dk with SMTP; 8 Jul 2004 02:38:13 -0000
Received: (qmail 16332 invoked from network); 8 Jul 2004 02:38:35 -0000
Received: from ol.freeshell.org (HELO sdf.lonestar.org) (@192.94.73.20)
  by a.mx.sunsite.dk with SMTP; 8 Jul 2004 02:38:21 -0000
Received: from sdf.lonestar.org (IDENT:gj@mx.freeshell.org [192.94.73.21])
	by sdf.lonestar.org (8.12.10/8.12.10) with ESMTP id i682bfYd027073
	for <zsh-users@sunsite.dk>; Thu, 8 Jul 2004 02:37:41 GMT
Received: (from gj@localhost)
	by sdf.lonestar.org (8.12.10/8.12.8/Submit) id i682bfKE013128;
	Thu, 8 Jul 2004 02:37:41 GMT
Date: Thu, 8 Jul 2004 02:37:41 +0000 (UTC)
From: gj@freeshell.org
To: zsh-users@sunsite.dk
Subject: why won't this function work?
Message-ID: <Pine.NEB.4.60.0407080235030.11144@zk.serrfuryy.bet>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.2 required=6.0 tests=NO_REAL_NAME autolearn=no 
	version=2.63
X-Spam-Hits: 0.2

Hi all.

I'm trying to convert a function I wrote in bash to zsh.  How can I get this to work?

selhist () 
{
     TAB='       ';
     (( " $# < 1 " )) && {
         echo "Usage: selhist [command]";
         return 1
     };
     oldIFS=$IFS;
     IFS='
';
     cmd=("" `grep -w $1 $HISTFILE | sort | uniq | pr -tn` "");
     IFS=$oldIFS;
     printf "%s\n" "${cmd[@]}" | less -F;
     echo -n "enter number of desired command [1 - $(( ${#cmd[@]} - 2 ))]: ";
     read answer;
     eval "${cmd[$answer]#*$TAB}"
}

Thanks,
GJ


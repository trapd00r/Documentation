From zsh-workers-request@math.gatech.edu  Fri Oct 20 23:34:28 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.net.au (8.7/8.7) with SMTP id XAA07992 for <mason@werple.mira.net.au>; Fri, 20 Oct 1995 23:34:10 +1000 (EST)
Received: from euclid (euclid.skiles.gatech.edu) by gatech.edu with SMTP id AA11488
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Fri, 20 Oct 1995 09:26:41 -0400
Received: by euclid (5.x/SMI-SVR4)
	id AA27797; Fri, 20 Oct 1995 09:23:26 -0400
Resent-Date: Fri, 20 Oct 1995 14:24:12 +0100 (BST)
Old-Return-Path: <zefram@dcs.warwick.ac.uk>
From: Zefram <A.Main@dcs.warwick.ac.uk>
Message-Id: <25800.199510201324@stone.dcs.warwick.ac.uk>
Subject: Zsh on MachTen
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Fri, 20 Oct 1995 14:24:12 +0100 (BST)
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]6467.79
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"WBTd1.0.Fo6.DBwXm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/485
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

I've just observed zsh (2.6-beta9 plus one-line redirection bug fix)
compiling on a MachTen system -- the results may be of interest.

First, the system is not recognised by config.guess.  The host type has
to be set manually -- a minor problem.  (We used
powerpc-macintosh-machten.)  uname -a reports

 Elizium 4 0.0 Macintosh

The first field is blank, and the second is the hostname.  I am told
that the blank field, OS name, should be MachTen or something similar.
The OS is basically 4.4BSD.

With the host type set, configuration went smoothly (though very, very
slowly).  Compilation took in total about an hour, and generated the
following warnings:

gcc -c -I.. -I. -I. -DCONFIG_BROKETS -DHAVE_CONFIG_H -Wall -Wno-implicit -Wmissing-prototypes -O2 builtin.c
builtin.c: In function `bin_unlimit':
builtin.c:4158: warning: left shift count >= width of type
builtin.c:4185: warning: left shift count >= width of type
builtin.c: In function `bin_ulimit':
builtin.c:4307: warning: left shift count >= width of type
builtin.c: In function `showlimits':
builtin.c:4335: warning: left shift count >= width of type
builtin.c:4355: warning: long long int format, different type arg (arg 2)
builtin.c:4357: warning: long long int format, different type arg (arg 2)
builtin.c: In function `printulimit':
builtin.c:4431: warning: left shift count >= width of type

The "left shift count >= width of type" warnings are generated wherever
RLIM_INFINITY appears.  It is defined thus in sys/resource.h:

#define      RLIM_INFINITY   (((u_quad_t)1 << 63) - 1)

The "different type arg" warnings are generated on the lines that
output resource limits, using the quad type ("%qd" -- I told you this
was BSD).  I think that one is merely a signed/unsigned thing, so "%qu"
should be OK.  This would require a configuration test for unsigned
RLIM_T.  I doubt that this would fix the RLIM_INFINITY problem.  Does
anyone else have any insights?

Despite these warnings, zsh actually runs just fine.  MachTen can be
added to the list of good configurations.

 -zefram

-----BEGIN PGP SIGNATURE-----
Version: 2.6.i

iQBVAgUBMIei7mWJ8JfKi+e9AQH8oAIAhgSbtZmFbNu+JpyIJeBpd8N0lFn99xrn
Dt1YMR8INvj04ZqAa/jCrZMORt67YxnOtsdi3PiZ8JdSEZggEfQACg==
=Ye7R
-----END PGP SIGNATURE-----


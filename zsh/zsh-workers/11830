From zsh-workers-return-11830-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 09 05:42:23 2000
Return-Path: <zsh-workers-return-11830-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2985 invoked from network); 9 Jun 2000 05:42:22 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Jun 2000 05:42:22 -0000
Received: (qmail 27835 invoked by alias); 9 Jun 2000 05:42:15 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11830
Received: (qmail 27828 invoked from network); 9 Jun 2000 05:42:14 -0000
Message-ID: <20000609054212.20625.qmail@web1303.mail.yahoo.com>
Date: Thu, 8 Jun 2000 22:42:12 -0700 (PDT)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Interrupt causing problems for subsequent completions
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

>> Also, on a side note, I think there might be a bug in compadd (possibly
>> matching) that causes it to get in a bad state if an interrupt is sent while
it
>> is working.  I typically want to interrupt in situations when completion is
>> slow.  Completion works, but matching seems to have some problems.  (I know,
>> you probably want some those helpful details...)
>
>Indeed, I do.

Thought so...  Sigh, don't have much in the way of details yet.  I did notice
that the signal was being caught by a stack trace that ends like:
      
            strlen         
            modify         [subst.c:2001]
            paramsubst     [subst.c:1538]
            stringsubst    [subst.c:121]
            prefork        [subst.c:70]
            execcmd        [exec.c:1715]

So it looks like compadd is not being interrupted.  But maybe the completion
widget state is somehow messed up.

I have directory /drive2/tools that I attempt to type as "cd /d2/to<TAB>" that
completes properly ( my matching spec has  "r:[^0-9]||[0-9]=**"). But after
interrupting a completion widget, normal completion fails, and it attempts to
do correction, and doesn't expand properly.


-FR.

__________________________________________________
Do You Yahoo!?
Yahoo! Photos -- now, 100 FREE prints!
http://photos.yahoo.com


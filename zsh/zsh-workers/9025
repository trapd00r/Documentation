From zsh-workers-return-9025-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Dec 13 19:25:06 1999
Return-Path: <zsh-workers-return-9025-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 622 invoked from network); 13 Dec 1999 19:25:04 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Dec 1999 19:25:04 -0000
Received: (qmail 22821 invoked by alias); 13 Dec 1999 19:24:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9025
Received: (qmail 22814 invoked from network); 13 Dec 1999 19:24:58 -0000
Date: Mon, 13 Dec 1999 19:24:57 +0000
From: Adam Spiers <adam@spiers.net>
To: zsh-workers@sunsite.auc.dk
Subject: optimisations
Message-ID: <19991213192457.A8947@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh-workers@sunsite.auc.dk
References: <Liam.945065738.543685.31995.772540271@fizz> <991213182445.ZM11778@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre3i
In-Reply-To: <991213182445.ZM11778@candle.brasslantern.com>
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.12 i686

Bart Schaefer (schaefer@candle.brasslantern.com) wrote:
> The last one is a bit unfortunate, but just "compinit" (without even
> trying any completions yet) adds half a megabyte to the RSS of zsh on
> my system, and it only goes up from there as functions autload and
> start caching their results in shell variables.

This reminds me.  Not only does the completion system make the
environment, and hence memory usage large, but it slows startup down.
Are there any significant optimisations which can be done?  Maybe
caching some of the large associative arrays to disk in (say) DBM
format so that several shells can share them?  I know this is already
done in .zcompdump ... any others?  (I've been meaning to do this for
_man, actually.)  I notice that $history gets set to the whole
history; what uses that?  I have HISTSIZE=5000 so this variable is
fairly sizeable!


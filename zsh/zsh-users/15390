From zsh-users-return-15390-mason-zsh=primenet.com.au@zsh.org Fri Sep 10 22:50:13 2010
Return-Path: <zsh-users-return-15390-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25458 invoked by alias); 10 Sep 2010 22:50:13 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15390
Received: (qmail 28570 invoked from network); 10 Sep 2010 22:50:10 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.2 required=5.0 tests=BAYES_00,TVD_RCVD_IP
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at fruitbat.org does not designate permitted sender hosts)
Date: Fri, 10 Sep 2010 15:42:53 -0700 (PDT)
From: "Peter A. Castro" <doctor@fruitbat.org>
To: Piotr Karbowski <jabberuser@gmail.com>
cc: zsh-users@zsh.org
Subject: Re: zsh as login shell and x-terms.
In-Reply-To: <4C8AA68B.5030203@gmail.com>
Message-ID: <alpine.LNX.2.00.1009101527500.3916@gremlin.fruitbat.org>
References: <4C8AA68B.5030203@gmail.com>
User-Agent: Alpine 2.00 (LNX 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed

On Fri, 10 Sep 2010, Piotr Karbowski wrote:

> Hi there.

Greetings, Piotr,

> I found quite strange issue with zsh as login shell. When I log to system by 
> tty or by ssh my zsh checking/execing zprofile, which is good. but when I 
> open new urxvt window (or any other terminal, such as xterm) there is no 
> zprofile loaded. I need to do manualy 'zsh -l'. I have no idea why, I think 
> my zprofile should be loaded every time I start new terminal window.

This is more a question of urxvt and xterm configuration than zsh, or
really a matter of X configuration.

A short answer to your question is that both terminal emulators start
your shell as a sub-shell by default, instead of as a login-shell.

Both emulators have options to start the shell as a login shell (see "man
urxvt" or "man xterm"), but I suspect you'd prefer, as most people would,
a more automatic solution, which is to add an entry to your
$HOME/.Xresources file (which is loaded once when you start your X
session) or $HOME/.Xdefaults file (which is used dynamically each time an
X app runs).

Both emulators happen to use the same X resource name for the action of
running a login-shell, so you can cover both by adding a single entry to
either of the above mentioned files:

   *loginShell: true

Or, of you prefer to tailor this action to these specific emulator(s)
only:

   xterm*loginShell: true
   urxvt*loginShell: true

I'd suggest putting which ever you form you choose into .Xdefaults so you
can easily disable it without having to log out of your X session to
effect the change.

> -- Piotr.

-- 
Peter A. Castro <doctor@fruitbat.org> or <Peter.Castro@oracle.com>
 	"Cats are just autistic Dogs" -- Dr. Tony Attwood


From zsh-workers-return-16715-mason-zsh=primenet.com.au@sunsite.dk Mon Feb 25 09:47:40 2002
Return-Path: <zsh-workers-return-16715-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14506 invoked from network); 25 Feb 2002 09:47:39 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 25 Feb 2002 09:47:39 -0000
Received: (qmail 11085 invoked by alias); 25 Feb 2002 09:47:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16715
Received: (qmail 11073 invoked from network); 25 Feb 2002 09:47:33 -0000
Message-ID: <20020225094729.25283.qmail@web9303.mail.yahoo.com>
Date: Mon, 25 Feb 2002 09:47:29 +0000 (GMT)
From: =?iso-8859-1?q?Oliver=20Kiddle?= <okiddle@yahoo.co.uk>
Subject: Re: Per command _redirect completion
To: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Cc: zsh-workers@sunsite.dk
In-Reply-To: <20020225055948.43039.qmail@web10408.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

 --- Felix Rosencrantz <f_rosencrantz@yahoo.com> wrote:
> Below is a proposed change for the _redirect completion function.  If
> there
> is a function with the name _redirect:COMMAND, that function is
> called
> to perform completion.  Otherwise, the default behavior of completing
> files
> is performed.  This is the way we do variable specific dispatch for
> _value.
> 
> If there are no objections, I'll create a real diff and checkin.

I would prefer if - both for redirection and for values - we had
separate associative arrays like _comps. And then, perhaps a compdef
option for adding to these new associations.

This is for a number of reasons, one being consistency with the way we
handle commands.

Many of the _value: functions just call one other function. It'd be
better if instead, for example we could specify in the #compdef on
_x_display to handle the $DISPLAY variable. Also, in many cases what
should be completed is already being done in another function. For
example, $GZIP should complete gzip options. It'd be more useful to
direct this into _gzip where gzip options are already completed and
_gzip would just need a compstate test. 

This redirection suggestion is even more linked to the command being
run and again it would be more useful to use the existing command's
completion function and have it work out what sort of files to
complete.

Oliver



__________________________________________________
Do You Yahoo!?
Everything you'll ever need on one web page
from News and Sport to Email and Music Charts
http://uk.my.yahoo.com


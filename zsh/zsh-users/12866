From zsh-users-return-12866-mason-zsh=primenet.com.au@sunsite.dk Mon May 26 21:07:00 2008
Return-Path: <zsh-users-return-12866-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3755 invoked from network); 26 May 2008 21:06:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00,WHOIS_DMNBYPROXY
	autolearn=no version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 May 2008 21:06:58 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 11184 invoked from network); 26 May 2008 21:06:44 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 May 2008 21:06:44 -0000
Received: (qmail 22830 invoked by alias); 26 May 2008 21:06:30 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12866
Received: (qmail 22810 invoked from network); 26 May 2008 21:06:30 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 26 May 2008 21:06:30 -0000
Received: from vms173005pub.verizon.net (vms173005pub.verizon.net [206.46.173.5])
	by bifrost.dotsrc.org (Postfix) with ESMTP id AFFD080589A4
	for <zsh-users@sunsite.dk>; Mon, 26 May 2008 23:06:26 +0200 (CEST)
Received: from torch.brasslantern.com ([71.121.11.8])
 by vms173005.mailsrvcs.net
 (Sun Java System Messaging Server 6.2-6.01 (built Apr  3 2006))
 with ESMTPA id <0K1H00F2SUCBTRYP@vms173005.mailsrvcs.net> for
 zsh-users@sunsite.dk; Mon, 26 May 2008 16:00:12 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m4QL6IdK008951	for
 <zsh-users@sunsite.dk>; Mon, 26 May 2008 14:06:19 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m4QL6I3F008950	for zsh-users@sunsite.dk; Mon,
 26 May 2008 14:06:18 -0700
Date: Mon, 26 May 2008 14:06:18 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Problem with zkbd
In-reply-to: <20080526220401.34c1061d@ate.itt.uni-stuttgart.de>
To: <zsh-users@sunsite.dk>
Message-id: <080526140618.ZM8949@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <20080526214815.3f5dc00a@ate.itt.uni-stuttgart.de>
	<20080526220401.34c1061d@ate.itt.uni-stuttgart.de>
Comments: In reply to Anonymous bin Ich <ichbinanon@gmail.com>
 "Re: Problem with zkbd" (May 26, 10:04pm)
X-Virus-Scanned: ClamAV 0.91.2/7250/Mon May 26 20:21:30 2008 on bifrost
X-Virus-Status: Clean

On May 26, 10:04pm, Anonymous bin Ich wrote:
}
} > I just compiled and installed zsh (from cvs). I installed while the
} > umask was 022. Now, when I run zkbd, I get "permission denied" instead
} > of messages.
[...]
} The problem went away after reboot :o

In that case, it probably would have gone away had you simply logged out
and back in.

I wouldn't have bothered replying except for this:

} > Looking on google, I found similar error:
} > http://www.unix.com/shell-programming-scripting/12701-new-z-shell-user.html
} > but no solution.

Just for the benefit of anyone reading the mailing list archives: to call
that a similar error may be a bit of a stretch.  It's from 2003, it's on
a Windows NT machine, and it's for Amol Deshpande's precompiled zsh 3.0.5
which was already ancient at the time.

However, if you mean that when you wrote "instead of messages" above, you
were implying that the here-documents in zkbd were failing, I did find a
way to reproduce that:

schaefer<512> zsh -f
% umask 444
% cat <<\EOF
heredoc> Hi there
heredoc> EOF
zsh: permission denied
% 

Here-documents are implemented using temporary files, and when the umask
is such that the current user won't have permission to read the files
that he creates, here-documents will break.  Zsh is not alone in this,
although zsh's error message is more cryptic:

schaefer<513> bash    
[schaefer@torch tmp]$ umask 444
[schaefer@torch tmp]$ cat <<\EOF
> Hi there
> EOF
bash: cannot create temp file for here document: Permission denied


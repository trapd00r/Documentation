From zsh-workers-return-7481-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Aug 25 12:58:02 1999
Return-Path: <zsh-workers-return-7481-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12813 invoked from network); 25 Aug 1999 12:58:00 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Aug 1999 12:58:00 -0000
Received: (qmail 17767 invoked by alias); 25 Aug 1999 12:57:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7481
Received: (qmail 17760 invoked from network); 25 Aug 1999 12:57:48 -0000
Date: Wed, 25 Aug 1999 14:57:45 +0200 (MET DST)
Message-Id: <199908251257.OAA12438@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Peter Stephenson's message of Tue, 24 Aug 1999 15:46:43 +0200
Subject: Re: PATCH: completion


Peter Stephenson wrote:

> Sven Wischnowsky wrote:
> >     Btw. I didn't change `_cvs' mainly because I use the `parameter'
> >     module and there is a bug with the stuff that `allows' local
> >     special parameters: the associative array `commands' in `_cvs' has 
> >     (obviously) the same name as the one from the `parameter'
> >     module. The new code in typeset_single() has the effect that this
> >     `local' parameter behaves like the one from the module, i.e. if
> >     you can't use the names of special parameters for local parameters 
> >     without having them behave like the global ones. Maybe we have to
> >     wait for Peter here...
> 
> This isn't a bug, local special parameters are supposed to stay special; it
> would have been much easier if they weren't.  At least, I could change it
> but then things like `local PATH=...' (which is now documented) wouldn't
> work.

Yes, I was to hasty to shout `bug', but this irritated me a lot...

Still, this is potentially dangerous if someone writes a module
defining some parameters  and someone else writes a shell function
using the same names -- almost everything can happen.

I think we should either rename all module parameters to `z*', showing 
(and documenting) how such parameters should be named, or we add a way 
to allow shell functions to say that they really want only a normal
local parameter.

Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-9704-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 14 09:08:06 2000
Return-Path: <zsh-workers-return-9704-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2682 invoked from network); 14 Feb 2000 09:08:04 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Feb 2000 09:08:04 -0000
Received: (qmail 21128 invoked by alias); 14 Feb 2000 09:07:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9704
Received: (qmail 21121 invoked from network); 14 Feb 2000 09:07:58 -0000
Date: Mon, 14 Feb 2000 10:07:53 +0100 (MET)
Message-Id: <200002140907.KAA00751@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Tanaka Akira's message of 12 Feb 2000 06:10:32 +0900
Subject: Re: dotfiles under a directory doesn't complete


Tanaka Akira wrote:

> Z(2):akr@is27e1u11% Src/zsh -f
> is27e1u11% bindkey -e; autoload -U compinit; compinit -D; compdef _tst tst
> is27e1u11% ls Completion/.*
> Completion/.cvsignore  Completion/.distfiles
> is27e1u11% ls Completion/.<TAB>
> 
> It completes nothing.

Wrong (old) parameter name...

Bye
 Sven

diff -ru ../z.old/Completion/Core/_path_files Completion/Core/_path_files
--- ../z.old/Completion/Core/_path_files	Mon Feb 14 10:03:42 2000
+++ Completion/Core/_path_files	Mon Feb 14 10:05:28 2000
@@ -255,7 +255,7 @@
 
     if [[ "$tpre$tsuf" = */* ]]; then
       if [[ ! -o globdots && "$PREFIX" = .* ]]; then
-        tmp1=( ${^tmp1}${skipped}*(-/) ${^tmp1}${slash}.*(-/) )
+        tmp1=( ${^tmp1}${skipped}*(-/) ${^tmp1}${skipped}.*(-/) )
       else
         tmp1=( ${^tmp1}${skipped}*(-/) )
       fi
@@ -269,7 +269,7 @@
       fi
     else
       if [[ ! -o globdots && "$PREFIX" = .* ]]; then
-        tmp1=( ${^tmp1}${skipped}${^~pats} ${^tmp1}${slash}.${^~pats} )
+        tmp1=( ${^tmp1}${skipped}${^~pats} ${^tmp1}${skipped}.${^~pats} )
       else
         tmp1=( ${^tmp1}${skipped}${^~pats} )
       fi

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


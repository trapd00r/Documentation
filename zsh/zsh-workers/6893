From zsh-workers-return-6893-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 28 10:22:56 1999
Return-Path: <zsh-workers-return-6893-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22311 invoked from network); 28 Jun 1999 10:22:55 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Jun 1999 10:22:55 -0000
Received: (qmail 26908 invoked by alias); 28 Jun 1999 10:22:43 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6893
Received: (qmail 26901 invoked from network); 28 Jun 1999 10:22:42 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer thoth.mch.sni.de)
Date: Mon, 28 Jun 1999 14:12:17 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-Sender: bor@itsrm2.mow.siemens.ru
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: 3.1.5-pws24: LIBS et al were overwritten by empty values of
 getconf
Message-ID: <Pine.SV4.4.10.9906281407470.4374-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

Zsh did not ignore environment variables because of empty getconf values,
but it still happily overwrote them.

the patch below hopefully fixes it

regards

-- 
------------------------------------------------------------------------
Andrej Borsenkow 		Fax:   +7 (095) 737 2747
Siemens ICP ITS Moscow		Tel:   +7 (095) 737 2723

E-Mail: Andrej.Borsenkow@mow.siemens.ru
-------------------------------------------------------------------------

--- aczsh.m4.org	Wed Jun  9 18:50:06 1999
+++ aczsh.m4	Mon Jun 28 11:28:52 1999
@@ -47,6 +47,8 @@
     eval test '"${'$ac_shellvar'+set}"' = set && ac_set=$ac_shellvar
     ac_getconfs=$ac_getconfs$ac_getconf
     eval ac_test_$ac_shellvar="\$ac_getconf"
+  else
+    eval ac_test_$ac_shellvar="\$$ac_shellvar"
   fi
 done
 case "$ac_result$ac_getconfs" in


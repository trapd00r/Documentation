From zsh-workers-return-6181-mason-zsh=primenet.com.au@sunsite.auc.dk Sun May 02 15:08:14 1999
Return-Path: <zsh-workers-return-6181-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16830 invoked from network); 2 May 1999 15:08:10 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 2 May 1999 15:08:10 -0000
Received: (qmail 22318 invoked by alias); 2 May 1999 15:07:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6181
Received: (qmail 22297 invoked from network); 2 May 1999 15:07:51 -0000
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: User installation script for new completion
References: <9905021403.AA44254@ibmth.df.unipi.it>
From: Bruce Stephens <bruce@cenderis.demon.co.uk>
Date: 02 May 1999 15:56:38 +0100
In-Reply-To: Peter Stephenson's message of "Sun, 02 May 1999 16:03:55 +0200"
Message-ID: <m3so9f5xll.fsf@cenderis.demon.co.uk>
User-Agent: Gnus/5.070083 (Pterodactyl Gnus v0.83) XEmacs/20.4 (Emerald)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Lines: 34

Peter Stephenson <pws@ibmth.df.unipi.it> writes:

> Here's a script to be run by a user who wants to use the new
> completion system.  Note that it assumes that all the functions from
> under Completion/ are already available somewhere --- we need a set
> of Makefile.in's with install targets to do that.

Yes, and I should update RedHat's zsh.spec file too, to include all
this stuff.

> +#  - Probably should allow a set of directories to be added to $fpath,
> +#    like Core, Base, etc.

Yes, probably.  Couldn't compinit do this, though?  i.e., it could
look at the directory it's in for subdirectories, and add them?

I think I'd split this in to 2 scripts.  

One does a basic initialisation, adding the directory(ies) to fpath
and copying the scripts to ~/completion or whatever.  It can set the
various options to suitable defaults.

The other provides some convenient way for me to alter the fancier
options (like approximate completion and things).

Hmm, it's slightly more complex than that, I suppose, since I'd want
to rerun the first script each time I upgraded zsh to upgrade my
scripts, and I wouldn't want it to clobber other settings, but that's
probably not hard to handle.

Anyway, the idea is not to require innocent users from making choices
they can't reasonably be expected to make yet: it ought to be really
easy to get something that works reasonably, and subtleties should be
postponed if possible.


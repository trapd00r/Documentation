From zsh-workers-return-12713-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Aug 28 14:53:29 2000
Return-Path: <zsh-workers-return-12713-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15920 invoked from network); 28 Aug 2000 14:53:27 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Aug 2000 14:53:27 -0000
Received: (qmail 24613 invoked by alias); 28 Aug 2000 14:52:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12713
Received: (qmail 24605 invoked from network); 28 Aug 2000 14:52:49 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000828145244.ZM15657@candle.brasslantern.com>
Date: Mon, 28 Aug 2000 14:52:44 +0000
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: BUG: hrealloc() wants to realloc pushed memory
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

The zstyle command from zsh-users/3404 produces the error.  It may have
something to do with invoking completion at the PS2 prompts -- I see it
when cut'n'pasting lines with leading tabs like this:

zstyle -e ':completion:*:ssh:*' hosts \
	'reply=($(sed -e "/^#/d" -e "s/ .*\$//" -e "s/,/ /g" \
		/etc/ssh_known_hosts ~/.ssh/known_hosts 2>/dev/null))'

And so:

zagzig<353> zstyle -e ':completion:*:ssh:*' hosts \
> 'reply=($(sed -e "/^#/d" -e "s/ .*\$//" -e "s/,/ /g" \
quote> /etc/ssh_known_hosts ~/.ssh/known_hosts 2>/dev/null))'
Breakpoint 1, dputs (
    message=0x80fb44e "BUG: hrealloc() wants to realloc pushed memory")
    at ../../zsh-3.1.6/Src/utils.c:3717
3717        fprintf(stderr, "%s\n", message);
(gdb) where
#0  dputs (message=0x80fb44e "BUG: hrealloc() wants to realloc pushed memory")
    at ../../zsh-3.1.6/Src/utils.c:3717
#1  0x807a786 in hrealloc (
    p=0x400e1918 "\230reply=($(sed -e \"/^#/d\" -e \"s/ .*\\$//\" -e \"s/,/ /g\" \\\n/etc/ssh_", ' ' <repeats 80 times>, old=64, new=128)
    at ../../zsh-3.1.6/Src/mem.c:369
#2  0x8072370 in add (c=95) at ../../zsh-3.1.6/Src/lex.c:520
#3  0x8073bdd in gettokstr (c=95, sub=0) at ../../zsh-3.1.6/Src/lex.c:1185
#4  0x807310b in gettok () at ../../zsh-3.1.6/Src/lex.c:868
#5  0x8071e5d in yylex () at ../../zsh-3.1.6/Src/lex.c:344
#6  0x8089169 in par_simple (complex=0xbffff644, nr=0)
    at ../../zsh-3.1.6/Src/parse.c:1485
#7  0x8087247 in par_cmd (complex=0xbffff644)
    at ../../zsh-3.1.6/Src/parse.c:834
#8  0x80867f3 in par_pline (complex=0xbffff644)
    at ../../zsh-3.1.6/Src/parse.c:687
#9  0x80867a8 in par_sublist2 (complex=0xbffff644)
    at ../../zsh-3.1.6/Src/parse.c:669
#10 0x80865f1 in par_sublist (complex=0xbffff668)
    at ../../zsh-3.1.6/Src/parse.c:624
#11 0x8086024 in par_event () at ../../zsh-3.1.6/Src/parse.c:446
#12 0x8085fa4 in parse_event () at ../../zsh-3.1.6/Src/parse.c:427
#13 0x806ad0f in loop (toplevel=1, justonce=0)
    at ../../zsh-3.1.6/Src/init.c:123
#14 0x806d45c in zsh_main (argc=1, argv=0xbffff6f0)
    at ../../zsh-3.1.6/Src/init.c:1197
#15 0x804a694 in main (argc=1, argv=0xbffff6f0)
    at ../../zsh-3.1.6/Src/main.c:37

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


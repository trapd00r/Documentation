From zsh-users-return-4097-mason-zsh=primenet.com.au@sunsite.dk Thu Aug 09 06:15:06 2001
Return-Path: <zsh-users-return-4097-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 20731 invoked from network); 9 Aug 2001 06:15:05 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Aug 2001 06:15:05 -0000
Received: (qmail 3681 invoked by alias); 9 Aug 2001 06:14:37 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4097
Received: (qmail 3667 invoked from network); 9 Aug 2001 06:14:34 -0000
Date: Thu, 9 Aug 2001 08:14:32 +0200
From: Phil Pennock <Phil.Pennock@globnix.org>
To: zsh-users@sunsite.dk
Subject: Re: compctl whitespace changes
Message-ID: <20010809081432.A8416@globnix.org>
Mail-Followup-To: zsh-users@sunsite.dk
References: <200108080822.KAA04398@beta.informatik.hu-berlin.de> <1010808160315.ZM1017@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1010808160315.ZM1017@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Wed, Aug 08, 2001 at 04:03:15PM +0000
X-Disclaimer: Any views expressed in this message, where not explicitly
	attributed otherwise, are mine and mine alone.  Such views
	do not necessarily coincide with those of any organisation
	or company with which I am or have been affiliated.
X-No-Archive: yes

On 2001-08-08 at 16:03 +0000, Bart Schaefer wrote:
> Better might be
> 
>     _lmutt () { local maildirectory=~/Mail/Lists; _mutt "$@" }

Okay, this has helped with my understanding a lot by pointing me at
things to examine.  Thanks.  However, its not correct by the spec I
gave.  lmutt takes _just_ the name of the mailbox as a parameter, not
with a -f.  So I'd say "lmutt zsh bugtraq" and, inside a loop over zsh &
bugtraq I'd fiddle with the xterm title (if appropriate) and start:
 mutt -f "+Lists/$i"

But Sven's answer works fine, module correcting "bin".

Looking into _mutt, I've seen a problem with Maildirs support.

With Maildir, you have your main Maildir, eg ~/Maildir/, and you can
have folders inside that, each of which has a name starting with a
period.  The normal one is .Trash, but others can be created.  The
current stuff doesn't handle this at all -- you might want a glob_dots
modifier in there.  Ideally mutt would understand folders itself, but
even so I'd still want zsh's tab-completion to allow me to start on a
folder.  :^)

So, what's happening here?  If I do "mutt -f +<TAB>" then I get a list
of files in the default $maildirectory.  If I do:
 compdef _imutt imutt
 _imutt () { setopt localoptions globdots; local
   maildirectory=~/Maildir; _mutt "$@" }
then when I do "imutt -f +<TAB>" I get nothing.  I've looked at the
special maildir handling, and AFAICS in _mailbox_cache() $dirboxes
should get the dot-directories and the while-loop should be happy, since
each folder contains its own {cur,new,tmp}/ ... but it's failing.  Que?

At the moment, I'll stick with the imutt() which is like lmutt() and
uses a compctl like the original one I gave, despite the fact that I
need to *gasp* press space myself manually because -W doesn't handle
names starting with a dot.


Do people feel that a supplied patch to add Maildir support into
$mailpath would be appropriate?  I'm happy to do the work, if it's not
considered a bad idea.

Thanks for the help,
-- 
Pentiums melt in your PC, not in your hand.


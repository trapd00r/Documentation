From zsh-workers-return-20877-mason-zsh=primenet.com.au@sunsite.dk Sat Feb 26 20:59:24 2005
Return-Path: <zsh-workers-return-20877-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14686 invoked from network); 26 Feb 2005 20:59:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 26 Feb 2005 20:59:23 -0000
Received: (qmail 94109 invoked from network); 26 Feb 2005 20:59:16 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 26 Feb 2005 20:59:16 -0000
Received: (qmail 24066 invoked by alias); 26 Feb 2005 20:59:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 20877
Received: (qmail 24056 invoked from network); 26 Feb 2005 20:59:10 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 26 Feb 2005 20:59:10 -0000
Received: (qmail 93772 invoked from network); 26 Feb 2005 20:59:10 -0000
Received: from vms040pub.verizon.net (206.46.252.40)
  by a.mx.sunsite.dk with SMTP; 26 Feb 2005 20:59:06 -0000
Received: from candle.brasslantern.com ([4.11.1.68])
 by vms040.mailsrvcs.net (Sun Java System Messaging Server 6.2 HotFix 0.04
 (built Dec 24 2004)) with ESMTPA id <0ICJ00EXXEACBB70@vms040.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sat, 26 Feb 2005 14:59:01 -0600 (CST)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j1QKwxNi001543	for
 <zsh-workers@sunsite.dk>; Sat, 26 Feb 2005 12:58:59 -0800
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j1QKwx2e001542	for zsh-workers@sunsite.dk; Sat,
 26 Feb 2005 12:58:59 -0800
Date: Sat, 26 Feb 2005 20:58:58 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Assorted GCC warnings, "make test" results from latest CVS
To: zsh-workers@sunsite.dk
Message-id: <1050226205858.ZM1541@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

The top ChangeLog entry as of my "cvs up" is Andrey's 20872.

This is on RHEL3, trying again with unicode support defined.  I suspect most
of these are places where zlelineasstring()/stringaszleline() are needed:

compctl.c: In function `sep_comp_string':
compctl.c:2778: warning: assignment from incompatible pointer type
compctl.c:2825: warning: assignment from incompatible pointer type

compcore.c: In function `set_comp_sep':
compcore.c:1332: warning: assignment from incompatible pointer type
compcore.c:1401: warning: assignment from incompatible pointer type

complist.c: In function `msearch':
complist.c:1880: warning: passing arg 1 of `wctomb' from incompatible pointer type
complist.c:1887: warning: assignment makes pointer from integer without a cast
complist.c:1891: warning: passing arg 2 of `dyncat' from incompatible pointer type
complist.c: In function `domenuselect':
complist.c:2111: warning: passing arg 1 of `dupstring' from incompatible pointer type

zle_hist.c: In function `doisearch':
zle_hist.c:1070: warning: passing arg 1 of `hrealloc' from incompatible pointer type
zle_hist.c:1097: warning: implicit declaration of function `getfullcharrest'
zle_hist.c:1114: warning: passing arg 1 of `hrealloc' from incompatible pointer type
zle_hist.c: In function `getvisrchstr':
zle_hist.c:1301: warning: passing arg 2 of `strcpy' from incompatible pointer type
zle_hist.c:1302: warning: assignment from incompatible pointer type

zle_main.c: In function `zleread':
zle_main.c:936: warning: assignment from incompatible pointer type
zle_main.c: In function `setup_':
zle_main.c:1557: warning: assignment from incompatible pointer type

zle_misc.c: In function `makequote':
zle_misc.c:727: warning: assignment from incompatible pointer type

zle_params.c: In function `get_buffer':
zle_params.c:190: warning: passing arg 1 of `zlelineasstring' from incompatible pointer type
zle_params.c: In function `set_rbuffer':
zle_params.c:271: warning: assignment from incompatible pointer type
zle_params.c:273: warning: assignment from incompatible pointer type
zle_params.c:275: warning: passing arg 2 of `wmemcpy' from incompatible pointer type
zle_params.c: In function `get_lsearch':
zle_params.c:613: warning: passing arg 1 of `metafy' from incompatible pointer type

zle_tricky.c: In function `get_comp_string':
zle_tricky.c:1227: warning: assignment from incompatible pointer type
zle_tricky.c:1301: warning: assignment from incompatible pointer type

zle_utils.c: In function `stringaszleline':
zle_utils.c:191: warning: unused variable `cll'

Several of the tests start printing hashmarks where without the unicode
support they finish in less than 1 second, but that may be a red herring
because I don't see how the ZLE changes could be affecting anything but
the Y* tests.  Y01completion.ztst hangs, as do Y02 and Y03 if I force
them to run with TESTNUM=.  The other tests are (expectedly, I imagine)
all fine.


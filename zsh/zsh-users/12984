From zsh-users-return-12984-mason-zsh=primenet.com.au@sunsite.dk Mon Jun 23 09:17:10 2008
Return-Path: <zsh-users-return-12984-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16555 invoked from network); 23 Jun 2008 09:16:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Jun 2008 09:16:58 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 93870 invoked from network); 23 Jun 2008 09:16:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Jun 2008 09:16:47 -0000
Received: (qmail 29560 invoked by alias); 23 Jun 2008 09:16:38 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12984
Received: (qmail 29544 invoked from network); 23 Jun 2008 09:16:38 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 23 Jun 2008 09:16:38 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 0490C808A214
	for <zsh-users@sunsite.dk>; Mon, 23 Jun 2008 11:16:22 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly29g.srv.mailcontrol.com (MailControl) with ESMTP id m5N9GIXK001033
	for <zsh-users@sunsite.dk>; Mon, 23 Jun 2008 10:16:19 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 23 Jun 2008 10:16:18 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id m5N9GIT5003765
	for <zsh-users@sunsite.dk>; Mon, 23 Jun 2008 10:16:18 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id m5N9GH2L003761
	for <zsh-users@sunsite.dk>; Mon, 23 Jun 2008 10:16:18 +0100
Message-Id: <200806230916.m5N9GH2L003761@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: Camel case word navigation?
In-reply-to: <54c0a1810806222241t47f04d53lf2780f48fc7ee2d2@mail.gmail.com>
References: <54c0a1810806222241t47f04d53lf2780f48fc7ee2d2@mail.gmail.com>
Comments: In-reply-to dackz <dackze@gmail.com>
   message dated "Mon, 23 Jun 2008 01:41:29 -0400."
Date: Mon, 23 Jun 2008 10:16:17 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 23 Jun 2008 09:16:18.0497 (UTC) FILETIME=[CB79B310:01C8D511]
X-Scanned-By: MailControl A-08-50-03 (www.mailcontrol.com) on 10.71.0.139
X-Virus-Scanned: ClamAV 0.92.1/7537/Mon Jun 23 00:41:45 2008 on bifrost
X-Virus-Status: Clean

dackz wrote:
> Does anyone know of a simple way to make zsh match camel case words?
> I.e., where fooBar^W would become foo (like c-subword-mode in GNU
> Emacs).
> 
> So far all I can think of is that maybe I could do it by customizing
> match-words-by-style and using select-word-style, but I'm not quite
> sure where to start with that.

There are two problems: first you still need normal word breaks to be
applied, and second the word boundary isn't in quite the same place as
the code normally assumes, i.e. the character in question is itself the
start of the word, not a non-word character.  I think you'd therefore
need to extend the current handling by keeping the current case
statement (adding some "*"s around names so you could add "-camel" at
the end of word-style) and adding a new test to see if there are upper
case characters followed by lower case characters within the word
matched below the case statement.  I don't see a fundamental problem
with that but it might be fiddly to get right.

You can actually get a certain fraction of the behaviour you want with
the following styles (assuming you have used select-word-style to load
the appropriate functions):

zstyle ':zle:*' word-style specified
zstyle ':zle:*' word-chars "${WORDCHARS}abcdefghijklmnopqrstuvwxyz"

which stops upper case letters from being word characters.  However, the
cursor won't be quite where you want it.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


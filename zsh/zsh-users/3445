From zsh-users-return-3445-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Sep 23 00:42:52 2000
Return-Path: <zsh-users-return-3445-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25288 invoked from network); 23 Sep 2000 00:42:50 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 23 Sep 2000 00:42:50 -0000
Received: (qmail 8270 invoked by alias); 23 Sep 2000 00:41:58 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3445
Received: (qmail 8260 invoked from network); 23 Sep 2000 00:41:57 -0000
Date: Sat, 23 Sep 2000 01:41:52 +0100
From: Alan Third <alan@idiocy.org>
To: zsh-users@sunsite.auc.dk
Subject: using \r in a while statement
Message-ID: <20000923014152.A2045@idiocy.org>
Mail-Followup-To: Alan Third <alan@idiocy.org>, zsh-users@sunsite.auc.dk
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i

I have a script which takes a usenet message id as an argument
and then downloads the message and sends it to a pager.
My current problem is testing for the end of the news article.
I'm using a while loop to read in the article a line at a time.
The article is ended by a line which only has .\r\n on it, so
the while statment looks a bit like:

while [[ $LINE != ".\r" ]]; do
    readline
    printline
done

Unfortunately this doesn't work.
I found if I used ^Q^M in emacs I could insert the actual code in
place of the \r and this works, but it means that if someone looks
at my code on my web page then it looks all strange and I'm sure
that it won't download properly.

I've ended up with:
while [[ $LINE != `echo ".\r"` ]]; do
    readline
    printline
done

which works, but I was wondering if anyone could think of a better
way of doing it?

Thanks...
-- 
Alan Third


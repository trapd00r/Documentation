From zsh-workers-request@math.gatech.edu Mon Dec 07 12:08:22 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12604 invoked from network); 7 Dec 1998 12:08:20 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 7 Dec 1998 12:08:20 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id HAA05666;
	Mon, 7 Dec 1998 07:00:03 -0500 (EST)
Resent-Date: Mon, 7 Dec 1998 07:00:03 -0500 (EST)
Date: Mon, 7 Dec 1998 12:58:12 +0100 (MET)
Message-Id: <199812071158.MAA11065@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@math.gatech.edu
In-reply-to: Sven Wischnowsky's message of Thu, 3 Dec 1998 11:17:45 +0100
	(MET)
Subject: Re: cdablevars and cd completion in 3.1.5
Resent-Message-ID: <"AxDa-1.0.TO1.3DyQs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4707
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


I wrote:

> ... [ message 4698 ]

The patch in this message contained a `fix' for quoting words
resulting from completion. This looked good until I tried completion
on a parameter name. So the patch below removes the corresponding
changes again.

Sorry!

Bye
 Sven

*** os/Zle/zle_tricky.c	Thu Dec  3 11:18:40 1998
--- Src/Zle/zle_tricky.c	Mon Dec  7 12:23:14 1998
***************
*** 2281,2289 ****
      int l, r = 0, ocs, a = cs;
  
      if (m->ipre) {
! 	char *p = quotename(m->ipre, NULL, NULL, NULL);
! 
! 	inststrlen(p, 1, (l = strlen(p)));
  	r += l;
      } 
      if (m->pre) {
--- 2281,2287 ----
      int l, r = 0, ocs, a = cs;
  
      if (m->ipre) {
! 	inststrlen(m->ipre, 1, (l = strlen(m->ipre)));
  	r += l;
      } 
      if (m->pre) {
***************
*** 4814,4820 ****
  	 * to insert any unambiguous prefix and suffix, if possible.         */
  
  	if (ainfo->iprefix && *ainfo->iprefix) {
! 	    inststrlen(quotename(ainfo->iprefix, NULL, NULL, NULL), 1, -1);
  	    inststrlen(ainfo->pprefix, 1, -1);
  	    ps = ainfo->iaprefix;
  	    lc = ainfo->ilinecl;
--- 4812,4818 ----
  	 * to insert any unambiguous prefix and suffix, if possible.         */
  
  	if (ainfo->iprefix && *ainfo->iprefix) {
! 	    inststrlen(ainfo->iprefix, 1, -1);
  	    inststrlen(ainfo->pprefix, 1, -1);
  	    ps = ainfo->iaprefix;
  	    lc = ainfo->ilinecl;


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


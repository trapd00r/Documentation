From zsh-users-return-11110-mason-zsh=primenet.com.au@sunsite.dk Tue Jan 09 21:54:14 2007
Return-Path: <zsh-users-return-11110-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14283 invoked from network); 9 Jan 2007 21:54:11 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO,NO_REAL_NAME,UNPARSEABLE_RELAY autolearn=no 
	version=3.1.7
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 9 Jan 2007 21:54:11 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 82894 invoked from network); 9 Jan 2007 20:54:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 Jan 2007 20:54:02 -0000
Received: (qmail 27015 invoked by alias); 9 Jan 2007 20:53:54 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 11110
Received: (qmail 27006 invoked from network); 9 Jan 2007 20:53:53 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 9 Jan 2007 20:53:53 -0000
Received: (qmail 81731 invoked from network); 9 Jan 2007 20:53:53 -0000
Received: from ihemail4.lucent.com (135.245.0.39)
  by a.mx.sunsite.dk with SMTP; 9 Jan 2007 20:53:49 -0000
Received: from nwsgpa.ih.lucent.com (h135-1-121-22.lucent.com [135.1.121.22])
	by ihemail4.lucent.com (8.13.8/IER-o) with ESMTP id l09KrlFg025252
	for <zsh-users@sunsite.dk>; Tue, 9 Jan 2007 14:53:47 -0600 (CST)
Received: from homer.ih.lucent.com.ih.lucent.com by nwsgpa.ih.lucent.com (8.11.7p3+Sun/EMS-1.5 sol2)
	id l09KrlZ18854; Tue, 9 Jan 2007 14:53:47 -0600 (CST)
Received: by homer.ih.lucent.com.ih.lucent.com (8.12.1+Sun/EMS-1.5 client sol2)
	id l09Krl0b012128; Tue, 9 Jan 2007 14:53:47 -0600 (CST)
From: mkkwong2@alcatel-lucent.com
Message-Id: <200701092053.l09Krl0b012128@homer.ih.lucent.com.ih.lucent.com>
Subject: "trap ... DEBUG" to execute before (instead of after) each command
To: zsh-users@sunsite.dk
Date: Tue, 9 Jan 2007 14:53:47 -0600 (CST)
X-Mailer: ELM [version 2.5 PL7]
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.57 on 135.245.2.39

Currently "trap ... DEBUG" is used to define some routine that is
executed AFTER each command. This is modeled after the old ksh.

The new Korn shell 93 has changed this behavior. The "trap DEBUG"
routine is executed BEFORE each command instead. This new behavior
makes more sense and is useful in writing a symbolic debugger for
shell scripts.

I would appreciate any information on how one can make zsh (perhaps
even hacking the zsh source code) emulate this new behavior of the
Korn shell. 

I suggest that future version of zsh should provide this feature (by
using a new option that can be set or unset to get the old or new
behavior).

Please reply to me directly if that is easier. Thanks for any help.

mk kwong
mkkwong@alcatel-lucent.com


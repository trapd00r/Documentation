From zsh-users-return-12081-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 23 10:33:33 2007
Return-Path: <zsh-users-return-12081-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17800 invoked from network); 23 Oct 2007 10:33:25 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Oct 2007 10:33:25 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 25744 invoked from network); 23 Oct 2007 10:33:13 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Oct 2007 10:33:13 -0000
Received: (qmail 26307 invoked by alias); 23 Oct 2007 10:33:05 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12081
Received: (qmail 18962 invoked from network); 22 Oct 2007 11:11:25 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 22 Oct 2007 11:11:25 -0000
Received: (qmail 30165 invoked from network); 22 Oct 2007 11:11:25 -0000
Received: from smtp.ctxuk.citrix.com (HELO SMTP.EU.CITRIX.COM) (62.200.22.115)
  by a.mx.sunsite.dk with SMTP; 22 Oct 2007 11:11:20 -0000
X-IronPort-AV: E=Sophos;i="4.21,310,1188792000"; 
   d="scan'208";a="11465871"
Received: from lonpexchmx01.citrite.net ([10.30.224.191])
  by LONPIPO01.EU.CITRIX.COM with ESMTP; 22 Oct 2007 07:11:13 -0400
Received: from lonpexch01.citrite.net ([10.30.224.136]) by lonpexchmx01.citrite.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 22 Oct 2007 12:10:15 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Completion problems on cygwin when nocaseglob is set
Date: Mon, 22 Oct 2007 12:10:04 +0100
Message-ID: <DD74FBB8EE28D441903D56487861CD9D224E86E7@lonpexch01.citrite.net>
In-Reply-To: <20071022103452.6c0580c6@news01>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Completion problems on cygwin when nocaseglob is set
thread-index: AcgUjyKpOiZ7tI6PTDOw+rqeB3qXIQACThLg
References: <DD74FBB8EE28D441903D56487861CD9D223A0DF0@lonpexch01.citrite.net><20a807210710200509t43730713oa909fce4e0a57940@mail.gmail.com><DD74FBB8EE28D441903D56487861CD9D223A0DF8@lonpexch01.citrite.net> <20071022103452.6c0580c6@news01>
From: "John Cooper" <John.Cooper@citrix.com>
To: "Peter Stephenson" <pws@csr.com>,
	<zsh-users@sunsite.dk>
Cc: "John Cooper" <John.Cooper@citrix.com>
X-OriginalArrivalTime: 22 Oct 2007 11:10:15.0401 (UTC) FILETIME=[1F61B590:01C8149C]

Completion fails with "mount -c /" and "setopt nocaseglob" and "autoload
-U compinit" and "autoload compinit".
It works with the more usual "mount -c /cygdrive".

If I start with the working "mount -c /cygdrive" I can repro the problem
as follows:

C:\>zsh -f
$P$Gmount
C:\cygwin\bin on /usr/bin type system (binmode)
C:\cygwin\lib on /usr/lib type system (binmode)
C:\cygwin on / type system (binmode)
b: on /cygdrive/b type system (binmode,noumount)
c: on /cygdrive/c type system (binmode,noumount)
d: on /cygdrive/d type system (binmode,noumount)
e: on /cygdrive/e type system (binmode,noumount)
r: on /cygdrive/r type system (binmode,noumount)
v: on /cygdrive/v type system (binmode,noumount)
$P$G
$P$Gsetopt nocaseglob
$P$Gautoload -U compinit
$P$Gcompinit
$P$G
$P$Gls /cygdrive/c/<TAB>       # this works
$P$G
$P$Gmount -c /
$P$G
$P$Gls /c/<TAB>                # this fails


At this stage "ls /c" lists the files in c:\, but completion fails when
I "ls /c/<TAB>".
The problem seems specific to absolute paths. If I "cd /c" I can then
complete files and folders relative to "/c".


My mount table is now as follows:

$P$Gmount
C:\cygwin\bin on /usr/bin type system (binmode)
C:\cygwin\lib on /usr/lib type system (binmode)
C:\cygwin on / type system (binmode)
b: on /b type system (binmode,noumount)
c: on /c type system (binmode,noumount)
d: on /d type system (binmode,noumount)
e: on /e type system (binmode,noumount)
r: on /r type system (binmode,noumount)
v: on /v type system (binmode,noumount)

Thanks,

    --- John.

-----Original Message-----
From: Peter Stephenson [mailto:pws@csr.com]=20
Sent: 22 October 2007 10:35
To: zsh-users@sunsite.dk
Subject: Re: Completion problems on cygwin when nocaseglob is set

On Sat, 20 Oct 2007 13:30:02 +0100
"John Cooper" <john.cooper@eu.citrix.com> wrote:
> Completion also fails if I use `cd /c/<TAB>' after I've `setopt
> nocaseglob' and works if I `setopt caseglob'.

Are you saying all completion fails with "mount -c /" and "setopt
nocaseglob"
regardless of anything else?  I can't get this to happen.  Is it
specific
to this case, or does the usual "mount -c /cygdrive" show it too?  Is it
specific to absolute paths?  (In short, I'm likely to need a lot more
help.)

--=20
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


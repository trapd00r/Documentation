From zsh-workers-request@euclid.skiles.gatech.edu Wed Jan 15 19:45:58 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 10707 invoked from network); 15 Jan 1997 19:45:56 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 15 Jan 1997 19:45:56 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id OAA11756; Wed, 15 Jan 1997 14:51:24 -0500 (EST)
Resent-Date: Wed, 15 Jan 1997 14:43:39 -0500 (EST)
Message-Id: <199701151943.OAA11477@euclid.skiles.gatech.edu>
Date: 15 Jan 1997 14:27 EST
Sender: "Alain Caron" <alainc@nortel.ca>
To: zsh-users@math.gatech.edu
From: "Alain Caron" <alainc@nortel.ca>
Subject: How to turn sh_word_split on for a single command
Resent-Message-ID: <"tmd6q3.0.Vp2.hDJto"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/604
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu



In my .zprofile, I have to use a command similar to this one in order
to set-up my environment.

eval `some_command | command_filter`

My problem is that some_command is written for ksh/sh and I do not
have the sh_word_split option set.  This causes the above command to
fail.

It complains with the following error message:
zsh: no such file or directory: /usr/bin/X11/resize -u
which is clearly because of the sh_word_split option unset.

As a work-around, I did the following:

setopt shwordsplit
eval `some_command | command_filter`
unsetopt shwordsplit

which works fine.  The problem with this is that it is not elegant and
can be potentially dangerous if ever change my mind about having
shwordsplit option unset.  I know I could query the original state of
the option and only to this setopt/unsetopt if the option was
originally unset.

By looking at the man page, I thought I could use something like this:

eval ${=$(some_command | command_filter)}

but it fails the same way.

I am using zsh 3.0.2 on a HP 715 with HP-UX 9.05.  Zsh has been
compiled with the native HP cc compiler.

Regards,

Alain Caron
alainc@nortel.ca


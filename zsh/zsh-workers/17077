From zsh-workers-return-17077-mason-zsh=primenet.com.au@sunsite.dk Mon May 06 07:49:02 2002
Return-Path: <zsh-workers-return-17077-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29056 invoked from network); 6 May 2002 07:49:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 6 May 2002 07:49:01 -0000
Received: (qmail 12379 invoked by alias); 6 May 2002 07:48:51 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17077
Received: (qmail 12360 invoked from network); 6 May 2002 07:48:50 -0000
Message-ID: <6134254DE87BD411908B00A0C99B044F035BB41F@mowd019a.mow.siemens.ru>
From: Borsenkow Andrej <Andrej.Borsenkow@mow.siemens.ru>
To: "'Zsh hackers list'" <zsh-workers@sunsite.dk>
Subject: completion in quotes - " vs ' - no suffix added
Date: Mon, 6 May 2002 11:54:54 +0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain

I stumbled upon that doing mondo completion. It is irrelevant for mondo
itself still it looks strange in general case.

With this completion (from _mondo) and menu selection active:

  "-E[exclude path(s) from backup]:paths to exclude from
backup:->quoted_path" \
  "-I[path(s) to backup]:paths to inlcude in backup:->quoted_path" \

  quoted_path )
    local suf="/ \t\n"
    [[ -n $compstate[quote] ]] && { suf="$compstate[quote]$suf"; compset -q;
}
    _files -r $suf && ret=0
  ;;

I get:

bor@itsrm2% l
a b/  c d/
bor@itsrm2% mondoarchive -I 'a\ b c\ d'
Completing file
a\ b/  c\ d/

this is O.K. (including auto-suffix removal) but with " I get

bor@itsrm2% mondoarchive -I "a\\ b
Completing file
a\\ b   c\\ d

no suffix added.

This is with the current CVS version.

-andrej


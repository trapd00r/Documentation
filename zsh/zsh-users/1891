From zsh-workers-request@math.gatech.edu Thu Oct 29 13:42:30 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 2922 invoked from network); 29 Oct 1998 13:42:29 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 29 Oct 1998 13:42:29 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id IAA07316;
	Thu, 29 Oct 1998 08:34:03 -0500 (EST)
Resent-Date: Thu, 29 Oct 1998 08:33:58 -0500 (EST)
Message-Id: <9810291323.AA28218@ibmth.df.unipi.it>
To: "G. Khalsa" <gkhalsa@jeppesen.com>
Cc: zsh-users@math.gatech.edu
Subject: Re: Completion of cd type functions? 
In-Reply-To: ""G. Khalsa""'s message of "Thu, 29 Oct 1998 13:18:01 NFT."
             <9810299096.AA909663631@smtp-gw.jeppesen.com> 
Date: Thu, 29 Oct 1998 14:23:38 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>
Resent-Message-ID: <"XJZgf3.0.hn1.5x6Es"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1891
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

"G. Khalsa" wrote:
> alias cxxsrc 'cd ~/development/source/cxx/\!*'
> complete cxxsrc "p@1@D:$HOME/development/source/cxx@"
> 
> This way I can just type cxxsrc from anywhere and have it complete only with 
> directories in $HOME/development/source/cxx.
> 
> Can I do this somehow in zsh (simply)?

In zsh 3.1, you need

cxxsrc() { cd ~/development/source/cxx/$1; }
compctl -W ~/development/source/cxx -/ cxxsrc

In older versions it's harder, particularly to get subdirectories.
You need to write a completion function which sticks the appropriate
part in front of the word so far, lists the directories that are
there, then deletes the front part of the word again and returns the
result; plus it still doesn't work as a path since in lists you get
the whole word, not just the last part of the path.

> Unfortunately the lete2ctl script fails when I try to run it so I can't get a
> ll 
> my nifty tcsh completions translated automatically.

The supplied version doesn't go down too well with recent versions of
perl.  There's a new version of lete2ctl for 3.1, which should appear
soon.  It doesn't handle the 'D' code since that doesn't appear in any
of the tcsh manuals I have access to.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarotti 2, 56100 Pisa, Italy


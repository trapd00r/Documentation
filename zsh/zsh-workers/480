From zsh-workers-request@math.gatech.edu  Thu Oct 19 02:20:23 1995
Received: from gatech.edu (gatech.edu [130.207.244.244]) by werple.net.au (8.7/8.7) with SMTP id CAA22983 for <mason@werple.mira.net.au>; Thu, 19 Oct 1995 02:20:20 +1000 (EST)
Received: from euclid (euclid.skiles.gatech.edu) by gatech.edu with SMTP id AA08319
  (5.65c/Gatech-10.0-IDA for <mason@werple.mira.net.au>); Wed, 18 Oct 1995 12:14:34 -0400
Received: by euclid (5.x/SMI-SVR4)
	id AA07405; Wed, 18 Oct 1995 12:12:02 -0400
Resent-Date: Wed, 18 Oct 1995 17:12:30 +0100
Old-Return-Path: <sinclair@dis.strath.ac.uk>
To: zsh-workers@math.gatech.edu
Cc: Carlos Carvalho <carlos@snfep1.if.usp.br>
Subject: Re: behaviour with rsh 
In-Reply-To: Your message of "Tue, 17 Oct 1995 19:37:31 -0200."
Date: Wed, 18 Oct 1995 17:12:30 +0100
Message-Id: <16729.814032750@dis.strath.ac.uk>
From: Duncan Sinclair <sinclair@dis.strath.ac.uk>
Resent-Message-Id: <"hY3TP3.0.dp1.HTIXm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/480
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Carlos Carvalho writes:
>
>Before zsh used to close file descriptors until 10. It was a hidden
>compile option. Why was it removed? I remember Duncan changed it a
>long time ago, but didn't suppress it, I think.
>

I can't remember my exact involvement in this, but the behaviour
of rsh and various shells is one area where I have too much
knowledge, and probably too strong opinions.

<PLUG>
Of course, the *complete* solution to this problem is to use
my "rxx" program, available from 
   ftp://ftp.dis.strath.ac.uk/pub/sinclair/rxx-4.2.2.tar.gz
</PLUG>

Now, my particular feeling was that although the "close fds 3-10"
solution fixes the problem, it is not an ideal solution in the
case when you happen to want to pass a file descriptor to zsh.
(This must have been my ammendment - the if test to see if it
is a "zsh -c" command.)

Ideally, what we want is a test to see if we are running under
rsh, and then do the close-fds.  I remember promising such a
while ago, but never got round to it.  I'll think more about it
this week.

More vague recollections on demand,


Duncan.


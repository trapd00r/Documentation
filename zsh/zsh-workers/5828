From zsh-workers-return-5828-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Mar 17 08:15:14 1999
Return-Path: <zsh-workers-return-5828-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27817 invoked from network); 17 Mar 1999 08:15:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Mar 1999 08:15:13 -0000
Received: (qmail 1456 invoked by alias); 17 Mar 1999 08:01:06 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5828
Received: (qmail 23863 invoked from network); 16 Mar 1999 16:15:19 -0000
Message-Id: <9903161559.AA55511@ibmth.df.unipi.it>
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: Re: zsh-3.1.5-pws-12: emulate -RL resets -x option 
In-Reply-To: ""Andrej Borsenkow""'s message of "Tue, 16 Mar 1999 18:25:06 NFT."
             <003301be6fc1$2ba9c470$21c9ca95@mowp.siemens.ru> 
Date: Tue, 16 Mar 1999 16:59:18 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

"Andrej Borsenkow" wrote:
> Just found when debugging completion function. emulate -RL is the last line
> I see after entering the function

That's because it restores the option xtrace to the default value (off).
You have to set it explicitly in that function, or test it before the
`emulate' and then restore it after.  If you don't want so many options
set, drop the `-R' to emulate, so that it will only change basic syntatic
features.  Arguably that's the right thing to do in completion functions
anyway, since you're supposedly relying on using the user's current
interactive environment, and only making sure the syntactic features work
properly, i.e. we're all too paranoid.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


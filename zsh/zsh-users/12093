From zsh-users-return-12093-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 23 17:59:47 2007
Return-Path: <zsh-users-return-12093-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24699 invoked from network); 23 Oct 2007 17:59:39 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Oct 2007 17:59:39 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 34596 invoked from network); 23 Oct 2007 17:59:32 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Oct 2007 17:59:32 -0000
Received: (qmail 521 invoked by alias); 23 Oct 2007 17:59:24 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12093
Received: (qmail 501 invoked from network); 23 Oct 2007 17:59:23 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 23 Oct 2007 17:59:23 -0000
Received: (qmail 33246 invoked from network); 23 Oct 2007 17:59:23 -0000
Received: from 69-12-150-177.dsl.static.sonic.net (HELO ripple.fruitbat.org) (69.12.150.177)
  by a.mx.sunsite.dk with SMTP; 23 Oct 2007 17:59:17 -0000
Received: (from daemon@localhost)
	by ripple.fruitbat.org (8.13.4/8.8.8/PAC-1.3) id l9NHuv1Z011758;
	Tue, 23 Oct 2007 10:56:57 -0700
Received: from ming.fruitbat.org(192.168.55.2) by ripple.fruitbat.org via smap (V2.1+anti-relay+anti-spam)
	id xma011752; Tue, 23 Oct 07 17:56:49 GMT
Received: from gremlin.fruitbat.org (IDENT:202@gremlin.fruitbat.org [192.168.55.4])
	by ming.fruitbat.org (8.12.10/8.10.2/PAC-1.6) with ESMTP id l9NHunBr029389;
	Tue, 23 Oct 2007 10:56:49 -0700
Date: Tue, 23 Oct 2007 10:56:48 -0700 (PDT)
From: "Peter A. Castro" <doctor@fruitbat.org>
To: Peter Stephenson <pws@csr.com>
cc: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: Completion problems on cygwin when nocaseglob is set
In-Reply-To: <20071023184058.536dd547@news01>
Message-ID: <Pine.LNX.4.64.0710231045500.4202@gremlin.fruitbat.org>
References: <DD74FBB8EE28D441903D56487861CD9D223A0DF8@lonpexch01.citrite.net>
 <20071022103452.6c0580c6@news01> <DD74FBB8EE28D441903D56487861CD9D224E86E7@lonpexch01.citrite.net>
 <20071022123128.2db6000c@news01> <DD74FBB8EE28D441903D56487861CD9D224E8A05@lonpexch01.citrite.net>
 <20071023101151.3757a369@news01> <DD74FBB8EE28D441903D56487861CD9D225F6432@lonpexch01.citrite.net>
 <200710231156.l9NBuQwA019246@news01.csr.com>
 <DD74FBB8EE28D441903D56487861CD9D225F6859@lonpexch01.citrite.net>
 <20071023165708.41f29476@news01> <20071023171227.GB31377@blorf.net>
 <200710231724.l9NHOMnk022505@news01.csr.com> <20071023184058.536dd547@news01>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed

On Tue, 23 Oct 2007, Peter Stephenson wrote:

Greetings, Peter & John,

> On Tue, 23 Oct 2007 18:24:22 +0100
> Peter Stephenson <pws@csr.com> wrote:
>>> http://www.cygwin.com/ml/cygwin/2003-07/msg01188.html
>>
>> Yes, that seems to be the same conclusion as us:  "mount -c /" fails in
>> that way and no one really knows why.
>
> Actually, now I've actually bothered looking, that's a different
> failure.  In that case, "ls /c" didn't work, but we didn't have that problem
> even if /c wasn't explicitly created.  Our problem (with Cygwin) is that "ls /"
> doesn't list "c", even though "/c" when directly addressed behaves normally.

"ls /c" won't list "c" unless that dir exists on the underlying
filesystem of the mount point.  That's more a of a Cygwin and Windows
thing than a zsh thing.  Obviously if readdir() isn't returning the entry
it can't be zsh's fault.

Remember that Cygwin is a simulated filesystem on top of the real
filesystem, so certain things defer to the real backing store, for
content, and this appears to be one of those cases.

Likewise doing "ls /c/<tab>" won't work because "c" doesn't exist in the
mount point's dir and can't be looked up for a dir list.

Now, as to the caseglob'ing working in 4.2.6 and not 4.3.4...well, there
have been several changes in the completion system between those two
versions.

PeterS, is it time for a new release? A lot of fixes have been committed
since 4.3.4...

-- 
Peter A. Castro <doctor@fruitbat.org> or <Peter.Castro@oracle.com>
 	"Cats are just autistic Dogs" -- Dr. Tony Attwood


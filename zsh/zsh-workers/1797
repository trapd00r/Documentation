From A.Main@dcs.warwick.ac.uk Sun Jul 28 08:12:37 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id IAA23578 for <mason@werple.mira.net.au>; Sun, 28 Jul 1996 08:12:35 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id RAA26806; Sat, 27 Jul 1996 17:50:10 -0400 (EDT)
Resent-Date: Sat, 27 Jul 1996 17:50:10 -0400 (EDT)
From: Zefram <A.Main@dcs.warwick.ac.uk>
Message-Id: <9805.199607272148@stone.dcs.warwick.ac.uk>
Subject: Re: options shenanigans in pre4
To: hzoli@cs.elte.hu (Zoltan Hidvegi)
Date: Sat, 27 Jul 1996 22:48:54 +0100 (BST)
Cc: A.Main@dcs.warwick.ac.uk, zsh-workers@math.gatech.edu
In-Reply-To: <199607272101.XAA00537@hzoli.ppp.cs.elte.hu> from "Zoltan Hidvegi" at Jul 27, 96 11:01:27 pm
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]7874.54
X-US-Congress: Moronic fuckers
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"-bKdO.0.mY6.Iye-n"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1797
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 1886
Status: OR

>> Where did that "is" come from?  It's obviously a typo, and should be
>> removed.
>
>I just applied your patch and replaced SH_FILE_SUBST with SH_FILE_EXPN.
>Either it was already in the patch or I accidently pressed some keys.

I've checked; it was already in the patch.  It's a typo on my part.

>I would not like that.  I've just checked pdksh which interprets -s as
>SH_IN_STDIN unlike ksh93 which sorts the positional parameters.  POSIX does
>not requires -s.  It seems that the majority of the shells interpret -s as
>shinstdin.  Perhaps the best is to bring it back even if it increases the
>risk of misusing it.

I based the ksh option set on pdksh, not realising the
incompatibility.  As both sh and pdksh handle -s the way zsh does, I
think it would be better to use -s for SHIN_STDIN.  We should then
remove -t, if we're going to be consistent.

>I'd rather say pdksh.  Neither bash nor ksh93 know about -X and -l, but
>both know all of the other sh options in zsh only they interpret -s in a
>different way.  pdksh knows both -X and -l but -s behaves as in bash (and
>as in the Solaris 2.4 /bin/sh).  This means that the most precise option
>name would be PDKSH_OPTION_LETTERS :-) but the next best match is
>SH_OPTION_LETTERS if we restore -s as shinstdin.

OK, SH_OPTION_LETTERS seems fine in that case.

On a related matter, I suggest you re-examine the status of -1 and -C
(PRINT_EXIT_VALUE and NO_CLOBBER).  In pre4, -C returned to being
PRINT_EXIT_VALUE in the zsh option set, though zshoptions(1) claims
that -C is always NO_CLOBBER.  If this is due to me having merged the
change into my option patch incorrectly, I apologise.  Either the
documentation or the code needs to change, and I suggest that changing
the documentation would be preferable (as -C has traditionally been
PRINT_EXIT_VALUE in zsh, and it's NO_CLOBBER in the ksh option set
anyway).

-zefram



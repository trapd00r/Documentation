From zsh-users-return-12297-mason-zsh=primenet.com.au@sunsite.dk Thu Dec 06 10:30:18 2007
Return-Path: <zsh-users-return-12297-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 9036 invoked from network); 6 Dec 2007 10:30:07 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 6 Dec 2007 10:30:07 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 3667 invoked from network); 6 Dec 2007 10:29:59 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 6 Dec 2007 10:29:59 -0000
Received: (qmail 13893 invoked by alias); 6 Dec 2007 10:29:44 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12297
Received: (qmail 13872 invoked from network); 6 Dec 2007 10:29:44 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 6 Dec 2007 10:29:44 -0000
Received: (qmail 2281 invoked from network); 6 Dec 2007 10:29:44 -0000
Received: from smtp20.orange.fr (193.252.22.29)
  by a.mx.sunsite.dk with SMTP; 6 Dec 2007 10:29:38 -0000
Received: from me-wanadoo.net (localhost [127.0.0.1])
	by mwinf2018.orange.fr (SMTP Server) with ESMTP id 7E0BA1C000AB
	for <zsh-users@sunsite.dk>; Thu,  6 Dec 2007 11:29:37 +0100 (CET)
Received: from artesyncp.com (unknown [86.194.142.19])
	by mwinf2018.orange.fr (SMTP Server) with ESMTP id 1614E1C000A7;
	Thu,  6 Dec 2007 11:29:37 +0100 (CET)
X-ME-UUID: 20071206102937905.1614E1C000A7@mwinf2018.orange.fr
Date: Thu, 6 Dec 2007 10:29:29 +0000
From: Stephane Chazelas <stephane_chazelas@yahoo.fr>
To: Eric Smith <es@fruitcom.com>
Cc: Zsh Users <zsh-users@sunsite.dk>
Subject: Re: avoid interpretation of special characters
Message-ID: <chaz20071206102913.GA18025@artesyncp.com>
Mail-Followup-To: Eric Smith <es@fruitcom.com>,
	Zsh Users <zsh-users@sunsite.dk>
References: <20071206101149.GA10394@fruitcom.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20071206101149.GA10394@fruitcom.com>
Organization: Embedded Computing Emerson Network Power
X-URL: http://www.emersonembeddedcomputing.com
User-Agent: Mutt/1.5.16 (2007-09-19)

On Thu, Dec 06, 2007 at 11:11:49AM +0100, Eric Smith wrote:
> For my command (say mut), I want to avoid shell interpretation of
> characters like ~ and > or <
> so when I go mut  ~f foo and ~r <2w ~r >1w
> I want those characters passed literally to the script.
> (instead of obviously have to use backslash or quotes for this
> purpose.
[...]

Does that include spaces. Do you want everything past the first
space to be passed to "mut" in one single argument?

you could do something like:

alias mut=':;#'
setopt interactivecomments
check-for-mut() {
  if [[ $1 = "mut "* ]]; then
    command mut "${1#mut }"
  fi
}
preexec_functions+=(check-for-mut)

(not tested).

Alternatively, you could redefine the accept-line widget so that
it inserts quotes were needed.

accept-line() {
  if [[ $BUFFER = "mut "* ]]; then
    BUFFER="mut ${(qq)BUFFER#mut }"
  fi
  zle .accept-line
}
zle -N accept-line

-- 
Stephane


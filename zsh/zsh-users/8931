From zsh-users-return-8931-mason-zsh=primenet.com.au@sunsite.dk Wed Jun 01 15:36:28 2005
Return-Path: <zsh-users-return-8931-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12567 invoked from network); 1 Jun 2005 15:36:28 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 1 Jun 2005 15:36:28 -0000
Received: (qmail 73185 invoked from network); 1 Jun 2005 15:36:22 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Jun 2005 15:36:22 -0000
Received: (qmail 3473 invoked by alias); 1 Jun 2005 15:36:14 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8931
Received: (qmail 3463 invoked from network); 1 Jun 2005 15:36:13 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 1 Jun 2005 15:36:13 -0000
Received: (qmail 71985 invoked from network); 1 Jun 2005 15:36:13 -0000
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by a.mx.sunsite.dk with SMTP; 1 Jun 2005 15:36:09 -0000
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1DdVB9-0003hk-Ja
	for zsh-users@sunsite.dk; Wed, 01 Jun 2005 17:30:48 +0200
Received: from h34-aclarke.sv.meer.net ([205.217.153.34])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Wed, 01 Jun 2005 17:30:47 +0200
Received: from tk-gmane+at by h34-aclarke.sv.meer.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <zsh-users@sunsite.dk>; Wed, 01 Jun 2005 17:30:47 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: zsh-users@sunsite.dk
From:  "Tim K. (Gmane)" <tk-gmane+at@idpax.com>
Subject:  Re: named pipes blocking zsh
Date:  Wed, 01 Jun 2005 08:24:19 -0700
Lines: 20
Message-ID: <d7kjph$ugg$1@sea.gmane.org>
References:  <d7kfuc$gem$1@sea.gmane.org> <1050601144728.ZM11059@candle.brasslantern.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: h34-aclarke.sv.meer.net
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
In-Reply-To: <1050601144728.ZM11059@candle.brasslantern.com>
Sender: news <news@sea.gmane.org>
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Now that I think about it, what if the pine process crashed and didn't 
have a chance to send an EOF or remove the pipe (assuming pine 
implemented the EOF)? It seems that the read with timeout in zsh should 
work, it should not just block forever even though a timeout is 
specified, but maybe it's not possible to do because it's stuck in 
open() not in a read call.

Thanks.

>
>I think this qualifies as a pine bug.  Removing a named pipe will not
>by itself send an EOF to any processes that are listening on it.  The
>right way for pine to shut down the connection would be to open the fifo,
>remove the disk file, then send a final EOF by closing the descriptor.
>
>Anything else is a race condition with the listening process, which may
>re-open the fifo for reading before pine has removed it.
>
>  
>


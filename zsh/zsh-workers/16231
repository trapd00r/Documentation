From zsh-workers-return-16231-mason-zsh=primenet.com.au@sunsite.dk Fri Nov 09 18:30:05 2001
Return-Path: <zsh-workers-return-16231-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14902 invoked from network); 9 Nov 2001 18:30:04 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?giI/JmoOsNIO97ePNPnsI8vHPsOCfRbt?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 9 Nov 2001 18:30:04 -0000
Received: (qmail 1732 invoked from network); 9 Nov 2001 18:30:02 -0000
Received: from sunsite.dk (130.225.247.90)
  by proxy.melb.primenet.com.au with SMTP; 9 Nov 2001 18:30:02 -0000
Received: (qmail 16305 invoked by alias); 9 Nov 2001 18:29:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16231
Received: (qmail 16294 invoked from network); 9 Nov 2001 18:29:56 -0000
Message-ID: <20011109182954.59790.qmail@web10402.mail.yahoo.com>
Date: Fri, 9 Nov 2001 10:29:54 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Re: screen -x <complete>
To: zsh-workers <zsh-workers@sunsite.auc.dk>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-1500390998-1005330594=:58246"

--0-1500390998-1005330594=:58246
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

I use GNU screen regularly and wrote a simple completion function for it. 
However, it only handled the -x flag.  Since, there was some interest on this
list, I decide to see if I could easily generate a function via the XML code. 
I think I was able to get a good first pass completion function via the XML
code, which I'm happy about.  It did require some hand editing, but not too
much.


The details about my xml completion generation can be found at:
http://www.geocities.com/f_rosencrantz/screen_generation.htm

Though if you just want the function I've attached it.  It's still could use
some work, but it's a reasonable start.   I think it would be interesting to
add  completions for the commands that can be handed to the "screen -X"
command.  That would need to use the <subcommands> element in screen.xml.

-FR.

__________________________________________________
Do You Yahoo!?
Find a job, post your resume.
http://careers.yahoo.com
--0-1500390998-1005330594=:58246
Content-Type: text/plain; name="screen.txt"
Content-Description: screen.txt
Content-Disposition: inline; filename="screen.txt"

#compdef screen 
#Generated by args.xsl  For details see:
#    http://www.geocities.com/f_rosencrantz/clearcase_generation.htm
 local context state line
           typeset -A opt_args
	_arguments \
		"-a:Force all capabilities into each window's termcap." \
		'-A:Adapt all windows to the new display width & height.' \
		"-c:Read configuration file instead of '.screenrc'.:_files -/" \
		'-d:Detach the elsewhere running screen (with -r: reattach here).:->sessionname' \
		'-dmS:Start as daemon: Screen session in detached mode.' \
		'-D:Detach and logout remote (with -r: reattach here).' \
		'-e:Change command characters.' \
		'-f-:Flow control on, -fn = off, -fa = auto.:((n\:Flow\ conrol\ off a\:Flow\ conrol\ auto))' \
		'-h:Set the size of the scrollback history buffer.' \
		'-i:Interrupt output sooner when flow control is on.' \
		'-l:Login mode on (update /var/run/utmp), -ln = off.' \
		'-list:Do nothing, just list our SockDir.' \
		'-ls:Do nothing, just list our SockDir.' \
		"-L:Terminal's last character can be safely updated." \
		'-m:ignore $STY variable, do create a new screen session.' \
		'-O:Choose optimal output rather than exact vt100 emulation.' \
		'-p:Preselect the named window if it exists.' \
		'-q:Quiet startup. Exits with non-zero return code if unsuccessful.' \
		'-r:Reattach to a detached screen process.:->sessionname' \
		'-R:Reattach if possible, otherwise start a new session.' \
		'-s:Shell to execute rather than $SHELL.' \
		'-S:Name this session <pid>.sockname instead of <pid>.<tty>.<host>.' \
		"-t:Set title. (window's name)." \
		'-T:Use term as $TERM for windows, rather than "screen".' \
		'-U:Tell screen to use UTF-8 encoding.' \
		'-v:Print "Screen version 3.09.11beta (FAU) 11-Oct-01".' \
		'-wipe:Do nothing, just clean up SockDir.' \
		'-x:Attach to a not detached screen. (Multi display mode).' \
		'-X:Execute <cmd> as a screen command in the specified session.:( acladd  addacl  aclchg  acldel  aclgrp  aclumask  activity  allpartial  at  attrcolor  autodetach  autonuke  bce  bell_msg  bind  bindkey  break  breaktype  bufferfile  c1  caption  charset  chdir  clear  colon  command  compacthist  console  copy  copy_reg  crlf  debug  defc1  defautonuke  defbce  defbreaktype  defcharset  defescape  defflow  defgr  defhstatus  defkanji  deflogin  defmode  defmonitor  defobuflimit  defscrollback  defshell  defsilence  defslowpaste  defutf8  defwrap  defwritelock  defzombie  detach  dinfo  displays  digraph  dumptermcap  echo  escape  exec  fit  flow  focus  gr  hardcopy  hardcopy_append  hardcopydir  hardstatus  height  help  history  hstatus  info  ins_reg  kill  lastmsg  license  lockscreen  log  logfile  login  logtstamp  mapdefault  mapnotnext  maptimeout  markkeys  meta  monitor  msgminwait  msgwait  multiuser  nethack  next  nonblock  number  obuflimit  only  other  partial  password  paste  pastefont  pow_break  pow_detach  pow_detach_msg  prev  printcmd  process  quit  readbuf  readreg  redisplay  register  remove  removebuf  reset  resize  screen  scrollback  select  sessionname  setenv  shell  shelltitle  silence  silencewait  sleep  slowpaste  sorendition  split  startup_message  stuff  su  term  termcap  terminfo  termcapinfo  time  title  unsetenv  utf8  vbell  vbell_msg  vbellwait  verbose  version  wall  width  windows  wrap  writebuf  writelock  xoff  xon  zombie  defzombie)'
case $state in
  sessionname)
  # Complete folder names.
  local screendir

    screendir=(`screen -ls | grep Socket | tail -1 | sed -e 's/\.$//' | awk '{print $NF;}'`)

  _wanted files expl 'screen process' _path_files -W screendir
;;
esac
    

--0-1500390998-1005330594=:58246--


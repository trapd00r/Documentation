From zsh-workers-return-15997-mason-zsh=primenet.com.au@sunsite.dk Tue Oct 09 13:37:46 2001
Return-Path: <zsh-workers-return-15997-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25561 invoked from network); 9 Oct 2001 13:37:45 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 9 Oct 2001 13:37:45 -0000
Received: (qmail 8365 invoked by alias); 9 Oct 2001 13:37:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15997
Received: (qmail 8350 invoked from network); 9 Oct 2001 13:37:37 -0000
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: `expand' style with prefix and matchers
Date: Tue, 09 Oct 2001 14:37:02 +0100
Message-ID: <11493.1002634622@csr.com>
From: Peter Stephenson <pws@csr.com>

I hadn't noticed this until about yesterday, but I suspect the ingredient I
didn't have before is that it needs a special matcher.

If I have
  zstyle ':completion:*' expand suffix
then
  ~/bc01/t/h-b-12-p
expands to
  ~/bc01/test/hci-branch-12-patches
(I haven't bothered showing the matcher spec since it obviously works.)

If I have
  zstyle ':completion:*' expand prefix suffix
however, I get the list
  Completing file
  bc01/test/h-b-12-p      bc01/testsclk/h-b-12-p  bc01/traces/h-b-12-p  
Neither of the other two directories contain a match for h-b-12-p.

It looks like overeagerness to apply the `prefix' style even if there is
actually only one possible match --- I would guess it's applying it before
it's done the stuff with matchers.

Probably the worst aspect is that the same problem shows up with
~/bc01/test/h-b-12-p, because the first part matches testsclk, which is a
bit obscure since it doesn't obviously have anything to do with multiple
paths.  In this version, I can tickle the bug without the `suffix' part of
the expand style.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR Ltd., Science Park, Milton Road,
Cambridge, CB4 0WH, UK                          Tel: +44 (0)1223 392070


**********************************************************************
The information transmitted is intended only for the person or
entity to which it is addressed and may contain confidential 
and/or privileged material. 
Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by 
persons or entities other than the intended recipient is 
prohibited.  
If you received this in error, please contact the sender and 
delete the material from any computer.
**********************************************************************


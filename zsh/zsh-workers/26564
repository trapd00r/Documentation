From zsh-workers-return-26564-mason-zsh=primenet.com.au@sunsite.dk Thu Feb 12 15:41:50 2009
Return-Path: <zsh-workers-return-26564-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24276 invoked from network); 12 Feb 2009 15:41:47 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 12 Feb 2009 15:41:47 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 15511 invoked from network); 12 Feb 2009 15:41:42 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 12 Feb 2009 15:41:41 -0000
Received: (qmail 16498 invoked by alias); 12 Feb 2009 15:41:37 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26564
Received: (qmail 16489 invoked from network); 12 Feb 2009 15:41:37 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 12 Feb 2009 15:41:37 -0000
Received: from vms173007pub.verizon.net (vms173007pub.verizon.net [206.46.173.7])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 0239E802720F
	for <zsh-workers@sunsite.dk>; Thu, 12 Feb 2009 16:41:30 +0100 (CET)
Received: from torch.brasslantern.com ([96.238.220.215])
 by vms173007.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 6.3-7.04 (built Sep 26 2008; 32bit))
 with ESMTPA id <0KEY00D0YM64N5N0@vms173007.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Thu, 12 Feb 2009 09:39:45 -0600 (CST)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id n1CFfJMM010881	for
 <zsh-workers@sunsite.dk>; Thu, 12 Feb 2009 07:41:20 -0800
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id n1CFfJKV010880	for zsh-workers@sunsite.dk; Thu,
 12 Feb 2009 07:41:19 -0800
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <090212074119.ZM10879@torch.brasslantern.com>
Date: Thu, 12 Feb 2009 07:41:19 -0800
In-reply-to: <7223.1234433440@thecus>
Comments: In reply to Oliver Kiddle <okiddle@yahoo.co.uk>
 "Re: PATCH: sticky emulation" (Feb 12, 11:10am)
References: <18952.1234307021@pws-pc>
	<090210191804.ZM7110@torch.brasslantern.com>	<20090211202840.000b37aa@pws-pc>
	<090211153758.ZM8681@torch.brasslantern.com>	<20090212094433.30ce1b62@news01>
 <7223.1234433440@thecus>
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: PATCH: sticky emulation
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: ClamAV 0.92.1/8984/Thu Feb 12 15:24:21 2009 on bifrost
X-Virus-Status: Clean

On Feb 12, 11:10am, Oliver Kiddle wrote:
}
} Is it somehow possible with this new feature to, from a function,
} revert to the user's interactive option set.

That'd require a bit more finagling; the saved option state is on the
C call stack, not somewhere that it can easily be grabbed, and we'd
need to figure out at exactly what point to save the options so as to
have the interactive set -- probably within ZLE, so it's orthogonal
to this feature.

Really all you need for option completion is to stash $options during
precmd and reference that in _options instead of the actual $options.


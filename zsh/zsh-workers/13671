From zsh-workers-return-13671-mason-zsh=primenet.com.au@sunsite.dk Mon Mar 19 22:25:40 2001
Return-Path: <zsh-workers-return-13671-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15195 invoked from network); 19 Mar 2001 22:25:39 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Mar 2001 22:25:39 -0000
Received: (qmail 1413 invoked by alias); 19 Mar 2001 22:25:23 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13671
Received: (qmail 1373 invoked from network); 19 Mar 2001 22:25:22 -0000
Date: Mon, 19 Mar 2001 22:25:21 +0000
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: misalignment in zprof output
Message-ID: <20010319222521.A22571@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.4i
X-Home-Page: http://www.new.ox.ac.uk/~adam/
X-OS: RedHat Linux

Just started to fiddle with zprof with the intent of spotting any
bottlenecks in my zsh startup (initial experiments show promptinit as
being quite bad), and spotted some "%5.2f%%" fields in printf() calls,
some of which should evidently be "%6.2f%%" as it's possible for some
of the fields to reach 100.00%, e.g. (apologies for long lines)

num  calls                time                       self            name
-----------------------------------------------------------------------------------
 1)    1         679.84   679.84  36.98%    679.84   679.84  36.98%  compdump
 2)  189         647.31     3.42  35.21%    647.31     3.42  35.21%  compdef
 3)    1        1838.18  1838.18  100.00%    355.17   355.17  19.32%  compinit
 4)    2         155.87    77.93   8.48%    155.87    77.93   8.48%  compaudit

-----------------------------------------------------------------------------------

 3)    1        1838.18  1838.18  100.00%    355.17   355.17  19.32%  compinit
       1/2       155.87   155.87   8.48%      6.09     6.09             compaudit [4]
     189/189     647.31     3.42  35.21%    647.31     3.42             compdef [2]
       1/1       679.84   679.84  36.98%    679.84   679.84             compdump [1]


I don't know off-hand which fields can reach 100% and which can't;
could someone more knowledgeable give these a tweak?


From zsh-users-return-15714-mason-zsh=primenet.com.au@zsh.org Fri Jan 14 15:42:20 2011
Return-Path: <zsh-users-return-15714-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18920 invoked by alias); 14 Jan 2011 15:42:20 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15714
Received: (qmail 28499 invoked from network); 14 Jan 2011 15:42:08 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_LOW,
	SPF_HELO_PASS autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at csr.com does not designate permitted sender hosts)
Date: Fri, 14 Jan 2011 14:58:42 +0000
From: Peter Stephenson <Peter.Stephenson@csr.com>
To: Nix <nix@esperi.org.uk>, <zsh-users@zsh.org>
Subject: Re: zsh 4.3.11 regexp-related crash
Message-ID: <20110114145842.1f60dad7@pwslap01u.europe.root.pri>
In-Reply-To: <877he7sfso.fsf@spindle.srvr.nix>
References: <877he7sfso.fsf@spindle.srvr.nix>
Organization: Cambridge Silicon Radio
X-Mailer: Claws Mail 3.7.8 (GTK+ 2.20.1; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Jan 2011 14:58:42.0541 (UTC) FILETIME=[88EA49D0:01CBB3FB]
X-Scanned-By: MailControl A_10_80_00 (www.mailcontrol.com) on 10.68.1.121

On Fri, 14 Jan 2011 14:47:35 +0000
Nix <nix@esperi.org.uk> wrote:

> This is a regression in 4.3.11, not seen in 4.3.10.
> 
> The following script:
> 
> ,----
> | #!/bin/zsh
> | 
> | cat /etc/passwd | while read A; do
> | 
> |     if [[ $A =~ ":audio:" ]]; then
> |         FBAR="foo"
> |     fi
> | done
> `----
> 
> dumps core:

Thanks, that's already fixed in the patch zsh-workers/28588.  The
problem was that the "=~" expression caused the code that turns the
internally representation back into text associated with the job to lose
its position.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK



Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


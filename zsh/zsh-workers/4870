From zsh-workers-request@math.gatech.edu Wed Dec 30 16:03:53 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 540 invoked from network); 30 Dec 1998 16:03:51 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 30 Dec 1998 16:03:51 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id LAA16071;
	Wed, 30 Dec 1998 11:01:33 -0500 (EST)
Resent-Date: Wed, 30 Dec 1998 11:01:33 -0500 (EST)
Message-Id: <m0zvO03-000X32C@mailgw.approve.se>
Date: Wed, 30 Dec 1998 16:57:31 +0100 (MET)
From: Goran Larsson <hoh@lorelei.approve.se>
Subject: Re: date bug in zsh 3.0.5
To: Peter.Bousfield@wmc.com.au
cc: zsh-workers@math.gatech.edu
In-Reply-To: <B0001133321@bell04.its.wmc.com.au>
MIME-Version: 1.0
Content-Type: TEXT/plain; CHARSET=US-ASCII
Resent-Message-ID: <"Oq-xR3.0.2x3.TvaYs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4870
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On 30 Dec, Bousfield Peter wrote:

>  The %W prompt variable does not seem to work correctly in zsh 3.0.5

>  The century is display as :0 not 00!

The century isn't displayed at all, the years within the century is.

To fix this edit Src/utils.c and replace this

            case 'y':
                *buf++ = '0' + tm->tm_year / 10;
                *buf++ = '0' + tm->tm_year % 10;
                break;

with this

            case 'y':
                *buf++ = '0' + ( tm->tm_year / 10 ) % 10;  /* Y2K fix */
                *buf++ = '0' + tm->tm_year % 10;
                break;

This bug is fixed in version 3.1.5.

-- 
 Goran Larsson            hoh@approve.se
 I was an atheist,        http://home.swipnet.se/hoh/
 until I found out I was God.



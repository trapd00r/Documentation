From zsh-workers-return-7378-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Aug 05 13:49:15 1999
Return-Path: <zsh-workers-return-7378-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 28033 invoked from network); 5 Aug 1999 13:49:14 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 5 Aug 1999 13:49:14 -0000
Received: (qmail 17214 invoked by alias); 5 Aug 1999 13:49:08 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7378
Received: (qmail 17207 invoked from network); 5 Aug 1999 13:49:07 -0000
Message-Id: <9908051318.AA19836@ibmth.df.unipi.it>
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: parameter and quoting (was: Re: Completion problems.) 
In-Reply-To: "Sven Wischnowsky"'s message of "Thu, 05 Aug 1999 14:53:10 DFT."
             <199908051253.OAA17004@beta.informatik.hu-berlin.de> 
Date: Thu, 05 Aug 1999 15:18:05 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Sven Wischnowsky wrote:
> Ah, right, hadn't thought about patterns (ahem)... "${a%'}" reports
> the error.
> 
> Hm. Should the proposed new flag apply to those, too, and change the
> current behaviour to not report the error or should the current
> behaviour of (Q) be changed?

The first possibility sounds sensible to me, too, since ksh allows
you to do

  a="'"
  echo "${a%'}"

although bash complains as well.  It's probably a grey area, since the
single UNIX specification says

   The double-quoting of patterns is different depending on where the
   double-quotes are placed:
   ${x#*}
          The asterisk is a pattern character.
   ${x#"*"}
          The literal asterisk is quoted and not special.

(in the first case they presumably mean the whole expression is quoted), so
properly placed quotes are supposed to be active and this seems to work
OK, i.e. ${a%"'"}.

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


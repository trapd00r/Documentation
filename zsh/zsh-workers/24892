From zsh-workers-return-24892-mason-zsh=primenet.com.au@sunsite.dk Mon Apr 28 18:27:04 2008
Return-Path: <zsh-workers-return-24892-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17752 invoked from network); 28 Apr 2008 18:27:01 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 28 Apr 2008 18:27:01 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 19358 invoked from network); 28 Apr 2008 18:26:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 28 Apr 2008 18:26:54 -0000
Received: (qmail 5838 invoked by alias); 28 Apr 2008 18:26:50 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24892
Received: (qmail 5822 invoked from network); 28 Apr 2008 18:26:50 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 28 Apr 2008 18:26:50 -0000
Received: from wx-out-0506.google.com (wx-out-0506.google.com [66.249.82.229])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 9E2B1808A38A
	for <zsh-workers@sunsite.dk>; Mon, 28 Apr 2008 20:26:45 +0200 (CEST)
Received: by wx-out-0506.google.com with SMTP id h27so4865242wxd.3
        for <zsh-workers@sunsite.dk>; Mon, 28 Apr 2008 11:26:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=I8B4Oa0t4RYtl7bJeHgAI5iRp7A8RZgseVmuUWp6o4U=;
        b=tubMwbvvPRy7PSGC1O8dpnTUz8Sx0JFup/UROUU9EixidISSfy+s4HxRADR4nIwEM7F74JQ/gZYVY6wE0H8SSVHpX0zUMblxCL//6KfzXNz3rij2SxTgdRzZTu5xVVSFWzxieG+PzuSmyCgK0gFltPrRTgTbrGp2sUmFbsD6PNs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=xIaY7F8t9zxnnk/CSGnPst1jyMBFa9p8TgYcE4HtFNpoHOjnLQxUmRo774/mw040//cYbfgYX2fRj0BPt5rJBzKAwlmTGQKBLdpI5JL0Ic6Sp4thbE16BRO0109hrdN0/scqxEZdY2RZgw+X9iKe9BKjFrgD3+vIVekOzQNibxU=
Received: by 10.141.168.7 with SMTP id v7mr3408428rvo.118.1209407201923;
        Mon, 28 Apr 2008 11:26:41 -0700 (PDT)
Received: by 10.140.127.7 with HTTP; Mon, 28 Apr 2008 11:26:41 -0700 (PDT)
Message-ID: <237967ef0804281126x66554276o918f5b2ea0c105df@mail.gmail.com>
Date: Mon, 28 Apr 2008 20:26:41 +0200
From: "Mikael Magnusson" <mikachu@gmail.com>
To: zsh-workers <zsh-workers@sunsite.dk>
Subject: describe-key-briefly crashes in cvs
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Scanned: ClamAV 0.91.2/6980/Mon Apr 28 19:39:47 2008 on bifrost
X-Virus-Status: Clean

% gdb --args zsh -f
GNU gdb 6.8
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "i686-pc-linux-gnu"...
(gdb) run
Starting program: /usr/local/bin/zsh -f
fartmonstret% <alt-x descr<tab>><enter>
Program received signal SIGSEGV, Segmentation fault.
                           0x080ce992 in unmetafy (s=0xa7b4bc2a
"Describe key briefly: _", len=0xafed5930) at utils.c:3592
3592	    for (t = p; (*t = *p++);)
(gdb) bt
#0  0x080ce992 in unmetafy (s=0xa7b4bc2a "Describe key briefly: _",
len=0xafed5930)
    at utils.c:3592
#1  0xa7b43c3e in stringaszleline (instr=0xa7b4bc2a "Describe key
briefly: _", incs=0,
    outll=0xafed59b0, outsz=0xafed59ac, outcs=0x0) at zle_utils.c:311
#2  0xa7b362db in zrefresh () at zle_refresh.c:1423
#3  0xa7b2d201 in describekeybriefly (args=0xa7b51c7c) at zle_main.c:1640
#4  0xa7b2bb57 in execzlefunc (func=0xa7b4fb00, args=0xa7b51c7c,
set_bindk=0) at zle_main.c:1298
#5  0xa7b2b030 in zlecore () at zle_main.c:1043
#6  0xa7b2b733 in zleread (lp=0x80f18fc, rp=0x0, flags=3, context=0)
at zle_main.c:1205
#7  0x080868a3 in autoload_zleread (lp=0x80f18fc, rp=0x0, ha=3, con=0)
at init.c:1221
#8  0x0808712e in inputline () at input.c:278
#9  0x08086fad in ingetc () at input.c:214
#10 0x0807d536 in ihgetc () at hist.c:240
#11 0x0808f2a3 in gettok () at lex.c:663
#12 0x0808eb2e in yylex () at lex.c:350
#13 0x080ab009 in parse_event () at parse.c:451
#14 0x0808406b in loop (toplevel=1, justonce=0) at init.c:129
#15 0x08086be1 in zsh_main (argc=2, argv=0xafed6004) at init.c:1352
#16 0x08055076 in main (argc=0, argv=0x0) at ./main.c:93


-- 
Mikael Magnusson


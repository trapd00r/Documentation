From zsh-workers-return-7846-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Sep 15 14:09:42 1999
Return-Path: <zsh-workers-return-7846-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10746 invoked from network); 15 Sep 1999 14:09:40 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Sep 1999 14:09:40 -0000
Received: (qmail 3331 invoked by alias); 15 Sep 1999 14:09:27 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7846
Received: (qmail 3323 invoked from network); 15 Sep 1999 14:09:27 -0000
Date: Wed, 15 Sep 1999 10:08:56 -0400
From: Clint Adams <schizo@debian.org>
To: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
Cc: zsh-workers@sunsite.auc.dk
Subject: Re: odd completion behavior
Message-ID: <19990915100856.A10934@dman.com>
References: <199909150827.KAA30649@beta.informatik.hu-berlin.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
User-Agent: Mutt/1.0pre2i
In-Reply-To: <199909150827.KAA30649@beta.informatik.hu-berlin.de>

> No and I can't reproduce it. Can you get this error with `zsh -f' or
> could you tell us more about your environment?

Src/zsh is compiled with
--enable-zsh-debug --enable-zsh-mem-debug --enable-zsh-mem-warning \
--enable-zsh-secure-free --enable-zsh-hash-debug

zsh 381 % Src/zsh -f
ghanima% autoload -U compinit
ghanima% compinit
ghanima% compconf completer=_complete:_correct:_approximate
ghanima% setopt nobeep       
ghanima% a2ps --pretty-print=
_main_complete: bad pattern: (^L"^HPs^T@^P [92]
ghanima% a2ps --pretty-print=
_main_complete: bad pattern: h<-^HPs^T@^P [92]
ghanima% a2ps --pretty-print=
_main_complete: bad pattern: (\M-^]/^HPs^T@^P [92]
ghanima% a2ps --pretty-print=
_main_complete: bad pattern: (;x^HPs^T@^P [92]
ghanima% a2ps --pretty-print=
_main_complete: bad set of key/value pairs for associative array [92]
ghanima% a2ps --pretty-print=
_main_complete: bad pattern: Hw(^HPs^T@^P [92]
ghanima% a2ps --pretty-print=
ghanima% ldd Src/zsh
        libdl.so.2 => /lib/libdl.so.2 (0x40005000)
        libnsl.so.1 => /lib/libnsl.so.1 (0x40008000)
        libncurses.so.4 => /lib/libncurses.so.4 (0x4001e000)
        libc.so.6 => /lib/libc.so.6 (0x4005f000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x2aaaa000)

Again, I typed a2ps --pre and then began hitting TAB at various
frequencies.

> The error message irritates me because line 92 in `_main_complete' is
> just `_lastcomp=( "${(@kv)compstate}" )' and the error message is only 
> emitted if the number of elements in the `(...)' is odd (err, an odd
> number of...). And `${(kv)foo}' should never give an odd number of
> strings for an associative array, I think.

> And what's that `bad pattern' message, there is no pattern. Hm.

What shall I try next?


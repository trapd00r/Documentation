From zsh-workers-return-12840-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Sep 19 05:51:08 2000
Return-Path: <zsh-workers-return-12840-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29657 invoked from network); 19 Sep 2000 05:51:07 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Sep 2000 05:51:07 -0000
Received: (qmail 17002 invoked by alias); 19 Sep 2000 05:50:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 12840
Received: (qmail 16994 invoked from network); 19 Sep 2000 05:50:26 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
From: "Andrej Borsenkow" <Andrej.Borsenkow@mow.siemens.ru>
To: <zsh-workers@sunsite.auc.dk>
Subject: RE: Is this statement correct?
Date: Tue, 19 Sep 2000 09:50:24 +0400
Message-ID: <000001c021fd$80f81b80$21c9ca95@mow.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
In-Reply-To: <200009071141.NAA01988@beta.informatik.hu-berlin.de>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4133.2400
Importance: Normal

>
>
> Andrej Borsenkow wrote:
>
> > This from new section, User contribution/Utilities:
> >
> > ====
> > Recompiling Functions
> > ---------------------
> >
> > If you frequently edit your zsh functions, or periodically update your
> > zsh installation to track the latest developments, you may find that
> > function digests compiled with the zcompile builtin are frequently out
> > of date with respect to the function source files.  This is not usually
> > a problem, because zsh always looks for the newest file when loading a
> > function, but it may cause slower shell startup and function loading.
> > ====
> >
> > I remember, that Sven explicitly stated that digest files are
> *not* checked
> > against there source functions to save execution time (individual
> files are).
> > I do not have articele number handy.
>
> I vaguely remember having said something about this or something
> similar but having been confused at that time (I don't remember when
> that was either and can't offer a message number). However: yes, it is
> true. The code *does* compare the times for digest files, individual
> zwc files and the original file (if they can be found). See the
> function try_dump_file() in parse.c.
>


It does not work:

bor@itsrm2% print $fpath
/home/bor/.zsh.d/completion /home/bor/.zsh.d/std-3.1.9-dev-6.zwc
/home/bor/.zsh.d/functions /tools/share/zsh/site-functions ... (standard part
follows)
bor@itsrm2% ll /tools/share/zsh/3.1.9-dev-6/functions/Core/_match
-rw-r--r--   1 root     other       1539 Sep 19 09:44
/tools/share/zsh/3.1.9-dev-6/functions/Core/_match
bor@itsrm2% ll ~/.zsh.d/std-3.1.9-dev-6.zwc
-rw-------   1 bor      sinix    1491984 Sep 18 11:08
/home/bor/.zsh.d/std-3.1.9-dev-6.zwc

Zsh takes _match from digest file and *not* from external definition. Even if
it is newer.

-andrej


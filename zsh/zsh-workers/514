From zsh-workers-request@math.gatech.edu  Wed Nov  1 22:10:49 1995
Received: from math.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with SMTP id WAA24161 for <mason@werple.mira.net.au>; Wed, 1 Nov 1995 22:10:45 +1100 (EST)
Received: by math.gatech.edu (5.x/SMI-SVR4)
	id AA11606; Wed, 1 Nov 1995 06:01:47 -0500
Resent-Date: Wed, 1 Nov 1995 12:02:19 +0100 (MET)
Old-Return-Path: <pws@ifh.de>
From: pws@ifh.de (Peter William Stephenson)
Message-Id: <9511011102.AA05999@sgi.ifh.de>
Subject: bindkey even worse
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Date: Wed, 1 Nov 1995 12:02:19 +0100 (MET)
X-Mailer: ELM [version 2.4 PL24]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-Id: <"jNk253.0.Cr2.QErbm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/514
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

This time, printbinding() is looking for a string to print out when it
should be looking for a key name.

*** Src/zle_main.c.bk	Sun Oct 29 11:50:39 1995
--- Src/zle_main.c	Wed Nov  1 11:58:24 1995
***************
*** 824,833 ****
      Key k = (Key) hn;
      int len;
  
!     if (k->func == z_undefinedkey)
  	return;
      putc('\"', bindout);
!     printbind(k->str, (len = strlen(k->str)) ? len : 1);
      fprintf(bindout, "\"\t");
      if (k->func == z_sendstring) {
  	putc('\"', bindout);
--- 824,833 ----
      Key k = (Key) hn;
      int len;
  
!     if (!k || k->func == z_undefinedkey)
  	return;
      putc('\"', bindout);
!     printbind(k->nam, (len = strlen(k->nam)) ? len : 1);
      fprintf(bindout, "\"\t");
      if (k->func == z_sendstring) {
  	putc('\"', bindout);

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77330
Deutches Electronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.



From zsh-workers-request@math.gatech.edu Tue Dec 08 14:34:38 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11396 invoked from network); 8 Dec 1998 14:34:37 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 8 Dec 1998 14:34:37 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id JAA13260;
	Tue, 8 Dec 1998 09:32:01 -0500 (EST)
Resent-Date: Tue, 8 Dec 1998 09:32:01 -0500 (EST)
From: "Andrej Borsenkow" <borsenkow.msk@sni.de>
To: "Bernd Eggink" <eggink@uni-hamburg.de>,
        "zsh Workers" <zsh-workers@math.gatech.edu>
Subject: RE: typeahead problem
Date: Tue, 8 Dec 1998 17:30:34 +0300
Message-ID: <000a01be22b7$512aedc0$21c9ca95@mowp.siemens.ru>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook 8.5, Build 4.71.2377.0
Importance: Normal
In-Reply-To: <366D32BB.79BDDC23@rrz.uni-hamburg.de>
X-MimeOLE: Produced By Microsoft MimeOLE V5.00.0810.800
Resent-Message-ID: <"EhgMA2.0.4F3.XXJRs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4714
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


>
> In Linux and AIX 4.2 there is no difference in the behaviour whether or
> not I define CLOBBERS_TYPEAHEAD in config.h. Hm, is that the right
> location? I also added "x-*-linux*" to the switch in the "TYPEAHEAD
> KLUDGE" section in configure.in, but that didn't change anything either.
>


Sorry, it is unrelated to typeahead probleam, I had to read better :(

I tried it here with 3.1.5 + patches. It looks, like ZSH takes the first
character on the line and ignores the rest.

while read -q && sleep 10
do
echo YES
done
y <- cursor immediately springs to the next line
yyyYES
      ^^^ output by ZSH
<- note newline
YES

Only first 'y' from 'yyy' is taken. Is it what you've seen?

Well, manual says "read -q reads only one character" so it is really
confusing. Currently it "reads the line and takes the first character".
Who's wrong - binary or manual?

/andrej



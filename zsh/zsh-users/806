From zsh-workers-request@euclid.skiles.gatech.edu Mon Apr 14 16:28:03 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 14293 invoked from network); 14 Apr 1997 16:28:02 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 14 Apr 1997 16:28:02 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id MAA04188; Mon, 14 Apr 1997 12:20:27 -0400 (EDT)
Resent-Date: Mon, 14 Apr 1997 12:18:08 -0400 (EDT)
Message-ID: <19970414121429.29589@retriever>
Date: Mon, 14 Apr 1997 12:14:29 -0400
From: Louis-David Mitterrand <mito@aparima.com>
To: zsh-users@math.gatech.edu
Subject: Re: strange behaviour with .zsh and su
References: <19970414114827.59780@retriever> <Pine.SUN.3.96.970414090030.21724D-100000@kira>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.69
In-Reply-To: <Pine.SUN.3.96.970414090030.21724D-100000@kira>; from Timothy Luoma on Mon, Apr 14, 1997 at 09:01:21AM -0700
Reply-To: mito@sprynet.com
Resent-Message-ID: <"4GQkP3.0.R_._YbKp"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/806
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Apr 14 97, Timothy Luoma <luomat@peak.org> wrote:
> 
> ZSH has a workaround.  Put whatever you want only for interactive inside
> this:
> 
> if [[ -o interactive ]]                 # if an interactive shell
> then
> 
> fi

That's good and useful to know. Thanks.

On Apr 15 97, gwing@primenet.com.au <gwing@primenet.com.au> wrote:
> 1. I hope you are using ZDOTDIR, not ZSHDOTDIR

ZDOTDIR actually, sorry for the typo.

> 2. /etc/zprofile isn't sourced unless you're in a login shell.  Put your
>    ZDOTDIR stuff in /etc/zshenv - that's the only file that can be guaranteed
>    to be read for each instance.

Yes but when you 'su' shouldn't it be a login shell you land in? (Even
though the full environment isn't present as in 'su -l') If so the
/etc/zprofile should be sourced..

> I don't understand your full situation.  Eg. where do your startup files
> reside and where do root's?  You seem to be implying that if you're in a 

I moved the startup files in $HOME/.zsh for each user (including root).

> directory, say /foo , then when you su the startup files are in
> /foo/.zsh  but if you cd to /bar  then when you su the startup files

You are right, I understand now: my 'ZDOTDIR=.zsh' was wrong, as Zefram
also suggested. The correct entry is 'export ZDOTDIR=~/.zsh'. 

Thanks for your help.
-- 

     Louis-David Mitterrand
     http://www.aparima.com/F1/
     mito@aparima.com


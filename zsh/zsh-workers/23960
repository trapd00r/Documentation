From zsh-workers-return-23960-mason-zsh=primenet.com.au@sunsite.dk Mon Oct 15 14:59:04 2007
Return-Path: <zsh-workers-return-23960-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 705 invoked from network); 15 Oct 2007 14:58:55 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 15 Oct 2007 14:58:55 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 18413 invoked from network); 15 Oct 2007 14:58:49 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 15 Oct 2007 14:58:49 -0000
Received: (qmail 16518 invoked by alias); 15 Oct 2007 14:58:46 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23960
Received: (qmail 16499 invoked from network); 15 Oct 2007 14:58:46 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 15 Oct 2007 14:58:46 -0000
Received: (qmail 18114 invoked from network); 15 Oct 2007 14:58:46 -0000
Received: from cluster-d.mailcontrol.com (217.69.20.190)
  by a.mx.sunsite.dk with SMTP; 15 Oct 2007 14:58:39 -0000
Received: from cameurexb01.EUROPE.ROOT.PRI ([62.189.241.200])
	by rly22d.srv.mailcontrol.com (MailControl) with ESMTP id l9FEwXqk008546
	for <zsh-workers@sunsite.dk>; Mon, 15 Oct 2007 15:58:35 +0100
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 15 Oct 2007 15:58:30 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.1/8.13.4) with ESMTP id l9FEwUlI001934
	for <zsh-workers@sunsite.dk>; Mon, 15 Oct 2007 15:58:30 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.1/8.14.1/Submit) with ESMTP id l9FEwUb1001931
	for <zsh-workers@sunsite.dk>; Mon, 15 Oct 2007 15:58:30 +0100
Message-Id: <200710151458.l9FEwUb1001931@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: make curses module not need wideness
In-reply-to: <20071015143456.GA4979@scowler.net>
References: <20071014042142.GA27713@scowler.net> <071014092646.ZM21802@torch.brasslantern.com> <20071014170856.GA14631@scowler.net> <071014151608.ZM26588@torch.brasslantern.com> <200710150911.l9F9BqR1003986@news01.csr.com> <20071015143456.GA4979@scowler.net>
Comments: In-reply-to Clint Adams <clint@zsh.org>
   message dated "Mon, 15 Oct 2007 10:34:56 -0400."
Date: Mon, 15 Oct 2007 15:58:30 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 15 Oct 2007 14:58:30.0872 (UTC) FILETIME=[D9A07D80:01C80F3B]
X-Scanned-By: MailControl A-07-08-10 (www.mailcontrol.com) on 10.68.0.132

Clint Adams wrote:
> On Mon, Oct 15, 2007 at 10:11:52AM +0100, Peter Stephenson wrote:
> > I think it would probably be better to let the windows have arbitrary names
> > and store them in a linked list, as we do for ztcp and zftp.  Presumably
> > there aren't going to be that many of them.  (The names can still be
> > numbers, obviously.)
> 
> So have a struct containing just the WINDOW pointer and some kind of
> identifier?

Something like that.

> Should there be a special assoc parameter containing pointers?

I don't think there needs to be an assoc *parameter*: there's nothing to
map at the shell code level, just a list of names.  This could be
visible in a special array as a free bonus.

Internally, from the point of view of efficiency it's probably not worth
having anything more than a linked list, but on the other hand the hash
stuff does more of the work for you, once you've got it set up (some of
the module stuff got simpler when I turned those into a hash).

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


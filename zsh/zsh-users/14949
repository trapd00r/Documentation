From zsh-users-return-14949-mason-zsh=primenet.com.au@zsh.org Mon Mar 22 03:09:24 2010
Return-Path: <zsh-users-return-14949-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14928 invoked by alias); 22 Mar 2010 03:09:24 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 14949
Received: (qmail 27424 invoked from network); 22 Mar 2010 03:09:21 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received-SPF: pass (ns1.primenet.com.au: SPF record at benizi.com designates 64.130.10.15 as permitted sender)
Date: Sun, 21 Mar 2010 23:09:18 -0400 (EDT)
From: "Benjamin R. Haskell" <zsh@benizi.com>
To: Zsh Users <zsh-users@zsh.org>
Subject: Use of vcs_info
Message-ID: <alpine.LNX.2.01.1003212254040.19615@hp.internal>
User-Agent: Alpine 2.01 (LNX 1266 2009-07-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

I don't fully understand how best to use vcs_info.

My first question is:  what's with the weird $vcs_info_msg_#_ variable 
names? (Why not an array?)

But, beyond that, my big question is: Is there a way to access the 
vcs_comm variable that's sprinkled throughout the VCS_Info functions 
directory?  My guess is that the easiest thing for me to do would be to 
simply remove the 'local -Ax vcs_comm' line in vcs_info, but everything 
else is so well-organized that I figured I must just be missing some way 
to get that variable exported.

The most helpful page so far was Frank Terbeck's prompt_ft_setup 
page[1].  Otherwise I'd've had to have read even more of the code to 
figure out the various

zstyle ':vcs_info:*' actionformats ''
zstyle ':vcs_info:*' formats ''
zstyle ':vcs_info:(sv[nk]|bzr):*' branchformat

tricks that are available.

I already do a bunch of stuff in my pre_cmd and pre_exec functions, and 
I'd really like to just add some things to my prompt conditioned on 
whether (for example) the current git repo is in a rebase, and maybe a 
shortened version of the branch name.  So, is there a way to get the 
info out of vcs_info?

-- 
Best,
Ben

[1] http://ft.bewatermyfriend.org/comp/zsh/functions/prompt_ft_setup.html


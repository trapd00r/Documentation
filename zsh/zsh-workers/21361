From zsh-workers-return-21361-mason-zsh=primenet.com.au@sunsite.dk Sun Jun 19 17:09:37 2005
Return-Path: <zsh-workers-return-21361-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 12315 invoked from network); 19 Jun 2005 17:09:36 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Jun 2005 17:09:36 -0000
Received: (qmail 63912 invoked from network); 19 Jun 2005 17:09:28 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Jun 2005 17:09:28 -0000
Received: (qmail 13480 invoked by alias); 19 Jun 2005 17:09:25 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 21361
Received: (qmail 13471 invoked from network); 19 Jun 2005 17:09:24 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 19 Jun 2005 17:09:24 -0000
Received: (qmail 63566 invoked from network); 19 Jun 2005 17:09:24 -0000
Received: from vms042pub.verizon.net (206.46.252.42)
  by a.mx.sunsite.dk with SMTP; 19 Jun 2005 17:09:21 -0000
Received: from candle.brasslantern.com ([71.116.88.149])
 by vms042.mailsrvcs.net
 (Sun Java System Messaging Server 6.2 HotFix 0.04 (built Dec 24 2004))
 with ESMTPA id <0IIC00BTSCZFG3YA@vms042.mailsrvcs.net> for
 zsh-workers@sunsite.dk; Sun, 19 Jun 2005 12:09:16 -0500 (CDT)
Received: from candle.brasslantern.com (IDENT:schaefer@localhost [127.0.0.1])
	by candle.brasslantern.com (8.12.11/8.12.11) with ESMTP id j5JH9E3q020486	for
 <zsh-workers@sunsite.dk>; Sun, 19 Jun 2005 10:09:14 -0700
Received: (from schaefer@localhost)	by candle.brasslantern.com
 (8.12.11/8.12.11/Submit) id j5JH9Dra020485	for zsh-workers@sunsite.dk; Sun,
 19 Jun 2005 10:09:13 -0700
Date: Sun, 19 Jun 2005 17:09:13 +0000
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: curtag (Re: can't run _email-mutt)
In-reply-to: <22509.1118076149@trentino.groupinfra.com>
To: zsh-workers@sunsite.dk
Message-id: <1050619170913.ZM20484@candle.brasslantern.com>
MIME-version: 1.0
X-Mailer: Z-Mail (5.0.0 30July97)
Content-type: text/plain; charset=us-ascii
References: <20050527141638.GA9644@xpeerience.u-strasbg.fr>
	<7779.1117444705@trentino.groupinfra.com>
	<20050530135757.GA12204@xpeerience.u-strasbg.fr>
	<13199.1117464233@trentino.groupinfra.com>
	<20050602123718.GA21218@xpeerience.u-strasbg.fr>
	<22509.1118076149@trentino.groupinfra.com>
Comments: In reply to Oliver Kiddle <okiddle@yahoo.co.uk>
 "Re: can't run _email-mutt" (Jun  6,  6:42pm)
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=6.0 tests=BAYES_00 autolearn=ham 
	version=3.0.2
X-Spam-Hits: -2.6

Just got a chance to look at this ...

On Jun 6,  6:42pm, Oliver Kiddle wrote:
} 
} Has anyone got any ideas on how to narrow the context for the plugin
} tag-order. Currently, if you want to specify a list of plugins as a
} global setting, you need a context like ':completion:*'. That's not
} nice  but the best alternative is listing commands:
} ':completion:*:(mailx|Mail|mutt|mush|ali|netscape):*'

One possibility would be for _email_addresses to call

  _tags -C email-addresses email-$plugins

which would make the context look like

  :completion:*:*:*:email-addresses:*

} Ideally, _tags should allow me to put 'email-addresses' in as a tag. It
} should perhaps use $curtag.

I'm not sure how $curtag would apply in this case, because it's not set
until _requested or _wanted calls _all_labels from inside the _tags loop?
Or are we talking about nested _tags loops here, which is already a bit
of a sticky wicket?

It's entirely possible that there's some subtlety I'm missing.

On a more general note, though, it would appear that $curtag is rather
under-utilized.  By a quick grep I count about 15 functions that use both
_tags and zstyle without reference to $curtag.  _email_addresses is the
only one that seems to use it as it was intended.


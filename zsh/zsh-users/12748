From zsh-users-return-12748-mason-zsh=primenet.com.au@sunsite.dk Sat Mar 29 07:28:01 2008
Return-Path: <zsh-users-return-12748-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24180 invoked from network); 29 Mar 2008 07:28:00 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 29 Mar 2008 07:28:00 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 63588 invoked from network); 29 Mar 2008 07:27:50 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 29 Mar 2008 07:27:50 -0000
Received: (qmail 17109 invoked by alias); 29 Mar 2008 07:27:40 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 12748
Received: (qmail 17088 invoked from network); 29 Mar 2008 07:27:39 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 29 Mar 2008 07:27:39 -0000
Received: from vms044pub.verizon.net (vms044pub.verizon.net [206.46.252.44])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 3DCE982CD273
	for <zsh-users@sunsite.dk>; Sat, 29 Mar 2008 08:27:35 +0100 (CET)
Received: from torch.brasslantern.com ([71.116.79.77])
 by vms044.mailsrvcs.net (Sun Java System Messaging Server 6.2-6.01 (built Apr
 3 2006)) with ESMTPA id <0JYH00J16E1YQCG4@vms044.mailsrvcs.net> for
 zsh-users@sunsite.dk; Sat, 29 Mar 2008 02:27:35 -0500 (CDT)
Received: from torch.brasslantern.com (localhost.localdomain [127.0.0.1])
	by torch.brasslantern.com (8.13.1/8.13.1) with ESMTP id m2T7RX54020561	for
 <zsh-users@sunsite.dk>; Sat, 29 Mar 2008 00:27:34 -0700
Received: (from schaefer@localhost)	by torch.brasslantern.com
 (8.13.1/8.13.1/Submit) id m2T7RXMS020560	for zsh-users@sunsite.dk; Sat,
 29 Mar 2008 00:27:33 -0700
Date: Sat, 29 Mar 2008 00:27:33 -0700
From: Bart Schaefer <schaefer@brasslantern.com>
Subject: Re: Any way to flag a function such that tracing for it is NOT enabled?
In-reply-to: <44613de00803281138w7cf02e78s17fc3c56b5081ec8@mail.gmail.com>
To: zsh-users@sunsite.dk
Message-id: <080329002733.ZM20559@torch.brasslantern.com>
MIME-version: 1.0
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
Content-type: text/plain; charset=us-ascii
References: <44613de00803281138w7cf02e78s17fc3c56b5081ec8@mail.gmail.com>
Comments: In reply to "Pax Unix" <paxunix@gmail.com>
 "Any way to flag a function such that tracing for it is NOT enabled?" (Mar 28,
 11:38am)
X-Virus-Scanned: ClamAV 0.91.2/6457/Sat Mar 29 00:56:30 2008 on bifrost
X-Virus-Status: Clean

On Mar 28, 11:38am, Pax Unix wrote:
}
} In the documentation, I couldn't find any flag that is the opposite of
} typeset's "-t" option when applied to a function, but that's what I'd
} like.

There's no such thing, but in the specific example of prompts I presume
you're running those functions from precmd, so you can do

    precmd() {
      setopt localoptions no_xtrace no_verbose
      # ... rest of whatever you had in precmd before ...
    }

As you noted you'll still see the trace of the setopt command, but only
once for precmd itself, and thereafter all should be quiet.

If you mean you use "setopt promptsubst" and you have a lot of $(...)
in your PS1 string, well, stop doing that. :-)  Assign a value to
PS1 in precmd instead, or assign to some other variables and refer
to those variables in PS1.


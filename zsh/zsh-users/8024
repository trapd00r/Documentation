From zsh-users-return-8024-mason-zsh=primenet.com.au@sunsite.dk Mon Sep 27 09:22:12 2004
Return-Path: <zsh-users-return-8024-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19917 invoked from network); 27 Sep 2004 09:22:11 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 27 Sep 2004 09:22:11 -0000
Received: (qmail 60227 invoked from network); 27 Sep 2004 09:22:05 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 27 Sep 2004 09:22:05 -0000
Received: (qmail 19979 invoked by alias); 27 Sep 2004 09:21:20 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8024
Received: (qmail 19964 invoked from network); 27 Sep 2004 09:21:19 -0000
Received: from unknown (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 27 Sep 2004 09:21:19 -0000
Received: (qmail 58905 invoked from network); 27 Sep 2004 09:20:20 -0000
Received: from mail36.messagelabs.com (193.109.254.211)
  by a.mx.sunsite.dk with SMTP; 27 Sep 2004 09:20:13 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-21.tower-36.messagelabs.com!1096276811!9682706
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [158.234.9.163]
Received: (qmail 28517 invoked from network); 27 Sep 2004 09:20:11 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-21.tower-36.messagelabs.com with SMTP; 27 Sep 2004 09:20:11 -0000
Received: from trentino.logica.co.uk ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id i8R9KBAI009500
	for <zsh-users@sunsite.dk>; Mon, 27 Sep 2004 10:20:11 +0100
Received: from trentino.logica.co.uk (localhost [127.0.0.1])
	by trentino.logica.co.uk (Postfix) with ESMTP id 7E1B17990DF0
	for <zsh-users@sunsite.dk>; Mon, 27 Sep 2004 11:19:51 +0200 (CEST)
To: zsh-users@sunsite.dk
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <20040925003747.241f4a2d@buddha.localdomain.de> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <20040921175108.5a5f7697@buddha.localdomain.de> <20040922045511.GA22277@picard.franken.de> <20040925003747.241f4a2d@buddha.localdomain.de>
Subject: Re: completion within word 
Date: Mon, 27 Sep 2004 11:19:51 +0200
Message-ID: <17298.1096276791@trentino.logica.co.uk>
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=0.0 required=6.0 tests=none autolearn=no version=2.63
X-Spam-Hits: 0.0

On 25 Sep, "Matthias B." wrote:

> Okay, I've tried it for a while and I'm not happy with it. I have the same
> problems with it as with the bash programmable completion project. Little
> annoyances everywhere such as "svn import k<TAB>" refusing to complete on
> files in the current directory and there's also the complexity. I feel

The patch below fixes that particular annoyance. If you let us know
about any other little annoyances, we can either fix them or let you
know how to configure zsh to avoid them. I've tended to believe that we
have fewer half-hearted attempts at completion functions than
bash_completion.

> So I'm going to live with basic builtin completion. Any chances of getting
> the above completion to work with it? If not, I'd be grateful for pointers
> into the zsh code so that I can see if I can fix it myself. 

I'm not entirely sure how to fix that from the builtin completion using
only compctl. I've not used it in a while. It would be possible using a
standalone completion widget function which specifically looks for that
situation. I'd suggest you just try to use the $path array form of $PATH
instead because it is easier to manipulate. Instead of the your line,
you can do:

  path=( $path /bi<tab>
or in zsh 4.2:
  path+=( /bi<tab>

Oliver

Index: Completion/Unix/Command/_subversion
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_subversion,v
retrieving revision 1.6
diff -u -r1.6 _subversion
--- Completion/Unix/Command/_subversion	14 Apr 2004 08:17:53 -0000	1.6
+++ Completion/Unix/Command/_subversion	27 Sep 2004 09:10:21 -0000
@@ -84,7 +84,7 @@
     ;;
     *)
       case $_svn_subcmd_usage in
-        *(SRC|DST|TARGET|URL*PATH)*)
+        *(SRC|DST|TARGET|URL*PATH|PATH*URL)*)
           _svn_subcmds+=( 
 	    '*: : _alternative "files:file:_files" "urls:URL:_svn_urls"'
 	  )


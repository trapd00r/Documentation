From zsh-workers-return-23656-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 05 17:22:24 2007
Return-Path: <zsh-workers-return-23656-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 573 invoked from network); 5 Jul 2007 17:22:20 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.1 (2007-05-02) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.1
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 5 Jul 2007 17:22:20 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 8261 invoked from network); 5 Jul 2007 17:22:14 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 5 Jul 2007 17:22:14 -0000
Received: (qmail 17994 invoked by alias); 5 Jul 2007 17:22:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 23656
Received: (qmail 19943 invoked from network); 5 Jul 2007 16:22:09 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 5 Jul 2007 16:22:10 -0000
Received: (qmail 87976 invoked from network); 5 Jul 2007 16:22:09 -0000
Received: from smtp8.tech.numericable.fr (82.216.111.44)
  by a.mx.sunsite.dk with SMTP; 5 Jul 2007 16:21:58 -0000
Received: from brouette (m37.net81-66-39.noos.fr [81.66.39.37])
	by smtp8.tech.numericable.fr (Postfix) with ESMTP id E2FCE4A821
	for <zsh-workers@sunsite.dk>; Thu,  5 Jul 2007 18:21:57 +0200 (CEST)
Received: by brouette (Postfix, from userid 1000)
	id 923D045C3C; Thu,  5 Jul 2007 18:21:57 +0200 (CEST)
Date: Thu, 5 Jul 2007 18:21:57 +0200
From: Damien Wyart <damien.wyart@free.fr>
To: zsh-workers@sunsite.dk
Subject: Errors with ssh and rsync completion in zsh-beta (Debian unstable)
Message-ID: <20070705162157.GA3988@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.16 (2007-06-11)

Hello,

Playing a bit with completion, I came into the following problem. Having 
this kind of settings in .zshrc (simplified to get a minimal example) :

,----
| my_accounts=(
|     dw@myhost.dnsalias.net
|     root@10.4.8.3
| )
| 
| hosts=(
|     myhost.dnsalias.net
|     10.4.8.3
| )
| 
| users=(
|     dw
|     dwyart
|     root
| )
| 
| zstyle ':completion:*' hosts $hosts
| zstyle ':completion:*' users $users
| zstyle ':completion:*:my-accounts' users-hosts $my_accounts
`----

I get error messages when completing in ssh or rsync commands :

,----
| dwyart@dalpdw2:~$ ssh dw
| _combination:86: bad floating point constant
| _combination:86: bad math expression: operator expected at `root'
| dwyart@dalpdw2:~$ ssh dw@b
| _combination:76: bad math expression: operator expected at `root'
| _combination:86: bad floating point constant
| dwyart@dalpdw2:~$ rsync -av dw@b
| _combination:76: bad math expression: operator expected at `root'
`----


This behaviour is only present in zsh-beta from Debian unstable (version
4.3.4-dev-0+20070701-1), *not* in zsh (version 4.3.4-10, same distro).


Thanks in advance for hints/comments. Please keep me on Cc as I am not
on the list.


Best,

-- 
Damien Wyart


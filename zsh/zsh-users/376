From zsh-workers-request@euclid.skiles.gatech.edu  Tue Aug 27 04:24:37 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by coral.primenet.com.au (8.7.5/8.7.3) with ESMTP id EAA11102 for <mason@primenet.com.au>; Tue, 27 Aug 1996 04:24:35 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id OAA03407; Mon, 26 Aug 1996 14:24:25 -0400 (EDT)
Resent-Date: Mon, 26 Aug 1996 14:18:42 -0400 (EDT)
Date: Mon, 26 Aug 1996 11:15:58 -0700
Message-Id: <199608261815.LAA03269@kontiki.Eng.Sun.COM>
From: John S Cooper <jsc@Eng.Sun.COM>
To: zsh-users@math.gatech.edu
CC: John.Cooper@Eng.Sun.COM
Subject: popd is blocked on non-existent directory
X-Attribution: JSC
X-Mailer: VM 5.96 (beta) under 19.14 XEmacs Lucid
Mime-Version: 1.0 (generated by tm-edit 7.79)
Content-Type: text/plain; charset=US-ASCII
Resent-Message-ID: <"rMWMj2.0.gp.2gU8o"@euclid>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/376
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu


Under zsh 3.0.0, if a directory in the directory stack is removed, popd
seems to get "blocked" - in 2.5, it used to just remove the non-existent
directory from the stack.  Here's what happens:

1175 kontiki%> dirs -v                                                  ~/elisp
0       ~/elisp
1       ~/elisp/foo
2       ~/elisp/foo/tm
3       ~Sputnik/sdtmail
1176 kontiki%>                                                          ~/elisp
1176 kontiki%> popd                                                     ~/elisp
popd: no such file or directory: /space/jsc/elisp/foo
1177 kontiki%> dirs -v                                                  ~/elisp
0       ~/elisp
1       ~/elisp/foo
2       ~/elisp/foo/tm
3       ~Sputnik/sdtmail
1178 kontiki%>                                                          ~/elisp


I'm now unable to pop the stack back past the non-existent "~/elisp/foo"
directory.  I know I can `cd -3' but it would be nice to have the
non-existent stuff cleaned out of the stack.

Is there a way to get the old behavior, i.e. have any non-existent
directories removed from the stack?

Thanks,

    --- John.


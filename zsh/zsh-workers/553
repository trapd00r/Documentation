From zsh-workers-request@math.gatech.edu  Wed Nov  8 07:22:04 1995
Received: from math.gatech.edu (euclid.skiles.gatech.edu [130.207.146.50]) by werple.net.au (8.7/8.7.1) with SMTP id HAA20210 for <mason@werple.mira.net.au>; Wed, 8 Nov 1995 07:21:58 +1100 (EST)
Received: by math.gatech.edu (5.x/SMI-SVR4)
	id AA13618; Tue, 7 Nov 1995 15:04:04 -0500
Resent-Date: Tue, 07 Nov 1995 15:01:02 -0500
Old-Return-Path: <coleman@math.gatech.edu>
Message-Id: <199511072001.PAA08783@redwood.skiles.gatech.edu>
X-Mailer: exmh version 1.6.4 10/10/95
To: zsh-workers@math.gatech.edu
Subject: Re: bug in zsh 2.6 beta 11 
In-Reply-To: Your message of "Tue, 07 Nov 1995 16:42:13 +0100."
             <9511071542.AA01774@sgi.ifh.de> 
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Tue, 07 Nov 1995 15:01:02 -0500
From: Richard Coleman <coleman@math.gatech.edu>
Resent-Message-Id: <"1hprW1.0.iK3.pkxdm"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/553
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

> O.K., I can now confirm this... it's a classic exit-instead-of-_exit
> bug AGAIN --- I fixed this just a couple of months ago and the _exit I
> put into execcmd() has mysteriously vanished from the face of the
> earth.  (I'm pretty sure it was the same bug, apologies if it was
> something slightly different which became redundant.)  The subshell
> forked to do the `fix ...` was calling exit(), which messed up the
> files for the parent shell.  (This is going to cause apparently random
> inexplicable bugs on all sorts of SYSV-like machines until it's
> re-fixed.)

Well, the disappearance isn't mysterous.  I removed it when I changed
execcmd() to use the CFLAG_FAKE_EXEC flag.  That's why I was making
test releases so we could catch these types of bugs before the release.
But it appears no one tried it out.

Anyway, I'll probably make a beta11a in the next couple of days to
correct some of these problems.

rc


From zsh-workers-return-10621-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Apr 10 09:28:03 2000
Return-Path: <zsh-workers-return-10621-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1044 invoked from network); 10 Apr 2000 09:27:58 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 10 Apr 2000 09:27:58 -0000
Received: (qmail 20505 invoked by alias); 10 Apr 2000 09:27:44 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10621
Received: (qmail 20478 invoked from network); 10 Apr 2000 09:27:40 -0000
Date: Mon, 10 Apr 2000 11:27:34 +0200 (MET DST)
Message-Id: <200004100927.LAA00378@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Tanaka Akira's message of 09 Apr 2000 23:25:46 +0900
Subject: Re: BUG: 0 <= wb <= cs <= we is not true!


Tanaka Akira wrote:

> I found that <TAB> on ; may tickle a bug.
> 
> Z(5):akr@serein% zsh -f
> serein% bindkey -e; autoload -U compinit; compinit -D
> serein% echo ;:<C-b><C-b><TAB>
> 
> prints
> 
> BUG: 0 <= wb <= cs <= we is not true!

Hm, addx() didn't insert the x in this case.

Bye
 Sven

Index: Src/Zle/zle_tricky.c
===================================================================
RCS file: /cvsroot/zsh/zsh/Src/Zle/zle_tricky.c,v
retrieving revision 1.2
diff -u -r1.2 zle_tricky.c
--- Src/Zle/zle_tricky.c	2000/04/10 08:06:39	1.2
+++ Src/Zle/zle_tricky.c	2000/04/10 09:26:58
@@ -790,7 +790,8 @@
 
     if (!line[cs] || line[cs] == '\n' ||
 	(iblank(line[cs]) && (!cs || line[cs-1] != '\\')) ||
-	line[cs] == ')' || line[cs] == '`' ||
+	line[cs] == ')' || line[cs] == '`' || line[cs] == '}' ||
+	line[cs] == ';' || line[cs] == '|' || line[cs] == '&' ||
 	(instring && (line[cs] == '"' || line[cs] == '\'')) ||
 	(addspace = (comppref && !iblank(line[cs])))) {
 	*ptmp = (char *)line;

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


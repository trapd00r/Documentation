<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>libkmod-module</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.77.1">
<link rel="home" href="index.html" title="libkmod Reference Manual">
<link rel="up" href="ch01.html" title="libkmod">
<link rel="prev" href="libkmod-libkmod-config.html" title="libkmod-config">
<link rel="next" href="libkmod-libkmod-loaded.html" title="libkmod-loaded">
<meta name="generator" content="GTK-Doc V1.18 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="libkmod-libkmod-config.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch01.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">libkmod Reference Manual</th>
<td><a accesskey="n" href="libkmod-libkmod-loaded.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#libkmod-libkmod-module.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#libkmod-libkmod-module.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry">
<a name="libkmod-libkmod-module"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="libkmod-libkmod-module.top_of_page"></a>libkmod-module</span></h2>
<p>libkmod-module — operate on kernel modules</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="libkmod-libkmod-module.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">struct              <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module">kmod_module</a>;
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-new-from-lookup" title="kmod_module_new_from_lookup ()">kmod_module_new_from_lookup</a>         (<em class="parameter"><code><span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *given_alias</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-new-from-name" title="kmod_module_new_from_name ()">kmod_module_new_from_name</a>           (<em class="parameter"><code><span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *name</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_module</span> **mod</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-new-from-path" title="kmod_module_new_from_path ()">kmod_module_new_from_path</a>           (<em class="parameter"><code><span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *path</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_module</span> **mod</code></em>);
struct <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module"><span class="returnvalue">kmod_module</span></a> * <a class="link" href="libkmod-libkmod-module.html#kmod-module-ref" title="kmod_module_ref ()">kmod_module_ref</a>                    (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>);
struct <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module"><span class="returnvalue">kmod_module</span></a> * <a class="link" href="libkmod-libkmod-module.html#kmod-module-unref" title="kmod_module_unref ()">kmod_module_unref</a>                  (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-unref-list" title="kmod_module_unref_list ()">kmod_module_unref_list</a>              (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-insert-module" title="kmod_module_insert_module ()">kmod_module_insert_module</a>           (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code>unsigned <span class="type">int</span> flags</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *options</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-probe-insert-module" title="kmod_module_probe_insert_module ()">kmod_module_probe_insert_module</a>     (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code>unsigned <span class="type">int</span> flags</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *extra_options</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> (*run_install) (struct kmod_module *m, const char *cmdline, void *data)</code></em>,
                                                         <em class="parameter"><code>const <span class="type">void</span> *data</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> (*print_action) (struct kmod_module *m, bool install, const char *options)</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-remove-module" title="kmod_module_remove_module ()">kmod_module_remove_module</a>           (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code>unsigned <span class="type">int</span> flags</code></em>);
struct <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module"><span class="returnvalue">kmod_module</span></a> * <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-module" title="kmod_module_get_module ()">kmod_module_get_module</a>             (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
struct <a class="link" href="libkmod-libkmod-list.html#kmod-list" title="struct kmod_list"><span class="returnvalue">kmod_list</span></a> *  <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-dependencies" title="kmod_module_get_dependencies ()">kmod_module_get_dependencies</a>        (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-softdeps" title="kmod_module_get_softdeps ()">kmod_module_get_softdeps</a>            (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **pre</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **post</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-apply-filter" title="kmod_module_apply_filter ()">kmod_module_apply_filter</a>            (<em class="parameter"><code>const <span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code><span class="type">enum kmod_filter</span> filter_type</code></em>,
                                                         <em class="parameter"><code>const <span class="type">struct kmod_list</span> *input</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **output</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-filtered-blacklist" title="kmod_module_get_filtered_blacklist ()">kmod_module_get_filtered_blacklist</a>  (<em class="parameter"><code>const <span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">struct kmod_list</span> *input</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **output</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-install-commands" title="kmod_module_get_install_commands ()">kmod_module_get_install_commands</a>    (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-remove-commands" title="kmod_module_get_remove_commands ()">kmod_module_get_remove_commands</a>     (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-name" title="kmod_module_get_name ()">kmod_module_get_name</a>                (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-options" title="kmod_module_get_options ()">kmod_module_get_options</a>             (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-path" title="kmod_module_get_path ()">kmod_module_get_path</a>                (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-dependency-symbols" title="kmod_module_get_dependency_symbols ()">kmod_module_get_dependency_symbols</a>  (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbol-get-bind" title="kmod_module_dependency_symbol_get_bind ()">kmod_module_dependency_symbol_get_bind</a>
                                                        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
<span class="returnvalue">uint64_t</span>            <a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbol-get-crc" title="kmod_module_dependency_symbol_get_crc ()">kmod_module_dependency_symbol_get_crc</a>
                                                        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbol-get-symbol" title="kmod_module_dependency_symbol_get_symbol ()">kmod_module_dependency_symbol_get_symbol</a>
                                                        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbols-free-list" title="kmod_module_dependency_symbols_free_list ()">kmod_module_dependency_symbols_free_list</a>
                                                        (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);
struct <a class="link" href="libkmod-libkmod-list.html#kmod-list" title="struct kmod_list"><span class="returnvalue">kmod_list</span></a> *  <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-sections" title="kmod_module_get_sections ()">kmod_module_get_sections</a>            (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libkmod-libkmod-module.html#kmod-module-section-free-list" title="kmod_module_section_free_list ()">kmod_module_section_free_list</a>       (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);
unsigned <span class="returnvalue">long</span>       <a class="link" href="libkmod-libkmod-module.html#kmod-module-section-get-address" title="kmod_module_section_get_address ()">kmod_module_section_get_address</a>     (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-section-get-name" title="kmod_module_section_get_name ()">kmod_module_section_get_name</a>        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-symbols" title="kmod_module_get_symbols ()">kmod_module_get_symbols</a>             (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);
<span class="returnvalue">uint64_t</span>            <a class="link" href="libkmod-libkmod-module.html#kmod-module-symbol-get-crc" title="kmod_module_symbol_get_crc ()">kmod_module_symbol_get_crc</a>          (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-symbol-get-symbol" title="kmod_module_symbol_get_symbol ()">kmod_module_symbol_get_symbol</a>       (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libkmod-libkmod-module.html#kmod-module-symbols-free-list" title="kmod_module_symbols_free_list ()">kmod_module_symbols_free_list</a>       (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-versions" title="kmod_module_get_versions ()">kmod_module_get_versions</a>            (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);
<span class="returnvalue">uint64_t</span>            <a class="link" href="libkmod-libkmod-module.html#kmod-module-version-get-crc" title="kmod_module_version_get_crc ()">kmod_module_version_get_crc</a>         (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-version-get-symbol" title="kmod_module_version_get_symbol ()">kmod_module_version_get_symbol</a>      (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libkmod-libkmod-module.html#kmod-module-versions-free-list" title="kmod_module_versions_free_list ()">kmod_module_versions_free_list</a>      (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="libkmod-libkmod-module.html#kmod-module-get-info" title="kmod_module_get_info ()">kmod_module_get_info</a>                (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="libkmod-libkmod-module.html#kmod-module-info-free-list" title="kmod_module_info_free_list ()">kmod_module_info_free_list</a>          (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-info-get-key" title="kmod_module_info_get_key ()">kmod_module_info_get_key</a>            (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
const <span class="returnvalue">char</span> *        <a class="link" href="libkmod-libkmod-module.html#kmod-module-info-get-value" title="kmod_module_info_get_value ()">kmod_module_info_get_value</a>          (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="libkmod-libkmod-module.description"></a><h2>Description</h2>
</div>
<div class="refsect1">
<a name="libkmod-libkmod-module.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="kmod-module"></a><h3>struct kmod_module</h3>
<pre class="programlisting">struct kmod_module;</pre>
<p>
Opaque object representing a module.
</p>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-new-from-lookup"></a><h3>kmod_module_new_from_lookup ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_new_from_lookup         (<em class="parameter"><code><span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *given_alias</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);</pre>
<p>
Create a new list of kmod modules using an alias or module name and lookup
libkmod's configuration files and indexes in order to find the module.
Once it's found in one of the places, it stops searching and create the
list of modules that is saved in <em class="parameter"><code>list</code></em>.
</p>
<p>
The search order is: 1. aliases in configuration file; 2. module names in
modules.dep index; 3. symbol aliases in modules.symbols index; 4. aliases
in modules.alias index.
</p>
<p>
The initial refcount is 1, and needs to be decremented to release the
resources of the kmod_module. The returned <em class="parameter"><code>list</code></em> must be released by
calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-unref-list" title="kmod_module_unref_list ()"><code class="function">kmod_module_unref_list()</code></a>. Since libkmod keeps track of all
kmod_modules created, they are all released upon <em class="parameter"><code>ctx</code></em> destruction too. Do
not unref <em class="parameter"><code>ctx</code></em> before all the desired operations with the returned list are
completed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>ctx</code></em> :</span></p></td>
<td>kmod library context</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>given_alias</code></em> :</span></p></td>
<td>alias to look for</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>an empty list where to save the list of modules matching
<em class="parameter"><code>given_alias</code></em>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise. It fails if any of the lookup
methods failed, which is basically due to memory allocation fail. If module
is not found, it still returns 0, but <em class="parameter"><code>list</code></em> is an empty list.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-new-from-name"></a><h3>kmod_module_new_from_name ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_new_from_name           (<em class="parameter"><code><span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *name</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_module</span> **mod</code></em>);</pre>
<p>
Create a new struct kmod_module using the module name. <em class="parameter"><code>name</code></em> can not be an
alias, file name or anything else; it must be a module name. There's no
check if the module exists in the system.
</p>
<p>
This function is also used internally by many others that return a new
struct kmod_module or a new list of modules.
</p>
<p>
The initial refcount is 1, and needs to be decremented to release the
resources of the kmod_module. Since libkmod keeps track of all
kmod_modules created, they are all released upon <em class="parameter"><code>ctx</code></em> destruction too. Do
not unref <em class="parameter"><code>ctx</code></em> before all the desired operations with the returned
kmod_module are done.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>ctx</code></em> :</span></p></td>
<td>kmod library context</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>name</code></em> :</span></p></td>
<td>name of the module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>where to save the created struct kmod_module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise. It fails if name is not a valid
module name or if memory allocation failed.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-new-from-path"></a><h3>kmod_module_new_from_path ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_new_from_path           (<em class="parameter"><code><span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *path</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_module</span> **mod</code></em>);</pre>
<p>
Create a new struct kmod_module using the module path. <em class="parameter"><code>path</code></em> must be an
existent file with in the filesystem and must be accessible to libkmod.
</p>
<p>
The initial refcount is 1, and needs to be decremented to release the
resources of the kmod_module. Since libkmod keeps track of all
kmod_modules created, they are all released upon <em class="parameter"><code>ctx</code></em> destruction too. Do
not unref <em class="parameter"><code>ctx</code></em> before all the desired operations with the returned
kmod_module are done.
</p>
<p>
If <em class="parameter"><code>path</code></em> is relative, it's treated as relative to the current working
directory. Otherwise, give an absolute path.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>ctx</code></em> :</span></p></td>
<td>kmod library context</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>path</code></em> :</span></p></td>
<td>path where to find the given module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>where to save the created struct kmod_module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise. It fails if file does not exist, if
it's not a valid file for a kmod_module or if memory allocation failed.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-ref"></a><h3>kmod_module_ref ()</h3>
<pre class="programlisting">struct <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module"><span class="returnvalue">kmod_module</span></a> * kmod_module_ref                    (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Take a reference of the kmod module, incrementing its refcount.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the passed <em class="parameter"><code>module</code></em> with its refcount incremented.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-unref"></a><h3>kmod_module_unref ()</h3>
<pre class="programlisting">struct <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module"><span class="returnvalue">kmod_module</span></a> * kmod_module_unref                  (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Drop a reference of the kmod module. If the refcount reaches zero, its
resources are released.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>NULL if <em class="parameter"><code>mod</code></em> is NULL or if the module was released. Otherwise it
returns the passed <em class="parameter"><code>mod</code></em> with its refcount decremented.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-unref-list"></a><h3>kmod_module_unref_list ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_unref_list              (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);</pre>
<p>
Drop a reference of each kmod module in <em class="parameter"><code>list</code></em> and releases the resources
taken by the list itself.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>list of kmod modules</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>NULL if <em class="parameter"><code>mod</code></em> is NULL or if the module was released. Otherwise it
returns the passed <em class="parameter"><code>mod</code></em> with its refcount decremented.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-insert-module"></a><h3>kmod_module_insert_module ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_insert_module           (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code>unsigned <span class="type">int</span> flags</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *options</code></em>);</pre>
<p>
Insert a module in Linux kernel. It opens the file pointed by <em class="parameter"><code>mod</code></em>,
mmap'ing it and passing to kernel.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>flags</code></em> :</span></p></td>
<td>flags are not passed to Linux Kernel, but instead they dictate the
behavior of this function.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>options</code></em> :</span></p></td>
<td>module's options to pass to Linux Kernel.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 on failure. If module is already loaded it
returns -EEXIST.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-probe-insert-module"></a><h3>kmod_module_probe_insert_module ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_probe_insert_module     (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code>unsigned <span class="type">int</span> flags</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *extra_options</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> (*run_install) (struct kmod_module *m, const char *cmdline, void *data)</code></em>,
                                                         <em class="parameter"><code>const <span class="type">void</span> *data</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> (*print_action) (struct kmod_module *m, bool install, const char *options)</code></em>);</pre>
<p>
Insert a module in Linux kernel resolving dependencies, soft dependencies,
install commands and applying blacklist.
</p>
<p>
If <em class="parameter"><code>run_install</code></em> is NULL, this function will fork and exec by calling
system(3). Don't pass a NULL argument in <em class="parameter"><code>run_install</code></em> if your binary is
setuid/setgid (see warning in system(3)). If you need control over the
execution of an install command, give a callback function instead.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>flags</code></em> :</span></p></td>
<td>flags are not passed to Linux Kernel, but instead they dictate the
behavior of this function.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>extra_options</code></em> :</span></p></td>
<td>module's options to pass to Linux Kernel. It applies only
to <em class="parameter"><code>mod</code></em>, not to its dependencies.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>run_install</code></em> :</span></p></td>
<td>function to run when <em class="parameter"><code>mod</code></em> is backed by an install command.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em> :</span></p></td>
<td>data to give back to <em class="parameter"><code>run_install</code></em> callback</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>print_action</code></em> :</span></p></td>
<td>function to call with the action being taken (install or
insmod). It's useful for tools like modprobe when running with verbose
output or in dry-run mode.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success, &gt; 0 if stopped by a reason given in <em class="parameter"><code>flags</code></em> or &lt; 0 on
failure.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-remove-module"></a><h3>kmod_module_remove_module ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_remove_module           (<em class="parameter"><code><span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code>unsigned <span class="type">int</span> flags</code></em>);</pre>
<p>
Remove a module from Linux kernel.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>flags</code></em> :</span></p></td>
<td>flags to pass to Linux kernel when removing the module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 on failure.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-module"></a><h3>kmod_module_get_module ()</h3>
<pre class="programlisting">struct <a class="link" href="libkmod-libkmod-module.html#kmod-module" title="struct kmod_module"><span class="returnvalue">kmod_module</span></a> * kmod_module_get_module             (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the kmod module of this <em class="parameter"><code>entry</code></em> in the list, increasing its refcount.
After it's used, unref it. Since the refcount is incremented upon return,
you still have to call <a class="link" href="libkmod-libkmod-module.html#kmod-module-unref-list" title="kmod_module_unref_list ()"><code class="function">kmod_module_unref_list()</code></a> to release the list of kmod
modules.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>an entry in a list of kmod modules.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>NULL on failure or the kmod_module contained in this list entry
with its refcount incremented.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-dependencies"></a><h3>kmod_module_get_dependencies ()</h3>
<pre class="programlisting">struct <a class="link" href="libkmod-libkmod-list.html#kmod-list" title="struct kmod_list"><span class="returnvalue">kmod_list</span></a> *  kmod_module_get_dependencies        (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Search the modules.dep index to find the dependencies of the given <em class="parameter"><code>mod</code></em>.
The result is cached in <em class="parameter"><code>mod</code></em>, so subsequent calls to this function will
return the already searched list of modules.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>NULL on failure or if there are any dependencies. Otherwise it
returns a list of kmod modules that can be released by calling
<a class="link" href="libkmod-libkmod-module.html#kmod-module-unref-list" title="kmod_module_unref_list ()"><code class="function">kmod_module_unref_list()</code></a>.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-softdeps"></a><h3>kmod_module_get_softdeps ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_get_softdeps            (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **pre</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **post</code></em>);</pre>
<p>
Get soft dependencies for this kmod module. Soft dependencies come
from configuration file and are not cached in <em class="parameter"><code>mod</code></em> because it may include
dependency cycles that would make we leak kmod_module. Any call
to this function will search for this module in configuration, allocate a
list and return the result.
</p>
<p>
Both <em class="parameter"><code>pre</code></em> and <em class="parameter"><code>post</code></em> are newly created list of kmod_module and
should be unreferenced with <a class="link" href="libkmod-libkmod-module.html#kmod-module-unref-list" title="kmod_module_unref_list ()"><code class="function">kmod_module_unref_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pre</code></em> :</span></p></td>
<td>where to save the list of preceding soft dependencies.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>post</code></em> :</span></p></td>
<td>where to save the list of post soft dependencies.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-apply-filter"></a><h3>kmod_module_apply_filter ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_apply_filter            (<em class="parameter"><code>const <span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code><span class="type">enum kmod_filter</span> filter_type</code></em>,
                                                         <em class="parameter"><code>const <span class="type">struct kmod_list</span> *input</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **output</code></em>);</pre>
<p>
Given a list <em class="parameter"><code>input</code></em>, this function filter it out by the filter mask
and save it in <em class="parameter"><code>output</code></em>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>ctx</code></em> :</span></p></td>
<td>kmod library context</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>filter_type</code></em> :</span></p></td>
<td>bitmask to filter modules on</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>input</code></em> :</span></p></td>
<td>list of kmod_module to be filtered</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>output</code></em> :</span></p></td>
<td>where to save the new list</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise. <em class="parameter"><code>output</code></em> is saved with the updated
list.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-filtered-blacklist"></a><h3>kmod_module_get_filtered_blacklist ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_get_filtered_blacklist  (<em class="parameter"><code>const <span class="type">struct kmod_ctx</span> *ctx</code></em>,
                                                         <em class="parameter"><code>const <span class="type">struct kmod_list</span> *input</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **output</code></em>);</pre>
<p>
This function should not be used. Use kmod_module_apply_filter instead.
</p>
<p>
Given a list <em class="parameter"><code>input</code></em>, this function filter it out with config's blacklist
and save it in <em class="parameter"><code>output</code></em>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>ctx</code></em> :</span></p></td>
<td>kmod library context</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>input</code></em> :</span></p></td>
<td>list of kmod_module to be filtered with blacklist</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>output</code></em> :</span></p></td>
<td>where to save the new list</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise. <em class="parameter"><code>output</code></em> is saved with the updated
list.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-install-commands"></a><h3>kmod_module_get_install_commands ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_get_install_commands    (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Get install commands for this kmod module. Install commands come from the
configuration file and are cached in <em class="parameter"><code>mod</code></em>. The first call to this function
will search for this module in configuration and subsequent calls return
the cached string. The install commands are returned as they were in the
configuration, concatenated by ';'. No other processing is made in this
string.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a string with all install commands separated by semicolons. This
string is owned by <em class="parameter"><code>mod</code></em>, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-remove-commands"></a><h3>kmod_module_get_remove_commands ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_get_remove_commands     (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Get remove commands for this kmod module. Remove commands come from the
configuration file and are cached in <em class="parameter"><code>mod</code></em>. The first call to this function
will search for this module in configuration and subsequent calls return
the cached string. The remove commands are returned as they were in the
configuration, concatenated by ';'. No other processing is made in this
string.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a string with all remove commands separated by semicolons. This
string is owned by <em class="parameter"><code>mod</code></em>, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-name"></a><h3>kmod_module_get_name ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_get_name                (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Get the name of this kmod module. Name is always available, independently
if it was created by <a class="link" href="libkmod-libkmod-module.html#kmod-module-new-from-name" title="kmod_module_new_from_name ()"><code class="function">kmod_module_new_from_name()</code></a> or another function and
it's always normalized (dashes are replaced with underscores).
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the name of this kmod module.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-options"></a><h3>kmod_module_get_options ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_get_options             (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Get options of this kmod module. Options come from the configuration file
and are cached in <em class="parameter"><code>mod</code></em>. The first call to this function will search for
this module in configuration and subsequent calls return the cached string.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a string with all the options separated by spaces. This string is
owned by <em class="parameter"><code>mod</code></em>, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-path"></a><h3>kmod_module_get_path ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_get_path                (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Get the path of this kmod module. If this kmod module was not created by
path, it can search the modules.dep index in order to find out the module
under context's dirname.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the path of this kmod module or NULL if such information is not
available.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-dependency-symbols"></a><h3>kmod_module_get_dependency_symbols ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_get_dependency_symbols  (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);</pre>
<p>
Get a list of entries in ELF section ".symtab" or "__ksymtab_strings".
</p>
<p>
After use, free the <em class="parameter"><code>list</code></em> by calling
<a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbols-free-list" title="kmod_module_dependency_symbols_free_list ()"><code class="function">kmod_module_dependency_symbols_free_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>where to return list of module dependency_symbols. Use
<a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbol-get-symbol" title="kmod_module_dependency_symbol_get_symbol ()"><code class="function">kmod_module_dependency_symbol_get_symbol()</code></a> and
<a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbol-get-crc" title="kmod_module_dependency_symbol_get_crc ()"><code class="function">kmod_module_dependency_symbol_get_crc()</code></a>. Release this list with
<a class="link" href="libkmod-libkmod-module.html#kmod-module-dependency-symbols-free-list" title="kmod_module_dependency_symbols_free_list ()"><code class="function">kmod_module_dependency_symbols_free_list()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-dependency-symbol-get-bind"></a><h3>kmod_module_dependency_symbol_get_bind ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_dependency_symbol_get_bind
                                                        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the bind type of a kmod module dependency_symbol.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module dependency_symbol</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the bind of this kmod module dependency_symbol on success
or &lt; 0 on failure.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-dependency-symbol-get-crc"></a><h3>kmod_module_dependency_symbol_get_crc ()</h3>
<pre class="programlisting"><span class="returnvalue">uint64_t</span>            kmod_module_dependency_symbol_get_crc
                                                        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the crc of a kmod module dependency_symbol.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module dependency_symbol</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the crc of this kmod module dependency_symbol on success or NULL on
failure. The string is owned by the dependency_symbol, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-dependency-symbol-get-symbol"></a><h3>kmod_module_dependency_symbol_get_symbol ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_dependency_symbol_get_symbol
                                                        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the dependency symbol of a kmod module
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module dependency_symbols</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the symbol of this kmod module dependency_symbols on success or NULL
on failure. The string is owned by the dependency_symbols, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-dependency-symbols-free-list"></a><h3>kmod_module_dependency_symbols_free_list ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                kmod_module_dependency_symbols_free_list
                                                        (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);</pre>
<p>
Release the resources taken by <em class="parameter"><code>list</code></em>
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>kmod module dependency_symbols list</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-sections"></a><h3>kmod_module_get_sections ()</h3>
<pre class="programlisting">struct <a class="link" href="libkmod-libkmod-list.html#kmod-list" title="struct kmod_list"><span class="returnvalue">kmod_list</span></a> *  kmod_module_get_sections            (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>);</pre>
<p>
Get a list of kmod sections of this <em class="parameter"><code>mod</code></em>, as returned by Linux Kernel. The
structure contained in this list is internal to libkmod and their fields
can be obtained by calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-section-get-name" title="kmod_module_section_get_name ()"><code class="function">kmod_module_section_get_name()</code></a> and
<a class="link" href="libkmod-libkmod-module.html#kmod-module-section-get-address" title="kmod_module_section_get_address ()"><code class="function">kmod_module_section_get_address()</code></a>.
</p>
<p>
After use, free the <em class="parameter"><code>list</code></em> by calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-section-free-list" title="kmod_module_section_free_list ()"><code class="function">kmod_module_section_free_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>a new list of kmod module sections on success or NULL on failure.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-section-free-list"></a><h3>kmod_module_section_free_list ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                kmod_module_section_free_list       (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);</pre>
<p>
Release the resources taken by <em class="parameter"><code>list</code></em>
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>kmod module section list</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-section-get-address"></a><h3>kmod_module_section_get_address ()</h3>
<pre class="programlisting">unsigned <span class="returnvalue">long</span>       kmod_module_section_get_address     (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the address of a kmod module section.
</p>
<p>
After use, free the <em class="parameter"><code>list</code></em> by calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-section-free-list" title="kmod_module_section_free_list ()"><code class="function">kmod_module_section_free_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module section</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the address of this kmod module section on success or ULONG_MAX
on failure.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-section-get-name"></a><h3>kmod_module_section_get_name ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_section_get_name        (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-symbols"></a><h3>kmod_module_get_symbols ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_get_symbols             (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);</pre>
<p>
Get a list of entries in ELF section ".symtab" or "__ksymtab_strings".
</p>
<p>
After use, free the <em class="parameter"><code>list</code></em> by calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-symbols-free-list" title="kmod_module_symbols_free_list ()"><code class="function">kmod_module_symbols_free_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>where to return list of module symbols. Use
<a class="link" href="libkmod-libkmod-module.html#kmod-module-symbol-get-symbol" title="kmod_module_symbol_get_symbol ()"><code class="function">kmod_module_symbol_get_symbol()</code></a> and
<a class="link" href="libkmod-libkmod-module.html#kmod-module-symbol-get-crc" title="kmod_module_symbol_get_crc ()"><code class="function">kmod_module_symbol_get_crc()</code></a>. Release this list with
<a class="link" href="libkmod-libkmod-module.html#kmod-module-symbols-free-list" title="kmod_module_symbols_free_list ()"><code class="function">kmod_module_symbols_free_list()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-symbol-get-crc"></a><h3>kmod_module_symbol_get_crc ()</h3>
<pre class="programlisting"><span class="returnvalue">uint64_t</span>            kmod_module_symbol_get_crc          (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the crc of a kmod module symbol.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module symbol</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the crc of this kmod module symbol on success or NULL on
failure. The string is owned by the symbol, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-symbol-get-symbol"></a><h3>kmod_module_symbol_get_symbol ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_symbol_get_symbol       (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the symbol of a kmod module symbols.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module symbols</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the symbol of this kmod module symbols on success or NULL
on failure. The string is owned by the symbols, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-symbols-free-list"></a><h3>kmod_module_symbols_free_list ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                kmod_module_symbols_free_list       (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);</pre>
<p>
Release the resources taken by <em class="parameter"><code>list</code></em>
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>kmod module symbols list</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-versions"></a><h3>kmod_module_get_versions ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_get_versions            (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);</pre>
<p>
Get a list of entries in ELF section "__versions".
</p>
<p>
After use, free the <em class="parameter"><code>list</code></em> by calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-versions-free-list" title="kmod_module_versions_free_list ()"><code class="function">kmod_module_versions_free_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>where to return list of module versions. Use
<a class="link" href="libkmod-libkmod-module.html#kmod-module-version-get-symbol" title="kmod_module_version_get_symbol ()"><code class="function">kmod_module_version_get_symbol()</code></a> and
<a class="link" href="libkmod-libkmod-module.html#kmod-module-version-get-crc" title="kmod_module_version_get_crc ()"><code class="function">kmod_module_version_get_crc()</code></a>. Release this list with
<a class="link" href="libkmod-libkmod-module.html#kmod-module-versions-free-list" title="kmod_module_versions_free_list ()"><code class="function">kmod_module_versions_free_list()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-version-get-crc"></a><h3>kmod_module_version_get_crc ()</h3>
<pre class="programlisting"><span class="returnvalue">uint64_t</span>            kmod_module_version_get_crc         (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the crc of a kmod module version.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module version</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the crc of this kmod module version on success or NULL on
failure. The string is owned by the version, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-version-get-symbol"></a><h3>kmod_module_version_get_symbol ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_version_get_symbol      (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-versions-free-list"></a><h3>kmod_module_versions_free_list ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                kmod_module_versions_free_list      (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);</pre>
<p>
Release the resources taken by <em class="parameter"><code>list</code></em>
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>kmod module versions list</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-get-info"></a><h3>kmod_module_get_info ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 kmod_module_get_info                (<em class="parameter"><code>const <span class="type">struct kmod_module</span> *mod</code></em>,
                                                         <em class="parameter"><code><span class="type">struct kmod_list</span> **list</code></em>);</pre>
<p>
Get a list of entries in ELF section ".modinfo", these contain
alias, license, depends, vermagic and other keys with respective
values.
</p>
<p>
After use, free the <em class="parameter"><code>list</code></em> by calling <a class="link" href="libkmod-libkmod-module.html#kmod-module-info-free-list" title="kmod_module_info_free_list ()"><code class="function">kmod_module_info_free_list()</code></a>.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>mod</code></em> :</span></p></td>
<td>kmod module</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>where to return list of module information. Use
<a class="link" href="libkmod-libkmod-module.html#kmod-module-info-get-key" title="kmod_module_info_get_key ()"><code class="function">kmod_module_info_get_key()</code></a> and
<a class="link" href="libkmod-libkmod-module.html#kmod-module-info-get-value" title="kmod_module_info_get_value ()"><code class="function">kmod_module_info_get_value()</code></a>. Release this list with
<a class="link" href="libkmod-libkmod-module.html#kmod-module-info-free-list" title="kmod_module_info_free_list ()"><code class="function">kmod_module_info_free_list()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>0 on success or &lt; 0 otherwise.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-info-free-list"></a><h3>kmod_module_info_free_list ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                kmod_module_info_free_list          (<em class="parameter"><code><span class="type">struct kmod_list</span> *list</code></em>);</pre>
<p>
Release the resources taken by <em class="parameter"><code>list</code></em>
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody><tr>
<td><p><span class="term"><em class="parameter"><code>list</code></em> :</span></p></td>
<td>kmod module info list</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-info-get-key"></a><h3>kmod_module_info_get_key ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_info_get_key            (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the key of a kmod module info.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module info</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the key of this kmod module info on success or NULL on
failure. The string is owned by the info, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="kmod-module-info-get-value"></a><h3>kmod_module_info_get_value ()</h3>
<pre class="programlisting">const <span class="returnvalue">char</span> *        kmod_module_info_get_value          (<em class="parameter"><code>const <span class="type">struct kmod_list</span> *entry</code></em>);</pre>
<p>
Get the value of a kmod module info.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>entry</code></em> :</span></p></td>
<td>a list entry representing a kmod module info</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the value of this kmod module info on success or NULL on
failure. The string is owned by the info, do not free it.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.18</div>
</body>
</html>
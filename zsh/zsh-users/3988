From zsh-users-return-3988-mason-zsh=primenet.com.au@sunsite.dk Tue Jul 03 00:45:25 2001
Return-Path: <zsh-users-return-3988-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 21169 invoked from network); 3 Jul 2001 00:45:16 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 3 Jul 2001 00:45:16 -0000
Received: (qmail 13998 invoked by alias); 3 Jul 2001 00:43:27 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 3988
Received: (qmail 13978 invoked from network); 3 Jul 2001 00:43:26 -0000
Sender: william@jazz.hq.newdream.net
Message-ID: <3B411596.6E68EE4B@hq.newdream.net>
Date: Mon, 02 Jul 2001 17:45:10 -0700
From: Will Yardley <william@hq.newdream.net>
X-Mailer: Mozilla 4.76 [en] (X11; U; FreeBSD 4.3-STABLE i386)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-users@sunsite.dk
Subject: weird expansion and compctl for man pages
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

two questions.

i use the following to put the current command in the titlebar:

case $TERM in
        (xterm*)
                precmd () {print -Pn "\e]2;%n@%m  %~ %l %W  %T\a"}
                preexec () {print -Pn "\e]2;%n@%m  $*  %l %W  %T\a"}
        ;;
esac

and the following to expand common hostnames and usernames for ssh:

compctl -k hosts -x 'c[-1,-l]' -k usernames -- \
        + -k usernames -S '@' -x 'n[1,@]' -k hosts -- ssh

when ssh to a particular machine was freezing today, i noticed that if i
hit tab while expanding the hostname, the resulting command which showed
up in the titlebar was:
ssh machine ssh machine ssh machine ssh machine

i realize this isn't a super big deal, but is there an easy way to get
around this?

also i tried some of the various compctl scripts for completing man
pages (including the two on the main info site) and neither seemed to
work (i used the bsd option).  i'm using zsh 4.0.1 on freebsd
4.3-stable.  does anyone have a working script on a similar system? 
basically i want to be able to type:
man
and then tab complete to various programs as long as there's a man page
for them
so man l[tab] would expand to ls, lsof etc.

w


From zsh-users-return-4283-mason-zsh=primenet.com.au@sunsite.dk Fri Sep 28 20:36:13 2001
Return-Path: <zsh-users-return-4283-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 5853 invoked from network); 28 Sep 2001 20:36:12 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Sep 2001 20:36:12 -0000
Received: (qmail 15065 invoked by alias); 28 Sep 2001 20:35:45 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 4283
Received: (qmail 15050 invoked from network); 28 Sep 2001 20:35:44 -0000
Date: Fri, 28 Sep 2001 16:35:32 -0400
From: lordzork@lordzork.com
To: zsh-users@sunsite.dk
Subject: Re: error on TTY read: no such file or directory
Message-ID: <20010928163532.C16561@hithaeglir.net>
Reply-To: lordzork@lordzork.com
Mail-Followup-To: lordzork@lordzork.com, zsh-users@sunsite.dk
References: <20010910200737.A6256@hithaeglir.net> <001f01c13abb$6997dca0$21c9ca95@mow.siemens.ru> <20010911084904.A11501@hithaeglir.net> <1010911140155.ZM24429@candle.brasslantern.com> <20010928121347.B16561@hithaeglir.net> <1010928174804.ZM18560@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1010928174804.ZM18560@candle.brasslantern.com>
Organization: lordzork industries
X-GPG-Key-ID: 1024D/EE946A6E
X-GPG-Key-Fingerprint: E27C 03D8 A1B6 F7C5 2B92  58A9 4BEA 926A EE94 6A6E
X-GPG-Public-Key: http://lordzork.com/tmk.pub.asc
X-Mailer: CHIKKEN MAIL 0.80 BETA (CHIKKEN)
X-Originating-IP: [127.0.0.1]
X-Midgets: too tall

In the gothic chambers of the underworld on Fri 28 Sep 2001 at 13:48 -0400,
Bart Schaefer muttered darkly:

> That's a really strange error.  It's coming from ZLE attempting to read
> one byte from the tty file descriptor, which should have been correctly
> opened long before that point (or else you should have seen a different
> error, earlier).
> 
> Does the same error happen if you log in as someone else and then use
> "su -" to start a root login shell?  Otherwise I'm out of ideas on how
> to tell you to debug it.
> 

the error only happens if i login from a tty. all of the following work
fine:

logging in through ssh
logging in as a different user and suing to root
changing shell to bash and then logging in and typing 'zsh -l'

one clarification: this *is* happening to every user, not just root.
it was just taking longer for the tty error to pop up with the other
users. i've noticed that this amount of time varies; sometimes it's
possible for me to type several commands before it boots me.

one other oddity is that command keys in less don't work properly. for
instance, pressing the down arrow prints '^[[B` instead of scrolling
down; pg down prints '^[[6~'. typing 'q' prints a q; a subsequent enter
will quit. it seems to me that this is somehow related to the tty read
error, since it is apparently affecting the line editor.

not to mention, i have the *exact* zsh setup on three other boxes, and
none of these problems.

for the curious, the login-trace file and related zsh configs can be
found here: http://lzi.n3.net/~zork/zle_error/

t.
 

-- 
4.0k -rw-rw-r--    1 zork     zork       17 Apr 4 17:38 .signature


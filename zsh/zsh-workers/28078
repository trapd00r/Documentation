From zsh-workers-return-28078-mason-zsh=primenet.com.au@zsh.org Thu Jul 15 13:57:45 2010
Return-Path: <zsh-workers-return-28078-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13306 invoked by alias); 15 Jul 2010 13:57:45 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28078
Received: (qmail 2894 invoked from network); 15 Jul 2010 13:57:43 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.0 required=5.0 tests=BAYES_00,DKIM_SIGNED,
	DKIM_VALID,DKIM_VALID_AU,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,
	T_TO_NO_BRKTS_FREEMAIL autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at _spf.google.com designates 209.85.212.171 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:content-type
         :date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=BNimXleUxwA81XReeI3+k+xXUGFnZqnoMp8kEXI5bew=;
        b=CjfY0aZ2h4IKM7lDoWS23SJK93c/tEI5MjTVdO221Pz73kZXYr6m+pt7CF8MPJcXky
         Nh2xgvafNjnAp/stJnKKSleIY1F8Y/GcXOxU5JT/LNsCXM9wn+4N0ry/T0KFQa1nnk9x
         ENqYrHyjvjFIFjrwnxjfVlCqrnHvlIswmPdkQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        b=hI7ZkqOlE4C/KeGs8Ye1OphbNzeOu4jHXB5Nx9PW9RbEdqu9xOcPdllXmHxxk4hcd4
         x6yhPsCIZPdRU6HhzWw4jBZtjL8AVyMHVUJYI3DYQur0fW1Oi/bqj+zFX0A/mONNapTP
         sTPJcuNU24JAmi5JJwVII0oBZEPIHoW/EZqsk=
Subject: PATCH: Update xmlsoft completion
From: Doug Kearns <dougkearns@gmail.com>
To: zsh-workers@zsh.org
Content-Type: text/plain; charset="UTF-8"
Date: Thu, 15 Jul 2010 23:57:24 +1000
Message-ID: <1279202244.17178.2.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.30.2 (2.30.2-1.fc13) 
Content-Transfer-Encoding: 7bit

Index: Completion/Unix/Command/_xmlsoft
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_xmlsoft,v
retrieving revision 1.8
diff -u -r1.8 _xmlsoft
--- Completion/Unix/Command/_xmlsoft	30 Jun 2010 12:59:12 -0000	1.8
+++ Completion/Unix/Command/_xmlsoft	15 Jul 2010 09:13:53 -0000
@@ -1,7 +1,28 @@
 #compdef xsltproc xmllint -value-,XML_CATALOG_FILES,-default-
 
-# xmllint: using libxml version 20622
-# xsltproc: using libxslt version 10100
+# xmllint: using libxml version 20707
+# xsltproc: using libxml 20707, libxslt 10126 and libexslt 815
+
+local -a encoding
+
+encoding=(
+  UTF-8
+  UTF-16
+  ISO-10646-UCS-2
+  ISO-10646-UCS-4
+  ISO-8859-1
+  ISO-8859-2
+  ISO-8859-3
+  ISO-8859-4
+  ISO-8859-5
+  ISO-8859-6
+  ISO-8859-7
+  ISO-8859-8
+  ISO-8859-9
+  ISO-2022-JP
+  SHIFT_JIS
+  EUC-JP
+)
 
 case $service in
   xsltproc)
@@ -17,8 +38,9 @@
       '--nodtdattr[do not default attributes from the DTD]' \
       '--noout[do not dump the result]' \
       '--maxdepth[increase the maximum depth]:depth' \
-      '--maxparsedepth[increase the maximum parser depth]:depth' \
+      '--maxparserdepth[increase the maximum parser depth]:depth' \
       '--html[input document is an HTML file]' \
+      '--encoding[the input document character encoding]:encoding:(${encoding[@]})' \
       '--param[pass a parameter,value pair]:name::value (xpath expression)' \
       '--stringparam[pass a parameter]:name::value' \
       '--path[provide a set of paths for resources]:paths:_files -/' \
@@ -28,33 +50,13 @@
       '--writesubtree[allow file write only with the path subtree]:path:_files -/' \
       '--catalogs[use SGML catalogs]' \
       '--xinclude[do XInclude processing on document input]' \
+      '--xincludestyle[do XInclude processing on stylesheets]' \
       '--load-trace[print trace of all external entites loaded]' \
       {--profile,--norman}'[dump profiling information]' \
       '1:stylesheet:_files -g "*.xsl(-.)"' \
       ':file:_files -g "*.xml(-.)"' && return
   ;;
   xmllint)
-    local -a encoding
-
-    encoding=(
-      UTF-8
-      UTF-16
-      ISO-10646-UCS-2
-      ISO-10646-UCS-4
-      ISO-8859-1
-      ISO-8859-2
-      ISO-8859-3
-      ISO-8859-4
-      ISO-8859-5
-      ISO-8859-6
-      ISO-8859-7
-      ISO-8859-8
-      ISO-8859-9
-      ISO-2022-JP
-      SHIFT_JIS
-      EUC-JP
-    )
-
     _arguments \
       '--version[display the version of the XML library used]' \
       '--debug[dump a debug tree of the in-memory document]' \
@@ -62,6 +64,7 @@
       '--debugent[debug the entities defined in the document]' \
       '--copy[used to test the internal copy implementation]' \
       '--recover[output what was parsable on broken XML documents]' \
+      '--huge[remove any internal arbitrary parser limits]' \
       '--noent[substitute entity references by their value]' \
       "(--output -o)--noout[don't output the result tree]" \
       '--path[provide a set of paths for resources]:paths:_files -/' \
@@ -91,6 +94,7 @@
       '--encode[output in the given encoding]:encoding:(${encoding[@]})' \
       '--dropdtd[remove the DOCTYPE of the input docs]' \
       '--c14n[save in W3C canonical format]' \
+      '--c14n11[save in W3C canonical format v1.1 (with comments)]' \
       '--exc-c14n[save in W3C exclusive canonical format]' \
       '--nsclean[remove redundant namespace declarations]' \
       '--testIO[test user I/O support]' \
@@ -100,6 +104,7 @@
       '(--noxincludenode)--xinclude[do XInclude processing]' \
       '(--xinclude)--noxincludenode[do XInclude processing but do not generate XInclude nodes]' \
       '--loaddtd[fetch external DTD]' \
+      '--nofixup-base-uris[do not fixup xml:base uris]' \
       '--dtdattr[loaddtd + populate the tree with inherited attributes]' \
       '--stream[use the streaming interface to process very large files]' \
       '--walker[create a reader and walk though the resulting doc]' \
@@ -110,6 +115,8 @@
       '(--dtdvalid --postvalid --relaxng)--schematron[do validation against specified schematron]:schema:_webbrowser' \
       '--sax1[use the old SAX1 interfaces for processing]' \
       '--sax[do not build a tree but work just at the SAX level]' \
+      '--oldxml10[use XML-1.0 parsing rules before the 5th edition]' \
+      '--xpath[evaluate the XPath expression, inply --noout]:XPath expression:' \
       '*:XML file:_webbrowser' && return
   ;;
   *XML_CATALOG_FILES*)



From zsh-workers-return-26575-mason-zsh=primenet.com.au@sunsite.dk Wed Feb 18 10:12:19 2009
Return-Path: <zsh-workers-return-26575-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17138 invoked from network); 18 Feb 2009 10:12:06 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 18 Feb 2009 10:12:06 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 24155 invoked from network); 18 Feb 2009 10:12:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 18 Feb 2009 10:12:01 -0000
Received: (qmail 15609 invoked by alias); 18 Feb 2009 10:11:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26575
Received: (qmail 15595 invoked from network); 18 Feb 2009 10:11:57 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 18 Feb 2009 10:11:57 -0000
Received: from mx.spodhuis.org (redoubt.spodhuis.org [193.202.115.177])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id D078380271F0
	for <zsh-workers@sunsite.dk>; Wed, 18 Feb 2009 11:11:54 +0100 (CET)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=d200902; d=spodhuis.org;
	h=Received:Date:From:To:Subject:Message-ID:Mail-Followup-To:References:MIME-Version:Content-Type:Content-Disposition:In-Reply-To;
	b=muSfVc5RZod0YI5Lq+XYxuuvb+PdmHHvvkkjFKz+kxsrIhJ61YQ7h5SGu4zEsD1k9awbeROTfZOM2CFNYamqf+ZN9Dr1fQM6ygFxninjml5MbwjKtMQ6kMuqFie9YsZlLWQd56k46SSCWHs+CtxD7UOMZGMqXUTyExRoOIoDlaE=;
Received: by smtp.spodhuis.org with local 
	id 1LZjPA-000LoU-Q0; Wed, 18 Feb 2009 10:11:48 +0000
Date: Wed, 18 Feb 2009 02:11:48 -0800
From: Phil Pennock <zsh-workers+phil.pennock@spodhuis.org>
To: zsh-workers@sunsite.dk
Subject: Re: force overwrite in completions
Message-ID: <20090218101148.GA83790@redoubt.spodhuis.org>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <200902180914.53604.arekm@maven.pl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <200902180914.53604.arekm@maven.pl>
X-Virus-Scanned: ClamAV 0.92.1/9001/Wed Feb 18 05:29:20 2009 on bifrost
X-Virus-Status: Clean

On 2009-02-18 at 09:14 +0100, Arkadiusz Miskiewicz wrote:
> I'm using zsh on a system which shares $HOME between two separate servers and 
> when using both at the same time, switching to root at these (and so on) I 
> sometimes get a question from mv asking me if I want to overwrite a file over 
> and over.
> 
> This patch just forces such overwrite.

If the hosts have different sets of binaries installed so that
completion differs between the two, you're losing your caching as each
host keeps blowing away the other's cache.

I use this, both for NFS environment and non-NFS where I tend to play
with different versions of zsh:

if is-at-least 4.2.0; then autoload -Uz compinit ; else autoload -U compinit ; fi
[[ -d "${ZDOTDIR:-$HOME}/.zcompdumps" ]] || mkdir -m 0700 -p "${ZDOTDIR:-$HOME}/.zcompdumps"
compinit -u -d "${ZDOTDIR:-$HOME}/.zcompdumps/${HOST%%.*}-$ZSH_VERSION"

I've autoloaded is-at-least before this.

Regards,
-Phil


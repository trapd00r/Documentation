From zsh-workers-return-11784-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Jun 06 17:53:17 2000
Return-Path: <zsh-workers-return-11784-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17617 invoked from network); 6 Jun 2000 17:53:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 6 Jun 2000 17:53:13 -0000
Received: (qmail 17238 invoked by alias); 6 Jun 2000 17:52:42 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11784
Received: (qmail 17229 invoked from network); 6 Jun 2000 17:52:40 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000606175211.ZM726@candle.brasslantern.com>
Date: Tue, 6 Jun 2000 17:52:11 +0000
In-Reply-To: <200006060948.LAA08623@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "Re: #compdef -k menu-select glitch in 3.1.9" (Jun  6, 11:48am)
References: <200006060948.LAA08623@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: #compdef -k menu-select glitch in 3.1.9
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 6, 11:48am, Sven Wischnowsky wrote:
} Subject: Re: #compdef -k menu-select glitch in 3.1.9
}
} Bart Schaefer wrote:
} 
} > Should we stick a `(( $+functions[$_i_file] )) && continue' or equivalent
} > into the `for _i_file in ...' loop in compinit?
} 
} Or make compinit tell the user about such things and add an option to
} make it be quiet

That won't do it for me, as I want to have both versions of the function
around.  It should get the right one.

} (that reminds me of the security checks you suggested 
} for loading the completion system; I got no reply to my suggested
} patch in 11440).

Oh, I'm sorry, I thought I had replied.

11440 is the right idea, but I think the test should be for directories
or files that are writable by anyone other than root or the current user.
That means files not owned by the root or the current user fail, as do
files in any group or world writable directory, or in any directory not
owned by root or by the current user.

Then it needs three possibilities for how to treat failure of the tests:

(1) Ask whether to use the completion system.
(2) Silently ignore all directories and files that fail.
(3) Silently accept all directories and files in $fpath.
 
} > The other puzzler, with the beeping, still remains.
} 
} That's because menu-select always returns zero, whereas the other
} completion widgets return 1 when listing and LISTBEEP is set.

But it isn't listing any more at the time of the beep!  I get the beep
when I *exit* from menu selection with a choice, not when I *enter* menu
selection (which would make more sense from the listbeep standpoint).

} Hm, is it `correct' to make menu-select beep, too?

No.

} I don't have any opinion here since I don't let it beep at me at
} all... what do you want to have?

I don't believe menu selection should be considered a listing for the
purposes of listbeep, no matter how you got there; but if it is going to
be, then it ought to beep before and not after.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


From zsh-workers-return-16262-mason-zsh=primenet.com.au@sunsite.dk Fri Nov 16 18:01:28 2001
Return-Path: <zsh-workers-return-16262-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19679 invoked from network); 16 Nov 2001 18:01:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 Nov 2001 18:01:27 -0000
Received: (qmail 29508 invoked by alias); 16 Nov 2001 18:01:22 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16262
Received: (qmail 29490 invoked from network); 16 Nov 2001 18:01:21 -0000
Date: Fri, 16 Nov 2001 10:01:06 -0800
From: Danek Duvall <duvall@emufarm.org>
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Local history
Message-ID: <20011116100106.A944@lorien.emufarm.org>
Mail-Followup-To: Danek Duvall <duvall@emufarm.org>,
	zsh-workers@sunsite.dk (Zsh hackers list)
References: <1489.1005931641@csr.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.16i
In-Reply-To: <1489.1005931641@csr.com>; from pws@csr.com on Fri, Nov 16, 2001 at 05:27:21PM +0000

Is this related to the problem I'm having with the following function:

    edh() {
    	local histfile

	histfile=${HISTFILE:-$HOME/.zshist}

	fc -AI $histfile
	vi + $histfile
	fc -R $histfile
    }

The idea is to sync the current history to a file, edit it, and read it
back in.  It used to work back in the 3.1.9 days (I submitted it to the
(users?) list when someone requested similar functionality), but it
broke sometime since.

My normal course is to delete the last few lines of the history.  And
while they disappear from the end of the history, they reappear at the
beginning.  Re-running the function -- where those lines don't appear in
the editor at all -- makes them disappear entirely.

What's never worked is to do the sync to some arbitrary file, though I
don't remember the symptoms of that.

Danek


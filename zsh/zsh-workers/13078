From zsh-workers-return-13078-mason-zsh=primenet.com.au@sunsite.auc.dk Wed Oct 25 07:15:01 2000
Return-Path: <zsh-workers-return-13078-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1556 invoked from network); 25 Oct 2000 07:14:59 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Oct 2000 07:14:59 -0000
Received: (qmail 15311 invoked by alias); 25 Oct 2000 07:14:53 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 13078
Received: (qmail 15304 invoked from network); 25 Oct 2000 07:14:52 -0000
Date: Wed, 25 Oct 2000 09:14:51 +0200 (MET DST)
Message-Id: <200010250714.JAA23634@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: mason@primenet.com.au's message of 24 Oct 2000 14:33:47 GMT
Subject: Re: bug with completion (after 15 oct?)


Geoff Wing wrote:

> Heyla,
> am currently investigating a bug with completion which manifested in the
> last week or so:
> 
> % zsh.new -f
> % cd /tmp; mkdir foo; cd foo; touch bar baz
> % ls ba<TAB>	# <TAB><RETURN> or CTRL-U or whatever
> bar baz
> % ls ba<TAB>	# OK
> % exit
> % zsh.new
> % cd /tmp
> % ls ba<TAB>	# <TAB><RETURN> or CTRL-U or whatever
> --> completing file
> bar   baz
> % ls ba<TAB>
> zsh: 20301 segmentation fault (core dumped)  zsh.new
> 
> A backtrace gives the following - maybe it's useful to someone - but I'll
> try to narrow it down to a set of initialisation options.
> Hmm, what's worse is that a version compiled --disable-dynamic sometimes
> gives a segv a bit later (line 1034).

Sigh. Of course I couldn't reproduce that.

> 0x80af60b in compprintlist (showall=0) at complist.c:1023
> 1023            char **pp = g->ylist;
> (gdb) p *lastg
> $1 = {name = 0x0, prev = 0x0, next = 0x2, flags = 135607944, mcount = 2, 
>   matches = 0x0, lcount = 0, llcount = 1, ylist = 0x8157fc8, ecount = 0, 
>   expls = 0x0, ccount = 0, lexpls = 0x0, lmatches = 0x0, lfmatches = 0x1, 
>   lallccs = 0x0, num = 0, nbrbeg = 0, nbrend = 2, new = 2, dcount = 1, 
>   cols = 6, lins = 0, width = 12, widths = 0x6, totl = 0, shortest = 80, 
>   perm = 0x0}

Does that mean that amatches is garbled at that point?


Bye
 Sven


--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


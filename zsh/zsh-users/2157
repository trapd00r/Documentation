From zsh-users-return-2157-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Feb 15 17:40:48 1999
Return-Path: <zsh-users-return-2157-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22305 invoked from network); 15 Feb 1999 17:40:46 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 15 Feb 1999 17:40:46 -0000
Received: (qmail 9660 invoked by alias); 15 Feb 1999 17:39:08 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2157
Received: (qmail 9645 invoked from network); 15 Feb 1999 17:38:53 -0000
Message-Id: <9902151723.AA56829@ibmth.df.unipi.it>
To: zsh-users@sunsite.auc.dk (Zsh users list)
Subject: MAGIC_EQUAL_SUBST
Date: Mon, 15 Feb 1999 18:23:01 +0100
From: Peter Stephenson <pws@ibmth.df.unipi.it>

I'd like to change the behaviour of the shell option MAGIC_EQUAL_SUBST in
a way which I think will make it more comprehensible and so useful, but I'd
like to check no-one is relying on the old behaviour.

The option is supposed to make arguments looking like assignments get ~ and
= substitution, just like a real assignment would (the argument is still
otherwise a normal command argument, however).  The current behaviour is:

% unsetopt magicequalsubst
% print foo=~/a:~/b --foo=~/a
foo=~/a:~/b --foo=~/a:~/b
% setopt magicequalsubst
% print foo=~/a:~/b --foo=~/a
foo=/home/user2/pws/a:/home/user2/pws/b --foo=~/a

The special behaviour only happens when the first thing looks like a
variable name.  This was my idea and I think I got it wrong:  the shell
shouldn't second guess what an assignment for an external program looks
like.

So I'd like to alter it to make it more consistent --- this only affects
the behaviour with the option set, of course:

% print foo=~/a:~/b --foo=~/a
foo=/home/user2/pws/a:/home/user2/pws/b --foo=/home/user2/pws/a

This will make it useful in things like `./configure --prefix=~' which I
should probably have thought about originally.

Is anyone likely to be upset by such a change?

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


From zsh-users-return-3391-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Aug 24 17:32:34 2000
Return-Path: <zsh-users-return-3391-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13117 invoked from network); 24 Aug 2000 17:32:33 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 24 Aug 2000 17:32:33 -0000
Received: (qmail 18533 invoked by alias); 24 Aug 2000 17:28:50 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 3391
Received: (qmail 18519 invoked from network); 24 Aug 2000 17:28:49 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <000824102741.ZM9245@candle.brasslantern.com>
Date: Thu, 24 Aug 2000 10:27:41 -0700
In-Reply-To: <14757.19686.238318.996093@paullew-ultra.cisco.com>
Comments: In reply to Paul Lew <paullew@cisco.com>
        "Re: TRAPNAL with TMOUT problem" (Aug 24,  9:27am)
References: <14752.50467.89781.100331@paullew-ultra.cisco.com> 
	<000821104808.ZM29840@candle.brasslantern.com> 
	<14754.42242.721509.918727@paullew-ultra.cisco.com> 
	<1000822182401.ZM7808@candle.brasslantern.com> 
	<14757.19686.238318.996093@paullew-ultra.cisco.com>
X-Mailer: Z-Mail Lite (5.0.0 30July97)
To: Paul Lew <paullew@cisco.com>
Subject: Re: TRAPNAL with TMOUT problem
Cc: zsh-users@sunsite.auc.dk
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Aug 24,  9:27am, Paul Lew wrote:
> Subject: Re: TRAPNAL with TMOUT problem
> >>>>> "Bart" == Bart Schaefer <schaefer@candle.brasslantern.com> writes:
> 
>     Bart> host_owner () {
>     Bart>	setopt localoptions no_ksh_arrays
>     Bart>	local devhostent
>     Bart>	while read -A devhostent
>     Bart>	do
>     Bart>		if [[ $devhostent[1] == $HOST ]]
>     Bart>		then
>     Bart>			# howner in scope of caller!
>     Bart>			howner=$devhostent[4]
>     Bart>			return
>     Bart>		fi
>     Bart>	done < $ar/etc/devhost
>     Bart> }
> 
> I tried this and the result is still the same.  Which part of these
> procedures touched the tty device?  Thanks..

I just ran through calling the above from TRAPALRM while watching zsh with
strace.  Unless there's an error (/etc/devhost not found or not readable are
pretty much the only possible ones), *nothing* touches the tty device.

If there's an error, it gets printed and then ZLE resets the tty modes
and redraws the prompt; it's the tty mode setting in that case that causes
the access time to change.

This on a RedHat Linux system; it could be different on another OS.


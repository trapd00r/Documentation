From zsh-workers-return-8256-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Oct 14 14:40:05 1999
Return-Path: <zsh-workers-return-8256-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 3433 invoked from network); 14 Oct 1999 14:40:00 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Oct 1999 14:40:00 -0000
Received: (qmail 22706 invoked by alias); 14 Oct 1999 14:39:41 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8256
Received: (qmail 22699 invoked from network); 14 Oct 1999 14:39:41 -0000
Date: Thu, 14 Oct 1999 16:39:39 +0200 (MET DST)
Message-Id: <199910141439.QAA16218@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Tanaka Akira's message of 14 Oct 1999 23:28:28 +0900
Subject: Re: PATCH: Re: _urls, _netscape, a seg fault and new completion thoughts


Tanaka Akira wrote:

> Maybe, a patch for _main_complete was forgotten in 8227.

Urgh, the ones for `_main_complete' and `compinit'.

I can only hope that this now applies cleanly.

Sorry!

Bye
 Sven

--- Completion/Core/_main_complete.old	Thu Oct 14 16:35:27 1999
+++ Completion/Core/_main_complete	Thu Oct 14 16:35:44 1999
@@ -51,6 +51,13 @@
   fi
 done
 
+# Now call the post-functions.
+
+for post in "$comppostfuncs[@]"; do
+  "$post"
+done
+comppostfuncs=()
+
 [[ "$compconfig[last_prompt]" = always ]] && compstate[last_prompt]=yes
 
 _lastcomp=( "${(@kv)compstate}" )
--- Completion/Core/compinit.old	Thu Oct 14 16:37:27 1999
+++ Completion/Core/compinit	Wed Oct 13 10:12:17 1999
@@ -112,6 +112,11 @@
   compconfig[correct_prompt]='correct to:'
 (( ${+compconfig[completer]} )) || compconfig[completer]=_complete
 
+# This can hold names of functions that are to be called after all
+# matches have been generated.
+
+comppostfuncs=()
+
 # This function is used to register or delete completion functions. For
 # registering completion functions, it is invoked with the name of the
 # function as it's first argument (after the options). The other

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-17173-mason-zsh=primenet.com.au@sunsite.dk Thu May 16 17:11:10 2002
Return-Path: <zsh-workers-return-17173-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13173 invoked from network); 16 May 2002 17:11:09 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 16 May 2002 17:11:09 -0000
Received: (qmail 24362 invoked by alias); 16 May 2002 17:11:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17173
Received: (qmail 24342 invoked from network); 16 May 2002 17:10:56 -0000
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <1020516171040.ZM19537@candle.brasslantern.com>
Date: Thu, 16 May 2002 17:10:40 +0000
In-Reply-To: <Pine.LNX.4.44.0205151349520.26901-100000@phong.blorf.net>
Comments: In reply to Wayne Davison <wayned@users.sourceforge.net>
        "_rsync duplicated options in completion" (May 15,  1:52pm)
References: <Pine.LNX.4.44.0205151349520.26901-100000@phong.blorf.net> 
	<20020516021810.GA32147@dman.com>
In-Reply-To: <20020516021810.GA32147@dman.com>
Comments: In reply to Clint Adams <clint@zsh.org>
        "Re: _rsync duplicated options in completion" (May 15, 10:18pm)
X-Mailer: Z-Mail (5.0.0 30July97)
To: Wayne Davison <wayned@users.sourceforge.net>,
        Zsh Workers <zsh-workers@sunsite.dk>, Clint Adams <clint@zsh.org>
Subject: Re: _rsync duplicated options in completion
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 15,  1:52pm, Wayne Davison wrote:
} Subject: _rsync duplicated options in completion
}
} I've noticed that the _rsync completer duplicates most (all?) of the
} options.  For instance, if I type "--include-f<TAB>" it lists one with
} a description and one without, but won't complete the option name any
} further.

The problem is that the `--' argument to _arguments is causing the
output from `rsync --help' to be merged with the long list of options
provided in the completion function itself.  Instead of recognizing
that there are overlaps, every option is being presented twice.

There additionally seems to be a navigation problem with menu selection.
Complete after `rsync --' (so that all combinations of options are in
the menu) and then begin scrolling down.  On an 80-column terminal, you
ventually come to a place where a blank line appears in the display.  If
you scroll down across this, you can't scroll back up again; rather you
have to cycle off the bottom to get back to the top.

On May 15, 10:18pm, Clint Adams wrote:
}
} Perhaps the -- stuff should be removed if it can't coexist well.

Clearly there's a bug that needs fixing, probably related to the code
to coalesce identical descriptions for the same option.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


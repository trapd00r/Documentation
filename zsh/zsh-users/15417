From zsh-users-return-15417-mason-zsh=primenet.com.au@zsh.org Mon Sep 20 16:56:07 2010
Return-Path: <zsh-users-return-15417-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25539 invoked by alias); 20 Sep 2010 16:56:07 -0000
Mailing-List: contact zsh-users-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Users List <zsh-users.zsh.org>
List-Post: <mailto:zsh-users@zsh.org>
List-Help: <mailto:zsh-users-help@zsh.org>
Delivered-To: mailing list zsh-users@zsh.org
X-Seq: 15417
Received: (qmail 14213 invoked from network); 20 Sep 2010 16:56:04 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: none (ns1.primenet.com.au: domain at closedmail.com does not designate permitted sender hosts)
From: Bart Schaefer <schaefer@brasslantern.com>
Message-id: <100920095553.ZM30842@torch.brasslantern.com>
Date: Mon, 20 Sep 2010 09:55:53 -0700
X-Mailer: OpenZMail Classic (0.9.2 24April2005)
To: zsh-users@zsh.org
Subject: Zsh and the MyTouch Slide
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii

I recently replaced my poor old discontinued SideKick with a MyTouch
Slide, which is an Android phone.  I installed the ConnectBot SSH client
so I can log in to my desktop at work from the phone.  So far so good.

Problem:  The hardware keypad on this particular phone doesn't have a "|"
key, and it's four taps to get one via softkeys.  Also, you can't see the
screen when using the softkeys, which is kind of annoying.  There are a
number of other keys it's similarly difficult to access.

However, there is a hardware key labeled SYM for which ConnectBot sends
an unlikely four-byte sequence, perfect for bindkey.  The following is
deliberately written to avoid "modern" zsh features so it should work on
zsh installations up to several years old, but it may not work if you
are using a multibyte character set.

Tweak the value of "replace" per your preferences.

--- 8< --- snip --- 8< ---
#autoload

# For ConnectBot on the MyTouch Slide
# autoload -U mytouch
# zle -N mytouch
# bindkey '\M-n\M-<\M-^A' mytouch

emulate -LR zsh

local key
local -A replace

replace=(
    /	\\
    L	'|'
    l	'|'
    j	'['
    k	']'
    J	'{'
    K	'}'
    '('	'<'
    ')'	'>'
    ','	'<'
    '.'	'>'
)

zle -R "SYMBOL:"
read -k 1 key

if (( $+replace[$key] ))
then LBUFFER="$LBUFFER"$replace[$key]
else LBUFFER="$LBUFFER"$key
fi


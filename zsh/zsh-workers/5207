Delivered-To: mason-zsh@primenet.com.au
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
Date: Wed, 3 Feb 1999 16:16:02 +0100 (MET)
Message-Id: <199902031516.QAA13013@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
Subject: PATCH: new style completion for conditions
X-Mailing-List: <zsh-workers@sunsite.auc.dk> 5207


Almost not worth a separate patch: this adds completion for conditions 
to the `new-completion-examples'-file. This is almost as simple as the 
one that is built in for compctl.

Bye
 Sven

--- om/new-completion-examples	Wed Feb  3 15:24:08 1999
+++ Misc/new-completion-examples	Wed Feb  3 16:15:26 1999
@@ -330,6 +330,18 @@
   [[ ${(Pt)${COMMAND}} = assoc* ]] && complist -k "( ${(kP)${COMMAND}} )"
 }
 
+defcomp __cond --cond--
+__cond() {
+  if [[ -current -1 -o ]] then
+    complist -o -M 'L:|[nN][oO]= M:_= M:{A-Z}={a-z}'
+  elif [[ -current -1 -nt || -current -1 -ot || -current -1 -ef ]] then
+    files
+  else
+    files
+    complist -v
+  fi
+}
+
 # Do sub-completion for pre-command modifiers.
 
 defcomp __precmd - nohup nice eval time rusage noglob nocorrect exec

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


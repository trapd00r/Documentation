From zsh-workers-request@math.gatech.edu Mon Nov 24 05:54:52 1997
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 27436 invoked from network); 24 Nov 1997 05:54:51 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 24 Nov 1997 05:54:51 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.8.5/8.8.5) id AAA19225;
	Mon, 24 Nov 1997 00:34:58 -0500 (EST)
Resent-Date: Mon, 24 Nov 1997 00:34:21 -0500 (EST)
From: "Bart Schaefer" <schaefer@brasslantern.com>
Message-Id: <971123213429.ZM26136@candle.brasslantern.com>
Date: Sun, 23 Nov 1997 21:34:29 -0800
In-Reply-To: <199711240322.WAA18587@luomat.peak.org>
Comments: In reply to Timothy J Luoma <luomat+zsh+users@luomat.peak.org>
        "/etc/profile being read after my personal .zshenv" (Nov 23, 10:22pm)
References: <199711240322.WAA18587@luomat.peak.org>
X-Mailer: Z-Mail (4.0b.820 20aug96)
To: Timothy J Luoma <luomat+zsh+users@luomat.peak.org>,
        zsh-users@math.gatech.edu
Subject: Re: /etc/profile being read after my personal .zshenv
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Resent-Message-ID: <"UYXpq1.0.oh4.S7HUq"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1149
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Nov 23, 10:22pm, Timothy J Luoma wrote:
} Subject: /etc/profile being read after my personal .zshenv
}
} How can I stop that?

You can't.

} I thought all systemwide files were read first, and then the personal ones.

Nope.  The order is:

 1	/etc/zshenv
 2  (NO_RCS is checked, and if set, no more are read.)
 3	$ZDOTDIR/.zshenv
    (The next two are skipped when not a login shell.)
 4	/etc/zprofile
 5	$ZDOTDIR/.zprofile
 6  (NO_RCS is checked again, and if set, no more are read.)
 7	/etc/zshrc
 8	$ZDOTDIR/.zshrc
    (The last two are skipped when not a login shell.)
 9	/etc/zlogin
10	$ZDOTDIR/.zlogin

Thus the only way to avoid /etc/zprofile on login shells is to also have
your own .zshenv skipped.  The best you can do is override /etc/zprofile
in your .zprofile.

A quick-n-dirty solution is to link .zprofile and .zshenv, and take the hit
of having the same file read twice on logins.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-22655-mason-zsh=primenet.com.au@sunsite.dk Mon Aug 21 12:28:16 2006
Return-Path: <zsh-workers-return-22655-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27553 invoked from network); 21 Aug 2006 12:28:12 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-25) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.5 required=5.0 tests=BAYES_00,FORGED_RCVD_HELO,
	NO_REAL_NAME autolearn=no version=3.1.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 21 Aug 2006 12:28:12 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 32034 invoked from network); 21 Aug 2006 12:28:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 21 Aug 2006 12:28:06 -0000
Received: (qmail 3173 invoked by alias); 21 Aug 2006 12:28:04 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 22655
Received: (qmail 2201 invoked from network); 21 Aug 2006 12:26:01 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 21 Aug 2006 12:26:01 -0000
Received: (qmail 28022 invoked from network); 21 Aug 2006 12:26:01 -0000
Received: from py-out-1112.google.com (64.233.166.176)
  by a.mx.sunsite.dk with SMTP; 21 Aug 2006 12:25:59 -0000
Received: by py-out-1112.google.com with SMTP id z74so3115641pyg
        for <zsh-workers@sunsite.dk>; Mon, 21 Aug 2006 05:25:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:to:subject:message-id:mime-version:content-type:content-disposition:user-agent:from;
        b=dj0blSOTxnQlaoDus1iDjDrxSDWSoXvVXUcLRSzD9ggozSgj3nWt/Npjq3GejXt74hjJn2702RR0Pp9CfmmgknpXp9IPyFHNdi4NXMVl65tm/tp50R5q7UF+6+wNBoC6pVqShjSU9EiXkISh/Vd1faX1+XPA2vHOUaQ4VpksdwY=
Received: by 10.35.121.9 with SMTP id y9mr13144170pym;
        Mon, 21 Aug 2006 05:25:58 -0700 (PDT)
Received: from localhost ( [84.9.35.113])
        by mx.gmail.com with ESMTP id 5sm39980nzk.2006.08.21.05.25.56;
        Mon, 21 Aug 2006 05:25:57 -0700 (PDT)
Date: Mon, 21 Aug 2006 13:22:38 +0100
To: zsh-workers@sunsite.dk, Clint Adams <schizo@debian.org>
Subject: Re: zsh completion for sisu
Message-ID: <20060821122238.GA2389@amissah.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.13 (2006-08-11)
From: ralph.amissah@gmail.com

Clint thanks for the feedback,

So far this is a simplification of what was done previously, (hopefully
taking in some of your feedback) that seems to work. It is still naive.

I have not yet taken in the construct:

> # is possible to use the -e option of the zstyle builtin command to
> #specify conditions for the use of particular tags. For example:
> zstyle -e '*:-command-:*' tag-order '
>     if [[ -n $PREFIX$SUFFIX ]]; then
>       reply=( )
>     else
>       reply=( - )
>     fi'

which will probably help limit matches for specific tags, such as:

>>I have not even figured out yet how to restrict options to particular
>>commands - for example the options --create --recreate --drop --import
>>--update are only relevant where the -D or -d flag is uses (which can in
>>turn be accompanied by a -v verbose flag)... but as said earlier, it is
>>already helpful and better than nothing.

there is no big rush, as said what currently exists is better than
nothing.

I likewise Cc: zsh-workers who are indeed welcome to jump in.
File appended, thanks,
Ralph Amissah

#######
#compdef sisu
# Copyright (C) 2006 Ralph Amissah
# sisu, version 0.46.1
# same license as Zsh or SiSU
local curcontext="$curcontext" state line ret=1
typeset -A opt_args
_arguments -s -C -M 'r:|[_-]=* r:|=*' \
  '(--convert --to -C)-U[prints to screen url output map of available output possibilities]' \
  '(--convert --to -C)-u[url mapping of output files for requested processing flags]' \
  '(--convert --to -C)-V[more verbose than -v]' \
  '(--convert --to -C)-v[verbose]' \
  '--no-ocn[-\[hHp\]switches off object citation numbering]' \
  '--no-annotate[-\[mhHpoxXabN\] strips output text of additional editors endnotes]' \
  '(--convert --to -C)-A[plaintext with dos line-feeds, footnotes follow paragraphs in which they occur]' \
  '(--convert --to -C)-a[plaintext with Unix line-feeds, footnotes follow paragraphs in which they occur]' \
  '(--convert --to -C)-b[XHTML output]' \
  '(- *)-C[initialise site]' \
  '(--convert --to -C)-c[toggle screen color on or off depending on set default]' \
  '(--convert --to -C)-E[plaintext with dos line-feeds, endnotes following main text]' \
  '(--convert --to -C)-e[plaintext with Unix line-feeds, endnotes following main text]' \
  '(--convert --to -C)-F[generate sample cgi web search form \[--webserv=webrick for sisu webrick url\]]' \
  '(--convert --to -C -h)-H[HTML output, without link suffixes]' \
  '(--convert --to -C -H)-h[HTML output]' \
  '(--convert --to -C)-I[texinfo output, not maintained]' \
  '(--convert --to -C)-L[print license info]' \
  '(--convert --to -C)-M[maintenance mode, retain intermediate processing files]' \
  '(--convert --to -C)-m[create intermediate markup file, metaverse, assumed for most output instuctions]' \
  '(--convert --to -C)-N[document content certificate, output document digests]' \
  '(--convert --to -C)-n[skip intermediate markup, skip -m]' \
  '(--convert --to -C)-o[Open Document text format output]' \
  '(--convert --to -C)-p[LaTeX pdf output]' \
  '(--convert --to -C)-q[quiet mode]' \
  '(--convert --to -C)-R[post output to remote host using rsync, requires pre-configuration]' \
  '(--convert --to -C)-r[post output to remote host using scp, requires pre-configuration]' \
  '(--convert --to -C)-S[produces and shares tarred gzipped markup source document with associated images etc.]' \
  '(--convert --to -C)-s[shares markup source]' \
  '(--convert --to -C)-t[termsheet, preprocessing]' \
  '(- *)-W[starts ruby webrick server]' \
  '(--convert --to -C)-w[concordance file]' \
  '(--convert --to -C)-X[XML dom style]' \
  '(--convert --to -C)-x[XML sax style]' \
  '(--convert --to -C)-y[output summary page, manifest of existing generated output]' \
  '(--convert --to -C)-Z[Zap delete/destroy output]' \
  '--import[-\[Dd\] imports document to database]' \
  '--update[-\[Dd\] updates document in database]' \
  '--remove[-\[Dd\] removes document from database]' \
  '--dropall[-\[Dd\] drops database, tables, indexes, all!]' \
  '--create[-\[Dd\] creates new database - tables, indexes, etc.]' \
  '--recreate[-\[Dd\] drops database, killing data and creates new empty database - tables, indexes, etc.]' \
  '(--convert --to -C)-D[postgresql database instruction]' \
  '(--convert --to -C)-d[sqlite database instruction]' \
  '(- *)--help[display help information]' \
  '(--convert --to -C -2 -3 -4 -5)-1[shortcut, initial default -mNHwpy]' \
  '(--convert --to -C -1 -3 -4 -5)-2[shortcut, initial default -mNHwpaoy]' \
  '(--convert --to -C -1 -2 -4 -5)-3[shortcut, initial default -mNHwpaobxXy]' \
  '(--convert --to -C -1 -2 -3 -5)-4[shortcut, initial default -mNHwpaobxXDy --import]' \
  '(--convert --to -C -1 -2 -3 -4)-5[shortcut, initial default -mNHwpaobxXDy --update]' \
  '--to=node[XML node based input representation, experimental]' \
  '--to=sax[XML sax based input representation, experimental]' \
  '--to=dom[XML dom based input representation, experimental]' \
  '--convert=footnotes[embedded footnotes]' \
  '--to=current[current markup]' \
  '*:SiSU files:_files -g "*.(sst|ssm)(.)"'

-- 
email: ralph.amissah@gmail.com
SiSU:  http://www.jus.uio.no/sisu


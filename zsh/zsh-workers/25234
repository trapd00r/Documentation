From zsh-workers-return-25234-mason-zsh=primenet.com.au@sunsite.dk Sun Jun 22 08:42:10 2008
Return-Path: <zsh-workers-return-25234-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 23425 invoked from network); 22 Jun 2008 08:42:07 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.4 (2008-01-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.4
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 22 Jun 2008 08:42:07 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 95241 invoked from network); 22 Jun 2008 08:42:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 22 Jun 2008 08:42:01 -0000
Received: (qmail 1036 invoked by alias); 22 Jun 2008 08:41:57 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25234
Received: (qmail 1019 invoked from network); 22 Jun 2008 08:41:57 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 22 Jun 2008 08:41:57 -0000
Received: from prunille.vinc17.org (vinc17.pck.nerim.net [213.41.242.187])
	by bifrost.dotsrc.org (Postfix) with ESMTP id EA40F80524FD
	for <zsh-workers@sunsite.dk>; Sun, 22 Jun 2008 10:41:53 +0200 (CEST)
Received: by prunille.vinc17.org (Postfix, from userid 501)
	id 14C7A23794DD; Sun, 22 Jun 2008 10:41:52 +0200 (CEST)
Date: Sun, 22 Jun 2008 10:41:52 +0200
From: Vincent Lefevre <vincent@vinc17.org>
To: zsh-workers@sunsite.dk
Subject: Re: environment settings
Message-ID: <20080622084152.GQ10734@prunille.vinc17.org>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20080616074651.GB26165@marcus> <20080616080556.GA5091@sc.homeunix.net> <20080616123045.GC26165@marcus> <20080616124450.GC5091@sc.homeunix.net> <slrng5etlu.mft.joerg@alea.gnuu.de> <20080621062649.GA28022@blorf.net> <20080621113659.GA20796@prunille.vinc17.org> <20080621123049.GA7027@sc.homeunix.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20080621123049.GA7027@sc.homeunix.net>
X-Mailer-Info: http://www.vinc17.org/mutt/
User-Agent: Mutt/1.5.18-vl-r22984 (2008-06-11)
X-Virus-Scanned: ClamAV 0.92.1/7531/Sun Jun 22 02:59:02 2008 on bifrost
X-Virus-Status: Clean

On 2008-06-21 13:30:50 +0100, Stephane Chazelas wrote:
> The program to debug (here env) is run through $SHELL which
> sources ~/.zshenv which overrides the setting of the A variable.
> (PATH in Wayne's case).
> 
> It's not gdb's fault and there's nothing it can do about it.

OK, it is explained in the manual that argument building is done by
gdb, using $SHELL:

The _arguments._
     Specify the arguments to give your program as the arguments of the
     `run' command.  If a shell is available on your target, the shell
     is used to pass the arguments, so that you may use normal
     conventions (such as wildcard expansion or variable substitution)
     in describing the arguments.  In Unix systems, you can control
     which shell is used with the `SHELL' environment variable.  *Note
     Your Program's Arguments: Arguments.

So, this is even worse. For instance, if the user changes the way
arguments are built (e.g. I use "setopt EXTENDED_GLOB" in my .zshrc),
such options should actually be in the .zshenv to get the same
behavior!

-- 
Vincent Lefèvre <vincent@vinc17.org> - Web: <http://www.vinc17.org/>
100% accessible validated (X)HTML - Blog: <http://www.vinc17.org/blog/>
Work: CR INRIA - computer arithmetic / Arenaire project (LIP, ENS-Lyon)


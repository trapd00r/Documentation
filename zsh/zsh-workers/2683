From zsh-workers-request@euclid.skiles.gatech.edu Tue Dec 31 11:57:04 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 6528 invoked from network); 31 Dec 1996 11:57:02 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 31 Dec 1996 11:57:02 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id HAA05586; Tue, 31 Dec 1996 07:01:25 -0500 (EST)
Resent-Date: Tue, 31 Dec 1996 07:01:25 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <28071.199612311202@stone.dcs.warwick.ac.uk>
Subject: Re: OSF test does not have -nt
To: hzoli@cs.elte.hu (Zoltan Hidvegi)
Date: Tue, 31 Dec 1996 12:02:32 +0000 (GMT)
Cc: zsh-workers@math.gatech.edu
In-Reply-To: <199612302010.VAA09456@bolyai.cs.elte.hu> from "Zoltan Hidvegi" at Dec 30, 96 09:10:34 pm
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8657.50
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"mCYqy2.0.DN1.L2Goo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2683
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Zoltan Hidvegi wrote:
>On OSF/1 V2.0 test does not support the -nt operator which is used in
>the Makefile recently.

That will be difficult to work around.  To directly replace it, I think
a C program would be required, unless we want to rely on Perl in the
build environment.  Unfortunately this makes cross-compiling
impossible.  The alternative is to modify the make variables in the
recursive make invocation, such that building an object file also
causes some signalling action to occur.  Something like

EXTRA_ACTION = :
.c.o:
	# (normal build rule)
	@$(EXTRA_ACTION)

...
	$(MAKE) $(MAKEDEFS) EXTRA_ACTION='rm -f stamp-modobjs' $$obj
...


>Also in Zefram's latest Makefile.in patch the sed in OSF/1 thinks
>that the whole CFSED variable is a too long label.

I was afraid that might happen.  The solution is to put the $(CFSED)
bit into a separate file, and do `sed -f $(srcdir)/conf.sed -e
"$sed"`.

-zefram


From hzoli@cs.elte.hu Mon Jul 15 14:21:59 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id OAA13083 for <mason@werple.mira.net.au>; Mon, 15 Jul 1996 14:21:57 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id AAA06792; Mon, 15 Jul 1996 00:05:16 -0400 (EDT)
Resent-Date: Mon, 15 Jul 1996 00:05:16 -0400 (EDT)
From: Zoltan Hidvegi <hzoli@cs.elte.hu>
Message-Id: <199607150243.EAA00202@hzoli.ppp.cs.elte.hu>
Subject: Blocking child signals
To: zsh-workers@math.gatech.edu (Zsh hacking and development)
Date: Mon, 15 Jul 1996 04:43:32 +0200 (MET DST)
X-Mailer: ELM [version 2.4ME+ PL17 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"MjC7o2.0.1g1.xDSwn"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1645
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 914
Status: OR

In exec.c and in jobs.c there are several child_block() and child_unblock()
calls.  Tracing the system calls used by zsh it turns out that perhaps the
majority of these are these child block/unblock calls.  I think that the
performance of zsh could be improved a little bit by calling these blocking
code more carefully.  Unfortunately this child blocking stuff is quite a
mess.  I'm sure that there are some bugs hiding here (ie. the child signal
may remain blocked sometimes for quite a long time or it may be unblocked
when it should not be unblocked).

I think that zsh should not block child signals when it does not fork.  Is
there anyone who knows the details of this child blocking staff in exec.c?
Perhaps Sven would know that, but unfortunately it seems that he no longer
works on zsh :-(.  Btw. does anyone know the current E-mail address of
Sven?  I'd like to add it to the CONTRIBUTORS file.

Zoltan



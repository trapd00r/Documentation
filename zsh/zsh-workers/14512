From zsh-workers-return-14512-mason-zsh=primenet.com.au@sunsite.dk Mon May 28 18:56:08 2001
Return-Path: <zsh-workers-return-14512-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10940 invoked from network); 28 May 2001 18:56:07 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 May 2001 18:56:07 -0000
Received: (qmail 14683 invoked by alias); 28 May 2001 18:55:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14512
Received: (qmail 14664 invoked from network); 28 May 2001 18:55:54 -0000
Date: Mon, 28 May 2001 14:55:52 -0400
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _dpkg tweaks
Message-ID: <20010528145552.A19485@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5i

Unless something changed, I have no idea how it worked before.
--compare-versions still doesn't work properly if it is
preceded by any non "-*" arguments, though that shouldn't
be commonplace.  If I double the colon it doesn't
do what I expect either.  See next message for a similar problem.

Index: Completion/Debian/Command/_dpkg
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Command/_dpkg,v
retrieving revision 1.1
diff -u -r1.1 _dpkg
--- Completion/Debian/Command/_dpkg	2001/04/02 12:22:24	1.1
+++ Completion/Debian/Command/_dpkg	2001/05/28 18:21:04
@@ -129,10 +129,10 @@
   ;;
   compare_versions)
         _call_function ret _dpkg_$state && return ret
-        _arguments -C -A "-*" -s "$_dpkg_options[@]" \
-	'2:version A:' \
-	'3:operator:(lt le eq ne ge gt lt-nl le-nl ge-nl gt-nl)' \
-	'4:version B:'
+        _arguments -C -A "-*" -s \
+	'1:version A:' \
+	'2:operator:(lt le eq ne ge gt lt-nl le-nl ge-nl gt-nl)' \
+	'3:version B:'
   ;;
   configure)
         _call_function ret _dpkg_$state && return ret


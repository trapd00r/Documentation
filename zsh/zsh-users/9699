From zsh-users-return-9699-mason-zsh=primenet.com.au@sunsite.dk Sat Nov 19 16:00:06 2005
Return-Path: <zsh-users-return-9699-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 22472 invoked from network); 19 Nov 2005 16:00:04 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.0 (2005-09-13) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.0
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 19 Nov 2005 16:00:04 -0000
Received: (qmail 66931 invoked from network); 19 Nov 2005 15:59:57 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 19 Nov 2005 15:59:57 -0000
Received: (qmail 25683 invoked by alias); 19 Nov 2005 15:59:50 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 9699
Received: (qmail 25664 invoked from network); 19 Nov 2005 15:59:50 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 19 Nov 2005 15:59:50 -0000
Received: (qmail 65898 invoked from network); 19 Nov 2005 15:59:49 -0000
Received: from smtpout0148.sc1.cp.net (HELO n068.sc1.cp.net) (64.97.136.148)
  by a.mx.sunsite.dk with SMTP; 19 Nov 2005 15:59:48 -0000
Received: from sc (82.26.170.226) by n068.sc1.cp.net (7.2.069.1)
        id 4377A22C000B31CE for zsh-users@sunsite.dk; Sat, 19 Nov 2005 15:59:45 +0000
Received: from chazelas by sc with local (Exim 3.36 #1 (Debian))
	id 1EdV7w-0002Jr-00
	for <zsh-users@sunsite.dk>; Sat, 19 Nov 2005 15:59:44 +0000
Date: Sat, 19 Nov 2005 15:59:44 +0000
From: Stephane Chazelas <Stephane_Chazelas@yahoo.fr>
To: zsh-users@sunsite.dk
Subject: Re: listing/deleting empty directories recursively
Message-ID: <20051119155944.GA4929@sc>
Mail-Followup-To: zsh-users@sunsite.dk
References: <tfrtn1dt9nf26m1rka6b9kg3bmcoa2evs4@4ax.com> <20051119115653.GA329@imada.sdu.dk> <20051119115926.GB329@imada.sdu.dk> <200511191348.29062.cht@chello.at>
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-15
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <200511191348.29062.cht@chello.at>
User-Agent: Mutt/1.5.6i
Sender: Stephane Chazelas <stephane_chazelas@yahoo.fr>

On Sat, Nov 19, 2005 at 01:48:29PM +0100, Christian Taylor wrote:
[...]
> for dir in **/*(/^F); do print $dir >> LOGFILE; rmdir $dir; done
> 
> or with the alternative syntax I really like:
> 
> for dir (**/*(/^F)) { print $dir >> LOGFILE; rmdir $dir }
> 
> As far as I can see, filenames generated this way are already quoted 
> correctly, so spaces and special characters shouldn't be an issue.

They will as you forgot the "-r" for print, and to mark the end
of options with "--" for both print and rmdir.

Moreover, note that that won't remove directories that only
contain empty directories, you may prefer:

zargs rmdir -- ./**/*(/od) 2> /dev/null

as rmdir won't remove non-empty dirs anyway.

-- 
Stéphane


From zsh-workers-return-15171-mason-zsh=primenet.com.au@sunsite.dk Thu Jun 28 17:49:20 2001
Return-Path: <zsh-workers-return-15171-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14789 invoked from network); 28 Jun 2001 17:49:19 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Jun 2001 17:49:19 -0000
Received: (qmail 10686 invoked by alias); 28 Jun 2001 17:48:28 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 15171
Received: (qmail 10675 invoked from network); 28 Jun 2001 17:48:28 -0000
From: martin.ebourne@arcordia.com
Expiry-Date: Wed, 26 Sep 2001 -1:-1:-1 +0000
Subject: tty settings being corrupted
To: zsh-workers@sunsite.dk
Date: Thu, 28 Jun 2001 18:49:02 +0100
Message-ID: <OFB2751805.7954D02C-ON80256A79.00614B07@uk.jpmorgan.com>
X-MIMETrack: Serialize by Router on LON-ARCMTA-01/ARCORDIA(Release 5.0.3 (Intl)|21 March
 2000) at 06/28/2001 06:49:09 PM
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii


If I perform the following sequence:


% stty
speed 38400 baud; evenp hupcl
rows = 24; columns = 80; ypixels = 316; xpixels = 499;
erase = ^h; swtch = <undef>;
-brkint -inpck -istrip
crt iexten

% zsh -f       [ Type ctrl-D immediately after enter such that the shell gets it before printing the prompt]

% stty
speed 38400 baud; evenp hupcl
rows = 24; columns = 80; ypixels = 316; xpixels = 499;
quit = <undef>; erase = ^h; eof = ^a; swtch = <undef>; susp = <undef>; dsusp = <undef>; flush = <undef>; lnext = <undef>;
-brkint -inpck -istrip inlcr
crt iexten

% echo $ZSH_VERSION
4.0.2

% uname -a
SunOS gdd-odybin2.uk.jpmorgan.com 5.6 Generic_111435-01 sun4u sparc SUNW,Ultra-Enterprise-10000

Here the shell has corrupted the tty settings simply by running it and quitting before entering the line editor. Obviously ctrl-D after the prompt has
 been printed is fine.

Any ideas what is happening here? I could use ttyctl -f but I consider that a bit a brute force solution.

Cheers,

Martin.




This e-mail message is CONFIDENTIAL and may contain legally privileged
information.  If you are not the intended recipient you should not  read,
copy, distribute, disclose or otherwise use the information in this e-mail.
Please also telephone or fax us immediately and delete the message from
your system.  E-mail may be susceptible to data corruption, interception
and unauthorised amendment, and we do not accept liability for any such
corruption, interception or amendment or the consequences thereof.


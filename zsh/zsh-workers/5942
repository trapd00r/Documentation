From zsh-workers-return-5942-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Mar 25 16:30:10 1999
Return-Path: <zsh-workers-return-5942-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11944 invoked from network); 25 Mar 1999 16:30:09 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 25 Mar 1999 16:30:09 -0000
Received: (qmail 12928 invoked by alias); 25 Mar 1999 16:29:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 5942
Received: (qmail 12920 invoked from network); 25 Mar 1999 16:29:37 -0000
Date: Thu, 25 Mar 1999 17:29:34 +0100 (MET)
Message-Id: <199903251629.RAA24966@beta.informatik.hu-berlin.de>
From: Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
To: zsh-workers@sunsite.auc.dk
In-reply-to: Bruce Stephens's message of 25 Mar 1999 16:19:27 +0000
Subject: Re: Completion of files with spaces in


Bruce Stephens wrote:

> With zsh-3.1.5-pws-13, zsh -f, files with spaces in don't seem to get
> quoted properly.
> 
> So if I have the file "readme - corrections.txt", and I type:
> 
>         % less read<TAB>
> 
> I get 
> 
>         % less readme - 
> 
> I was expecting the spaces to be quoted with \.
> 
> I'm sure this worked once.  What's happened?

Me -- breaking up things (my favorite pastime).

Bye
 Sven

diff -u os/Zle/zle_tricky.c Src/Zle/zle_tricky.c
--- os/Zle/zle_tricky.c	Thu Mar 25 15:31:01 1999
+++ Src/Zle/zle_tricky.c	Thu Mar 25 17:26:47 1999
@@ -3644,7 +3646,8 @@
 		    isalt = 1;
 	}
 	if (!(ms = comp_match(fpre, fsuf, s, filecomp, &lc,
-			      (addwhat == CC_FILES || addwhat == -6),
+			      (addwhat == CC_FILES || addwhat == -6 ||
+			       addwhat == -5 || addwhat == -8),
 			      &bpl, &bsl, &isexact)))
 	    return;
 

--
Sven Wischnowsky                         wischnow@informatik.hu-berlin.de


From zsh-workers-return-18316-mason-zsh=primenet.com.au@sunsite.dk Fri Feb 28 22:07:35 2003
Return-Path: <zsh-workers-return-18316-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24614 invoked from network); 28 Feb 2003 22:07:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 28 Feb 2003 22:07:34 -0000
Received: (qmail 4328 invoked by alias); 28 Feb 2003 22:07:26 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18316
Received: (qmail 4321 invoked from network); 28 Feb 2003 22:07:25 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 28 Feb 2003 22:07:25 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [216.136.130.98] by sunsite.dk (MessageWall 1.0.8) with SMTP; 28 Feb 2003 22:7:25 -0000
Message-ID: <20030228220722.16160.qmail@web10406.mail.yahoo.com>
Received: from [165.247.220.148] by web10406.mail.yahoo.com via HTTP; Fri, 28 Feb 2003 14:07:22 PST
Date: Fri, 28 Feb 2003 14:07:22 -0800 (PST)
From: Felix Rosencrantz <f_rosencrantz@yahoo.com>
Subject: Re: Memory leaks found by valgrind 
To: zsh-workers@sunsite.dk
In-Reply-To: <13316.1045478350@csr.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Sorry I haven't had much of a chance to run valgrind with the latest patches,
particularly the one from Peter.  (Thanks Peter, though.)

I noticed that the termcap leak occurs even if I do what I consider to be
a no-op: TERM=$TERM
Doing that repeatedly could leak a bit of memory.  To me, it seems like a
pretty minor issue.

The only new leak I found was the following.   This I believe is related
to replace-string command.  When I tried that widget, I would get more
leaks.  (I haven't tried using other recent features/changes.)
 62 bytes in 62 blocks are definitely lost in loss record 5 of 13
    at 0x40165A60: malloc (vg_clientfuncs.c:100)
    by 0x8086275: zalloc (mem.c:490)
    by 0x810536C: set_prepost (zle_params.c:485)
    by 0x810541E: set_postdisplay (zle_params.c:515)
    by 0x808F7F4: setstrvalue (params.c:1608)
    by 0x8090BAC: assignsparam (params.c:1994)
    by 0x805F0A6: addvars (exec.c:1598)
    by 0x805CDC9: execsimple (exec.c:756)

-FR.


__________________________________________________
Do you Yahoo!?
Yahoo! Tax Center - forms, calculators, tips, more
http://taxes.yahoo.com/


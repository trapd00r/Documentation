From zsh-workers-return-14979-mason-zsh=primenet.com.au@sunsite.dk Tue Jun 19 18:48:51 2001
Return-Path: <zsh-workers-return-14979-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27083 invoked from network); 19 Jun 2001 18:48:49 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 19 Jun 2001 18:48:49 -0000
Received: (qmail 27286 invoked by alias); 19 Jun 2001 18:48:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 14979
Received: (qmail 27274 invoked from network); 19 Jun 2001 18:48:12 -0000
X-Envelope-Sender-Is: Andrej.Borsenkow@mow.siemens.ru (at relayer david.siemens.de)
Date: Tue, 19 Jun 2001 22:48:40 +0400 (MSD)
From: Andrej Borsenkow <Andrej.Borsenkow@mow.siemens.ru>
X-X-Sender:  <bor@itsrm2.mow.siemens.ru>
To: Bart Schaefer <schaefer@candle.brasslantern.com>
cc: ZSH Workers Mailing List <zsh-workers@sunsite.dk>
Subject: Re: AIX patch
In-Reply-To: <1010619161132.ZM16333@candle.brasslantern.com>
Message-ID: <Pine.SV4.4.33.0106192242180.22350-100000@itsrm2.mow.siemens.ru>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII

On Tue, 19 Jun 2001, Bart Schaefer wrote:

> On Jun 19, 10:45am, Andrej Borsenkow wrote:
> }
> } Note, that it adds test for type of third argument to accept (that is used
> } in some other functions as well). It currently checks for size_t, unsigned
> } long and int (those I have on systems here and reported on AIX 4.x)
>
> Linux/gcc apparently has an actual `socklen_t' typedef.  Probably should
> try that first.
>
> +    for zsh_type in socklen_t int "unsigned long" size_t ; do

I had some considerations for testing for int first. If we hit some really
broken compiler that does not care about protoype mismatch we better have
the "most common" case first. It defaulted to int before - so let's stick
to int as much as possible. May be, I'm just plain paranoid. And the
whole needs check for general prototype support of course.

BTW Linux/gcc is pretty vague definition :-) On Mandrake cooker it finds
size_t.

-andrej


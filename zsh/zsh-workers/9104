From zsh-workers-return-9104-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Dec 17 13:47:37 1999
Return-Path: <zsh-workers-return-9104-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18748 invoked from network); 17 Dec 1999 13:47:36 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 17 Dec 1999 13:47:36 -0000
Received: (qmail 6307 invoked by alias); 17 Dec 1999 13:47:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9104
Received: (qmail 6300 invoked from network); 17 Dec 1999 13:47:30 -0000
Message-ID: <385A3EEE.15917530@u.genie.co.uk>
Date: Fri, 17 Dec 1999 13:47:26 +0000
From: Oliver Kiddle <opk@u.genie.co.uk>
X-Mailer: Mozilla 4.7 [en] (Win95; I)
X-Accept-Language: en
MIME-Version: 1.0
To: Zsh workers <zsh-workers@sunsite.auc.dk>
Subject: complist bug and PATCH: spelling
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

The menu selection doesn't seem to be working. I get:

SELECTMIN=0
cd <tab><tab>    -- menu selection doesn't start
echo $SELECTMIN
9999999          -- and SELECTMIN has been messed up

My second, unrelated point is that the plural of index is indices, not
indexes. This patch fixes that, hopefully without messing up too many
people's zstyles.

Oliver

*** Doc/Zsh/compsys.yo.old	Fri Dec 17 11:58:48 1999
--- Doc/Zsh/compsys.yo	Fri Dec 17 11:59:21 1999
***************
*** 477,484 ****
  item(tt(hosts))(
  for hostnames
  )
! item(tt(indexes))(
! used for array indexes
  )
  item(tt(jobs))(
  used for jobs
--- 477,484 ----
  item(tt(hosts))(
  for hostnames
  )
! item(tt(indices))(
! used for array indices
  )
  item(tt(jobs))(
  used for jobs
*** Completion/Base/_subscript.old	Fri Dec 17 11:53:31 1999
--- Completion/Base/_subscript	Fri Dec 17 11:55:38 1999
***************
*** 16,27 ****
  elif [[ ${(Pt)${compstate[parameter]}} = array* ]]; then
    local list i j ret=1 disp
  
!   _tags indexes parameters
  
    while _tags; do
!     if _requested -V indexes expl 'array index'; then
        ind=( {1..${#${(P)${compstate[parameter]}}}} )
!       if zstyle -t ":completion${curcontext}:indexes" verbose; then
          list=()
          for i in "$ind[@]"; do
            [[ "$i" = ${PREFIX}*${SUFFIX} ]] &&
--- 16,27 ----
  elif [[ ${(Pt)${compstate[parameter]}} = array* ]]; then
    local list i j ret=1 disp
  
!   _tags indices parameters
  
    while _tags; do
!     if _requested -V indices expl 'array index'; then
        ind=( {1..${#${(P)${compstate[parameter]}}}} )
!       if zstyle -t ":completion${curcontext}:indices" verbose; then
          list=()
          for i in "$ind[@]"; do
            [[ "$i" = ${PREFIX}*${SUFFIX} ]] &&


From zsh-workers-return-6898-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Jun 28 16:12:23 1999
Return-Path: <zsh-workers-return-6898-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 27064 invoked from network); 28 Jun 1999 16:12:21 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 28 Jun 1999 16:12:21 -0000
Received: (qmail 8815 invoked by alias); 28 Jun 1999 16:12:13 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6898
Received: (qmail 8808 invoked from network); 28 Jun 1999 16:12:11 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990628161133.ZM14207@candle.brasslantern.com>
Date: Mon, 28 Jun 1999 16:11:33 +0000
In-Reply-To: <37774DC7.FC0A66CE@www.johnnjen.cc>
Comments: In reply to root <peters@www.johnnjen.cc>
        "zsh restricted mode... need cd back" (Jun 28,  8:26pm)
References: <37774DC7.FC0A66CE@www.johnnjen.cc>
X-Mailer: Z-Mail (5.0.0 30July97)
To: peters@www.johnnjen.cc, zsh-workers@sunsite.auc.dk
Subject: Re: zsh restricted mode... need cd back
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 28,  8:26pm, root wrote:
} Subject: zsh restricted mode... need cd back
}
} I want to run zsh in restricted mode but still have cd ability (at least
} in thier home directories and no lower)

No lower?  You mean, no closer to the root?  Or do you only want them to be
able to make one-level-deep subtrees for some reason?

} but I have 2 problems... 1. I can not seem to be able to run it in
} restricted mode and I ahve read all the documentation I can before
} asking you guys..

There are two ways to run in restricted mode: put "setopt restricted" in
/etc/zshenv (not recommended), or make a link from zsh to a name that
starts with the letter "r" (such as "rzsh") and run zsh through that link.

Note that restricted mode first appeared in 3.1.something, so you can't
run in restricted mode at all using 3.0.5.  You can get close, but not
all the way there.

} and 2. I can not find where it restricts the cd
} ability in the source code so I can bring it back

It's in Src/builtin.c in bin_cd().

However, it may be that what you really want is to "chroot" them to a
limited subtree of the filesystem.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


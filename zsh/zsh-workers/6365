From zsh-workers-return-6365-mason-zsh=primenet.com.au@sunsite.auc.dk Sat May 29 07:51:40 1999
Return-Path: <zsh-workers-return-6365-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13025 invoked from network); 29 May 1999 07:51:38 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 29 May 1999 07:51:38 -0000
Received: (qmail 8918 invoked by alias); 29 May 1999 07:51:31 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6365
Received: (qmail 8905 invoked from network); 29 May 1999 07:51:29 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990529075124.ZM27194@candle.brasslantern.com>
Date: Sat, 29 May 1999 07:51:24 +0000
In-Reply-To: <9905141213.AA46939@ibmth.df.unipi.it>
Comments: In reply to Peter Stephenson <pws@ibmth.df.unipi.it>
        "Re: pws-18: Multiline cut'n'paste - second go." (May 14,  2:13pm)
References: <9905141213.AA46939@ibmth.df.unipi.it>
X-Mailer: Z-Mail (5.0.0 30July97)
To: "ZSH workers mailing list" <zsh-workers@sunsite.auc.dk>
Subject: Re: pws-18: Multiline cut'n'paste - second go.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 14,  2:13pm, Peter Stephenson wrote:
} Subject: Re: pws-18: Multiline cut'n'paste - second go.
}
} I understand the problem (tell me I'm wrong, go on), but I don't really see
} what can be done about it. The TCSETSW comes from settyinfo(), probably via
} tcsetattr(SHTTY, TCSADRAIN, ...), which is equivalent.  When zle is being
} used, the terminal has to be set back to it's ordinary mode for ordinary
} commands to run, because there's no way it can know what's being run, which
} will cause this; the OSes with this problem simply don't seem to allow
} `change the terminal modes without screwing up typeahead' --- if we could
} find a way of doing that we're home and dry.

If the system supports TIOCSTI, we could consume all the typeahead, change
the terminal mode, and then ioctl() the characters back through the driver.
However, there's a limit on how many bytes you can shove around that way,
and there'd still be some places it didn't work, so I'd just as soon we
don't mess with it.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


From zsh-workers-return-6399-mason-zsh=primenet.com.au@sunsite.auc.dk Mon May 31 22:41:14 1999
Return-Path: <zsh-workers-return-6399-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 14754 invoked from network); 31 May 1999 22:41:13 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 31 May 1999 22:41:13 -0000
Received: (qmail 18211 invoked by alias); 31 May 1999 22:41:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 6399
Received: (qmail 18202 invoked from network); 31 May 1999 22:41:05 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990531224100.ZM8919@candle.brasslantern.com>
Date: Mon, 31 May 1999 22:41:00 +0000
In-Reply-To: <9905231515.AA16080@ibmth.df.unipi.it>
Comments: In reply to Peter Stephenson <pws@ibmth.df.unipi.it>
        "PATCH: pws-19: minor syntactic innovation" (May 23,  5:15pm)
References: <9905231515.AA16080@ibmth.df.unipi.it>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk (Zsh hackers list)
Subject: Re: PATCH: pws-19: minor syntactic innovation
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On May 23,  5:15pm, Peter Stephenson wrote:
} Subject: PATCH: pws-19: minor syntactic innovation
}
} Just thought of a trivial way to take a lot of grief out of parameter
} substitution.  This patch makes the following valid:
} 
}   ${${${${(f)"$(typeset)"}:#*local *\=*}%%\=*}##* }

OK, the patch is straightforward to adapt and the results seem to be the
same in 3.0.6-pre-3 and 3.1.5-pws-20.

A few questions come up, however:

What's the parse of something like ${(f)"${"$(typeset)"}"} ?  It doesn't
seem to be the `obvious' one -- it appears that the quoted strings are
actually nesting, because of the enclosing braces, which is something
pretty radically new.  (I may be wrong.)  Is this a good thing?

What's the right way to document this change, including odd stuff like
the above?

Should the FAQ recommend using this form in some circumstances because
of the (@) change in 3.1.5?

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


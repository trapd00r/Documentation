From zsh-workers-request@math.gatech.edu Fri Jan 22 11:48:40 1999
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 16279 invoked from network); 22 Jan 1999 11:48:39 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 22 Jan 1999 11:48:39 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id GAA19946;
	Fri, 22 Jan 1999 06:47:01 -0500 (EST)
Resent-Date: Fri, 22 Jan 1999 06:47:01 -0500 (EST)
Date: Fri, 22 Jan 1999 12:47:23 +0100 (CST)
From: Helmut Jarausch <jarausch@IGPM.Rwth-Aachen.DE>
Subject: buglet 
To: zsh-workers@math.gatech.edu
Message-Id: <jarausch-990122124722.A02733@numa1>
X-Mailer: TkMail 4.0beta9
Resent-Message-ID: <"uwWTe2.0.bt4.qK6gs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4947
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Version zsh-3.1.5-pws-4-P  plus all patches upto 4944
need the following tiny patch (to compile on SGI)

Helmut.


diff -cr zsh-3.1.5-pws-4-P.OLD/Src/builtin.c zsh-3.1.5-pws-4-P/Src/builtin.c
*** zsh-3.1.5-pws-4-P.OLD/Src/builtin.c	Fri Jan 22 10:41:14 1999
--- zsh-3.1.5-pws-4-P/Src/builtin.c	Fri Jan 22 11:07:34 1999
***************
*** 790,796 ****
  	    zsfree(remnode(dirstack, dir));
  	return NULL;
      }
!     if (dest != getdata(dir)) {
  	zsfree(getdata(dir));
  	setdata(dir, dest);
      }
--- 790,796 ----
  	    zsfree(remnode(dirstack, dir));
  	return NULL;
      }
!     if (dest != (char*)getdata(dir)) {
  	zsfree(getdata(dir));
  	setdata(dir, dest);
      }
***************
*** 1989,1995 ****
  		puts(wd ? ": none" : " not found");
  		returnval = 1;
  	    }
! 	} else if ((cnam = findcmd(*argv))) {
  	    /* Found external command. */
  	    if (wd) {
  		printf("%s: command\n", *argv);
--- 1989,1995 ----
  		puts(wd ? ": none" : " not found");
  		returnval = 1;
  	    }
! 	} else if ((cnam = findcmd(*argv,0))) {
  	    /* Found external command. */
  	    if (wd) {
  		printf("%s: command\n", *argv);





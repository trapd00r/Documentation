From zsh-workers-return-13665-mason-zsh=primenet.com.au@sunsite.dk Sun Mar 18 23:23:16 2001
Return-Path: <zsh-workers-return-13665-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 11412 invoked from network); 18 Mar 2001 23:23:15 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 18 Mar 2001 23:23:15 -0000
Received: (qmail 18952 invoked by alias); 18 Mar 2001 23:23:07 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13665
Received: (qmail 18938 invoked from network); 18 Mar 2001 23:23:06 -0000
Sender: opk
Message-ID: <3AB534CA.AAFF8D96@u.genie.co.uk>
Date: Sun, 18 Mar 2001 22:20:58 +0000
From: Oliver Kiddle <okiddle@yahoo.co.uk>
X-Mailer: Mozilla 4.73 [en] (X11; I; Linux 2.2.18 i586)
X-Accept-Language: en
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: Moving completion functions
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sven wrote:

> If we remove the second level on installation, this should be a
> first-level directory like X, though.  And there's even stuff to fill
> a Network/Type directory.

It would depend on whether we remove the second-level on installation
or remove any directories which don't contain subdirectories on
installation. The latter would allow you to use Unix/Network if you
wanted. I don't really mind about this or about whether we do any
further subdivision - 84 functions in Unix/Command is not so much.

> Yes, similar foe Network if it's a first level directory.  There are
> network commands that need X and ones that don't.

I agree with Bart that anything needing X should be under X first.
Bart's point about the dependencies is also very much valid - an X
wrapper for a command-line network program is very likely to call
things in Network/Types.

Bart wrote:
> Let me jump back a bit and point out that it's not really correct to say
> that _use_lo is a "utility" -- _arguments is the utility, and _use_lo
> calls it; nobody would call _use_lo from some other function.

I'd agree with this. It was easy to miss that with _use_lo not being
the completion for any commands anymore. _gnu_generic is a good name.

> Aliasing is not the only reason for making compinit a function.  It also
> uses quite a few local parameters, "emulate -L zsh", and extendedglob.
> Those are all messy to deal with in a sourced file.

I remembered the aliasing as the main reason because there are ways
around the other problems such as the way you describe of using a
function defined within the sourced script. I'd prefer that way of doing
things. More user's would understand what they are doing when told to
source a file than the autoloading. And, it would avoid the zsh always
setting fpath stuff that I mentioned my dislike for before.

Oliver


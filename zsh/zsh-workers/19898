From zsh-workers-return-19898-mason-zsh=primenet.com.au@sunsite.dk Mon May 10 00:01:36 2004
Return-Path: <zsh-workers-return-19898-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1620 invoked from network); 10 May 2004 00:01:10 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?oK1ysAtTUQl1BUb2OjD5L0RtvfkvwWsm?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 10 May 2004 00:01:09 -0000
Received: (qmail 2618 invoked from network); 9 May 2004 22:17:51 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.86)
  by proxy.melb.primenet.com.au with SMTP; 9 May 2004 22:17:51 -0000
Received: (qmail 31823 invoked from network); 9 May 2004 22:17:34 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 9 May 2004 22:17:34 -0000
Received: (qmail 11158 invoked by alias); 9 May 2004 22:17:29 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 19898
Received: (qmail 11149 invoked from network); 9 May 2004 22:17:28 -0000
Received: from thor.dotsrc.org (HELO a.mx.sunsite.dk) (qmailr@130.225.247.86)
  by sunsite.dk with SMTP; 9 May 2004 22:17:25 -0000
Received: (qmail 31454 invoked from network); 9 May 2004 22:17:25 -0000
Received: from unknown (HELO moonbase.zanshin.com) (root@167.160.213.139)
  by a.mx.sunsite.dk with SMTP; 9 May 2004 22:17:23 -0000
Received: from toltec.zanshin.com (toltec.zanshin.com [167.160.213.166])
	by moonbase.zanshin.com (8.12.11/8.12.11) with ESMTP id i49MH9eR008608
	for <zsh-workers@sunsite.dk>; Sun, 9 May 2004 15:17:09 -0700
Date: Sun, 9 May 2004 15:16:29 -0700 (PDT)
From: Bart Schaefer <schaefer@zanshin.com>
To: zsh-workers@sunsite.dk
Subject: Matthias has another segmentation fault 
Message-ID: <Pine.LNX.4.44.0405091513000.29962-100000@toltec.zanshin.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Checker-Version: SpamAssassin 2.63 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, hits=-0.0 required=6.0 tests=BAYES_44 autolearn=no 
	version=2.63
X-Spam-Hits: -0.0

[I'm a bit behind on some of my email.]

I've asked him privately for more info, because there _is_ a test for 
zsh/stat right at the top of zls, but that doesn't seem to be related
to the segfault, unless the segfault occurs while parsing the output of
the wrong stat command.

----- Forwarded message from Matthias Kopfermann -----

Date: Sun, 2 May 2004 22:52:14 +0200
From: Matthias Kopfermann
Subject: zls and missing builtin entry

Hi Bart again,
Two minutes ago I found out why I was not able to use zls for such a
very long time. There is an _external_ gnu-command stat, too and zls after
autoloading just used that to display all the files because it is not
stated that a _builtin_ stat should be used but only the word "stat" [is
mentioned].

And this one fails miserably and i get:......

(ooh, wait, there is another bug after i did

zls 2>/tmp/zls <enter>
BUG: attempt to free more than allocated.
BUG: attempt to free more than allocated.
and zsh segfaulting, i guess.
Couldn't reproduce it the second time though. )

anyway: instead of "stat" there should be "builtin stat" to not get these
bad reactions or a test to see if the stat-module really is loaded or
not.

        Matthias

----- End forwarded message -----



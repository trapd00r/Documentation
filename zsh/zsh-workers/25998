From zsh-workers-return-25998-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 03 17:40:20 2008
Return-Path: <zsh-workers-return-25998-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7655 invoked from network); 3 Nov 2008 17:40:07 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 3 Nov 2008 17:40:07 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 31673 invoked from network); 3 Nov 2008 17:40:02 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 3 Nov 2008 17:40:02 -0000
Received: (qmail 16471 invoked by alias); 3 Nov 2008 17:39:56 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25998
Received: (qmail 16456 invoked from network); 3 Nov 2008 17:39:55 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 3 Nov 2008 17:39:55 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id D668B80524C0
	for <zsh-workers@sunsite.dk>; Mon,  3 Nov 2008 18:39:51 +0100 (CET)
Received: from rly27g.srv.mailcontrol.com (localhost.localdomain [127.0.0.1])
	by rly27g.srv.mailcontrol.com (MailControl) with ESMTP id mA3HdgNF011253
	for <zsh-workers@sunsite.dk>; Mon, 3 Nov 2008 17:39:49 GMT
Received: from submission.mailcontrol.com (submission.mailcontrol.com [86.111.216.190])
	by rly27g.srv.mailcontrol.com (MailControl) id mA3HdcYF010456
	for zsh-workers@sunsite.dk; Mon, 3 Nov 2008 17:39:38 GMT
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly27g-eth0.srv.mailcontrol.com (envelope-sender Peter.Stephenson@csr.com) (MIMEDefang) with ESMTP id mA3Hdb6T010130; Mon, 03 Nov 2008 17:39:38 +0000 (GMT)
Received: from news01.csr.com ([10.103.143.38]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 3 Nov 2008 17:39:37 +0000
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id mA3HdbIt017576;
	Mon, 3 Nov 2008 17:39:37 GMT
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id mA3HdbGV017572;
	Mon, 3 Nov 2008 17:39:37 GMT
Message-Id: <200811031739.mA3HdbGV017572@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: Matthieu Louvel de Monceaux <glory69@gmail.com>
cc: zsh-workers@sunsite.dk
Subject: Re: Weird Vi-mode behavior
In-reply-to: <490F3638.4000706@gmail.com>
References: <490EED78.8010802@gmail.com> <200811031237.mA3Cb2VS013961@news01.csr.com> <20081103125609.GA4855@sc.homeunix.net> <490F3638.4000706@gmail.com>
Comments: In-reply-to Matthieu Louvel de Monceaux <glory69@gmail.com>
   message dated "Mon, 03 Nov 2008 18:34:48 +0100."
Date: Mon, 03 Nov 2008 17:39:37 +0000
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 03 Nov 2008 17:39:37.0475 (UTC) FILETIME=[2468CD30:01C93DDB]
X-Scanned-By: MailControl A-08-50-15 (www.mailcontrol.com) on 10.71.1.137
X-Virus-Scanned: ClamAV 0.92.1/8559/Mon Nov  3 17:41:26 2008 on bifrost
X-Virus-Status: Clean

Matthieu Louvel de Monceaux wrote:
> Stephane Chazelas wrote:
> Thank you for your nice piece of information.
> You want me to put those bindings in my zshrc file ?
> 
> But i don't understand that :
> 
> (($+terminfo[kdch1])) &&
> 
> You said that it maps delete-char to the char sent by the delete key.
> Is it the role of the '&&' ?

That's not the important bit, which is the "bindkey" statement.
Stephane's suggestion checks if there is information about what
the "delete" key outputs, and if there is, it rebinds that.  Assuming
you're using ^h or ^? for backward delete, the two key lines are the

  bindkey -M viins '^?' backward-delete-char
  bindkey -M viins '^H' backward-delete-char

The test above those attempts to see which of the two possibilities the
"backspace" key is sending.  Typically, the two lines above will be
fine.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


From zsh-workers-return-16327-mason-zsh=primenet.com.au@sunsite.dk Tue Dec 11 20:39:56 2001
Return-Path: <zsh-workers-return-16327-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18284 invoked from network); 11 Dec 2001 20:39:56 -0000
Received: from ns2.primenet.com.au (HELO primenet.com.au) (?PmqhrmOPKGOG8tgnzHsDj0/2ThZwbqD6?@203.24.36.3)
  by ns1.primenet.com.au with SMTP; 11 Dec 2001 20:39:56 -0000
Received: (qmail 3570 invoked from network); 11 Dec 2001 20:39:54 -0000
Received: from sunsite.dk (130.225.247.90)
  by proxy.melb.primenet.com.au with SMTP; 11 Dec 2001 20:39:54 -0000
Received: (qmail 9563 invoked by alias); 11 Dec 2001 20:39:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16327
Received: (qmail 9550 invoked from network); 11 Dec 2001 20:39:47 -0000
Date: Tue, 11 Dec 2001 15:39:45 -0500
From: Clint Adams <clint@zsh.org>
To: zsh-workers@sunsite.dk
Subject: PATCH: _dpkg with udebs
Message-ID: <20011211203945.GA7465@dman.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.3.24i

dpkg can handle .udebs as well.  Maybe styles should be involved here.

Index: Completion/Debian/Command/_dpkg
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Debian/Command/_dpkg,v
retrieving revision 1.3
diff -u -r1.3 _dpkg
--- Completion/Debian/Command/_dpkg	2001/05/29 12:39:31	1.3
+++ Completion/Debian/Command/_dpkg	2001/12/11 20:36:25
@@ -7,19 +7,19 @@
 
 _dpkg_deb_actions=('(--build)-b[build archive]:directory:_files -/' \
            '(-b)--build:directory:_files -/' \
-           '(--contents)-c[list contents]:Debian package:_files -g \*.deb' \
-           '(-c)--contents:Debian package:_files -g \*.deb' \
-           '(--info)-I[show info]:Debian package:_files -g \*.deb' \
-           '(-I)--info:Debian package:_files -g \*.deb' \
-           '(--field)-f[show fields]:Debian package:_files -g \*.deb' \
-           '(-f)--field:Debian package:_files -g \*.deb' \
-           '(--control)-e[extract control]:Debian package:_files -g \*.deb' \
-           '(-e)--control:Debian package:_files -g \*.deb' \
-           '(--extract)-x[extract files]:Debian package:_files -g \*.deb' \
-           '(-x)--extract:Debian package:_files -g \*.deb' \
-           '(--vextract)-X[extract and list files]:Debian package:_files -g \*.deb' \
-           '(-X)--vextract[extract and list]:Debian package:_files -g \*.deb' \
-           '--fsys-tarfile[output fs tarfile]:Debian package:_files -g \*.deb')
+           '(--contents)-c[list contents]:Debian package:_files -g \*.u\#deb' \
+           '(-c)--contents:Debian package:_files -g \*.u\#deb' \
+           '(--info)-I[show info]:Debian package:_files -g \*.u\#deb' \
+           '(-I)--info:Debian package:_files -g \*.u\#deb' \
+           '(--field)-f[show fields]:Debian package:_files -g \*.u\#deb' \
+           '(-f)--field:Debian package:_files -g \*.u\#deb' \
+           '(--control)-e[extract control]:Debian package:_files -g \*.u\#deb' \
+           '(-e)--control:Debian package:_files -g \*.u\#deb' \
+           '(--extract)-x[extract files]:Debian package:_files -g \*.u\#deb' \
+           '(-x)--extract:Debian package:_files -g \*.u\#deb' \
+           '(--vextract)-X[extract and list files]:Debian package:_files -g \*.u\#deb' \
+           '(-X)--vextract[extract and list]:Debian package:_files -g \*.u\#deb' \
+           '--fsys-tarfile[output fs tarfile]:Debian package:_files -g \*.u\#deb')
 
 _dpkg_common_actions=('--help[show help]' \
            '--version[show version]' \
@@ -28,7 +28,7 @@
 
 _dpkg_actions=('(--install)-i[install packages]:*:Debian packages:->install' \
            '(-i)--install:*:Debian packages:->install' \
-           '--unpack[unpack package]:Debian package:_files -g \*.deb' \
+           '--unpack[unpack package]:Debian package:_files -g \*.u\#deb' \
            '--configure:*:package:->configure' \
            '(--remove)-r[remove package]:*:package:->remove' \
            '(-r)--remove:*:package:->remove' \
@@ -115,7 +115,7 @@
              "$_dpkg_options_recursive[@]" \
 	     '*:directory:_path_files -/' \
 	   - nonrecur \
-	     '*:Debian package:_path_files -g \*.deb'
+	     '*:Debian package:_path_files -g \*.u\#deb'
   ;;
   remove|purge|status|listfiles)
         _call_function ret _dpkg_$state && return ret


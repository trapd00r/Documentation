From zsh-workers-return-28669-mason-zsh=primenet.com.au@zsh.org Sat Jan 29 22:16:34 2011
Return-Path: <zsh-workers-return-28669-mason-zsh=primenet.com.au@zsh.org>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 18311 invoked by alias); 29 Jan 2011 22:16:34 -0000
Mailing-List: contact zsh-workers-help@zsh.org; run by ezmlm
Precedence: bulk
X-No-Archive: yes
List-Id: Zsh Workers List <zsh-workers.zsh.org>
List-Post: <mailto:zsh-workers@zsh.org>
List-Help: <mailto:zsh-workers-help@zsh.org>
Delivered-To: mailing list zsh-workers@zsh.org
X-Seq: 28669
Received: (qmail 26282 invoked from network); 29 Jan 2011 22:16:32 -0000
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,RCVD_IN_DNSWL_NONE
	autolearn=ham version=3.3.1
Received-SPF: pass (ns1.primenet.com.au: SPF record at ntlworld.com designates 81.103.221.47 as permitted sender)
Message-Id: <201101292216.p0TMGPm2003261@pws-pc.ntlworld.com>
From: Peter Stephenson <p.w.stephenson@ntlworld.com>
To: zsh-workers@zsh.org
Subject: Re: coredump completing scp
In-Reply-To: Message from Vin Shelton <acs@alumni.princeton.edu>
   of "Fri, 28 Jan 2011 20:42:17 EST." <AANLkTikaArDyk7seZO_uy7=E=OyA9uwWkqeC_EO9AYZZ@mail.gmail.com>
Date: Sat, 29 Jan 2011 22:16:25 +0000
X-Cloudmark-Analysis: v=1.1 cv=JvdXmxIgLJv2/GthKqHpGJEEHukvLcvELVXUanXFreg= c=1 sm=0 a=NLZqzBF-AAAA:8 a=R5eQq0ONwPVqO8bSNYoA:9 a=Rn1Zx5QOWNpXcaf6Dc6UzMNs8c8A:4 a=_dQi-Dcv4p4A:10 a=HpAAvcLHHh0Zw7uRqdWCyQ==:117

Vin Shelton wrote:
> > If you have valgrind, running "valgrind zsh -f" might be useful.  (I
> > don't think you'd need any of the options to look for leaked memory
> > for something like this.)
> 
> Thanks for the suggestion.  Here's the report from valgrind.  The call
> to setpwent is made from fillnameddirtable in hahstable.c.  I don't
> really know what else to make of this, though.

Me neither, I'm afraid.  It certainly *looks* like an error within
setpwent itself, though that doesn't necesarily mean it is.  As valgrind
is claiming the memory wasn't malloc'd at all it doesn't give us much of
a lead.

-- 
Peter Stephenson <p.w.stephenson@ntlworld.com>
Web page now at http://homepage.ntlworld.com/p.w.stephenson/


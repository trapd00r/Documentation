From zsh-workers-return-11953-mason-zsh=primenet.com.au@sunsite.auc.dk Fri Jun 16 17:37:57 2000
Return-Path: <zsh-workers-return-11953-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 8342 invoked from network); 16 Jun 2000 17:37:56 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Jun 2000 17:37:56 -0000
Received: (qmail 21339 invoked by alias); 16 Jun 2000 17:37:49 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 11953
Received: (qmail 21312 invoked from network); 16 Jun 2000 17:37:47 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1000616173742.ZM4489@candle.brasslantern.com>
Date: Fri, 16 Jun 2000 17:37:42 +0000
In-Reply-To: <200006160750.JAA12736@beta.informatik.hu-berlin.de>
Comments: In reply to Sven Wischnowsky <wischnow@informatik.hu-berlin.de>
        "PATCH: Re: _expand doesn't do brace expansion?" (Jun 16,  9:50am)
References: <200006160750.JAA12736@beta.informatik.hu-berlin.de>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.auc.dk
Subject: Re: PATCH: Re: _expand doesn't do brace expansion?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Jun 16,  9:50am, Sven Wischnowsky wrote:
} Subject: PATCH: Re: _expand doesn't do brace expansion?
}
} About the `a{b,c}<TAB>': of course this discussion now got me thinking 
} about it again, but this is horrible. There are a few things that I
} never changed in all my work on the completion code from 2.4.xxx
} on. One of them is that the completion code only ever has to work on
} one string. Trying to implement the above would change that and
} currently I don't even know where to place the loop over the possible
} prefixes/suffixes.

My inclination would be not to change the C code for this, but instead
to make the shell code expand the braces, generate completions for each
resulting string separately, and then mash them back together somehow.

Of course the "mash them back together" is the hard part, but if you
don't try to compute intersections it's just chopping off each of the
different prefixes and sticking on the original (with unexpanded braces)
from the line.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


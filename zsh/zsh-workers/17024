From zsh-workers-return-17024-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 23 09:46:04 2002
Return-Path: <zsh-workers-return-17024-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4728 invoked from network); 23 Apr 2002 09:46:03 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 23 Apr 2002 09:46:03 -0000
Received: (qmail 8535 invoked by alias); 23 Apr 2002 09:45:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 17024
Received: (qmail 8520 invoked from network); 23 Apr 2002 09:45:43 -0000
X-VirusChecked: Checked
Date: Tue, 23 Apr 2002 10:45:13 +0100
From: Oliver Kiddle <okiddle@yahoo.co.uk>
To: zsh-workers@sunsite.dk
Subject: Re: _values does not quote inserted matches
Message-ID: <20020423094513.GA20267@logica.com>
References: <001501c1e77d$6e0a94c0$1fc1f2a3@mow.siemens.ru> <1020419165448.ZM15149@candle.brasslantern.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1020419165448.ZM15149@candle.brasslantern.com>
User-Agent: Mutt/1.3.28i
Sender: Oliver Kiddle <kiddleo@logica.com>

Andrej wrote:
> 
> Here is updated version. It relies on recent _values fixes. The
> completion is correct for Mandrake 8.2. If you say O.K it will go in
> both head and 4.0.

Are the recent _values fixes going on the 4.0 branch then? I'd say that
was questionable without first checking through _values calls for
quoted strings. Presumably _urpmi can be adjusted for the old _values
fairly easily so if Andrej is happy that it works on each branch, it
gets my okay.

> I'd like to use common with _rpm cache and functions to get list of
> installed RPMs, but _rpm is one large function and I am reluctant to
> split it (I remember somebody was against it, but forgot reasons).

I can't think of any reason why not. It is very similar to the Debian
situation where we have an _deb_packages used by both _dpkg and _apt.
Maybe the reasons against splitting _rpm before was based on rpm being
the only command to complete rpm packages.

Bart wrote:
> Somebody other than me (Peter?  Oliver?  Sven?) should give the OK.

Well I haven't been able to test the _values calling part as it gets
its arguments by parsing urpmi.cfg which I don't have.

Looking over the rest it looks fine. The one thing I see that I would
do differently is to have a single tags loop in _urpmi_rpms instead
of the three consecutive _wanted calls. It also adds source and
binary rpms separately which means that directories get added twice.
I think it'd be better to add them together - a user can always
separate them with a file-patterns style.

Oliver
-- 

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


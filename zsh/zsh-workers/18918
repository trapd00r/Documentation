From zsh-workers-return-18918-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 31 21:33:41 2003
Return-Path: <zsh-workers-return-18918-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 19521 invoked from network); 31 Jul 2003 21:33:40 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 31 Jul 2003 21:33:40 -0000
Received: (qmail 3517 invoked by alias); 31 Jul 2003 21:33:34 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 18918
Received: (qmail 3507 invoked from network); 31 Jul 2003 21:33:34 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 31 Jul 2003 21:33:34 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [213.46.243.22] by sunsite.dk (MessageWall 1.0.8) with SMTP; 31 Jul 2003 21:33:34 -0000
Received: from s.hn.org ([80.111.3.215]) by amsfep14-int.chello.nl
          (InterMail vM.5.01.05.17 201-253-122-126-117-20021021) with SMTP
          id <20030731213333.NKFN17933.amsfep14-int.chello.nl@s.hn.org>
          for <zsh-workers@sunsite.dk>; Thu, 31 Jul 2003 23:33:33 +0200
Received: (qmail 4960 invoked by uid 1000); 31 Jul 2003 21:33:33 -0000
Date: Thu, 31 Jul 2003 23:33:33 +0200
From: Haakon Riiser <haakon.riiser@fys.uio.no>
To: zsh-workers@sunsite.dk
Subject: Re: Segfault in completion code
Message-ID: <20030731213333.GA27420@s.chello.no>
Mail-Followup-To: zsh-workers@sunsite.dk
References: <20030727014210.GA11368@s.chello.no> <20030731203319.86ACF8548@pwstephenson.fsnet.co.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20030731203319.86ACF8548@pwstephenson.fsnet.co.uk>
User-Agent: Mutt/1.4.1i

[Peter Stephenson]

> This fixes a problem, is it the one you came across?
[patch deleted]

I applied your patch to zsh 4.1.1, and now it doesn't segfault
anymore.  Thanks! :-)

But, there are still problems when SH_WORD_SPLIT is set.  Here's an
example that should not depend on my local zsh configuration
(assuming that "zsh -f" only tries to load /etc/zshenv, which
does not exist on my system):

  % /path/to/patched/zsh -f
  % unset IFS
  % setopt SH_WORD_SPLIT
  % autoload -U compinit
  % compinit
  % <press completion key>
  (eval):setopt:1: no such option: globbareglobqualnullglobrcexpand\
  paramextendedglobunsetNO_markdirsNO_globsubstNO_shwordsplitNO_shglob\
  NO_kshglobNO_ksharraysNO_cshnullglobNO_allexportNO_aliasesNO_errexit\
  NO_octalzeroes

(I reformatted the last line for readability.)

-- 
 Haakon


From zsh-users-return-14248-mason-zsh=primenet.com.au@sunsite.dk Thu Jul 23 16:44:22 2009
Return-Path: <zsh-users-return-14248-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10329 invoked from network); 23 Jul 2009 16:44:18 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 23 Jul 2009 16:44:18 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 77520 invoked from network); 23 Jul 2009 16:44:04 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Jul 2009 16:44:04 -0000
Received: (qmail 17833 invoked by alias); 23 Jul 2009 16:43:28 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14248
Received: (qmail 17816 invoked from network); 23 Jul 2009 16:43:27 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 23 Jul 2009 16:43:27 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 977078027106
	for <zsh-users@sunsite.dk>; Thu, 23 Jul 2009 18:43:21 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly19g.srv.mailcontrol.com (MailControl) with ESMTP id n6NGflYj021146
	for <zsh-users@sunsite.dk>; Thu, 23 Jul 2009 17:43:10 +0100
Received: from news01.csr.com ([10.99.50.25]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 23 Jul 2009 17:40:00 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id n6NGe0lB014974
	for <zsh-users@sunsite.dk>; Thu, 23 Jul 2009 17:40:00 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id n6NGdxpE014970
	for <zsh-users@sunsite.dk>; Thu, 23 Jul 2009 17:40:00 +0100
Message-Id: <200907231640.n6NGdxpE014970@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: next-word vs. next-word-segment?
In-reply-to: <4A688C41.6070103@jay.fm>
References: <4A688C41.6070103@jay.fm>
Comments: In-reply-to Jay Levitt <lists-zsh-users@jay.fm>
   message dated "Thu, 23 Jul 2009 12:13:53 -0400."
Date: Thu, 23 Jul 2009 17:39:59 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 23 Jul 2009 16:40:00.0881 (UTC) FILETIME=[38D25E10:01CA0BB4]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-09-20-00 (www.mailcontrol.com) on 10.71.0.129
X-Virus-Scanned: ClamAV 0.94.2/9608/Thu Jul 23 12:39:50 2009 on bifrost
X-Virus-Status: Clean

Jay Levitt wrote:
> TextMate on the Mac has a handy feature: you can jump to the next word
> as always, with option-right-arrow, but you can also jump to the next
> word segment (CamelCase, under_score, hyphen-ated) with
> control-right-arrow. This solves the age old "which word boundaries do I
> care about more?" problem.
>
> Is there a way to do something like this easily in zsh?  I'm on 4.3.6
> (but could upgrade to 4.3.10 if needed).

I can't remember if you need to upgrade to get this (I think you
probably do); check the zshcontrib manual to see if it mentions the
subword-range style, if not your zsh is too old.

The easiest way to get this behaviour is to intercept the normal
backward- and forward-word commands:

  autoload -U select-word-style
  select-word-style normal
  WORDCHARS='*?.[]~=/&;!#$%^(){}<>'
  select-word-style Normal

The capital "N" is important.  You can tweak WORDCHARS if you like, I've
simply removed "-" and "_".

You can also do this entirely with styles for particular functions, so
that it doesn't affect the default behaviour, but that's a little more
involved.  The following worked for me:


# Acquire the functions provided with the shell
autoload -U forward-word-match backward-word-match
# Turn them into widgets with sensible names
zle -N forward-subword forward-word-match
zle -N backward-subword backward-word-match

# Make them have standard word behaviour, except with subwords active
zstyle ':zle:*-subword*' word-style normal-subword
# Set the characters which can be in words (exclude "-" and "_")
zstyle ':zle:*-subword*' word-chars '*?.[]~=/&;!#$%^(){}<>'

# Bind the keys.
# These are on my X server, MacOS is almost certainly different
# control forward-arrow
bindkey '\e[1;5C' forward-subword
# control back-arrow
bindkey '\e[1;5D' backward-subword


--
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK


'member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom'


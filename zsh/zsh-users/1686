From zsh-workers-request@math.gatech.edu Fri Jul 24 23:54:22 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1905 invoked from network); 24 Jul 1998 23:54:21 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 24 Jul 1998 23:54:21 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id TAA01359;
	Fri, 24 Jul 1998 19:45:19 -0400 (EDT)
Resent-Date: Fri, 24 Jul 1998 19:40:30 -0400 (EDT)
Date: Fri, 24 Jul 1998 19:42:35 -0400 (EDT)
From: Todd Graham Lewis <tlewis@mindspring.net>
X-Sender: tlewis@reflections.eng.mindspring.net
To: Bart Schaefer <schaefer@brasslantern.com>
cc: zsh-users@math.gatech.edu
Subject: Re: rolling over high-traffic logfiles?
In-Reply-To: <980716082633.ZM15563@candle.brasslantern.com>
Message-ID: <Pine.LNX.3.96.980724194149.9246P-100000@reflections.eng.mindspring.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Resent-Message-ID: <"dYmE12.0.zI.jjHkr"@math>
Resent-From: zsh-users@math.gatech.edu
X-Mailing-List: <zsh-users@math.gatech.edu> archive/latest/1686
X-Loop: zsh-users@math.gatech.edu
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

On Thu, 16 Jul 1998, Bart Schaefer wrote:

> On Jul 16,  9:36am, Zefram wrote:
> } Subject: Re: rolling over high-traffic logfiles?
> }
> } mv should use rename() to atomically replace the log file, in which case
> } there is no race condition.
> 
> Fair enough.  There are two or more filesystem operations necessary even
> if only only system call, but I suppose that's only a possible problem
> on a multiprocessor system.

This is why kernel locking is such a big issue in SMP.  The semantics don't
change; rename() is always atomic under Unix.

--
Todd Graham Lewis                                     (800) 719-4664, x2804
******Linux******         MindSpring Enterprises      tlewis@mindspring.net


From zsh-workers-request@math.gatech.edu Mon Oct 19 03:35:28 1998
Return-Path: <zsh-workers-request@math.gatech.edu>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 15716 invoked from network); 19 Oct 1998 03:35:27 -0000
Received: from math.gatech.edu (list@130.207.146.50)
  by ns1.primenet.com.au with SMTP; 19 Oct 1998 03:35:27 -0000
Received: (from list@localhost)
	by math.gatech.edu (8.9.1/8.9.1) id XAA21011;
	Sun, 18 Oct 1998 23:19:38 -0400 (EDT)
Resent-Date: Sun, 18 Oct 1998 23:19:38 -0400 (EDT)
From: Phil Pennock <phil@athenaeum.demon.co.uk>
Message-Id: <199810182327.AAA00825@athenaeum.demon.co.uk>
Subject: zsh exit status
To: zsh-workers@math.gatech.edu
Date: Mon, 19 Oct 1998 00:27:11 +0100 (BST)
X-Disclaimer-1: Any views expressed in this message, where not explicitly
X-Disclaimer-2: attributed otherwise, are mine and mine alone.  Such views
X-Disclaimer-3: do not necessarily coincide with those of any organisation
X-Disclaimer-4: or company with which I am or have been affiliated.
X-Personality: INTJ
X-Mailer: ELM [version 2.4ME+ PL37 (25)]
MIME-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"m09WT1.0.E85.A_gAs"@math>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/4436
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

I should now be subscribed to this list.  Hopefully.  With a following
wind and stuff ...

When zsh exits, it returns the exit code of the last process to exit.
Which is correct.  However, when the last process exited on a signal, it
returns the full status back.
zsh% zsh
[2]zsh% sleep 5
^C
[2]{SIGINT}zsh% ^D
{SIGINT}zsh% print $ZSH_VERSION
3.1.4
zsh% 

How valid is this?  Is this an ambiguous area?  Personally, if a
process exits with a signal status, I expect the signal to have been in
that process.  Should zsh be passing the exit status no matter the
value, or should it map signals to some other value?

I've checked, and both bash and pdksh also pass this unchanged.  Is
this behaviour mandated by any standards?

Thanks.  (Checking the other shells has just reminded me that only zsh
seems to be the only shell with a ternary operator for prompts, let
alone a way of cleanly mapping exit statuses to signal names.  Sometimes
the best things are the ones you just come to depend on so much that you
forget how unusual they are.)
-- 
--> Phil Pennock ; GAT d- s+:+ a22 C++(++++) UL++++/I+++/S+++/H+ P++@ L+++
E-@ W(+) N>++ o !K w--- O>+ M V !PS PE Y+ PGP+ t-- 5++ X+ R !tv b++>+++ DI+ D+
G+ e+ h* !r y?


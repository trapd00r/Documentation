From zsh-workers-request@euclid.skiles.gatech.edu Tue Dec 24 11:25:37 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 6352 invoked from network); 24 Dec 1996 11:25:36 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 24 Dec 1996 11:25:36 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id GAA01487; Tue, 24 Dec 1996 06:26:29 -0500 (EST)
Resent-Date: Tue, 24 Dec 1996 06:26:29 -0500 (EST)
From: Zefram <zefram@dcs.warwick.ac.uk>
Message-Id: <23458.199612241127@stone.dcs.warwick.ac.uk>
Subject: zmodload -L bugfix
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Tue, 24 Dec 1996 11:27:32 +0000 (GMT)
X-Patch: 153
X-Loop: zefram@dcs.warwick.ac.uk
X-Stardate: [-31]8622.38
X-US-Congress: Moronic fuckers
Content-Type: text
Resent-Message-ID: <"ej20G.0.AN.btxlo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2626
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

-----BEGIN PGP SIGNED MESSAGE-----

Oops, my zmodload -L code didn't handle module names starting with
`-' correctly.

 -zefram

      *** Src/module.c	1996/12/23 02:25:49	1.15
      --- Src/module.c	1996/12/24 00:10:01
      ***************
      *** 308,313 ****
      --- 308,315 ----
        	return;
            if(printflags & PRINT_LIST) {
        	fputs("zmodload -a ", stdout);
      + 	if(bn->nam[0] == '-')
      + 	    fputs("-- ", stdout);
        	quotedzputs(bn->nam, stdout);
        	if(strcmp(bn->nam, bn->optstr)) {
        	    putchar(' ');
      ***************
      *** 354,359 ****
      --- 356,363 ----
        
        		    if(ops['L']) {
        			printf("zmodload -d ");
      + 			if(m->nam[0] == '-')
      + 			    fputs("-- ", stdout);
        			quotedzputs(m->nam, stdout);
        		    } else {
        			nicezputs(m->nam, stdout);
      ***************
      *** 371,376 ****
      --- 375,382 ----
        	    } else if (m->handle) {
        		if(ops['L']) {
        		    printf("zmodload ");
      + 		    if(m->nam[0] == '-')
      + 			fputs("-- ", stdout);
        		    quotedzputs(m->nam, stdout);
        		} else
        		    nicezputs(m->nam, stdout);

-----BEGIN PGP SIGNATURE-----
Version: 2.6.2

iQCVAwUBMr865HD/+HJTpU/hAQEhugP/WoUluckpdKNEk0QB4dUhtd6D2OQcULZ9
YeR9T+G8VSW2+R+EZ7115fwVfOKKoYZA0dhcZkEDO7ICC48Nstk+vKJRgxS7N+Yn
xt5tpmTqFeKWhafhWcsZn5Vmrd5437vIXWsvbLE558qijXgRS/q/oeQMyFMN43DL
bxzX/uToIxQ=
=NISa
-----END PGP SIGNATURE-----


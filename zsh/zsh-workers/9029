From zsh-workers-return-9029-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Dec 14 01:45:06 1999
Return-Path: <zsh-workers-return-9029-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 4271 invoked from network); 14 Dec 1999 01:45:05 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Dec 1999 01:45:05 -0000
Received: (qmail 3361 invoked by alias); 14 Dec 1999 01:44:55 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 9029
Received: (qmail 3354 invoked from network); 14 Dec 1999 01:44:54 -0000
Date: Tue, 14 Dec 1999 01:44:53 +0000
From: Adam Spiers <adam@spiers.net>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: 50cd.ztst fails if run from unresolved path
Message-ID: <19991214014453.A13677@thelonious.new.ox.ac.uk>
Reply-To: Adam Spiers <adam@spiers.net>
Mail-Followup-To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre3i
X-URL: http://www.new.ox.ac.uk/~adam/
X-OS: Linux 2.2.12 i686

I just tried `make test' on the latest CVS tree, in a directory
/opt/zsh, which is a symlink to /mnt/hda7/opt/zsh.  50cd.ztst failed,
because the test assumes that $mydir is absolute:

cd Test ; make check
make[1]: Entering directory `/mnt/hda7/opt/zsh/Test'
for f in *.ztst; do \
  ../Src/zsh ztst.zsh $f; \
done
01grammar.ztst: all tests successful.
02alias.ztst: all tests successful.
03quoting.ztst: all tests successful.
*** /tmp/zsh.ztst.out.14109     Tue Dec 14 01:39:01 1999
--- /tmp/zsh.ztst.tout.14109    Tue Dec 14 01:39:01 1999
***************
*** 1,2 ****
! /opt/zsh/Test/cdtst.tmp/real
! /opt/zsh/Test/cdtst.tmp/real
--- 1,2 ----
! /mnt/hda7/opt/zsh/Test/cdtst.tmp/real
! /mnt/hda7/opt/zsh/Test/cdtst.tmp/real
Test 50cd.ztst failed: output differs from expected as shown above for:
 setopt chaselinks
 cd cdtst.tmp/sub/fake &&
 pwd &&
 print $PWD
Was testing: Resolving symbolic links with chaselinks set
50cd.ztst: test failed.
make[1]: *** [check] Error 1
make[1]: Leaving directory `/mnt/hda7/opt/zsh/Test'
make: *** [test] Error 2


From zsh-users-return-2160-mason-zsh=primenet.com.au@sunsite.auc.dk Tue Feb 16 00:17:08 1999
Return-Path: <zsh-users-return-2160-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 25510 invoked from network); 16 Feb 1999 00:17:07 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 16 Feb 1999 00:17:07 -0000
Received: (qmail 5474 invoked by alias); 16 Feb 1999 00:16:02 -0000
Mailing-List: contact zsh-users-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.auc.dk
X-Seq: 2160
Received: (qmail 5465 invoked from network); 16 Feb 1999 00:15:59 -0000
Date: Mon, 15 Feb 1999 19:15:09 -0500
From: Sweth Chandramouli <sweth@astaroth.nit.gwu.edu>
To: ZSH Users <zsh-users@sunsite.auc.dk>
Subject: making sudo work with functions/builtins
Message-ID: <19990215191509.A28737@astaroth.nit.gwu.edu>
Mail-Followup-To: ZSH Users <zsh-users@sunsite.auc.dk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.95i

	a while ago, someone asked about how to deal with the following 
sort of situation:

% alias mv='nocorrect mv'
% alias sudo='sudo '
% sudo mv foo bar
sudo: nocorrect: command not found

	from what i can tell, this happens because sudo requires that its 
first argument be an actual command, and not a builtin or a function; 
adding the space after sudo in the alias makes expansion take place on cp,
so that what sudo sees as the first arg is 'nocorrect'.  i just had a
little brainstorm about how to get around this:

% alias mv='nocorrect mv'
% ls
cmd foo
% alias sudo='sudo cmd '
% cat cmd
#!/bin/sh
eval $SHELL -c \"$@\"
% sudo mv foo bar
% ls
bar cmd
%

	my question is twofold--is there a more efficient way to do
this, and can anyone see a situation where this would break something
that would otherwise work?

	-- sweth.

-- 
Sweth Chandramouli
IS Coordinator, The George Washington University
<sweth@gwu.edu> / (202) 994 - 8521 (V) / (202) 994 - 0458 (F)
<a href="http://astaroth.nit.gwu.edu/~sweth/disc.html">*</a>


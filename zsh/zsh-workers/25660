From zsh-workers-return-25660-mason-zsh=primenet.com.au@sunsite.dk Sat Sep 13 16:28:29 2008
Return-Path: <zsh-workers-return-25660-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1460 invoked from network); 13 Sep 2008 16:28:27 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 13 Sep 2008 16:28:27 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 90519 invoked from network); 13 Sep 2008 16:28:01 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 13 Sep 2008 16:28:01 -0000
Received: (qmail 5919 invoked by alias); 13 Sep 2008 16:27:52 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 25660
Received: (qmail 5901 invoked from network); 13 Sep 2008 16:27:50 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 13 Sep 2008 16:27:50 -0000
Received: from nf-out-0910.google.com (nf-out-0910.google.com [64.233.182.186])
	by bifrost.dotsrc.org (Postfix) with ESMTP id 5FEE0802710A
	for <zsh-workers@sunsite.dk>; Sat, 13 Sep 2008 18:27:44 +0200 (CEST)
Received: by nf-out-0910.google.com with SMTP id g13so757724nfb.11
        for <zsh-workers@sunsite.dk>; Sat, 13 Sep 2008 09:27:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:user-agent
         :mime-version:to:subject:references:in-reply-to:content-type
         :content-transfer-encoding:from;
        bh=F17zSpNFxRpJpYrgIS1D50+9JxQKVjKg2X75FtiBrv4=;
        b=SfAVS5YmuJPNYoAkG68nODhetpJYkFMsfZHt8ebOWN9cPnTvlQbXI8u9fRFok8oxBA
         LULUrEiJHYbXWG8gfdiOZTbAiwCRYlz0iqSpCZIe3MADBdTSOyyz93ZlyLsi53RUDvex
         p/sCI3yCq4UiRYMyTYp6pns7tVYgHMkpGvpmw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=message-id:date:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding:from;
        b=AjdpRG91a7A04yDbEhfF2X9kJ/ePFKj8n2dnKrMp1Qcl5gD0lvGospjCPdYqJl2nJx
         8pQIIaOyyg6BHzhQDsVG5vYAHzYG09saYj/MMRiCsGiJLu6jnsu7PhyatuXBoI4aAqN3
         kNSFvGqtSGk7y8q2firvQ4SCtNwnMUxi9pvQs=
Received: by 10.103.228.12 with SMTP id f12mr3987877mur.28.1221323264633;
        Sat, 13 Sep 2008 09:27:44 -0700 (PDT)
Received: from ?192.168.1.3? ( [87.123.210.167])
        by mx.google.com with ESMTPS id e8sm6824152muf.6.2008.09.13.09.27.43
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 13 Sep 2008 09:27:43 -0700 (PDT)
Message-ID: <48CBEA04.1040107@gmail.com>
Date: Sat, 13 Sep 2008 18:27:48 +0200
User-Agent: Thunderbird 2.0.0.16 (X11/20080811)
MIME-Version: 1.0
To: zsh-workers@sunsite.dk
Subject: Re: [PATCH] completion for opensolaris IPS package manager
References: <48CBDA72.8090105@gmail.com> <20080913155818.GH21904@lorien.comfychair.org>
In-Reply-To: <20080913155818.GH21904@lorien.comfychair.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
From: =?ISO-8859-1?Q?=22xRaich=5Bo=5D=B2x=22?= <raichoo@googlemail.com>
X-Virus-Scanned: ClamAV 0.92.1/8231/Sat Sep 13 17:51:44 2008 on bifrost
X-Virus-Status: Clean

Danek Duvall wrote:
> On Sat, Sep 13, 2008 at 05:21:22PM +0200, "xRaich[o]²x" wrote:
>
>   
>> I started working on some scripts for opensolaris commands (zpool, zfs, beadm 
>> and more are in the works).
>>     
>
> Completion functions for zpool and zfs are already in the zsh distribution,
> and part of opensolaris (as of build 96), so there's no need to rewrite
> those (though perhaps they need enhancement).
>
>   
>> #compdef pkg
>>     
>
> You keep looking at files under /var/pkg.  These are private interfaces
> which could change at any time.  You'd be better off using "pkg list" to
> get this information, though you'll probably need to stick the information
> in a cache.
>
> Also, "search" doesn't take package names, so it doesn't belong in the same
> clause as info and contents.
>
> Thanks!
>
> Danek
>
>   

I didn't use pkg info because its very slow. i know there is a cache 
function in zsh completion somewhere but this is actually the first 
shellscript i ever really wrote ^^.

Thanks for the pointer with zfs und zpool, didn't know that.

Regards,
Björn


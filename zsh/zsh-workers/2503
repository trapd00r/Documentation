From zsh-workers-request@euclid.skiles.gatech.edu Sun Dec 01 13:19:00 1996
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 16253 invoked from network); 1 Dec 1996 13:18:58 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 1 Dec 1996 13:18:58 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA05013; Sun, 1 Dec 1996 08:00:52 -0500 (EST)
Resent-Date: Sun, 1 Dec 1996 08:00:52 -0500 (EST)
From: Fung-Chai Lim <fclim@singnet.com.sg>
Message-Id: <9612011255.AA00439@fclim.singnet.com.sg>
Subject: Re: Autoloading of compctl from dbm database file.
To: zsh-workers@math.gatech.edu (Z Shell workers mailing list)
Date: Sun, 1 Dec 1996 20:55:18 +0800 (SGT)
In-Reply-To: <961130151728.ZM16366828@srf-75.nbn.com> from "Bart Schaefer" at Nov 30, 96 03:16:26 pm
X-Mailer: ELM [version 2.4 PL22]
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Resent-Message-ID: <"5GGmX3.0.FE1.36Oeo"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2503
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

In <961130151728.ZM16366828@srf-75.nbn.com>
on Sat, 30 Nov 1996 15:16:26 -0800 (PST)
Bart Schaefer <schaefer@nbn.com> writes:

> Seems to me that this idea has "module" written on it, in large flashing
> purple neon letters.

> Compctls aren't very expensive to store either, are they?  The slow
> part of loading compctls and functions is parsing.  If we're going
> to introduce a database, we might as well also introduce a binary
> storage format and put pre-"compiled" functions, compctls, etc. in
> there.  Using a database just to store text that zsh then has to parse
> and execute anyway doesn't seem very helpful.

Then you have to worry about the "binary" database being shared by
systems of different architectures; distributed file systems are
quite ubiquitous.  The database must be portable over networks.

Yeah, with binary databases, I do see purple lights.

> Further -- I admit I haven't tried the patch -- doesn't attempting to
> autoload compctls, even from a database, slow down default completion
> a lot?

I do not notice any degradation, even with "big" compctl like the
one for `find'.  Remember, only one compctl is parsed at a time
with autoloading, unlike in startup files.

Regards,
fclim.


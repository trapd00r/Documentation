From shelton@icd.teradyne.com Wed Jul 10 22:31:46 1996
Received: from euclid.skiles.gatech.edu (list@euclid.skiles.gatech.edu [130.207.146.50]) by melb.werple.net.au (8.7.5/8.7.3/2) with ESMTP id WAA04031 for <mason@werple.mira.net.au>; Wed, 10 Jul 1996 22:31:43 +1000 (EST)
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA02436; Wed, 10 Jul 1996 08:24:09 -0400 (EDT)
Resent-Date: Wed, 10 Jul 1996 08:24:09 -0400 (EDT)
Message-Id: <199607101219.IAA25984@spacely.icd.teradyne.com>
To: Zoltan Hidvegi <hzoli@cs.elte.hu>
cc: pws@ifh.de (Peter Stephenson), zsh-workers@math.gatech.edu
Subject: Re: Bug Report: Env Vars and shell functions 
In-reply-to: hzoli's message of Wed, 10 Jul 1996 04:33:47 +0200.
	     <199607100233.EAA02866@hzoli.ppp.cs.elte.hu> 
reply-to: acs@world.std.com
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Date: Wed, 10 Jul 1996 08:19:34 -0400
From: Vinnie Shelton  <shelton@icd.teradyne.com>
Resent-Message-ID: <"nHdvy1.0.-b.e3wun"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/1597
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu
Content-Length: 636
Status: OR

There's still a bug here; with 3.0-pre2 and only Peter's patch from
article 1573 and Zoltan's fix from article 1596, here's what happens:

: zsh-3.0-pre2/Solaris Wed 10 8:08; env - /pd/osbin/zsh -f
spacely% echo $ZSH_VERSION
3.0-pre2
spacely% function foo {
> echo "Function foo; FOO = $FOO"
> ./x
> }
spacely% cat ./x
#!/pd/osbin/zsh -f
 
print "This is $0; FOO = $FOO"
spacely% foo
Function foo; FOO = 
This is ./x; FOO = 
spacely% FOO=BAR foo
Function foo; FOO = BAR
This is ./x; FOO = BAR

# Okay so far, but...

spacely% foo
Function foo; FOO = 
This is ./x; FOO = BAR

FOO should be unset during the last running of ./x.

--vin




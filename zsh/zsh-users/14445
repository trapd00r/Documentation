From zsh-users-return-14445-mason-zsh=primenet.com.au@sunsite.dk Thu Oct 01 08:39:06 2009
Return-Path: <zsh-users-return-14445-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1957 invoked from network); 1 Oct 2009 08:39:03 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from new-brage.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.254.104)
  by ns1.primenet.com.au with SMTP; 1 Oct 2009 08:39:03 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 88418 invoked from network); 1 Oct 2009 08:38:47 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 1 Oct 2009 08:38:47 -0000
Received: (qmail 19689 invoked by alias); 1 Oct 2009 08:38:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 14445
Received: (qmail 19680 invoked from network); 1 Oct 2009 08:38:36 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 1 Oct 2009 08:38:36 -0000
Received: from cluster-d.mailcontrol.com (cluster-d.mailcontrol.com [85.115.60.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id 0C973801E2BF
	for <zsh-users@sunsite.dk>; Thu,  1 Oct 2009 10:38:29 +0200 (CEST)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly14d.srv.mailcontrol.com (MailControl) with ESMTP id n918cPlB009080
	for <zsh-users@sunsite.dk>; Thu, 1 Oct 2009 09:38:26 +0100
Received: from news01.csr.com ([10.99.50.25]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 1 Oct 2009 09:38:23 +0100
Received: from news01.csr.com (localhost.localdomain [127.0.0.1])
	by news01.csr.com (8.14.2/8.13.4) with ESMTP id n918cMQH025549
	for <zsh-users@sunsite.dk>; Thu, 1 Oct 2009 09:38:22 +0100
Received: from csr.com (pws@localhost)
	by news01.csr.com (8.14.2/8.14.2/Submit) with ESMTP id n918cMiM025545
	for <zsh-users@sunsite.dk>; Thu, 1 Oct 2009 09:38:22 +0100
Message-Id: <200910010838.n918cMiM025545@news01.csr.com>
X-Authentication-Warning: news01.csr.com: pws owned process doing -bs
To: zsh-users@sunsite.dk
Subject: Re: matlab-history-beginning-search-backward
In-reply-to: <20090930205339.7dbad268@pws-pc>
References: <140222.25175.qm@web65614.mail.ac4.yahoo.com> <20090930205339.7dbad268@pws-pc>
Comments: In-reply-to Peter Stephenson <p.w.stephenson@ntlworld.com>
   message dated "Wed, 30 Sep 2009 20:53:39 +0100."
Date: Thu, 01 Oct 2009 09:38:22 +0100
From: Peter Stephenson <pws@csr.com>
X-OriginalArrivalTime: 01 Oct 2009 08:38:23.0171 (UTC) FILETIME=[895C4130:01CA4272]
Content-Type: text/plain
MIME-Version: 1.0
X-Scanned-By: MailControl A-06-00-00 (www.mailcontrol.com) on 10.68.0.124
X-Virus-Scanned: ClamAV 0.94.2/9857/Thu Oct  1 04:57:58 2009 on bifrost
X-Virus-Status: Clean

Peter Stephenson wrote:
> I stole a lot of it from
> history-beginning-search-menu.

... and I've just noticed because of that a couple of bits are nonsense ...

> local search=$LBUFFER MATCH MBEGIN MEND

... this assignment is redundant ...

> # Filter out any match that's the same as the original.
> # Note this isn't a pattern this time.
> matches=(${matches:#${LBUFFER}})

... more importantly, because in this case $matches is an array of
numbers this doesn't do anything (except stop you from matching a
history line whose number happens to match the string to the left of the
cursor).  This filter would need to be moved up to where the matching is
originally done.  It's minor, though.

-- 
Peter Stephenson <pws@csr.com>            Software Engineer
Tel: +44 (0)1223 692070                   Cambridge Silicon Radio Limited
Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, UK




Member of the CSR plc group of companies. CSR plc registered in England and Wales, registered number 4187346, registered office Churchill House, Cambridge Business Park, Cowley Road, Cambridge, CB4 0WZ, United Kingdom


<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Kapitel 7. Git für Fortgeschrittene</title>
  <link rel="stylesheet" href="default.css" type="text/css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.75.2">
  <link rel="home" href="index.html" title=
  "Git Magic = Ben Lynn August 2007">
  <link rel="up" href="index.html" title=
  "Git Magic = Ben Lynn August 2007">
  <link rel="prev" href="ch06.html" title=
  "Kapitel 6. Multiplayer Git">
  <link rel="next" href="ch08.html" title=
  "Kapitel 8. Aufgedeckte Geheimnisse">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Vorwort</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_danke">Danke!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_lizenz">Lizenz</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Einleitung</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_arbeit_ist_spiel">Arbeit ist
            Spiel</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_versionsverwaltung">Versionsverwaltung</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_verteilte_kontrolle">Verteilte
            Kontrolle</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_ein_dummer_aberglaube">Ein dummer
            Aberglaube</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_emphasis_merge_emphasis_konflikte"><span class="emphasis">
            <em>Merge</em></span> Konflikte</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Erste
          Schritte</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_stand_sichern">Stand
            sichern</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_hinzuf_gen_l_schen_umbenennen">Hinzufügen,
            Löschen, Umbenennen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_fortgeschrittenes_r_ckg_ngig_machen_wiederherstellen">
            Fortgeschrittenes Rückgängig
            machen/Wiederherstellen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_r_ckg_ngig_machen">Rückgängig
            machen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_changelog_erstellen">Changelog
            erstellen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_dateien_herunterladen">Dateien
            herunterladen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_das_neueste_vom_neuen">Das Neueste vom
            Neuen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_einfaches_ver_ffentlichen">Einfaches
            Veröffentlichen</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_was_habe_ich_getan">Was habe ich
            getan?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_bung">Übung</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Rund ums
          <span class="emphasis"><em>Clonen</em></span></a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_computer_synchronisieren">Computer
            synchronisieren</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_klassische_quellcodeverwaltung">Klassische
            Quellcodeverwaltung</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_geheime_quellen">Geheime
            Quellen</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_nackte_repositories_emphasis"><span class="emphasis">
            <em>Nackte Repositories</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_push_emphasis_oder_emphasis_pull_emphasis">
            <span class="emphasis"><em>Push</em></span> oder
            <span class=
            "emphasis"><em>Pull</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_emphasis_fork_emphasis_eines_projekts"><span class="emphasis">
            <em>Fork</em></span> eines Projekts</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_ultimative_datensicherung">Ultimative
            Datensicherung</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_multitasking_mit_lichtgeschwindigkeit">Multitasking
            mit Lichtgeschwindigkeit</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_versionsverwaltung_im_untergrund">Versionsverwaltung
            im Untergrund</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_warum_ich_git_benutze">Warum ich Git
            benutze</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. <span class=
          "emphasis"><em>Branch</em></span>-Magie</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_die_chef_taste">Die
            Chef-Taste</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_schmutzarbeit">Schmutzarbeit</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_schnelle_fehlerbehebung">Schnelle
            Fehlerbehebung</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_emphasis_mergen_emphasis"><span class=
            "emphasis"><em>Mergen</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_kontinuierlicher_arbeitsfluss">Kontinuierlicher
            Arbeitsfluss</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_mischmasch_reorganisieren">Mischmasch
            Reorganisieren</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_emphasis_branches_emphasis_verwalten"><span class="emphasis">
            <em>Branches</em></span> verwalten</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_tempor_re_emphasis_branches_emphasis">Temporäre
            <span class=
            "emphasis"><em>Branches</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_arbeite_wie_du_willst">Arbeite wie du
            willst</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5.
          Geschichtsstunde</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_ich_nehme_alles_zur_ck">Ich nehme alles
            zurück</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_und_noch_viel_mehr">… und noch viel
            mehr</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_lokale_nderungen_zum_schlu">Lokale
            Änderungen zum Schluß</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_chronik_umschreiben">Chronik
            umschreiben</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_geschichte_machen">Geschichte
            machen</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_wo_ging_alles_schief">Wo ging alles
            schief?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_wer_ist_verantwortlich">Wer ist
            verantwortlich?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_pers_nliche_erfahrungen">Persönliche
            Erfahrungen</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Multiplayer
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_wer_bin_ich">Wer bin ich?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_ber_ssh_http">Git über SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_ber_alles">Git über
            alles</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_das_globale_zahlungsmittel">Patches:
            Das globale Zahlungsmittel</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_entschuldigung_wir_sind_umgezogen">Entschuldigung,
            wir sind umgezogen.</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_entfernte_emphasis_branches_emphasis">Entfernte
            <span class=
            "emphasis"><em>Branches</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_mehrere_emphasis_remotes_emphasis">Mehrere
            <span class=
            "emphasis"><em>Remotes</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_meine_einstellungen">Meine
            Einstellungen</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Git für
          Fortgeschrittene</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_quellcode_ver_ffentlichen">Quellcode
            veröffentlichen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_emphasis_commite_emphasis_nderungen"><span class="emphasis">
            <em>Commite</em></span> Änderungen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_mein_emphasis_commit_emphasis_ist_zu_gro">Mein
            <span class="emphasis"><em>Commit</em></span> ist zu
            groß!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_der_index_git_8217_s_bereitstellungsraum">Der
            Index: Git’s Bereitstellungsraum</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_verliere_nicht_deinen_kopf">Verliere nicht
            Deinen KOPF</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_kopf_jagd">KOPF-Jagd</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_auf_git_bauen">Auf Git
            bauen</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_gewagte_kunstst_cke">Gewagte
            Kunststücke</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_verhindere_schlechte_emphasis_commits_emphasis">
            Verhindere schlechte <span class=
            "emphasis"><em>Commits</em></span></a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Aufgedeckte
          Geheimnisse</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_unsichtbarkeit">Unsichtbarkeit</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integrit_t">Integrität</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelligenz">Intelligenz</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indizierung">Indizierung</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_git_8217_s_wurzeln">Git’s
            Wurzeln</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_die_objektdatenbank">Die
            Objektdatenbank</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_emphasis_trees_emphasis"><span class=
            "emphasis"><em>Trees</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_emphasis_commits_emphasis"><span class=
            "emphasis"><em>Commits</em></span></a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_von_magie_nicht_zu_unterscheiden">Von Magie
            nicht zu unterscheiden</a></span></li>
          </ul>
        </li>

        <li>
          <span class="appendix"><a href="apa.html">A. Git’s
          Mängel</a></span>

          <ul>
            <li><span class="section"><a href=
            "apa.html#_sha1_schw_che">SHA1 Schwäche</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_dateien_ohne_bezug">Dateien ohne
            Bezug</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_wer_macht_was">Wer macht
            was?</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_dateihistorie">Dateihistorie</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_der_erster_klon">Der erster
            Klon</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_unbest_ndige_projekte">Unbeständige
            Projekte</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_globaler_z_hler">Globaler
            Zähler</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_leere_unterverzeichnisse">Leere
            Unterverzeichnisse</a></span></li>

            <li><span class="section"><a href=
            "apa.html#_initialer_emphasis_commit_emphasis">Initialer
            <span class=
            "emphasis"><em>Commit</em></span></a></span></li>

            <li><span class="section"><a href=
            "apa.html#_eigenarten_der_anwendung">Eigenarten der
            Anwendung</a></span></li>
          </ul>
        </li>

        <li><span class="appendix"><a href="apb.html">B. Diese
        Anleitung übersetzen</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Kapitel 7. Git für Fortgeschrittene">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_git_f_r_fortgeschrittene"></a>Kapitel 7. Git für
          Fortgeschrittene</h2>
        </div>
      </div>
    </div>

    <p>Mittlerweile solltest Du Dich in den <span class=
    "strong"><strong>git help</strong></span> Seiten zurechtfinden
    und das meiste verstanden haben. Trotzdem kann es langwierig
    sein, den exakten Befehl zur Lösung einer bestimmten Aufgabe
    herauszufinden. Vielleicht kann ich Dir etwas Zeit sparen:
    Nachfolgend findest Du ein paar Rezepte, die ich in der
    Vergangenheit gebraucht habe.</p>

    <div class="section" title="Quellcode veröffentlichen">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_quellcode_ver_ffentlichen"></a>Quellcode
            veröffentlichen</h2>
          </div>
        </div>
      </div>

      <p>Bei meinen Projekten verwaltet Git genau die Dateien, die
      ich archivieren und für andere Benutzer veröffentlichen will.
      Um ein tarball-Archiv des Quellcodes zu erzeugen, verwende
      ich den Befehl:</p>
      <pre class="literallayout">
$ git archive --format=tar --prefix=proj-1.2.3/ HEAD
</pre>
    </div>

    <div class="section" title="Commite Änderungen">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_emphasis_commite_emphasis_nderungen"></a><span class=
            "emphasis"><em>Commite</em></span> Änderungen</h2>
          </div>
        </div>
      </div>

      <p>Git mitzuteilen, welche Dateien man hinzugefügt, gelöscht
      und umbenannt hat, ist für manche Projekte sehr mühsam.
      Stattdessen kann man folgendes eingeben:</p>
      <pre class="literallayout">
$ git add .
$ git add -u
</pre>

      <p>Git wird sich die Dateien im aktuellen Verzeichnis ansehen
      und sich die Details selbst erarbeiten. Anstelle des zweiten
      Befehl kann man auch <code class="literal">git commit
      -a</code> ausführen, falls man an dieser Stelle ohnehin
      <span class="emphasis"><em>comitten</em></span> möchte. Siehe
      <span class="strong"><strong>git help ignore</strong></span>
      um zu sehen, wie man Dateien definiert, die ignoriert werden
      sollen.</p>

      <p>Man kann das aber auch in einem einzigen Schritt ausführen
      mit:</p>
      <pre class="literallayout">
$ git ls-files -d -m -o -z | xargs -0 git update-index --add --remove
</pre>

      <p>Die <span class="strong"><strong>-z</strong></span> und
      <span class="strong"><strong>-0</strong></span> Optionen
      verhindern unerwünschte Nebeneffekte durch Dateinamen mit
      ungewöhnlichen Zeichen. Da diese Anweisung aber auch zu
      ignorierende Dateien hinzufügt, kann man noch die
      <code class="literal">-x</code> oder <code class=
      "literal">-X</code> Option hinzufügen.</p>
    </div>

    <div class="section" title="Mein Commit ist zu groß!">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_mein_emphasis_commit_emphasis_ist_zu_gro"></a>Mein
            <span class="emphasis"><em>Commit</em></span> ist zu
            groß!</h2>
          </div>
        </div>
      </div>

      <p>Hast Du es zu lange versäumt zu <span class=
      "emphasis"><em>comitten</em></span>? Hast Du so versessen
      programmiert, daß Du darüber die Quellcodeverwaltung
      vergessen hast? Machst Du eine Serie von unabhängigen
      Änderungen, weil es Dein Stil ist?</p>

      <p>Keine Sorge, gib ein:</p>
      <pre class="literallayout">
$ git add -p
</pre>

      <p>Für jede Änderung, die Du gemacht hast, zeigt Git Dir die
      Codepassagen, die sich geändert haben und fragt ob sie Teil
      des nächsten <span class="emphasis"><em>Commit</em></span>
      sein sollen. Antworte mit "y" für Ja oder "n" für Nein. Du
      hast auch noch andere Optionen, z.B. den Aufschub der
      Entscheidung; drücke "?" um mehr zu erfahren.</p>

      <p>Wenn Du zufrieden bist, gib</p>
      <pre class="literallayout">
$ git commit
</pre>

      <p>ein um exakt die ausgewählten Änderungen zu <span class=
      "emphasis"><em>comitten</em></span> (die "inszenierten"
      Änderungen). Achte darauf, nicht die Option <span class=
      "strong"><strong>-a</strong></span> einzusetzen, anderenfalls
      wird Git alle Änderungen <span class=
      "emphasis"><em>comitten</em></span>.</p>

      <p>Was ist, wenn Du viele Dateien an verschiedenen Orten
      bearbeitet hast? Jede Datei einzeln nachzuprüfen ist
      frustrierend und ermüdend. In diesem Fall verwende
      <span class="strong"><strong>git add -i</strong></span>,
      dessen Bedienung ist nicht ganz einfach, dafür aber sehr
      flexibel. Mit ein paar Tastendrücken kannst Du mehrere
      geänderte Dateien für den <span class=
      "emphasis"><em>Commit</em></span> hinzufügen (<span class=
      "emphasis"><em>stage</em></span>) oder entfernen
      (<span class="emphasis"><em>unstage</em></span>) oder
      Änderungen einzelner Dateien nachprüfen und hinzufügen.
      Alternativ kannst Du <span class="strong"><strong>git commit
      --interactive</strong></span> verwenden, was dann automatisch
      die ausgewählten Änderungen <span class=
      "emphasis"><em>commited</em></span> nachdem Du fertig
      bist.</p>
    </div>

    <div class="section" title=
    "Der Index: Git’s Bereitstellungsraum">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_der_index_git_8217_s_bereitstellungsraum"></a>Der
            Index: Git’s Bereitstellungsraum</h2>
          </div>
        </div>
      </div>

      <p>Bis jetzt haben wir Git’s berühmten <span class=
      "emphasis"><em>Index</em></span> gemieden, aber nun müssen
      wir uns mit ihm auseinandersetzen um das bisherige zu
      erklären. Der Index ist ein temporärer Bereitstellungsraum.
      Git tauscht selten Daten direkt zwischen Deinem Projekt und
      seiner Versionsgeschichte aus. Vielmehr schreibt Git die
      Daten zuerst in den Index, danach kopiert es die Daten aus
      dem Index an ihren eigentlichen Bestimmungsort.</p>

      <p>Zum Beispiel ist <span class="strong"><strong>commit
      -a</strong></span> eigentlich ein zweistufiger Prozess. Der
      erste Schritt erstellt einen Schnappschuß des aktuellen
      Status jeder überwachten Datei im Index. Der zweite Schritt
      speichert dauerhaft den Schnappschuß, der sich nun im Index
      befindet. Ein <span class="emphasis"><em>Commit</em></span>
      ohne die <span class="strong"><strong>-a</strong></span>
      Option führt nur den zweiten Schritt aus und macht nur
      wirklich Sinn, wenn zuvor eine Anweisung angewendet wurde,
      welche den Index verändert, wie zum Beispiel <span class=
      "strong"><strong>git add</strong></span>.</p>

      <p>Normalerweise können wir den Index ignorieren und so tun
      als würden wir direkt aus der Versionsgeschichte lesen oder
      in sie schreiben. In diesem Fall wollen wir aber mehr
      Kontrolle, also manipulieren wir den Index. Wir erstellen
      einen Schnappschuß einiger, aber nicht aller unser Änderungen
      im Index und speichern dann diesen sorgfältig
      zusammengestellten Schnappschuß permanent.</p>
    </div>

    <div class="section" title="Verliere nicht Deinen KOPF">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_verliere_nicht_deinen_kopf"></a>Verliere nicht Deinen
            KOPF</h2>
          </div>
        </div>
      </div>

      <p>Der HEAD Bezeichner ist wie ein Cursor, der normalerweise
      auf den jüngsten <span class=
      "emphasis"><em>Commit</em></span> zeigt und mit jedem neuen
      <span class="emphasis"><em>Commit</em></span> voranschreitet.
      Einige Git Anweisungen lassen Dich ihn manipulieren. Zum
      Beispiel:</p>
      <pre class="literallayout">
$ git reset HEAD~3
</pre>

      <p>bewegt den HEAD Bezeichner drei <span class=
      "emphasis"><em>Commits</em></span> zurück. Dadurch agieren
      nun alle Git Anweisungen als hätte es die drei letzten
      <span class="emphasis"><em>Commits</em></span> nicht gegeben,
      während deine Dateien unverändert erhalten bleiben. Siehe auf
      der Git Hilfeseite für einige Anwendungsbeispiele.</p>

      <p>Aber wie kannst Du zurück in die Zukunft? Die vergangenen
      <span class="emphasis"><em>Commits</em></span> wissen nichts
      von der Zukunft.</p>

      <p>Wenn Du den SHA1 Schlüssel vom originalen HEAD hast,
      dann:</p>
      <pre class="literallayout">
$ git reset 1b6d
</pre>

      <p>Aber stell Dir vor, Du hast ihn niemals notiert? Keine
      Sorge: Für solche Anweisungen sichert Git den original HEAD
      als Bezeichner mit dem Namen ORIG_HEAD und Du kannst gesund
      und munter zurückkehren mit:</p>
      <pre class="literallayout">
$ git reset ORIG_HEAD
</pre>
    </div>

    <div class="section" title="KOPF-Jagd">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_kopf_jagd"></a>KOPF-Jagd</h2>
          </div>
        </div>
      </div>

      <p>Möglicherweise reicht ORIG_HEAD nicht aus. Vielleicht hast
      Du gerade bemerkt, dass Du einen kapitalen Fehler gemacht
      hast und nun musst Du zu einem uralten <span class=
      "emphasis"><em>Commit</em></span> in einem länst vergessenen
      <span class="emphasis"><em>Branch</em></span> zurück.</p>

      <p>Standardmäßig behält Git einen <span class=
      "emphasis"><em>Commit</em></span> für mindesten zwei Wochen,
      sogar wenn Du Git anweist den <span class=
      "emphasis"><em>Branch</em></span> zu zerstören, in dem er
      enthalten ist. Das Problem ist, den entsprechenden SHA1-Wert
      zu finden. Du kannst Dir alle SHA1-Werte in <code class=
      "literal">.git/objects</code> vornehmen und ausprobieren ob
      Du den gesuchten <span class=
      "emphasis"><em>Commit</em></span> findest. Aber es gibt einen
      viel einfacheren Weg.</p>

      <p>Git speichert jeden errechneten SHA1-Wert eines
      <span class="emphasis"><em>Commits</em></span> in
      <code class="literal">.git/logs</code>. Das Unterverzeichnis
      <code class="literal">refs</code> enthält den Verlauf aller
      Aktivitäten auf allen <span class=
      "emphasis"><em>Branches</em></span>, während <code class=
      "literal">HEAD</code> alle SHA1-Werte enthält, die jemals
      diese Bezeichnung hatten. Die letztere kann verwendet werden
      um SHA1-Werte von <span class=
      "emphasis"><em>Commits</em></span> zu finden, die sich in
      einem <span class="emphasis"><em>Branch</em></span> befanden,
      der versehentlich gestutzt wurde.</p>

      <p>Die reflog Anweisung bietet eine benutzerfreundliche
      Schnittstelle zu diesen Logdateien. Versuche</p>
      <pre class="literallayout">
$ git reflog
</pre>

      <p>Anstatt SHA1-Werte aus dem reflog zu kopieren und
      einzufügen, versuche:</p>
      <pre class="literallayout">
$ git checkout "@{10 minutes ago}"
</pre>

      <p>Oder rufe den fünftletzten <span class=
      "emphasis"><em>Commit</em></span> ab, mit:</p>
      <pre class="literallayout">
$ git checkout "@{5}"
</pre>

      <p>Siehe in der “Specifying Revisions” Sektion von
      <span class="strong"><strong>git help
      rev-parse</strong></span> für mehr.</p>

      <p>Vielleicht möchtest Du eine längere Gnadenfrist für
      todgeweihte <span class="emphasis"><em>Commits</em></span>
      konfigurieren. Zum Beispiel:</p>
      <pre class="literallayout">
$ git config gc.pruneexpire "30 days"
</pre>

      <p>bedeutet, ein gelöschter <span class=
      "emphasis"><em>Commit</em></span> wird nur dann endgültig
      verloren sein, nachdem 30 Tage vergangen sind und
      <span class="strong"><strong>git gc</strong></span>
      ausgeführt wurde.</p>

      <p>Du magst vielleicht auch das automatische Ausführen von
      <span class="strong"><strong>git gc</strong></span>
      abstellen:</p>
      <pre class="literallayout">
$ git config gc.auto 0
</pre>

      <p>wodurch <span class="emphasis"><em>Commits</em></span> nur
      noch gelöscht werden, wenn Du <span class=
      "strong"><strong>git gc</strong></span> manuell aufrufst.</p>
    </div>

    <div class="section" title="Auf Git bauen">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_auf_git_bauen"></a>Auf Git
            bauen</h2>
          </div>
        </div>
      </div>

      <p>In echter UNIX Sitte erlaubt es Git’s Design, dass es auf
      einfache Weise als Low-Level-Komponente von anderen
      Programmen benutzt werden kann, wie zum Beispiel grafischen
      Benutzeroberflächen und Internetanwendungen, alternative
      Kommandozeilenanwendungen, Patch-Werkzeugen, Import- und
      Konvertierungswerkzeugen und so weiter. Sogar einige Git
      Anweisungen selbst sind nur winzige Skripte, wie Zwerge auf
      den Schultern von Riesen. Mit ein bisschen Handarbeit kannst
      Du Git anpassen, damit es Deinen Anforderungen
      entspricht.</p>

      <p>Ein einfacher Trick ist es die in Git integrierte
      Aliasfunktion zu verwenden um die am häufigsten benutzten
      Anweisungen zu verkürzen:</p>
      <pre class="literallayout">
$ git config --global alias.co checkout
$ git config --global --get-regexp alias  # display current aliases
alias.co checkout
$ git co foo                              # same as 'git checkout foo'
</pre>

      <p>Etwas anderes ist der aktuelle <span class=
      "emphasis"><em>Branch</em></span> im Prompt oder
      Fenstertitel. Die Anweisung</p>
      <pre class="literallayout">
$ git symbolic-ref HEAD
</pre>

      <p>zeigt den Namen des aktuellen <span class=
      "emphasis"><em>Branch</em></span>. In der Praxis möchtest Du
      aber das "refs/heads/" entfernen und Fehler ignorieren:</p>
      <pre class="literallayout">
$ git symbolic-ref HEAD 2&gt; /dev/null | cut -b 12-
</pre>

      <p>Das <code class="literal">contrib</code> Unterverzeichnis
      ist eine Fundgrube von Werkzeugen, die auf Git aufbauen. Mit
      der Zeit können einige davon zu offiziellen Anweisungen
      befördert werden. Auf Debian und Ubuntu, findet man dieses
      Verzeichnis unter <code class=
      "literal">/usr/share/doc/git-core/contrib</code>.</p>

      <p>Ein beliebter Vertreter ist <code class=
      "literal">workdir/git-new-workdir</code>. Durch cleveres
      verlinken erzeugt dieses Skript ein neues Arbeitsverzeichis,
      das seine Versionsgeschichte mit dem original <span class=
      "emphasis"><em>Repository</em></span> teilt:</p>
      <pre class="literallayout">
$ git-new-workdir ein/existierendes/repo neues/verzeichnis
</pre>

      <p>Das neue Verzeichnis und die Dateien darin kann man sich
      als <span class="emphasis"><em>Clone</em></span> vorstellen,
      mit dem Unterschied, dass durch die gemeinschaftliche
      Versionsgeschichte die beiden Versionen automatisch synchron
      bleiben. Eine Synchronisierung mittels <span class=
      "emphasis"><em>merge</em></span>, <span class=
      "emphasis"><em>push</em></span> oder <span class=
      "emphasis"><em>pull</em></span> ist nicht notwendig.</p>
    </div>

    <div class="section" title="Gewagte Kunststücke">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_gewagte_kunstst_cke"></a>Gewagte Kunststücke</h2>
          </div>
        </div>
      </div>

      <p>Heutzutage macht es Git dem Anwender schwer versehentlich
      Daten zu zerstören. Aber, wenn man weiß was man tut, kann man
      die Schutzmaßnahmen der häufigsten Anweisungen umgehen.</p>

      <p><span class="strong"><strong>Checkout</strong></span>:
      Nicht versionierte Änderungen lassen <span class=
      "emphasis"><em>checkout</em></span> scheitern. Um trotzdem
      die Änderungen zu zerstören und einen vorhandenen
      <span class="emphasis"><em>Commit</em></span> abzurufen,
      benutzen wir die <span class="emphasis"><em>force</em></span>
      Option:</p>
      <pre class="literallayout">
$ git checkout -f HEAD^
</pre>

      <p>Auf der anderen Seite, wenn Du einen speziellen Pfad für
      <span class="emphasis"><em>checkout</em></span> angibst, gibt
      es keinen Sicherheitsüberprüfungen mehr. Der angegebene Pfad
      wird stillschweigend überschrieben. Sei vorsichtig, wenn Du
      <span class="emphasis"><em>checkout</em></span> auf diese
      Weise benutzt.</p>

      <p><span class="strong"><strong>Reset</strong></span>: Reset
      versagt auch, wenn unversionierte Änderungen vorliegen. Um es
      zu erzwingen, verwende:</p>
      <pre class="literallayout">
$ git reset --hard 1b6d
</pre>

      <p><span class="strong"><strong>Branch</strong></span>:
      <span class="emphasis"><em>Branches</em></span> zu löschen
      scheitert ebenfalls, wenn dadurch Änderungen verloren gehen.
      Um das Löschen zu erzwingen, gib ein:</p>
      <pre class="literallayout">
$ git branch -D dead_branch  # instead of -d
</pre>

      <p>Ebenso scheitert der Versuch einen <span class=
      "emphasis"><em>Branch</em></span> durch ein <span class=
      "emphasis"><em>move</em></span> zu überschreiben, wenn das
      einen Datenverlust zur Folge hat. Um das Verschieben zu
      erzwingen, gib ein:</p>
      <pre class="literallayout">
$ git branch -M source target  # instead of -m
</pre>

      <p>Anders als bei <span class=
      "emphasis"><em>checkout</em></span> und <span class=
      "emphasis"><em>reset</em></span> verschieben diese beiden
      Anweisungen das Zerstören der Daten. Die Änderungen bleiben
      im .git Unterverzeichnis gespeichert und können wieder
      hergestellt werden, wenn der entsprechende SHA1-Wert aus
      <code class="literal">.git/logs</code> ermittelt wird (siehe
      "KOPF-Jagd" oben). Standardmäßig bleiben die Daten mindestens
      zwei Wochen erhalten.</p>

      <p><span class="strong"><strong>Clean</strong></span>:
      Verschiedene git Anweisungen scheitern, weil sie Konflikte
      mit unversionierten Dateien vermuten. Wenn Du sicher bist,
      dass alle unversionierten Dateien und Verzeichnisse
      entbehrlich sind, dann lösche diese gnadenlos mit:</p>
      <pre class="literallayout">
$ git clean -f -d
</pre>

      <p>Beim nächsten Mal werden diese lästigen Anweisung
      gehorchen!</p>
    </div>

    <div class="section" title="Verhindere schlechte Commits">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_verhindere_schlechte_emphasis_commits_emphasis"></a>Verhindere
            schlechte <span class=
            "emphasis"><em>Commits</em></span></h2>
          </div>
        </div>
      </div>

      <p>Dumme Fehler verschmutzen meine <span class=
      "emphasis"><em>Repositories</em></span>. Am schrecklichsten
      sind fehlende Dateien wegen eines vergessenen <span class=
      "strong"><strong>git add</strong></span>. Kleinere
      Verfehlungen sind Leerzeichen am Zeilenende und ungelöste
      <span class="emphasis"><em>merge</em></span>-Konflikte:
      obwohl sie harmlos sind, wünschte ich, sie würden nie in der
      Öffentlichkeit erscheinen.</p>

      <p>Wenn ich doch nur eine Trottelversicherung abgeschlossen
      hätte, durch Verwendung eines <span class=
      "emphasis"><em>hook</em></span>, der mich bei solchen
      Problemen alarmiert.</p>
      <pre class="literallayout">
$ cd .git/hooks
$ cp pre-commit.sample pre-commit  # Older Git versions: chmod +x pre-commit
</pre>

      <p>Nun bricht Git einen <span class=
      "emphasis"><em>Commit</em></span> ab, wenn es überflüssige
      Leerzeichen am Zeilenende oder ungelöste <span class=
      "emphasis"><em>merge</em></span>-Konflikte entdeckt.</p>

      <p>Für diese Anleitung hätte ich vielleicht am Anfang des
      <span class="strong"><strong>pre-commit</strong></span>
      <span class="emphasis"><em>hook</em></span> folgendes
      hinzugefügt, zum Schutz vor Zerstreutheit:</p>
      <pre class="literallayout">
if git ls-files -o | grep '\.txt$'; then
  echo FAIL! Untracked .txt files.
  exit 1
fi
</pre>

      <p>Viele Git Operationen unterstützen <span class=
      "emphasis"><em>hooks</em></span>; siehe <span class=
      "strong"><strong>git help hooks</strong></span>. Wir haben
      den Beispiel <span class="emphasis"><em>hook</em></span>
      <span class="strong"><strong>post-update</strong></span>
      aktiviert, weiter oben im Abschnitt Git über HTTP. Dieser
      läuft immer, wenn der <span class=
      "emphasis"><em>HEAD</em></span> sich bewegt. Das Beispiel
      <span class="emphasis"><em>post-update</em></span> Skript
      aktualisiert Dateien, welche Git für die Kommunikation über
      <span class="emphasis"><em>Git-agnostic
      transports</em></span> wie z.B. HTTP benötigt.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

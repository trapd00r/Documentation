From zsh-workers-return-24039-mason-zsh=primenet.com.au@sunsite.dk Wed Oct 31 00:13:21 2007
Return-Path: <zsh-workers-return-24039-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 29168 invoked from network); 31 Oct 2007 00:13:13 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.3 (2007-08-08) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 31 Oct 2007 00:13:13 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 74647 invoked from network); 31 Oct 2007 00:13:06 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 31 Oct 2007 00:13:06 -0000
Received: (qmail 760 invoked by alias); 31 Oct 2007 00:13:02 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 24039
Received: (qmail 720 invoked from network); 31 Oct 2007 00:13:00 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 31 Oct 2007 00:13:00 -0000
Received: (qmail 74331 invoked from network); 31 Oct 2007 00:13:00 -0000
Received: from acolyte.scowler.net (216.254.112.45)
  by a.mx.sunsite.dk with SMTP; 31 Oct 2007 00:12:55 -0000
Received: by acolyte.scowler.net (Postfix, from userid 1000)
	id 9F77C5C7F0; Tue, 30 Oct 2007 20:12:53 -0400 (EDT)
Date: Tue, 30 Oct 2007 20:12:53 -0400
From: Clint Adams <schizo@debian.org>
To: "Dr. Markus Waldeck" <waldeck@gmx.de>
Cc: zsh-workers@sunsite.dk
Subject: Re: Bug#448465: zsh completion for coreutils cut
Message-ID: <20071031001253.GA11141@scowler.net>
Mail-Followup-To: "Dr. Markus Waldeck" <waldeck@gmx.de>,
	zsh-workers@sunsite.dk
References: <20071029135638.GA27117@scowler.net> <20071030060305.273140@gmx.net> <20071030171505.GA3315@scowler.net> <20071030200829.208660@gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <20071030200829.208660@gmx.net>
User-Agent: Mutt/1.5.16 (2007-06-11)

On Tue, Oct 30, 2007 at 09:08:29PM +0100, Dr. Markus Waldeck wrote:
> _pick_variant requires that a program is verbose.
> 
> Please add the following lines.
> 
> if _pick_variant gnu="Free Soft" unix --version; then
>     case $LANG in
> ...
>             '--version['$_cut_args[version]']'
> fi

The alternate form is a poorly-done rendition for FreeBSD cut.

Index: Completion/Unix/Command/_cut
===================================================================
RCS file: /cvsroot/zsh/zsh/Completion/Unix/Command/_cut,v
retrieving revision 1.1
diff -u -r1.1 _cut
--- Completion/Unix/Command/_cut	29 Oct 2007 14:00:32 -0000	1.1
+++ Completion/Unix/Command/_cut	31 Oct 2007 00:11:06 -0000
@@ -2,38 +2,39 @@
 
 typeset -A _cut_args
 
-case $LANG in
-  (de_DE.UTF-8)
-     _cut_args=(
-           bytes           "nur diese Bytes ausgeben" 
-           characters      "nur diese Zeichen ausgeben" 
-           delimiter       "Delimiter anstelle von Tabulator als Trenner benutzen"
-           fields          "nur diese Felder und alle Zeilen OHNE Trennzeichen ausgeben"
-           n               "(ignoriert)"
-           complement      "das Komplement der Menge der gewählten Bytes, Zeichen oder Felder bilden"
-           only-delimited  "keine Zeilen ausgeben, die keinen Trenner enthalten"
-           output-delimiter "Zeichenkette als Ausgabetrennzeichen benutzen"
-           help            "diese Hilfe anzeigen und beenden"
-           version         "Versionsinformation anzeigen und beenden"
-     )
-  ;;
-  (*)
-     _cut_args=(
-           bytes           "select only these bytes"
-           characters      "select only these characters"
-           delimiter       "use DELIM instead of TAB for field delimiter"
-           fields          "select only these fields and lines whitout the delimiter character"
-           n               "(ignored)"
-           complement      "complement the set of selected bytes, characters or fields"
-           only-delimited  "do not print lines not containing delimiters"
-           output-delimiter "use STRING as the output delimiter"
-           help            "display this help and exit"
-           version         "output version information and exit"
-     )
-  ;;
-esac
+if _pick_variant gnu="Free Soft" unix --version; then
+  case $LANG in
+    (de_DE.UTF-8)
+       _cut_args=(
+             bytes           "nur diese Bytes ausgeben" 
+             characters      "nur diese Zeichen ausgeben" 
+             delimiter       "Delimiter anstelle von Tabulator als Trenner benutzen"
+             fields          "nur diese Felder und alle Zeilen OHNE Trennzeichen ausgeben"
+             n               "(ignoriert)"
+             complement      "das Komplement der Menge der gewählten Bytes, Zeichen oder Felder bilden"
+             only-delimited  "keine Zeilen ausgeben, die keinen Trenner enthalten"
+             output-delimiter "Zeichenkette als Ausgabetrennzeichen benutzen"
+             help            "diese Hilfe anzeigen und beenden"
+             version         "Versionsinformation anzeigen und beenden"
+       )
+    ;;
+    (*)
+       _cut_args=(
+             bytes           "select only these bytes"
+             characters      "select only these characters"
+             delimiter       "use DELIM instead of TAB for field delimiter"
+             fields          "select only these fields and lines whitout the delimiter character"
+             n               "(ignored)"
+             complement      "complement the set of selected bytes, characters or fields"
+             only-delimited  "do not print lines not containing delimiters"
+             output-delimiter "use STRING as the output delimiter"
+             help            "display this help and exit"
+             version         "output version information and exit"
+       )
+    ;;
+  esac
 
-_arguments \
+  _arguments \
         '(--bytes -b)'{--bytes=,-b}'['$_cut_args[bytes]']' \
         '(--characters -c)'{--characters=,-c}'['$_cut_args[characters]']' \
         '(--delimiter -d)'{--delimiter=,-d}'['$_cut_args[delimiter]']' \
@@ -44,3 +45,13 @@
         '--output-delimiter['$_cut_args[output-delimiter]']' \
         '--help['$_cut_args[help]']' \
         '--version['$_cut_args[version]']'
+else
+  _arguments \
+    '-b[list specifies byte positions]:list:' \
+    '-c[list specifies character positions]:list:' \
+    '-d[use alternate delimeter]:delimeter:' \
+    '-f[list specifies fields]:list:' \
+    '-n[do not split multi-byte characters]' \
+    '-s[suppress lines with no delimeters]' \
+    '*:file:_files'
+fi


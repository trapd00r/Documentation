From zsh-workers-return-26779-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 25 09:57:00 2009
Return-Path: <zsh-workers-return-26779-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24398 invoked from network); 25 Mar 2009 09:56:58 -0000
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 25 Mar 2009 09:56:58 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 64880 invoked from network); 25 Mar 2009 09:56:53 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 25 Mar 2009 09:56:53 -0000
Received: (qmail 8850 invoked by alias); 25 Mar 2009 09:56:48 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 26779
Received: (qmail 8839 invoked from network); 25 Mar 2009 09:56:48 -0000
Received: from bifrost.dotsrc.org (130.225.254.106)
  by sunsite.dk with SMTP; 25 Mar 2009 09:56:48 -0000
Received: from cluster-g.mailcontrol.com (cluster-g.mailcontrol.com [208.87.233.190])
	by bifrost.dotsrc.org (Postfix) with ESMTPS id E09F480590EB
	for <zsh-workers@sunsite.dk>; Wed, 25 Mar 2009 10:56:44 +0100 (CET)
Received: from cameurexb01.EUROPE.ROOT.PRI ([193.128.72.68])
	by rly23g.srv.mailcontrol.com (MailControl) with ESMTP id n2P9uSBZ016381
	for <zsh-workers@sunsite.dk>; Wed, 25 Mar 2009 09:56:41 GMT
Received: from news01 ([10.99.50.25]) by cameurexb01.EUROPE.ROOT.PRI with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 25 Mar 2009 09:53:41 +0000
Date: Wed, 25 Mar 2009 09:53:41 +0000
From: Peter Stephenson <pws@csr.com>
To: zsh-workers@sunsite.dk
Subject: Re: PATCH: Column alignment with print -c -P
Message-ID: <20090325095341.4aec13a0@news01>
In-Reply-To: <729130.32040.qm@web37303.mail.mud.yahoo.com>
References: <729130.32040.qm@web37303.mail.mud.yahoo.com>
Organization: CSR
X-Mailer: Claws Mail 3.5.0 (GTK+ 2.12.8; i386-redhat-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 25 Mar 2009 09:53:41.0517 (UTC) FILETIME=[9404A3D0:01C9AD2F]
X-Scanned-By: MailControl A_08_51_00 (www.mailcontrol.com) on 10.71.0.133
X-Virus-Scanned: ClamAV 0.92.1/9164/Wed Mar 25 05:02:31 2009 on bifrost
X-Virus-Status: Clean

On Tue, 24 Mar 2009 16:11:12 -0700 (PDT)
Michael Hwang <nomex45@yahoo.com> wrote:
> This fixes misaligned columns when using %B, %U, %S, %F, or %K prompt
> expansions with the -c/-C option of the print builtin. This fix only
> affects those who have multibyte enabled.

Thanks, that's an improvement: it ought in principle to be able to do this
by propagating the information that's generated for real prompts about the
presence of escape sequences.  However, that's an extremely minor case and
the print code is complicated enough already, so I've just made a comment
about it.

-- 
Peter Stephenson <pws@csr.com>                  Software Engineer
CSR PLC, Churchill House, Cambridge Business Park, Cowley Road
Cambridge, CB4 0WZ, UK                          Tel: +44 (0)1223 692070


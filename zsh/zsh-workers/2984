From zsh-workers-request@euclid.skiles.gatech.edu Wed Mar 12 13:47:25 1997
Return-Path: <zsh-workers-request@euclid.skiles.gatech.edu>
Delivered-To: mason@primenet.com.au
Received: (qmail 23216 invoked from network); 12 Mar 1997 13:47:23 -0000
Received: from euclid.skiles.gatech.edu (list@130.207.146.50)
  by coral.primenet.com.au with SMTP; 12 Mar 1997 13:47:23 -0000
Received: (from list@localhost) by euclid.skiles.gatech.edu (8.7.3/8.7.3) id IAA04632; Wed, 12 Mar 1997 08:35:22 -0500 (EST)
Resent-Date: Wed, 12 Mar 1997 08:35:22 -0500 (EST)
Message-Id: <199703121337.OAA25216@hydra.ifh.de>
To: zsh-workers@math.gatech.edu (Zsh hackers list)
Subject: stat module
Date: Wed, 12 Mar 1997 14:37:53 +0100
From: Peter Stephenson <pws@ifh.de>
Resent-Message-ID: <"gjK9g3.0.G81.Q4h9p"@euclid>
Resent-From: zsh-workers@math.gatech.edu
X-Mailing-List: <zsh-workers@math.gatech.edu> archive/latest/2984
X-Loop: zsh-workers@math.gatech.edu
Precedence: list
Resent-Sender: zsh-workers-request@math.gatech.edu

Here's a zsh module which implements a builtin `stat' command as a
front end to the `stat' system call; the tar file contains the module,
a YODL manual page and a function zll which implements ls -l entirely
within the shell (with no new processes).  I have not attempted to
integrate these into the zsh hierarchy, though you can simply move
stat.c to Src/Modules and type `make stat.so'.

I wrote this mainly because I thought that getting the properties of
files was just the sort of thing one needs quickly for compctl and (in
future) zle functions.  However, this turns out to be essentially moot
since the rest of zsh runs so slowly:  you can stat a hundred files in
a flash but it takes an age (say) to find out which of the dates is
the most recent.  Try `zll *' and you will see what I mean.

Nonetheless, it may be nice to have such capabilities within the shell
as a counterpart to Zefram's files module.

There's an external stat in IRIX; I didn't try and make it compatible
because I thought my syntax for selecting particular stat elements was
much clearer.

begin 644 stat.tar.gz
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
'>WL.`'@``$$B
`
end

-- 
Peter Stephenson <pws@ifh.de>       Tel: +49 33762 77366
WWW:  http://www.ifh.de/~pws/       Fax: +49 33762 77413
Deutsches Elektronen-Synchrotron --- Institut fuer Hochenergiephysik Zeuthen
DESY-IfH, 15735 Zeuthen, Germany.


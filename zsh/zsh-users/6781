From zsh-users-return-6781-mason-zsh=primenet.com.au@sunsite.dk Mon Nov 17 15:44:28 2003
Return-Path: <zsh-users-return-6781-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 13852 invoked from network); 17 Nov 2003 15:44:27 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 17 Nov 2003 15:44:27 -0000
Received: (qmail 3026 invoked by alias); 17 Nov 2003 15:44:07 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 6781
Received: (qmail 2999 invoked from network); 17 Nov 2003 15:44:06 -0000
Received: from localhost (HELO sunsite.dk) (127.0.0.1)
  by localhost with SMTP; 17 Nov 2003 15:44:06 -0000
X-MessageWall-Score: 0 (sunsite.dk)
Received: from [193.109.254.211] by sunsite.dk (MessageWall 1.0.8) with SMTP; 17 Nov 2003 15:44:6 -0000
X-VirusChecked: Checked
X-Env-Sender: okiddle@yahoo.co.uk
X-Msg-Ref: server-14.tower-36.messagelabs.com!1069083844!1885212
X-StarScan-Version: 5.1.13; banners=-,-,-
Received: (qmail 23711 invoked from network); 17 Nov 2003 15:44:04 -0000
Received: from iris.logica.co.uk (158.234.9.163)
  by server-14.tower-36.messagelabs.com with SMTP; 17 Nov 2003 15:44:04 -0000
Received: from gmcs3.local ([158.234.142.61])
	by iris.logica.co.uk (8.12.3/8.12.3/Debian -4) with ESMTP id hAHFi4Ab011610;
	Mon, 17 Nov 2003 15:44:04 GMT
Received: from gmcs3.local (localhost [127.0.0.1])
	by gmcs3.local (8.11.6/8.11.6/SuSE Linux 0.5) with ESMTP id hAHFle515746;
	Mon, 17 Nov 2003 16:47:40 +0100
X-VirusChecked: Checked
X-StarScan-Version: 5.0.7; banners=.,-,-
In-reply-to: <20031114154608.GA6959@lorien.emufarm.org> 
From: Oliver Kiddle <okiddle@yahoo.co.uk>
References: <20030523160020.GA9026@borho.org> <20030523160155.GA14388@lorien.emufarm.org> <20031106153225.GA491@lorien.emufarm.org> <1281.1068232665@athlon> <20031110182013.GA20547@lorien.emufarm.org> <9219.1068538977@gmcs3.local> <20031111162338.GD23138@lorien.emufarm.org> <901.1068577572@athlon> <20031111212828.GA28125@lorien.emufarm.org> <29114.1068797096@gmcs3.local> <20031114154608.GA6959@lorien.emufarm.org>
To: Danek Duvall <duvall@emufarm.org>
cc: zsh-users@sunsite.dk
Subject: Re: Completion function for bitkeeper? 
Date: Mon, 17 Nov 2003 16:47:40 +0100
Message-ID: <15744.1069084060@gmcs3.local>

On 14 Nov, Danek Duvall wrote:
> 
> > Having $expl stuff added after the first word is exactly the behaviour
> > that is wanted in virtually 100% of all cases.
> 
> So let me ask, what am I doing wrong that makes me believe that I don't
> want it in my case?  Is there a conventional way of passing arguments to
> an action helper function and not getting them mixed up with arguments
> intended for compadd?  Is there functionality I'm missing because I'm
> not doing the conventional thing?

You're not doing something wrong so much as different. Firstly, the
most common case is that there are no options other than compadd
options to get mixed up with so having $expl added is what is wanted.

You wanted the compadd options after your own extra option because it
made it easier to find your option--it would always be the first one.
That made your helper function simpler but puts the onus on the calling
functions to get the options in the right order.

Normally, we put the onus on the helper function to sort out mixed up
options and we have zparseopts to make the job easy. That's better in
my opinion. If you found a Unix program which had two independent and
unrelated options -a and -b and the program couldn't cope with them
being specified in the order -b followed by -a, you wouldn't think it
was very good would you?

Does that make sense?

Oliver 


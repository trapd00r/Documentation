From zsh-workers-return-13636-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 14 17:34:17 2001
Return-Path: <zsh-workers-return-13636-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7567 invoked from network); 14 Mar 2001 17:34:16 -0000
Received: from sunsite.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 14 Mar 2001 17:34:16 -0000
Received: (qmail 12682 invoked by alias); 14 Mar 2001 17:34:11 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 13636
Received: (qmail 12671 invoked from network); 14 Mar 2001 17:34:10 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <1010314173347.ZM1528@candle.brasslantern.com>
Date: Wed, 14 Mar 2001 17:33:46 +0000
In-Reply-To: <Tc0a88d0152492c5ed7@mailsweeper01.cambridgesiliconradio.com>
Comments: In reply to Peter Stephenson <pws@csr.com>
        "Re: Troublesome Key Bindings" (Mar 14, 10:44am)
References: <Tc0a88d0152492c5ed7@mailsweeper01.cambridgesiliconradio.com>
X-Mailer: Z-Mail (5.0.0 30July97)
To: zsh-workers@sunsite.dk (Zsh hackers list)
Subject: Re: Troublesome Key Bindings
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Mar 14, 10:44am, Peter Stephenson wrote:
} Subject: Re: Troublesome Key Bindings
}
} "Zvi Har'El" <rl@math.technion.ac.il> wrote:
} > I am using zsh in vi insert mode (being an fanatic ViM user). After
} > doing compinit, which introduced many new key binding, I started
} > having troubles in history searches: Although most of the new
} > bindings have the prefix ^X, there are three with a prefix ^[, i.e.,
} > the escape character. These are
} > 
} > 	"^[," _history-complete-newer
} > 	"^[/" _history-complete-older

These two bindings come from the #compdef line in _history_complete_word.
I don't recall why those keystrokes were chosen, but they're certainly
bad for vi mode.

There are a number of things we could do ... the most obvious would be to
simply remove the #compdef from _history_complete_word (replace it with
#autoload).  Better perhaps would be to add -e and -v options to compdef 
to specify the keymap in which the binding is to take place, but it might
be hard to come up with an unambiguous syntax for specifying different
bindings in the two modes with the same #compdef.

} So for the first two, you can simply use bindkey to map them to something
} else straight away:
}   bindkey '^X/' _history-complete-older

Of course you also need to "bindkey -r" the old binding, as you're already
doing.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com

Zsh: http://www.zsh.org | PHPerl Project: http://phperl.sourceforge.net   


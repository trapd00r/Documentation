From zsh-workers-return-16950-mason-zsh=primenet.com.au@sunsite.dk Tue Apr 09 11:46:07 2002
Return-Path: <zsh-workers-return-16950-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 1855 invoked from network); 9 Apr 2002 11:46:07 -0000
Received: from sunsite.dk (130.225.247.90)
  by ns1.primenet.com.au with SMTP; 9 Apr 2002 11:46:07 -0000
Received: (qmail 19792 invoked by alias); 9 Apr 2002 11:45:58 -0000
Mailing-List: contact zsh-workers-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.dk
X-Seq: 16950
Received: (qmail 19779 invoked from network); 9 Apr 2002 11:45:58 -0000
X-VirusChecked: Checked
Date: Tue, 9 Apr 2002 12:45:26 +0100
From: Oliver Kiddle <okiddle@totalise.co.uk>
To: Akim Demaille <akim@epita.fr>
Cc: zsh-workers@sunsite.dk, ab@purdue.edu, bug-autoconf@gnu.org
Subject: Re: Zsh 3 and ${1+"$@"} (Was: [GNU Autoconf 2.53] testsuite.log: 126 failures)
Message-ID: <20020409114526.GA30136@logica.com>
References: <28727.1018348543@csr.com> <mv44rilxhzo.fsf@nostromo.lrde.epita.fr>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <mv44rilxhzo.fsf@nostromo.lrde.epita.fr>
User-Agent: Mutt/1.3.28i
Sender: Oliver Kiddle <kiddleo@logica.com>

On Tue, Apr 09, 2002 at 12:51:23PM +0200, Akim Demaille wrote:
> 
> | > We (Autoconf) have a big problem with Zsh 3.0.8.  You know it is
> | > shipped on Darwin as /bin/sh.  But this version does not understand
> | > ${1+"$@"} properly.  We use this instead of "$@" to work around a bug
> | > which still exists today in many many constructors' /bin/sh, so we
> | > can't departure from it.

One idea would be if you can use a global alias, e.g.:
  [ x$ZSH_VERSION != x ] && alias -g '${1:"$@"}'='$=@'

Is the ${1+"$@"} always used as a word on its own? The rhs of the alias
may have to be something different - I didn't entirely understand the
problem but you'd have the full flexibility of zsh 3.0.8 expansions so
I'd be suprised if it couldn't be made to work.

> Finally, one question: do you know if Apple plans to continue with Zsh
> 3?  Why did they stick to it?

I think they plan to switch to bash. Not that that helps you much because
Apple's running older versions of Mac OS X will continue to exist for a
while beyond that.

I don't know why they stuck with zsh 4. Perhaps all the shell functions
in zsh 4 scared them off. Solaris also continues with zsh 3 but there
it is only installed as /usr/bin/zsh.

Oliver

-- 

This e-mail and any attachment is for authorised use by the intended recipient(s) only.  It may contain proprietary material, confidential information and/or be subject to legal privilege.  It should not be copied, disclosed to, retained or used by, any other party.  If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender.  Thank you.


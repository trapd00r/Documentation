From zsh-workers-return-7644-mason-zsh=primenet.com.au@sunsite.auc.dk Sat Sep 04 09:29:50 1999
Return-Path: <zsh-workers-return-7644-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 24331 invoked from network); 4 Sep 1999 09:29:49 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 4 Sep 1999 09:29:49 -0000
Received: (qmail 27161 invoked by alias); 4 Sep 1999 09:29:35 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 7644
Received: (qmail 27148 invoked from network); 4 Sep 1999 09:29:33 -0000
From: "Bart Schaefer" <schaefer@candle.brasslantern.com>
Message-Id: <990904092922.ZM26787@candle.brasslantern.com>
Date: Sat, 4 Sep 1999 09:29:22 +0000
In-Reply-To: <199909040206.WAA18150@ocalhost>
Comments: In reply to Timothy J Luoma <tjlists@bigfoot.com>
        "completion killing zsh" (Sep  3, 10:06pm)
References: <199909040206.WAA18150@ocalhost>
X-Mailer: Z-Mail (5.0.0 30July97)
To: Timothy J Luoma <tjlists@bigfoot.com>, zsh-workers@sunsite.auc.dk
Subject: Re: completion killing zsh
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

On Sep 3, 10:06pm, Timothy J Luoma wrote:
} Subject: completion killing zsh
}
} Don't ask me why, but [...]

This message looks very familiar, but I can't figure out how to search
for the similar one.  Didn't someone else some months ago ask about a
compctl that had 'S[-]' just sort of floating out there like this?

} compctl -K allmbox  'S[-]' -- compactmail appnmail

Is there an example somewhere on which you based this attempt, that you
can point us to so we can fix it?  More specifically, what gave you the
idea that 'S[-]' would be useful without the -x option?

} when I try this completion (ie: I hit 'tab' after  
} 'ivvvv' below) zsh dies:
} 
} (zsh = 3.1.5-pws-20)

That release is from early June.  There have been at least 60 patches to
zle_tricky.c alone, since then.  The first thing you need to do is grab
at least 3.1.6 from ftp.zsh.org.

} compctl -K allmbox  'S[-]' -- compactmail appnmail
} 
} what am I doing wrong here?

The allmbox function is fine, but that comptl is the same as

	compctl -K allmbox - --
	compctl -K allmbox 'S[-]'
	compctl -K allmbox appnmail
	compctl -K allmbox compactmail

That is, the 'S[-]' and the '--' are being taken as command names.  The
pattern forms like S[-] are only interpreted following a -x option.
That still shouldn't cause a crash (and probably is not a factor), but
it's not doing any good there.

You might have meant something like

    compctl -K allmbox -x 'S[-]' -k '(-i -v)' -- appnmail compactmail

Which means, "complete using the allmbox function UNLESS the current
word starts with '-', in which case complete from the array (-i -v),"
but I don't know quite what you were trying to accomplish.

-- 
Bart Schaefer                                 Brass Lantern Enterprises
http://www.well.com/user/barts              http://www.brasslantern.com


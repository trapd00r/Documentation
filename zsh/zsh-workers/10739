From zsh-workers-return-10739-mason-zsh=primenet.com.au@sunsite.auc.dk Thu Apr 13 14:29:48 2000
Return-Path: <zsh-workers-return-10739-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 10485 invoked from network); 13 Apr 2000 14:29:47 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 13 Apr 2000 14:29:47 -0000
Received: (qmail 26676 invoked by alias); 13 Apr 2000 14:29:38 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 10739
Received: (qmail 26657 invoked from network); 13 Apr 2000 14:29:37 -0000
To: zsh-workers@sunsite.auc.dk
Path: mason
From: mason@primenet.com.au (Geoff Wing)
X-Newsgroups: lists.zsh.workers
Subject: Re: dev-22 compile problem
Date: 13 Apr 2000 14:29:27 GMT
Organization: PrimeNet Computer Consultants
Lines: 57
Distribution: local
Message-ID: <slrn8fbme6.a40.mason@coral.primenet.com.au>
References: <000412171528.ZM12739@candle.brasslantern.com>; from schaefer@candle.brasslantern.com on Wed, Apr 12, 2000 at 05:15:28PM -0700 <20000413091000.A26151@oobleck.gatech.edu>
Reply-To: mason@primenet.com.au
NNTP-Posting-Host: coral.primenet.com.au
X-Trace: coral.primenet.com.au 955636167 10369 203.43.15.2 (13 Apr 2000 14:29:27 GMT)
X-Complaints-To: usenet@coral.primenet.com.au
NNTP-Posting-Date: 13 Apr 2000 14:29:27 GMT
User-Agent: slrn/0.9.6.2 (NetBSD)

Jason Price <jprice@cyberbuzz.gatech.edu> typed:
:On Wed, Apr 12, 2000 at 05:15:28PM -0700, Bart Schaefer wrote:
:> On Apr 12,  4:29pm, Jason Price wrote:
:> > Subject: dev-22 compile problem
:> > hashtable.c:1191: structure has no member named `en_cols'
:> Apparently no one else is building zsh with HAVE_NIS_PLUS.
:> Try deleting half of the .en_cols.en_cols on line 1191 of hashtable.c.
:The line now looks like:
:    if (object->zo_data.objdata_u.en_data.en_cols >= 6) {
:As opposed to:
:    if (object->zo_data.objdata_u.en_data.en_cols.en_cols >= 6) {
:And the error returned is:

I guess it should be something like:

 if (object->zo_data.objdata_u.en_data.en_cols.en_cols_len >= 6) {

The check with 6 to make sure there are 6+ columns because we later access
the 6th column.


Quick look a Sun docs (docs.sun.com):

union {
	struct directory_obj     di_data;
	struct group_obj         gr_data;
	struct table_obj         ta_data;
	struct entry_obj         en_data;
	struct link_obj          li_data;
	struct {
		u_int              po_data_len;
		char               * po_data_val;
	} po_data;
} objdata_u;

struct entry_col {
	u_long     ec_flags;
	struct {
		u_int      ec_value_len;
		char       * ec_value_val;
	} ec_value;
}
typedef struct entry_col entry_col;

struct entry_obj {
	char       * en_type;
	struct {
		u_int      en_cols_len;
		entry_col * en_cols_val;
	} en_cols;
}


-- 
Geoff Wing : <gcw@pobox.com>     Work URL: http://www.primenet.com.au/
Rxvt Stuff : <gcw@rxvt.org>      Ego URL : http://pobox.com/~gcw/
Zsh Stuff  : <gcw@zsh.org>       Phone   : (Australia) 0413 431 874


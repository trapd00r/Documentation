From zsh-users-return-8630-mason-zsh=primenet.com.au@sunsite.dk Wed Mar 23 14:39:25 2005
Return-Path: <zsh-users-return-8630-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 6113 invoked from network); 23 Mar 2005 14:39:24 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 23 Mar 2005 14:39:24 -0000
Received: (qmail 84647 invoked from network); 23 Mar 2005 14:39:16 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 23 Mar 2005 14:39:16 -0000
Received: (qmail 337 invoked by alias); 23 Mar 2005 14:39:09 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 8630
Received: (qmail 327 invoked from network); 23 Mar 2005 14:39:08 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 23 Mar 2005 14:39:08 -0000
Received: (qmail 83593 invoked from network); 23 Mar 2005 14:39:08 -0000
Received: from wproxy.gmail.com (64.233.184.197)
  by a.mx.sunsite.dk with SMTP; 23 Mar 2005 14:39:04 -0000
Received: by wproxy.gmail.com with SMTP id 71so253308wra
        for <zsh-users@sunsite.dk>; Wed, 23 Mar 2005 06:39:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=Rj/8bhbOXTts6jxlomGK3crUk81z18o2Jiolg3/rN2Wbsvmn8GeZhrMKgGbEIuGXRAxIXoSTaxKesK97Hh0+AcKe5KZhWqGk9MpLuxlsjDA3g7y1kmWTgUvmNYXGhC5B5n5cPfPX/zoVtXzEtuAdzyj894MUN+t8ZfNq3Nj7MQ0=
Received: by 10.54.100.11 with SMTP id x11mr333903wrb;
        Wed, 23 Mar 2005 06:39:03 -0800 (PST)
Received: by 10.54.36.7 with HTTP; Wed, 23 Mar 2005 06:39:03 -0800 (PST)
Message-ID: <44613de0050323063910991816@mail.gmail.com>
Date: Wed, 23 Mar 2005 09:39:03 -0500
From: Shawn Halpenny <paxunix@gmail.com>
Reply-To: Shawn Halpenny <paxunix@gmail.com>
To: zsh-users@sunsite.dk
Subject: (P) param expansion with assoc-arrays
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.2 on a.mx.sunsite.dk
X-Spam-Level: 
X-Spam-Status: No, score=-2.1 required=6.0 tests=AWL,BAYES_00,RCVD_BY_IP 
	autolearn=ham version=3.0.2
X-Spam-Hits: -2.1

Given:

typeset -A hash
hash=( a 1 b 2 c 3 )

blah="hash"

Doing:
echo ${${(P)blah}[b]}

Outputs:
1

But I'm expecting it to say '2'.  It seems to me that once ${(P)blah}
is expanded, the fact that the final expansion is an associative array
has been lost.

How can I get that expression to return '2'?

-- 
Shawn Halpenny


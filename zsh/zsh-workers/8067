From zsh-workers-return-8067-mason-zsh=primenet.com.au@sunsite.auc.dk Mon Sep 27 14:21:24 1999
Return-Path: <zsh-workers-return-8067-mason-zsh=primenet.com.au@sunsite.auc.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 17408 invoked from network); 27 Sep 1999 14:21:05 -0000
Received: from sunsite.auc.dk (130.225.51.30)
  by ns1.primenet.com.au with SMTP; 27 Sep 1999 14:21:05 -0000
Received: (qmail 12472 invoked by alias); 27 Sep 1999 14:20:47 -0000
Mailing-List: contact zsh-workers-help@sunsite.auc.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-workers@sunsite.auc.dk
X-Seq: 8067
Received: (qmail 12465 invoked from network); 27 Sep 1999 14:20:44 -0000
Message-Id: <9909271344.AA19699@ibmth.df.unipi.it>
To: zsh workers mailing list <zsh-workers@sunsite.auc.dk>
Subject: Re: PATCH: _man copes with : delimited manpath 
In-Reply-To: "Adam Spiers"'s message of "Mon, 27 Sep 1999 14:17:24 DFT."
             <19990927141724.B10336@thelonious.new.ox.ac.uk> 
Date: Mon, 27 Sep 1999 15:44:57 +0200
From: Peter Stephenson <pws@ibmth.df.unipi.it>

Adam Spiers wrote:
> On my system, `manpath' generates colon-delimited paths, rather than
> space-delimited ones.  This patch solves that problem.  It also fixes
> what I think is a typo, but someone should check this.

You'll need to add this.  mp doesn't get split into words the first time
unless you use an array.

--- Completion/User/_man~	Mon Sep 27 15:41:48 1999
+++ Completion/User/_man	Mon Sep 27 15:42:53 1999
@@ -15,7 +15,7 @@
 fi
 
 if (( ! $#manpath )); then
-  local mp=$(manpath 2>/dev/null)
+  local mp=($(manpath 2>/dev/null))
   [[ "$mp" == *:* ]] && mp=( ${(s.:.)mp} )
   manpath=( $mp )
 fi

-- 
Peter Stephenson <pws@ibmth.df.unipi.it>       Tel: +39 050 844536
WWW:  http://www.ifh.de/~pws/
Dipartimento di Fisica, Via Buonarroti 2, 56127 Pisa, Italy


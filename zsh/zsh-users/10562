From zsh-users-return-10562-mason-zsh=primenet.com.au@sunsite.dk Sun Jul 30 18:57:53 2006
Return-Path: <zsh-users-return-10562-mason-zsh=primenet.com.au@sunsite.dk>
Delivered-To: mason-zsh@primenet.com.au
Received: (qmail 7517 invoked from network); 30 Jul 2006 18:57:52 -0000
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on f.primenet.com.au
X-Spam-Level: 
X-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,
	FORGED_RCVD_HELO autolearn=ham version=3.1.3
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by ns1.primenet.com.au with SMTP; 30 Jul 2006 18:57:52 -0000
Received-SPF: none (ns1.primenet.com.au: domain at sunsite.dk does not designate permitted sender hosts)
Received: (qmail 86033 invoked from network); 30 Jul 2006 18:57:43 -0000
Received: from sunsite.dk (130.225.247.90)
  by a.mx.sunsite.dk with SMTP; 30 Jul 2006 18:57:43 -0000
Received: (qmail 23569 invoked by alias); 30 Jul 2006 18:57:36 -0000
Mailing-List: contact zsh-users-help@sunsite.dk; run by ezmlm
Precedence: bulk
X-No-Archive: yes
Delivered-To: mailing list zsh-users@sunsite.dk
X-Seq: 10562
Received: (qmail 23559 invoked from network); 30 Jul 2006 18:57:35 -0000
Received: from news.dotsrc.org (HELO a.mx.sunsite.dk) (130.225.247.88)
  by sunsite.dk with SMTP; 30 Jul 2006 18:57:35 -0000
Received: (qmail 85013 invoked from network); 30 Jul 2006 18:57:35 -0000
Received: from viefep13-int.chello.at (HELO viefep11-int.chello.at) (213.46.255.16)
  by a.mx.sunsite.dk with SMTP; 30 Jul 2006 18:57:32 -0000
Received: from shodan ([213.47.104.218]) by viefep11-int.chello.at
          (InterMail vM.6.01.05.04 201-2131-123-105-20051025) with ESMTP
          id <20060730185731.ODTW4985.viefep11-int.chello.at@shodan>
          for <zsh-users@sunsite.dk>; Sun, 30 Jul 2006 20:57:31 +0200
From: Christian Taylor <cht@chello.at>
To: zsh-users@sunsite.dk
Subject: segfault on repeated tab completion after menu selection
Date: Sun, 30 Jul 2006 20:56:10 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200607302056.10331.cht@chello.at>
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I use zsh 4.2.6 on Linux (vanilla 2.6.17.7 kernel). Under the following=20
circumstances I can reliably produce a segfault:

% zsh -f
% autoload -U compinit; compinit
% bindkey '+' accept-and-infer-next-history
% zstyle ':completion:*' menu select yes=3Dlong
% zstyle ':completion:*:warnings' format 'No matches for: %d'

% cd <some directory with files/subdirectories in it>
% mkdir xyz
% ls <TAB><TAB>
=46rom the menu, select the empty xyz directory, hit "+". zsh accepts the=20
selection and says that there are no further matches in that directory.
At this point, pressing either "+<TAB>" or "<TAB><TAB>" will result in:
zsh: segmentation fault  zsh -f
as the second instance of zsh terminates with exit code 139.
I guess this won't occur too often, especially since a custom "warnings"=20
format string seems to be necessary to reproduce it.

If any further information is required, please let me know!

Best regards,
Christian

